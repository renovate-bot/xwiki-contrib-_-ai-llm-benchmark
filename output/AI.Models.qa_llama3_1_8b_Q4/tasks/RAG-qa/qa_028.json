{
  "id": "qa_028",
  "prompt": "Comment puis-je m'assurer que seuls les fichiers image ou PDF d'une taille maximale de 10 Mo peuvent \u00eatre t\u00e9l\u00e9charg\u00e9s en tant que pi\u00e8ces jointes sur l'ensemble du wiki?",
  "expected_answer": "Pour vous assurer que seuls les fichiers image ou PDF d'une taille maximale de 10 Mo peuvent \u00eatre t\u00e9l\u00e9charg\u00e9s en tant que pi\u00e8ces jointes sur l'ensemble du wiki, suivez ces \u00e9tapes:\n\n**\u00c9tape 1: Configurer les types MIME autoris\u00e9s**\n\nModifiez le fichier de configuration `xwiki.properties` dans votre installation et ajoutez ou mettez \u00e0 jour la ligne suivante pour configurer les restrictions de type MIME par d\u00e9faut au niveau de la ferme:\n```\nattachment.upload.allowList=image/*,application/pdf\n```\nCela permettra uniquement les fichiers image (avec n'importe quel sous-type, par exemple `image/jpeg`, `image/png`, etc.) et les fichiers PDF \u00e0 t\u00e9l\u00e9charger, et bloquera tous les autres types MIME.\n\n**\u00c9tape 2: Configurer la taille maximale de la pi\u00e8ce jointe**\n\nPour d\u00e9finir la taille maximale de la pi\u00e8ce jointe sur 10 Mo, suivez ces \u00e9tapes:\n\n1. Allez sur `http://<votrewiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object`\n2. Cliquez sur la ligne qui dit XWikiPreferences 0 (juste en dessous de la ligne qui dit Objects of type XWiki.XWikiPreferences (1))\n3. Faites d\u00e9filer jusqu'au champ qui dit Maximum Upload Size et changez le nombre en `10485760` (10 Mo en octets)\n4. Faites d\u00e9filer jusqu'en bas et cliquez sur \"Enregistrer\"\n5. R\u00e9p\u00e9tez pour chaque (sous-)wiki pour lequel vous devez d\u00e9finir cette configuration!",
  "ai_answer": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/ \n\n\nPour limiter la taille des fichiers pouvant \u00eatre charg\u00e9s comme pi\u00e8ces jointes sur votre wiki, vous pouvez mettre en place des contr\u00f4les \u00e0 diff\u00e9rents niveaux : au niveau de l'utilisateur avec les param\u00e8tres des utilisateurs, au niveau du contenu avec des filtres sur le fichier, ou m\u00eame au niveau du code avec une v\u00e9rification sp\u00e9cifique avant l'enregistrement. Voici quelques fa\u00e7ons de proc\u00e9der :\n\n### 1. Utilisation de param\u00e8tres d'utilisateurs\n\n**Si vous utilisez MediaWiki (la plupart des wikis) :**\n\n- **Option 1** : Modifiez la configuration de votre wiki pour utiliser `maxUploadFileSize` dans le fichier `LocalSettings.php`. Vous pouvez y ajouter la ligne suivante :\n\n```php\n$wgMaxImageUploadSize = 10 * 1024 * 1024; // \u00c9quivalent \u00e0 10 Mo\n```\n\nCette valeur limite la taille maximale des fichiers images (comme JPG, PNG, etc.) et PDF pouvant \u00eatre t\u00e9l\u00e9charg\u00e9s. Lorsque vous sauvegardez les modifications de `LocalSettings.php`, ex\u00e9cutez toujours une commande MediaWiki comme `php maintenance/update.php` pour que les modifications prennent effet.\n\n- **Option 2** : Pour contr\u00f4ler la taille des fichiers pour tous types (non seulement les images), modifiez le param\u00e8tre `$wgMaxUploadSize`. Cependant, cette approche est plus globale et peut n\u00e9cessiter d'autres ajustements. La ligne serait :\n\n```php\n$wgMaxUploadSize = 10 * 1024 * 1024; // \u00c9quivalent \u00e0 10 Mo\n```\n\n### 2. Utilisation de filtres sur le fichier (si vous utilisez MediaWiki)\n\nPour limiter les types de fichiers autoris\u00e9s au t\u00e9l\u00e9chargement, vous pouvez configurer un filtre de type dans `$wgFileTypesAllowed`. Cependant, pour restreindre la taille plut\u00f4t que les types, ce n'est pas directement appropri\u00e9.\n\n### 3. Mise en \u0153uvre d'une v\u00e9rification sp\u00e9cifique\n\nSi des contr\u00f4les plus sophistiqu\u00e9s sont n\u00e9cessaires ou si vous utilisez un framework Web personnalis\u00e9 et non MediaWiki, vous pouvez effectuer une v\u00e9rification sur le code qui traite les t\u00e9l\u00e9chargements de fichiers. Cependant, cette approche est g\u00e9n\u00e9ralement plus complexe et moins pr\u00e9f\u00e9r\u00e9e car elle n\u00e9cessiterait un acc\u00e8s direct aux op\u00e9rations d'upload du site.\n\n### Conclusion\n\nLa meilleure approche d\u00e9pend de votre syst\u00e8me wiki (si MediaWiki) ou de votre framework Web sp\u00e9cifique. Les param\u00e8tres des utilisateurs sont g\u00e9n\u00e9ralement la ligne de conduite la plus simple pour limiter les tailles, tout en restant flexible pour d'autres ajustements potentiels.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.XWikiSyntax.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/",
      "content": "| [notificationsSystemFiltersPreferences](https://www.xwiki.org/xwiki/bin/view/XWiki/Notifications/Code/NotificationsSystemFiltersPreferencesMacro) | Notifications System Filters Preferences | Notifications | Display the preferences of the given user about system notification filters. | Current Wiki |\n| office | Office Document Viewer | Content | View office attachments (doc, ppt, xls, odt, odp, ods etc.) inside wiki pages without downloading or importing them. | Global |\n| pdftoc | PDF Table of Contents | Internal | Generates the table of contents for the PDF export. | Global |\n| [pdfviewer](https://www.xwiki.org/xwiki/bin/view/XWiki/PDFViewerMacro) | PDF Viewer | Content | PDF Viewer based on Mozilla pdf.js | Current Wiki |\n| plantuml | PlantUML | Content | Convert various text input formats into diagram images using PlantUML. | Global |\n| [pollsrecent](https://www.xwiki.org/xwiki/bin/view/XPoll/RecentPollsMacro) | Recent Polls |  | Displays the N most recent polls. | Current Wiki |\n| [poweredBy](https://www.xwiki.org/xwiki/bin/view/XWikiOrgCode/PoweredBy) | Powered By |  | Displays a random reference summary | Global |\n| [productVersions](https://www.xwiki.org/xwiki/bin/view/Macros/ProductVersionMacro/) | Product Versions | content | Display product versions for testing | Global |\n| putFootnotes | Put Footnotes | Content | Displays all the footnotes from the page. If missing, all footnotes are displayed by default at the end of the page. | Global |\n| python | Python | Development | Executes a python script. | Global |\n| [releasenotechanges](https://www.xwiki.org/xwiki/bin/view/ReleaseNotes/Code/Change/ReleaseNotesChangesMacro) | Release Note Changes | content |  | Current Wiki |\n| [remotecode](https://www.xwiki.org/xwiki/bin/view/XWiki/RemoteCodeMacro) | Remote Code |  | Displays the code (using the code macro) of a remote file | Global |\n| [scm](https://www.xwiki.org/xwiki/bin/view/Macros/SCM) | scm | Documentation | Produce scm link | Global |\n",
      "similarity_score": 0.6870321035385132,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Configuration.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/",
      "content": "### Customize the PDF Cover\n\nThis could be useful when you want for instance to add the company&#x27;s logo to the PDF cover. In order to do this, the template pdfcover.vm must be overridden. Just like for the PDF header, a &quot;TextArea&quot; property named pdfcover.vm must be added to the XWiki.XWikiSkins class (e.g. *http://yourserver/xwiki/bin/view/XWiki/XWikiSkins?editor=class*).\n\n![OverridePDFCover.png](https://www.xwiki.org/xwiki/bin/download/Documentation/AdminGuide/Configuration/WebHome/OverridePDFCover.png?rev=1.2)\n\nNext, edit the skin page (e.g. *http://yourserver/xwiki/bin/edit/XWiki/DefaultSkin?editor=object*) and add the following code to the pdfcover.vm property:\n\n&lt;img src=&quot;$xwiki.getSkinFile(&quot;logo.png&quot;)&quot;/&gt;  \n  \n&lt;div style=&quot;text-align: center; width: 100%;&quot;&gt;  \n&lt;h1&gt;  \n#set($title = &quot;$!pdfdoc.display(&#x27;title&#x27;, &#x27;rendered&#x27;)&quot;)  \n#if($title == &#x27;&#x27;)  \n \u00a0$escapetool.xml($!doc.displayTitle)  \n#else  \n \u00a0$escapetool.xml($title)  \n#end  \n&lt;/h1&gt;  \n&lt;br /&gt;  \n&lt;br /&gt;  \n$!xwiki.getUserName($tdoc.author, false)  \n&lt;br /&gt;  \n$!xwiki.formatDate($tdoc.date)  \n&lt;/div&gt;The last step consists of attaching the image &quot;logo.png&quot; to the skin:\n\n![OverridePDFCoverFinal.png](https://www.xwiki.org/xwiki/bin/download/Documentation/AdminGuide/Configuration/WebHome/OverridePDFCoverFinal.png?rev=1.2)\n\n",
      "similarity_score": 0.6527472734451294,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.DocumentLifecycle.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/",
      "content": "## By adding a wanted link\n\nYou can **edit an existing page and create a link to your new page** (either in Wiki mode or in WYSIWYG mode). The resulting link will show up with a question mark next to it, showing it as a non-existent page. Simply click on the link to create the page as a child of the current page.\n\n![CreateInWYSIWYG.PNG](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DocumentLifecycle/WebHome/CreateInWYSIWYG.PNG?rev=1.5)\n\nThis will take you directly to the edit mode for the missing page. **This is the recommended approach** as it&#x27;ll allow you to create a hierarchy while you create new pages.\n\nUsers and applications can provide pages that can be used as [templates](https://extensions.xwiki.org/xwiki/bin/view/Extension/Administration%20Application#HTemplates) when creating new pages. The new page content (content, objects, and other meta data) will be replicated from the template. When clicking on a &quot;wanted link&quot;, if there are available templates, you will be asked to select one:\n\n![templateSelectorForWantedLink.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DocumentLifecycle/WebHome/templateSelectorForWantedLink.png?rev=1.1)\n\nThen you will be taken to the Inline Form edit mode corresponding to the selected page template.\n\n",
      "similarity_score": 0.6461961269378662,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.XWikiSyntax.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/",
      "content": "| id | Id | Navigation | Allows putting a reference/location in a page. In HTML for example this is called an Anchor. It allows pointing to that location, for example in links. | Global |\n| [image](https://www.xwiki.org/xwiki/bin/view/Macros/ImageMacro) | Image | content | Displays an image in a box | Global |\n| [imagePres](https://www.xwiki.org/xwiki/bin/view/Documentation/DevGuide/Scripting/XWikiVelocityTraining/XWikiVelocityTrainingImageMacro) | imagePres |  |  | Current Wiki |\n| include | Include | Content | Include other pages into the current page. | Global |\n| info | Info Message | Formatting | Displays an info message note. | Global |\n| jira | JIRA | Content | Fetches information from a JIRA server and displays them as a table, list or enumeration. | Global |\n| [language](https://www.xwiki.org/xwiki/bin/view/Macros/Language) | Language |  | List the flag and name for a given list of languages | Global |\n| [latestBlogPosts](https://www.xwiki.org/xwiki/bin/view/XWikiOrgCode/LatestBlogPosts) | Latest Blog Posts |  | Shows the latest blog posts articles | Global |\n| liveData | Live Data | Content | Display dynamic lists of data. | Global |\n| [mention](https://www.xwiki.org/xwiki/bin/view/XWiki/Mentions/MentionsMacro) | User Mention | Notifications | Insert a user mention. | Current Wiki |\n| [menu](https://www.xwiki.org/xwiki/bin/view/Menu/MenuMacro) | Menu | Navigation | Displays a menu created using simple wiki syntax (nested lists and links). | Global |\n| [messageSender](https://www.xwiki.org/xwiki/bin/view/Main/MessageSenderMacro) | Message Sender | Social | A control that allows users to enter messages that are handled by the MessageStream module. | Current Wiki |\n| missingLicenseMessage | Missing License Message |  | Display an error message when the extension does not have a valid license. | Global |\n",
      "similarity_score": 0.6456736922264099,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.XWikiSyntax.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/",
      "content": "\t\t- **style**: CSS style information that should be applied to the image. Examples: style=&quot;float:right;height:50&quot; (image on right side, height 50 px), style=&quot;display:block;margin-left:auto;margin-right:auto;width:80%&quot; (image centered, width 80% of block width), style=&quot;vertical-align:bottom&quot; (text starts at bottom of picture)\n\t\t- **height**: A parameter that defines the height of the displayed image. The value should be presented either in pixel (example: height=&quot;80&quot;) or in pixel related to the height of the block containing the image (example: height=&quot;40%&quot;).\n\t\t- **width**: A parameter that defines the width of the displayed image. The value should be presented either in pixel (example: width=&quot;80&quot;) or in pixel related to the width of the block containing the image (example: width=&quot;40%&quot;).\n\t\t- **title**: A parameter that defines the title the displayed image which will be visible when hovering the mouse trigger over the image, for instance. Example: title=&quot;My nice image&quot;\n\t\t- **alt**: A parameter that defines which text should be displayed if the browser is not able to display the image. Since this is a required HTML attribute XWiki will use the file name instead if the alt parameter is not defined. Example: alt=&quot;img.png&quot;\n\t\t- **More**: A more in depth explanation on the HTML &lt;img&gt; tag including more attributes can be reviewed [in the HTML standard](https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element).\n\t+ **queryString**: Allows queries to be passed to the server when creating the download link for the referenced image. Example: queryString=&quot;width=100&amp;height=800&amp;keepAspectRatio=true&quot; (**keepAspectRatio=true will fail if the width and height parameters are specified in addition to queryString!**)\n\n## Advanced\n\n### Verbatim\n\n",
      "similarity_score": 0.6413756012916565,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 57,
    "completion_tokens": 602,
    "total_tokens": 659
  },
  "average_power_draw": 214.3523913043478,
  "energy_consumption": 1089.751278420272,
  "energy_per_input_token": 0.6976640706915954,
  "energy_per_output_token": 1.7441601767289885,
  "energy_per_total_token": 1.6536438215785614
}