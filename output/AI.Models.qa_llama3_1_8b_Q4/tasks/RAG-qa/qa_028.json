{
  "id": "qa_028",
  "prompt": "Comment puis-je m'assurer que seuls les fichiers image ou PDF d'une taille maximale de 10 Mo peuvent \u00eatre t\u00e9l\u00e9charg\u00e9s en tant que pi\u00e8ces jointes sur l'ensemble du wiki?",
  "expected_answer": "Pour vous assurer que seuls les fichiers image ou PDF d'une taille maximale de 10 Mo peuvent \u00eatre t\u00e9l\u00e9charg\u00e9s en tant que pi\u00e8ces jointes sur l'ensemble du wiki, suivez ces \u00e9tapes:\n\n**\u00c9tape 1: Configurer les types MIME autoris\u00e9s**\n\nModifiez le fichier de configuration `xwiki.properties` dans votre installation et ajoutez ou mettez \u00e0 jour la ligne suivante pour configurer les restrictions de type MIME par d\u00e9faut au niveau de la ferme:\n```\nattachment.upload.allowList=image/*,application/pdf\n```\nCela permettra uniquement les fichiers image (avec n'importe quel sous-type, par exemple `image/jpeg`, `image/png`, etc.) et les fichiers PDF \u00e0 t\u00e9l\u00e9charger, et bloquera tous les autres types MIME.\n\n**\u00c9tape 2: Configurer la taille maximale de la pi\u00e8ce jointe**\n\nPour d\u00e9finir la taille maximale de la pi\u00e8ce jointe sur 10 Mo, suivez ces \u00e9tapes:\n\n1. Allez sur `http://<votrewiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object`\n2. Cliquez sur la ligne qui dit XWikiPreferences 0 (juste en dessous de la ligne qui dit Objects of type XWiki.XWikiPreferences (1))\n3. Faites d\u00e9filer jusqu'au champ qui dit Maximum Upload Size et changez le nombre en `10485760` (10 Mo en octets)\n4. Faites d\u00e9filer jusqu'en bas et cliquez sur \"Enregistrer\"\n5. R\u00e9p\u00e9tez pour chaque (sous-)wiki pour lequel vous devez d\u00e9finir cette configuration!",
  "ai_answer": "Sources: https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/I18N \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Skins \n\n\nPour contr\u00f4ler la taille des fichiers qui peuvent \u00eatre t\u00e9l\u00e9charg\u00e9s comme pi\u00e8ces jointes sur un wiki, vous pouvez suivre ces \u00e9tapes :\n\n### 1. Utiliser MediaWiki avec une extension de gestion de fichiers\n\nSi votre wiki utilise MediaWiki (comme c'est souvent le cas pour les sites web collaboratifs), vous pouvez utiliser des extensions telles que `UploadWizard`, `ConfirmEdit` ou `AuthRemote` qui offrent des fonctionnalit\u00e9s de contr\u00f4le d'upload plus avanc\u00e9es.\n\nParmi ces options, l'extension `UploadWizard` permet une gestion plus fine du t\u00e9l\u00e9chargement de fichiers. Elle offre la possibilit\u00e9 de configurer des r\u00e8gles pour les fichiers \u00e0 t\u00e9l\u00e9charger, notamment en fonction de leur taille.\n\n### 2. Configurer UploadWizard\n\n- **\u00c9tape 1 : Installation et configuration d'UploadWizard** :\n  - Installez l'extension `UploadWizard` sur votre wiki.\n  - Configurez-la pour autoriser uniquement les fichiers qui r\u00e9pondent \u00e0 vos crit\u00e8res (par exemple, des images ou PDF de taille inf\u00e9rieure ou \u00e9gale \u00e0 10 Mo).\n\n- **\u00c9tape 2 : D\u00e9finition des r\u00e8gles** :\n  - Dans la configuration d'UploadWizard, vous pouvez d\u00e9finir des r\u00e8gles pour les fichiers \u00e0 t\u00e9l\u00e9charger. Cela inclut la possibilit\u00e9 de sp\u00e9cifier une taille maximale pour les fichiers.\n  - Assurez-vous que ces r\u00e8gles sont coh\u00e9rentes avec vos besoins (par exemple, autoriser seuls les fichiers image ou PDF).\n\n- **\u00c9tape 3 : Test et ajustement** :\n  - V\u00e9rifiez que votre configuration fonctionne comme pr\u00e9vu en testant diff\u00e9rents sc\u00e9narios de t\u00e9l\u00e9chargements.\n  - Ajustez les r\u00e8gles si n\u00e9cessaire pour satisfaire vos exigences.\n\n### 3. Utiliser des extensions alternatives\n\nSi vous ne souhaitez pas utiliser UploadWizard ou si elle ne convient pas \u00e0 vos besoins, consid\u00e9rez l'utilisation d'autres extensions MediaWiki qui offrent des fonctionnalit\u00e9s de contr\u00f4le d'upload plus avanc\u00e9es. Chacune a ses propres avantages et peut r\u00e9pondre \u00e0 des besoins sp\u00e9cifiques.\n\n### 4. Utiliser PHP pour les tests\n\nSi vous souhaitez effectuer des tests plus approfondis ou si vous n'avez pas acc\u00e8s aux fonctionnalit\u00e9s de configuration d'une extension, vous pouvez utiliser directement PHP pour tester la taille des fichiers avant qu'ils ne soient upload\u00e9s.\n\n- **\u00c9tape 1 : Obtenir l'emplacement du fichier** :\n  - Utilisez `$file = $_FILES['fichier']['tmp_name']` (ou une autre m\u00e9thode de r\u00e9cup\u00e9ration de l'objet `$_FILES`) pour obtenir le chemin temporaire o\u00f9 le fichier est stock\u00e9.\n\n- **\u00c9tape 2 : Tester la taille** :\n  - Utilisez `filesize($file)` pour obtenir la taille du fichier en octets.\n  - V\u00e9rifiez si cette taille est inf\u00e9rieure ou \u00e9gale \u00e0 votre limite (10 Mo dans votre cas).\n\n- **\u00c9tape 3 : Actionner une fonction de suppression automatique** :\n  - Si le fichier d\u00e9passe la taille autoris\u00e9e, utilisez `unlink($file)` pour supprimer le fichier du syst\u00e8me.\n\n### 5. Mise en \u0153uvre\n\nMettez en place ces solutions sur votre wiki. Vous pouvez les combiner ou utiliser directement l'une d'elles selon vos besoins.\n\nEn suivant ces \u00e9tapes, vous devriez \u00eatre en mesure de contr\u00f4ler efficacement la taille des fichiers qui peuvent \u00eatre t\u00e9l\u00e9charg\u00e9s comme pi\u00e8ces jointes sur votre wiki.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.I18N",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/I18N",
      "content": "\n**Contents*** [Preferences](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/I18N#HPreferences)\n* [Switch to another language](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/I18N#HSwitchtoanotherlanguage)\n* [Page translations](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/I18N#HPagetranslations)\n* [Edit a translation](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/I18N#HEditatranslation)\nXWiki can be set-up to support one or various languages.\n\nXWiki has translations in 40 languages:\n\n* [Bulgarian (bg)](https://l10n.xwiki.org/languages/bg/)\n* [Catalan (ca)](https://l10n.xwiki.org/languages/ca/)\n* [Czech (cs)](https://l10n.xwiki.org/languages/cs/)\n* [Danish (da)](https://l10n.xwiki.org/languages/da/)\n* [German (de)](https://l10n.xwiki.org/languages/de/)\n* [Greek (el)](https://l10n.xwiki.org/languages/el/)\n* [English (en)](https://l10n.xwiki.org/languages/en/)\n* [Spanish (es)](https://l10n.xwiki.org/languages/es/)\n* [Persian (fa)](https://l10n.xwiki.org/languages/fa/)\n* [French (fr)](https://l10n.xwiki.org/languages/fr/)\n* [Galician (gl)](https://l10n.xwiki.org/languages/gl/)\n* [Hindi (hi)](https://l10n.xwiki.org/languages/hi/)\n* [Croatian (hr)](https://l10n.xwiki.org/languages/hr/)\n* [Hungarian (hu)](https://l10n.xwiki.org/languages/hu/)\n* [Indonesian (id)](https://l10n.xwiki.org/languages/id/)\n* [Italian (it)](https://l10n.xwiki.org/languages/it/)\n* [Japanese (ja)](https://l10n.xwiki.org/languages/ja/)\n* [Cambodian (km)](https://l10n.xwiki.org/languages/km/)\n* [Korean (ko)](https://l10n.xwiki.org/languages/ko/)\n* [Lithuanian (lt)](https://l10n.xwiki.org/languages/lt/)\n* [Latvian (lv)](https://l10n.xwiki.org/languages/lv/)\n* [Marathi (mr)](https://l10n.xwiki.org/languages/mr/)\n* [Dutch (nl)](https://l10n.xwiki.org/languages/nl/)\n* [Norwegian (no)](https://l10n.xwiki.org/languages/no/)\n* [Polish (pl)](https://l10n.xwiki.org/languages/pl/)\n",
      "similarity_score": 5.088569641113281,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/",
      "content": "[Tour](https://extensions.xwiki.org/xwiki/bin/view/Extension/Tour%20Application)  \nLet users create tour guides for any page\n\n![administration.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Administration%20Application/administration.png?rev=1.3)\n\n[Administration](https://extensions.xwiki.org/xwiki/bin/view/Extension/Administration%20Application)  \nApplication for administrating wiki features like users, groups, rights etc.\n\n![application_side_tree](https://www.xwiki.org/xwiki/resources/icons/silk/application_side_tree.png?cache-version=1711538035000)\n\n[Application Index](https://extensions.xwiki.org/xwiki/bin/view/Extension/Application%20Index%20Application/)  \nDisplays the list of installed Applications\n\n![cog](https://www.xwiki.org/xwiki/resources/icons/silk/cog.png?cache-version=1711538036000)\n\n[Mail](https://extensions.xwiki.org/xwiki/bin/view/Extension/Mail/MailApplication)  \nAdministration UI for mail configuration and statuses\n\n![palette](https://www.xwiki.org/xwiki/resources/icons/silk/palette.png?cache-version=1711538036000)\n\n[Flamingo Theme](https://extensions.xwiki.org/xwiki/bin/view/Extension/Flamingo%20Theme%20Application)  \nVisually customize any Flamingo-based skin and preview the results live + Default Themes\n\n![cog](https://www.xwiki.org/xwiki/resources/icons/silk/cog.png?cache-version=1711538036000)\n\n[Image Style](https://extensions.xwiki.org/xwiki/bin/view/Extension/Image/Style/UI/)  \nProvide the UI to access the image styles on the Administration.\n\n![page_white_acrobat](https://www.xwiki.org/xwiki/resources/icons/silk/page_white_acrobat.png?cache-version=1711538036000)\n\n[PDF Export](https://extensions.xwiki.org/xwiki/bin/view/Extension/PDF%20Export%20Application/)  \nAdds support for exporting wiki pages to PDF on the client-side using the web browser.\n\n![x-office-document.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Office%20Importer%20Application/x-office-document.png?rev=1.3)\n\n",
      "similarity_score": 4.596810340881348,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Configuration.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/",
      "content": "* style: contains the CSS information that will overwrite or complement the default pdf.css values if they exist. **[css4j](https://css4j.github.io/)**, a CSS API implementation for the Java\u2122 platform, will take care of this.\n* xhtmlxsl: contains the XHTML to FO XSL overriding the default one. It is processed by **[Apache Xalan](http://xml.apache.org/xalan-j/)**, a XSLT processor for transforming XML documents into HTML, text, or other XML document types. This field needs to be the actual content of the customized xhtml2fo.xsl. Note that you can also use velocity in this field (useful to get the content of an attached .xsl file, which comes in very handy when you need to fill in a big file, since the limit of textarea properties is of 60 000 characters)\n* fopxsl: contains the FOP to PDF/RTF XSL overriding the default one. It is processed by **[Apache FOP](http://xmlgraphics.apache.org/fop/)**.\n\nThe name of the class must be XWiki.PDFClass.\n\nThe good thing about fop/xsl-fo is that the xsl-fo document is independent of the final result. So we can export the wiki documents into many formats.\n\nThen create a new page (say XWiki.PDFTemplate) and add the XWiki.PDFClass object to it.\n\nLast use that page when calling the PDF/RTF export using the pdftemplate parameter as in *http://yourserver/xwiki/bin/export/Space/Page?format=pdf&amp;language=en&amp;pdftemplate=XWiki.PDFTemplate*.\n\nNo template is used by default.\n\nAs mentioned the style property stores CSS code. The field is parsed by the Velocity engine, so you can use the [current color theme](https://extensions.xwiki.org/xwiki/bin/view/Extension/Color%20Theme%20Application#HUsingColorThemesvariables) to style your PDF. Also, you can insert page break in PDF file with *page-break-before* CSS instruction. For example:\n\n#template(&#x27;colorThemeInit.vm&#x27;)  \nh2 {  \n \u00a0\u00a0color: $theme.titleColor;  \n}  \n  \ntd {  \n \u00a0\u00a0border-color: $theme.borderColor;  \n}  \n  \nh1, .my\\_Page\\_break {  \n \u00a0page-break-before:always;  \n}  \n",
      "similarity_score": 4.480845928192139,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.XWikiSyntax.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/",
      "content": "| [notificationsSystemFiltersPreferences](https://www.xwiki.org/xwiki/bin/view/XWiki/Notifications/Code/NotificationsSystemFiltersPreferencesMacro) | Notifications System Filters Preferences | Notifications | Display the preferences of the given user about system notification filters. | Current Wiki |\n| office | Office Document Viewer | Content | View office attachments (doc, ppt, xls, odt, odp, ods etc.) inside wiki pages without downloading or importing them. | Global |\n| pdftoc | PDF Table of Contents | Internal | Generates the table of contents for the PDF export. | Global |\n| [pdfviewer](https://www.xwiki.org/xwiki/bin/view/XWiki/PDFViewerMacro) | PDF Viewer | Content | PDF Viewer based on Mozilla pdf.js | Current Wiki |\n| plantuml | PlantUML | Content | Convert various text input formats into diagram images using PlantUML. | Global |\n| [pollsrecent](https://www.xwiki.org/xwiki/bin/view/XPoll/RecentPollsMacro) | Recent Polls |  | Displays the N most recent polls. | Current Wiki |\n| [poweredBy](https://www.xwiki.org/xwiki/bin/view/XWikiOrgCode/PoweredBy) | Powered By |  | Displays a random reference summary | Global |\n| [productVersions](https://www.xwiki.org/xwiki/bin/view/Macros/ProductVersionMacro/) | Product Versions | content | Display product versions for testing | Global |\n| putFootnotes | Put Footnotes | Content | Displays all the footnotes from the page. If missing, all footnotes are displayed by default at the end of the page. | Global |\n| python | Python | Development | Executes a python script. | Global |\n| [releasenotechanges](https://www.xwiki.org/xwiki/bin/view/ReleaseNotes/Code/Change/ReleaseNotesChangesMacro) | Release Note Changes | content |  | Current Wiki |\n| [remotecode](https://www.xwiki.org/xwiki/bin/view/XWiki/RemoteCodeMacro) | Remote Code |  | Displays the code (using the code macro) of a remote file | Global |\n| [scm](https://www.xwiki.org/xwiki/bin/view/Macros/SCM) | scm | Documentation | Produce scm link | Global |\n",
      "similarity_score": 0.6588432788848877,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Skins",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Skins",
      "content": "Cuza1174083835497.png](https://www.xwiki.org/xwiki/bin/download/References/UAIC/Universitatea%20Alexandru%20Ioan%20Cuza1174083835497.png?width=100&amp;height=100&amp;rev=1.2)](https://www.xwiki.org/xwiki/bin/view/References/UAIC) [![uPhotoMeasure.png](https://www.xwiki.org/xwiki/bin/download/References/UPhotoMeasure/uPhotoMeasure.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/UPhotoMeasure) [![USH.png](https://www.xwiki.org/xwiki/bin/download/References/USH/USH.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/USH) [![WaterWiki.png](https://www.xwiki.org/xwiki/bin/download/References/WaterWiki/WaterWiki.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/WaterWiki) [![WebtopProject.png](https://www.xwiki.org/xwiki/bin/download/References/WebtopProject/WebtopProject.png?width=100&amp;height=100&amp;rev=1.2)](https://www.xwiki.org/xwiki/bin/view/References/WebtopProject) [![WikiSkills.png](https://www.xwiki.org/xwiki/bin/download/References/WikiSkills/WikiSkills.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/WikiSkills) [![wikisym.png](https://www.xwiki.org/xwiki/bin/download/References/WikiSym/wikisym.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/WikiSym) [![CNFPT.png](https://www.xwiki.org/xwiki/bin/download/References/WikiTerritorial/CNFPT.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/WikiTerritorial) [![Wikipeople.png](https://www.xwiki.org/xwiki/bin/download/References/Wikipeople/Wikipeople.png?width=100&amp;height=100&amp;rev=1.2)](https://www.xwiki.org/xwiki/bin/view/References/Wikipeople) [![Wosah.png](https://www.xwiki.org/xwiki/bin/download/References/Wosah/Wosah.png?width=100&amp;height=100&amp;rev=1.2)](https://www.xwiki.org/xwiki/bin/view/References/Wosah) ",
      "similarity_score": 0.6572970151901245,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Skins",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Skins",
      "content": "[![CNAM-LR.png](https://www.xwiki.org/xwiki/bin/download/References/CNAM%20Languedoc-Roussillon/CNAM-LR.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/CNAM%20Languedoc-Roussillon) [![CNAM-PCH.png](https://www.xwiki.org/xwiki/bin/download/References/CNAM%20Poitou-Charentes/CNAM-PCH.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/CNAM%20Poitou-Charentes) [![caastnet.png](https://www.xwiki.org/xwiki/bin/download/References/Caastnet/caastnet.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/Caastnet) [![CampusNumerique20.png](https://www.xwiki.org/xwiki/bin/download/References/CampusNumerique20/CampusNumerique20.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/CampusNumerique20) [![AboutCapDigital.png](https://www.xwiki.org/xwiki/bin/download/References/CapDigital/AboutCapDigital.png?width=100&amp;height=100&amp;rev=1.2)](https://www.xwiki.org/xwiki/bin/view/References/CapDigital) [![CartoPass.png](https://www.xwiki.org/xwiki/bin/download/References/CartoPass/CartoPass.png?width=100&amp;height=100&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/view/References/CartoPass) [![CdLS World.png](https://www.xwiki.org/xwiki/bin/download/References/CdLSWorld/CdLS%20World.png?width=100&amp;height=100&amp;rev=1.3)](https://www.xwiki.org/xwiki/bin/view/References/CdLSWorld) [![Chronopolys.png](https://www.xwiki.org/xwiki/bin/download/References/Chronopolys/Chronopolys.png?width=100&amp;height=100&amp;rev=1.2)](https://www.xwiki.org/xwiki/bin/view/References/Chronopolys) [![CinquiemeSens.png](https://www.xwiki.org/xwiki/bin/download/References/CinquiemeSens/CinquiemeSens.png?width=100&amp;height=100&amp;rev=1.2)](https://www.xwiki.org/xwiki/bin/view/References/CinquiemeSens) ",
      "similarity_score": 0.65323406457901,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 55,
    "completion_tokens": 793,
    "total_tokens": 848
  },
  "average_power_draw": 172.63462330623304,
  "energy_consumption": 1572.350928756631,
  "energy_per_input_token": 0.7717059773038679,
  "energy_per_output_token": 1.9292649432596698,
  "energy_per_total_token": 1.8541874159865932
}