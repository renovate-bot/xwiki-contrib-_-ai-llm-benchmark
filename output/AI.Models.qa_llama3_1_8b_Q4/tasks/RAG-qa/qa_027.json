{
  "id": "qa_027",
  "prompt": "Comment configurer la synchronisation de groupe entre XWiki et mon fournisseur OpenID Connect?\nJ'utilise un fournisseur OpenID Connect qui prend en charge les revendications de groupe, et je souhaite synchroniser ces groupes avec les groupes XWiki. Quel est le processus pour le configurer?",
  "expected_answer": "Pour configurer la synchronisation de groupe entre XWiki et votre fournisseur OpenID Connect:\n1. Localisez le fichier `xwiki.properties` dans le r\u00e9pertoire d'installation de XWiki.\n2. Ouvrez le fichier avec un \u00e9diteur de texte.\n3. Configurez la synchronisation de groupe en d\u00e9finissant la propri\u00e9t\u00e9 `oidc.groups.claim` sur le nom de la revendication utilis\u00e9e par votre fournisseur OpenID Connect pour envoyer des informations de groupe. Par exemple:\n```java\n#-# Le nom de la revendication utilis\u00e9e pour obtenir la liste des groupes auxquels appartient l'utilisateur.\n# oidc.groups.claim=groupes\n```\nRemplacez `groupes` par le nom de revendication r\u00e9el fourni par votre fournisseur OpenID Connect.\n1. Si votre fournisseur OpenID Connect envoie des adh\u00e9sions de groupe en tant qu'attribut de valeur unique d\u00e9limit\u00e9 par un caract\u00e8re sp\u00e9cifique (par exemple, une virgule), configurez la propri\u00e9t\u00e9 `oidc.groups.separator` avec le caract\u00e8re appropri\u00e9:\n```java\n#-# Si le fournisseur d'identit\u00e9 renvoie des adh\u00e9sions de groupe en tant qu'attribut de valeur unique d\u00e9limit\u00e9 avec un caract\u00e8re, par exemple:\n# oidc.groups.separator=,\n```\nRemplacez la virgule par le s\u00e9parateur r\u00e9el utilis\u00e9 par votre fournisseur.\n1. Si vous souhaitez mapper les groupes synchronis\u00e9s \u00e0 des groupes XWiki sp\u00e9cifiques, configurez la propri\u00e9t\u00e9 `oidc.groups.mapping` avec les mappages appropri\u00e9s:\n```java\n# oidc.groups.mapping=XWiki.\"MyXWikiGroup\"=group1\n# oidc.groups.mapping=XWiki.\"MyXWikiGroup2\"=group2\n```\nRemplacez `MyXWikiGroup` et `MyXWikiGroup2` par les noms des groupes XWiki que vous souhaitez mapper, et `group1` et `group2` par les noms de groupe r\u00e9els fournis par votre fournisseur OpenID Connect.\n1. Enregistrez le fichier `xwiki.properties` et red\u00e9marrez votre instance XWiki pour que les modifications prennent effet.",
  "ai_answer": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/GettingStarted/CreatingNewUsers \n\n\nPour configurer la synchronisation de groupes entre XWiki et votre fournisseur OpenID Connect (OIDC), vous allez devoir suivre quelques \u00e9tapes qui n\u00e9cessitent une compr\u00e9hension de base de la configuration d'authentification dans XWiki, ainsi que des param\u00e8tres de configuration li\u00e9s \u00e0 l'int\u00e9gration OIDC. Voici les \u00e9tapes g\u00e9n\u00e9rales pour y parvenir :\n\n### 1. Pr\u00e9paration\n\n- **Assurez-vous du support** : V\u00e9rifiez aupr\u00e8s de votre fournisseur de services que le protocole OpenID Connect est pris en charge et qu'il permet la r\u00e9cup\u00e9ration des informations de groupe (groupes auxquels l'utilisateur appartient).\n- **Comprenez les revendications OIDC** : Familiarisez-vous avec les diff\u00e9rents types de revendications qui peuvent \u00eatre envoy\u00e9es par votre fournisseur. Certains peuvent \u00eatre directement utilis\u00e9s, tandis que d\u2019autres n\u00e9cessiteraient un traitement suppl\u00e9mentaire.\n\n### 2. Configuration XWiki\n\n- **Ouvrez l\u2019interface administrative** : Pour acc\u00e9der aux param\u00e8tres de configuration de votre instance de wiki, vous devez vous rendre dans l'interface web administative de XWiki.\n- **Allez \u00e0 Gestion des utilisateurs/Groupes** : Vous cherchez une section ou un bouton sp\u00e9cifique qui permet d'acc\u00e9der au gestionnaire des utilisateurs et groupes. L\u2019endroit exact peut varier en fonction de la version de XWiki que vous utilisez, mais g\u00e9n\u00e9ralement, il est accessible par un lien visible dans le menu lat\u00e9ral.\n- **Ajoutez un nouveau r\u00f4le ou groupe** : Si vous n'avez pas d\u00e9j\u00e0 cr\u00e9\u00e9 les groupes auxquels vous voulez affecter vos utilisateurs via l'int\u00e9gration avec OIDC, cr\u00e9ez maintenant ces groupes.\n\n### 3. Configuration du Fournisseur OpenID Connect\n\n- **Recherchez des param\u00e8tres d'int\u00e9gration** : Dans la section de configuration de votre fournisseur, cherchez les options li\u00e9es \u00e0 l'int\u00e9gration OpenID Connect. Vous y trouverez peut-\u00eatre des champs pour configurer les revendications que vous souhaitez r\u00e9cup\u00e9rer, notamment celles concernant les groupes.\n- **Configurez les revendications de groupe** : Dans ce contexte, assurez-vous que la configuration permet la r\u00e9cup\u00e9ration des informations de groupe du fournisseur. Cela implique g\u00e9n\u00e9ralement d'activer ou de sp\u00e9cifier les r\u00e9clamations appropri\u00e9es.\n\n### 4. Configuration XWiki pour Utiliser les Revendications OIDC\n\n- **Param\u00e8tres d\u2019int\u00e9gration OpenID Connect** : Dans l\u2019interface administrative de votre wiki, recherchez une section de configuration li\u00e9e \u00e0 la connectivit\u00e9 OpenID Connect (OIDC). Cela peut se trouver dans un menu d\u00e9roulant ou sous forme de champ libre.\n- **Fournissez les param\u00e8tres OIDC appropri\u00e9s** : Saisissez l\u2019identifiant client et le secret client fournis par votre fournisseur. Vous devrez \u00e9galement configurer les r\u00e9clamations de groupe ici.\n\n### 5. V\u00e9rification\n\n- **Testez l\u2019int\u00e9gration** : Apr\u00e8s avoir configur\u00e9 tout cela, v\u00e9rifiez que la synchronisation fonctionne correctement. Utilisez une instance test pour voir si les utilisateurs sont correctement ajout\u00e9s aux groupes XWiki lorsqu'ils se connectent via le fournisseur OIDC.\n\nCette proc\u00e9dure peut varier en fonction de votre version sp\u00e9cifique de XWiki et des param\u00e8tres exacts du fournisseur OpenID Connect. Il est donc important de consulter la documentation officielle de votre instance de wiki pour obtenir des instructions plus d\u00e9taill\u00e9es.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "* [Prerequisites &amp; Installation Instructions](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HPrerequisites26InstallationInstructions)\n* [Dependencies](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HDependencies)\n# Description\n\nAllow an XWiki instance to authenticate on an OpenId Connect provider. It also performs automatic synchronization.\n\nSee also [OpenID Connect Provider](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Provider/).\n\n![oidc_client_provider.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/WebHome/oidc_client_provider.png?rev=1.1)\n\nRelease notes can be found on [OpenID Connect project page](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/#HReleaseNotes).\n\n# Main limitations\n\n* [Automatically authenticate user when coming back](https://jira.xwiki.org/browse/OIDC-16)\n\n# Configuration\n\n## Configuration Guides for specific systems\n\n### Lemon LDAP / Open PAAS\n\nA [configuration guide](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ConfigurationLemonLDAP/) is available to connect XWiki to LemonLDAP / OpenPAAS using the OpenIDC XWiki client.\n\n### OpenID Authentication with Keycloak\n\nA [configuration example for Keycloak](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/OpenID%20Authentication%20with%20Keycloak/) is available.\n\n### Univention Corporate Server\n\nA [configuration example for Univention Corporate Server (UCS)](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/OpenID%20Authentication%20with%20UCS/) is available.\n\n## Configuration files\n\n### xwiki.cfg\n\n",
      "similarity_score": 0.8409627079963684,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "# Group synchronization\n\nThe default group synchronization is enabled by adding the claim xwiki\\_groups to the property oidc.userinfoclaims in the xwiki.properties file.\n\nBy default this synchronization expect to receive the list of group names (without the `wiki:XWiki.` prefix) in which the user should be placed (groups are automatically created when they don&#x27;t exist). You can also define a mapping between the XWiki groups and the provider groups using oidc.groups.mapping property.\n\nIt&#x27;s also possible to implement your own custom group synchronization in a listener. See [Listeners section](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HListeners).\n\n# Customization\n\n## Templates\n\nThe authenticator uses a template to ask the user for the target provider when it&#x27;s not provided in the configuration. This template can be overwritten through the standard [template system](https://extensions.xwiki.org/xwiki/bin/view/Extension/Template%20Module).\n\nThe name of the template is oidc/client/provider.vm.\n\n## Listeners\n\nIt&#x27;s possible to implement an event [listener](https://extensions.xwiki.org/xwiki/bin/view/Extension/Observation%20Module%20Local) and be notified during user profile update to add more to this process or do other things after it:\n\n* org.xwiki.contrib.oidc.event.OIDCUserUpdating to modify the user profile before it being saved\n* org.xwiki.contrib.oidc.event.OIDCUserUpdated to do something after the user profile has been saved\n\n# Troubleshooting\n\n## Enable DEBUG log\n\nSee [Logging Admin Guide](https://xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Logging).\n\nThe specific packages to track for OpenID Connect module is org.xwiki.contrib.oidc. There is several ways to enable debug log.\n\n",
      "similarity_score": 0.797974705696106,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "\n\n\n| openid_connect_16x16.png | **Allow an XWiki instance to authenticate on an OpenID Connect provider** |\n| --- | --- |\n\n**Recommended**\n\n| Type | JAR |\n| --- | --- |\n| Category | Authenticator |\n| Developed by | [Thomas Mortagne](https://xwiki.org/xwiki/bin/view/XWiki/ThomasMortagne) |\n| Active Installs | 146 |\n| Rating | *  * [1](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Poor&quot;) * [2](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Satisfactory&quot;) * [3](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Good&quot;) * [4](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Very good&quot;) * [5](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Excellent&quot;)    1\u00a0Votes |\n| License | GNU Lesser General Public License 2.1 |\n\n\n\n| Compatibility | XWiki 14.10+ is required. |\n| --- | --- |\n\n**Installable with the Extension Manager**\n\n[Download v2.8.6](https://extensions.xwiki.org/xwiki/rest/repository/extensions/org.xwiki.contrib.oidc%3Aoidc-authenticator/versions/2.8.6/file?rid=maven-xwiki)[Sources](https://github.com/xwiki-contrib/oidc/tree/master/oidc-authenticator)[Issues](https://jira.xwiki.org/browse/OIDC)\n\nTable of contents\n\n",
      "similarity_score": 0.7964728474617004,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "* [Endpoints](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HEndpoints)\n\t+ [Callback](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HCallback)\n\t+ [Back-Channel Logout](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HBack-ChannelLogout)\n* [Bypass OpenID Connect](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HBypassOpenIDConnect)\n* [Group synchronization](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HGroupsynchronization)\n* [Customization](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HCustomization)\n\t+ [Templates](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HTemplates)\n\t+ [Listeners](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HListeners)\n* [Troubleshooting](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HTroubleshooting)\n\t+ [Enable DEBUG log](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HEnableDEBUGlog)\n\t\t- [With the Logging Admin UI](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HWiththeLoggingAdminUI)\n\t\t- [With the Logback configuration file](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HWiththeLogbackconfigurationfile)\n* [Short URLs](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HShortURLs)\n",
      "similarity_score": 0.7544304132461548,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.GettingStarted.CreatingNewUsers",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/GettingStarted/CreatingNewUsers",
      "content": "[![Groups.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/GettingStarted/CreatingNewUsers/Groups.png?width=650&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/GettingStarted/CreatingNewUsers/Groups.png?rev=1.1)\n\nYou can find more information about [managing users and groups in your wiki on XWiki.org.](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/UsersAndGroupsManagement)\n\n**Next: [Step 6 Setting user rights](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/GettingStarted/SettingUserRights)**\n\n\n",
      "similarity_score": 0.7533164620399475,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 78,
    "completion_tokens": 802,
    "total_tokens": 880
  },
  "average_power_draw": 212.03563814866763,
  "energy_consumption": 1451.37742782663,
  "energy_per_input_token": 0.6967726489806193,
  "energy_per_output_token": 1.7419316224515482,
  "energy_per_total_token": 1.6492925316211706
}