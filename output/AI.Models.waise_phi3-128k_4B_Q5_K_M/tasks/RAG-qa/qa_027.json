{
  "id": "qa_027",
  "prompt": "Comment configurer la synchronisation de groupe entre XWiki et mon fournisseur OpenID Connect?\nJ'utilise un fournisseur OpenID Connect qui prend en charge les revendications de groupe, et je souhaite synchroniser ces groupes avec les groupes XWiki. Quel est le processus pour le configurer?",
  "expected_answer": "Pour configurer la synchronisation de groupe entre XWiki et votre fournisseur OpenID Connect:\n1. Localisez le fichier `xwiki.properties` dans le r\u00e9pertoire d'installation de XWiki.\n2. Ouvrez le fichier avec un \u00e9diteur de texte.\n3. Configurez la synchronisation de groupe en d\u00e9finissant la propri\u00e9t\u00e9 `oidc.groups.claim` sur le nom de la revendication utilis\u00e9e par votre fournisseur OpenID Connect pour envoyer des informations de groupe. Par exemple:\n```java\n#-# Le nom de la revendication utilis\u00e9e pour obtenir la liste des groupes auxquels appartient l'utilisateur.\n# oidc.groups.claim=groupes\n```\nRemplacez `groupes` par le nom de revendication r\u00e9el fourni par votre fournisseur OpenID Connect.\n1. Si votre fournisseur OpenID Connect envoie des adh\u00e9sions de groupe en tant qu'attribut de valeur unique d\u00e9limit\u00e9 par un caract\u00e8re sp\u00e9cifique (par exemple, une virgule), configurez la propri\u00e9t\u00e9 `oidc.groups.separator` avec le caract\u00e8re appropri\u00e9:\n```java\n#-# Si le fournisseur d'identit\u00e9 renvoie des adh\u00e9sions de groupe en tant qu'attribut de valeur unique d\u00e9limit\u00e9 avec un caract\u00e8re, par exemple:\n# oidc.groups.separator=,\n```\nRemplacez la virgule par le s\u00e9parateur r\u00e9el utilis\u00e9 par votre fournisseur.\n1. Si vous souhaitez mapper les groupes synchronis\u00e9s \u00e0 des groupes XWiki sp\u00e9cifiques, configurez la propri\u00e9t\u00e9 `oidc.groups.mapping` avec les mappages appropri\u00e9s:\n```java\n# oidc.groups.mapping=XWiki.\"MyXWikiGroup\"=group1\n# oidc.groups.mapping=XWiki.\"MyXWikiGroup2\"=group2\n```\nRemplacez `MyXWikiGroup` et `MyXWikiGroup2` par les noms des groupes XWiki que vous souhaitez mapper, et `group1` et `group2` par les noms de groupe r\u00e9els fournis par votre fournisseur OpenID Connect.\n1. Enregistrez le fichier `xwiki.properties` et red\u00e9marrez votre instance XWiki pour que les modifications prennent effet.",
  "ai_answer": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ \n\n\n Pour configurer la synchronisation des groupes entre XWiki et votre fournisseur OpenID Connect, suivez les \u00e9tapes suivantes :\n\n1. V\u00e9rifiez que votre fournisseur OpenID Connect est configur\u00e9 correctement pour prendre en charge les revendications de groupe.\n\n2. D\u00e9finissez un espace de noms ou de domaines sur XWiki o\u00f9 vous souhaitez que la synchronisation des groupes se produise.\n\n3. Vous aurez besoin d'un middleware pour faire le lien entre votre syst\u00e8me OpenID Connect et les tables de groupe XWiki. Ce middleware doit \u00eatre configur\u00e9 pour acc\u00e9der \u00e0 la base de donn\u00e9es du fournisseur OpenID Connect et aux tables de groupe XWiki, ainsi que pour mettre en \u0153uvre la synchronisation des groupes selon vos besoins sp\u00e9cifiques (par exemple, ajout, suppression ou modification).\n\n4. Configurez le middleware pour utiliser les revendications de groupe du fournisseur OpenID Connect comme entr\u00e9e et pour l'envoyer aux tables de groupe XWiki comme sortie. Vous aurez peut-\u00eatre besoin d'ajouter des r\u00e8gles sp\u00e9cifiques pour g\u00e9rer la concurrence, le cache ou les exceptions li\u00e9es \u00e0 la synchronisation des groupes.\n\n5. Testez et validez la mise en \u0153uvre de votre configuration pour s'assurer qu'elle r\u00e9pond aux exigences attendues. En cas de probl\u00e8mes, ajustez les param\u00e8tres du middleware comme n\u00e9cessaire ou consultez le support technique si des aides suppl\u00e9mentaires sont n\u00e9cessaires.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "# Group synchronization\n\nThe default group synchronization is enabled by adding the claim xwiki\\_groups to the property oidc.userinfoclaims in the xwiki.properties file.\n\nBy default this synchronization expect to receive the list of group names (without the `wiki:XWiki.` prefix) in which the user should be placed (groups are automatically created when they don&#x27;t exist). You can also define a mapping between the XWiki groups and the provider groups using oidc.groups.mapping property.\n\nIt&#x27;s also possible to implement your own custom group synchronization in a listener. See [Listeners section](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HListeners).\n\n# Customization\n\n## Templates\n\nThe authenticator uses a template to ask the user for the target provider when it&#x27;s not provided in the configuration. This template can be overwritten through the standard [template system](https://extensions.xwiki.org/xwiki/bin/view/Extension/Template%20Module).\n\nThe name of the template is oidc/client/provider.vm.\n\n## Listeners\n\nIt&#x27;s possible to implement an event [listener](https://extensions.xwiki.org/xwiki/bin/view/Extension/Observation%20Module%20Local) and be notified during user profile update to add more to this process or do other things after it:\n\n* org.xwiki.contrib.oidc.event.OIDCUserUpdating to modify the user profile before it being saved\n* org.xwiki.contrib.oidc.event.OIDCUserUpdated to do something after the user profile has been saved\n\n# Troubleshooting\n\n## Enable DEBUG log\n\nSee [Logging Admin Guide](https://xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Logging).\n\nThe specific packages to track for OpenID Connect module is org.xwiki.contrib.oidc. There is several ways to enable debug log.\n\n",
      "similarity_score": 0.8185434937477112,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "* [Prerequisites &amp; Installation Instructions](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HPrerequisites26InstallationInstructions)\n* [Dependencies](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HDependencies)\n# Description\n\nAllow an XWiki instance to authenticate on an OpenId Connect provider. It also performs automatic synchronization.\n\nSee also [OpenID Connect Provider](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Provider/).\n\n![oidc_client_provider.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/WebHome/oidc_client_provider.png?rev=1.1)\n\nRelease notes can be found on [OpenID Connect project page](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/#HReleaseNotes).\n\n# Main limitations\n\n* [Automatically authenticate user when coming back](https://jira.xwiki.org/browse/OIDC-16)\n\n# Configuration\n\n## Configuration Guides for specific systems\n\n### Lemon LDAP / Open PAAS\n\nA [configuration guide](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ConfigurationLemonLDAP/) is available to connect XWiki to LemonLDAP / OpenPAAS using the OpenIDC XWiki client.\n\n### OpenID Authentication with Keycloak\n\nA [configuration example for Keycloak](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/OpenID%20Authentication%20with%20Keycloak/) is available.\n\n### Univention Corporate Server\n\nA [configuration example for Univention Corporate Server (UCS)](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/OpenID%20Authentication%20with%20UCS/) is available.\n\n## Configuration files\n\n### xwiki.cfg\n\n",
      "similarity_score": 0.8105670213699341,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "* [Endpoints](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HEndpoints)\n\t+ [Callback](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HCallback)\n\t+ [Back-Channel Logout](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HBack-ChannelLogout)\n* [Bypass OpenID Connect](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HBypassOpenIDConnect)\n* [Group synchronization](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HGroupsynchronization)\n* [Customization](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HCustomization)\n\t+ [Templates](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HTemplates)\n\t+ [Listeners](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HListeners)\n* [Troubleshooting](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HTroubleshooting)\n\t+ [Enable DEBUG log](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HEnableDEBUGlog)\n\t\t- [With the Logging Admin UI](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HWiththeLoggingAdminUI)\n\t\t- [With the Logback configuration file](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HWiththeLogbackconfigurationfile)\n* [Short URLs](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HShortURLs)\n",
      "similarity_score": 0.8020850419998169,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "# Dependencies\n\nDependencies for this extension (org.xwiki.contrib.oidc:oidc-authenticator 2.8.6):\n\n* org.xwiki.platform:xwiki-platform-oldcore 14.10\n* com.nimbusds:oauth2-oidc-sdk 11.10.1\n* [org.xwiki.contrib.oidc:oidc-provider](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Provider/) 2.8.6\n* org.xwiki.contrib.oidc:oidc-authenticator-configuration 2.8.6\n* org.xwiki.contrib.oidc:oidc-authenticator-user 2.8.6\n\n\n",
      "similarity_score": 0.763664722442627,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "* [Description](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HDescription)\n* [Main limitations](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HMainlimitations)\n* [Configuration](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HConfiguration)\n\t+ [Configuration Guides for specific systems](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HConfigurationGuidesforspecificsystems)\n\t\t- [Lemon LDAP / Open PAAS](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HLemonLDAP2FOpenPAAS)\n\t\t- [OpenID Authentication with Keycloak](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HOpenIDAuthenticationwithKeycloak)\n\t\t- [Univention Corporate Server](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HUniventionCorporateServer)\n\t+ [Configuration files](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HConfigurationfiles)\n\t\t- [xwiki.cfg](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#Hxwiki.cfg)\n\t\t- [xwiki.properties](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#Hxwiki.properties)\n\t+ [In-wiki configuration](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HIn-wikiconfiguration)\n\t+ [Authentication with a domain-based instance](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/#HAuthenticationwithadomain-basedinstance)\n",
      "similarity_score": 0.7586913108825684,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 1022,
    "completion_tokens": 370,
    "total_tokens": 1392
  },
  "average_power_draw": 217.93918478260872,
  "energy_consumption": 574.9917444556434,
  "energy_per_input_token": 0.2953219026479935,
  "energy_per_output_token": 0.7383047566199837,
  "energy_per_total_token": 0.4130687819365254
}