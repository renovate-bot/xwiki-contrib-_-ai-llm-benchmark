{
  "id": "qa_008",
  "prompt": "How can I ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki?",
  "expected_answer": "To ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki, follow these steps:\n\n**Step 1: Configure allowed mimetypes**\n\nEdit the `xwiki.properties` configuration file in your installation and add or update the following line to configure the default mimetype restrictions at farm level:\n```\nattachment.upload.allowList=image/*,application/pdf\n```\nThis will allow only image files (with any subtype, e.g., `image/jpeg`, `image/png`, etc.) and PDF files to be uploaded, and block all other mimetypes.\n\n**Step 2: Configure maximum attachment size**\n\nTo set the maximum attachment size to 10MB, follow these steps:\n\n1. Go to `http://<yourwiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object`\n2. Click on the line that says XWikiPreferences 0 (right below the line that says Objects of type XWiki.XWikiPreferences (1))\n3. Scroll down to the field that says Maximum Upload Size and change the number to `10485760` (10MB in bytes)\n4. Scroll to the bottom and click \"Save\"\n5. Repeat for each (sub)wiki for which you need to set this configuration!",
  "ai_answer": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/ \n\n\nTo ensure that only images or PDF files of a maximum size of 10MB can be uploaded as attachments on the whole wiki, you need to configure both the size limit and the MIME type restrictions in XWiki. Here's how you can do it:\n\n### Setting the Maximum Upload Size\n\n1. **Go to the Configuration Page**:\n   - Navigate to `http://<yourwiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object`.\n\n2. **Edit the Maximum Upload Size**:\n   - Click on the line that says \"XWikiPreferences 0\" (right below the line that says \"Objects of type XWiki.XWikiPreferences (1)\").\n   - Scroll down to the field that says \"Maximum Upload Size\".\n   - Change the number to `10485760` (which is 10MB in bytes).\n\n3. **Save the Changes**:\n   - Scroll to the bottom and click \"Save\".\n\n4. **Repeat for Each (Sub)Wiki**:\n   - If you have multiple wikis, you need to repeat these steps for each one, as the configuration is set per wiki.\n\n### Restricting MIME Types\n\nTo restrict the allowed file types, you can use the \"Attachment Validation Application\". This application allows you to define which MIME types are allowed for uploads.\n\n1. **Install and Configure the Attachment Validation Application**:\n   - Go to the [Attachment Validation Application page](https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/).\n   - Follow the instructions to install and configure the application.\n\n2. **Set the Allowed MIME Types**:\n   - Configure the application to allow only image and PDF MIME types. The MIME types for images and PDFs are typically:\n     - Images: `image/jpeg`, `image/png`, `image/gif`, etc.\n     - PDF: `application/pdf`\n\n### Example Configuration\n\nYou may need to set the configuration in the XWiki preferences or in the Attachment Validation Application settings. Here is an example of what the configuration might look like:\n\n```ini\n# Allowed MIME types\nattachment.download.whitelist=image/jpeg,image/png,image/gif,application/pdf\n```\n\n### Additional Steps\n\n- **Clear Browser Cache**: If you've already tried to attach a file and it failed, you might need to clear your browser's cache for the new size setting to take effect.\n\nBy following these steps, you can ensure that only images and PDF files of a maximum size of 10MB can be uploaded as attachments on your wiki.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "Attachments can be uploaded either through the regular [upload action](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments), [WebDAV](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/WebDAV), [XML-RPC](https://extensions.xwiki.org/xwiki/bin/view/Extension/XML-RPC%20Integration) or [Rest](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI).  \nAs an administrator you can set limits on the maximum size of an attachment and where the attachments will be stored.\n\n# Size Limit\n\nThe maximum size of an attachment is limited by a configuration parameter in the *XWikiPreferences* document. It is set to 100GB by default (32MB for XWiki &lt; 10.9RC1).  \nTo change it follow these steps:\n\n1. Go to *http://&lt;yourwiki&gt;/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object*\n2. Click on the line that says XWikiPreferences 0 (right below the line that says Objects of type XWiki.XWikiPreferences (1))\n3. Scroll down to the field that says Maximum Upload Size and change the number to whatever size you want (it is expressed in bytes)\n4. Scroll to the bottom and click &quot;Save&quot;\n5. Repeat for each (sub)wiki for which you need to increase the size, since currrently this configuration has to be set per wiki\n\nNote that if you&#x27;ve already tried to attach a file and it failed, in order for the new size setting to be taken into account you might need to clear your browser&#x27;s cache.\n\n# Mimetype Restriction\n\nSee [Attachent Validation Application](https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/).\n\n",
      "similarity_score": 0.8601455688476562,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments",
      "content": "# Moving an attachment\n\nXWiki 14.0+ [![attachment_button.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/attachment_button.png?width=960&amp;rev=1.2)](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/attachment_button.png?rev=1.2)A button is available in the attachments pane, allowing to move or rename an attachment. It is possible to change the name or the location of the attachments. Optionally, a redirection action is proposed, allowing to automatically redirect requests to the old location of an attachment to the new one.\n\n\n\nXWiki 14.2+ [![move_attachment_refactoring.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/move_attachment_refactoring.png?width=960&amp;rev=1.1)](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/move_attachment_refactoring.png?rev=1.1)When moving an attachment, the pages using the moved attachment are automatically refactored to point to the new location of the attachment. Advanced users can deactivate this refactoring in the move attachment form.\n\n\n\n# Deleting an attachment\n\nAn attachment can be deleted by pressing the delete button that is shown only if the user has the specific rights for this. Also, a confirmation modal is provided for the action to be completed.\n\n![deleteAttachmentModal.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/deleteAttachmentModal.png?rev=1.1)\n\n# Linking to an attached file/image\n\nIf you&#x27;re using the Wiki editor, you can use the [Wiki Syntax](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) to display an image inline or link to an attachment.\n\nIf you&#x27;re using the WYSIWYG editor, then use the &quot;Link&quot; or &quot;Image&quot; buttons as shown above.\n\n",
      "similarity_score": 0.7635394334793091,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "#-# (only the mimetypes defined in this list would be displayed inline) or a blacklist (every mimetype that is not in  \n#-# this list would be displayed inline if possible).  \n#-# Note that only one configuration is used between the whitelist and the blacklist, and the whitelist always have  \n#-# the priority over the blacklist. Also note that these configurations exist for security reason so they are only  \n#-# impacting attachments added by users who do not have programming rights.  \n#-# If you want to force downloading some attachments types please check the configuration below.  \n#-#  \n#-# By default we use the following whitelist (coma separated list of values).  \n# attachment.download.whitelist=audio/basic,audio/L24,audio/mp4,audio/mpeg,audio/ogg,audio/vorbis,audio/vnd.rn-realaudio,audio/vnd.wave,audio/webm,image/gif,image/jpeg,image/pjpeg,image/png,image/tiff,text/csv,text/plain,text/xml,text/rtf,video/mpeg,video/ogg,video/quicktime,video/webm,video/x-matroska,video/x-ms-wmv,video/x-flv  \n#-#  \n#-# If you prefer to use a blacklist instead, you can define the forbidden types here, as a coma separated list of  \n#-# values. We advise you to forbid at least the following mimetypes : text/html, text/javascript  \n# attachment.download.blacklist=text/html,text/javascript\n",
      "similarity_score": 0.7483633756637573,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments",
      "content": "# Linking to an external file/image\n\nIf your file is on a remote server and you wish to link to it from your wiki, simply use the URL of the link as the content of your wiki link. For example, using the wiki editor you&#x27;d write:\n\n* **XWiki Syntax 1.0**: [http://some\\_remote\\_server/path/to/file&gt;text to display]\n* **XWiki Syntax 2.0**: [[text to display&gt;&gt;http://some\\_remote\\_server/path/to/file]]\n\nFor displaying an image located on a remote server, use the following HTML code snippet:\n\n* **XWiki Syntax 1.0**: &lt;img src=&quot;http://some\\_remote\\_server/path/to/image&quot;/&gt;\n* **XWiki Syntax 2.0**: image:http://some\\_remote\\_server/path/to/image\n\nSee the [XWiki Syntax Guide](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) for more details.\n\n# Backlinks indexation\n\nXWiki 14.2+ Page including attachments (or images) from other pages are now listed in their [backlinks](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Navigate/#HBacklinks).\n\n# Upload summary\n\nXWiki 16.3.0+\u00a0When upload summaries are enabled by the administrator, you can include descriptions to your uploads done through the Attachment tab.\n\n![upload-summary.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/upload-summary.png?rev=1.1)\n\nThese upload summaries will then be displayed for each upload in the revision history of the attachment.  \nNote that if you upload multiple files at the same time with, *e.g.*, a drag and drop, they will share the same upload summary.\n\n\n\n# Size Limit\n\nThe maximum size of an attachment is limited by the administrator. By default it is set at about 32 megabytes.\n\n# Learn More\n\nFor more information about how XWiki attachments work and how to configure/tune the attachment store, you can examine the [administrator&#x27;s guide to attachments](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments).\n\n\n",
      "similarity_score": 0.7461236715316772,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.XWikiSyntax.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/",
      "content": "| Link to an email address | [[[[email\u00a0protected]](https://www.xwiki.org/cdn-cgi/l/email-protection)&gt;&gt;mailto:[[email\u00a0protected]](https://www.xwiki.org/cdn-cgi/l/email-protection)]] | [[email\u00a0protected]](https://www.xwiki.org/cdn-cgi/l/email-protection#056f6a6d6b4576686c716d2b6b6071) |\n| Link to an attachment on the current page | [[attach:img.png]] | [img.png](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) |\n| Link to an attachment in a different page | [[attach:[[email\u00a0protected]](https://www.xwiki.org/cdn-cgi/l/email-protection)]] | [img.png](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) |\n| Link to an Anchor in a page | [[PageA.PageB||anchor=&quot;anchor&quot;]] | [PageB](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) |\n| Link to a Heading in a page | ``` [[PageA.PageB||anchor=&quot;HMyheading&quot;]] ``` When you add a Heading, an anchor named &quot;H&quot; followed by the heading title with only alpha characters is created. For example, for a Heading named &quot;My heading&quot;, the generated anchor will be &quot;HMyheading&quot;. | [PageB](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) |\n| Link to an anchor in the current page | [[label&gt;&gt;||anchor=&quot;anchor&quot;]] | [label](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) |\n| Link to a page with a query string | [[PageA.PageB||queryString=&quot;param1=value1&amp;param2=value2&quot;]] | [PageB](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) |\n| Link to the current page with a query string | [[label&gt;&gt;||queryString=&quot;param1=value1&amp;param2=value2&quot;]] | [label](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) |\n\n",
      "similarity_score": 0.7455347180366516,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 2980,
    "completion_tokens": 630,
    "total_tokens": 3610
  },
  "average_power_draw": null,
  "energy_consumption": null,
  "energy_per_input_token": null,
  "energy_per_output_token": null,
  "energy_per_total_token": null
}