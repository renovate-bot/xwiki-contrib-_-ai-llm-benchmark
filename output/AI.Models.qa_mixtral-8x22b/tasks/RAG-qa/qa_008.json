{
  "id": "qa_008",
  "prompt": "How can I ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki?",
  "expected_answer": "To ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki, follow these steps:\n\n**Step 1: Configure allowed mimetypes**\n\nEdit the `xwiki.properties` configuration file in your installation and add or update the following line to configure the default mimetype restrictions at farm level:\n```\nattachment.upload.allowList=image/*,application/pdf\n```\nThis will allow only image files (with any subtype, e.g., `image/jpeg`, `image/png`, etc.) and PDF files to be uploaded, and block all other mimetypes.\n\n**Step 2: Configure maximum attachment size**\n\nTo set the maximum attachment size to 10MB, follow these steps:\n\n1. Go to `http://<yourwiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object`\n2. Click on the line that says XWikiPreferences 0 (right below the line that says Objects of type XWiki.XWikiPreferences (1))\n3. Scroll down to the field that says Maximum Upload Size and change the number to `10485760` (10MB in bytes)\n4. Scroll to the bottom and click \"Save\"\n5. Repeat for each (sub)wiki for which you need to set this configuration!",
  "ai_answer": "Sources: https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/GettingStarted/XWikiBasicConcepts \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments \n\n\nTo limit the attachment size and file types on your XWiki, you can follow these steps:\n\n1. **Limit the attachment size:**\nBy default, the maximum attachment size is set to 32MB for XWiki versions lower than 10.9RC1 and 100GB for versions 10.9RC1 and later. To change this limit, you need to modify the *Maximum Upload Size* parameter in the *XWikiPreferences* document:\n\n   a. Go to *http://<yourwiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object*\n   b. Click on the line that says *XWikiPreferences 0*\n   c. Scroll down to the *Maximum Upload Size* field and change the number to 10485760 (which is 10MB in bytes)\n   d. Scroll to the bottom and click *Save*\n\n   Repeat these steps for each (sub)wiki, if necessary.\n\n2. **Limit the file types:**\nTo ensure that only images or PDF files can be uploaded as attachments, you can use the Attachment Validation Application. This application allows you to set a whitelist or blacklist of MIME types for attachments. In this case, you can set a whitelist to only allow image and PDF file types.\n\n   Note that the MIME types for images and PDF files are:\n\n   - Images:\n     - jpeg: image/jpeg\n     - png: image/png\n     - gif: image/gif\n     - bmp: image/bmp\n     - svg: image/svg+xml\n   - PDF: application/pdf\n\nPlease refer to the [XWiki Attachment Validation Application](https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/) documentation for more details on how to configure this application.\n\nBy following these steps, you can ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments",
      "content": "# Linking to an external file/image\n\nIf your file is on a remote server and you wish to link to it from your wiki, simply use the URL of the link as the content of your wiki link. For example, using the wiki editor you&#x27;d write:\n\n* **XWiki Syntax 1.0**: [http://some\\_remote\\_server/path/to/file&gt;text to display]\n* **XWiki Syntax 2.0**: [[text to display&gt;&gt;http://some\\_remote\\_server/path/to/file]]\n\nFor displaying an image located on a remote server, use the following HTML code snippet:\n\n* **XWiki Syntax 1.0**: &lt;img src=&quot;http://some\\_remote\\_server/path/to/image&quot;/&gt;\n* **XWiki Syntax 2.0**: image:http://some\\_remote\\_server/path/to/image\n\nSee the [XWiki Syntax Guide](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) for more details.\n\n# Backlinks indexation\n\nXWiki 14.2+ Page including attachments (or images) from other pages are now listed in their [backlinks](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Navigate/#HBacklinks).\n\n# Upload summary\n\nXWiki 16.3.0+\u00a0When upload summaries are enabled by the administrator, you can include descriptions to your uploads done through the Attachment tab.\n\n![upload-summary.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/upload-summary.png?rev=1.1)\n\nThese upload summaries will then be displayed for each upload in the revision history of the attachment.  \nNote that if you upload multiple files at the same time with, *e.g.*, a drag and drop, they will share the same upload summary.\n\n\n\n# Size Limit\n\nThe maximum size of an attachment is limited by the administrator. By default it is set at about 32 megabytes.\n\n# Learn More\n\nFor more information about how XWiki attachments work and how to configure/tune the attachment store, you can examine the [administrator&#x27;s guide to attachments](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments).\n\n\n",
      "similarity_score": 12.04616928100586,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.GettingStarted.XWikiBasicConcepts",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/GettingStarted/XWikiBasicConcepts",
      "content": "\nXWiki is divided into Pages and Wikis. Lateral menus are handled using Panels.\n\n**Contents*** [Page](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/GettingStarted/XWikiBasicConcepts#HPage)\n* [Wiki](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/GettingStarted/XWikiBasicConcepts#HWiki)\n* [Panels](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/GettingStarted/XWikiBasicConcepts#HPanels)\n# Page\n\nA page is the basic unit of content in XWiki. A page is usually divided in the following areas:\n\n* **Action bar** (located at the top): allows you to interact with the current page\n* **Title** (how the page is named)\n* **Author and date** (what user modified the page last and on what date)\n* **Content area**\n* **Panels** (either on the left or right of the page, on both sides or hidden)\n* **Footer area**\n\t+ Creator and date (who was the creator of the page and on what date\n\t+ Tags (some categories in which the page fits)\n* **Tabbed area at the bottom of the page** featuring:\n\t+ Comments and Annotations (what people have to say about the page)\n\t+ Attachments (files that have been uploaded to the page)\n\t+ History (every version of the current page)\n\t+ Information (included pages, backlinks)\n\nThe following actions can be performed on any wiki page, provided the current user has the rights to do it:\n\n* Edit the page\n\t+ Using the WYSIWYG editor: this is a rich text editor that allows you to modify the contents of your wiki page easily\n\t+ Using the wiki editor: for users accustomed to writing in markup syntax\n* Print &amp; export the page using the More Actions menu\n\t+ The user can display a print preview of the current page\n\t+ Each page can be exported in the following formats: HTML, PDF, RTF (for MS Office) and XAR (XWiki Archive)\n* Watch the page\n\t+ The user can choose to watch the current page to get notified about changes\n\t+ Whenever the page gets modified, she will receive an email notification\n\n",
      "similarity_score": 11.41368579864502,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "Attachments can be uploaded either through the regular [upload action](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments), [WebDAV](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/WebDAV), [XML-RPC](https://extensions.xwiki.org/xwiki/bin/view/Extension/XML-RPC%20Integration) or [Rest](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI).  \nAs an administrator you can set limits on the maximum size of an attachment and where the attachments will be stored.\n\n# Size Limit\n\nThe maximum size of an attachment is limited by a configuration parameter in the *XWikiPreferences* document. It is set to 100GB by default (32MB for XWiki &lt; 10.9RC1).  \nTo change it follow these steps:\n\n1. Go to *http://&lt;yourwiki&gt;/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object*\n2. Click on the line that says XWikiPreferences 0 (right below the line that says Objects of type XWiki.XWikiPreferences (1))\n3. Scroll down to the field that says Maximum Upload Size and change the number to whatever size you want (it is expressed in bytes)\n4. Scroll to the bottom and click &quot;Save&quot;\n5. Repeat for each (sub)wiki for which you need to increase the size, since currrently this configuration has to be set per wiki\n\nNote that if you&#x27;ve already tried to attach a file and it failed, in order for the new size setting to be taken into account you might need to clear your browser&#x27;s cache.\n\n# Mimetype Restriction\n\nSee [Attachent Validation Application](https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/).\n\n",
      "similarity_score": 0.8608766794204712,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "# Attachment display or download\n\nWhen possible (see [Security section](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HSecurity) below) attachments are displayed directly in the browser when accessed.  \nIt is possible for developers to force-downloading an attachment by adding the parameter ?force-download=1 in the attachment URL.\u00a0\n\nXWiki 12.10+\u00a0it&#x27;s possible to use a dedicated property in xwiki.properties to always force some attachment mime-types to be downloaded:\n\n#-# [Since 12.10]  \n#-# Define the kind of attachment that you always want to be downloaded and never displayed inline.  \n#-# By default this list is empty, but you can specify a list of mime-types (coma separated list of values) which  \n#-# should be always downloaded no matter who attached them or what is the whitelist/blacklist configuration.  \n#-#  \n#-# The distinction with the blacklist configuration above is that the blacklist won&#x27;t affect file attached by a user  \n#-# with programming rights, while this configuration affect any attachment.  \n# attachment.download.forceDownload=\n\n# Upload summary\n\nXWiki 16.3.0+\u00a0You can enable upload summaries in xwiki.properties to let users add descriptions during attachment uploads.\n\n#-# [Since 16.3.0RC1]  \n#-# Indicate whether or not comments for attachment uploads should be settable from UI, and displayed whenever the  \n#-# attachment revisions are listed. The default is false.  \n# attachment.upload.enableComments=false\n\n# Security\n\nIn order to prevent attacks by using attachments, it&#x27;s possible to control which attachments&#x27; can be directly opened on the browser based on their mimetypes.  \nTwo properties in xwiki.properties allow to control that independently:\n\n#-# [Since 5.2M2]  \n#-# Define the kind of attachment that can be displayed inline. You can either choose to do it through a whitelist  \n",
      "similarity_score": 0.8011883497238159,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "# Versions\n\nWhen a user uploads an attachment and then uploads another attachment with the exact same name, you can decide whether or not to keep a version history of the attachments like you do with documents.  \nXWiki stores all document attachment versions by default which costs more storage space. If you need only latest versions of attachments, you can disable attachment version control by editing your [xwiki.cfg](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/) and adding:\n\nxwiki.store.attachment.versioning=0# Deletion\n\nDeleted attachments are stored in a recycle bin so that they can be restored along with the document when rolling back or previewing an earlier version where the attachment should be visible. To disable this feature, edit [xwiki.cfg](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/) and add:\n\nstorage.attachment.recyclebin=0You can view the list of deleted attachments in your wiki and delete them permanently by going to XWiki.DeletedAttachments in your wiki.\n\n# Attachment Storage\n\nXWiki offers plugin attachment storage mechanisms so you can store your attachments in the database or directly in the filesystem.\n\nGenerally metadata for attachment and deleted attachments stay in the database whatever store is used for the content. The metadata contains the type of store used for the content allowing each attachment to choose a different store. The consequence is that what you configure is the **default** store for a new attachment and not the store used for all attachments.\n\n",
      "similarity_score": 0.7818325757980347,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 2949,
    "completion_tokens": 473,
    "total_tokens": 3422
  },
  "average_power_draw": null,
  "energy_consumption": null,
  "energy_per_input_token": null,
  "energy_per_output_token": null,
  "energy_per_total_token": null
}