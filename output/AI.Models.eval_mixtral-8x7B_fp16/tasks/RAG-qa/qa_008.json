{
  "id": "qa_008",
  "prompt": "How can I ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki?",
  "expected_answer": "To ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki, follow these steps:\n\n**Step 1: Configure allowed mimetypes**\n\nEdit the `xwiki.properties` configuration file in your installation and add or update the following line to configure the default mimetype restrictions at farm level:\n```\nattachment.upload.allowList=image/*,application/pdf\n```\nThis will allow only image files (with any subtype, e.g., `image/jpeg`, `image/png`, etc.) and PDF files to be uploaded, and block all other mimetypes.\n\n**Step 2: Configure maximum attachment size**\n\nTo set the maximum attachment size to 10MB, follow these steps:\n\n1. Go to `http://<yourwiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object`\n2. Click on the line that says XWikiPreferences 0 (right below the line that says Objects of type XWiki.XWikiPreferences (1))\n3. Scroll down to the field that says Maximum Upload Size and change the number to `10485760` (10MB in bytes)\n4. Scroll to the bottom and click \"Save\"\n5. Repeat for each (sub)wiki for which you need to set this configuration!",
  "ai_answer": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments \nhttps://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments \n\n\nTo ensure that only images or PDF files of up to 10MB can be uploaded as attachments on the whole wiki, you will need to modify the wiki's configuration. Here's how you can do it:\n\n1. **Limit the file size**: The maximum size of an attachment is limited by the administrator. By default, it is set at about 32 megabytes. You can reduce this limit to 10MB by editing the `xwiki.cfg` file and adding or modifying the following line:\n\n   ```\n   xwiki.attachment.size.limit=10485760\n   ```\n   This sets the limit to 10MB (10 * 1024 * 1024 bytes).\n\n2. **Limit the file types**: You can limit the types of files that can be uploaded by using the attachment validation UI extension. Here's how you can do it:\n\n   - Install the [Attachment Validation UI extension](https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment%20Validation%20UI/).\n   - Edit the `xwiki.cfg` file and add the following line to enable the extension:\n\n     ```\n     xwiki.plugin.attachmentvalidationui.class=org.xwiki.contrib.attachmentvalidation.AttachmentValidationUIPlugin\n     ```\n   - Add the following line to the `xwiki.cfg` file to specify the blocked mimetypes:\n\n     ```\n     attachment.upload.blockList=image/*,application/pdf\n     ```\n   - Optionally, you can also configure these restrictions at the wiki or space level through the administration UI by visiting the Attachments Restriction section of the administration.\n\nPlease note that you need to have administrative privileges to perform these actions. Also, modifying the `xwiki.cfg` file requires access to the file system where XWiki is installed.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "# Versions\n\nWhen a user uploads an attachment and then uploads another attachment with the exact same name, you can decide whether or not to keep a version history of the attachments like you do with documents.  \nXWiki stores all document attachment versions by default which costs more storage space. If you need only latest versions of attachments, you can disable attachment version control by editing your [xwiki.cfg](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/) and adding:\n\nxwiki.store.attachment.versioning=0# Deletion\n\nDeleted attachments are stored in a recycle bin so that they can be restored along with the document when rolling back or previewing an earlier version where the attachment should be visible. To disable this feature, edit [xwiki.cfg](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/) and add:\n\nstorage.attachment.recyclebin=0You can view the list of deleted attachments in your wiki and delete them permanently by going to XWiki.DeletedAttachments in your wiki.\n\n# Attachment Storage\n\nXWiki offers plugin attachment storage mechanisms so you can store your attachments in the database or directly in the filesystem.\n\nGenerally metadata for attachment and deleted attachments stay in the database whatever store is used for the content. The metadata contains the type of store used for the content allowing each attachment to choose a different store. The consequence is that what you configure is the **default** store for a new attachment and not the store used for all attachments.\n\n",
      "similarity_score": 0.8566396236419678,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.Attachment.Validation.UI.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/",
      "content": "#-# Define the list of blocked attachment mimetypes. By default, this list is empty, but you can specify a\u00a0  \n#-# comma-separated list of blocked mimetypes. Note that a joker (\\*) can be used to accept any media type. Once this\u00a0  \n#-# list is not empty, any attachment matching one of the listed mimetype will be rejected.  \n#-# For instance, if you want to reject plain text and any kind of images, you can set the list to:  \n#-# text/plain,image/\\*  \n#-#  \n# attachment.upload.blockList=## Administration UI\n\n[![attachment_restriction_admin.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Attachment/Validation/UI/WebHome/attachment_restriction_admin.png?width=960&amp;rev=1.1)](https://extensions.xwiki.org/xwiki/bin/download/Extension/Attachment/Validation/UI/WebHome/attachment_restriction_admin.png?rev=1.1)\n\nThe mimetype restrictions can also be configured at wiki or space level through the administration UI, by visiting the Attachments Restriction section of the administration.\n\n",
      "similarity_score": 0.8389971256256104,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments",
      "content": "# Linking to an external file/image\n\nIf your file is on a remote server and you wish to link to it from your wiki, simply use the URL of the link as the content of your wiki link. For example, using the wiki editor you&#x27;d write:\n\n* **XWiki Syntax 1.0**: [http://some\\_remote\\_server/path/to/file&gt;text to display]\n* **XWiki Syntax 2.0**: [[text to display&gt;&gt;http://some\\_remote\\_server/path/to/file]]\n\nFor displaying an image located on a remote server, use the following HTML code snippet:\n\n* **XWiki Syntax 1.0**: &lt;img src=&quot;http://some\\_remote\\_server/path/to/image&quot;/&gt;\n* **XWiki Syntax 2.0**: image:http://some\\_remote\\_server/path/to/image\n\nSee the [XWiki Syntax Guide](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) for more details.\n\n# Backlinks indexation\n\nXWiki 14.2+ Page including attachments (or images) from other pages are now listed in their [backlinks](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Navigate/#HBacklinks).\n\n# Upload summary\n\nXWiki 16.3.0+\u00a0When upload summaries are enabled by the administrator, you can include descriptions to your uploads done through the Attachment tab.\n\n![upload-summary.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/upload-summary.png?rev=1.1)\n\nThese upload summaries will then be displayed for each upload in the revision history of the attachment.  \nNote that if you upload multiple files at the same time with, *e.g.*, a drag and drop, they will share the same upload summary.\n\n\n\n# Size Limit\n\nThe maximum size of an attachment is limited by the administrator. By default it is set at about 32 megabytes.\n\n# Learn More\n\nFor more information about how XWiki attachments work and how to configure/tune the attachment store, you can examine the [administrator&#x27;s guide to attachments](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments).\n\n\n",
      "similarity_score": 0.831332802772522,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 1481,
    "completion_tokens": 432,
    "total_tokens": 1913
  },
  "average_power_draw": null,
  "energy_consumption": null,
  "energy_per_input_token": null,
  "energy_per_output_token": null,
  "energy_per_total_token": null
}