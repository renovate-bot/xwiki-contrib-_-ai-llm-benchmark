{
  "id": "qa_008",
  "prompt": "How can I ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki?",
  "expected_answer": "To ensure that only images or PDF files of at maximum 10MB can be uploaded as attachments on the whole wiki, follow these steps:\n\n**Step 1: Configure allowed mimetypes**\n\nEdit the `xwiki.properties` configuration file in your installation and add or update the following line to configure the default mimetype restrictions at farm level:\n```\nattachment.upload.allowList=image/*,application/pdf\n```\nThis will allow only image files (with any subtype, e.g., `image/jpeg`, `image/png`, etc.) and PDF files to be uploaded, and block all other mimetypes.\n\n**Step 2: Configure maximum attachment size**\n\nTo set the maximum attachment size to 10MB, follow these steps:\n\n1. Go to `http://<yourwiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object`\n2. Click on the line that says XWikiPreferences 0 (right below the line that says Objects of type XWiki.XWikiPreferences (1))\n3. Scroll down to the field that says Maximum Upload Size and change the number to `10485760` (10MB in bytes)\n4. Scroll to the bottom and click \"Save\"\n5. Repeat for each (sub)wiki for which you need to set this configuration!",
  "ai_answer": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments \nhttps://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments \n\n\nTo restrict the file types and sizes for attachments on your wiki, you'll need to configure the attachment validation settings. Here's how:\n\n**Step 1: Set the maximum file size**\n\nAs an administrator, go to the `XWikiPreferences` document and edit it in object mode. Scroll down to the `Maximum Upload Size` field and set it to `10485760` (which is equivalent to 10MB). Save the changes.\n\n**Step 2: Restrict file types**\n\nTo allow only images and PDF files, you'll need to configure the `attachment.upload.blockList` property. You can do this by adding the following line to your `xwiki.properties` file:\n```properties\nattachment.upload.blockList=text/*,application/*,video/*,audio/*,application/zip,application/gzip,application/x-tar,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\n```\nThis will block all file types except images (`image/*`) and PDF files (`application/pdf`).\n\n**Alternative method using the Administration UI**\n\nYou can also configure the attachment validation settings through the Administration UI:\n\n1. Go to the Administration page\n2. Click on \"Attachments\" in the left-hand menu\n3. Click on \"Attachment Validation\"\n4. In the \"Blocked MIME types\" field, enter the following: `text/*,application/*,video/*,audio/*,application/zip,application/gzip,application/x-tar,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document`\n5. Click \"Save\"\n\nBy following these steps, you'll ensure that only images and PDF files with a maximum size of 10MB can be uploaded as attachments on your wiki.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments",
      "content": "## Using the top level menu\n\nYou can add an attachment using the &quot;More actions&quot; menu:\n\n![AddAttachmentsFlamingo.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/AddAttachmentsFlamingo.png?rev=1.6)\n\nWhen clicked, it&#x27;ll direct you to the Attachments tab located at the bottom of the page:\n\n![view-attachments.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/view-attachments.png?rev=1.10)\n\n## Using the attachment tab at the bottom of the page\n\nView the page on which you wish to attach a file and then click on the &quot;Attachments&quot; tab at the bottom of the page.\n\n![attachments.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/attachments.png?rev=1.7)\n\nNote that the file selector that appears allows you to select as many files as you wish to upload. Thus you don&#x27;t need to add attachments one by one.\n\nUse the arrows in the upper right corner to navigate to uploaded files.\n\n## Using the WYSIWYG editor\n\nEdit the page on which you wish to attach a file using the WYSIWYG editor. To link a specific text with an attachment click on &quot;Link&quot; in the toolbar. From the arrow change Page to Attachment or click on Upload to add a new file directly.\n\nTo add an image directly in the page click on &quot;Image&quot; and select an existing one from the wiki or click on Upload and add a new image from your computer.\n\n![AttachmentWysiwygToucan.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/AttachmentWysiwygToucan.png?rev=1.1)\n\n",
      "similarity_score": 0.8396435379981995,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.Attachment.Validation.UI.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/",
      "content": "#-# Define the list of blocked attachment mimetypes. By default, this list is empty, but you can specify a\u00a0  \n#-# comma-separated list of blocked mimetypes. Note that a joker (\\*) can be used to accept any media type. Once this\u00a0  \n#-# list is not empty, any attachment matching one of the listed mimetype will be rejected.  \n#-# For instance, if you want to reject plain text and any kind of images, you can set the list to:  \n#-# text/plain,image/\\*  \n#-#  \n# attachment.upload.blockList=## Administration UI\n\n[![attachment_restriction_admin.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Attachment/Validation/UI/WebHome/attachment_restriction_admin.png?width=960&amp;rev=1.1)](https://extensions.xwiki.org/xwiki/bin/download/Extension/Attachment/Validation/UI/WebHome/attachment_restriction_admin.png?rev=1.1)\n\nThe mimetype restrictions can also be configured at wiki or space level through the administration UI, by visiting the Attachments Restriction section of the administration.\n\n",
      "similarity_score": 0.8357992768287659,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "Attachments can be uploaded either through the regular [upload action](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments), [WebDAV](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/WebDAV), [XML-RPC](https://extensions.xwiki.org/xwiki/bin/view/Extension/XML-RPC%20Integration) or [Rest](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI).  \nAs an administrator you can set limits on the maximum size of an attachment and where the attachments will be stored.\n\n# Size Limit\n\nThe maximum size of an attachment is limited by a configuration parameter in the *XWikiPreferences* document. It is set to 100GB by default (32MB for XWiki &lt; 10.9RC1).  \nTo change it follow these steps:\n\n1. Go to *http://&lt;yourwiki&gt;/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object*\n2. Click on the line that says XWikiPreferences 0 (right below the line that says Objects of type XWiki.XWikiPreferences (1))\n3. Scroll down to the field that says Maximum Upload Size and change the number to whatever size you want (it is expressed in bytes)\n4. Scroll to the bottom and click &quot;Save&quot;\n5. Repeat for each (sub)wiki for which you need to increase the size, since currrently this configuration has to be set per wiki\n\nNote that if you&#x27;ve already tried to attach a file and it failed, in order for the new size setting to be taken into account you might need to clear your browser&#x27;s cache.\n\n# Mimetype Restriction\n\nSee [Attachent Validation Application](https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/).\n\n",
      "similarity_score": 0.8294193744659424,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "## Filesystem Attachment Store\n\nThe default since 10.5\n\nThe Filesystem attachment store saves your attachments in files in a directory tree. This means you will have one more thing to do when you back up your data but it also means you can save larger (over one gigabyte) files. Filesystem attachment store implements a two stage commit mechanism to maintain integrity even if the database fails to commit the attachment meta-data.\n\n### Filesystem attachment store location\n\nBy default the filsystem storage is located in a sub-folder (store/file since XWiki 11.0 and storage before) of the permanent directory (defined with the parameter environment.permanentDirectory in the xwiki.properties file). By default it&#x27;s defined to be data, which is a directory relative to where the Java Servlet Container was started. It&#x27;s recommend to modify this value to be absolute sure that you can start the Servlet Container from any directory and still have XWiki find the attachments located in this work directory.\n\nFor example:\n\nenvironment.permanentDirectory=/opt/tomcat6/dataSince 11.4 it&#x27;s possible to set the location of the filesystem store without modifying the general permanent directory using property store.file.directory of the file xwiki.properties.\n\nstore.file.directory=/my/custom/location### Other considerations\n\nIf you are running a [cluster](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Clustering/) you will need \u00a0to have a synchronized storage directory for each node. You can use NFS or other means to mount the disk on each node in the cluster.\n\n",
      "similarity_score": 0.8291743397712708,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments",
      "content": "# Linking to an external file/image\n\nIf your file is on a remote server and you wish to link to it from your wiki, simply use the URL of the link as the content of your wiki link. For example, using the wiki editor you&#x27;d write:\n\n* **XWiki Syntax 1.0**: [http://some\\_remote\\_server/path/to/file&gt;text to display]\n* **XWiki Syntax 2.0**: [[text to display&gt;&gt;http://some\\_remote\\_server/path/to/file]]\n\nFor displaying an image located on a remote server, use the following HTML code snippet:\n\n* **XWiki Syntax 1.0**: &lt;img src=&quot;http://some\\_remote\\_server/path/to/image&quot;/&gt;\n* **XWiki Syntax 2.0**: image:http://some\\_remote\\_server/path/to/image\n\nSee the [XWiki Syntax Guide](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/) for more details.\n\n# Backlinks indexation\n\nXWiki 14.2+ Page including attachments (or images) from other pages are now listed in their [backlinks](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Navigate/#HBacklinks).\n\n# Upload summary\n\nXWiki 16.3.0+\u00a0When upload summaries are enabled by the administrator, you can include descriptions to your uploads done through the Attachment tab.\n\n![upload-summary.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Attachments/upload-summary.png?rev=1.1)\n\nThese upload summaries will then be displayed for each upload in the revision history of the attachment.  \nNote that if you upload multiple files at the same time with, *e.g.*, a drag and drop, they will share the same upload summary.\n\n\n\n# Size Limit\n\nThe maximum size of an attachment is limited by the administrator. By default it is set at about 32 megabytes.\n\n# Learn More\n\nFor more information about how XWiki attachments work and how to configure/tune the attachment store, you can examine the [administrator&#x27;s guide to attachments](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments).\n\n\n",
      "similarity_score": 0.8287693858146667,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 2006,
    "completion_tokens": 416,
    "total_tokens": 2422
  },
  "average_power_draw": null,
  "energy_consumption": null,
  "energy_per_input_token": null,
  "energy_per_output_token": null,
  "energy_per_total_token": null
}