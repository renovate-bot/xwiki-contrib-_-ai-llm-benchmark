{
  "id": "qa_006",
  "prompt": "Can I customize the user profile fields that are populated from the OpenID Connect provider in XWiki?\nI want to map additional user profile fields from my OpenID Connect provider to XWiki user properties. How can I achieve this?",
  "expected_answer": "Yes, you can customize the user profile fields that are populated from the OpenID Connect provider by mapping them in the `xwiki.properties` file.\n\nTo map additional user profile fields, use the `oidc.user.mapping` property. Here's an example of how to map custom properties:\n\n```\n# oidc.user.mapping=myxproperty1=${oidc.user.subject}\n# oidc.user.mapping=myxproperty2=myprefix-${oidc.user.subject}\n```\n\nReplace `myxproperty1` and `myxproperty2` with the actual XWiki user property names, and `${oidc.user.subject}` with the appropriate variable based on the data provided by your OpenID Connect provider.\n\nAfter configuring the mappings, save the `xwiki.properties` file and restart XWiki to apply the changes.",
  "ai_answer": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI \nhttps://extensions.xwiki.org/xwiki/bin/view/Extension/Administration%20Application \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Authentication/ \n\n\nYes, you can definitely customize the mapping of user profile fields in XWiki when using an OpenID Connect provider. To add and configure additional user properties with your provider's mappings, follow these steps:\n\n1. In your XWiki instance administration panel, navigate to the 'Users and Groups' section or go directly to this URL: [https://<host>/?action=manageProperties&type=user](https://your-xwiki-instance/?action=manageProperties&type=eanew).\n2. Once you are on the user properties management page, click on the \"Edit Properties\" button located near your username and password fields. This will take you to a new page where you can add or remove properties for your XWiki account.\n3. To create a custom user profile field mapping from an OpenID Connect provider (e.g., Google, Microsoft), follow these steps:\n   - Click the \"New Property\" button on the property management page.\n   - A dialog will open where you can enter the new property name and select its type. Make sure to give it a unique and meaningful name that represents the profile field from your provider (e.g., `googleEmail`, `msPhoneNumber`).\n   - Next, provide a help text for other administrators or users to understand what this property stores by using the \"Help\" textbox below the property definition form. This is optional but recommended if you think it could benefit others who will be using XWiki later on. For example: \"Email address obtained from Google Account.\"\n   - Under \"Value Mapping\", click the link that says '...'. A dropdown list of all available properties and their definitions (name + help) for your account will open. From this list, choose an existing user property to map the new profile field's value(s). Note: This feature was added in Xwiki 12.6; earlier versions may not offer direct access through a dropdown menu but you can enter any URL-like mapping string instead (e.g., `https://localhost/Xwiki/ProfileProperty?id=009` -> Google's user id).\n   - In the 'Value Mapping Properties', select only the property that will hold your provider's profile field values and ignore others if you wish to have a cleaner properties view for XWiki admins. For example, in an admin account with properties like: `GoogleEmail`, `msPhoneNumber`, `googleSignInUrl`...; Only select 'googleSignInUrl' which is the property that stores your provider's sign-in URL and ignore others to show a concise user properties view.\n   - Once you are satisfied with all details, click \"Save Property\". Your customized property should be saved correctly now. \n4. If you prefer, there's an alternative method for mapping new values which can also include the option of specifying whether this property is required or not (not set as default in XWiki). Instead of adding a 'Value Mapping Properties', under \"Property Details\", scroll to 'Is Required' section and choose true/false based on your requirements. \n   \nBy following these steps, you can customize the mapping of user profile fields from an OpenID Connect provider to XWiki user properties according to your needs.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "\n\n\n| openid_connect_16x16.png | **Allow an XWiki instance to authenticate on an OpenID Connect provider** |\n| --- | --- |\n\n**Recommended**\n\n| Type | JAR |\n| --- | --- |\n| Category | Authenticator |\n| Developed by | [Thomas Mortagne](https://xwiki.org/xwiki/bin/view/XWiki/ThomasMortagne) |\n| Active Installs | 146 |\n| Rating | *  * [1](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Poor&quot;) * [2](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Satisfactory&quot;) * [3](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Good&quot;) * [4](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Very good&quot;) * [5](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/ &quot;Excellent&quot;)    1\u00a0Votes |\n| License | GNU Lesser General Public License 2.1 |\n\n\n\n| Compatibility | XWiki 14.10+ is required. |\n| --- | --- |\n\n**Installable with the Extension Manager**\n\n[Download v2.8.6](https://extensions.xwiki.org/xwiki/rest/repository/extensions/org.xwiki.contrib.oidc%3Aoidc-authenticator/versions/2.8.6/file?rid=maven-xwiki)[Sources](https://github.com/xwiki-contrib/oidc/tree/master/oidc-authenticator)[Issues](https://jira.xwiki.org/browse/OIDC)\n\nTable of contents\n\n",
      "similarity_score": 0.8105360865592957,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.XWikiRESTfulAPI",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI",
      "content": "* **HTTP BASIC Auth**: You provide your credentials using the Authorization HTTP header\n* **XWiki session**: If you are logged in XWiki and you use the cookies provided by the authentication mechanism, you will also be authenticated to the XWiki RESTful API. This is useful, for example, when you are interacting with the API using the XMLHttpRequest object of a browser using Javascript.\n* **Custom authentication methods:** if you have setup a custom authenticator on your wiki (such as [OIDC](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/), or [Trusted authentication](https://extensions.xwiki.org/xwiki/bin/view/Extension/Trusted%20authentication%20framework) or even your own custom ones), additional authentication methods may be available for the RESTful API, provided by these authenticators.\n\nIf you don&#x27;t provide any credentials the XWiki RESTful API will recognize you as a XWiki.Guest user.\n\nSo if you have, let&#x27;s say a Main.PrivatePage, and you try to do:\u00a0\n\n$ curl -v http://localhost:8080/xwiki/rest/wikis/xwiki/spaces/Main/pages/PrivatePage  \n...  \n&lt; HTTP/1.1 401 Unauthorized  \n...You will get an Unauthorized empty response.\n\nOn the contrary, by specifying Admin credentials you gain access to the actual page:\n\n$ curl -u Admin:admin http://localhost:8080/xwiki/rest/wikis/xwiki/spaces/Main/pages/PrivatePage  \n  \n&lt;page xmlns=&quot;http://www.xwiki.org&quot;&gt;  \n &lt;link rel=&quot;http://www.xwiki.org/rel/space&quot; href=&quot;http://localhost:8080/xwiki/rest/wikis/xwiki/spaces/Main&quot;/&gt;  \n\u00a0...  \n &lt;content&gt;Only admin can see this&lt;/content&gt;  \n&lt;/page&gt;### CSRF Token\n\n",
      "similarity_score": 0.8030508756637573,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.OpenID Connect.OpenID Connect Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/",
      "content": "# oidc.skipped=false## In-wiki configuration\n\nXWiki 1.30+ The OIDC authenticator can be configured in XWiki, and to rely on multiple configurations which get selected through a user cookie.\n\nIn order to use the in-wiki configuration of the OIDC authenticator, you will still need to define the configuration key xwiki.authentication.authclass in xwiki.cfg. Once the OIDC Authenticator installed, you will be able to define new OIDC Client configurations through objects of class XWiki.OIDC.ClientConfigurationClass.\n\nThe property &quot;Configuration name&quot; of the object will define the name of the OIDC configuration being declared. Use default for the default OIDC configuration. The other properties are similar to the properties defined in xwiki.properties. Use the key oidc.defaultClientConfiguration in xwiki.properties to change the name of the OIDC configuration that should be used by default.\n\nWhen creating multiple in-wiki configurations, each configuration will be selectable by the user through the cookie oidcProvider. You can change the name of this cookie with the key oidc.clientConfigurationCookie in xwiki.properties.\n\n",
      "similarity_score": 0.795967698097229,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.Administration Application",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/Administration%20Application",
      "content": "## Provided Features\n\nThis is what you see when you go the global Administration page:\n\n![global.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Administration%20Application/global.png?rev=1.7)\n\nSome of the Admin Categories are provided by the Administration Application itself (described below) and others are contributed by other extensions using the [Configurable Class mechanism](https://extensions.xwiki.org/xwiki/bin/view/Extension/Administration%20Application#HMakingyourapplicationconfigurablewithConfigurableClass) (described in the contributing extension).\n\n### Users &amp; Rights\n\n#### Users\n\nManage the users of the wiki: create new users, delete existing users and edit the user profiles.\n\n![users.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Administration%20Application/users.png?rev=1.6)\n\nXWiki 11.8-rc-1+\u00a0Note that deleting an user requires 2 steps:\n\n* You have to disable the user first. Disabling the user prevents them from logging in and it doesn&#x27;t break the scripts that they last modified. This is the recommended way to &quot;remove&quot; an user account from your organization.\n* Then, if you really need to completely remove the user account, you can delete it. However, you should choose another user account with similar access rights to replace the deleted one as page author of existing pages, otherwise, any scripts inside those existing pages will lose their rights and stop working.\n\n![deleteUser-replaceAuthor.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Administration%20Application/deleteUser-replaceAuthor.png?rev=1.1)\n\n\n\n#### Groups\n\nManage the user groups: create new groups, delete existing groups and edit the group membership.\n\n![groups.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Administration%20Application/groups.png?rev=1.5)\n\nXWiki 15.8-rc-1+ Groups with custom titles can be filtered using the &quot;Group Name&quot; column.\n\n",
      "similarity_score": 0.7940232753753662,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Authentication.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Authentication/",
      "content": "## Container Authentication\n\nDelegates authentication to the Servlet Container. If it fails it falls back to the standard XWiki authentication.\n\nTo configure XWiki to use it, specify:\n\nxwiki.authentication.authclass=com.xpn.xwiki.user.impl.xwiki.AppServerTrustedAuthServiceImplFor users to be actually created and not just set as context user you must set in xwiki.cfg configuration file (if the property does not already exist, create it):\n\nxwiki.authentication.createuser=empty## OpenId Connect Authentication\n\nSee the [OpenId Connect Authenticator Extension](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/OpenID%20Connect%20Authenticator/).\n\n## Active Directory\n\nIf you&#x27;re looking to connect XWiki to an Active Directory server, you currently have 2 options:\n\n* Using the manual and generic approach using the [LDAP Authenticator extension](https://extensions.xwiki.org/xwiki/bin/view/Extension/LDAP/Authenticator/)\n* Using the dedicated [Active Directory Application](https://store.xwiki.com/xwiki/bin/view/Extension/ActiveDirectoryApplication) which is a paying application dedicated to simplifying the integration of Active Directory with XWiki. The Active Directory Application allows you to easily connect your Active Directory server to XWiki using a **visual editor**, update\u00a0**advanced configuration** settings without restarting the application server, **technical support** provided by [XWiki SAS](https://xwiki.com/), etc.\n\n## LDAP\n\nSee the [LDAP Authenticator extension](https://extensions.xwiki.org/xwiki/bin/view/Extension/LDAP/Authenticator/).\n\nThe deprecated LDAP core authenticator (for XWiki &lt; 7.4) can be found on [OldLDAPAuthenticator](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Authentication/OldLDAPAuthenticator/).\n\n",
      "similarity_score": 0.7878520488739014,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 59,
    "completion_tokens": 699,
    "total_tokens": 758
  },
  "average_power_draw": 254.86103613777527,
  "energy_consumption": 2169.6552152550657,
  "energy_per_input_token": 1.2010269666510192,
  "energy_per_output_token": 3.0025674166275476,
  "energy_per_total_token": 2.862341972632013
}