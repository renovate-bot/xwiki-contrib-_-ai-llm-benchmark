{
  "id": "qa_033",
  "prompt": "Puis-je authentifier les utilisateurs avec des jetons d'acc\u00e8s ?",
  "expected_answer": "Oui, vous pouvez authentifier les utilisateurs avec des jetons d'acc\u00e8s en utilisant l'extension d'authentification bas\u00e9e sur les jetons pour l'application LLM.\n\nCette extension permet aux applications externes d'authentifier les utilisateurs avec des jetons Web JSON sign\u00e9s (JWT). Le jeton doit contenir des revendications sp\u00e9cifiques, telles que la date d'expiration, l'\u00e9metteur, le sujet et la audience, et doit \u00eatre sign\u00e9 avec une cl\u00e9 Ed25519.\n\nPour utiliser cet authentificateur, vous devez :\n\n1. Activer l'authentificateur de jeton en d\u00e9finissant la propri\u00e9t\u00e9 `xwiki.authentication.authclass` dans le fichier `xwiki.properties` sur `org.xwiki.contrib.llm.authentication.JWTTokenAuth`.\n2. Configurer les applications autoris\u00e9es en ajoutant une nouvelle entr\u00e9e \u00e0 la liste des \u00ab Applications autoris\u00e9es \u00bb, en sp\u00e9cifiant le titre, l'URL, la cl\u00e9 publique et le format de groupe de l'application.\n3. G\u00e9n\u00e9rer un jeton JWT qui r\u00e9pond aux exigences de revendications et de cl\u00e9s de signature.\n4. Inclure le jeton dans l'en-t\u00eate \u00ab Authorization \u00bb de la requ\u00eate sous la forme \u00ab Bearer TOKEN \u00bb.\n\nNotez que cet authentificateur ne prend en charge que la cr\u00e9ation ou la mise \u00e0 jour des utilisateurs en fonction des informations fournies dans le jeton et ne prend pas en charge l'utilisation d'un jeton comme authentification pour un utilisateur existant qui n'a pas \u00e9t\u00e9 cr\u00e9\u00e9 via cet authentificateur.",
  "ai_answer": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Forms \nhttps://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/ \nhttps://extensions.xwiki.org/xwiki/bin/view/Extension/Security%20Module \nhttps://extensions.xwiki.org/xwiki/bin/view/Extension/Administration%20Application \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ \n\n\nOui, vous pouvez authentifier les utilisateurs avec des jetons d'acc\u00e8s sur XWiki. Selon la documentation, l'authentificateur LLM Application utilise des jetons JWT (JSON Web Tokens) sign\u00e9s avec une cl\u00e9 Ed25519. Voici comment vous pouvez g\u00e9n\u00e9rer une cl\u00e9 de signature appropri\u00e9e et les claims n\u00e9cessaires pour le jeton JWT :\n\n### G\u00e9n\u00e9ration de la cl\u00e9 de signature\n\nVous pouvez g\u00e9n\u00e9rer une cl\u00e9 de signature appropri\u00e9e en utilisant OpenSSL avec les commandes suivantes :\n\n```sh\nopenssl genpkey -algorithm ed25519 -outform PEM -out private.pem\nopenssl pkey -in private.pem -pubout -outform PEM -out public.pem\n```\n\nLes fichiers `private.pem` et `public.pem` contiendront respectivement la cl\u00e9 priv\u00e9e et la cl\u00e9 publique au format PEM.\n\n### Claims n\u00e9cessaires pour le jeton JWT\n\nLe jeton JWT doit contenir les claims suivants :\n\n- `exp` : le temps d'expiration, doit \u00eatre dans le futur mais pas plus de 24 heures dans le futur.\n- `iss` : l'\u00e9metteur, correspondant \u00e0 l'URL configur\u00e9e dans les applications autoris\u00e9es.\n- `sub` : le sujet, utilis\u00e9 pour d\u00e9river le nom d'utilisateur.\n- `aud` : l'audience, doit contenir l'URL de l'installation XWiki sous la forme `https://www.example.com/` sans chemin.\n\nClaims optionnels :\n\n- `given_name` : utilis\u00e9 pour d\u00e9finir le champ du pr\u00e9nom du profil utilisateur.\n- `family_name` : utilis\u00e9 pour d\u00e9finir le champ du nom de famille du profil utilisateur.\n- `email` : utilis\u00e9 pour d\u00e9finir le champ de l'email du profil utilisateur.\n- `groups` : une liste de groupes (sous forme de liste de cha\u00eenes de caract\u00e8res). Utilis\u00e9 pour d\u00e9finir les groupes de l'utilisateur.\n- `iat` : \u00e9mis \u00e0, le moment o\u00f9 le jeton a \u00e9t\u00e9 \u00e9mis. Les jetons plus anciens que 24 heures et les jetons \u00e9mis dans le futur ne sont pas accept\u00e9s.\n- `nbf` : pas avant, le jeton est rejet\u00e9 si ce temps est dans le futur.\n\nLe jeton doit \u00eatre pr\u00e9sent dans l'en-t\u00eate `Authorization` sous la forme `Bearer TOKEN` o\u00f9 `TOKEN` est le jeton JWT sign\u00e9 comme d\u00e9crit ci-dessus.\n\nPour plus de d\u00e9tails, vous pouvez consulter la documentation officielle [ici](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/).",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.Forms",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Forms",
      "content": "## Reference Form\n\nAnother good example of form utilization on XWiki.org is the [References page](https://www.xwiki.org/xwiki/bin/view/References/). When an user wants to add a new reference, the only thing he has to do is to type in the name of the reference he wants to add. He is then presented with a form he can fill in easily. Check it out and add your own project **[here](https://www.xwiki.org/xwiki/bin/view/References/)**!\n\n![editreference.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Forms/editreference.png?rev=1.2)\n\n## Questionnaire Form\n\nThanks to this mode, you can create advanced forms such as the following questionnaire:\n\n![Chestionar.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/Forms/Chestionar.png?rev=1.2)\n\n\n",
      "similarity_score": 0.7811554670333862,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.LLM Application.Authenticator.WebHome",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/",
      "content": "## Token Generation\n\nThis authenticator expects a JWT token that is signed with an Ed25519 key. A suitable signing key can, e.g., be generated using the [OpenSSL](https://www.openssl.org/) command line utility and the following two commands:\n\nopenssl genpkey -algorithm ed25519 -outform PEM -out private.pem  \nopenssl pkey -in private.pem -pubout -outform PEM -out public.pemThe files &quot;private.pem&quot; and &quot;public.pem&quot; then contain the private and public key in PEM format, respectively.\n\nThe JWT token needs to contain the following claims:\n\n* &quot;exp&quot;: the expiration time, must be in the future but not more than 24 hours in the future\n* &quot;iss&quot;: the issuer, corresponding to the URL property configured in the authorized applications\n* &quot;sub&quot;: the subject, used for deriving the username\n* &quot;aud&quot;: the audience, must contain the URL of the XWiki installation in the form https://www.example.com/ without path. Both a single string and an array of strings are supported. If the expected URL isn&#x27;t passed, an error is logged with the expected URL.\n\nOptional:\n\n* &quot;given\\_name&quot;: used to set the first name field of the user profile\n* &quot;family\\_name&quot;: used to set the last name field of the user profile\n* &quot;email&quot;: used to set the email field of the user profile\n* &quot;groups&quot;: a list of groups (as list of strings). Used to set the groups of the user.\n* &quot;iat&quot;: issued at, the time when the token was issued. Tokens older than 24 hours and tokens issued in the future aren&#x27;t accepted.\n* &quot;nbf&quot;: not before, the token is rejected if this time is in the future.\n\nThe token needs to be present in the &quot;Authorization&quot; header in the form &quot;Bearer TOKEN&quot; where TOKEN is the signed JWT token as described above.\n\n\n",
      "similarity_score": 0.7802908420562744,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.Security Module",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/Security%20Module",
      "content": "Therefore, the real task of settling access decisions is entirely delegated to customizable components that may be introduce by third parties and configured without rebuilding the platform. The component hint of the AuthorizationSettler may be configured from the ConfigurationSource (xwiki.properties) using the key security.authorization.settler. The default hint &quot;default&quot; is implemented by the DefaultAuthorizationSettler. Another experimental PriorityAuthorizationSettler (currently unmaintained, use at your own risk) is also bundled. Both are based on a AbstractAuthorizationSettler which provide a common foundation for merging access provide at each hierarchy level based on a customizable dynamic policy.\n\n### Right definitions\n\nSince the settling process is delegated to the AuthorizationSettler, the interpretation of right definitions is up to it, and right definition is only a tool for helping the creation of an expandable authorization settler, allowing new rights to be easily externally defined. New Right maybe registered with the AuthorizationManager using a RightDescription. The meaning of the right definition explained here is mostly pertinent for the default implementation of the AuthorizationSettler, and should normally be followed by any other settler implementation, but this could not be guaranteed.\n\n",
      "similarity_score": 0.7743683457374573,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "extensions:Extension.Administration Application",
      "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/Administration%20Application",
      "content": "Here you see the result of a single application with two ConfigurableClass objects. Each object is set to display in the same section (the section you see) and they both are set to use the same custom configuration class. Each object only displays two of the custom configuration class&#x27;s four properties because they have **propertiesToShow** set. The values of the **heading** property for the two objects are set to &quot;Section 1&quot; and &quot;Section 2&quot;. Also where it says &quot;Test section&quot; is customizable by adding a language pack.\n\n### Fields you can define\n\n* **displayInSection** (String) - Specifies the *administration section* that is used to configure your application. Administration sections are listed in the administration menu, grouped in *categories* (e.g. Rights, Localization, Themes). You can use this field to define a new administration section or you can specify an existing one (defined by some other ConfigurableClass object), in which case your configuration properties will be &quot;appended&quot; to the existing administration section under the specified heading (see below). If you need the section title translated, the value you add in this field will be used as a translation key, prefixed by admin..\n* **heading** (String) - You can add multiple ConfigurableClass objects to your document with different headings and the properties of each will be displayed under the heading. If you&#x27;re only using a single ConfigurableClass object for your application then you should leave this blank, unless you want to reuse an existing administration section (see above). Also note that this field is evaluated, so if you need to translate a heading you can directly use $services.localization.render(&#x27;someKey&#x27;) as value.\n* **configurationClass** (String) - This is the name of the custom configuration class which you defined to hold the configuration parameters. If you leave this blank then no form will be created.\n",
      "similarity_score": 0.7732111215591431,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/",
      "content": "![text_list_bullets](https://www.xwiki.org/xwiki/resources/icons/silk/text_list_bullets.png?cache-version=1711538036000)\n\n[Menu](https://extensions.xwiki.org/xwiki/bin/view/Extension/Menu%20Application)  \nMenu application\n\n![bell](https://www.xwiki.org/xwiki/resources/icons/silk/bell.png?cache-version=1711538036000)\n\n[Notifications](https://extensions.xwiki.org/xwiki/bin/view/Extension/Notifications%20Application/)  \nDisplay notifications about events happening in the wiki.\n\n![invitation.png](https://extensions.xwiki.org/xwiki/bin/download/Extension/Invitation%20Application/invitation.png?rev=1.3)\n\n[Invitation](https://extensions.xwiki.org/xwiki/bin/view/Extension/Invitation%20Application)  \nAllows users to send emails, inviting friends and colleagues to join a wiki\n\n# Other Features\n\nOther features can be added to your wiki by [installing](https://extensions.xwiki.org/xwiki/bin/view/Extension/Extension%20Manager%20Application) extensions not listed above. Check the [Extensions wiki](https://extensions.xwiki.org/xwiki/bin/view/Main/) for a full list of available extensions.\n\n\n",
      "similarity_score": 0.7719576358795166,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 2121,
    "completion_tokens": 698,
    "total_tokens": 2819
  },
  "average_power_draw": null,
  "energy_consumption": null,
  "energy_per_input_token": null,
  "energy_per_output_token": null,
  "energy_per_total_token": null
}