{
  "id": "qa_018",
  "prompt": "Wie kann ich sicherstellen, dass nur Bilder oder PDF-Dateien mit maximal 10 MB als Anh\u00e4nge im gesamten Wiki hochgeladen werden k\u00f6nnen?",
  "expected_answer": "Um sicherzustellen, dass nur Bilder oder PDF-Dateien mit maximal 10 MB als Anh\u00e4nge im gesamten Wiki hochgeladen werden k\u00f6nnen, f\u00fchren Sie die folgenden Schritte aus:\n\n**Schritt 1: Konfigurieren zul\u00e4ssiger MIME-Typen**\n\nBearbeiten Sie die Konfigurationsdatei `xwiki.properties` in Ihrer Installation und f\u00fcgen Sie oder aktualisieren Sie die folgende Zeile, um die Standard-MIME-Typ-Beschr\u00e4nkungen auf Farm-Ebene zu konfigurieren:\n```\nattachment.upload.allowList=image/*,application/pdf\n```\nDadurch werden nur Bilddateien (mit jedem Subtyp, z. B. `image/jpeg`, `image/png` usw.) und PDF-Dateien zum Hochladen zugelassen und alle anderen MIME-Typen blockiert.\n\n**Schritt 2: Konfigurieren der maximalen Anhangsgr\u00f6\u00dfe**\n\nUm die maximale Anhangsgr\u00f6\u00dfe auf 10 MB einzustellen, f\u00fchren Sie die folgenden Schritte aus:\n\n1. Gehen Sie zu `http://<IhrWiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object`\n2. Klicken Sie auf die Zeile, die XWikiPreferences 0 (direkt unter der Zeile, die Objects of type XWiki.XWikiPreferences (1) sagt) sagt\n3. Scrollen Sie nach unten zum Feld, das Maximum Upload Size hei\u00dft, und \u00e4ndern Sie die Zahl in `10485760` (10 MB in Byte)\n4. Scrollen Sie nach unten und klicken Sie auf \"Speichern\"\n5. Wiederholen Sie dies f\u00fcr jedes (Sub)Wiki, f\u00fcr das Sie diese Konfiguration festlegen m\u00fcssen!",
  "ai_answer": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/ \nhttps://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/ \n\n\nUm sicherzustellen, dass nur Bilder oder PDF-Dateien mit maximal 10 MB als Anh\u00e4nge im gesamten Wiki hochgeladen werden k\u00f6nnen, kannst du die folgenden Schritte durchf\u00fchren:\n\n1. \u00d6ffne die Datei `xwiki.properties` in der Ordnerstruktur deines XWiki-Installs (standardm\u00e4\u00dfig liegt sie in `conf/xwiki.properties`).\n2. F\u00fcge den folgenden Code hinzu:\n```\nxwiki.store.attachment.hint=hibernate\nxwiki.store.attachment.versioning.hint=hibernate\nxwiki.store.attachment.recyclebin.content.hint=hibernate\nxwiki.store.recyclebin.content.hint=hibernate\n\nxwiki.upload.max.file.size=10485760 // 10 MB in Bytes\n```\nDieser Code aktiviert die Verwendung des Hibernate-Store f\u00fcr Anh\u00e4nge und konfiguriert den maximalen Dateigr\u00f6\u00dfe auf 10 MB.\n\n3. Speichere die \u00c4nderungen an der `xwiki.properties`-Datei.\n\n4. Um sicherzustellen, dass alle Anh\u00e4nge im Wiki auf maximal 10 MB beschr\u00e4nkt werden, musst du auch die maximale Paketgr\u00f6\u00dfe im MySQL-Datenbanken konfigurieren. Dazu muss man den folgenden Befehl ausf\u00fchren:\n```\nmysql -u root -p <password> -e \"SET GLOBAL max_allowed_packet = 31457280;\" // 30 MB in Bytes\n```\nDieser Befehl setzt die maximale Paketgr\u00f6\u00dfe auf 30 MB, was gr\u00f6\u00dfer als das von dir definierte Maximaldateigr\u00f6\u00dfe ist. Dies sollte sicherstellen, dass du Anh\u00e4nge mit maximal 10 MB hochladen kannst.\n\n5. \u00dcberpr\u00fcfe deine Konfiguration, indem du den folgenden Befehl ausf\u00fchrst:\n```\nmysql -u root -p <password> -e \"SHOW VARIABLES LIKE 'max_allowed_packet';\"\n```\nDieser Befehl zeigt dir die aktuelle maximale Paketgr\u00f6\u00dfe an.\n\nHinweis: Wenn du Anh\u00e4nge gr\u00f6\u00dfer als 30 MB hochladen m\u00f6chtest, musst du die maximale Paketgr\u00f6\u00dfe in deinem MySQL-Datenbanken auf eine gr\u00f6\u00dfere Gr\u00f6\u00dfe setzen.",
  "sources": [
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "\n**Contents*** [Size Limit](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HSizeLimit)\n* [Mimetype Restriction](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HMimetypeRestriction)\n* [Versions](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HVersions)\n* [Deletion](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HDeletion)\n* [Attachment Storage](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HAttachmentStorage)\n\t+ [Filesystem Attachment Store](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HFilesystemAttachmentStore)\n\t\t- [Filesystem attachment store location](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HFilesystemattachmentstorelocation)\n\t\t- [Other considerations](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HOtherconsiderations)\n\t\t\t* [Directory cleanup](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HDirectorycleanup)\n\t+ [Database Attachment Store](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HDatabaseAttachmentStore)\n\t\t- [Switch to database attachment store](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HSwitchtodatabaseattachmentstore)\n* [Attachment display or download](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HAttachmentdisplayordownload)\n* [Upload summary](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HUploadsummary)\n* [Security](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HSecurity)\n",
      "similarity_score": 0.6561552286148071,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "Attachments can be uploaded either through the regular [upload action](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments), [WebDAV](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/WebDAV), [XML-RPC](https://extensions.xwiki.org/xwiki/bin/view/Extension/XML-RPC%20Integration) or [Rest](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI).  \nAs an administrator you can set limits on the maximum size of an attachment and where the attachments will be stored.\n\n# Size Limit\n\nThe maximum size of an attachment is limited by a configuration parameter in the *XWikiPreferences* document. It is set to 100GB by default (32MB for XWiki &lt; 10.9RC1).  \nTo change it follow these steps:\n\n1. Go to *http://&lt;yourwiki&gt;/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object*\n2. Click on the line that says XWikiPreferences 0 (right below the line that says Objects of type XWiki.XWikiPreferences (1))\n3. Scroll down to the field that says Maximum Upload Size and change the number to whatever size you want (it is expressed in bytes)\n4. Scroll to the bottom and click &quot;Save&quot;\n5. Repeat for each (sub)wiki for which you need to increase the size, since currrently this configuration has to be set per wiki\n\nNote that if you&#x27;ve already tried to attach a file and it failed, in order for the new size setting to be taken into account you might need to clear your browser&#x27;s cache.\n\n# Mimetype Restriction\n\nSee [Attachent Validation Application](https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/).\n\n",
      "similarity_score": 0.6545125842094421,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.DocumentLifecycle.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/",
      "content": "\t+ [Limitations](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HLimitations-1)\n* [Show](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HShow)\n\t+ [Code](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HCode)\n\t+ [Comments](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HComments)\n\t+ [Attachments](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HAttachments)\n\t+ [History](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HHistory)\n\t+ [Information](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HInformation)\n\t+ [Children](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HChildren)\n* [Print](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HPrint)\n* [Export](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DocumentLifecycle/#HExport)\nXWiki offers to perform several actions on a document (a.k.a a page).\n\n# Create\n\nThere are three ways to create new pages.\n\n",
      "similarity_score": 0.6349977254867554,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.AdminGuide.Attachments",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
      "content": "#### Directory cleanup\n\nSince [XWiki 6.0M2](https://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki61M2), it is possible to save time on startup by preventing XWiki from cleaning up empty directories in the Filesystem Attachment Store. To do this, edit xwiki.properties and set **store.fsattach.cleanOnStartup** to false. If you do this, you will be responsible for cleanup of empty directories yourself.\n\n## Database Attachment Store\n\nThe default before 10.5.\n\nThis attachment storage mechanism stores your attachments in database entries in the [xwikiattachment\\_content](https://www.xwiki.org/xwiki/bin/view/Documentation/DevGuide/DsXWikiAttachmentContent), [xwikiattachment\\_archive](https://www.xwiki.org/xwiki/bin/view/Documentation/DevGuide/XWikiAttachmentArchive) and [xwikiattrecyclebin](https://www.xwiki.org/xwiki/bin/view/Documentation/DevGuide/DsXwikiRecycleBin) tables. This system allows for easy backup of your attachments by dumping the database and keeping all of your data together, but attachment size is memory constrained since the attachment content and archive must all be held in memory. As a general rule, attachments larger than 30MB are not possible.\n\n### Switch to database attachment store\n\nThese settings should read as follows:\n\nxwiki.store.attachment.hint = hibernate  \nxwiki.store.attachment.versioning.hint = hibernate  \nxwiki.store.attachment.recyclebin.content.hint=hibernate  \n  \n# If you need to use database store for the attachment it&#x27;s probably true for deleted attachments  \nxwiki.store.recyclebin.content.hint = hibernateAlso make sure they are not commented out.\n\nWhen using this attachment store with a MySQL database, you must set the max\\_allowed\\_packet to about 3 times the size of your largest attachment since the attachment and its version history must be saved. See the [MySQL Installation guide](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/InstallationMySQL) for more information.\n\n",
      "similarity_score": 0.6325904130935669,
      "vector": null
    },
    {
      "collection_id": "Eval",
      "document_id": "xwiki:Documentation.UserGuide.Features.XWikiSyntax.WebHome",
      "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiSyntax/",
      "content": "| [notificationsSystemFiltersPreferences](https://www.xwiki.org/xwiki/bin/view/XWiki/Notifications/Code/NotificationsSystemFiltersPreferencesMacro) | Notifications System Filters Preferences | Notifications | Display the preferences of the given user about system notification filters. | Current Wiki |\n| office | Office Document Viewer | Content | View office attachments (doc, ppt, xls, odt, odp, ods etc.) inside wiki pages without downloading or importing them. | Global |\n| pdftoc | PDF Table of Contents | Internal | Generates the table of contents for the PDF export. | Global |\n| [pdfviewer](https://www.xwiki.org/xwiki/bin/view/XWiki/PDFViewerMacro) | PDF Viewer | Content | PDF Viewer based on Mozilla pdf.js | Current Wiki |\n| plantuml | PlantUML | Content | Convert various text input formats into diagram images using PlantUML. | Global |\n| [pollsrecent](https://www.xwiki.org/xwiki/bin/view/XPoll/RecentPollsMacro) | Recent Polls |  | Displays the N most recent polls. | Current Wiki |\n| [poweredBy](https://www.xwiki.org/xwiki/bin/view/XWikiOrgCode/PoweredBy) | Powered By |  | Displays a random reference summary | Global |\n| [productVersions](https://www.xwiki.org/xwiki/bin/view/Macros/ProductVersionMacro/) | Product Versions | content | Display product versions for testing | Global |\n| putFootnotes | Put Footnotes | Content | Displays all the footnotes from the page. If missing, all footnotes are displayed by default at the end of the page. | Global |\n| python | Python | Development | Executes a python script. | Global |\n| [releasenotechanges](https://www.xwiki.org/xwiki/bin/view/ReleaseNotes/Code/Change/ReleaseNotesChangesMacro) | Release Note Changes | content |  | Current Wiki |\n| [remotecode](https://www.xwiki.org/xwiki/bin/view/XWiki/RemoteCodeMacro) | Remote Code |  | Displays the code (using the code macro) of a remote file | Global |\n| [scm](https://www.xwiki.org/xwiki/bin/view/Macros/SCM) | scm | Documentation | Produce scm link | Global |\n",
      "similarity_score": 0.627890944480896,
      "vector": null
    }
  ],
  "usage": {
    "prompt_tokens": 1012,
    "completion_tokens": 485,
    "total_tokens": 1497
  },
  "average_power_draw": 213.82438827098073,
  "energy_consumption": 1010.9390568496964,
  "energy_per_input_token": 0.45445675740602215,
  "energy_per_output_token": 1.1361418935150553,
  "energy_per_total_token": 0.675309991215562
}