{"id": "dev:IRC.xwikiArchive20101109", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20101109", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nlucaa1 joined #xwiki at 00:06  \nlucaa left at 00:06 (Read error: No route to host  \njvelociter left at 00:16 (Quit: jvelociter  \nflorinciu left at 00:26 (Read error: Connection reset by peer  \nlucaa1 left at 00:40 (Ping timeout: 255 seconds  \njvdrean left at 00:54 (Quit: Leaving.  \nsburjan` left at 01:32 (Read error: Connection reset by peer  \nsdumitriu left at 02:12 (Ping timeout: 250 seconds  \nabusenius left at 04:12 (Ping timeout: 264 seconds  \nvenkatesh joined #xwiki at 05:29  \nvenkatesh left at 05:30 (Remote host closed the connection  \nvenkatesh joined #xwiki at 05:30  \nDenis left at 06:02 (Read error: Connection reset by peer  \nDenis joined #xwiki at 06:10  \nmflorea joined #xwiki at 06:58  \nvmassol joined #xwiki at 07:50  \nspliffy\\_ joined #xwiki at 07:54  \nspliffy left at 07:58 (Ping timeout: 260 seconds  \nsburjan` joined #xwiki at 08:02  \nvenkatesh left at 08:35 (Ping timeout: 250 seconds  \nevalica joined #xwiki at 08:35  \nvenkatesh joined #xwiki at 08:47  \nStulle joined #xwiki at 08:52  \nvmassol - (08:59): good morning  \nsburjan joined #xwiki at 09:00  \nsburjan left at 09:05 (Ping timeout: 240 seconds  \nEnygma` joined #xwiki at 09:05  \nsburjan joined #xwiki at 09:09  \nsabageru joined #xwiki at 09:12  \ntmortagne joined #xwiki at 09:16  \nrstavro joined #xwiki at 09:16  \nsburjan - (09:49): hello guys. I found an odd issue. I am attaching an image that contains \\_ in the filename, but when it gets uploaded, the \\_ is removed  \nsburjan - (09:50): so for example XE\\_demo.png becomes XEdemo.png  \ntmortagne - (09:52): sburjan: it's not a bug  \ntmortagne - (09:52): (but it's bad from my POV)  \ntmortagne - (09:52): the attachment naame is cleaned for some encoding issues we had  \ntmortagne - (09:53): also pretty sure there is a jira issue about that  \ntmortagne - (09:54): see  \ntmortagne - (09:54): XE-324  \narkub joined #xwiki at 09:54  \nvenkatesh left at 10:03 (Ping timeout: 252 seconds  \nsburjan - (10:07): well yes, but since \\_ is an asian char ?  \nsburjan - (10:08): anyway, it's good we are aware of this  \ntmortagne - (10:14): sburjan: is not about XE-324 only  \ntmortagne - (10:15): it's abou the attachments name cleaning and among other this asian char  \ntmortagne - (10:15): s/this/things/  \nvenkatesh joined #xwiki at 10:18  \nspliffy joined #xwiki at 10:19  \nlucaa joined #xwiki at 10:19  \nsdumitriu joined #xwiki at 10:22  \njvelociter joined #xwiki at 10:30  \nsdumitriu - (10:31): jvelociter: Ping  \njvdrean joined #xwiki at 10:34  \njvdrean left at 10:39 (Ping timeout: 255 seconds  \njvelociter - (10:40): sdumitriu: pong  \nsdumitriu - (10:40): Hi  \nsdumitriu - (10:40): You introduced some more regressions in the suggest  \nsdumitriu - (10:40): id-value pairs don't work anymore  \njvelociter - (10:40): arf. tell me  \njvelociter - (10:40): OK  \nvmassol - (10:40): ahem\u2026..  \nvmassol - (10:41): a safe change? :)  \njvelociter - (10:41): will check that  \nsdumitriu - (10:41): vmassol: :D  \nsdumitriu - (10:42): jvelociter: Another error, click on \"No documents found\", JS error down(.value) is null  \nvmassol - (10:42): jvelociter: do we have tests for the suggest feature?  \njvelociter - (10:43): I don't know  \njvelociter - (10:43): it seems nones got broken  \nsburjan - (10:43): :)  \njvelociter - (10:43): so I would tend to say no  \njvelociter - (10:43): :)  \nvmassol - (10:43): you're making changes and you don't know if we have tests for them\u2026.. not good :)  \nvmassol - (10:44): at least you should know to undestand if you're working without a net or with one  \nvmassol - (10:45): hmmm guys just build trunk and I get a distribution that is missing files\u2026 no shell scripts for ex  \njvdrean joined #xwiki at 10:45  \nvmassol - (10:45): I'll check the build but wanted to know if you've noticed it too  \nmflorea - (10:47): vmassol: is there a way to mark in jira that a component depends on other component. For instance, mark that an XWiki application depends on a specific plugin. I'm asking because evalica suggested to update the description of http://jira.xwiki.org/jira/browse/XPAS to say that it is used by activity macro and watchlist.  \nvmassol - (10:47): mflorea: no and I'm not sure why we would add this info in jira  \nvmassol - (10:48): (the dep graph)  \nvmassol - (10:48): the location for the dep graph is the pom.xml files  \nvmassol - (10:48): and no you cannot suppose it's used only by activity macro and watchlist  \nvmassol - (10:48): it can be used by a lot of people for their projects + in other projects in sandbox, etc  \nmflorea - (10:48): one reason is that when you want to report an issue, you might want to see the dependencies so that you report the issue to the right component.  \nvmassol - (10:48): + it'll never be up to date  \nevalica - (10:49): is not used only by them - but would be nice to have this info for testing purposes ....  \nvmassol - (10:49): we have linking for deps  \nmflorea - (10:49): yes, I now, that's why I was looking for something automated  \nvmassol - (10:49): evalica: we have this info already  \nvmassol - (10:49): jira is just not the place for it  \ntmortagne - (10:49): vmassol: \"missing files\" with maven 3 ? i think i remember something about it but was not me  \nevalica - (10:49): where we have this info?  \nvmassol - (10:49): in the dependency graph of maven (ie in pom.xml)  \nvmassol - (10:49): we can expose the graph if we want  \nvmassol - (10:50): actually it's geerated by the site plugin already  \nvmassol - (10:50): let me check  \nvmassol - (10:50): http://maven.xwiki.org/site/xwiki-core-parent/  \nvmassol - (10:50): but this is only done for core right now  \nvmassol - (10:51): for ex: http://maven.xwiki.org/site/xwiki-core-parent/xwiki-core-bridge/dependencies.html  \nvmassol - (10:51): in any case I'm ?1 to maually do this  \nvmassol - (10:51): manually  \nvmassol - (10:51): it'll never work and will always be not up to date  \nevalica - (10:52): for applications I don't think we can automate to see the dependencies - so at least this kind of info should be put in the testing plans or something  \nvmassol - (10:52): of course we can  \nvmassol - (10:52): and it's needed absolutely  \nvmassol - (10:52): since otherwise our extension manager will not work  \nsilviar joined #xwiki at 10:52  \nmflorea - (10:52): vmassol: how do you get the list of maven modules depending on a given module? (in our ecosystem of course)  \nvmassol - (10:52): mflore: mvn dependency:tree for ex  \nvmassol - (10:53): you mean the other way around?  \nmflorea - (10:53): hmm, I don't think it helps  \nmflorea - (10:53): yep  \nmflorea - (10:53): I have a plugin and I want to know which apps use it  \nvmassol - (10:53): I don't think it's possible since it would mean you know all modules that can possibly exist  \nvmassol - (10:53): let me check though  \nmflorea - (10:53): no, I out repo  \nmflorea - (10:53): s/out/our  \ntmortagne - (10:54): it's possible but it means scanning the whole repo  \nvmassol - (10:54): hmmm nexus should help  \ntmortagne - (10:54): maybe nexus index give that information  \nvmassol - (10:54): let me check it  \ntmortagne - (10:56): if it does not give it directly at least it would be faster to find it from nexus index than scanning the whole repo  \nmarta\\_ joined #xwiki at 10:58  \nevalica - (10:58): sburjan do you have a dependencies category in the testing plan? something like if we have a change in the XPAS, watchlist and activity macro needs to be tested  \nsburjan - (10:59): no, I don't have that  \nsburjan - (10:59): I don't know what depends on what  \nsburjan - (10:59): not totally.. I know about the mail sender plugin  \nsburjan - (10:59): the rest.. nope  \nvmassol - (11:00): tmortagne: maybe this is this issue: https://issues.sonatype.org/browse/NEXUS-3472  \nsburjan - (11:00): we could build a basic dependency tree..  \nevalica - (11:00): at least we should put that manually - because this is gonna be seen int he future when we add events for tags ... or even when Vincent will make the moving of events  \nsburjan - (11:00): to illustrate which app is using which plugin  \nvmassol - (11:00): events have been moved\u2026. a few seconds ago ;)  \nsburjan - (11:01): :)  \nvmassol - (11:01): if an app uses a plugin there should be a dep on it  \nvmassol - (11:01): so it's easy to check in svn  \nvmassol - (11:01): and with any IDE (since they all generate dep graphs)  \nsburjan - (11:01): I hope I'll know how to do that one day  \nvmassol - (11:02): archiva does it apparently but not in a very visual way: http://repo.npanday.org/archiva/browse/npanday.plugin/maven-compile-plugin/1.1/dependencyTree  \nsburjan - (11:02): looking at a pom.xml is not very intuitive for me  \nvmassol - (11:02): (anyway we shouldn't move to archiva...;)  \nvmassol - (11:02): sburjan: then look at the links O gave you  \nvmassol - (11:02): s/O/I/  \nvmassol - (11:03): ok we'll need to generate them for plugins and apps too  \nvmassol - (11:03): but that's easy to do  \nsburjan - (11:03): vmassol: the link with archiva ?  \nvmassol - (11:03): nope  \nvmassol - (11:03): the site links  \nvmassol - (11:04): ah you can also look at nemo  \ntmortagne - (11:04): you can also look at hudson  \ntmortagne - (11:04): it generate dependencies graph both ways  \nvmassol - (11:04): hmm they haven't enabled the dependecy plugin in the open source sonar instance: http://nemo.sonarsource.org/project/index/178313  \nvmassol - (11:05): but I have it runnning locally  \nvmassol - (11:06): and no they have it  \nvmassol - (11:06): it's called library  \nvmassol - (11:06): for example:  \ntmortagne - (11:06): sburjan: see http://hudson.xwiki.org/job/xwiki-plugin-scheduler/ for example  \nvmassol - (11:06): http://nemo.sonarsource.org/plugins/resource/179526?page=org.sonar.plugins.design.ui.libraries.LibrariesPage  \ntmortagne - (11:06): you can see what depends on scheduler plugin  \nvmassol - (11:06): this gives you all the deps of the watchlist plugin  \nvmassol - (11:07): oh they even have a \"usage\" button :)  \nvmassol - (11:07): http://nemo.sonarsource.org/dependencies/index?search=com.xpn.xwiki.platform.plugins:xwiki-plugin-watchlist  \nvmassol - (11:07): not sure if it works....  \nsburjan - (11:07): tmortagne: yes, upstream and downstream.  \ntmortagne - (11:07): yes  \ntmortagne - (11:07): so we do have the information ;)  \nsburjan - (11:08): I know we do :)  \nevalica - (11:09): just for the record - you guys are talking just about java - the wiki macros don't know that dependency  \ntmortagne - (11:09): evalica: we are not talking about java, we are talking about maven  \nvmassol - (11:09): for ex: who's using the scheuduler plugin: http://nemo.sonarsource.org/dependencies?resource=com.xpn.xwiki.platform.plugins:xwiki-plugin-scheduler&search=scheduler  \ntmortagne - (11:09): and you have dependencies in xar maven projects too  \ntmortagne - (11:10): look at the link i gave on hudson  \nvmassol - (11:10): it's even by version  \ntmortagne - (11:10): you can see that scheduler application (so a xar) depends on scheduler plugin  \nvmassol - (11:10): yeah the pb with nemo is that it only deals with jar modules I think, would need to check if it's only a config  \nvmassol - (11:11): (maybe they have just not loaded the apps)  \nvmassol - (11:11): (probably)  \nvmassol - (11:12): I'm interested in setting up a dedicated sonar instance for us to use\u2026. was trying it locally first but got other stuff that took precedence....  \njvdrean left at 11:13 (Quit: Leaving.  \njvdrean joined #xwiki at 11:21  \nfmancinelli joined #xwiki at 11:29  \nmarta\\_ left at 11:47 (Ping timeout: 265 seconds  \nvmassol - (11:48): I hate this merginfo thing when committing from the command line  \nvmassol - (11:48): (I need to take the time to read about it to understand it\u00e0  \nvmassol - (11:48): )  \nvenkatesh left at 11:50 (Ping timeout: 240 seconds  \nvenkatesh joined #xwiki at 11:50  \nsdumitriu - (12:02): vmassol: Use git  \nvmassol - (12:02): sdumitriu: yeah I know you'd say this but I'm pretty sure I'll find more oddities with git  \nsdumitriu - (12:02): :)  \nsdumitriu - (12:03): Git implements natively what IDEs are trying to simulate on top of SVN  \nvmassol - (12:03): (svn has been stable for way longer and with nicer tool integration)  \nvmassol - (12:03): but yes I want to try it out  \nsdumitriu - (12:03): Gotta go (lunch)  \nvmassol - (12:03): me too  \nflorinciu joined #xwiki at 12:18  \nStulle - (12:18): git is pretty dang awesome.... just saying ;)  \nlucaa left at 12:21 (Ping timeout: 255 seconds  \nfmancinelli left at 12:34 (Ping timeout: 245 seconds  \nabusenius joined #xwiki at 12:34  \nabusenius\\_ joined #xwiki at 12:37  \nabusenius left at 12:37 (Read error: Connection reset by peer  \nabusenius\\_ is now known as abusenius ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nvmassol - (13:05): I broke XE  \nvmassol - (13:05): which is pretty strange since I rebuilt the whole platform  \nvmassol - (13:06): but I know why it worked  \nvmassol - (13:06): it's because AS plugin depends on core 2.6-SNAPSHOT  \nvmassol - (13:06): and I had committed in trunk first  \nvmassol - (13:06): so 2.6-SNAP was working before I did the merge  \nvmassol - (13:06): anyway fixing now....  \nStulle - (13:07): XE-745  \nStulle - (13:08): weird bug... O\\_O  \ntmortagne - (13:11): Stulle: what would really help would be a way to reproduce it for sure like an example content  \nStulle - (13:12): okay, could you give me a mail address and i'll email you the xar  \ntmortagne - (13:12): put it on the issue, it's here \u00a0for that  \ntmortagne - (13:12): you can attach any file you want  \nStulle - (13:13): well, i don't want to attach the file in public... that is my major concern here  \ntmortagne - (13:13): (and it's more a suggestion i don't have time myself to work on it)  \ntmortagne - (13:13): can't you find a safe content that fail ?  \nStulle - (13:14): will see  \ntmortagne - (13:14): like removing any security concern from you content or change it by something else  \nlucaa joined #xwiki at 13:15  \nStulle - (13:16): i think it won't be neccessary... was able to narrow it down  \nvmassol - (13:16): should be fixed now  \nStulle - (13:16): it always fails when the address includes \"Umlaute\" so \u00c4, \u00d6, \u00dc, \u00e4, \u00f6, \u00fc  \nStulle - (13:16): that makes the export screw up  \nStulle - (13:16): will update the ticket  \nvmassol - (13:17): (should be fixed now = build)  \nvmassol - (13:19): sdumitriu: I'd like to upgrade the assembly plugin to version 2.2. I have it done locally. However you commented in the past that the generated zip wasn't correct under midnight commander. How can I test this locally?  \nStulle - (13:20): updated XE-745  \ntmortagne - (13:22): Stulle: ok thanks  \nStulle - (13:23): if you fix it i got to thank you! ;)  \nvmassol - (13:27): guys the new assembly plugin requires that the <id> element of the assembly descriptor be specified  \nvmassol - (13:27): this id is used as the classifier for the generated artifact  \nvmassol - (13:27): for ex: xwiki-enterprise-database-hsqldb-2.7-SNAPSHOT-distribution.zip  \nvmassol - (13:27): here <id>distribution</id>  \nvmassol - (13:27): FTM I haven't found a way to not use it  \nflorinciu left at 13:28 (Read error: Connection reset by peer  \nvmassol - (13:29): hmm will try <finalName>  \nvmassol - (13:30): (but I doubt it'll work)  \nvmassol - (13:34): since it's the default behavior we should go with it  \nvmassol - (13:34): so we'll need to find a good qualifier  \nvmassol - (13:35): tmortagne: any idea?  \nvmassol - (13:35): (checking the sources in a last effort to see if we can ignore the id)  \ntmortagne - (13:37): vmassol: not sure i understand what is the isssue  \ntmortagne - (13:37): why not simply put an id ?  \nvmassol - (13:38): yes that's my question  \nvmassol - (13:38): \"since it's the default behavior we should go with it\"  \nvmassol - (13:38): \"so we'll need to find a good qualifier\"  \ntmortagne - (13:38): so your question is \"any idea\" of a good id ?  \nvmassol - (13:39): yes  \nvmassol - (13:39): bin, distribution, etc  \nvmassol - (13:39): but if we could avoid it it would be better though hence why I'm checking the mavne sources  \ntmortagne - (13:39): ok i understand now, i did not seen that using an id was generating a qualifier  \ntmortagne - (13:40): indeed it's not very nice in our case since this qualifier is useless  \nvmassol - (13:40): yes  \nvmassol - (13:40): I think I've found a workaroudn for now  \nvmassol - (13:41): through a depredcated config property  \ntmortagne - (13:41): sounds dangerous  \nvmassol - (13:41): ahah even better  \nvmassol - (13:41): \u00a0\u00a0\u00a0\u00a0/\\*\\*  \nvmassol - (13:41): \u00a0\u00a0\u00a0\u00a0\u00a0\\* Set to false to exclude the assembly id from the assembly final name.  \nvmassol - (13:41): \u00a0\u00a0\u00a0\u00a0\u00a0\\*  \nvmassol - (13:41): \u00a0\u00a0\u00a0\u00a0\u00a0\\* @parameter expression=\"${assembly.appendAssemblyId}\" default-value=\"true\"  \nvmassol - (13:41): \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nvmassol - (13:41): \u00a0\u00a0\u00a0\u00a0protected boolean appendAssemblyId;  \nvmassol - (13:41): :)  \ntmortagne - (13:41): :)  \nvmassol - (13:42): it's even documented  \nvmassol - (13:42): but going to the source is so much more fun  \nvmassol - (13:42): ;)  \ntmortagne - (13:42): :)  \njvelociter - (13:43): rstavro: evalica sdumitriu I think there is a bug either in the AS or in the activity macro : when I import a XAR that contains a document with attachments, the attachments appear in all the entries created during the import  \njvelociter - (13:44): see http://img209.imageshack.us/img209/7802/attachmentsdoubled.png  \nvmassol - (13:50): btw the distribution issue was a non issue - it was something I had changed in my local pom.xml  \nvmassol - (13:50): and it's working fine with maven3  \nlucaa left at 14:05 (Ping timeout: 240 seconds  \nrstavro - (14:12): jvelociter: this only happend on import? let me test ... could be an activitystream plugin issue  \nlucaa joined #xwiki at 14:13  \nrstavro - (14:15): I have a question too ... is it normal that I have a page opened in a browser tab in view mode, and the same page in another tab in wiki mode. I add a tag in view mode and then I edit the content in the other tab, then press 'Save and Continue'. When I refresh the page in view mode, the tag is gone.  \nrstavro - (14:15): ?  \nrstavro - (14:15): I mean is this behaviour normal?  \ntmortagne - (14:16): since you overwrite the document in your second window with a document which does not have the tag yes it's normal  \nrstavro - (14:17): ok, thx :)  \ntmortagne - (14:17): note that that's mainly because you have a \"tags\" field in wiki edit mode  \ntmortagne - (14:18): if there was no such field you would not have the overwrite  \ntmortagne - (14:18): because when you save the document it load it from the database and set all the values you have in your form  \nrstavro - (14:18): the thing is that this doesn't happend with comments for example  \ntmortagne - (14:18): yes  \nrstavro - (14:18): and the user will expect the same behaviour  \ntmortagne - (14:18): because you can't set comments in wiki edit view  \ntmortagne - (14:18): not exatly  \ntmortagne - (14:19): look at wiki edit mode  \ntmortagne - (14:19): on the right  \ntmortagne - (14:19): you can set the tags  \ntmortagne - (14:19): so when you save we have to set it  \ntmortagne - (14:20): it's exactly the same thing than with content  \nrstavro - (14:20): ok, then I would expect for the tags in edit mode to be placed at the bottom of the content, otherwise I don't see that small field in the right panel  \ntmortagne - (14:21): tags should probably not be in edit mode at all  \ntmortagne - (14:21): since way to edit it is very bad  \ntmortagne - (14:21): you have to know what separator character to use  \ntmortagne - (14:21): in view mode you have a way easier to use tag editor  \nrstavro - (14:22): exactly  \nrstavro - (14:22): I think we should vote for removing tags from edit mode  \nvmassol - (14:22): yes  \nvmassol - (14:22): +1 from me too  \ntmortagne - (14:24): sdumitriu: \u00a0BTW \"(07:29:18 PM) sdumitriu: tmortagne: Was there a bug in XWiki 2.0 syntax about empty table cells?\" in which version ? in recent versions it should work well but yes pretty sure some time ago we use to have some issues like that  \nvenkatesh left at 14:24 (Remote host closed the connection  \nabusenius left at 14:25 (Ping timeout: 272 seconds  \nsabageru - (14:34): vmassol : ping  \nvmassol - (14:37): sabageru: what's your question (btw you can state it directly - that allows me to see it while continuing to work on something else ;))  \nvmassol - (14:37): ?  \nsabageru - (14:37): i see you changed packages for Events and i was doing some refactoring on ActivityStreamImpl in order to remove the big if..else . I was planning on removing all thar crappy part and add usage of classname as a way of identification of the event that happened. Are you ok with this ? And are you done with events modifications ? so that i can start working over there ? And I thought of grouping events by package and remove the abstract class t  \nvmassol - (14:38): sabageru: are you doing a design where when a new event is added there's no need to make a single line modification to the activitystream plugin?  \nsabageru - (14:38): yes :)  \nsabageru - (14:39): the plugin will be unchanged if we add a new event  \nvmassol - (14:39): so some sort of registration method in the activtiystream?  \nvmassol - (14:39): (based on components)  \nsabageru - (14:40): well not yet...actually when you add a new event, you should add the new event in the listener List  \nsabageru - (14:40): what i am doing is refactor the big if then else from onEvent function  \nsabageru - (14:40): to be generic  \nvmassol - (14:40): sabageru: what listener list?  \nsabageru - (14:41): there is a List<event> in ActivityStreamImpl called LISTENER\\_EVENTS  \nvmassol - (14:41): so \"are you doing a design where when a new event is added there's no need to make a single line modification to the activitystream plugin?\"  \nvmassol - (14:41): the answer is no  \nvmassol - (14:41): (and not yet)  \nvmassol - (14:41): correct?  \nsabageru - (14:41): correct  \nvmassol - (14:41): s/yet/yes/  \nvmassol - (14:41): ok then I think we need a differnt esign  \nvmassol - (14:41): I don't see the advataneg of making a small change  \nvmassol - (14:42): it's wasting time  \nvmassol - (14:42): and doesn't solve the real issue  \nvmassol - (14:42): (which is to have to modify the as plugin code when a new event is added)  \nvmassol - (14:42): do you think you could come up with a design that supports this?  \nvmassol - (14:42): it's pretty easy actually I think  \nsabageru - (14:43): well i could use some ideas on this one, because i don;t think i know how to do this :)  \nvmassol - (14:43): hold on otp  \nsabageru - (14:43): ok  \nrstavro - (14:49): is there a way to check something like $doc.hasVersion($version) ? I would need this in order to be able to display comments content or annotations without getting an exception in the case where the user removed a version from history  \nrstavro - (14:49): $pageDoc.getDocumentRevision($event.version) generates an execption if the version does not exist  \nrstavro - (14:50): and I want to avoid it  \nvmassol - (14:52): tmortagne: I'm getting a test failure relatively often on the lucene plugin  \nvmassol - (14:52): Running com.xpn.xwiki.plugin.lucene.IndexUpdaterTest  \nvmassol - (14:52): 2010-11-09 14:38:18,484 [Finalizer] ERROR lucene.LucenePlugin \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- Lucene plugin will exit !  \nvmassol - (14:52): Tests run: 3, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 18.172 sec <<< FAILURE!  \nvmassol - (14:52): Running com.xpn.xwiki.plugin.lucene.AttachmentDataTest  \nvmassol - (14:52): 2010-11-09 14:38:29,630 [Finalizer] ERROR lucene.LucenePlugin \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- Lucene plugin will exit !  \nvmassol - (14:52): Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.65 sec  \nvmassol - (14:52): Results :  \nvmassol - (14:52): Failed tests:  \nvmassol - (14:52): \u00a0\u00a0testIndexUpdater(com.xpn.xwiki.plugin.lucene.IndexUpdaterTest)  \nvmassol - (14:52): it's a bit of a pain  \nvmassol - (14:52): (since I waste 20+ mn every time)  \nsburjan left at 14:53 (Quit: Ex-Chat  \ntmortagne - (14:54): that's weird I never had this issue on hudson or locally  \nvmassol - (14:55): out of 10 builds I must be having it 1 or 2 times  \ntmortagne - (14:55): 18.172 sec seems a lot  \nspliffy - (14:55): what's up with l10n.xwiki.org? is it down until the release i out?  \nvmassol - (14:56): spliffy: works for me  \nspliffy - (14:56): yes the service is ok, but wait .. i give you a link to try  \nsdumitriu - (14:56): sabageru: You can make it generic, listen only to AlwaysMatchingEventFilter  \ntmortagne - (14:57): it's just a bit less (14.569 sec) on hudson actually  \nspliffy - (14:57): i can't login. i get a message from skol the administrator lego guy =)  \nspliffy - (14:58): telling me the site is down for maintenance and it will be more stable and faster when it's back online  \nvmassol - (14:59): sdumitriu: I'm not sure if the AS will scale in the future (when we send view events for example) but I agree for now that it should listen to all events. I was thinking of a registration mechanism where it's the event creator that register his event(s) to the AS event handler  \nspliffy - (15:00): now it's ok. seems like it timed out  \nspliffy - (15:00): i times out quite often  \nsdumitriu - (15:00): vmassol: Actually it's not possible yet  \nsdumitriu - (15:00): From DefaultObservationManager:  \nsdumitriu - (15:00): \u00a0\u00a0\u00a0\u00a0\u00a0\\* @todo Should we allow event inheritance?  \nsdumitriu - (15:00): So the manager checks listeners by concrete classname  \nvmassol - (15:00): you mean we can't listen to all events? I don't understand  \nvmassol - (15:01): there's an AllEvent class  \nsdumitriu - (15:01): Right  \njvdrean - (15:01): devils is in the details, I'm still not used to the \"BUILD SUCCESS\" instead of \"BUILD SUCCESSFUL\" with maven3 \u2026 every time if feels like it's written \"BUILD ERROR\" because of the length of the word :)  \nsdumitriu - (15:01): Ah, wait  \nsdumitriu - (15:01): There's a special case  \nsdumitriu - (15:02): this.listenersByEvent.get(AllEvent.class);  \nsdumitriu - (15:02): So listening to AllEvent should be enough  \nesdaniel joined #xwiki at 15:02  \nesdaniel left #xwiki at 15:02  \nvmassol - (15:02): (all non remote events to be precise)  \nvmassol - (15:04): sdumitriu: anything I can do on my mac to test the generated zip? (re http://jira.codehaus.org/browse/MASSEMBLY-238?focusedCommentId=179594&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action\\_179594 )  \nsdumitriu - (15:05): Let me remember what it was about  \nsdumitriu - (15:05): Ah, right  \nsdumitriu - (15:05): I've been getting that error reently for xwiki-core.jar  \nsdumitriu - (15:06): But it's not a problem anymore, I think MC just treats it as a warning and goes around it  \nsdumitriu - (15:06): It's not a serious error  \nvmassol - (15:06): ok I'm doing a final build to verify that all work and I'll commit  \nsdumitriu - (15:06): vmassol: You can install mc on a mac, too  \nvmassol - (15:07): yeah with some port, but I'm not looking forward to  \nlucaa - (15:11): guys, I'm gonna commit XE-727  \nlucaa - (15:11): should i commit in trunk, 2.6 and 2.5 ?  \ntmortagne - (15:13): +1 for 2.6, i would say +1 for 2.5 too but it's maybe not that critical since 2.6 is support to be out shortly  \ntmortagne - (15:14): s/support/supposed/  \nsdumitriu - (15:23): Not that critical on 2.5  \nlucaa - (15:23): ok, (yey, one less branch)  \nlucaa - (15:25): now, how about the fact that the issue is on XE and there will be nothing committed in the XE, only on platform  \nlucaa - (15:25): should I still leave it there and create an issue to relate to, or move it and rename it?  \nsdumitriu - (15:27): Move  \nlucaa - (15:27): ok, but the description won't be user friendly at all  \ntmortagne - (15:28): yes move  \nlucaa - (15:28): anyway, it doesn't matter  \nsdumitriu - (15:32): jvelociter: Thanks for fixing the id-value regression  \nsdumitriu - (15:35): Stulle: see XE-745  \nStulle - (15:36): oh, i figured it would have been in 2.5.1 if there was a fix  \nStulle - (15:36): anyway, thanks for the notice  \nStulle - (15:36): and sorry for the inconvenience  \nsdumitriu - (15:39): No problem, thanks for reporting  \nsdumitriu - (15:40): It would have been useful if it wasn't accidentally noticed a few days ago  \nabusenius joined #xwiki at 16:00  \nlucaa - (16:11): I didn't commit yet for the 2.5, vmassol do you necessarily want it in 2.5 ?  \nlucaa - (16:11): ( XWIKI-5668 that is)  \nvmassol - (16:12): why not put it there? Is it dangerous?  \nlucaa - (16:12): no, it just breaks the WikiMacroInitializer API  \nlucaa - (16:12): but I guess that's no problem  \nvmassol - (16:13): which is ok  \nlucaa - (16:13): and you might consider it's dangerous, since it's executed quite more times than I'd like to  \nlucaa - (16:13): but ftm i have no way to stop it  \nvmassol - (16:14): well nothing dangerous should go in 2.6 either  \nlucaa - (16:14): that's true  \nvmassol - (16:14): so if it goes in 2.6 final I think we can have it in 2.5 branch  \nvmassol - (16:14): (that's provided you tested it under all situations but I'm sure you did)  \nvmassol - (16:15): and if we find issues in 2.6 we can still fix it in the 2.5 branch before we release 2.5.2  \nvmassol - (16:15): (if we ever release 2.5.2)  \nvmassol - (16:15): so I'd say +1 for 2.5 branch  \nlucaa - (16:15): the only pb is that it executes register macros everytime the import page is displayed, regardless of the fact that something was imported or not  \nlucaa - (16:15): otherwise I don't see why would there be issues, I will ask sburjan` to play a little with it  \nvmassol - (16:15): how is that good for 2.6?  \nlucaa - (16:15): a little more than me  \nlucaa - (16:15): it's not good  \nvmassol - (16:15): cannot you find a way to fix this?  \nlucaa - (16:17): for the moment no  \nlucaa - (16:17): I mean I don't have a solution that I'm keeping for myself  \nlucaa - (16:17): unless we add a new event, and not reuse the action executed event  \nlucaa - (16:17): and this new event will be sent by the import action (not by the generic XWikiAction) when the import is done  \nlucaa - (16:18): but I don't like the idea of adding a new event for something which roughly exists already  \nlucaa - (16:18): guys, wdyt? ( sdumitriu, tmortagne )  \nsdumitriu - (16:19): lucaa: You can refine the trigger  \nsdumitriu - (16:19): ActionExecutionEvent + check the URL  \nsdumitriu - (16:20): But I'm not sure there's an easy way to get back to the request  \nvmassol - (16:20): well I think some kind of \"XARImportedEvent\" could be useful as a post-action hook for executing stuff after a XAR has been imported  \nvmassol - (16:20): (I thought that was your proposal btw, didn't know you were reusing an existing event)  \njvelociter - (16:20): +1  \nlucaa - (16:20): sdumitriu: \u00a0i'm not sure URL helps since it's a post to the same page  \nsdumitriu - (16:20): lucaa: You can if you go through the ExecutionContext, get the XWikiContext from it, then get the request from it  \nlucaa - (16:20): my initial proposal was with a new event  \nsdumitriu - (16:21): But you might depend on xwiki-core  \njvelociter - (16:21): could use it to schedule imported scheduler jobs  \nlucaa - (16:21): but since one exists, I thought...  \nlucaa - (16:21): I depend anyway  \nsdumitriu - (16:21): lucaa: The request has some parameters to trigger the actual import  \nlucaa - (16:21): I \\_am\\_ in xwiki core  \nlucaa - (16:21): they're in post  \nlucaa - (16:21): ah yeah, I could check those  \nlucaa - (16:21): but that's a hack, I prefer a new event :D  \nsdumitriu - (16:21): Then request.getParameter(\"action\")  \nvmassol - (16:22): sdumitriu: what's the status re the mail this page feature?  \nsdumitriu - (16:22): lucaa: +1 for the new event, but it would better wait a bit since there are several refactorings in that area  \nvmassol - (16:22): sdumitriu: I'm done with the refactoring of events  \nsdumitriu - (16:22): vmassol is doing some renamings, sabageru is introducing the SystemEvent  \nlucaa - (16:23): if we want to commit it in 2.6 and I will assume we want, it cannot wait  \nvmassol - (16:23): yes it cannot wait  \nsdumitriu - (16:23): And I think that the import event should extend SystemEvent  \nvmassol - (16:23): the system event is not for 2.6  \nvmassol - (16:23): it's for 2.7 or later  \nsdumitriu - (16:23): Yep  \nsdumitriu - (16:23): So for the moment, Request refining is faster  \nvmassol - (16:24): I agree that you could do both:  \nvmassol - (16:24): 1) do request refining now  \nvmassol - (16:24): 2) propose a new event on the devs list and we discuss its location, \u00a0its name, etc  \nvmassol - (16:24): 3) you implement it in 2.7  \nvmassol - (16:24): I'm also fine to do it right now with a new event  \nvmassol - (16:24): actually yes that's better  \nvmassol - (16:24): create a new event but put it in the internal package  \nvmassol - (16:25): so that it's not public for now  \nvmassol - (16:25): wdyt?  \nvmassol - (16:25): sdumitriu, sabageru: what will happen when the AS receives an event like this one?  \nvmassol - (16:25): (what will it do?)  \nlucaa - (16:26): ok, I didn't test all cases  \nlucaa - (16:26): now it fails after wiki restart  \nsdumitriu - (16:26): vmassol: The idea was to also refactor all events to introduce a new field for storing extra information  \nlucaa - (16:26): :(  \nsdumitriu - (16:26): Like the identifier for comments, the attachment name for attachments, a message for system events  \nvmassol - (16:26): sdumitriu: there's already a field for extra info  \nsdumitriu - (16:27): And AS will automatically construct events with the event classname + this extra information  \nsdumitriu - (16:27): Instead of switch + string constants + custom method names  \nvmassol - (16:27): IMO sabageru should send a proposal  \nvmassol - (16:27): I'm not convinced about the design  \nvmassol - (16:27): actually right now I think it's a bit strange  \nsdumitriu - (16:27): vmassol: Which field?  \nsdumitriu - (16:28): I didn't see any field in the event  \nvmassol - (16:28): (but I may not undestand it all)  \nsabageru - (16:28): vmassol : we thought of adding one field in AbstractFilterableEvent called identifier and make each Event extend this class (that is CommentAddedEvent and so on)  \nvmassol - (16:28): sdumitriu: I was talking about the notify() method, not the Event itself  \nvmassol - (16:29): anwyay sabageru I'd like to see a design  \nsdumitriu - (16:29): Unfortunately that field is taken by the XWikiContext  \nvmassol - (16:29): it's a free field  \nvmassol - (16:29): it doesn't have to be the context  \nsdumitriu - (16:29): It's used  \nvmassol - (16:29): it can be an object containing xcontext + something else  \nvmassol - (16:29): the point is that you cannot know what it contains  \nvmassol - (16:29): which is why you need a handler registration mechanism IMO  \nvmassol - (16:30): s/need/might need/  \nvmassol - (16:30): but I don't have the big picture in my head right now  \nvmassol - (16:30): which is why I was asking for a quick design mail  \nsabageru - (16:31): ok  \nsabageru - (16:31): i will write a mail on devs about what i have in mind :)  \njvdrean left at 16:33 (Quit: Leaving.  \nsabageru left at 16:35 (Ping timeout: 240 seconds  \nvmassol - (16:40): sdumitriu: what's the status re the send by mail feature?  \nsdumitriu - (16:40): Working on it  \nlucaa - (16:40): ok, I will add a new event  \nvmassol - (16:40): sdumitriu: yes I know you're working on it  \nsdumitriu - (16:41): Styling  \nvmassol - (16:41): will you commit today?  \nsdumitriu - (16:41): As a bonus the standard forms proposal might be included  \nsdumitriu - (16:41): I'm not sure about today  \nsdumitriu - (16:46): jvelociter: Ping  \njvelociter - (16:46): yep  \nvmassol - (16:46): guys I'm implementing XWIKI-5669 to align CM events  \nsdumitriu - (16:46): I want to send the information about the selected suggest element in xwiki:suggest:selected  \nsdumitriu - (16:46): What should I send?  \nsdumitriu - (16:47): this.iHighlighted?  \njvelociter - (16:47): not really  \njvelociter - (16:47): it's not very clean yet the way I did it  \nsdumitriu - (16:48): I know  \nsdumitriu - (16:48): Using HTML as data structures is not nice  \njvelociter - (16:48): I think you should rather do as in it's done already for the other event  \njvelociter - (16:48): yep  \njvelociter - (16:48): will refactor that in 2.7  \nsdumitriu - (16:48): What other event?  \njvelociter - (16:48): let me check  \nsdumitriu - (16:48): this.options.callback  \nsdumitriu - (16:48): ?  \nsdumitriu - (16:49): < \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.options.callback( {  \nsdumitriu - (16:49): < \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'id': this.iHighlighted.down(\".suggestId\").innerHTML,  \nsdumitriu - (16:49): < \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'value': this.iHighlighted.down(\".suggestValue\").innerHTML,  \nsdumitriu - (16:49): < \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'info': this.iHighlighted.down(\".suggestInfo\").innerHTML  \nsdumitriu - (16:49): < \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0} );  \njvelociter - (16:49): yep I meant that  \nsdumitriu - (16:49): K  \nvmassol - (16:50): tmortagne: ouch we have 2 ComponentEventManager....  \nvmassol - (16:51): i think it's was forgotten during your refactoring....  \ntmortagne - (16:51): where ?  \nvmassol - (16:51): in 2 modules  \ntmortagne - (16:52): sure but which modules ?  \nvmassol - (16:52): I'm removing the one in -default  \nvmassol - (16:52): (the other is in -observatiob)  \ntmortagne - (16:53): vmassol: i don't have any in xwiki-core-component-default  \nvmassol - (16:53): sorry -api  \ntmortagne - (16:53): i have an empty org.xwiki.component.manager package  \ntmortagne - (16:53): what ?  \ntmortagne - (16:53): you should not remove it from api  \ntmortagne - (16:53): it's the api  \nvmassol - (16:54): i's also in -observation  \ntmortagne - (16:54): wait  \nvmassol - (16:54): it depends  \nvmassol - (16:54): we can have apis in various places  \ntmortagne - (16:54): no actually yes it should not be in api  \ntmortagne - (16:54): since it's about events  \nvmassol - (16:54): yes  \nvmassol - (16:54): I'm removing the empty manager package  \nvmassol - (16:56): tmortagne: do you know why StackingComponentEventManager is not in \u00a0-observation?  \nvmassol - (16:57): hmm there's a problem  \nvmassol - (16:57): CM requires CEM  \nvmassol - (16:57): so I'll leave CEM in -api for now  \nvmassol - (16:57): and remove the one in -observation  \nvmassol - (16:58): ok for you?  \ntmortagne - (16:58): \u00a0-observation is event related api I did not put any internal in it  \ntmortagne - (16:58): \"CEM\" ?  \nvmassol - (16:58): ComponentEventManager  \ntmortagne - (16:59): ye i think that's the thing  \ntmortagne - (16:59): i started to move and and seen that and reverted  \ntmortagne - (16:59): but forgot to remove from xwiki-core-component-default  \nvmassol - (17:00): yep  \ntmortagne - (17:00): xwiki-core-component-observation  \nStulle - (17:03): bye  \nlucaa - (17:04): guys, ( vmassol, jvelociter, sdumitriu ) would it be more useful to send the import event from the Package plugin, the install function ?  \nlucaa - (17:04): which is actually performing the import?  \njvelociter - (17:04): instead of ?  \nvmassol - (17:04): lucaa: that's what I was imagining, I don't know from where else you could send it  \nlucaa - (17:04): ImportAction  \nvmassol - (17:04): that's not doing the import  \nlucaa - (17:04): yes  \nvmassol - (17:04): so yes  \nlucaa - (17:05): it's lovely how none of this API is documented so I have no idea what it does when it's called and what are the side effects  \nvmassol - (17:05): package is one of the worse code  \nvmassol - (17:06): done by an intern a long time ago ;) (I won't name him)  \nvmassol - (17:06): s/worse/worst/  \nlucaa - (17:07): jvelociter: you worked with the import when you revamped it, you'd say it's safe to notify from install?  \nStulle left at 17:07 (Ping timeout: 265 seconds  \njvelociter - (17:08): I'd say that's the only place where it make sense to fire anyway  \njvelociter - (17:08): ]  \ntmortagne - (17:08): +1  \ntmortagne - (17:08): big -1 to put that in ImportAction  \ntmortagne - (17:08): the Packager api could be used programaticaly  \nlucaa - (17:08): tmortagne: sure  \nlucaa - (17:09): I realize now that there is a better place  \nlucaa - (17:09): so ActionExecutedEvent was wrong anyway  \nlucaa - (17:09): because packager might be called programatically and macros need to be registered  \nlucaa - (17:09): although...  \nlucaa - (17:09): well  \nlucaa - (17:09): it should work with the proper authentication  \nlucaa - (17:10): regardless of how it's called  \nlucaa - (17:10): it's just a very special case, the first import  \njvelociter - (17:13): BTW sdumitriu I think their is something wrong in the suggest in its value VS. display value selection  \njvelociter - (17:14): actually there is no such thing as the displayValue yet  \nsdumitriu - (17:14): Yep, but it should be  \njvelociter - (17:14): there is the \"info\" field which can be used (and then use value as display value) but that's different  \njvelociter - (17:14): +1  \njvelociter - (17:14): (actually I was almost about to fix that today, but moved on to something else)  \nsdumitriu - (17:15): Hm, I think I'll just drop this for the moment  \nsdumitriu - (17:15): It's taking a lot of time  \nsdumitriu - (17:15): Anyway, my idea was that the user suggest should display \"Full Name (XWiki.uname)\"  \nsilviar left at 17:15 (Read error: Connection reset by peer  \njvelociter - (17:19): I want to add an optional description to the suggested items, too  \njvelociter - (17:20): as on http://incubator.myxwiki.org/xwiki/bin/view/Improvements/SuggestRedesignProposal#HProposalA-1  \nsdumitriu - (17:20): Plus type  \njvelociter - (17:20): plus type yes, amd/or icon  \njvelociter - (17:20): and/or  \nsdumitriu - (17:20): I see you added support for different icons for each item in the UI  \njvelociter - (17:20): yes  \njvelociter - (17:20): the results could override that IMO  \njvelociter - (17:21): (or even have an option to the suggest like 'resultIconOverrideItemIcon'  \njvelociter - (17:21): that would be nice for a mixed user + group suggest  \nvmassol - (17:23): tmortagne: re XWIKI-5669, only for 2.7 or also for 2.6?  \ntmortagne - (17:25): vmassol: so XWIKI-5669 breaks all events ? even document related events ?  \nvmassol - (17:25): tmortagne: no  \nvmassol - (17:25): only component descriptor events  \ntmortagne - (17:26): yep sorry mixing everything today, to many conversations  \nvmassol - (17:26): np the description is confusing indeed  \ntmortagne - (17:26): well it's not really needed for 2.6  \ntmortagne - (17:26): now  \nvmassol - (17:26): no it's not jsut that user might use them in 2.6  \ntmortagne - (17:26): the better the sooner i guess  \nvmassol - (17:26): that was my point  \nvmassol - (17:27): but I agree it's not 100% necessary  \nvmassol - (17:27): so....  \ntmortagne - (17:27): +1 for 2.6  \nvmassol - (17:30): ok I'll merge  \njvelociter left at 18:01 (Quit: jvelociter  \njvelociter joined #xwiki at 18:05  \nsdumitriu left at 18:11 (Ping timeout: 272 seconds  \nmflorea left at 18:17 (Quit: Leaving.  \njvelociter left at 18:37 (Quit: jvelociter  \njvelociter joined #xwiki at 18:44  \nlucaa left at 19:14 (Ping timeout: 276 seconds  \narkub left at 19:17 (Ping timeout: 276 seconds  \nspliffy\\_\\_ joined #xwiki at 19:31  \nspliffy\\_ left at 19:34 (Ping timeout: 240 seconds  \ntmortagne left at 19:54 (Quit: Leaving.  \nsdumitriu joined #xwiki at 19:57  \nlucaa joined #xwiki at 20:36  \nrstavro left at 20:42 (Quit: Page closed  \nlucaa left at 20:56 (Ping timeout: 272 seconds  \nevalica left at 21:13 (Quit: Leaving.  \nEnygma` left at 21:22 (Ping timeout: 240 seconds  \nvmassol left at 21:30 (Quit: Leaving.  \nlpereira joined #xwiki at 21:31  \nlucaa joined #xwiki at 22:21  \nlpereira left at 22:57 (Quit: Leaving.  \nsdumitriu left at 23:22 (Ping timeout: 245 seconds  \nvmassol joined #xwiki at 23:23  \nvmassol left at 23:34 (Quit: Leaving.  \n\n"}