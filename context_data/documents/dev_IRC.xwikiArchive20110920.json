{"id": "dev:IRC.xwikiArchive20110920", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110920", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n01:48\u00a0<jvdrean>\u00a0has quit  \n03:30\u00a0<pturcotte>\u00a0has joined #xwiki  \n04:36\u00a0<pturcotte>\u00a0has quit  \n04:41\u00a0<pturcotte>\u00a0has joined #xwiki  \n06:57\u00a0<DrLou>\u00a0has quit  \n07:01\u00a0<Denis2>\u00a0has joined #xwiki  \n07:01\u00a0<Denis>\u00a0has quit  \n07:32\u00a0<sdumitriu>\u00a0has quit  \n07:34\u00a0<mflorea>\u00a0has joined #xwiki  \n07:37\u00a0<evalica>\u00a0has joined #xwiki  \n08:44\u00a0<vmassol>\u00a0has joined #xwiki  \n08:51\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:13\u00a0<Denis2>\u00a0is now known as <Denis>  \n10:33\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:53\u00a0<vmassol>\u00a0good morning  \n10:53\u00a0<vmassol>\u00a0just sent a mail for pushing the release date for 3.2M3  \n11:27\u00a0<vmassol>\u00a0mflorea: good morning. Have you checked the failing tests for REST/UI? I think they started failing at around the time when you merged the sheet/display branch so maybe there's a link  \n11:27\u00a0<vmassol>\u00a0for ex this looks like a title behavior change: http://ci.xwiki.org/job/xwiki-enterprise-test-rest/org.xwiki.enterprise$xwiki-enterprise-test-rest/294/testReport/org.xwiki.test.rest/PageResourceTest/testPUTPage/  \n11:28\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:28\u00a0<+mflorea>\u00a0might be, but I can't fix them before I update the sheet manager based on the feedback to my last mail  \n11:29\u00a0<vmassol>\u00a0mflorea: I thgouth we agreed you'd change the name to SheetDescriptorClass for now and in // ask for a better solution  \n11:29\u00a0<vmassol>\u00a0so you prefer to wait for the end of the thread first?  \n11:30\u00a0<+mflorea>\u00a0it's not just that, it's also the naming convention issue  \n11:30\u00a0<vmassol>\u00a0yes but they are two different issues no?  \n11:31\u00a0<+mflorea>\u00a0yes, but they both affect the code of the sheet manager. I don't want to fix test twice  \n11:31\u00a0<vmassol>\u00a0I broke the build, fixing  \n11:32\u00a0<+tmortagne>\u00a0vmassol: you duplicated <module>xwiki-platform-jira</module> in xwiki-platform-core root pom.xml (it was already there)  \n11:32\u00a0<+tmortagne>\u00a0and good morning :)  \n11:32\u00a0<vmassol>\u00a0yes just saw that, I've fixed it  \n11:32\u00a0<vmassol>\u00a0thanks  \n11:32\u00a0<+tmortagne>\u00a0late morning  \n11:32\u00a0<vmassol>\u00a0yeah good morning ;)  \n11:33\u00a0<+tmortagne>\u00a0nice to see all those projects removed from platform :)  \n11:33\u00a0<vmassol>\u00a0yep  \n11:34\u00a0<+tmortagne>\u00a0maybe will win some build time  \n11:35\u00a0<vmassol>\u00a0mflorea: testing EM with jira module now  \n11:36\u00a0<vmassol>\u00a0btw I get several of this when I start XE:  \n11:36\u00a0<vmassol>\u00a02011-09-20 11:35:36,722 [http://localhost:8080/xwiki/bin/admin/XWiki/XWikiPreferences?editor=globaladmin&section=Extensions] WARN \u00a0u.i.x.MyPersistentLoginManager - Login cookie validation hash mismatch! Cookies have been tampered with  \n11:36\u00a0<vmassol>\u00a0not sure why  \n11:36\u00a0<+tmortagne>\u00a0isn't it related to CSRF ?  \n11:37\u00a0<+tmortagne>\u00a0not sure how it's working  \n11:37\u00a0<vmassol>\u00a0me neither  \n11:37\u00a0<@cjdelisle>\u00a0That's not the csrf token, that's the browser cookie which it's for some reason, not able to read.  \n11:38\u00a0<vmassol>\u00a0hmm nexus isn't responding for me ATM  \n11:38\u00a0<vmassol>\u00a0it used to be ok 5mn ago  \n11:38\u00a0<+tmortagne>\u00a0xwiki.properties.vm should support full velocity, right ? my use case is #if#else  \n11:38\u00a0<vmassol>\u00a0can anyone access it?  \n11:39\u00a0<+tmortagne>\u00a0if it does we should use it more in xwiki.cfg too to avoid being forced to set the properties in build even when it's the default values  \n11:41\u00a0<+tmortagne>\u00a0cool it's working well  \n11:44\u00a0<vmassol>\u00a0nexus is back btw  \n11:46\u00a0<vmassol>\u00a0tmortagne: EM says that the install was successful but I've found some stack trace in my logs  \n11:47\u00a0<vmassol>\u00a0http://pastebin.com/VawcTFmZ  \n11:48\u00a0<vmassol>\u00a0to reproduce you can edit your xwiki.properties file:  \n11:48\u00a0<vmassol>\u00a0extension.repositories=maven-xwiki-snapshots:maven:http://nexus.xwiki.org/nexus/content/groups/public-snapshots  \n11:48\u00a0<vmassol>\u00a0extension.repositories=maven-xwiki-release:maven:http://nexus.xwiki.org/nexus/content/groups/public  \n11:48\u00a0<vmassol>\u00a0extension.repositories=atlassian:maven:https://maven.atlassian.com/content/repositories/atlassian-public/  \n11:48\u00a0<vmassol>\u00a0extension.repositories=javanet:maven:http://download.java.net/maven/2/com/sun/jersey/  \n11:48\u00a0<vmassol>\u00a0and try to install: org.xwiki.platform:xwiki-platform-jira version 3.2-SNAPSHOT  \n11:48\u00a0<vmassol>\u00a0oops btw just noticed by last repo isn't correct ;)  \n11:49\u00a0<vmassol>\u00a0but it worked  \n11:50\u00a0<+tmortagne>\u00a0vmassol: you did not installed a xar, right ?  \n11:50\u00a0<vmassol>\u00a0correct  \n11:51\u00a0<+tmortagne>\u00a0looks like the error are related to database  \n11:51\u00a0<vmassol>\u00a0yes  \n11:51\u00a0<+tmortagne>\u00a0checking the stack trace in detail but EM should not touch the database if you don't install a xar  \n11:53\u00a0<+tmortagne>\u00a0hmm the stack trace is about document lock as if you were edition a document from the UI  \n11:53\u00a0<vmassol>\u00a0yes  \n11:53\u00a0<vmassol>\u00a0only action I did was click on resolve and then install  \n11:54\u00a0<+tmortagne>\u00a0can you reproduce this everytime ? I can' think of anything EM would do to produce that  \n11:54\u00a0<vmassol>\u00a0I'll try again  \n11:55\u00a0<+tmortagne>\u00a0not sure what action is called since I can only see XWikiAction in the stack trace  \n11:55\u00a0<vmassol>\u00a0yep  \n11:55\u00a0<+tmortagne>\u00a0are you on the admin UI or directly in ExtensionManager page ?  \n11:56\u00a0<vmassol>\u00a0admin  \n11:56\u00a0<+tmortagne>\u00a0I think I remember that admin action is locking XWikiPreferences document  \n11:56\u00a0<+tmortagne>\u00a0but not sure how EM would have any influence on that  \n11:56\u00a0<vmassol>\u00a0cool the new jira module is working :)  \n11:57\u00a0<vmassol>\u00a0http://pastebin.com/FXwy0gFU  \n11:57\u00a0<+tmortagne>\u00a0always nice to hear :)  \n11:58\u00a0<vmassol>\u00a0that's a great example for the EM  \n11:58\u00a0<vmassol>\u00a0would be a pain to install manually  \n11:58\u00a0<vmassol>\u00a0:)  \n11:59\u00a0<+tmortagne>\u00a0yep  \n11:59\u00a0<vmassol>\u00a0it has a lot of deps: https://studio.atlassian.com/wiki/display/JRJC/Project+Dependencies  \n11:59\u00a0<vmassol>\u00a019!  \n11:59\u00a0<+tmortagne>\u00a0you need to add a UI now for it to be a complete use case ;)  \n11:59\u00a0<vmassol>\u00a0hehe  \n12:00\u00a0<vmassol>\u00a0let me try to remember who's in charge of the EM\u2026 hmmm :)  \n12:00\u00a0<+tmortagne>\u00a0speaking of which I think we should remove oscache based cache implementation from XE since we never use it and it's not super small dependencies  \n12:00\u00a0<+tmortagne>\u00a0if someone badly wants it he can always install \u00a0it  \n12:01\u00a0<vmassol>\u00a0we have 2 options  \n12:01\u00a0<vmassol>\u00a01) keep it part of platform but don't bundle it  \n12:01\u00a0<vmassol>\u00a02) retire it  \n12:01\u00a0<vmassol>\u00a0the good part of having it in platform is that this makes 2 impl  \n12:01\u00a0<vmassol>\u00a0thus ensuring our api works with 2 impls  \n12:02\u00a0<+tmortagne>\u00a0not sure about retiring it since \u00a0it's nice to keep a alternative to validate the API but at least don't bundle in with XE would be nice I think  \n12:02\u00a0<vmassol>\u00a0we're saying the same thing, cool  \n12:02\u00a0<+tmortagne>\u00a0until jcache is out ;)  \n12:02\u00a0<vmassol>\u00a0yep  \n12:02\u00a0<vmassol>\u00a0btw will it work to install it as an extension?  \n12:03\u00a0<vmassol>\u00a0(oscache module that is)  \n12:03\u00a0<vmassol>\u00a0I'm not sure core code will see extensions, will they?  \n12:03\u00a0<+tmortagne>\u00a0well it will work but you need to set the implementation to use in xwiki.properties so you will have to restart  \n12:03\u00a0<vmassol>\u00a0s/they/it/  \n12:03\u00a0<+tmortagne>\u00a0yes they will  \n12:03\u00a0<vmassol>\u00a0ok  \n12:04\u00a0<+tmortagne>\u00a0as lon as they come after EM init  \n12:04\u00a0<+tmortagne>\u00a0long  \n12:04\u00a0<+tmortagne>\u00a0since all extension are registered in the same component manager used by all components  \n12:05\u00a0<+tmortagne>\u00a0since we mostly use cache for database stuff I'm pretty sure nothing use it before EM init  \n12:06\u00a0<+sburjan`>\u00a0hello. is there any macro that lists pages from a space ?  \n12:06\u00a0<vmassol>\u00a0sburjan`: no macro, we should have one, but it can be done with a one line of velocity  \n12:07\u00a0<vmassol>\u00a0$xwiki.spaceDocs or something liek this  \n12:07\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0public List<String> getSpaceDocsName(String SpaceName) throws XWikiException  \n12:07\u00a0<vmassol>\u00a0so $xwiki.getSpaceDocsNames($doc.space)  \n12:08\u00a0<+sburjan`>\u00a0thanks, worked  \n12:09\u00a0<+tmortagne>\u00a0there is a page somewhere in XE I think  \n12:09\u00a0<vmassol>\u00a0well we have the spaces macro  \n12:10\u00a0<vmassol>\u00a0sburjan`: {{spaces /}}  \n12:10\u00a0<vmassol>\u00a0here: http://extensions.xwiki.org/xwiki/bin/view/Extension/Spaces+Macro  \n12:11\u00a0<+sburjan`>\u00a0yes, I needed it for the pages within one space  \n12:11\u00a0<vmassol>\u00a0ah no that's a list of spaces  \n12:11\u00a0<+sburjan`>\u00a0not to list spaces  \n12:11\u00a0<+sburjan`>\u00a0but your linke ,worked  \n12:11\u00a0<vmassol>\u00a0we used to have the dashboard page  \n12:11\u00a0<+sburjan`>\u00a0\\*line  \n12:12\u00a0<vmassol>\u00a0we used to have space dashboard that was displaying all docs in the space  \n12:13\u00a0<vmassol>\u00a0like this: http://dev.xwiki.org/xwiki/bin/view/Drafts/  \n12:13\u00a0<vmassol>\u00a0I wonder if we've lost this\u2026.  \n12:15\u00a0<+tmortagne>\u00a0vote sengt  \n12:15\u00a0<+tmortagne>\u00a0sent  \n13:01\u00a0<fmancinelli>\u00a0has joined #xwiki  \n14:18\u00a0<vmassol>\u00a0tmortagne: I've tried to use:extension.repositories=local:maven:file:///Users/vmassol/.m2/repository  \n14:18\u00a0<vmassol>\u00a0and I now get:  \n14:18\u00a0<vmassol>\u00a0Exception in thread \"FileRepositoryConnector-1\" java.lang.IllegalArgumentException: number of transferred bytes cannot be negative  \n14:18\u00a0<vmassol> at org.sonatype.aether.util.listener.DefaultTransferEvent.setTransferredBytes(DefaultTransferEvent.java:116)  \n14:18\u00a0<vmassol> at org.sonatype.aether.connector.file.FileRepositoryWorker.run(FileRepositoryWorker.java:300)  \n14:18\u00a0<vmassol> at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)  \n14:21\u00a0<pturcotte>\u00a0has quit  \n14:21\u00a0<+tmortagne>\u00a0could you paste the whole log ? I got error like that with local repository on a NTFS partition in ubuntu so I tough it was because of the not perfect support of this filesystem since It's working well now that I moved it to EXT4 partition  \n14:22\u00a0<+tmortagne>\u00a0but I think it also produce this kind of error when Aether just can't find what I ask it to download  \n14:22\u00a0<+tmortagne>\u00a0like you have the pom.xml but not the corresponding jar  \n14:22\u00a0<vmassol>\u00a0sorry otp right now (recording lescastcodeurs episode :))  \n14:22\u00a0<vmassol>\u00a0will provide all info just after  \n15:00\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:03\u00a0<DrLou>\u00a0has joined #xwiki  \n15:07\u00a0<+tmortagne>\u00a0vmassol: \u00a0it's cool, every time there is a castcodeur meeting we get new stuff on extension.xwiki.org ;)  \n15:08\u00a0<vmassol>\u00a0:)  \n15:34\u00a0<+tmortagne>\u00a0guys could I get more votes about persistent directory name  \n15:34\u00a0<+tmortagne>\u00a0also sent another vote about oscache  \n15:41\u00a0<pturcotte>\u00a0has joined #xwiki  \n15:44\u00a0<pubsubdude>\u00a0has joined #xwiki  \n15:45\u00a0<pubsubdude>\u00a0hey has any one worked on pub sub feature of xmpp over ejabberd ??  \n15:49\u00a0<pubsubdude>\u00a0hello there  \n15:50\u00a0<@cjdelisle>\u00a0pubsubdude: I know it was suggested at one time, I think it ended up turning into \"email this page\"  \n15:50\u00a0<@cjdelisle>\u00a0but as you can see, xwikibot does the same thing, just for irc only  \n15:50\u00a0<pubsubdude>\u00a0is there a better example for pub sub over ejabberd which \u00a0works fine  \n15:51\u00a0<@cjdelisle>\u00a0None that I know of.  \n15:53\u00a0<pubsubdude>\u00a0has quit  \n15:59\u00a0<vmassol>\u00a0groovy is really nice to read json: http://extensions.xwiki.org/xwiki/bin/view/Extension/JIRA+Integration  \n15:59\u00a0<vmassol>\u00a0actually this is even easier than using atlassian's JRJC's library ....  \n16:09\u00a0<vmassol>\u00a0hmm I'm wondering if we shouldn't remove the new jira module....  \n16:09\u00a0<vmassol>\u00a0ah no we could keep it for scripting languages other than groovy  \n16:10\u00a0<vmassol>\u00a0it's easy in groovy but probably not as easy in other scripting languages  \n16:17\u00a0<+tmortagne>\u00a0vmassol: at least velocity  \n16:17\u00a0<vmassol>\u00a0yep  \n16:17\u00a0<+tmortagne>\u00a0I guess python has some easy REST access too  \n16:17\u00a0<vmassol>\u00a0maybe yes  \n16:18\u00a0<vmassol>\u00a0going to add example with velocity  \n16:38\u00a0<npm\\_>\u00a0is now known as <npm>  \n16:43\u00a0<+Denis>\u00a0vmassol: just written a prototypal migrator for changing document ids, but I see a big issue in the way migrators are executed, since when they fails, the init is not stopped !  \n16:55\u00a0<vmassol>\u00a0Denis: I'm not very familiar with migrators but yes if a migrator fails maybe we shouldn't continue  \n17:36\u00a0<pturcotte>\u00a0has quit  \n17:36\u00a0<pturcotte>\u00a0has joined #xwiki  \n17:50\u00a0<vmassol>\u00a0err why has he removed that tag!  \n17:50\u00a0<vmassol>\u00a0we're missing a way to send a message to a connected user...  \n17:50\u00a0<vmassol>\u00a0oh he had added it himself before  \n17:50\u00a0<vmassol>\u00a0it was correct imo...  \n18:15\u00a0<+Denis>\u00a0vmassol: sorry, I was away. Currently migrator are run just after store initialization, processing could be ended after migration using a xwiki.cfg param only, any migration failure is disregarded, and this seems to me really inappropriate since it means that data access should stay backward compatible.  \n18:33\u00a0<+mflorea>\u00a0speaking about magic.. I tried to remove the include macro from XWiki.XWikiPreferences' content but the content was reset each time.. after some search I found that admin.vm overwrites the content of XWiki.XWikiPreferences if it doesn't contain the include macro :)  \n18:35\u00a0<@cjdelisle>\u00a0vmassol: we should be able to tell the bot to make someone have an irc window popup next time the load a page so we can complain :D  \n18:35\u00a0<vmassol>\u00a0mflorea: yep that's the kind of bad magic we want to get rid of ;)  \n18:35\u00a0<vmassol>\u00a0cjdelisle: would be nice  \n18:36\u00a0<@cjdelisle>\u00a0actually, a pretty neat idea is: \"2 other people are working on this page, click here to collaborate via chat\"  \n18:36\u00a0<vmassol>\u00a0yes  \n18:36\u00a0<vmassol>\u00a0we did a jabber client in hackathon  \n18:36\u00a0<vmassol>\u00a0anca did it  \n18:37\u00a0<@cjdelisle>\u00a0probably make more sense to run an ircd type thing right on the server  \n18:37\u00a0<vmassol>\u00a0an embedded server is even ebtter imo  \n18:37\u00a0<@cjdelisle>\u00a0yes, inside of xwiki  \n18:37\u00a0<@cjdelisle>\u00a0woo +1 feature, 1 step closer to being an operating system  \n18:38\u00a0<vmassol>\u00a0next step is being a mail server and client ;)  \n18:38\u00a0<@cjdelisle>\u00a0every application grows until it can read mail...  \n18:38\u00a0<vmassol>\u00a0yep  \n18:38\u00a0<@cjdelisle>\u00a0But the irc thing is a good idea IMO  \n18:38\u00a0<@cjdelisle>\u00a0use socket.io to pass data back and forth  \n18:39\u00a0<@cjdelisle>\u00a0it has some flash magic to maintain a socket but we wouldn't have to hack flash ourselves.  \n18:40\u00a0<@cjdelisle>\u00a0something to implement along with etherpad style collaborative editing  \n18:40\u00a0<vmassol>\u00a0a nice 20% time project...  \n18:41\u00a0<vmassol>\u00a0should we call xwiki a web operating system? :)  \n18:42\u00a0<vmassol>\u00a0http://en.wikipedia.org/wiki/Web\\_operating\\_system  \n18:42\u00a0<@cjdelisle>\u00a0it's kind of looking that way..  \n18:44\u00a0<vmassol>\u00a0XWiki : the webOS, wiki-style ;)  \n18:45\u00a0<vmassol>\u00a0btw guys we need to install some ways to clean up local repos on agents  \n18:46\u00a0<vmassol>\u00a0found 2 plugins: https://wiki.jenkins-ci.org/display/JENKINS/Maven+Repo+Cleaner+Plugin and https://wiki.jenkins-ci.org/display/JENKINS/M2+Repository+Cleanup+Plugin  \n18:46\u00a0<vmassol>\u00a0need to check if they can clean on agetns  \n18:48\u00a0<vmassol>\u00a0the first one looks good: https://github.com/jenkinsci/maven-repo-cleaner-plugin/blob/master/src/main/resources/org/jenkinsci/plugins/mavenrepocleaner/MavenRepoCleanerProperty/global.jelly  \n18:50\u00a0<vmassol>\u00a0I'll try to install it  \n18:51\u00a0<+tmortagne>\u00a0vmassol: we used to have some cleanup  \n18:51\u00a0<+tmortagne>\u00a0maybe it was simple cron  \n18:51\u00a0<vmassol>\u00a0ah?  \n18:51\u00a0<vmassol>\u00a0checking  \n18:52\u00a0<vmassol>\u00a0indeed I see a crontab on agent21  \n18:52\u00a0<vmassol>\u00a0\\*agent1  \n18:52\u00a0<vmassol>\u00a00 7 \\* \\* \\* find /home/hudsonagent/.m2/repository/ -atime +14 -delete  \n18:54\u00a0<fmancinelli>\u00a0has quit  \n18:56\u00a0<vmassol>\u00a018GB  \n18:57\u00a0<vmassol>\u00a0but that's maybe normal for 14 days  \n18:57\u00a0<+tmortagne>\u00a0yep 14 days of XE build produce a lot  \n18:58\u00a0<vmassol>\u00a0\u00a0ok i checked and the crontab is setup on all 4 agetns so it's ok  \n18:58\u00a0<vmassol>\u00a0although it might be better in the future to use the jenkins plugin  \n18:58\u00a0<vmassol>\u00a0since that centralizes the config  \n18:58\u00a0<vmassol>\u00a0(would need to be tested)  \n18:58\u00a0<+tmortagne>\u00a0probably  \n18:59\u00a0<vmassol>\u00a0fyi I've updatd jenkins/plugins  \n19:13\u00a0<vmassol>\u00a0has quit  \n19:16\u00a0<SvenDowideit>\u00a0has quit  \n19:16\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n19:30\u00a0<Denis>\u00a0has quit  \n19:40\u00a0<Denis>\u00a0has joined #xwiki  \n19:40\u00a0<abusenius>\u00a0has joined #xwiki  \n19:44\u00a0<jvdrean>\u00a0has quit  \n19:44\u00a0<tmortagne>\u00a0has quit  \n19:54\u00a0<lpereira>\u00a0has joined #xwiki  \n21:11\u00a0<SvenDowideit>\u00a0has quit  \n21:11\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n22:32\u00a0<lpereira>\u00a0has quit  \n22:57\u00a0<pturcotte>\u00a0has quit  \n23:05\u00a0<evalica>\u00a0has quit  \n23:39\u00a0<Enygma`>\u00a0has quit  \n23:46\u00a0<mflorea>\u00a0has quit  \n\n"}