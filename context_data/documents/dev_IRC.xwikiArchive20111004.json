{"id": "dev:IRC.xwikiArchive20111004", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20111004", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:16\u00a0<sdumitriu>\u00a0has quit  \n00:19\u00a0<Enygma`>\u00a0has quit  \n00:23\u00a0<sdumitriu>\u00a0has joined #xwiki  \n00:42\u00a0<jvdrean1>\u00a0has quit  \n00:51\u00a0<jvdrean>\u00a0has joined #xwiki  \n01:40\u00a0<jvdrean>\u00a0has quit  \n03:10\u00a0<Denis>\u00a0has quit  \n03:10\u00a0<cjdelisle>\u00a0has quit  \n03:10\u00a0<xipe>\u00a0has quit  \n03:12\u00a0<Denis>\u00a0has joined #xwiki  \n03:12\u00a0<xipe>\u00a0has joined #xwiki  \n03:12\u00a0<cjdelisle>\u00a0has joined #xwiki  \n05:55\u00a0<DrLou>\u00a0has quit  \n07:02\u00a0<Denis1>\u00a0has joined #xwiki  \n07:04\u00a0<Denis>\u00a0has quit  \n07:35\u00a0<sdumitriu>\u00a0has quit  \n07:54\u00a0<mflorea>\u00a0has joined #xwiki  \n08:06\u00a0<vmassol>\u00a0has joined #xwiki  \n08:18\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:43\u00a0<vmassol>\u00a0tmortagne: good morning, are you looking into the platform build failure: http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-oldcore/798/testReport/junit/com.xpn.xwiki.web/TempResourceActionTest/testGetTemporaryFileForBadURI/ ?  \n08:44\u00a0<+tmortagne>\u00a0vmassol: yes I am, that's because theses test have a mocked ExecutionContextManager but I don't see the point  \n08:45\u00a0<vmassol>\u00a0I don't see a mock in setUp()  \n08:46\u00a0<+tmortagne>\u00a0registerComponents()  \n08:46\u00a0<vmassol>\u00a0according to the stack trace the issue is a NPE here: \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0execution.getContext().setProperty(\"xwikicontext\", this.context);  \n08:46\u00a0<vmassol>\u00a0so probably getContext()  \n08:46\u00a0<+tmortagne>\u00a0vmassol: again that's because theses test have a mocked ExecutionContextManager which does not set the context as it should  \n08:47\u00a0<vmassol>\u00a0well that's one possibility  \n08:47\u00a0<vmassol>\u00a0the other is that the test could set it up as it used to do  \n08:47\u00a0<+tmortagne>\u00a0but right now I don't even understand why they have a mocked ExecutionContextManager  \n08:48\u00a0<vmassol>\u00a0simply to isolate  \n08:48\u00a0<vmassol>\u00a0that's good for a unit test  \n08:49\u00a0<+tmortagne>\u00a0that's the only unit test in the whole platform/commons that is doing that  \n08:49\u00a0<vmassol>\u00a0it's a very good thing actually  \n08:49\u00a0<vmassol>\u00a0the others are wrong  \n08:50\u00a0<+tmortagne>\u00a0depends of the goal  \n08:50\u00a0<vmassol>\u00a0otherwise the unit test will incurr all init from all initiliazrrs  \n08:50\u00a0<vmassol>\u00a0which is really not unit testing if the test is not about testing that  \n08:51\u00a0<vmassol>\u00a0tmortagne: what I'd do it set the EC as we were doing before in the test fwk  \n08:51\u00a0<+tmortagne>\u00a0it's not like it was automatic, AbstractComponentTestCase explciitely initialize context  \n08:52\u00a0<vmassol>\u00a0it was working before  \n08:52\u00a0<+tmortagne>\u00a0from AbstractComponentTestCase it's not supposed to be needed  \n08:52\u00a0<vmassol>\u00a0so I'm just suggesting to put it back as it was  \n08:52\u00a0<vmassol>\u00a0in \u00a0\u00a0\u00a0\u00a0public void initializeExecution() throws Exception  \n08:53\u00a0<+tmortagne>\u00a0I know where it is  \n08:53\u00a0<+tmortagne>\u00a0and it's colling a method which has for javadoc \"Set the passed Execution Context in {@link Execution}\"  \n08:53\u00a0<vmassol>\u00a0the other option is to change the unit test to provide a mock Execution  \n08:53\u00a0<+tmortagne>\u00a0so again it's not really nice to do it like this  \n08:54\u00a0<+tmortagne>\u00a0that's not the issue  \n08:54\u00a0<vmassol>\u00a0I don't understand your problem  \n08:54\u00a0<+tmortagne>\u00a0if it doe snot mock it where it mock everything I guess it needs it  \n08:55\u00a0<vmassol>\u00a0anyway got to go, bb in 1 hour  \n08:56\u00a0<vmassol>\u00a0I'll you fix it since you're on top of it!  \n08:56\u00a0<vmassol>\u00a0has quit  \n08:58\u00a0<Denis1>\u00a0is now known as <Denis>  \n09:18\u00a0<jvdrean>\u00a0has joined #xwiki  \n09:23\u00a0<evalica>\u00a0has joined #xwiki  \n09:46\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:54\u00a0<Enygma`>\u00a0has quit  \n10:06\u00a0<jvdrean>\u00a0has quit  \n10:09\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:12\u00a0<vmassol>\u00a0has joined #xwiki  \n10:12\u00a0<+tmortagne>\u00a0FYI and made platform never build on agent-3, it's failing way too often  \n10:13\u00a0<+tmortagne>\u00a0small builds like commons and rendering seems to be ok on agent-3  \n10:15\u00a0<Enygma`>\u00a0has quit  \n10:19\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:19\u00a0<vmassol>\u00a0tmortagne: all webstandars tests are failing. I can see this in the stdout:  \n10:19\u00a0<vmassol>\u00a02011-10-04 10:01:44,290 [http://127.0.0.1:8080/xwiki/bin/view/Blog/Categories%5D ERROR o.i.ObservationContextListener - Can't find any begin event corresponding to [org.xwiki.bridge.event.ActionExecutedEvent@373aa5]  \n10:19\u00a0<vmassol>\u00a02011-10-04 10:01:45,007 [http://127.0.0.1:8080/xwiki/bin/view/XWiki/AdminElementsSheet%5D ERROR o.i.ObservationContextListener - Can't find any begin event corresponding to [org.xwiki.bridge.event.ActionExecutedEvent@373aa5]  \n10:19\u00a0<vmassol>\u00a0any idea?  \n10:20\u00a0<+tmortagne>\u00a0not yet  \n10:21\u00a0<Enygma`>\u00a0has quit  \n10:23\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:24\u00a0<+tmortagne>\u00a0I mean I know what it means (some BeginEvent as been sent without the corresponding EndEvent) but don't know yet the real why  \n10:24\u00a0<vmassol>\u00a0ok  \n10:24\u00a0<+tmortagne>\u00a0must be missing a final () somewhere in XWikiAction or one of the extension classes  \n10:32\u00a0<Enygma`>\u00a0has quit  \n10:35\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:40\u00a0<jvdrean>\u00a0has joined #xwiki  \n11:07\u00a0<jvdrean>\u00a0has quit  \n11:21\u00a0<jvdrean>\u00a0has joined #xwiki  \n11:30\u00a0<Enygma`1>\u00a0has joined #xwiki  \n11:32\u00a0<Enygma`>\u00a0has quit  \n11:32\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:34\u00a0<Enygma`1>\u00a0has quit  \n11:39\u00a0<Enygma`1>\u00a0has joined #xwiki  \n11:41\u00a0<Enygma`1>\u00a0has quit  \n11:41\u00a0<Enygma`1>\u00a0has joined #xwiki  \n11:42\u00a0<Enygma`>\u00a0has quit  \n11:43\u00a0<Enygma`1>\u00a0has quit  \n11:43\u00a0<sburjan>\u00a0has joined #xwiki  \n11:44\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:47\u00a0<Enygma`>\u00a0has quit  \n11:48\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:54\u00a0<sburjan>\u00a0has quit  \n11:55\u00a0<Enygma`>\u00a0has quit  \n11:57\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:08\u00a0<sburjan>\u00a0has joined #xwiki  \n12:10\u00a0<sburjan>\u00a0has quit  \n12:13\u00a0<sburjan>\u00a0has joined #xwiki  \n12:29\u00a0<Enygma`>\u00a0has quit  \n12:29\u00a0<sburjan>\u00a0has quit  \n12:51\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:01\u00a0<SvenDowideit>\u00a0has quit  \n13:03\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n13:09\u00a0<sburjan>\u00a0has joined #xwiki  \n13:24\u00a0<+sburjan>\u00a0good morning vmassol . Are you receiving what I am writing ?  \n13:24\u00a0<vmassol>\u00a0sburjan: you mean that message or another one?  \n13:25\u00a0<+sburjan>\u00a0this message.  \n13:25\u00a0<+sburjan>\u00a0I'm not sure our internet connection is still stable  \n13:35\u00a0<Enygma`>\u00a0has quit  \n13:36\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:40\u00a0<Enygma`>\u00a0has quit  \n13:41\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:43\u00a0<DrLou>\u00a0has joined #xwiki  \n13:44\u00a0<Enygma`>\u00a0has quit  \n13:44\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:45\u00a0<vmassol>\u00a0tmortagne: http://jira.xwiki.org/browse/XRENDERING-138 Hope I didn't remove too many tests ;)  \n13:45\u00a0<vmassol>\u00a0hmm http://ci.xwiki.org/job/xwiki-enterprise-test-webstandards/ still failing  \n13:46\u00a0<Enygma`1>\u00a0has joined #xwiki  \n13:46\u00a0<Enygma`>\u00a0has quit  \n13:46\u00a0<JuanDaugherty>\u00a0has left #xwiki  \n13:46\u00a0<JuanDaugherty>\u00a0has joined #xwiki  \n13:47\u00a0<JuanDaugherty>\u00a0something was causing me to get blank lines on this channel  \n13:51\u00a0<JuanDaugherty>\u00a0guess it was Enygma`1 testing something  \n13:52\u00a0<Enygma`1>\u00a0:) sorry. I keep changing networks so I might reconnect a lot  \n13:52\u00a0<JuanDaugherty>\u00a0np  \n13:52\u00a0<JuanDaugherty>\u00a0doesn't show in the log at the xwiki wiki  \n13:53\u00a0<vmassol>\u00a0yep we exclude them  \n13:57\u00a0<JuanDaugherty>\u00a0btw, just learned of a site cmsmatrix.org where you might want to be listed  \n13:59\u00a0<Enygma`1>\u00a0has quit  \n14:01\u00a0<vmassol>\u00a0JuanDaugherty: indeed, good idea  \n14:01\u00a0<vmassol>\u00a0I thought it was for pure cms but I see several wikis listed  \n14:10\u00a0<Enygma`>\u00a0has joined #xwiki  \n14:16\u00a0<vmassol>\u00a0guys wdyt about introducing a new keyword in the rendering test framework: \"inputexpect\" which would declare both an \"input\" and an \"expect\"  \n14:16\u00a0<vmassol>\u00a0for ex: http://pastebin.com/U7Ltw2Rp  \n14:16\u00a0<vmassol>\u00a0this allows to be sure that the output is the same as the input and removes potential errors  \n14:18\u00a0<vmassol>\u00a0this is the same test before: http://pastebin.com/fVdEZfPE  \n14:19\u00a0<Enygma`1>\u00a0has joined #xwiki  \n14:20\u00a0<vmassol>\u00a0ok I'm adding it, I don't think it can harm  \n14:22\u00a0<Enygma`>\u00a0has quit  \n14:28\u00a0<Enygma`1>\u00a0has quit  \n14:35\u00a0<Enygma`>\u00a0has joined #xwiki  \n14:42\u00a0<pturcotte>\u00a0has joined #xwiki  \n14:42\u00a0<+tmortagne>\u00a0vmassol: wow that's a lot of removed tests :)  \n14:43\u00a0<vmassol>\u00a0indeed  \n14:44\u00a0<+tmortagne>\u00a0vmassol: you cannot brag anymore that we have \u00a0more than 1000 test on rendering :D  \n14:44\u00a0<vmassol>\u00a0tmortagne: hehe.. actually we do I'm sure, need to count them all  \n14:44\u00a0<vmassol>\u00a0tmortagne: I'd like your opinion on my inputexpect stuff above  \n14:44\u00a0<vmassol>\u00a0I'm about to commit changes to all bold\\*.test files to use it but want to be sure you agree it's a good idea  \n14:45\u00a0<+tmortagne>\u00a0sounds good yes  \n14:45\u00a0<vmassol>\u00a0ok  \n14:45\u00a0<vmassol>\u00a0cool  \n14:45\u00a0<+tmortagne>\u00a0it's easier and indeed useually we really want to be sure it's excatly the same thing  \n14:48\u00a0<lucaa>\u00a0has joined #xwiki  \n14:48\u00a0<+lucaa>\u00a0guys, what 3.2 do we have installed on myxwiki?  \n14:48\u00a0<+lucaa>\u00a0M2, M3?  \n14:57\u00a0<+sburjan>\u00a0guys, it seems we have a blocker  \n14:57\u00a0<+sburjan>\u00a0I am running the latest snapshot, and when I go to my profile page, I don't get anything  \n14:58\u00a0<+sburjan>\u00a0basically none of the tabs doesn't work Watchlist, Profile, etc  \n14:58\u00a0<+sburjan>\u00a0seems to be a sheets issue  \n14:58\u00a0<+sburjan>\u00a0can someone confirm ?  \n15:02\u00a0<+sburjan>\u00a0my breadcrumb looks like : Wiki Home \u00bb XWiki Space \u00bb Data types \u00bb \u00bb Admin  \n15:05\u00a0<Enygma`>\u00a0has quit  \n15:05\u00a0<Enygma`>\u00a0has joined #xwiki  \n15:20\u00a0<Enygma`1>\u00a0has joined #xwiki  \n15:21\u00a0<Enygma`>\u00a0has quit  \n15:22\u00a0<Enygma`>\u00a0has joined #xwiki  \n15:24\u00a0<Enygma`1>\u00a0has quit  \n15:29\u00a0<pturcotte>\u00a0has quit  \n15:29\u00a0<pturcotte>\u00a0has joined #xwiki  \n15:30\u00a0<Enygma`1>\u00a0has joined #xwiki  \n15:34\u00a0<Enygma`>\u00a0has quit  \n15:34\u00a0<Enygma`>\u00a0has joined #xwiki  \n15:36\u00a0<Enygma`1>\u00a0has quit  \n15:39\u00a0<Enygma`>\u00a0has quit  \n15:40\u00a0<Enygma`>\u00a0has joined #xwiki  \n16:02\u00a0<+tmortagne>\u00a0vmassol: found more about the \"Can't find any begin event corresponding...\" error, as far as I can see the ExecutionContext is not the same when ActionExecutingEvent is sent and when ActionExecutedEvent is sent in view action  \n16:03\u00a0<+tmortagne>\u00a0whhich mean something is pushing a new context and don't pop it or something is simple changing the context  \n16:03\u00a0<+tmortagne>\u00a0mflorea: do you thing is could be in the displayer ?  \n16:04\u00a0<vmassol>\u00a0ok\u2026  \n16:04\u00a0<+tmortagne>\u00a0putting a breakpoint in push and pop context to try to find thee bad guy  \n16:06\u00a0<+mflorea>\u00a0tmortagne: I'm pretty sure the context is restored. Most of the code was taken from XWikiDocument. If it worked because it should work now too  \n16:06\u00a0<+mflorea>\u00a0s/because/before  \n16:06\u00a0<+tmortagne>\u00a0maybe there is some finally missing somewhere  \n16:06\u00a0<+tmortagne>\u00a0when something wrong happen  \n16:06\u00a0<+mflorea>\u00a0I don't recall  \n16:08\u00a0<+tmortagne>\u00a0hmm I think I know  \n16:24\u00a0<+tmortagne>\u00a0ok found, context jingling is starting to be hard to follow :)  \n16:33\u00a0<mflorea>\u00a0has quit  \n17:01\u00a0<Enygma`>\u00a0has quit  \n17:08\u00a0<Enygma`>\u00a0has joined #xwiki  \n17:11\u00a0<+tmortagne>\u00a0vmassol: looks like there is an issue with github/jenkins, commons did not built on jenkins even if I did several commits today and you did too  \n17:12\u00a0<+tmortagne>\u00a0but that seems to work well with platform  \n17:12\u00a0<vmassol>\u00a0just checked the hook on github and it's there: http://ci.xwiki.org/github-webhook/  \n17:13\u00a0<+tmortagne>\u00a0yep seen it too  \n17:13\u00a0<+tmortagne>\u00a0I don't see any difference between platform and commons  \n17:25\u00a0<JuanDaugherty>\u00a0xwiki does run on windows doesn't it?  \n17:25\u00a0<vmassol>\u00a0yes  \n17:25\u00a0<vmassol>\u00a0it's java  \n17:25\u00a0<JuanDaugherty>\u00a0just was at the point of adjusting an xwiki.cfg and noticed all the unix defaults  \n17:26\u00a0<vmassol>\u00a0where?  \n17:26\u00a0<vmassol>\u00a0I don't remember any unix default  \n17:26\u00a0<JuanDaugherty>\u00a0yes all was overblown, wiki.temp.dir for example  \n17:27\u00a0<+tmortagne>\u00a0vmassol: what's weird is that http://ci.xwiki.org/view/Commons/job/xwiki-commons/222/ has been triggered by Github it seems  \n17:28\u00a0<+tmortagne>\u00a0JuanDaugherty: it's more examples than default stuff I think  \n17:28\u00a0<JuanDaugherty>\u00a0got it  \n17:29\u00a0<Enygma`>\u00a0has quit  \n17:32\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:32\u00a0<@sdumitriu>\u00a0Hello team  \n17:32\u00a0<@sdumitriu>\u00a0How's the source? Ready to be released or still hot with changes?  \n17:34\u00a0<+tmortagne>\u00a0sdumitriu: no planned change on 3.1 AFAIK but the failing integrations don't all look harmless  \n17:34\u00a0<+tmortagne>\u00a0Ican't reproduce the clustering one at least  \n17:34\u00a0<+tmortagne>\u00a0so this one should be ok  \n17:34\u00a0<vmassol>\u00a0sdumitriu: we need to fix all tests first  \n17:34\u00a0<vmassol>\u00a0marius is dropping the title thingie for 3.2  \n17:35\u00a0<@sdumitriu>\u00a0Good  \n17:36\u00a0<@sdumitriu>\u00a0Is the workspace module stable? No more cyclic deps, no more renames needed?  \n17:38\u00a0<@sdumitriu>\u00a0Looking at the 3.1 failing tests  \n17:38\u00a0<+tmortagne>\u00a0to be checked but AFAIK all the workspaces changes have been made  \n17:38\u00a0<+tmortagne>\u00a0at least I seen commits for both rename and cyclic dependency issue  \n17:40\u00a0<+tmortagne>\u00a0started commons build by hand, can't find why jenkins did not reacted to github  \n17:43\u00a0<mflorea>\u00a0has joined #xwiki  \n17:45\u00a0<+tmortagne>\u00a0sdumitriu: same thing for ldap test, cannot reproduce  \n17:50\u00a0<evalica>\u00a0has quit  \n17:50\u00a0<mflorea>\u00a0has quit  \n18:02\u00a0<sburjan>\u00a0has quit  \n18:03\u00a0<+tmortagne>\u00a0sdumitriu: escaping test failure seemed serious but actually I can't reproduce it  \n18:03\u00a0<+tmortagne>\u00a0so looks like the is only false positive  \n18:03\u00a0<+tmortagne>\u00a0so I guess 3.1 is ready  \n18:35\u00a0<sburjan>\u00a0has joined #xwiki  \n18:50\u00a0<sburjan>\u00a0has quit  \n18:58\u00a0<tmortagne>\u00a0has quit  \n19:26\u00a0<jvdrean>\u00a0has quit  \n19:28\u00a0<JuanDaugherty>\u00a0does he mean 3.1.1?  \n19:31\u00a0<@sdumitriu>\u00a0Yes  \n19:34\u00a0<+sburjan`>\u00a0guys, did you saw about the blocker I found ?  \n19:34\u00a0<+sburjan`>\u00a0because none of you responde  \n19:34\u00a0<@sdumitriu>\u00a0No  \n19:34\u00a0<+sburjan`>\u00a0I am running the latest snapshot, and when I go to my profile page, I don't get anything\u000f  \n19:35\u00a0<@sdumitriu>\u00a0Still reading emails  \n19:35\u00a0<+sburjan`>\u00a0basically none of the tabs doesn't work Watchlist, Profile, etc\u000f  \n19:35\u00a0<+sburjan`>\u00a0I wrote it here, didn't reported it  \n19:35\u00a0<+sburjan`>\u00a0my breadcrumb looks like : Wiki Home \u00bb XWiki Space \u00bb Data types \u00bb \u00bb Admin\u000f  \n19:36\u00a0<+sburjan`>\u00a0note the two \u00bb \u00bb \u000f  \n19:47\u00a0<tmortagne>\u00a0has joined #xwiki  \n19:47\u00a0<tmortagne>\u00a0has left #xwiki  \n19:53\u00a0<rrodriguez>\u00a0has joined #xwiki  \n\n"}