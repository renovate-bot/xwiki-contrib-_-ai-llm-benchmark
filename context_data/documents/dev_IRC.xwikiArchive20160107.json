{"id": "dev:IRC.xwikiArchive20160107", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160107", "title": "IRC Archive for channel #xwiki on 07 January 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<lucaa>\u00a0has quit  \n00:59\u00a0<OSIMasson>\u00a0has quit  \n01:13\u00a0<OSIMasson>\u00a0has joined #xwiki  \n01:26\u00a0<OSIMasson>\u00a0has quit  \n06:01\u00a0<Denis>\u00a0has joined #xwiki  \n06:04\u00a0<Denis1>\u00a0has quit  \n06:47\u00a0<mflorea>\u00a0has joined #xwiki  \n06:56\u00a0<lucaa>\u00a0has joined #xwiki  \n07:01\u00a0<lucaa>\u00a0has quit  \n07:26\u00a0<mflorea>\u00a0has quit  \n07:52\u00a0<msmeria>\u00a0has joined #xwiki  \n08:04\u00a0<xwikibot>\u00a0has joined #xwiki  \n08:32\u00a0<cjd>\u00a0has quit  \n08:35\u00a0<vmassol>\u00a0has joined #xwiki  \n08:58\u00a0<Denis>\u00a0has quit  \n08:58\u00a0<Denis1>\u00a0has joined #xwiki  \n09:11\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:12\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:13\u00a0<mflorea>\u00a0has joined #xwiki  \n09:17\u00a0<cjd>\u00a0has joined #xwiki  \n09:19\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:19\u00a0<vmassol>\u00a0good morning  \n09:19\u00a0<vmassol>\u00a0BFD?  \n09:19\u00a0<vmassol>\u00a0:)  \n09:20\u00a0<tmortagne>\u00a0would be nice yes  \n09:28\u00a0<Pbas>\u00a0Good morning. By the way about BFD ... :-)  \n09:29\u00a0<Pbas>\u00a0Could you fix activity stream on myxwiki.org plz? It is broken again (last time it was PR problem) \u00a0(my not so nice web site: http://coc.myxwiki.org/xwiki/bin/view/Main/WebHome)  \n09:30\u00a0<Pbas>\u00a0It seem activity stream is broken each time xwiki is upgraded?  \n09:32\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:34\u00a0<tmortagne>\u00a0Pbas: it's not activity stream in general on myxwiki.org it's a standard page that need PR in your wiki that had changes and you don't have PR  \n09:34\u00a0<tmortagne>\u00a0do you remember what page it was last time ?  \n09:34\u00a0<Pbas>\u00a0Yes but i haven't change this page  \n09:34\u00a0<Pbas>\u00a0nope sorry  \n09:34\u00a0<tmortagne>\u00a0you upgraded your wiki  \n09:35\u00a0<tmortagne>\u00a0since it's done by you the change is credited to you  \n09:36\u00a0<Pbas>\u00a0ok but then myxwiki.org is upgraded I haven't choice I must upgrade my sub xwiki isn't it?  \n09:37\u00a0<vmassol>\u00a0yes I think we have a problem Pbas. On myxwiki.org when a local user upgrades his wiki, all pages that require PR will cease to work after the upgrade  \n09:37\u00a0<vmassol>\u00a0(becuase the local user doesn't have PR)  \n09:37\u00a0<vmassol>\u00a0(all pages that require PR and that have changes)  \n09:37\u00a0<vmassol>\u00a0(I've seen the problem on the search feature for my wiki on myxwiki.org yesterday)  \n09:37\u00a0<vmassol>\u00a0isn't the search broken in your wiki btw?  \n09:38\u00a0<Pbas>\u00a0yes but I fixe it  \n09:38\u00a0<vmassol>\u00a0how can you do this without PR? :)  \n09:38\u00a0<tmortagne>\u00a0vmassol: \"all pages that require PR will cease to work\" it's not exactly true  \n09:38\u00a0<Pbas>\u00a0I select solr search engine  \n09:38\u00a0<tmortagne>\u00a0all page that have changes  \n09:38\u00a0<Pbas>\u00a0instead of lucene  \n09:38\u00a0<vmassol>\u00a0@thomas: yes this is what I mentioned  \n09:38\u00a0<vmassol>\u00a0\"(all pages that require PR and that have changes)\"  \n09:39\u00a0<vmassol>\u00a0hmm I don't understand how this could fixed it\u2026 :)  \n09:39\u00a0<Pbas>\u00a0Then when xwiki is upgraded what I must do to avoid this PR problem?  \n09:39\u00a0<vmassol>\u00a0no much on your side, we need to fix stuff  \n09:39\u00a0<tmortagne>\u00a0there is nothing you can do you your side  \n09:39\u00a0<Pbas>\u00a0ok thxs  \n09:40\u00a0<tmortagne>\u00a0page requiring PR to work in XE used to be a bug and it slipped  \n09:40\u00a0<tmortagne>\u00a0for example there is no logical reason for AS to require PR, it's usually just some missing API  \n09:41\u00a0<vmassol>\u00a0yes I think we need to do a review of all our pages still requiring PR and remove that need  \n09:41\u00a0<vmassol>\u00a0(they're supposed to have a \"PR xobject\" btw but not sure it's been always added)  \n09:41\u00a0<tmortagne>\u00a0Pbas: fixed  \n09:41\u00a0<Pbas>\u00a0FYI about search after xwiki upgraded I had a message: lucene plugin missing in xwiki.cfg  \n09:42\u00a0<tmortagne>\u00a0that's different  \n09:42\u00a0<vmassol>\u00a0ah yes tmortagne probably forgot to remove it from xwiki.cfg  \n09:42\u00a0<vmassol>\u00a0tmortagne: ?  \n09:42\u00a0<Pbas>\u00a0yes I know :-)  \n09:42\u00a0<Pbas>\u00a0Thxs for ut fix :-)  \n09:42\u00a0<tmortagne>\u00a0vmassol: nothing to do with xwiki.cfg  \n09:42\u00a0<tmortagne>\u00a0Pbas: had the lucene UI but not the plugin  \n09:42\u00a0<Pbas>\u00a0Solr working well by the way  \n09:43\u00a0<tmortagne>\u00a0and he configured search to use lucene  \n09:43\u00a0<vmassol>\u00a0tmortagne: hmm ok then it's an issue for the seach app  \n09:43\u00a0<vmassol>\u00a0which shoudn't show it if the plugin is not there  \n09:43\u00a0<Pbas>\u00a0lucene is search engine by default on myxwiki.org  \n09:44\u00a0<tmortagne>\u00a0Pbas: I doubt that  \n09:44\u00a0<tmortagne>\u00a0checking the template  \n09:44\u00a0<tmortagne>\u00a0you probably switched it at some point because PR issue with solr  \n09:44\u00a0<vmassol>\u00a0I'll fix this one today for BFD  \n09:44\u00a0<vmassol>\u00a0:)  \n09:45\u00a0<tmortagne>\u00a0or your wiki is pre solr search maybe  \n09:45\u00a0<tmortagne>\u00a0yep the default search is solr on myxwiki.org template  \n09:45\u00a0<vmassol>\u00a0hmm it works for me on 8.0-SNAPSHOT actually  \n09:45\u00a0<vmassol>\u00a0I don't have the lucene entry  \n09:46\u00a0<vmassol>\u00a0so it's only a problem because pbas had the lucene engine selected ebfore indeed  \n09:46\u00a0<tmortagne>\u00a0vmassol: why would you have the lucene entry ?  \n09:46\u00a0<tmortagne>\u00a0you don't have the lucene UI  \n09:46\u00a0<Pbas>\u00a0ok I don't remeber changing search engine but anyway with solr searching work well  \n09:46\u00a0<tmortagne>\u00a0you have the lucene UI only after an upgrade from a version that have the lucene UI  \n09:48\u00a0<Pbas>\u00a0Ok thxs both (I will check at next upgrade :-) )  \n09:59\u00a0<Slashman>\u00a0has joined #xwiki  \n10:08\u00a0<tmortagne>\u00a0Pbas: in installed extensions you should find an \"invalid\" lucene UI extension, you can uninstall it to cleanup a bit, it's useless anyway without the plugin  \n10:14\u00a0<Pbas>\u00a0done! :-) Thanks you  \n10:27\u00a0<spawn57>\u00a0has joined #xwiki  \n10:28\u00a0<spawn57>\u00a0hi, sometimes when I use the wysiwyg editor, sometimes when I hit the backspace or delete key, part of the paragraph ends up getting a light grey background color. Is there a reason for this? and can I turn it off?  \n10:46\u00a0<ClemensR>\u00a0has joined #xwiki  \n11:00\u00a0<vmassol>\u00a0spawn57: maybe when you delete a char, the previous element is a macro?  \n11:00\u00a0<vmassol>\u00a0(and thus the whole rendring of that macro gets highlighted)  \n11:00\u00a0<vmassol>\u00a0best would be for you to provide some content for us to reproduce  \n11:01\u00a0<evalica>\u00a0has joined #xwiki  \n11:03\u00a0<spawn57>\u00a0hi vmassol, \u00a0sure.. give me a second  \n11:03\u00a0<vmassol>\u00a0since you sent a mail  \n11:03\u00a0<vmassol>\u00a0best would be to reply to that mail  \n11:03\u00a0<vmassol>\u00a0thanks  \n11:08\u00a0<spawn57>\u00a0can I add images to the email? or should I link the images in imgur?  \n11:08\u00a0<flashdel>\u00a0has joined #xwiki  \n11:09\u00a0<lucaa>\u00a0has joined #xwiki  \n11:11\u00a0<flashdel>\u00a0hi folks, i got a problem with ldap authentication and xwiki. Everything works so far, but i got some users like foo foo1 and foo2. If i want to login with user foo, the authentication fails, because xwiki tries to authenticate with user foo1 (debug log is activated and says if i login with user foo: \u00a0Found user dn in user group [uid=foo1,ou=blip,dc=blup,dc=de])  \n11:12\u00a0<flashdel>\u00a0so i guess for xwiki it is ok to login with an incomplete uid, but i want it to take exactly the uid i entered, does somebody has a hint for me?  \n11:13\u00a0<tmortagne>\u00a0flashdel: no it's not ok for XWiki to log with an incomplete UID  \n11:13\u00a0<tmortagne>\u00a0does this user already have a XWiki profile ?  \n11:14\u00a0<tmortagne>\u00a0if yes you should check the DN that has been registered for it (edit the profile with object editor and search for LDAP profile object)  \n11:14\u00a0<tmortagne>\u00a0maybe for some reason it ended up with this DN (something changed at some point in the LDAP server or something like this)  \n11:15\u00a0<tmortagne>\u00a0could you paste the comple debug log something so that I can look at it  \n11:15\u00a0<spawn57>\u00a0has quit  \n11:15\u00a0<flashdel>\u00a0foo1 and foo2 do have an Xwiki Profile, but user foo does not. But i could login with user foo by using the password of foo1, because thats the user xwiki tries to authenticate against ldap  \n11:16\u00a0<flashdel>\u00a0ok, i will paste the debug log  \n11:19\u00a0<tmortagne>\u00a0flashdel: could you check what you have in foo1 profile object ?  \n11:20\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:21\u00a0<flashdel>\u00a0tmortagne: http://pastebin.com/0Dh7qFDq here is the paste. the real username i am trying to log in is \"janina\" but \"janinas\" is taken instead  \n11:21\u00a0<tmortagne>\u00a0what version of XWiki is this ?  \n11:22\u00a0<flashdel>\u00a0where do i look up the profile object?  \n11:22\u00a0<flashdel>\u00a0its xwiki 7.2  \n11:22\u00a0<flashdel>\u00a0in the profile itself there is no ldap information  \n11:23\u00a0<tmortagne>\u00a0you seems to setup allowed group with everything which is not really usefull  \n11:24\u00a0<tmortagne>\u00a0you should just comment this property  \n11:24\u00a0<tmortagne>\u00a0by default everything is allowed  \n11:25\u00a0<tmortagne>\u00a0it can be expensive to resolve all entries in the LDAP server which is what objectClass=\\* mean basically  \n11:25\u00a0<vmassol>\u00a0tmortagne: do we absolutely need http://jira.xwiki.org/browse/XWIKI-12817# for 7.4.x or could it be moved to post 7.x? not sure what are teh consequences of not having it  \n11:25\u00a0<flashdel>\u00a0yes, i am still testing, so later on i will restrict it. But i guess thats not related to my current problem?  \n11:25\u00a0<tmortagne>\u00a0talking about xwiki.authentication.ldap.user\\_group property  \n11:26\u00a0<tmortagne>\u00a0it could be a bug in the optimization to get the user DN from this initial group actually  \n11:26\u00a0<tmortagne>\u00a0since that's where XWiki found the user DN in your case  \n11:26\u00a0<tmortagne>\u00a0so that could workaround your issue  \n11:27\u00a0<tmortagne>\u00a0I will try to reproduce the issue you have  \n11:27\u00a0<flashdel>\u00a0ok nice, thank you!  \n11:28\u00a0<tmortagne>\u00a0vmassol: XAR import use this so right now XAR import does not support importing both \"Space1.Entity\" and \"Space1.Entity.Page\"  \n11:29\u00a0<tmortagne>\u00a0it's possible other places use this tree too  \n11:29\u00a0<tmortagne>\u00a0mflorea might now better  \n11:29\u00a0<vmassol>\u00a0ok I see, then it seems we might need to fix it for 7.4.x then  \n11:29\u00a0<tmortagne>\u00a0yes  \n11:42\u00a0<msmeria>\u00a0has quit  \n11:42\u00a0<msmeria>\u00a0has joined #xwiki  \n11:49\u00a0<msmeria1>\u00a0has joined #xwiki  \n11:51\u00a0<msmeria>\u00a0has quit  \n12:15\u00a0<Trefex>\u00a0hey guys  \n12:15\u00a0<Trefex>\u00a0As an admin, I now get velocity permission denied errors in my pages  \n12:16\u00a0<Trefex>\u00a0there's no tick checked in the Rights part of the Wiki at the Script column, so I'm a bit confused  \n12:16\u00a0<Trefex>\u00a0am running 7.3  \n12:50\u00a0<lucaa>\u00a0has quit  \n12:50\u00a0<lucaa1>\u00a0has joined #xwiki  \n13:06\u00a0<vmassol>\u00a0hi Trefex  \n13:06\u00a0<vmassol>\u00a0what's the error when you click on the macro error?  \n13:08\u00a0<gdelhumeau>\u00a0Hi devs  \n13:08\u00a0<gdelhumeau>\u00a0Is Main.DatabaseSearch supposed to provide a RSS?  \n13:09\u00a0<gdelhumeau>\u00a0Because it's tested as RSS: https://github.com/xwiki/xwiki-enterprise/blob/master/xwiki-enterprise-test/pom.xml#L300-300  \n13:09\u00a0<gdelhumeau>\u00a0but it doesn't work, the output is empty  \n13:09\u00a0<vmassol>\u00a0I remember we were generating a RSS feed yes  \n13:09\u00a0<gdelhumeau>\u00a0Same for LuceneSearch  \n13:09\u00a0<vmassol>\u00a0(it was even linked from the RssFeeds page)  \n13:09\u00a0<gdelhumeau>\u00a0so maybe it's broken  \n13:09\u00a0<gdelhumeau>\u00a0The RssReeds page has been removed  \n13:09\u00a0<vmassol>\u00a0ee http://platform.xwiki.org/xwiki/bin/view/Features/RSS  \n13:09\u00a0<vmassol>\u00a0\\*see  \n13:09\u00a0<vmassol>\u00a0sure but it has no relatnioship with RssFeeds  \n13:10\u00a0<vmassol>\u00a0\\*relationship  \n13:10\u00a0<vmassol>\u00a0you can see it on http://extensions.xwiki.org/xwiki/bin/view/Extension/Search+Application  \n13:10\u00a0<vmassol>\u00a0(the first screenshot)  \n13:10\u00a0<vmassol>\u00a0actually no that screenshot has been updated now to use solr  \n13:10\u00a0<vmassol>\u00a0ah no  \n13:10\u00a0<vmassol>\u00a0it's the DB search  \n13:10\u00a0<vmassol>\u00a0got tricked by the breadcrumbs ;)  \n13:10\u00a0<vmassol>\u00a0(marius recently updated this)  \n13:11\u00a0<vmassol>\u00a0so in summary: yes we have a RSS feedb in DB search  \n13:11\u00a0<vmassol>\u00a0and it's supposed to work  \n13:11\u00a0<vmassol>\u00a0if not then it's a regression  \n13:12\u00a0<vmassol>\u00a0just tested locally gdelhumeau and it worked for me  \n13:12\u00a0<vmassol>\u00a0(on 8.0-SNAPSHOT)  \n13:13\u00a0<gdelhumeau>\u00a0vmassol: does this URL work: http://localhost:8080/xwiki/bin/view/Main/DatabaseSearch?xpage=plain&outputSyntax=plain&text=wiki ?  \n13:14\u00a0<vmassol>\u00a0nope it's doesn't, it's empty but this one works: http://localhost:8080/xwiki/bin/get/Main/DatabaseSearch?outputSyntax=plain&space=&text=test  \n13:14\u00a0<vmassol>\u00a0so the issue is view vs get  \n13:15\u00a0<vmassol>\u00a0when I click on the RSS link it uses the get action, not view  \n13:15\u00a0<vmassol>\u00a0(and it works)  \n13:15\u00a0<vmassol>\u00a0it should be easy to make it work with view too, not sure who broke this  \n13:16\u00a0<gdelhumeau>\u00a0at least the generated URL works  \n13:16\u00a0<vmassol>\u00a0seems marius may have broken this in:  \n13:16\u00a0<gdelhumeau>\u00a0it's this URL that should be tested there: https://github.com/xwiki/xwiki-enterprise/blob/master/xwiki-enterprise-test/pom.xml#L300-300  \n13:17\u00a0<vmassol>\u00a081ca3c755f6143f5288a387ba2bd1c9bf46e5252  \n13:17\u00a0<gdelhumeau>\u00a0IMO the generated URL should be tested, not the one with \"view\"  \n13:17\u00a0<vmassol>\u00a0it's still a regression  \n13:17\u00a0<gdelhumeau>\u00a0independently to know if the \"view\" mode should work or not  \n13:17\u00a0<vmassol>\u00a0yes sure  \n13:17\u00a0<vmassol>\u00a0the good part is that it allowed us to catch it  \n13:17\u00a0<gdelhumeau>\u00a0indeed  \n13:18\u00a0<vmassol>\u00a0FTR this shows it was working before: http://playground.xwiki.org/xwiki/bin/view/Main/DatabaseSearch?xpage=plain&outputSyntax=plain&text=test  \n13:19\u00a0<gdelhumeau>\u00a0#set ($rssMode = $xcontext.action == 'get')  \n13:19\u00a0<vmassol>\u00a0yes that's the rev I pointed at  \n13:19\u00a0<vmassol>\u00a0ie 81ca3c755f6143f5288a387ba2bd1c9bf46e5252  \n13:19\u00a0<vmassol>\u00a0specifically https://github.com/xwiki/xwiki-platform/commit/81ca3c755f6143f5288a387ba2bd1c9bf46e5252#diff-665345c68d67389e6c017625b7de4582R105  \n13:20\u00a0<vmassol>\u00a0(done in 6.4RC1)  \n13:20\u00a0<vmassol>\u00a0\\*7.4  \n13:20\u00a0<vmassol>\u00a0gdelhumeau: you create the jira issue or should I do it?  \n13:21\u00a0<gdelhumeau>\u00a0I've commented on the commit  \n13:21\u00a0<gdelhumeau>\u00a0I can do it  \n13:21\u00a0<vmassol>\u00a0it's an important regression  \n13:21\u00a0<vmassol>\u00a0because that's typically the type of URL you have in your RSS reader  \n13:21\u00a0<vmassol>\u00a0so anyone who was using the RSS search feature is going to be broken  \n13:22\u00a0<gdelhumeau>\u00a0I think we should have both URL (get and view) in our webstandards tests  \n13:22\u00a0<vmassol>\u00a0ofc, I don't think many people are using the DB search but still we should fix it since we support it  \n13:22\u00a0<vmassol>\u00a0gdelhumeau: depends  \n13:22\u00a0<vmassol>\u00a0I don't think we're supposed to provide both for everything  \n13:23\u00a0<vmassol>\u00a0in this case it's required because otherwise we break some users  \n13:28\u00a0<gdelhumeau>\u00a0XWIKI-12972  \n13:28\u00a0<gdelhumeau>\u00a0mflorea: I can handle it  \n13:32\u00a0<mflorea>\u00a0vmassol: I used 'get' action and not 'view' because I don't think the stats for the view DatabaseSearch page should increase each time a RSS client gets the RSS.  \n13:32\u00a0<Trefex>\u00a0vmassol: it's org.xwiki.rendering.macro.MacroExecutionException: The execution of the [velocity] script macro is not allowed. Check the rights of its last author or the parameters if it's rendered from another script.  \n13:34\u00a0<vmassol>\u00a0mflorea: I'm not sure because \"get\" is technical and not supposed to be used by humans. But for RSS feeds it probably makes sense to support \"view\". Anyway in any case, I believe the issue is backward compat. I'm ok to have either as the canonical action for RSS feeds  \n13:35\u00a0<mflorea>\u00a0a RSS client is not human  \n13:35\u00a0<vmassol>\u00a0sure but the URL is public  \n13:35\u00a0<vmassol>\u00a0I meant public  \n13:35\u00a0<vmassol>\u00a0no human  \n13:35\u00a0<vmassol>\u00a0but I guess get can be public too  \n13:35\u00a0<mflorea>\u00a0REST URLs are public and technical at the same time, I don't see the relation  \n13:36\u00a0<vmassol>\u00a0well a lot of get ursl are usined internally and are not public  \n13:36\u00a0<vmassol>\u00a0\\*used  \n13:36\u00a0<vmassol>\u00a0but I don't disagree  \n13:36\u00a0<vmassol>\u00a0my only main point here is backward compat  \n13:40\u00a0<mflorea>\u00a0I haven't though about backward compatibility when I changed the URL, but I agree it can be an issue, although it shouldn't be hard for a user to update the RSS URL in the RSS client (and I doubt the database search RSS was highly used)  \n13:40\u00a0<vmassol>\u00a0well it's not that easy to realize your feed reader doesn't work anymore but yes I agree othrewise  \n13:41\u00a0<vmassol>\u00a0still it's easy to fix so we should probably do it  \n13:52\u00a0<OSIMasson>\u00a0has joined #xwiki  \n14:03\u00a0<ClemensR>\u00a0tmortagne: thanks for fixing the release notes / jira link! (I plain forgot where it was)  \n14:03\u00a0<tmortagne>\u00a0ClemensR: I need to find some way to make this automated, maybe a jira extension to Repository app  \n14:13\u00a0<ClemensR>\u00a0has quit  \n14:13\u00a0<ClemensR>\u00a0has joined #xwiki  \n14:36\u00a0<ClemensR>\u00a0has quit  \n14:36\u00a0<ClemensR1>\u00a0has joined #xwiki  \n14:46\u00a0<ClemensR1>\u00a0has quit  \n14:47\u00a0<ClemensR>\u00a0has joined #xwiki  \n14:52\u00a0<MasterPiece>\u00a0has joined #xwiki  \n14:54\u00a0<msmeria1>\u00a0has quit  \n15:03\u00a0<flashdel>\u00a0tmortagne: hey i altered the field \"ldap group filter\" from (objectClass=\\*) to ou=wiki,dc=my-domain,dc=de and now it works with foo, foo1 and so on. But i am wondering why, that \"ou=wiki,dc=my-domain,dc=de\" is not a group filter, why is xwiki even accepting it?  \n15:07\u00a0<ClemensR>\u00a0has quit  \n15:08\u00a0<ClemensR>\u00a0has joined #xwiki  \n15:12\u00a0<ClemensR>\u00a0has quit  \n15:13\u00a0<ClemensR>\u00a0has joined #xwiki  \n15:18\u00a0<ClemensR>\u00a0has quit  \n15:18\u00a0<ClemensR>\u00a0has joined #xwiki  \n15:39\u00a0<Slashman>\u00a0has quit  \n15:43\u00a0<ClemensR>\u00a0has quit  \n15:43\u00a0<ClemensR>\u00a0has joined #xwiki  \n15:58\u00a0<Slashman>\u00a0has joined #xwiki  \n16:05\u00a0<zzeroo>\u00a0has joined #xwiki  \n16:08\u00a0<zzeroo>\u00a0Hi, since the last update to xwiki 7.4 my documentTree aren't working anymore. {{documentTree root=\"document:$xwiki.getDocument($doc)\" /}} enclosed by {{velocity}} tags has shown all sub pages. This is not working on 7.4  \n16:10\u00a0<ClemensR>\u00a0hm, propably should be just {{documentTree root=\"document:$doc\" /}} \u00a0\u00a0... if $doc is a string (?)  \n16:13\u00a0<ClemensR>\u00a0(aside of that testing this with7.4 myself ...)  \n16:15\u00a0<vmassol>\u00a0zzeroo: indeed $xwiki.getDocument($doc) is not correct, it returns a Document object and when its toString() it called it'll generate the full name  \n16:15\u00a0<vmassol>\u00a0(which means you'll loose the wiki part btw)  \n16:16\u00a0<vmassol>\u00a0anyway, as ClemensR mentioned, it should just be document:$docReference  \n16:19\u00a0<zzeroo>\u00a0{{documentTree root=\"document:$doc\" /}} is not working. The same with {{documentTree root=\"document:$docReference\" /}}  \n16:22\u00a0<tmortagne>\u00a0flashdel: XWiki \"groups\" can be actual group entries, filters (result of a search) and organization unit (all the children of some entry)  \n16:24\u00a0<zzeroo>\u00a0vmassol: is document:$docReference correct?  \n16:24\u00a0<tmortagne>\u00a0zzeroo: depends what $docReference is, it's nothing standard  \n16:27\u00a0<vmassol>\u00a0zzeroo: see http://extensions.xwiki.org/xwiki/bin/view/Extension/Document+Tree+Macro#HParameters  \n16:27\u00a0<vmassol>\u00a0check the \"root\" parameter you'll see some examples  \n16:27\u00a0<zzeroo>\u00a0vmassol: this is the jumping point. What is the docReference. In a form that I can use it for the documentTree macro in a generic, dynamic form.  \n16:28\u00a0<zzeroo>\u00a0vmassol: Til 7.4 this was working:  \n16:28\u00a0<zzeroo>\u00a0{{velocity}}  \n16:28\u00a0<zzeroo>\u00a0{{documentTree root=\"document:$xwiki.getDocument($doc)\" /}}  \n16:28\u00a0<zzeroo>\u00a0{{/velocity}}  \n16:29\u00a0<vmassol>\u00a0first, this is equivalent of:  \n16:29\u00a0<vmassol>\u00a0{{documentTree root=\"document:$doc\" /}}  \n16:29\u00a0<ClemensR>\u00a0here the following still working: \u00a0{{velocity}}{{documentTree root=\"document:$doc\" /}}{{/velocity}} \u00a0\u00a0... \u00a0the $doc is just the current docuent, or did you change this variable somehow ?  \n16:29\u00a0<vmassol>\u00a0as mentioned what you wrote wasn't correct  \n16:29\u00a0<vmassol>\u00a0even before 7.4 it wasn't correct (even if it was working)  \n16:32\u00a0<MasterPiece>\u00a0has quit  \n16:32\u00a0<ClemensR>\u00a0here it even works if I add {{velocity}}{{documentTree root=\"document:$xwiki.getDocument($doc)\" /}}{{/velocity}} \u00a0\u00a0to Sandbox.WebHome ... cannot really reproduce :(  \n16:33\u00a0<zzeroo>\u00a0{{velocity}} {documentTree root=\"document:$doc\" /}} {{/velocity}} did not work. I get the \"This is a standalone macro ... used inline\" error.  \n16:33\u00a0<ClemensR>\u00a0zzeroo: \u00a0does it still not work for you if you use it e.g. on the home page of the sandbox?  \n16:33\u00a0<ClemensR>\u00a0ah, add empty lines above and below  \n16:34\u00a0<ClemensR>\u00a0hard to paste them in the chat ;)  \n16:34\u00a0<zzeroo>\u00a0Even with two lines the error happens.... Arrg, not my day  \n16:35\u00a0<vmassol>\u00a0zzeroo: you need 2 empty lines before and after the macro  \n16:35\u00a0<vmassol>\u00a0and make sure you don't have any white space  \n16:35\u00a0<vmassol>\u00a0and FTR this hasn't changed in 7.4  \n16:37\u00a0<vmassol>\u00a0(so I don't understand why it worked before and not now for you)  \n16:38\u00a0<OSIMasson>\u00a0has quit  \n16:42\u00a0<zzeroo>\u00a0https://www.dropbox.com/s/yhefqcbzrb3r7bh/not-working.png?dl=0  \n16:44\u00a0<vmassol>\u00a0yes that's easy to fix  \n16:44\u00a0<vmassol>\u00a0you should just need 2 empty lines before and after the macro  \n16:44\u00a0<vmassol>\u00a0(without any white spaces)  \n16:46\u00a0<zzeroo>\u00a0vmassol: Do you see the screenshot? The gist in background is part of it!  \n16:49\u00a0<vmassol>\u00a0zzeroo: thanks but I can't see white spaces  \n16:49\u00a0<vmassol>\u00a0:)  \n16:49\u00a0<vmassol>\u00a0you should check that  \n16:51\u00a0<sdumitriu>\u00a0has quit  \n16:52\u00a0<zzeroo>\u00a0vmassol: Belive me or not, there are no white spaces. These are empty lines. Double checked. (btw before I decide to make a screenshot)  \n16:52\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:53\u00a0<vmassol>\u00a0hmmm then I don't have a clue  \n16:54\u00a0<vmassol>\u00a0zzeroo: I can reproduce on http://massol.myxwiki.org/xwiki/bin/view/Sandbox/  \n16:54\u00a0<OSIMasson>\u00a0has joined #xwiki  \n16:55\u00a0<vmassol>\u00a0trying locally now  \n16:55\u00a0<tmortagne>\u00a0the issue is not around documentTree macro  \n16:55\u00a0<tmortagne>\u00a0what is inline in your velocity macro probably  \n16:55\u00a0<tmortagne>\u00a0in which the documentTree is  \n16:55\u00a0<vmassol>\u00a0ah yes  \n16:55\u00a0<tmortagne>\u00a0from what I understand documentTree is the only thing in your velocity macro so you can't do anything at this level  \n16:55\u00a0<vmassol>\u00a0I also had a space after the {{/velocity}}  \n16:56\u00a0<zzeroo>\u00a0vmassol: OK me too. space after the velocity.  \n16:56\u00a0<zzeroo>\u00a0;)  \n16:58\u00a0<zzeroo>\u00a0vmassol: is the macro working on your sandbox then? I only get \"Loading ...\" but no tree  \n17:04\u00a0<sdumitriu>\u00a0has quit  \n17:15\u00a0<lucaa1>\u00a0has quit  \n17:26\u00a0<Trefex>\u00a0vmassol: i replied to you earlier but you were busy with the RSS stuff  \n17:26\u00a0<Trefex>\u00a0vmassol: so I guess you didn't see my reply?  \n17:29\u00a0<vmassol>\u00a0Trefex: oops sorry, I guess I missed it  \n17:30\u00a0<Trefex>\u00a0vmassol: ah no worries  \n17:30\u00a0<Trefex>\u00a0vmassol: this is the error I get  \n17:30\u00a0<Trefex>\u00a0org.xwiki.rendering.macro.MacroExecutionException: The execution of the [velocity] script macro is not allowed. Check the rights of its last author or the parameters if it's rendered from another script.  \n17:32\u00a0<vmassol>\u00a0ah yes  \n17:32\u00a0<vmassol>\u00a0so that's normal :)  \n17:32\u00a0<vmassol>\u00a0starting with XWiki 7.2 there's now a script permission  \n17:33\u00a0<Trefex>\u00a0ye, but I thought that the rights worked such that  \n17:33\u00a0<Trefex>\u00a0if nobody is \"ticked\" than everyone has the right?  \n17:33\u00a0<Trefex>\u00a0or is it the opposite for script, and in fact is disabled by default, and you have to enable explicitly?  \n17:33\u00a0<vmassol>\u00a0http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki72#HScriptright  \n17:33\u00a0<vmassol>\u00a0and we changed it a bit later I think  \n17:33\u00a0<Trefex>\u00a0ok  \n17:33\u00a0<Trefex>\u00a0RTM  \n17:33\u00a0<Trefex>\u00a0RTFM  \n17:33\u00a0<Trefex>\u00a0just don't know which one :D  \n17:34\u00a0<vmassol>\u00a0\"The Script Right is set to DENY by default, meaning that if you do not have it explicitly, you will not be able to execute the scripts that you write with your user account.\"  \n17:34\u00a0<vmassol>\u00a0\"However, for backward-compatibility reasons, the standard XWiki Enterprise distribution comes with the Script Right being allowed for all users at the main wiki level, so that, unless you (as an Admin) explicitly revoke the right for some users or explicitly deny it, they will be able to execute the scripts they wrote, just like before.\"  \n17:34\u00a0<Trefex>\u00a0yeah if you can read and know where to look  \n17:34\u00a0<Trefex>\u00a0i went from 7.1 to 7.3  \n17:34\u00a0<vmassol>\u00a0:)  \n17:34\u00a0<Trefex>\u00a0as usual we are talking about sub-wikis  \n17:34\u00a0<Trefex>\u00a0ok let me try  \n17:34\u00a0<vmassol>\u00a0k  \n17:35\u00a0<Trefex>\u00a0ah yes something i was wondering  \n17:35\u00a0<Trefex>\u00a0since i am using ldap groups to get people to the right subwiki  \n17:35\u00a0<Trefex>\u00a0the users in fact do not appear in the sub-wiki users list  \n17:35\u00a0<Trefex>\u00a0is that normal ?  \n17:35\u00a0<vmassol>\u00a0I guess the users are on the main wiki  \n17:36\u00a0<vmassol>\u00a0but I don't know really  \n17:36\u00a0<vmassol>\u00a0never used ldap with xwiki  \n17:37\u00a0<Trefex>\u00a0nope doesn't work  \n17:39\u00a0<Trefex>\u00a0http://i.imgur.com/irM5iid.png  \n17:39\u00a0<Trefex>\u00a0http://i.imgur.com/2ddQ00o.png  \n17:39\u00a0<Trefex>\u00a0vmassol: did i do something wrong ?  \n17:39\u00a0<vmassol>\u00a0you're probably not using it correclty  \n17:39\u00a0<vmassol>\u00a0it's working like PR  \n17:39\u00a0<vmassol>\u00a0which means it's the last author which needs to have the scirpt right  \n17:39\u00a0<vmassol>\u00a0(last author of the doc)  \n17:39\u00a0<vmassol>\u00a0not the user viewing it  \n17:40\u00a0<Trefex>\u00a0yep i changed the page  \n17:40\u00a0<Trefex>\u00a0http://i.imgur.com/tVg0OoF.png as you can see here  \n17:40\u00a0<vmassol>\u00a0you saved but did you make any change to the page?  \n17:40\u00a0<Trefex>\u00a0no  \n17:41\u00a0<vmassol>\u00a0could you try?  \n17:41\u00a0<Trefex>\u00a0ok... works...  \n17:42\u00a0<vmassol>\u00a0I think there's a check somewhere and the content author is changed only if the content has been modified  \n17:42\u00a0<Trefex>\u00a0even though it says modified by ...  \n17:42\u00a0<Trefex>\u00a0boy oh boy  \n17:42\u00a0<vmassol>\u00a0I guess we should display both content author and last author  \n17:42\u00a0<vmassol>\u00a0since they're not the same  \n17:42\u00a0<vmassol>\u00a0in the UI we only display last author  \n17:43\u00a0<vmassol>\u00a0to understand,  \n17:43\u00a0<vmassol>\u00a0a user can add an attachment to a page  \n17:43\u00a0<vmassol>\u00a0or an xobject  \n17:43\u00a0<vmassol>\u00a0this doesn't change the content  \n17:44\u00a0<vmassol>\u00a0but it changes the last author  \n17:44\u00a0<vmassol>\u00a0the content author is only modified when the contnet is changed  \n17:45\u00a0<Trefex>\u00a0ok i understand  \n17:45\u00a0<vmassol>\u00a0you can try it with: $doc.getContentAuthorReference() and $doc.getAuthorReference()  \n17:45\u00a0<Trefex>\u00a0makes sense!$  \n17:45\u00a0<vmassol>\u00a0s/try/display  \n17:45\u00a0<Trefex>\u00a0wah 7.4 is out, jesus, you guys update faster than ligthning :)  \n17:45\u00a0<vmassol>\u00a0:)  \n17:45\u00a0<vmassol>\u00a0yeah I recommend you use 7.4  \n17:45\u00a0<vmassol>\u00a0there are several issues with 7.3 as mentioned in the RN  \n17:46\u00a0<vmassol>\u00a0you may not be affected though, see the red part on http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki73  \n17:47\u00a0<vmassol>\u00a0upgrading from 7.3 to 7.4 should be a breeze :)  \n17:47\u00a0<Trefex>\u00a0well 12896 is my bug ;)  \n17:49\u00a0<vmassol>\u00a0hehe  \n17:49\u00a0<vmassol>\u00a0:)  \n17:52\u00a0<Trefex>\u00a0you guys at FOSDEM?  \n17:53\u00a0<evalica>\u00a0yeap :) we are going to co-share a booth \u2026 and also I will have a presentation there https://fosdem.org/2016/schedule/event/osd\\_designers\\_compromises\\_in\\_open\\_source/ (shameless promotion) :)  \n17:53\u00a0<evalica>\u00a0\\*stand  \n17:54\u00a0<Trefex>\u00a0sharing with whom?  \n17:54\u00a0<evalica>\u00a0with other wikis from what I remember  \n17:54\u00a0<vmassol>\u00a0tikiwiki + others  \n17:55\u00a0<vmassol>\u00a0https://tiki.org/TikiFestFosdem2016  \n17:55\u00a0<vmassol>\u00a0so tikiwiki, dokuwiki, xwiki  \n17:56\u00a0<vmassol>\u00a0evalica: you should put your name there too ;)  \n17:56\u00a0<vmassol>\u00a0hey you could even join them in the TikiHouse ;)  \n17:57\u00a0<evalica>\u00a0:)  \n17:57\u00a0<vmassol>\u00a0(on my side, I still don't know if I'm coming or not, I need to make up my mind quickly now)  \n17:57\u00a0<vmassol>\u00a0(but probably not)  \n17:57\u00a0<Trefex>\u00a0i'm going  \n17:57\u00a0<Trefex>\u00a0so you have to  \n17:57\u00a0<vmassol>\u00a0:)  \n17:58\u00a0<vmassol>\u00a0I've been a bit disappointed by fosdem during the past years  \n17:58\u00a0<vmassol>\u00a0(not enough java for my taste)  \n17:58\u00a0<evalica>\u00a0finally there is the design room :) so I'm quite happy :P  \n18:24\u00a0<cjd>\u00a0has quit  \n18:42\u00a0<tmortagne>\u00a0has quit  \n18:44\u00a0<KermitTheFragger>\u00a0has quit  \n18:54\u00a0<ClemensR>\u00a0has left #xwiki  \n18:57\u00a0<evalica>\u00a0has quit  \n18:58\u00a0<Enygma`>\u00a0has quit  \n19:00\u00a0<mflorea>\u00a0has quit  \n19:05\u00a0<OSIMasson>\u00a0has quit  \n19:16\u00a0<cjd>\u00a0has joined #xwiki  \n19:46\u00a0<abusenius>\u00a0has joined #xwiki  \n20:06\u00a0<Denis1>\u00a0has quit  \n20:13\u00a0<OSIMasson>\u00a0has joined #xwiki  \n20:23\u00a0<gdelhumeau>\u00a0has quit  \n20:30\u00a0<Slashman>\u00a0has quit  \n20:33\u00a0<ansuz\\_>\u00a0has joined #xwiki  \n20:38\u00a0<cjd>\u00a0has quit  \n20:38\u00a0<ansuz>\u00a0has quit  \n20:44\u00a0<sdumitriu>\u00a0has joined #xwiki  \n23:25\u00a0<vmassol>\u00a0has quit\n"}