{"id": "dev:IRC.xwikiArchive20120419", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120419", "title": "IRC Archive for channel #xwiki on 19 April 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:29\u00a0<rrodriguez>\u00a0has joined #xwiki  \n00:53\u00a0<polx>\u00a0has quit  \n00:54\u00a0<polx>\u00a0has joined #xwiki  \n00:59\u00a0<polx>\u00a0has quit  \n01:04\u00a0<evalica>\u00a0has quit  \n01:29\u00a0<vmassol>\u00a0has quit  \n01:41\u00a0<faryshta>\u00a0has quit  \n01:52\u00a0<faryshta>\u00a0has joined #xwiki  \n02:46\u00a0<Shaddox>\u00a0has quit  \n03:08\u00a0<faryshta>\u00a0has quit  \n03:20\u00a0<faryshta>\u00a0has joined #xwiki  \n04:22\u00a0<DrLou>\u00a0has joined #xwiki  \n05:51\u00a0<DrLou>\u00a0has quit  \n07:02\u00a0<Denis2>\u00a0has joined #xwiki  \n07:04\u00a0<Denis>\u00a0has quit  \n07:31\u00a0<vmassol>\u00a0has joined #xwiki  \n08:01\u00a0<mflorea>\u00a0has joined #xwiki  \n08:14\u00a0<vmassol>\u00a0has quit  \n08:17\u00a0<rrodriguez>\u00a0has quit  \n08:38\u00a0<CIA-160>\u00a0Jean-Vincent Drean\u000f stable-4.0.x\u000f \\* r3c9aa79\u000f https://github.com/xwiki/xwiki-platform/commit/3c9aa79fbcf317e28385344180f5c3d23c0cdbeb \u000f/ xwiki-platform-core/xwiki-platform-query/xwiki-platform-query-manager/src/main/java/org/xwiki/query/internal/ScriptQuery.java :\u000f XWIKI-7740 : Allow to add multiple QueryFilters to Queries ...  \n08:47\u00a0<Denis2>\u00a0is now known as <Denis>  \n09:08\u00a0<polx>\u00a0has joined #xwiki  \n09:16\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:07\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:14\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:23\u00a0<abusenius>\u00a0has joined #xwiki  \n10:34\u00a0<sburjan>\u00a0has joined #xwiki  \n10:54\u00a0<vmassol>\u00a0has joined #xwiki  \n11:01\u00a0<evalica>\u00a0has joined #xwiki  \n11:15\u00a0<evalica>\u00a0has quit  \n11:15\u00a0<gdelhumeau>\u00a0has quit  \n11:17\u00a0<abusenius>\u00a0has quit  \n11:20\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n11:28\u00a0<vmassol>\u00a0has quit  \n11:31\u00a0<vmassol>\u00a0has joined #xwiki  \n11:40\u00a0<evalica>\u00a0has joined #xwiki  \n11:49\u00a0<+sburjan>\u00a0Hello. can someone add CI build for 4.0 ?  \n11:51\u00a0<+sburjan>\u00a0because I'd like to tesst db migrations  \n12:11\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:24\u00a0<vmassol>\u00a0has quit  \n13:35\u00a0<vmassol>\u00a0has joined #xwiki  \n14:04\u00a0<lucaa>\u00a0has joined #xwiki  \n14:05\u00a0<DrLou\\_>\u00a0has joined #xwiki  \n14:25\u00a0<+tmortagne>\u00a0sburjan: I added the jobs yesterday but there was build error in common/rendering  \n14:25\u00a0<+tmortagne>\u00a0you should have a new version already  \n14:25\u00a0<+sburjan>\u00a0yes, already testing  \n14:27\u00a0<vmassol>\u00a0has quit  \n14:38\u00a0<vmassol>\u00a0has joined #xwiki  \n14:49\u00a0<@cjd\\_>\u00a0117M ./webapps/xwiki/WEB-INF/lib  \n14:49\u00a0<@cjd\\_>\u00a044M ./webapps/xwiki/WEB-INF/fonts  \n14:49\u00a0<@cjd\\_>\u00a055M ./webapps/xwiki/resources/js  \n14:50\u00a0<@cjd\\_>\u00a0I didn't realize we had so much fint data and js  \n14:50\u00a0<@cjd\\_>\u00a0\\*font  \n14:50\u00a0<+tmortagne>\u00a0indeed it's a lot  \n14:50\u00a0<+tmortagne>\u00a0did not know either  \n14:50\u00a0<+tmortagne>\u00a0I think the WYSIWYG is pretty big  \n14:51\u00a0<+tmortagne>\u00a0but I was not really thinking about 55M  \n14:51\u00a0<@cjd\\_>\u00a0117M of lib is big but it's growing at a terrifying rate..  \n14:52\u00a0<@cjd\\_>\u00a0\\*not\\* growing at a terrifying rate  \n14:52\u00a0<+tmortagne>\u00a0yep we are about this size since a long time  \n14:54\u00a0<@cjd\\_>\u00a044M./wysiwyg/xwe  \n14:54\u00a0<@cjd\\_>\u00a02.1M./wysiwyg/tinymce  \n14:57\u00a0<@cjd\\_>\u00a0that 44MB zips down to 13MB in the xwiki.zip  \n15:04\u00a0<+Denis>\u00a0sburjan: have you started testing ?  \n15:05\u00a0<+sburjan>\u00a0I wasstarting now  \n15:07\u00a0<+Denis>\u00a0great, I am not behind my computer full time, but I try to stay tuned, in case you need  \n15:07\u00a0<+sburjan>\u00a0okay. I will start with MySQL, Oracle and then Postgres. If I get any stacktraces, I will pastebin them to you  \n15:14\u00a0<polx>\u00a0has quit  \n15:20\u00a0<vmassol>\u00a0has quit  \n15:23\u00a0<+sburjan>\u00a0Denis: stacktrace on MySQL : http://pastebin.com/DdaYMcY3  \n15:31\u00a0<abusenius>\u00a0has joined #xwiki  \n15:32\u00a0<+sburjan>\u00a0I think it's my mistake actually  \n15:37\u00a0<vmassol>\u00a0has joined #xwiki  \n15:48\u00a0<+sburjan>\u00a0Denis, vmassol, sdumitriu : migration works well, no stacktrace even after importing 4.0-SNAP XAR  \n15:49\u00a0<+sburjan>\u00a0bad news is that we have a blocker in the annotations which I am still investigating before reporting  \n16:00\u00a0<+sburjan>\u00a0Enygma`: http://jira.xwiki.org/browse/XWIKI-7744  \n16:22\u00a0<vmassol>\u00a0has quit  \n16:27\u00a0<+Enygma`>\u00a0sburjan: but the annotation is added properly, right?  \n16:27\u00a0<+sburjan>\u00a0in this case yes  \n16:27\u00a0<+sburjan>\u00a0but when performing a migration, no.. I am reporting the blocker now  \n16:28\u00a0<+sburjan>\u00a0this is actually a double blocker  \n16:34\u00a0<+sburjan>\u00a0Enygma`: http://jira.xwiki.org/browse/XWIKI-7745  \n16:50\u00a0<+Enygma`>\u00a0sburjan: regarding 7745, did you do a proper migration of the default XAR from 2.7.2 to 4.0-SNAPSHOT?  \n16:50\u00a0<+Enygma`>\u00a0there are pages in the Annotations Application that have been changed since 2.7.2  \n16:51\u00a0<+Enygma`>\u00a0\\* gracefully shutdown the 2.7.2 instance  \n16:51\u00a0<+Enygma`>\u00a0\\* download latest 4.0 jerry+hsqldb  \n16:51\u00a0<+Enygma`>\u00a0\\* copy the database directory content from 2.7.2 and overwrite it over the 4.0 database directory  \n16:51\u00a0<+Enygma`>\u00a0\\* start the 4.0 snapshot  \n16:51\u00a0<+Enygma`>\u00a0this does not suggest that you have merged the current database with the new default xar of 4.0-SNAPSHOT  \n16:52\u00a0<+Enygma`>\u00a0so your problem of new annotations not being displayed right might come from there  \n16:52\u00a0<+sburjan>\u00a0I forgot to menion on the issue that I've also imported the 4.0-SNAPSHOT xar  \n16:53\u00a0<+Enygma`>\u00a0please update the steps so I can try to reproduce it locally  \n16:53\u00a0<+sburjan>\u00a0Enygma`: done. can you check the steps to see if I have forgot something ?  \n16:53\u00a0<+Enygma`>\u00a0ok, looking into it  \n16:54\u00a0<+sburjan>\u00a0check now, I have made a small modification  \n17:24\u00a0<+Enygma`>\u00a0sburjan: reproduced locally. Working on it to see what caused it. Thanks for the report :)  \n17:24\u00a0<+sburjan>\u00a0my duty :) hope it will be an easy fix  \n17:25\u00a0<+sburjan>\u00a0bbl  \n17:25\u00a0<sburjan>\u00a0has quit  \n17:27\u00a0<+tmortagne>\u00a0guys I get something weird on myxwiki.org (3.5)  \n17:27\u00a0<+tmortagne>\u00a0http://tuska.myxwiki.org/xwiki/bin/view/Test/Plus%2Bplus  \n17:28\u00a0<+tmortagne>\u00a0should lead to the page \"Plus+plus\" since %2B is the code for + AFAIK  \n17:28\u00a0<+tmortagne>\u00a0but it actually leas to \"Plus plus\" page  \n17:28\u00a0<+tmortagne>\u00a0looks like we have a double unescape somewhere  \n17:29\u00a0<+tmortagne>\u00a0the URL is correct in the link [[Plus+plus]]  \n17:31\u00a0<+tmortagne>\u00a0hmm it's not a general double unescape since http://tuska.myxwiki.org/xwiki/bin/view/Test/Plus%252Bplus work well (lead to \"Plus%2Bplus\" page) so it's specific to + sign  \n17:32\u00a0<+tmortagne>\u00a0can anyone reproduce this ?  \n17:32\u00a0<+tmortagne>\u00a0sounds pretty blocker to me since it mean it's impossible to access a page with + in its name  \n17:36\u00a0<polx>\u00a0has joined #xwiki  \n17:36\u00a0<+Enygma`>\u00a0tmortagne: AFAIR, lucaa had some problems on a project where there were 2 spaces (or pages) with the same name (one with + and one with \" \")  \n17:37\u00a0<+Enygma`>\u00a0might be related  \n17:37\u00a0<+tmortagne>\u00a0what made me check this is the mail from Martin Evans on the users mailing list  \n17:37\u00a0<@sdumitriu>\u00a0tmortagne: I replied about this yesterday to a mail on users, IIRC  \n17:37\u00a0<@sdumitriu>\u00a0It should work on Jetty  \n17:38\u00a0<+tmortagne>\u00a0sdumitriu: it's a tomcat thing like with / ?  \n17:38\u00a0<+tmortagne>\u00a0I did not seen your answer in the mailing list  \n17:38\u00a0<@sdumitriu>\u00a0tmortagne: Ah, right, I didn't send it  \n17:39\u00a0<@sdumitriu>\u00a0It's still open  \n17:39\u00a0<@sdumitriu>\u00a0I was going to write a velocity script for deleting the document manually  \n17:41\u00a0<+tmortagne>\u00a0seems to work well on jetty indeed  \n17:41\u00a0<+tmortagne>\u00a0another \"security\" genius idea from tomcat ?  \n17:41\u00a0<@sdumitriu>\u00a0Maybe  \n17:44\u00a0<CIA-160>\u00a0Jean-Vincent Drean\u000f master\u000f \\* rb084601\u000f https://github.com/xwiki/xwiki-platform/commit/b08460182409e72afd17cec091b3b9cd040a976f \u000f/ (4 files in 4 dirs):\u000f XWIKI-7746 : Allow short form HQL queries to be executed in the QueryManager - http://git.io/pxBfXg  \n17:48\u00a0<@sdumitriu>\u00a0tmortagne: Sent my reply  \n17:48\u00a0<+tmortagne>\u00a0ok  \n17:48\u00a0<@sdumitriu>\u00a0I didn't investigate it, though  \n17:48\u00a0<@sdumitriu>\u00a0I don't know where this double decoding occurs  \n17:50\u00a0<abusenius>\u00a0has quit  \n17:53\u00a0<jvdrean>\u00a0has quit  \n17:59\u00a0<jfx>\u00a0has joined #xwiki  \n18:05\u00a0<gdelhumeau>\u00a0has quit  \n18:07\u00a0<vmassol>\u00a0has joined #xwiki  \n18:10\u00a0<Jamie>\u00a0has joined #xwiki  \n18:10\u00a0<Jamie>\u00a0is now known as <Guest60139>  \n18:11\u00a0<Guest60139>\u00a0is now known as <Jamie\\_\\_\\_>  \n18:11\u00a0<Jamie\\_\\_\\_>\u00a0is now known as <Jamie\\_\\_wiki>  \n18:14\u00a0<Jamie\\_\\_wiki>\u00a0hello, just recently have been integrating the previous 3.5 enterprise release as an internal wiki using Tomcat 7 to host it.  \n18:21\u00a0<lucaa>\u00a0has quit  \n18:21\u00a0<polx>\u00a0has quit  \n18:22\u00a0<Jamie\\_\\_wiki>\u00a0I noticed that when using the {{photoalbum/}} macro there are a large number of temp files that get created in the java.io.tmpdir. \u00a0\u00a0\u00a0So I posted a question and some code that I am using to get around the problem to the mailing list..  \n18:22\u00a0<Jamie\\_\\_wiki>\u00a0I didn't seem to get any responses, although I suppose everyone's getting ready polishing off the 4.0 release.  \n18:24\u00a0<@cjd\\_>\u00a0Ahh, you're referring to attachment temp files?  \n18:25\u00a0<CIA-160>\u00a0Marius Dumitru Florea\u000f master\u000f \\* rfb70ec7\u000f https://github.com/xwiki/xwiki-platform/commit/fb70ec725a02baa056115f6cf3e6cc93512ba115 \u000f/ xwiki-platform-core/xwiki-platform-web/src/main/webapp/resources/uicomponents/widgets/fullScreen.js :\u000f XWIKI-7743: Wrong editor width when returning from full screen edit after editing/adding a macro - http://git.io/UCk2IQ  \n18:26\u00a0<CIA-160>\u00a0Marius Dumitru Florea\u000f master\u000f \\* re180443\u000f https://github.com/xwiki/xwiki-enterprise/commit/e18044378edc4fc369ef49ab70bc9671235b3187 \u000f/ xwiki-enterprise-test/xwiki-enterprise-test-wysiwyg/src/test/it/org/xwiki/test/wysiwyg/MacroTest.java :\u000f XWIKI-7743: Wrong editor width when returning from full screen edit after editing/adding a macro ...  \n18:26\u00a0<Jamie\\_\\_wiki>\u00a0cjd: yes, it keeps creating new temporary files for attachments (in this case attachment download with width parameter set. eg width=300 )  \n18:27\u00a0<@cjd\\_>\u00a0ok, that's image scaling  \n18:27\u00a0<@cjd\\_>\u00a0attachment temp files are \\*supposed\\* to be cleared when the jvm exits.  \n18:27\u00a0<Jamie\\_\\_wiki>\u00a0cjd: the image scaling, yes..  \n18:27\u00a0<@cjd\\_>\u00a0That is defeated when it crashes, something I mean to look at.  \n18:28\u00a0<@cjd\\_>\u00a0Would you mind reporting the image scailing issue to the jira tracker?  \n18:28\u00a0<Jamie\\_\\_wiki>\u00a0cjd: if you're running a wiki that's supposed to be long lived (eg not rebooted for a long time) isn't that a bit of a problem?  \n18:28\u00a0<@cjd\\_>\u00a0for long lived wikis, the attachment temp files are 1 per attachment.  \n18:29\u00a0<@cjd\\_>\u00a0The image scailing temp files are a bounded number because it's an LRU cache.  \n18:29\u00a0<@cjd\\_>\u00a0At least that is what I understand.  \n18:29\u00a0<Jamie\\_\\_wiki>\u00a0cjd: sure will do.. \u00a0as I checked the code in 4.0 and it seems to be the same?  \n18:29\u00a0<Jamie\\_\\_wiki>\u00a0cjd: when I was debugging it and stepping through the code, it cached the original attachment file, but NOT the actual scaled version, causing the scaled version to be re-created every request.  \n18:30\u00a0<@cjd\\_>\u00a0ouch, that is definitely bad in a number of ways  \n18:30\u00a0<@cjd\\_>\u00a0please report that and tell me the link, I would like to look at that issue asap  \n18:31\u00a0<Jamie\\_\\_wiki>\u00a0It would be good to cache the scaled version as well, definately to limit the problem but also good to delete the temporary files when they're no longer needed. Not just at JVM shutdown.. \u00a0should I just roll those issues into one or just two separate ones?  \n18:32\u00a0<@cjd\\_>\u00a0the \"not deleting on crash\" issue is seperate because it's entirely seperate code which handles attachments vs. img scailing  \n18:37\u00a0<Jamie\\_\\_wiki>\u00a0cjd: Also for some reason on windows, if you shutdown Tomcat 7 via the service helper application the temporary files are not cleaned up either.  \n18:38\u00a0<vmassol>\u00a0has quit  \n18:39\u00a0<@cjd\\_>\u00a0Well, the more general purpose solution is to mark these files \"delete-me\" or the like and then remove them on startup.  \n18:41\u00a0<tmortagne>\u00a0has quit  \n18:46\u00a0<Jamie\\_\\_wiki>\u00a0cjd: Would it make sense to create an xwiki-temp subdirectory under the java.io.tmpdir and then just clear that out on re-start?  \n18:46\u00a0<@cjd\\_>\u00a0yes, that would be an approach.  \n18:50\u00a0<Jamie\\_\\_wiki>\u00a0Ok, I just created http://jira.xwiki.org/browse/XWIKI-7748  \n18:50\u00a0<@cjd\\_>\u00a0thanks  \n18:52\u00a0<Jamie\\_\\_wiki>\u00a0Hey one thing I was wondering, I created a component that implements ..phase.Dispose but it doesn't seem to be called on shutdown by XWiki. \u00a0Is there an interface that will let my component clean up it's resources on shutdown? (eg. not just un-register)  \n18:53\u00a0<@cjd\\_>\u00a0I'm not sure, maybe someone else here knows?  \n19:03\u00a0<@sdumitriu>\u00a0I don't think so, maybe we should add support for unregistering all components at shutdown  \n19:04\u00a0<@sdumitriu>\u00a0Hm...  \n19:04\u00a0<@sdumitriu>\u00a0Do we have an shutdown observable event?  \n19:04\u00a0<@sdumitriu>\u00a0I know we have several \"started/ready\" events  \n19:05\u00a0<@sdumitriu>\u00a0Yep, there's org.xwiki.observation.event.ApplicationStoppedEvent  \n19:06\u00a0<@sdumitriu>\u00a0So Jamie\\_\\_wiki, you could make your class implement EventListener, listen to the ApplicationStopeedEvent, and this will be called when the server is shutting down  \n19:06\u00a0<@sdumitriu>\u00a0Would that work for you?  \n19:16\u00a0<mflorea>\u00a0has quit  \n19:38\u00a0<Jamie\\_\\_wiki>\u00a0has quit  \n19:38\u00a0<jamie\\_\\_wiki>\u00a0has joined #xwiki  \n19:38\u00a0<jamie\\_\\_wiki>\u00a0sdumitriu: Hi there, that should work.. \u00a0however, is the Dispose interface meant to just cleanup any resources as if it's been un-installed or just to cleanup in general? \u00a0If that's the case then shouldn't it just call the dispose() on shutdown?  \n19:40\u00a0<@sdumitriu>\u00a0jamie\\_\\_wiki: It should, but I guess nobody implemented that yet  \n19:41\u00a0<jamie\\_\\_wiki>\u00a0The phase.Initializable interface works great, it would make sense to implement the other one on shutdown.. \u00a0maybe I'll open a JIRA for that.  \n19:47\u00a0<@sdumitriu>\u00a0Yes, please do  \n20:07\u00a0<evalica>\u00a0has quit  \n20:12\u00a0<+Denis>\u00a0jamie\\_\\_wiki, sdumitriu: currently the dispose is called when a comment is unregistered, but I doubt that we unregister all components on shutdown, do you mean that you d'like to have that ?  \n20:13\u00a0<@sdumitriu>\u00a0Exactly  \n20:20\u00a0<+Denis>\u00a0not necessarily easy, we may have some issue with inter-dependencies between components, but I agree that it makes sense. Initially, the dispose was only a way to allow extension to be uninstalled properly, no more\u2026 I wonder if other component manager implementation do so ?  \n20:27\u00a0<vmassol>\u00a0has joined #xwiki  \n20:33\u00a0<jamie\\_\\_wiki>\u00a0Denis: Not neccessarily un-registering components, but just allowing the components to cleanup any resources on shutdown.  \n20:45\u00a0<rrodriguez>\u00a0has joined #xwiki  \n20:46\u00a0<jamie\\_\\_wiki>\u00a0cjd: I just registered http://jira.xwiki.org/browse/XWIKI-7749 (ImagePlugin caches image thumnail bytes, but new temporary files for each are recreated on each request)  \n20:47\u00a0<@cjd\\_>\u00a0thanks, I'll take a look.  \n20:52\u00a0<polx>\u00a0has joined #xwiki  \n21:00\u00a0<vmassol>\u00a0has quit  \n21:12\u00a0<jamie\\_\\_wiki>\u00a0cjd: One last one.. http://jira.xwiki.org/browse/XWIKI-7750 (Attachment temporary files should be deleted after they are no longer needed.)  \n21:12\u00a0<@cjd\\_>\u00a0thanks  \n21:14\u00a0<+Enygma`>\u00a0sdumitriu: Is it normal for the XAR import to generate a DocumentCreatedEvent instead of DocumentUpdatedEvent when overriding (by import) an existing page?  \n21:14\u00a0<@sdumitriu>\u00a0Depends on the settings  \n21:14\u00a0<@sdumitriu>\u00a0If it's \"append a new version\", then no  \n21:15\u00a0<+Enygma`>\u00a0sdumitriu: wdyt if I add something like \"originalDocument.setNew(doc.isNew())\" to https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/XWiki.java#L1373 ?  \n21:16\u00a0<+Enygma`>\u00a0since the doc is created from XML by the ImporterPlugin and originalDocument is null. This could apply for other cases when the doc is created outside the API.  \n21:19\u00a0<@sdumitriu>\u00a0Not very convinced...  \n21:19\u00a0<@sdumitriu>\u00a0Would it actually help?  \n21:20\u00a0<@sdumitriu>\u00a0Isn't the doc.isNew() going to return true anyway during an import?  \n21:20\u00a0<+Enygma`>\u00a0otherwise, all \"synthetic\" documents will be new and would trigger DocumentCreating(ed)Event instead of DocumentUpdating(ed)Event  \n21:23\u00a0<jamie\\_\\_wiki>\u00a0cjd: Sorry, I lied, one last one http://jira.xwiki.org/browse/XCOMMONS-151 (Call dispose() on Componets before XWiki shutdown to cleanup resources)  \n21:23\u00a0<jamie\\_\\_wiki>\u00a0Hope that was created in the right place..  \n21:24\u00a0<@cjd\\_>\u00a0if not then it can be moved  \n21:24\u00a0<jfx>\u00a0Thanks for the reply sdumitriu (I sent the mail about problem with {{formula}} to the users list.)  \n21:25\u00a0<polx>\u00a0has quit  \n21:25\u00a0<polx>\u00a0has joined #xwiki  \n21:26\u00a0<jfx>\u00a0Btw, not using the --interaction flag make latex error out with paper height over 226in. But I'm not too worried about that.  \n21:28\u00a0<polx\\_>\u00a0has joined #xwiki  \n21:28\u00a0<polx>\u00a0has quit  \n21:28\u00a0<polx\\_>\u00a0has quit  \n21:28\u00a0<+Enygma`>\u00a0sdumitriu: guess you`re right  \n21:28\u00a0<polx>\u00a0has joined #xwiki  \n21:29\u00a0<+Enygma`>\u00a0sdumitriu: originalDocument.setNew(exists(doc.getDocumentReference(), context)); ? :)  \n21:30\u00a0<+Enygma`>\u00a0too much? :)  \n21:30\u00a0<@sdumitriu>\u00a0jfx: Right, I got the same, it's needed to let larger formulas fit in one page, since otherwise the conversion from ps to png would fail (more than one page)  \n21:31\u00a0<@sdumitriu>\u00a0Enygma`: I'd say a bit too much, but you can start a discussion on devs  \n21:31\u00a0<@sdumitriu>\u00a0Enygma`: Anyway, the XAR import should just generate one large \"imported XAR\" event, and the other document events should just be ignored in the ActivityStream  \n21:32\u00a0<+Enygma`>\u00a0yes, but the core listeners should still be aware  \n21:32\u00a0<@sdumitriu>\u00a0But now it depends on whether you think that the actual events matter, since a listener might be tricked into the wrong behavior if it gets the wrong event  \n21:32\u00a0<+Enygma`>\u00a0exactly  \n21:33\u00a0<@sdumitriu>\u00a0jfx: I'd rather not add -trim to the default process, since it will cause wrong alignment  \n21:33\u00a0<@sdumitriu>\u00a0The -E parameter lets a nice padding around the formula, and the baseline is correct  \n21:34\u00a0<@sdumitriu>\u00a0With -trim we'd get an image that has a different baseline depending on whether there are any descents and ascents in the text  \n21:39\u00a0<faryshta>\u00a0has quit  \n21:54\u00a0<faryshta>\u00a0has joined #xwiki  \n22:33\u00a0<CIA-160>\u00a0Eduard Moraru\u000f master\u000f \\* rc04d1f5\u000f https://github.com/xwiki/xwiki-platform/commit/c04d1f507ebceee4987a484356e6ce4864680e5c \u000f/ xwiki-platform-core/xwiki-platform-annotations/xwiki-platform-annotation-io/src/main/java/org/xwiki/annotation/io/internal/DefaultIOService.java :\u000f XWIKI-7744: Stacktrace when adding an annotation - http://git.io/RCpoZw  \n22:33\u00a0<CIA-160>\u00a0Eduard Moraru\u000f master\u000f \\* r3237358\u000f https://github.com/xwiki/xwiki-platform/commit/32373581cbade5c3fda7c78bf2310e0bb0ec7b8d \u000f/ xwiki-platform-core/xwiki-platform-annotations/xwiki-platform-annotation-io/src/main/java/org/xwiki/annotation/internal/CheckAnnotationClassEventListener.java :\u000f XWIKI-7747: Right after an migration to 4.0, the current Annotations class is not updated and new annotations are not created properly - http://git.io/5jauGA  \n22:33\u00a0<CIA-160>\u00a0Eduard Moraru\u000f master\u000f \\* rfadd018\u000f https://github.com/xwiki/xwiki-platform/commit/fadd018bb37ccd5ebe9945a7dff626f84fa9ca68 \u000f/ xwiki-platform-core/xwiki-platform-annotations/xwiki-platform-annotation-io/src/main/java/org/xwiki/annotation/io/internal/migration/hibernate/R40001XWIKI7540DataMigration.java :\u000f XWIKI-7745: Migration of Annotations and Comments to 4.0 breaks page consistency - http://git.io/3F5-kQ  \n23:06\u00a0<rulereric2>\u00a0has quit  \n23:15\u00a0<Enygma`>\u00a0has quit  \n23:15\u00a0<jfx>\u00a0sdumitriu: Good to know. I'll try look for a way to prevent it from building an oversize image in the first place.  \n23:21\u00a0<jfx>\u00a0I'll take it to fedora. :)  \n\n"}