{"id": "dev:IRC.xwikiArchive20130326", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130326", "title": "IRC Archive for channel #xwiki on 26 March 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<xwikibot>\u00a0has joined #xwiki  \n08:12\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:12\u00a0<vmassol>\u00a0!search test  \n08:13\u00a0<vmassol>\u00a0XWIKI-1000  \n08:13\u00a0<vmassol>\u00a0welcome back Bot! :)  \n08:33\u00a0<Denis2>\u00a0is now known as <Denis>  \n08:36\u00a0<huhongbo>\u00a0has quit  \n08:47\u00a0<evalica>\u00a0has joined #xwiki  \n09:44\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:04\u00a0<SvenDowideit\\_>\u00a0has joined #xwiki  \n10:06\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:06\u00a0<SvenDowideit>\u00a0has quit  \n11:00\u00a0<tmortagne>\u00a0mflorea: I don't understand why you say \"the side effect is that xwiki-enterprise-ui will not appear as installed any more\", this file is just log  \n11:00\u00a0<mflorea>\u00a0tmortagne: no, it's the index  \n11:00\u00a0<tmortagne>\u00a0no it's not  \n11:00\u00a0<tmortagne>\u00a0jobs/status is statuis  \n11:00\u00a0<tmortagne>\u00a0status  \n11:01\u00a0<tmortagne>\u00a0the extensions index is in extension/repository  \n11:01\u00a0<mflorea>\u00a0hmm  \n11:01\u00a0<tmortagne>\u00a0if the UI tells you that the extensio is not installed when you remove its associated log there is a serious bug  \n11:05\u00a0<tmortagne>\u00a0also most extensions don't have any associated log, it's only linked to the top extensions, i.e. the extensions explicitly asked to install  \n11:05\u00a0<sburjan>\u00a0has joined #xwiki  \n11:07\u00a0<mflorea>\u00a0yes, but I don't know why I had this impression, I don't remember touching the extension index on xwiki.org and still enterprise-ui-all didn't appear in the list of installed extensions afterwards  \n11:07\u00a0<mflorea>\u00a0ah  \n11:07\u00a0<mflorea>\u00a0I know  \n11:08\u00a0<mflorea>\u00a0because I removed enterprise-ui-all from local repo  \n11:09\u00a0<mflorea>\u00a0I forgot about this  \n11:30\u00a0<Slashman>\u00a0has joined #xwiki  \n12:46\u00a0<msmeria>\u00a0hi. I got this error \"2013-03-26 13:44:09,985 [http://192.168.0.40:8080/xwiki/bin/view/Main/WebHome] ERROR o.x.v.i.DefaultVelocityEngine \u00a0- Left side ($events.size()) of '>' operation has null value at unknown namespace[line 820, column 22]\" when upgrading a XEM from 4.5.2 to 5.0-Snapshot on Oracle  \n13:02\u00a0<vmassol>\u00a0msmeria: could you report it in jira please? We need to fix some velocity to prevent that  \n13:03\u00a0<vmassol>\u00a0(trivial severity)  \n13:05\u00a0<evalica>\u00a0has quit  \n13:24\u00a0<mflorea>\u00a0has quit  \n13:41\u00a0<sburjan>\u00a02013-03-26 14:39:25,242 [localhost-startStop-1] ERROR ltInstalledExtensionRepository - Invalid extension [org.xwiki.enterprise:xwiki-enterprise-ui-4.5.2] on namespace [], it will not be loaded  \n13:41\u00a0<sburjan>\u00a0org.xwiki.extension.InvalidExtensionException: Extension [org.xwiki.enterprise:xwiki-enterprise-ui-4.5.2] is incompatible with the core extension [org.xwiki.platform:xwiki-platform-legacy-oldcore-5.0-SNAPSHOT]  \n13:41\u00a0<sburjan>\u00a0when migrating from 4.5.2 to 5.0-SNAP  \n13:42\u00a0<sburjan>\u00a0is this known ?  \n13:42\u00a0<sburjan>\u00a0and DW does not kick in  \n13:43\u00a0<sburjan>\u00a0sdumitriu: \u00a0ping  \n13:43\u00a0<sdumitriu>\u00a0Pong  \n13:44\u00a0<sburjan>\u00a0sdumitriu: I am testing, or at least trying to test your migrator. From 4.5.2 to 5.0-SNAP. Odd thing is that I get nothing in the console the migrator running. Is this normal ?  \n13:44\u00a0<sburjan>\u00a0All I get is:  \n13:44\u00a0<sburjan>\u00a02013-03-26 14:42:21,024 [http://localhost:8080/xwiki/bin/view/Main/WebHome] INFO \u00a0.HibernateDataMigrationManager - No data migration to apply for database [xwiki] currently in version [50000]  \n13:44\u00a0<sdumitriu>\u00a0Yes  \n13:45\u00a0<sdumitriu>\u00a0Well, WDYM?  \n13:45\u00a0<msmeria>\u00a0vmassol: I'll report it now  \n13:45\u00a0<vmassol>\u00a0thanks  \n13:45\u00a0<sdumitriu>\u00a0Doesn't it say that the migrator will be and has been executed?  \n13:45\u00a0<sburjan>\u00a0usually I was getting something with Liquidbase, or running migrator 6690, etc  \n13:45\u00a0<sdumitriu>\u00a0It's normal not to print any logs on its own  \n13:46\u00a0<sdumitriu>\u00a0\"Running migrator\" should be printed  \n13:46\u00a0<vmassol>\u00a0it should say that the migration is running  \n13:46\u00a0<vmassol>\u00a0\\*migrator  \n13:46\u00a0<vmassol>\u00a0and explain what migration is executed  \n13:46\u00a0<sburjan>\u00a0let me pastebin  \n13:46\u00a0<sdumitriu>\u00a0sburjan: Make sure the build has that class  \n13:47\u00a0<sdumitriu>\u00a0com/xpn/xwiki/store/migration/hibernate/R50000XWIKI8948DataMigration.java  \n13:47\u00a0<sdumitriu>\u00a0com/xpn/xwiki/store/migration/hibernate/R50000XWIKI8948DataMigration.class  \n13:47\u00a0<sburjan>\u00a0sdumitriu: thanks, checking  \n13:48\u00a0<sdumitriu>\u00a0Ah, wait  \n13:48\u00a0<sdumitriu>\u00a0I forgot to add it in components.txt  \n13:48\u00a0<Denis>\u00a0:)  \n13:48\u00a0<sburjan>\u00a0:)  \n13:48\u00a0<tmortagne>\u00a0sburjan: org.xwiki.enterprise:xwiki-enterprise-ui-4.5.2 is incompatible with org.xwiki.platform:xwiki-platform-legacy-oldcore-5.0-SNAPSHOT, that's a fact ;)  \n13:48\u00a0<sdumitriu>\u00a0Nope, it is there...  \n13:49\u00a0<sdumitriu>\u00a0So that's not it  \n13:49\u00a0<sburjan>\u00a0in which jar should I look ? oldcore ?  \n13:49\u00a0<tmortagne>\u00a0that's why allow EM to know that org.xwiki.enterprise:xwiki-enterprise-ui-4.5.2 is not valid anymore and would be nice to upgrade it  \n13:49\u00a0<tmortagne>\u00a0so yes this log is perfectly normal  \n13:49\u00a0<sdumitriu>\u00a0sburjan: legacy-oldcore  \n13:49\u00a0<sburjan>\u00a0tmortagne: I understand. thanks,  \n13:50\u00a0<tmortagne>\u00a0sburjan: we are cheating and there is s strict dependency on oldcore of the exact same version in xwiki-enterprise-ui specifically to get this reaction  \n13:51\u00a0<sburjan>\u00a0sdumitriu: I have a R50000XWIKI8948DataMigration$R50000Work.class  \n13:51\u00a0<tmortagne>\u00a0no on the question (that you did not asked) is logging an \"ERROR\" is the best I'm not sure  \n13:52\u00a0<sburjan>\u00a0ok, so you specifically put that \"cheat\" in order to force the user to upgrade to latest XAR ?  \n13:52\u00a0<sdumitriu>\u00a0sburjan: pastebin what happens when starting 5.0  \n13:52\u00a0<sburjan>\u00a0sdumitriu: http://pastebin.com/8CWGMcbH  \n13:52\u00a0<sdumitriu>\u00a0sburjan: \u00a02013-03-26 14:42:21,024 [http://localhost:8080/xwiki/bin/view/Main/WebHome] INFO \u00a0.HibernateDataMigrationManager - No data migration to apply for database [xwiki] currently in version [50000]  \n13:52\u00a0<sdumitriu>\u00a0So it's already at version 50000  \n13:52\u00a0<sdumitriu>\u00a0Why?  \n13:53\u00a0<sdumitriu>\u00a0Did you already start it before?  \n13:53\u00a0<sburjan>\u00a0hmmmm don't remember  \n13:53\u00a0<sburjan>\u00a0re-doing the test  \n13:56\u00a0<jbwiv>\u00a0has left #xwiki  \n13:57\u00a0<tmortagne>\u00a0sburjan: it's to make sure it's clear that it's a lot safer to synch the XE UI version with platform version  \n14:02\u00a0<vmassol>\u00a0guys don't know if you've seen  \n14:02\u00a0<vmassol>\u00a0but I've modified the jenkins emails  \n14:03\u00a0<vmassol>\u00a0I've added the list of modification since the previous successful build  \n14:14\u00a0<Denis>\u00a0nice  \n14:15\u00a0<Denis>\u00a0vmassol: I am struggling on the way to use mockito, could you help ?  \n14:15\u00a0<sburjan>\u00a0sdumitriu: Ok, I tested on MySQL and Manuel tested on Oracle. This does not seem to be related to the migrator, but here is the stacktrace: http://pastebin.com/tVshdgs3 This might be related to Rights, so Denis could also have a look  \n14:18\u00a0<vmassol>\u00a0Denis: shoot but I have little time ATM. Also, I don't know mockito that well yet...  \n14:19\u00a0<Denis>\u00a0vmassol: this is related to mocking component, I do not know the right way to use what you have put in place  \n14:19\u00a0<Denis>\u00a0vmassol: I want to make a test that use the whole security API while mocking the bridge  \n14:20\u00a0<vmassol>\u00a0Denis: so you want to write integration tests right?  \n14:20\u00a0<vmassol>\u00a0(rather than unit tests)  \n14:21\u00a0<vmassol>\u00a0ie not use MockitoComponentMockingRule  \n14:21\u00a0<Denis>\u00a0vmassol: integretion for the security api, unit compare to the rest  \n14:21\u00a0<vmassol>\u00a0so you want to use MockitoComponentManagerRule  \n14:21\u00a0<Denis>\u00a0I may, yes  \n14:22\u00a0<Denis>\u00a0what I need is to mock everything not in the security api  \n14:22\u00a0<vmassol>\u00a0you can do some searches about tests using it  \n14:22\u00a0<vmassol>\u00a0for example  \n14:22\u00a0<vmassol>\u00a0DefaultExtensionManagerConfigurationTest  \n14:22\u00a0<Denis>\u00a0except maybe some trivials like reference and resolver  \n14:22\u00a0<vmassol>\u00a0for all you want to mock you'll need to use:  \n14:22\u00a0<vmassol>\u00a0MockitoComponentManagerRule.registerMockComponent  \n14:23\u00a0<vmassol>\u00a0and then play with @ComponentList for what you don't want to mock  \n14:24\u00a0<vmassol>\u00a0s/play/use  \n14:27\u00a0<Denis>\u00a0vmassol: ok, I wasn't sure what were the proper example, I think I get the idea now  \n14:28\u00a0<vmassol>\u00a0by default your run without any component registered  \n14:28\u00a0<vmassol>\u00a0then you have 2 choices:  \n14:28\u00a0<vmassol>\u00a01) use the real impl by using @ComponentList and listing that component impl  \n14:28\u00a0<vmassol>\u00a02) use a mock by calling registerMockComponent  \n14:28\u00a0<vmassol>\u00a0(Denis)  \n14:29\u00a0<vmassol>\u00a0(or 3) but not recommended, register all components using @AllComponents and overwrite using registerMockComponent for those you wish to mock)  \n14:29\u00a0<Denis>\u00a0vmassol: yep, but I was initially trying to work with MockitoComponentMockingRule and exception  \n14:29\u00a0<vmassol>\u00a0MockitoComponentMockingRule is for unit tesitng  \n14:29\u00a0<vmassol>\u00a0not integration tests  \n14:30\u00a0<vmassol>\u00a0(which is why I asked)  \n14:31\u00a0<Denis>\u00a0vmassol: would be nice (to promote Mockito) to have some sample on xwiki.org  \n14:31\u00a0<Denis>\u00a0(I know, it is a matter of time)  \n14:32\u00a0<vmassol>\u00a0we do have examples  \n14:32\u00a0<vmassol>\u00a0let me check  \n14:33\u00a0<vmassol>\u00a0(maybe I started and did not finish, checking)  \n14:33\u00a0<vmassol>\u00a0yep I did update http://dev.xwiki.org/xwiki/bin/view/Community/Testing  \n14:33\u00a0<vmassol>\u00a0what's missing?  \n14:33\u00a0<vmassol>\u00a0I event explained what I've told you  \n14:33\u00a0<vmassol>\u00a0re unit vs integration  \n14:35\u00a0<Denis>\u00a0vmassol: oh, is that new, I though I read it not so far ago, and it wasn't there  \n14:35\u00a0<vmassol>\u00a0not new  \n14:35\u00a0<vmassol>\u00a0I added it when I introduced mockito  \n14:35\u00a0<vmassol>\u00a0that's how I could close the issue !! :)  \n14:35\u00a0<Denis>\u00a0I am getting old then  \n14:35\u00a0<vmassol>\u00a0otehrwise you're not allowed to release  \n14:36\u00a0<vmassol>\u00a0:)  \n14:36\u00a0<Denis>\u00a0Thanks anyway...  \n14:37\u00a0<mflorea>\u00a0has joined #xwiki  \n14:37\u00a0<Denis>\u00a0vmassol: what is LogRule ?  \n14:38\u00a0<vmassol>\u00a0Denis: http://pastebin.com/zfDpbyqe  \n14:40\u00a0<Denis>\u00a0vmassol: should'nt it be used anytime then ?  \n14:40\u00a0<sburjan>\u00a0guys, can someone answer my question from above ?  \n14:41\u00a0<tmortagne>\u00a0sburjan: about watchlist error on http://pastebin.com/tVshdgs3 it's actually related to changes on document authors references and guest  \n14:41\u00a0<tmortagne>\u00a0I'm currently loking at it  \n14:42\u00a0<tmortagne>\u00a0sburjan: note that it means you saved some document with guest to get this error  \n14:42\u00a0<tmortagne>\u00a0is thi expected ?  \n14:43\u00a0<tmortagne>\u00a0if not then there is several bugs I guess  \n14:43\u00a0<sburjan>\u00a0tmortagne: I did not do anything out of the usual  \n14:44\u00a0<sburjan>\u00a0so there must be more bugs then  \n14:44\u00a0<tmortagne>\u00a0actually it maybe be some java code generating the class and not putting any author  \n14:44\u00a0<vmassol>\u00a0Denis: the rule is that tests should not log anything to the console  \n14:45\u00a0<vmassol>\u00a0ideally tests should assert what is logged too, true  \n14:45\u00a0<tmortagne>\u00a0Edy added generation of this class in 5.0 AFAIK  \n14:45\u00a0<tmortagne>\u00a0will check both issues  \n14:46\u00a0<tmortagne>\u00a0sburjan: you can probably reproduce the same error with empty database  \n14:46\u00a0<Denis>\u00a0vmassol: why not alway setting up the LogRule and providing an optional way to access the log once a MockitoComponentManagerRule is involved ?  \n14:46\u00a0<tmortagne>\u00a0nothing to do with upgrade IMO  \n14:46\u00a0<vmassol>\u00a0Denis: we could  \n14:46\u00a0<Denis>\u00a0vmassol: this would ensure half of the rule  \n14:47\u00a0<vmassol>\u00a0yes but  \n14:47\u00a0<vmassol>\u00a0the problem is that if you hide what is logged  \n14:47\u00a0<vmassol>\u00a0like exceptions  \n14:47\u00a0<vmassol>\u00a0they won't be seen and won't be fixed  \n14:47\u00a0<tmortagne>\u00a0could fail if any exception is found unless it's specifically indicated as expected  \n14:48\u00a0<vmassol>\u00a0it's not just exceptions  \n14:48\u00a0<tmortagne>\u00a0same for WARN et eRROR  \n14:48\u00a0<tmortagne>\u00a0ERROR  \n14:48\u00a0<vmassol>\u00a0sometimes the tests is not setting us it's initial conditions properly  \n14:48\u00a0<vmassol>\u00a0and thus you have warnings in the logs  \n14:48\u00a0<vmassol>\u00a0sometimes it's voluntarily and sometimes it's not  \n14:49\u00a0<vmassol>\u00a0this is why I have prefered an explicit approach till now  \n14:49\u00a0<Denis>\u00a0this is only true during test setup  \n14:49\u00a0<vmassol>\u00a0logs happen at any time not just during test setup  \n14:50\u00a0<Denis>\u00a0once test are written, they should ensure their validity and check what should be logged  \n14:50\u00a0<vmassol>\u00a0we could decide to fail the test if there are not asserted logs  \n14:50\u00a0<vmassol>\u00a0lots of them are going to fail till they are fixed though  \n14:50\u00a0<Denis>\u00a0I exactly thinking about that  \n14:51\u00a0<Denis>\u00a0this is only new Mockito ones, no?  \n14:51\u00a0<vmassol>\u00a0no  \n14:51\u00a0<vmassol>\u00a0not related to mockito  \n14:51\u00a0<vmassol>\u00a0well  \n14:51\u00a0<vmassol>\u00a0we could decide to make this rule by default only for mockito tests  \n14:51\u00a0<Denis>\u00a0this is what I would propose  \n14:51\u00a0<vmassol>\u00a0it's a bit complex though  \n14:51\u00a0<Denis>\u00a0else of course we will have tons of failing tests  \n14:52\u00a0<vmassol>\u00a0otp  \n14:52\u00a0<Denis>\u00a0think about it :)  \n14:55\u00a0<sburjan>\u00a0we can't release M2 like this. Too many broken things  \n15:03\u00a0<Denis>\u00a0vmassol: would be also nice to have an annotation to register mocks in place of doing so in @BeforeComponent, WDYT ?  \n15:14\u00a0<sburjan>\u00a0guys, I have a serious issue on 5.0 Snap. I am creating a clean install, and DW does not kick in at all. Also, I am unable to import the manual XAR because I have \\_no\\_ dropmenu on the top bar. Maybe this is related to Rights. Denis ?  \n15:15\u00a0<sburjan>\u00a0msmeria: was able to reproduce it too  \n15:15\u00a0<Denis>\u00a0sburjan: this is expect behavior, you need to use superadmin for that  \n15:16\u00a0<sburjan>\u00a0Denis: is this somewhere documented ?  \n15:17\u00a0<sburjan>\u00a0IMHO DW should kick in ... so the new Rights introduces a new step when creating a clean install ?  \n15:19\u00a0<tmortagne>\u00a0sburjan: hmm I think it's because DW check for admin right on the current user  \n15:19\u00a0<tmortagne>\u00a0but only to start DW  \n15:19\u00a0<sburjan>\u00a0:( this overcomplicates the entire process of creating a new wiki  \n15:19\u00a0<tmortagne>\u00a0we'll need to change that for more advanced check  \n15:20\u00a0<tmortagne>\u00a0sburjan: you don't have to use superadmin to use DW, it's not the goal we just forgot to change the test  \n15:21\u00a0<tmortagne>\u00a0but you have to use superadmin to import a xar without using DW  \n15:21\u00a0<sburjan>\u00a0ok, so DW does not kick in ATM because you have to fix that, and importing the XAR manually requires me to activate the superadmin user from xwiki.cfg ? Did I understood properly ?  \n15:22\u00a0<sburjan>\u00a0tmortagne  \n15:23\u00a0<tmortagne>\u00a0yes  \n15:23\u00a0<tmortagne>\u00a0that's it  \n15:23\u00a0<sburjan>\u00a0ok  \n15:23\u00a0<Denis>\u00a0sburjan: not yet, the RN are on my todo  \n15:28\u00a0<sdumitriu>\u00a0has quit  \n15:29\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:10\u00a0<evalica>\u00a0has joined #xwiki  \n16:10\u00a0<sdumitriu1>\u00a0has quit  \n16:14\u00a0<sburjan>\u00a0tmortagne: I still get XWIKI-8939 when upgrading from 4.5.2 to 4.5.3.-SNAP. Is that normal ?  \n16:15\u00a0<tmortagne>\u00a0you get that because of XWIKI-8939, the format of the status is wrong in 4.5.2 so what is true for 4.5.1 -> 4.5.2 is also true for 4.5.2 -> 4.5.3  \n16:15\u00a0<tmortagne>\u00a0you should try to upgrade from 4.5.1 instead  \n16:15\u00a0<tmortagne>\u00a0or lower, important thing is that it's a version post DW  \n16:16\u00a0<sburjan>\u00a0ok, trying from 4.5.1  \n16:34\u00a0<msmeria>\u00a0does anyone know why I can't attach a 28Mb file to a document on 5.0-Snap ? I get \"An error occurred while uploading 03. A Perfect Circle - The Noose.flac\" . I tried attaching bigger files and it said the files should be smaller than 32Mb so I thought 28Mb should work  \n16:41\u00a0<msmeria>\u00a0tmortagne: nothing shows up in the \"Activity Stream\" section even if I made changes to documents, created new ones etc. on xwiki-enterprise-jetty-hsqldb-5.0-20130325.141702-107.zip  \n16:43\u00a0<tmortagne>\u00a0msmeria: do you get the velocity you have in XWIKI-8958 too ?  \n16:43\u00a0<tmortagne>\u00a0I guess XWIKI-8958 does not have anything to do with an upgrade and is just a bug in 5.0  \n16:44\u00a0<tmortagne>\u00a0msmeria: do you have the issue with 5.0M1 ?  \n16:44\u00a0<msmeria>\u00a0I didn't tested with 5.0M1  \n16:44\u00a0<tmortagne>\u00a0msmeria: note that you should not create jira issue for not released version usually  \n16:45\u00a0<tmortagne>\u00a0should list them somewhere  \n16:45\u00a0<tmortagne>\u00a0sburjan: how do you handle this usually ?  \n16:45\u00a0<msmeria>\u00a0sburjansaid that on 5.0M1 the activity stream works  \n16:46\u00a0<sburjan>\u00a0tmortagne: I usually report them on IRC and devs fix them. But this time, we have a lot of issues  \n16:46\u00a0<tmortagne>\u00a0yes  \n16:46\u00a0<msmeria>\u00a0I was able to reproduce XWIKI-8910 just now  \n16:46\u00a0<sburjan>\u00a0I might create a temporary page and write them down. Tomorrow I'll start re-testing the latest snapshot with msmeria and I'll write them down  \n16:47\u00a0<msmeria>\u00a0has quit  \n16:48\u00a0<tmortagne>\u00a0sburjan: I just added a section at the beginning of http://dev.xwiki.org/xwiki/bin/view/ReleasePlans/ReleasePlan50M2  \n16:48\u00a0<tmortagne>\u00a0could you pleas list here all things you have in mind  \n16:48\u00a0<tmortagne>\u00a0\"Blocker remaining issues:\"  \n16:48\u00a0<tmortagne>\u00a0(things that can't be put in jira)  \n16:50\u00a0<sburjan>\u00a0yepp  \n16:50\u00a0<sburjan>\u00a0adding some now  \n16:51\u00a0<sburjan>\u00a0tmortagne: added. But tomorrow I think I'll add more  \n16:52\u00a0<tmortagne>\u00a0sburjan: ok  \n17:12\u00a0<sburjan>\u00a0tmortagne: XWIKI-8958 \u00a0can be reproduced on MySQL also, it's not related to Oracle  \n17:13\u00a0<tmortagne>\u00a0sburjan: IMO it has nothing to do with either upgrade or database  \n17:13\u00a0<tmortagne>\u00a0it's a \"simple\" bug probably related to right change or something like this  \n17:14\u00a0<sburjan>\u00a0yes...  \n17:16\u00a0<tmortagne>\u00a0do you have it in the jetty/hsqldb distribution ?  \n17:22\u00a0<sburjan>\u00a0I didn't check. Manuel didn't have them AFAIK, but he also had a empty A. maybe they are related  \n17:23\u00a0<gdelhumeau>\u00a0has quit  \n17:51\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n17:51\u00a0<sburjan>\u00a0has quit  \n18:01\u00a0<jbwiv>\u00a0has joined #xwiki  \n18:02\u00a0<jbwiv>\u00a0guys, I'm still trying to install xwiki from the debian packages. I've gotten the db installed, but when going through the web-based installation, I get: http://pastie.org/7126775. this is in a machine with 6G ram. Is 6G too little to run xwiki? Is this expected at this level or not? Should I stick with the tarball installation instead of the \\*.deb route?  \n18:05\u00a0<vmassol>\u00a0jbwiv: 6GB is way too much, see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Installation#HPrerequisites  \n18:05\u00a0<vmassol>\u00a0your problems seems strange, I'd check if the memory params you've set are really used :)  \n18:06\u00a0<jbwiv>\u00a0vmassol: I didn't set any params...that's how much ram the box has available. I'm just trying to use the standard deb install...whatever settings the deb install process creates, that's what I'm using  \n18:06\u00a0<vmassol>\u00a0you need some memory setup  \n18:06\u00a0<vmassol>\u00a0see the link I gave you  \n18:06\u00a0<vmassol>\u00a0it doesn't matter if your box has 10000^10000 GB avail ;)  \n18:06\u00a0<vmassol>\u00a0if you don't tell the JVM to use it it won't be used  \n18:07\u00a0<vmassol>\u00a0re deb I have no clue  \n18:07\u00a0<vmassol>\u00a0does that setuop memory too?  \n18:07\u00a0<vmassol>\u00a0\\*setup  \n18:07\u00a0<jbwiv>\u00a0vmassol: ok, thanks. I'll take a look. You'd think the install would put defaults in place which would allow the app to at least install ;-)  \n18:07\u00a0<vmassol>\u00a0I mean does the deb packaging provide a start script with proper memory?  \n18:07\u00a0<sburjan\\_>\u00a0has quit  \n18:07\u00a0<vmassol>\u00a0what I know is that our start\\_xwiki.sh does  \n18:08\u00a0<vmassol>\u00a0the one from the standalone zip  \n18:08\u00a0<tmortagne>\u00a0vmassol: the debian package does not setup anything on tomcat, it's not its job  \n18:08\u00a0<jbwiv>\u00a0this is the default: \u00a0/usr/lib/jvm/java-6-openjdk/bin/java -Djava.util.logging.config.file=/var/lib/tomcat6/conf/logging.properties -Djava.awt.headless=true -Xmx128m -XX:+UseConcMarkSweepGC -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/usr/share/tomcat6/endorsed -classpath /usr/share/tomcat6/bin/bootstrap.jar -Dcatalina.base=/var/lib/tomcat6 -Dcatalina.home=/usr/share/tomcat6 -Djava.io.tmpdir=/tmp/tomcat6-tomcat6-tm  \n18:08\u00a0<jbwiv>\u00a0at least, that's what it runs with now. Looks like i need to bump up that 128  \n18:08\u00a0<vmassol>\u00a0tmortagne: if it installs tomcat then it could also setup memory no?  \n18:08\u00a0<tmortagne>\u00a0don't mix jetty/hsqldb and xwiki debian package  \n18:08\u00a0<tmortagne>\u00a0it does not  \n18:08\u00a0<tmortagne>\u00a0it just declare tomcat as dependency  \n18:08\u00a0<vmassol>\u00a0ok  \n18:09\u00a0<vmassol>\u00a0maybe some warnings on the doc might help  \n18:09\u00a0<vmassol>\u00a0warnings that memory default for tomcat are not enough and need to be adujtsed  \n18:09\u00a0<vmassol>\u00a0even better if that could be in the deb install itself  \n18:09\u00a0<vmassol>\u00a0:)  \n18:09\u00a0<tmortagne>\u00a0pretty sure Guillaume added something about it  \n18:09\u00a0<vmassol>\u00a0ok  \n18:10\u00a0<vmassol>\u00a0128MB is really too low  \n18:10\u00a0<vmassol>\u00a0(jbwiv)  \n18:10\u00a0<tmortagne>\u00a0it also depends on which debian based distribution you are on, debian and ubuntu don't have the same default AFAIK  \n18:11\u00a0<vmassol>\u00a0I agree with jbwiv that it's a pity that xwiki doesn't start with the defaults  \n18:13\u00a0<jbwiv>\u00a0vmassol: is /etc/init.d/tomcat6 the appropriate place to change this? I see 128m now  \n18:14\u00a0<tmortagne>\u00a0jbwiv: see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationViaAPT#HTomcatUsability  \n18:15\u00a0<vmassol>\u00a0tmortagne: fixing this doc  \n18:23\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n18:23\u00a0<vmassol>\u00a0is someone checking the ci and build?  \n18:23\u00a0<vmassol>\u00a0because platform is still failing  \n18:23\u00a0<vmassol>\u00a0and for a stupid reason  \n18:23\u00a0<vmassol>\u00a0someone forgot to build locally before pushing  \n18:23\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-platform/3572/console  \n18:23\u00a0<vmassol>\u00a0(checkstyle)  \n18:24\u00a0<vmassol>\u00a0this is really not the way to go  \n18:24\u00a0<vmassol>\u00a0failing the build all the time like it has the past week and this week  \n18:24\u00a0<vmassol>\u00a0big changes like security shoud be done on a branch  \n18:24\u00a0<vmassol>\u00a0and the full build must pass before integrating  \n18:24\u00a0<vmassol>\u00a0I'm really upset by this  \n18:25\u00a0<vmassol>\u00a0this is really not professional work  \n18:25\u00a0<vmassol>\u00a0:(  \n18:25\u00a0<vmassol>\u00a0devs seem to not care that they are busting everyone else and that's bad  \n18:31\u00a0<vmassol>\u00a0should we revert everything till the last time the build passed?  \n18:31\u00a0<vmassol>\u00a0(trying to make someone react :))  \n18:34\u00a0<jvdrean>\u00a0has quit  \n18:39\u00a0<jbwiv>\u00a0vmassol: tmortagne: thanks for the help guys  \n18:40\u00a0<Slashman>\u00a0has quit  \n18:41\u00a0<vmassol>\u00a0jbwiv: all working?  \n18:42\u00a0<jbwiv>\u00a0vmassol: not yet. Up'd the ram and am recreating db. I'll know in 5 mins ;-)  \n18:42\u00a0<vmassol>\u00a0ok :)  \n18:43\u00a0<Denis>\u00a0vmassol: what you ask for is absolutely unrealistic until you have a way to create all the jenkins project on branches easily.  \n18:43\u00a0<vmassol>\u00a0we have  \n18:43\u00a0<vmassol>\u00a0and have had this for some time now  \n18:43\u00a0<vmassol>\u00a0(Denis)  \n18:43\u00a0<vmassol>\u00a0takes about 10 seoncds  \n18:44\u00a0<vmassol>\u00a0ok maybe 20  \n18:44\u00a0<Denis>\u00a0really, you should show us, nobody knows  \n18:44\u00a0<vmassol>\u00a0I've not only shown  \n18:44\u00a0<vmassol>\u00a0but also explained it  \n18:44\u00a0<vmassol>\u00a0and sent mails about it  \n18:44\u00a0<vmassol>\u00a0and people know  \n18:44\u00a0<vmassol>\u00a0mayb not you  \n18:44\u00a0<vmassol>\u00a0but others know for sure  \n18:44\u00a0<vmassol>\u00a0let me show you now:  \n18:44\u00a0<Denis>\u00a0really, I have not seen it and I am not alone, are you sure we are speaking about the same thing ?  \n18:45\u00a0<vmassol>\u00a0Denis: http://ci.xwiki.org/scriptler/?  \n18:45\u00a0<vmassol>\u00a0then you run the script named \"Copy Jobs for a new branch\"  \n18:46\u00a0<Denis>\u00a0that seems great, but when I have ask for, I have been told that is a long job not worse it  \n18:47\u00a0<Denis>\u00a0else I would have created the branch  \n18:47\u00a0<vmassol>\u00a0this is why I suggested creating a branch jsut before leaving for holidays btw ;)  \n18:48\u00a0<vmassol>\u00a0now I don't know if the stability issue we have is all due to the security stuff  \n18:48\u00a0<Denis>\u00a0however, my feeling is that creating branch would have another negative impact, since nobody care of master, surely nobody will care of a branch, and we will never reach something stable, except if one takes lots of effort almost alone.  \n18:48\u00a0<vmassol>\u00a0it seems to me there are other stuff too  \n18:48\u00a0<vmassol>\u00a0Denis: I don't agree  \n18:48\u00a0<Denis>\u00a0sure, there are  \n18:48\u00a0<vmassol>\u00a0for example it's not because we don't have 80% TPC that we shioudl faild everyrhing  \n18:49\u00a0<vmassol>\u00a0we cannot stop people working and users buiding  \n18:49\u00a0<Denis>\u00a0you don't agree, but you have to shout to get master stable  \n18:49\u00a0<vmassol>\u00a0yep :)  \n18:49\u00a0<vmassol>\u00a0I agree about having master stable  \n18:49\u00a0<vmassol>\u00a0branches are fine to not build  \n18:49\u00a0<vmassol>\u00a0(not talking about stable branches here ofc ;))  \n18:49\u00a0<Denis>\u00a0and we agreed stabilizing master with the new security module  \n18:49\u00a0<vmassol>\u00a0(feature branches)  \n18:49\u00a0<vmassol>\u00a0yes it's ok if it can be done very quickly  \n18:49\u00a0<vmassol>\u00a0but now it's been more than 10 days AFAICS and nowhere stable  \n18:50\u00a0<Denis>\u00a0I have test it on my own computer first, and it was not harmful  \n18:50\u00a0<Denis>\u00a0this is why I have put it in  \n18:50\u00a0<vmassol>\u00a0and nobosy seems to be care much  \n18:50\u00a0<vmassol>\u00a0like the checktyle that's been failing for hours  \n18:50\u00a0<Denis>\u00a0next, I have been ask for several unexpected improve, this has cause some fuzz  \n18:50\u00a0<vmassol>\u00a0yep I've seen that  \n18:51\u00a0<Denis>\u00a0I agree, that one should not happen  \n18:55\u00a0<Slashman>\u00a0has joined #xwiki  \n18:55\u00a0<jbwiv>\u00a0so at least in the deb install, there is no JAVA\\_OPTS line which matches what the docs say in (http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationViaAPT#HTomcatUsability). There is a line there though which is supposed to set JAVA\\_OPTS. I modified it to mx1024m, but the actually process launch doesn't seem to honor it as it's still being launched with 128. digging into that now  \n18:57\u00a0<vmassol>\u00a0ok sorry can't help there, I don't use tomcat/deb  \n18:59\u00a0<jbwiv>\u00a0grrr...sorry. My complete boneheaded mistake. I was modifying the wrong file (/etc/init.d/tomcat6 versus /etc/defaults/tomcat6)  \n18:59\u00a0<vmassol>\u00a0ahah :)  \n19:00\u00a0<tmortagne>\u00a0yes /etc/init.d/tomcat6 is overwritten by /etc/defaults/tomcat6  \n19:00\u00a0<tmortagne>\u00a0part of it I mean  \n19:02\u00a0<jbwiv>\u00a0so now, although I've dropped/recreated the database, I no longer get the web-based install, I just get \"The requested document could not be found.You can\u00a0edit this page\u00a0to create it.\". is there something else I need to purge to start fresh?  \n19:04\u00a0<tmortagne>\u00a0jbwiv: yes you should remove everything \u00a0\u00a0in /var/lib/xwiki/data/  \n19:05\u00a0<tmortagne>\u00a0you have a state there saying the install has been done already  \n19:05\u00a0<tmortagne>\u00a0and various extensions tagged as installed  \n19:05\u00a0<tmortagne>\u00a0not everything is in the database  \n19:07\u00a0<jbwiv>\u00a0tmortagne: got it. thank you  \n19:11\u00a0<Slashman>\u00a0has quit  \n19:29\u00a0<evalica>\u00a0has quit  \n19:33\u00a0<tmortagne>\u00a0has quit  \n19:51\u00a0<jbwiv>\u00a0anyone know of a tried and true way to convert from mediawiki to xwiki? I've tried MediaWiki2XWikiConvertor, but not the best results yet\n"}