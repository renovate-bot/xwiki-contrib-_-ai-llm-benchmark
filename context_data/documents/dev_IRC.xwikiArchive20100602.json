{"id": "dev:IRC.xwikiArchive20100602", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100602", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\narkub left at 01:17 (Ping timeout: 252 seconds  \nabusenius left at 01:25 (Ping timeout: 264 seconds  \nnpm left at 02:45 (Quit: Leaving.  \nxwikibot joined #xwiki at 10:55  \nabusenius left at 11:22 (Ping timeout: 260 seconds  \nflorinciu joined #xwiki at 11:24  \nsilviar - (11:25): Hi! I am testing xwiki-enterprise-jetty-hsqldb-2.4-20100601.164258-198; We have an issue with the accordion in the panel wizard > panel list. It's expanded & clicking on the tabs won't minimize them  \nyomgui left at 11:34 (Quit: Leaving.  \nsilviar - (11:40): this happens in FF  \nsilviar - (11:41): In IE 7 & 8 I can't access XWikiPreferences; I hover over \"XWiki\", click \"Administer Wiki\" and a blank page shows up  \nsilviar - (11:42): The browsers indicates in the bottom that there are errors on page  \nabusenius joined #xwiki at 11:43  \nvmassol - (11:45): guys FYI we have a memory leak pb with velocity macros (in wiki syntax 1.0)  \nvmassol - (11:45): this is because of 2 things:  \nvmassol - (11:46): 1) we have velocity.properties = velocimacro.permissions.allow.inline.local.scope = true  \nvmassol - (11:46): this creates namespaces for templates  \nvmassol - (11:46): 2) in syntax 1.0 we use a template name equal to the current page name  \nvmassol - (11:47): I'll work on fixing this but just wanted to post it here so that you know  \nvmassol - (11:47): note that this problem doesn't happen in 2.0 syntax  \nvmassol - (11:47): since we use the same \"template name\" for all velocity macros  \nvmassol - (11:47): (we use \"velocity macro\" as the template name)  \nvmassol - (11:48): (which btw means that velocity macros in 2.0 syntax are not isolated)  \nmflorea left at 11:51 (Quit: Leaving.  \nvmassol - (11:56): a good solution would be to use the name of the page where the macro is defined but we need a way to find this information even when the page is included in another page\u2026.  \nanna left at 12:08 (Quit: anna  \nvmassol - (12:11): hmm no that won't work...  \nvmassol - (12:13): actually the current behavior is correct :)  \njvdrean left at 12:17 (Quit: Leaving.  \nxipe left at 12:26 (Remote host closed the connection  \nvmassol - (12:30): sburjan: if you can, when you make a change try to put a comment explanining what you changed  \nvmassol - (12:31): sburjan: and use minor edit for small changes  \nsburjan - (12:36): okay.. sorry  \nsburjan - (12:36): I'll explain in the future modifications. Now I only changed 2 screenshots  \njvdrean joined #xwiki at 12:41  \nmariusbutuc left at 12:44 (Quit: Leaving.  \nmflorea joined #xwiki at 12:46  \nvmassol-ipad joined #xwiki at 12:47  \nvmassol-ipad - (12:48): test from iPad :)  \nvmassol-ipad left at 12:49 (Client Quit  \nvmassol - (12:50): test2  \nvmassol-ipad joined #xwiki at 12:51  \nlucaa left at 12:51 (Ping timeout: 276 seconds  \nvmassol-ipad - (12:52): Sure ;)  \ngvallarelli - (12:53): vmassol-ipad: another thing that will suck power :D  \ngvallarelli - (12:53): another thing to rembember to re-charge ;D  \nvmassol-ipad left at 12:54 (Client Quit  \nabusenius left at 12:56 (Ping timeout: 258 seconds  \nxipe joined #xwiki at 12:59  \nxipe left at 13:03 (Client Quit  \nxipe joined #xwiki at 13:03  \nabusenius joined #xwiki at 13:11  \nflorinciu left at 13:15 (Read error: Connection reset by peer  \nkibahop left at 13:23 (Remote host closed the connection  \nkibahop joined #xwiki at 13:26  \nkibahop left #xwiki at 13:39  \nkibahop joined #xwiki at 13:39  \nkibahop left #xwiki at 13:40  \nkibahop joined #xwiki at 13:46  \nlucaa joined #xwiki at 13:49  \nmariusbutuc joined #xwiki at 13:51  \nvmassol1 joined #xwiki at 14:08  \nvmassol left at 14:08 (Read error: Connection reset by peer  \nflorinciu joined #xwiki at 14:13  \ntmortagne joined #xwiki at 14:23  \njvelo joined #xwiki at 14:24  \nvmassol1 - (14:38): silviar, sburjan: the rights image seems strange on that page IMO.  \nsilviar - (14:40): Hi Vincent; do you mean the fact that it's too big and crowded?  \nvmassol1 - (14:40): it's just strange  \nvmassol1 - (14:40): you think it would be about spaces  \nvmassol1 - (14:40): and it starts by showing you something about rrights  \nvmassol1 - (14:41): I don't understand where there's that image  \nvmassol1 - (14:41): s/where/why/  \nvmassol1 - (14:41): the link to the rights page is enough IMO  \nvmassol1 - (14:41): also it'll reduce maintenance  \nvmassol1 - (14:41): since otherwise when the rights page changes you'll have to change the doc for the spaces topic ;)  \nsburjan - (14:42): yeah ..  \nsilviar - (14:42): yes, I agree :) users should see an image directly related to spaces  \nsilviar - (14:42): when they come to the page  \nsilviar - (14:42): we'll remove it  \nsburjan left at 14:46 (Quit: Ex-Chat  \nlucaa left at 14:48 (Read error: Connection reset by peer  \nlucaa joined #xwiki at 14:48  \nsburjan joined #xwiki at 14:55  \nvmassol1 - (14:59): silviar, sburjan: showing the breadcrumb and how to set parent would maybe be useful  \nsburjan left at 14:59 (Client Quit  \nsilviar - (14:59): yes, we'll make the additions  \nvmassol1 - (15:00): cool  \nplunden left #xwiki at 15:18  \njvdrean - (15:23): vmassol1 and others: do we have something similar to \"-Dpattern=MyTestClass\" available for the new ui-tests ?  \nvmassol1 - (15:23): jvdrean: -Dtest  \nvmassol1 - (15:23): http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html  \nabusenius - (15:24): will there be more major refactoring changes in ui-tests in the next time?  \nvmassol1 - (15:25): maybe  \nabusenius - (15:26): just wondering if I can fix my patches now or should better wait a bit  \nabusenius - (15:26): (I keep them synchronized in git anyway)  \nmariusbutuc - (15:51): Hi, where do I find the value associated to $msg.get(\"xe.panels.modifications.my\") ?  \nlucaa - (15:54): ApplicationResources.properties https://svn.xwiki.org/svnroot/xwiki/platform/core/trunk/xwiki-core/src/main/resources/ApplicationResources.properties  \nlucaa - (15:54): ( mariusbutuc )  \nmariusbutuc - (15:55): thanks :)  \nkibahop left at 15:58 (Remote host closed the connection  \nEnygma` left at 15:59 (Ping timeout: 240 seconds  \nEnygma` joined #xwiki at 16:01  \ntmortagne - (16:43): guys i will start the release of 2.4M1 soon today, i'm preparing the release plan and release note now, tel me if you have something blocker to commit before  \nsilviar left at 16:45 (Quit: Leaving.  \nvmassol1 - (16:48): CalebJamesDeLisl: hi  \nlucaa - (16:51): guys, I remember we had the escape tool on the velo context. Do you remember starting which version? and what's its name?  \nvmassol1 - (16:51): lucaa: you can check xwiki.properies I think for all tool names  \nlucaa - (16:52): let's se  \nlucaa - (16:52): e  \nlucaa - (16:53): from  \nlucaa - (16:53): #-# [Since 2.0M1]  \nlucaa - (16:53): #-# Velocity Tools that will be available from your scripts. The format is  \nlucaa - (16:53): #-# velocity.tools.<name under which it'll be available in the context> = <class name>  \nlucaa - (16:53): #-# Default values (no need to add them)  \nlucaa - (16:53): #-# \u00a0\u00a0velocity.tools = listtool = org.apache.velocity.tools.generic.ListTool  \nlucaa - (16:53): #-# \u00a0\u00a0velocity.tools = numbertool = org.apache.velocity.tools.generic.NumberTool  \nlucaa - (16:53): #-# \u00a0\u00a0velocity.tools = datetool = org.apache.velocity.tools.generic.DateTool  \nlucaa - (16:53): #-# \u00a0\u00a0velocity.tools = mathtool = org.apache.velocity.tools.generic.MathTool  \nlucaa - (16:53): #-# \u00a0\u00a0velocity.tools = sorttool = org.apache.velocity.tools.generic.SortTool  \nlucaa - (16:53): #-# \u00a0\u00a0velocity.tools = escapetool = org.apache.velocity.tools.generic.EscapeTool  \nlucaa - (16:53): #-# \u00a0\u00a0velocity.tools = regextool = org.xwiki.velocity.tools.RegexTool  \nlucaa - (16:53): I understand that I should have $escapetool ?  \nvmassol1 - (16:54): I don't know  \nvmassol1 - (16:54): what version are you using?  \nlucaa - (16:55): nervermind, I'm tired  \nlucaa - (16:55): nothing will work unless there's an {{velocity}} macro all around it...  \nvmassol1 - (16:55): :)  \nlucaa - (16:55): it works fine  \nlucaa - (16:56): (and it's not funny! :P )  \nmariusbutuc left at 17:00 (Quit: Leaving.  \nevalica left at 17:00 (Read error: Connection reset by peer  \nvmassol1 - (17:00): for some reason ui-tests are failing for me  \nvmassol1 - (17:01): also I thought I had implemented special checks to prevent extra work while logging in  \nvmassol1 - (17:01): but it seems it's not there anymore  \njvelo left at 17:03 (Ping timeout: 258 seconds  \njvelo joined #xwiki at 17:15  \nlucaa - (17:23): devs, is anyone bored? anyone in the mood to release https://svn.xwiki.org/svnroot/xwiki/contrib/projects/xwiki-application-importexport/ v 1.4 ? and upload it to code.xwiki.org?  \nlucaa - (17:23): I just fixed a bug that prevented it to work on wikis installed in a path different from /xwiki  \nanna\\_\\_ joined #xwiki at 17:38  \nEnygma` left at 17:40 (Quit: Leaving.  \narkub left at 17:41 (Ping timeout: 258 seconds  \nCalebJamesDeLisl - (17:44): vmassol1: Hello.  \nvmassol1 - (17:45): CalebJamesDeLisl: I'm putting back some checks I had before for logging in  \nvmassol1 - (17:45): to speed up tests  \nvmassol1 - (17:45): I'm about to commit  \nvmassol1 - (17:45): seems you had removed some of them unvoluntarily I think  \nCalebJamesDeLisl - (17:45): Hmm. Where were they?  \nCalebJamesDeLisl - (17:46): I probably did remove something, I had to commit quick because every minute I waited I had to merge everything again.  \nvmassol1 - (17:46): ok committing now  \nvmassol1 - (17:46): note that several tests fail locally on my machine  \nvmassol1 - (17:46): so I can't really verify if what I've done is fully working or not  \nvmassol1 - (17:46): I need to understand why the tests fail locally but not on hudson  \nvmassol1 - (17:47): do the tests work for you on trunk?  \nCalebJamesDeLisl - (17:47): As of my last commit they did.  \nvmassol1 - (17:47): CalebJamesDeLisl: let me know what you think of my last commit  \nvmassol1 - (17:47): (just done it)  \ntmortagne - (17:48): mflorea: do you have more commits to do ? (as i asked but seems you just did a commit ;))  \nanna\\_\\_ left at 17:49 (Quit: anna\\_\\_  \nCalebJamesDeLisl - (17:49): Does getLoggedInUserName prove that the user is logged in?  \ntmortagne - (17:49): (04:43:48 PM) tmortagne: guys i will start the release of 2.4M1 soon today, i'm preparing the release plan and release note now, tel me if you have something blocker to commit before  \nvmassol1 - (17:50): CalebJamesDeLisl: why wouldn't it?  \nmflorea - (17:50): tmortagne: no, that's all for now, sorry, I haven't noticed your message  \ntmortagne - (17:50): ok  \ntmortagne - (17:50): hope you did not broke any tests :)  \nCalebJamesDeLisl - (17:50): I guess it wouldn't, there might be false negatives (edit pages) though but they don't matter much.  \nvmassol1 - (17:51): I looked for some metadata info in the <head>  \nvmassol1 - (17:51): but the author is not there  \nvmassol1 - (17:51): there's only his printed name there  \ntmortagne - (17:51): abusenius: would be great if you could add more things in the \"Security improvements\" section of http://www.xwiki.org/xwiki/bin/view/Main/ReleaseNotesXWikiEnterprise24M1  \nmflorea - (17:52): tmortagne: I pretty sure I haven't. I added a new test too, and the code that I added doesn't affect existing features  \nvmassol1 - (17:52): CalebJamesDeLisl: <meta name=\"author\" content=\"Administrator\" />  \nCalebJamesDeLisl - (17:52): re the document author?  \nvmassol1 - (17:52): yes  \nvmassol1 - (17:52): I don't see any other way of getting it  \ntmortagne - (17:52): sdumitriu: so you have some more details to put in http://www.xwiki.org/xwiki/bin/view/Main/ReleaseNotesXWikiEnterprise24M1#HPerformanceimprovements ?  \nCalebJamesDeLisl - (17:53): Should that be a function of the basepage?  \ntmortagne - (17:53): [release] Starting core release in about 2 minutes  \nCalebJamesDeLisl - (17:53): Also think we need to decide now if TestUtils is going to have the driver or if it's just going to be for returning urls.  \nmflorea - (17:54): tmortagne: I'll add a screen shot re http://jira.xwiki.org/jira/browse/XWIKI-5202  \nvmassol1 - (17:54): CalebJamesDeLisl: it was in ViewPage before  \nvmassol1 - (17:54): but since log in has been moved to TestUtil  \ntmortagne - (17:54): mflorea: ok thanks  \nvmassol1 - (17:55): CalebJamesDeLisl: I don't get it why ui-tests fail for me  \nvmassol1 - (17:55): let me paste the errors I have  \nCalebJamesDeLisl - (17:56): IMO login and isAuthenticated are different. Login is about posting data to loginsubmit, isAuthenticated is about looking at the page.  \nvmassol1 - (17:57): isAuthenticated \\*was\\* there  \nvmassol1 - (17:57): you removed it!  \nvmassol1 - (17:58): :)  \nCalebJamesDeLisl - (17:58): Oops.  \nvmassol1 - (17:58): I agree for isauthenticatd to be in ViewPage  \nvmassol1 - (17:58): (as it was before)  \nflorinciu left at 17:58 (Read error: Connection reset by peer  \nvmassol1 - (17:58): for getLoggedinUsername it could be a private method but it has to be in TestUtil  \nCalebJamesDeLisl - (17:59): I would be happy if TestUtils had no access to the driver and only returned URLs which the test then fed to the driver.  \nCalebJamesDeLisl - (18:00): Doing that would discourage all functions creeping into TestUtils.  \nCalebJamesDeLisl - (18:01): - loginAndGotoPage does not goto page if user is logged in already.  \nvmassol1 - (18:01): you sure about that? I debugged it and it was doing stuff  \nCalebJamesDeLisl - (18:02): Rereading...  \nvmassol1 - (18:02): it does a gotoPage  \nCalebJamesDeLisl - (18:02): It looks like it's all in an if statement. Let me open it in gedit.  \nvmassol1 - (18:02): and it navigates you to the home page  \nvmassol1 - (18:03): yes of course  \nvmassol1 - (18:03): that's the if i've just added  \nvmassol1 - (18:03): I had this if before  \nvmassol1 - (18:03): but you removed it!  \nvmassol1 - (18:03): (in your refactorings)  \nvmassol1 - (18:03): so I have added it again  \nvmassol1 - (18:04): :)  \nCalebJamesDeLisl - (18:05): Yes loginAndGotoPage does nothing if the user is already logged in.  \nvmassol1 - (18:05): can you explain that to me?  \nCalebJamesDeLisl - (18:06): I didn't javadoc it (bad bad bad) But I wrote it with the contract that at the end you would be user X and you would be on page Y.  \nCalebJamesDeLisl - (18:06): If you are already user X then you are not guarenteed to be on page Y at the end.  \nCalebJamesDeLisl - (18:08): Also I did some testing and found that logging in takes very little time (like a page load) if the user is already logged in.  \nvmassol1 - (18:08): a page load is huge  \nCalebJamesDeLisl - (18:08): If it's \"and goto page\" then the page load is already there.  \nvmassol1 - (18:08): and btw the tests are now not correct anymore  \nvmassol1 - (18:08): since you do extra nav  \nvmassol1 - (18:08): as opposed to before  \nvmassol1 - (18:08): take for ex the ImportTest  \nvmassol1 - (18:09): it used to be ok but with your changes now:  \nvmassol1 - (18:09): - you navigate for each test to the home page  \nvmassol1 - (18:09): - then navigate to the admin page  \nvmassol1 - (18:09): since there are 3 tests this means 3 nav too much just for this test case  \nCalebJamesDeLisl - (18:10): I thought that is how it was. What changed it?  \nvmassol1 - (18:10): the fact that you removed the check  \nvmassol1 - (18:10): to see if the user is already logged in  \nvmassol1 - (18:11): but maybe you're right in that we always want to navigate  \nvmassol1 - (18:11): after a login  \nvmassol1 - (18:11): and that the login itself is fast  \nvmassol1 - (18:11): in which case all we need to do is to fix the tests  \nvmassol1 - (18:11): so that they don't do extra nav  \nvmassol1 - (18:12): but in this case loginAsAdmin needs to have the extra check  \nCalebJamesDeLisl - (18:12): I used the framework changes to make registerTest and friends very fast by removing all navigation.  \nCalebJamesDeLisl - (18:13): I still stand think there should be no check for loginAndGotoPage.  \nCalebJamesDeLisl - (18:14): My testing showed that a login with a redirect took about the same time as an ordinary page load which is needed anyway because it's \"andGotoPage\".  \nCalebJamesDeLisl - (18:15): (if the user is already logged in.)  \nvmassol1 - (18:16): I think it's not good to do 2 things: login + gotopage  \nvmassol1 - (18:17): there should be no \\*AndGotoPage  \nCalebJamesDeLisl - (18:17): It takes half the time when it's passed in the redirect.  \nvmassol1 - (18:17): it takes even less  \nvmassol1 - (18:17): when you don't re log in  \nvmassol1 - (18:17): have a look at ImportTest as an example  \nvmassol1 - (18:18): and tell me how you'd write it  \nvmassol1 - (18:18): you're going to be blocked by the fact that you don't have a getURL() method in AdministrationPage  \nCalebJamesDeLisl - (18:19): Well the first thing it does is delete page so I'd pass that as the url to loginAndGotoPage.  \nvmassol1 - (18:19): that's not the first thing  \nvmassol1 - (18:20): it's the second thing  \nvmassol1 - (18:20): ok I se what you mean  \nvmassol1 - (18:20): you're lucky in this case  \nCalebJamesDeLisl - (18:20): Second thing because it extends AdminAuthenticated...?  \nvmassol1 - (18:20): since the test controls that page  \nvmassol1 - (18:20): but imagine that there isn't that delete  \nCalebJamesDeLisl - (18:21): Looks like we need an interface \"URLAccessablePage\"  \nvmassol1 - (18:22): yes but I don't find it very nice to do:  \nvmassol1 - (18:22): getURL() on the page  \nvmassol1 - (18:22): in this case btw  \nvmassol1 - (18:22): we can remove the gotopage  \nvmassol1 - (18:22): and have a generic one  \nvmassol1 - (18:23): hmm URL is not a very good common denominator  \nvmassol1 - (18:23): which is why I was suggesting a reference instead of a URL  \nvmassol1 - (18:23): you can easily build a URL out of a ref but not the other way around  \nCalebJamesDeLisl - (18:23): What's wrong with URL?  \nCalebJamesDeLisl - (18:24): So your ref will have action, space, page, query parameters?  \nvmassol1 - (18:25): yes probably unless we don't need them  \nflorinciu joined #xwiki at 18:25  \nCalebJamesDeLisl - (18:26): You will need to implement everything available to the URL spec otherwise there will eventually be a use case which you hadn't thought of.  \nCalebJamesDeLisl - (18:27): I wrote a helper to create a url from a map of <String, String> but that doesn't satisfy the URL spec so I kept a function which allows passing the query string.  \nvmassol1 - (18:32): CalebJamesDeLisl: IMO we don't need login + goto page  \nvmassol1 - (18:32): we log in only a few times in the whole test suite  \nvmassol1 - (18:33): so it doesn't matter much that when we do we have an extra nav  \nCalebJamesDeLisl - (18:33): What happens if in the course of a test you are logged out?  \nvmassol1 - (18:33): then you're logged in  \nvmassol1 - (18:33): the check is there to see if you're logged in or not  \nvmassol1 - (18:34): IMO login + goto also makes the test complex to understand  \nvmassol1 - (18:34): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0getUtil().loginAsAdminAndGotoPage(getUtil().getURL(\"Main\", \"TestPage\"));  \nvmassol1 - (18:34): requires comments  \nvmassol1 - (18:34): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// Perform 2 things:  \nvmassol1 - (18:34): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// - login as Admin since importing requires going to the Administration page  \nvmassol1 - (18:34): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// - delete the Test Page we import from the XAR to ensure to start with a predefined state  \ngvallarelli - (18:34): got t ogo  \ngvallarelli - (18:35): good work  \ngvallarelli left at 18:35 (Quit: Leaving.  \nvmassol1 - (18:35): CalebJamesDeLisl: bbiab  \nCalebJamesDeLisl - (18:35): Ok.  \nlucaa left at 18:49 (Quit: Leaving.  \nabusenius left at 18:53 (Ping timeout: 260 seconds  \njvdrean left at 18:58 (Quit: Leaving.  \nmflorea left at 19:00 (Quit: Leaving.  \nKermitTheFragger left at 19:25 (Quit: Leaving  \narkub joined #xwiki at 19:30  \nbbc581 left at 19:33 (Ping timeout: 260 seconds  \nvmassol1 left at 19:40 (Quit: Leaving.  \nvmassol-ipad joined #xwiki at 19:46  \nvmassol-ipad left at 19:46 (Client Quit  \nabusenius joined #xwiki at 19:54  \njfx joined #xwiki at 20:02  \njfx left #xwiki at 20:03  \nabusenius left at 20:07 (Quit: Leaving  \nflorinciu left at 20:07 (Quit: Leaving.  \nabusenius joined #xwiki at 20:13  \nabusenius left at 20:15 (Remote host closed the connection  \narkub left at 20:16 (Quit: Leaving  \nabusenius joined #xwiki at 20:49  \nlucaa joined #xwiki at 21:18  \nflorinciu joined #xwiki at 21:24  \nflorinciu left at 21:29 (Read error: Connection reset by peer  \nbbc581 joined #xwiki at 21:39  \nmflorea joined #xwiki at 22:01  \ntmortagne left at 22:01 (Quit: Leaving.  \nlucaa left at 22:23 (Ping timeout: 245 seconds  \nlucaa joined #xwiki at 22:29  \nmflorea left at 22:36 (Quit: Leaving.  \nlucaa left at 23:24 (Ping timeout: 264 seconds  \nlucaa joined #xwiki at 23:34  \njvelo left at 23:47 (Ping timeout: 252 seconds  \nabusenius left at 23:54 (Ping timeout: 264 seconds  \n\n"}