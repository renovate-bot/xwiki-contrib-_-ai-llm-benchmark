{
  "id": "xwiki:Documentation.UserGuide.Features.XWikiRESTfulAPI",
  "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI",
  "title": "REST API",
  "collection": "Eval_fr",
  "mimetype": "text/markdown",
  "language": "fr",
  "content": "**Contenu**\n\n* [Accéder au service](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HAccessingtheservice)\n* [Ensemble de données](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HDataset)\n* [Comprendre les ressources et les représentations](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HUnderstandingresourcesandrepresentations)\n\t+ [Relations](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HRelations)\n\t+ [Le Graph \"HATEOAS\"](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HThe22HATEOAS22Graph)\n* [Interagir avec l'API RESTful de XWiki](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HInteractingwiththeXWikiRESTfulAPI)\n\t+ [Authentification](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HAuthentication)\n\t+ [Envoyer des représentations](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HSendingrepresentations)\n\t+ [Surmonter les limitations du navigateur](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HOvercomingbrowserlimitations)\n\t+ [PUT vs POST](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HPUTvsPOST)\n\t+ [En-têtes](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HHeaders)\n* [Documentation de l'API RESTful de XWiki](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HXWikiRESTfulAPIDocumentation)\n\t+ [Ressources racine](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HRootresources)\n\t+ [Ressources d'espace](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HSpaceresources)\n\t+ [Ressources de page](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HPageresources)\n\t+ [Ressources de tag](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HTagresources)\n\t+ [Ressources de commentaires](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HCommentsresources)\n\t+ [Ressources de pièces jointes](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HAttachmentsresources)\n\t+ [Ressources d'objet](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HObjectresources)\n\t+ [Ressources de classe](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HClassresources)\n\t+ [Ressources de tâche](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HJobresources)\n\t+ [Ressources de localisation](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HLocalizationresources)\n\t+ [Ressources de thème d'icônes](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HIconThemeresources)\n\t+ [Autres ressources](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HOtherresources)\n* [Ressources personnalisées](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HCustomresources)\n\t+ [Dans les pages Wiki](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HInWikiPages)\n\t+ [En Java](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HInJava)\n* [Générer une URL REST pour une ressource](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HGenerateaRESTURLforaresource)\n* [Utiliser l'API RESTful](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HUsingtheRESTfulAPI)\n\t+ [Tutoriel](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HTutorial)\n\t+ [Créer un objet XWiki](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HCreatinganXWikiObject)\n\t+ [Formats de fichiers](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HFormatsoffiles)\n* [Exemples](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HExamples)\n\t+ [Obtenir la liste des utilisateurs](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HGettingthelistofusers)\n\t+ [Obtenir la liste des utilisateurs en utilisant XWQL](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HGettingthelistofusersusingXWQL)\n\nXWiki offre un accès granulaire à pratiquement chaque élément via une API basée sur les sémantiques HTTP, c'est-à-dire une API RESTful. Sur cette page, vous trouverez tous les détails pour tirer parti de cette API et les instructions pour l'utiliser à son plein potentiel.\n\n# Accéder au service\n\nPar défaut, le point d'entrée de l'API RESTful de XWiki est enraciné à l'URI suivant :\n\n   \n  http://host:port/xwiki/rest  \n Toutes les références de ressources décrites dans la [Documentation de l'API RESTful de XWiki](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI#HXWikiRESTfulAPIDocumentation) doivent être considérées comme relatives à cette URL.\n\nPar exemple, les ressources /wikis sur un serveur fonctionnant sur localhost sur le port 8080 peuvent être récupérées en utilisant l'URL suivante : http://localhost:8080/xwiki/rest/wikis\n\nEn plus de récupérer du contenu au format XML, vous pouvez également le récupérer au format JSON en ajoutant le paramètre ?media=json dans l'URL. Par exemple : http://localhost:8080/xwiki/rest/wikis?media=json\n\n# Ensemble de données\n\nCette section contient une description brève et de haut niveau de l'ensemble de données XWiki qui devrait servir de base pour présenter les ressources et leurs opérations associées.\n\nXWiki a des **pages** organisées en **espaces**. Chaque **page** est disponible en plusieurs **versions** (son **historique**) et **traductions**. Les pages traduites ont leurs propres **versions** et **historique** qui sont indépendants. Chaque page peut avoir des **pièces jointes**. Chaque pièce jointe a son propre **historique**. Les pièces jointes sont partagées entre toutes les différentes traductions d'une page (c'est-à-dire que le même ensemble de pièces jointes est le même quelle que soit la langue de la page). Les pages peuvent avoir un ou plusieurs **objets**. Les objets sont des instances d'une **classe** qui contient un ensemble de **propriétés**. Certains objets peuvent être directement exposés comme des entités de première classe, comme les **commentaires** et les **tags**. Les objets, comme les pièces jointes, sont partagés entre toutes les traductions de la page.\n\n# Comprendre les ressources et les représentations\n\n\"Un concept important dans REST est l'existence de ressources (sources d'informations spécifiques), chacune étant référencée avec un identifiant global (par exemple, un URI en HTTP). Afin de manipuler ces ressources, les composants du réseau (agents utilisateurs et serveurs d'origine) communiquent via une interface standardisée (par exemple, HTTP) et échangent des représentations de ces ressources (les documents réels véhiculant l'information).\" ([Wikipedia](http://en.wikipedia.org/wiki/Representational_State_Transfer#Central_principle))\n\nLes ressources dans XWiki sont des pages, des pièces jointes, des objets, des propriétés, des espaces, et toutes les *choses* que nous avons décrites dans la section précédente. XWiki a une manière par défaut de transmettre l'information sur ces ressources, c'est-à-dire en fournissant des représentations XML bien définies qui contiennent toutes les informations associées à la ressource dans un format XML. Ce format est décrit en utilisant un [fichier de définition de schéma XML](https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-rest/xwiki-platform-rest-model/src/main/resources/xwiki.rest.model.xsd).\n\nBien sûr, la même ressource peut être représentée de nombreuses manières différentes. Cela reste à documenter.\n\nUn autre aspect important des représentations est qu'elles contiennent des informations utiles pour lier des ressources connexes. C'est une réalisation du principe *Hypermedia As The Engine Of The Application State (HATEOAS)*. Dans les représentations XML, cette information est transmise via la balise <link>. Cette balise a deux paramètres importants : **rel** et **href**. **rel** spécifie la \"sémantique\" du lien, tandis que **href** est l'URI de la ressource liée.\n\nPar exemple, dans la représentation d'une page, nous pouvons avoir des liens vers les commentaires, les tags, les pièces jointes qui sont des ressources indépendantes associées à la page actuelle. Ces liens sont fournis dans la représentation XML d'une page et permettent à un client de naviguer vers des ressources connexes... Comme nous le faisons tous les jours lorsque nous cliquons sur un lien dans une page web.\n\n![representation](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/XWikiRESTfulAPI/representation?height=430&rev=1.1)\n\n## Relations\n\nLes relations disponibles que vous pourriez trouver dans les représentations de ressources XML sont les suivantes :\n\n| Rel | Sémantique |\n| --- | --- |\n| http://www.xwiki.org/rel/wikis | La représentation contenant la liste des wikis virtuels. |\n| http://www.xwiki.org/rel/spaces | La représentation contenant la liste des espaces dans un wiki. |\n| http://www.xwiki.org/rel/pages | La représentation contenant la liste des pages dans un espace. |\n| http://www.xwiki.org/rel/translation | La représentation contenant une traduction d'une page. |\n| http://www.xwiki.org/rel/page | La représentation pour une page. |\n| http://www.xwiki.org/rel/space | La représentation pour un espace. |\n| http://www.xwiki.org/rel/parent | La représentation pour la page qui est le parent de la ressource actuelle. |\n| http://www.xwiki.org/rel/home | La représentation pour la page qui est la page d'accueil de la ressource actuelle. |\n| http://www.xwiki.org/rel/attachmentData | La représentation des données réelles de la pièce jointe. |\n| http://www.xwiki.org/rel/comments | La représentation de la liste des commentaires associés à la ressource actuelle. |\n| http://www.xwiki.org/rel/attachments | La représentation de la liste des pièces jointes associées à la ressource actuelle. |\n| http://www.xwiki.org/rel/objects | La représentation de la liste des objets associés à la ressource actuelle. |\n| http://www.xwiki.org/rel/object | La représentation pour un objet. |\n| http://www.xwiki.org/rel/classes | La représentation de la liste des classes associées à la ressource actuelle. |\n| http://www.xwiki.org/rel/history | La représentation de la liste des informations historiques associées à la ressource actuelle. |\n| http://www.xwiki.org/rel/class | La représentation pour une classe. |\n| http://www.xwiki.org/rel/property | La représentation pour une propriété. |\n| http://www.xwiki.org/rel/propertyValues | La représentation pour la liste des valeurs de propriété. |\n| http://www.xwiki.org/rel/properties | La représentation de la liste des propriétés associées à la ressource actuelle. |\n| http://www.xwiki.org/rel/modifications | La représentation de la liste des modifications associées à la ressource actuelle. |\n| http://www.xwiki.org/rel/children | La représentation de la liste des enfants associés à la ressource actuelle. |\n| http://www.xwiki.org/rel/tags | La représentation de la liste des tags associés à la ressource actuelle. |\n| http://www.xwiki.org/rel/tag | La représentation d'un tag. |\n| http://www.xwiki.org/rel/search | La représentation pour une ressource de recherche. |\n| http://www.xwiki.org/rel/syntaxes | La représentation pour une ressource de syntaxe. |\n\nLes relations sont définies comme des URI afin de fournir une sorte d'espace de noms. Actuellement, ces URI ne sont pas des liens vers des pages web réelles mais, à l'avenir, ils pourraient pointer vers des descriptions de leur sémantique sur des pages web réelles (ou d'autres types de représentations).\n\n## Le Graph \"HATEOAS\"\n\nPour mieux comprendre les relations entre les ressources, vous pouvez consulter ce [graph](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/XWikiRESTfulAPI/XWikiHATEOAS.pdf?rev=1.2) qui illustre toutes les ressources disponibles dans l'API RESTful de XWiki et les relations entre elles. Dans ce graph, les nœuds sont des [modèles d'URI](http://code.google.com/p/uri-templates/) représentant des classes de ressources. Les arêtes sont les liens possibles que vous pourriez trouver dans une représentation d'une ressource donnée, et leurs relations associées.\n\nCe graph montre qu'en partant du point d'entrée de l'API, un client peut naviguer et découvrir toutes les ressources simplement en suivant les liens fournis dans les représentations (et en connaissant leur sémantique). C'est exactement de cette manière que ce graph a été généré.\n\n# Interagir avec l'API RESTful de XWiki\n\nL'API RESTful de XWiki est accessible via HTTP, donc, en principe, vous pouvez utiliser tout client capable de \"parler\" HTTP pour interagir avec elle. Même un navigateur web !  \nSi vous souhaitez écrire des programmes plus complexes, vous pouvez télécharger une bibliothèque HTTP pour votre langage préféré (par exemple, <http://hc.apache.org/>), voir [cet article](https://www.xwiki.org/xwiki/bin/view/Blog/Use%20the%20Apache%20HTTP%20library%20to%20interact%20with%20the%20XWiki%20RESTful%20API) par [Mohamed Boussaa](https://www.xwiki.org/xwiki/bin/view/XWiki/mouhb).\n\nLes utilisateurs de Java peuvent tirer parti du framework [JAXB](http://jaxb.java.net/) et de son [compilateur de liaison XJC](http://jaxb.java.net/2.2.4/docs/xjc.html) pour générer des modèles d'objets de domaine directement à partir de la [définition de schéma XML](https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-rest/xwiki-platform-rest-model/src/main/resources/xwiki.rest.model.xsd), et les utiliser pour sérialiser et désérialiser des représentations XML. \n\nSi vous utilisez cette approche (Apache HTTP Client + JAXB), vous vous retrouverez à écrire du code comme ceci :\n\nimport javax.xml.bind.JAXBContext;  \nimport javax.xml.bind.Unmarshaller;  \n  \nimport org.apache.commons.httpclient.HttpClient;  \nimport org.apache.commons.httpclient.methods.GetMethod;  \nimport org.xwiki.rest.model.jaxb.Page;  \n  \n...  \nHttpClient httpClient = new HttpClient();  \nJAXBContext context = JAXBContext.newInstance(\"org.xwiki.rest.model.jaxb\");  \nUnmarshaller unmarshaller = context.createUnmarshaller();  \n  \nGetMethod getMethod = new GetMethod(\"http://localhost:8080/xwiki/rest/wikis/xwiki/spaces/Main/pages/WebHome\");  \ngetMethod.addRequestHeader(\"Accept\", \"application/xml\");  \nhttpClient.executeMethod(getMethod);  \n  \nPage page = (Page) unmarshaller.unmarshal(getMethod.getResponseBodyAsStream());Et vous aurez toutes les informations sur la page Main.WebHome dans l'objet Page, sans avoir besoin de manipuler directement le XML.\n\nEn raison de la grande variété de frameworks HTTP disponibles, nous ne fournissons pas de tutoriel complet sur leur utilisation. Cependant, pour vous montrer comment interagir avec l'API RESTful de XWiki, nous utiliserons [curl](http://curl.haxx.se) : un client HTTP en ligne de commande standard qui fournit une interface à toutes les fonctionnalités du protocole HTTP.\n\nEn utilisant curl, l'exemple précédent aurait été :\n\n$ curl http://localhost:8080/xwiki/rest/wikis/xwiki/spaces/Main/pages/WebHome  \n  \n<page xmlns=\"http://www.xwiki.org\">  \n <link rel=\"http://www.xwiki.org/rel/space\" href=\"http://localhost:8080/xwiki/rest/wikis/xwiki/spaces/Main\"/>  \n        ...## Authentification\n\nL'API RESTful de XWiki prend en charge plusieurs types d'authentification :\n\n* **Authentification HTTP BASIC** : Vous fournissez vos identifiants en utilisant l'en-tête HTTP Authorization\n* **Session XWiki** : Si vous êtes connecté à XWiki et que vous utilisez les cookies fournis par le mécanisme d'authentification, vous serez également authentifié auprès de l'API RESTful de XWiki. Cela est utile, par exemple, lorsque vous interagissez avec l'API en utilisant l'objet XMLHttpRequest d'un navigateur via JavaScript.\n* **Méthodes d'authentification personnalisées** : si vous avez configuré un authentificateur personnalisé sur votre wiki (comme [OIDC](https://extensions.xwiki.org/xwiki/bin/view/Extension/OpenID%20Connect/), ou [Authentification de confiance](https://extensions.xwiki.org/xwiki/bin/view/Extension/Trusted%20authentication%20framework) ou même vos propres méthodes personnalisées), des méthodes d'authentification supplémentaires peuvent être disponibles"
}