{"id": "dev:IRC.xwikiArchive20121015", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20121015", "title": "IRC Archive for channel #xwiki on 15 October 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:07\u00a0<cjd>\u00a0has joined #xwiki  \n00:09\u00a0<dirk\\_schmitt>\u00a0has quit  \n00:19\u00a0<vmassol>\u00a0has joined #xwiki  \n00:28\u00a0<vmassol>\u00a0has quit  \n00:45\u00a0<jvdrean>\u00a0has quit  \n00:53\u00a0<jvdrean>\u00a0has joined #xwiki  \n00:54\u00a0<vmassol>\u00a0has joined #xwiki  \n01:04\u00a0<vmassol>\u00a0has quit  \n01:28\u00a0<vmassol>\u00a0has joined #xwiki  \n01:40\u00a0<vmassol>\u00a0has quit  \n02:05\u00a0<vmassol>\u00a0has joined #xwiki  \n02:15\u00a0<vmassol>\u00a0has quit  \n02:23\u00a0<jvdrean1>\u00a0has joined #xwiki  \n02:23\u00a0<jvdrean>\u00a0has quit  \n02:40\u00a0<vmassol>\u00a0has joined #xwiki  \n02:52\u00a0<vmassol>\u00a0has quit  \n03:17\u00a0<vmassol>\u00a0has joined #xwiki  \n03:27\u00a0<vmassol>\u00a0has quit  \n03:27\u00a0<jvdrean1>\u00a0has quit  \n03:53\u00a0<vmassol>\u00a0has joined #xwiki  \n04:04\u00a0<vmassol>\u00a0has quit  \n04:29\u00a0<vmassol>\u00a0has joined #xwiki  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:40\u00a0<vmassol>\u00a0has quit  \n04:42\u00a0<SvenDowideit>\u00a0has quit  \n04:44\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n05:05\u00a0<tekzilla>\u00a0has quit  \n05:05\u00a0<vmassol>\u00a0has joined #xwiki  \n05:07\u00a0<tekzilla>\u00a0has joined #xwiki  \n05:17\u00a0<vmassol>\u00a0has quit  \n05:41\u00a0<vmassol>\u00a0has joined #xwiki  \n05:51\u00a0<vmassol>\u00a0has quit  \n06:00\u00a0<Denis>\u00a0has quit  \n06:10\u00a0<cjd>\u00a0has quit  \n06:17\u00a0<cjd>\u00a0has joined #xwiki  \n06:17\u00a0<vmassol>\u00a0has joined #xwiki  \n06:28\u00a0<vmassol>\u00a0has quit  \n06:54\u00a0<vmassol>\u00a0has joined #xwiki  \n07:06\u00a0<vmassol>\u00a0has quit  \n07:27\u00a0<mflorea>\u00a0has joined #xwiki  \n07:30\u00a0<vmassol>\u00a0has joined #xwiki  \n07:41\u00a0<vmassol>\u00a0has quit  \n08:01\u00a0<polx>\u00a0has joined #xwiki  \n08:06\u00a0<vmassol>\u00a0has joined #xwiki  \n08:18\u00a0<vmassol>\u00a0has quit  \n08:26\u00a0<vmassol>\u00a0has joined #xwiki  \n08:28\u00a0<mflorea>\u00a0has quit  \n08:29\u00a0<mflorea>\u00a0has joined #xwiki  \n08:33\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:37\u00a0<vmassol>\u00a0good morning all  \n08:38\u00a0<vmassol>\u00a0reminder: 4.3M1 release is for next Monday so we have 1 week left to commit stuff  \n08:38\u00a0<vmassol>\u00a0sdumitriu: would be good to commit your page generation feature ASAP  \n08:41\u00a0<mflorea>\u00a0has quit  \n08:56\u00a0<vmassol>\u00a0has quit  \n09:00\u00a0<mflorea>\u00a0has joined #xwiki  \n09:18\u00a0<vmassol>\u00a0has joined #xwiki  \n09:28\u00a0<sburjan>\u00a0has joined #xwiki  \n09:59\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:39\u00a0<dirk\\_schmitt>\u00a0has joined #xwiki  \n10:39\u00a0<Slashman>\u00a0has joined #xwiki  \n11:01\u00a0<dirk\\_schmitt>\u00a0Yesterday I described here and in \"[xwiki-users] Problem migration xwiki 3.1.1 --> 4.2 below postgresql 'Database xwiki needs migration(s)'\" my migration problem.  \n11:01\u00a0<dirk\\_schmitt>\u00a0Anybody around here who can help me to track down a way around my problem ?  \n11:02\u00a0<Denis1>\u00a0has joined #xwiki  \n11:03\u00a0<Denis1>\u00a0is now known as <Denis>  \n11:08\u00a0<jvdrean>\u00a0has left #xwiki  \n11:09\u00a0<vmassol>\u00a0hi everyone, we need a release manager for XWiki 4.3M1  \n11:09\u00a0<vmassol>\u00a0here's the roster: http://dev.xwiki.org/xwiki/bin/view/Community/ReleaseManagerRoster  \n11:10\u00a0<vmassol>\u00a0good candidates IMO: jerome, edy, Denis :)  \n11:15\u00a0<dirk\\_schmitt>\u00a0Denis: May you please assist me in my issue described yesterday here and in Yesterday I described here and in \"[xwiki-users] Problem migration xwiki 3.1.1 --> 4.2 below postgresql 'Database xwiki needs migration(s)'\" ?  \n11:19\u00a0<+Denis>\u00a0dirk\\_schmitt: Sure, but from the information in your mail, I have absolutely no clue :(  \n11:21\u00a0<dirk\\_schmitt>\u00a0What can I do to achieve more informations ?  \n11:21\u00a0<+Denis>\u00a0is it XE or XEM ?  \n11:23\u00a0<dirk\\_schmitt>\u00a0xwiki-enterprise-web-4.2.war deployed to tomcat-7  \n11:24\u00a0<dirk\\_schmitt>\u00a0(sorry if I not catching the acronyms)  \n11:25\u00a0<dirk\\_schmitt>\u00a0The old instance (set to read-only is still available \u00a0below https://www.computer42.org/xwiki/bin/view/Main/ )  \n11:25\u00a0<+Denis>\u00a0could you provide the catalina.out ? from your mail, it seems many useful messages are not there. Have you change the default login level ?  \n11:26\u00a0<+Denis>\u00a0logging level  \n11:27\u00a0<dirk\\_schmitt>\u00a0The logback.xml has been switched to syslog. \u00a0A moment, I will revert the logback.xml and generate a new logfile.  \n11:28\u00a0<+Denis>\u00a0be sure to start over with your fresh original DB  \n11:29\u00a0<+Denis>\u00a0and be careful, two new table are created during import, these should be dropped  \n11:31\u00a0<+Denis>\u00a0(DATABASECHANGELOG and DATABASECHANGELOGLOCK tables)  \n11:31\u00a0<dirk\\_schmitt>\u00a0The new catalina.out is below http://www.computer42.org/~dirk/tmp/catalina.out  \n11:33\u00a0<+Denis>\u00a0seems you have not followed my advices about the two table above :)  \n11:33\u00a0<vmassol>\u00a0Denis: those are really a pain  \n11:33\u00a0<vmassol>\u00a0every user has the same issue with those tables  \n11:33\u00a0<+Denis>\u00a0there are not, this is just the way you restore your db that is bad  \n11:33\u00a0<vmassol>\u00a0it would be so cool to be able to do something about it :)  \n11:34\u00a0<vmassol>\u00a0maybe a message to explain how to restore the DB properly or something  \n11:34\u00a0<+Denis>\u00a0simple teach people that to restore a fresh db, the best way it to drop the DB first  \n11:34\u00a0<vmassol>\u00a0it's not a problem if the solution is manual but it would be good that teh users don't have to contact us  \n11:35\u00a0<vmassol>\u00a0a message would probably be the simplest to do, wdyt?  \n11:35\u00a0<dirk\\_schmitt>\u00a0Denis: Converning the 2 tables - what documentation I have missed to read?  \n11:35\u00a0<dirk\\_schmitt>\u00a0^h^h^hConcerning  \n11:35\u00a0<+Denis>\u00a0but this is not our job to teach peoples how to use their DBMS, and all differs  \n11:36\u00a0<+Denis>\u00a0dirk\\_schmitt: just told you that to start over you need to start with your original DB, and that you should be careful these table have been properly dropped  \n11:38\u00a0<+Denis>\u00a0vmassol: the main issue for us to be so clever is to know this is a mistake to have these table in the way. This only happen on failed migration that are poorly retried  \n11:38\u00a0<dirk\\_schmitt>\u00a0I was done the work on the original db. (the live read only instance is running on a copy).  \n11:38\u00a0<dirk\\_schmitt>\u00a0Should I now drop these tables ?  \n11:38\u00a0<vmassol>\u00a0dirk\\_schmitt: here:  \n11:39\u00a0<vmassol>\u00a0http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Backup  \n11:39\u00a0<vmassol>\u00a0especially the part \"It's important that the backup is done with --add-drop-database since when you restore it it's important that tables that might have been created are removed.\"  \n11:39\u00a0<vmassol>\u00a0AFAIK\u2026 Denis would know better  \n11:39\u00a0<+Denis>\u00a0dirk\\_schmitt: you said you are producing a new log. I need that you start over from the original DB and that you ensure these to table does not exists after restore of your original DB  \n11:44\u00a0<dirk\\_schmitt>\u00a0I'm working with the original db. (The readonly live instance i mentioned before is running on a copy of the original database).  \n11:45\u00a0<dirk\\_schmitt>\u00a0So have no backup of the database without these 2 tables.  \n11:45\u00a0<dirk\\_schmitt>\u00a0I'm try to migrate from a XWiki 3.1.1 --> 4.2.  \n11:45\u00a0<dirk\\_schmitt>\u00a0I think that these 2 tables are for a long time in my database. (In the past there were some blockers which doesn't allow the XWiki upgrade on postgres).  \n11:45\u00a0<dirk\\_schmitt>\u00a0Just a note: The upgrade/migration of another installation yesterday was successful.  \n11:45\u00a0<dirk\\_schmitt>\u00a0Denis: Should I now drop these tables ?  \n11:47\u00a0<+Denis>\u00a0dirk\\_schmitt: these tables could have only been created by a attempt of a 4.x migration, it means your original database is not really clean. Anyway, drop them, and let me see the log again  \n11:48\u00a0<vmassol>\u00a0Denis: I'm about to start migrating xwiki.org to 4.2 this afternoon\u2026.  \n11:48\u00a0<vmassol>\u00a0Denis: would be great if you are around ;)  \n11:48\u00a0<dirk\\_schmitt>\u00a0vmassol: The --add-drop-database note is attached to mysql, not postgresql.  \n11:48\u00a0<vmassol>\u00a0dirk\\_schmitt: indeed  \n11:48\u00a0<+Denis>\u00a0vmassol: I'll be around until 16:30  \n11:48\u00a0<vmassol>\u00a0ok thanks  \n11:51\u00a0<jvdrean>\u00a0has joined #xwiki  \n11:54\u00a0<dirk\\_schmitt>\u00a0Denis: http://www.computer42.org/~dirk/tmp/11\\_53-catalina.out  \n11:55\u00a0<dirk\\_schmitt>\u00a0The two tables are created again after start of tomcat (and access xwiki).  \n11:55\u00a0<+Denis>\u00a0which is normal  \n12:01\u00a0<dirk\\_schmitt>\u00a0I see in the successful migrated instance from yesterday the same tables. So these tables are not dropped after a migration ?  \n12:01\u00a0<dirk\\_schmitt>\u00a0This implies if I take a backup and run 'dropdb xwiki && pg\\_restore -C ...' I will get the same result as in the beginning ?  \n12:03\u00a0<+Denis>\u00a0dirk\\_schmitt: no these tables are created by the first migration to 4.x, and these keep a record of the schema updates executed over the DB. If you have run an older version of the migration procedure at some point, the executed update has been updated and therefore conflict with then new one. This is why these table should not exists on a table earlier to 4.x  \n12:05\u00a0<+Denis>\u00a0dirk\\_schmitt: well, now regarding the failure, I am not a postgresql expert, but it seems you have a permission issue during some access to the data, and in particular large objects.  \n12:07\u00a0<+Denis>\u00a0dirk\\_schmitt: maybe you would like to execute something like http://pastebin.com/49cD59FW on your DB to fixup the issue, and simply restart the migration (no need to start over from the beginning now)  \n12:12\u00a0<+Denis>\u00a0dirk\\_schmitt: maybe Sergui could have better clue about this issue, since it is the R35102XWIKI777: Migration for XWIKI-7771: Fix the LOBs wrongly created by the 3.2-3.5 mapping files for PostgreSQL, that failed on LOBs in fact. This is possible we have a particular issue in your case.  \n12:12\u00a0<+Denis>\u00a0sdumitriu: any clue on the above ?  \n12:14\u00a0<+Denis>\u00a0sdumitriu: the log is http://www.computer42.org/~dirk/tmp/11\\_53-catalina.out  \n12:18\u00a0<cdop>\u00a0has joined #xwiki  \n12:18\u00a0<dirk\\_schmitt>\u00a0Denis: There should I use your command sequence ? (what language ?)  \n12:18\u00a0<dirk\\_schmitt>\u00a0Is it o.k. to use this shell alternative to produce the sql code?  \n12:18\u00a0<dirk\\_schmitt>\u00a0for id in $(psql \u00a0-c 'select loid from pg\\_catalog.pg\\_largeobject;') ; do echo ALTER LARGE OBJECT $id \u00a0OWNER to ownsers\\_username ; done  \n12:19\u00a0<dirk\\_schmitt>\u00a0^h^h^h^howners\\_username  \n12:21\u00a0<+Denis>\u00a0dirk\\_schmitt: I could not help on that, let sdumitriu provide some advice here  \n12:25\u00a0<dirk\\_schmitt>\u00a0Should \u00a0'owners\\_username ' be the database user used by hibernate.xml ?  \n12:28\u00a0<mflorea>\u00a0has quit  \n12:28\u00a0<dirk\\_schmitt>\u00a0sdumitriu is away since ~17h ;-)  \n12:31\u00a0<+Denis>\u00a0dirk\\_schmitt: he should be back in not so long then :)  \n12:34\u00a0<+Denis>\u00a0dirk\\_schmitt: maybe this is not a permission issue but an issue with the migration itself. Reading your mail back, it seems you are starting from a 3.1.1 version, and that migration fix an issue introduced in the mapping of 3.2, currious that it is executed than.  \n12:35\u00a0<tmortagne>\u00a0has quit  \n12:37\u00a0<+Denis>\u00a0dirk\\_schmitt: if you are sure you do not have use a 3.2 mapping, you may simply go over, and force skipping that migration using: xwiki.store.migration.ignored=35102 in xwiki.cfg  \n12:38\u00a0<+Denis>\u00a0dirk\\_schmitt: use this with care however since it could cause more harm than good if use wrongly, only sdumitriu could tell you more now :)  \n12:49\u00a0<dirk\\_schmitt>\u00a0O.k. I will go to lunch first :-)  \n12:55\u00a0<cdop>\u00a0question: can I specify which user group \\*only\\* are allowed to use wysiwyg or which user group may select between wysiwyg and source editing?  \n12:57\u00a0<vmassol>\u00a0cdop: not ouf of the box, the editor to use is a profile preference  \n12:57\u00a0<vmassol>\u00a0(ie each user choses what editor to use)  \n12:58\u00a0<vmassol>\u00a0now nothing prevents you from writing some script/change some vm files to do what you want but it's not a built in feature and I'm not sure we would want it  \n12:59\u00a0<vmassol>\u00a0I'd be interested to know the reason for which you'd like to do this  \n12:59\u00a0<cdop>\u00a0well i want to use the xwiki in our company and i am afraid that non-techs would find \"source-editing\" and break stuff.  \n12:59\u00a0<vmassol>\u00a0ok that makes sense  \n13:00\u00a0<vmassol>\u00a0for simple users we don't show the wiki editor  \n13:00\u00a0<vmassol>\u00a0so it would make sense to also not show the source tab in the WYSIWYG editor IMO  \n13:00\u00a0<vmassol>\u00a0cdop: you should raise a jira issue about this  \n13:00\u00a0<+sburjan>\u00a0we already have that afaik in WYSIWYG Admin page  \n13:00\u00a0<+sburjan>\u00a0to hide the source tab  \n13:01\u00a0<vmassol>\u00a0sburjan: no  \n13:01\u00a0<vmassol>\u00a0that's different  \n13:01\u00a0<cdop>\u00a0yes, but us in the tech-department prefer \u00a0(and should) be able to edit source.  \n13:01\u00a0<cdop>\u00a0so it should be a permission thing.  \n13:01\u00a0<vmassol>\u00a0its not permission  \n13:01\u00a0<vmassol>\u00a0it's profile-type based  \n13:02\u00a0<vmassol>\u00a0simple users should not see this tab by default I agree  \n13:02\u00a0<vmassol>\u00a0since they don't see the wiki editor menu entry either  \n13:03\u00a0<cdop>\u00a0ah ok, now i get it  \n13:03\u00a0<cdop>\u00a0so the issue should be called \"Hide WYSIWYG-Sourcetab for simple users\".  \n13:03\u00a0<vmassol>\u00a0exactly  \n13:04\u00a0<cdop>\u00a0ok, gonna report it :)  \n13:04\u00a0<vmassol>\u00a0cool  \n13:08\u00a0<+sburjan>\u00a0vmassol: I don't understand. So if a simple user type is selected, then the source tab shoul be hidden ? as a profile based preference, not a global setting ?  \n13:14\u00a0<cdop>\u00a0hmm it seems that a \"simple user\" can switch himself to a \"advanced user\". so a noob could gain source-editing-access... no good.  \n13:18\u00a0<+sburjan>\u00a0yes  \n13:19\u00a0<vmassol>\u00a0has quit  \n13:20\u00a0<cdop>\u00a0ok, but i guess thats not that bad. as most noob users wont even find their profile-page ;)  \n13:21\u00a0<vmassol>\u00a0has joined #xwiki  \n13:21\u00a0<cdop>\u00a0and as my users are all from our company, we can blame them if they twiddle to much :)  \n13:21\u00a0<vmassol>\u00a0cdop: that's perfectly normal and wanted  \n13:23\u00a0<vmassol>\u00a0(sorry was offline during a few seconds)  \n13:23\u00a0<vmassol>\u00a0I was ansswering to:  \n13:23\u00a0<vmassol>\u00a0\"hmm it seems that a \"simple user\" can switch himself to a \"advanced user\". so a noob could gain source-editing-access... no good.\"  \n13:24\u00a0<vmassol>\u00a0\"vmassol: I don't understand. So if a simple user type is selected, then the source tab shoul be hidden ? as a profile based preference, not a global setting ?\"  \n13:24\u00a0<vmassol>\u00a0yes  \n13:25\u00a0<cdop>\u00a0ok, thanks. so ok i have an advanced question. i want not to use those (existing) formatting macros. i want to select text in wysiwyg-editor, press one button in the toolbar and have it formatted/highlighted as \"python-code\", press another button have it formatted as \"java-code\", press another and have all formatting/high-lighting removed.  \n13:26\u00a0<cdop>\u00a0in case i dont want to use my time with that, but \"buy\" developer-time/developments from the xwiki-devs, how would that work?  \n13:27\u00a0<cdop>\u00a0<-working in a german company  \n13:27\u00a0<vmassol>\u00a0ouch  \n13:27\u00a0<vmassol>\u00a0mistake  \n13:27\u00a0<vmassol>\u00a0I hate that  \n13:28\u00a0<cdop>\u00a0german companies? i agree .)  \n13:28\u00a0<vmassol>\u00a0:)  \n13:28\u00a0<vmassol>\u00a0no, hitting delete space instead of delete page  \n13:28\u00a0<cdop>\u00a0oh :) even worse  \n13:29\u00a0<cdop>\u00a0but for that there is roleback, right?  \n13:29\u00a0<vmassol>\u00a0no :(  \n13:29\u00a0<cdop>\u00a0:-/  \n13:33\u00a0<vmassol>\u00a0cdop:  \n13:33\u00a0<vmassol>\u00a0there's rollback but only one page at a time  \n13:34\u00a0<vmassol>\u00a0cdop: you can contact one of the companies offering professional support, see http://www.xwiki.org/xwiki/bin/view/Main/Support#HProfessionalSupport  \n13:48\u00a0<vmassol>\u00a0has quit  \n13:50\u00a0<vmassol>\u00a0has joined #xwiki  \n13:54\u00a0<cdop>\u00a0ah thanks :)  \n13:57\u00a0<+Denis>\u00a0vmassol: there isn't any confirmation ?  \n13:57\u00a0<vmassol>\u00a0Denis: there is but it's the same one as when you're deleting a page  \n13:58\u00a0<vmassol>\u00a0so i thought I was deleting just a page  \n13:58\u00a0<vmassol>\u00a0the menus are next to each other  \n13:58\u00a0<vmassol>\u00a0...  \n13:58\u00a0<vmassol>\u00a0we need to make it harder to make a mistake  \n13:58\u00a0<+Denis>\u00a0a proper confirmation should list what would be deleted in details !  \n13:58\u00a0<vmassol>\u00a0imagine if I had deleted the XWiki space ;)  \n13:58\u00a0<vmassol>\u00a0wich over 10K users  \n13:58\u00a0<vmassol>\u00a0\\* with  \n13:59\u00a0<vmassol>\u00a0Denis: yes good idea  \n13:59\u00a0<vmassol>\u00a0could be a livetable listing all the pages that will be deleted  \n13:59\u00a0<+Denis>\u00a0the snipped we had before just do that, and it was really good to notice what your are deleting is finally not what you expect  \n13:59\u00a0<+Denis>\u00a0(not in a livetable, but would be better of course)  \n14:01\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-8320  \n14:24\u00a0<mflorea>\u00a0has joined #xwiki  \n14:28\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n14:30\u00a0<vmassol>\u00a0would be interesting to extend JSX/SSX support to multiwiki....  \n14:31\u00a0<sburjan`>\u00a0has quit  \n14:31\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n14:31\u00a0<vmassol>\u00a0for ex I'd like to add a banner to explain that the wiki is in maintenance and thus read only  \n14:31\u00a0<vmassol>\u00a0I caneasily do this in JSX but only for the current wiki....  \n14:31\u00a0<vmassol>\u00a0to make it work in a farm I need to override the skin and copy a whole vm file  \n14:46\u00a0<mrvanes>\u00a0has joined #xwiki  \n14:57\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n14:59\u00a0<sburjan`>\u00a0has quit  \n14:59\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n15:01\u00a0<@sdumitriu>\u00a0Denis, dirk\\_schmitt: Good morning  \n15:02\u00a0<+Denis>\u00a0sdumitriu: Good morning Sergiu !  \n15:03\u00a0<@sdumitriu>\u00a0Hm, weird permission issue...  \n15:03\u00a0<@sdumitriu>\u00a0Never saw that  \n15:04\u00a0<+Denis>\u00a0is it really a permission issue ? since he says migrating from 3.1  \n15:05\u00a0<+Denis>\u00a0is it expected that the migration is executed ?  \n15:07\u00a0<+Denis>\u00a0could the migration be simply ignored by force ?  \n15:09\u00a0<@sdumitriu>\u00a0First, dirk\\_schmitt are you sure that's a 3.1.2?  \n15:11\u00a0<@sdumitriu>\u00a0The migrator is supposed to do nothing if the data doesn't need migration  \n15:34\u00a0<dirk\\_schmitt>\u00a0Hi Sergiu :-)  \n15:34\u00a0<dirk\\_schmitt>\u00a0I have 2 instances. One you know, there you have helped me in January 2011 to fix an issue. This instance is migrated and seem to work. -->http://www.pfarreiengemeinschaft-westum-loehndorf.de/xwiki/.  \n15:34\u00a0<dirk\\_schmitt>\u00a0The other intance is (currently read only) available below https://www.computer42.org/xwiki/  \n15:34\u00a0<dirk\\_schmitt>\u00a0It reports to be 'XWIKI ENTERPRISE 3.1.1'  \n15:34\u00a0<dirk\\_schmitt>\u00a0The migration of both was delayed because of the various postgres related problems, e.g. XWIKI-7564.  \n15:34\u00a0<dirk\\_schmitt>\u00a0If it help I can switch of the \"read only mode\".  \n15:34\u00a0<dirk\\_schmitt>\u00a0The migration should be done on a different installation with copied database in a new tomcat (v7) container.  \n15:37\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n15:39\u00a0<sburjan`>\u00a0has quit  \n15:39\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n15:44\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n15:47\u00a0<sburjan`>\u00a0has quit  \n15:47\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n16:01\u00a0<rrodriguez>\u00a0has joined #xwiki  \n16:28\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n16:28\u00a0<sburjan`>\u00a0has quit  \n16:28\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n16:29\u00a0<dirk\\_schmitt>\u00a0sdumitriu: ping  \n16:42\u00a0<@sdumitriu>\u00a0Pong  \n16:45\u00a0<vmassol>\u00a0has quit  \n16:46\u00a0<vmassol>\u00a0has joined #xwiki  \n16:49\u00a0<cdop>\u00a013 minutes... well he should be somewhere between mars and jupiter.  \n17:03\u00a0<@sdumitriu>\u00a0Yep, I was just watching Curiosity pass by  \n17:03\u00a0<vmassol>\u00a0:)  \n17:03\u00a0<@sdumitriu>\u00a0(was actually making a tea)  \n17:05\u00a0<dirk\\_schmitt>\u00a0sdumitriu: As I stated before, the migration should upgrade 3.1.1 to 4.2.  \n17:19\u00a0<rrodriguez>\u00a0has quit  \n17:27\u00a0<vmassol>\u00a0guys, we need to set the status flags on all those issues with patches: http://jira.xwiki.org/secure/Dashboard.jspa?selectPageId=10000#Issue-Statistics/10472  \n17:40\u00a0<vmassol>\u00a0only 27 to go\u2026. need help!  \n17:41\u00a0<vmassol>\u00a0(I'm starting from the bottom)  \n17:41\u00a0<sburjan`>\u00a0has quit  \n17:42\u00a0<sburjan>\u00a0has quit  \n17:52\u00a0<vmassol>\u00a020 more  \n18:03\u00a0<vmassol>\u00a0Denis: there are a few patches created by your in jira, probably when you were not a committer, you could maybe review htem now? )  \n18:03\u00a0<vmassol>\u00a0:)  \n18:03\u00a0<vmassol>\u00a0(here's one for ex: http://jira.xwiki.org/browse/XWIKI-3328 )  \n18:10\u00a0<vmassol>\u00a013 to go...  \n18:13\u00a0<vmassol>\u00a0AndreasJonsson: I have a patch for your to review: http://jira.xwiki.org/browse/XWIKI-6202 :)  \n18:23\u00a0<@sdumitriu>\u00a0Denis: An update on Dirk's problem: There were a few broken versions in xwikircs related to Scheduler.WatchlistDailyNotifier that triggered the R35102 migrator  \n18:24\u00a0<@sdumitriu>\u00a0I assume that those versions were created when Dirk tried to upgrade this instance before, since they're all consecutive versions between 20 and 21 February  \n18:24\u00a0<+AndreasJonsson>\u00a0vmassol: I had forgotten that one. :) \u00a0I'll have a look at it.  \n18:24\u00a0<@sdumitriu>\u00a0I reset the history of that document, hoping that the upgrade will go smoothly from now on  \n18:24\u00a0<vmassol>\u00a0cool :)  \n18:25\u00a0<vmassol>\u00a0just finished setting the status on all issues with patches  \n18:25\u00a0<vmassol>\u00a0and just sent an email about it  \n18:25\u00a0<vmassol>\u00a0http://jira.xwiki.org/secure/Dashboard.jspa?selectPageId=10000#Issue-Statistics/10472  \n18:25\u00a0<@sdumitriu>\u00a0I still have no idea why the permission error was raised, that doesn't look like a normal behavior  \n18:27\u00a0<sburjan`>\u00a0has joined #xwiki  \n18:40\u00a0<sdumitriu>\u00a0has quit  \n18:42\u00a0<dirk\\_schmitt>\u00a0sdimitru: The migration seems to run a bit longer - but fails :-/  \n18:42\u00a0<dirk\\_schmitt>\u00a0--> http://www.computer42.org/~dirk/tmp/18\\_40-catalina.out  \n18:42\u00a0<+Denis>\u00a0dirk\\_schmitt: that one is for me ;)  \n18:43\u00a0<dirk\\_schmitt>\u00a0Great :-)  \n18:44\u00a0<+Denis>\u00a0dirk\\_schmitt: I think you are facing the following issue: http://jira.xwiki.org/browse/XWIKI-8129  \n18:48\u00a0<dirk\\_schmitt>\u00a0Anybody around who can translate the sql statemin in XWIKI-8129 to postgres dialext ?  \n18:55\u00a0<+Denis>\u00a0vmassol: sorry, I was out of the office, seems you sort it out yourself  \n18:55\u00a0<vmassol>\u00a0Denis: what part?  \n18:55\u00a0<+Denis>\u00a0qualifying patches  \n18:55\u00a0<vmassol>\u00a0ah yes  \n18:56\u00a0<vmassol>\u00a0there are quite a few there written by you\u2026.  \n18:56\u00a0<+Denis>\u00a0yes I know  \n18:57\u00a0<+Denis>\u00a0and some are awaiting sergiu attention for a while :)  \n18:58\u00a0<vmassol>\u00a0ah we don't have a status for \"awaiting sergiu's attention\" :)  \n19:04\u00a0<+Denis>\u00a0could not this be added ? it would be more used than future, no ? :D  \n19:11\u00a0<vmassol>\u00a0has quit  \n19:17\u00a0<sdumitriu>\u00a0has joined #xwiki  \n19:18\u00a0<@sdumitriu>\u00a0dirk\\_schmitt: Back, any progress?  \n19:24\u00a0<coud5>\u00a0has joined #xwiki  \n19:26\u00a0<Slashman>\u00a0has quit  \n19:35\u00a0<abusenius>\u00a0has joined #xwiki  \n19:41\u00a0<vmassol>\u00a0has joined #xwiki  \n19:53\u00a0<vmassol>\u00a0has quit  \n20:01\u00a0<technickal\\_nick>\u00a0has joined #xwiki  \n20:03\u00a0<dirk\\_schmitt>\u00a0Next round: http://www.computer42.org/~dirk/tmp/20\\_01-catalina.out  \n20:04\u00a0<dirk\\_schmitt>\u00a0For http://jira.xwiki.org/browse/XWIKI-8129 I have added the sql statement compatible with postgresql.  \n20:15\u00a0<@sdumitriu>\u00a0Hm, another weird result...  \n20:17\u00a0<vmassol>\u00a0has joined #xwiki  \n20:18\u00a0<@sdumitriu>\u00a0OK, I know what's causing that  \n20:18\u00a0<@sdumitriu>\u00a0Did you remember to drop the databasechangelog table?  \n20:19\u00a0<@sdumitriu>\u00a0DATABASECHANGELOG and DATABASECHANGELOGLOCK  \n20:19\u00a0<dirk\\_schmitt>\u00a0No - I will do it now ;-)  \n20:20\u00a0<@sdumitriu>\u00a0Denis: We probably shouldn't use this.logCount++ in the migrator, since that's not a stable indicator  \n20:21\u00a0<@sdumitriu>\u00a0We should use a more stable way of constructing changelog identifiers, like append table names  \n20:30\u00a0<vmassol>\u00a0has quit  \n20:32\u00a0<dirk\\_schmitt>\u00a0Is this o.k. ?  \n20:33\u00a0<dirk\\_schmitt>\u00a0has quit  \n20:36\u00a0<dirk42>\u00a0has joined #xwiki  \n20:40\u00a0<dirk42>\u00a0dirk42=dirk\\_schmitt, back again :-)  \n20:46\u00a0<mflorea>\u00a0has quit  \n20:47\u00a0<+Denis>\u00a0sdumitriu: this is not really an issue, the problem is that the DB of dirk contains an older version of the schema update  \n20:48\u00a0<+sburjan`>\u00a0maybe the notion of migrator is not enough. we might some sanitazor  \n20:48\u00a0<+Denis>\u00a0so even with more stable ids, it will fails the same way, since we have changed the executed schema updates  \n20:49\u00a0<+sburjan`>\u00a0I wonder if clearing the stas table will provide a deecent solution to these problems. Maybe users don't care that much about stats  \n20:49\u00a0<@sdumitriu>\u00a0sburjan`: I don't agree, some users care a lot about stats  \n20:49\u00a0<+Denis>\u00a0sburjan`: we cannot manage a migration starting from anything and arriving to the good thing, there is a minimum to be expect from the xwiki \u00a0administrator  \n20:51\u00a0<+Denis>\u00a0regarding the stats, I agree that we may do something about it. The reason I have not is that I do not know the right SQL to be used for each DBs  \n20:51\u00a0<dirk42>\u00a0next round: https://www.computer42.org/~dirk/tmp/20\\_20-catalina.out  \n20:53\u00a0<@sdumitriu>\u00a0Another stats problem  \n20:54\u00a0<@sdumitriu>\u00a0This time not in xwikistatsdoc, but in xwikistatsreferer  \n20:54\u00a0<@sdumitriu>\u00a0So run the same SQL to fix stats for the xwikistatsreferer table  \n20:54\u00a0<dirk42>\u00a0Denis: The SQL I added to the issue seems to be compliant to the sql standard. Maybe this works.  \n20:54\u00a0<dirk42>\u00a0I think performance is not important on database migration, because this is (hopefully) a one time action.  \n20:55\u00a0<+Denis>\u00a0dirk42: you need to execute on the 3 tables as explained in the JIRA issue  \n20:55\u00a0<vmassol>\u00a0has joined #xwiki  \n20:55\u00a0<@sdumitriu>\u00a0And xwikistatsvisit as well  \n20:56\u00a0<+Denis>\u00a0dirk42: the same SQL on mysql with a large number of stats, and it could be very large, cause many hours of processing (almost endless from the user point of view), so I cannot put that in the migration automatically  \n20:56\u00a0<+Denis>\u00a0dirk42: we may have a farm of thousand of wikis to migrate !  \n20:57\u00a0<+Denis>\u00a0dirk42: not need to start over after your cleanup, it should continue where it left over  \n21:07\u00a0<vmassol>\u00a0has quit  \n21:17\u00a0<dirk42>\u00a0O.k. but as a temporary solution it would good to provide a log message pointing to the issue \u00a0and the workaround.  \n21:19\u00a0<dirk42>\u00a0BTW: The column prefix is different in each table. \u00a0I have add the \"full\" script to http://jira.xwiki.org/browse/XWIKI-8129  \n21:27\u00a0<cdop>\u00a0has quit  \n21:27\u00a0<vmassol>\u00a0has joined #xwiki  \n21:42\u00a0<+Denis>\u00a0dirk42: thanks, I have also update the MySQL script  \n21:43\u00a0<+Denis>\u00a0dirk42: is your migration ok now ?  \n21:47\u00a0<+Denis>\u00a0sdumitriu: thanks for the catch, it is already late here ;)  \n21:59\u00a0<dirk42>\u00a0:-) The migration has come to a end. Thank you all for your excellent help.  \n22:00\u00a0<mrvanes>\u00a0has quit  \n23:00\u00a0<technickal\\_nick>\u00a0has quit  \n23:01\u00a0<abusenius>\u00a0has quit  \n23:04\u00a0<vmassol>\u00a0has quit  \n23:15\u00a0<dirk42>\u00a0has left #xwiki  \n23:34\u00a0<coud5>\u00a0has quit  \n23:34\u00a0<vmassol>\u00a0has joined #xwiki  \n23:39\u00a0<vmassol>\u00a0has quit  \n\n"}