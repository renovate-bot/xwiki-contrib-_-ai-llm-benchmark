{"id": "dev:IRC.xwikiArchive20140312", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140312", "title": "IRC Archive for channel #xwiki on 12 March 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has joined #xwiki  \n00:30\u00a0<vmassol>\u00a0has quit  \n00:41\u00a0<GuillaumeF>\u00a0has quit  \n00:57\u00a0<OSIMasson>\u00a0has quit  \n01:01\u00a0<lucaa>\u00a0has quit  \n01:06\u00a0<abusenius\\_>\u00a0has quit  \n01:19\u00a0<OSIMasson>\u00a0has joined #xwiki  \n01:57\u00a0<OSIMasson>\u00a0has quit  \n01:58\u00a0<benoitc>\u00a0has quit  \n01:58\u00a0<OSIMasson>\u00a0has joined #xwiki  \n01:58\u00a0<benoitc\\_>\u00a0has joined #xwiki  \n01:59\u00a0<OSIMasson>\u00a0has quit  \n02:04\u00a0<D-Spair>\u00a0has quit  \n02:04\u00a0<D-Spair>\u00a0has joined #xwiki  \n02:42\u00a0<OSIMasson>\u00a0has joined #xwiki  \n02:48\u00a0<OSIMasson>\u00a0has quit  \n02:48\u00a0<OSIMasson>\u00a0has joined #xwiki  \n02:54\u00a0<OSIMasson>\u00a0has quit  \n02:58\u00a0<OSIMasson>\u00a0has joined #xwiki  \n03:02\u00a0<OSIMasson>\u00a0has quit  \n03:38\u00a0<OSIMasson>\u00a0has joined #xwiki  \n03:44\u00a0<OSIMasson>\u00a0has quit  \n04:19\u00a0<OSIMasson>\u00a0has joined #xwiki  \n04:21\u00a0<OSIMasson>\u00a0has quit  \n04:30\u00a0<OSIMasson>\u00a0has joined #xwiki  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:32\u00a0<OSIMasson>\u00a0has quit  \n06:03\u00a0<Denis>\u00a0has quit  \n07:05\u00a0<silverdrop>\u00a0has joined #xwiki  \n07:51\u00a0<sbaloul>\u00a0has joined #xwiki  \n07:57\u00a0<evalica>\u00a0has joined #xwiki  \n08:09\u00a0<msmeria>\u00a0has joined #xwiki  \n08:14\u00a0<polx>\u00a0has joined #xwiki  \n08:34\u00a0<Denis>\u00a0has joined #xwiki  \n08:36\u00a0<sbaloul>\u00a0has quit  \n08:54\u00a0<cjd>\u00a0has joined #xwiki  \n09:03\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:04\u00a0<polx>\u00a0has quit  \n09:26\u00a0<mflorea>\u00a0has joined #xwiki  \n09:35\u00a0<benoitc\\_>\u00a0is now known as <benoitc>  \n09:35\u00a0<benoitc>\u00a0has joined #xwiki  \n09:36\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:42\u00a0<vmassol>\u00a0has joined #xwiki  \n09:47\u00a0<ekarlso>\u00a0has quit  \n10:04\u00a0<spu7nic>\u00a0has joined #xwiki  \n10:04\u00a0<lucaa>\u00a0has joined #xwiki  \n10:44\u00a0<GuillaumeF>\u00a0has joined #xwiki  \n10:50\u00a0<polx>\u00a0has joined #xwiki  \n11:08\u00a0<polx>\u00a0has quit  \n11:12\u00a0<silverdrop>\u00a0has quit  \n11:16\u00a0<spu7nic>\u00a0Hi there :), is it possible to use the internally generated object id as the reference key for DBList fields? And if so, is it possible to map this property to a custom table?  \n11:18\u00a0<OSIMasson>\u00a0has joined #xwiki  \n11:20\u00a0<OSIMasson>\u00a0has quit  \n11:20\u00a0<OSIMasson>\u00a0has joined #xwiki  \n11:25\u00a0<OSIMasson>\u00a0has quit  \n11:28\u00a0<cjd>\u00a0mflorea: Got a question about the wysiwyg, if I wanted to trap every keypress/paste/etc which alters the content in the editor, where would I want to look?  \n11:30\u00a0<cjd>\u00a0I'm trying to mockup a very basic realtime binding for it and what comes to mind is to just trap any event which might change the content and then do an innerHTML check each time and diff that against the previous state  \n11:30\u00a0<cjd>\u00a0it's processor heavy but it's a start  \n11:31\u00a0<mflorea>\u00a0cjd, so you don't want to prevent the change right? you just want to listen to the events?  \n11:31\u00a0<cjd>\u00a0right  \n11:31\u00a0<cjd>\u00a0yeah, s/trap/listen to/g \u00a0\u00a0sorry  \n11:32\u00a0<evalica1>\u00a0has joined #xwiki  \n11:33\u00a0<mflorea>\u00a0The editor uses an iframe for the rich text area, so you should be able to add your listeners from outside the WYSIWYG editor on the window/document of the iframe. Note that the editor replaces the iframe sometimes, so best is to access the iframe through the JS API provided by the editor and to listen to the editor events  \n11:34\u00a0<mflorea>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/WYSIWYG+Editor+Module  \n11:34\u00a0<mflorea>\u00a0(xwiki.org doesn't respond now, but you can take a look later)  \n11:34\u00a0<mflorea>\u00a0best is to avoid entering the GWT code  \n11:35\u00a0<cjd>\u00a0hmm  \n11:35\u00a0<cjd>\u00a0so gwt broadcasts some events which I can grab from js?  \n11:35\u00a0<mflorea>\u00a0something like Wysiwyg.getInstance('content').getRichTextArea() should give you the iframe  \n11:35\u00a0<cjd>\u00a0ok because this: monitorEvents(jQuery('.gwt-RichTextArea')[0], 'keydown');  \n11:35\u00a0<cjd>\u00a0doesn't show any events  \n11:36\u00a0<mflorea>\u00a0it doesn't work like this. .gwt-RichTextArea is an iframe, the events are inside the iframe, in the inner window/document. So you need to listen to the iframe.contentWindow and iframe.contentWindow.document  \n11:37\u00a0<cjd>\u00a0ahh ok  \n11:37\u00a0<cjd>\u00a0ok got the keypress events  \n11:37\u00a0<mflorea>\u00a0you're welcome  \n11:37\u00a0<cjd>\u00a0so the textarea is replaced from time to time?  \n11:38\u00a0<cjd>\u00a0errr I mean iframe  \n11:39\u00a0<mflorea>\u00a0yes, iirc, the iframe is replaced in some cases, when you reload the macros for instance (I think). So if you notice that your listener is not called any more then you should listen to some of the events from http://extensions.xwiki.org/xwiki/bin/view/Extension/WYSIWYG+Editor+Module , xwiki:wysiwyg:\\* I don't remember exactly and I can't load the page now  \n11:39\u00a0<cjd>\u00a0ahh ok  \n11:40\u00a0<cjd>\u00a0xwikiorg seems to be having some trouble this morning  \n11:40\u00a0<mflorea>\u00a0i.e. (re) add your listeners whenever the wysiwyg (tab) is loaded  \n11:40\u00a0<vmassol>\u00a0which is supposedly fixed in 5.4.3 but 5.4.3 is not released yet  \n11:40\u00a0<cjd>\u00a0ahh I see  \n11:46\u00a0<cjd>\u00a0has quit  \n11:47\u00a0<cjd>\u00a0has joined #xwiki  \n11:52\u00a0<polx\\_>\u00a0has joined #xwiki  \n12:05\u00a0<polx>\u00a0has quit  \n12:28\u00a0<polx>\u00a0has joined #xwiki  \n12:33\u00a0<polx>\u00a0has quit  \n12:35\u00a0<polx>\u00a0has joined #xwiki  \n13:03\u00a0<polx>\u00a0has quit  \n13:04\u00a0<polx>\u00a0has joined #xwiki  \n13:05\u00a0<polx>\u00a0has quit  \n13:23\u00a0<polx>\u00a0has joined #xwiki  \n13:34\u00a0<OSIMasson>\u00a0has joined #xwiki  \n13:44\u00a0<polx>\u00a0has quit  \n13:47\u00a0<mflorea>\u00a0gdelhumeau: https://github.com/xwiki/xwiki-platform/commit/0681b42fd3ac050aebd9777bacbe5c3ffcc17d9b breaks xwiki-platform-web build. Why did you add the .min.\\* files for bootstrap? the minification is done when xwiki-platform-web is build. We never commit the minified files.  \n13:48\u00a0<gdelhumeau>\u00a0mflorea: actually, I have also commited the non-minified version in a previous commit  \n13:49\u00a0<gdelhumeau>\u00a0so it means I have added these ones by mistake... sorry  \n13:49\u00a0<mflorea>\u00a0oh, ok  \n13:49\u00a0<mflorea>\u00a0the good knew is that xwiki-platoform-web builds fine without the minified files  \n13:50\u00a0<mflorea>\u00a0s/knew/news  \n13:51\u00a0<gdelhumeau>\u00a0thx for having noticed it  \n13:55\u00a0<mflorea>\u00a0gdelhumeau, one more thing, escaping tests are failing because the new template skins/colibri/menu/macros.vm doesn't generate any output. I guess this is normal, so you need to add it to https://github.com/xwiki/xwiki-enterprise/blob/master/xwiki-enterprise-test/pom.xml#L189  \n13:56\u00a0<mflorea>\u00a0we do this for all templates that don't output anything (with xpage=template)  \n14:08\u00a0<spu7nic>\u00a0has quit  \n14:46\u00a0<gdelhumeau>\u00a0thx mflorea  \n14:47\u00a0<mflorea>\u00a0np ;)  \n14:47\u00a0<polx>\u00a0has joined #xwiki  \n15:06\u00a0<evalica1>\u00a0has quit  \n15:13\u00a0<D-Spair>\u00a0has quit  \n15:18\u00a0<D-Spair>\u00a0has joined #xwiki  \n15:20\u00a0<silverdrop>\u00a0has quit  \n15:29\u00a0<vmassol>\u00a0mflorea: should we disable \"incremental build\" on platform?  \n15:30\u00a0<vmassol>\u00a0(the problem is caused by http://jira.codehaus.org/browse/MNG-5542 )  \n15:30\u00a0<vmassol>\u00a0(in jenkins)  \n15:30\u00a0<mflorea>\u00a0IMO no  \n15:30\u00a0<vmassol>\u00a0(the reason why you manually trigered it)  \n15:30\u00a0<vmassol>\u00a0well it happens very frequently  \n15:30\u00a0<vmassol>\u00a0and it generates false positives emails  \n15:30\u00a0<vmassol>\u00a0which is the worse thing  \n15:30\u00a0<vmassol>\u00a0it's also very dangerous  \n15:31\u00a0<vmassol>\u00a0because your agent may not have built a dep for some time  \n15:31\u00a0<vmassol>\u00a0so the build may work or not work becuase it's using some old/stale dep  \n15:31\u00a0<vmassol>\u00a0(which has been rebuilt more recently but on another agent)  \n15:32\u00a0<vmassol>\u00a0for me we have to remove it FTM  \n15:49\u00a0<mflorea>\u00a0vmassol: IMO it doesn't happen that often, and it's better to have a build in a few minutes and trigger the full build once in a while than always wait for 1h or more for the build even when you did a small change that doesn't require a full rebuild.  \n15:54\u00a0<vmassol>\u00a0yes but no :)  \n15:55\u00a0<vmassol>\u00a0there's no good excuse for false positives  \n15:55\u00a0<vmassol>\u00a0it discredits your build  \n15:55\u00a0<vmassol>\u00a0the problem is also very magical  \n15:55\u00a0<vmassol>\u00a0every time I have to spent like 10 minutes to analyse  \n15:55\u00a0<vmassol>\u00a0(and I know about it)  \n15:55\u00a0<mflorea>\u00a0sure, but at the same time it's a pain to wait so much for a build when you make a small change  \n15:55\u00a0<vmassol>\u00a0imagine devs like GD who don't know abou tit  \n15:56\u00a0<vmassol>\u00a0ok so the solution is what I wanted to do  \n15:56\u00a0<vmassol>\u00a0have one job per platform module  \n15:56\u00a0<mflorea>\u00a0well, I don't spend time to analyze (for platform). I trigger a full rebuild and if it still fails then I start investigating  \n15:57\u00a0<vmassol>\u00a0I don't find this a good solution  \n15:57\u00a0<mflorea>\u00a0it's a compromise, there's no perfect solution  \n15:58\u00a0<vmassol>\u00a0actually maybe there is  \n15:58\u00a0<mflorea>\u00a0rebuilding everything is not a good solution either  \n15:58\u00a0<vmassol>\u00a0\"ok so the solution is what I wanted to do  \n15:58\u00a0<vmassol>\u00a0why is this not a good solution?  \n15:59\u00a0<vmassol>\u00a0(apart from the fact that it's not so easy to do :))  \n15:59\u00a0<vmassol>\u00a0there's a workaround maybe though  \n16:00\u00a0<mflorea>\u00a0sure, if you manage to create one job per module and setup the right dependencies between jobs then it would be a good solution  \n16:00\u00a0<vmassol>\u00a0maybe it's possible to declare pom dependencies in the packager plugin  \n16:00\u00a0<mflorea>\u00a0a commit in platform shouldn't trigger all jobs for platform modules  \n16:01\u00a0<vmassol>\u00a0the other option is to fix/patch maven  \n16:01\u00a0<vmassol>\u00a0:)  \n16:01\u00a0<vmassol>\u00a0(to fix http://jira.codehaus.org/browse/MNG-5542 )  \n16:02\u00a0<vmassol>\u00a0actually even fixing maven doesn't solve the problem  \n16:02\u00a0<vmassol>\u00a0as I said, there's always the risk that your agent has stale deps  \n16:03\u00a0<vmassol>\u00a0ah no forget that  \n16:03\u00a0<vmassol>\u00a0if maven is patched and -U is used you're good  \n16:03\u00a0<vmassol>\u00a0(relatively good, discounting atomicity but that's for maven 4)  \n16:03\u00a0<msmeria>\u00a0has quit  \n16:04\u00a0<vmassol>\u00a0personally I highly prefer slower build than having false positives  \n16:05\u00a0<vmassol>\u00a0another idea is to go back to one repo per agent  \n16:05\u00a0<vmassol>\u00a0it doesn't fully solve the problem but it reduces it  \n16:06\u00a0<vmassol>\u00a0(instead of one repo per job)  \n16:17\u00a0<mflorea>\u00a0gdelhumeau: maybe you can look into this flickering test http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-wiki-test-tests/5121/testReport/org.xwiki.wiki.test.ui/WikiTemplateTest/createWikiFromTemplate/  \n16:17\u00a0<mflorea>\u00a0from the screenshot http://ci.xwiki.org/job/xwiki-platform/ws/xwiki-platform-core/xwiki-platform-wiki/xwiki-platform-wiki-test/xwiki-platform-wiki-test-tests/target/screenshots/WikiTemplateTest-createWikiFromTemplate.png  \n16:18\u00a0<mflorea>\u00a0it seems the create wiki link is missing from the Add menu  \n16:19\u00a0<mflorea>\u00a0the test tries to click on the link and fails. Maybe you know how the wiki gets into this state (probably due to the execution of the previous tests ---> for this it help to look in the full job log to see which tests were executed before)  \n16:21\u00a0<mflorea>\u00a0actually from http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-wiki-test-tests/5121/console it seems WikiTemplateTest-createWikiFromTemplate is the first test, so no interference here  \n16:26\u00a0<mflorea>\u00a0fails locally so not a flicker, definitely a bug introduced by the recent commits.  \n16:26\u00a0<gdelhumeau>\u00a0ok I look  \n16:27\u00a0<Denis>\u00a0has quit  \n16:29\u00a0<gdelhumeau>\u00a0I have:  \n16:29\u00a0<gdelhumeau>\u00a02014-03-12 16:29:11,311 [main] WARN \u00a0DefaultCoreExtensionRepository - Failed to load core extensions  \n16:29\u00a0<gdelhumeau> at java.util.zip.ZipFile.getZipEntry(ZipFile.java:531) ~[na:1.7.0\\_51]  \n16:29\u00a0<gdelhumeau> at java.util.zip.ZipFile.access$900(ZipFile.java:56) ~[na:1.7.0\\_51]  \n16:29\u00a0<gdelhumeau>\u00a0when I build xwiki-platform-wiki-test  \n16:38\u00a0<gdelhumeau>\u00a0mflorea: OK I see  \n16:48\u00a0<gdelhumeau>\u00a0The integration test has detected a real bug, it is usefull :)  \n16:48\u00a0<mflorea>\u00a0great! :)  \n17:20\u00a0<Denis>\u00a0has joined #xwiki  \n17:20\u00a0<gdelhumeau>\u00a0mflorea: is it a flicker?  \n17:20\u00a0<gdelhumeau>\u00a0http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-wysiwyg-test-tests/5122/testReport/junit/org.xwiki.wysiwyg.test.ui/EditWYSIWYGTest/testBackForwardCache/  \n17:21\u00a0<gdelhumeau>\u00a0(screenshot: http://ci.xwiki.org/job/xwiki-platform/ws/xwiki-platform-core/xwiki-platform-wysiwyg/xwiki-platform-wysiwyg-test/xwiki-platform-wysiwyg-test-tests/target/screenshots/EditWYSIWYGTest-testBackForwardCache.png )  \n17:24\u00a0<mflorea>\u00a0probably because I haven't touched the editor recently, but I need to investigate the test because the way the editors are loaded is bad (the summary editor is loaded for the description).  \n17:25\u00a0<mflorea>\u00a0gdelhumeau, this is for you http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/lastBuild/testReport/  \n17:25\u00a0<gdelhumeau>\u00a0thx  \n17:27\u00a0<gdelhumeau>\u00a0\u00a0URL: http://127.0.0.1:8080/xwiki/bin/view/Main/WebHome?vm=user.vm&xpage=xpart&xredirect=aaa%22bbb%27ccc%3Eddd%3Ceee&skin=flamingo&language=en&form\\_token=HoJwMgXyrd5PbeF8x0f2xg  \n17:27\u00a0<gdelhumeau>\u00a0but it should be vm=menus/user.vm  \n17:29\u00a0<woshilapin>\u00a0has quit  \n17:29\u00a0<mflorea>\u00a0hmm, maybe you need to fix the test framework  \n17:29\u00a0<mflorea>\u00a0I guess it doesn't support velocity macros in nested folders  \n17:29\u00a0<woshilapin>\u00a0has joined #xwiki  \n17:30\u00a0<gdelhumeau>\u00a0yep, I'm looking for  \n17:45\u00a0<gdelhumeau>\u00a0but it should fail for distribution too  \n17:46\u00a0<mflorea>\u00a0those are wiki templates  \n17:46\u00a0<mflorea>\u00a0not velocity  \n17:46\u00a0<mflorea>\u00a0there's just one vm there, which has only macros and is thus excluded  \n17:47\u00a0<gdelhumeau>\u00a0ok  \n17:47\u00a0<mflorea>\u00a0the test fwk must be looking for \\*.vm files only  \n17:47\u00a0<gdelhumeau>\u00a0so the line is \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0String template = this.name.replaceAll(\"^.+/\", \"\");  \n17:47\u00a0<gdelhumeau>\u00a0because then it does: parameters.put(\"vm\", template);  \n17:47\u00a0<mflorea>\u00a0have you try to put the path in the URL? does it work?  \n17:47\u00a0<gdelhumeau>\u00a0yes, when I do it manually  \n17:47\u00a0<mflorea>\u00a0ok, good  \n17:47\u00a0<mflorea>\u00a0so then we just need to fix the test fwk  \n17:47\u00a0<gdelhumeau>\u00a0without escaping \"/\" btw  \n17:55\u00a0<gdelhumeau>\u00a0I'm sorry, I have to go  \n17:55\u00a0<gdelhumeau>\u00a0I'll fix it tomorow morning  \n17:55\u00a0<gdelhumeau>\u00a0has quit  \n17:58\u00a0<polx\\_>\u00a0has joined #xwiki  \n18:01\u00a0<polx>\u00a0has quit  \n18:01\u00a0<polx\\_>\u00a0is now known as <polx>  \n18:22\u00a0<mflorea>\u00a0has quit  \n18:25\u00a0<GuillaumeF>\u00a0has quit  \n18:32\u00a0<vmassol>\u00a0has quit  \n18:41\u00a0<KermitTheFragger>\u00a0has quit  \n18:50\u00a0<Denis>\u00a0has quit  \n19:07\u00a0<Danilo>\u00a0has joined #xwiki  \n19:08\u00a0<Danilo>\u00a0Hello people, a question... I am reading the xwiki documentation of a method and in its descriptions is detailed: \u00a0\\* @return 0 on success, -1 on failure. On failure the error message is stored in the XWiki context under the \\* \"error\" key.  \n19:08\u00a0<Danilo>\u00a0What is this error key?  \n19:08\u00a0<Danilo>\u00a0How can I get the value of this key? is it a variable?  \n19:10\u00a0<msmeria>\u00a0has joined #xwiki  \n19:11\u00a0<msmeria>\u00a0has quit  \n19:13\u00a0<Denis>\u00a0has joined #xwiki  \n19:18\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n19:28\u00a0<cjd>\u00a0has quit  \n19:29\u00a0<juannicolas>\u00a0has joined #xwiki  \n19:32\u00a0<Danilo>\u00a0I realized that this error is showed in the tomcat log.  \n19:33\u00a0<woshilapin>\u00a0has quit  \n19:46\u00a0<juannicolas>\u00a0so,hello again. Any possibility to send password to user via confirmation email? would be nice to have that, because if you don't have direct communication to the user.  \n20:04\u00a0<Danilo>\u00a0has left #xwiki  \n20:08\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n20:13\u00a0<OSIMasson>\u00a0has quit  \n20:54\u00a0<lucaa1>\u00a0has quit  \n20:56\u00a0<vmassol>\u00a0has joined #xwiki  \n21:01\u00a0<OSIMasson>\u00a0has joined #xwiki  \n21:18\u00a0<vmassol>\u00a0has quit  \n21:33\u00a0<andreeapopescu>\u00a0has quit  \n21:40\u00a0<vmassol>\u00a0has joined #xwiki  \n21:43\u00a0<vmassol>\u00a0has quit  \n21:51\u00a0<juannicolas>\u00a0has quit  \n21:52\u00a0<polx>\u00a0has quit  \n22:01\u00a0<polx>\u00a0has joined #xwiki  \n22:12\u00a0<Denis>\u00a0has quit  \n22:30\u00a0<Denis>\u00a0has joined #xwiki  \n22:53\u00a0<OSIMasson>\u00a0has quit  \n23:08\u00a0<OSIMasson>\u00a0has joined #xwiki  \n23:45\u00a0<abusenius\\_>\u00a0has quit\n"}