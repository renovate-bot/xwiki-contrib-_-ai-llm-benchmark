{"id": "dev:IRC.xwikiArchive20150731", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150731", "title": "IRC Archive for channel #xwiki on 31 July 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<MasterPiece>\u00a0has quit  \n02:51\u00a0<abusenius>\u00a0has quit  \n06:12\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n06:21\u00a0<DarkKnightCZ>\u00a0has quit  \n07:12\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n07:27\u00a0<msmeria>\u00a0has joined #xwiki  \n08:34\u00a0<Ramona2>\u00a0has joined #xwiki  \n08:38\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:39\u00a0<woshilap1n>\u00a0has quit  \n08:47\u00a0<vmassol>\u00a0has joined #xwiki  \n09:08\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:24\u00a0<Slashman>\u00a0has joined #xwiki  \n09:34\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:35\u00a0<mflorea>\u00a0has joined #xwiki  \n10:04\u00a0<Ramona2>\u00a0has quit  \n10:05\u00a0<Ramona2>\u00a0has joined #xwiki  \n10:13\u00a0<Slashman>\u00a0has quit  \n10:29\u00a0<Ramona2>\u00a0has quit  \n10:30\u00a0<Ramona2>\u00a0has joined #xwiki  \n10:55\u00a0<msmeria>\u00a0has quit  \n10:56\u00a0<msmeria>\u00a0has joined #xwiki  \n10:56\u00a0<evalica>\u00a0has joined #xwiki  \n10:58\u00a0<msmeria>\u00a0has quit  \n10:59\u00a0<msmeria>\u00a0has joined #xwiki  \n11:33\u00a0<tmortagne>\u00a0has quit  \n11:47\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:05\u00a0<spawn57>\u00a0hi, how do I get the escapetool in groovy?  \n12:06\u00a0<spawn57>\u00a0using escapetool.sql(userInput) doesn't work  \n12:07\u00a0<Enygma`>\u00a0spawn57: try \"new org.xwiki.velocity.tools.EscapeTool().sql(userInput)\"  \n12:08\u00a0<spawn57>\u00a0that worked perfectly  \n12:08\u00a0<spawn57>\u00a0thanks  \n12:11\u00a0<Enygma`>\u00a0you`re welcomed  \n12:24\u00a0<ClemensR>\u00a0has joined #xwiki  \n12:27\u00a0<MasterPiece>\u00a0has joined #xwiki  \n12:32\u00a0<martin-h>\u00a0has joined #xwiki  \n12:32\u00a0<martin-h>\u00a0Hi, there  \n13:28\u00a0<msmeria>\u00a0has quit  \n13:29\u00a0<Ramona2>\u00a0has joined #xwiki  \n13:36\u00a0<woshilapin>\u00a0has quit  \n13:38\u00a0<woshilapin>\u00a0has joined #xwiki  \n13:39\u00a0<msmeria>\u00a0has joined #xwiki  \n13:43\u00a0<msmeria1>\u00a0has joined #xwiki  \n13:45\u00a0<msmeria>\u00a0has quit  \n13:52\u00a0<Slashman>\u00a0has joined #xwiki  \n14:03\u00a0<tmortagne>\u00a0has joined #xwiki  \n14:04\u00a0<OSIMasson>\u00a0has joined #xwiki  \n14:21\u00a0<Ramona2>\u00a0has quit  \n14:22\u00a0<Ramona2>\u00a0has joined #xwiki  \n14:30\u00a0<MasterPiece>\u00a0has quit  \n14:41\u00a0<DarkKnightCZ>\u00a0has quit  \n15:32\u00a0<msmeria1>\u00a0has quit  \n15:33\u00a0<OSIMasson>\u00a0has quit  \n15:34\u00a0<Ramona2>\u00a0has quit  \n16:01\u00a0<Enygma`>\u00a0DocumentAccessBridge is a mess :/  \n16:02\u00a0<Enygma`>\u00a0specially when you are working with in-memory documents  \n16:03\u00a0<vmassol>\u00a0working on checking why http://ci.xwiki.org/job/xwiki-platform/lastBuild/org.xwiki.platform$xwiki-platform-user-profile-test-tests/testReport/org.xwiki.user.test.ui/UserProfileTest/testChangeUserProfile/ fails  \n16:03\u00a0<vmassol>\u00a0(fyi)  \n16:03\u00a0<Enygma`>\u00a0because in many cases it only uses the document reference of the provided document and the data is re-fetched from the database for no good reason :|  \n16:03\u00a0<Enygma`>\u00a0not consistent at all with oldcore  \n16:04\u00a0<vmassol>\u00a0strange, it's uspposed to call oldcore  \n16:04\u00a0<OSIMasson>\u00a0has joined #xwiki  \n16:08\u00a0<Enygma`>\u00a0since you pass DocumentModelBridge instances and not XWikiDocument instances, DAB can't/won't simply cast the DocumentModelBridge instance to XWikiDocument so it decides that instead it should do xwiki.getDocument(documenModelInstance.getDocumentReference()) to obtain the corresponding XWikiDocument instance  \n16:09\u00a0<Enygma`>\u00a0and that trashes your in-memory data that you have passed as parameter  \n16:09\u00a0<vmassol>\u00a0ok the problem is when you edit a profile and click save , the url displayed is then http://localhost:8080/xwiki/bin/view/undefined/undefined?category=preferences  \n16:09\u00a0<vmassol>\u00a0debugging\u2026  \n16:11\u00a0<vmassol>\u00a0looks like some js var that are not defined indeed\u2026.  \n16:26\u00a0<tmortagne>\u00a0DocumentAccessBridge is just temporary crap that should be used only for minor stuff  \n16:27\u00a0<tmortagne>\u00a0better do you own bridge if you don't want to depend on oldcore when you have more advanced need  \n16:38\u00a0<Enygma`>\u00a0honestly, in the code I write, I stay far away from it  \n16:38\u00a0<Enygma`>\u00a0sure, that means using oldcore, but I find it more reliable even so  \n16:39\u00a0<Ramona1>\u00a0has joined #xwiki  \n16:39\u00a0<vmassol>\u00a0if ther's a problem with it we should fix it or remove it  \n16:39\u00a0<vmassol>\u00a0first time I hear of a problem  \n16:41\u00a0<tmortagne>\u00a0there is no bug, it's just very bad design when your need is not some one line property get  \n16:41\u00a0<vmassol>\u00a0we're supposed to use it as much as possible so if it doesn't fill that role then there's a problem  \n16:46\u00a0<Enygma`>\u00a0yes, it`s more of a design issue, since you don't/can't have methods that take a DocumentModelBridge instance (since you can not honor it as described above).  \n16:52\u00a0<mflorea>\u00a0has quit  \n16:54\u00a0<tmortagne>\u00a0the bridge always been supposed to be a temporary thing for simple use cases while waiting for the new model  \n17:14\u00a0<Ramona1>\u00a0has quit  \n17:15\u00a0<vmassol>\u00a0rollbacking my change of yesterday for xwiki.js which is causing the problem  \n17:15\u00a0<Enygma`>\u00a0yes, seems there are many tests failing because of what seems to be a javascript issue  \n17:16\u00a0<vmassol>\u00a0was too easy to be true :)  \n17:16\u00a0<Enygma`>\u00a0as far as I can see at the moment, the issues related to the script rights are fixed  \n17:17\u00a0<Enygma`>\u00a0the 2 branches (master and the script branch) seem in synch in terms of failing tests  \n17:17\u00a0<Enygma`>\u00a0am going to merge it into master  \n17:17\u00a0<vmassol>\u00a0done, this should fix some tests  \n17:17\u00a0<vmassol>\u00a0now I need to understand why under some conditions the vars are undefined  \n17:17\u00a0<vmassol>\u00a0when using requirejs  \n17:18\u00a0<Enygma`>\u00a0not sure if the recent master issues are masking any script rights issues.  \n17:18\u00a0<vmassol>\u00a0you should know soon :)  \n17:20\u00a0<Enygma`>\u00a0vmassol: well, require is asynchronous  \n17:21\u00a0<vmassol>\u00a0you mean \u00a0that the code after \"require(['xwiki-meta'], function (xmeta) {} \" can execute before the code inside the {} ?  \n17:21\u00a0<vmassol>\u00a0indeed that would be a problem  \n17:21\u00a0<Enygma`>\u00a0pretty much, yes  \n17:22\u00a0<vmassol>\u00a0I'll try locally with a big require block  \n17:22\u00a0<Enygma`>\u00a0in require you use modules to ensure proper loading order  \n17:23\u00a0<Enygma`>\u00a0integrating small require blocks in your js is possible, but you need to be sure that the asynch nature makes sense in your code  \n17:23\u00a0<Enygma`>\u00a0if it's stuff you need to return right away, yeah... you need a big require wrapping block or you need to refactor you code in modules that make sense  \n17:24\u00a0<Enygma`>\u00a0I had some \"fun\" in the syntax highlighting extension with loading require modules dynamically :)  \n17:24\u00a0<Enygma`>\u00a0though here is not quite the same thing  \n18:10\u00a0<woshilapin>\u00a0has quit  \n18:14\u00a0<KermitTheFragger>\u00a0has quit  \n18:18\u00a0<MasterPiece>\u00a0has joined #xwiki  \n18:23\u00a0<ClemensR>\u00a0has quit  \n18:36\u00a0<Ramona1>\u00a0has joined #xwiki  \n18:37\u00a0<evalica>\u00a0has quit  \n18:41\u00a0<msmeria>\u00a0has joined #xwiki  \n18:41\u00a0<msmeria>\u00a0has quit  \n18:43\u00a0<tmortagne>\u00a0has quit  \n18:46\u00a0<Ramona1>\u00a0has quit  \n19:05\u00a0<OSIMasson>\u00a0has quit  \n19:14\u00a0<polx>\u00a0has joined #xwiki  \n19:19\u00a0<polx>\u00a0has quit  \n19:45\u00a0<OSIMasson>\u00a0has joined #xwiki  \n19:53\u00a0<abusenius>\u00a0has joined #xwiki  \n20:08\u00a0<Enygma`>\u00a0has quit  \n20:58\u00a0<Slashman>\u00a0has quit  \n21:00\u00a0<Ramona1>\u00a0has joined #xwiki  \n21:19\u00a0<Ramona1>\u00a0has quit  \n22:06\u00a0<MasterPiece>\u00a0has quit  \n22:48\u00a0<martin-h>\u00a0has quit  \n23:12\u00a0<martin-h>\u00a0has joined #xwiki\n"}