{"id": "dev:IRC.xwikiArchive20110110", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110110", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n02:05\u00a0<sdumitriu>\u00a0has quit  \n02:55\u00a0<SvenDowideit>\u00a0has quit  \n02:55\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n03:45\u00a0<abusenius>\u00a0has quit  \n08:11\u00a0<mflorea>\u00a0has joined #xwiki  \n08:58\u00a0<vmassol>\u00a0has joined #xwiki  \n09:01\u00a0<sburjan>\u00a0has joined #xwiki  \n09:02\u00a0<+sburjan>\u00a0good morning  \n09:05\u00a0<jstoldt>\u00a0has joined #xwiki  \n09:06\u00a0<jstoldt>\u00a0good morning everybody  \n09:06\u00a0<sabageru>\u00a0has joined #xwiki  \n09:07\u00a0<+sburjan>\u00a0good morning jstoldt  \n09:07\u00a0<+sburjan>\u00a0:)  \n09:07\u00a0<jstoldt>\u00a0:)  \n09:25\u00a0<arkub>\u00a0has joined #xwiki  \n09:53\u00a0<sdumitriu>\u00a0has joined #xwiki  \n10:00\u00a0<+sburjan>\u00a0sdumitriu: ping.  \n10:00\u00a0<@sdumitriu>\u00a0Pong  \n10:02\u00a0<+sburjan>\u00a0sdumitriu: I have a simple question. If I want to create a patch for this: XE-799 ,all I have to do is to modify the pom.xml from ui-tests according to the beta 1 version, right ?  \n10:04\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:05\u00a0<@sdumitriu>\u00a0Not sure  \n10:05\u00a0<@sdumitriu>\u00a0In theory, yes  \n10:05\u00a0<@sdumitriu>\u00a0But then you have to build everything and make sure there are no regressions introduced by it  \n10:05\u00a0<+sburjan>\u00a0on my local machine, this is the only thing I did, and it worked ...  \n10:06\u00a0<+sburjan>\u00a0I see.... well .. we'll have to wait .. a tons of tests fail on hudson  \n10:06\u00a0<+sburjan>\u00a0because a lot of bugs in latest snapshot  \n10:06\u00a0<+sburjan>\u00a0@all devs who want to fix critical bugs : http://incubator.myxwiki.org/xwiki/bin/view/Test/30snapshots  \n10:07\u00a0<+sburjan>\u00a0sdumitriu: as a personal note, I'm pretty sure there won't be a lot of regression due to migration  \n10:07\u00a0<@sdumitriu>\u00a0sburjan: I'm already working on fixing those bugs  \n10:08\u00a0<+sburjan>\u00a0okay  \n10:23\u00a0<jstoldt>\u00a0yay, my new laptop is gonna arrive tomorrow! awsome :-D  \n10:24\u00a0<@sdumitriu>\u00a0Mine as well  \n10:29\u00a0<+sburjan>\u00a0sdumitriu: what laptop did you buy ? :)  \n10:30\u00a0<@sdumitriu>\u00a0http://www.amazon.co.uk/gp/product/B00440D5MW/ref=oss\\_product  \n10:33\u00a0<cjdelisle>\u00a0good morning  \n10:33\u00a0<+sburjan>\u00a0switching to windows ? :P  \n10:33\u00a0<cjdelisle>\u00a0Can I get some review on this? http://svn.xwiki.org/svnroot/xwiki/contrib/sandbox/xwiki-store/xwiki-store-transaction/src/main/java/org/xwiki/store/TransactionRunnable.java  \n10:34\u00a0<cjdelisle>\u00a0I've made some pretty major changes since implementing and reviewing it.  \n10:35\u00a0<cjdelisle>\u00a0I've been thinking about some kind of TransactionRunnable<Requires, Provides> but I can't make it work in my mind.  \n10:49\u00a0<ralucaM>\u00a0has joined #xwiki  \n10:55\u00a0<rstavro>\u00a0has joined #xwiki  \n11:15\u00a0<sdumitriu>\u00a0has quit  \n11:26\u00a0<mflorea>\u00a0has quit  \n11:32\u00a0<sdumitriu>\u00a0has joined #xwiki  \n11:36\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:47\u00a0<evalica>\u00a0has joined #xwiki  \n11:54\u00a0<+jvdrean>\u00a0starting to release 2.6.1 in a few minutes  \n11:54\u00a0<vmassol>\u00a0nice  \n11:54\u00a0<+jvdrean>\u00a0vmassol, do I have anything to do regarding clirr before releasing core ?  \n11:54\u00a0<vmassol>\u00a0jvdrean: I would have committed http://jira.xwiki.org/jira/browse/XASEARCH-19 for 2.6.1 but I cannot reproduce right now  \n11:54\u00a0<vmassol>\u00a0so go ahead  \n11:55\u00a0<vmassol>\u00a0jvdrean: what's written in th erelease process I think  \n11:56\u00a0<+jvdrean>\u00a0ok then there's nothing to do before  \n11:57\u00a0<+jvdrean>\u00a0releasing core  \n12:16\u00a0<jstoldt>\u00a0i'm getting this nice laptop: http://skinflint.co.uk/eu/a579327.html :-D  \n12:16\u00a0<jstoldt>\u00a0finally a laptop that will last a bit longer when traveling  \n12:17\u00a0<+sburjan>\u00a0angry laptop  \n12:17\u00a0<+sburjan>\u00a09 cell battery ... this is why lasts longer  \n12:18\u00a0<jstoldt>\u00a0well yeah, now i got a Dell Inspiron 1521 with a 9 cell battery and even in the best days it never lasted longer than 3.5 hours  \n12:19\u00a0<jstoldt>\u00a0that lenovo machine is supposed to last me around 7 hours  \n12:19\u00a0<jstoldt>\u00a0:-D  \n12:19\u00a0<+sburjan>\u00a0don't get your expectations so high :)  \n12:19\u00a0<jstoldt>\u00a0well, if it's 5 to 6 hours i am more than happy. besides, i read a test which suggested 7h is reasonable  \n12:20\u00a0<+sburjan>\u00a07h for a laptop is ultra huge .. almost odd  \n12:20\u00a0<jstoldt>\u00a0they actually said that they made it run around 10 hours in one test  \n12:20\u00a0<@sdumitriu>\u00a0No, that's real  \n12:20\u00a0<jstoldt>\u00a0didn't do much when running it for 10h, though  \n12:20\u00a0<@sdumitriu>\u00a0My current laptop used to last about 4 hours when it was new  \n12:21\u00a0<jstoldt>\u00a0:)  \n12:21\u00a0<@sdumitriu>\u00a0On 6 cells  \n12:22\u00a0<jstoldt>\u00a0problem is, if you want a laptop with full hd display and a good lifetime you are stuck with 3 or 4 models which all cost an awful lot  \n12:22\u00a0<jstoldt>\u00a0lucky i got some discount for still being a student  \n12:23\u00a0<+sburjan>\u00a0sdumitriu: afaik your current laptop is 13 in, you're using gentoo, and usually you're using low brightness :)  \n12:24\u00a0<mflorea>\u00a0has joined #xwiki  \n12:36\u00a0<+jvdrean>\u00a0releasing web  \n12:41\u00a0<jstoldt>\u00a0oh, i found a nice one  \n12:42\u00a0<jstoldt>\u00a0in the parentlink edit box German \"Umlaute\" (\u00c4, \u00d6, \u00dc, \u00e4, \u00f6, \u00fc) are not displayed properly  \n12:42\u00a0<jstoldt>\u00a0despite having enabled UTF-8  \n12:42\u00a0<jstoldt>\u00a0system is postgreSQL 9 and tomcat 7 on a win 7 x64 system  \n12:42\u00a0<jstoldt>\u00a0is this a known bug?  \n12:42\u00a0<@sdumitriu>\u00a0jstoldt: Which parentlink?  \n12:42\u00a0<jstoldt>\u00a0or should i add ticket in jira?  \n12:43\u00a0<jstoldt>\u00a0parent link at the beginning of the edit page for any given document  \n12:44\u00a0<@sdumitriu>\u00a0Make an issue  \n12:44\u00a0<jstoldt>\u00a0ok  \n12:46\u00a0<@sdumitriu>\u00a0Works well for me on Jetty  \n12:46\u00a0<@sdumitriu>\u00a0Did you properly configure the Jetty URI encoding?  \n12:46\u00a0<jstoldt>\u00a0it's tomcat 7.0.2 iirc  \n12:46\u00a0<@sdumitriu>\u00a0Did you properly configure the Tomcat URI encoding?  \n12:46\u00a0<jstoldt>\u00a0well, i pretty much followed the instructions provided in the documentation  \n12:47\u00a0<jstoldt>\u00a0of xwiki  \n12:47\u00a0<@sdumitriu>\u00a078.250.172.237  \n12:47\u00a0<@sdumitriu>\u00a0http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Encoding#HTomcat  \n12:47\u00a0<jstoldt>\u00a0but maybe you could point me to something a little more specific  \n12:47\u00a0<@sdumitriu>\u00a0Which browser?  \n12:48\u00a0<jstoldt>\u00a0yes, i did that  \n12:48\u00a0<jstoldt>\u00a0browser is opera  \n12:48\u00a0<@sdumitriu>\u00a0Should work fine  \n12:48\u00a0<jstoldt>\u00a011  \n12:49\u00a0<@sdumitriu>\u00a0Mail me your computer along with the network cable and I'll test it from home  \n12:49\u00a0<jstoldt>\u00a0won't work... proxies...  \n12:49\u00a0<jstoldt>\u00a0sorry  \n12:49\u00a0<@sdumitriu>\u00a0Damn  \n12:49\u00a0<jstoldt>\u00a0but i'll just upload the screenshot i made, hold on  \n12:50\u00a0<jstoldt>\u00a0http://tinyurl.com/26dw2rd  \n12:51\u00a0<@sdumitriu>\u00a0Can you try with FF and capture the HTTP headers using https://addons.mozilla.org/en-US/firefox/addon/3829/ ?  \n12:51\u00a0<jstoldt>\u00a0the page i edited already existed  \n12:52\u00a0<jstoldt>\u00a0and wanted to change the parent  \n12:52\u00a0<jstoldt>\u00a0hold on, that will take me a few moments... no FF installed just now  \n12:52\u00a0<@sdumitriu>\u00a0Ah, it's only in the input?  \n12:52\u00a0<@sdumitriu>\u00a0That looks like a font problem, not an encoding issue  \n12:52\u00a0<jstoldt>\u00a0well i suppose it's only in display...  \n12:54\u00a0<jstoldt>\u00a0okay, just checked, the parent link is not displayed properly and not saved properly  \n12:54\u00a0<@sdumitriu>\u00a0OK, so neither saved  \n12:54\u00a0<@sdumitriu>\u00a0Then it is an encoding issue  \n12:54\u00a0<jstoldt>\u00a0yeah, suppose so  \n12:54\u00a0<@sdumitriu>\u00a0Still, it's strange  \n12:54\u00a0<jstoldt>\u00a0i know, right  \n12:55\u00a0<jstoldt>\u00a0will check if it's related to Opera  \n12:55\u00a0<jstoldt>\u00a0same on IE8  \n12:56\u00a0<@sdumitriu>\u00a0Hm, it's not only in the input, in the screenshot I can see it broken in the breadcrumbs as well  \n12:56\u00a0<jstoldt>\u00a0oh, just in case i didn't mention, the autocomplete me showed the wrong one  \n12:56\u00a0<jstoldt>\u00a0that's where i picked this faulty address  \n12:56\u00a0<@sdumitriu>\u00a0Although the second \u00fc, in the document name, appears OK  \n12:57\u00a0<jstoldt>\u00a0yep. it might have to do with the auto complete...  \n12:57\u00a0<jstoldt>\u00a0because if i manually fix it, it's fine  \n13:00\u00a0<@sdumitriu>\u00a0Hm, those results come from the REST API  \n13:00\u00a0<@sdumitriu>\u00a0Maybe that one is broken  \n13:01\u00a0<jstoldt>\u00a0anything i can do to assist you in this?  \n13:03\u00a0<@sdumitriu>\u00a0Nope  \n13:03\u00a0<@sdumitriu>\u00a0Well, yes  \n13:04\u00a0<@sdumitriu>\u00a0Execute this:  \n13:04\u00a0<@sdumitriu>\u00a0{{groovy}}  \n13:04\u00a0<@sdumitriu>\u00a0print System.getProperty('file.encoding')  \n13:04\u00a0<@sdumitriu>\u00a0{{/groovy}}  \n13:04\u00a0<jstoldt>\u00a0just a sec  \n13:05\u00a0<jstoldt>\u00a0Cp1252  \n13:06\u00a0<@sdumitriu>\u00a0OK, so REST uses the system encoding, and it shouldn't  \n13:07\u00a0<jstoldt>\u00a0i faintly do remember having similar trouble with the output created by the OOo server, although i could fix that by changing the OOo settings, directly...  \n13:08\u00a0<jstoldt>\u00a0mflorea: i think i found a bug in the office viewer macro. if you attach, say, a ppt to page A, use the office viewer macro to display it, then proceed to attach the exact same ppt to a new page B and again use the office viewer macro on that page (B), you wind up with a malfunctioning office viewer macro on page A  \n13:24\u00a0<abusenius>\u00a0has joined #xwiki  \n13:29\u00a0<+mflorea>\u00a0jstoldt: I'll check  \n13:29\u00a0<jstoldt>\u00a0cool  \n13:35\u00a0<abusenius>\u00a0has quit  \n13:35\u00a0<abusenius>\u00a0has joined #xwiki  \n13:40\u00a0<+sburjan>\u00a0vmassol: available ?  \n13:47\u00a0<jstoldt>\u00a0mflorea: another thing i just noticed, unlike attachments uploaded manually, attachments created by the importer app will not have their file names filtered  \n13:48\u00a0<+mflorea>\u00a0you mean the name of the xar file?  \n13:48\u00a0<jstoldt>\u00a0so if you got an attached image\\_12.jpg from the import, you download it, change it and upload it anew the existing one will not be updated but a new image12.jpg will be created  \n13:49\u00a0<jstoldt>\u00a0talking about images imported from a .doc, for instance  \n13:50\u00a0<+mflorea>\u00a0but how did that doc end up with an attachment with unfiltered name?  \n13:50\u00a0<jstoldt>\u00a0well, that i don't know. all i did was import it and all the images have a name like this: FilteredFileName\\_html\\_someChars.png  \n13:51\u00a0<jstoldt>\u00a0FilteredFileName being the filtered name from the original .doc without the .doc  \n13:54\u00a0<@sdumitriu>\u00a0The attachment name filtering should be removed  \n13:54\u00a0<@sdumitriu>\u00a0Soon  \n13:54\u00a0<jstoldt>\u00a0i wouldn't object that either. it would simplify editing for me here and there  \n13:56\u00a0<@sdumitriu>\u00a0It was introduced because there were problems in the old WYSIWYG editor  \n13:56\u00a0<@sdumitriu>\u00a0But that one is deprecated anyway  \n13:57\u00a0<jstoldt>\u00a0i see. well, anyway, it shouldn't be changed until that old editor is removed, imo.  \n13:57\u00a0<sabageru1>\u00a0has joined #xwiki  \n13:57\u00a0<sabageru>\u00a0has quit  \n13:58\u00a0<@sdumitriu>\u00a0Computers can run on very little power  \n13:58\u00a0<@sdumitriu>\u00a0OLPC 1.75 runs on 2 watts  \n13:58\u00a0<@sdumitriu>\u00a0OLPC XO-3 is targeted to run on 1 Watt  \n13:58\u00a0<@sdumitriu>\u00a0Shut up, xwikibot  \n13:59\u00a0<jstoldt>\u00a0lol  \n14:02\u00a0<+sburjan>\u00a0:))  \n14:03\u00a0<+sburjan>\u00a0what is an OLPC ?  \n14:04\u00a0<@sdumitriu>\u00a0One Laptop Per Child  \n14:05\u00a0<jstoldt>\u00a0http://en.wikipedia.org/wiki/OLPC  \n14:05\u00a0<jstoldt>\u00a0^^  \n14:05\u00a0<jstoldt>\u00a0i think i read about it some months back...  \n14:07\u00a0<+sburjan>\u00a0there were a lot of discussions about OLPC  \n14:08\u00a0<sabageru1>\u00a0has quit  \n14:21\u00a0<florinciu>\u00a0has joined #xwiki  \n16:29\u00a0<xwikibot>\u00a0has joined #xwiki  \n16:29\u00a0<@cjdelisle>\u00a0{ {/code}} hmm {{code}}  \n16:30\u00a0<+sburjan>\u00a0I've set up a breakpoint  \n16:30\u00a0<@cjdelisle>\u00a0lol  \n16:30\u00a0<@cjdelisle>\u00a0http://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110110  \n16:30\u00a0<@cjdelisle>\u00a0might want to fix that one.  \n16:31\u00a0<+sburjan>\u00a0yes, i've noticed it, but I don't know how to escape code macro :)  \n16:32\u00a0<+sburjan>\u00a0it's like having a code macro inside a code macro :)  \n16:32\u00a0<@cjdelisle>\u00a0Does anyone mind if I kill the bot for a minute?  \n16:33\u00a0<+jvdrean>\u00a0sdumitriu: I've released application-manager and wiki-manager by mistake  \n16:33\u00a0<@sdumitriu>\u00a0cjdelisle: What for?  \n16:33\u00a0<+jvdrean>\u00a0I didn't noticed that wiki-manager requires core 2.7+  \n16:33\u00a0<+jvdrean>\u00a0(you're the release manager for 2.7 right?)  \n16:33\u00a0<@sdumitriu>\u00a0jvdrean: Yes  \n16:33\u00a0<@sdumitriu>\u00a0Let me check  \n16:33\u00a0<@cjdelisle>\u00a0injection issue...  \n16:34\u00a0<+sburjan>\u00a0cjdelisle: don't do that ! create an issue on JIRA and create a patch. So we have the fix on SVN too  \n16:34\u00a0<+sburjan>\u00a0because I intend to still improve the IRC bot, and when upgrading we shouldn't lose your fix  \n16:34\u00a0<@cjdelisle>\u00a0Well then I'll explain the problem on the log.  \n16:35\u00a0<+sburjan>\u00a0or at least fix it on the irc app too  \n16:35\u00a0<@sdumitriu>\u00a0cjdelisle: The { {/code}} one?  \n16:35\u00a0<+sburjan>\u00a0sdumitriu: yes  \n16:35\u00a0<+sburjan>\u00a0code inside code  \n16:35\u00a0<@cjdelisle>\u00a0No script insied xwiki.org.  \n16:35\u00a0<@cjdelisle>\u00a0run from irc.  \n16:36\u00a0<@cjdelisle>\u00a0just drop in to the chan and you can exploit as the bot.  \n16:38\u00a0<+sburjan>\u00a0cjdelisle: I'm 90% sure the logic of that test is wrong  \n16:38\u00a0<+sburjan>\u00a0we'll discuss this a little bit later  \n16:39\u00a0<+sburjan>\u00a0cjdelisle: \u00a0any idea how to fix the injection ?  \n16:40\u00a0<@cjdelisle>\u00a0replaceAll('{ {/code}}', '{ {/code}}')  \n16:40\u00a0<@cjdelisle>\u00a0It's ugly but you won't get owned.  \n16:41\u00a0<+sburjan>\u00a0so I can count on you that you'll also commit on the SVN ?  \n16:41\u00a0<@cjdelisle>\u00a0idk it's a hack.  \n16:42\u00a0<@cjdelisle>\u00a0But I don't know of anything else better.  \n16:42\u00a0<+jvdrean>\u00a0XE & XEM released (maven)  \n16:42\u00a0<+jvdrean>\u00a02.6.1 that is  \n16:43\u00a0<+sburjan>\u00a0well.. FTM whis sould do the trick  \n16:43\u00a0<+sburjan>\u00a0\\*should  \n16:43\u00a0<@cjdelisle>\u00a0for reference, this is one thing that can happen:  \n16:44\u00a0<@cjdelisle>\u00a0{{html}}<script>alert('All your session cookies are belong to us');</script>{{/html}}  \n16:44\u00a0<+sburjan>\u00a0with /code before and code after, right ?  \n16:44\u00a0<@cjdelisle>\u00a0{{html clean=\"false\"}}<script>alert('All your session cookies are belong to us');</script>{{/html}}  \n16:44\u00a0<@sdumitriu>\u00a0cjdelisle: I usually use something like $doc.getRenderedContent($content, 'plain/1.0', 'xwiki/2.0')  \n16:44\u00a0<+sburjan>\u00a0so basically exit the code macro, inject, and get back into code  \n16:45\u00a0<@cjdelisle>\u00a0already did a minute back.  \n16:45\u00a0<@cjdelisle>\u00a0see: http://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110110  \n16:45\u00a0<+sburjan>\u00a0:) yepp..  \n16:45\u00a0<@sdumitriu>\u00a0jvdrean: Indeed, wiki-manager plugin requires 2.7 since it uses the wiki-related events  \n16:45\u00a0<@cjdelisle>\u00a0sdumitriu: What about the code macro.  \n16:45\u00a0<+sburjan>\u00a0you proved it :)  \n16:46\u00a0<@sdumitriu>\u00a0cjdelisle: What about it?  \n16:46\u00a0<@cjdelisle>\u00a0having the irc text formatted as {{code}} is pretty nice.  \n16:46\u00a0<+sburjan>\u00a0sdumitriu: {code}} macro breaks the <code> from IRCBot  \n16:46\u00a0<+jvdrean>\u00a0sdumitriu: yep, so I haven't released it, I've released the app manager before and update the depencies in all xem branches  \n16:46\u00a0<+jvdrean>\u00a0s/update/updated/  \n16:47\u00a0<@cjdelisle>\u00a0ah hah. xml escape.  \n16:47\u00a0<+sburjan>\u00a0so is it ellegantly dfixable ?  \n16:48\u00a0<abusenius>\u00a0has quit  \n16:48\u00a0<@cjdelisle>\u00a0sort of.  \n16:48\u00a0<+sburjan>\u00a0bbl  \n16:48\u00a0<sburjan>\u00a0has quit  \n16:49\u00a0<@cjdelisle>\u00a0hmm it'll be double escaped.  \n16:49\u00a0<@cjdelisle>\u00a0{~{/code}}  \n16:49\u00a0<@cjdelisle>\u00a0{&#123;/code}}  \n16:49\u00a0<@sdumitriu>\u00a0I don't get it  \n16:49\u00a0<@cjdelisle>\u00a0argh  \n16:49\u00a0<@sdumitriu>\u00a0Why xml escape?  \n16:50\u00a0<@cjdelisle>\u00a0Because if you can get the browser to render that { and prevent the wiki from interpreting it then the code macro can't be jailbroken.  \n16:51\u00a0<@cjdelisle>\u00a0Ahh that was my trick for html macros.  \n16:51\u00a0<@cjdelisle>\u00a0s/{ {/code}}/{ {/code}}/ ?  \n16:51\u00a0<@cjdelisle>\u00a0There is no eligant solution.  \n16:51\u00a0<@cjdelisle>\u00a0Only bad and worse.  \n17:07\u00a0<xwikibot>\u00a0has joined #xwiki  \n17:08\u00a0<@cjdelisle>\u00a0{{code}}  \n17:08\u00a0<@cjdelisle>\u00a0{ {/code}}  \n17:08\u00a0<@cjdelisle>\u00a0Well now I can sleep at night.  \n17:13\u00a0<Enygma`>\u00a0has quit  \n17:13\u00a0<@cjdelisle>\u00a0since we reserve {{, we need some way to represent it.  \n17:13\u00a0<@cjdelisle>\u00a0{{}} ?  \n17:13\u00a0<@cjdelisle>\u00a0in which case representing {{}} would be done with {{}}}}  \n17:23\u00a0<rrodriguez>\u00a0has quit  \n17:31\u00a0<evalica>\u00a0has quit  \n17:41\u00a0<abusenius>\u00a0has joined #xwiki  \n17:43\u00a0<rrodriguez>\u00a0has joined #xwiki  \n17:57\u00a0<lucaa>\u00a0has joined #xwiki  \n17:57\u00a0<+lucaa>\u00a0guys, do you know what's this failure?  \n17:57\u00a0<+lucaa>\u00a0http://hudson.xwiki.org/job/xwiki-platform-web/6678/console  \n17:57\u00a0<+lucaa>\u00a0is this the build or hudson's fault?  \n17:59\u00a0<vmassol>\u00a0sdumitriu: just found a bug  \n17:59\u00a0<vmassol>\u00a0if you create a new page with no title and use this inside:  \n17:59\u00a0<vmassol>\u00a0= Pr\u00e9sence \\*\\*aupr\u00e8s\\*\\* du b\u00e9n\u00e9ficiaire hospitalis\u00e9 =  \n18:00\u00a0<vmassol>\u00a0then  \n18:00\u00a0<vmassol>\u00a01) you have 2 titles displayed  \n18:00\u00a0<vmassol>\u00a0and  \n18:00\u00a0<vmassol>\u00a02) the first title says \"Pr\u00e9sence <strong>aupr\u00e8s</strong> du b\u00e9n\u00e9ficiaire hospitalis\u00e9\"  \n18:00\u00a0<vmassol>\u00a0I'll try to fix it  \n18:01\u00a0<vmassol>\u00a0I wonder if it was working at some point and when we broke it  \n18:04\u00a0<vmassol>\u00a0created XWIKI-5873  \n18:13\u00a0<@sdumitriu>\u00a0lucaa: It's a real bug  \n18:13\u00a0<rrodriguez>\u00a0has quit  \n18:16\u00a0<vmassol>\u00a0hmm seems liks getdidplayTitle will always generated escaped HTML now\u2026. checking ocde  \n18:17\u00a0<vmassol>\u00a0actually no, it genertaes HTML  \n18:17\u00a0<vmassol>\u00a0but apparently we've escaped its result everywhere now  \n18:17\u00a0<vmassol>\u00a0checking  \n18:20\u00a0<@sdumitriu>\u00a0vmassol: Please check with me before committing everything  \n18:21\u00a0<vmassol>\u00a0found the cuplrit  \n18:22\u00a0<vmassol>\u00a0rev 29278  \n18:22\u00a0<vmassol>\u00a0sdumitriu: checking with you now  \n18:22\u00a0<vmassol>\u00a0-#set ($titleToDisplay = $tdoc.displayTitle)  \n18:22\u00a0<vmassol>\u00a0+#set ($titleToDisplay = \"$!{escapetool.xml($tdoc.displayTitle)}\")  \n18:22\u00a0<vmassol>\u00a0displayTitle returns HTML  \n18:22\u00a0<vmassol>\u00a0so escaping it is wrong  \n18:23\u00a0<vmassol>\u00a0cjdelisle: seems you did that :)  \n18:23\u00a0<vmassol>\u00a0in several places  \n18:23\u00a0<@sdumitriu>\u00a0The escape is needed  \n18:23\u00a0<vmassol>\u00a0why?  \n18:23\u00a0<@sdumitriu>\u00a0Security  \n18:23\u00a0<vmassol>\u00a0errr  \n18:24\u00a0<vmassol>\u00a0security shoudn't break stuff  \n18:24\u00a0<vmassol>\u00a0we now have tons of regressions  \n18:24\u00a0<vmassol>\u00a0everywhere there's a title basically  \n18:24\u00a0<@sdumitriu>\u00a0No  \n18:24\u00a0<@sdumitriu>\u00a0We now have tons of fixed security holes  \n18:24\u00a0<@sdumitriu>\u00a0:D  \n18:24\u00a0<vmassol>\u00a0hehe  \n18:25\u00a0<@sdumitriu>\u00a0It depends on what we want to do with the title  \n18:25\u00a0<vmassol>\u00a0but indeed there are some wrong code in lots of place re title  \n18:25\u00a0<vmassol>\u00a0like AS  \n18:25\u00a0<@sdumitriu>\u00a0A fix is to render the title as plain/1.0  \n18:25\u00a0<vmassol>\u00a0which call getDisplayttile  \n18:25\u00a0<vmassol>\u00a0sdumitriu: it depends where  \n18:25\u00a0<vmassol>\u00a0in AS or search results, indeed  \n18:25\u00a0<vmassol>\u00a0in page titles no  \n18:25\u00a0<vmassol>\u00a0in breadcrumb yes too  \n18:26\u00a0<@sdumitriu>\u00a0Right, document title should be able to contain markup  \n18:26\u00a0<vmassol>\u00a0btw this use case is so common we might want an api for it  \n18:26\u00a0<vmassol>\u00a0rather than have to call getRenderedTitle(\"plain/1.0\")  \n18:26\u00a0<@sdumitriu>\u00a0+1  \n18:26\u00a0<@sdumitriu>\u00a0getPlainTitle  \n18:27\u00a0<vmassol>\u00a0ok I'll handle this  \n18:28\u00a0<sabageru>\u00a0has quit  \n18:42\u00a0<+lucaa>\u00a0sdumitriu, all: build fixed  \n18:42\u00a0<+lucaa>\u00a0sorry for failing ti  \n18:42\u00a0<+lucaa>\u00a0it  \n18:43\u00a0<+lucaa>\u00a0(well at least I hope I fixed it)  \n18:45\u00a0<vmassol>\u00a0sdumitriu and others: could you vote on the getPlainTitle mail? I'd like to start committing ASAP and I'd like to have at least 1 or 2 votes of trust...  \n18:47\u00a0<vmassol>\u00a0sdumitriu: so what do we do for titlevars.vm? Can I remove the escape there?  \n18:52\u00a0<@sdumitriu>\u00a0Wait a bit  \n18:53\u00a0<@sdumitriu>\u00a0Voting is going to be hard since the ML is so slow  \n18:53\u00a0<vmassol>\u00a0It's ok I can revert later on  \n18:53\u00a0<vmassol>\u00a0but if I have 1 or 2 positive votes at least I have less risk  \n18:55\u00a0<@sdumitriu>\u00a0Can't vote yet, the email didn't make it though  \n18:55\u00a0<@sdumitriu>\u00a0through  \n19:09\u00a0<vmassol>\u00a0ah ok\u2026 I received it but it's because I sent it through gmail probably  \n19:10\u00a0<vmassol>\u00a0sdumitriu: still re titlevars.vm wdyt?  \n19:11\u00a0<vmassol>\u00a0we have the same question for attachments.vm for ex:  \n19:11\u00a0<vmassol>\u00a0<div id=\"document-title\"><h1>$msg.get('core.viewers.attachments.title', [$escapetool.xml($doc.displayTitle), $doc.getURL()])</h1></div>  \n19:14\u00a0<arkub>\u00a0has quit  \n19:14\u00a0<mflorea>\u00a0has quit  \n19:23\u00a0<lucaa>\u00a0has quit  \n19:29\u00a0<+sburjan`>\u00a0cjdelisle: ping  \n19:48\u00a0<rstavro>\u00a0has left #xwiki  \n19:54\u00a0<florinciu>\u00a0has quit  \n20:04\u00a0<jvelociter>\u00a0has quit  \n20:45\u00a0<@sdumitriu>\u00a0Any reason why the import and export are done on a different document?  \n20:45\u00a0<@sdumitriu>\u00a0XWiki/Import and XWiki/Export?  \n20:45\u00a0<@sdumitriu>\u00a0Instead of XWiki.XWikiPreferences like the rest of the administration sections  \n20:45\u00a0<@sdumitriu>\u00a0jvdrean: Any idea?  \n20:57\u00a0<+jvdrean>\u00a0sdumitriu: there must be a reason but I can't remember it  \n20:58\u00a0<@sdumitriu>\u00a0Same for me  \n20:58\u00a0<@sdumitriu>\u00a0They seem to work fine with XWikiPreferences  \n20:58\u00a0<+jvdrean>\u00a0could be the fact that imported xars are attached to XWiki.Import but it seems unlikely  \n20:58\u00a0<+jvdrean>\u00a0and it wouldn't explain why there are pages and not one  \n20:58\u00a0<@sdumitriu>\u00a0No, imported xars are attached to the current document  \n21:48\u00a0<npm\\_\\_>\u00a0has joined #xwiki  \n21:52\u00a0<npm\\_>\u00a0has quit  \n22:45\u00a0<mflorea>\u00a0has joined #xwiki  \n23:14\u00a0<jvdrean>\u00a0has quit  \n23:33\u00a0<mflorea>\u00a0has quit  \n  \n{{/code}}\n"}