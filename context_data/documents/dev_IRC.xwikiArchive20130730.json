{"id": "dev:IRC.xwikiArchive20130730", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130730", "title": "IRC Archive for channel #xwiki on 30 July 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<xwikibot>\u00a0has joined #xwiki  \n02:50\u00a0<fmancinelli>\u00a0has quit  \n06:54\u00a0<cjd>\u00a0has quit  \n07:28\u00a0<mflorea>\u00a0has joined #xwiki  \n07:35\u00a0<tmortagne>\u00a0has joined #xwiki  \n07:40\u00a0<evalica>\u00a0has joined #xwiki  \n07:52\u00a0<tmortagne>\u00a0has quit  \n07:52\u00a0<tmortagne1>\u00a0has joined #xwiki  \n08:35\u00a0<vmassol>\u00a0has joined #xwiki  \n08:55\u00a0<vmassol>\u00a0has quit  \n09:01\u00a0<vmassol>\u00a0has joined #xwiki  \n09:06\u00a0<vmassol>\u00a0has quit  \n09:26\u00a0<xwikibot>\u00a0has joined #xwiki  \n09:48\u00a0<msmeria>\u00a0has joined #xwiki  \n10:04\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:23\u00a0<chalx>\u00a0has joined #xwiki  \n10:23\u00a0<vmassol>\u00a0has joined #xwiki  \n10:23\u00a0<vmassol>\u00a0good morning, sorry just realized I wasn't connected\u2026 :)  \n10:23\u00a0<vmassol>\u00a0tmortagne1: I've rebuilt enterprise yesterday evening and I still get an error at startup  \n10:24\u00a0<vmassol>\u00a0https://gist.github.com/vmassol/6111231/raw/accc14de64c4f92ecd24da72479221fd055f059d/gistfile1.txt  \n10:24\u00a0<vmassol>\u00a0some module jar seem to be missing  \n10:25\u00a0<vmassol>\u00a0do you also get it?  \n10:25\u00a0<tmortagne1>\u00a0org.xwiki.extension.repository.htp.internal.DefaultHttpClientFactory  \n10:25\u00a0<tmortagne1>\u00a0looks like a type in component.txt  \n10:25\u00a0<tmortagne1>\u00a0looking  \n10:25\u00a0<vmassol>\u00a0I cannot find DefaultHttpClientFactory anywhere  \n10:25\u00a0<vmassol>\u00a0so it must have been removed I guess but not from components.txt  \n10:25\u00a0<tmortagne1>\u00a0s/type/typo/  \n10:26\u00a0<tmortagne1>\u00a0it has been removed  \n10:26\u00a0<tmortagne1>\u00a0it's in xwiki-commons-extension-repository-http  \n10:26\u00a0<vmassol>\u00a0what worries me more is that this has been going on for over 10 days I think and we didn't notice (I had it at the beginning of the seminar) :)  \n10:26\u00a0<vmassol>\u00a0I guess our CI is failing too  \n10:27\u00a0<vmassol>\u00a0tmortagne1: can I let you fix it?  \n10:27\u00a0<tmortagne1>\u00a0I fixed it  \n10:29\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n10:31\u00a0<tmortagne1>\u00a0vmassol: we used to view quickly this kind of typo but now that we use more and more MockitoComponentMockingRule component.txt files are skipped  \n10:31\u00a0<vmassol>\u00a0tmortagne1: MockitoComponentMockingRule does a getInstnace  \n10:31\u00a0<tmortagne1>\u00a0but I'm still suprise that some test in oldcore did not failed to get a component manager  \n10:31\u00a0<tmortagne1>\u00a0vmassol: and ?  \n10:31\u00a0<tmortagne1>\u00a0i'm talking about component.txt here  \n10:32\u00a0<tmortagne1>\u00a0MockitoComponentMockingRule does not load components from component.txt  \n10:32\u00a0<tmortagne1>\u00a0you have to explicitely list the components to load  \n10:32\u00a0<vmassol>\u00a0(for the Component under test)  \n10:32\u00a0<vmassol>\u00a0I'm referring to the comonent under test  \n10:32\u00a0<vmassol>\u00a0each component is supposed to be tested by a unit test  \n10:33\u00a0<tmortagne1>\u00a0vmassol: again the issue here is in component.txt  \n10:34\u00a0<tmortagne1>\u00a0the component itself does not have any issue  \n10:34\u00a0<vmassol>\u00a0indeed, I thought it was using component.txt but it doesn't, I need to add this check  \n10:34\u00a0<tmortagne1>\u00a0it does not need to use it  \n10:36\u00a0<vmassol>\u00a0tmortagne1: another problem when stopping jetty on master:  \n10:36\u00a0<vmassol>\u00a0https://gist.github.com/vmassol/6111290/raw/9310924d80e338c55002e770a954904dd2a7d8b8/gistfile1.txt  \n10:37\u00a0<tmortagne1>\u00a0this looks very jetty related  \n10:37\u00a0<tmortagne1>\u00a0no idea what could cause this  \n10:38\u00a0<vmassol>\u00a0a NPE  \n10:38\u00a0<vmassol>\u00a0in our code  \n10:38\u00a0<vmassol>\u00a0at org.xwiki.container.servlet.XWikiServletContextListener.contextDestroyed(XWikiServletContextListener.java:118)  \n10:38\u00a0<vmassol>\u00a0it seems like this.componentManager is null  \n10:38\u00a0<vmassol>\u00a0strange  \n10:38\u00a0<vmassol>\u00a0I'll see if I can reproduce  \n10:38\u00a0<tmortagne1>\u00a0componentManager is never set except in the init  \n10:39\u00a0<vmassol>\u00a0ah yes  \n10:39\u00a0<vmassol>\u00a0so we need to check for it  \n10:39\u00a0<vmassol>\u00a0I ctrcl-C before calling any request  \n10:39\u00a0<tmortagne1>\u00a0so I don't see how it could end up null  \n10:39\u00a0<vmassol>\u00a0hmm no  \n10:39\u00a0<vmassol>\u00a0we keep it from contextInitialized  \n10:40\u00a0<vmassol>\u00a0maybe it was a side effect of the components.txt error  \n10:40\u00a0<tmortagne1>\u00a0it's like contextDestroyed was called on a XWikiServletContextListener instance where contextInitialized hasn't been called  \n10:41\u00a0<tmortagne1>\u00a0or maybe jetty calls contextDestroyed even when contextInitialized fail  \n10:42\u00a0<vmassol>\u00a0ok I can reprorduce  \n10:42\u00a0<vmassol>\u00a0debugging  \n10:44\u00a0<kstuart>\u00a0has joined #xwiki  \n10:50\u00a0<vmassol>\u00a0fixing  \n11:01\u00a0<sburjan>\u00a0has joined #xwiki  \n11:10\u00a0<camil7>\u00a0has joined #xwiki  \n11:10\u00a0<sburjan`>\u00a0has quit  \n11:10\u00a0<sburjan`>\u00a0has joined #xwiki  \n11:19\u00a0<chalx>\u00a0has quit  \n11:24\u00a0<chalx>\u00a0has joined #xwiki  \n11:25\u00a0<tdelafosse>\u00a0has joined #xwiki  \n11:28\u00a0<gdelhumeau>\u00a0has quit  \n11:29\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n11:44\u00a0<chalx>\u00a0has quit  \n11:46\u00a0<msmeria1>\u00a0has joined #xwiki  \n11:47\u00a0<evalica>\u00a0has quit  \n11:48\u00a0<msmeria>\u00a0has quit  \n11:49\u00a0<vmassol1>\u00a0has joined #xwiki  \n11:49\u00a0<vmassol>\u00a0has quit  \n11:50\u00a0<evalica>\u00a0has joined #xwiki  \n11:51\u00a0<msmeria>\u00a0has joined #xwiki  \n11:53\u00a0<msmeria1>\u00a0has quit  \n11:56\u00a0<Slashman>\u00a0has joined #xwiki  \n11:57\u00a0<kstuart>\u00a0has quit  \n11:57\u00a0<kstuart>\u00a0has joined #xwiki  \n13:12\u00a0<vmassol1>\u00a0cool got webjars+requirejs+angular working in xwiki :) This means we can easily write extensions that use javascript frameworks. I'll write a tutorial this afternoon.  \n13:13\u00a0<vmassol1>\u00a0is now known as <vmassol>  \n13:14\u00a0<tmortagne>\u00a0vmassol: provided we move to servlet 3.0 ?  \n13:15\u00a0<vmassol>\u00a0it'll work for anyone using a servlet 3.0 container with no change  \n13:15\u00a0<vmassol>\u00a0(at least it works in jetty 8.x with no change)  \n13:15\u00a0<vmassol>\u00a0so not something we can bundle in the platform ATM  \n13:15\u00a0<tmortagne>\u00a0yep ok so servlet 3.0 minimu for this kind of extensions  \n13:15\u00a0<vmassol>\u00a0but for extensions it could be ok provided the user is using servlet 3.0  \n13:15\u00a0<vmassol>\u00a0yes  \n13:20\u00a0<tmortagne>\u00a0has quit  \n13:32\u00a0<mflorea>\u00a0has quit  \n13:34\u00a0<tmortagne>\u00a0has joined #xwiki  \n14:04\u00a0<xwikibot>\u00a0has joined #xwiki  \n14:14\u00a0<mflorea>\u00a0has joined #xwiki  \n14:48\u00a0<cjd>\u00a0has joined #xwiki  \n14:59\u00a0<evalica>\u00a0has quit  \n14:59\u00a0<kstuart>\u00a0has quit  \n15:03\u00a0<kstuart>\u00a0has joined #xwiki  \n15:26\u00a0<cjd>\u00a0!rm -rf XWiki.ScytekLaboratories  \n15:35\u00a0<camil7>\u00a0nice spambot; deletes himself after dropping the spam :D  \n15:39\u00a0<sburjan>\u00a0has quit  \n15:40\u00a0<sburjan>\u00a0has joined #xwiki  \n15:41\u00a0<cjd>\u00a0heh  \n15:42\u00a0<cjd>\u00a0I have a feeling that spam was done manually  \n16:22\u00a0<tmortagne>\u00a0Eclipse devs: proper support of our checkstyle setup in Eclipse cs is back, see http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki52M1#HNewEclipsecsextension  \n16:57\u00a0<sburjan>\u00a0has quit  \n17:01\u00a0<msmeria>\u00a0has quit  \n17:14\u00a0<Enygma`>\u00a0has joined #xwiki  \n17:50\u00a0<vmassol>\u00a0tmortagne: snif\u2026. webjars not put in WEB-INF/lib don't seem to work  \n17:50\u00a0<npm>\u00a0has joined #xwiki  \n17:51\u00a0<vmassol>\u00a0it's normal actually  \n17:51\u00a0<tmortagne>\u00a0classloader issue I guess  \n17:51\u00a0<vmassol>\u00a0the servlet container parses the jars in WEB-INF/lib at startup  \n17:51\u00a0<vmassol>\u00a0to discover annotations and the like  \n17:52\u00a0<vmassol>\u00a0in jetty it's done by http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/webapp/MetaInfConfiguration.html  \n17:52\u00a0<vmassol>\u00a0wrong paste  \n17:52\u00a0<vmassol>\u00a0http://www.eclipse.org/jetty/documentation/current/configuring-webapps.html  \n17:53\u00a0<vmassol>\u00a0I don't think servlet 3.0 spec supports dynamic additions\u2026 checking  \n17:53\u00a0<vmassol>\u00a0actually I'm sure it doesn't  \n17:57\u00a0<vmassol>\u00a0maybe it's possible to configure jetty to perform this dynamically  \n18:02\u00a0<vmassol>\u00a0the problem is that the container has no way of knowing a new jar has been added to the classloader  \n18:03\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n18:05\u00a0<cjd>\u00a0has quit  \n18:11\u00a0<tmortagne>\u00a0vmassol: if webjar was loading resources dynamically it would not care when the jar has been added  \n18:11\u00a0<vmassol>\u00a0its not about webajrs  \n18:11\u00a0<vmassol>\u00a0you mean not using servlet 3.0?  \n18:11\u00a0<vmassol>\u00a0that's something else  \n18:12\u00a0<vmassol>\u00a0I guess that might be possible, will need to research it  \n18:12\u00a0<vmassol>\u00a0I see there's a webars-locator module  \n18:22\u00a0<kstuart>\u00a0has quit  \n18:33\u00a0<vmassol>\u00a0tmortagne: actually we could have a custom \"webjars\" XWiki Action to get the content from JAR files inside META-INF/resources/webjars  \n18:34\u00a0<tmortagne>\u00a0yes either an action or a servlet it's not very hard  \n18:34\u00a0<vmassol>\u00a0too bad we don't have pluggable actions yet...  \n18:41\u00a0<vmassol>\u00a0bbl  \n18:41\u00a0<vmassol>\u00a0has quit  \n18:55\u00a0<gdelhumeau>\u00a0has quit  \n18:56\u00a0<tmortagne>\u00a0has quit  \n18:59\u00a0<kstuart>\u00a0has joined #xwiki  \n19:00\u00a0<kstuart>\u00a0has quit  \n19:01\u00a0<kstuart>\u00a0has joined #xwiki  \n19:12\u00a0<camil7>\u00a0has quit  \n19:19\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n19:21\u00a0<tdelafosse>\u00a0has quit  \n19:27\u00a0<Slashman>\u00a0has quit  \n19:48\u00a0<mflorea>\u00a0has quit  \n20:05\u00a0<KermitTheFragger>\u00a0has quit  \n20:17\u00a0<sdumitriu1>\u00a0has quit  \n20:35\u00a0<xwikibot>\u00a0has quit  \n20:36\u00a0<xwikibot>\u00a0has joined #xwiki  \n20:44\u00a0<kstuart>\u00a0has quit  \n20:55\u00a0<tmortagne>\u00a0has joined #xwiki  \n20:59\u00a0<kstuart>\u00a0has joined #xwiki  \n21:03\u00a0<tmortagne>\u00a0has quit  \n21:49\u00a0<cjd>\u00a0has joined #xwiki  \n22:10\u00a0<Enygma`>\u00a0has quit  \n22:28\u00a0<vmassol>\u00a0has joined #xwiki  \n23:42\u00a0<vmassol>\u00a0has quit  \n23:57\u00a0<abusenius\\_>\u00a0has quit\n"}