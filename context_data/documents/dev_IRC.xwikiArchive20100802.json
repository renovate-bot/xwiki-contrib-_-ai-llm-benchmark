{"id": "dev:IRC.xwikiArchive20100802", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100802", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nflorinciu left at 00:30 (Read error: Connection reset by peer  \nabusenius left at 02:05 (Ping timeout: 245 seconds  \nztane left at 06:59 (Ping timeout: 260 seconds  \nztane joined #xwiki at 07:01  \nflorinciu joined #xwiki at 07:31  \nmflorea joined #xwiki at 07:45  \nkibahop joined #xwiki at 08:06  \nkibahop left #xwiki at 08:06  \nasrfel joined #xwiki at 08:42  \nsburjan joined #xwiki at 08:48  \ntmortagne joined #xwiki at 09:12  \ntmortagne - (09:30): Is someone already upgrading myxwiki.org ? I wanted to do it but it seen a /usr/local/xwiki-enterprise-web-2.4.war  \ntmortagne - (09:48): looks pretty old, i'm taking care of the real upgrade then  \ntmortagne - (10:01): [myxwiki.org] Stopping for upgrade  \nsylviarusu joined #xwiki at 10:12  \nmflorea - (10:16): tmortagne: XWiki.XWikiServerClass has a \"secure\" property that controls if the URLs to that subwiki should use HTTP or HTTPS. Currently the scheme/protocol is computed only by taking into account this property (and xwiki.url.protocol config parameter). WDYT about using ServletRequest#isSecure when neither xwiki.url.protocol not \"secure\" property are specified. This will have the effect that if you go to xwiki.org with HTTPS then links to platform.xwiki.org w  \nabusenius joined #xwiki at 10:16  \ntmortagne left at 10:22 (Ping timeout: 260 seconds  \ncjdelisle - (10:23): do you remember why DefaultXWikiX509KeyPair was final?  \ntmortagne joined #xwiki at 10:24  \ntmortagne - (10:25): mflorea: I lost part of what you said i think since I just get internet back  \nmflorea - (10:25): let me repeat  \nmflorea - (10:25): tmortagne: XWiki.XWikiServerClass has a \"secure\" property that controls if the URLs to that subwiki should use HTTP or HTTPS. Currently the scheme/protocol is computed only by taking into account this property (and xwiki.url.protocol config parameter). WDYT about using ServletRequest#isSecure when neither xwiki.url.protocol not \"secure\" property are specified. This will have the effect that if you go to xwiki.org with HTTPS then links to platform.xwiki.org w  \ntmortagne - (10:26): mflorea: ok i see this part:  \ntmortagne - (10:26): 10:18:34 AM) <moi>: mflorea: AFAIK that's not true, if the property is not set XWiki uses the request URL to find the proper protocol  \ntmortagne - (10:26): (10:18:55 AM) <moi>: if it does not work it's a bug because it wused to work for sure  \nmflorea - (10:28): I have a test that proves https is lost and the code in XWiki#getServerURL(database, context) contains:  \nmflorea - (10:28): String protocol = context.getWiki().Param(\"xwiki.url.protocol\", null);  \nmflorea - (10:28): if (protocol == null) {  \nmflorea - (10:28): \u00a0\u00a0protocol = serverobject.getIntValue(\"secure\") == 1 ? \"https\" : \"http\";  \nmflorea - (10:28): }  \nabusenius - (10:29): cjdelisle: no  \ntmortagne - (10:32): mflorea: what i was remembering was XWikiServletURL#getServerURL it seems which does what i just said, XWiki#getServerURL should do the same i think  \ntmortagne - (10:33): mflorea: i just checked  \ntmortagne - (10:33): and there is code looking at request port  \nmflorea - (10:33): XWikiServletURLFactory#getServerURL calls XWiki#getServerURL when creating an URL for a subwiki  \ntmortagne - (10:33): mflorea: i know  \ncjdelisle - (10:34): abusenius: I decided to dump all of the PKCS12 support, it was just too much of a pain to support 2 serialization methods and with the security of PKCS12 you might as well hang a sign saying \"please don't steal my keys\".  \ntmortagne - (10:34): mflorea: IMO XWiki#getServerURL tries to do the right think but does it badly  \nmflorea - (10:34): tmortagne, where do you see code that take into account request.isSecure?  \ntmortagne - (10:34): since it looking at request port  \ntmortagne - (10:35): mflorea: i never tmortagnealked about isSecure  \ntmortagne - (10:35): s/tmortagnealked/talked/  \nmflorea - (10:35): ok  \ntmortagne - (10:35): i talked about the request protocol  \ntmortagne - (10:35): which is more generic  \nmflorea - (10:36): well, not necessarily, beacuse request.isSecure take into account multiple factors, like whether we are behind a reverse proxy  \ntmortagne - (10:36): anyway  \nabusenius - (10:36): cjdelisle, ok, we don't really care if it is a standard format or not, lets see if somebody asks for pkcs12  \ntmortagne - (10:37): XWiki should take into acount informations from the request  \nmflorea - (10:38): ok, then I'll change XWiki#getServerURL to take into account request.isSecure when neither xwiki.url.protocol not \"secure\" property of XWiki.XWikiServerClass are specified  \nmflorea - (10:38): s/not/nor  \nevalica joined #xwiki at 10:44  \nvmassol joined #xwiki at 10:50  \ntmortagne left at 10:51 (Quit: Leaving.  \ntmortagne joined #xwiki at 10:52  \ntmortagne1 joined #xwiki at 10:59  \ntmortagne left at 10:59 (Read error: Connection reset by peer  \njvdrean joined #xwiki at 11:00  \nEnygma` joined #xwiki at 11:01  \ntmortagne1 - (11:03): [myxwiki.org] Upgrade to 2.4 done  \nvenkatesh joined #xwiki at 11:04  \ntmortagne1 left at 11:09 (Quit: Leaving.  \ntmortagne joined #xwiki at 11:09  \ntmortagne left at 11:19 (Quit: Leaving.  \ntmortagne joined #xwiki at 11:19  \ntmortagne left at 11:33 (Ping timeout: 265 seconds  \nKermitTheFragger joined #xwiki at 11:35  \ntmortagne joined #xwiki at 11:35  \nmflorea left at 11:40 (Quit: Leaving.  \nvmassol left at 11:59 (Quit: Leaving.  \nasrfel left at 12:02 (Read error: Connection reset by peer  \nasrfel joined #xwiki at 12:03  \nvmassol joined #xwiki at 12:04  \nvmassol left at 12:04 (Client Quit  \nvenkatesh left at 12:22 (Quit: Leaving  \nsylviarusu left at 12:24 (Quit: Leaving.  \nasrfel1 joined #xwiki at 12:34  \nasrfel left at 12:35 (Ping timeout: 276 seconds  \nsburjan left at 12:36 (Ping timeout: 264 seconds  \nsburjan joined #xwiki at 12:48  \nmflorea joined #xwiki at 13:00  \nflorinciu left at 13:25 (Read error: Connection reset by peer  \nflorinciu joined #xwiki at 13:25  \nEnygma` left at 13:41 (Quit: Leaving.  \nvmassol joined #xwiki at 13:53  \nsylviarusu joined #xwiki at 13:56  \nEnygma` joined #xwiki at 14:25  \nmflorea - (14:50): guys, do you know if I can import a JS file from an attached zip using $xwiki.jsfx.use or something similar? \"${doc.getAttachmentURL('xwe.zip')}/XWikiWysiwyg.js\" is a relative URL to the JS file I'd like to import, but it's not usable with $xwiki.jsfx.use  \njvdrean - (14:57): mflorea: jsfx uses getSkinFile internally, that's why it doesn't work in your case  \nmflorea - (14:58): jvdrean, yes I get /xwiki/bin/skin/skins/albatross//xwiki/bin/download/mflorea/XWEPreview/xwe.zip/XWikiWysiwyg.js?defer=false&lazy=false which is obviously not good  \nsylviarusu left at 16:13 (Quit: Leaving.  \ntmortagne1 joined #xwiki at 16:14  \ntmortagne left at 16:14 (Read error: Connection reset by peer  \ntmortagne1 left at 16:24 (Ping timeout: 246 seconds  \ntmortagne joined #xwiki at 16:24  \nsburjan left at 16:37 (Ping timeout: 260 seconds  \nevalica left at 17:17 (Read error: Connection reset by peer  \nasrfel1 left at 18:14 (Quit: Leaving.  \njvdrean left at 18:16 (Quit: Leaving.  \ntsziklay joined #xwiki at 18:25  \nabusenius left at 18:53 (Ping timeout: 240 seconds  \nmflorea left at 18:57 (Quit: Leaving.  \njvdrean joined #xwiki at 19:09  \nvmassol left at 19:27 (Quit: Leaving.  \nabusenius joined #xwiki at 19:38  \nKermitTheFragger left at 19:53 (Quit: Leaving  \ntmortagne left #xwiki at 19:58  \njvdrean left at 20:33 (Quit: Leaving.  \nmflorea joined #xwiki at 20:46  \nEnygma` left at 21:00 (Ping timeout: 260 seconds  \njvdrean joined #xwiki at 21:02  \nsdumitriu joined #xwiki at 21:12  \ntmortagne1 joined #xwiki at 21:13  \njvdrean left at 22:22 (Quit: Leaving.  \njvdrean joined #xwiki at 22:28  \ntmortagne1 left #xwiki at 22:29  \njvdrean left at 22:30 (Client Quit  \nmflorea left at 23:18 (Quit: Leaving.  \njvdrean joined #xwiki at 23:21  \njvdrean left at 23:43 (Quit: Leaving.  \n\n"}