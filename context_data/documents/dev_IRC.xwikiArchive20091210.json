{"id": "dev:IRC.xwikiArchive20091210", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20091210", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nlucaa joined #xwiki at 00:45  \nCalebJamesDeLisl joined #xwiki at 00:45  \nlucaa1 joined #xwiki at 00:47  \nlucaa1 left #xwiki at 00:47  \nlucaa left at 01:06 (Read error: 110 (Connection timed out)  \nLukemon\\_ is now known as Lukemon ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nLukemon - (01:45): Caleb you're there?  \nCalebJamesDeLisl - (02:02): Hi Luke.  \nLukemon - (02:13): Hi  \nLukemon - (02:14): XWikiRenderingEngine is an old rendering implementation, right?  \nLukemon - (02:16): and the new one is based on (TransformationManager) transformations.performTransformations?  \nCalebJamesDeLisl - (02:16): Yes, everything inside of core/xwiki-core is depricated the new rendering system is in core/xwiki-rendering  \nCalebJamesDeLisl - (02:17): Transformations are a part of the new rendering system, but they are not the entire system.  \nLukemon - (02:18): hm.. and what is needed for rendering aside of transforming wiki/2.0 into xhtml/1.0 ?  \nCalebJamesDeLisl - (02:18): The new system works in two steps, 1. parses the text to XDOM which is syntaxless 2. renders the XDOM to XHTML or whatever.  \nCalebJamesDeLisl - (02:22): I have to eat supper, look at XWikiDocument 5665 performSyntaxConversion  \nLukemon - (02:25): bon apetit :)  \nLukemon - (02:30): actually I'm looking for a cache in a new rendering model  \nLukemon - (02:30): I can't see one  \nCalebJamesDeLisl - (02:47): The XDOM is stored but unfortunately it is not used in rendering see: http://jira.xwiki.org/jira/browse/XWIKI-3355  \nCalebJamesDeLisl - (02:51): However the processor expensive part is the rendering and post rendering caching is dangerous  \nCalebJamesDeLisl - (02:53): If you cache post rendering, some of the content generated on the spot may be wrong, I had talked earlier about a 30 second or 1 minute cache to deal with the slashdot effect.  \nCalebJamesDeLisl - (03:02): I'm going to watch a movie, be back in an hour and a half  \nLukemon - (03:10): why is post-rendering caching dangerous?  \nLukemon - (03:12): you meant situations when each time a given page generates different content?  \nLukemon left at 03:42 (\"Pull the pin and count to what?\"  \nLukemon joined #xwiki at 03:47  \nCalebJamesDeLisl - (04:25): Yes, dynamically generated content.  \nlucaa joined #xwiki at 07:31  \nvmassol joined #xwiki at 08:09  \nvmassol left #xwiki at 08:09  \nvmassol joined #xwiki at 08:11  \nplunden joined #xwiki at 08:11  \nxwikibot joined #xwiki at 08:12  \nCalebJamesDeLisl left at 08:55 (\":]\"  \nvmassol left at 08:58 (\"Leaving.\"  \nEnygma` joined #xwiki at 09:06  \nvmassol joined #xwiki at 09:07  \nvmassol - (09:35): guys the IRC/Jabber bridge is down right now  \narkub joined #xwiki at 10:03  \nKermitTheFragger joined #xwiki at 10:03  \nlucaa left at 10:16 (\"Leaving.\"  \nxwiki-bridge joined #xwiki at 10:43  \nxwiki-bridge - (10:43): \\* joel has set the subject to: XWiki public chat  \nxwiki-bridge - (10:43): [jvdrean] ok it's here but I had to start it manually  \nvmassol left #xwiki at 10:44  \nxwiki-bridge - (10:44): jira cache macro  \nvmassol joined #xwiki at 10:45  \nlucaa joined #xwiki at 10:49  \nlucaa left #xwiki at 10:51  \nxwiki-bridge - (11:37): [Vincent Massol] asirir: I really don't understand why you created RenderingTests in the wiki macro module  \nvmassol left #xwiki at 11:37  \nxwiki-bridge - (11:37): [Vincent Massol] it looks way too complex  \nxwiki-bridge - (11:37): [Vincent Massol] all you seem to be testing is DefaultWikiMacro.execute()  \nxwiki-bridge - (11:38): [asirir] Vincent Massol: yes, i mean that part contains the wiki macro execution logic  \nxwiki-bridge - (11:38): [Vincent Massol] so for this all you need is a DefaultWikiMacroTest file and call the execute macro  \nxwiki-bridge - (11:38): [asirir] let me check  \nxwiki-bridge - (11:38): [Vincent Massol] s/execute macro/execute methoid/  \nxwiki-bridge - (11:38): [Vincent Massol] and btw you're missing tens of tests  \nxwiki-bridge - (11:39): [Vincent Massol] at least 70% of the code isn't tested  \nxwiki-bridge - (11:40): [asirir] Vincent Massol: wiki macro registration is in core dealing with objects and classes. tmortagne also metioned this (that i should have tests in core).  \nxwiki-bridge - (11:40): [Vincent Massol] nope  \nxwiki-bridge - (11:40): [Vincent Massol] I'm talking about the wiki macro bridge module  \nxwiki-bridge - (11:41): [Vincent Massol] (xwiki-core-rendering-macro-wikibridge)  \nxwiki-bridge - (11:41): [asirir] Vincent Massol: you mean for registerWikiMacro(), unregisterWikiMacro() methods? using Mocks?  \nxwiki-bridge - (11:41): [asirir] yup  \nxwiki-bridge - (11:41): [Vincent Massol] I'm fixing a lot of stuff but I won't have time to fix it all  \nxwiki-bridge - (11:42): [Vincent Massol] I'm aready spending 3 times more time I wanted on this  \nxwiki-bridge - (11:42): [asirir] Vincent Massol: I'll add tests, leave it to me.  \nxwiki-bridge - (11:42): [Vincent Massol] ok now tearing down the rendering testts  \nxwiki-bridge - (11:42): [Vincent Massol] I can't  \nxwiki-bridge - (11:42): [Vincent Massol] the pb in tests  \nxwiki-bridge - (11:43): [Vincent Massol] is that they are more complex than the code they are testing  \nxwiki-bridge - (11:43): [Vincent Massol] which is definitely wrong  \nxwiki-bridge - (11:43): [Vincent Massol] so I can't easily add new tests  \nxwiki-bridge - (11:43): [Vincent Massol] so I need to fully rewrtie them  \nxwiki-bridge - (11:43): [Vincent Massol] half a day more....  \nxwiki-bridge - (11:43): [Vincent Massol] grrrr  \nxwiki-bridge - (11:44): [asirir] I think i thought rendering tests are easy to do.. but yes, this leaves registration / unregistration logic untested.  \nxwiki-bridge - (11:44): [Vincent Massol] no that part is tested  \nxwiki-bridge - (11:44): [Vincent Massol] in DefaultWikiMacroManagerTest  \nxwiki-bridge - (11:44): [Vincent Massol] (which I have rewritten too)  \nxwiki-bridge - (11:45): [asirir] why did you re-write? to use mocks instead?  \nxwiki-bridge - (11:46): [Vincent Massol] yes  \nxwiki-bridge - (11:48): [asirir] Vincent Massol: so what is not tested is WikiMacroEventListener and DefaultWikiMacro (which should not have been tested with rendering tests) is it?  \nxwiki-bridge - (11:48): [Vincent Massol] DefaultWikiMacro is tested (only a bit) but using the wrong strategy (test files)  \nxwiki-bridge - (11:48): [Vincent Massol] the event listener is not tested indeed  \nxwiki-bridge - (11:49): [Vincent Massol] anyway let's do a code review together later on  \nxwiki-bridge - (11:50): [asirir] ok  \nxwiki-bridge - (12:00): [silviar] I've created a page on the Incubator for issues with the 2.2 Snapshots. Here it is http://incubator.myxwiki.org/xwiki/bin/view/Test/22Snapshots in case anyone wants to take a look, or add other issues  \nxwiki-bridge - (12:02): [glerouge] silviar: thank, I'll give it a look  \nxwiki-bridge - (12:03): [Vincent Massol] hmmm how can 2.2 be so different from 2.1?  \nxwiki-bridge - (12:03): [Vincent Massol] we haven't committed much  \nxwiki-bridge - (12:04): [Vincent Massol] sdumitriu and jvdrean, could you check silvia's page at http://incubator.myxwiki.org/xwiki/bin/view/Test/22Snapshots ? A lot of issues seem to be skin related  \nxwiki-bridge - (12:05): [Vincent Massol] maybe some regressions introduced in your past commits?  \nxwiki-bridge - (12:05): [asirir] Vincent Massol: I think i used rendering tests for WikiMacro tests because that ensures the overall functionality, I mean a rendering test ensures the whole thing works. But i guess this is where i was wrong.   \nxwiki-bridge - (12:05): [jvdrean] Vincent Massol, sdumitriu: looks like outdated browser cache  \nxwiki-bridge - (12:05): [Vincent Massol] asirir: it doesn't ensure the whole thing work  \nxwiki-bridge - (12:05): [Vincent Massol] for that you need a functional test  \nxwiki-bridge - (12:06): [Vincent Massol] and you're not ensuring that anything works at all  \nxwiki-bridge - (12:06): [Vincent Massol] since you're mocking everything  \nxwiki-bridge - (12:06): [Vincent Massol] :)  \nxwiki-bridge - (12:06): [Vincent Massol] unit tests with mocks are not meant to ensure everything works  \nxwiki-bridge - (12:07): [Vincent Massol] they are meant to ensure a very specific part of the code works  \nxwiki-bridge - (12:07): [asirir] I'm not mocking anything...  \nxwiki-bridge - (12:07): [Vincent Massol] you are... :)  \nxwiki-bridge - (12:07): [Vincent Massol] MockWikiMacro, RenderingtTests.setUpMocks()  \nxwiki-bridge - (12:08): [asirir] MockWikiMacro has a real WikiMacro inside it...   \nxwiki-bridge - (12:08): [Vincent Massol] you're mockcing the context inside  \nxwiki-bridge - (12:08): [Vincent Massol] it's not the real one  \nxwiki-bridge - (12:08): [asirir] only DAB :(  \nxwiki-bridge - (12:08): [Vincent Massol] mocking isn't the pb asiri  \nxwiki-bridge - (12:09): [asirir] yes yes, i got your point.  \nxwiki-bridge - (12:09): [Vincent Massol] I'm just answering your point about \"nsures the overall functionality\"  \nxwiki-bridge - (12:09): [Vincent Massol] which isn't correct  \nxwiki-bridge - (12:09): [Vincent Massol] I'm just trying to make you realize that unit tests are not supposed to do that  \nxwiki-bridge - (12:10): [Vincent Massol] so it's fine if they are not testing the whole thing  \nxwiki-bridge - (12:11): [asirir] In my mind rendering tests are like test-all solution.. I'm wrong, realized.  \nxwiki-bridge - (12:12): [Vincent Massol] they kind of are but in your case they're not the right solution  \nxwiki-bridge - (12:12): [Vincent Massol] because they're not conveneient  \nxwiki-bridge - (12:12): [Vincent Massol] since you need to control the beheavior of lots of things  \nxwiki-bridge - (12:12): [Vincent Massol] a simple \"standard\" unit test is simpler I believe  \nxwiki-bridge - (12:12): [Vincent Massol] anyway I'm writing one, I'll see if this is true or not ;)  \nxwiki-bridge - (12:13): [Vincent Massol] just found a bug writing the tests btw  \nxwiki-bridge - (12:13): [Vincent Massol] your context restoration logic is worng  \nxwiki-bridge - (12:14): [asirir] that's interesting, i was very careful with that..  \nxwiki-bridge - (12:14): [asirir] wait  \nxwiki-bridge - (12:14): [Vincent Massol] there are at least 2 places when an exception can be thrown  \nxwiki-bridge - (12:14): [Vincent Massol] and it won't be reset  \nxwiki-bridge - (12:14): [Vincent Massol] basically it's not protected with finally  \nxwiki-bridge - (12:14): [asirir] argh!  \nxwiki-bridge - (12:15): [Vincent Massol] it's easy, whenever you read \"reset\" or \"restore\" you can be sure it needs a finally  \nxwiki-bridge - (12:15): [Vincent Massol] ;)  \nxwiki-bridge - (12:15): [glerouge] asirir: learning in progress ;)  \nxwiki-bridge - (12:15): [asirir] :)  \nxwiki-bridge - (12:15): [Vincent Massol] also I'm not sure about the logic for inline stuff. I remember you discussed it but the algo in there seems not complete  \nxwiki-bridge - (12:16): [Vincent Massol] in any case it's missing doc to explain the limitation  \nxwiki-bridge - (12:16): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// If in inline mode, check whether wiki macro code segment starts with a nested macro block.  \nxwiki-bridge - (12:16): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// If this is the case, we need to force this nested macro to be an inline macro.  \nxwiki-bridge - (12:17): [asirir] yup, that's what it does...  \nxwiki-bridge - (12:17): [Vincent Massol] it doesn't explain why and it doesn't explain what happens if other non inline block is put too  \nxwiki-bridge - (12:17): [Vincent Massol] why do we need to force the nested macro to be an inline macro?  \nxwiki-bridge - (12:17): [Vincent Massol] it doesn't say so  \nxwiki-bridge - (12:18): [asirir] Vincent Massol: wiki macro is used inline -> it's body starts with a block macro -> this is wrong..  \nxwiki-bridge - (12:19): [asirir] \"it's body starts with a block macro\" -> i mean the wiki macro body always starts on a newline... thus making it behave as a block macro  \nxwiki-bridge - (12:20): [silviar] \u00a0jvdrean: indeed, part of the issues were cache related. I've updated the page accordingly. Thx ;)  \nxwiki-bridge - (12:20): [asirir] so in such cases a paragraph element is inserted when executed.. which the wiki macro author did not want there to be..  \nxwiki-bridge - (12:22): [asirir] The comment should have explained this yes.  \nxwiki-bridge - (12:22): [Vincent Massol] \"i mean the wiki macro body always starts on a newline... thus making it behave as a block macro\"  \nxwiki-bridge - (12:22): [Vincent Massol] I don't get it  \nxwiki-bridge - (12:23): [Vincent Massol] we're trimming empty lines in Macro Transformation AFAIR  \nxwiki-bridge - (12:24): [Vincent Massol] also you didn't say what happens if I put a standalone block in the macro  \nxwiki-bridge - (12:24): [asirir] Vincent Massol: WikiMacro's content (i.e macro code) is parsed into an XDOM... and this body starts with a macro block... so it behaves as a block macro...  \nxwiki-bridge - (12:24): [asirir] Vincent Massol: what is a \"standalone block\" ? :(  \nxwiki-bridge - (12:25): [Vincent Massol] macro block can be parsed as inline or standlaone blocks  \nxwiki-bridge - (12:25): [Vincent Massol] ok I think I understand  \nxwiki-bridge - (12:25): [Vincent Massol] but there are still problems not solved  \nxwiki-bridge - (12:26): [Vincent Massol] I'll udpate the comments  \nxwiki-bridge - (12:26): [Vincent Massol] to answer your question, imagine I have: === hello ===  \nxwiki-bridge - (12:26): [Vincent Massol] in the macro  \nxwiki-bridge - (12:26): [tmortagne] Vincent Massol: what asiri did is a workaound for not having inline parser  \nxwiki-bridge - (12:26): [Vincent Massol] yes but not a complete one  \nxwiki-bridge - (12:26): [tmortagne] to summurize  \nxwiki-bridge - (12:26): [Vincent Massol] I think he just handled the case of macros  \nxwiki-bridge - (12:27): [tmortagne] can't be really complete anyway  \nxwiki-bridge - (12:27): [Vincent Massol] well if the macro is meant to work in inline mode  \nxwiki-bridge - (12:27): [asirir] Vincent massol: if you put ==== hello ==== in the openning of the wiki macro, you should not have marked your wiki macro to support inline mode..  \nxwiki-bridge - (12:27): [Vincent Massol] yes  \nxwiki-bridge - (12:28): [Vincent Massol] I understand what was done and why  \nxwiki-bridge - (12:28): [Vincent Massol] I'll update the doc  \nxwiki-bridge - (12:28): [Vincent Massol] btw asirir you keep doing this kind of construct everywhere:  \nxwiki-bridge - (12:28): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0XDOM xdom = null;  \nxwiki-bridge - (12:29): [Vincent Massol] the setting to null  \nxwiki-bridge - (12:29): [Vincent Massol] I have fixed tons of them  \nxwiki-bridge - (12:29): [asirir] Anyway, my commenting is very poor it seems :(  \nxwiki-bridge - (12:29): [asirir] oh  \nxwiki-bridge - (12:29): [Vincent Massol] there's no need to initialize a value to null when you're setting its value afterwards  \nxwiki-bridge - (12:30): [asirir] local variable not initialized to null gives \"this variable might not have been intiialized\" error it's so in my mind i do it all the time :(  \nxwiki-bridge - (12:30): [Vincent Massol] no  \nxwiki-bridge - (12:30): [Vincent Massol] not true  \nxwiki-bridge - (12:30): [Vincent Massol] they give this only when you don't initialize them!  \nxwiki-bridge - (12:31): [Vincent Massol] :)  \nxwiki-bridge - (12:31): [asirir] XDOM xdom; <-- looks naked to me :(  \nxwiki-bridge - (12:31): [asirir] my bad  \nxwiki-bridge - (12:31): [Vincent Massol] it's not a big pb but I'm mentioning it since you seem to do this everywhere  \nxwiki-bridge - (12:31): [asirir] it's just that i have got into that habbit :(  \nxwiki-bridge - (12:31): [Vincent Massol] intelilj IDEA which is more intelligent than Eclipse complais about it  \nxwiki-bridge - (12:31): [Vincent Massol] s/complais/complains/  \nxwiki-bridge - (12:32): [asirir] eclipse is KISS  \nxwiki-bridge - (12:32): [asirir] :)  \nxwiki-bridge - (12:32): [asirir] so am i.. :D  \nxwiki-bridge - (12:32): [asirir] (just kidding)  \nxwiki-bridge - (12:33): [Vincent Massol] tmortagne: shouldn't we verify in Macro Tx that all mandatory params are passed? Or in AbstractMacro?  \nxwiki-bridge - (12:33): [asirir] Anyway, I'll get out of that habbit. (i seriously thought it is the better way)  \nxwiki-bridge - (12:34): [Vincent Massol] it's misleading  \nxwiki-bridge - (12:34): [Vincent Massol] you think it can take the value null when it doesn't  \nxwiki-bridge - (12:35): [asirir] i see.  \nxwiki-bridge - (12:36): [Vincent Massol] asirir: why do we need to specify if the macro content is mandatory or not?  \nxwiki-bridge - (12:37): [asirir] well, it's in MacroContentDescriptor interface..  \nxwiki-bridge - (12:38): [asirir] ContentDescriptor::isMandatory()  \nxwiki-bridge - (12:38): [asirir] i think i copied that directly into wiki macro world.  \nxwiki-bridge - (12:38): [Vincent Massol] ok  \nxwiki-bridge - (12:38): [Vincent Massol] thomas added it to prevent checking for null on the content probably  \nxwiki-bridge - (12:39): [Vincent Massol] another question: why can it be \"optional\"?  \nxwiki-bridge - (12:39): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0needsUpdate |= bclass.addStaticListField(MACRO\\_CONTENT\\_TYPE\\_PROPERTY, \"Macro content type\", 1, false,  \nxwiki-bridge - (12:39): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Mandatory|Optional|No content\", \"select\", \"|\");  \nxwiki-bridge - (12:39): [Vincent Massol] there are 3 possible values  \nxwiki-bridge - (12:39): [Vincent Massol] but ContentDescriptor::isMandatory() means only 2 values  \nxwiki-bridge - (12:40): [asirir] If the macro author wants to have a default behaviour without a body as well..  \nxwiki-bridge - (12:40): [asirir] I don;t know i thought like that..  \nxwiki-bridge - (12:40): [asirir] oops  \nxwiki-bridge - (12:41): [Vincent Massol] personally I wouldn't have put this param at all  \nxwiki-bridge - (12:42): [Vincent Massol] or I would hav eput a boolean  \nxwiki-bridge - (12:42): [tmortagne] Vincent Massol: content mandatory info is for WYSIWYG mainly  \nxwiki-bridge - (12:42): [tmortagne] AFAIK parameter mandatory are checked  \nxwiki-bridge - (12:42): [Vincent Massol] yes they are  \nxwiki-bridge - (12:43): [Vincent Massol] they're shown in different colors  \nxwiki-bridge - (12:43): [Vincent Massol] (AFAIR)  \nxwiki-bridge - (12:43): [tmortagne] i mean in transformation  \nxwiki-bridge - (12:43): [Vincent Massol] oh  \nxwiki-bridge - (12:43): [tmortagne] you get error  \nxwiki-bridge - (12:43): [tmortagne] supposed to  \nxwiki-bridge - (12:43): [Vincent Massol] then maybe we can remove what asiri had added:  \nxwiki-bridge - (12:43): [tmortagne] it's done at xwiki-properties level AFAIK  \nxwiki-bridge - (12:44): [Vincent Massol] in execute() he's checking for mandatory params  \nxwiki-bridge - (12:44): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// First verify that all mandatory parameters are provided.  \nxwiki-bridge - (12:44): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Map<String, ParameterDescriptor> parameterDescriptors = getDescriptor().getParameterDescriptorMap();  \nxwiki-bridge - (12:44): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0for (String parameterName : parameterDescriptors.keySet()) {  \nxwiki-bridge - (12:44): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ParameterDescriptor parameterDescriptor = parameterDescriptors.get(parameterName);  \nxwiki-bridge - (12:44): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (parameterDescriptor.isMandatory() && (null == parameters.get(parameterName))) {  \nxwiki-bridge - (12:44): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw new MacroParameterException(String.format(\"Parameter [%s] is mandatory\", parameterName));  \nxwiki-bridge - (12:44): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}  \nxwiki-bridge - (12:44): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}  \nxwiki-bridge - (12:44): [Vincent Massol] is that needed?  \nxwiki-bridge - (12:45): [tmortagne] yes we should not check that at wik imacro level i think  \nxwiki-bridge - (12:45): [asirir] wait wait  \nxwiki-bridge - (12:45): [tmortagne] note that this code is probably older than xwiki-properties check  \nxwiki-bridge - (12:46): [asirir] wiki macros are not normal macros.. so they do not get that checking from rendering..  \nxwiki-bridge - (12:46): [asirir] (parameter cheking)  \nxwiki-bridge - (12:46): [tmortagne] also doing a for on keys is not very good  \nxwiki-bridge - (12:46): [tmortagne] you should do it on entries  \nxwiki-bridge - (12:46): [tmortagne] since you are using key and value  \nxwiki-bridge - (12:46): [asirir] yes.  \nxwiki-bridge - (12:47): [asirir] understood  \nxwiki-bridge - (12:47): [tmortagne] Vincent Massol: asiri is right actually  \nxwiki-bridge - (12:47): [tmortagne] it's not supported by xwiki-properties  \nxwiki-bridge - (12:47): [tmortagne] because it's not a java bean  \nxwiki-bridge - (12:47): [Vincent Massol] shouldn't we check them in Macro Tx?  \nxwiki-bridge - (12:47): [tmortagne] xwiki-properties only check for java bean properties  \nxwiki-bridge - (12:48): [Vincent Massol] (or in AbstractMacro - which btw WikiMacro is not extending)  \nxwiki-bridge - (12:50): [Vincent Massol] tmortagne: I see this in Macro Tx:  \nxwiki-bridge - (12:50): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.beanManager.populate(macroParameters, macroHolder.macroBlock.getParameters());  \nxwiki-bridge - (12:50): [Vincent Massol] is it where it's supposed to be checked?  \nxwiki-bridge - (12:51): [Vincent Massol] if not, it could be added just below (or before)  \nxwiki-bridge - (12:51): [tmortagne] (12:43:52) tmortagne: it's done at xwiki-properties level AFAIK  \nxwiki-bridge - (12:51): [Vincent Massol] I don't know where xwiki-properties are called  \nxwiki-bridge - (12:52): [tmortagne] BeanManager is xwiki-properties main entry point  \nxwiki-bridge - (12:52): [Vincent Massol] ok  \nxwiki-bridge - (12:52): [Vincent Massol] so is the check done in populate()?  \nxwiki-bridge - (12:52): [tmortagne] yes  \nxwiki-bridge - (12:52): [Vincent Massol] so it's always done  \nxwiki-bridge - (12:52): [Vincent Massol] ?  \nxwiki-bridge - (12:52): [Vincent Massol] I don't understand the part about not being a java bean  \nxwiki-bridge - (12:53): [tmortagne] it's always done for java beans as i said  \nxwiki-bridge - (12:53): [tmortagne] BEanManager populate a java bean  \nxwiki-bridge - (12:54): [asirir] Vincent Massol: WikiMacroParameters is not a java bean....  \nxwiki-bridge - (12:54): [tmortagne] wiki macro use dynamic parametrs, you cant have them listed in a static class  \nxwiki-bridge - (12:54): [tmortagne] like java macros  \nxwiki-bridge - (12:54): [asirir] and WikiMacro cannot use Abstractmacro, because WikiMacros have it's own MacroDescriptor (AbstractMacro does not support this).  \nxwiki-bridge - (12:54): [Vincent Massol] tmortagne: so populate will do a check on the class type of macroHolder.macroBlock.getParameters() ?  \nxwiki-bridge - (12:56): [Vincent Massol] in any case we could make the check at this location no?  \nxwiki-bridge - (12:56): [tmortagne] it's working exactly the same way that BeanUtils with some more things supported like public fields or RawProperties interface  \nxwiki-bridge - (12:56): [tmortagne] no we could not  \nxwiki-bridge - (12:56): [tmortagne] xwiki-properties don't know macro descriptor  \nxwiki-bridge - (12:56): [Vincent Massol] I'm not talking about xwiki-properties  \nxwiki-bridge - (12:57): [Vincent Massol] I'm talking about Macro Tx  \nxwiki-bridge - (12:57): [Vincent Massol] \"if not, it could be added just below (or before)\"  \nxwiki-bridge - (12:57): [tmortagne] yes but it would be only for wiki macro currently  \nxwiki-bridge - (12:57): [Vincent Massol] would be?  \nxwiki-bridge - (12:57): [Vincent Massol] you mean \"would be useful\"  \nxwiki-bridge - (12:57): [Vincent Massol] ?  \nxwiki-bridge - (12:58): [Vincent Massol] ie there would be a double check for java macros  \nxwiki-bridge - (12:58): [Vincent Massol] is that what you mean?  \nxwiki-bridge - (12:59): [tmortagne] there would be a double check for java macro and only wiki macro would need to have the check at this level  \nxwiki-bridge - (12:59): [Vincent Massol] yes, ok  \nxwiki-bridge - (12:59): [Vincent Massol] for now I'll explain this as a comment in DefaultWikiMacro  \nxwiki-bridge - (12:59): [Vincent Massol] to explain why we do the check  \nxwiki-bridge - (12:59): [Vincent Massol] (it's not explained right now)  \nxwiki-bridge - (12:59): [tmortagne] i would prefer to add support for custom bean descriptor in xwiki-properties to support wiki macro use case  \nxwiki-bridge - (12:59): [asirir] Vincent Massol: we can provide type information for wiki macros... for this we can add a new field to WikiMacroParameterDescriptor which is set when the user defines the wiki macros.  \nxwiki-bridge - (13:00): [Vincent Massol] yes I agree  \nxwiki-bridge - (13:00): [Vincent Massol] (with thomas)  \nxwiki-bridge - (13:00): [tmortagne] i have some idea for it but it's not the priority  \nxwiki-bridge - (13:00): [Vincent Massol] right  \nxwiki-bridge - (13:00): [Vincent Massol] it's not  \nxwiki-bridge - (13:00): [tmortagne] but i will create a jira issue to keep idea in mind  \nxwiki-bridge - (13:01): [Vincent Massol] lunch time, bbl  \nxwiki-bridge - (13:01): [asirir] tmortagne, Vincent Massol: I'm lost are we talking about adding parameter type support for wiki macros?  \nxwiki-bridge - (13:01): [asirir] or something else? :(  \nxwiki-bridge - (13:04): [tmortagne] asirir: i'm talking about adding custom bean descriptor support in xwiki-properties to make WikiMacroParameters a dynamic java bean instead of just having the RawProperties  \nxwiki-bridge - (13:05): [tmortagne] which mean benefit from all xwiki-properties feature like property type convertion and check for things like mandatory  \nxwiki-bridge - (13:05): [asirir] Aha i understand now.  \nxwiki-bridge - (13:05): [tmortagne] instead of constructoing a custom MacroDescriptor you would contruct a custom BeanDescriptor  \nxwiki-bridge - (13:07): [asirir] So rendering will do all the type / mandatory checking for me automatically...  \nxwiki-bridge - (13:07): [tmortagne] something like making xwiki-properties checkiing for a method  \nxwiki-bridge - (13:07): [tmortagne] BeanDescriptor getBEanDescriptor()  \nxwiki-bridge - (13:07): [tmortagne] in the bean before trying to generate one for it  \nxwiki-bridge - (13:07): [asirir] yup..  \nxwiki-bridge - (13:07): [asirir] that's a good idea..  \nxwiki-bridge - (13:07): [tmortagne] yes i would  \nxwiki-bridge - (13:07): [tmortagne] i tough of it at first for type conversion  \nxwiki-bridge - (13:07): [asirir] like you check for raw properties...  \nxwiki-bridge - (13:07): [tmortagne] wehn you will add type support in wiki macros  \nxwiki-bridge - (13:08): [tmortagne] yes  \nxwiki-bridge - (13:08): [asirir] may be we can get rid of raw properties and ask for a bean descriptor instead..  \nxwiki-bridge - (13:08): [asirir] so types are enforced..  \nxwiki-bridge - (13:09): [asirir] (not sure, just an idea)  \nxwiki-bridge - (13:09): [asirir] I got to go..  \nxwiki-bridge - (13:09): [asirir] :(  \nxwiki-bridge - (13:09): [tmortagne] wiki macro would not need RawProperties anymore yes but it's still useful  \nxwiki-bridge - (13:09): [tmortagne] something you really don't know the properties you will get  \nxwiki-bridge - (13:09): [tmortagne] like in macro using external service for example  \nxwiki-bridge - (13:10): [tmortagne] RawPropeties has not been introduce for wiki macros, it's just one use case  \nxwiki-bridge - (13:10): [asirir] ok. Going out now, won't be able to be back today (i think), I'll have a code review with Vincent Massol on monday.  \nxwiki-bridge - (13:10): [asirir] Bye all  \nxwiki-bridge - (14:09): [lucaa] hi guys  \nxwiki-bridge - (14:18): [lucaa] I have this line in an AbstractComponentTestCase:  \nxwiki-bridge - (14:18): [lucaa] Macro veloMacro = getComponentManager().lookup(Macro.class, \"velocity\");  \nxwiki-bridge - (14:18): [lucaa] what do I need to do more to make this macro visible except adding the dependency in the pom?  \nxwiki-bridge - (14:19): [lucaa] I have this in the pom  \nxwiki-bridge - (14:19): [lucaa] \u00a0\u00a0\u00a0\u00a0<dependency>  \nxwiki-bridge - (14:19): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<groupId>org.xwiki.platform</groupId>  \nxwiki-bridge - (14:19): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<artifactId>xwiki-core-rendering-macro-velocity</artifactId>  \nxwiki-bridge - (14:19): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<version>${platform.core.version}</version>  \nxwiki-bridge - (14:19): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<scope>test</scope>  \nxwiki-bridge - (14:19): [lucaa] \u00a0\u00a0\u00a0\u00a0</dependency>  \nxwiki-bridge - (14:20): [tmortagne] I would say, nothing  \nxwiki-bridge - (14:20): [tmortagne] what is the issue ?  \nxwiki-bridge - (14:20): [lucaa] failed to lookup macro with role & hint  \nxwiki-bridge - (14:20): [tmortagne] sure but what is the exact issue  \nxwiki-bridge - (14:21): [tmortagne] the deepest exception  \nxwiki-bridge - (14:21): [Vincent Massol] also, are you using m2e?  \nxwiki-bridge - (14:21): [tmortagne] it's possible this macro depends on some other componenet you have to provide  \nxwiki-bridge - (14:21): [lucaa] fails the same in the command line  \nxwiki-bridge - (14:22): [lucaa] right, indeed tmortagne, it needs the velocitymanager  \nxwiki-bridge - (14:23): [tmortagne] was about to said you can look in the macro project itself own its tested  \nxwiki-bridge - (14:24): [tmortagne] either you make velocity macro project produce test jar or you do the same thing  \nxwiki-bridge - (14:24): [tmortagne] maybe it does ganerae test jar already  \nxwiki-bridge - (14:25): [tmortagne] why do you need to write test with velocity macro ?  \nxwiki-bridge - (14:26): [lucaa] I want to test that I can annotate content which is generated as a result of a script  \nxwiki-bridge - (14:26): [lucaa] I just picked the velocity macro  \nxwiki-bridge - (14:27): [tmortagne] you don't need an existing macro  \nxwiki-bridge - (14:27): [tmortagne] you could test with a test macro  \nxwiki-bridge - (14:28): [tmortagne] better than depends on some specific script macro since it's not really what you want to test  \nxwiki-bridge - (14:32): [lucaa] well, what I think I want to test is the integration of the annotations rendering system with the xwiki rendered documents. I don't want to depend on default macros?  \narkub left at 14:38 (\"Leaving\"  \narkub joined #xwiki at 14:38  \nxwiki-bridge - (14:41): [tmortagne] \"default macros\" is true only at XE level (it's listed in the old xwiki-core project for now but it's wrong)  \nxwiki-bridge - (14:42): [tmortagne] and anyway you want to test annotation with generated content, i don't see why you need to initialize some script engine and interpret script  \nxwiki-bridge - (14:42): [tmortagne] it will just make the test slower  \nxwiki-bridge - (14:43): [lucaa] normally yes  \nxwiki-bridge - (14:44): [lucaa] but I would like to be able to test cases that happen in the default XE... \u00a0(for example, the fact that an annotation on a piece of script that depends on the current user will be printed only for the user that added it)  \nxwiki-bridge - (14:44): [lucaa] should those be tested at a different level? if so where?  \nxwiki-bridge - (14:45): [lucaa] or I will be creating mock scripts for all those cases?  \nxwiki-bridge - (14:45): [lucaa] macros I mean, not scripts  \nxwiki-bridge - (14:45): [tmortagne] well if you want to test in XE environment then it looks like integration test in XE  \nxwiki-bridge - (14:46): [lucaa] wdym by integration test in XE?  \nxwiki-bridge - (14:46): [tmortagne] \"test cases that happen in the default XE\" doe snot sounds like a unit test  \nxwiki-bridge - (14:47): [lucaa] but I'm not indending to write unit tests...  \nxwiki-bridge - (14:47): [tmortagne] if you are not able to mock the environment of what you want to test you should write fonstionnel test  \nxwiki-bridge - (14:47): [tmortagne] like selenium tests  \nxwiki-bridge - (14:47): [lucaa] I'm writing renderer tests == integration tests afaik  \nxwiki-bridge - (14:48): [tmortagne] I wanted to say foonctionnal not integration  \nxwiki-bridge - (14:48): [lucaa] now, I could indeed write functional tests, in selenium, but it's a renderer that I'm testing so functional is a bit too much, imo  \nxwiki-bridge - (14:48): [lucaa] I mean to high level  \nxwiki-bridge - (14:48): [lucaa] s/to/too/  \nxwiki-bridge - (14:49): [tmortagne] if you just want to test rendering then you are able to mock what you need, like specific macros...  \nxwiki-bridge - (14:49): [tmortagne] either you want to test XE environment or not  \nxwiki-bridge - (14:51): [Vincent Massol] hey this is sergiu deleting not me ;)  \nxwiki-bridge - (14:52): [sdumitriu] Vincent Massol: In case you're wondering, I'm the one deleting those documents  \nxwiki-bridge - (14:52): [sdumitriu] Don't know why the bot thinks it's you  \nxwiki-bridge - (14:52): [glerouge] or me  \nxwiki-bridge - (14:52): [Vincent Massol] this is a bug we've been having for a long time  \nxwiki-bridge - (14:52): [Vincent Massol] the pb is not in teh bot  \nxwiki-bridge - (14:52): [glerouge] are we the lasr user to have modified the doc?  \nxwiki-bridge - (14:52): [Vincent Massol] yes  \nxwiki-bridge - (14:53): [sdumitriu] We need a captcha on registration  \nxwiki-bridge - (14:54): [Vincent Massol] sdumitriu: actually for deletes I think you're the one who modified the bot  \nxwiki-bridge - (14:54): [Vincent Massol] } else if (event instanceof DocumentDeleteEvent) {  \nxwiki-bridge - (14:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0author = context.user  \nxwiki-bridge - (14:54): [Vincent Massol] wasn't it you who put context.user?  \nxwiki-bridge - (14:54): [sdumitriu] Don't remember  \nxwiki-bridge - (14:55): [Vincent Massol] it wasn't me, so it's either you or ludovic  \nxwiki-bridge - (14:55): [Vincent Massol] but it doesn't seem right  \nxwiki-bridge - (14:55): [sdumitriu] +1  \nxwiki-bridge - (14:55): [sdumitriu] Hm, wait  \nxwiki-bridge - (14:55): [sdumitriu] It was me  \nxwiki-bridge - (14:55): [sdumitriu] But the context user used to be the one actually doing the delete  \nxwiki-bridge - (14:56): [sdumitriu] Since the event was triggered in the request context  \nxwiki-bridge - (14:56): [sdumitriu] I think you have a distinct context created when the bot is started now  \nxwiki-bridge - (14:56): [Vincent Massol] ah yes possible  \nxwiki-bridge - (14:56): [Vincent Massol] code is here: http://dev.xwiki.org/xwiki/bin/view/IRC/IRCBot  \nxwiki-bridge - (15:00): [Vincent Massol] this is another pb: stuff executed by the system should be under its own user name  \nxwiki-bridge - (15:00): [Vincent Massol] (like for the shceduler here)  \nEnygma` left at 15:03 (Read error: 60 (Operation timed out)  \nxwiki-bridge - (15:06): [jvdrean] Vincent Massol: actually it's normal, I'm unmasked, I have to manually fire scheduler jobs in every xwiki instance over the world :)  \nxwiki-bridge - (15:06): [Vincent Massol] :)  \nxwiki-bridge - (15:06): [Vincent Massol] good job  \nxwiki-bridge - (15:14): [tmortagne] Vincent Massol: about delete, since an empty XWikiDocument for the event when a document is deleted, this document should contains the user who deleted the document, the event listener can know who did the delete  \nxwiki-bridge - (15:16): [Vincent Massol] another pb, rollbacks are viewed as creates... ;)  \nxwiki-bridge - (15:16): [Vincent Massol] (same pb in the watchlist email notif)  \nxwiki-bridge - (15:21): [tmortagne] currently XWiki.saveDocument send the deleted document as current document which is not consistant whith what is done for new document, we should send an empty document which as the deleted document as originalDocument  \nEnygma` joined #xwiki at 15:24  \nxwiki-bridge - (15:24): [tmortagne] I mean XWiki.deleteDocument  \nxwiki-bridge - (15:24): [tmortagne] which tricked me, actually it's done the right way :)  \nxwiki-bridge - (15:25): [tmortagne] just need a setAuthor and it's ok  \nxwiki-bridge - (15:26): [glerouge] should we configure the bot so that it gives an edit summary every 15 mnutes?  \nxwiki-bridge - (15:26): [glerouge] right now it's a bit spammy  \nxwiki-bridge - (15:27): [jvdrean] wdym ?  \nxwiki-bridge - (15:27): [jvdrean] :)  \nxwiki-bridge - (15:27): [tmortagne] :)  \nxwiki-bridge - (15:30): [Vincent Massol] glerouge: I don't know, I don't think so, I like it personally. What we could do is add a new irc channel for irc notifications like #xwikinotifications  \nxwiki-bridge - (15:30): [Vincent Massol] so you woudln't have to sub to it  \nxwiki-bridge - (15:31): [tmortagne] and we could call it twitter :)  \nxwiki-bridge - (15:31): [Vincent Massol] yeah :)  \nxwiki-bridge - (15:31): [Vincent Massol] indeed with tweet4j it should not be too hard   \nEnygma` left at 15:32 (Read error: 60 (Operation timed out)  \nxwiki-bridge - (15:32): [Vincent Massol] so indeed we could keep the irc bot for the interactions  \nxwiki-bridge - (15:32): [Vincent Massol] like search, news, etc  \nxwiki-bridge - (15:32): [Vincent Massol] and move realtime notifs to another system  \nxwiki-bridge - (15:32): [Vincent Massol] twitter is not realtime enough btw  \nxwiki-bridge - (15:33): [Vincent Massol] or is it  \nxwiki-bridge - (15:33): [tmortagne] btw what about a jabber bot directly instead of irc boat plus bridge ?  \nxwiki-bridge - (15:33): [Vincent Massol] hmm  \nxwiki-bridge - (15:33): [Vincent Massol] it is  \nxwiki-bridge - (15:33): [Vincent Massol] it's enough  \nxwiki-bridge - (15:33): [tmortagne] (for seach atec.)  \nxwiki-bridge - (15:33): [Vincent Massol] tmortagne: sure, you want to do over the week end?  \nxwiki-bridge - (15:33): [Vincent Massol] :)  \nxwiki-bridge - (15:33): [tmortagne] should wondering if someone looked at that  \nxwiki-bridge - (15:33): [tmortagne] just  \nxwiki-bridge - (15:33): [Vincent Massol] nope  \nxwiki-bridge - (15:33): [Vincent Massol] it shouldn't be hard  \nxwiki-bridge - (15:33): [Vincent Massol] it's just that I looked at irc when we were on irc  \nxwiki-bridge - (15:34): [tmortagne] sure  \nxwiki-bridge - (15:34): [Vincent Massol] but the twitter bot for notifs sounds great  \nxwiki-bridge - (15:35): [sdumitriu] I already started working on it  \nxwiki-bridge - (15:36): [sdumitriu] :p  \nxwiki-bridge - (15:36): [Vincent Massol] hehe  \nxwiki-bridge - (15:36): [sdumitriu] But didn't get far  \nxwiki-bridge - (15:36): [sdumitriu] It was a short bus ride  \nxwiki-bridge - (15:36): [Vincent Massol] :)  \nxwiki-bridge - (15:38): [tmortagne] sdumitriu: did you looked at http://code.google.com/p/jxmpp-bot/ ?  \nxwiki-bridge - (15:40): [tmortagne] no release yet it seems  \nplunden left #xwiki at 15:49  \nxwiki-bridge - (15:54): [jvdrean] sdumitriu: do you know where the keyboard shortcuts are configured in edit mode ?  \nxwiki-bridge - (15:54): [jvdrean] they've been moved it seems  \nxwiki-bridge - (15:54): [jvdrean] (the JS calls)  \nEnygma` joined #xwiki at 16:05  \nxwiki-bridge - (16:59): [Vincent Massol] guys you should try to put comments when you modify pages.... :)  \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] anyone sees what's wrong in :  \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] {{velocity}}{{html wiki=true}}  \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] #startfloatingbox()  \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter]   \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] {{toc start=\"2\" depth=\"3\" /}}  \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] #endfloatingbox()  \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] {{/html}}{{/velocity}}  \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] ?  \nxwiki-bridge - (17:01): [Vincent Massol] yes  \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] I'm trying to add a TOC to the rest page but it does not display   \nxwiki-bridge - (17:01): [J\u00e9r\u00f4me Velociter] ah cool:)  \nxwiki-bridge - (17:02): [J\u00e9r\u00f4me Velociter] can you tell me what is it ?  \nxwiki-bridge - (17:02): [Vincent Massol] check how it's done on the RenderingModule page on code.xwiki.org for ex  \nxwiki-bridge - (17:02): [Vincent Massol] (I'm restarting FF)  \nxwiki-bridge - (17:02): [J\u00e9r\u00f4me Velociter] ok  \nxwiki-bridge - (17:02): [J\u00e9r\u00f4me Velociter] ok I see  \nxwiki-bridge - (17:02): [Vincent Massol] and just use {{toc/}} when comapared to Rendering Mdoule  \nxwiki-bridge - (17:02): [Vincent Massol] and make sure you set the title in the title field  \nxwiki-bridge - (17:02): [Vincent Massol] and start headers at level 1  \nxwiki-bridge - (17:03): [Vincent Massol] :)  \nxwiki-bridge - (17:03): [J\u00e9r\u00f4me Velociter] but a part the fact it's simpler the way you are doing it, why is my way not working ?  \nxwiki-bridge - (17:03): [Vincent Massol] toc macro is standalone  \nxwiki-bridge - (17:03): [Vincent Massol] maybe that's the p  \nxwiki-bridge - (17:03): [Vincent Massol] pb  \nxwiki-bridge - (17:03): [J\u00e9r\u00f4me Velociter] and ?  \nxwiki-bridge - (17:03): [Vincent Massol] haven't thought much  \nxwiki-bridge - (17:03): [J\u00e9r\u00f4me Velociter] no. I have jumped a line to force it standalone  \nxwiki-bridge - (17:03): [Vincent Massol] standalone is both ways  \nxwiki-bridge - (17:03): [Vincent Massol] before and after  \nxwiki-bridge - (17:03): [J\u00e9r\u00f4me Velociter] the strange thing is that if I take it out of the velocity / html clock is displays nice  \nxwiki-bridge - (17:04): [J\u00e9r\u00f4me Velociter] hum  \nxwiki-bridge - (17:04): [Vincent Massol] but since velocity is executed first anyway  \nxwiki-bridge - (17:04): [Vincent Massol] it shouldn't matter  \nxwiki-bridge - (17:04): [Vincent Massol] I'll let thomas answer if you really want an answer :)  \nxwiki-bridge - (17:05): [J\u00e9r\u00f4me Velociter] ok changed to your way  \nxwiki-bridge - (17:05): [J\u00e9r\u00f4me Velociter] no not really.  \nxwiki-bridge - (17:05): [J\u00e9r\u00f4me Velociter] I'm just curious  \nxwiki-bridge - (17:09): [Vincent Massol] hmm can't get Intelij IDEA 9.0 to work with maven and svn....  \nxwiki-bridge - (17:30): [Vincent Massol] ok was able to manually fix it  \nxwiki-bridge - (17:52): [tmortagne] J\u00e9r\u00f4me Velociter: i think the issue you have with toc and html is due to the way html macro is working: html macro execute the transformation for its content and render it in html, that's why toc is empty, it sees only the content of the html macro  \nxwiki-bridge - (17:53): [J\u00e9r\u00f4me Velociter] I see  \nxwiki-bridge - (17:53): [J\u00e9r\u00f4me Velociter] anyway doing it w/ html was not a very good idea  \nxwiki-bridge - (17:53): [tmortagne] you could create a jira issue about that, to at least have a trace and explanation for others  \nxwiki-bridge - (17:53): [tmortagne] sure  \nxwiki-bridge - (17:53): [J\u00e9r\u00f4me Velociter] yep  \nxwiki-bridge - (17:54): [J\u00e9r\u00f4me Velociter] will create one  \nxwiki-bridge - (17:55): [tmortagne] an it's a bug anyway  \nxwiki-bridge - (17:55): [tmortagne] design bug but still a bug  \nxwiki-bridge - (17:56): [Vincent Massol] btw tmortagne isn't what jerome had what the converter is generating?  \nxwiki-bridge - (17:56): [tmortagne] Vincent Massol: why converter ? there is no xwiki.1.0 here  \nKermitTheFragger left at 17:56 (\"Leaving\"  \nxwiki-bridge - (17:57): [Vincent Massol] I doubt jerome invented that by himself :)  \nxwiki-bridge - (17:57): [Vincent Massol] that code was the result of a conversion I'm pretty sure  \nxwiki-bridge - (17:57): [J\u00e9r\u00f4me Velociter] actually no  \nxwiki-bridge - (17:57): [J\u00e9r\u00f4me Velociter] I just did not thought about the box macro  \nxwiki-bridge - (17:57): [Vincent Massol] the converter generates something very close jerome  \nxwiki-bridge - (17:58): [J\u00e9r\u00f4me Velociter] but yes that's waht the converter would generate I guess  \nxwiki-bridge - (17:58): [J\u00e9r\u00f4me Velociter] as dumb as my conversion:)  \nxwiki-bridge - (17:58): [Vincent Massol] btw J\u00e9r\u00f4me Velociter there's also another solution  \nxwiki-bridge - (17:58): [Vincent Massol] using groups  \nxwiki-bridge - (17:58): [tmortagne] Vincent Massol: sure but this is right  \nxwiki-bridge - (17:58): [J\u00e9r\u00f4me Velociter] yep  \nxwiki-bridge - (17:58): [J\u00e9r\u00f4me Velociter] groups + classes  \nxwiki-bridge - (17:58): [tmortagne] there is a xwiki/2.0 html macro bug  \nxwiki-bridge - (17:59): [tmortagne] the converter can't do much about it without knowing exactly what is #startfloatingbox velocity macro is  \nxwiki-bridge - (18:02): [jvdrean] the xwiki.org watchlist job is soon to be my pomodoro manager  \nxwiki-bridge - (18:02): [jvdrean] http://www.pomodorotechnique.com/  \nxwiki-bridge - (18:02): [jvdrean] since my nick appears in it I'm notified every hour  \nxwiki-bridge - (18:04): [J\u00e9r\u00f4me Velociter] jvdrean: you can take a longer break every 4 hours then  \nxwiki-bridge - (18:04): [Vincent Massol] every 24 hours  \nxwiki-bridge - (18:04): [Vincent Massol] you'll get another reminder  \nxwiki-bridge - (18:07): [lucaa] guys, I'm running the macros test described at http://pastebin.com/m51e16f3a and I get the result pasted there. Is this normal, am I missing something?  \nxwiki-bridge - (18:07): [jvdrean] jvdrean: yes we should run the job every 30min instead ;)  \nxwiki-bridge - (18:07): [lucaa] s/normal/known/  \nxwiki-bridge - (18:09): [tmortagne] lucaa: it seems your macro is producing a paragraph block  \nxwiki-bridge - (18:09): [tmortagne] and you don't expect one  \nxwiki-bridge - (18:09): [lucaa] it's the standard inline macro in the rendering tests, it's not mine  \nxwiki-bridge - (18:09): [lucaa] is that NOT an inline macro?  \nxwiki-bridge - (18:10): [tmortagne] looks like  \nxwiki-bridge - (18:10): [lucaa] ah da right  \nxwiki-bridge - (18:10): [lucaa] (that was romanian)  \nxwiki-bridge - (18:10): [lucaa] sorry  \nxwiki-bridge - (18:11): [lucaa] what does  \nxwiki-bridge - (18:11): [lucaa] \u00a0\u00a0\u00a0\u00a0public boolean supportsInlineMode()  \nxwiki-bridge - (18:11): [lucaa] \u00a0\u00a0\u00a0\u00a0{  \nxwiki-bridge - (18:11): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return true;  \nxwiki-bridge - (18:11): [lucaa] \u00a0\u00a0\u00a0\u00a0}  \nxwiki-bridge - (18:11): [lucaa] mean actualy?  \nxwiki-bridge - (18:11): [lucaa] that it's inline or that it just could be inline?  \nxwiki-bridge - (18:11): [tmortagne] i guess this macro is just generating Blocks using plain text parser on string \"testsimpleinlinemacro\" + nb and forget to remove the poaragraph block  \nxwiki-bridge - (18:11): [tmortagne] supportsInlineMode() mean support inline  \nxwiki-bridge - (18:11): [tmortagne] not it's always inline  \nxwiki-bridge - (18:11): [tmortagne] but yes this macro seems buggy in your case  \nxwiki-bridge - (18:12): [tmortagne] i'm checking  \nxwiki-bridge - (18:12): [tmortagne] actually this macro is adding a ParagraphBlock on purpose... it's really not inline  \nxwiki-bridge - (18:12): [tmortagne] weird name  \nxwiki-bridge - (18:14): [tmortagne] checking where it's used  \nxwiki-bridge - (18:14): [tmortagne] looks like we have wrong test somewhere  \nxwiki-bridge - (18:16): [tmortagne] indeed we have very wrong test... i'm fixing it  \nxwiki-bridge - (18:28): [tmortagne] lucaa: macro fixed on trunk  \nxwiki-bridge - (18:28): [lucaa] great, thanks  \nxwiki-bridge - (18:28): [tmortagne] merging in branche  \nxwiki-bridge - (18:49): [lucaa] tmortagne: I also have this which doesn't look normal. http://pastebin.com/m4717b674 hints?  \nxwiki-bridge - (18:50): [lucaa] (with the updated version of the macro)  \nxwiki-bridge - (18:53): [tmortagne] very weird  \nEnygma` left at 18:53 (Read error: 110 (Connection timed out)  \nxwiki-bridge - (18:54): [tmortagne] it's like   \nxwiki-bridge - (18:54): [tmortagne] \\*\\* macro  \nxwiki-bridge - (18:54): [tmortagne] was interpreted as a list which doe snot make sense  \nxwiki-bridge - (18:54): [lucaa] yes  \nxwiki-bridge - (18:56): [tmortagne] looks like you found a xwiki/2.0 parser bug even if I don't see how this had not been seen before...  \nxwiki-bridge - (18:56): [lucaa] maybe it's a particular case for macros with no content  \nxwiki-bridge - (18:57): [lucaa] because I tried  \nxwiki-bridge - (18:57): [lucaa] Macro test with \\*\\*{{code}}this is text{{/code}}\\*\\* to annotate   \nxwiki-bridge - (18:57): [lucaa] in an instance in a document and it renders all fne  \nxwiki-bridge - (18:57): [lucaa] s/fne/fine/  \nxwiki-bridge - (18:57): [tmortagne] actually macro with no content should work better in inline mode that other macros so it's weird  \nxwiki-bridge - (18:57): [tmortagne] anyway could you create a jira issue for that ?  \nxwiki-bridge - (18:57): [tmortagne] i will look at it  \nxwiki-bridge - (18:58): [lucaa] sure, I'll attach the test  \nxwiki-bridge - (18:59): [lucaa] in the parser?  \nxwiki-bridge - (18:59): [tmortagne] thanks  \nxwiki-bridge - (19:00): [lucaa] Rendering 2.0 - XWiki 2.0 Parser I mean  \nxwiki-bridge - (19:00): [tmortagne] both  \nxwiki-bridge - (19:00): [tmortagne] otherwise we don't find it when searching for Rendering 2.0  \nxwiki-bridge - (19:00): [lucaa] ok  \nxwiki-bridge - (19:01): [tmortagne] \"Rendering 2.0 - XWiki 2.0\" is more or less to indicate it's something in wikimodel  \nxwiki-bridge - (19:01): [lucaa] ok  \nxwiki-bridge - (19:01): [tmortagne] \"Rendering 2.0 - XWiki 2.0 Parser\"  \nxwiki-bridge - (19:05): [tmortagne] I know why we did not seen it before:  \nxwiki-bridge - (19:05): [tmortagne] \\*\\*{{macro/}}\\*\\*  \nxwiki-bridge - (19:05): [tmortagne] is working well but not  \nxwiki-bridge - (19:05): [tmortagne] \\*\\*{{macro/}}\\*\\* text  \nxwiki-bridge - (19:05): [lucaa] yes, i noticed that too while creating the test case  \nxwiki-bridge - (19:07): [lucaa] also works:  \nxwiki-bridge - (19:07): [lucaa] test \\*\\*{{testsimpleinlinemacro}}test{{/testsimpleinlinemacro}}\\*\\* macro  \nxwiki-bridge - (19:07): [lucaa] so it's the macro without content that fails  \nxwiki-bridge - (19:10): [lucaa] reported: http://jira.xwiki.org/jira/browse/XWIKI-4669  \nxwiki-bridge - (19:10): [tmortagne] yes, i think i fixed it  \nxwiki-bridge - (19:10): [lucaa] :)  \nxwiki-bridge - (19:11): [tmortagne] FYT the problem is that the parser context is wrong after en ampty macro is matched  \nxwiki-bridge - (19:11): [tmortagne] so what the parser hit empty macro the parser context goes to INITIAL\\_CONTEXT which basically mean \"now you are at the begining of a document\"  \nxwiki-bridge - (19:11): [tmortagne] what=when  \nxwiki-bridge - (19:13): [tmortagne] thanks for the report i'm committing  \nxwiki-bridge - (19:23): [tmortagne] lucaa: done  \nxwiki-bridge - (19:23): [lucaa] thanks  \narkub left at 19:37 (Read error: 113 (No route to host)  \nxwiki-bridge - (19:50): [glerouge] lucaa: you should go to the dinner ;)  \nCalebJamesDeLisl joined #xwiki at 21:24  \n\n"}