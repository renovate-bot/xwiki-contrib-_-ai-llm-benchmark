{"id": "dev:IRC.xwikiArchive20100618", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100618", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nsburjan` left at 01:15 (Read error: Connection reset by peer  \nsburjan` joined #xwiki at 01:15  \nabusenius left at 02:00 (Ping timeout: 272 seconds  \nSvenDowideit left at 02:15 (Ping timeout: 240 seconds  \nnpm - (02:57): i'm having a minor prob w/ XWiki.Registration after upgrading to 2.3.1 -- when user clicks registration, it goes to a login page... should I have imported XWiki.WebPreferences from the XAR to get a change in rights for registration, or did some other magic happen?  \nCalebJamesDeLisl - (03:11): XWiki.Registration is public? (probably a stupid question)  \nCalebJamesDeLisl - (03:13): If you blocked /view/ on XWiki space then you have to specifically allow /view/ on XWiki.Registration  \nnpm - (03:20): that's what i thought, but i checked and it seems ok... but the oddball thing... i imported most of the 231 xar, but XWiki.Registration doesn't show itself as updated...  \nnpm - (03:21): i added view on registration and it didn't help... checking my import log to see what happened...  \nnpm - (03:22): hmm.. says it imported XWiki.Registration\u00a0 perhaps if no change, it doesn't show the import in history?  \nCalebJamesDeLisl - (03:23): You could try logging out and going to /view/XWiki/Registration to see what happens.  \nCalebJamesDeLisl - (03:23): (you can register that way too now.)  \nnpm - (03:23): are there extra props to add like for guest\\_comment\\_requires\\_captcha (since i didn't overwrite my config w/ the new xar)  \nCalebJamesDeLisl - (03:24): Nope.  \nnpm - (03:24): i noticed when i added the captcha prop it also did \"authenticate\\_edit Yes No\"  \nnpm - (03:24): would that have something to do w/ it and should i change it back?  \nCalebJamesDeLisl - (03:25): authenticate\\_edit is nolonger used.  \nnpm - (03:25): oh...  \nnpm - (03:25): ok i'll keep poking around.  \nCalebJamesDeLisl - (03:25): You can view XWiki.Registration without logging in?  \nnpm - (03:28): no. and checking i have \"view\" right checked for unreg user  \nnpm - (03:28): so which is why something funny is happening  \nnpm - (03:29): /xwiki/bin/edit/XWiki/Registration?editor=rights shows \"view\" set. are other rights needed for reg?  \nnpm - (03:30): XWiki space just has \"admin\" checked for admin group and that's it  \nCalebJamesDeLisl - (03:30): Hmm. Maybe /register/ right should be there. Not sure.  \nnpm - (03:31): in XWiki space?  \nCalebJamesDeLisl - (03:31): For XWiki/Registration  \nCalebJamesDeLisl - (03:32): The fact that users can't view in XWiki space is probably the source of the issues but changing permissions for XWiki.Registration should make it work.  \nnpm - (03:32): there is no register right listed  \nnpm - (03:33): on XWiki/Registration  \nCalebJamesDeLisl - (03:33): Just a second, trying to reproduce it.  \nnpm - (03:33): specifically, changing perms on XWiki.Registration, you mean adding \"unreg user\" view right?  \nnpm - (03:34): this is on a multiwiki if that makes a diff  \nnpm - (03:34): let me see how the root wiki behaves  \nnpm - (03:36): i wonder if it's a rootwiki-> multiwiki interaction as because in the root wiki i explicitly denied a bunch of stuff for unreg user  \nCalebJamesDeLisl - (03:36): Wisely.  \nnpm - (03:37): yeah i thought it was somewhat locked down  \nCalebJamesDeLisl - (03:38): Hmm. On my machine if I block access to registration I just get the default register page.  \nnpm - (03:38): would \"Prevent unregistered users from editing pages, regardless of the page or space rights\" being checked prevent registration?  \nCalebJamesDeLisl - (03:38): Try this: Create a page called XWiki.Register and give unregistered users register right on it.  \nCalebJamesDeLisl - (03:39): Oh register permission == open object editor and add XWikiRights object  \nnpm - (03:39): just a new page to see if unreg's can see in XWiki space?  \nCalebJamesDeLisl - (03:39): A new page called XWiki.Register because that's where you go when you try to register.  \nCalebJamesDeLisl - (03:40): BTW: what version did you upgrade to?  \nnpm - (03:41): 2.3.1 from 2.2.4  \nnpm - (03:42): so i added XWiki.Register w/ unreg user view right and it's viewable  \nnpm - (03:42): so is RegistrationHelp  \nnpm - (03:42): but Registration redirects to login  \nCalebJamesDeLisl - (03:43): Do you have PR pages which are publicly visible?  \nCalebJamesDeLisl - (03:43): (unrelated)  \nnpm - (03:43): well this machine is a clone of the one i'm updating, so it's offline and at home  \nnpm - (03:43): http://xwiki/xwiki/bin/login/XWiki/XWikiLogin?xredirect=/xwiki/bin/view/XWiki/Registration&${qs} is what it redirects to from accessing Registrati on  \nCalebJamesDeLisl - (03:44): Re version: might I interest you in version 2.4M1? ;)  \nnpm - (03:44): i had turned off reg on the public machine due to security risk  \nCalebJamesDeLisl - (03:44): 2.4M2 sorry.  \nnpm - (03:45): not on this mahcine as it's \"production\" (soon) but once i get it launched i'll try the 2.4 branch  \nCalebJamesDeLisl - (03:46): If it were me I'd pull the latest snapshot from maven. There were a couple of big bug fixes.  \nnpm - (03:46): i had waited for 2.3.1 upd because i wanted to reenable reg w/ captcha and comments capthca  \nnpm - (03:46): of the security variety?  \nCalebJamesDeLisl - (03:46): ;)  \nCalebJamesDeLisl - (03:47): Block view access to PR pages and it's plugged AFAIK.  \nnpm - (03:47): isn't registration a PR page or has that changed in this vsn  \nCalebJamesDeLisl - (03:48): It should not be. In fact in 2.4 I have added code to it which drops PR if it has it.  \nnpm - (03:49): ok... thanks for the hint...i'll probably stick w/ 2.3.1 until 2.4 final hits... unless i'm totally stuck on this  \nCalebJamesDeLisl - (03:49): Also you might check out my greasemonkey audit tool. http://code.xwiki.org/xwiki/bin/view/Extensions/ProgrammingRightTestGreasemonkeyExtension  \nCalebJamesDeLisl - (03:50): Ok, registration. You said unregistered users have view access on XWiki.Registration?  \nnpm - (03:51): yes  \nnpm - (03:51): and yet it redirects to login  \nnpm - (03:51): i'm wondering if there's some odd caching bug happenign and i should just restart (when in doubt reboot)  \nCalebJamesDeLisl - (03:52): No, there's no caching bug because there's no caching.  \nCalebJamesDeLisl - (03:54): Try programmatically testing permission. Lets see: $xwiki.hasAccessLevel('view', 'XWiki.XWikiGuest', 'XWiki.Registration')  \nnpm - (03:55): ok  \nnpm - (03:56): \"true\"  \nCalebJamesDeLisl - (03:56): But viewing XWiki.Registration kicks you to the login page.  \nnpm - (03:57): yep  \nnpm - (03:57): http://main/xwiki/bin/login/XWiki/XWikiLogin?xredirect=/xwiki/bin/view/XWiki/Registration&${qs}  \nCalebJamesDeLisl - (03:57): Do you have firebug?  \nnpm - (03:57): im using chrome but i can use it's debug  \nnpm - (03:58): what should i look for  \nCalebJamesDeLisl - (03:58): I want to know if it's sending a 403 when it redirects or not.  \nnpm - (03:58): oh i see  \nCalebJamesDeLisl - (04:00): Hmm, did you allow registration in XWiki.XWikiPreferences? that's where it's checked.  \nCalebJamesDeLisl - (04:00): #if(!$xcontext.hasAccessLevel('register', 'XWiki.XWikiPreferences'))  \nnpm - (04:01): note i didn't update XWiki.XWikiPrefernces from 2.3.1 xar... should I?  \nCalebJamesDeLisl - (04:01): No but make sure XWikiGuest has register permission on it.  \nnpm - (04:01): i skipped: XWiki.XWikiPreferences Main.WebHome XWiki.WebPreferences XWiki.XWikiAdminGroup XWiki.Admin XWiki.XWikiAllGroup Sandbox.WebHome Panels.QuickLinks  \nnpm - (04:02): how about XWiki.WebPreferences ??  \nCalebJamesDeLisl - (04:02): Run this: $xwiki.hasAccessLevel('register', 'XWiki.XWikiGuest', 'XWiki.XWikiPreferences')  \nnpm - (04:03): XWikiGuest doesn't even list a reg permission  \nCalebJamesDeLisl - (04:03): In the rights editor?  \nnpm - (04:03): yes... i was checking http://npm/xwiki/bin/edit/XWiki/XWikiGuest?editor=rights#|t=usersandgroupstable&p=1&uorg=users&clsname=XWiki.XWikiRights&wiki=local  \nCalebJamesDeLisl - (04:04): I never use the rights editor, I don't like it. 'register' right is there even if it's not shown.  \nnpm - (04:05): $xwiki.hasAccessLevel('register', 'XWiki.XWikiGuest', 'XWiki.XWikiPreferences') --> true  \nCalebJamesDeLisl - (04:06): Hmm.  \nnpm - (04:06): yep that's what i was saying... :-)  \nCalebJamesDeLisl - (04:07): I guess the best information will come from analyzing network activity while pulling the page. It's either a redirect in the XWiki.Registration code or it's a redirect from lack of permission (can't imagine how).  \nnpm - (04:09): GET Registerhttp://main/xwiki/bin/register/XWiki/Register302 Moved Temporarilymain?\u00a0118msGET Registrationhttp://main/xwiki/bin/login/XWiki/Registration302 Moved Temporarilymain?\u00a07msGET XWikiLogin?xredirect=%2Fxwiki%2Fbin%2Fview%2FXWiki%2FRegistration&$%7Bqs%7Dhttp://main/xwiki/bin/login/XWiki/XWikiLogin?xredirect=%2Fxwiki%2Fbin%2Fview%2FXWiki%2FRegistration&$%7Bqs%7D401 Unauthorizedmain11 KB\u00a0  \nnpm - (04:09): sayeth firebug  \nnpm - (04:10): aka get register --> 302 moved temporarily  \nnpm - (04:10): get registration --> 302  \nnpm - (04:10): XWikiLogin -> 401  \nnpm - (04:10): now the odd thing is i don't have a page \"Register\" should I?  \nCalebJamesDeLisl - (04:11): No it's a \"ghost page\" because you are using the /register/ action it always uses the registerinline.vm template  \nnpm - (04:11): in a difft wiki i tested, i created \"Register\" to see if viewable then deleted it... do i need a \"Register\" page (it's not in the XAR)  \nnpm - (04:11): so i don't need a \"Register\" page and it triggers off it's absence?  \nCalebJamesDeLisl - (04:12): It doesn't care whether it exists or not, in fact you can put anything you want in it and it won't do anything.  \nCalebJamesDeLisl - (04:12): I spent some time trying to create a user called 'Register' to see if he could do bad things on his user page. Nope.  \nCalebJamesDeLisl - (04:13): A user called XWikiGuest is funny though.  \nCalebJamesDeLisl - (04:13): He grants all his permissions to real guests.  \nnpm - (04:13): so is \"Superadmin\"  \nCalebJamesDeLisl - (04:13): You can't create such a user. Try.  \nnpm - (04:14): no but i noticed there's now a user doc assoc'd w/ it  \nnpm - (04:14): i guess it was for that purpose  \nnpm - (04:14): well it's not as bad as the \"group wikiwiki\" bug (in the XAR) from way back  \nnpm - (04:15): \"I noticed in the 1.8 XAR's XWiki.Admin user comes setup with\u00a0XWiki.XWikiRights[1]\u00a0set with so that nonexistent user 'WikiWiki' can edit the 'XWiki.Admin' user. Normally, users are setup so that the 'username' can edit\u00a0XWiki.username .\u00a0 User 'Admin' seems special in that 'WikiWiki' has edit rights instead.\"  \nCalebJamesDeLisl - (04:15): Actually superadmin is checked in the createuser code (big hack) If I recall.  \nCalebJamesDeLisl - (04:16): Yea I saw the WikiWiki bug.  \nCalebJamesDeLisl - (04:17): I'm almost sure XWiki.Register is bombing out on this line: $xcontext.hasAccessLevel('register'  \nCalebJamesDeLisl - (04:17): \\*XWiki.Registration  \nnpm - (04:17): actually i sent that mail 3/09 and got no response... glad it got handled  \nCalebJamesDeLisl - (04:18): Try editing the page, search for the code I pasted, and add this line after.  \nCalebJamesDeLisl - (04:18): $context.getUser()  \nnpm - (04:18): kid is hungry (me too) so must make dinner... thanks for the help i'll check back later and maybe my brane will work better  \nCalebJamesDeLisl - (04:18): Ping me, I'll help if I'm still up.  \nnpm - (04:18): cool thanks!!  \nevalica joined #xwiki at 05:16  \nflorinciu joined #xwiki at 06:46  \nDenis left at 07:05 (Ping timeout: 276 seconds  \nDenis1 joined #xwiki at 07:10  \nvmassol joined #xwiki at 07:33  \nsburjan` left at 07:43 (Quit: Peace and Protection 4.22  \nkibahop joined #xwiki at 07:58  \nmflorea joined #xwiki at 08:08  \nvmassol - (08:11): good morning xwiki lovers!  \nvmassol - (08:12): good geek&poke today: http://geekandpoke.typepad.com/.a/6a00d8341d3df553ef0134849ab5bb970c-pi :)  \nsburjan joined #xwiki at 08:23  \nevalica left at 08:27 (Quit: Leaving.  \nkibahop left #xwiki at 08:39  \nflorinciu left at 09:15 (Read error: Connection reset by peer  \nplunden joined #xwiki at 09:17  \narkub joined #xwiki at 09:55  \nflorinciu joined #xwiki at 09:55  \njvdrean joined #xwiki at 10:02  \nabusenius joined #xwiki at 10:12  \ntmortagne joined #xwiki at 10:21  \nvmassol - (11:00): guys I'm still having this build problem on xwiki-rest:  \nvmassol - (11:00): Caused by: org.apache.xerces.impl.dv.DVFactoryException: DTD factory class org.apache.xerces.impl.dv.dtd.DTDDVFactoryImpl does not extend from DTDDVFactory.  \nvmassol - (11:00): anyone found how to fix it?  \nvmassol - (11:14): I have some ideas\u2026. checking them out  \nsburjan - (11:36): tmortagne : areyou around ?  \ntmortagne - (11:36): sburjan: yep  \nsburjan - (11:36): hello  \nsburjan - (11:36): I have a question  \ntmortagne - (11:36): hi :)  \nsburjan - (11:37): yesterday I was talking with CalebJamesDeLisl about adding the SSL/TLS feature in his app, and in XWiki too  \ntmortagne - (11:37): \"SSL/TLS feature\" ?  \nsburjan - (11:37): and you said something about voting, but not sure if you were referring to this  \nsburjan - (11:37): yes...  \nsburjan - (11:38): but not quite sure you were talking to us  \ntmortagne - (11:38): when was that ? (i don't remember anything about SSL/TLS so it was probably not about that)  \nsburjan - (11:38): do you have the log ?  \ntmortagne - (11:38): yep ha have the log  \nvmassol - (11:38): search SSL/TLS  \nvmassol - (11:38): !search SSL/TLS  \nsburjan - (11:38): 15:30 GMT +2  \nsburjan - (11:38): <tmortagne> (VOTE on dev mailing list)  \nvmassol - (11:38): !search SSL  \nvmassol - (11:39): !search TLS  \ntmortagne - (11:39): sburjan: ok, so no this had nothing to do with your conversation, i was saying there was a vote on the dev mailing list :)  \ntmortagne - (11:39): (a vote i sent)  \nsburjan - (11:39): oh, okay :)  \nsburjan - (11:40): because I was talking in yesterday with CalebJamesDeLisl \u00a0to enable support for SMTP auth on his app and XWiki ...  \ntmortagne - (11:41): sorry i did not followed your conversation  \nsburjan - (11:41): no problem  \nsburjan - (11:42): IMO it would be a good idea, but don;t know what effort would this imply. I know there are a number of javalibraries that support this out of the box, so no additional coding should be necessary  \nvmassol - (11:42): like javamail :)  \nmflorea left at 11:42 (Quit: Leaving.  \nvmassol - (11:43): which we're using  \nsburjan - (11:43): exactly :P  \nvmassol - (11:43): so no need for extra lib  \nsburjan - (11:43): javamail + SSL/TLS support  \nvmassol - (11:43): http://stackoverflow.com/questions/411331/using-javamail-with-tls  \nvmassol - (11:43): nobody will be agasint adding support for this in the xwiki mail plugi  \nvmassol - (11:43): plugin  \nvmassol - (11:43): what's needed though is a patch  \nvmassol - (11:43): :)  \nsburjan - (11:44): it would be a good addition to include this in the registration - E-mail confirmation too. That apps ends emails too  \nsburjan - (11:44): \\*sends  \nsburjan - (11:45): maybe there will be cases when the cliend doesn't want to lose some of his mailserver security in order to allow xwiki send mails without auth  \nsburjan - (11:45): IMO  \nvmassol - (11:46): sburjan: if that's something of interest to you, you know what to do in your 20% time!  \nvmassol - (11:46): :)  \nsburjan - (11:47): :) it;s for the interest of the product .. it makes it more .. Enterprise :P  \nvmassol - (11:48): that's \u00a0not the question  \nvmassol - (11:48): we have about 4000 known issues that make the product better  \nvmassol - (11:48): we do have a lot of ideas  \nvmassol - (11:48): what we're lacking are people implementing htem  \nsburjan - (11:48): i know  \nvmassol - (11:48): s/htem/them/  \nsburjan - (11:51): and this is a CORE function ... I don't have enough exp to mess with the CORE  \nvmassol - (11:54): well it's separated into a plugin  \nsburjan - (12:01): where can I see a list of plugins ?  \nsburjan - (12:02): found  \nsburjan - (12:02): vmassol : i see the same issue on plugin pages as in the applications pages  \nsburjan - (12:03): double title  \nsburjan - (12:03): duplicate  \nKermitTheFragger joined #xwiki at 12:05  \nvmassol - (12:12): sburjan: yes I know  \nsburjan - (12:12): should I fix them ?  \nvmassol - (12:12): we need to write a script to change them all automaitcally + fix the macro, plugin, application applications  \nvmassol - (12:12): nah don't do them by hand  \nsburjan - (12:12): okay  \nsburjan - (12:13): I guess we create periodical backups of xwiki.org, right >  \nvmassol - (12:13): every night normally, jvelociter should know better  \nsburjan - (12:14): and aprox.. how much space has a backup ?  \nvmassol - (12:14): no idea  \nsburjan - (12:15): i was just curious :P  \nsburjan - (12:15): all those documents with attachments  \nvmassol - (12:15): I'd say between 5 to 10GB  \nvmassol - (12:15): from the top of my head  \nvmassol - (12:15): but jvelociter would know better  \nsburjan - (12:17): i see there are some people that update the documentation  \nsburjan - (12:21): vmassol,  \nsburjan - (12:21): This is a XWiki macro, which isn't bundled with any XWiki product by default.  \nsburjan - (12:21): Macro contributed by Philipp Roessler.  \nsburjan - (12:21): This macro cannot currently be downloaded separately.  \nsburjan - (12:21): on the WindowsPathMacro  \nvmassol - (12:21): yes I know  \nvmassol - (12:21): he's probably adding it  \nsburjan - (12:21): so.. how can I use it if it's not bundeled nor downloadable ?  \nsburjan - (12:21): okay  \nlucaa joined #xwiki at 12:49  \nsdumitriu joined #xwiki at 12:52  \nCalebJamesDeLisl - (13:12): Hello all  \nsdumitriu - (13:13): Hi Caleb  \nvmassol - (13:13): hi sdumitriu, hi CalebJamesDeLisl  \nvmassol - (13:13): sdumitriu: are you going to commit stuff before Moday (XE 2.4M2 release)  \nsdumitriu - (13:13): Yes  \nsdumitriu - (13:13): Wrapping up  \nvmassol - (13:13): ok cool, what topic is it?  \nCalebJamesDeLisl - (13:14): :)  \nsdumitriu - (13:14): Property remove  \nvmassol - (13:14): oh oh  \nvmassol - (13:14): the oldest issue!  \nsdumitriu - (13:14): + edit mode changes  \nbblfish left at 13:14 (Quit: Leaving...  \nbblfish1 left at 13:14 (Quit: Leaving.  \nbblfish joined #xwiki at 13:15  \nmflorea joined #xwiki at 13:30  \nsburjan - (13:39): hello CalebJamesDeLisl  \nCalebJamesDeLisl - (13:40): hi  \nCalebJamesDeLisl - (13:42): I suppose you saw this: http://code.xwiki.org/xwiki/bin/view/Applications/InvitationApplication  \nCalebJamesDeLisl - (13:42): Also I wrote a new ApplicationClassSheet so all new applications will be in syntax 2.0.  \nsburjan - (13:46): oyu mwan all new applications fomt code.xwiki.org will be in 2.0 ?  \nsburjan - (13:47): \\*so you mean  \nCalebJamesDeLisl - (13:49): Yup.  \nCalebJamesDeLisl - (13:49): Find anything interesting in testing?  \nsburjan - (13:54): yes  \nsburjan - (13:54): till now 2 suggestions  \nsburjan - (13:54): you may take them in consideration or not  \nCalebJamesDeLisl - (13:55): Oh I'll consider them, that doesn't take any effort ;)  \nsburjan - (13:55): 1.When inviting someone and the sending of the e-mail fails, the attempt is shown in Pending Invitations  \nCalebJamesDeLisl - (13:56): Meaning the list of \"My invitations\"?  \nsburjan - (13:56): ues  \nsburjan - (13:56): yes  \nsburjan - (13:56): you can't remove that from there .. because I get an error that incorrect code type This action cannot be carried out because all of the messages selected are of the wrong status.  \nsburjan - (13:56): so I'd say that failed send messages, shouldn't pe considered as pending  \nsburjan - (13:56): \\*be  \nsburjan - (13:57): because they never leftthe server, and youare stuck with them, unable to delete  \nCalebJamesDeLisl - (13:57): Ahh yes, thankyou, I have been meaning to change the label on the \"cancel\" button.  \nsburjan - (13:57): you could create a sepparate \"log\" page, where you show ALL the attempts succes and fail  \nsburjan - (13:57): or don;t put failed mails to Pending..  \nCalebJamesDeLisl - (13:57): \"cancel\" means to revoke the invitation. Like then the recipient cannot be logged in anymore.  \nsburjan - (13:58): or even if you do that, when you click the cancel button, they should dissapear  \nCalebJamesDeLisl - (13:58): Well I'm -1 to deleting things off of the server but I can see a use case for getting them out of your way.  \nsburjan - (13:58): yes, but selecting the messages with FAILED, and clicking cancel, it won;t remove them.. and for and end user it is pretty frustrating  \nsburjan - (13:58): yes  \nsburjan - (13:59): i mean pending should be pending, with reallysent messages, and failed should be in another category  \nsburjan - (13:59): IMO  \nsburjan - (13:59): I tested using the snapshot from 16 june  \nCalebJamesDeLisl - (13:59): Another thing I have been meaning to do is disable the checkbox for messages which are not pending.  \nsburjan - (14:00): so you're saying Failed messages to don't have a checkbox at all ?  \nCalebJamesDeLisl - (14:01): Well I guess they should and there should be another button for removing them from the list.  \nsburjan - (14:01): I'd personally recommend another sectionto display failed messages  \nsburjan - (14:01): but it's your app :P  \nsburjan - (14:01): \\*section  \nCalebJamesDeLisl - (14:01): My app. It was until I committed it :)  \nsburjan - (14:02): and the second issue worth mentioning  \nsburjan - (14:02): I use thunderbird as a e-mail client  \nsburjan - (14:02): and althrough the idea of putting HTML code there is very very good, i have a small suggestion  \nsburjan - (14:03): when I open a mail send bythe inviter, I get the Accept the invitation on the left side, and the reject on the far right  \nsburjan - (14:03): for an user it is pretty hart to see that he has actually too option  \nsburjan - (14:03): bascially, the buttons are too away one form each other  \nsburjan - (14:04): you should but them one next the other, or one underneath the other  \nsburjan - (14:04): and Accept with a bigger and blue font  \nsburjan - (14:04): and Reject, red smaller font  \nCalebJamesDeLisl - (14:05): Hmm, I was trying to follow this: http://incubator.myxwiki.org/xwiki/bin/view/Improvements/InvitationProposal/  \nvmassol - (14:05): abusenius: can we make the nested validator work when current macro block is not defined?  \nvmassol - (14:05): or shouldn't we?  \nvmassol - (14:05): I'm getting NPE now if the current macro block isn't specified in the context  \nvmassol - (14:05): we need to decide if it's mandatory or not  \nvmassol - (14:05): I guess we could consider it's mandaotry  \nvmassol - (14:05): tmortagne: wdyt?  \nsburjan - (14:05): yes, but consider the width of that area where are located on the link you gave, and the width of a thunderbird window. Need a screen ?  \nCalebJamesDeLisl - (14:06): I know what it looks like.  \nCalebJamesDeLisl - (14:06): It's hard to replicate that look and feel without it scailing with the page.  \nsburjan - (14:06): it's more important to look good in the email clients of the invitees rathen thatn look awesome in the priview area :P  \nDSpair joined #xwiki at 14:07  \nsburjan - (14:07): I'll try modifying the message template  \nDSpair - (14:07): Good morning all.  \nCalebJamesDeLisl - (14:07): To change that all you have to do is open \"configure invitation app\" and it's in the email content template.  \nsburjan - (14:07): maybe I can make a better rendering  \nsburjan - (14:07): yes  \nDSpair - (14:08): Can someone point me to a good reference for the database schema for XWIKI? I want to write a script which will automatically update certain attachments within XWiki via native SQL.  \nCalebJamesDeLisl - (14:08): I'd be happy to see what you can do. I'm not really a CSS guy, I'm just faking ;)  \nsburjan - (14:08): if I create something good, I'll pastebin it to you  \nCalebJamesDeLisl - (14:09): DSpair: Good luck. You want to look here: http://platform.xwiki.org/xwiki/bin/view/DevGuide/DsXWikiAttachmentContent  \nDSpair - (14:10): CalebJamesDeLisl: Thanks much!  \nCalebJamesDeLisl - (14:10): But the attachments are base64 encoded. So as I said, good luck, and obviously no support :)  \nDSpair - (14:12): CalebJamesDeLisl: Base64 is not a problem.  \nDSpair - (14:12): What I would like to know is if there's a reference for how versioning is handled for attachments?  \nsburjan - (14:13): CalebJamesDeLisl, \u00a0: let me invite me a few times to see how it looks in Thunderbird  \nCalebJamesDeLisl - (14:13): DSpair: Right here: http://svn.xwiki.org/svnroot/xwiki/platform/core/trunk/xwiki-core/src/main/java/com/xpn/xwiki/store/XWikiHibernateAttachmentStore.java  \nDSpair - (14:13): NM, I think I found it... RCS format, 'eh?  \nDSpair - (14:14): That should be fun to implement in PHP.... :(  \nCalebJamesDeLisl - (14:15): Hmm, maybe write a java app and start it from PHP? I don't know what you can do in PHP.  \nCalebJamesDeLisl - (14:15): Maybe use CGI as the glue.  \nDSpair - (14:16): CalebJamesDeLisl: Basically, we have an automated Expect based system for backing up network devices (Cisco, HP, Nortel, etc...) and I would like to update the attachments with the latest version of the backups nightly.  \nCalebJamesDeLisl - (14:16): In fact then you can just use the normal means of uploading attachments.  \nCalebJamesDeLisl - (14:17): Cool :) \u00a0I would push the attachments with curl or something like.  \nCalebJamesDeLisl - (14:18): Actually if you don't want to mess around with multipart http posts, you could write a groovy app in a wiki page to grab files off the disk and make them into attachments.  \nDSpair - (14:18): Hrrmmm . . . I'm not sure how to do that. How would you script the login/auth process?  \nDSpair - (14:19): CalebJamesDeLisl: I don't know Groovy... I haven't had much luck learning it either. I know Java, and PHP, and C.....  \nCalebJamesDeLisl - (14:19): You could stay logged in all the time and just have cookies to push.  \nDSpair - (14:19): CalebJamesDeLisl: But, I'm self taught, so I run into limitations of my abilities in many cases.  \nbbc581 left at 14:19 (Ping timeout: 265 seconds  \nCalebJamesDeLisl - (14:19): The secret with groovy is that almost all java code is valid.  \nDSpair - (14:19): CalebJamesDeLisl: Well, that's wonderful!  \nDSpair - (14:19): CalebJamesDeLisl: Is there a primer somewhere?  \nDSpair - (14:20): NM, I found it.  \nCalebJamesDeLisl - (14:20): http://groovy.codehaus.org/Differences+from+Java  \nCalebJamesDeLisl - (14:20): The only real difference is an array is declared with [ and ] instead of { and }. That's it as far as I can see.  \nDSpair - (14:20): And there's a scheduler within XWiki now too, right?  \nCalebJamesDeLisl - (14:20): Yup.  \nDSpair - (14:21): Awesome!!! Very helpful!!! A+++++  \ntmortagne - (14:21): vmassol: i would say not mandatory  \nCalebJamesDeLisl - (14:21): It will run groovy code periodically.  \nvmassol - (14:21): tmortagne: yep I changed it that way  \nDSpair - (14:27): Well, this definitely looks doable... Thanks again for all of the help!!!  \nCalebJamesDeLisl - (14:28): No pb, ping me with any questions, it's a pleasure to help people who are making an effort.  \nsburjan - (14:28): CalebJamesDeLisl : http://pastebin.org/338750 this is my proposal. could you try it and give me your feedback please ?  \nCalebJamesDeLisl - (14:29): just a minute until I rebuild XE and start the engine.  \nsburjan - (14:29): it gets badly rendered in the preview because the preview field is too small  \nsburjan - (14:29): okay  \nCalebJamesDeLisl - (14:30): hmm hardcoded 85px... Maybe a % would work better?  \nsburjan - (14:32): well the decline button gets aligned exactly under report it  \nsburjan - (14:32): i;ll do a %t hen  \nsburjan - (14:32): i;ll do a % version then  \nsburjan - (14:36): CalebJamesDeLisl, : http://pastebin.org/338758 the % version  \nsburjan - (14:36): try it out  \nCalebJamesDeLisl - (14:37): test running...  \nCalebJamesDeLisl - (14:39): sburjan: Were you the guy writing the expense report app? I can't remember...  \nsburjan - (14:40): nop, this is my first \"coding\" attempt since I'm working at XWiki  \nsburjan - (14:40): i'm here only for 3 weeks  \nsburjan - (14:40): new guy  \nsburjan - (14:41): so, is it okay, or do you want other modifications ?  \nCalebJamesDeLisl - (14:41): Hah, just getting the engine started now.  \nsburjan - (14:41): oh  \nCalebJamesDeLisl - (14:42): I'm recompiling every 10 or 15 minutes to include my latest changes.  \nsburjan - (14:42): on hudson ?  \nsburjan - (14:42): or only locally  \nCalebJamesDeLisl - (14:42): No compiling on local.  \nsburjan - (14:42): local I mean on your computer  \nCalebJamesDeLisl - (14:43): Yea, I've been meaning to set up a slave box to do my compiling while I \"work\".  \nvmassol left at 14:48 (Ping timeout: 265 seconds  \nCalebJamesDeLisl - (14:50): sburjan: First version is aligned in the preview but out of alignment in my email client (and it looks like the colors are broken again but that might be because it's an older version)  \nCalebJamesDeLisl - (14:50): Second version blows up with an error when I try to send.  \nsburjan - (14:50): no, I changed the red  \nsburjan - (14:50): I put a webcolor  \nsburjan - (14:50): hmmm  \nsburjan - (14:51): let me try again the second version, the one with %  \nCalebJamesDeLisl - (14:51): IMO we should get the functionality up and working before we worry about template CSS formatting.  \nvmassol joined #xwiki at 14:52  \nCalebJamesDeLisl - (14:54): replacing \"Cancel\" button with \"Rescind Invitation\"  \nsburjan - (14:54): yes  \nsburjan - (14:54): and remove failed items from there :P  \nsburjan - (14:55): it works fin with thesecond version  \nsburjan - (14:55): i mean the alignment  \nsburjan - (14:55): mail sent, mail recieved  \nsburjan - (14:57): monday i could try to put all those in a div  \nsburjan - (14:58): and arrange them .. much more better.. so it will render the same on more resolutions/clients  \nCalebJamesDeLisl - (14:59): Yes testing on more email clients should be done.  \nsburjan - (15:00): i'm going home  \nsburjan - (15:00): talk to you later  \nCalebJamesDeLisl - (15:00): See ya.  \nsburjan - (15:00): peace  \nplunden left at 15:01 (Remote host closed the connection  \nplunden joined #xwiki at 15:01  \nlucaa left at 15:04 (Ping timeout: 240 seconds  \nsburjan left at 15:05 (Ping timeout: 240 seconds  \nbblfish left at 15:08 (Quit: Leaving.  \nbblfish joined #xwiki at 15:08  \nDSpair - (15:31): When using the XWikiAttachment class, is there a class/method I can use to pull up an existing attachment? Or will that happen automatically if I use the same file name?  \nplunden left #xwiki at 15:36  \nDenis1 - (16:18): [ERROR] The method setId(String) is undefined for the type TransformationContext  \nDenis1 - (16:18): [ERROR] The method clearMacroNamespace(String) is undefined for the type VelocityEngine  \nDenis1 - (16:18): [ERROR] The method setId(String) is undefined for the type TransformationContext  \nDenis1 - (16:18): vmassol ?  \nDenis1 is now known as Denis ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nvmassol - (16:19): Denis1: you need to svn up  \nDenis - (16:19): I have just  \nDenis - (16:19): I redo  \nvmassol - (16:19): it means your ide is not up to date on all parts  \ntmortagne - (16:19): and rebuild rendering-api  \ntmortagne - (16:20): since hudson probably did not rebuild it yet  \nvmassol - (16:20): yep  \nDenis - (16:24): repository move faster than my computer is able to build, need also xwiki-velocity its seems...  \nvmassol - (16:25): yes  \nDenis - (16:25): got it to works now :)  \nvmassol - (16:26): got to go, will reconnect in 3 hours  \ntmortagne - (16:26): CalebJamesDeLisl: i will merge XWIKI-5230 on 2.3 after all because vmassol needs it to fix velocity memory leak  \nDenis - (16:26): vmassol: BTW, I have found why you have reverte some calls in XWikiHibernateStore :)  \nvmassol - (16:26): ah?  \ntmortagne - (16:27): vmassol: yep TransfrmationContext is part of it  \nDenis - (16:27): this is an issue with cloning objects and the relative class reference  \nvmassol - (16:27): ok  \nvmassol - (16:27): bfn  \nDenis - (16:27): we definitely need to improve that  \nDenis - (16:28): tmortagne suggest to have a constructor that accept a BaseObject for cloning BaseObject into custom class, but this will break current api IMO  \nvmassol left at 16:31 (Ping timeout: 252 seconds  \nDSpair - (16:40): What's the DAO class for XWikiAttachment?  \nDSpair - (16:45): Looks like com.xpn.xwiki.store.jcr.XWikiJcrAttachmentStore?  \nDSpair - (16:52): Nevermind, I can access it directly from Grrovy without having to instantiate the DAO.  \nDSpair - (16:52): Cool!  \nDSpair - (16:52): I may drop some of my projects and re-implement in XWiki Groovy if this works out well.  \nvmassol joined #xwiki at 16:55  \nDSpair - (16:56): If I need an external library to access from Groovy, can I just put it in the WEB-INF/lib, or does XWiki use a custom class loader?  \nlucaa joined #xwiki at 16:57  \nvmassol - (16:57): DSpair: web-inf/lib will work fine  \nDSpair - (16:57): Thanks Vincent!  \nvmassol - (16:58): (you can also attach the jar to the page and use jars=\"...\")  \nDSpair - (16:58): Really? That's interesting. I guess that would be a good way to package an entire XAR application and redistribute it?  \nvmassol - (17:00): yes  \nvmassol - (17:00): more in the future with the extension manager  \nDenis - (17:00): vmassol: seems your last commit cause a test failure in core  \nvmassol - (17:01): last one was a checkstyle fix  \nvmassol - (17:01): you sure?  \nDenis - (17:01): Running com.xpn.xwiki.doc.XWikiDocumentRenderingTest  \nDenis - (17:01): 2010-06-18 16:55:39,418 [main] ERROR internal.DefaultVelocityEngine \u00a0- WebappLoader : unable to retrieve ServletContext  \nDenis - (17:01): Tests run: 8, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 9.883 sec <<< FAILURE!  \nDSpair - (17:01): That's excellent. I'm thinking of migrating my Expect based backup system (for Cisco devices) to ExpectJ. IF it works, our company will also want to deploy for our India offices. Being able to redistribute the application that way would be AWESOME!  \nvmassol - (17:02): Denis: checking  \nDenis - (17:02): vmassol: I will commit my fix for XWIKI-5285, since I have to leave and want it in 2.4M2  \nvmassol - (17:05): Denis: the build passed on hudson  \nvmassol - (17:05): http://hudson.xwiki.org/job/xwiki-platform-core/  \nDenis - (17:07): vmassol: sorry, no time to look at it further, I have obviously not rebuild the whole plateform, it may be the cause. I have commited r29552, hope that its fine, I leave now  \nlucaa left at 17:08 (Ping timeout: 260 seconds  \nDenis left at 17:18 (Quit: Leaving.  \nDSpair - (17:19): vmassol: The jars=\"...\", where would I put that? In the {{groovy}} tag?  \ntmortagne - (17:19): DSpair: yes it's a macro parameter supported by all script macros  \nvmassol - (17:20): DSpair: http://code.xwiki.org/xwiki/bin/view/Macros/ScriptMacro  \nDSpair - (17:22): vmassol: Excellent, thanks for that tip!  \nvmassol - (17:25): got to go again  \nvmassol - (17:25): bbl  \nvmassol left at 17:30 (Ping timeout: 252 seconds  \ntmortagne - (17:36): CalebJamesDeLisl: Invitation.InvitationMemberActions and Invitation.WebHome produce invalid xhtml  \ntmortagne - (17:36): http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-webstandards/957/testReport/com.xpn.xwiki.it.framework/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_space\\_Invitation\\_\\_page\\_InvitationMemberActions\\_executed\\_with\\_credentials\\_Admin\\_admin/  \nCalebJamesDeLisl - (17:36): Thanks, looking...  \ntmortagne - (17:38): jvdrean: there is still the bug with <input type=\"hidden\" name=\"parent\" value=\"<a href='/xwiki/bin/view/Main/'>Welcome to your wiki</a>\"/> \u00a0in http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-webstandards/957/testReport/com.xpn.xwiki.it.framework/DefaultValidationTest/Validating\\_XWiki\\_validity\\_for\\_\\_\\_xwiki\\_bin\\_create\\_Main\\_\\_tocreate\\_space\\_executed\\_with\\_credentials\\_Admin\\_admin/  \ntmortagne - (17:38): seems pretty important  \nCalebJamesDeLisl - (17:38): There are some WCAG errors which I can't easily get rid of, email clients demand that style is in a style attribute so any true preview will be WCAG invalid.  \nCalebJamesDeLisl - (17:38): (that's a different problem than what you showed me though)  \ntmortagne - (17:41): CalebJamesDeLisl: also look slike there is a new xhtml validaty falure that was not here before in XWiki.AdminTemplatesSheet http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-webstandards/957/testReport/com.xpn.xwiki.it.framework/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_space\\_XWiki\\_\\_page\\_AdminTemplatesSheet\\_executed\\_with\\_credentials\\_Admin\\_admin/  \ntmortagne - (17:42): (you can't put <input> elements directly inside <form> element)  \nCalebJamesDeLisl - (17:42): Shouldn't be, I haven't touched Configurable and anyway TemplateSheet doesn't use configurable AFAIK.  \ntmortagne - (17:44): CalebJamesDeLisl: sorry that was for jvdrean  \njvdrean - (17:45): tmortagne: looking  \ntmortagne - (17:45): ok thanks  \nCalebJamesDeLisl - (17:47): Looks like the XHTML invalidity is related to the ghost <p> blocks coming from {{include}} macros.  \nCalebJamesDeLisl - (17:48): Hah, I got it! \\n\\n between each include macro, ghost <p>s vanish!  \nCalebJamesDeLisl - (17:49): Replying to the question on the user list...  \ntmortagne - (17:49): CalebJamesDeLisl: include are like any other macro  \nCalebJamesDeLisl - (17:49): I just never thought to try treating them that way.  \ntmortagne - (18:07): CalebJamesDeLisl: output is not an include macro parameter  \ntmortagne - (18:07): (refering to your mail)  \nCalebJamesDeLisl - (18:07): I thought all macros had it.  \nCalebJamesDeLisl - (18:07): Ok, sending a correction, thanks.  \ntmortagne - (18:08): (but that could be a good idea indeed)  \ntmortagne - (18:09): anyway include macro doe snot produce anything if the document it's including does not produces anything  \ntmortagne - (18:09): so that would just hide the real issue in this case  \nCalebJamesDeLisl - (18:15): But it's one document I don't have to worry about being convinced to inject javascript into the page.  \ntmortagne - (18:16): sure, i'm just saying that in this case it would not help much finding what is producing the paragraph block  \nCalebJamesDeLisl - (18:17): Well if would be nice for the user to be able to tell if the macro is acting strange (or being misused) or if the included document is producing content.  \nnickless joined #xwiki at 18:21  \nabusenius left at 18:21 (Read error: Connection reset by peer  \nnickless is now known as abusenius ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nmflorea left at 18:27 (Quit: Leaving.  \narkub left at 18:29 (Quit: Leaving  \nKermitTheFragger left at 18:35 (Quit: Leaving  \ntmortagne - (18:43): CalebJamesDeLisl: (06:08:22 PM) <moi>: (but that could be a good idea indeed)  \ntmortagne - (18:43): again i'm only talking about the use case in the mail and about find the thing that produce this paragraph block  \nCalebJamesDeLisl - (18:44): I'm surprised it doesn't inherit it just by being a macro. But that shows my ignorance to the 2.0 renderer.  \ntmortagne - (18:45): output parameter is not a generic macro thing  \ntmortagne - (18:45): there is no parameter shared by all macro in fact  \ntmortagne - (18:46): otherwise the amcro parameter bean would not be an Object  \nCalebJamesDeLisl - (18:46): Ahh good to know. Rendering2 is something I have to sit down and read. I find it harder to read the new code than the old core because the old core is totally lacking in magic.  \nCalebJamesDeLisl - (18:47): I can trace the execution path through the old core in my sleep.  \ntmortagne - (18:47): old code it compensate with very crappy and anti-logic things...  \nCalebJamesDeLisl - (18:48): True enough but it's an easy read.  \ntmortagne - (18:49): i don't find new code that hard to read either you just have to trust apis and javadoc (where it's was totally impossible in old code)  \nCalebJamesDeLisl - (18:51): :) \u00a0I think there is a danger of trying to be too clever and taking all of the shortcuts until there are so many annotations, anonymous inner classes (I'm guilty of that) and other tricks that java turns into perl.  \ntmortagne - (18:52): :)  \ntmortagne - (18:52): for now that's the cost of having expendable platform ;)  \ntmortagne - (18:53): s/expendable/extendable/  \nCalebJamesDeLisl - (18:53): Freudian slip?  \nCalebJamesDeLisl - (18:54): What do you think of making an empty ListProperty equal a BaseProperty? If we implemented that change I can add my fast loadXWikiDoc.  \nCalebJamesDeLisl - (18:55): fast loadXWikiDoc blows up inside the guts of hibernate when it tries to compare an empty ListProperty to a BaseProperty.  \ntmortagne - (18:57): i could no say, i don't really know what this means in runtime  \nabusenius left at 18:58 (Ping timeout: 265 seconds  \ntmortagne - (18:58): what do you mean by \"empty ListProperty equal a BaseProperty\" ?  \nCalebJamesDeLisl - (19:00): Yup.  \nCalebJamesDeLisl - (19:01): Right now the .equals method throws a casting exception if I'm not mistaken.  \ntmortagne - (19:02): in  \ntmortagne - (19:02): List<String> list2 = (List<String>) ((BaseProperty) obj).getValue();  \ntmortagne - (19:02): ?  \nCalebJamesDeLisl - (19:02): If I recall, BaseProperty.getValue returns null.  \ntmortagne - (19:03): wow there is a lot of tests in theses equals methods  \nCalebJamesDeLisl - (19:05): Hmm, looks different from what I remember, maybe it was fixed.  \nCalebJamesDeLisl - (19:05): I remember this blowing up with an NPE if (list1.size() != list2.size()) {  \ntmortagne - (19:06): should still be the case here i think  \ntmortagne - (19:06): list2 is never tested for null value  \ntmortagne - (19:07): I have to go  \ntmortagne - (19:07): good WE  \nCalebJamesDeLisl - (19:07): See ya later.  \nCalebJamesDeLisl - (19:07): You too.  \ntmortagne left at 19:07 (Quit: Leaving.  \nflorinciu left at 19:11 (Quit: Leaving.  \nabusenius joined #xwiki at 19:16  \nCalebJamesDeLisl - (19:17): abusenius: Did you see r29561 I think it proves that the validator gets called but I'm not sure of myself.  \nabusenius - (19:19): hm, hm, yea, at least it would fail if its not called  \nCalebJamesDeLisl - (19:19): Perfect. That's what Vincent was complaining about. I'm still learning junit/jmock.  \nabusenius - (19:19): this test uses a fake nested script validator tough  \nCalebJamesDeLisl - (19:20): Doesn't matter as long as we prove it gets called and the other test proves it works.  \nabusenius - (19:20): ye, as long as we only have one validator it should be fine :)  \njvdrean left at 19:20 (Quit: Leaving.  \nCalebJamesDeLisl - (19:21): FYI about to merge with 2.3 since Thomas has merged the change to html macro.  \nabusenius - (19:22): great  \nCalebJamesDeLisl - (19:23): I have been thinking a bit about adding an automated test for XSS, something like scraping all pages for links with attributes, trying all links with known injection tricks in the attributes.  \nCalebJamesDeLisl - (19:24): Maybe better to just test for javascript in the body then when that's clean we can start thinking about implementing a blanket filter on all output.  \nabusenius - (19:26): that is the next thing I'll do  \nabusenius - (19:26): have thought about it since some time  \nCalebJamesDeLisl - (19:26): Which?  \nabusenius - (19:26): test things or xss  \nabusenius - (19:26): \\*for  \nabusenius - (19:27): it is actually quite easy, just test for wrong escaping (which is useful for itself)  \nCalebJamesDeLisl - (19:27): Not sure if it's better to test by fuzzing or to test for script in the body. I have codified the best practice that all script goes in the head.  \nabusenius - (19:28): well, is this best practice enforced somehow?  \nCalebJamesDeLisl - (19:28): But more validation tests mean we need a better way for hudson to tell us without spamming our addresses to oblivion.  \nabusenius - (19:29): that is another problem :)  \nCalebJamesDeLisl - (19:29): It's not enforced now but the way is just like the XHTML validity test. Pull all pages, analyze content, spam spam spam...  \nabusenius - (19:29): it will be more just in the beginning, afterwards people start actually use escaping at it will settle down  \nabusenius - (19:30): as long as it is not enforced, we need to explicitly test for escaping imo  \nabusenius - (19:31): otherwise even if the page is perfectly fine - inject js in the search box and here you have xss  \nCalebJamesDeLisl - (19:31): IMO script should be filtered by a response filter.  \nabusenius - (19:31): would be nice  \nCalebJamesDeLisl - (19:32): It's not that hard. It starts with a test for script that's in the document body.  \nabusenius - (19:32): it should also filter out all onsomething=\"\" attributes  \nCalebJamesDeLisl - (19:33): Then the filter will just wait until it sees </head> before switching on.  \nabusenius - (19:34): actually the best is to have both  \nCalebJamesDeLisl - (19:34): Actually filtering on\\* attributes is easy. They all begin with 'on' and nothing beginning with 'on' is allowable.  \nCalebJamesDeLisl - (19:34): (anything which begins with 'on' is script.)  \nCalebJamesDeLisl - (19:34): So flip a bit when you see a < then until you see a > you are looking for ' on'  \nCalebJamesDeLisl - (19:35): fast.  \nabusenius - (19:35): ok, I see 2 problems with filtering, 1. we cant filter out xss injected into head 2. we cant switch it on next week, everything will break  \nCalebJamesDeLisl - (19:35): :)  \nCalebJamesDeLisl - (19:35): But keeping XSS out of the head is \\_easy\\_  \nCalebJamesDeLisl - (19:36): What user content gets into the head anyway?  \nabusenius - (19:36): the problem with tests are 1. it is not perfect (both false positives and negatives), 2. it will produce a lot of noise at the beginning  \nabusenius - (19:36): title  \nabusenius - (19:36): language  \nabusenius - (19:36): meta  \nabusenius - (19:36): some links = action, space, page  \nCalebJamesDeLisl - (19:37): Well there is one vm file which produces the head, that can be picked over with a fine tooth comb.  \nabusenius - (19:37): but it will reduce the problem significantly  \nabusenius - (19:37): ah, and 3. there are ways to not use header  \nCalebJamesDeLisl - (19:38): The other thing about the filter is suppose there is a script in the body and you can't easily remove it.  \nabusenius - (19:38): yes, we allow javascript in html  \nabusenius - (19:38): we will need to do something with it  \nabusenius - (19:39): existing content is gonna be a pain as always :)  \nCalebJamesDeLisl - (19:40): You say: \u00a0<head>...... <!-- #AllowScript=\"12345RandomString\" --> </head> <body> ........ <!-- 12345RandomString --><script>some script which is hard to remove </script>  \nCalebJamesDeLisl - (19:40): It's one more thing for the filter to detect but it allows approved script in the body.  \nCalebJamesDeLisl - (19:41): 12345RandomString is generated per page load by a random number generator.  \nCalebJamesDeLisl - (19:42): Stored in a variable.  \nabusenius - (19:43): hm, we could actually annotate all scripts like that  \nabusenius - (19:43): (also the ones in head)  \nabusenius - (19:43): the filter would also be able to remove scripts from the head then  \nabusenius - (19:44): ok, got to go buy some food, bbl  \nCalebJamesDeLisl - (19:45): See ya.  \nDSpair - (19:53): Quick question I hope. How to I pull the XWikiContext from within a Groovy script?  \nDSpair - (19:54): Referencing the \"xcontext\" variable gives me a type of com.xpn.xwiki.api.Context instead of com.xpn.xwiki.XWikiContext  \nmflorea joined #xwiki at 19:59  \nCalebJamesDeLisl - (20:02): xcontext.getContext()  \nCalebJamesDeLisl - (20:03): You might find this helpful http://platform.xwiki.org/xwiki/bin/view/DevGuide/Scripting#HXWikiCoreAccess  \njfx left at 20:09 (Ping timeout: 264 seconds  \njfx joined #xwiki at 20:25  \njfx left #xwiki at 20:25  \nDSpair - (20:27): CalebJamesDeLisl: Thanks! Looks like my Groovy script is working. I appreciate everyone's assistance.  \nCalebJamesDeLisl - (20:27): No pb.  \nDSpair - (20:27): I still have a little debugging to do, but it all seems to be executing.  \nDSpair - (20:31): Quick question on the scheduler. Do I need to put the {{groovy}} tags in there, or are they assumed?  \nCalebJamesDeLisl - (20:36): No, no groovy tags because the scheduler predates the 2.0 rendering system so at the time there was no {{groovy}} macro.  \nlucaa joined #xwiki at 20:48  \nlucaa left at 21:05 (Ping timeout: 265 seconds  \nDSpair - (21:30): CalebJamesDeLisl: Thanks!  \nCalebJamesDeLisl - (21:31): Working?  \nCalebJamesDeLisl - (21:31): (is it)  \nDSpair - (21:31): Yup!!!  \nCalebJamesDeLisl - (21:31): Cool.  \nDSpair - (21:32): Yeah, the Groovy code goes and gets a directory listing from my TFTP root and looks for files created on today's date. If the file is larger than 2 bytes, it imports to a specified XWiki page as an attachment.  \nDSpair - (21:33): Once I tracked through the XWiki APIs to the proper methods, it was VERY simple to implement.  \nCalebJamesDeLisl - (21:40): If you're using mysql, be careful of max packet size.  \nvmassol joined #xwiki at 21:50  \nvmassol left at 22:32 (Quit: Leaving.  \nDSpair left at 22:44 (Quit: Leaving  \nflorinciu joined #xwiki at 22:59  \nmflorea left at 23:29 (Quit: Leaving.  \n\n"}