{"id": "dev:IRC.xwikiArchive20140424", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140424", "title": "IRC Archive for channel #xwiki on 24 April 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Denis>\u00a0has joined #xwiki  \n06:03\u00a0<Denis1>\u00a0has quit  \n06:59\u00a0<mflorea>\u00a0has joined #xwiki  \n07:33\u00a0<tmortagne>\u00a0has quit  \n07:48\u00a0<mflorea>\u00a0has quit  \n07:49\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n08:06\u00a0<msmeria>\u00a0has joined #xwiki  \n08:32\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:49\u00a0<cjd>\u00a0has joined #xwiki  \n08:53\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:01\u00a0<mflorea>\u00a0has joined #xwiki  \n09:12\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n09:18\u00a0<vmassol>\u00a0has joined #xwiki  \n09:25\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:47\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:22\u00a0<mflorea>\u00a0has quit  \n10:42\u00a0<Slashman>\u00a0has joined #xwiki  \n10:44\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:52\u00a0<mflorea>\u00a0has joined #xwiki  \n12:10\u00a0<vmassol>\u00a0forgot again the xwiki day today....  \n12:10\u00a0<vmassol>\u00a0on the good news side, I now have an internet connection at him so all should come back as normal on my side  \n12:10\u00a0<vmassol>\u00a0s/him/home  \n12:10\u00a0<vmassol>\u00a0(since this morning)  \n12:10\u00a0<DarkKnightCZ>\u00a0what is the best way to \"create user\"? if i successfully authenticate user in own authentication module, user is not created if he doesn't exist  \n12:20\u00a0<ClemensR>\u00a0DarkKnightCZ: I have not tried, but I guess if you have your own auth module \u00a0you are responsible to create the user documents, too ... I have been using \u00a0XWiki.createUser(....) for that purpose  \n12:25\u00a0<tmortagne>\u00a0as suggested by ClemensR you are generally supposed to use XWiki.createUser  \n12:25\u00a0<tmortagne>\u00a0you can look at other authenticator as example  \n12:26\u00a0<tmortagne>\u00a0see https://github.com/xwiki-contrib/xwiki-authenticator-jdbc/blob/master/src/main/java/org/xwiki/contrib/authentication/jdbc/internal/DefaultUserSynchronizer.java for example  \n12:27\u00a0<DarkKnightCZ>\u00a0ok, perfect, thanks  \n12:28\u00a0<tmortagne>\u00a0we need to update the general authentication API and common tools  \n12:33\u00a0<DarkKnightCZ>\u00a0mandatory user property is \"active\" only?  \n12:33\u00a0<tmortagne>\u00a0pretty much yes I think  \n12:51\u00a0<ClemensR>\u00a0meh, my WatchList macro test is flickering again. I will try to see if I can do something about it ...  \n12:59\u00a0<DarkKnightCZ>\u00a0has quit  \n13:02\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n13:06\u00a0<DarkKnightCZ>\u00a0tmortagne: i guess syncing user group params with ldap (in custom authenticator) could be done by calling syncGroupMembership for each existing user, right?  \n13:50\u00a0<tmortagne>\u00a0DarkKnightCZ: yes you can sync a user membership anytime using syncGroupsMembership, it does not have to be the current user  \n13:52\u00a0<DarkKnightCZ>\u00a0ok, and is there any getter of valid connection?  \n13:52\u00a0<tmortagne>\u00a0not sure I understand the question  \n13:55\u00a0<DarkKnightCZ>\u00a0XWikiLDAPUtils requires XWikiLDAPConnection... since ldapconnection isn't singleton, i have to instantiate it, and since it doesn't have any default constructor (using default connection params in config), i guess i need to call manually connect and bind... so is there any getter for this valid connection, or do i have to do this?  \n13:58\u00a0<tmortagne>\u00a0if what you can a valid connexion is one taking into account LDAP authenticator configuration then you need to do the same as the LDAP authenticator  \n13:58\u00a0<tmortagne>\u00a0you can get the configuration using XWikiLDAPConfig config = XWikiLDAPConfig.getInstance();  \n13:59\u00a0<tmortagne>\u00a0forget that  \n13:59\u00a0<tmortagne>\u00a0that's what XWikiLDAPConnection does already  \n13:59\u00a0<tmortagne>\u00a0it's not the constructor you should look at  \n13:59\u00a0<tmortagne>\u00a0but open  \n14:00\u00a0<tmortagne>\u00a0DarkKnightCZ: you have two open() methods in XWikiLDAPConnection  \n14:00\u00a0<tmortagne>\u00a0including what getting what is needed to connect from XWikiLDAPConfig  \n14:00\u00a0<tmortagne>\u00a0(XWikiLDAPConfig unique instance that is)  \n14:01\u00a0<tmortagne>\u00a0so if you use open(String ldapUserName, String password, XWikiContext context) then you are using automatically LDAP authenticator configuration  \n14:01\u00a0<tmortagne>\u00a0s/what getting/one getting/  \n14:06\u00a0<DarkKnightCZ>\u00a0yep, but then i still need ldap username and password (probably from config)  \n14:15\u00a0<mflorea>\u00a0gdelhumeau, tmortagne: what's the best way to check if an wiki exists? using the wiki manager? I want the Solr sync job to check if a wiki exists and if not remove all items by query.  \n14:15\u00a0<tmortagne>\u00a0mflorea: use the wiki module yes  \n14:16\u00a0<tmortagne>\u00a0it's not a core module of XWiki, it's not some fuzzy XEM extension like old wikimanager used to be  \n14:16\u00a0<tmortagne>\u00a0it's a core module sorry  \n14:16\u00a0<mflorea>\u00a0ok, good. fyi, in order to reduce the number of calls to exists I need to 'group' (actually facet) documents by wiki, because I cannot run db queries cross wiki  \n14:16\u00a0<tmortagne>\u00a0sure  \n14:17\u00a0<tmortagne>\u00a0but it's already a lot less requests  \n14:17\u00a0<mflorea>\u00a0yes, but still I want to check if the wiki exists before handling all solr results from that wiki  \n14:20\u00a0<mflorea>\u00a0the wiki manager can't tell me if a wiki exists..  \n14:21\u00a0<mflorea>\u00a0I guess I'll have to use \"idAvailable\" (knowing that the wiki name is valid)  \n14:27\u00a0<tmortagne>\u00a0mflorea: why do you want to test that ?  \n14:27\u00a0<tmortagne>\u00a0if you get that wiki in the list of wikis it should exist  \n14:28\u00a0<tmortagne>\u00a0it's not solr job to check if there is a descriptor and no corresponding DB  \n14:28\u00a0<mflorea>\u00a0no, I get the list of wikis from the solr wiki facet  \n14:29\u00a0<tmortagne>\u00a0don't use idAvailable, ask the list of wikis and see if it's in the list that's all  \n14:29\u00a0<mflorea>\u00a0i.e. Solr tells me it has docuents indexed for the wiki 'foo'. I'd like to check if this wiki still exists and if not remove all at once  \n14:29\u00a0<tmortagne>\u00a0those descriptors are in a cache  \n14:29\u00a0<tmortagne>\u00a0idAvailable require a query  \n14:30\u00a0<tmortagne>\u00a0mflorea: WikiDescriptorManager  \n14:30\u00a0<tmortagne>\u00a0not WikiManager  \n14:30\u00a0<mflorea>\u00a0yes, I used WikiDescriptorManager.exists in the end  \n14:30\u00a0<tmortagne>\u00a0did not saw gdelhumeau separated that in 2 APIs  \n14:31\u00a0<mflorea>\u00a0should I use getAll instead?  \n14:31\u00a0<tmortagne>\u00a0no no use exist  \n14:31\u00a0<mflorea>\u00a0ok  \n14:31\u00a0<tmortagne>\u00a0did not know there was a exist  \n14:31\u00a0<tmortagne>\u00a0(never really used the API yet :))  \n14:31\u00a0<tmortagne>\u00a0I just know what's under it  \n14:31\u00a0<mflorea>\u00a0me neither :)  \n15:03\u00a0<gdelhumeau>\u00a0exists() is better than getAll() actually  \n15:05\u00a0<gdelhumeau>\u00a0getAll() perform a query every time meanwhile exists does not  \n15:10\u00a0<DarkKnightCZ>\u00a0has quit  \n15:11\u00a0<tmortagne>\u00a0gdelhumeau: does getAll really need to perform a query every time ?  \n15:11\u00a0<tmortagne>\u00a0it should return the cache  \n15:12\u00a0<gdelhumeau>\u00a0that was a question at a time  \n15:12\u00a0<tmortagne>\u00a0I tough the \"cache\" was actually containing all wikis  \n15:12\u00a0<gdelhumeau>\u00a0the asnwer is: maybe the cache is not big enough to contain all wikis  \n15:12\u00a0<tmortagne>\u00a0if it contains everything then there is no need to request everytime IMO  \n15:12\u00a0<tmortagne>\u00a0gdelhumeau: that means exist sometime need to perform query too then  \n15:13\u00a0<gdelhumeau>\u00a0see: https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-wiki/xwiki-platform-wiki-default/src/main/java/org/xwiki/wiki/internal/descriptor/DefaultWikiDescriptorManager.java#L67  \n15:13\u00a0<gdelhumeau>\u00a0tmortagne: yes, but not if it is already in the cache  \n15:13\u00a0<gdelhumeau>\u00a0so most of the time: no query  \n15:14\u00a0<tmortagne>\u00a0gdelhumeau: you could do something where you use the cache as long as it's bigger than the number of wikis  \n15:15\u00a0<tmortagne>\u00a0you can't have a new wiki created without being notified about it so it should be doable  \n15:15\u00a0<gdelhumeau>\u00a0that would be a simple but good improvement indeed  \n15:22\u00a0<cjd>\u00a0<offtopic> http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/hash/BloomFilter.html :)  \n15:25\u00a0<cjd>\u00a0I give bigG credit for being one of the few shops that produces code which is decent.. almost even pleasurable... to read  \n15:26\u00a0<andreeapopescu>\u00a0has quit  \n15:40\u00a0<vmassol>\u00a0ClemensR: btw XWIKI-10110 is closed already (6.0M1) :)  \n15:40\u00a0<vmassol>\u00a0ah it's just tests  \n15:40\u00a0<vmassol>\u00a0it's fine  \n15:40\u00a0<vmassol>\u00a0sorry for the noise  \n15:40\u00a0<vmassol>\u00a0:)  \n15:41\u00a0<vmassol>\u00a0flickering \u2026. that's always a pain  \n15:41\u00a0<OSIMasson>\u00a0has joined #xwiki  \n15:42\u00a0<ClemensR>\u00a0yes, I had made some mistakes with that test, and I thought I commit it with a test related to the issue when I write them ...  \n15:42\u00a0<vmassol>\u00a0that reminds me that we need to fix an issue with the watchlist: if the first query in the wiki is on a subwiki then the wathclist email contains wrong links\u2026. had been wanting to look at this for a long time but didn't find the time so far  \n15:42\u00a0<ClemensR>\u00a0I hope it is less flickering now  \n15:42\u00a0<vmassol>\u00a0crossing fingers for you ;)  \n15:44\u00a0<OSIMasson>\u00a0has left #xwiki  \n15:54\u00a0<msmeria>\u00a0has quit  \n16:28\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n16:56\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n17:07\u00a0<KermitTheFragger>\u00a0has quit  \n17:21\u00a0<Denis1>\u00a0has joined #xwiki  \n17:23\u00a0<DarkKnightCZ1>\u00a0has joined #xwiki  \n17:25\u00a0<Denis>\u00a0has quit  \n17:29\u00a0<xwikibot>\u00a0has joined #xwiki  \n17:54\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:19\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:21\u00a0<Denis>\u00a0has joined #xwiki  \n18:22\u00a0<Kebir>\u00a0i have an idea for the front end team concerning \u00a0the icons of base skin colibri or others, we should integrate \"Entypo\" on the skin ans delete all image icons, the advantage is :  \n18:22\u00a0<Kebir>\u00a01- we win the chargement time of pages  \n18:22\u00a0<Kebir>\u00a02- we can add, edit , put color and change the sise of this icons  \n18:22\u00a0<Kebir>\u00a03- the skin of this icons are in flat design  \n18:22\u00a0<Kebir>\u00a04- its free for any users  \n18:22\u00a0<Kebir>\u00a0for more information http://www.entypo.com/  \n18:22\u00a0<Kebir>\u00a0wordpress have just integrate this solution  \n18:25\u00a0<Denis1>\u00a0has quit  \n18:27\u00a0<cjd>\u00a0+1 for fontIcons  \n18:44\u00a0<xwikibot>\u00a0has joined #xwiki  \n19:09\u00a0<xwikibot>\u00a0has joined #xwiki  \n19:09\u00a0<mflorea>\u00a0has quit  \n19:13\u00a0<xwikibot>\u00a0has joined #xwiki  \n19:19\u00a0<gdelhumeau>\u00a0has quit  \n19:27\u00a0<Slashman>\u00a0has quit  \n19:46\u00a0<mflorea>\u00a0has joined #xwiki  \n19:50\u00a0<Kebir>\u00a0has quit  \n20:11\u00a0<cjd>\u00a0has quit  \n20:55\u00a0<sburjan`>\u00a0has joined #xwiki  \n20:55\u00a0<sburjan>\u00a0has quit  \n20:55\u00a0<sburjan`>\u00a0is now known as <sburjan>  \n21:12\u00a0<Kebir>\u00a0has joined #xwiki  \n21:13\u00a0<vmassol>\u00a0has joined #xwiki  \n21:15\u00a0<vmassol>\u00a0has quit  \n21:50\u00a0<mflorea>\u00a0has quit  \n21:59\u00a0<vmassol>\u00a0has joined #xwiki  \n22:06\u00a0<vmassol1>\u00a0has joined #xwiki  \n22:07\u00a0<vmassol>\u00a0has quit  \n22:08\u00a0<Kebir>\u00a0has quit  \n22:12\u00a0<Kebir>\u00a0has joined #xwiki  \n22:18\u00a0<Kebir>\u00a0has quit  \n22:30\u00a0<vmassol1>\u00a0has quit  \n22:33\u00a0<vmassol>\u00a0has joined #xwiki  \n22:49\u00a0<DarkKnightCZ1>\u00a0has quit  \n22:55\u00a0<vmassol>\u00a0has quit  \n23:57\u00a0<Kebir>\u00a0has joined #xwiki\n"}