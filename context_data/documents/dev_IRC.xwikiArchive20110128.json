{"id": "dev:IRC.xwikiArchive20110128", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110128", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:04\u00a0<abusenius>\u00a0has quit  \n00:09\u00a0<lpereira>\u00a0has quit  \n00:09\u00a0<abusenius>\u00a0has joined #xwiki  \n00:30\u00a0<abusenius>\u00a0has quit  \n00:53\u00a0<lucaa>\u00a0has quit  \n01:03\u00a0<florinciu>\u00a0has quit  \n01:27\u00a0<abusenius>\u00a0has joined #xwiki  \n04:42\u00a0<DrLou>\u00a0has quit  \n04:55\u00a0<abusenius>\u00a0has quit  \n05:41\u00a0<venkatesh>\u00a0has joined #xwiki  \n05:42\u00a0<venkatesh>\u00a0has quit  \n07:13\u00a0<vmassol>\u00a0has joined #xwiki  \n07:50\u00a0<mflorea>\u00a0has joined #xwiki  \n08:09\u00a0<vmassol>\u00a0has quit  \n08:32\u00a0<jstoldt>\u00a0has joined #xwiki  \n08:34\u00a0<jstoldt>\u00a0good morning  \n08:48\u00a0<jstoldt>\u00a0has quit  \n08:49\u00a0<lucaa>\u00a0has joined #xwiki  \n08:53\u00a0<jstoldt>\u00a0has joined #xwiki  \n09:01\u00a0<Denis>\u00a0has joined #xwiki  \n09:04\u00a0<npm\\_>\u00a0has joined #xwiki  \n09:05\u00a0<npm>\u00a0has quit  \n09:05\u00a0<oanat>\u00a0has joined #xwiki  \n09:11\u00a0<oanat>\u00a0has quit  \n09:26\u00a0<venkatesh>\u00a0has joined #xwiki  \n09:26\u00a0<venkatesh>\u00a0has quit  \n09:27\u00a0<venkatesh>\u00a0has joined #xwiki  \n09:29\u00a0<arkub>\u00a0has joined #xwiki  \n09:29\u00a0<arkub>\u00a0has quit  \n09:29\u00a0<arkub>\u00a0has joined #xwiki  \n09:47\u00a0<vmassol>\u00a0has joined #xwiki  \n09:56\u00a0<evalica>\u00a0has joined #xwiki  \n10:12\u00a0<arkub>\u00a0has quit  \n10:17\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:19\u00a0<sburjan>\u00a0has joined #xwiki  \n10:29\u00a0<abusenius>\u00a0has joined #xwiki  \n10:41\u00a0<vmassol>\u00a0sburjan: good morning. Sent a mail for you this morning on the devs list regarding \"[Discussion] JIRA: Improving QA/Test Reports + relaxing JIRA rule\". Would be good if you could reply to it  \n10:41\u00a0<+sburjan>\u00a0vmassol: yes, yesterday I had a free day, now catching up  \n10:42\u00a0<vmassol>\u00a0ah ok  \n10:42\u00a0<vmassol>\u00a0good  \n10:43\u00a0<+sburjan>\u00a0do you have time today to review a patch ? (automated tests)  \n10:43\u00a0<vmassol>\u00a0maybe, attach it to a jira issue  \n11:03\u00a0<+lucaa>\u00a0hello fellow devs  \n11:04\u00a0<+lucaa>\u00a0is there a way to force non-caching of a jsfx?  \n11:04\u00a0<+lucaa>\u00a0or I need to pass myself a random string as a param when I call iy?  \n11:04\u00a0<+lucaa>\u00a0it  \n11:04\u00a0<+lucaa>\u00a0when I jsfx.use it, that is  \n11:04\u00a0<vmassol>\u00a0!news  \n11:04\u00a0<+lucaa>\u00a0( sdumitriu? )  \n11:04\u00a0<vmassol>\u00a0!news  \n11:05\u00a0<+lucaa>\u00a0vmassol: are you trying to get my question out of everybody's screens on purpose?  \n11:05\u00a0<vmassol>\u00a0yes  \n11:05\u00a0<vmassol>\u00a0I'm taking screenshots to document the irc app ;)  \n11:05\u00a0<vmassol>\u00a0and you broke my screenshot! :)  \n11:06\u00a0<+lucaa>\u00a0you broke my question!  \n11:06\u00a0<@cjdelisle>\u00a0lol  \n11:06\u00a0<vmassol>\u00a0hehe  \n11:06\u00a0<vmassol>\u00a0!search Annotation  \n11:07\u00a0<vmassol>\u00a0!jira WYSIWYG  \n11:08\u00a0<vmassol>\u00a0pfew was sure someone would distrurb this one :)  \n11:08\u00a0<vmassol>\u00a0(since it takes for ages)  \n11:08\u00a0<vmassol>\u00a0s/for//  \n11:09\u00a0<+lucaa>\u00a0(damn, I was in another window)  \n11:09\u00a0<vmassol>\u00a0I know which is why I did it at that time  \n11:09\u00a0<fmancinelli>\u00a0has joined #xwiki  \n11:11\u00a0<+sburjan>\u00a0vmassol: I don't like that I have to modify code checkstyled by eclipse in order NOT to introduce syntax arrangements in patches  \n11:12\u00a0<+sburjan>\u00a0it takes a lot of time  \n11:12\u00a0<vmassol>\u00a0so don't do it!  \n11:12\u00a0<+lucaa>\u00a0how about my q, sdumitriu?  \n11:12\u00a0<+lucaa>\u00a0any hint?  \n11:12\u00a0<vmassol>\u00a0send a patch for the style first or ask someone  \n11:12\u00a0<vmassol>\u00a0then send the real aptch  \n11:12\u00a0<vmassol>\u00a0or bundle them all together  \n11:13\u00a0<+sburjan>\u00a0vmassol: well it's too late, because I already have the modified version, and can't revert just to make checkstyle patch  \n11:13\u00a0<+sburjan>\u00a0vmassol: I will bundle  \n11:16\u00a0<vmassol>\u00a0Let me rememner what XWIKI-1000 was about\u2026 hmmm  \n11:16\u00a0<vmassol>\u00a0ah thanks Bot!  \n11:26\u00a0<+sburjan>\u00a0vmassol: attached patch. XE-812 It's a pretty big patch, I am sure you won't like a lot of things, but I am prepared to learn :)  \n11:26\u00a0<@sdumitriu>\u00a0lucaa: Morning  \n11:26\u00a0<venkatesh>\u00a0has quit  \n11:26\u00a0<@sdumitriu>\u00a0So, that's jsfx, right?  \n11:27\u00a0<@sdumitriu>\u00a0Why do you want to prevent caching?  \n11:28\u00a0<+lucaa>\u00a0sdumitriu: because it has some velocity in it, generating some stuff  \n11:28\u00a0<+lucaa>\u00a0that get cached  \n11:28\u00a0<@sdumitriu>\u00a0What kind of stuff?  \n11:28\u00a0<+lucaa>\u00a0for example, some rights flags that say whether some UI should be displayed or not  \n11:29\u00a0<@sdumitriu>\u00a0K  \n11:29\u00a0<+lucaa>\u00a0when I'm guest I don't have them  \n11:29\u00a0<+lucaa>\u00a0then I login and I don't have them either  \n11:29\u00a0<+lucaa>\u00a0because the js was cached  \n11:29\u00a0<+lucaa>\u00a0f5 does the job  \n11:29\u00a0<@sdumitriu>\u00a0Usually you put that info somewhere in the page  \n11:29\u00a0<+lucaa>\u00a0yes, I know  \n11:29\u00a0<+lucaa>\u00a0that's the other solution I have  \n11:29\u00a0<+lucaa>\u00a0but it's a lot more than that  \n11:29\u00a0<@sdumitriu>\u00a0Breaking the cache is something that should be done rarely  \n11:29\u00a0<+lucaa>\u00a0and quite specific (that's why it's a jsfx)  \n11:30\u00a0<+lucaa>\u00a0it's only for a file, whose purpose is only this, to set some js vars to values read from some velocity vars  \n11:30\u00a0<@sdumitriu>\u00a0So, to answer your question, the only solution is to append a random query string  \n11:30\u00a0<+lucaa>\u00a0normally yes, it could be in the page  \n11:30\u00a0<+lucaa>\u00a0but it's too specific to put it in javascript.vm  \n11:30\u00a0<@sdumitriu>\u00a0But it would be better to put the info in a page  \n11:31\u00a0<+lucaa>\u00a0ftm I will do a random string (because I would also need a solution that might break as little things as possible in the next 2 days)  \n11:37\u00a0<+mflorea>\u00a0abusenius: is it possible to enable csrf from the wiki, without restarting the server? I'd like to write a selenium test but csrf is disabled by default so I need to enable it in my test somehow (from XWikiPreferences maybe?)  \n11:39\u00a0<@sdumitriu>\u00a0mflorea: No, the configuration is only in xwiki.properties  \n11:39\u00a0<+abusenius>\u00a0yap  \n11:39\u00a0<@sdumitriu>\u00a0\u00a0\u00a0\u00a0\u00a0@Requirement(\"xwikiproperties\")  \n11:39\u00a0<@sdumitriu>\u00a0\u00a0\u00a0\u00a0\u00a0private ConfigurationSource configuration;  \n11:40\u00a0<+abusenius>\u00a0it wasn'T meant to do that  \n11:40\u00a0<+mflorea>\u00a0ah, right, ok thanks, this means no selenium test for XWIKI-5916 for now  \n11:41\u00a0<+abusenius>\u00a0in principle we should enable it and fix all tests, but it might take some time and I don't have it atm unfortunately  \n11:41\u00a0<+abusenius>\u00a0\\*it will take some time  \n11:41\u00a0<+mflorea>\u00a0right  \n11:42\u00a0<@sdumitriu>\u00a0Goal: Have CSRF enabled by default in 3.2 at least  \n11:42\u00a0<@sdumitriu>\u00a0Or is that at most?  \n11:42\u00a0<@sdumitriu>\u00a0K, at latest  \n11:43\u00a0<+mflorea>\u00a0:)  \n11:43\u00a0<+abusenius>\u00a0we can start off with enabling it during the development phase, until r1 for example  \n11:43\u00a0<mflorea>\u00a0has quit  \n11:43\u00a0<+abusenius>\u00a0and hope that somebody will find the time to fix a couple of tests  \n11:44\u00a0<DrLou>\u00a0has joined #xwiki  \n11:46\u00a0<@sdumitriu>\u00a0vmassol: Is XWIKI-4322 really only in 2.5 and 3.0?  \n11:46\u00a0<@sdumitriu>\u00a0Why not 2.6 and 2.7 as well?  \n11:46\u00a0<vmassol>\u00a0yes it should work o 2.6 and 2.7 as well  \n11:46\u00a0<@sdumitriu>\u00a0It means that 2.5 has one extra feature that's not present in the future versions, and it might prevent upgrades  \n11:47\u00a0<vmassol>\u00a0it doesn't mean this  \n11:47\u00a0<vmassol>\u00a0normally when we say fix for it means that version and all future  \n11:47\u00a0<vmassol>\u00a0but ok I'll fix this one  \n11:47\u00a0<@sdumitriu>\u00a0Future depends on a precise, known timeline  \n11:47\u00a0<vmassol>\u00a0ah no wait  \n11:47\u00a0<@sdumitriu>\u00a0Who knows 2.5.2 is after 2.7 but before 2.7.1?  \n11:48\u00a0<vmassol>\u00a0I need to fix this  \n11:48\u00a0<vmassol>\u00a0I've only merged in 2.7 I think  \n11:48\u00a0<@sdumitriu>\u00a0In theory 2.7 is later than any 2.5  \n11:48\u00a0<vmassol>\u00a0checking  \n11:48\u00a0<vmassol>\u00a0ah no  \n11:48\u00a0<vmassol>\u00a0only merged on 2.5  \n11:48\u00a0<vmassol>\u00a0(which ludovic requied)  \n11:49\u00a0<vmassol>\u00a0I could merge on the other branches if we want, just not usre  \n12:04\u00a0<jvelociter>\u00a0has quit  \n12:09\u00a0<abusenius>\u00a0has quit  \n13:04\u00a0<venkatesh>\u00a0has joined #xwiki  \n13:17\u00a0<jstoldt>\u00a0see you everyone! have a nice weekend :)  \n13:17\u00a0<jstoldt>\u00a0has quit  \n13:17\u00a0<mflorea>\u00a0has joined #xwiki  \n13:22\u00a0<venkatesh>\u00a0has quit  \n13:30\u00a0<vmassol>\u00a0interesting question for us that we haven't resolved: http://www.sonatype.com/people/2011/01/maven-tip-project-directories-and-artifact-ids/?utm\\_source=feedburner&utm\\_medium=twitter&utm\\_campaign=Feed%3A+sonatype+%28Sonatype+Blogs%29  \n13:31\u00a0<vmassol>\u00a0would be great to align on a rule  \n13:31\u00a0<vmassol>\u00a0guys I'd like to release the ircbot app, could I get some votes?  \n13:35\u00a0<venkatesh>\u00a0has joined #xwiki  \n13:35\u00a0<@sdumitriu>\u00a0Voted  \n13:35\u00a0<vmassol>\u00a0thanks  \n13:35\u00a0<vmassol>\u00a0I've commented on http://www.sonatype.com/people/2011/01/maven-tip-project-directories-and-artifact-ids  \n13:35\u00a0<@sdumitriu>\u00a0The mail server is a bit slow at the moment  \n13:41\u00a0<venkatesh>\u00a0has quit  \n13:58\u00a0<abusenius>\u00a0has joined #xwiki  \n14:01\u00a0<+sburjan>\u00a0vmassol: replied to the mail about QA. Did you manage to take a look at the patch ?  \n14:02\u00a0<vmassol>\u00a0mail is slow  \n14:16\u00a0<+sburjan>\u00a0so do you have time for the patch ?  \n14:16\u00a0<vmassol>\u00a0I've been workng on it for the past 30 minutes  \n14:16\u00a0<vmassol>\u00a0as you cannot see I've assigned the issue to myself  \n14:16\u00a0<vmassol>\u00a0so far it's not going well  \n14:16\u00a0<vmassol>\u00a0still trying to apply the patch  \n14:16\u00a0<vmassol>\u00a0(doesn't apply)  \n14:17\u00a0<vmassol>\u00a0possibly a pb with my IDE  \n14:19\u00a0<+sburjan>\u00a0vmassol: I can see now, but oddly I didn't got any mail saying you assigned it to yourself .. maybe the mail server issue  \n14:20\u00a0<vmassol>\u00a0ok applied manually for one file, looking at the content now  \n14:21\u00a0<+sburjan>\u00a0fingers crossed :)  \n14:22\u00a0<vmassol>\u00a0sburjan: is that \u00a0\u00a0\u00a0\u00a0public void testChangePasswordOfAnotherUserWithTwoDifferentPasswords()  \n14:22\u00a0<vmassol>\u00a0\u00a0a test?  \n14:22\u00a0<vmassol>\u00a0because in this case it's missing a @Test annotation  \n14:23\u00a0<vmassol>\u00a0also I see a commented out line : \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// changePasswordPage.changePassword(PASSWORD\\_1, PASSWORD\\_2);  \n14:23\u00a0<vmassol>\u00a0I'm not sure why it's needed  \n14:23\u00a0<+sburjan>\u00a0onesec  \n14:24\u00a0<+sburjan>\u00a01.yes, that is a test.. I forgot to put @Test  \n14:24\u00a0<ugupta>\u00a0has joined #xwiki  \n14:24\u00a0<vmassol>\u00a0why do you need so many lines to logout:  \n14:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// Logout  \n14:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0getUtil().setSession(null);  \n14:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0HomePage home = new HomePage();  \n14:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0home.gotoPage();  \n14:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Assert.assertFalse(home.isAuthenticated());  \n14:24\u00a0<vmassol>\u00a0it's expensive  \n14:25\u00a0<+sburjan>\u00a02. // changePasswordPage.changePassword(PASSWORD\\_1, PASSWORD\\_2) you can remove this.  \n14:25\u00a0<+sburjan>\u00a0vmassol: I saw that in another test, and I used it too  \n14:25\u00a0<vmassol>\u00a0you need to question everything you see  \n14:25\u00a0<vmassol>\u00a0you cannot copy  \n14:25\u00a0<vmassol>\u00a0that's plain wrong  \n14:25\u00a0<vmassol>\u00a0you need to understand everyhing you do  \n14:25\u00a0<+sburjan>\u00a0well I understand that code .. it makes sense to me  \n14:26\u00a0<vmassol>\u00a0why do you have to go to the home page to know you're logged out?  \n14:26\u00a0<+sburjan>\u00a0I didn't had a better solution for logging out  \n14:26\u00a0<vmassol>\u00a0also this code is not about testing the logout process  \n14:26\u00a0<vmassol>\u00a0we have tests for that already  \n14:27\u00a0<+sburjan>\u00a0yes, but that assert if true. you're right  \n14:27\u00a0<vmassol>\u00a0IMO getUtil().setSession(null); is enough.  \n14:28\u00a0<vmassol>\u00a0actually it's not even needed IMO  \n14:28\u00a0<vmassol>\u00a0when you log in with another user we could log out the ucrrent user  \n14:28\u00a0<vmassol>\u00a0checking code  \n14:29\u00a0<+sburjan>\u00a0yes, good idea. that would ease up some tests  \n14:29\u00a0<+sburjan>\u00a0so all logoff procedures will be made in the beginning of the login procedure  \n14:30\u00a0<ugupta>\u00a0has left #xwiki  \n14:30\u00a0<vmassol>\u00a0it may not even be needed  \n14:30\u00a0<vmassol>\u00a0testing  \n14:30\u00a0<+sburjan>\u00a0don't know exactly how xwiki's login/logoss mechanism works  \n14:30\u00a0<+sburjan>\u00a0\\*logoff  \n14:30\u00a0<+sburjan>\u00a0and I tried used things I've seen other tests use it  \n14:31\u00a0<@cjdelisle>\u00a0Logging in will switch users, if you need to prove that you can login as a guest then setSession(null) will do that.  \n14:31\u00a0<+sburjan>\u00a0so logging in as another user is enough ?  \n14:31\u00a0<@cjdelisle>\u00a0Correct  \n14:31\u00a0<+sburjan>\u00a0stored  \n14:32\u00a0<@cjdelisle>\u00a0Where setSession() and getSession() are most usefull is when you need to be guest then you need to be admin again right away.  \n14:32\u00a0<+sburjan>\u00a0also found a typo in TestUtils.java  \n14:32\u00a0<@cjdelisle>\u00a0only one?  \n14:32\u00a0<@cjdelisle>\u00a0;)  \n14:32\u00a0<+sburjan>\u00a0only one I've spotted ;)  \n14:33\u00a0<+sburjan>\u00a0I will fix that in a future patch  \n14:34\u00a0<vmassol>\u00a0cjdelisle: any reason why we don't have a better API for doing: getDriver().get(getUtil().getURLToLoginAs(userName, newPassword));? I'd imagine adding a loginAs(username, pwd)  \n14:34\u00a0<@cjdelisle>\u00a0I wanted to separate utils from the underlying driver.  \n14:34\u00a0<+sburjan>\u00a0+1 for that  \n14:35\u00a0<vmassol>\u00a0cjdelisle: but I see getDriver() in TestUtils  \n14:35\u00a0<@cjdelisle>\u00a0Indeed, I wasn't happy about adding it. I had to support older tests.  \n14:36\u00a0<vmassol>\u00a0IMO TestUtils is about action that are not related to the current page  \n14:36\u00a0<vmassol>\u00a0s/action/actions/  \n14:36\u00a0<vmassol>\u00a0but I don't see why we wouldn't use the driver in there  \n14:37\u00a0<vmassol>\u00a0(actions related to the current page should be in the page objects)  \n14:37\u00a0<@cjdelisle>\u00a0I have to look at the code again...  \n14:40\u00a0<+sburjan>\u00a0vmassol: also you can delete \"// input[@id='targetdoc']\" from CopyPage  \n14:40\u00a0<@cjdelisle>\u00a0I was against gotoPage() because it cannot be chained with other utility methods.  \n14:41\u00a0<vmassol>\u00a0cjdelisle: it's ok to have several api  \n16:48\u00a0<xwikibot>\u00a0has joined #xwiki  \n16:49\u00a0<sburjan>\u00a0has quit  \n16:52\u00a0<florinciu>\u00a0has quit  \n17:31\u00a0<mflorea>\u00a0has quit  \n17:43\u00a0<abusenius>\u00a0has quit  \n17:47\u00a0<florinciu>\u00a0has joined #xwiki  \n18:38\u00a0<vmassol>\u00a0has quit  \n19:04\u00a0<fmancinelli>\u00a0has quit  \n19:17\u00a0<evalica>\u00a0has quit  \n19:30\u00a0<Enygma`>\u00a0has quit  \n19:30\u00a0<npm\\_>\u00a0is now known as <npm>  \n19:32\u00a0<florinciu>\u00a0has quit  \n20:16\u00a0<fmancinelli>\u00a0has joined #xwiki  \n20:33\u00a0<lucaa>\u00a0has quit  \n21:05\u00a0<vmassol>\u00a0has joined #xwiki  \n21:32\u00a0<vmassol>\u00a0has quit  \n21:58\u00a0<fmancinelli>\u00a0has quit  \n\n"}