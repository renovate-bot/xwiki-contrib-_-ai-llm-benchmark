{"id": "dev:IRC.xwikiArchive20140704", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140704", "title": "IRC Archive for channel #xwiki on 04 July 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<nickless>\u00a0has quit  \n00:30\u00a0<OSIMasson>\u00a0has quit  \n00:31\u00a0<sburjan>\u00a0has quit  \n01:14\u00a0<sdumitriu1>\u00a0has quit  \n01:18\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n03:15\u00a0<xwikibot>\u00a0has joined #xwiki  \n04:29\u00a0<D-Spair>\u00a0has quit  \n04:32\u00a0<D-Spair>\u00a0has joined #xwiki  \n06:51\u00a0<mflorea>\u00a0has joined #xwiki  \n06:56\u00a0<msmeria>\u00a0has joined #xwiki  \n07:19\u00a0<polx>\u00a0has joined #xwiki  \n07:53\u00a0<vmassol>\u00a0has joined #xwiki  \n08:01\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n08:21\u00a0<sburjan>\u00a0has joined #xwiki  \n08:38\u00a0<woshilapin>\u00a0has joined #xwiki  \n08:39\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:50\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:53\u00a0<polx>\u00a0has quit  \n08:54\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:00\u00a0<vmassol>\u00a0yeah :)  \n09:00\u00a0<vmassol>\u00a0thanks gdelhumeau  \n09:01\u00a0<vmassol>\u00a0this cannot be set in the login.vm itslef?  \n09:02\u00a0<gdelhumeau>\u00a0unfortunaltly not  \n09:02\u00a0<cjd>\u00a0has joined #xwiki  \n09:02\u00a0<gdelhumeau>\u00a0that was my conclusion yesterday  \n09:02\u00a0<vmassol>\u00a0ok  \n09:03\u00a0<gdelhumeau>\u00a0or we should change how layoutvars.vm works  \n09:03\u00a0<gdelhumeau>\u00a0for example, we have:  \n09:03\u00a0<gdelhumeau>\u00a0#set($showLeftPanels = $xwiki.getSpacePreference(\"showLeftPanels\"))  \n09:03\u00a0<gdelhumeau>\u00a0so I'm not able to set a value di $showLeftPanels before  \n09:04\u00a0<gdelhumeau>\u00a0but we could do:  \n09:04\u00a0<vmassol>\u00a0sure  \n09:04\u00a0<gdelhumeau>\u00a0#if(!$showLeftPanels)  \n09:04\u00a0<vmassol>\u00a0but layoutvars.vm is the first vm called no?  \n09:04\u00a0<gdelhumeau>\u00a0\u00a0\u00a0#set($showLeftPanels = $xwiki.getSpacePreference(\"showLeftPanels\"))  \n09:04\u00a0<gdelhumeau>\u00a0#end  \n09:04\u00a0<vmassol>\u00a0it's supposed to be hte first called at least  \n09:04\u00a0<gdelhumeau>\u00a0it is called in startpage.vm, that I did not want to override  \n09:05\u00a0<vmassol>\u00a0I don't understand the problem of layoutvars.vm actually  \n09:05\u00a0<vmassol>\u00a0login.vm is called after n?  \n09:05\u00a0<vmassol>\u00a0s/n/no  \n09:05\u00a0<gdelhumeau>\u00a0no  \n09:05\u00a0<vmassol>\u00a0login.vm doesn't call laytouvars.vm?  \n09:05\u00a0<gdelhumeau>\u00a0login.vm calls startpage.vm that calls layoutvars.vm  \n09:05\u00a0<vmassol>\u00a0it does  \n09:06\u00a0<gdelhumeau>\u00a0startpage.vm is called in various places  \n09:06\u00a0<vmassol>\u00a0startpage displays the panels?  \n09:06\u00a0<vmassol>\u00a0what is the problem?  \n09:07\u00a0<vmassol>\u00a0apparently it's endpage.vm that displays the panels  \n09:07\u00a0<vmassol>\u00a0ah actually both  \n09:07\u00a0<vmassol>\u00a0indeed in startpage.vm I see:  \n09:07\u00a0<vmassol>\u00a0<div class=\"content#if($showLeftPanels == \"0\")hideleft#end#if($showRightPanels == \"0\")hideright#end\" id=\"contentcontainer\">  \n09:08\u00a0<vmassol>\u00a0ok so what you say makes sense to me  \n09:09\u00a0<vmassol>\u00a0the #if in layoutvars.vm for the panel variables with a message comment saying that this allows vms to override the value such as the login.vm for ex  \n09:11\u00a0<evalica>\u00a0has joined #xwiki  \n09:44\u00a0<polx>\u00a0has joined #xwiki  \n09:49\u00a0<vmassol>\u00a0tmortagne: good morning  \n09:50\u00a0<vmassol>\u00a0I'm retesting the upgrade with your latest chage  \n09:50\u00a0<vmassol>\u00a0(the home page app upgrade)  \n09:50\u00a0<vmassol>\u00a0I'm on the conflict screen ATM  \n09:50\u00a0<vmassol>\u00a0I'd like to understand what you meant in your email about the user viewing what will be merged  \n09:50\u00a0<vmassol>\u00a0let me show you what I see  \n09:51\u00a0<vmassol>\u00a0https://www.evernote.com/shard/s119/sh/d2dfcaa1-4269-4b45-b7bf-e8aee359e482/dd8c1197415d8eb614f8fdd12a6cfade  \n09:51\u00a0<vmassol>\u00a0as you can see it doesn't show anywhere what the title will become  \n09:52\u00a0<vmassol>\u00a0I haven't clicked yet so maybe the title won't have any issue in the merge but last time there was an issue\u2026  \n09:52\u00a0<vmassol>\u00a0let's see now )  \n09:53\u00a0<vmassol>\u00a0note: if I compare \"previous\" and \"merged\" I see the bad changes but I have to explicitly do this and the user will never do this\u2026  \n09:53\u00a0<vmassol>\u00a0https://www.evernote.com/shard/s119/sh/ad00681f-c51b-452b-9332-825fb71a67a6/7a131090d6a14a8e4a4acb49ac83401a  \n09:53\u00a0<vmassol>\u00a0actually the title looks ok here  \n09:53\u00a0<vmassol>\u00a0on this screenshot  \n09:55\u00a0<vmassol>\u00a0that's probably why  \n09:55\u00a0<vmassol>\u00a0it must have worked this time  \n09:55\u00a0<vmassol>\u00a0let's click!  \n09:55\u00a0<tmortagne>\u00a0vmassol: I tough it was clear that getting a diff between current and merged mean that you see what will happen when you click continue since by default if you click continue the merged version will be used  \n09:55\u00a0<vmassol>\u00a0yes it worked this time  \n09:55\u00a0<vmassol>\u00a0(for the title)  \n09:56\u00a0<vmassol>\u00a0and I confirm that the content is ok too  \n09:56\u00a0<vmassol>\u00a0so that's cool  \n09:56\u00a0<vmassol>\u00a0well almost cool  \n09:56\u00a0<tmortagne>\u00a0if you don't see anything in the diff then if means there is no diff  \n09:57\u00a0<vmassol>\u00a0ideally I would want the user to not see any conflict  \n09:57\u00a0<vmassol>\u00a0since I know how to handle it without conflict  \n09:57\u00a0<tmortagne>\u00a0you know, EM does not  \n09:57\u00a0<vmassol>\u00a0yes  \n09:57\u00a0<vmassol>\u00a0which is why I was asking for a way to override it  \n09:57\u00a0<vmassol>\u00a0(for the homepage app)  \n09:59\u00a0<tmortagne>\u00a0and where could the logic be ? it cannot be in the XAR itself since it not installed yet  \n09:59\u00a0<vmassol>\u00a0I can imagine 2 options  \n09:59\u00a0<vmassol>\u00a01) replace the merge algo when there's a conflict, ie execute some component with a hint corresponding to the page  \n10:00\u00a0<tmortagne>\u00a01) does not tell anything, again where the component with the logic would be ?  \n10:01\u00a0<vmassol>\u00a0in a jar that is a dependency of the XAR  \n10:01\u00a0<vmassol>\u00a0homepage.jar  \n10:01\u00a0<tmortagne>\u00a0so a jar installed during DW then  \n10:01\u00a0<vmassol>\u00a02) listen to some event before the merge happens and getting the 3 docs passed in the event with the ability to cancel the conflict algo  \n10:01\u00a0<vmassol>\u00a0yes  \n10:01\u00a0<tmortagne>\u00a0i.e. something you need PR to install  \n10:03\u00a0<vmassol>\u00a0all extensions requiring jars to install need PR, except if the dependent jar is already installed?  \n10:03\u00a0<tmortagne>\u00a0installing a JAR require PR  \n10:03\u00a0<vmassol>\u00a0asking because I put a lot of jar deps in all -ui modules  \n10:03\u00a0<polx>\u00a0has quit  \n10:03\u00a0<vmassol>\u00a0but I guess that works because these jars are usually already present  \n10:04\u00a0<vmassol>\u00a0in the XE WAR  \n10:04\u00a0<tmortagne>\u00a0or that the user has PR  \n10:04\u00a0<vmassol>\u00a0(for ex active installs)  \n10:04\u00a0<vmassol>\u00a0(or FAQ app)  \n10:04\u00a0<vmassol>\u00a0for active installs it'll require PR since it brings a new jar  \n10:05\u00a0<vmassol>\u00a0for FAQ it depends on jars but they are already in WEB-INF/lib  \n10:05\u00a0<tmortagne>\u00a0vmassol: all JAR required for XE are in the WAR right now so it's not really an issue for XE anyway  \n10:05\u00a0<vmassol>\u00a0tmortagne: that's why I' mentiong apps that are NOT bundled in XE ;)  \n10:05\u00a0<vmassol>\u00a0s/I' mentiong/I'm mentioning  \n10:06\u00a0<vmassol>\u00a0(active installs, FAQ)  \n10:06\u00a0<vmassol>\u00a0but ok I get it  \n10:06\u00a0<vmassol>\u00a0I always forget about this req  \n10:06\u00a0<vmassol>\u00a0it's something important to have in mind when coding an extension  \n10:07\u00a0<vmassol>\u00a0for ex if your extension requires an event listener  \n10:07\u00a0<vmassol>\u00a0you may want to use a wiki component instead of doing it in java just for this reason  \n10:07\u00a0<vmassol>\u00a0a bit of a pity  \n10:07\u00a0<tmortagne>\u00a0requiring less than PR for a JAR would be an important security issue since you can do anything in a JAR  \n10:07\u00a0<vmassol>\u00a0(if you want your extension installable in a farm)  \n10:07\u00a0<tmortagne>\u00a0you need PR for wiki component as well  \n10:07\u00a0<vmassol>\u00a0ah indeed :)  \n10:07\u00a0<tmortagne>\u00a0and for the same reason, you can do anyting in there  \n10:08\u00a0<vmassol>\u00a0ok for this use case we really need this app I've been wanting to have for a long time  \n10:08\u00a0<vmassol>\u00a0(the app Anca started coding at a hackathon)  \n10:08\u00a0<vmassol>\u00a0to allow users to easily write some scripts to execute in reponse to some known events  \n10:09\u00a0<vmassol>\u00a0or Denis's signed scripts....  \n10:10\u00a0<tmortagne>\u00a0signed script are not really going to help much for installing JARs, we will just use farm admin right instead of PR but the issue is pretty much the same  \n10:10\u00a0<vmassol>\u00a0well we shoul be able to trust jars signed by the xwiki dev team  \n10:10\u00a0<vmassol>\u00a0admin right is ok and expected  \n10:10\u00a0<tmortagne>\u00a0maybe but that's not part of signed SCRIPT feature  \n10:11\u00a0<tmortagne>\u00a0this is something else  \n10:11\u00a0<vmassol>\u00a0ok so back to my problem  \n10:11\u00a0<tmortagne>\u00a0farm admin right \u00a0is the same thing than PR in practice  \n10:11\u00a0<vmassol>\u00a0if I put a JAR then subwikis in a farm won't be able to install the home page app upgade  \n10:12\u00a0<tmortagne>\u00a0unless you put your jar in xE  \n10:12\u00a0<vmassol>\u00a0a farm admin has admin right but PR usually  \n10:12\u00a0<tmortagne>\u00a0XE  \n10:12\u00a0<vmassol>\u00a0yes but that's not very nice  \n10:12\u00a0<tmortagne>\u00a0XE WAR that is  \n10:12\u00a0<vmassol>\u00a0well  \n10:12\u00a0<vmassol>\u00a0it's bundled in XE  \n10:12\u00a0<tmortagne>\u00a0isn't all that part of XE ?  \n10:12\u00a0<vmassol>\u00a0so shouldn't be an issue  \n10:12\u00a0<vmassol>\u00a0yes  \n10:13\u00a0<tmortagne>\u00a0then is the same thany any other piece of XE  \n10:13\u00a0<Lyes1>\u00a0has joined #xwiki  \n10:13\u00a0<vmassol>\u00a0yes  \n10:13\u00a0<vmassol>\u00a0so let's assume this is ok  \n10:13\u00a0<vmassol>\u00a0is there are hook for me in the EM?  \n10:13\u00a0<vmassol>\u00a0to use my impl instead of the default one?  \n10:13\u00a0<vmassol>\u00a0s/are/any  \n10:14\u00a0<tmortagne>\u00a0as we already discussed no there is no special hook at this level right now  \n10:14\u00a0<vmassol>\u00a0ok then 2 questions  \n10:14\u00a0<vmassol>\u00a01) how hard would it be to add one using my page as hint for ex?  \n10:14\u00a0<vmassol>\u00a02) how complex would it be for me as a user to implement it?  \n10:16\u00a0<tmortagne>\u00a0the answer to both should be \"not very hard\"  \n10:17\u00a0<tmortagne>\u00a0actually there is an internal hack you could use to overwrite the merge implementation since it's itself in a component but it would not be very nice  \n10:20\u00a0<tmortagne>\u00a0the extension point just mean checking of a component \"merger\" exist for the document in org.xwiki.extension.xar.internal.handler.packager.DocumentMergeImporter#merge and do whatever you want in that component  \n10:21\u00a0<lucaa>\u00a0has joined #xwiki  \n10:24\u00a0<vmassol>\u00a0my question ATM is whether it's acceptable or not for the user to get this conflict when they upgrade to 6.2....  \n10:40\u00a0<tmortagne>\u00a0as long as the default behavior is Ok I guess it's ok  \n10:46\u00a0<vmassol>\u00a0ok I'll go for the easy way for now and improve later if need be  \n10:46\u00a0<vmassol>\u00a0would be nice to have the title issue \u00a0fixed in 6.2 though  \n10:46\u00a0<vmassol>\u00a0(title merge issue)  \n10:46\u00a0<tmortagne>\u00a0id not get much answers to the mail  \n10:47\u00a0<tmortagne>\u00a0\\*did  \n10:47\u00a0<vmassol>\u00a0yeah  \n10:47\u00a0<vmassol>\u00a0seems a bit too short for getting it in 6.1 wdyt?  \n10:47\u00a0<vmassol>\u00a0could be in a 6.1.1 if need be  \n10:47\u00a0<vmassol>\u00a0otherwise 6.2 seems good enough for me  \n10:48\u00a0<tmortagne>\u00a0I can do the change on Monday  \n10:48\u00a0<tmortagne>\u00a0(get enough time to wait for people against it)  \n10:50\u00a0<tmortagne>\u00a0it's not really a dangerous change, just potentially a bit annoying but there was not much use cases where there was a merge without any conflict so it probably won't give much more conflicts  \n11:07\u00a0<vmassol>\u00a0$datetool.systemTime  \n11:07\u00a0<vmassol>\u00a0so  \n11:13\u00a0<mflorea>\u00a0has quit  \n11:14\u00a0<mflorea>\u00a0has joined #xwiki  \n11:18\u00a0<Lyes1>\u00a0has quit  \n11:18\u00a0<Lyes1>\u00a0has joined #xwiki  \n11:35\u00a0<gdelhumeau>\u00a0has quit  \n12:52\u00a0<woshilapin>\u00a0has quit  \n13:05\u00a0<Slashman>\u00a0has joined #xwiki  \n13:36\u00a0<evalica>\u00a0has quit  \n13:58\u00a0<Enygma`>\u00a0has quit  \n13:59\u00a0<Enygma`>\u00a0has joined #xwiki  \n14:04\u00a0<Slashman>\u00a0has quit  \n14:05\u00a0<woshilapin>\u00a0has joined #xwiki  \n14:06\u00a0<Enygma`>\u00a0has quit  \n14:10\u00a0<Enygma`>\u00a0has joined #xwiki  \n14:13\u00a0<tmortagne>\u00a0has quit  \n14:17\u00a0<Slashman>\u00a0has joined #xwiki  \n14:23\u00a0<Enygma`>\u00a0has quit  \n14:38\u00a0<Enygma`>\u00a0has joined #xwiki  \n14:39\u00a0<tmortagne>\u00a0has joined #xwiki  \n15:08\u00a0<msmeria>\u00a0has quit  \n15:26\u00a0<xwikibot>\u00a0has joined #xwiki  \n15:29\u00a0<Enygma`>\u00a0has quit  \n15:29\u00a0<Enygma`>\u00a0has joined #xwiki  \n16:39\u00a0<Enygma`>\u00a0has quit  \n17:12\u00a0<lucaa1>\u00a0has joined #xwiki  \n17:13\u00a0<lucaa>\u00a0has quit  \n17:23\u00a0<mflorea>\u00a0has quit  \n17:26\u00a0<mflorea>\u00a0has joined #xwiki  \n17:41\u00a0<KermitTheFragger>\u00a0has quit  \n18:29\u00a0<nickless>\u00a0has joined #xwiki  \n18:31\u00a0<vmassol>\u00a0has quit  \n18:31\u00a0<vmassol>\u00a0has joined #xwiki  \n18:39\u00a0<lucaa1>\u00a0has quit  \n18:39\u00a0<lucaa>\u00a0has joined #xwiki  \n18:53\u00a0<mflorea>\u00a0has quit  \n19:28\u00a0<cjd>\u00a0has quit  \n19:36\u00a0<Lyes1>\u00a0has quit  \n19:40\u00a0<Pbas>\u00a0has quit  \n19:46\u00a0<vmassol>\u00a0has quit  \n20:00\u00a0<woshilapin>\u00a0has quit  \n20:02\u00a0<tmortagne>\u00a0has quit  \n20:11\u00a0<vmassol>\u00a0has joined #xwiki  \n20:11\u00a0<vmassol1>\u00a0has joined #xwiki  \n20:15\u00a0<vmassol>\u00a0has quit  \n20:17\u00a0<lucaa>\u00a0has quit  \n20:23\u00a0<Slashman>\u00a0has quit  \n21:30\u00a0<vmassol>\u00a0has joined #xwiki  \n22:01\u00a0<vmassol1>\u00a0has joined #xwiki  \n22:02\u00a0<vmassol>\u00a0has quit  \n22:07\u00a0<mflorea>\u00a0has joined #xwiki  \n22:22\u00a0<mflorea>\u00a0has quit  \n22:43\u00a0<Inge->\u00a0has quit  \n22:45\u00a0<Inge->\u00a0has joined #xwiki  \n23:42\u00a0<vmassol1>\u00a0has quit  \n23:44\u00a0<vmassol>\u00a0has joined #xwiki  \n23:45\u00a0<vmassol>\u00a0has quit  \n23:57\u00a0<polx>\u00a0has joined #xwiki\n"}