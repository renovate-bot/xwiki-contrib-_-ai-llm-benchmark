{"id": "dev:IRC.xwikiArchive20170221", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20170221", "title": "IRC Archive for channel #xwiki on 21 February 2017 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<xwikibot>\u00a0has joined #xwiki  \n09:45\u00a0<vmassol>\u00a0hi bot :)  \n09:49\u00a0<flyingpot\\_>\u00a0has joined #xwiki  \n09:51\u00a0<flyingpot>\u00a0has quit  \n09:52\u00a0<tmortagne>\u00a0gdelhumeau: Hi  \n09:52\u00a0<tmortagne>\u00a0where you able to find more information about AdministrationTest.testApplicationSection yesterday ?  \n09:55\u00a0<flyingpot\\_>\u00a0is now known as <flyingpot>  \n10:10\u00a0<vmassol>\u00a0tmortagne: FYI the bot issue was the the nickname was already in use  \n10:10\u00a0<tmortagne>\u00a0vmassol: so cloud ?  \n10:10\u00a0<tmortagne>\u00a0cluster  \n10:10\u00a0<vmassol>\u00a0but I don't know why. I fixed the error display (it was only showing the top level message)  \n10:11\u00a0<vmassol>\u00a0and when trying it again, after two tries it worked  \n10:11\u00a0<vmassol>\u00a0ah yes  \n10:11\u00a0<vmassol>\u00a0maybe I was hitting the wrong node  \n10:11\u00a0<vmassol>\u00a0since it's only enable on one node  \n10:12\u00a0<tmortagne>\u00a0we need to allocate time to work on cluster limitations on scheduler etc  \n10:12\u00a0<vmassol>\u00a0if you force node2 you see that the irc command center is not there (I removed it): http://dev.xwikiorg-node2.xwikisas.com/xwiki/bin/view/IRC/WebHome  \n10:13\u00a0<vmassol>\u00a0actually it's there  \n10:13\u00a0<vmassol>\u00a0but not displayed  \n10:13\u00a0<flyingpot>\u00a0has quit  \n10:13\u00a0<vmassol>\u00a0strange  \n10:13\u00a0<vmassol>\u00a0I thgouht I had removed the IRC bot jar  \n10:13\u00a0<vmassol>\u00a0http://dev.xwikiorg-node2.xwikisas.com/xwiki/bin/view/IRC/IRCBot  \n10:14\u00a0<tmortagne>\u00a0yes, the jar  \n10:14\u00a0<vmassol>\u00a0testing someting  \n10:14\u00a0<tmortagne>\u00a0but the XAR is still there  \n10:14\u00a0<vmassol>\u00a0the script sercices shouldn't be there  \n10:15\u00a0<vmassol>\u00a0but it's there  \n10:15\u00a0<vmassol>\u00a0ssh-ing...  \n10:16\u00a0<tmortagne>\u00a0the last thing I remember is that you kept both node considering that one would fail which was not a big issue but I did not followed very closely  \n10:16\u00a0<vmassol>\u00a0yeah maybe I don't remember  \n10:17\u00a0<vmassol>\u00a0btw we have some pret'ty old extension versions still lying in the local extension repo ;)  \n10:17\u00a0<vmassol>\u00a0xwiki-data/extension/repository/org.xwiki.platform%3Axwiki-platform-ircbot-api:  \n10:17\u00a0<vmassol>\u00a04.3 \u00a04.5.2 \u00a05.1  \n10:17\u00a0<vmassol>\u00a0this was when the bot was in platform  \n10:19\u00a0<tmortagne>\u00a0you can use extension tweak to clean it if you want  \n10:19\u00a0<vmassol>\u00a0ok good to know  \n10:21\u00a0<gdelhumeau>\u00a0tmortagne: unfortunatly no, I did not manage to run this test correctly on my machine  \n10:23\u00a0<vmassol>\u00a0gdelhumeau: we're waiting for this for the release so if you stopped working on it you should say it ASAP so that someone else picks it up!  \n10:23\u00a0<vmassol>\u00a0are you still trying?  \n10:24\u00a0<gdelhumeau>\u00a0yes  \n10:24\u00a0<vmassol>\u00a0ok cool  \n10:28\u00a0<gdelhumeau>\u00a0tmortagne: on the last snapshot, I have plenty of \"10:26:07.245 [Exec Stream Pumper] ERROR o.x.t.i.XWikiLogOutputStream - java.lang.NoSuchMethodException: com.xpn.xwiki.XWiki.getNotificationManager()\"  \n10:29\u00a0<gdelhumeau>\u00a0at least on what xwiki-enterprise-test-selenium download and executes  \n10:30\u00a0<tmortagne>\u00a0gdelhumeau: I don't have any XWiki.getNotificationManager when I look at XWiki either  \n10:31\u00a0<tmortagne>\u00a0ha it's probably a legacy thing  \n10:31\u00a0<tmortagne>\u00a0XE was not build with legacy jars and I fixed that yesterday  \n10:31\u00a0<tmortagne>\u00a0s/build/built/  \n10:32\u00a0<flyingpot>\u00a0has joined #xwiki  \n10:32\u00a0<tmortagne>\u00a0yes I can see it in legacy oldcore  \n10:33\u00a0<tmortagne>\u00a0I'm surprise we use this very old thing in selenium test  \n10:33\u00a0<tmortagne>\u00a0(this is the pre ObservationManager event system)  \n10:34\u00a0<tmortagne>\u00a0if you find what is using it you should probably report a jira issue so that we fix it  \n10:36\u00a0<flyingpot>\u00a0has quit  \n10:42\u00a0<gdelhumeau>\u00a0tmortagne: for the test, AFAICS, the url /xwiki/bin/delete/XWiki/SearchAdmin?form\\_token=BeltJqm1ilDx5tU9cEZ1Jw&confirm=1 does not load  \n10:43\u00a0<gdelhumeau>\u00a0so actually when there is a form token AND confirm = 1 XWIki does not load the page  \n10:44\u00a0<tmortagne>\u00a0I don't understand, isn't what you are supposed to have a token and confirm when you delete something ?  \n10:44\u00a0<gdelhumeau>\u00a0all I say is that if I try to open that URL, it loads forever  \n10:45\u00a0<tmortagne>\u00a0this URL looks ok to me  \n10:45\u00a0<gdelhumeau>\u00a0open it: http://localhost:8080/xwiki/bin/delete/XWiki/SearchAdmin?confirm=1&form\\_token=BeltJqm1ilDx5tU9cEZ1Jw  \n10:45\u00a0<tmortagne>\u00a0delete is supposed to require a form token and you used to have to confirm the delete so form token plus confirl  \n10:45\u00a0<gdelhumeau>\u00a0maybe change the form token to match yours  \n10:48\u00a0<tmortagne>\u00a0gdelhumeau: I'm not sure what is your question if any ? :) I did not work on delete action recently so no idea why it does not work anymore  \n10:48\u00a0<tmortagne>\u00a0but clearly I don't see anything wrong in this URL and it used to work if the test use it  \n10:54\u00a0<gdelhumeau>\u00a0all I say is if you try to open this url, you cannot  \n10:54\u00a0<gdelhumeau>\u00a0now I'm digging to see why  \n10:57\u00a0<tmortagne>\u00a0gdelhumeau: what I don't understand is that you never got an URL like this in your tests ? we don't confirm the delete anymore ?  \n10:59\u00a0<gdelhumeau>\u00a0when I did my tests, I used the standard UI, so the confirmation was sent via POST I suppose  \n10:59\u00a0<gdelhumeau>\u00a0so I did not seen it  \n10:59\u00a0<gdelhumeau>\u00a0and I did not change anything there  \n10:59\u00a0<tmortagne>\u00a0that would be a change then since I seen many times the confirm in the URL in the past  \n11:00\u00a0<gdelhumeau>\u00a0from what I see a delete job is started  \n11:00\u00a0<gdelhumeau>\u00a0and because of the job group path it may never really execute  \n11:01\u00a0<tmortagne>\u00a0when I look at the html in 8.4.4 I see  \n11:01\u00a0<tmortagne>\u00a0<div class=\"hidden\">  \n11:01\u00a0<tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0<input name=\"async\" value=\"true\" type=\"hidden\">  \n11:01\u00a0<tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</div>  \n11:01\u00a0<gdelhumeau>\u00a0ok we are locked here: deleteJob.join();  \n11:01\u00a0<tmortagne>\u00a0so it seems having both form\\_token and confirm was still there in 8.4.4 at least  \n11:02\u00a0<gdelhumeau>\u00a0because async=true is not there  \n11:02\u00a0<gdelhumeau>\u00a0but anyway, it should execute on the fly  \n11:02\u00a0<gdelhumeau>\u00a0even if not async  \n11:03\u00a0<tmortagne>\u00a0yes it should be almost instant to delete that page  \n11:04\u00a0<tmortagne>\u00a0gdelhumeau: maybe the job is still set to interactive even when async=false  \n11:04\u00a0<tmortagne>\u00a0and it's stuck on the new question  \n11:06\u00a0<tmortagne>\u00a0yep that's it  \n11:07\u00a0<tmortagne>\u00a0request.setInteractive(true); is always called no matter what  \n11:09\u00a0<tmortagne>\u00a0you added it in XWIKI-13954 but did not take into account the use case async=false  \n11:09\u00a0<gdelhumeau>\u00a0I see  \n11:09\u00a0<tmortagne>\u00a0we probably need a dedicated test  \n11:10\u00a0<tmortagne>\u00a0by the way having DeleteAction use a script service is not very nice...  \n11:10\u00a0<tmortagne>\u00a0just discovered this  \n11:10\u00a0<tmortagne>\u00a0(yes it's not you)  \n11:10\u00a0<gdelhumeau>\u00a0seeing it too  \n11:11\u00a0<gdelhumeau>\u00a0so there is no way to set interactive to false with the script services  \n11:11\u00a0<tmortagne>\u00a0yes which is not very nice either  \n11:11\u00a0<tmortagne>\u00a0well  \n11:11\u00a0<tmortagne>\u00a0yes I think there is actually  \n11:11\u00a0<gdelhumeau>\u00a0so the quick fix is to improve the SS  \n11:11\u00a0<tmortagne>\u00a0checking  \n11:11\u00a0<tmortagne>\u00a0yes it's working like EM SS  \n11:12\u00a0<gdelhumeau>\u00a0yes we can  \n11:12\u00a0<gdelhumeau>\u00a0we can call createDeleteRequest() instead  \n11:12\u00a0<tmortagne>\u00a0in your script you can use createDeleteRequest and then modify the request  \n11:12\u00a0<gdelhumeau>\u00a0indeed  \n11:12\u00a0<tmortagne>\u00a0but it would be better to not use the SS in DeleteAction IMO  \n11:12\u00a0<tmortagne>\u00a0to avoid surprises we tough would be nicer default for scripts  \n11:13\u00a0<gdelhumeau>\u00a0I don't know if it's good to have interactive by default anyway  \n11:13\u00a0<gdelhumeau>\u00a0of course it make sense in our UI  \n11:13\u00a0<gdelhumeau>\u00a0but for a script, it could be a problem  \n11:15\u00a0<tmortagne>\u00a0right now it's probably a regression  \n11:16\u00a0<tmortagne>\u00a0any script that was using this API will probably end up stuck  \n11:16\u00a0<gdelhumeau>\u00a0exactly  \n11:16\u00a0<tmortagne>\u00a0it ask for a confirmation even when there is no issue ?  \n11:16\u00a0<gdelhumeau>\u00a0so we should set interactive = false by default and change the UI to set interactive to true  \n11:16\u00a0<tmortagne>\u00a0known issue  \n11:17\u00a0<gdelhumeau>\u00a0my checker? no  \n11:17\u00a0<tmortagne>\u00a0ha this page is part of an extension  \n11:17\u00a0<gdelhumeau>\u00a0but XWiki.SearchAdmin is probably an extension page  \n11:17\u00a0<tmortagne>\u00a0\"change the UI\" you means the action ?  \n11:17\u00a0<tmortagne>\u00a0s/means/mean/  \n11:18\u00a0<gdelhumeau>\u00a0whatever the UI uses to create the delete job, it might be the action indeed  \n11:18\u00a0<tmortagne>\u00a0we already have a parameter async set by the UI so IMO we should set interactive based on this async parameter  \n11:18\u00a0<gdelhumeau>\u00a0https://github.com/xwiki/xwiki-platform/blob/af22d4f867a9cf2ae295a770d37cda5a85633dbe/xwiki-platform-core/xwiki-platform-refactoring/xwiki-platform-refactoring-api/src/main/java/org/xwiki/refactoring/script/RefactoringScriptService.java#L211-L211  \n11:18\u00a0<gdelhumeau>\u00a0yes  \n11:22\u00a0<flyingpot>\u00a0has joined #xwiki  \n11:24\u00a0<gdelhumeau>\u00a0so, my plan:  \n11:24\u00a0<gdelhumeau>\u00a01 - Make the script services do setInteractive(false)  \n11:25\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:25\u00a0<gdelhumeau>\u00a02 - Make the delete action do setInteractive() according to the async parameter  \n11:26\u00a0<gdelhumeau>\u00a0and that's all  \n11:26\u00a0<evalica>\u00a0has joined #xwiki  \n11:26\u00a0<gdelhumeau>\u00a0in the future: make DeleteAction not using the script services  \n11:26\u00a0<gdelhumeau>\u00a0tmortagne: are you ok with that?  \n11:27\u00a0<tmortagne>\u00a0sure  \n11:27\u00a0<tmortagne>\u00a0note that for 1 you just need to remove the line you added  \n11:27\u00a0<tmortagne>\u00a0interactive is false by default in job request  \n11:28\u00a0<flyingpot\\_>\u00a0has joined #xwiki  \n11:31\u00a0<flyingpot>\u00a0has quit  \n11:32\u00a0<M-vmassol>\u00a0has joined #xwiki  \n11:32\u00a0<M-vmassol>\u00a0hi gdelhumeau  \n11:32\u00a0<M-vmassol>\u00a0I'm on riot.im now  \n11:34\u00a0<M-vmassol>\u00a0I'm using the webapp but will try the mac desktop app to see how good it is  \n11:37\u00a0<gdelhumeau\\_[m]>\u00a0has joined #xwiki  \n11:38\u00a0<vmassol>\u00a0has quit  \n11:42\u00a0<M-vmassol>\u00a0ok I'm using the desktop app now ;)  \n11:57\u00a0<tmortagne>\u00a0M-vmassol: not a big fan for this forced \"M-\" user id prefix  \n11:57\u00a0<M-vmassol>\u00a0it can be changed, I'm trying to do it  \n11:57\u00a0<M-vmassol>\u00a0@appservice-irc:matrix.org  \n11:58\u00a0<M-vmassol>\u00a0you need to talk to this bit  \n11:58\u00a0<M-vmassol>\u00a0\\*bot  \n11:58\u00a0<M-vmassol>\u00a0see https://solson.me/2016/10/08/irccloud-to-matrix.html  \n11:58\u00a0<M-vmassol>\u00a0is now known as <vmassol>  \n11:59\u00a0<vmassol>\u00a0any better now? :)  \n11:59\u00a0<tmortagne[m]>\u00a0has joined #xwiki  \n12:00\u00a0<vmassol>\u00a0the only issue I know is the nickserv for freenode  \n12:00\u00a0<tmortagne[m]>\u00a0actually I had a warning right in the desktop client to enable the bridge  \n12:01\u00a0<tmortagne[m]>\u00a0is now known as <tmortagne[m]1>  \n12:01\u00a0<tmortagne>\u00a0has quit  \n12:02\u00a0<tmortagne[m]1>\u00a0is now known as <tmortagne>  \n12:05\u00a0<tmortagne>\u00a0so indeed no support of NickServ and plan to support it it seems  \n12:05\u00a0<tmortagne>\u00a0so indeed no support of NickServ and no plan to support it it seems  \n12:07\u00a0<tmortagne1>\u00a0has joined #xwiki  \n12:07\u00a0<tmortagne1>\u00a0has quit  \n12:12\u00a0<vmassol>\u00a0btw I had forgotten that we also log everything on this channel on https://botbot.me/freenode/xwiki/  \n12:12\u00a0<vmassol>\u00a0so even when our bot was down we can still get the messages of what happened ;)  \n12:13\u00a0<tmortagne>\u00a0it's even written in the chat header and I missed it  \n12:15\u00a0<tmortagne>\u00a0NickServ seems to remember riot for a while (I restarted riot and did not had to reset it again), let's try it for a while  \n12:16\u00a0<tmortagne>\u00a0Pidgin project is as good as dead so I needed to find an alternative anyway  \n12:17\u00a0<tmortagne>\u00a0gdelhumeau: they have a Linux desktop and a Debian repository  \n12:17\u00a0<tmortagne>\u00a0(I'm on it right now)  \n12:18\u00a0<gdelhumeau\\_[m]>\u00a0still using hexchat on my side  \n12:18\u00a0<gdelhumeau\\_[m]>\u00a0I've tried pidgin a bit but I did not get used to  \n12:18\u00a0<tmortagne>\u00a0hmm you can edit your message, i guess it double it for other IRC clients  \n12:19\u00a0<tmortagne>\u00a0I was using pidgin mostly because of other chat accounts and get used to it with some plugins  \n12:19\u00a0<tmortagne>\u00a0but in the end XWiki chat was the only thing left  \n12:19\u00a0<Enygma[m]>\u00a0has joined #xwiki  \n12:19\u00a0<tmortagne>\u00a0(gtalk dead, msn dead, etc.)  \n12:22\u00a0<vmassol>\u00a0yes you had a message doubled before - I was wondering why :)  \n12:22\u00a0<tmortagne>\u00a0yes that was it  \n12:22\u00a0<vmassol>\u00a0yes you had a message doubled before - I was wondering why :) - Doubled message!  \n12:22\u00a0<tmortagne>\u00a0I will need to refrain from clicking up arrow key, won't be easy  \n12:22\u00a0<vmassol>\u00a0:)  \n12:24\u00a0<flyingpot>\u00a0has joined #xwiki  \n12:26\u00a0<flyingpot\\_>\u00a0has quit  \n12:28\u00a0<flyingpot>\u00a0has quit  \n12:30\u00a0<flyingpot>\u00a0has joined #xwiki  \n13:00\u00a0<Enygma`>\u00a0has quit  \n13:03\u00a0<vmassol>\u00a0cjd: are you the owner of the #xwiki channel on matrix?  \n13:03\u00a0<vmassol>\u00a0I wanted to make some settings change but it's readonly for me  \n13:05\u00a0<Slashman>\u00a0has joined #xwiki  \n13:07\u00a0<Enygma[m]>\u00a0is now known as <Enygma`>  \n13:21\u00a0<tmortagne>\u00a0so, waiting for a complete build with the fix gdelhumeau committed and we should be ready for the release  \n13:34\u00a0<tmortagne>\u00a0gdelhumeau: don't forget to document XWIKI-12917  \n13:52\u00a0<vmassol>\u00a0FYI I'm starting to work on https://jira.xwiki.org/browse/XWIKI-14021 it shouldn't be too long to fix it  \n13:57\u00a0<tmortagne>\u00a0vmassol: it should just be about copy/pasting what I indicated or close  \n13:57\u00a0<vmassol>\u00a0yes close  \n13:58\u00a0<vmassol>\u00a0;)  \n13:58\u00a0<vmassol>\u00a0but that's not what takes time  \n13:58\u00a0<vmassol>\u00a0right now I've added a func test and verifying that it fails  \n13:58\u00a0<vmassol>\u00a0then I'll fix it and verify it passes  \n13:59\u00a0<vmassol>\u00a0and ofc the build of mail fails right now  \n13:59\u00a0<vmassol>\u00a0on master: https://gist.github.com/vmassol/a0c1f580ad2be2c78b7ddf44a0b0b1bb  \n13:59\u00a0<vmassol>\u00a0could you check that?  \n14:01\u00a0<flyingpot>\u00a0has quit  \n14:02\u00a0<tmortagne>\u00a0master build well on jenkins  \n14:05\u00a0<M-cjd>\u00a0vmassol: this channel is special because it is bridged to IRC, so the \"owner\" is the matrix project and everyone (you and me) have the same level of permissions (not too many)  \n14:06\u00a0<vmassol>\u00a0cjd:  \n14:06\u00a0<vmassol>\u00a0specifically I was triyng to change who view the history for ex  \n14:06\u00a0<M-cjd>\u00a0Yes, we don't have permission on this  \n14:06\u00a0<vmassol>\u00a0ok so this is sometihing that's matri specific andnot IRC specific right?  \n14:07\u00a0<vmassol>\u00a0\\*matrix  \n14:07\u00a0<vmassol>\u00a0which explains why it's read only  \n14:07\u00a0<vmassol>\u00a0which would explains why it's read only  \n14:11\u00a0<M-cjd>\u00a0It's specific to the special matrix channels which are bridged (by the matrix project) to IRC channels  \n14:12\u00a0<tmortagne>\u00a0vmassol: according to the error you are building with an old version of the platform root pom, at least 3 days old  \n14:16\u00a0<vmassol>\u00a0hmmm indeed I pulled enteprrise and but forgot platform, sorry  \n14:24\u00a0<evalica[m]>\u00a0has joined #xwiki  \n14:30\u00a0<Enygma`>\u00a0but if we were using our own matrix server, I guess we could control this, right cjd?  \n14:30\u00a0<Enygma`>\u00a0since, AFAICT, riot is ultimately just a web client  \n14:30\u00a0<M-cjd>\u00a0yes, this is something we would like to be able to do in the future  \n14:31\u00a0<M-cjd>\u00a0yes, even the officially hosted riot.im on their own website can be told to connect to our matrix server instead of theirs  \n14:31\u00a0<tmortagne>\u00a0yes the first thing riot ask is the server where you want to go  \n14:35\u00a0<vmassol>\u00a0tmortagne: in the end what's taking the most time is fixing the existing unit tests ;)  \n14:36\u00a0<tmortagne>\u00a0starting the release  \n14:41\u00a0<vmassol>\u00a0tmortagne: I made a mistake  \n14:41\u00a0<vmassol>\u00a0I pushed on master  \n14:41\u00a0<vmassol>\u00a0I thought you were on a branch already  \n14:41\u00a0<vmassol>\u00a0but just realized you're releaseing 9.1RC1 from master  \n14:42\u00a0<vmassol>\u00a0let me revert quickly  \n14:43\u00a0<tmortagne>\u00a0vmassol: if it's platform you have some time  \n14:58\u00a0<flyingpot>\u00a0has joined #xwiki  \n15:02\u00a0<flyingpot>\u00a0has quit  \n15:18\u00a0<vmassol>\u00a0FYI I'm working with Caty to update the playgroun and I'm going to delete it and recreate it  \n15:40\u00a0<vmassol>\u00a0errors while recreating playground https://gist.github.com/vmassol/13813e8670b7f3c0484e12d8c43119ed  \n15:51\u00a0<simfir>\u00a0has quit  \n15:52\u00a0<simfir>\u00a0has joined #xwiki  \n15:53\u00a0<tmortagne>\u00a0great \"There are still some remaining snapshot dependencies.\"...  \n15:57\u00a0<vmassol>\u00a0done I've tweeted the upgrade of playground: https://twitter.com/xwikiorg/status/834054218591899648  \n15:59\u00a0<acotiuga>\u00a0has left #xwiki  \n16:08\u00a0<vmassol>\u00a0tmortagne: let me know when I can commit on master  \n16:08\u00a0<vmassol>\u00a0(platform master)  \n16:17\u00a0<vmassol>\u00a0since I saw some commit on enterprise I'll assume that platform master is ok and I'm going to commit  \n16:29\u00a0<tmortagne>\u00a09.1-rc-1 maven/git release is done, you can resume being mean to Jenkins  \n16:40\u00a0<vmassol>\u00a0tmortagne: can I upgrade the jenkins plugins now or do you still need the ci?  \n16:40\u00a0<msmeria>\u00a0has quit  \n16:40\u00a0<tmortagne>\u00a0don't need ci  \n16:40\u00a0<vmassol>\u00a0k  \n16:46\u00a0<sorinello>\u00a0has quit  \n16:46\u00a0<flyingpot>\u00a0has joined #xwiki  \n16:47\u00a0<sorinello>\u00a0has joined #xwiki  \n16:51\u00a0<flyingpot>\u00a0has quit  \n16:52\u00a0<vmassol>\u00a0guys why is this in the user sectoin: \"On the same wiki, 2 refactoring jobs can now run in parallel if the path of the entities that are being modified (moved, renamed or deleted) do not overlap. For example: a job concerning A.B.C can run in parallel with a job concerning A.B.Z or E.F.G but not with a job concerning A.B.C.D or A.B\" ?  \n16:52\u00a0<vmassol>\u00a0(on http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/Data/XWiki/9.1RC1)  \n16:53\u00a0<gdelhumeau>\u00a0because any user can refactor a page  \n16:53\u00a0<gdelhumeau>\u00a0page I agree it's technical  \n16:53\u00a0<gdelhumeau>\u00a0-page +but  \n16:54\u00a0<tmortagne>\u00a0users were stuck waiting for something hapenning on another space or wiki, they are not stuck anymore  \n16:54\u00a0<vmassol>\u00a0ok so it should be rephrases from a user pov  \n16:55\u00a0<vmassol>\u00a0\\*rephrased  \n16:55\u00a0<vmassol>\u00a0do we have examples of things that were happening before?  \n16:55\u00a0<vmassol>\u00a0(precise examples that is)  \n16:56\u00a0<vmassol>\u00a0I don't remember seeing the issue  \n16:57\u00a0<tmortagne>\u00a0because you were lucky that nobody was doing a long delete or rename of a big space  \n16:57\u00a0<vmassol>\u00a0also you said \"users were stuck waiting for something hapenning on another space or wiki, they are not stuck anymore\" but in the description I pasted it says \"\"On the same wiki,\". Is it only on the same wiki only or not?  \n16:57\u00a0<tmortagne>\u00a0I was giving you an example, Guillaume detailed the technical criteria  \n16:58\u00a0<vmassol>\u00a0so you can still be stuck when jobs are running on various wikis?  \n16:58\u00a0<tmortagne>\u00a0all the referactoring jobs used to be executed in the same thread  \n16:58\u00a0<tmortagne>\u00a0it's not the case anymore  \n16:58\u00a0<vmassol>\u00a0each job has its thread?  \n16:59\u00a0<tmortagne>\u00a0you will be stuck only if another refactoring affect common pages  \n16:59\u00a0<tmortagne>\u00a0same logic as extensions jobs  \n16:59\u00a0<Enygma`>\u00a0uuu, does this mean we can now merge https://jira.xwiki.org/browse/XWIKI-12911 ?  \n17:00\u00a0<vmassol>\u00a0(note to self: improve the irc bot to not display a JIRA link when the URL is already mentioned)  \n17:00\u00a0<tmortagne>\u00a0(the bot also provide the description)  \n17:02\u00a0<tmortagne>\u00a0in riot this produce a lot of links :)  \n17:04\u00a0<Enygma`>\u00a0hint for riot: disable link previews  \n17:05\u00a0<tmortagne>\u00a0well link previous are nice in other use case :)  \n17:05\u00a0<tmortagne>\u00a0s/previous/preview/  \n17:05\u00a0<Enygma`>\u00a0you can disable them at a chat room level  \n17:05\u00a0<Enygma`>\u00a0since for this chat, they become a pain  \n17:05\u00a0<Enygma`>\u00a0what I did  \n17:06\u00a0<vmassol>\u00a0cool you can disable at user level  \n17:07\u00a0<tmortagne>\u00a0how do you do that at user level ?  \n17:07\u00a0<tmortagne>\u00a0I don't see much options in the use profile  \n17:07\u00a0<Enygma`>\u00a0right of the chat title, there is a settings button (cog)  \n17:08\u00a0<Enygma`>\u00a0look for URL Previews  \n17:08\u00a0<vmassol>\u00a0yep and then you click on the \"enabled\" or \"disabled\" link  \n17:08\u00a0<vmassol>\u00a0and it goes to your profile  \n17:08\u00a0<vmassol>\u00a0you can also click on settings in bottom left  \n17:08\u00a0<vmassol>\u00a0corner of the screeb  \n17:09\u00a0<vmassol>\u00a0\\*screen  \n17:09\u00a0<vmassol>\u00a0it's called \"Disable inline URL previews by default\"  \n17:09\u00a0<Enygma`>\u00a0did not notice that one  \n17:09\u00a0<tmortagne>\u00a0ok that's not what I call \"at user level\"  \n17:09\u00a0<Enygma`>\u00a0weird that they use different names  \n17:09\u00a0<vmassol>\u00a0it is as user level  \n17:09\u00a0<tmortagne>\u00a0I tough you mean it could be disabled for ircbot  \n17:10\u00a0<vmassol>\u00a0ah no this isn't possibe since it's a setting for those receiving  \n17:11\u00a0<tmortagne>\u00a0yes me disabling it for message I receive from ircbot  \n17:11\u00a0<tmortagne>\u00a0like I can disable for the chat  \n17:11\u00a0<vmassol>\u00a0anyway much nicer now for me, no more duplicates, I'm happy ;)  \n17:11\u00a0<Enygma`>\u00a0Cool, you also have per-line permalink: https://riot.im/app/#/room/!RQRBwwetFpSGZARzGv:matrix.org/$14876931602024683Vcfbb:matrix.org  \n17:11\u00a0<Enygma`>\u00a0though a bit cumbersome to use  \n17:12\u00a0<vmassol>\u00a0yep just noticed it too  \n17:15\u00a0<Dravere>\u00a0has joined #xwiki  \n17:17\u00a0<Dravere>\u00a0Hello everyone! For some reasons the watchlist application isn't showing up for the users to use. It is installed but the little bell to watch a page isn't displayed anywhere. Does anyone have an idea where I should start searching to fix this problem?  \n17:19\u00a0<Enygma`>\u00a0Hi Dravere. What XWiki version are you using?  \n17:20\u00a0<Dravere>\u00a08.4.4  \n17:22\u00a0<Enygma`>\u00a0have you upgraded from a previous version or are you using a custom skin?  \n17:22\u00a0<Dravere>\u00a0We have upgraded several times. Not quite sure when it stopped working. No custom skin is used.  \n17:23\u00a0<vmassol>\u00a0Dravere: you cleared your browser cache? (just in case)  \n17:24\u00a0<Dravere>\u00a0Yes, cache is cleared when closed. Also tried with different browsers and different users. Some with admin rights and some without.  \n17:25\u00a0<vmassol>\u00a0this menu entry is added through an extension point  \n17:25\u00a0<vmassol>\u00a0maybe you're missing the page, let me check where this is done  \n17:26\u00a0<tmortagne>\u00a0Dravere: no error in the log at startup ? like a page complaining it does not have enough right to be registered  \n17:26\u00a0<vmassol>\u00a0FYI this is the extension point: http://platform.xwiki.org/xwiki/bin/view/ExtensionPoint/TopMenuRight  \n17:26\u00a0<Dravere>\u00a0Which log? I always struggle with the logs in XWiki  \n17:26\u00a0<vmassol>\u00a0however the doc doesn't mention which page implements it but a search will find it  \n17:26\u00a0<Enygma`>\u00a0Dravere: try looking at the page XWiki/Notifications/Code/NotificationsMenuUIX if it has Programming Rights (i.e. if the last author is an admin with PR)  \n17:27\u00a0<tmortagne>\u00a0Enygma: you sure PR is required ? shouldn't it be admin ?  \n17:28\u00a0<tmortagne>\u00a0PR is usually for page registered at farm level  \n17:28\u00a0<vmassol>\u00a0indeed it's NotificationsMenuUIX which itself defines another uixp  \n17:28\u00a0<Dravere>\u00a0Enygma` I think your on to something. The page isn't owned by an administrator but a person without the necessary rights  \n17:28\u00a0<vmassol>\u00a0'org.xwiki.platform.notifications'  \n17:28\u00a0<Enygma`>\u00a0admin might be enough as well, not sure  \n17:28\u00a0<tmortagne>\u00a0that should produce a warning in the log at startup  \n17:29\u00a0<Dravere>\u00a0What is the safest way to change the page owner?  \n17:29\u00a0<Dravere>\u00a0Simply edit and save?  \n17:29\u00a0<Enygma`>\u00a0if that is so, you might have more problems along the way, if that user is the last author of more important documents (i.e. if he did some upgrades)  \n17:30\u00a0<Enygma`>\u00a0for this case, where only the admin right is needed, yes, a simple save should be enough  \n17:31\u00a0<KermitTheFragger>\u00a0has quit  \n17:31\u00a0<Enygma`>\u00a0for content author, you would have to include an actual content change (i.e. add a space in the document's content, save, remove it, save again)... a bit more cumbersome there  \n17:32\u00a0<Enygma`>\u00a0You might also want to look at http://extensions.xwiki.org/xwiki/bin/view/Extension/List+Deleted+Content+Author+Users in case you have deleted users that are still content authors and http://extensions.xwiki.org/xwiki/bin/view/Extension/Change+Content+Author to help you change the author in bulk for certain users that you are sure they should not be authors of anything anymore.  \n17:36\u00a0<Dravere>\u00a0Hmmm, seems the person owns several pages that they shouldn't. Changing the ownership of that one page didn't fix the problem yet.  \n17:37\u00a0<Enygma`>\u00a0you could follow the example of the 2 extensions/snippets I liked above to tweak the queries and further debug the issue, like listing all the pages someone is last author/contentAuthor of, etc.  \n17:39\u00a0<Enygma`>\u00a0You can also use Main/AllDocs to filter documents by last author  \n17:39\u00a0<Dravere>\u00a0tmortagne said it would produce an error in the log. Which log? Could I find out which pages I have to edit through this log?  \n17:39\u00a0<Dravere>\u00a0Yeah, I'm currently looking at the all documents overview  \n17:39\u00a0<Enygma`>\u00a0the tomcat/jetty server log under which XWiki is running  \n17:40\u00a0<tmortagne>\u00a0Dravere: the application server log  \n17:40\u00a0<Dravere>\u00a0I also know that there was an incident in February last year that probably is related to this. So I think I know the date to look for changes  \n17:40\u00a0<tmortagne>\u00a0if it's tomcat its usually a files called \"catalina.out\"  \n17:40\u00a0<Dravere>\u00a0Ah, the catalina.out one, ok, thanks!  \n17:41\u00a0<Dravere>\u00a0Actually thank you very much. Like always a very helpful IRC channel  \n17:41\u00a0<tmortagne>\u00a0you're welcome :)  \n17:43\u00a0<tmortagne>\u00a0Dravere: search for something like \"Registering UI extensions at wiki level requires wiki administration rights\"  \n17:44\u00a0<Dravere>\u00a0btw, after changing the rights, would it need a restart to fix the problem?  \n17:45\u00a0<Enygma`>\u00a0AFAIK, they should apply immediately  \n17:45\u00a0<Enygma`>\u00a0wothout needing a restart  \n17:47\u00a0<Dravere>\u00a0interesting. I just looked at the log. If I change the ownership of the page to Administrator, I still get that warning in the log  \n17:48\u00a0<tmortagne>\u00a0yes the change apply without a restart  \n17:48\u00a0<tmortagne>\u00a0well that would mean Administrator does not have admin right  \n17:49\u00a0<Dravere>\u00a0But I can administer the wiki ... sooo, uh?  \n17:49\u00a0<tmortagne>\u00a0what is the exact error ?  \n17:49\u00a0<tmortagne>\u00a0the same I pasted ?  \n17:49\u00a0<Dravere>\u00a02017-02-21 17:46:50,488 [http://xwiki.ihomelab.local/xwiki/bin/preview/XWiki/WatchListNotificationsUIX] WARN \u00a0iComponentManagerEventListener - Failed to create wiki component(s) for document [xwiki:XWiki.WatchListNotificationsUIX]: WikiComponentException: Registering UI extensions at wiki level requires wiki administration rights  \n17:50\u00a0<tmortagne>\u00a0very weird, and when you look at the document it's indicated that the author is \"Administrator\" ?  \n17:50\u00a0<Dravere>\u00a0Last author is Administrator  \n17:50\u00a0<Enygma`>\u00a0\"xwiki:XWiki.WatchListNotificationsUIX\" does not look good  \n17:51\u00a0<Enygma`>\u00a0should have been \"xwiki:XWiki.Notifications.Code.NotificationsMenuUIX\"  \n17:52\u00a0<Enygma`>\u00a0so it looks like you may have 2 versions? both XWiki.WatchListNotificationsUIX and XWiki.Notifications.Code.NotificationsMenuUIX ?  \n17:52\u00a0<Dravere>\u00a0I see no NotificationsMenuUIX in the document index  \n17:53\u00a0<Dravere>\u00a0oh wait, had a filter in there ... I see it now  \n17:53\u00a0<Enygma`>\u00a0that one is the page I told you to look at first  \n17:54\u00a0<Dravere>\u00a0NotificationsMenuUIX is also owned by Administrator  \n17:54\u00a0<Enygma`>\u00a0forget what I said above about 2 pages instead of 1. They are both good.  \n17:55\u00a0<Enygma`>\u00a0now check XWiki.WatchListNotificationsUIX for rights  \n17:55\u00a0<Enygma`>\u00a0since that`s the page the logs were complaining about  \n17:56\u00a0<Dravere>\u00a0XWiki.WatchListNotificationsUIX is owned by the Administrator  \n17:56\u00a0<Dravere>\u00a0or the last author is the Administrator  \n17:57\u00a0<Dravere>\u00a0Funny enough the page was created by the other users. Could that play a role in this?  \n17:58\u00a0<tmortagne>\u00a0sounds like this other user did an install and then lost his admin right  \n17:58\u00a0<tmortagne>\u00a0ok I know what's wrong  \n17:58\u00a0<tmortagne>\u00a0Enygma: ui extension code is using the wrong author  \n17:59\u00a0<tmortagne>\u00a0I see extensionsDoc.getContentAuthorReference()  \n17:59\u00a0<Dravere>\u00a0That was the incident. The user had temporary admin rights and was presented with the upgrade screen. Instead of informing the administration about it, he just clicked through that thing without even looking at what was presented -.-  \n17:59\u00a0<tmortagne>\u00a0Dravere: you will have to edit the page and actually modify the content to change the content author  \n17:59\u00a0<Enygma`>\u00a0yeah... so logs say admin right, but code checks programming right  \n18:00\u00a0<tmortagne>\u00a0Enygma: no  \n18:00\u00a0<tmortagne>\u00a0code check the wrong author  \n18:00\u00a0<tmortagne>\u00a0it check admin on content author  \n18:00\u00a0<tmortagne>\u00a0instead of admin on author  \n18:00\u00a0<Enygma`>\u00a0ah  \n18:01\u00a0<Dravere>\u00a0So we also found a bug?  \n18:01\u00a0<tmortagne>\u00a0Dravere: yep  \n18:01\u00a0<Enygma`>\u00a0so Dravere, do the add space, save, delete space, save \"dance\" I mentioned before.  \n18:01\u00a0<Enygma`>\u00a0or use some helper like http://extensions.xwiki.org/xwiki/bin/view/Extension/Change+creator%2C+author+or+contentAuthor  \n18:02\u00a0<Dravere>\u00a0well at least something positiv came out of that thing.  \n18:02\u00a0<Dravere>\u00a0I'll install the extension and try it out  \n18:03\u00a0<Enygma`>\u00a0tmortagne: will you be creating an issue for this?  \n18:03\u00a0<tmortagne>\u00a0I'm on it  \n18:04\u00a0<Enygma`>\u00a0Ok. Thanks Dravere for helping us improve XWiki :P  \n18:06\u00a0<gdelhumeau>\u00a0has quit  \n18:06\u00a0<Aranjedeath>\u00a0has joined #xwiki  \n18:06\u00a0<Dravere>\u00a0Oh, with the extension the changing worked wonderfully and the watch list feature is available again! Thank you so much!  \n18:07\u00a0<Enygma`>\u00a0:)  \n18:08\u00a0<tmortagne>\u00a0:)  \n18:10\u00a0<tmortagne>\u00a0Enygma: wiki components seems to have the same bug  \n18:10\u00a0<Enygma`>\u00a0weren`t we asking PR for wiki components?  \n18:11\u00a0<tmortagne>\u00a0yes but on the wrong author  \n18:11\u00a0<tmortagne>\u00a0it's checking content author instead of author  \n18:11\u00a0<Enygma`>\u00a0we ask on the author or on the document?  \n18:12\u00a0<tmortagne>\u00a0this.authorization.hasAccess(Right.PROGRAM, reference)  \n18:12\u00a0<tmortagne>\u00a0which get the content author of the passed reference  \n18:12\u00a0<tmortagne>\u00a0and test PR on it  \n18:12\u00a0<tmortagne>\u00a0which is wrong in the case of a wiki component  \n18:13\u00a0<tmortagne>\u00a0we need to get the document author before calling hasAccess  \n18:13\u00a0<Enygma`>\u00a0right, since the code is in the objects  \n18:13\u00a0<tmortagne>\u00a0yep  \n18:13\u00a0<evalica>\u00a0has quit  \n18:14\u00a0<tmortagne>\u00a0in an ideal world each largestring property would have an associated author  \n18:15\u00a0<Enygma`>\u00a0I`m off. See you tomorrow.  \n18:15\u00a0<tmortagne>\u00a0Enygma: see you next week :)  \n18:15\u00a0<Enygma`>\u00a0right :)  \n18:25\u00a0<vmassol>\u00a0gdelhumeau: hi  \n18:25\u00a0<vmassol>\u00a0re your question about events, I'm not sure I understand  \n18:25\u00a0<vmassol>\u00a0an app should create its own events  \n18:25\u00a0<gdelhumeau\\_[m]>\u00a0Imagine a use case: the forum app wants to see a notification to User A because User B has answered to the topic created by User A  \n18:26\u00a0<gdelhumeau\\_[m]>\u00a0so Forum App sends an event, right?  \n18:26\u00a0<vmassol>\u00a0imeplmenting Event  \n18:26\u00a0<gdelhumeau\\_[m]>\u00a0?  \n18:26\u00a0<vmassol>\u00a0you mean s/see/send  \n18:26\u00a0<gdelhumeau\\_[m]>\u00a0yes, sorry  \n18:27\u00a0<vmassol>\u00a0so the forum app needs to create a java class TopicAnsweredEvent  \n18:27\u00a0<vmassol>\u00a0and use the ObservationManager to send it  \n18:27\u00a0<vmassol>\u00a0anyone interested in this event will listent o it  \n18:27\u00a0<vmassol>\u00a0anyone interested in this event will listent to it  \n18:27\u00a0<gdelhumeau\\_[m]>\u00a0good  \n18:28\u00a0<gdelhumeau\\_[m]>\u00a0now I want to store this event on the stream  \n18:28\u00a0<vmassol>\u00a0you don't have anythinf to do I think  \n18:28\u00a0<vmassol>\u00a0let me check the AS listener  \n18:28\u00a0<gdelhumeau\\_[m]>\u00a0I don't want to make AS module aware of eveythibg  \n18:28\u00a0<gdelhumeau\\_[m]>\u00a0vmassol: see: https://github.com/xwiki/xwiki-platform/blob/45fce738a6d902cf025366c04401ff8b2c443fdf/xwiki-platform-core/xwiki-platform-activitystream/xwiki-platform-activitystream-api/src/main/java/com/xpn/xwiki/plugin/activitystream/impl/ActivityStreamImpl.java#L895-L895  \n18:28\u00a0<vmassol>\u00a0by definition it is!  \n18:29\u00a0<gdelhumeau\\_[m]>\u00a0yes but I don't want activitystream-api implement something specific to my TopicAnsweredEvent  \n18:29\u00a0<vmassol>\u00a0ok the code is not correct  \n18:29\u00a0<vmassol>\u00a0it should listen to everything  \n18:29\u00a0<gdelhumeau\\_[m]>\u00a0because otherwise extension developers won't be able to store custom events because they won't touch the AS code  \n18:30\u00a0<gdelhumeau\\_[m]>\u00a0AS does a big if {} else if {} else if {} etc...  \n18:30\u00a0<vmassol>\u00a0yes I'm checkig it now  \n18:30\u00a0<gdelhumeau\\_[m]>\u00a0and then it convert my Event to an ActivityEvent  \n18:31\u00a0<gdelhumeau\\_[m]>\u00a0so should I modify AS to handle TopicAnsweredEvent?  \n18:31\u00a0<vmassol>\u00a0the mistake seems to be htis class ActivityEventType  \n18:31\u00a0<gdelhumeau\\_[m]>\u00a0I think I should not  \n18:31\u00a0<vmassol>\u00a0ofc it shouldn't  \n18:31\u00a0<vmassol>\u00a0but the AS code needs to be modified a bit to be generic  \n18:31\u00a0<gdelhumeau\\_[m]>\u00a0ok so someone, somewhere, has to do the convertion and then store the event  \n18:32\u00a0<gdelhumeau\\_[m]>\u00a0so AS should be able to handle all kind of events?  \n18:33\u00a0<vmassol>\u00a0yes  \n18:33\u00a0<gdelhumeau\\_[m]>\u00a0or the Forum App should also handle this convertion ?  \n18:33\u00a0<vmassol>\u00a0right now apparently it only handles document events  \n18:33\u00a0<vmassol>\u00a0but it's easy to improve that  \n18:33\u00a0<vmassol>\u00a0since it's easy to check if the event extends AbstractDocumentEvent  \n18:34\u00a0<Dravere>\u00a0Ok, seems other features got fixed, that nobody noticed they were broken, through those author changes. Thanks again. Bye!  \n18:34\u00a0<vmassol>\u00a0and add a new addGenericActivityEvent() method for ex  \n18:34\u00a0<vmassol>\u00a0Dravere:  \n18:34\u00a0<vmassol>\u00a0cool  \n18:34\u00a0<Dravere>\u00a0has quit  \n18:35\u00a0<vmassol>\u00a0bfn  \n18:35\u00a0<vmassol>\u00a0gdelhumeau: actually it alreayd exists  \n18:35\u00a0<flyingpot>\u00a0has joined #xwiki  \n18:35\u00a0<vmassol>\u00a0it's called addActivityEvent  \n18:35\u00a0<vmassol>\u00a0public void addActivityEvent(String streamName, String type, String title, List<String> params, XWikiContext context)  \n18:36\u00a0<vmassol>\u00a0so all that is needed IMO is to:  \n18:36\u00a0<vmassol>\u00a01) change the listener to listen to all events  \n18:36\u00a0<gdelhumeau\\_[m]>\u00a0so basicaly you are saying that Forum App should call manually org.xwiki.eventstream.EventStream#addEvent() in addition to observationManager.senf()  \n18:36\u00a0<vmassol>\u00a02) in onevent() verify if it's a doc event  \n18:36\u00a0<vmassol>\u00a0no no no  \n18:37\u00a0<vmassol>\u00a0:)  \n18:37\u00a0<vmassol>\u00a0forum app should use the OM  \n18:38\u00a0<vmassol>\u00a03 and if doc event, keep the if that exists and if not a doc event then call addActivityEvent  \n18:38\u00a0<gdelhumeau\\_[m]>\u00a0so if the event is not a subclass of AbstractDocumentEvent, fallback to addGenericActivityEvent() ?  \n18:39\u00a0<vmassol>\u00a0there's one issue though  \n18:39\u00a0<gdelhumeau\\_[m]>\u00a0in the AS code  \n18:39\u00a0<vmassol>\u00a0for generic parameters  \n18:39\u00a0<gdelhumeau\\_[m]>\u00a0ok  \n18:39\u00a0<vmassol>\u00a0but this can be fixed by introduced a new ParametrizedEvent class for ex  \n18:39\u00a0<gdelhumeau\\_[m]>\u00a0let's try this, then  \n18:39\u00a0<vmassol>\u00a0call me if you need :)  \n18:39\u00a0<flyingpot>\u00a0has quit  \n18:40\u00a0<vmassol>\u00a0there's another approach possible  \n18:40\u00a0<vmassol>\u00a0which is to introduce an EventConverter component role  \n18:40\u00a0<vmassol>\u00a0and its role is to convert from a typed Event into a an ASEvent class  \n18:40\u00a0<vmassol>\u00a0then use it in the onEvent() method of the listener  \n18:40\u00a0<gdelhumeau\\_[m]>\u00a0yes, and it means Forum App should implement this role  \n18:40\u00a0<vmassol>\u00a0correct  \n18:41\u00a0<vmassol>\u00a0and we can have some generic implementations too  \n18:41\u00a0<vmassol>\u00a0for document events, for generic events, etc  \n18:41\u00a0<vmassol>\u00a0but some app can provide a specialized version  \n18:41\u00a0<gdelhumeau\\_[m]>\u00a0I see  \n18:41\u00a0<gdelhumeau\\_[m]>\u00a0the more extensible way  \n18:41\u00a0<vmassol>\u00a0onEvent() would do the lookup  \n18:41\u00a0<vmassol>\u00a0and if not found fallback on a generic converter  \n18:42\u00a0<vmassol>\u00a0Right now your only issue is to be able to pass an audience param  \n18:46\u00a0<vmassol>\u00a0this AS code is not very well coded ;)  \n18:47\u00a0<vmassol>\u00a0you can feel that it was mostly coded for doc events  \n18:48\u00a0<vmassol>\u00a0now in practice we can probably almost always associate a doc  \n18:48\u00a0<vmassol>\u00a0for the forum ex you gave the topic page would be that doc  \n18:49\u00a0<gdelhumeau\\_[m]>\u00a0actualllly a document update event is sent (and stored) as well  \n18:50\u00a0<vmassol>\u00a0note that we'll still need to find a way to filter out some events  \n18:50\u00a0<vmassol>\u00a0for events that we don't want to store in the AS  \n18:50\u00a0<vmassol>\u00a0for ex ActionExecutedEvent  \n18:50\u00a0<vmassol>\u00a0we don't want to store those  \n18:51\u00a0<vmassol>\u00a0nor ApplicationStartedEvent, etc  \n18:52\u00a0<vmassol>\u00a0one solution for this could be \u00a0to introduce some StorableEvent interface  \n18:53\u00a0<vmassol>\u00a0or better  \n18:53\u00a0<vmassol>\u00a0NotificationEvent interface  \n18:53\u00a0<vmassol>\u00a0for notification events  \n18:54\u00a0<vmassol>\u00a0and then the AS listener would listen only to notification events  \n18:54\u00a0<gdelhumeau\\_[m]>\u00a0and so we woild event implement this listener in the eventstream module  \n18:54\u00a0<vmassol>\u00a0maybe a better name would be ActivityEvent  \n18:55\u00a0<vmassol>\u00a0moving the storage from AS to eventstream is another thing  \n18:55\u00a0<gdelhumeau\\_[m]>\u00a0npt the storage, the listener  \n18:55\u00a0<gdelhumeau\\_[m]>\u00a0only  \n18:55\u00a0<vmassol>\u00a0why would you want to store twice?  \n18:56\u00a0<vmassol>\u00a0listener = store  \n18:56\u00a0<vmassol>\u00a0(it's the same thing)  \n18:56\u00a0<vmassol>\u00a0the listener is a storage listener  \n18:56\u00a0<gdelhumeau\\_[m]>\u00a0AS would not store Notification events  \n18:56\u00a0<vmassol>\u00a0that's its goal :)  \n18:56\u00a0<gdelhumeau\\_[m]>\u00a0but the nw module would  \n18:57\u00a0<vmassol>\u00a0I don't understand. I feel we're not talking about the same thing  \n18:57\u00a0<vmassol>\u00a0basically the AS listener needs to be made more generic  \n18:58\u00a0<vmassol>\u00a0so that it can be used to store anything that makes sense to be stored  \n19:04\u00a0<gdelhumeau\\_[m]>\u00a0I just wanted to improve eventsstream instead of AS, because I don't see the purpose of eventstream otherwise  \n19:06\u00a0<vmassol>\u00a0sure. I'm jsut saying that maybe it's too big for now to move the store to eventstream but if you feel like it, sure, it's something we need to do  \n20:22\u00a0<Slashman>\u00a0has quit  \n20:23\u00a0<flyingpot>\u00a0has joined #xwiki  \n20:27\u00a0<flyingpot>\u00a0has quit  \n20:33\u00a0<sorinello>\u00a0has quit  \n20:35\u00a0<sorinello>\u00a0has joined #xwiki  \n20:54\u00a0<martinus\\_\\_>\u00a0has quit  \n21:08\u00a0<martinus\\_\\_>\u00a0has joined #xwiki  \n23:03\u00a0<chaas>\u00a0has quit  \n23:04\u00a0<chaas>\u00a0has joined #xwiki\n"}