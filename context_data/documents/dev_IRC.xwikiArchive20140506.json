{"id": "dev:IRC.xwikiArchive20140506", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140506", "title": "IRC Archive for channel #xwiki on 06 May 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Denis>\u00a0has quit  \n02:44\u00a0<OSIMasson>\u00a0has joined #xwiki  \n03:00\u00a0<OSIMasson>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n06:04\u00a0<Denis>\u00a0has quit  \n07:36\u00a0<vmassol>\u00a0has joined #xwiki  \n07:47\u00a0<mflorea>\u00a0has joined #xwiki  \n07:55\u00a0<msmeria>\u00a0has joined #xwiki  \n08:03\u00a0<evalica>\u00a0has joined #xwiki  \n08:25\u00a0<DuFFo>\u00a0has quit  \n08:30\u00a0<evalica>\u00a0has quit  \n08:32\u00a0<evalica>\u00a0has joined #xwiki  \n08:48\u00a0<mflorea>\u00a0has quit  \n08:50\u00a0<cjd>\u00a0has joined #xwiki  \n09:05\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:17\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:24\u00a0<mflorea>\u00a0has joined #xwiki  \n09:26\u00a0<Denis1>\u00a0has joined #xwiki  \n09:51\u00a0<cjd>\u00a0I so wanna write a rmrf script so I can delete users from the command line :D  \n10:11\u00a0<vmassol>\u00a0cjd: we almost have this already  \n10:11\u00a0<vmassol>\u00a0it's called the CRaSH integration  \n10:11\u00a0<vmassol>\u00a0you just need to write a very crashlet  \n10:11\u00a0<vmassol>\u00a0see http://extensions.xwiki.org/xwiki/bin/view/Extension/CRaSH+Integration  \n10:12\u00a0<cjd>\u00a0is the extension in x.org?  \n10:12\u00a0<vmassol>\u00a0yep see http://extensions.xwiki.org/xwiki/bin/view/Extension/CRaSH+Integration  \n10:14\u00a0<vmassol>\u00a0I'm fine that we install it on xwiki.org  \n10:14\u00a0<vmassol>\u00a0(we just need to install through EM and modify xwiki.properties to set up a username/password, there's no integration with xwiki users yet)  \n10:15\u00a0<vmassol>\u00a0hmm note this: \"Version 1.0 not working with XWiki 5.3M2+ (BC deps need to be fixed)\". BC is bouncycastle  \n10:15\u00a0<vmassol>\u00a0should be easy to fix  \n10:16\u00a0<vmassol>\u00a0AFAIR this was caused by some dep changes from denis  \n10:16\u00a0<vmassol>\u00a0(when he started working on security)  \n10:16\u00a0<cjd>\u00a0easier to write a script which posts to any xwiki instance no matter what is installed :)  \n10:17\u00a0<vmassol>\u00a0with crash you get a real shell to xwiki  \n10:20\u00a0<vmassol>\u00a0history, autocompletion, etc  \n10:20\u00a0<cjd>\u00a0/nod  \n10:21\u00a0<cjd>\u00a0what I want is rm, preferably from an easily accessable shell  \n10:21\u00a0<vmassol>\u00a0you can cd , ls, etc  \n10:21\u00a0<vmassol>\u00a0rm too  \n10:21\u00a0<vmassol>\u00a0although I'm not sure I implemented those yet :)  \n10:21\u00a0<vmassol>\u00a0cd and ls ring a bell though  \n10:22\u00a0<vmassol>\u00a0(see http://www.crashub.org/beta/reference.html#\\_command\\_usage \u00a0for the default list of commands)  \n10:22\u00a0<cjd>\u00a0the problem is a \"complete solution\" which is not fully implemented loses to a hackscript which satisfies the main use case  \n10:23\u00a0<vmassol>\u00a0sure, that's just worse on the long term  \n10:23\u00a0<vmassol>\u00a0hacking is not collaborating  \n10:23\u00a0<vmassol>\u00a0whereas if you add a new command and release a new version with your new command you've improved something and shared it :)  \n10:24\u00a0<vmassol>\u00a0ofc you could publish your hack as a snippet on e.x.o too  \n10:25\u00a0<vmassol>\u00a0it's just a bit more fragmented on a lower-quality technology  \n10:25\u00a0<vmassol>\u00a0anyway was just answering to your main question above :)  \n10:25\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:25\u00a0<cjd>\u00a0I usually publish what I do just because I'm forgetful but there's something about this \"The Right Way\" thinking which seems wrong  \n10:25\u00a0<cjd>\u00a0can't quite define it  \n10:26\u00a0<vmassol>\u00a0the reason is simple: you don't like reusing stuff :)  \n10:26\u00a0<vmassol>\u00a0you like creating your own  \n10:26\u00a0<vmassol>\u00a0it's called the NIH syndrome :)  \n10:27\u00a0<vmassol>\u00a0a lot of developers suffer from this to different degrees, which isn't bad since it allows to discover new stuff too  \n10:27\u00a0<cjd>\u00a0I have reused things before and usually I end up putting the same amount of time into it as I would if I wrote it myself  \n10:27\u00a0<cjd>\u00a0sometimes it's on-balance positive, sometimes on-balance negative  \n10:28\u00a0<vmassol>\u00a0sure you need to make an educated guess about what you wish to reuse but 99% of the time devs misjudge the time it takes to reimplement and spend a considerable amount of extra time  \n10:28\u00a0<cjd>\u00a0with the added cost that it never integrates as well as something that was cleanroom'd  \n10:29\u00a0<vmassol>\u00a0but they're happy and work overtime to compensate :)  \n10:29\u00a0<cjd>\u00a0heh  \n10:30\u00a0<cjd>\u00a0Actually my problem is I have a small graveyard of tools and libraries which I used, pushed to their limit, found all of their bugs and eventually discarded in favor of my own solutions which were faster and less buggy  \n10:30\u00a0<cjd>\u00a0so I got the worst of both worlds  \n11:02\u00a0<vmassol>\u00a0good morning, going to prepare a roadmap 6.1 proposal email now  \n11:14\u00a0<tmortagne>\u00a0has quit  \n11:16\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:34\u00a0<fca>\u00a0has left #xwiki  \n12:25\u00a0<evalica>\u00a0has quit  \n12:32\u00a0<evalica>\u00a0has joined #xwiki  \n12:40\u00a0<cjd>\u00a0mflorea: in chromium I just opened the wysiwyg over the sandbox wiki page, put the cursor inside of the {{info}} box and pressed backspace  \n12:41\u00a0<cjd>\u00a0the info box remains but it has broken html and the content is gone and the next paragraph migrates into the info box  \n12:45\u00a0<evalica>\u00a0has quit  \n12:51\u00a0<vmassol>\u00a0gdelhumeau: switching from IDEA to gedit? :)  \n12:52\u00a0<gdelhumeau>\u00a0only when it comes to edit some .vm files :)  \n12:52\u00a0<vmassol>\u00a0there's syntax hilighting in utilate for velocity :)  \n12:52\u00a0<vmassol>\u00a0\\*ultimate  \n12:52\u00a0<gdelhumeau>\u00a0actually I have this plugin for a long time now, but there were not available  \n12:53\u00a0<gdelhumeau>\u00a0gedit+it's all text is a nice combo  \n12:58\u00a0<vmassol>\u00a0ah yes when you're editing in xwiki  \n12:58\u00a0<vmassol>\u00a0indeed  \n12:58\u00a0<vmassol>\u00a0you should document this on xwiki.org  \n12:58\u00a0<vmassol>\u00a0in the tools section  \n12:58\u00a0<vmassol>\u00a0:)  \n12:59\u00a0<vmassol>\u00a0http://dev.xwiki.org/xwiki/bin/view/Community/DevelopmentTools  \n13:00\u00a0<gdelhumeau>\u00a0Prototype had released a new version: http://prototypejs.org/2014/04/18/prototype-1-7-2/  \n13:00\u00a0<gdelhumeau>\u00a0ok vmassol, good idea indeed  \n13:01\u00a0<vmassol>\u00a0maybe we should upgrade\u2026 I'll let sdumitriu evaluate that since he's the epert :)  \n13:01\u00a0<vmassol>\u00a0\\*expert  \n13:11\u00a0<cjd>\u00a0I used to have that vtl.lang file on my old machine  \n13:11\u00a0<cjd>\u00a0I even wrote an xwiki20.lang file which could highlight xwiki syntax and switch to vtl if it saw a {{velocity}} macro, java if it saw {{groovy}} and html if it saw {{html}}  \n13:12\u00a0<cjd>\u00a0mixing {{velocity}} and {{html}} didn't work though  \n13:12\u00a0<cjd>\u00a0and sadly this was pre-github and I think I lost it  \n13:45\u00a0<OSIMasson>\u00a0has joined #xwiki  \n13:54\u00a0<OSIMasson>\u00a0has quit  \n14:15\u00a0<vmassol>\u00a0hmmm  \n14:15\u00a0<vmassol>\u00a0we have this in xwiki.cfg.vm:  \n14:16\u00a0<vmassol>\u00a0#-# The main (documents) storage. [Since 3.4M1] default is hibernate.  \n14:16\u00a0<vmassol>\u00a0# xwiki.store.main.hint=hibernate  \n14:16\u00a0<vmassol>\u00a0but in the code we have:  \n14:16\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0final String storeName = context.getWiki().Param(\"xwiki.store.main.hint\", \"default\");  \n14:16\u00a0<vmassol>\u00a0and then:  \n14:16\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.queryExecutor = this.manager.getInstance(QueryExecutor.class, storeName);  \n14:17\u00a0<vmassol>\u00a0so if the user uncomments this property it'll fail since there's no \"hibernate\" hint for QueryExecutor....  \n14:17\u00a0<vmassol>\u00a0cjd: is it you who coded this? :)  \n14:18\u00a0<vmassol>\u00a0in 41967dd1634993617160e5dedd9c292f1fc49b6e  \n14:18\u00a0<cjd>\u00a0I'll have to check git blame, I don't remember well enough to be sure  \n14:18\u00a0<vmassol>\u00a0https://github.com/xwiki/xwiki-platform/commit/41967dd1634993617160e5dedd9c292f1fc49b6e  \n14:19\u00a0<cjd>\u00a0aha yup  \n14:19\u00a0<cjd>\u00a0have to read it to remember why  \n14:19\u00a0<vmassol>\u00a0in XWiki.java we correctly have:  \n14:19\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0XWikiStoreInterface mainStore =  \n14:19\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Utils.getComponent(XWikiStoreInterface.class, Param(\"xwiki.store.main.hint\", \"hibernate\"));  \n14:20\u00a0<cjd>\u00a0CassandraQueryExecutor I'd say  \n14:23\u00a0<cjd>\u00a0right the divergence is annoying and if hibernate is specified in xwiki.store.main.hint there will be problems  \n14:24\u00a0<cjd>\u00a0so one solution is to rename the default query executor to \"hibernate\" and deal with the fact that if anyone requests \"default\" (will they?) they're going to be broken  \n14:26\u00a0<vmassol>\u00a0not sure if we can remove \"default\" but we could add the \"hibernate\" hint alias  \n14:26\u00a0<vmassol>\u00a0tmortagne: wdyt?  \n14:27\u00a0<vmassol>\u00a0@Component(hints = {\"default\", \"hibernate\"})  \n14:27\u00a0<cjd>\u00a0if there is a possibility to alias hints, +1 that  \n14:27\u00a0<vmassol>\u00a0well  \n14:27\u00a0<vmassol>\u00a0it's not really aliases  \n14:28\u00a0<vmassol>\u00a0it creates another instance in the EM  \n14:28\u00a0<vmassol>\u00a0basically it registers the component twice  \n14:28\u00a0<vmassol>\u00a0what bothers me is the \"default\" name too which is something internal  \n14:36\u00a0<vmassol>\u00a0btw \"hibernate\" is not a good name for QueryExecutor caleb  \n14:36\u00a0<vmassol>\u00a0it's already called \"hql\"  \n14:37\u00a0<vmassol>\u00a0the problem is in trying to reuse something that wasn't meant for that  \n14:37\u00a0<vmassol>\u00a0xwiki.store.main.hint  \n14:38\u00a0<vmassol>\u00a0or we need to rename \"hql\" in \"hibernate\" but \"hql\" seems better  \n14:39\u00a0<vmassol>\u00a0or we need an internal mapping between \"hibernate\" and \"hql\"  \n14:39\u00a0<vmassol>\u00a0ie if the storage is \"hibenrate\" then the query executor is \"hql\"  \n14:40\u00a0<vmassol>\u00a0not very extensible though\u2026  \n14:40\u00a0<vmassol>\u00a0the best is maybe a new property, more complex to configure though but more extensible\u2026.  \n14:40\u00a0<vmassol>\u00a0I'm not sure yet what's best \u2026  \n14:44\u00a0<polx>\u00a0has joined #xwiki  \n14:47\u00a0<cjd>\u00a0the design of what I did was intended for the QueryExecutor and the storage to have the same name  \n14:48\u00a0<cjd>\u00a0thus when you change out the storage, you get a new query executor matching it  \n14:53\u00a0<vmassol>\u00a0I understand except that there's not one query executor per storage  \n14:53\u00a0<vmassol>\u00a0for example \"hql\" and \"xwql\" can both be used for hibernate  \n15:08\u00a0<cjd>\u00a0hmm this gets complicated because ideally we would have X and Y axes for [storage] and [queryLang]  \n15:09\u00a0<vmassol>\u00a0which is why I was suggesting another config param for the query executor to use  \n15:09\u00a0<cjd>\u00a0of course then we have to get realistic (something I was not so great at doing 3 years ago) and ask ourselves whether multiple storage systems are really something we're going to be supporting  \n15:10\u00a0<vmassol>\u00a0of course this also means potentially mismatching store and queryexecutor....  \n15:11\u00a0<vmassol>\u00a0to work around this we would need the concept of default executor for a given store hint  \n15:11\u00a0<vmassol>\u00a0:)  \n15:11\u00a0<vmassol>\u00a0starts to be complex  \n15:13\u00a0<cjd>\u00a0I'm leaning vaguely toward saying \"xwiki is a Hibernate app\" and then going to make some super-duper feature which people will use every day instead of tinkering around with storage systems that people talk about but don't really use  \n15:54\u00a0<msmeria>\u00a0has quit  \n16:17\u00a0<polx>\u00a0has quit  \n16:18\u00a0<vmassol>\u00a0ok I think I know what the problem is on ES  \n16:18\u00a0<vmassol>\u00a0for some reason the index mapping is wrong  \n16:18\u00a0<vmassol>\u00a0http://extensions.xwiki.org/activeinstalls/installs/install/\\_mapping  \n16:19\u00a0<vmassol>\u00a0for example for distributionId it's: \"distributionId\":{\"type\":\"string\"}  \n16:19\u00a0<vmassol>\u00a0but it should be \"distributionId\":{\"type\":\"string\",\"index\":\"not\\_analyzed\"}  \n16:20\u00a0<polx>\u00a0has joined #xwiki  \n16:20\u00a0<vmassol>\u00a0maybe it's because of some old xwiki versions where the mapping was not correct but they shouldn't be able to change the mapping which is what I don't understand  \n16:22\u00a0<KermitTheFragger>\u00a0has quit  \n16:41\u00a0<vmassol>\u00a0so I need to find out how to reindex all data\u2026 need to understand http://www.elasticsearch.org/blog/changing-mapping-with-zero-downtime/  \n17:55\u00a0<polx>\u00a0has quit  \n17:57\u00a0<OSIMasson>\u00a0has joined #xwiki  \n18:06\u00a0<polx>\u00a0has joined #xwiki  \n18:18\u00a0<sdumitriu>\u00a0vmassol: Looking at the Prototype upgrade  \n18:18\u00a0<vmassol>\u00a0ok cool  \n18:22\u00a0<tmortagne>\u00a0any taker for XWIKI-10283 ?  \n18:29\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:47\u00a0<vmassol>\u00a0ok active installs reindexed and fixed :)  \n18:48\u00a0<vmassol>\u00a0http://www.xwiki.org/xwiki/bin/view/ActiveInstalls/WebHome is working again  \n18:50\u00a0<polx>\u00a0has quit  \n19:00\u00a0<tmortagne>\u00a0has quit  \n19:03\u00a0<Slashman>\u00a0has joined #xwiki  \n19:03\u00a0<cjd>\u00a0so little story  \n19:03\u00a0<vmassol>\u00a0just documented what I did for the future: http://www.xwiki.org/xwiki/bin/view/Admin/ActiveInstallsManagement  \n19:03\u00a0<cjd>\u00a0I got git to lose data  \n19:03\u00a0<cjd>\u00a0I merged master into a branch then merged the branch into master and the old state of master is just gone from history  \n19:04\u00a0<cjd>\u00a0tl;dr always tag before merging :S  \n19:05\u00a0<sdumitriu>\u00a0git reflog  \n19:05\u00a0<sdumitriu>\u00a0Should still have the old master version  \n19:07\u00a0<cjd>\u00a0ooo this looks promising  \n19:07\u00a0<cjd>\u00a0wow, thanks  \n19:08\u00a0<cjd>\u00a0I'm not sure why there was no merge commit but that did it  \n19:09\u00a0<polx>\u00a0has joined #xwiki  \n19:10\u00a0<polx>\u00a0has quit  \n19:17\u00a0<cjd>\u00a0has quit  \n19:19\u00a0<mflorea>\u00a0has quit  \n19:38\u00a0<abusenius>\u00a0has joined #xwiki  \n19:55\u00a0<polx>\u00a0has joined #xwiki  \n20:00\u00a0<gdelhumeau>\u00a0has quit  \n20:20\u00a0<sburjan>\u00a0has quit  \n20:21\u00a0<sburjan>\u00a0has joined #xwiki  \n20:34\u00a0<DuFFo>\u00a0has joined #xwiki  \n21:17\u00a0<Denis1>\u00a0is now known as <Denis>  \n22:05\u00a0<mflorea>\u00a0has joined #xwiki  \n22:41\u00a0<sdumitriu>\u00a0vmassol: Still here?  \n22:41\u00a0<vmassol>\u00a0yep  \n22:41\u00a0<sdumitriu>\u00a0Should I upgrade prototype for 6.0?  \n22:42\u00a0<sdumitriu>\u00a0That release should have happened a long time ago, I'm not sure if it's safe to upgrade right nwo  \n22:42\u00a0<sdumitriu>\u00a0On one hand it fixes some compatibility problems with newer IE  \n22:42\u00a0<sdumitriu>\u00a0On the other hand, there may be regressions  \n22:42\u00a0<vmassol>\u00a0only master (6.1snapshot)  \n22:42\u00a0<vmassol>\u00a0too risky  \n22:42\u00a0<sdumitriu>\u00a0They already fixed some issues in master  \n22:42\u00a0<vmassol>\u00a0we're about to release 6.0 final  \n22:43\u00a0<vmassol>\u00a0s/too risky/too risky for 6.0  \n22:56\u00a0<vmassol>\u00a0you sure this is safe for 6.0?  \n22:56\u00a0<vmassol>\u00a0we're in RC now  \n22:56\u00a0<vmassol>\u00a0(close to final)  \n22:56\u00a0<sdumitriu>\u00a0vmassol: Should be  \n22:57\u00a0<sdumitriu>\u00a0No xredirect should ever have a newline in it  \n23:23\u00a0<vmassol>\u00a0has quit  \n23:23\u00a0<mflorea>\u00a0has quit  \n23:27\u00a0<OSIMasson>\u00a0has quit  \n23:30\u00a0<Slashman>\u00a0has quit\n"}