{"id": "dev:IRC.xwikiArchive20120113", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120113", "title": "IRC Archive for channel #xwiki on 13 January 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n01:39\u00a0<vmassol>\u00a0has quit  \n02:19\u00a0<tekzilla>\u00a0has quit  \n02:21\u00a0<tekzilla>\u00a0has joined #xwiki  \n03:08\u00a0<@sdumitriu>\u00a0No you don't  \n03:14\u00a0<@cjdelisle>\u00a0todo: add !delete to the bot  \n03:18\u00a0<@sdumitriu>\u00a0Good idea  \n04:07\u00a0<CIA-121>\u00a0Sergiu Dumitriu\u000f master\u000f \\* rbd07f4f\u000f \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/doc/DefaultDocumentAccessBridge.java :\u000f [misc] Removed duplicate dependency - http://git.io/23ShvQ  \n04:17\u00a0<CIA-121>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r16d15dc\u000f \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/doc/DefaultDocumentAccessBridge.java :\u000f [misc] Better logging - http://git.io/94huHw  \n06:00\u00a0<Denis2>\u00a0has joined #xwiki  \n06:03\u00a0<Denis>\u00a0has quit  \n07:31\u00a0<sdumitriu>\u00a0has quit  \n07:37\u00a0<sdumitriu>\u00a0has joined #xwiki  \n07:52\u00a0<vmassol>\u00a0has joined #xwiki  \n07:59\u00a0<mflorea>\u00a0has joined #xwiki  \n08:01\u00a0<@sdumitriu>\u00a0mflorea: Need help with the release?  \n08:02\u00a0<+mflorea>\u00a0yes, for the part where a I don't have an account, i.e. WikiMatrix and Wikipedia  \n08:02\u00a0<@sdumitriu>\u00a0OK  \n08:03\u00a0<+mflorea>\u00a0what about Freshmeat? does it take the announcement from FreeCode?  \n08:04\u00a0<@sdumitriu>\u00a0It's the same  \n08:04\u00a0<@sdumitriu>\u00a0Freshmeat renamed to FreeCode  \n08:04\u00a0<+mflorea>\u00a0oh  \n08:04\u00a0<@sdumitriu>\u00a0Done WikiMatrix  \n08:04\u00a0<+mflorea>\u00a0ok  \n08:05\u00a0<+mflorea>\u00a0I'll update the Release Plan then  \n08:08\u00a0<@sdumitriu>\u00a0Done wikipedia  \n08:16\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:22\u00a0<+mflorea>\u00a0thanks sdumitriu. On the Release Plan page Softpedia was listed too, and I added it to the table. Do we push update there too?  \n08:22\u00a0<@sdumitriu>\u00a0I never did  \n08:23\u00a0<vmassol>\u00a0I did in the past  \n08:23\u00a0<vmassol>\u00a0(AFAIR)  \n08:23\u00a0<@sdumitriu>\u00a0http://linux.softpedia.com/get/Information-Management/XWiki-21691.shtml  \n08:23\u00a0<vmassol>\u00a0the more the merrier  \n08:24\u00a0<@sdumitriu>\u00a0They already have 34m1  \n08:24\u00a0<vmassol>\u00a0nice  \n08:24\u00a0<+sburjan`>\u00a0cool  \n08:24\u00a0<@sdumitriu>\u00a0They either get data from freecode, or someone there is watching  \n08:26\u00a0<rrodriguez>\u00a0has quit  \n08:36\u00a0<+mflorea>\u00a0sdumitriu: regarding the download page, last time I did the release I had to put some numbers (the IDs of the files published on OW2) but I don't see where the numbers from 3.3 are. Yet, 3.3 download works, 3.4M1 doesn't  \n08:36\u00a0<+mflorea>\u00a0s/from/for  \n08:37\u00a0<@sdumitriu>\u00a0Looking  \n08:37\u00a0<@sdumitriu>\u00a0I'm forcing the lock  \n08:37\u00a0<+mflorea>\u00a0ok  \n08:38\u00a0<+mflorea>\u00a0I see..  \n08:38\u00a0<@sdumitriu>\u00a0The version should be the maven one, 3.4-milestone-1  \n08:38\u00a0<@sdumitriu>\u00a0Seems to be working now, right?  \n08:39\u00a0<@sdumitriu>\u00a0You have to update http://manager.xwiki.org/xwiki/bin/view/Main/Download as well  \n08:39\u00a0<+mflorea>\u00a0yep  \n08:39\u00a0<+mflorea>\u00a0I'll do it  \n08:40\u00a0<+mflorea>\u00a0thanks sdumitriu  \n08:41\u00a0<@sdumitriu>\u00a0You're welcome  \n08:57\u00a0<vmassol>\u00a0it's ludovic creating the new xclams subwiki  \n09:19\u00a0<xwikibot>\u00a0has joined #xwiki  \n09:19\u00a0<sdumitriu>\u00a0has quit  \n09:28\u00a0<lucaa>\u00a0has joined #xwiki  \n09:55\u00a0<+mflorea>\u00a0Denis: platform build is failing on CI with compilation error. Is this related to your commit?  \n09:55\u00a0<+mflorea>\u00a0XWikiMigrationManagerTest.java:[48,18] com.xpn.xwiki.store.migration.XWikiMigrationManagerTest.TestDataMigrationManager is not abstract and does not override abstract method initializeEmptyDB() in com.xpn.xwiki.store.migration.AbstractDataMigrationManager  \n09:55\u00a0<+mflorea>\u00a0http://ci.xwiki.org/job/xwiki-platform/1337/consoleText  \n09:57\u00a0<+Denis>\u00a0oups  \n09:57\u00a0<+Denis>\u00a0it has compile locally  \n09:58\u00a0<+mflorea>\u00a0maybe you didn't commit everything  \n10:10\u00a0<CIA-121>\u00a0Denis Gervalle\u000f master\u000f \\* r4a969f2\u000f \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/test/java/com/xpn/xwiki/store/migration/XWikiMigrationManagerTest.java :\u000f XWIKI-7389: Unable to start the wiki with a empty DB or an old DB (without version) ...  \n10:10\u00a0<+Denis>\u00a0no it was really broken  \n10:10\u00a0<+Denis>\u00a0but it seems it has not recompile the test and pass it  \n10:10\u00a0<+Denis>\u00a0weird  \n10:13\u00a0<CIA-121>\u00a0Denis Gervalle\u000f master\u000f \\* r1b52665\u000f \u000f/ (2 files in 2 dirs):\u000f XWIKI-7389: Unable to start the wiki with a empty DB or an old DB (without version) ...  \n10:17\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:35\u00a0<vmassol>\u00a0has quit  \n10:37\u00a0<vmassol>\u00a0has joined #xwiki  \n11:11\u00a0<sburjan>\u00a0has quit  \n11:18\u00a0<sburjan>\u00a0has joined #xwiki  \n11:22\u00a0<sburjan`>\u00a0has quit  \n11:27\u00a0<evalica>\u00a0has joined #xwiki  \n11:31\u00a0<evalica>\u00a0has quit  \n11:36\u00a0<+sburjan>\u00a0hello everybody  \n11:37\u00a0<+sburjan>\u00a0lucaa: I have a quick question. I see that when adding a new annotation, the history of the page is increased with one major version. Shouldn't adding an annotation save as a minor edit ? it would seem more logical to me  \n11:47\u00a0<evalica>\u00a0has joined #xwiki  \n12:02\u00a0<+lucaa>\u00a0it should be the same as comment  \n12:02\u00a0<+lucaa>\u00a0I don't know how comment is  \n12:03\u00a0<+lucaa>\u00a0if they're different than you can create a bug  \n12:28\u00a0<mflorea>\u00a0has quit  \n13:45\u00a0<mflorea>\u00a0has joined #xwiki  \n13:51\u00a0<+Denis>\u00a0mflorea: In the release note, \u00a0has the API breakage been updated ?  \n13:52\u00a0<+mflorea>\u00a0Denis: you mean http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWikiEnterprise34M1#HAPIBreakages ?  \n13:52\u00a0<+Denis>\u00a0yep  \n13:52\u00a0<+mflorea>\u00a0it's up to date, I think, it was generated after the maven release  \n13:53\u00a0<+Denis>\u00a0the content is suspicious for me  \n13:53\u00a0<+mflorea>\u00a0why?  \n13:55\u00a0<+Denis>\u00a0EntityReference, changes in method access  \n13:55\u00a0<+Denis>\u00a0it has been done in 3.3M2  \n13:55\u00a0<+Denis>\u00a0NOthing about the MigrationManager  \n13:59\u00a0<+sburjan>\u00a0To committers: I have made a pull request for a minor typo in our documentation  \n14:01\u00a0<+mflorea>\u00a0Denis: the \"to be removed when 3.3 is release\" section from the clirr excludes hasn't been removed. I'll remove it and rebuild the clirr report. Thanks for catching this.  \n14:04\u00a0<+mflorea>\u00a0Denis: btw, you may have something to add to the release notes regarding the changes to the database migration code (search for your name in the release notes. Either put more content there or in the Migration Nodes section below)  \n14:08\u00a0<+Denis>\u00a0Yes, I was looking at the breakage to refresh my mind :)  \n14:08\u00a0<+Denis>\u00a0I am adding the reference to the issues...  \n14:09\u00a0<+mflorea>\u00a0ok, I'm not sure why MigrationManager changes are not listed. You're sure there weren't internal.  \n14:26\u00a0<+Denis>\u00a0mflorea: maybe, I would have though so if I had not seen the EntityReference changes  \n14:26\u00a0<+Denis>\u00a0have you updated ?  \n14:28\u00a0<+mflorea>\u00a0I'm on it  \n15:12\u00a0<+Denis>\u00a0mflorea: We were trying the 3.4M1 release here and we have an issue regarding the image plugin and the configuration of its cache, is it known ?  \n15:15\u00a0<+mflorea>\u00a0Denis: not to me  \n15:15\u00a0<+Denis>\u00a0seems to me its related to the change of cache backend  \n15:16\u00a0<+tmortagne>\u00a0Denis: what issue ?  \n15:17\u00a0<+tmortagne>\u00a0the \"change\" is that the configuration is actually taken into account  \n15:17\u00a0<+tmortagne>\u00a0previously it was default memory cache  \n15:42\u00a0<+Denis>\u00a0tmortagne: the configuration of the location of the log is no more done based on the temp directory, as the image plug in does before  \n15:43\u00a0<+tmortagne>\u00a0well it's supposed to, where is it now ?  \n15:43\u00a0<+Denis>\u00a0cause is probably that the configuration key, is no more cache.path but location in infinispan  \n15:43\u00a0<+Denis>\u00a0it goes to the home of tomcat in my config  \n15:44\u00a0<+tmortagne>\u00a0ok that's weird, will look at it  \n15:44\u00a0<+Denis>\u00a0look at ImagePlugin.java line 157  \n15:45\u00a0<+Denis>\u00a0and it break on ligne 174 here due to access denied on the folder  \n15:45\u00a0<+tmortagne>\u00a0yes I know what image plugin is doing, this one did not change since a long time, I think there is a bug in infinispan handler  \n15:46\u00a0<+Denis>\u00a0we also have another issue with getDisplayTitle that threw NPE  \n15:46\u00a0<+Denis>\u00a0SheetDocumentDisplay seems to be the cause of the NPE, on line 144  \n15:47\u00a0<+tmortagne>\u00a0ok that one is more for mflorea I guess  \n15:48\u00a0<+mflorea>\u00a0Denis, what's the title?  \n15:48\u00a0<+Denis>\u00a0XWikiPreferences title  \n15:48\u00a0<+Denis>\u00a0but this weird, this seems related to the execution context  \n15:49\u00a0<+mflorea>\u00a0default title? I haven't seen any NPE thrown on default distribution  \n15:52\u00a0<+tmortagne>\u00a0Denis: hmm I got things like that, see XWIKI-7227  \n15:52\u00a0<+tmortagne>\u00a0the issue is that if anything goes wrong in pushDocumentInContext we can loose the execution context  \n15:53\u00a0<+tmortagne>\u00a0which means sometime not have any ExecutionContext at all  \n15:53\u00a0<+Denis>\u00a0how could I know it is related  \n15:53\u00a0<+tmortagne>\u00a0it's related if you get a null ExecutionContext after a rendering  \n15:53\u00a0<+Denis>\u00a0it happen many times, the wiki is almost unusable  \n15:54\u00a0<+tmortagne>\u00a0don't you get some warning about failing rendering before getting the nullpointer ?  \n15:55\u00a0<+tmortagne>\u00a0I have the issue pretty often in Eclipse+tomcat where setLocale fail and make the rendering fail  \n15:55\u00a0<+Denis>\u00a0xwikivars fails to be evaluated  \n15:55\u00a0<+Denis>\u00a0is the first cause reported  \n15:56\u00a0<+tmortagne>\u00a0no warning ?  \n15:56\u00a0<+Denis>\u00a0I have that on our normal production server, not in any test enviroment  \n15:56\u00a0<+mflorea>\u00a0vmassol/tmortagne: please review http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWikiEnterprise34M1#HXWiki2.1isthedefaultpagesyntax Is there anything I've missed?  \n15:57\u00a0<+Denis>\u00a0the warn is Fail to extract title from document  \n15:57\u00a0<+tmortagne>\u00a0Denis: yep that's it  \n15:58\u00a0<+tmortagne>\u00a0mflorea: it's a pain because it's a warning when it should be a error with the stack trace I think  \n15:58\u00a0<+tmortagne>\u00a0cause for this to fail it require a serious issue IMO  \n15:58\u00a0<+mflorea>\u00a0it's just a warning because it fallback on something else, no?  \n15:59\u00a0<+tmortagne>\u00a0problem is that we loose the exception  \n16:00\u00a0<+tmortagne>\u00a0took me a while to find that since the first error I got was a nullpointer on ExecutionContext which did not made much sense  \n16:03\u00a0<+tmortagne>\u00a0so wwe should really fix XWIKI-7227  \n16:04\u00a0<+mflorea>\u00a0yep  \n16:05\u00a0<+tmortagne>\u00a0first issue is that this warning is displayed when the exception is produced by pushDocumentInContext and that it did not even tried to render  \n16:06\u00a0<+tmortagne>\u00a0mflorea: \"from now one\" -> \"from now on\" ?  \n16:06\u00a0<+tmortagne>\u00a0(reviewing the RN)  \n16:06\u00a0<vmassol>\u00a0mflorea: updated syntax section in RN  \n16:06\u00a0<+tmortagne>\u00a0so maybe the typo is from vmassol :)  \n16:07\u00a0<vmassol>\u00a0yep was from me  \n16:07\u00a0<+mflorea>\u00a0yep, fixed it  \n16:07\u00a0<+mflorea>\u00a0thanks vmassol for the update  \n16:07\u00a0<vmassol>\u00a0forgot parethesis  \n16:08\u00a0<vmassol>\u00a0hmmm  \n16:08\u00a0<vmassol>\u00a0I'm looking at api breakages  \n16:08\u00a0<vmassol>\u00a0for ex:  \n16:08\u00a0<vmassol>\u00a0ERROR: 7002: org.xwiki.model.reference.EntityReference: Method 'public org.xwiki.model.reference.EntityReference clone()' has been removed  \n16:08\u00a0<+mflorea>\u00a0ignore them  \n16:08\u00a0<vmassol>\u00a0was this really done in 3.4M1?  \n16:08\u00a0<+mflorea>\u00a0I need to recreate the report  \n16:08\u00a0<vmassol>\u00a0ok  \n16:09\u00a0<+mflorea>\u00a0the exclude list wasn't updated after 3.3 release  \n16:09\u00a0<+mflorea>\u00a0I've just update it, and I'm going to regenerate the clirr report now  \n16:09\u00a0<vmassol>\u00a0k  \n16:11\u00a0<+Denis>\u00a0mflorea: bug I am currently fixing should be related to M1 or not ?  \n16:11\u00a0<+mflorea>\u00a0Denis: why do you mean by \"related\"?  \n16:12\u00a0<+Denis>\u00a0affect version  \n16:12\u00a0<+tmortagne>\u00a0does it affect M1 ?  \n16:12\u00a0<+Denis>\u00a0yes  \n16:12\u00a0<+tmortagne>\u00a0then yes :)  \n16:12\u00a0<+Denis>\u00a0buty what is M1  \n16:12\u00a0<+Denis>\u00a0is it really the build of this morning ?  \n16:13\u00a0<+mflorea>\u00a0yes, I think so, you're talking about the XWIKI-7227 ?  \n16:13\u00a0<+Denis>\u00a0it is unuable  \n16:13\u00a0<+tmortagne>\u00a0what bug are you talking about ?  \n16:13\u00a0<+Denis>\u00a0no, I am fixing other issues :)  \n16:13\u00a0<+mflorea>\u00a0it passes all the unit and functional test (expect one). Why do you say it's unsuable  \n16:14\u00a0<+mflorea>\u00a0and are you testing the release or a snapshot?  \n16:14\u00a0<+tmortagne>\u00a0to be extra sure you should test it on M1 but lets say it's on M1 it's not a big deal  \n16:15\u00a0<+Denis>\u00a0it is  \n16:15\u00a0<+Denis>\u00a0currently  \n16:15\u00a0<+Denis>\u00a0but M1 is so broken, that I do not understand why we release it  \n16:16\u00a0<+mflorea>\u00a0Denis: are you testing the actual release or a snapshot?  \n16:16\u00a0<+Denis>\u00a0\u00a0http://maven.xwiki.org/releases/org/xwiki/manager/xwiki-manager-web/3.4-milestone-1/xwiki-manager-web-3.4-milestone-1.war \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a012-Jan-2012 11:21 \u00a0132M  \n16:17\u00a0<+mflorea>\u00a0ok, let me take it (I'll take the zip, Jetty+HSQLDB) and test it with you  \n16:20\u00a0<evalica>\u00a0has quit  \n16:23\u00a0<evalica>\u00a0has joined #xwiki  \n16:24\u00a0<+mflorea>\u00a0Denis: I have 3.4M1 running. What's not working?  \n16:24\u00a0<+mflorea>\u00a0(Jetty+HSQLDB)  \n16:24\u00a0<+Denis>\u00a0I am running it on Tomcat/MySQL  \n16:25\u00a0<+mflorea>\u00a0at least let's see if it's an integration problem or a generic problem  \n16:25\u00a0<+Denis>\u00a0and I got NPE on the context issue which cause rendering to be broken  \n16:26\u00a0<+mflorea>\u00a0how can I reproduce it?  \n16:26\u00a0<+Denis>\u00a0it seems to happen randomly  \n16:26\u00a0<+mflorea>\u00a0:)  \n16:26\u00a0<+Denis>\u00a0but very often  \n16:26\u00a0<+Denis>\u00a0this is why it is unusable  \n16:27\u00a0<+Denis>\u00a0we need to refresh pages two or three times to get it once  \n16:27\u00a0<+mflorea>\u00a0which page?  \n16:30\u00a0<+mflorea>\u00a0I believe something triggered this behavior on your side. I've refreshed Main.WebHome a few time and the administration but everything's fine  \n16:34\u00a0<vmassol>\u00a0I've also not seen this  \n16:34\u00a0<vmassol>\u00a0so far  \n16:39\u00a0<+Denis>\u00a0all pages, all the time  \n16:40\u00a0<+tmortagne>\u00a0Denis: in my case it seems to me a concurrency issue in tomcat which makes it looks random too  \n16:40\u00a0<vmassol>\u00a0cjdelisle: git commits don't make it anymore to irc?  \n16:40\u00a0<+tmortagne>\u00a0when I put a breakpoint in the right place and way a bit each time I can make it work almost the time  \n16:41\u00a0<+tmortagne>\u00a0s/way/wait/  \n16:41\u00a0<+Denis>\u00a0tmortagne: do you means I should stay behind my debugger to use M1 :D  \n16:41\u00a0<+tmortagne>\u00a0nop trying to see if it's the exact same thing  \n16:42\u00a0<+tmortagne>\u00a0I tuogh it was cause by Eclipse in my case  \n16:42\u00a0<+tmortagne>\u00a0s/cause/caused/  \n16:42\u00a0<+Denis>\u00a0it seems really similar yes  \n16:43\u00a0<+tmortagne>\u00a0to be sure we would need to find a way to get the real exception in your case, all I can see if for you to patch display-api module and change the log  \n16:43\u00a0<vmassol>\u00a0or use byteman ;)  \n16:44\u00a0<+tmortagne>\u00a0(which is what I did on Eclipse to finally see the real issue, which did not help be a lot given the issue...)  \n16:44\u00a0<+tmortagne>\u00a0s/be/me/  \n16:44\u00a0<+tmortagne>\u00a0in my case it looks a lot like a tomcat bug which is why I tough is was caused by Eclipse integration  \n16:45\u00a0<+Denis>\u00a0I am ?1 to release M1 until we fix that, it is blocker  \n16:46\u00a0<+Denis>\u00a0tmortagne: \u00a0I do not understand what you want  \n16:47\u00a0<+tmortagne>\u00a0Denis: I want to get the real exception behind the warning  \n16:47\u00a0<+tmortagne>\u00a0to see why its failing exactly  \n16:47\u00a0<+tmortagne>\u00a0there is too things:  \n16:47\u00a0<+tmortagne>\u00a0\\* find why the hell it's failing  \n16:47\u00a0<+tmortagne>\u00a0\\* make sure whatever happen it's not going to break the execution context  \n16:47\u00a0<+Denis>\u00a0I have an NPE on line 144 of SheetDocumentDisplayer, which simply try to get the xcontext from the execution context, so one of these is null  \n16:48\u00a0<+tmortagne>\u00a0Denis: again that's not the real issue  \n16:48\u00a0<+tmortagne>\u00a0before that you have a warning  \n16:48\u00a0<+tmortagne>\u00a0and because of what produce the warning the ExecutionContext is removed from Exection  \n16:48\u00a0<+tmortagne>\u00a0s/Exection/Execution/  \n16:49\u00a0<+tmortagne>\u00a0so then the next time something try to get the context you get a nullpointer  \n16:50\u00a0<+Denis>\u00a0lll  \n16:50\u00a0<+Denis>\u00a0mmm  \n16:50\u00a0<+tmortagne>\u00a0in my case it's failing in ServletResponse#setLocale  \n16:50\u00a0<+Denis>\u00a0seems we have an error juste before, not a warning, from ObservationContextListener  \n16:50\u00a0<+tmortagne>\u00a0before that  \n16:51\u00a0<+tmortagne>\u00a0this one is cause by the same thing  \n16:51\u00a0<+tmortagne>\u00a0ObservationContextListener is saying that it doe snot find the beginevent, right ?  \n16:51\u00a0<+Denis>\u00a0right  \n16:51\u00a0<+tmortagne>\u00a0that's because there is no ExecutionContext at all  \n16:51\u00a0<+tmortagne>\u00a0so it can't find it in the ExecutionContext  \n16:52\u00a0<+tmortagne>\u00a0should probably improve ObservationContextListener error when there is no executionContext  \n16:52\u00a0<+Denis>\u00a0ok  \n16:52\u00a0<+Denis>\u00a0but nothing before  \n16:53\u00a0<+tmortagne>\u00a0Denis: you said you got \"Fail to extract title from document\"  \n16:54\u00a0<+tmortagne>\u00a0which is the one I get too  \n16:54\u00a0<+Denis>\u00a0that was after the obseration, but not the first time  \n16:54\u00a0<+mflorea>\u00a0Denis: 3.4M1 was already released. Whatever you may find can be fixed in RC1  \n16:54\u00a0<+Denis>\u00a0I suspect that one of the thread has lost its context  \n16:54\u00a0<+Denis>\u00a0maybe the first one  \n16:56\u00a0<+tmortagne>\u00a0the same push/popContext can happen in other rendering places too, does not have to be this warning exactly but the result is the same  \n16:56\u00a0<+tmortagne>\u00a0that's the one I get the most that's all  \n16:58\u00a0<+Denis>\u00a0tmortagne: http://pastebin.com/nLPPHCUu  \n16:58\u00a0<+Denis>\u00a0you have the first issue, and the start of the second, just after a server restart  \n17:03\u00a0<+tmortagne>\u00a0could you try to put a modified .class of AbstractDocumentTitleDisplayer (line 171 ) with a e.printStackTrace(), you should find the root cause I think  \n17:03\u00a0<+tmortagne>\u00a0in xwiki-platform-displayer-api module  \n17:04\u00a0<+tmortagne>\u00a0( Denis )  \n17:07\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:12\u00a0<@sdumitriu>\u00a0mflorea: Still having trouble with the release?  \n17:13\u00a0<+Denis>\u00a0tmortagne: trying...  \n17:14\u00a0<+mflorea>\u00a0sdumitriu: nop, I had to regenerate the clirr report because the list of excludes hasn't been updated after 3.3 release. Do you have anything to add to the RN regarding EM UI improvements?  \n17:14\u00a0<@sdumitriu>\u00a0Looking now  \n17:15\u00a0<+Denis>\u00a0tmortagne: cause is SetLocale  \n17:15\u00a0<+tmortagne>\u00a0ok so it's the same thing...  \n17:15\u00a0<+tmortagne>\u00a0I debuged a bit tomcat source but could not find why it has this issue  \n17:16\u00a0<+tmortagne>\u00a0looks like an internal context in null at some point  \n17:16\u00a0<@sdumitriu>\u00a0tmortagne: Instead of commenting that, you can wrap it in a trycatch  \n17:16\u00a0<+mflorea>\u00a0sdumitriu: are you still editing \"Project Release Notes\" If yes, change the section title \"3.3.x\" -> \"3.4.x\"  \n17:16\u00a0<+tmortagne>\u00a0sdumitriu: not going to commit it anyway so I do the quickest  \n17:17\u00a0<+tmortagne>\u00a0I don't have clean justification for the try/catch either  \n17:17\u00a0<+tmortagne>\u00a0but if it's a real \u00a0issue and not a Eclipse/tomcat one we will maybe fix the real thing this time  \n17:18\u00a0<+tmortagne>\u00a0it's a concurrency issue for sure since I don't have any issue if wait something like 20s each time it stop on a breakpoint in setLocale  \n17:19\u00a0<+tmortagne>\u00a0but I don't understand why now  \n17:19\u00a0<+tmortagne>\u00a0I don't have the issue since very long  \n17:20\u00a0<+Denis>\u00a0but we were not having it previously, so what has been change recently ?  \n17:21\u00a0<+tmortagne>\u00a0it has to be something pretty tricky since jetty does not have any issue it seems  \n17:21\u00a0<+tmortagne>\u00a0I don't see anything new related to response objects directly  \n17:22\u00a0<sburjan>\u00a0has quit  \n17:41\u00a0<vmassol>\u00a0tmortagne: are our functional tests going to xwiki.org here: http://ci.xwiki.org/job/xwiki-enterprise-test-webstandards/org.xwiki.enterprise$xwiki-enterprise-test-webstandards/932/testReport/org.xwiki.test.webstandards.framework/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_space\\_XWiki\\_u002C\\_page\\_AddExtensions\\_executed\\_with\\_credentials\\_Admin\\_admin/ ?  \n17:42\u00a0<vmassol>\u00a0(we don't have this info in the stack trace btw would be cool to see what server we're hittiing in \"Invalid answer (500) fo the server when requesting\")  \n17:43\u00a0<+tmortagne>\u00a0vmassol: according to the stack trace it's extension.xwiki.org  \n17:43\u00a0<vmassol>\u00a0where do you see that?  \n17:43\u00a0<+tmortagne>\u00a0but I don't see why xhtml validity test is trigerring search  \n17:44\u00a0<+tmortagne>\u00a0at org.xwiki.extension.repository.xwiki.internal.XWikiExtensionRepository.getRESTResource(XWikiExtensionRepository.java:114) ~[xwiki-platform-extension-repository-xwiki-handler-3.4-20120113.141824-157.jar:na]  \n17:44\u00a0<vmassol>\u00a0\u00a0[http://127.0.0.1:8080/xwiki/bin/view/XWiki/AddExtensions%5D  \n17:44\u00a0<+tmortagne>\u00a0and there is only one \"xwiki\" type repository by default  \n17:44\u00a0<+tmortagne>\u00a0which is extensions.xwiki.org  \n17:44\u00a0<vmassol>\u00a0how do you know it extensions.xwiki.org from this line?  \n17:44\u00a0<vmassol>\u00a0you're guessing right?  \n17:44\u00a0<+tmortagne>\u00a0yes  \n17:44\u00a0<vmassol>\u00a0ok  \n17:44\u00a0<+tmortagne>\u00a0as I said that's because there is only one  \n17:44\u00a0<+tmortagne>\u00a0by default  \n17:44\u00a0<vmassol>\u00a0do you agree that it would be nice to put that info in he message?  \n17:45\u00a0<vmassol>\u00a0\"Invalid answer (500) fo the server when requesting\"  \n17:45\u00a0<vmassol>\u00a0\"Invalid answer (500) fo the server when requesting <put what we request here>\"  \n17:45\u00a0<vmassol>\u00a0Now we need to fix this tests since we should not depend on external resources  \n17:45\u00a0<vmassol>\u00a0otherwise we get false positives like this  \n17:46\u00a0<+tmortagne>\u00a0well this one is actually not generated by us, it would go in Failed to search extensions based on pattern [] I think  \n17:46\u00a0<+tmortagne>\u00a0it's not a test  \n17:46\u00a0<vmassol>\u00a0hmm indeed  \n17:46\u00a0<vmassol>\u00a0but still  \n17:46\u00a0<vmassol>\u00a0it's a tes  \n17:46\u00a0<vmassol>\u00a0we should configure XE  \n17:46\u00a0<+tmortagne>\u00a0I guess that's because this page displauy all existing extension by defau  \n17:46\u00a0<vmassol>\u00a0to not go out  \n17:46\u00a0<+tmortagne>\u00a0default  \n17:46\u00a0<vmassol>\u00a0yes  \n17:46\u00a0<vmassol>\u00a0but we can configure xe  \n17:47\u00a0<vmassol>\u00a0do you agree?  \n17:47\u00a0<vmassol>\u00a0(we set the extension repo config param)  \n17:47\u00a0<+tmortagne>\u00a0sure a test should not require internet access anyway  \n17:47\u00a0<vmassol>\u00a0exactly  \n17:48\u00a0<+Denis>\u00a0tmortagne: we revert to 3.3, but we cannot install our extension, it wait indefinitely after submitting the artifact id :(  \n17:49\u00a0<+Denis>\u00a0is there any know issue ?  \n17:49\u00a0<+tmortagne>\u00a0nop, 3.3 is supposed to work well  \n17:49\u00a0<+tmortagne>\u00a0where to you provide the id ?  \n17:50\u00a0<+Denis>\u00a0:( nothing happen, and I have planed a demo tomorrow  \n17:50\u00a0<+tmortagne>\u00a0in advanced install ?  \n17:50\u00a0<+Denis>\u00a0yes  \n17:50\u00a0<+tmortagne>\u00a0do you provide the version too  \n17:50\u00a0<+tmortagne>\u00a0?  \n17:50\u00a0<+Denis>\u00a0ye  \n17:50\u00a0<+Denis>\u00a0s  \n17:50\u00a0<+Denis>\u00a0and some stuff get downloaded  \n17:50\u00a0<+Denis>\u00a0oh  \n17:50\u00a0<+tmortagne>\u00a0?  \n17:51\u00a0<+Denis>\u00a0it finally respond with some velocity code in the page  \n17:51\u00a0<+Denis>\u00a0#prepareInstallDependencie....  \n17:51\u00a0<+tmortagne>\u00a0any error ?  \n17:51\u00a0<+Denis>\u00a0no a page full of velocity code  \n17:51\u00a0<+tmortagne>\u00a0ok so it did not actually started to install it was before the pply button, right ?  \n17:51\u00a0<+Denis>\u00a0maybe we should upgrade the xar  \n17:51\u00a0<@sdumitriu>\u00a0tmortagne: I get the 500 response from extensions.xwiki.org very often  \n17:51\u00a0<+tmortagne>\u00a0s/pply/apply/  \n17:52\u00a0<+tmortagne>\u00a0sdumitriu: xwiki.org is not in a very good shape theses days it seems  \n17:52\u00a0<+Denis>\u00a0right, I am upgrading the xar...  \n17:52\u00a0<vmassol>\u00a0tmortagne: what timeout is used to connect to xwiki.org?  \n17:52\u00a0<vmassol>\u00a0(for the socket connection)  \n17:53\u00a0<+tmortagne>\u00a0need to check, I don't remember  \n17:53\u00a0<+tmortagne>\u00a0not 100% sure there is one  \n17:53\u00a0<vmassol>\u00a0there's always one  \n17:53\u00a0<vmassol>\u00a0but you may use the default one  \n17:54\u00a0<vmassol>\u00a0fixing webstandards test to remove connection to xwiki.org  \n17:54\u00a0<+tmortagne>\u00a0looks like it's the HttpClient default  \n17:54\u00a0<+Denis>\u00a0tmortagne: nope, we had already the latest xar :(  \n17:55\u00a0<+Denis>\u00a0should we apply anyway ?  \n17:56\u00a0<+tmortagne>\u00a0Denis: you get only velocity ? no error or anything in the log ?  \n17:57\u00a0<@sdumitriu>\u00a0Denis: are you installing from extensions.x.o?  \n17:57\u00a0<@sdumitriu>\u00a0Or from your own repo?  \n17:57\u00a0<+Denis>\u00a0nothing, just one #prepareInstallDependencies and some #prepareIntall as text in the page followed by \"The following new extension will be installed\u2026\"  \n17:57\u00a0<+Denis>\u00a0my own repos and maven central only  \n17:58\u00a0<+tmortagne>\u00a0Denis: only maven repositories ?  \n17:59\u00a0<@sdumitriu>\u00a0Does it work if you try to install org.xwiki.platform:xwiki-platform-rendering-macro-php 3.3 ?  \n17:59\u00a0<+Denis>\u00a0we had apply, it process for a while, had report a page some unknow macro debug, and seems to have process the install  \n17:59\u00a0<+Denis>\u00a0only maven yes  \n17:59\u00a0<+Denis>\u00a0I have to leave, talk to you later  \n18:02\u00a0<+tmortagne>\u00a0AFAIK maven install work well in 3.3 at least, can't find any jira issue after 3.3 for it  \n18:03\u00a0<+tmortagne>\u00a0just one issue with uninstall when the extension have core dependencies  \n18:04\u00a0<sburjan`>\u00a0has joined #xwiki  \n18:04\u00a0<+tmortagne>\u00a0and several search related issue but which should not affect you if you directly install  \n18:15\u00a0<mflorea>\u00a0has quit  \n18:15\u00a0<mflorea>\u00a0has joined #xwiki  \n18:17\u00a0<Denis>\u00a0has quit  \n18:20\u00a0<vmassol>\u00a0the platform build is failing for me  \n18:21\u00a0<vmassol>\u00a0http://pastebin.com/m02j8ngJ  \n18:21\u00a0<vmassol>\u00a0workspaces UI module  \n18:22\u00a0<vmassol>\u00a0looks like something fun\u2026  \n18:23\u00a0<Enygma`1>\u00a0vmassol: I don`t know why that (seemingly randomly) happens  \n18:26\u00a0<vmassol>\u00a0Enygma`1: so far it happens 100% for me. Trying a 3rd time...  \n18:26\u00a0<Enygma`1>\u00a0it happened in the past too  \n18:26\u00a0<Enygma`1>\u00a0it`s not related to workspaces  \n18:26\u00a0<Enygma`1>\u00a0it`s just that probably workspaces is the only platform module using it  \n18:27\u00a0<vmassol>\u00a0looks related to xmldocupdate plugin  \n18:27\u00a0<Enygma`1>\u00a0xwiki-platform-tool-xmldoc-update-plugin  \n18:27\u00a0<Enygma`1>\u00a0yes  \n18:27\u00a0<+tmortagne>\u00a0XEM used to use it too (or maybe it still use it) and never had issue  \n18:28\u00a0<Enygma`1>\u00a0yes, XEM uses it as well  \n18:32\u00a0<vmassol>\u00a0guys we really need to focus on removing the build failures, we're getting too many jenkins emails  \n18:32\u00a0<@sdumitriu>\u00a0+1  \n18:33\u00a0<@sdumitriu>\u00a0mflorea: I didn't receive the announcement email  \n18:33\u00a0<vmassol>\u00a0could you please all try to look at ci.xwiki.org and pick somerthing to fix as soon as you can  \n18:33\u00a0<+mflorea>\u00a0sdumitriu: in a few minutes, I was catching up with my emails  \n18:34\u00a0<vmassol>\u00a0I'm removing EM connection from functional tests right now  \n18:34\u00a0<@sdumitriu>\u00a0mflorea: OK, I just saw it marked as (/) on the release plan, that's why I asked  \n18:34\u00a0<vmassol>\u00a0(testing my fix)  \n18:43\u00a0<jvdrean>\u00a0has quit  \n18:48\u00a0<vmassol>\u00a0tmortagne: I'm adding the following in TestSetup, should be ok right?  \n18:48\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// Don't set any extension repository since we don't need it and we don't want to require internet  \n18:48\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// connection for the tests.  \n18:48\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Properties properties = executor.loadXWikiProperties();  \n18:48\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0properties.setProperty(\"extension.repositories\", \"\");  \n18:48\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0executor.saveXWikiProperties(properties);  \n18:48\u00a0<vmassol>\u00a0(XWikiTestSetup)  \n18:49\u00a0<vmassol>\u00a0hmmm  \n18:49\u00a0<+tmortagne>\u00a0you mean the test setup for xhtml tests right ?  \n18:49\u00a0<+tmortagne>\u00a0xhtml validity  \n18:49\u00a0<vmassol>\u00a0XWikiTestSetup is in platform  \n18:49\u00a0<vmassol>\u00a0but used by several func tests  \n18:49\u00a0<+tmortagne>\u00a0-1 then  \n18:49\u00a0<vmassol>\u00a0which test do you want to connect to internet?  \n18:50\u00a0<vmassol>\u00a02012-01-13 18:49:36,175 [http://127.0.0.1:8080/xwiki/bin/view/XWiki/ExtensionManagerMacros] WARN \u00a0tExtensionManagerConfiguration - Faild to parse repository [] from configuration  \n18:50\u00a0<vmassol>\u00a0org.xwiki.extension.internal.ExtensionManagerConfigurationException: Don't match repository configuration []  \n18:50\u00a0<vmassol> at org.xwiki.extension.internal.DefaultExtensionManagerConfiguration.parseRepository(DefaultExtensionManagerConfiguration.java:164) ~[xwiki-platform-extension-api-3.4-20120113.172206-160.jar:na]  \n18:50\u00a0<vmassol>\u00a0I think EM doesn't work when there are no repo defined  \n18:50\u00a0<vmassol>\u00a0we should fix that  \n18:50\u00a0<+tmortagne>\u00a0not internet  \n18:50\u00a0<+tmortagne>\u00a0but custom repositories  \n18:50\u00a0<vmassol>\u00a0the test will set the custom repo  \n18:50\u00a0<+tmortagne>\u00a0and will be overridden by XWikiTestSetup  \n18:51\u00a0<vmassol>\u00a0(the current test that sets the custom work doesn't use XWikiTestSetup)  \n18:51\u00a0<vmassol>\u00a0XWikiTestSetup is the old way  \n18:51\u00a0<vmassol>\u00a0the new way makes the test decides on the executor config  \n18:51\u00a0<+tmortagne>\u00a0ok then  \n18:51\u00a0<vmassol>\u00a0new way is with the suite  \n18:52\u00a0<vmassol>\u00a0using @XWikiExecutorSuite.PreStart  \n18:52\u00a0<+tmortagne>\u00a0vmassol: the issue is not that there is no repository but that you defined the repository \"\" ;)  \n18:52\u00a0<+tmortagne>\u00a0will make sure EM support that  \n18:52\u00a0<vmassol>\u00a0how do you specify no repo?  \n18:52\u00a0<vmassol>\u00a0:)  \n18:52\u00a0<+tmortagne>\u00a0you can't  \n18:52\u00a0<vmassol>\u00a0ok waiting for your fix then before committing  \n18:53\u00a0<+tmortagne>\u00a0so I will make sure it skip empty repositories  \n18:53\u00a0<+tmortagne>\u00a0that's because it ask for a list to commons configuration  \n18:53\u00a0<+tmortagne>\u00a0and get a list with \"\" in it  \n18:53\u00a0<+tmortagne>\u00a0should be ok  \n18:53\u00a0<+tmortagne>\u00a0it's just a warning it does not prevent it to work  \n18:54\u00a0<vmassol>\u00a0ah didn't see  \n18:54\u00a0<+tmortagne>\u00a0just indicating that one of the repo is invalid and it will not take it into account  \n18:54\u00a0<vmassol>\u00a0I hate warnings with stack trace  \n18:54\u00a0<vmassol>\u00a0:(  \n18:55\u00a0<vmassol>\u00a0I have to go in 5mn, will commit later tonight or tomorrow  \n18:55\u00a0<+tmortagne>\u00a0yep me too  \n18:55\u00a0<+tmortagne>\u00a0creating a jira issue to not forget  \n18:57\u00a0<+tmortagne>\u00a0vmassol: should still warn about the fact there is no repositories, right ? But a nicer message without stack trace of course ;)  \n18:58\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n18:58\u00a0<vmassol>\u00a0not sure you need to warn  \n18:58\u00a0<vmassol>\u00a0you could put the info in debug mode for sure  \n18:58\u00a0<+tmortagne>\u00a0well it's a but weird to have no repository in EM  \n18:58\u00a0<vmassol>\u00a0well since by default it's not empty  \n18:58\u00a0<vmassol>\u00a0if it is it means the user has voluntarily done it  \n18:59\u00a0<+tmortagne>\u00a0yea maybe  \n18:59\u00a0<+tmortagne>\u00a0will put an info then  \n18:59\u00a0<vmassol>\u00a0OTOH  \n18:59\u00a0<+tmortagne>\u00a0I mean a debug  \n18:59\u00a0<vmassol>\u00a0having an info in the EM admin UI is probably good  \n18:59\u00a0<vmassol>\u00a0(or maybe even in the EM UI)  \n19:00\u00a0<vmassol>\u00a0not sure about this though  \n19:02\u00a0<mflorea>\u00a0has quit  \n19:02\u00a0<evalica>\u00a0has quit  \n19:03\u00a0<+tmortagne>\u00a0vmassol: at some point I want to have repository setup in the EM UI anyway so you will be able to it there  \n19:03\u00a0<+tmortagne>\u00a0s/too it/to see it/  \n19:04\u00a0<+tmortagne>\u00a0have to go  \n19:04\u00a0<+tmortagne>\u00a0bye  \n19:04\u00a0<tmortagne>\u00a0has quit  \n19:16\u00a0<mflorea>\u00a0has joined #xwiki  \n19:17\u00a0<mflorea>\u00a0has quit  \n19:17\u00a0<CIA-121>\u00a0Eduard Moraru\u000f master\u000f \\* r77b7b33\u000f \u000f/ xwiki-platform-core/xwiki-platform-workspace/xwiki-platform-workspace-template-features/src/main/resources/Panels/WorkspaceInformationPanel.xml :\u000f - Used as less {{html}} macros as possible on the workspace information panel. - http://git.io/ie-dzw  \n19:17\u00a0<CIA-121>\u00a0Eduard Moraru\u000f stable-3.3.x\u000f \\* r86eb31d\u000f \u000f/ xwiki-platform-core/xwiki-platform-workspace/xwiki-platform-workspace-template-features/src/main/resources/Panels/WorkspaceInformationPanel.xml :\u000f - Used as less {{html}} macros as possible on the workspace information panel. ...  \n19:17\u00a0<CIA-121>\u00a0Eduard Moraru\u000f master\u000f \\* r5d73207\u000f \u000f/ (2 files):\u000f XWIKI-7284: Convert all Workspaces pages to 2.0 syntax. ...  \n19:17\u00a0<CIA-121>\u00a0Eduard Moraru\u000f stable-3.3.x\u000f \\* r9d58867\u000f \u000f/ (2 files):\u000f XWIKI-7284: Convert all Workspaces pages to 2.0 syntax. ...  \n19:24\u00a0<Enygma`1>\u00a0has quit  \n19:50\u00a0<CIA-121>\u00a0Sergiu Dumitriu\u000f master\u000f \\* rcce6804\u000f \u000f/ xwiki-platform-core/xwiki-platform-administration/src/main/resources/XWiki/RegistrationHelp.xml :\u000f Merge pull request #32 from sorinello/master ...  \n19:58\u00a0<lucaa>\u00a0has quit  \n20:01\u00a0<lucaa>\u00a0has joined #xwiki  \n20:21\u00a0<lucaa>\u00a0has quit  \n20:36\u00a0<abusenius\\_>\u00a0is now known as <abusenius>  \n20:55\u00a0<SvenDowideit>\u00a0has quit  \n20:57\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n20:57\u00a0<SvenDowideit>\u00a0has quit  \n20:57\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n20:57\u00a0<SvenDowideit>\u00a0has quit  \n20:58\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n20:58\u00a0<SvenDowideit>\u00a0has quit  \n20:58\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n21:43\u00a0<lucaa>\u00a0has joined #xwiki  \n21:50\u00a0<lucaa>\u00a0has quit  \n23:47\u00a0<abusenius>\u00a0has quit  \n\n"}