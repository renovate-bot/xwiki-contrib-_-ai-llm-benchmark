{"id": "dev:IRC.xwikiArchive20140703", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140703", "title": "IRC Archive for channel #xwiki on 03 July 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Denis>\u00a0has quit  \n00:54\u00a0<Slashman>\u00a0has quit  \n01:07\u00a0<teekay>\u00a0has quit  \n01:12\u00a0<Denis>\u00a0has joined #xwiki  \n02:43\u00a0<Denis>\u00a0has quit  \n02:52\u00a0<OSIMasson>\u00a0has quit  \n03:04\u00a0<OSIMasson>\u00a0has joined #xwiki  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n06:01\u00a0<Denis>\u00a0has quit  \n07:07\u00a0<msmeria>\u00a0has joined #xwiki  \n07:13\u00a0<lucaa>\u00a0has joined #xwiki  \n07:22\u00a0<OSIMasson>\u00a0has quit  \n07:57\u00a0<vmassol>\u00a0has joined #xwiki  \n08:10\u00a0<evalica>\u00a0has joined #xwiki  \n08:17\u00a0<vmassol>\u00a0good morning  \n08:28\u00a0<mflorea>\u00a0has joined #xwiki  \n08:28\u00a0<Enygma`>\u00a0has joined #xwiki  \n08:35\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:43\u00a0<lucaa>\u00a0has quit  \n09:00\u00a0<cjd>\u00a0has joined #xwiki  \n09:05\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:17\u00a0<vmassol>\u00a0has quit  \n09:17\u00a0<vmassol>\u00a0has joined #xwiki  \n09:27\u00a0<lucaa>\u00a0has joined #xwiki  \n09:27\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:27\u00a0<vmassol>\u00a0tmortagne: question for you. Is it possible/easy to write a custom merge when importing a page from a XAR in EM? It's for my home page app, I'd like to intercept the importing event and do my own merge and bypass the EM one  \n09:28\u00a0<mflorea>\u00a0has quit  \n09:30\u00a0<tmortagne>\u00a0vmassol: there is no extension point at this level if that's the question  \n09:30\u00a0<vmassol>\u00a0I'm more thinking about an event before the import  \n09:30\u00a0<vmassol>\u00a0(before the merge)  \n09:30\u00a0<vmassol>\u00a0and could cancel the merge  \n09:30\u00a0<vmassol>\u00a0so that the event listener would do it by itself  \n09:30\u00a0<vmassol>\u00a0my need:  \n09:31\u00a0<vmassol>\u00a0- HomePage app provides a new Main.WebHome page  \n09:31\u00a0<tmortagne>\u00a0there is no special event, the only thing you got is pre document save event but it's not cancelable (something we should improve IMO)  \n09:31\u00a0<vmassol>\u00a0- If the user has custom content in his Main.WebHome page then the HomePage app should only add the xclass and not do a merge on title or content  \n09:32\u00a0<tmortagne>\u00a0you mean add the object ?  \n09:32\u00a0<vmassol>\u00a0yes sorry the xobject  \n09:32\u00a0<vmassol>\u00a0otherwise the merge will blank the content  \n09:33\u00a0<vmassol>\u00a0(that's what happened at least when I tried it)  \n09:33\u00a0<tmortagne>\u00a0it will blank the content only if you did not couched it by default  \n09:33\u00a0<tmortagne>\u00a0touched  \n09:33\u00a0<vmassol>\u00a0I had touched it  \n09:33\u00a0<vmassol>\u00a0and it blanked it and even worse  \n09:33\u00a0<tmortagne>\u00a0without any conflict ?  \n09:33\u00a0<vmassol>\u00a0it merged the title resulting in something wrong  \n09:33\u00a0<vmassol>\u00a0with conflict  \n09:34\u00a0<vmassol>\u00a0it proposed to me to merge and I said yes as would most people do  \n09:34\u00a0<vmassol>\u00a0I had \"custom content\" in title and in the new home page it's empty  \n09:34\u00a0<vmassol>\u00a0and AFAIR I got just \"c\" as the new title  \n09:36\u00a0<tmortagne>\u00a0totally blank content sounds like a bug to me, merged title I guess it's normal, only thing we could do there is probably just not merge the title  \n09:36\u00a0<vmassol>\u00a0I'll retest it  \n09:36\u00a0<tmortagne>\u00a0what did you customized exactly in the content ? it was completely different content ?  \n09:37\u00a0<vmassol>\u00a0yes I had put somehing like \"custom content\"  \n09:37\u00a0<vmassol>\u00a0by default it's {{include \u2026/}}  \n09:37\u00a0<vmassol>\u00a0and in the new page it's just empty  \n09:37\u00a0<tmortagne>\u00a0ok  \n09:37\u00a0<tmortagne>\u00a0IMO this is a bug, I will check your use case in a unit test  \n09:38\u00a0<vmassol>\u00a0let me retry it first maybe  \n09:38\u00a0<tmortagne>\u00a0for the title I don't know, if everyone is OK I guess we can decide to not try to merge it at all since it looks like it pretty much never give proper result  \n09:39\u00a0<vmassol>\u00a0I think the same should apply for all String property tipes  \n09:39\u00a0<vmassol>\u00a0types  \n09:39\u00a0<ClemensR>\u00a0has joined #xwiki  \n09:39\u00a0<vmassol>\u00a0(not just title)  \n09:45\u00a0<octo>\u00a0has joined #xwiki  \n09:50\u00a0<tmortagne>\u00a0vmassol: just reproduced the empty content bug in a unit test, looking at it  \n09:50\u00a0<cjd>\u00a0http://verplant.org/oo\\_programming\\_in\\_c.shtml <-- nice  \n09:50\u00a0<vmassol>\u00a0tmortagne: ok  \n09:50\u00a0<vmassol>\u00a0thanks  \n09:52\u00a0<Denis>\u00a0has joined #xwiki  \n09:59\u00a0<octo>\u00a0Good morning :)  \n10:00\u00a0<vmassol>\u00a0octo?  \n10:00\u00a0<vmassol>\u00a0:)  \n10:00\u00a0<vmassol>\u00a0good morning  \n10:00\u00a0<octo>\u00a0vmassol: Hey ;)  \n10:00\u00a0<vmassol>\u00a0as in Octo Technology?  \n10:00\u00a0<vmassol>\u00a0ah no  \n10:00\u00a0<octo>\u00a0Uhm, no, no affiliation  \n10:00\u00a0<vmassol>\u00a0ok my bad, thought you were someone I knew for a moment ;)  \n10:01\u00a0<octo>\u00a0I have a question regarding XWikiAuthService, maybe you have a pointer for me: checkAuth(user, password, \u2026) and authenticate(user, password, \u2026) seem very similar, yet the default implementation is radically different. Why? What's the difference?  \n10:02\u00a0<cjd>\u00a0my memory is bad but I seem to recall checkauth is called per-page-load and authenticate only on login  \n10:02\u00a0<vmassol>\u00a0sorry I don't know this part of the code but others here may help you if they have the time ;)  \n10:03\u00a0<cjd>\u00a0and as far as reasoning, \"it's always been that way\", ideally we'd replace the whole auth infra with a little HashMap<String, User> but that breaks a lot of legacy :)  \n10:05\u00a0<cjd>\u00a0also re your article about OOP in C, I've done a lot of the same things and discovered a few other things such as private fields and (optional) runtime type-checking, see: https://github.com/cjdelisle/cjdns/blob/master/memory/Allocator.h  \n10:06\u00a0<octo>\u00a0cjd: checkAuth(context) is called for every request  \n10:06\u00a0<octo>\u00a0cjd: The version with username and password seems to only be called from com/xpn/xwiki/gwt/api/server/XWikiServiceImpl.java  \n10:06\u00a0<cjd>\u00a0hang on, I'll take a quick look and see if a braincell decides to fire  \n10:08\u00a0<cjd>\u00a0ok authenticate() is overriding a function in SecurityFilter (a library)  \n10:10\u00a0<cjd>\u00a0so authenticate() is never called directly from XWiki code, XWiki calls into SecurityFilter and SecurityFilter calls into authenticate()  \n10:10\u00a0<tmortagne>\u00a0octo: AFAIK authenticate do the actual authentication while checkAuth in general is the plumbing around it (is auth really needed, gathering credentials, storing the user to not call authenticate for each request, etc.)  \n10:11\u00a0<cjd>\u00a0no, nvm  \n10:12\u00a0<tmortagne>\u00a0IMO checkAuth(String username, String password, String rememberme, XWikiContext context) should not be public and only checkAuth(XWikiContext context) should, lets call that legacy  \n10:12\u00a0<tmortagne>\u00a0I want to rewrite all that since a long time but never found the time  \n10:14\u00a0<octo>\u00a0cjd, tmortagne: Thanks! I just ignored the username and password fields and forwarded calls to the checkAuth(context) method, which works for me.  \n10:14\u00a0<tmortagne>\u00a0octo: that's usually what I do too in SSO authenticators  \n10:14\u00a0<octo>\u00a0Since I had to read a couple of AuthService implementations to figure this out, I was hoping to send you a PR with some improved javadoc on that interface \u2026  \n10:15\u00a0<tmortagne>\u00a0yea what we really \u00a0need in there is a better API but sure :)  \n10:17\u00a0<octo>\u00a0tmortagne: Let me see how much time I have left at the end of the quarter ;)  \n10:18\u00a0<Lyes1>\u00a0has joined #xwiki  \n10:19\u00a0<vmassol>\u00a0:)  \n10:21\u00a0<mflorea>\u00a0has joined #xwiki  \n10:36\u00a0<Slashman>\u00a0has joined #xwiki  \n10:37\u00a0<vmassol>\u00a0tmortagne: thanks  \n10:38\u00a0<vmassol>\u00a0would be great if you could send a proposal for the title or other xproperty fields for the merge so that we could have it in 6.2  \n10:38\u00a0<octo>\u00a0Alright, it appears that checkAuth(user, pw) calls Authenticator.processLogin() which calls AuthService.authenticate()  \n10:38\u00a0<vmassol>\u00a0actually would be interesting to see it in action, to see how hard it'll be to perform upgrades with non merge for these props  \n10:39\u00a0<tmortagne>\u00a0not sure what you mean by \"see it in action\"  \n10:39\u00a0<vmassol>\u00a0try some upgrades  \n10:39\u00a0<vmassol>\u00a0real life upgrades  \n10:39\u00a0<tmortagne>\u00a0the idea is not stop upgrade that field so there is not much to test  \n10:40\u00a0<tmortagne>\u00a0s/not/to/  \n10:41\u00a0<GuillaumeF>\u00a0has joined #xwiki  \n10:43\u00a0<tmortagne>\u00a0(s/upgrade/merge/)  \n10:48\u00a0<vmassol>\u00a0so when there's a title conflict for ex, you would use the user value and continue? not ask the user to pick either his value or the new one?  \n10:48\u00a0<vmassol>\u00a0(tmortagne)  \n10:49\u00a0<tmortagne>\u00a0vmassol: the discussion is about proposed merge and not if there should be a conflict displayed or not, in a case like that you will of course have a conflict  \n10:51\u00a0<vmassol>\u00a0tmortagne: what about fixing http://jira.xwiki.org/browse/XCOMMONS-618 for 6.1 too?  \n10:54\u00a0<tmortagne>\u00a0vmassol: It is, the issue just have the wrong fix for  \n10:54\u00a0<vmassol>\u00a0ok  \n10:54\u00a0<tmortagne>\u00a0I did not merged it in 6.0.x since I doubt wee will release one  \n10:54\u00a0<vmassol>\u00a0yes  \n10:54\u00a0<vmassol>\u00a0agreed  \n10:55\u00a0<vmassol>\u00a0sonar licenses fixed  \n11:07\u00a0<Enygma`>\u00a0has quit  \n11:08\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:11\u00a0<xwikiorg\\_guest\\_7>\u00a0has joined #xwiki  \n11:11\u00a0<lucaa>\u00a0has quit  \n11:11\u00a0<irctc530>\u00a0has joined #xwiki  \n11:11\u00a0<xwikiorg\\_guest\\_7>\u00a0has quit  \n12:48\u00a0<ClemensR>\u00a0has left #xwiki  \n13:11\u00a0<lucaa>\u00a0has joined #xwiki  \n13:16\u00a0<cjd>\u00a0I'm going to learn how to create a wiki on myxwiki.org :D  \n13:25\u00a0<lucaa>\u00a0has quit  \n13:34\u00a0<vmassol>\u00a0has quit  \n13:38\u00a0<vmassol>\u00a0has joined #xwiki  \n14:23\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n14:31\u00a0<polx>\u00a0has joined #xwiki  \n14:31\u00a0<polx>\u00a0has quit  \n14:36\u00a0<motofix>\u00a0has joined #xwiki  \n14:40\u00a0<motofix>\u00a0Hi. We have a little issue with our XWiki instance. One of the pages is obviously not indexed by Solr. If we switch to Lucene, it is indexed but we would like to keep Solr as the results are generally more relevant and better presented  \n14:40\u00a0<motofix>\u00a0We've tryid to re-index without success  \n14:40\u00a0<motofix>\u00a0Any clues?  \n14:51\u00a0<tmortagne>\u00a0motofix: SOLR does not show hidden pages by default if you don't indicate you want to see hidden pages in your user profile, could it be that ?  \n14:52\u00a0<tmortagne>\u00a0another possibility is that you did an upgrade recently and kept the old solr filesystem configuration while it actually changed in standard  \n14:52\u00a0<motofix>\u00a0I've modified my profile to display hidden object, but the page still not appear in the result list  \n14:53\u00a0<motofix>\u00a0There is 4 pages where the search term appears. Solr find 3 of them  \n14:53\u00a0<tmortagne>\u00a0where is the term to match ? same pace in all these documents ?  \n14:54\u00a0<motofix>\u00a0In the fourth page, the searched term (which is \"catalogue\") appears several times  \n14:54\u00a0<tmortagne>\u00a0\\*place  \n14:54\u00a0<motofix>\u00a0It appears in both title and text body  \n14:55\u00a0<motofix>\u00a0The source of the page is \"clean\", e.g. there is no WYSIWYG unecessary stuff  \n14:55\u00a0<tmortagne>\u00a0if that's a document you can make public I guess we could try to reproduce the issue and debug it  \n14:56\u00a0<tmortagne>\u00a0in the meantime something you could do is open the SOLR index with a lucene client like Luke and see if your document is in there  \n14:57\u00a0<tmortagne>\u00a0to see if the issue is indexing or displaying  \n14:57\u00a0<tmortagne>\u00a0the index should be in <data>/solr/xwiki/data/index, at least in latest versions  \n14:58\u00a0<tmortagne>\u00a0somwhere in <data>/solr in any case  \n14:58\u00a0<motofix>\u00a0Ok, I'm working on an account for u and also have a look in the Solr indexes  \n14:58\u00a0<tmortagne>\u00a0did you tried to delete <data>/solr folder ad restart ?  \n14:59\u00a0<motofix>\u00a0Nop, only used the admin interface to delete and then re-index content  \n14:59\u00a0<tmortagne>\u00a0to make extra sure you have the right SOLR server configuration  \n14:59\u00a0<tmortagne>\u00a0the UI reindex reset the data but not the SOLR server conf  \n14:59\u00a0<tmortagne>\u00a0just to be sure  \n14:59\u00a0<tmortagne>\u00a0unless it take ages to index  \n15:00\u00a0<motofix>\u00a0No, this is a brand new Wiki, only 20 pages ;-)  \n15:00\u00a0<tmortagne>\u00a0ok  \n15:00\u00a0<tmortagne>\u00a0then deleting that folder should not harm  \n15:01\u00a0<tmortagne>\u00a0there is nothing special you can think of in this document compared to the 3 others ?  \n15:01\u00a0<tmortagne>\u00a0I guess you are searching with a user who have the right to see that document  \n15:01\u00a0<tmortagne>\u00a0what is the version of XWiki by the way ?  \n15:02\u00a0<motofix>\u00a0Yes, same result with my user (admin) and RO user  \n15:02\u00a0<motofix>\u00a0Version 6.0.1  \n15:18\u00a0<lucaa>\u00a0has joined #xwiki  \n15:20\u00a0<Denis>\u00a0has quit  \n15:34\u00a0<msmeria>\u00a0has quit  \n16:12\u00a0<polx>\u00a0has joined #xwiki  \n16:14\u00a0<lucaa>\u00a0has quit  \n16:15\u00a0<Slashman\\_>\u00a0has joined #xwiki  \n16:16\u00a0<Slashman>\u00a0has quit  \n16:19\u00a0<OSIMasson>\u00a0has joined #xwiki  \n16:20\u00a0<tmortagne>\u00a0has quit  \n16:31\u00a0<KermitTheFragger>\u00a0has quit  \n16:49\u00a0<evalica>\u00a0has quit  \n16:49\u00a0<Enygma`>\u00a0has quit  \n16:58\u00a0<motofix>\u00a0has left #xwiki  \n17:03\u00a0<Slashman\\_>\u00a0has quit  \n17:19\u00a0<Slashman\\_>\u00a0has joined #xwiki  \n17:30\u00a0<vmassol>\u00a0gdelhumeau: would be nice to add a screenshot to the RN for the fixed login box maybe: http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki61#HFlamingoSkin  \n17:35\u00a0<gdelhumeau>\u00a0is it that important?  \n17:36\u00a0<vmassol>\u00a0if the question is: is it important show what has changed from versoin to version then the answer is yes  \n17:36\u00a0<vmassol>\u00a0even more since there are other screenshots of flamingo changes  \n17:38\u00a0<vmassol>\u00a0btw if you had put a screenshot I would already have reviewed it  \n17:38\u00a0<gdelhumeau>\u00a0I'm doing it  \n17:38\u00a0<vmassol>\u00a0thanks  \n17:39\u00a0<vmassol>\u00a0put it here at teh same time: http://extensions.xwiki.org/xwiki/bin/view/Extension/Flamingo+Skin  \n17:40\u00a0<vmassol>\u00a0btw for http://extensions.xwiki.org/xwiki/bin/view/Extension/Flamingo+Skin it would be better to have screenshots using the default flamingo theme probably  \n17:40\u00a0<gdelhumeau>\u00a0even with the \"This skin is best seen with FlamingoColorTheme.\" message?  \n17:41\u00a0<vmassol>\u00a0errr?  \n17:41\u00a0<vmassol>\u00a0not sure why it is best and if it's best then why don't we make it the default theme? :)  \n17:41\u00a0<gdelhumeau>\u00a0you know why  \n17:41\u00a0<vmassol>\u00a0I don't  \n17:41\u00a0<vmassol>\u00a0why cannot we have it by default?  \n17:42\u00a0<gdelhumeau>\u00a0because this Color Theme looks good for flamingo, but not for colibri  \n17:42\u00a0<gdelhumeau>\u00a0So we won't do such a change  \n17:42\u00a0<vmassol>\u00a0ah  \n17:42\u00a0<vmassol>\u00a0forgot that  \n17:42\u00a0<vmassol>\u00a0so the current theme for flamingo is not the one we want  \n17:42\u00a0<vmassol>\u00a0right?  \n17:42\u00a0<gdelhumeau>\u00a0right  \n17:42\u00a0<vmassol>\u00a0ok so we should indicate this on http://extensions.xwiki.org/xwiki/bin/view/Extension/Flamingo+Skin then  \n17:43\u00a0<gdelhumeau>\u00a0\u00a0\"This skin is best seen with FlamingoColorTheme.\" is not enough?  \n17:43\u00a0<vmassol>\u00a0let me edit the message  \n17:43\u00a0<vmassol>\u00a0not it's not  \n17:43\u00a0<vmassol>\u00a0it doesn't mean the same thing at all  \n17:43\u00a0<vmassol>\u00a0:)  \n17:45\u00a0<vmassol>\u00a0done  \n17:45\u00a0<vmassol>\u00a0so yes it's a good idea to take screenshot with the theme we want in the end :)  \n17:49\u00a0<woshilapin>\u00a0has quit  \n18:03\u00a0<cjd>\u00a0has quit  \n18:07\u00a0<Pbas>\u00a0has joined #xwiki  \n18:17\u00a0<GuillaumeF>\u00a0has quit  \n18:31\u00a0<polx>\u00a0has quit  \n18:35\u00a0<lucaa>\u00a0has joined #xwiki  \n18:37\u00a0<irctc530>\u00a0has left #xwiki  \n18:37\u00a0<gdelhumeau>\u00a0has quit  \n18:37\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n18:41\u00a0<gdelhumeau>\u00a0has quit  \n18:57\u00a0<mflorea>\u00a0has quit  \n19:04\u00a0<nickless>\u00a0has joined #xwiki  \n19:27\u00a0<Slashman\\_>\u00a0has quit  \n19:33\u00a0<Lyes>\u00a0has joined #xwiki  \n19:35\u00a0<Lyes1>\u00a0has quit  \n19:41\u00a0<nickless>\u00a0has quit  \n19:54\u00a0<vmassol>\u00a0has quit  \n20:55\u00a0<lucaa>\u00a0has quit  \n21:10\u00a0<nickless>\u00a0has joined #xwiki  \n21:15\u00a0<mflorea>\u00a0has joined #xwiki  \n21:33\u00a0<OSIMasson>\u00a0has quit  \n22:30\u00a0<mflorea>\u00a0has quit  \n22:52\u00a0<Lyes>\u00a0has quit  \n23:11\u00a0<polx>\u00a0has joined #xwiki  \n23:46\u00a0<OSIMasson>\u00a0has joined #xwiki  \n23:59\u00a0<polx>\u00a0has quit\n"}