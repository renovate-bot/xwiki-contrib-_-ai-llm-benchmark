{"id": "dev:IRC.xwikiArchive20130107", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130107", "title": "IRC Archive for channel #xwiki on 07 January 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has quit  \n00:43\u00a0<vmassol>\u00a0has joined #xwiki  \n00:47\u00a0<vmassol>\u00a0has quit  \n01:44\u00a0<vmassol>\u00a0has joined #xwiki  \n01:48\u00a0<vmassol>\u00a0has quit  \n02:44\u00a0<vmassol>\u00a0has joined #xwiki  \n02:49\u00a0<vmassol>\u00a0has quit  \n03:37\u00a0<Denis>\u00a0has quit  \n03:45\u00a0<vmassol>\u00a0has joined #xwiki  \n03:49\u00a0<vmassol>\u00a0has quit  \n03:55\u00a0<tekzilla>\u00a0has quit  \n03:57\u00a0<tekzilla>\u00a0has joined #xwiki  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:45\u00a0<vmassol>\u00a0has joined #xwiki  \n04:50\u00a0<vmassol>\u00a0has quit  \n04:54\u00a0<sdumitriu>\u00a0has quit  \n05:21\u00a0<qwebirc63008>\u00a0has joined #xwiki  \n05:35\u00a0<huhongbo>\u00a0has joined #xwiki  \n05:36\u00a0<qwebirc63008>\u00a0has quit  \n05:47\u00a0<vmassol>\u00a0has joined #xwiki  \n05:51\u00a0<vmassol>\u00a0has quit  \n06:03\u00a0<Denis>\u00a0has quit  \n06:04\u00a0<sdumitriu>\u00a0has joined #xwiki  \n06:47\u00a0<vmassol>\u00a0has joined #xwiki  \n06:51\u00a0<vmassol>\u00a0has quit  \n07:21\u00a0<huhongbo>\u00a0has quit  \n07:48\u00a0<vmassol>\u00a0has joined #xwiki  \n07:52\u00a0<vmassol>\u00a0has quit  \n08:05\u00a0<mflorea>\u00a0has joined #xwiki  \n08:22\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:26\u00a0<vmassol>\u00a0has joined #xwiki  \n08:40\u00a0<Denis>\u00a0has joined #xwiki  \n08:48\u00a0<vmassol>\u00a0good morning  \n08:48\u00a0<vmassol>\u00a0fixing markdown support in 4.4 branch, it's broken :( (probably also broken on master)  \n08:48\u00a0<vmassol>\u00a0(we have 2 ASM versions in web-inf/lib)  \n08:49\u00a0<vmassol>\u00a0that's really a pain\u2026. maybe we could have some automated check about that to detect duplicates  \n08:50\u00a0<tmortagne>\u00a0yea will all our dependencies it's a pain to see it before it's too late  \n08:50\u00a0<vmassol>\u00a0yep  \n08:50\u00a0<vmassol>\u00a0the other possibility is to have at least one func test for every feature  \n08:51\u00a0<tmortagne>\u00a0I think I prefer checking some way :)  \n08:51\u00a0<vmassol>\u00a0the checking is not that hard  \n08:52\u00a0<vmassol>\u00a0we jsut need to read the jars  \n08:52\u00a0<vmassol>\u00a0and look for dups  \n08:52\u00a0<vmassol>\u00a0we're probably going to find some surprises ;)  \n08:52\u00a0<tmortagne>\u00a0I hope asm 4 and 3 are compatible  \n08:53\u00a0<vmassol>\u00a0ok tikka brings 3.1  \n08:53\u00a0<vmassol>\u00a0org.apache.tika:tika-parsers  \n08:54\u00a0<tmortagne>\u00a0yep  \n08:54\u00a0<vmassol>\u00a0md requires 4.0  \n08:54\u00a0<tmortagne>\u00a0asm:asm  \n08:54\u00a0<tmortagne>\u00a0looks like a few classes has been removed in 4.0  \n08:54\u00a0<tmortagne>\u00a0not a good sign  \n08:55\u00a0<vmassol>\u00a0the error I had was:  \n08:55\u00a0<vmassol>\u00a0Caused by: java.lang.IncompatibleClassChangeError: class org.objectweb.asm.tree.ClassNode has interface org.objectweb.asm.ClassVisitor as super class  \n08:55\u00a0<vmassol>\u00a0tmortagne: what can I do to verify that tikka parsers continues to work?  \n08:56\u00a0<tmortagne>\u00a0ClassVisitor used to be an interface and is now a class according to the release note  \n08:56\u00a0<tmortagne>\u00a0vmassol: there is unit tests for tika  \n08:56\u00a0<tmortagne>\u00a0in lucene module I think  \n08:56\u00a0<vmassol>\u00a0ok  \n08:56\u00a0<tmortagne>\u00a0I guess you can test there  \n08:56\u00a0<vmassol>\u00a0testing  \n08:56\u00a0<tmortagne>\u00a0there is a lot of changed between 3.x and 4.0, I don't have much hope  \n08:57\u00a0<tmortagne>\u00a0http://asm.ow2.org/jdiff33to40/changes.html  \n08:57\u00a0<tmortagne>\u00a0s/changed/changes/  \n08:57\u00a0<vmassol>\u00a0jdiff is quite cool  \n08:57\u00a0<tmortagne>\u00a0yep  \n08:57\u00a0<vmassol>\u00a0we should consider using it again even though it's been dead for years  \n08:57\u00a0<tmortagne>\u00a0would be nice to generate something like this  \n08:58\u00a0<tmortagne>\u00a0maybe there is a new thing  \n08:58\u00a0<vmassol>\u00a0if it works it's ok  \n08:58\u00a0<Enygma`>\u00a0has joined #xwiki  \n08:58\u00a0<vmassol>\u00a0this is build, not runtime  \n08:58\u00a0<vmassol>\u00a0AFAIR it's a doclet  \n09:04\u00a0<evalica>\u00a0has joined #xwiki  \n09:05\u00a0<vmassol>\u00a0hmmm  \n09:06\u00a0<vmassol>\u00a0tmortagne: I've excluded asm and without putting a new version of it and the tests all pass in the lucene module  \n09:06\u00a0<vmassol>\u00a0(I've check mvn dep:tree and asm is not listed anymore)  \n09:06\u00a0<vmassol>\u00a0\\*checked  \n09:07\u00a0<vmassol>\u00a0so it seems ASM is not used by our tests  \n09:07\u00a0<tmortagne>\u00a0we are testing a few things but idea what tike use asm for exactly  \n09:07\u00a0<tmortagne>\u00a0s/idea/no idea/  \n09:07\u00a0<vmassol>\u00a0yeah we would need to understand this  \n09:07\u00a0<tmortagne>\u00a0at leas we are testing most comming formats for us  \n09:07\u00a0<tmortagne>\u00a0s/leas/least/  \n09:10\u00a0<vmassol>\u00a0apparently it's used only by 1 class  \n09:10\u00a0<vmassol>\u00a0https://gist.github.com/4473274  \n09:10\u00a0<vmassol>\u00a02 classes  \n09:10\u00a0<vmassol>\u00a0no 1  \n09:10\u00a0<vmassol>\u00a0:)  \n09:10\u00a0<tmortagne>\u00a0ok html scanning then  \n09:11\u00a0<vmassol>\u00a0ClassParser is just in the asm package but doesn't use tika  \n09:11\u00a0<tmortagne>\u00a0indeed we don't have unit tests for that  \n09:11\u00a0<tmortagne>\u00a0it's not the most common attachment either  \n09:11\u00a0<vmassol>\u00a0html scanning = ? indexing of html docs?  \n09:11\u00a0<tmortagne>\u00a0yes  \n09:11\u00a0<vmassol>\u00a0html attachments  \n09:11\u00a0<vmassol>\u00a0ok  \n09:11\u00a0<tmortagne>\u00a0html file as attachment  \n09:12\u00a0<vmassol>\u00a0stil a useful feature for us....  \n09:12\u00a0<vmassol>\u00a0\\*still  \n09:12\u00a0<tmortagne>\u00a0yes could be  \n09:12\u00a0<tmortagne>\u00a0but there is no easy solution here  \n09:13\u00a0<tmortagne>\u00a0we were just lucky to not have more issues like this before...  \n09:13\u00a0<tmortagne>\u00a0I'm surprised only those two project use asm  \n09:14\u00a0<tmortagne>\u00a0I think groovy embeds it  \n09:14\u00a0<vmassol>\u00a0seems they are still on 3.1 on tika trunk: http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/pom.xml  \n09:24\u00a0<msmeria>\u00a0has joined #xwiki  \n09:41\u00a0<Enygma`>\u00a0has quit  \n09:43\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:56\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:00\u00a0<tdelafosse>\u00a0has joined #xwiki  \n10:38\u00a0<Slashman>\u00a0has joined #xwiki  \n11:25\u00a0<sburjan>\u00a0has joined #xwiki  \n11:40\u00a0<Slashman>\u00a0has quit  \n11:51\u00a0<Slashman>\u00a0has joined #xwiki  \n13:16\u00a0<vmassol>\u00a0guys I'd like to fix the ASM issue asap. If you have any take please answer the vote email I sent on dev.  \n13:16\u00a0<vmassol>\u00a0tmortagne: ok for solution 1?  \n13:37\u00a0<jvdrean>\u00a0has quit  \n13:37\u00a0<Slashman>\u00a0has quit  \n13:38\u00a0<Slashman>\u00a0has joined #xwiki  \n13:40\u00a0<jvdrean>\u00a0has joined #xwiki  \n14:04\u00a0<vmassol>\u00a0now the fun begins (after this commit)\u2026 :)  \n14:04\u00a0<vmassol>\u00a0see http://jira.xwiki.org/browse/XE-1270?focusedCommentId=73297&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-73297  \n14:10\u00a0<vmassol>\u00a0I'll give you a link once jenkins fininshed building it  \n14:10\u00a0<vmassol>\u00a0I'll need some help fixing all issues...  \n14:11\u00a0<vmassol>\u00a0first, I need your help by answering my vote email for ASM :)  \n14:14\u00a0<tmortagne>\u00a0vmassol: yes ok for solution 1, answering  \n14:15\u00a0<vmassol>\u00a0guys, here: http://ci.xwiki.org/job/xwiki-enterprise/ws/xwiki-enterprise-web/target/site/tattletale/multiplejars/index.html  \n14:15\u00a0<vmassol>\u00a0be prepared for a surprise ;)  \n14:15\u00a0<vmassol>\u00a0tmortagne: I thought you had fixed the jdom dup issue  \n14:15\u00a0<vmassol>\u00a0?  \n14:16\u00a0<tmortagne>\u00a0vmassol: I did, several times... there always a new dependency that get it back  \n14:16\u00a0<vmassol>\u00a0well it won\"'t happen aynmore from now on :)  \n14:16\u00a0<tmortagne>\u00a0at least with an enforcer we will b more careful when addind somehing  \n14:16\u00a0<tmortagne>\u00a0yep  \n14:16\u00a0<tmortagne>\u00a0that's cool  \n14:17\u00a0<vmassol>\u00a0got to go, bb in 15mn  \n14:31\u00a0<vmassol>\u00a0back  \n14:32\u00a0<sburjan>\u00a0wow vmassol , I only checked XEM for jar duplicates, but it seems that XE has even more  \n14:32\u00a0<vmassol>\u00a0no XEM has at least the same ones and more  \n14:33\u00a0<sburjan>\u00a0hmm.. I wonder how did the ones from your issue escaped from my sight  \n14:34\u00a0<vmassol>\u00a0it's easy  \n14:34\u00a0<sburjan>\u00a0oh yes, you're talking about classes, I only check the filenames  \n14:34\u00a0<vmassol>\u00a0you checked for dup jars  \n14:34\u00a0<vmassol>\u00a0not classes  \n14:34\u00a0<sburjan>\u00a0yes. How did you check for dup classes ? grep/find in the source code ?  \n14:34\u00a0<vmassol>\u00a0see XE-1270  \n14:35\u00a0<sburjan>\u00a0yes, I know the issue. I was just curios how did you found them  \n14:43\u00a0<xwikibot>\u00a0has joined #xwiki  \n14:43\u00a0<tmortagne>\u00a0sburjan: maven plugin  \n14:43\u00a0<vmassol>\u00a0sburjan: check the comlmit tab  \n14:43\u00a0<vmassol>\u00a0I gave you the isseu so you can check the commlit tab  \n14:43\u00a0<vmassol>\u00a0....  \n14:44\u00a0<vmassol>\u00a0you should know that you can see the commit related to an issue this way  \n14:46\u00a0<vmassol>\u00a0hmm wondering why we have this dup: http://ci.xwiki.org/job/xwiki-enterprise/ws/xwiki-enterprise-web/target/site/tattletale/jar/xwiki-platform-legacy-oldcore-4.5-20130107.112048-21.jar.html , http://ci.xwiki.org/job/xwiki-enterprise/ws/xwiki-enterprise-web/target/site/tattletale/jar/xwiki-platform-oldcore-4.5-20130107.104007-25.jar.html  \n14:46\u00a0<vmassol>\u00a0bad paste  \n14:46\u00a0<vmassol>\u00a0xwiki-platform-legacy-oldcore-4.5-20130107.112048-21.jar , xwiki-platform-oldcore-4.5-20130107.104007-25.jar  \n14:46\u00a0<sburjan>\u00a0vmassol: thanks. I didn't saw the issue had a commit because it was open and I didn't check the commit tab  \n14:47\u00a0<vmassol>\u00a0ah I forgot to close it  \n14:47\u00a0<vmassol>\u00a0thanks  \n15:56\u00a0<vmassol>\u00a0Enygma`: hi  \n15:57\u00a0<vmassol>\u00a0we have dups classes brought by solr 4.0.0  \n15:57\u00a0<vmassol>\u00a0the woodstox classes  \n15:58\u00a0<Enygma`>\u00a0hi vmassol  \n15:58\u00a0<Enygma`>\u00a0any more details on that?  \n15:59\u00a0<vmassol>\u00a0solr 4.0.0 draws wstx 3.2.7  \n15:59\u00a0<vmassol>\u00a0but infinispan draws woodstox 4.1.1  \n15:59\u00a0<vmassol>\u00a0I think the best is to explictiely ask for 4.1.1 and hope that solr works with it  \n16:11\u00a0<Enygma`>\u00a0so wstx and woodstox are the same project... and the new version has a new name. Perhaps we should exclude completely the wstx-asl transient dependency from solr-core and solr-solrj and see what happens (since the dependency comes with its new name from infinispan-core)  \n16:11\u00a0<vmassol>\u00a0I'm about to commit Enygma`  \n16:12\u00a0<vmassol>\u00a0I just hope solr will conitnue to work, we'll see if its tests still pass :)  \n16:12\u00a0<Enygma`>\u00a0we might also have to manually declare it (the new name of \"woodstox\") as a dependency, otherwise the solr module might not run on its own  \n16:12\u00a0<vmassol>\u00a0I\"ve done all this locally  \n16:30\u00a0<vmassol>\u00a0Enygma`: done, I don't know if you have tests for solr; if not, could you verify that it still works fine?  \n16:30\u00a0<vmassol>\u00a0(and add tests! ;))  \n16:31\u00a0<msmeria>\u00a0vmassol: do you know how can I specify using XWiki syntax 1.0 for a gadget ?  \n16:31\u00a0<vmassol>\u00a0msmeria: using xwiki syntax 1.0 is a bad idea in general ;)  \n16:32\u00a0<msmeria>\u00a0I know but I need to use it for a test  \n16:32\u00a0<vmassol>\u00a0I don't know but the sytax used is probably going to be the one of the page containing the dashboard macro call  \n16:32\u00a0<evalica>\u00a0has left #xwiki  \n16:33\u00a0<vmassol>\u00a0and calling a 2.0 macro in a xwiki syntax 1.0 page is going to be tough\u2026 :)  \n16:33\u00a0<vmassol>\u00a0so the answer is: you can't  \n16:33\u00a0<evalica>\u00a0has joined #xwiki  \n16:33\u00a0<vmassol>\u00a0well  \n16:33\u00a0<vmassol>\u00a0s/well//  \n16:33\u00a0<msmeria>\u00a0what about other syntaxes like mediawiki ?  \n16:34\u00a0<vmassol>\u00a0same  \n16:34\u00a0<Enygma`>\u00a0msmeria: you might be able to include in a gadget a document that is in 1.0 syntax (where you write the content of your gadget)  \n16:34\u00a0<vmassol>\u00a0for mediawiki we don't have any syntax for writing macros AFAIK  \n16:34\u00a0<Slashman>\u00a0has quit  \n16:35\u00a0<msmeria>\u00a0I was thinking that we can have multiple syntaxes inside one document  \n16:36\u00a0<Enygma`>\u00a0msmeria: the document itself has only one syntax. However, the XWiki syntax supports scripting macros that allow you to add scripts in diferent programming languages (velocity, groovy, python, etc.)  \n16:37\u00a0<Enygma`>\u00a0you need to differentiate between document syntax (for writing content) and script syntax (introduced trough a macro that may or may not be supported by your content syntax)  \n16:39\u00a0<vmassol>\u00a0mflorea: something to think about: http://watirmelon.com/2012/12/19/using-webdriver-to-automatically-check-for-javascript-errors-on-every-page/  \n16:44\u00a0<mflorea>\u00a0vmassol: the idea is interesting, but I don't think using Thread.sleep is the best choice.  \n16:46\u00a0<vmassol>\u00a0(haven't read the details yet ;))  \n16:47\u00a0<vmassol>\u00a0indeed looks bad to wait on sleep  \n16:48\u00a0<mflorea>\u00a0and I hope caught exceptions don't trigger window.onerror (it shouldn't)  \n16:49\u00a0<mflorea>\u00a0https://developer.mozilla.org/en/docs/DOM/window.onerror  \n16:49\u00a0<mflorea>\u00a0\"Note that some/many error events do not trigger window.onerror, you have to listen for them specifically.\"  \n16:50\u00a0<Slashman>\u00a0has joined #xwiki  \n16:53\u00a0<vmassol>\u00a0ok  \n17:21\u00a0<mflorea>\u00a0sdumitriu: ping (for a quick question :) )  \n17:23\u00a0<msmeria>\u00a0has quit  \n17:28\u00a0<sburjan>\u00a0has quit  \n17:29\u00a0<abusenius>\u00a0has joined #xwiki  \n17:35\u00a0<Denis>\u00a0has quit  \n17:58\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n18:00\u00a0<jvdrean>\u00a0has quit  \n19:07\u00a0<tdelafosse>\u00a0has quit  \n19:09\u00a0<mflorea>\u00a0has quit  \n19:09\u00a0<tmortagne>\u00a0has quit  \n19:22\u00a0<Slashman>\u00a0has quit  \n19:23\u00a0<Enygma`>\u00a0has quit  \n19:51\u00a0<Denis>\u00a0has joined #xwiki  \n21:05\u00a0<vmassol>\u00a0has quit  \n21:21\u00a0<evalica>\u00a0has quit  \n21:47\u00a0<evalica>\u00a0has joined #xwiki  \n21:52\u00a0<evalica>\u00a0has quit  \n22:37\u00a0<jvdrean>\u00a0has joined #xwiki  \n22:39\u00a0<vmassol>\u00a0has joined #xwiki  \n22:43\u00a0<vmassol>\u00a0has quit  \n22:51\u00a0<jvdrean>\u00a0has quit  \n23:09\u00a0<vmassol>\u00a0has joined #xwiki  \n23:20\u00a0<vmassol>\u00a0has quit  \n23:22\u00a0<jvdrean>\u00a0has joined #xwiki  \n23:28\u00a0<abusenius>\u00a0has quit  \n23:46\u00a0<vmassol>\u00a0has joined #xwiki  \n23:55\u00a0<vmassol>\u00a0has quit  \n23:58\u00a0<SvenDowideit>\u00a0has quit\n"}