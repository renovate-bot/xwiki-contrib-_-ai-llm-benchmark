{"id": "dev:IRC.xwikiArchive20111206", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20111206", "title": "IRC Archive for channel #xwiki on 06 December 2011 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:02\u00a0<pgmjsd>\u00a0has quit  \n00:53\u00a0<sburjan`>\u00a0has quit  \n00:58\u00a0<fmancinelli>\u00a0has quit  \n02:02\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r8a5b152\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-ui/src/main/resources/XWiki/ExtensionManagerMacros.xml :\u000f [misc] Badly printed website for extensions coming from an XWiki Extension Repository - http://git.io/igi0-Q  \n02:40\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r31e768a\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-ui/src/main/resources/XWiki/AddExtensions.xml :\u000f [misc] Don't display two search bars in the extension manager UI - http://git.io/VmbhPQ  \n03:14\u00a0<tekzilla>\u00a0has quit  \n03:16\u00a0<tekzilla>\u00a0has joined #xwiki  \n06:00\u00a0<Denis1>\u00a0has joined #xwiki  \n06:01\u00a0<Denis>\u00a0has quit  \n07:37\u00a0<mflorea>\u00a0has joined #xwiki  \n08:21\u00a0<+mflorea>\u00a0sdumitriu: do you know what is the proper way to instantiate a groovy class in velocity with xwiki/2.0 syntax? parseGroovyFromPage seems to work with xwiki/1.0 syntax (i.e. without the groovy macro)  \n08:22\u00a0<@sdumitriu>\u00a0You shouldn't instantiate it in Velocity  \n08:22\u00a0<@sdumitriu>\u00a0You should {{include}} the document containing the {{groovy}} script  \n08:23\u00a0<@sdumitriu>\u00a0And create the instance in Groovy, and set it in the vcontext so that Velocity can see it  \n08:23\u00a0<+mflorea>\u00a0I see  \n08:23\u00a0<+mflorea>\u00a0let me try  \n08:52\u00a0<sburjan`>\u00a0has joined #xwiki  \n09:41\u00a0<fmancinelli>\u00a0has joined #xwiki  \n09:47\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:05\u00a0<evalica>\u00a0has joined #xwiki  \n10:10\u00a0<sburjan>\u00a0has joined #xwiki  \n10:12\u00a0<+mflorea>\u00a0sdumitriu: still there?  \n10:17\u00a0<+mflorea>\u00a0tmortagne: I'm looking for a way to expose a groovy API in a page that isn't saved with PR. I have a page with groovy code (which is saved with PR) and I'm including it in another page that isn't saved with PR. I'm using context=new so that the groovy code is evaluated. The problem is that it is evaluated in an isolated context. Is there a way to pass an object from groovy to velocity when the groovy code is executed in an isolated context?  \n10:21\u00a0<+tmortagne>\u00a0mflorea: Hi  \n10:22\u00a0<+mflorea>\u00a0the generic question is: how can I expose a groovy API in a page without PR?  \n10:22\u00a0<+tmortagne>\u00a0short answer: I hope not ;)  \n10:22\u00a0<+mflorea>\u00a0:)  \n10:22\u00a0<+tmortagne>\u00a0now for the general question lets think  \n10:22\u00a0<+mflorea>\u00a0ok, but there should be a way to write groovy code and then expose it in a page without PR  \n10:22\u00a0<+tmortagne>\u00a0the old answer is parseGroovyFromPage  \n10:22\u00a0<+mflorea>\u00a0yes, but I'm using xwiki/2.0  \n10:23\u00a0<+tmortagne>\u00a0the future answer is exposing a script service written in groovy  \n10:23\u00a0<+mflorea>\u00a0aha  \n10:23\u00a0<+tmortagne>\u00a0now we are a bit in the middle  \n10:24\u00a0<+mflorea>\u00a0I'll try the ScriptSerivice solution  \n10:24\u00a0<+tmortagne>\u00a0since we require some plumbing that take care of making sure the groovy script is initialized at startup etc..., what you could so is do this check in your include context=new  \n10:30\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:30\u00a0<rrodriguez>\u00a0has joined #xwiki  \n11:09\u00a0<rrodriguez\\_>\u00a0has joined #xwiki  \n11:09\u00a0<rrodriguez>\u00a0has quit  \n11:09\u00a0<rrodriguez\\_>\u00a0is now known as <rrodriguez>  \n11:26\u00a0<jvelociter>\u00a0has joined #xwiki  \n11:28\u00a0<CIA-115>\u00a0tmortagne\u000f master\u000f \\* r8e618ea\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-repositories/xwiki-platform-extension-repository-xwiki/xwiki-platform-extension-repository-xwiki-server-ui/src/main/resources/ExtensionCode/ExtensionSheet.xml :\u000f XWIKI-7234: Improve EM validation message in XR - http://git.io/X4kPhw  \n11:28\u00a0<CIA-115>\u00a0tmortagne\u000f master\u000f \\* r2e811a5\u000f \u000f/ xwiki-enterprise-test/xwiki-enterprise-test-pageobjects/src/main/java/org/xwiki/test/po/extension/server/ExtensionPage.java :\u000f XWIKI-7234: Improve EM validation message in XR - http://git.io/9YmLGA  \n11:35\u00a0<Enygma`>\u00a0has quit  \n11:35\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:48\u00a0<sburjan>\u00a0has quit  \n11:48\u00a0<sburjan>\u00a0has joined #xwiki  \n11:51\u00a0<+jvelociter>\u00a0Guys, any problem merging https://github.com/xwiki/xwiki-platform/pull/29 in 3.2 as well ?  \n11:51\u00a0<+jvelociter>\u00a0sdumitriu: ?  \n11:51\u00a0<+jvelociter>\u00a0(I can do it if we are ok)  \n11:52\u00a0<jvdrean>\u00a0has joined #xwiki  \n12:03\u00a0<jvdrean>\u00a0has left #xwiki  \n12:05\u00a0<jvdrean>\u00a0has joined #xwiki  \n12:05\u00a0<jvdrean>\u00a0has left #xwiki  \n12:22\u00a0<sburjan>\u00a0has quit  \n12:22\u00a0<sburjan>\u00a0has joined #xwiki  \n12:31\u00a0<mflorea>\u00a0has quit  \n12:36\u00a0<JuanDaugherty>\u00a0has quit  \n13:00\u00a0<sburjan>\u00a0has quit  \n13:01\u00a0<sburjan>\u00a0has joined #xwiki  \n13:22\u00a0<sburjan>\u00a0has quit  \n13:22\u00a0<sburjan>\u00a0has joined #xwiki  \n13:36\u00a0<sburjan>\u00a0has quit  \n13:45\u00a0<sburjan>\u00a0has joined #xwiki  \n13:46\u00a0<mflorea>\u00a0has joined #xwiki  \n14:20\u00a0<vmassol>\u00a0has joined #xwiki  \n14:52\u00a0<vmassol>\u00a0any ETA for the release? :)  \n14:55\u00a0<vmassol>\u00a0I know sergiu would like to commit a \"back to list\" implementation for the EM UI  \n14:55\u00a0<vmassol>\u00a0I don't know when though  \n14:55\u00a0<vmassol>\u00a0what else is left?  \n14:58\u00a0<+tmortagne>\u00a0mflorea: was working on a way to provide some API in groovy used in a velocity script probably for appwithingminute I guess, not sure if he was able to finish  \n14:59\u00a0<vmassol>\u00a0bb in 20mn  \n14:59\u00a0<+tmortagne>\u00a0on my side I'm workin on a multiwiki related bug on EM depenccies management found by Denis but the new UI does not handle multiwiki AFAIK so it sould not be too blocker  \n15:00\u00a0<+mflorea>\u00a0I committed it. Now I'm working on making AppWithinMinutes translatable, but I can commi this after RC1 (if that's ok with you)  \n15:00\u00a0<+tmortagne>\u00a0does not sounds too critical indeed, there would not be much time to get actual translation anyway :)  \n15:02\u00a0<+mflorea>\u00a0yes  \n15:05\u00a0<@cjdelisle>\u00a0AppWithinMinutes\\u002C.WebHome is failing webstandards test  \n15:06\u00a0<@cjdelisle>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-test-webstandards/777/org.xwiki.enterprise$xwiki-enterprise-test-webstandards/testReport/org.xwiki.test.webstandards.framework/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_space\\_AppWithinMinutes\\_u002C\\_page\\_WebHome\\_executed\\_with\\_credentials\\_Admin\\_admin/  \n15:06\u00a0<@cjdelisle>\u00a0hmm  \n15:06\u00a0<@cjdelisle>\u00a0\\u002C is ,  \n15:07\u00a0<@cjdelisle>\u00a0So the page is called AppWithinMinutes,.WebHome  \n15:48\u00a0<+mflorea>\u00a0cjdelisle: that is just bad display, if you looks the the HTML source, the space name is AppWithinMinutes. I'm taking care of this test  \n15:48\u00a0<@cjdelisle>\u00a0ok, thanks  \n16:29\u00a0<vmassol>\u00a0cjdelisle: we don't load attachments when we load docs?  \n16:29\u00a0<vmassol>\u00a0hmm we do:  \n16:29\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (doc.hasElement(XWikiDocument.HAS\\_ATTACHMENTS)) {  \n16:29\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0loadAttachmentList(doc, context, false);  \n16:29\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}  \n16:29\u00a0<vmassol>\u00a0need to debug why the attachment is not loaded in my case  \n16:30\u00a0<@cjdelisle>\u00a0The attachment metadata should be loaded with the document  \n16:30\u00a0<@cjdelisle>\u00a0the attachment content is loaded on demand  \n16:31\u00a0<vmassol>\u00a0I get a NPE later on when the doc bridge calls get attachments  \n16:31\u00a0<vmassol>\u00a0since the attachmet list is empty  \n16:31\u00a0<@cjdelisle>\u00a0You're doing a getDocument() and finding the attachment list not populated?  \n16:31\u00a0<vmassol>\u00a0yep  \n16:31\u00a0<vmassol>\u00a0I'll trace it  \n16:32\u00a0<@cjdelisle>\u00a0If it were a search(\"select doc from XWikiDocument ....\"); then you can end up with an XWikiDocument with no attachments or objects.  \n16:32\u00a0<vmassol>\u00a0I'm doign a xwiki.getDcoument(\"IRC.IRCBot\").getRenderedContent()  \n16:33\u00a0<@cjdelisle>\u00a0ok so you call getRenderedContent() and then the content calls $doc.getAttachment() and it's not there?  \n16:33\u00a0<vmassol>\u00a0in the content there's a groovy macro with jars=\"....\"  \n16:33\u00a0<@cjdelisle>\u00a0ok  \n16:34\u00a0<vmassol>\u00a0and that will internally try to get teh attachment  \n16:34\u00a0<vmassol>\u00a0using the doc bridge  \n16:34\u00a0<vmassol>\u00a0and I get a NPE  \n16:34\u00a0<@cjdelisle>\u00a0\"this should never happen\" heh  \n16:34\u00a0<vmassol>\u00a0ahah  \n16:34\u00a0<vmassol>\u00a0if (doc.hasElement(XWikiDocument.HAS\\_ATTACHMENTS)) {  \n16:34\u00a0<vmassol>\u00a0is false  \n16:35\u00a0<vmassol>\u00a0oh  \n16:35\u00a0<@cjdelisle>\u00a0ahh that is quite a bug  \n16:35\u00a0<vmassol>\u00a0wait  \n16:35\u00a0<vmassol>\u00a0I'm not looking at the right doc  \n16:35\u00a0<@cjdelisle>\u00a0can you set a breakpoint in loadAttachmentList()?  \n16:36\u00a0<vmassol>\u00a0the problem is elsewhere. I'm still debugging (finding the right doc this time, got confused by its name)  \n17:05\u00a0<CIA-115>\u00a0tmortagne\u000f master\u000f \\* rb081643\u000f \u000f/ (4 files in 4 dirs):\u000f XWIKI-7236: Namespace inheritance broken in ...  \n17:08\u00a0<sburjan`>\u00a0has quit  \n17:08\u00a0<sburjan`>\u00a0has joined #xwiki  \n17:34\u00a0<lucaa>\u00a0has joined #xwiki  \n17:35\u00a0<lucaa>\u00a0has quit  \n17:50\u00a0<pgmjsd>\u00a0has joined #xwiki  \n17:50\u00a0<CIA-115>\u00a0tmortagne\u000f master\u000f \\* rc95f379\u000f \u000f/ (2 files in 2 dirs):\u000f XWIKI-7235: An extension is not removed from backward dependencies when ...  \n18:17\u00a0<CIA-115>\u00a0tmortagne\u000f master\u000f \\* r410907d\u000f \u000f/ (2 files in 2 dirs):\u000f XWIKI-7238: Default local repository should throw an exception when ...  \n18:20\u00a0<vmassol1>\u00a0has joined #xwiki  \n18:21\u00a0<tmortagne>\u00a0has quit  \n18:22\u00a0<vmassol>\u00a0has quit  \n18:44\u00a0<@cjdelisle>\u00a0XWikiAttachment.getVersionList() seems to infinite loop now.  \n18:44\u00a0<@cjdelisle>\u00a0It looks like there was a change to JRCS which broke a questionable use case which it depended on  \n19:02\u00a0<xwikibot>\u00a0has joined #xwiki  \n19:49\u00a0<CIA-115>\u00a0cjdelisle\u000f feature-store-attachments-newstore\u000f \\* ra098378\u000f \u000f/ (59 files in 23 dirs):\u000f Added new attachment storage interfaces. - http://git.io/FE0SWA  \n19:49\u00a0<CIA-115>\u00a0cjdelisle\u000f feature-store-attachments-newstore\u000f \\* r495c40e\u000f \u000f/ (58 files in 22 dirs):\u000f Merged in main trunk and begin debugging new changes. - http://git.io/Wo3OPQ  \n19:49\u00a0<CIA-115>\u00a0cjdelisle\u000f feature-store-attachments-newstore\u000f \\* re1ccdd2\u000f \u000f/ xwiki-platform-core/xwiki-platform-store/xwiki-platform-store-attachments/src/main/java/org/xwiki/store/attachments/adapter/internal/AbstractAttachmentStoreAdapter.java :\u000f Added file which was missed in previous commit - http://git.io/WFfAOQ  \n19:54\u00a0<sburjan>\u00a0has quit  \n19:57\u00a0<mflorea>\u00a0has quit  \n20:01\u00a0<abusenius>\u00a0has joined #xwiki  \n20:11\u00a0<fmancinelli>\u00a0has joined #xwiki  \n20:22\u00a0<fmancinelli>\u00a0has quit  \n20:36\u00a0<fmancinelli>\u00a0has joined #xwiki  \n21:59\u00a0<Enygma`>\u00a0has quit  \n22:08\u00a0<CIA-115>\u00a0cjdelisle\u000f master\u000f \\* ra61c2d2\u000f \u000f/ (2 files in 2 dirs):\u000f XWIKI-7239: Infinite loop in XWikiAttachment.getVersionList() consumes all available memory when called. - http://git.io/LPu5BA  \n22:30\u00a0<CIA-115>\u00a0cjdelisle\u000f master\u000f \\* rc7a9cca\u000f \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/api/Attachment.java :\u000f Improved documentation and removed redundant code. - http://git.io/QMdT6w  \n22:34\u00a0<+sburjan`>\u00a0cjdelisle: are you around ?  \n22:34\u00a0<@cjdelisle>\u00a0yeap  \n22:34\u00a0<@cjdelisle>\u00a0what's up?  \n22:34\u00a0<+sburjan`>\u00a0I am trying to setup a whoracle db to work with xwiki  \n22:35\u00a0<@cjdelisle>\u00a0hehe  \n22:35\u00a0<+sburjan`>\u00a0and it seems that oracle is totally another realm as mysql (which is a child toy compared to oracle)  \n22:35\u00a0<+sburjan`>\u00a0now the issue I am trying to figure out is .. what usually means this  \n22:35\u00a0<+sburjan`>\u00a0\"table or view does not exist\"  \n22:35\u00a0<+sburjan`>\u00a0when accessing wiki  \n22:35\u00a0<@cjdelisle>\u00a0it probably means table doesn't exist  \n22:35\u00a0<+sburjan`>\u00a0I am not sure I have to create a blank schema, or my user has no create priviledges  \n22:36\u00a0<+sburjan`>\u00a0dunno which of there 2 I should pursuit  \n22:36\u00a0<+sburjan`>\u00a0on mysql you create the db and grant  \n22:36\u00a0<@cjdelisle>\u00a0I doubt it's referring to a view since I don't think we use views at all.  \n22:37\u00a0<@cjdelisle>\u00a0does the XWiki user have god permission on the db?  \n22:37\u00a0<+sburjan`>\u00a0nope  \n22:37\u00a0<@cjdelisle>\u00a0that might be part of the issue  \n22:37\u00a0<+sburjan`>\u00a0I mean I just added it as a normal user, and I don't know how to elevate on oracle :)  \n22:37\u00a0<+sburjan`>\u00a0it's like I'm driving a space ship  \n22:37\u00a0<@cjdelisle>\u00a0do you have a root user in oracle?  \n22:37\u00a0<+sburjan`>\u00a0ofc  \n22:38\u00a0<@cjdelisle>\u00a0mysql has root, postgres has postgres  \n22:38\u00a0<+sburjan`>\u00a0using some web gui  \n22:38\u00a0<+sburjan`>\u00a0orache has SYS :)  \n22:38\u00a0<+sburjan`>\u00a0as SYSDBA  \n22:38\u00a0<+sburjan`>\u00a0let me dig more, maygbe I can grant GOD to xwiki  \n22:38\u00a0<@cjdelisle>\u00a0you have granted all on the xwiki database?  \n22:39\u00a0<+sburjan`>\u00a0I haven't created a database  \n22:39\u00a0<@cjdelisle>\u00a0it needs to be able to create tables ofc  \n22:39\u00a0<+sburjan`>\u00a0oracle has another concept of database as it seems  \n22:39\u00a0<@cjdelisle>\u00a0oh right  \n22:39\u00a0<@cjdelisle>\u00a0\\*schema  \n22:39\u00a0<@cjdelisle>\u00a0yea you want \"create schema\"  \n22:40\u00a0<+sburjan`>\u00a0thnaks..  \n22:40\u00a0<+sburjan`>\u00a0I'll dig in the ui  \n22:40\u00a0<@cjdelisle>\u00a0the code for doing it is in XHS  \n22:40\u00a0<+sburjan`>\u00a0i'm not hardcore enough to write a SQL statement :)  \n22:40\u00a0<+sburjan`>\u00a0XHS ?  \n22:40\u00a0<@cjdelisle>\u00a0because it can theoretically create sub-wikis in oracle  \n22:41\u00a0<@cjdelisle>\u00a0XWikiHibernateStore.java  \n22:42\u00a0<@cjdelisle>\u00a0That reminds me, I need to upgrade to Postgres 9 and see if it's really broken.  \n22:51\u00a0<+sburjan`>\u00a0what to be broken ? XWiki + Postgres 9 ?  \n22:51\u00a0<@cjdelisle>\u00a0Someone said so on the list.  \n22:52\u00a0<+sburjan`>\u00a0it's been years since i haven't played with the big elephant :)  \n23:01\u00a0<vmassol1>\u00a0has quit  \n23:16\u00a0<+sburjan`>\u00a0created schema, granted everything, still not working. I am still missing something  \n23:28\u00a0<evalica>\u00a0has quit  \n\n"}