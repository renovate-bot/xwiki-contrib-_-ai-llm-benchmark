{"id": "dev:IRC.xwikiArchive20150922", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150922", "title": "IRC Archive for channel #xwiki on 22 September 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<silverdrop>\u00a0has quit  \n02:15\u00a0<[d\\_\\_d]>\u00a0has quit  \n02:19\u00a0<[d\\_\\_d]>\u00a0has joined #xwiki  \n02:20\u00a0<silverdrop>\u00a0has joined #xwiki  \n05:43\u00a0<mflorea>\u00a0has joined #xwiki  \n06:02\u00a0<Denis1>\u00a0has joined #xwiki  \n06:04\u00a0<Denis>\u00a0has quit  \n06:46\u00a0<Ramona1>\u00a0has joined #xwiki  \n07:02\u00a0<msmeria>\u00a0has joined #xwiki  \n07:16\u00a0<Ramona1>\u00a0has quit  \n07:16\u00a0<Ramona1>\u00a0has joined #xwiki  \n07:17\u00a0<mflorea>\u00a0has quit  \n08:01\u00a0<vmassol>\u00a0has joined #xwiki  \n08:12\u00a0<cjd>\u00a0has quit  \n08:37\u00a0<silverdrop>\u00a0has quit  \n08:38\u00a0<silverdrop>\u00a0has joined #xwiki  \n08:42\u00a0<woshilapin>\u00a0has joined #xwiki  \n08:55\u00a0<cjd>\u00a0has joined #xwiki  \n09:01\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:22\u00a0<gsmeria>\u00a0has joined #xwiki  \n09:29\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:31\u00a0<mflorea>\u00a0has joined #xwiki  \n09:41\u00a0<benoitc>\u00a0has quit  \n09:42\u00a0<gsmeria>\u00a0has quit  \n09:49\u00a0<gsmeria>\u00a0has joined #xwiki  \n09:50\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:51\u00a0<sdumitriu>\u00a0has quit  \n10:01\u00a0<ldubost>\u00a0has joined #xwiki  \n10:08\u00a0<ldubost>\u00a0has quit  \n10:10\u00a0<ldubost>\u00a0has joined #xwiki  \n10:42\u00a0<silverdr1p>\u00a0has joined #xwiki  \n10:43\u00a0<gsmeria>\u00a0has quit  \n10:46\u00a0<silverdrop>\u00a0has quit  \n10:46\u00a0<cjd\\_>\u00a0has joined #xwiki  \n10:47\u00a0<cjd>\u00a0has quit  \n10:55\u00a0<gdelhumeau>\u00a0Hello  \n10:55\u00a0<gdelhumeau>\u00a0it seems setting the env variable globally on jenkins did not fix the issue with the office importer tests  \n11:05\u00a0<ldubost2>\u00a0has joined #xwiki  \n11:07\u00a0<ldubost>\u00a0has quit  \n11:07\u00a0<ldubost2>\u00a0is now known as <ldubost>  \n11:13\u00a0<tmortagne>\u00a0gdelhumeau: do we get any log indicating where it's trying to find libreoffice ? see if it's really taken into account  \n11:14\u00a0<tmortagne>\u00a0maybe the env var at global level is not realy applied in the remote agents  \n11:14\u00a0<tmortagne>\u00a0also you will probaly have to restart the agents for it to be applies  \n11:14\u00a0<tmortagne>\u00a0maybe it's setting the variable when starting the agent and not when starting a job  \n11:15\u00a0<gdelhumeau>\u00a0do you think we could see the variable if I log with SSH on the agents?  \n11:15\u00a0<ldubost>\u00a0has quit  \n11:17\u00a0<ldubost>\u00a0has joined #xwiki  \n11:19\u00a0<gdelhumeau>\u00a0sudo -u jenkins echo ${office.home}  \n11:19\u00a0<gdelhumeau>\u00a0-bash: ${office.home}: bad substitution  \n11:19\u00a0<ldubost2>\u00a0has joined #xwiki  \n11:19\u00a0<Denis1>\u00a0is now known as <Denis>  \n11:20\u00a0<gdelhumeau>\u00a0same with user hudsonagent  \n11:21\u00a0<ldubost>\u00a0has quit  \n11:21\u00a0<ldubost2>\u00a0is now known as <ldubost>  \n11:25\u00a0<gdelhumeau>\u00a0but the PATH is correctly printed on the agent as configured on the jenkins UI  \n11:25\u00a0<gdelhumeau>\u00a0so yes, maybe a restart should be good  \n11:27\u00a0<sdumitriu>\u00a0has joined #xwiki  \n11:32\u00a0<tmortagne>\u00a0gdelhumeau: no I don't think you will see it  \n11:32\u00a0<tmortagne>\u00a0an enc var is set for a specific session and you create a different one when you log  \n11:32\u00a0<tmortagne>\u00a0s/enc/env/  \n11:33\u00a0<gdelhumeau>\u00a0but I can see the correct PATH :/  \n11:33\u00a0<tmortagne>\u00a0testing something  \n11:34\u00a0<tmortagne>\u00a0ha right office.home is not a valid env var  \n11:34\u00a0<tmortagne>\u00a0you can only set it as Java system property (-D)  \n11:34\u00a0<gdelhumeau>\u00a0because of the dots, or the lowercase?  \n11:34\u00a0<gdelhumeau>\u00a0hmm  \n11:34\u00a0<silverdrop>\u00a0has joined #xwiki  \n11:34\u00a0<gdelhumeau>\u00a0then on the maven command  \n11:35\u00a0<tmortagne>\u00a0hmm no  \n11:35\u00a0<tmortagne>\u00a0it's not the same JVM  \n11:35\u00a0<tmortagne>\u00a0it needs to be set in the Java commend starting XE  \n11:35\u00a0<tmortagne>\u00a0so not so easy  \n11:36\u00a0<gdelhumeau>\u00a0or I can add a link  \n11:36\u00a0<gdelhumeau>\u00a0ln -s  \n11:36\u00a0<silverdr1p>\u00a0has quit  \n11:37\u00a0<tmortagne>\u00a0either a link or introduce a valid env var  \n11:37\u00a0<gdelhumeau>\u00a0OFFICE\\_HOME?  \n11:38\u00a0<tmortagne>\u00a0XWiki\\_OFFICE\\_HOME to be safe probably  \n11:38\u00a0<gdelhumeau>\u00a0ok  \n11:38\u00a0<gdelhumeau>\u00a0XWIKI\\_OFFICE\\_HOME  \n11:39\u00a0<tmortagne>\u00a0another possibility is introduce a way to pass system properties to XWikiExecutor (make it look at some kind of map in system properties)  \n11:39\u00a0<tmortagne>\u00a0so that we can pass it whatever we want in the maven command  \n11:40\u00a0<tmortagne>\u00a0hmm maybe using the existing xwikiExecutionStopCommand system property7  \n11:40\u00a0<tmortagne>\u00a0xwikiExecutionStartCommand I mean  \n11:41\u00a0<tmortagne>\u00a0still what is nice with env var is that it's more general and closer to the agent setup  \n11:50\u00a0<gdelhumeau>\u00a0XWIKI-12606  \n11:52\u00a0<benoitc>\u00a0has joined #xwiki  \n12:08\u00a0<gsmeria>\u00a0has joined #xwiki  \n12:13\u00a0<mouhb>\u00a0has joined #xwiki  \n12:31\u00a0<silverdrop>\u00a0has quit  \n12:32\u00a0<silverdrop>\u00a0has joined #xwiki  \n13:18\u00a0<cjd\\_>\u00a0is now known as <cjd>  \n13:24\u00a0<woshilapin>\u00a0has quit  \n13:40\u00a0<cjd>\u00a0has quit  \n14:39\u00a0<Slashman>\u00a0has joined #xwiki  \n14:58\u00a0<Ramona1>\u00a0has quit  \n14:58\u00a0<Ramona3>\u00a0has joined #xwiki  \n14:59\u00a0<Ramona3>\u00a0has quit  \n15:00\u00a0<woshilapin>\u00a0has joined #xwiki  \n15:00\u00a0<Ramona1>\u00a0has joined #xwiki  \n15:00\u00a0<msmeria>\u00a0has quit  \n15:05\u00a0<cjd>\u00a0has joined #xwiki  \n15:07\u00a0<Ramona1>\u00a0has quit  \n15:32\u00a0<Bugendolf>\u00a0has quit  \n15:32\u00a0<Bugendolf>\u00a0has joined #xwiki  \n15:33\u00a0<eromano>\u00a0has joined #xwiki  \n15:44\u00a0<mouhb>\u00a0has quit  \n15:56\u00a0<eromano>\u00a0Hello. I've got a running xWiki instance (7.0.1, standalone installation with jetty), and need to upgrade the container to a newer version of jetty that has a few bugfixes. What's the best way to go about this?  \n16:05\u00a0<cjd>\u00a0eromano: you're using the .zip instance ?  \n16:06\u00a0<eromano>\u00a0yeah  \n16:06\u00a0<cjd>\u00a0Generally we use the .zip for testing and then we switch to a .war instance for production and run it on tomcat  \n16:06\u00a0<vmassol>\u00a0eromano: best is that you install jetty yourself somewhere  \n16:06\u00a0<vmassol>\u00a0and then deploy xwiki in it  \n16:06\u00a0<vmassol>\u00a0as you'd do on any servlet container  \n16:07\u00a0<vmassol>\u00a0(see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationWAR )  \n16:08\u00a0<eromano>\u00a0Hmm, the specifics as to who owns the machine, and how much time we can spend on it are kind of tricky. We ended up hacking at the stand-alone install because we had to get up and going without any real turnaround time =/  \n16:08\u00a0<eromano>\u00a0spend on managing the machine\\*  \n16:08\u00a0<vmassol>\u00a0IMO you'll spend way more time trying to upgrade the standalone distribution  \n16:08\u00a0<vmassol>\u00a0than installing a newer version of jetty  \n16:09\u00a0<vmassol>\u00a0but you can do whatever you want  \n16:09\u00a0<vmassol>\u00a0there's no documentation for upgrading the standalone distribution though since it's not meant to be upgraded :)  \n16:10\u00a0<vmassol>\u00a0so you'll need to understand how the standaloe distribution is configuring jetty  \n16:11\u00a0<eromano>\u00a0I presume it wouldn't be as easy as replacing the jars (same version, just a different minor release with hotfixes)  \n16:11\u00a0<vmassol>\u00a0maybe it'll work  \n16:11\u00a0<eromano>\u00a0And yeah, I know this is not the \"proper\" and smart way to do things... I wish my hands weren't tied.  \n16:11\u00a0<vmassol>\u00a0if it's just some hotfixes indeed  \n16:11\u00a0<vmassol>\u00a0it's even likely  \n16:14\u00a0<vmassol>\u00a0eromano: another thing you could do in // is raise a jira issue on jira.xwiki.org to upgrade jetty so that it's implemented for future releases of xwiki :)  \n16:14\u00a0<mflorea>\u00a0tmortagne: do you remember why you used the current wiki to compute the URL here https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-repository/xwiki-platform-repository-server-api/src/main/java/org/xwiki/repository/internal/resources/AbstractExtensionRESTResource.java#L604 instead of the wiki where the search results was found?  \n16:15\u00a0<cjd>\u00a0It's interesting feedback to understand now that we have users who are forced to use the .zip instance  \n16:15\u00a0<vmassol>\u00a0:)  \n16:15\u00a0<vmassol>\u00a0Notice: Going to remove the xmlrpc jobs on CI  \n16:15\u00a0<eromano>\u00a0I think I will definitely do that once I try to handle this situation. I can't get into all the specifics, but the major reason we did the standalone is because we have ownership over the storage where it exists, but not really ownership over the machine and being able to install a whole new application server  \n16:15\u00a0<vmassol>\u00a0for master  \n16:16\u00a0<eromano>\u00a0The application server we -do- use is old, needs replacing for various reasons, and is totally uncharted waters with xwiki  \n16:16\u00a0<tmortagne>\u00a0mflorea: old sql reflex, the code just assume the request has been executed in the current wiki only. You can fix it if you are on it.  \n16:16\u00a0<mflorea>\u00a0ok, I will, thanks  \n16:16\u00a0<vmassol>\u00a0hmm could it websphere? hehe\u2026 joking :)  \n16:16\u00a0<eromano>\u00a0; ;  \n16:16\u00a0<eromano>\u00a0websphere + db2 hi  \n16:17\u00a0<vmassol>\u00a0nice  \n16:17\u00a0<tmortagne>\u00a0mflorea: I doubt the wiki is selected in the current solr request  \n16:17\u00a0<eromano>\u00a0we're a small team, used to be part of IBM until recently - so we had to suddenly move off of ibm's wiki solution  \n16:18\u00a0<vmassol>\u00a0oh I see, didn't know of ibm's wiki solution actually, what's its name?  \n16:18\u00a0<eromano>\u00a0it's some internal thing that they call connections, not sure if it's based off some other solution  \n16:18\u00a0<mflorea>\u00a0tmortagne: I'll check, but I have a resolver for extracting entity ref from SolrDocument and if the wiki field is not selected then I can pass the current wiki reference as param to the resolver  \n16:18\u00a0<vmassol>\u00a0k, well good luck with the move and if we can help here we'll be happy to do so :)  \n16:19\u00a0<eromano>\u00a0really appreciate it!  \n16:19\u00a0<eromano>\u00a0I'll let you know if just swapping the jars works... we'll see.  \n16:19\u00a0<vmassol>\u00a0if you have specific questions on the standalone config ask here  \n16:20\u00a0<vmassol>\u00a0I built it so I should be able to help out :)  \n16:20\u00a0<vmassol>\u00a0(anyone wanting to move away from websphere is my friend :))  \n16:21\u00a0<vmassol>\u00a0(I suffered so much from it in my earlier life\u2026 was on \u00a0WAS 3.2G\u2026 with not very good support\u2026)  \n16:29\u00a0<eromano>\u00a0Yeah, we've been stuck on an old version of WAS (7). What we do have ownership over is the NAS, which is why we went stand-alone.  \n16:29\u00a0<vmassol>\u00a0I see  \n16:29\u00a0<eromano>\u00a0doesn't help that I'm the newest hire here lol...  \n16:29\u00a0<vmassol>\u00a0hehe  \n16:35\u00a0<tmortagne>\u00a0github does not seems to be in a great shape for me  \n16:35\u00a0<tmortagne>\u00a0at list the http access  \n16:41\u00a0<silverdrop>\u00a0has quit  \n17:15\u00a0<gsmeria>\u00a0has quit  \n17:22\u00a0<Bugen\\_do>\u00a0has joined #xwiki  \n17:25\u00a0<eromano>\u00a0@vmassol doing some minor testing, and corroborating with the changelogs of jetty (this is from 9.2.3 to 9.2.9).... looking like things are safe by just replacing the jars, and forcing the version in JETTY\\_OPTS  \n17:25\u00a0<eromano>\u00a0JETTY\\_OPTS in start.sh  \n17:26\u00a0<eromano>\u00a0for the next poor soul who is in my situation (hopefully no one ever)  \n17:27\u00a0<vmassol>\u00a0eromano: I don't understand why you want to set JETTY\\_OPTS.  \n17:27\u00a0<vmassol>\u00a0having the updtaed jars in jetty/lib should be enough  \n17:36\u00a0<eromano>\u00a0@vmassol had to set jetty.version  \n17:36\u00a0<eromano>\u00a0for the start.jar configs  \n17:36\u00a0<eromano>\u00a0it was still looking for the older jars, and didn't find anything to run  \n17:37\u00a0<vmassol>\u00a0ok, if it works for you then it's good enough :)  \n17:37\u00a0<vmassol>\u00a0thanks for posting back!  \n17:54\u00a0<woshilapin>\u00a0Hi devs, how can I serialize (with all problematic characters escaped) a DocumentReference?  \n17:54\u00a0<woshilapin>\u00a0For example, with a page named bla.foo (in a space 'bar')  \n17:55\u00a0<woshilapin>\u00a0I want something like bar.bla\\.foo  \n17:55\u00a0<woshilapin>\u00a0I tried $services.model.serialize but it seems that it gives me bar.bla.foo  \n17:57\u00a0<woshilapin>\u00a0It looks like it's probably simple, right in front of my eye but I can't get it  \n17:57\u00a0<woshilapin>\u00a0(probably too late in the day)  \n17:58\u00a0<woshilapin>\u00a0Ho, I want to do that at Velocity level  \n18:10\u00a0<tmortagne>\u00a0bar.bla.foo means space bar.bla and document foo  \n18:10\u00a0<tmortagne>\u00a0woshilapin:  \n18:11\u00a0<tmortagne>\u00a0are you really sure your DocumentReference is what you think it is ?  \n18:11\u00a0<tmortagne>\u00a0if you just print it you will get the serialized reference  \n18:11\u00a0<tmortagne>\u00a0with proper escaping etc  \n18:11\u00a0<woshilapin>\u00a0If I print it, I just get bar.bla.foo at the moment  \n18:12\u00a0<tmortagne>\u00a0also what do you get when you print reference.name ?  \n18:12\u00a0<tmortagne>\u00a0$reference.name  \n18:12\u00a0<woshilapin>\u00a0reference.name give me what I expect  \n18:12\u00a0<woshilapin>\u00a0bla.foo  \n18:12\u00a0<woshilapin>\u00a0(so without the space name)  \n18:13\u00a0<woshilapin>\u00a0So it seems that my ref is correct, right?  \n18:13\u00a0<woshilapin>\u00a0reference.parent give me xwiki:bar  \n18:14\u00a0<woshilapin>\u00a0(Space xwiki:bar to be precise)  \n18:15\u00a0<woshilapin>\u00a0No, in fact, it seems that my reference is correct, I must have spot the wrong problem  \n18:15\u00a0<woshilapin>\u00a0mmhh  \n18:15\u00a0<tmortagne>\u00a0the toString works as expected for me in http://tuska.myxwiki.org/xwiki/bin/view/Test/Reference  \n18:15\u00a0<tmortagne>\u00a0(i.e. . are escaped)  \n18:17\u00a0<tmortagne>\u00a0works also in 7.2-SNAPSHOT  \n18:17\u00a0<woshilapin>\u00a0Yes indeed, ok, then I guess I have my answer  \n18:17\u00a0<woshilapin>\u00a0It seems that I'm doing something wrong somewhere  \n18:18\u00a0<woshilapin>\u00a0Thanks, I'll investigate then  \n18:20\u00a0<gdelhumeau>\u00a0mflorea: do you know http://ci.xwiki.org/job/xwiki-enterprise-test-ui-7.2.x/lastBuild/org.xwiki.enterprise$xwiki-enterprise-test-ui/testReport/org.xwiki.test.ui/CopyPageTest/testCopyOverwritePage/ ?  \n18:24\u00a0<mflorea>\u00a0gdelhumeau: I just committed a fix for the tree that might be related. Better wait for the new build to see if it is still failing.  \n18:24\u00a0<gdelhumeau>\u00a0ok thanks mflorea  \n18:25\u00a0<mflorea>\u00a0has quit  \n18:37\u00a0<tmortagne>\u00a0has quit  \n18:43\u00a0<cjd>\u00a0has quit  \n19:05\u00a0<gdelhumeau>\u00a0has quit  \n19:21\u00a0<eromano>\u00a0has quit  \n19:25\u00a0<woshilapin>\u00a0has quit  \n19:29\u00a0<mflorea>\u00a0has joined #xwiki  \n19:39\u00a0<cjd>\u00a0has joined #xwiki  \n20:27\u00a0<ldubost>\u00a0has quit  \n21:00\u00a0<tmortagne>\u00a0has joined #xwiki  \n21:02\u00a0<tmortagne>\u00a0has quit  \n21:06\u00a0<Slashman>\u00a0has quit  \n21:12\u00a0<Slashman>\u00a0has joined #xwiki  \n21:14\u00a0<OSIMasson>\u00a0has quit  \n21:48\u00a0<mflorea>\u00a0has quit  \n22:25\u00a0<KermitTheFragger>\u00a0has quit  \n22:29\u00a0<Bugen\\_do>\u00a0has quit  \n22:51\u00a0<Slashman>\u00a0has quit  \n23:07\u00a0<vmassol>\u00a0has quit\n"}