{"id": "dev:IRC.xwikiArchive20120821", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120821", "title": "IRC Archive for channel #xwiki on 21 August 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:55\u00a0<@cjd>\u00a0sdumitriu: got the registration tests, thanks for pointing them out. cia.vc website is down, I've been asking around a bit about it..  \n01:47\u00a0<ssavi>\u00a0has quit  \n02:25\u00a0<tekzilla>\u00a0has quit  \n02:27\u00a0<tekzilla>\u00a0has joined #xwiki  \n03:44\u00a0<ssavi>\u00a0has joined #xwiki  \n03:54\u00a0<ssavi>\u00a0has quit  \n04:01\u00a0<ssavi>\u00a0has joined #xwiki  \n07:22\u00a0<sdumitriu>\u00a0has quit  \n08:09\u00a0<mflorea>\u00a0has joined #xwiki  \n08:23\u00a0<ssavi>\u00a0has quit  \n08:37\u00a0<vmassol>\u00a0has joined #xwiki  \n08:39\u00a0<vmassol1>\u00a0has joined #xwiki  \n08:42\u00a0<vmassol>\u00a0has quit  \n08:46\u00a0<ssavi>\u00a0has joined #xwiki  \n08:57\u00a0<mflorea>\u00a0has quit  \n09:41\u00a0<ssavi>\u00a0has quit  \n10:45\u00a0<CIA-122>\u00a0Vincent Massol\u000f master\u000f \\* rff24fac\u000f https://github.com/xwiki/xwiki-platform/commit/ff24fac37f08aa0b910d68c252c4011bccfe414e \u000f/ (4 files in 3 dirs):\u000f XWIKI-8153: Allow passing the list of columns to use for the Documents macro - http://git.io/kFLeSw  \n11:17\u00a0<vmassol1>\u00a0hmm my func test is not working for the index module, trying to fix it  \n11:18\u00a0<vmassol1>\u00a0it wasn't working lcoally but I thgouth it was a local problem, but I can see jenkins has the same issue  \n11:18\u00a0<vmassol1>\u00a0http://ci.xwiki.org/job/xwiki-platform/2437/org.xwiki.platform$xwiki-platform-index-test-tests/console  \n11:42\u00a0<vmassol1>\u00a0ok I know  \n12:29\u00a0<vmassol1>\u00a0is now known as <vmassol>  \n12:31\u00a0<vmassol>\u00a0cjd: ping  \n12:36\u00a0<@cjd>\u00a0pong  \n12:39\u00a0<vmassol>\u00a0cjd: are you familiar with CSRF in our selenium test fwk?  \n12:39\u00a0<vmassol>\u00a0I'm trying to understand something  \n12:39\u00a0<vmassol>\u00a0I have one test fialing but tht's because it starts with:  \n12:39\u00a0<vmassol>\u00a0getUtil().createPage(\"Main\", getTestMethodName(), \"\", \"Test Title\", \"xwiki/2.1\", \"Main.WebHome\");  \n12:39\u00a0<@cjd>\u00a0evil random generator?  \n12:39\u00a0<vmassol>\u00a0and if there's a previous test running before it then the url generated is  \n12:39\u00a0<vmassol>\u00a0http://localhost:8080/xwiki/bin/view/Main/testDocumentsMacro?resubmit=%2Fxwiki%2Fbin%2Fsave%2FMain%2FtestDocumentsMacro%3Fsrid%3D3OQrH5sk&xback=%2Fxwiki%2Fbin%2Fview%2FMain%2FtestDocumentsMacro&xpage=resubmit  \n12:40\u00a0<vmassol>\u00a0I don't understand why we geerate CSRF token for creating a new page  \n12:40\u00a0<vmassol>\u00a0there's no form that I know of  \n12:40\u00a0<@cjd>\u00a0that I don't know  \n12:41\u00a0<vmassol>\u00a0it' in TestUitls.getURL() called by createPage  \n12:41\u00a0<vmassol>\u00a0I could call recacheSecretToken before the test starts but that seems just dumb  \n12:42\u00a0<vmassol>\u00a0hmmm actually I think I know why my test fails  \n12:42\u00a0<vmassol>\u00a0it doesn't log the user (since it's an empty it's ok but as a consequence there's no recaching of the token)  \n12:43\u00a0<@cjd>\u00a0hmm  \n12:43\u00a0<vmassol>\u00a0AbstractAdminAuthenticatedTest calls getUtil().recacheSecretToken();  \n12:43\u00a0<vmassol>\u00a0OTOH there's no login  \n12:43\u00a0<vmassol>\u00a0so there shouldn't be any need to recache the token  \n12:43\u00a0<vmassol>\u00a0:)  \n12:44\u00a0<@cjd>\u00a0if it's doing tricks with cookies to become admin, it probably needs to stash and apply the token as well  \n12:44\u00a0<vmassol>\u00a0but here IMO it's just a bug in our test fwk  \n12:44\u00a0<vmassol>\u00a0since TestUtils.createPage doesn't use a form AFAIK so we should have token params in the URL  \n12:45\u00a0<@cjd>\u00a0I'm really not up on that part myself..  \n12:45\u00a0<vmassol>\u00a0checking saveAction  \n12:46\u00a0<vmassol>\u00a0hmm  \n12:46\u00a0<vmassol>\u00a0it's checking for csrf  \n12:46\u00a0<vmassol>\u00a0so it's needed  \n12:47\u00a0<vmassol>\u00a0now I need to understand why the token is found invalid  \n\n"}