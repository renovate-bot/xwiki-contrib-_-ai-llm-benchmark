{"id": "dev:IRC.xwikiArchive20100422", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100422", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nmflorea left at 00:13 (Quit: Leaving.  \nflorinciu left at 00:18 (Read error: Connection reset by peer  \njvelociter left at 00:29 (Quit: jvelociter  \njvdrean left at 00:30 (Quit: Leaving.  \nnickless left at 02:20 (Ping timeout: 245 seconds  \nsdumitriu left at 04:26 (Ping timeout: 264 seconds  \nmflorea joined #xwiki at 06:56  \nflorinciu joined #xwiki at 07:27  \nDenis joined #xwiki at 07:42  \nflorinciu left at 07:51 (Read error: Connection reset by peer  \nkibahop joined #xwiki at 07:57  \nplunden left #xwiki at 08:03  \nkibahop left #xwiki at 08:06  \nvmassol joined #xwiki at 08:12  \nplunden1 joined #xwiki at 08:24  \nflorinciu joined #xwiki at 08:36  \nlucaa joined #xwiki at 09:08  \nnpm left at 09:08 (\\*.net \\*.split  \nnpm joined #xwiki at 09:13  \nSvenDowideit left at 09:26 (Ping timeout: 246 seconds  \nSvenDowideit joined #xwiki at 09:27  \nSvenDowideit\\_ joined #xwiki at 09:29  \nSvenDowideit left at 09:31 (Ping timeout: 245 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit left at 09:38 (Ping timeout: 260 seconds  \nSvenDowideit joined #xwiki at 09:40  \ntmortagne joined #xwiki at 09:44  \nSvenDowideit\\_ joined #xwiki at 09:44  \nSvenDowideit left at 09:47 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit\\_ joined #xwiki at 09:50  \nEnygma` joined #xwiki at 09:50  \nSvenDowideit left at 09:52 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit\\_ joined #xwiki at 09:54  \nvmassol - (09:56): good morning  \nvmassol - (09:56): are we ready for a 2.3 final release? Do we need a RC2?  \nSvenDowideit left at 09:57 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \njvdrean joined #xwiki at 10:01  \nSvenDowideit\\_ joined #xwiki at 10:04  \nSvenDowideit left at 10:06 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit\\_ joined #xwiki at 10:10  \ntmortagne - (10:11): vmassol: do you know why http://jira.xwiki.org/jira/browse/XWIKI-788 is tagged fixed for \"Future\" instead of a real versions ?  \nvmassol - (10:12): since the issue is closed it's defintiely wrong  \ntmortagne - (10:13): yep  \nvmassol - (10:13): we need to put a real version  \nSvenDowideit left at 10:13 (Ping timeout: 264 seconds  \nvmassol - (10:13): 14 march 2008  \nvmassol - (10:13): we can find the version with this  \nSvenDowideit joined #xwiki at 10:14  \nvmassol - (10:14): 1.4M1 I think  \ntmortagne - (10:14): problem is that this issue is wrong from the start it seems there is committs in it since Jul 01 2007 to Mar 14 2008  \nvmassol - (10:15): I'll put 1.4M1, ok with you?  \ntmortagne - (10:15): yep  \nvmassol - (10:15): tmortagne: never mind the start date  \ntmortagne - (10:15): i'm not talking about the start date, i'm saying there is committs in diff\u00e9rents versions  \ntmortagne - (10:15): s/diff\u00e9rents/differents/  \nvmassol - (10:15): yes  \ntmortagne - (10:16): which is supposed to be wrong  \nvmassol - (10:16): yes  \nSvenDowideit\\_ left at 10:17 (Ping timeout: 264 seconds  \nvmassol - (10:17): the first commit is strange  \nvmassol - (10:17): since it seems to be adding hardcoding :)  \nvmassol - (10:17): http://fisheye2.atlassian.com/browse/xwiki/xwiki-platform/web/trunk/standard/src/main/webapp/skins/albatross/textarea\\_wysiwyg.vm?r=3791  \nvmassol - (10:18): anyway  \nSvenDowideit\\_ joined #xwiki at 10:18  \nvmassol - (10:18): ....  \nvmassol - (10:18): old stuff now  \ntmortagne - (10:18): yep  \nSvenDowideit left at 10:19 (Ping timeout: 264 seconds  \nglerouge joined #xwiki at 10:20  \nSvenDowideit joined #xwiki at 10:21  \nSvenDowideit\\_ left at 10:23 (Ping timeout: 264 seconds  \narkub joined #xwiki at 10:24  \nSvenDowideit\\_ joined #xwiki at 10:24  \nflorinciu left at 10:24 (Read error: Connection reset by peer  \nflorinciu joined #xwiki at 10:26  \nSvenDowi- joined #xwiki at 10:26  \nSvenDowideit left at 10:26 (Ping timeout: 264 seconds  \nSvenDowi- is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit\\_ left at 10:29 (Ping timeout: 264 seconds  \nSvenDowideit\\_ joined #xwiki at 10:38  \nSvenDowideit left at 10:40 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit left at 10:46 (Ping timeout: 264 seconds  \nSvenDowideit\\_ joined #xwiki at 10:46  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nlucaa - (11:01): hi guys  \nlucaa - (11:01): is there a way to get the type of a class property in velocity?  \nvmassol - (11:02): lucaa: does the secure uberspect prevents it?  \nvmassol - (11:02): uberspector  \nvmassol - (11:02): (if you're asking I guess it is)  \nlucaa - (11:03): how is that supposed to work?  \nvmassol - (11:03): normally in velocity you'd write:  \nCalebJamesDeLisl - (11:03): Good morning. $obj.getProperty('someProp').getValue() \u00a0?  \nvmassol - (11:03): $myobject.class  \nlucaa - (11:03): no, it should work, I was looking at the wrong API...  \nvmassol - (11:03): or $myobj.getClass()  \nlucaa - (11:03): there is a getType() in PropertyClass  \nvmassol - (11:04): ah sorry misread  \nvmassol - (11:04): thought you wanted to now a java class  \nvmassol - (11:04): you should have said xclass instead of class ;)  \nlucaa - (11:04): vmassol: yes, but I wouldn't need the whole class... I need to know if it's a BooleanProperty or a StaticListProperty, the way I choose it when I create the class props  \nlucaa - (11:05): and yes, it's with a getClassType normally, or something alike  \nnickless joined #xwiki at 11:06  \nCalebJamesDeLisl - (11:09): $obj.getProperty().getName() ?  \nlucaa - (11:10): $obj.getXClass().get(\"propName\").getType()  \nlucaa - (11:10): something like that I need  \nlucaa - (11:11): actually in my case it's  \nlucaa - (11:11): xwiki.getDocument(\"classdoc\").getxWikiClass().get('prop').getType()  \nlucaa - (11:11): and it will return something like StaticListClass or BooleanClass or other  \nCalebJamesDeLisl - (11:13): Hmm, Class.get(String) casts to Element but you need PropertyClass so you can call getType.  \nvmassol - (11:15): tmortagne and all: are we ready for the 2.3 final release?  \ntmortagne - (11:16): vmassol: i did not looked (that's jvdrean's release)  \nvmassol - (11:16): ah right  \nvmassol - (11:16): s/tmortagne/jvdrean/  \ntmortagne - (11:16): but i need to look for 2.2.6 anyway  \nDenis - (11:17): vmassol: I just found a concern with the extension of filters in the livetable :(  \nlucaa - (11:17): hmm... we're not really ready... I would like to do some little things on annos  \nevalica joined #xwiki at 11:17  \nlucaa - (11:17): when do we want to release it?  \nvmassol - (11:17): we're late by a few days already  \nlucaa - (11:17): ok  \nlucaa - (11:17): I thought so  \nvmassol - (11:17): (was supposed to be last monday)  \ntmortagne - (11:18): http://hudson.xwiki.org/job/xwiki-product-enterprise-tests-2.2/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/170/testReport/com.xpn.xwiki.it.selenium/UsersGroupsRightsManagementTest/testGroupRights/ , flickering ?  \nDenis - (11:18): vmassol: my concern, is that the way it have been done is not flexible, and changing that later will be either ugly or not back compatible :(  \njvdrean - (11:18): vmassol: there's a test failing since 1 build that could be related to a recent commit from CalebJamesDeLisl (http://hudson.xwiki.org/job/xwiki-product-enterprise-tests-2.3/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/19/testReport/com.xpn.xwiki.it.selenium/UsersGroupsRightsManagementTest/testCreateNonAsciiUser/) apart from that I think were good for the 2.3 release  \nvmassol - (11:19): Denis: is that something that cannot wait? I mean is that something recently introduced?  \nDenis - (11:19): vmassol: it is a new feature introduced by 2.3  \nvmassol - (11:19): (if it was introduced in 2.3 lifetime and it's not right it needs to be fixed prior to the release)  \nvmassol - (11:19): ok then it should be fixed  \nvmassol - (11:19): if it can be fixed quickly  \nvmassol - (11:19): Denis: are you on it?  \nCalebJamesDeLisl - (11:20): Looking at that test...  \nlucaa - (11:20): I would like to fix XAANNOTATIONS-3 before the release  \nDenis - (11:20): vmassol: this is not an issue, is the way the feature is made that I feel will cause the livetable to be not flexible to evolutions  \nlucaa - (11:20): (at least that)  \nlucaa - (11:21): it's not much but it's ugly and it's a bit more testing  \nvmassol - (11:21): Denis: yes I understood that, but are you working on fixing it before the 2.3 release?  \nvmassol - (11:21): (or would you like to?)  \nDenis - (11:21): vmassol: \u00a0I would like to  \nvmassol - (11:21): Denis: ok cool, how long do you need so that we can decide if we can delay the release?  \nvmassol - (11:21): lucaa: how long do you need too?  \nlucaa - (11:21): 2 hours?  \nvmassol - (11:22): cool  \nvmassol - (11:22): +1 then anca  \nDenis - (11:22): but we need to discuss it a little bit, to see how we want it  \nlucaa - (11:22): however i'm on smth else now... give me a deadline and I'll fit it in  \nvmassol - (11:22): Denis: who did it?  \nvmassol - (11:22): (the first impl)  \nvmassol - (11:22): lucaa: will depend on Denis  \nDenis - (11:22): jvelociter  \nvmassol - (11:22): let's get him here then  \nlucaa - (11:22): yey, can I bribe Denis?  \nvmassol - (11:23): he's coming  \nvmassol - (11:24): lucaa: i doubt Denis can fix this in less than 2 hours anyway\u2026 ideally end of day today for everything fixed would be good  \nvmassol - (11:24): (if it's doable for Denis)  \nlucaa - (11:24): great  \nvmassol - (11:25): but let's see what jerome says  \nDenis - (11:25): for the time needed, the problem will not be the livetable, but if the feature introduce is also used elsewhere and need to be ficed  \nmflorea left at 11:26 (Quit: Leaving.  \nDenis - (11:26): fixing the livetable will be quite easy I think if nothing else use the livetable.js directly  \nvmassol - (11:27): jvdrean: I think you could send an email to propsoe to release tomorrow morning and thus have everyone finish whatever they're on before EOD today, wdyt?  \njvelo joined #xwiki at 11:27  \njvelo - (11:27): Hi  \nvmassol - (11:27): (maybe let's wait for the final word from denis and jerome first)  \nvmassol - (11:27): jvelo: Denis would like to ask you a few questions :)  \nvmassol - (11:27): thanks for dropping by  \njvelo - (11:27): sure. Hi Denis  \nDenis - (11:28): hi jvelo  \nDenis - (11:28): I am not happy with your change to introduce additional filters in the livetable  \njvelo - (11:28): ok  \njvelo - (11:28): why that ?  \njvdrean - (11:28): vmassol: yes, sending the email  \nDenis - (11:29): what is disappointing is that all select and input of the livetable becames filters, and we are therefore unable to have other select or input for something else  \nDenis - (11:30): when filters where limited in a special table, this was not a issue  \njvelo - (11:30): I see  \njvelo - (11:30): Note that was already the case, it  \njvelo - (11:30): s nothing new  \njvelo - (11:31): (nut now it looks at a higher level, I agree)  \nDenis - (11:31): this is new  \nDenis - (11:31): the whole table are englobed  \nDenis - (11:31): this is the problem  \nDenis - (11:32): I have real use case in my current application, where the livetable contains inputs or seletc  \nDenis - (11:32): that are not filters  \njvelo - (11:32): wdym by libetable, you mean rows ?  \nDenis - (11:32): you do a \u00a0$(domNodeName).up(\"div.xwiki-livetable-container\")  \njvelo - (11:32): where exactly you have those inputs ?  \nDenis - (11:32): which means that the filternode will include the whole table  \nCalebJamesDeLisl - (11:33): Sorry for the noise Denis, I confused LiveTable with LiveValidation.  \njvelo - (11:33): ok, but where are your inputs ?  \ngvallarelli joined #xwiki at 11:35  \njvelo - (11:35): (what I mean is I wonder how come you have inputs or select under xwiki-livetable-container at all)  \ngvallarelli - (11:35): Hi  \nDenis - (11:36): For example, I have extended the original code to allow changing the page size, this one is select just after the result count  \nDenis - (11:36): this is a possible proposal for evolution  \nDenis - (11:37): imagine that tomorrow we want to be able to edit fields in the table or any other wonderful stuff...  \nDenis - (11:37): this would be a pain to exclude input/select that are not filter from those that are filters  \njvelo - (11:37): well, inputs in table rows aren't taken as filters  \njvelo - (11:37): (I have some already)  \njvelo - (11:37): but I see  \nDenis - (11:38): how are there excluded ?  \nDenis - (11:38): oh yes, I see  \njvelo - (11:38): there's an easy way out. We can have all filtters declare a css class  \njvelo - (11:38): like 'filter'  \nDenis - (11:38): you means the dynamic rows  \njvelo - (11:38): yes  \nDenis - (11:39): that was my proposal  \nDenis - (11:40): I just wonder if we should also consider those down(\".xwiki-livetable-display-filters\") to be always included as well or not  \nDenis - (11:41): FYI, we have implemented additional filter before you, and the way I does it was to only add another external container, not one that include the table  \nDenis - (11:42): have a look there: http://observatoirebbc.org/site/ObservatoireBBC/MoteurRecherche  \nDenis - (11:42): (you just need to accept the CGV to access it)  \njvelo - (11:43): yes we could give additional containers indeed  \njvelo - (11:44): (it)  \njvelo - (11:44): (it's easier to do, and there is no need to add classes on all existing filters)  \njvelo - (11:46): let me work on a patch quickly, we'll discuss on that basis  \njvelo - (11:46): do you need this for RC1, or we can let the guys release and fix that in RC2 ?  \nDenis - (11:47): to resume, I do not agree to let 2.3 out like it is now, because an englobing element consider all input/select as filter. We could either have another/others non-englobing element to contain filters, or mark filters with a css class  \nDenis - (11:47): vmassol were talking about final, no ?  \nvmassol - (11:47): yes  \nDenis - (11:47): s/were/was  \nvmassol - (11:47): unless we think we need a RC2 but so far I haven't seen the need  \njvelo - (11:48): ok, so we can fix it now then  \nvmassol - (11:48): jvelo: does that change require a RC2?  \nnickless left at 11:48 (Ping timeout: 264 seconds  \njvelo - (11:48): well there are some issues with annotations, but I could not find the time to report them yet  \njvelo - (11:48): this one no, honestly  \njvelo - (11:49): (with the change it will be closer to the table behavior before this new feature)  \njvelociter joined #xwiki at 11:50  \njvelo left at 11:50 (Quit: Ex-Chat  \nDenis - (11:51): jvelociter: I can make the fix, what I need is to know what we really want  \njvelociter - (11:52): Denis: I'm on it already. For me the second approach is better (declare additional containers), WDYT ?  \nDenis - (11:53): yes but it needs to refactor LiveTableFilter  \nDenis - (11:54): our current impl, use 2 instance of LiveTableFilter, but it only allow one additional node.  \nDenis - (11:55): this was done to easily follow your evolution, since we have that since 1.9  \nDenis - (11:57): but with the permalink, we had not fix our additional filters  \nlucaa - (11:58): vmassol: however, there is the issue with annotations which shouldn't be enabled on pages with xwiki 1.0 syntax (not reported, but it's an issue), which I would not be able to fix before the final tomorrow...  \nDenis - (11:58): anyway, the two options are interessting, anyone else have an idea ?  \nlucaa - (11:58): is it ok to have it fixed for one of the 2.3.\\* ?  \nlucaa - (11:59): jvelociter: I think you found that issue too, how 'blocker' is it?  \nvmassol - (11:59): lucaa: isn't is simply a matter of not showing the annotation menu if the syntax is 1.0?  \nvmassol - (11:59): (or showing it but with a message explaining the reason)  \njvelociter - (11:59): lucaa: yes that's one of the issue I had in mind. (the main one actually)  \nvmassol - (11:59): (as we discussed)  \nlucaa - (11:59): it can be that, or it can be a warning. We agreed that we should probably make it a warning  \nvmassol - (11:59): yes warning  \nvmassol - (11:59): that's pretty easy to do no?  \nvmassol - (12:00): couldn't you do that today? :)  \nlucaa - (12:00): is a notification warning enough? (like the one for save and continue)  \nvmassol - (12:00): just some plain text IMO  \nlucaa - (12:00): I can do it, but it depends what we want  \nvmassol - (12:01): ie when you click on the annotation menu  \nvmassol - (12:01): you see only that text displayed in the annotation box  \nlucaa - (12:01): yes, that's doable...  \nvmassol - (12:01): cool!  \nlucaa - (12:01): but there's also the automatic display of annotations on the documents when they're opened issue  \nvmassol - (12:02): hmm but there won't be any annotations  \nvmassol - (12:02): since you cannot add them  \nvmassol - (12:02): right?  \nlucaa - (12:02): very right  \njvelociter - (12:02): Denis: yes the filter need to be a bit rewritten to handle several containers, but that's not very big refactoring  \nvmassol - (12:02): (unless you add them manually I guess but we can refine that later on)  \nlucaa - (12:02): but this means I need to not make the call either, since rendering the doc (even with no annos) can cause trouble  \nlucaa - (12:03): which means I need an extra check  \nvmassol - (12:03): ah ok didn't know there is pb even when there are no anos  \nvmassol - (12:03): annos  \nvmassol - (12:03): so yes indeed that's an additional check  \nlucaa - (12:03): however, this is only UI check  \nlucaa - (12:03): is this ok?  \nvmassol - (12:03): yes  \nvmassol - (12:03): for now it's good enough probably  \nlucaa - (12:03): I mean... shouldn't we check at backend level?  \nlucaa - (12:03): actually no, no need for backend check  \nlucaa - (12:04): because there are (enough) cases when it doesn't cause trouble  \nEnygma` left at 12:04 (\\*.net \\*.split  \nvmassol - (12:04): a next step would be to understand why it fails for syntax 1.0  \nvmassol - (12:04): (but for later)  \nlucaa - (12:04): it doesn't fail for all docs  \nlucaa - (12:04): in enough cases it works  \nlucaa - (12:04): it's the converter I think, which doesn't do a stellar job for complicated scripting  \nvmassol - (12:04): yes  \nlucaa - (12:04): which I think we know already and find it normal, right?  \nvmassol - (12:04): that's why I said to analzyze  \nvmassol - (12:05): so that the convertre can be fixed  \nlucaa - (12:05): ok...  \nvmassol - (12:05): (or not if we decide not to support it)  \nvmassol - (12:05): (would depend on findings)  \nlucaa - (12:05): my point exactly  \nlucaa - (12:05): ok, lunch time now, fixes after  \nvmassol - (12:05): cool  \nEnygma` joined #xwiki at 12:06  \nDenis - (12:06): jvelociter, vmassol: LivetableFilter should be refactored anyway, it is not clean, but we should take care of what we do in term of feature on the livetable, since it is becaming an important feature in XWiki. I know we are a little in hurry, but should not this be discuss further before taking an option (more containers or class tagging) ?  \njvdrean left at 12:07 (Quit: Leaving.  \nvmassol - (12:07): Denis: this is an alien discussion to me. You can start a discussion on the list right now Denis if you want explaining the 2 solutions  \nvmassol - (12:07): so that others can chime in  \nvmassol - (12:07): but it would be good to have a solution before EOD  \njvelociter - (12:07): IMHO we are not going to refactor the LiveTableFilter more than needed to fix this issue (however, we can do so in 2.4). As for container vs. class we can ask input from Sergiu  \njvelociter - (12:08): from my end I'm pretty convinced by the container approach, even if there are cons there too.  \njvelociter - (12:08): we could have : container + a class to exclude an filter  \njvelociter - (12:08): s/an/a/  \nvmassol - (12:10): the livetable could be refactored when we introduce the livetable syntax 2.0 macro  \nDenis - (12:13): vmassol: my concern is more in term of JS than macro  \nvmassol - (12:14): Denis: in any case a RC is not the right time to start a refactoring  \nDenis - (12:15): vmassol: refactoring is a big word there is globally 30 line of code in that class, but it is needed to introduce any reasonable feature of additional filter  \nDenis - (12:16): could we juste drop that feature ? is it used ?  \nvmassol - (12:16): I thought we had agreed re filters  \nvmassol - (12:16): I was only answering to your question about a big refactoring  \nvmassol - (12:16): ah maybe I misread  \nvmassol - (12:17): thought you were talking about the livetable in general  \nvmassol - (12:17): but it seems it was only about filters  \nvmassol - (12:17): Denis: you should know that i know nothing about the livetable; it's a black box for me ;) So my comments are general  \nflaviusolaru joined #xwiki at 12:18  \nvmassol - (12:18): I'll let jerome and you decide (maybe along with sergiu later on and whoever wants to join)  \njvelociter - (12:19): I'm not for dropping it.  \nflaviusolaru - (12:20): is there a way in groovy to execute an xwiki document with an variable set?  \njvelociter - (12:20): it does not mean we will not refactor it further later on, it;s always possible (thanks to the very flexible nature of JavaScript) and keeping the backward compatibility  \njvelociter - (12:20): for example the current livetable is still backward compatible with the old ASSTable with dynamic scrollers  \njvelociter - (12:21): (which the livetable derives from)  \njvelociter - (12:21): so I'm not afraid for the future  \njvelociter - (12:21): that said, I agree we need to chose the APIs carefully  \njvelociter - (12:21): (by APIs I mean DOM apis mostly)  \njvelociter - (12:22): (since almost no one uses the livetable component directly, w/o using the velocity macro)  \njvelociter - (12:23): Denis: OK, I have a first patch we can discuss upon  \njvelociter - (12:23): let me upload it somewhere  \nflorinciu left at 12:26 (Read error: Connection reset by peer  \nflaviusolaru - (12:27): hi guys,  \nflaviusolaru - (12:27): i'm using something like this. \u00a0\u00a0println(xwiki.getDocument(velocityPage).getRenderedContent())  \nflaviusolaru - (12:27): but i want the velocity code in velocityPage to have a variable set from groovy... how can i do this?  \nCalebJamesDeLisl - (12:30): You can use groovy to store a variable in the velocity context.  \nCalebJamesDeLisl - (12:30): This should work: \u00a0xcontext.getContext().get(\"vcontext\").put(\"aUniqueName\", myVar);  \nCalebJamesDeLisl - (12:32): You might have to wrap the groovy macro in a velocity macro {{velocity}}{{groovy}}xcontext.... {{/groovy}} $aUniqueName.doSomething() \u00a0{{/velocity}}  \nvmassol - (12:32): I think it's better to return the value  \nCalebJamesDeLisl - (12:32): You can do that?  \nvmassol - (12:32): no forget that, I think I was mixing stuff  \nvmassol - (12:32): back to my code ;)  \nCalebJamesDeLisl - (12:32): :)  \nvmassol - (12:33): (shouldn't have interrupted)  \nvmassol - (12:33): in the future velocity will share the same JSR223 context but it's not the case now  \nvmassol - (12:33): XWiki Context could be used too  \nCalebJamesDeLisl - (12:33): Ahh yes, since the page must have PR because it's running groovy...  \nDenis - (12:34): jvelociter: I have to go for lunch, I will be back in an hour at most  \njvelociter - (12:34): OK  \njvelociter - (12:34): ping me when you are bacj  \njvelociter - (12:34): s/bacj/back/  \nflaviusolaru - (12:35): thanks guys, i'll give it a try  \nCalebJamesDeLisl - (12:35): so {{groovy}} xcontext.getContext().put(\"uniqueName\", myVar); {{/groovy}} \u00a0\u00a0\u00a0\u00a0{{velocity}} #set($myVar = $xcontext.getContext().get(\"uniqueName\")) {{/velocity}} \u00a0should also work.  \nvmassol - (12:36): CalebJamesDeLisl: why use the private api?  \nvmassol - (12:36): you can also use $context  \nCalebJamesDeLisl - (12:36): Because you can't put arbitrary values into context correct?  \njvdrean joined #xwiki at 12:36  \nCalebJamesDeLisl - (12:37): $xcontext.put() doesn't work (I think).  \nvmassol - (12:37): you need PR but you can  \nvmassol - (12:37): \u00a0\u00a0\u00a0\u00a0public void put(String key, java.lang.Object value)  \nvmassol - (12:37): in Context.java  \nvmassol - (12:37): anyway  \nCalebJamesDeLisl - (12:37): I stand corrected.  \njvelociter - (12:39): vmassol: there's a 2.3-rc-2 in JIRA, it's OK to fix for this one ?  \nvmassol - (12:39): yes, we'll rename it  \njvelociter - (12:39): (will it be renamed 2.3 if we release directly ?)  \njvelociter - (12:39): ok  \njvelociter - (12:39): cool  \njvelociter - (12:44): Denis: for when you are back, I attached a patch to http://jira.xwiki.org/jira/browse/XWIKI-5130  \nglerouge left at 12:47 (Quit: Leaving.  \nflorinciu joined #xwiki at 12:54  \nmflorea joined #xwiki at 13:06  \nsdumitriu joined #xwiki at 13:17  \nflorinciu left at 13:42 (Read error: Connection reset by peer  \nsdumitriu left at 13:43 (Quit: Leaving.  \nflorinciu joined #xwiki at 13:47  \nmariusbutuc joined #xwiki at 13:57  \nmariusbutuc - (14:05): Hi  \nmariusbutuc - (14:05): I wrote in XWiki 2.0 Syntax a service that returns an xml (for a custom AutoSuggest)  \nmariusbutuc - (14:05): yet my <results> get rendered nested inside a <p> element.  \nmariusbutuc - (14:06): How could I get rid of that <p> element?  \nDenis - (14:06): jvelociter: At first sight, seems not bad and without refactoring, nice. You left a console.log()  \njvelociter - (14:08): Denis: ok, cool  \njvelociter - (14:08): maybe \"additionalFiltersNodes\" instead of \"additionalFilters\"  \njvelociter - (14:08): as option entry name  \nDenis - (14:09): additionalFilterNodes  \nDenis - (14:09): ?  \njvelociter - (14:09): yes  \njvelociter - (14:09): better  \nnickless joined #xwiki at 14:10  \nDenis - (14:11): euh, why not support additionalFilterNode as well ?  \nDenis - (14:11): refering to your comment : / can be a dom node or an array of dom nodes  \njvelociter - (14:12): yes ?  \nDenis - (14:13): with an without plural  \nDenis - (14:13): s/an/and  \njvelociter - (14:13): for the semantic ?  \njvelociter - (14:13): because right now additionalFilterNodes will accept both  \njvelociter - (14:13): you can pass a node or an array, both will work fine  \nDenis - (14:13): yes for the semantic  \nDenis - (14:14): this.filtersNodes.push(options.additionalFilterNodes || options.additionalFilterNode);  \nDenis - (14:14): WDYT ?  \njvelociter - (14:15): OK. I don't have anything against, but one could pass an array in the later, it would work too (but not respect the semantic)  \njvelociter - (14:15): (or just a node in the former)  \nDenis - (14:15): I do not care  \njvelociter - (14:16): it's 2 APIs to document :0  \njvelociter - (14:16): :)  \njvelociter - (14:16): instead of one  \njvelociter - (14:16): but again, I'm not against  \nDenis - (14:16): and why additionalFilterNodes in first place finally ?N  \njvelociter - (14:16): wdym?  \nDenis - (14:16): why not just options.filterNode  \njvelociter - (14:17): for backward compatibility  \nDenis - (14:17): and for the semantic options.filterNodes, both could be array as well  \njvelociter - (14:17): I kept the behavior of options.filterNode  \nCalebJamesDeLisl - (14:17): vmassol: I have a test WebElement for representing forms. http://pastebin.com/Fdmb43AT \u00a0You would get a <form> element and cast to this to be able to fill in fields WDYT?  \njvelociter - (14:17): (which is to provide an alternate default filter node, which can be different than the table header one)  \nmariusbutuc left at 14:20 (Quit: Leaving.  \nDenis - (14:20): yes but this could be just extended to supporting it as an array  \njvelociter - (14:21): sure, but the behavior is different  \njvelociter - (14:21): it replaces the default filter node, it does not add up to it  \nmariusbutuc joined #xwiki at 14:21  \njvelociter - (14:22): one would have to pass the livetable-display-filters nodes in the array as well  \njvelociter - (14:22): which might be acceptable,  \njvelociter - (14:22): we just have to be aware of that  \nDenis - (14:22): ah, yes, I see what you means, but this could be simpler to document, no ?  \njvelociter - (14:22): In which case I would be in favor of just having options.filterNodes as an API  \njvelociter - (14:23): yes, it would be the easiest since it's just one API  \nDenis - (14:23): yes and a compatibility option  \njvelociter - (14:23): we can keep the compatibility  \njvelociter - (14:23): and not document it :)  \nDenis - (14:23): exactly  \njvelociter - (14:23): (since it's never been documented I think it's ok)  \njvelociter - (14:24): so that would be  \njvelociter - (14:24): \u00a0\u00a0\u00a0\u00a0this.filtersNodes.push(options.filterNodes || options.filterNode || $(domNodeName).down(\".xwiki-livetable-display-filters\"));  \nDenis - (14:24): so go for this.filtersNodes.push(options.filterNodes || options.filterNode || $(domNodeName).down(\".xwiki-livetable-display-filters\")); only  \nDenis - (14:24): :)  \njvelociter - (14:24): yep  \njvelociter - (14:24): works for me  \njvelociter - (14:25): let me adapt the patch  \nDenis - (14:26): regarding the implementation, I would like to see it change in 2.4, to not select filter nodes in several places and have a central place for that  \nDenis - (14:26): (by filter nodes, I means inputs and selects)  \njvelociter - (14:28): yes  \njvelociter - (14:28): thought about that while doing it  \njvelociter - (14:28): but better in 2.4 I agree  \njvelociter - (14:28): in the constructor I guess will be the right place  \njvelociter - (14:28): will improve perf. a little  \njvelociter - (14:30): Denis: should we keep the \u00a0\u00a0\u00a0\u00a0this.filtersNodes = this.filtersNodes.flatten().compact(); ? or decide it's the caller responsibility ?  \njvelociter - (14:30): (now that we don't add up arrays)  \nDenis - (14:31): yes we do  \nDenis - (14:31): or you need to do it differently  \njvelociter - (14:32): we do = we keep it ?  \nDenis - (14:32): you made a empty array and push the array in it currently  \nDenis - (14:33): or the old compat filterNode option or the default node  \nglerouge joined #xwiki at 14:33  \njvelociter - (14:34): right  \nDenis - (14:34): you can leave compact()  \njvelociter - (14:34): but still that's a developer mistake :)  \njvelociter - (14:34): anyway I will leave them  \njvelociter - (14:34): yes at least compact  \nDenis - (14:35): that would be nice to kept the dom node or array idea  \njvelociter - (14:37): yes  \njvelociter - (14:37): actually we need it  \njvelociter - (14:37): otherwise the option is pretty useless (you can't pass the default node + another one)  \njvelociter - (14:42): Denis: new patch uploaded on http://jira.xwiki.org/jira/browse/XWIKI-5130. If we agree on that I'll commit it  \nmflorea - (14:53): tmortagne: how do you determine that a \"protocol\" like attach in attach:[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection) is not in fact the name of a wiki?  \nmflorea - (14:57): it seems that you determine based on the @image.png sufix. but then why is the \"attach\" needed? IMO [[label>>someEntityReferenceSerialization]] should generate a link to the specified entity (be it a page or an attachment)  \nmariusbutuc left at 14:57 (Quit: Leaving.  \nmflorea - (15:00): the \"attach\" prefix is forcing me to write ugly code on the client.  \nmflorea - (15:00): vmassol: maybe you know why is the \"attach\" prefix required  \nDenis - (15:00): jvelociter: it is not perfect  \nDenis - (15:01): previously, we had applied $() on the filterNode, so we should continue to do so  \nmflorea - (15:02): IMO the attach prefix is redundant as long as the reference point to an attachment  \nlucaa - (15:02): it can also be image, mflorea  \nmflorea - (15:02): no  \nmflorea - (15:02): it can't  \nlucaa - (15:03): lemme read closer  \nplunden1 left #xwiki at 15:05  \ntmortagne - (15:07): mflorea: attach is handled explicitely by the xwiki/2.0 parser  \ntmortagne - (15:07): same for image: AFAIK  \ntmortagne - (15:07): let me look at the code  \ntmortagne - (15:09): image: has it's own event so it's explicit but not at the same level actually  \nmflorea - (15:09): ok, lucaa explained to me why the attach prefix is required  \nmflorea - (15:09): to be able to parse the reference as an attachment and not as a page  \ntmortagne - (15:09): yes  \ntmortagne - (15:09): it's impossible to know that a reference is an attachement without it  \nmflorea - (15:10): ok, in this case the reference syntax include the entitye type prefix, page being omitted as it is the default  \nmflorea - (15:11): attach:attachmentReference  \nmflorea - (15:11): object:objectReference  \nmflorea - (15:11): wiki:wikiReference  \nmflorea - (15:11): and so on  \ntmortagne - (15:11): mflorea: there is a proposal and probably jira issue too about explicit prefix  \ntmortagne - (15:12): to be ablt to support relative URL  \nmflorea - (15:12): ok  \ntmortagne - (15:12): among other things  \nmflorea - (15:13): thanks tmortagne  \njvelociter - (15:13): Denis: OK, thanks for catching this  \njvelociter - (15:13): I made a new patch w/ this change + the small refactoring to invoke the selectors onky once  \njvelociter - (15:13): only once  \njvelociter - (15:13): I think it;s safe  \ntmortagne - (15:14): mflorea: you're welcome, FYI: http://jira.xwiki.org/jira/browse/XWIKI-3611  \njvelociter - (15:18): Denis: http://jira.xwiki.org/jira/secure/attachment/17172/extraFiltersContainers.patch  \nDenis - (15:19): jvelociter: this.filtersNodes = this.filtersNodes.flatten().compact();  \nDenis - (15:19): Drop the compact, it is caller responsability  \nDenis - (15:20): non ?  \nflorinciu left at 15:20 (Read error: Connection reset by peer  \njvelociter - (15:20): I'm OK either way  \njvelociter - (15:21): I don;t think it cost too much to leave it  \nDenis - (15:21): euh, I am not happy with your way to solve the $() issue  \nDenis - (15:22): the caller is not always in a position to provide the node  \njvelociter - (15:23): WDYM ?  \nDenis - (15:23): that I would prefer to be able to provide a list of string  \nDenis - (15:23): is it bad ?  \njvelociter - (15:23): you mean for the filterNodes as well ?  \nDenis - (15:23): yes  \njvelociter - (15:24): I think the case where you pass sting is very marginal  \njvelociter - (15:24): since you are in javascript when you call the livetable constructor  \njvelociter - (15:24): I don't see how you would have access to a dom ID but not its element  \nDenis - (15:25): that just put the responsability of the dom being loaded earlier in the process, no more  \nDenis - (15:26): this is not important, but it is important to note this change clearly for those who knows the previous method  \njvelociter - (15:27): sorry, I don't see where the regression is  \njvelociter - (15:27): because it was already $(options.filterNode), no ?  \njvelociter - (15:27): and options.filterNodes did not exist  \nDenis - (15:28): I do not say, that this is a regression, but filterNodes could be a single node, but not a string when filterNode could have been bothn confusion is easy  \njvelociter - (15:30): ah ok. IMO we just have to document filterNodes properly. If someone tries to do what he used to do with fitlerNode, IMHO he knows already enough to go and look at the code :)  \njvelociter - (15:30): (since he's using an undocumented feature)  \nDenis - (15:30): another option is filterNodes.invoke('$')  \njvelo joined #xwiki at 15:32  \nmariusbutuc joined #xwiki at 15:34  \njvelociter - (15:35): yes, but I don't see the value : if you don't have access to your elements when you instanciate the livetable, then they won't be in the DOM at that moment either  \nDenis - (15:36): options is map, that may be far away, it is just a matter of responsability, do it as you want :)  \nDenis - (15:36): it could be even added later, it does really matter  \nDenis - (15:37): (for 2.3 release)  \njvelo - (15:37): yes we can add that later if someone has a real use case for it  \njvelo - (15:39): (I don't have strong cons against this, my only issue is that if we are always this flexible for everything it has a performance cost)  \ngvallarelli left at 15:58 (Ping timeout: 276 seconds  \njvelo left at 16:06 (Quit: Ex-Chat  \ngvallarelli joined #xwiki at 16:13  \nsdumitriu joined #xwiki at 16:14  \nEnygma` left at 16:49 (Quit: Leaving.  \njvelociter - (16:51): Denis: will commit the patch if you don't have more remarks  \nDenis - (16:52): jvelociter: go on, I have already merged it with my highlight modif on trunk (not commited of course)  \njvelociter - (16:52): ok  \nflaviusolaru left at 17:02 (Quit: Leaving.  \nCalebJamesDeLisl - (17:08): Any chance of pushing XWIKI-4755? It seems pretty serious to me.  \nglerouge - (17:08): lol  \nglerouge - (17:08): bashed by the bot  \nglerouge - (17:08): XWIKI-4755  \ntmortagne - (17:08): no so serious for the bot :)  \nvmassol - (17:09): CalebJamesDeLisl: I see you have a patch there, why didn't you apply it? dangerous?  \ntmortagne - (17:09): it's because of rights  \nCalebJamesDeLisl - (17:09): Because it reveals the exploit.  \nvmassol - (17:09): ?? you're saying we shouldn't fix security issues?  \nvmassol - (17:09): :)  \nvmassol - (17:10): (because they'll reveal the problem)  \nCalebJamesDeLisl - (17:10): No I just want to make sure I don't stir up a hornet's nest by committing.  \nvmassol - (17:10): what we lack indeed  \nvmassol - (17:10): is an official way of publishing security advisory  \nCalebJamesDeLisl - (17:11): I believe in full disclosure as soon as possible. But I also don't think I should unilaterally make the decision.  \nvmassol - (17:11): ok you can bring it up on the dev list  \nvmassol - (17:11): but it's late now for 2.3  \njavahorn\\_ joined #xwiki at 17:11  \nsdumitriu - (17:11): Btw, tmortagne and others, make sure you don't include confidential issues names in the release notes  \nsdumitriu - (17:12): I noticed one such issue a while ago, the title said how to do XSS  \nvmassol - (17:12): we should also find way to provide patches for those who are still on older versions (when possible)  \nCalebJamesDeLisl - (17:12): sdumitriu: Isn't that the opposite of a security advisory?  \nsdumitriu - (17:12): Caleb: Yes, but we need a clear strategy  \nsdumitriu - (17:13): We said not to disclose issues, yet we publish them  \nCalebJamesDeLisl - (17:13): Well 4755 will be disclosed by the commit.  \nsdumitriu - (17:13): I usually make a clone issue that hides the security issue  \nsdumitriu - (17:13): Like: XSS in page Y => Encoding issues with special chars in page Y  \nCalebJamesDeLisl - (17:14): Yes, but the fix for 4755 is filtering the exploit pattern.  \nsdumitriu - (17:14): And use the watered-down issue in the commit and in release notes  \nCalebJamesDeLisl - (17:15): Also the comment in the code explains the problem.  \nsdumitriu - (17:15): You could say something like:  \nsdumitriu - (17:15): Exception shown when searching for words containing backslashes  \nsdumitriu - (17:15): It's correct  \nsdumitriu - (17:16): It's also a problem  \nCalebJamesDeLisl - (17:16): The only way to avoid disclosing this issue that I can see is obfuscating the code and if that's our policy then we have already lost.  \nsdumitriu - (17:16): People could search for something like that without trying to hack the wiki  \nCalebJamesDeLisl - (17:17): Also it should be mentioned that it is a hibernate issue IMO.  \nsdumitriu - (17:17): Since the code is open, a serious hacker would find the hole even without comments  \nsdumitriu - (17:17): +1, hibernate should protect agains it  \nsdumitriu - (17:17): It's supposed to add more security  \nsdumitriu - (17:18): I've said many times that XWiki is secure agains SQL Injection because it uses Hibernate  \nCalebJamesDeLisl - (17:18): I am okay with the idea of trying to thwart exploiters but I worry that it turns into trying to protect a false sense of security with the users.  \nsdumitriu - (17:18): And if that's only partially correct, then it's almost as not being correct at all  \nvmassol - (17:18): someone should research how open source project handle this  \nvmassol - (17:18): like tomcat for example  \nvmassol - (17:18): or hibernate  \nvmassol - (17:18): or jboss  \nmariusbutuc left at 17:19 (Quit: Leaving.  \nsdumitriu - (17:19): They have full disclosure and always say that users should upgrade  \nsdumitriu - (17:19): But it's easy for them to say this  \nCalebJamesDeLisl - (17:19): I couldn't find any issue at hibernate on this and seemed to get the cold sholder asking about it on their irc channel.  \nsdumitriu - (17:19): They have few branches, and they are pretty much stable  \nsdumitriu - (17:19): They can ask all their users to upgrade  \nsdumitriu - (17:20): Moreover, Tomcat isn't usually installed directly, but pulled from a distro  \nvmassol - (17:20): http://tomcat.apache.org/security-5.html  \nvmassol - (17:20): interesting  \nsdumitriu - (17:20): So making distros push an upgrade is easy  \nsdumitriu - (17:20): We have a new branch every 3 months  \nsdumitriu - (17:20): Maintaining 10 branches is almost impossible  \nCalebJamesDeLisl - (17:21): We can provide mod\\_sec advice. We can also provide patches for old versions but this hurts.  \nvmassol - (17:21): security impact rating: http://tomcat.apache.org/security-impact.html + tomcat security team ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)) +  \nvmassol - (17:21): theu don't do that either  \nvmassol - (17:21): \"Please note that Tomcat 5.0.x is no longer supported. Further vulnerabilities in the 5.0.x branch will not be fixed. Users should upgrade to 5.5.x or 6.x to obtain security fixes. Vulnerabilities fixed in Tomcat 5.5.26 onwards have not been assessed to determine if they are present in the 5.0.x branch.\"  \nsdumitriu - (17:21): (Linux can do this since they use git and an army of maintainers)  \nvmassol - (17:21): http://tomcat.apache.org/security.html  \nsdumitriu - (17:22): I already said this, we can't easily maintain 10 branches, and we can't force users to upgrade  \nsdumitriu - (17:22): We're not stable enough  \nsdumitriu - (17:22): So, for the moment, we must hide security issues  \nvmassol - (17:22): I don't agree that we're not stable enough  \nCalebJamesDeLisl - (17:22): The problem I see is if we are not strait with users about our issues and someone gets hit, how long will it take to regain credibility?  \nvmassol - (17:22): we maintain 2 branches  \nsdumitriu - (17:22): If we get an easy path to upgrades, we'll be able to have fully open disclosures  \nvmassol - (17:22): so the last branch is stable  \nglerouge - (17:23): question  \nsdumitriu - (17:23): We still have lots of users on 1.4  \nglerouge - (17:23): did we fix the forgot username feature in recent releases so that it works for private wikis?  \nvmassol - (17:23): that's true for all software sergiu  \nglerouge - (17:23): right now I get \"your username is ${xwiki.getDocument($results.get(0)).name}\"  \nglerouge - (17:23): which is pretty much useless  \nsdumitriu - (17:23): glerouge: Nope  \nsdumitriu - (17:24): It's hard to fix  \nCalebJamesDeLisl - (17:24): I'm running fedora9 and if there are issues I want to know so I can firewall against them.  \nsdumitriu - (17:24): We need to change the rights system  \nglerouge - (17:24): so right now I'd better hide it, right ?  \nglerouge - (17:24): couldn't we use a protected API to get the username ?  \nsdumitriu - (17:24): \"Forgot your\" is a page, and private wikis prevent all pages to be seen  \nglerouge - (17:24): I can make the page public  \nglerouge - (17:25): the issue is that it can't search in xwikiuser docs  \nCalebJamesDeLisl - (17:25): Suppose we were to say \"there is an issue with .....\" but not provide the sample exploit.  \nCalebJamesDeLisl - (17:25): This is how mediawiki does it.  \nglerouge - (17:29): sdumitriu: couldn't it work ?  \nglerouge - (17:30): btw, there's a translation to fix in login.vm  \nglerouge - (17:30): \u00a0\u00a0<div style=\"font-size: 70%; margin-top: 2em;\">Forgot your <a href=\"$xwiki.getURL('XWiki.ForgotUsername')\">username</a> or <a href=\"$xwiki.getURL('XWiki.ResetPassword')\">password</a>?</div>  \nDenis - (17:32): glerouge: there is a patch in jira  \nglerouge - (17:32): ok  \nDenis - (17:33): glerouge: applewebdata://6DE2051C-6F93-4944-BFED-0F78B7E61E60/jira/browse/XWIKI-4998  \nCalebJamesDeLisl - (17:34): XWiki difficulty of updating is analogus to PHP, here is a security advisory by them: http://pear.php.net/advisory-20070507.txt  \nsdumitriu - (17:46): Caleb, doesn't the fix for XWIKI-4755 still allow normal ' problems?  \nsdumitriu - (17:47): I think we manually escape ' in some places, by replacing it with ''  \nCalebJamesDeLisl - (17:47): Well yes but hibernate doesn't normally allow ; drop table abc; commit;  \nCalebJamesDeLisl - (17:47): in a search.  \nCalebJamesDeLisl - (17:48): s/doesn't/shouldn't :)  \nCalebJamesDeLisl - (17:49): If it's parameterized then you're fine. this is for when users are allowed to construct a query.  \nevalica left at 17:52 (Quit: Leaving.  \nCalebJamesDeLisl - (17:53): re: \u00a0\"we manually escape ' in some places\". Not anymore I fixed that to use parameters so that this exploit wouldn't work from a URL.  \nvmassol - (17:54): Denis: thanks for volunteering to be a release manager + maintainer + tester on branches! :)  \nDenis - (17:55): vmassol: maintaining branche does not means releasing ;)  \nvmassol - (17:55): you could start with the 2.2 branch maybe, wdyt?  \nvmassol - (17:55): it does to me  \nvmassol - (17:55): otherwise there's no need to do anything  \nvmassol - (17:56): and I'll be ?1 to not offer anything without quality  \nvmassol - (17:56): strong -1  \nDenis - (17:56): just responding to your conclusion that being for branches is being volunteer to doing release.  \nvmassol - (17:56): but you could do it on your own repo  \nvmassol - (17:56): whatever comes from the xwiki dev team  \nvmassol - (17:56): must be of good quality  \nvmassol - (17:57): that's my personal req I would be pushing  \nvmassol - (17:57): and release is the only way to ensure that quality  \nvmassol - (17:57): apart from this from my POV you're free to maintain as many branches you wish  \nDenis - (17:57): more seriously, I do not know the work involved in releasing, but I am closely sure that I will not have time. Anyway, my +1 means that this is a needs  \nvmassol - (17:57): no  \nvmassol - (17:57): +1 means I want to help  \nvmassol - (17:58): it's of no use to say +1 id you're no willing to help  \nDenis - (17:58): yes I know  \nCalebJamesDeLisl - (17:58): Thanks Denis! I have long thought 2 was not quite enough.  \nvmassol - (17:58): CalebJamesDeLisl: it's not the question  \nvmassol - (17:58): I'd like to support 999999  \nvmassol - (17:58): branches  \nvmassol - (17:58): see  \nvmassol - (17:58): that's easy to say  \nvmassol - (17:58): :)  \nDenis - (17:58): what do you think of doing some LTS release  \nvmassol - (17:58): now you need to commit further  \nvmassol - (17:58): if you want to see it happen  \nDenis - (17:59): my feeling about XWiki is that your release happen to often to upgrade  \nvmassol - (17:59): Denis/ I'd like to increase that speed  \nvmassol - (17:59): it's way too slow now  \nDenis - (17:59): you expect releasing 2.3 tomorrow, I have juste finish migrating from 1.9 to 2.2 last week !  \nvmassol - (17:59): I'd like the release to be daily if we can reach that stage  \nvmassol - (17:59): so?  \nDenis - (17:59): this is a real life production example  \nvmassol - (17:59): so?  \nvmassol - (18:00): there are nightly builds every day  \nvmassol - (18:00): actually at each commit  \nvmassol - (18:00): but you don't upgrade at each commit  \nvmassol - (18:00): do you?  \nDenis - (18:00): so in production, we need more stable release, with major bug fix, and slower  \nvmassol - (18:00): errr  \nvmassol - (18:00): you're mixing different thigns IMO  \nDenis - (18:00): this is what I means by LTS  \nvmassol - (18:00): the open source project has nothing to do with your produciton  \nvmassol - (18:00): you're the owner of that  \nvmassol - (18:00): not the xwiki open source project  \nvmassol - (18:01): the goal of hte xwiki open soruce project  \nvmassol - (18:01): is to release features ASAP to users  \nvmassol - (18:02): googling lts  \nDenis - (18:02): LTS refer to ubuntu releases  \nCalebJamesDeLisl - (18:02): I think what Denis is getting at is we should have a version (such as 2.2) which will be supported for a long time.  \nvmassol - (18:03): definitely -1  \nvmassol - (18:03): companies can do that  \nvmassol - (18:03): supporting a given branch for 5 years  \nDenis - (18:03): Ubuntu is open source !!!!  \nvmassol - (18:03): so?  \nDenis - (18:03): not a company  \nvmassol - (18:03): they do what they wanrt  \nvmassol - (18:03): want  \nvmassol - (18:03): if they can afford it fine  \nvmassol - (18:03): and they are a company  \nvmassol - (18:03): with millions  \nvmassol - (18:03): to give away  \nvmassol - (18:04): Denis: as I said  \nvmassol - (18:04): if you want to volunteer to support  \nDenis - (18:04): You want to release as soon as possible new feature, I agree, but on the other side, we have user still in 1.4, what is your goal ?  \nvmassol - (18:04): all our past versions for the coming 5 yeasr  \nvmassol - (18:04): you're free to do so  \nDenis - (18:04): not all version, but some of them  \nvmassol - (18:04): nobodoy is preventing any committer from doign this  \nvmassol - (18:05): xwiki SAS does support old versions for its customers for ex  \nDenis - (18:05): this what I should do to use your product anyway, I have step from 1.1 to 1.4, than 1.9 and 2.2  \nvmassol - (18:05): that requires money and people  \nvmassol - (18:05): what we should focus on instead IMO  \nDenis - (18:06): but how do you manage that, do you upgrade them, or maintain many version in production ?  \nvmassol - (18:06): is continue working on upgradeability  \nvmassol - (18:06): that's part of the open source mission  \nCalebJamesDeLisl - (18:06): I think it would be nice to have one or two very old branches where major security and bugs can be fixed.  \nvmassol - (18:06): Denis: maintain + upgrade when possible  \nvmassol - (18:06): CalebJamesDeLisl: again  \nvmassol - (18:06): you can o it  \nvmassol - (18:06): do it  \nvmassol - (18:06): are you volunteering?  \nCalebJamesDeLisl - (18:07): Did I say +1? ;)  \nvmassol - (18:07): I'm not but you can volunteer if you want  \nvmassol - (18:07): you did :)  \nCalebJamesDeLisl - (18:07): Seriously though I would be willing to help some, but I'm already too busy to take on another issue alone.  \nvmassol - (18:07): my only req is to provide quality bug fix releases  \nDenis - (18:07): Except the fact that I still do not know what releasing really means in term of work, I would consider my +1 being such  \nvmassol - (18:07): ie tested thoroughly  \nvmassol - (18:08): Denis: you could try a release next time  \nvmassol - (18:08): maybe for 2.2.7 for ex  \nvmassol - (18:08): same for CalebJamesDeLisl  \nCalebJamesDeLisl - (18:09): If we patch a bug in the new version it gets tested thoroughly in the new so I would think less testing would be needed in the old version when it's merged.  \nDenis - (18:09): with a similar scheme than the current LTS model of ubuntu, but over probably a shorter time, 5 years is too much  \nvmassol - (18:09): if you guys are interested in that  \nvmassol - (18:09): I'm sure jv and thomas woul dbe happy to share the work ;)  \nvmassol - (18:09): CalebJamesDeLisl: it really depends  \nvmassol - (18:09): other part of the software move  \nvmassol - (18:09): s/part/parts/  \nvmassol - (18:09): and they usually don't get backported  \nvmassol - (18:09): since they're not bug fixes  \nvmassol - (18:09): so in several cases it's really hard  \nCalebJamesDeLisl - (18:10): And that is the correct way IMO.  \nvmassol - (18:10): we had the case in 2.2.x for ex  \nCalebJamesDeLisl - (18:10): Old versions should only become more stable with time.  \njvdrean - (18:10): (vmassol: definitely interested, interesting discussion ;) )  \nDenis - (18:10): vmassol: maintaining the version we has on our side in production, why not, I could try, but not alone  \nCalebJamesDeLisl - (18:11): I have seen a lot of work go into releasing. Couldn't it be done more easily?  \nvmassol - (18:11): CalebJamesDeLisl: that's part of the release manager work: i.e. work on making it easier next time  \nvmassol - (18:11): for some reason jv and thomas think it's good enough right now so they haven't really spent too much time improving the process lately ;)  \nCalebJamesDeLisl - (18:11): All of those poms getting updated and inevitable some end up broken.  \nvmassol - (18:12): that's easy to fix  \nvmassol - (18:12): using the versions plugin  \nvmassol - (18:12): I think, haven't tried it  \nvmassol - (18:12): if you want to get familiar: http://dev.xwiki.org/xwiki/bin/view/Community/ReleaseProcess  \nCalebJamesDeLisl - (18:12): Why is release done on hudson? Why not just check out a copy and build?  \nvmassol - (18:12): it's not unfortunaltey  \nvmassol - (18:13): but we'd like to move to that  \nvmassol - (18:13): using nexus pro and staging  \nCalebJamesDeLisl - (18:13): So we can have fully automatic releasing?  \nvmassol - (18:13): it's the only way to quarantee that the tested version works  \nvmassol - (18:13): no  \nvmassol - (18:13): see the release process  \nvmassol - (18:13): xwiki.org seems down to me  \nvmassol - (18:13): can't get access to the page  \nDenis - (18:13): does it means that in a near future, maintaining more branch could be easier ?  \nvmassol - (18:14): no  \nDenis - (18:14): why ?  \nvmassol - (18:15): unless someone work on improving the tooling  \nvmassol - (18:15): nexus pro would simply make the process cleaner  \nvmassol - (18:15): with a staging area  \nvmassol - (18:15): so that testers can test it  \nvmassol - (18:15): before it's released  \nCalebJamesDeLisl - (18:15): What I'm wondering is why are the changes to the poms committed to the tree? Why not change locally?  \nvmassol - (18:15): so yes it would make it slightly more speedy in the sense that you wouldn't need to rebuild (provided we succeed in handling versions)  \nvmassol - (18:15): CalebJamesDeLisl: you need ot be able to check out a tag and build it  \nDenis - (18:15): so, either the releasing process is light enougth so that we can release more branches, or we should work on improving it, no ?  \nvmassol - (18:15): and you need to upgrade the pom versions for the next release  \nvmassol - (18:16): Denis: we should always work on improving the release process anyway  \nvmassol - (18:16): till we reach a single button press  \nvmassol - (18:16): that includes more automated tests  \nvmassol - (18:16): but when I see a lot of features currently being committed with no test  \nDenis - (18:16): ok, so my +1 when it is button press :)  \nvmassol - (18:16): I think we're going in the wrong direction  \nvmassol - (18:16): if we look at our sonar dashboqrd  \nvmassol - (18:17): Im' pretty sure we'll notice that we don't go in the right direction  \nDenis - (18:17): anyway, releasing and testing 2.2.5 should have been more easy than a major release, and this what we talk about, backporting major issues, and releasing them, no more  \nvmassol - (18:18): so that's the first part  \nvmassol - (18:18): no commit without unit tests and funcitonal tests  \nDenis - (18:18): I would agree if we do not have that old code badly written for anything including tests  \nvmassol - (18:19): even for new code we don't have near enough tests  \nCalebJamesDeLisl - (18:19): I have been working most of the morning trying to get a simple selenium2.0 test written. It seems that the page object model is harder to write and harder to debug when they fail.  \nvmassol - (18:19): not really caleb  \nvmassol - (18:19): it's simplified by 10 the process already  \nvmassol - (18:19): much easier than before  \nvmassol - (18:20): you just start your wiki and then run your tests in your ide using your debugger  \nCalebJamesDeLisl - (18:20): Like Emacs. Steep learning curve means you learn a lot fast.  \nvmassol - (18:20): whereas before you had to fiddle with the selenium proxy to start  \nvmassol - (18:20): + you can run them using htmlunit too  \nvmassol - (18:20): which speeds them up  \nvmassol - (18:20): and page objects make test really easy to understand  \nCalebJamesDeLisl - (18:21): Really? I just typed mvn clean install -Dpattern=AdministrationTest and everything worked for me.  \nvmassol - (18:21): that's not debugging  \nvmassol - (18:21): and you're not in your ide  \nCalebJamesDeLisl - (18:22): Ok, I see we are debugging differently. I would read the error message, read the code, make a change and run again.  \nvmassol - (18:22): that's way too long!  \nvmassol - (18:22): :)  \nvmassol - (18:22): I understand now why you say it's taking time  \nvmassol - (18:22): :)  \nvmassol - (18:22): btw yes we need to add the maven tooling too  \nCalebJamesDeLisl - (18:22): What is this IDE you speak of? Some kind of advanced text editor? Emacs is better ;)  \nvmassol - (18:23): any real ide  \nvmassol - (18:23): emacs is not an ide  \nvmassol - (18:23): emcas is text editor  \nCalebJamesDeLisl - (18:23): Actually I use gedit because I understand all of it's features.  \nCalebJamesDeLisl - (18:23): It can load, save AND it has syntax highlighting.  \nvmassol - (18:24): woahhh  \nvmassol - (18:24): incfedible  \nvmassol - (18:24): :)  \nvmassol - (18:24): incredible  \nglerouge - (18:24): vmassol: ping on skype  \nvmassol - (18:25): seriously all you need is the ability to run a junit test in debug mode in your tool (whatever it is\u00e0  \nDenis - (18:25): I have lost days with eclipse, lost some formatting with netbeans, I am currently using IDEA, what do you think of asking them for an open source license ?  \nvmassol - (18:25): Denis: we have one already  \nvmassol - (18:25): I use IDEA  \nvmassol - (18:25): but they gave us nominative licenses AFAIR  \nvmassol - (18:25): so we'd need to request additional licenses if you want one  \nvmassol - (18:25): we = xwiki committers  \nDenis - (18:25): if you have, all commiters should  \nDenis - (18:26): yes I definitively want  \nvmassol - (18:26): as I said it requires to send them an email  \nvmassol - (18:26): you can have one if you ask  \nvmassol - (18:26): note that legally you can only use it when developping for the xwiki project  \nvmassol - (18:26): :)  \nDenis - (18:26): yes I know  \nDenis - (18:27): I do not think is fair, but I know  \nDenis - (18:27): anyway, if I found the additional feature nice, I will bougth a commercial one  \nDenis - (18:28): what is sure is that I do not want to use eclipse anymore  \nDenis - (18:28): why isn't there more information on IDEA on the site, it would be useful  \nvmassol - (18:29): what is not fair?  \nvmassol - (18:29): what site?  \nvmassol - (18:30): re xwiki the dev is agnostic re the IDE, you can use the one you want. The only req is to have \u00a0a maven build  \nvmassol - (18:30): http://dev.xwiki.org/xwiki/bin/view/Community/DevelopmentTools#HIntelliJ20IDEA  \nvmassol - (18:31): don't think anyone is maintiaing it  \nglerouge left at 18:31 (Quit: Leaving.  \nvmassol - (18:31): if you want to update it you can  \nDenis - (18:31): I will when I know what to write !  \nvmassol - (18:31): I don't think there's anything to wreite  \nvmassol - (18:32): s/wreite/write/  \nDenis - (18:32): what is not fair is the license of IntelliJ, since OpenSource project spread the word, and disallowing the same developper to do commercial work is not fair  \nDenis - (18:33): do you means that it is so simple, that I will find my way (I use it since 2 weeks only)  \nDenis - (18:33): and I have do more that in 2 weeks of eclipse for sure  \nvmassol - (18:33): I still don't get it re teh fair  \nvmassol - (18:33): I think they're way more than fair  \nvmassol - (18:33): since  \nvmassol - (18:34): 1) they have an open source version  \nDenis - (18:34): this is new  \nvmassol - (18:34): 2) they give free license to open source projects  \nvmassol - (18:34): i don't see what could be fairer  \nDenis - (18:34): this is nice, but being a full time opensource developper is a luxe !  \nvmassol - (18:34): Denis: I doubt we should write anything related to IDEA usage itself  \nDenis - (18:35): I was just meaning doing the same that have been done for eclipse, like how to setup a debugging environment  \nDenis - (18:36): I have setup a remote one rather quickly already, really nice, but I have for sure more nice feature to discover  \nDenis - (18:36): so, what shoud I do to get the license ?  \nvmassol - (18:39): Denis: so you'd like them to give you free license just because you ask?  \nvmassol - (18:39): and you'd work on business project you'd seel  \nvmassol - (18:39): sell  \nvmassol - (18:39): and not give them a penny  \nvmassol - (18:39): ?  \nvmassol - (18:39): re IDEA and xwiki there's nothing special, not a single point I can see  \nvmassol - (18:39): we don't have any plugin, we don't use it in any special way,  \nvmassol - (18:39): the only thing to know maybe is to exclude the idea-specific files from svn :)  \nDenis - (18:39): about fairness, my thougth is just that I should switch my IDE once the jobs is commercial, not so easy in practice. But there is no doubt, if I found needs for the license feature in a commercial project, I will bougth the license  \nvmassol - (18:39): re debugging I use remote debugging  \nvmassol - (18:39): but maybe it's better to have tomcat started from inside it, no idea, never used that  \nvmassol - (18:39): re the license you need to contact them and ask for a license. I think they have a form to fill on their site  \nDenis - (18:40): finaly, IDEA is what I want, it work out of the box :)  \nCalebJamesDeLisl - (18:41): One way to support old versions would be to release at wider intervals. If somebody doesn't want to upgrade so they are using an old version, we shouldn't bother them to upgrade their old version once a month.  \nvmassol - (18:41): for some reason my internet connection is darn slow right now  \nvmassol - (18:41): trying to find the url for you but it's too slow  \nvmassol - (18:41): in any case you can try going to the jetbrains site  \nvmassol - (18:41): and look for opens oruce license  \nvmassol - (18:42): CalebJamesDeLisl: I don't agree with releaseing less often  \nvmassol - (18:42): it has a lot of problems  \nvmassol - (18:42): with are way worse than the opposite  \nvmassol - (18:42): and you'll get angry customers as a result  \nvmassol - (18:42): (if only for one reason: you'll be more buggy  \nvmassol - (18:42): )  \nCalebJamesDeLisl - (18:42): The opposite being not to support old versions at all?  \nvmassol - (18:44): yes that's my dream  \nvmassol - (18:44): this is what happens in saas mode for ex  \nCalebJamesDeLisl - (18:44): saas mode?  \nDenis - (18:45): software as a service  \nvmassol - (18:45): Denis: http://www.jetbrains.com/idea/buy/buy.jsp#openSource\\_howToApply  \nCalebJamesDeLisl - (18:46): Sure like google. They do the upgrading for you though.  \nvmassol - (18:47): that's why I say that we should work on seamless upgrades  \nvmassol - (18:47): that's the direction I'd like use to take  \nvmassol - (18:47): hudson is a good example btw  \nvmassol - (18:47): it has an upgrade button inside of itself  \nvmassol - (18:47): they release versions every week  \nvmassol - (18:48): their upgrade process is really streamlined  \nvmassol - (18:48): once we have our extension manager  \nvmassol - (18:48): we could potnetially push it to the extreme  \nCalebJamesDeLisl - (18:48): I like the sound of seamless upgrades. I'm not sure if admins will upgrade often though, even so.  \nvmassol - (18:48): and have auto upgrades of core modules too  \nvmassol - (18:48): they will  \nvmassol - (18:48): but only on one condition  \nvmassol - (18:48): that we have a good track record  \nvmassol - (18:49): of seamless upgrades  \nvmassol - (18:49): (that don't break their stuff)  \nvmassol - (18:49): ;)  \nvmassol - (18:49): that's the hard part  \nCalebJamesDeLisl - (18:49): It's all about credibility. As with the security issue.  \nvmassol - (18:49): yep  \nDenis - (18:50): seamless upgrade is a nice idea\u2026 for XWiki 4 or 5 no ?  \nvmassol - (18:50): yep  \nDenis - (18:50): we are so far from that currently  \nvmassol - (18:50): I'm working on it  \nvmassol - (18:51): I worked on it today for ex  \nvmassol - (18:51): writing a poc for an osgi bridge  \nCalebJamesDeLisl - (18:52): I have been wanting to write a script to roll back updates of documents which are for configuration.  \nsdumitriu left at 18:52 (Ping timeout: 264 seconds  \nlucaa - (18:53): guys I'm getting  \nlucaa - (18:53): Caused by: java.lang.RuntimeException: Failed to set field [componentManager] in instance of [org.xwiki.container.internal.DefaultApplicationContextListenerManager]. The Java Security Manager has probably been configured to prevent settting private field values. XWiki requires this ability to work.  \nlucaa - (18:53): when trying to install xwiki enterprise war in a local tomcat6 to do some tests. Can you help?  \nDenis - (18:53): probably having some more stable release in the meantime could helps in the adoptance of the platform  \nvmassol - (18:53): lucaa: yes you need to read th einstall notes  \nvmassol - (18:53): let me get them  \njvdrean left at 18:53 (Quit: Leaving.  \nmflorea left at 18:53 (Quit: Leaving.  \nvmassol - (18:53): install notes I mean  \nvmassol - (18:53): http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationTomcat  \nvmassol - (18:53): :)  \nvmassol - (18:54): btw nice error message  \nvmassol - (18:54): clear and concise  \nvmassol - (18:54): :)  \nlucaa - (18:54): found it  \nlucaa - (18:54): yes super error  \nCalebJamesDeLisl - (18:54): Allowing private field reflection is horrible. How much needs that?  \nlucaa - (18:54): especially since it said XWiki I knew where to go and complain...  \nvmassol - (18:55): :)  \nvmassol - (18:57): CalebJamesDeLisl: for more details see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Installation#HInstallandconfigureaServletContainer  \nCalebJamesDeLisl - (18:58): \"Needed by Hibernate and others\" Hibernate shouldn't need it if we just set the fields to public.  \nCalebJamesDeLisl - (18:59): I mean use public getters and setters  \nvmassol - (18:59): we need that too for XWiki components  \ntmortagne left at 18:59 (Quit: Leaving.  \nvmassol - (18:59): fileld injection  \nvmassol - (18:59): s/fileld/field/  \narkub left at 18:59 (Ping timeout: 258 seconds  \nCalebJamesDeLisl - (18:59): +1 for constructor injection.  \nCalebJamesDeLisl - (19:00): Also those fields should be final.  \nlucaa - (19:01): it would be nice if we shipped the default war with the hsql db driver so that it does work out of the box installed in a container...  \nvmassol - (19:01): you'll have a hard time convinicng me  \nlucaa - (19:01): and with the default configured db...  \nvmassol - (19:01): lucaa: yes we talked about it, and I agree  \nvmassol - (19:02): would need a new discussion  \nCalebJamesDeLisl - (19:02): vmassol: You don't like constructor injection? Because of the scaffolding?  \nvmassol - (19:02): I'd like to have default config values for everything  \nvmassol - (19:02): so that xwiki can work without any config file  \nlucaa - (19:02): and here's how XAANNOTATIONS-3 comes to take long long longer than one would say...  \narkub joined #xwiki at 19:02  \nvmassol - (19:02): so the default for the db would be hsqldb for ex  \nflaviusolaru joined #xwiki at 19:02  \nDenis - (19:03): vmassol: the link to apply for the license does not work :(  \nvmassol - (19:05): Denis: work for me  \nvmassol - (19:05): Denis: btw you don't qualify right now  \nDenis - (19:05): vmassol: clicking on FREE apply link works ?  \nvmassol - (19:06): ah no haven't tried  \nvmassol - (19:06): jsut tried the link i gave you  \nvmassol - (19:06): Please make sure that you meet the following criteria:  \nvmassol - (19:06): \u2022 You are the project lead or a committer  \nvmassol - (19:06): \u2022 You have been working on your open source project for a minimum of 3 months  \nvmassol - (19:06): \u2022 Your community is active. This means that you have recent activity in your newsgroups or forums  \nvmassol - (19:06): \u2022 You have an updated News section on your site  \nvmassol - (19:06): \u2022 You release updated builds on a regular basis  \nvmassol - (19:06): you don't have 3 months, hmm you could twist that since you've been contributing for a long time already :)  \njvelociter - (19:07): lucaa re XAANNOTATIONS-3 isn't it jsut about using XWiki.contextPath when building the REST url ?  \njvelociter - (19:07): or it;s more that htat ?  \nvmassol - (19:07): Denis: work fine  \nDenis - (19:07): vmassol: that is what I thought reading that, but the link does not provide a form on my site, tried with chrome and FF  \nvmassol - (19:07): it does for me  \nvmassol - (19:07): are you sure you read step 2?  \nDenis - (19:08): not click on the correct link, this is definitely not clear !  \nlucaa - (19:09): jvelociter: yes, but I still want to test it  \nlucaa - (19:09): btw, do you know any way to clean get the rest URL? in xwiki, in velocity scripting, not necessarily in js... ( jvelociter )  \njvelociter - (19:10): I don't think we have APIs for that  \njvelociter - (19:11): (but most of the REST api is not very useful from velocity I'd say)  \nlucaa - (19:11): ok, I thought so too. I've been asking & looking for this a while now, and my conclusion was the same  \nlucaa - (19:11): yes, not from velo, but from interpreted jsx  \nlucaa - (19:12): and nice HTML with forms ajax submitted to form.action not to re-built urls ;)  \njvelociter - (19:13): from JSX no, but we said we would introduce helpers once we have the new model  \njvelociter - (19:13): about velocity from interpreted JSX  \nvmassol - (19:14): ah the myth of the new model\u2026. :)  \njvelociter - (19:14): I've noticed the annotations JSX gets its config this way  \njvelociter - (19:14): I don't think this is right  \njvelociter - (19:14): it means new config isn't applied until the cache expires or is forced  \nlucaa - (19:15): jvelociter: yes. Which is not the best thing I agree  \njvelociter - (19:15): which is sort of broken I'd say :)  \nlucaa - (19:15): but I assumed that config is done once, when installed  \njvelociter - (19:15): well I don't know to what extend it can fail  \narkub left at 19:16 (Ping timeout: 258 seconds  \nlucaa - (19:16): how would you do it?  \njvelociter - (19:16): lucaa: there is no easy today considering the application is all JS  \njvelociter - (19:16): it would be to do an AJAX request  \njvelociter - (19:17): to get the config object via REST  \njvelociter - (19:17): the good way would be with IX  \nlucaa - (19:17): IX?  \njvelociter - (19:17): vmassol: IX, another myth ;)  \njvelociter - (19:17): Interface eXtensions  \njvelociter - (19:17): but it does not exist yet :)  \nlucaa - (19:17): mmh  \nlucaa - (19:18): mythical solutions for real problems :)  \njvelociter - (19:18): hehe:) the AJAX one works too  \njvelociter - (19:18): it's just slower  \njvelociter - (19:18): but at least it does not fail if the config changes  \nlucaa - (19:18): rest || post to a script that returns json  \njvelociter - (19:18): why not REST ?  \nlucaa - (19:18): actually rest is better  \njvelociter - (19:18): it does exaclty this  \njvelociter - (19:18): yes  \nlucaa - (19:19): I thought I have to write it myself  \nlucaa - (19:19): but it's standard REST  \njvelociter - (19:19): and you can have all object property in 1 call  \njvelociter - (19:19): yes it's standard  \nlucaa - (19:19): (i'm not focusing very much on this now...)  \njvelociter - (19:19): there is an UI to change config parameters, right ?  \nlucaa - (19:19): lemme finish XAANNOTATIONS-3 and then we talk  \njvelociter - (19:19): (annotations config)  \nlucaa - (19:19): yes  \nlucaa - (19:19): in the admin section ;)  \njvelociter - (19:19): ok, then it should be fixed IMHO  \nvmassol - (19:21): jvelociter: yes IX is another myth ;)  \nvmassol - (19:21): we have lots of myths in xwiki  \nflorinciu joined #xwiki at 19:24  \nCalebJamesDeLisl - (19:29): I'm going to propose fixing and disclosing 4755 on the list. Anyone who cares to read this char log will know what they can get from the exploit and the patch will reveal the nature of the exploit no matter what the code comment says. Any complaints?  \nDenis - (19:40): CalebJamesDeLisl: do you means you will reveal what is in this JIRA completly ?  \nCalebJamesDeLisl - (19:41): Good question, the only part I have reservations about is the sample exploit.  \nCalebJamesDeLisl - (19:42): The main thing I am pushing is writing a security advisory which doesn't immediately follow being hacked </jab>  \nDenis - (19:43): I have reservation the whole details personally, the one who really care should read the content of your commit, and IMO you should change the issue to \"Hibernate issue allow SQL injection\". WDYT ?  \nCalebJamesDeLisl - (19:45): \"the one who really care should read the content of your commit\" This is my concern.  \nCalebJamesDeLisl - (19:45): It will be the bad guys.  \nDenis - (19:46): and your comment in the commit is too clear as well, just refer the issue, and no more  \nCalebJamesDeLisl - (19:47): No it's the code which tells the exploit. It matches a pattern.  \nDenis - (19:47): yes but what could we do to that  \nDenis - (19:48): BTW, are you sure you fix all paths to this issue ?  \nCalebJamesDeLisl - (19:48): Yes, I was very careful, avoiding regular expressions so I didn't reopen the hole elsewhere.  \nCalebJamesDeLisl - (19:49): Hibernate may have other issues. Haven't tried messing with it.  \nCalebJamesDeLisl - (19:50): Also I think this should be in 2.3 because once I commit, it's a race.  \nlucaa - (19:50): we have some rules about these issues and how to commit them, IIRC... and last time we discussed I think we concluded that not commenting or not putting the issue name in the commit is useless, the code is the one that matters, and since that's what open source means...  \nvmassol - (19:50): +1 for 2.3 and even 2.2  \nvmassol - (19:50): (unless too dangerous for 2.2 - I hope that's not the case)  \nvmassol - (19:50): (dangerous = which can lead to regressions)  \nCalebJamesDeLisl - (19:51): Thanks Vincent. It should be very safe, I can't imagine use cases for this.  \nDenis - (19:51): i am testing 2.2 currently ...  \nCalebJamesDeLisl - (19:51): Anyway it's awesome PR to say \"we have an issue, but we are telling you before someone gets hacked.\"  \nCalebJamesDeLisl - (19:54): If we were to try putting this through the normal testing, we would have to close the source until we released.  \nCalebJamesDeLisl - (19:55): Which is why I want to commit this to 2.3 final today.  \nvmassol - (19:56): one thing to do CalebJamesDeLisl  \nvmassol - (19:56): is to give a rating to this secruity issue  \nvmassol - (19:57): minor, major, critical for ex  \nvmassol - (19:57): so that people out there know whether they should absolutely upgrade or if they can wait a bit, etc  \nvmassol - (19:57): how would we rate this one?  \nCalebJamesDeLisl - (19:57): I would say 1-10 it's a 7.  \nCalebJamesDeLisl - (19:58): Users can run arbitrary sql. 10 if anonymous can run sql.  \nvmassol - (20:00): we probably need a non archived irc channel for security issues and for committers nly  \nvmassol - (20:01): since we've said a lot on this channel before the issue is fixed  \nlucaa - (20:01): I fixed all annotations issues for tomorrow release, going home for maintenance now  \nlucaa - (20:01): have a nice evening guys  \nCalebJamesDeLisl - (20:01): I think this goes down a bad road. We get cabals and politics and the in crowd and the out crowd.  \nvmassol - (20:02): releasing once it's fixed is good  \nvmassol - (20:02): but releasing before isn't that good imo  \ncypromis left at 20:03 (\\*.net \\*.split  \nCalebJamesDeLisl - (20:03): It's a matter of the lesser of two evils as I see it.  \nCalebJamesDeLisl - (20:04): If we want very good security then we should emulate people who are very secure eg: BSD.  \nvmassol - (20:04): I don't think we want very good security but good enough  \nvmassol - (20:04): I don't know what bsd does though  \nvmassol - (20:05): it's probably not as secure as pentagon or NSA stuff though :)  \nCalebJamesDeLisl - (20:05): Full disclosure. They are widely known as the most secure OS  \nflorinciu left at 20:05 (Read error: Connection reset by peer  \nCalebJamesDeLisl - (20:06): the us military uses YellowDog Linux.  \nlucaa left #xwiki at 20:06  \ngvallarelli - (20:08): got to go goodbye  \nCalebJamesDeLisl - (20:08): Here's a disclosure by YDL http://www.yellowdoglinux.com/resources/errata/YDU-20000810-1.txt  \nCalebJamesDeLisl - (20:08): see ya gvallarelli  \ngvallarelli left #xwiki at 20:08  \nvmassol - (20:08): got to go too  \ncypromis joined #xwiki at 20:08  \nCalebJamesDeLisl - (20:09): Should I just commit and let happen what happens?  \nvmassol - (20:09): for me yes, with the minimum info in the commit, now don't know about others  \nCalebJamesDeLisl - (20:10): Well that's two of us. I believe that there is nothing worse than avoiding fixing something to hide it.  \nCalebJamesDeLisl - (20:11): I will commit and propose a security advisory.  \nDenis - (20:14): hem, the patch has not compile in 2.2 :(  \nCalebJamesDeLisl - (20:16): I have to check out core. I'll be back in a few hours ;)  \nCalebJamesDeLisl - (20:17): hmm, lot of tags. Maybe just branches then.  \nDenis - (20:18): I am looking at it...  \nDenis - (20:20): well there is an { at the end of your fixing function, I am not sure I have the right patch ?  \nDenis - (20:20): s/at the end of/at the end of the only line of  \nDenis - (20:31): CalebJamesDeLisl: is it the correct patch, the one attached to the issue ?  \nCalebJamesDeLisl - (20:33): Let me double check  \nCalebJamesDeLisl - (20:35): Denis: That's the patch. It should be explained very well and even reference the issue number  \nCalebJamesDeLisl - (20:38): It was patched from platform/trunks so if you are applying from branches/core... you need to do patch -p1 < ....  \nDenis - (20:39): it is syntaxically wrong  \nDenis - (20:39): + \u00a0\u00a0\u00a0private String filterSQL(String sql)  \nDenis - (20:39): + \u00a0\u00a0\u00a0{  \nDenis - (20:39): + \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return StringUtils.replace(sql, \"\\\\\", \"\\\\\\\\\") {  \nDenis - (20:39): + \u00a0\u00a0\u00a0}  \nCalebJamesDeLisl - (20:48): Sorry about that. I fixed it right after.  \nlucaa joined #xwiki at 21:05  \nmflorea joined #xwiki at 21:13  \nplunden joined #xwiki at 21:28  \njavahorn\\_ left at 21:51 (Ping timeout: 248 seconds  \nmflorea left at 21:56 (Quit: Leaving.  \nvmassol - (21:57): CalebJamesDeLisl: nice comments ;)  \nvmassol - (21:57): typo: guarenteed \u2014> guaranteed  \nCalebJamesDeLisl - (21:57): since 2.4M1 too. fixing.  \nvmassol - (21:58): simply replace \u2014> simply to replace  \nvmassol - (21:58): oops  \nvmassol - (21:58): forget that one  \nvmassol - (21:58): misread  \nCalebJamesDeLisl - (21:59): See why we need transparency? ;)  \nCalebJamesDeLisl - (21:59): \"to simply\" \"simply to\" both work in english.  \nlucaa left #xwiki at 22:00  \nnpm - (22:05): is there an api call to tell whether in view or edit mode (instead of using $doc.display( ... ) )  \nnpm - (22:05): i know it's something i should be able to find but i'm failing  \nCalebJamesDeLisl - (22:06): Well you can use $xcontext.getAction()  \nCalebJamesDeLisl - (22:06): I think there is something more specific in the context.  \nnpm - (22:07): thanks  \nnpm - (22:09): hmmm so i looked at 4755 and got a permissions violation  \nnpm - (22:12): is there something wrong w/ my jira account?? http://jira.xwiki.org/jira/browse/XWIKI-4874 is invisible too  \nvmassol - (22:13): npm: it's marked as a security issue  \nvmassol - (22:13): only committers can see those  \nnpm - (22:13): bleh  \nvmassol - (22:13): now you know what you should strive for ! :)  \nCalebJamesDeLisl - (22:15): I think we're going to have to do the security advisory thing. Read the patch carefully you see what's going on.  \nnpm - (22:15): which version does it affect?  \nCalebJamesDeLisl - (22:19): < 2.3  \nCalebJamesDeLisl - (22:28): I heard that someone made a secure version of scheme called M7 which uses object capability security.  \nnpm - (22:29): M7 and scheme don't google well :-)  \nCalebJamesDeLisl - (22:29): scheme -> lisp  \nnpm - (22:29): Trusty Scheme (1992),  \nnpm - (22:30): http://en.wikipedia.org/wiki/Object-capability\\_model  \nCalebJamesDeLisl - (22:31): nope it was W7. sorry.  \nnpm - (22:31): so it's an injection issue.... kinda like this one: http://d.yimg.com/gg/u/390fcfa24d18c6e03cfc85f022d63ef9a60a5d3c.jpeg :-)  \nnpm - (22:31): that's better... m7 is a freeway in the uk  \nCalebJamesDeLisl - (22:33): Awesome plate.  \nCalebJamesDeLisl - (22:34): I heard a story about a guy who got a legit vanity plate which said \"none\"  \nnpm - (22:34): adds http://www.cypherpunks.to/erights/talks/virus-safe/dont-add.ppt to list of things to read  \nnpm - (22:40): so basically it's more bugs like XAADMINISTRATION-120 - SQL injection via \"Forgot username\" page && XAADMINISTRATION-119 - Exception displayed when entering an invalid email address in the ForgotUsername form  \nCalebJamesDeLisl - (22:41): I'll tell you since what's already been said a dozen times on this channel. drop tables; commit;  \nnpm - (22:42): that would be the suck  \nCalebJamesDeLisl - (22:43): This is the second issue I found in a library.  \nCalebJamesDeLisl - (22:43): First it was Apache CharacterFilter now Hibernate  \nCalebJamesDeLisl - (22:44): The CharacterFilter problem couldn't be exploited though.  \nnpm - (22:44): so is hibernate going to fix it soon, and we're patching specific holes?  \nCalebJamesDeLisl - (22:45): I mentioned it on their irc channel and got the cold sholder.  \nCalebJamesDeLisl - (22:46): They'll see the security advisory.  \nnpm - (22:46): probably because they acknowledge its a problem? http://www.owasp.org/index.php/Hibernate-Guidelines#SQL\\_Injection  \nnpm - (22:46): \"It is commonly thought that ORM layers, like Hibernate are immune to SQL injection. This is not the case as Hibernate includes a subset of SQL called HQL, and allows \"native\" SQL queries. Often the ORM layer only minimally manipulates the inbound query before handing it off to the database for processing.\"  \nnpm - (22:48): so i guess extra scrutiny is needed with any HQL args to $xwiki.searchDocuments()  \nCalebJamesDeLisl - (22:49): You are the proof that we need a security advisory. From almost no information, you have figured out the problem.  \nnpm - (22:50): good thing i don't hack :-)  \nCalebJamesDeLisl - (22:50): I think most people who can figure this stuff out have better things to do but we can't count on this.  \nnpm - (22:51): but also consider i was tech lead for launching a bunch of collabnet sites, and their security czar (w/o title) for their first few years of opes  \nnpm - (22:53): of course they didn't listen to me on all the occassions when they got hacked... but by then they had already jumped the shark as a company  \nCalebJamesDeLisl - (22:53): Seems like anyone who cares about not getting owned is appointed untitled security czar.  \nnpm - (22:53): well it's pretty stupid to be putting apache machines inside your firewall just cuz your behlendorf  \nCalebJamesDeLisl - (22:55): Meaning the apache boxes can get at the localnet?  \nnpm - (22:55): at one point this was an issue. but as usual you get owned, and then things change  \nCalebJamesDeLisl - (22:56): A little bit.  \nCalebJamesDeLisl - (22:57): Everyone's still running apache, sendmail, windows and every other huge monolithic program with lots of useless features.  \nnpm - (22:58): that is the nature of computing... it's just a matter of getting something open-source enough that everybody's banging on it, and after several years, it tends towars secure  \nCalebJamesDeLisl - (22:59): I'm excited about object capability because we have 90% of it now.  \nnpm - (23:01): it certainly makes sense... but how would it help other more prosaic issues like the sql injection one...  \nnpm - (23:01): which sounds like it almost needs a separate HQL-prechecker or pattern-matching blacklist  \nCalebJamesDeLisl - (23:02): Keep in mind that sql and http are flat string formats, not objects. These are the problem points.  \nnpm - (23:02): yep... the original sin was http should have been done in ASN.1  \nCalebJamesDeLisl - (23:02): s/http/html/  \nCalebJamesDeLisl - (23:03): Kosminskey had some bad things to say about asn.1  \nnpm - (23:03): well or something like ASN.1 --- not a text protocol  \nnpm - (23:04): then you could more easily send \"object\" and not \"text\"  \nCalebJamesDeLisl - (23:04): Yes, something as simple as saying <text 30 characters long>thirty characters of text<element>  \nCalebJamesDeLisl - (23:05): But you can't easily edit that in a text editor so the xml folks cry...  \nnpm - (23:05): imho, if you're going to send text, send s-expressions (or json)  \nCalebJamesDeLisl - (23:06): I was going to mention json but js is it's own can of worms.  \nnpm - (23:06): you don't have to use js to use json as a format  \nnpm - (23:07): there's java json readers and writers too -- it's just curly-bracketed s-expressions  \nnpm - (23:07): without any of the elegance  \nCalebJamesDeLisl - (23:07): But you have to escape } so your back at the html problem.  \nnpm - (23:08): which is probably why you want a bit-packed, binary format :-)  \nvmassol left at 23:10 (Quit: Leaving.  \nCalebJamesDeLisl - (23:12): Yea some sort of objects which are assembled at one end and disassembled at the other.  \nCalebJamesDeLisl - (23:13): could use xml, no reason not to, the evil is in trying to write out xml.  \nnpm - (23:14): doh: ok, i see it... it certainly is going to be a conundrium checking all instances of searchDocs() for stuff like this...  \nCalebJamesDeLisl - (23:15): Drop your documents table yet? ;)  \nCalebJamesDeLisl - (23:16): Actually it's better to try dropping xwikicomments since it's not used.  \nnpm - (23:16): no, didn't do a backup yet :-)  \nnpm - (23:17): i don't think i need to test this one... i have better ways of entering sql commands on my own server :-)  \nCalebJamesDeLisl - (23:18): Pretty bad that this would slip past the hibernate people huh.  \nnpm - (23:18): i think a security advisory w/ instructions to drop or make inaccessible the few docs affected...  \nCalebJamesDeLisl - (23:19): Docs affected?  \nnpm - (23:19): the ones where one might be able to enter text in a hql string  \nnpm - (23:20): i just did a spot check.. most searchDocs are ok... it's just a few  \nCalebJamesDeLisl - (23:21): Hmm, I didn't think of it coming from an existing document, I imagined the document would be created...  \nnpm - (23:23): well the problem is there are existing Xar documents that have the problem  \nnpm - (23:25): and some of them might be accessible to those w/o accounts  \nCalebJamesDeLisl - (23:25): Good point. WHY DON'T PEOPLE USE PARAMETERS!!!???  \nnpm - (23:25): thats the ones i worry most... otherwise you'd ahve to have programming rights  \nCalebJamesDeLisl - (23:26): Ahh, you still haven't found it.  \nnpm - (23:26): see for example /XWiki/LiveTableResultsMacros  \nnpm - (23:26): no i found it, a direct field that can be injected  \nnpm - (23:27): LiveT macros has a param that might  \nnpm - (23:28): be an issue $!request.dir\" --> SQL  \nCalebJamesDeLisl - (23:33): Looking through that page. Trying to do security analysis on that is pushing water up hill. Security should be handles lower level.  \nCalebJamesDeLisl - (23:34): s/handles/handled  \nnpm - (23:44): agree.. it's almost like \u00a0searchDocs() would need to take a parameter where you have an hql query obj, and an api for programmatically building the hql  \nnpm - (23:45): so that you can't just enter text, it has to go through an api. with obvious entry points for \"internet text\" that is scanned for exploits  \nCalebJamesDeLisl - (23:51): I'll be away for a couple hours. Dinner time.  \nCalebJamesDeLisl - (23:53): I'll put you down for 1/2 hour time to discover this flaw from available information.  \n\n"}