{"id": "dev:IRC.xwikiArchive20130625", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130625", "title": "IRC Archive for channel #xwiki on 25 June 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<npm>\u00a0has quit  \n00:13\u00a0<npm\\_>\u00a0has joined #xwiki  \n00:36\u00a0<abusenius>\u00a0has quit  \n00:48\u00a0<vmassol>\u00a0has joined #xwiki  \n00:50\u00a0<vmassol>\u00a0has quit  \n00:56\u00a0<sdumitriu1>\u00a0has quit  \n02:31\u00a0<npm\\_>\u00a0has quit  \n03:17\u00a0<npm\\_>\u00a0has joined #xwiki  \n04:05\u00a0<npm\\_>\u00a0has quit  \n04:06\u00a0<npm>\u00a0has joined #xwiki  \n04:30\u00a0<Denis1>\u00a0has joined #xwiki  \n05:51\u00a0<Denis1>\u00a0has quit  \n07:28\u00a0<evalica>\u00a0has joined #xwiki  \n07:32\u00a0<evalica>\u00a0has quit  \n07:33\u00a0<evalica>\u00a0has joined #xwiki  \n07:41\u00a0<evalica>\u00a0has quit  \n07:52\u00a0<mflorea>\u00a0has joined #xwiki  \n08:16\u00a0<vmassol>\u00a0has joined #xwiki  \n08:31\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:57\u00a0<msmeria>\u00a0has joined #xwiki  \n09:27\u00a0<sburjan>\u00a0has joined #xwiki  \n09:34\u00a0<vmassol>\u00a0good morning  \n09:34\u00a0<vmassol>\u00a0guys I'm ready to commit http://jira.xwiki.org/browse/XWIKI-9263  \n09:34\u00a0<vmassol>\u00a0should I go ahead?  \n09:36\u00a0<evalica>\u00a0has joined #xwiki  \n09:38\u00a0<vmassol>\u00a0ok doing it, I can revert if someone doesn't agree  \n10:20\u00a0<tdelafosse>\u00a0has joined #xwiki  \n10:31\u00a0<vmassol>\u00a0guys is jenkins unusable most of the time for you too (ie the ui is very very slow)?  \n10:32\u00a0<mflorea>\u00a0has quit  \n10:53\u00a0<vmassol>\u00a0trying to fix jenkins  \n11:11\u00a0<mflorea>\u00a0has joined #xwiki  \n11:17\u00a0<sburjan>\u00a0tmortagne: so for the moment SOLR is still not able to index default documents ?  \n11:18\u00a0<tmortagne>\u00a0sburjan: it does no import default documents now  \n11:18\u00a0<sburjan>\u00a0ok. but it should be able to index existing non default documents, right ?  \n11:18\u00a0<tmortagne>\u00a0s/does no/does/  \n11:19\u00a0<tmortagne>\u00a0let me re-answer it more clearly: AFAIK Solr is now complete on automation  \n11:19\u00a0<sburjan>\u00a0ok. I triggered a re-index, but I don't get any results.. gonna wait  \n11:20\u00a0<vmassol>\u00a0sburjan: you don't need to triger anything  \n11:20\u00a0<tmortagne>\u00a0ok you don't need to trigger a reindex  \n11:20\u00a0<vmassol>\u00a0it's automatic  \n11:20\u00a0<sburjan>\u00a0too late :|  \n11:20\u00a0<sburjan>\u00a0damn  \n11:20\u00a0<sburjan>\u00a0what should I do ? wait, restart the wiki ?  \n11:21\u00a0<tmortagne>\u00a0sburjan: it's not a big deal  \n11:21\u00a0<tmortagne>\u00a0your wiki will be indexed twice that's all  \n11:21\u00a0<sburjan>\u00a0any idea how long should it take to reindex ?  \n11:22\u00a0<tmortagne>\u00a0did not calculated but you should get some result with \\*:\\* already  \n11:22\u00a0<vmassol>\u00a0sorin: use what I told you for the queue size  \n11:22\u00a0<tmortagne>\u00a0\\*:\\* gives you all document not hidden  \n11:23\u00a0<tmortagne>\u00a0s/document/documents/  \n11:23\u00a0<sburjan>\u00a0ok, I don't get anything when searching for \\*:\\*  \n11:24\u00a0<sburjan>\u00a0vmassol,: I get 9638 when using $services.solr.getQueueSize()  \n11:24\u00a0<sburjan>\u00a0and slowly going down  \n11:24\u00a0<vmassol>\u00a0ok so you need to refresh  \n11:24\u00a0<vmassol>\u00a0till it gets to 0  \n11:24\u00a0<sburjan>\u00a0very slowly  \n11:24\u00a0<sburjan>\u00a0ok. thanks  \n11:24\u00a0<vmassol>\u00a0you're not on a defaulit wiki  \n11:24\u00a0<vmassol>\u00a0it seems  \n11:24\u00a0<sburjan>\u00a0I'm on a subwiki  \n11:25\u00a0<vmassol>\u00a0ok so several wikis  \n11:25\u00a0<sburjan>\u00a04 :)  \n11:25\u00a0<vmassol>\u00a0that explains it  \n11:25\u00a0<vmassol>\u00a0and x2  \n11:25\u00a0<sburjan>\u00a0the que is big, right ?  \n11:25\u00a0<vmassol>\u00a0around 1300 per wiki  \n11:25\u00a0<vmassol>\u00a0(default wiki)  \n11:25\u00a0<vmassol>\u00a01300\\*4\\*2 == 10K  \n11:26\u00a0<sburjan>\u00a0indeed.. makes sense  \n11:26\u00a0<sburjan>\u00a0I guess that wiki templates are also indexed, right ? workspacetemplate and templatexe  \n11:26\u00a0<vmassol>\u00a0not templates  \n11:26\u00a0<vmassol>\u00a0wikis yes  \n11:27\u00a0<vmassol>\u00a0ah wiki temples, yes they are  \n11:27\u00a0<sburjan>\u00a0ok, then I have 5 wikis in total :)  \n11:27\u00a0<vmassol>\u00a0it takes me 1 min to go from 1300 to 0 locally roughly  \n11:28\u00a0<vmassol>\u00a0what's your value now?  \n11:28\u00a0<sburjan>\u00a0but at the current rate, I'll have to wait for 4 hours to finish :)  \n11:28\u00a0<sburjan>\u00a09500  \n11:28\u00a0<vmassol>\u00a0hmm that's really slow  \n11:28\u00a0<sburjan>\u00a0so only 138 were indexed in the meantime  \n11:28\u00a0<sburjan>\u00a0ok, gonna erase my wiki and start from scratch  \n11:30\u00a0<sburjan>\u00a0won't create any subwikis  \n11:40\u00a0<sburjan>\u00a0vmassol: odd, when having only the main wiki, I get 4228  \n11:40\u00a0<sburjan>\u00a0with indexing speed of ~ 1 document / second  \n11:42\u00a0<tmortagne>\u00a0it's not the number of documents, it's the number of entities and there is document, attachment, objects and properties  \n11:42\u00a0<tmortagne>\u00a0I can't see how it can take 1s per entity  \n11:45\u00a0<sburjan>\u00a0now at 4000  \n11:45\u00a0<sburjan>\u00a0so as you see, very very slow  \n11:48\u00a0<sburjan>\u00a0I won't be able to properly test on my machine if it's that slow  \n11:48\u00a0<tmortagne>\u00a0the indexer takes the document from the database and give it to Solr so either your database is very slow for some reason or your hard drive access (since solr/lucene save right away in index files)  \n11:48\u00a0<sburjan>\u00a0tmortagne: i think both are slow/ db + hard disk  \n11:51\u00a0<sburjan>\u00a0bbl, lunch  \n11:53\u00a0<Denis1>\u00a0has joined #xwiki  \n11:54\u00a0<Denis1>\u00a0is now known as <Denis>  \n12:33\u00a0<tmortagne>\u00a0has quit  \n12:45\u00a0<vmassol>\u00a0has quit  \n12:48\u00a0<vmassol>\u00a0has joined #xwiki  \n13:07\u00a0<mflorea>\u00a0has quit  \n13:10\u00a0<vmassol>\u00a0hmm rendering is blocked again at http://ci.xwiki.org/  \n13:10\u00a0<vmassol>\u00a0something is amiss  \n13:30\u00a0<evalica>\u00a0has quit  \n14:02\u00a0<vmassol>\u00a0fun thing: with the new solr search, enable hidden docs and search for \"todo\" on the default XE  \n14:02\u00a0<vmassol>\u00a0you'll get 27 results  \n14:16\u00a0<tmortagne>\u00a0has joined #xwiki  \n14:19\u00a0<mflorea>\u00a0has joined #xwiki  \n14:41\u00a0<Denis>\u00a0has quit  \n15:21\u00a0<evalica>\u00a0has joined #xwiki  \n15:37\u00a0<sdumitriu>\u00a0has quit  \n15:38\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:39\u00a0<msmeria1>\u00a0has joined #xwiki  \n16:42\u00a0<evalica1>\u00a0has joined #xwiki  \n16:49\u00a0<evalica>\u00a0has quit  \n16:49\u00a0<sburjan>\u00a0has quit  \n16:49\u00a0<msmeria>\u00a0has quit  \n16:51\u00a0<msmeria>\u00a0has joined #xwiki  \n16:51\u00a0<sdumitriu>\u00a0has quit  \n16:51\u00a0<msmeria1>\u00a0has quit  \n16:53\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:56\u00a0<sburjan>\u00a0has joined #xwiki  \n16:56\u00a0<sburjan>\u00a0it seems that on each restart, a full re-index is triggered  \n16:57\u00a0<sburjan>\u00a02013-06-25 17:55:59,790 [localhost-startStop-1] WARN \u00a0o.a.s.c.SolrCore \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- New index directory detected: old=null new=/home/sorinello/Desktop/XWiki/apache-tomcat-7.0.35/work/Catalina/localhost/xwiki/solr/./data/index/  \n16:57\u00a0<sburjan>\u00a0is this normal ? I had my wiki properly indexed before restart  \n16:58\u00a0<tmortagne>\u00a0sburjan: not a full reindex  \n16:59\u00a0<sburjan>\u00a0tmortagne: it starts at ~3249  \n16:59\u00a0<tmortagne>\u00a0on a standard XE ?  \n16:59\u00a0<sburjan>\u00a0XEM only with the main wiki  \n17:00\u00a0<sburjan>\u00a0Postgres + Tomcat  \n17:00\u00a0<tmortagne>\u00a0it's a bug then  \n17:00\u00a0<tmortagne>\u00a0checking  \n17:00\u00a0<sburjan>\u00a0but I did not deleted anything form the FS  \n17:00\u00a0<sburjan>\u00a0so the old indexes should still be there  \n17:07\u00a0<sburjan>\u00a0tmortagne: do you have a SSD on your machine ?  \n17:07\u00a0<tmortagne>\u00a0sburjan: yep  \n17:07\u00a0<sburjan>\u00a0ok, this explains why my indexing is ultra slow on my machine  \n17:07\u00a0<tmortagne>\u00a0I don't think we have SSD on the servers  \n17:09\u00a0<sburjan>\u00a0I don't know, but at the current rate it takes 3 hours to index, which is blocking me  \n17:09\u00a0<tmortagne>\u00a0sburjan: and you should ask vmassol not me, I did not calculated the time myself  \n17:10\u00a0<sburjan>\u00a0vmassol has a SSD also AFAIK ...  \n17:10\u00a0<vmassol>\u00a0it's not SSD  \n17:10\u00a0<vmassol>\u00a0definitely not  \n17:10\u00a0<sburjan>\u00a0well I have no other explanation of the slowness :(  \n17:10\u00a0<vmassol>\u00a0SSD might improve by x3 or x4 but not x180  \n17:10\u00a0<vmassol>\u00a0(at best)  \n17:11\u00a0<sburjan>\u00a0on windows machines it's x10 times or even faster  \n17:11\u00a0<sburjan>\u00a0but I am on Linux  \n17:12\u00a0<vmassol>\u00a0tmortagne: fyi got 48 in the queue when restarting  \n17:12\u00a0<vmassol>\u00a0might be normal if it's only the scheduler stuff  \n17:12\u00a0<vmassol>\u00a0but seems a bit high  \n17:13\u00a0<vmassol>\u00a0hmm wait  \n17:13\u00a0<vmassol>\u00a0613 now  \n17:13\u00a0<vmassol>\u00a0so there's definitely an issue  \n17:13\u00a0<sburjan>\u00a0vmassol, indeed, it's rising right after startup.. mine got up to 3249  \n17:13\u00a0<tmortagne>\u00a0I'm currently doing a full reindex to try to reproduce the issue  \n17:13\u00a0<vmassol>\u00a0max I got was about 2487  \n17:14\u00a0<vmassol>\u00a0so it seems everything is reindexed  \n17:15\u00a0<sburjan>\u00a0I envy you vmassol that you are able to reindex in 5 minutes :)  \n17:15\u00a0<vmassol>\u00a05?  \n17:15\u00a0<vmassol>\u00a0no way  \n17:15\u00a0<vmassol>\u00a030 seconds to 1 mn  \n17:15\u00a0<vmassol>\u00a0:)  \n17:15\u00a0<sburjan>\u00a0versus 3 hours .. big diff :)  \n17:16\u00a0<sburjan>\u00a0I am at 2505 .. so I did ~900 in 15 minutes  \n17:17\u00a0<vmassol>\u00a0stop playing some games on your machine at the same time while defragmenting it and running a antivirus check ! :)  \n17:19\u00a0<sburjan>\u00a0:)  \n17:21\u00a0<Denis>\u00a0has joined #xwiki  \n17:31\u00a0<GuillaumeF>\u00a0has joined #xwiki  \n17:34\u00a0<sburjan>\u00a0I'm at 1771 :)  \n17:38\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n17:47\u00a0<sburjan>\u00a0see you tomorrow  \n17:47\u00a0<msmeria>\u00a0has quit  \n17:47\u00a0<mflorea>\u00a0has quit  \n17:49\u00a0<sburjan>\u00a0has quit  \n17:52\u00a0<evalica1>\u00a0has quit  \n18:01\u00a0<gdelhumeau>\u00a0has quit  \n18:26\u00a0<tmortagne>\u00a0has quit  \n18:59\u00a0<tdelafosse>\u00a0has quit  \n19:07\u00a0<abusenius>\u00a0has joined #xwiki  \n19:11\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n19:17\u00a0<tekzilla\\_>\u00a0has joined #xwiki  \n19:20\u00a0<Denis>\u00a0has quit  \n19:22\u00a0<tekzilla>\u00a0has quit  \n19:46\u00a0<GuillaumeF>\u00a0has quit  \n19:55\u00a0<GuillaumeF>\u00a0has joined #xwiki  \n20:03\u00a0<GuillaumeF>\u00a0has quit  \n23:22\u00a0<vmassol>\u00a0has quit  \n23:30\u00a0<Denis1>\u00a0has joined #xwiki  \n23:31\u00a0<Denis1>\u00a0is now known as <Denis>\n"}