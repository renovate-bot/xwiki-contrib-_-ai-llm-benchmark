{"id": "dev:IRC.xwikiArchive20160406", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160406", "title": "IRC Archive for channel #xwiki on 06 April 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<sorinello\\_>\u00a0has joined #xwiki  \n00:22\u00a0<sorinello>\u00a0has quit  \n00:25\u00a0<Aranjedeath>\u00a0has quit  \n00:53\u00a0<sorinello\\_\\_>\u00a0has joined #xwiki  \n00:53\u00a0<sorinello\\_>\u00a0has quit  \n01:13\u00a0<Daemoen>\u00a0nvm, was able to find it via {{python}} import sys; print (sys.path) {{/python} \u00a0and copying the required module there :)  \n02:48\u00a0<Daemoen>\u00a0drat, \u00a0apparently i cant embed boto in the pages because of a module conflict  \n03:07\u00a0<lkrejci>\u00a0has quit  \n05:14\u00a0<sorinello\\_\\_>\u00a0has quit  \n07:46\u00a0<sorinello>\u00a0has joined #xwiki  \n08:12\u00a0<cjd>\u00a0has quit  \n08:50\u00a0<Aranjedeath>\u00a0has joined #xwiki  \n08:52\u00a0<vmassol>\u00a0has joined #xwiki  \n08:53\u00a0<vmassol>\u00a0has quit  \n09:05\u00a0<cjd>\u00a0has joined #xwiki  \n09:05\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:10\u00a0<mflorea>\u00a0has joined #xwiki  \n09:23\u00a0<Slashman>\u00a0has joined #xwiki  \n10:00\u00a0<lkrejci>\u00a0has joined #xwiki  \n10:12\u00a0<tdi\\_>\u00a0is now known as <tdi>  \n10:12\u00a0<vmassol>\u00a0has joined #xwiki  \n10:17\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:20\u00a0<ihl>\u00a0has joined #xwiki  \n10:22\u00a0<acotiuga>\u00a0has joined #xwiki  \n10:22\u00a0<ihl>\u00a0Hello, I have a problem starting XWiki back up after upgrading it to 8.0.  \n10:23\u00a0<ihl>\u00a0I receive the following error in the tomcat7 catalina.out: org.apache.tomcat.util.bcel.classfile.ClassFormatException: Invalid byte tag in constant pool: 18  \n10:24\u00a0<ihl>\u00a0XWiki runs on a Ubuntu server 12.04, installed and upgraded through the provided repository by XWiki  \n10:24\u00a0<ihl>\u00a0The tomcat7 is running under the OpenJDK 7.  \n10:24\u00a0<vmassol>\u00a0ihl: you're not using the right java version  \n10:24\u00a0<tmortagne>\u00a0vmassol: we move to Java 8 in 8.1  \n10:24\u00a0<tmortagne>\u00a0but I agree the error look like Java version issue  \n10:24\u00a0<vmassol>\u00a0yes but he's probabmy using java 6  \n10:24\u00a0<tmortagne>\u00a0so that's weird  \n10:25\u00a0<vmassol>\u00a0and he needs java7 for 8.0  \n10:25\u00a0<ihl>\u00a0I only upgraded to 8.0 not 8.1  \n10:25\u00a0<tmortagne>\u00a0\"under the OpenJDK 7.\"  \n10:25\u00a0<vmassol>\u00a0ahhh  \n10:25\u00a0<vmassol>\u00a0still  \n10:25\u00a0<vmassol>\u00a0the issue is a java version  \n10:25\u00a0<vmassol>\u00a0don't know where  \n10:25\u00a0<ihl>\u00a0I also tried the OpenJDK 8 and I got a similar error: Invalid byte tag in constant pool: 15  \n10:26\u00a0<ihl>\u00a0So it changed from 18 to 15, but I have no clue what that means  \n10:26\u00a0<tmortagne>\u00a0could you put the complete error on pastebin or something  \n10:26\u00a0<ihl>\u00a0I can, just a moment  \n10:27\u00a0<tmortagne>\u00a0on my side I'm using Oracle jvm 8 on Ubuntu 14.04 and it looks ok for XWiki 8  \n10:27\u00a0<tmortagne>\u00a0maybe we introduced some issue with openjdk  \n10:27\u00a0<tmortagne>\u00a0ihl: in case you are wondering I'm getting Oracle jvm trough http://www.webupd8.org/2012/09/install-oracle-java-8-in-ubuntu-via-ppa.html  \n10:28\u00a0<Denis3>\u00a0has joined #xwiki  \n10:28\u00a0<tmortagne>\u00a0but not sure you will have Java 8 in it for 12.04, starting to be old  \n10:29\u00a0<ihl>\u00a0http://pastebin.com/GcjZneVq  \n10:30\u00a0<tmortagne>\u00a0ihl: what exact version of openjdk do you have ?  \n10:31\u00a0<tmortagne>\u00a0it's very possible the openjdk version 8 you get on 12.04 repository is far from being the last one  \n10:31\u00a0<tmortagne>\u00a0their might be issue with first version of openjdk 8 I guess  \n10:31\u00a0<ihl>\u00a0Might be, but it also doesn't work with the OpenJDK 7  \n10:31\u00a0<Denis>\u00a0has quit  \n10:32\u00a0<tmortagne>\u00a0what version of XWiki did you upgraded from ?  \n10:32\u00a0<acotiuga\\_>\u00a0has joined #xwiki  \n10:33\u00a0<ihl>\u00a0I upgraded from 7.4.1, I think  \n10:33\u00a0<tmortagne>\u00a0there should not be much difference between 7.4.1 and 8  \n10:33\u00a0<acotiuga>\u00a0has quit  \n10:33\u00a0<tmortagne>\u00a0are you setting the JVM trough /etc/default/tomcat7 ?  \n10:34\u00a0<ihl>\u00a0yes  \n10:34\u00a0<ihl>\u00a0The java 7 version I'm using is: 1.7.0\\_95  \n10:34\u00a0<tmortagne>\u00a0hmm looks like http://penkovvladimir.blogspot.fr/2014/07/running-tomcat-7-under-java8-in-ubuntu.html  \n10:34\u00a0<tmortagne>\u00a0for the Java 8 issue part  \n10:35\u00a0<tmortagne>\u00a0maybe it's not the case anymore since this log post is starting to be old  \n10:36\u00a0<tmortagne>\u00a0http://pastebin.com/GcjZneVq is for JAva 9 or Java 7 ?  \n10:36\u00a0<tmortagne>\u00a0\\*Java 8  \n10:36\u00a0<ihl>\u00a0The java 8 version I'm using: 1.8.0\\_72-internal  \n10:36\u00a0<ihl>\u00a0The pastebin is for java 7  \n10:37\u00a0<tmortagne>\u00a077 is not the very last version but it's recent enough  \n10:37\u00a0<tmortagne>\u00a0but anyway the issue with Java 9 is probably the one described on http://penkovvladimir.blogspot.fr/2014/07/running-tomcat-7-under-java8-in-ubuntu.html  \n10:37\u00a0<tmortagne>\u00a0raaa Java 8  \n10:37\u00a0<tmortagne>\u00a0we just moved to Java 8 and I already have the reflex to talk about Java 9 :)  \n10:38\u00a0<acotiuga>\u00a0has joined #xwiki  \n10:39\u00a0<ihl>\u00a0I really would much more like to get it running unter java 7.  \n10:40\u00a0<ihl>\u00a0We will switch to using java 8 later when we actually upgrade the server to 14.04. But until then XWiki should be working again  \n10:41\u00a0<acotiuga\\_>\u00a0has quit  \n10:44\u00a0<tmortagne>\u00a0unfortunately http://pastebin.com/GcjZneVq is not very clear on where is the issue exactly, it's probably in a specific module when Tomcat try to load it but hard to tell which one from the error. Annother possibility is a bug in your version of Tomcat 7 that was not visible with XWiki 7.4.1  \n10:44\u00a0<vmassol>\u00a0your issue seems to be with tomcat. Please double-check the version of java that you use  \n10:44\u00a0<vmassol>\u00a0(to start tomcat)  \n10:45\u00a0<tmortagne>\u00a0if it was Java 6 it would not have worked with 7.4.1 either  \n10:45\u00a0<ihl>\u00a0In /etc/default/tomcat7 the JAVA\\_HOME is set to /usr/lib/jvm/java-7-openjdk-amd64  \n10:45\u00a0<ihl>\u00a0Is there another possibility to check it?  \n10:46\u00a0<vmassol>\u00a0in the script that you use to start tomcat, print the java version or the path to the java executable  \n10:46\u00a0<vmassol>\u00a0catalina.sh for ex  \n10:46\u00a0<tmortagne>\u00a0ihl: ps aux | grep tomcat  \n10:47\u00a0<vmassol>\u00a0basically there can be only 2 things IMO  \n10:47\u00a0<tmortagne>\u00a0in my case tomcat resolve the full path of java so you see it in the command line  \n10:47\u00a0<vmassol>\u00a01) wrong java version to start tomcat  \n10:47\u00a0<ihl>\u00a0Made a ps -ef -> /usr/lib/jvm/java-7-openjdk-amd64/bin/java ... org.apache.catalina.startup.Bootstrap start  \n10:47\u00a0<vmassol>\u00a02) wrong bytecode in web-inf/lib that requires a more recent java version  \n10:47\u00a0<vmassol>\u00a0(than the one used)  \n10:48\u00a0<tmortagne>\u00a0vmassol: 2) we could have the same issue in the integration tests probably  \n10:48\u00a0<tmortagne>\u00a0s/could/would/  \n10:48\u00a0<ihl>\u00a0Should I try the Oracle JDK 7?  \n10:49\u00a0<tmortagne>\u00a0should not harm  \n10:49\u00a0<tmortagne>\u00a0maybe try to upgrade Tomcat too if you can  \n10:50\u00a0<tmortagne>\u00a0but might be a dependency nightmare to try to use a Tomcat from a more recent Ubuntu repository  \n10:50\u00a0<tmortagne>\u00a0Oracle JDK basically dont have any dependency so its ok  \n10:52\u00a0<evalica>\u00a0has joined #xwiki  \n10:53\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:53\u00a0<ihl>\u00a0Just tried it with Oracle JDK 7, same error: Invalid byte tag in constant pool: 18  \n11:05\u00a0<ihl>\u00a0Hmm, I found something strange in the logs, regarding the upgrade process  \n11:05\u00a0<ihl>\u00a0Let me make a pastebin of this log  \n11:10\u00a0<ihl>\u00a0This is the entire catalina.out log from the upgrade: http://pastebin.com/wQsbsJXQ  \n11:10\u00a0<ihl>\u00a0I see a lot of errors in there, is that normal?  \n11:11\u00a0<vmassol>\u00a0for me it seems that your tomcat setup is not correct somewhere  \n11:11\u00a0<vmassol>\u00a0java.lang.NoClassDefFoundError: org/apache/commons/collections4/queue/CircularFifoQueue$1  \n11:12\u00a0<vmassol>\u00a0this comes from tomcat itself  \n11:13\u00a0<vmassol>\u00a0you might have some conflicts between lib version in tomcat libs and xwiki versions maybe  \n11:13\u00a0<tmortagne>\u00a0Tomcat seems to still be find 7.4.2 stuff  \n11:13\u00a0<vmassol>\u00a0that was before tomcat  \n11:14\u00a0<vmassol>\u00a0only the last start is important IMO  \n11:14\u00a0<vmassol> 1. Apr 06, 2016 8:55:31 AM org.apache.catalina.core.StandardContext startInternal  \n11:14\u00a0<vmassol> 2. SEVERE: Error listenerStart  \n11:14\u00a0<vmassol>\u00a0I think you should turn on debugging in tomcat  \n11:15\u00a0<vmassol>\u00a0ihl: \u00a0see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationTomcat#HSEVERE:ErrorlistenerStart  \n11:17\u00a0<ihl>\u00a0Well thank you so far for the help. Will try it out later. I have to leave for about an hour. Will be back later.  \n11:21\u00a0<acotiuga>\u00a0has quit  \n11:26\u00a0<acotiuga>\u00a0has joined #xwiki  \n11:37\u00a0<vmassol>\u00a0wrong commit comment ;)  \n11:42\u00a0<tmortagne>\u00a0crap, wrong copy/paste  \n11:43\u00a0<tmortagne>\u00a0a pity we can't change a commit log in git without breaking everyone  \n11:43\u00a0<vmassol>\u00a0yup  \n11:46\u00a0<evalica>\u00a0has quit  \n11:46\u00a0<evalica>\u00a0has joined #xwiki  \n12:01\u00a0<tmortagne>\u00a0has joined #xwiki  \n12:09\u00a0<ekarlso->\u00a0has quit  \n12:13\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n12:23\u00a0<ekarlso>\u00a0has joined #xwiki  \n12:24\u00a0<ihl>\u00a0Does XWiki store all user data in the database? Thus could I purge xwiki+tomcat and try to reinstall?  \n12:25\u00a0<vmassol>\u00a0ihl: \"Does XWiki store all user data in the database? \" yes  \n12:25\u00a0<vmassol>\u00a0ihl: if you want to see what you need to keep:  \n12:25\u00a0<vmassol>\u00a0http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Backup  \n12:26\u00a0<tmortagne>\u00a0depends what you mean by \"user data\", users are stored in the database but XWiki also have data on the filesystem  \n12:26\u00a0<tmortagne>\u00a0filesystem stuff are on /var/lib/xwiki if you are using debian packages  \n12:35\u00a0<ihl>\u00a0I know what the problem is  \n12:35\u00a0<vmassol>\u00a0cool  \n12:36\u00a0<ihl>\u00a0but this is dumb .. an apt-get upgrade xwiki-common-enterprise went to the 8.1~milestone+1  \n12:36\u00a0<ihl>\u00a0The debian repository by default takes unstable releases?  \n12:36\u00a0<tmortagne>\u00a0what repository are you using ?  \n12:36\u00a0<ihl>\u00a0The default one from the installation description  \n12:37\u00a0<tmortagne>\u00a0crap there is a bug again in http://maven.xwiki.org/stable/Packages  \n12:37\u00a0<tmortagne>\u00a0I don't understand  \n12:37\u00a0<tmortagne>\u00a0checking  \n12:41\u00a0<tmortagne>\u00a0regenerating index  \n12:46\u00a0<tmortagne>\u00a0I checked debian index not long ago exactly for this kind of issue, I don't understand how I missed it...  \n12:48\u00a0<ihl>\u00a0Well, I'm happy I could help to fix this issue. Now I have to figure out how I can get back to the 8.0 release version...  \n12:51\u00a0<tmortagne>\u00a0you can indicate the version explicitely as in \"apt-get install xwiki-common-enterprise=8.0\"  \n12:51\u00a0<tmortagne>\u00a0index is up to date  \n12:51\u00a0<tmortagne>\u00a0ha no wait  \n12:52\u00a0<tmortagne>\u00a0no it's ok was my brower cache :)  \n12:52\u00a0<tmortagne>\u00a0so index is ok and you can use =8.0 to force a version  \n12:52\u00a0<tmortagne>\u00a0thanks for catching this  \n13:06\u00a0<ihl>\u00a0This fixed the error about the invalid byte tag in constant pool. But now it seems there is another error, but let me first check if everything downgraded correctly  \n13:07\u00a0<lkrejci>\u00a0has quit  \n13:08\u00a0<lkrejci>\u00a0has joined #xwiki  \n13:11\u00a0<ihl>\u00a0Seems that after the downgrade XWiki didn't reinstall itself into Tomcat. No xwiki.xml descriptor available under /etc/tomcat7/Catalina/localhost/  \n13:15\u00a0<ihl>\u00a0ok, seem I could fix that, upgrade progress to 8.0 started  \n13:19\u00a0<ihl>\u00a0XWiki seems to be back up! Thanks everyone!  \n14:06\u00a0<Denis3>\u00a0is now known as <Denis>  \n14:31\u00a0<Slashman>\u00a0hello, I'm trying to upgrade xwiki from 7.1.2 to 7.4.2 but when it start, I have the following error: http://apaste.info/RRk , any idea?  \n14:32\u00a0<tmortagne>\u00a0Slashman: this looks like a consequence of another error you should have before in the log  \n14:32\u00a0<tmortagne>\u00a0usually what you should look at is the first error, not the last one  \n14:33\u00a0<Slashman>\u00a0looking but I only see solr error  \n14:33\u00a0<tmortagne>\u00a0which is ?  \n14:33\u00a0<tmortagne>\u00a0could you put the whole log in something like pastebin  \n14:33\u00a0<vmassol>\u00a0XWikiRequestProcessor is in xwiki oldcore jar  \n14:33\u00a0<Slashman>\u00a0yeah one sec  \n14:37\u00a0<Slashman>\u00a0tmortagne: http://apaste.info/smA  \n14:37\u00a0<Pbas>\u00a0has joined #xwiki  \n14:37\u00a0<Slashman>\u00a0I tried to empty the solr directory (I seem to recall it solved some issues) but it didn't work either  \n14:38\u00a0<tmortagne>\u00a0Slashman: what kills XWiki init is Solr init IMO  \n14:38\u00a0<Slashman>\u00a0any idea how to fix this ?  \n14:38\u00a0<tmortagne>\u00a0the first error indicate you have a wrong index  \n14:38\u00a0<tmortagne>\u00a0are you sure you deleted it ?  \n14:39\u00a0<tmortagne>\u00a0delete the solr folder  \n14:39\u00a0<tmortagne>\u00a0don't empty it  \n14:39\u00a0<Slashman>\u00a0doing it  \n14:39\u00a0<vmassol>\u00a0the second error is more problematic though  \n14:39\u00a0<vmassol>\u00a0it's as if you're missing some jars in WEB-INF/lib  \n14:40\u00a0<tmortagne>\u00a0vmassol: no sure what error you are talking about  \n14:40\u00a0<tmortagne>\u00a0all I see is solr issue and a nullpointer with the request (the usual error you get when filing to init)  \n14:40\u00a0<tmortagne>\u00a0s/filling/failing/  \n14:40\u00a0<vmassol>\u00a0the SolrInstance component with hint \"embedded\"  \n14:40\u00a0<tmortagne>\u00a0Failed to lookup  \n14:40\u00a0<vmassol>\u00a0(not being found)  \n14:40\u00a0<tmortagne>\u00a0the error does not say it could not find it  \n14:41\u00a0<tmortagne>\u00a0and the reason why it failed to lookup is the first exception  \n14:41\u00a0<vmassol>\u00a0indeed  \n14:41\u00a0<vmassol>\u00a0the error handling is badly coded  \n14:41\u00a0<vmassol>\u00a0\\*badly  \n14:41\u00a0<vmassol>\u00a0the exception should be passed in the exception  \n14:41\u00a0<vmassol>\u00a0fixing  \n14:41\u00a0<tmortagne>\u00a0we really really a better automation of solr cleanup when needed  \n14:41\u00a0<Slashman>\u00a0it starts without the solr folder... thanks, I incorrectly remembered that I had to empty it, not delete it  \n14:42\u00a0<tmortagne>\u00a0Slashman: I think the test just check if the folder exist and don't do anything in that case  \n14:43\u00a0<Slashman>\u00a0now with the update... LDAP doesn't work, trying with build-in admin account  \n14:43\u00a0<vmassol>\u00a0tmortagne: hopefully this commit should improve the error handling  \n14:43\u00a0<tmortagne>\u00a0vmassol: it should yes, the previous version was a weird idea  \n14:43\u00a0<vmassol>\u00a0I don't know this code base too well so would be good if someone validates it's ok  \n14:44\u00a0<vmassol>\u00a0ok thanks  \n14:44\u00a0<tmortagne>\u00a0I can't tell you why it was like this, maybe mflorea or Enygma`have an idea  \n14:45\u00a0<tmortagne>\u00a0maybe some test leftiver  \n14:45\u00a0<tmortagne>\u00a0\\*leftover  \n14:52\u00a0<vmassol>\u00a0tmortagne: could you check the revapi failures at http://ci.xwiki.org/job/xwiki-platform/2732/console ?  \n14:52\u00a0<vmassol>\u00a0they look similar to the ones in commons  \n14:52\u00a0<vmassol>\u00a0I hope they don't break too many people...  \n14:52\u00a0<vmassol>\u00a0:)  \n14:53\u00a0<vmassol>\u00a0restarting rendering sonar job now  \n14:54\u00a0<tmortagne>\u00a0vmassol: they don't look similar, they are :)  \n14:54\u00a0<tmortagne>\u00a0revapi is complaining about commons changes in platform  \n14:55\u00a0<vmassol>\u00a0ah yes we follow deps, hmmm  \n14:55\u00a0<mflorea>\u00a0tmortagne: seems to be Sergiu's change https://github.com/xwiki/xwiki-platform/commit/c2a0e53f653c0adca9a6f6941cc8cd259fa81250#diff-7df4b511c2826bb97cbc3f85cc4ac2fcL69 . I don't understand it either  \n14:55\u00a0<vmassol>\u00a0maybe I need to turn that off  \n14:55\u00a0<tmortagne>\u00a0yes  \n14:55\u00a0<tmortagne>\u00a0we don't care about dependencies IMO  \n14:56\u00a0<vmassol>\u00a0it depends  \n14:56\u00a0<tmortagne>\u00a0especuially dependencies that are already tested  \n14:56\u00a0<vmassol>\u00a0imagine that return some class from a third party lib  \n14:56\u00a0<vmassol>\u00a0and that lib is updated  \n14:56\u00a0<vmassol>\u00a0that's a bad example but you understand  \n14:56\u00a0<vmassol>\u00a0that's the reason revapi performs these checks by efault  \n14:56\u00a0<vmassol>\u00a0\\*default  \n14:57\u00a0<tmortagne>\u00a0I understand why reavapi does it but what is sure is that getting commons error on platform side is useless  \n14:57\u00a0<vmassol>\u00a0yes  \n14:57\u00a0<vmassol>\u00a0one solution would be to put the revapi config file in one location  \n14:57\u00a0<vmassol>\u00a0It hink ATM revapi doesn't support packaging it into an artifact  \n14:57\u00a0<Slashman>\u00a0after update from 7.1 to 7.4, all the pages have lost their parent, is this intended?  \n14:57\u00a0<vmassol>\u00a0which is our only way I think to not depend on something external  \n14:57\u00a0<vmassol>\u00a0Slashman: you need to read this:  \n14:58\u00a0<vmassol>\u00a0http://platform.xwiki.org/xwiki/bin/view/Features/ContentOrganization#HMigratingtoNestedPages  \n14:58\u00a0<vmassol>\u00a0(and what's above the anchor)  \n14:58\u00a0<vmassol>\u00a0tmortagne: I could suggest to lkrejci to offer this solution  \n14:58\u00a0<vmassol>\u00a0as an idea  \n14:59\u00a0<vmassol>\u00a0tmortagne: you think it would be a good idea?  \n14:59\u00a0<vmassol>\u00a0I think it would help to have a common place for revapi  \n14:59\u00a0<vmassol>\u00a0make it simpler to manage  \n14:59\u00a0<vmassol>\u00a0(similar to checkstyle)  \n14:59\u00a0<tmortagne>\u00a0vmassol: what would be this \"location\" ?  \n15:00\u00a0<tmortagne>\u00a0commons root pom ?  \n15:00\u00a0<tmortagne>\u00a0should already work  \n15:01\u00a0<vmassol>\u00a0no  \n15:01\u00a0<vmassol>\u00a0there's inheritance ATM  \n15:01\u00a0<vmassol>\u00a0but yes when this is fixed it'll fix the issue  \n15:01\u00a0<vmassol>\u00a0(if we think it's a good idea to have it in the top level pom, not sure about that)  \n15:02\u00a0<vmassol>\u00a0I think I'd prefer a checkstyle-way  \n15:02\u00a0<tmortagne>\u00a0the problem I see in the current situation is that any extension that have extension-api in its dependencies and upgrading from < 8.1 to 8.1 will fail with this revapi error  \n15:03\u00a0<vmassol>\u00a0indeed  \n15:03\u00a0<vmassol>\u00a0makes it a bit complex  \n15:03\u00a0<vmassol>\u00a0I'll turn it off FTM anyway  \n15:03\u00a0<vmassol>\u00a0we didn't have this with clirr so let's hope we don't let breakages go unnoticed too much ;)  \n15:04\u00a0<tmortagne>\u00a0lets say for now having it disabled is not worst than before  \n15:05\u00a0<vmassol>\u00a0yes  \n15:05\u00a0<tmortagne>\u00a0we could maybe enable it in some job  \n15:05\u00a0<vmassol>\u00a0actually I don't even know if it can be turned off, checking  \n15:05\u00a0<tmortagne>\u00a0just to see  \n15:05\u00a0<vmassol>\u00a0yes indeed  \n15:05\u00a0<tmortagne>\u00a0(if we can ignore all xwiki- dependencies)  \n15:08\u00a0<Slashman>\u00a0vmassol: thanks, I'll try the extension to migrate  \n15:10\u00a0<vmassol>\u00a0created https://github.com/revapi/revapi/issues/38  \n15:10\u00a0<vmassol>\u00a0going to add an ignore FTM  \n15:10\u00a0<vmassol>\u00a0Slashman: ok, let us know how it goes  \n15:12\u00a0<Slashman>\u00a0vmassol: sorry but I'm trying to access the \"NestedPagesMigration.WebHome\" page, but what is the path?  \n15:12\u00a0<vmassol>\u00a0haha first usability issue  \n15:12\u00a0<Slashman>\u00a0I tried /bin/NestedPagesMigration.WebHome /bin/view/NestedPagesMigration.WebHome  \n15:13\u00a0<vmassol>\u00a0Slashman: it's a hidden page?  \n15:13\u00a0<vmassol>\u00a0otherwise you can use this:  \n15:13\u00a0<Slashman>\u00a0no idea  \n15:13\u00a0<vmassol>\u00a0https://www.xwiki.org/xwiki/bin/view/FAQ/How+can+I+navigate+to+a+given+page  \n15:13\u00a0<Slashman>\u00a0from the wiki: \"Go to the Extension Manager in your wiki, and install the Nested Pages Migrator Application. Then go to the page NestedPagesMigration.WebHome.\"  \n15:14\u00a0<tmortagne>\u00a0the migrator does not add an icon on the app bar on the left ?  \n15:14\u00a0<vmassol>\u00a0it doesn't apparently, going to create a jira  \n15:14\u00a0<tmortagne>\u00a0(I have no idea but sounds like something it should do)  \n15:14\u00a0<Slashman>\u00a0okay, found it using search, the page is at /bin/view/NestedPagesMigration/  \n15:15\u00a0<Slashman>\u00a0no, it doesn't create an icon  \n15:15\u00a0<tmortagne>\u00a0Slashman: basically you need to replace \".\" with \"/\" to get the URL of a page  \n15:16\u00a0<DarkKnightCZ>\u00a0has quit  \n15:16\u00a0<Slashman>\u00a0the \".WebHome\" must be removed in this case  \n15:17\u00a0<tmortagne>\u00a0no  \n15:17\u00a0<tmortagne>\u00a0it's just no mandatory  \n15:17\u00a0<tmortagne>\u00a0s/no/not/  \n15:17\u00a0<Slashman>\u00a0okay  \n15:19\u00a0<Slashman>\u00a0executing plan, it's a copy of production, let's see what it does  \n15:22\u00a0<Slashman>\u00a0still have to fix ldap auth after that, any advice? everything was configured in xwiki.cfg, auth don't work now  \n15:24\u00a0<tmortagne>\u00a0Slashman: there is no change between 7.1 and 7.4 AFAIK  \n15:24\u00a0<tmortagne>\u00a0the best is to enable debug log and see what you get  \n15:25\u00a0<Slashman>\u00a0last time I tried if I remember correctly the issue was about specific user attribute introduced in 7.1.2 and failure to migrate them to the new version  \n15:26\u00a0<tmortagne>\u00a0Slashman: I doubt that has anything to do with LDAP, it does not migrate anything  \n15:26\u00a0<Slashman>\u00a0it wasn't linked to ldap  \n15:26\u00a0<Slashman>\u00a0but since all my users are on LDAP...  \n15:27\u00a0<Slashman>\u00a0the default admin works  \n15:27\u00a0<Slashman>\u00a0I'll see after the nested page migration  \n15:27\u00a0<tmortagne>\u00a0anyway whatever is the issue you will see it in the debug log  \n15:28\u00a0<tmortagne>\u00a0vmassol: re revapi, this is something new because it was not failing before the 8.1M1 release  \n15:29\u00a0<vmassol>\u00a0tmortagne: it's beause in 8.1M1 revapi was doing nothing ;)  \n15:29\u00a0<vmassol>\u00a0in the middle of the 8.1 dev cycle  \n15:29\u00a0<vmassol>\u00a0I changed the config for revapi  \n15:29\u00a0<vmassol>\u00a0(on a suggestion from Lukas)  \n15:29\u00a0<vmassol>\u00a0to use an include/exclude based on java packages instead of classes  \n15:29\u00a0<vmassol>\u00a0and unfortunately the setup was wrong  \n15:30\u00a0<vmassol>\u00a0but i didn't notice at the time  \n15:30\u00a0<vmassol>\u00a0wrong == no violation were reported till yesterday when I fixed the syntax  \n15:30\u00a0<Slashman>\u00a0vmassol: from what I'm seeing, the NestedPagesMigratio did't move any pages, am I missing something?  \n15:32\u00a0<Slashman>\u00a0we had wiki pages with children, with path like \"Wiki HomeDashboard => Documentation Internal => IT => misc\\_page\"  \n15:34\u00a0<Slashman>\u00a0now the path for misc\\_page is \"Wiki HomeDashboard => Internal => misc\\_page\"  \n15:35\u00a0<Slashman>\u00a0I give up, I unfortunately don't have time for this  \n15:35\u00a0<vmassol>\u00a0sorry to hear, need to finish something first too  \n15:35\u00a0<vmassol>\u00a0you can enable the backward copat behavior  \n15:35\u00a0<vmassol>\u00a0\\*compat  \n15:35\u00a0<vmassol>\u00a0to have parent child relationship  \n15:36\u00a0<Slashman>\u00a0how do you do that?  \n15:36\u00a0<vmassol>\u00a0see the doc I pointed you to  \n15:36\u00a0<vmassol>\u00a0should be in there somewhere  \n15:36\u00a0<vmassol>\u00a0found it  \n15:37\u00a0<vmassol>\u00a0on http://platform.xwiki.org/xwiki/bin/view/Features/ContentOrganization/NestedPagesMigration/  \n15:37\u00a0<vmassol>\u00a0\"Even though it's hidden you can still turn it back on if you need it while you migrate your content to use Nested Spaces: set the core.hierarchyMode property to parentchild in thexwiki.properties configuration file.\"  \n15:39\u00a0<Slashman>\u00a0vmassol: thanks, I'll retry latter  \n15:39\u00a0<vmassol>\u00a0k  \n15:40\u00a0<Slashman>\u00a0vmassol: the main issue is that for a long time I was tracking the \"stable\" release of xwiki and it broke a lot of time during update until I discussed it and understood that I should track the LTS version  \n15:40\u00a0<Slashman>\u00a0the name is misleading  \n15:40\u00a0<Slashman>\u00a0for me I think of LTS as the stable version and stable as the beta version  \n15:40\u00a0<vmassol>\u00a0stable as beta?  \n15:40\u00a0<vmassol>\u00a0:)  \n15:41\u00a0<vmassol>\u00a0looks weird  \n15:41\u00a0<vmassol>\u00a0we use http://www.xwiki.org/xwiki/bin/view/Download/  \n15:41\u00a0<vmassol>\u00a0lts, stable, dev  \n15:41\u00a0<vmassol>\u00a0it's pretty common I think  \n15:42\u00a0<vmassol>\u00a0I don't think our users would appreciate if we labelled stable versions that are beta  \n15:42\u00a0<vmassol>\u00a0don't you think so?  \n15:42\u00a0<Slashman>\u00a0I raised a lot of ticket about update of stable to stable that just failed unfortunately  \n15:42\u00a0<vmassol>\u00a0ah you meant the opposite  \n15:42\u00a0<vmassol>\u00a0you mean labelling our stable as betas  \n15:43\u00a0<vmassol>\u00a0the thing we don't want them to be betas  \n15:43\u00a0<vmassol>\u00a0we want the community to use them and nobody uses betas  \n15:43\u00a0<Slashman>\u00a0at open source submit paris, I talked with xwiki dev that didn't test the latest stable at the time and told me that some feature were a little experimental  \n15:43\u00a0<Slashman>\u00a0and indeed, I feel that way about the stable version  \n15:43\u00a0<vmassol>\u00a0the community has to help somewhere, they get xwiki for free, the least they can do is help test it  \n15:43\u00a0<vmassol>\u00a0it's pretty stable  \n15:44\u00a0<vmassol>\u00a0some new features can be experimental but users don't need to use them in general  \n15:44\u00a0<Slashman>\u00a0don't take me wrong, I love the project, but it took a great amount of effort to update stable to stable since I began to use it almost 4 years ago now  \n15:44\u00a0<vmassol>\u00a0yes and thanks to you the project got better! :)  \n15:44\u00a0<vmassol>\u00a0and I really thank you for it  \n15:45\u00a0<vmassol>\u00a0overall it progressed faster than by having only 1 stable per year  \n15:45\u00a0<vmassol>\u00a0about 12 times faster  \n15:45\u00a0<vmassol>\u00a0:)  \n15:45\u00a0<vmassol>\u00a0I understand where you're coming from  \n15:46\u00a0<vmassol>\u00a0and what you'd like  \n15:46\u00a0<vmassol>\u00a0in practice we need to increase speed of devliery  \n15:46\u00a0<vmassol>\u00a0ie make sure we release stable software faster  \n15:46\u00a0<vmassol>\u00a0the end goal is to be able to release xwiki several times per day  \n15:46\u00a0<vmassol>\u00a0so if you have xwiki in the cloud in a farm  \n15:46\u00a0<Slashman>\u00a0yes I understand, I'm working at a dev company too, it's my own fault for misunderstanding what you meant by stable and lts, at first I didn't even notice that there was an lts version  \n15:46\u00a0<vmassol>\u00a0it can he updated several times a day  \n15:47\u00a0<vmassol>\u00a0\\*be  \n15:47\u00a0<vmassol>\u00a0(automatically)  \n15:47\u00a0<vmassol>\u00a0we're not there yet :)  \n15:47\u00a0<vmassol>\u00a0NestedSpaces was a huge change for us too  \n15:47\u00a0<vmassol>\u00a0luckily we do that kind of large change once every 10 years  \n15:48\u00a0<vmassol>\u00a0we're trying our best to mitigate the issues but it's a large change so upgrading to 7.2+ is more complex than usual  \n15:48\u00a0<Slashman>\u00a0I really appreciate it, but I'll have to make an investment in it to make it work, of course I want to do it to give back to xwiki but I don't have much time now  \n15:48\u00a0<vmassol>\u00a0I understand  \n15:49\u00a0<vmassol>\u00a0if you have budget you could ask for professional service to do it for you ;)  \n15:49\u00a0<vmassol>\u00a0(I mean http://www.xwiki.org/xwiki/bin/view/Main/Support#HProfessionalSupport )  \n15:49\u00a0<Slashman>\u00a0it may be a good idea indeed  \n16:05\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n16:09\u00a0<vmassol>\u00a0guys, just added some more automated way to generate the backward-compat report at http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki81M1#HAPIBreakages  \n16:09\u00a0<vmassol>\u00a0we just need to copy paste the ignore content in the page  \n16:09\u00a0<vmassol>\u00a0we can improve this with a wiki macro, improve the message, get the data automatically from github using the github rest api, etc  \n16:10\u00a0<vmassol>\u00a0wdyt?  \n16:41\u00a0<vmassol>\u00a0fun: https://gist.github.com/vmassol/f98161af01bcf3c78165a0164ecbdab2 :)  \n16:41\u00a0<vmassol>\u00a0(how to get the ignore automatically :))  \n16:41\u00a0<vmassol>\u00a0now I need to save it somewhere in order not to get it all the time  \n16:42\u00a0<vmassol>\u00a0and to pass a version  \n16:42\u00a0<vmassol>\u00a0and to wrap all this into a wiki macro  \n16:42\u00a0<vmassol>\u00a0and to merge the 3 ignores we have  \n16:43\u00a0<vmassol>\u00a0groovy is really cool for this, very concise  \n16:56\u00a0<lkrejci>\u00a0vmassol: not sure if you noticed, but I released revapi-java 0.8.0 last night. You should upgrade, because I found a serious bug that would make any problems not be reported (depending on the order of elements being checked)  \n17:03\u00a0<vmassol>\u00a0lkrejci: ah didn\"t notice, thanks for the heads up  \n17:03\u00a0<vmassol>\u00a0uprgading now  \n17:03\u00a0<vmassol>\u00a0just updated my script: https://gist.github.com/vmassol/f98161af01bcf3c78165a0164ecbdab2  \n17:06\u00a0<DarkKnightCZ>\u00a0has quit  \n17:06\u00a0<Aranjedeath>\u00a0has quit  \n17:08\u00a0<Aranjedeath>\u00a0has joined #xwiki  \n17:09\u00a0<Enygma`>\u00a0has quit  \n17:10\u00a0<Enygma`>\u00a0has joined #xwiki  \n17:14\u00a0<acotiuga>\u00a0has quit  \n17:19\u00a0<ihl>\u00a0has quit  \n17:22\u00a0<vmassol>\u00a0now just need to perform the json merge of the 3 locations for ignores (https://gist.github.com/vmassol/f98161af01bcf3c78165a0164ecbdab2)  \n17:31\u00a0<vmassol>\u00a0and\u2026 with the merge: https://gist.github.com/vmassol/f98161af01bcf3c78165a0164ecbdab2 :)  \n17:31\u00a0<vmassol>\u00a0creating a wiki macro now  \n18:00\u00a0<vmassol>\u00a0done for 8.1M2 RN: http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki81M2  \n18:00\u00a0<vmassol>\u00a0:)  \n18:01\u00a0<vmassol>\u00a0(there are dups ATM since we had to add dups for the ignores but that should go away when we fix it in the revapi config)  \n18:01\u00a0<vmassol>\u00a0note: ATM to refresh the content, you need to delete the xobject  \n18:03\u00a0<tmortagne>\u00a0would be nice to have something a bit less technical than a class name for the violation  \n18:04\u00a0<vmassol>\u00a0I know  \n18:04\u00a0<tmortagne>\u00a0it's not a class name actually but an id I guess  \n18:04\u00a0<vmassol>\u00a0I did the best I could as quickly as possible  \n18:04\u00a0<vmassol>\u00a0and to reduce RM work  \n18:04\u00a0<vmassol>\u00a0BTW I need to fix the tag and pass a version instead  \n18:04\u00a0<vmassol>\u00a0fixing now  \n18:05\u00a0<mflorea>\u00a0has quit  \n18:07\u00a0<lkrejci>\u00a0has quit  \n18:07\u00a0<lkrejci>\u00a0has joined #xwiki  \n18:09\u00a0<vmassol>\u00a0tmortagne: I have plenty of ideas on how to improve it :)  \n18:09\u00a0<vmassol>\u00a0consider it a POC FTM  \n18:09\u00a0<vmassol>\u00a0should be easy to improve later on  \n18:10\u00a0<tmortagne>\u00a0vmassol: I was just listing things to make it look similar to what we did in previous RN  \n18:21\u00a0<vmassol>\u00a0I've updated the release plan help page too  \n18:22\u00a0<vmassol>\u00a0got to go take my train, we can improve later  \n18:22\u00a0<vmassol>\u00a0at least it makes it a lot simper for RMs already  \n18:24\u00a0<vmassol>\u00a0has quit  \n18:26\u00a0<lkrejci>\u00a0has quit  \n18:37\u00a0<tmortagne>\u00a0has quit  \n18:51\u00a0<evalica>\u00a0has quit  \n18:54\u00a0<KermitTheFragger>\u00a0has quit  \n18:54\u00a0<Bugendolf>\u00a0has quit  \n18:54\u00a0<Enygma`>\u00a0has quit  \n19:12\u00a0<Bugendolf>\u00a0has joined #xwiki  \n19:29\u00a0<cjd>\u00a0has quit  \n19:55\u00a0<lkrejci>\u00a0has joined #xwiki  \n20:02\u00a0<lkrejci>\u00a0has quit  \n20:05\u00a0<Slashman>\u00a0has quit  \n20:20\u00a0<lkrejci>\u00a0has joined #xwiki  \n20:48\u00a0<abusenius>\u00a0has joined #xwiki  \n20:53\u00a0<vmassol>\u00a0has joined #xwiki  \n21:01\u00a0<cjd>\u00a0has joined #xwiki  \n21:06\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n21:08\u00a0<lkrejci>\u00a0has quit  \n21:13\u00a0<cjd>\u00a0has quit  \n21:14\u00a0<cjd>\u00a0has joined #xwiki  \n21:42\u00a0<DarkKnightCZ>\u00a0has quit  \n22:09\u00a0<cjd>\u00a0has quit  \n22:09\u00a0<cjd>\u00a0has joined #xwiki  \n23:11\u00a0<cjd>\u00a0has quit  \n23:58\u00a0<vmassol>\u00a0has quit\n"}