{"id": "dev:IRC.xwikiArchive20130729", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130729", "title": "IRC Archive for channel #xwiki on 29 July 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<cjd>\u00a0has quit  \n01:31\u00a0<cjd>\u00a0has joined #xwiki  \n07:12\u00a0<mflorea>\u00a0has joined #xwiki  \n08:14\u00a0<evalica>\u00a0has joined #xwiki  \n08:26\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:27\u00a0<evalica1>\u00a0has joined #xwiki  \n08:27\u00a0<evalica>\u00a0has quit  \n08:30\u00a0<npm\\_>\u00a0has joined #xwiki  \n08:30\u00a0<npm>\u00a0has quit  \n08:40\u00a0<npm\\_>\u00a0has quit  \n08:48\u00a0<evalica1>\u00a0is now known as <evalica>  \n09:00\u00a0<vmassol>\u00a0has joined #xwiki  \n09:32\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:00\u00a0<camil7>\u00a0has joined #xwiki  \n10:10\u00a0<vmassol>\u00a0good morning  \n10:10\u00a0<vmassol>\u00a0guys don't forget to update http://www.xwiki.org/xwiki/bin/view/Roadmaps/WebHome  \n10:10\u00a0<vmassol>\u00a0thanks  \n10:33\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n10:37\u00a0<Slashman>\u00a0has joined #xwiki  \n10:44\u00a0<gdelhumeau>\u00a0on localhost (jetty+mysql), it's very long to create a new workspace  \n10:44\u00a0<tmortagne>\u00a0gdelhumeau: yes copy document is super slow  \n10:52\u00a0<gdelhumeau>\u00a0I don't find where workspace-template.xar is defined  \n10:59\u00a0<tmortagne>\u00a0gdelhumeau: it's attached somewhere, in the workspaces install page I think  \n11:00\u00a0<tmortagne>\u00a0but this is only used to create the template  \n11:00\u00a0<gdelhumeau>\u00a0In github, it's not  \n11:00\u00a0<tmortagne>\u00a0not when creating a new wiki  \n11:00\u00a0<tmortagne>\u00a0sure it's not  \n11:00\u00a0<tmortagne>\u00a0it's attached at build time  \n11:00\u00a0<tmortagne>\u00a0workspaces does not kn ow anything about XE it's a platform project  \n11:09\u00a0<gdelhumeau>\u00a0I would like to change the content of this XAR, and I don't know how to do it  \n11:10\u00a0<tmortagne>\u00a0this XAR is just a standard XE AFAIK  \n11:11\u00a0<tmortagne>\u00a0look at XEM build  \n11:11\u00a0<tmortagne>\u00a0that's were it's attached  \n11:16\u00a0<gdelhumeau>\u00a0ok, found it ;)  \n11:17\u00a0<gdelhumeau>\u00a0there: https://github.com/xwiki/xwiki-manager/blob/master/xwiki-manager-ui/pom.xml  \n11:31\u00a0<kstuart>\u00a0has quit  \n11:40\u00a0<fmancinelli>\u00a0has joined #xwiki  \n11:40\u00a0<fmancinelli>\u00a0Hello  \n11:41\u00a0<vmassol>\u00a0hi fabio  \n11:41\u00a0<fmancinelli>\u00a0I am trying to build a \"minimalistic\" XWiki distribution and I started from https://github.com/xwiki/xwiki-manager/blob/master/xwiki-manager-distribution/xwiki-manager-ui-all/pom.xml  \n11:41\u00a0<vmassol>\u00a0for a minimalistic xwiki you could us ethe packager plugin  \n11:42\u00a0<vmassol>\u00a0you can check how to use that in any of our functional tests module in platform  \n11:43\u00a0<fmancinelli>\u00a0ok, checking that. thanks  \n11:52\u00a0<Slashman>\u00a0has quit  \n12:36\u00a0<fmancinelli>\u00a0ok. AFAIU this http://hastebin.com/dunetulomo.xml should produce a Jetty/HSQLDB distribution in target/xwiki functionally equivalent to org.xwiki.enterprise:xwiki-enterprise-jetty-hsqldb  \n12:36\u00a0<fmancinelli>\u00a0at least it seems so  \n12:37\u00a0<vmassol>\u00a0it won't be minimal though since you included all xe-ui-all :)  \n12:37\u00a0<vmassol>\u00a0you don't need enterprise-web either AFAIR  \n12:38\u00a0<vmassol>\u00a0(since this is brought by default by the mojo)  \n12:38\u00a0<vmassol>\u00a0(fmancinelli)  \n12:38\u00a0<fmancinelli>\u00a0yes, just experimenting :)  \n12:38\u00a0<fmancinelli>\u00a0without enterprise-web strange things happened (like all macros missing :))  \n12:38\u00a0<vmassol>\u00a0note that you may need to set the version of the platform using:  \n12:38\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0/\\*\\*  \n12:39\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\* The platform version to be used by the packager plugin.  \n12:39\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \n12:39\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0private String platformVersion;  \n12:39\u00a0<vmassol>\u00a0to understand it the best is to read PackageMojo.java  \n12:39\u00a0<vmassol>\u00a0you'll see that it takes root and web b default  \n12:40\u00a0<vmassol>\u00a0fmancinelli: this is the code: https://gist.github.com/vmassol/6103495  \n12:40\u00a0<fmancinelli>\u00a0vmassol, yep I saw it, but by importing only ui-all macros were missing, so I just threw enterprise web in :)  \n12:40\u00a0<vmassol>\u00a0you should remove both  \n12:40\u00a0<vmassol>\u00a0both wars  \n12:40\u00a0<vmassol>\u00a0(both war deps I mean)  \n12:41\u00a0<vmassol>\u00a0BTW I also noticed the regression we brought by introducing smartgwt.version\u2026 we'll need to fix that somehow  \n12:43\u00a0<fmancinelli>\u00a0vmassol, that was the first thing I tried (only the enterprise-ui-all dependency). but it produces something that doesn't work. That's why I explicitly added the enterprise-web and root-webapp deps explicitly (which gave a seemligly correct version of XE)  \n12:44\u00a0<vmassol>\u00a0check other func tests, you'll see we don't declare them  \n12:44\u00a0<vmassol>\u00a0(and they work)  \n12:45\u00a0<vmassol>\u00a0the idea is to have a minimal pom to get a minimal XE ;)  \n12:45\u00a0<fmancinelli>\u00a0my goal (what I meant by \"minimalistic\") was actually to have a stripped down version of XE (without blog etc.) on top of which add my own stuff. like a foundation to build a flavour :)  \n12:45\u00a0<vmassol>\u00a0sure, just don't decalre any dep  \n12:45\u00a0<vmassol>\u00a0and you'll get that  \n12:46\u00a0<fmancinelli>\u00a0ok, maybe I've overlooked something... going to eat and then retry :) Thanks, vmassol  \n12:46\u00a0<vmassol>\u00a0np  \n13:35\u00a0<mflorea>\u00a0has quit  \n13:41\u00a0<Slashman>\u00a0has joined #xwiki  \n13:43\u00a0<chalx>\u00a0has joined #xwiki  \n13:48\u00a0<chalx1>\u00a0has joined #xwiki  \n13:48\u00a0<chalx>\u00a0has quit  \n13:50\u00a0<fmancinelli>\u00a0has quit  \n14:03\u00a0<fmancinelli>\u00a0has joined #xwiki  \n14:13\u00a0<fmancinelli>\u00a0indeed it works ;)  \n14:14\u00a0<fmancinelli>\u00a0nice  \n14:17\u00a0<vmassol>\u00a0cool  \n14:21\u00a0<chalx1>\u00a0has quit  \n14:26\u00a0<chalx>\u00a0has joined #xwiki  \n14:33\u00a0<mflorea>\u00a0has joined #xwiki  \n14:43\u00a0<kstuart>\u00a0has joined #xwiki  \n14:57\u00a0<tdelafosse>\u00a0has joined #xwiki  \n15:24\u00a0<evalica>\u00a0has quit  \n15:26\u00a0<GuillaumeF>\u00a0has joined #xwiki  \n15:30\u00a0<GuillaumeF>\u00a0Hello there. Is there a reason XWiki.XWikiAllGroup's history could be called on a wiki, internally ?  \n15:31\u00a0<GuillaumeF>\u00a0ie. I don't have any request on that page from the apache logs, but huge history has been called, which slowed down a whole farm for several minutes  \n15:31\u00a0<GuillaumeF>\u00a0(it's myxwiki.org BTW)  \n15:32\u00a0<gdelhumeau>\u00a0AllGroup contains all the user  \n15:32\u00a0<gdelhumeau>\u00a0each time you create a user, it's added to this group and so the history of its page grows  \n15:32\u00a0<GuillaumeF>\u00a0but is the whole history called in some way?  \n15:32\u00a0<gdelhumeau>\u00a0called?  \n15:33\u00a0<GuillaumeF>\u00a0query in mysql  \n15:33\u00a0<camil7>\u00a0it is possibly loaded from DB at some time  \n15:34\u00a0<GuillaumeF>\u00a0It's a wiki without any activity (still DW showing from last upgrade)  \n15:34\u00a0<camil7>\u00a0maybe a problem caused \u00a0by XWIKI-9046  \n15:35\u00a0<GuillaumeF>\u00a0so maybe a robot called another page that refered to that history  \n15:35\u00a0<GuillaumeF>\u00a0Because it seems nobody called that history directly, so..  \n15:35\u00a0<camil7>\u00a0or maybe if someone logs in, or the notification mails get send, this loads XWikiAllGroups for some permission checks  \n15:35\u00a0<GuillaumeF>\u00a0(this xwikibot rules btw)  \n15:43\u00a0<GuillaumeF>\u00a0I'll put the usually history-huge pages in robots.txt in the meantime  \n15:47\u00a0<camil7>\u00a0you can delete the lots of history if you really thing it is the problem  \n16:09\u00a0<GuillaumeF>\u00a0has quit  \n16:12\u00a0<chalx>\u00a0has quit  \n16:19\u00a0<gdelhumeau>\u00a0has quit  \n16:27\u00a0<GuillaumeF>\u00a0has joined #xwiki  \n16:31\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n16:44\u00a0<fmancinelli>\u00a0has quit  \n16:49\u00a0<vmassol>\u00a0any HQL expert who can tell me why this query returns all docs with tags and not just the docs with \"VINCENT\" tags:  \n16:50\u00a0<vmassol>\u00a0$services.query.hql(\",BaseObject as tobject, DBStringListProperty as tagprop where tobject.className='XWiki.TagClass' and tobject.name=doc.fullName and tobject.id=tagprop.id.id and tagprop.id.name='tags' and (:tagname in (select distinct upper(tag) from BaseObject as obj, DBStringListProperty as prop join prop.list as tag where obj.className='XWiki.TagClass' and obj.id=prop.id.id and prop.id.name='tags'))\").bindValue('tagname', 'VINCENT'  \n16:52\u00a0<gdelhumeau>\u00a0why do you do a subquery?  \n16:52\u00a0<vmassol>\u00a0I need to convert to uppercase a list  \n16:52\u00a0<vmassol>\u00a0basically find all docs with their uppercases tag value matching a value  \n16:53\u00a0<vmassol>\u00a0trying to fix http://jira.xwiki.org/browse/XE-1318  \n16:54\u00a0<vmassol>\u00a0if you know of a way without a subquery that would be great!  \n17:00\u00a0<gdelhumeau>\u00a0\",BaseObject as tobject, DBStringListProperty as tagprop JOIN tagprop.list AS tag where tobject.className='XWiki.TagClass' and tobject.name=doc.fullName and tobject.id=tagprop.id.id and tagprop.id.name='tags' and upper(tag) = 'VINCENT'\" ?  \n17:02\u00a0<vmassol>\u00a0very cool  \n17:02\u00a0<vmassol>\u00a0thanks  \n17:06\u00a0<gdelhumeau>\u00a0If we still want to keep the ability to create subwikis (not workspace), should we create a 'wiki-manager' project inside xwiki-platform in order to put all the UI pages that hold this feature?  \n17:06\u00a0<gdelhumeau>\u00a0(because we are closing the xwiki-manager repository)  \n17:06\u00a0<gdelhumeau>\u00a0ok, stupid question  \n17:07\u00a0<vmassol>\u00a0:)  \n17:07\u00a0<gdelhumeau>\u00a0it already exists  \n17:07\u00a0<vmassol>\u00a0yep  \n17:09\u00a0<fmancinelli>\u00a0has joined #xwiki  \n17:14\u00a0<fmancinelli>\u00a0vmassol: is there a \"clean\" way for building an independent WAR the same way the packager builds the WAR inside the Jetty distribution? The dirty way would be to build the Jetty distribution and then package the content of target/xwiki/webapps/xwiki as a WAR, but that doesn't seem correct :)  \n17:17\u00a0<vmassol>\u00a0fmancinelli: we don't have any special tool for this, no  \n17:17\u00a0<vmassol>\u00a0the package mojo could be refactored to provide various types of distributions though  \n17:20\u00a0<fmancinelli>\u00a0vmassol, I see. That could be very interesting because the packager is hyper-cool! :)  \n17:20\u00a0<vmassol>\u00a0yeah it makes the pom simple and minimal  \n17:21\u00a0<vmassol>\u00a0fmancinelli: btw I got the angularJS todo demo working in xwiki ;)  \n17:21\u00a0<vmassol>\u00a0(now trying to make it work with requirejs)  \n17:21\u00a0<fmancinelli>\u00a0nice :)  \n17:22\u00a0<vmassol>\u00a0FTR the issue was that our minification in jsx was causing the trouble and I found another way of using angularjs with minification  \n17:25\u00a0<tmortagne>\u00a0has quit  \n17:26\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n17:27\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:28\u00a0<tmortagne>\u00a0has quit  \n17:28\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:29\u00a0<gdelhumeau>\u00a0in xwiki-manager, we had 'XemManager.Install' \u00a0that create a wiki template for creating subwikis  \n17:30\u00a0<gdelhumeau>\u00a0should I move it to xwiki-platform-wiki-manager-ui ?  \n17:32\u00a0<vmassol>\u00a0gdelhumeau: I think you should discuss this one with tmortagne but probably  \n17:37\u00a0<tmortagne>\u00a0has quit  \n17:38\u00a0<gdelhumeau>\u00a0you scared him  \n17:38\u00a0<vmassol>\u00a0:)  \n17:47\u00a0<vmassol>\u00a0mflorea: indeed doesn't work if I sleect more than 1 tag in the cloud  \n17:49\u00a0<vmassol>\u00a0mflorea: if your solution works for all cases, please feel free to commit over my changes. Let me know if you prefer that I do it.  \n17:49\u00a0<mflorea>\u00a0vmassol: my change works from my tests, I'll commit it  \n17:49\u00a0<vmassol>\u00a0ok thanks  \n17:50\u00a0<vmassol>\u00a0make sure you cherry-pick in 4.5.x, 5.0.x and 5.1.x....  \n17:50\u00a0<mflorea>\u00a0yep  \n17:50\u00a0<vmassol>\u00a0thanks for catching this  \n17:50\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:52\u00a0<mflorea>\u00a0np, with gdelhumeau on board I should assign the issues I plan to work on otherwise we might end up working on the same thing :)  \n17:53\u00a0<vmassol>\u00a0yeah  \n17:53\u00a0<vmassol>\u00a0this one was aksed to me by nicolas L  \n17:53\u00a0<vmassol>\u00a0\\*asked  \n17:53\u00a0<vmassol>\u00a0I should have assigned to me first but I didn't know if I knew how to fix it so I waited till I had some sort of a solution before assignig it  \n17:53\u00a0<vmassol>\u00a0but I'm glad you also looked for an answer :)  \n17:53\u00a0<mflorea>\u00a0:)  \n17:55\u00a0<kstuart>\u00a0has quit  \n18:01\u00a0<vmassol>\u00a0mflorea: you can assign the issue to you since you committed the good fix! :)  \n18:02\u00a0<vmassol>\u00a0s/can/should  \n18:02\u00a0<mflorea>\u00a0sure  \n18:02\u00a0<vmassol>\u00a0that'll increase your stats ;)  \n18:03\u00a0<mflorea>\u00a0:)  \n18:06\u00a0<mflorea>\u00a0has quit  \n18:14\u00a0<tdelafosse>\u00a0has quit  \n18:20\u00a0<gdelhumeau>\u00a0has quit  \n18:21\u00a0<camil7>\u00a0has quit  \n18:21\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n18:40\u00a0<fmancinelli>\u00a0has quit  \n18:43\u00a0<Enygma`>\u00a0has joined #xwiki  \n18:45\u00a0<GuillaumeF1>\u00a0has joined #xwiki  \n18:48\u00a0<GuillaumeF>\u00a0has quit  \n18:58\u00a0<GuillaumeF1>\u00a0has quit  \n18:59\u00a0<tdelafosse>\u00a0has joined #xwiki  \n19:01\u00a0<KermitTheFragger>\u00a0has quit  \n19:12\u00a0<gdelhumeau>\u00a0has quit  \n19:13\u00a0<GuillaumeF>\u00a0has joined #xwiki  \n20:17\u00a0<GuillaumeF>\u00a0has quit  \n20:21\u00a0<vmassol>\u00a0has joined #xwiki  \n20:32\u00a0<vmassol>\u00a0has quit  \n20:35\u00a0<vmassol>\u00a0has joined #xwiki  \n20:48\u00a0<vmassol>\u00a0has quit  \n20:56\u00a0<vmassol>\u00a0has joined #xwiki  \n21:08\u00a0<vmassol>\u00a0has quit  \n21:16\u00a0<vmassol>\u00a0has joined #xwiki  \n21:33\u00a0<tmortagne>\u00a0has quit  \n21:41\u00a0<kstuart>\u00a0has joined #xwiki  \n22:25\u00a0<vmassol>\u00a0has quit  \n23:03\u00a0<kstuart>\u00a0has quit  \n23:13\u00a0<sdumitriu1>\u00a0has quit  \n23:20\u00a0<Enygma`>\u00a0has quit\n"}