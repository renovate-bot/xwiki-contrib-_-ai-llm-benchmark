{"id": "dev:IRC.xwikiArchive20160126", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160126", "title": "IRC Archive for channel #xwiki on 26 January 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n01:20\u00a0<sdumitriu>\u00a0has quit  \n01:33\u00a0<sdumitriu>\u00a0has joined #xwiki  \n06:18\u00a0<mflorea>\u00a0has joined #xwiki  \n07:11\u00a0<msmeria>\u00a0has joined #xwiki  \n07:29\u00a0<vmassol>\u00a0has joined #xwiki  \n07:41\u00a0<msmeria>\u00a0has quit  \n07:41\u00a0<msmeria>\u00a0has joined #xwiki  \n08:06\u00a0<mflorea>\u00a0has quit  \n08:40\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:46\u00a0<woshilapin>\u00a0has quit  \n09:13\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:15\u00a0<mflorea>\u00a0has joined #xwiki  \n09:34\u00a0<woshilapin>\u00a0has joined #xwiki  \n10:07\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:13\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:20\u00a0<vmassol>\u00a0checking the vfs test on the 7.4.x branch now  \n10:28\u00a0<evalica>\u00a0has joined #xwiki  \n10:29\u00a0<vmassol>\u00a0I can reproduce, debugging  \n10:29\u00a0<vmassol>\u00a0ouch spam is still going on :(  \n10:32\u00a0<Slashman>\u00a0has joined #xwiki  \n10:34\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:36\u00a0<sorinello\\_>\u00a0has joined #xwiki  \n10:39\u00a0<sorinello>\u00a0has quit  \n10:39\u00a0<sorinello\\_>\u00a0has quit  \n10:40\u00a0<vmassol>\u00a0mflorea, gdelhumeau: seems we have a webjars issue on 7.4.x and that's why the vfs test is failing  \n10:40\u00a0<vmassol>\u00a0see https://www.evernote.com/l/AHeM1crVudJLkrPSVU46GGfEuDXlqdlFlUw  \n10:41\u00a0<vmassol>\u00a0s/webjars/js  \n10:42\u00a0<mflorea>\u00a0would help if you could expand the error log  \n10:43\u00a0<vmassol>\u00a0mflorea: https://www.evernote.com/l/AHcAFogGTsdNA5VW0Tm2fuWg\\_u3hcbdSGjE  \n10:43\u00a0<vmassol>\u00a0hmm I don't get the issue if I refresh  \n10:44\u00a0<vmassol>\u00a0so forget it  \n10:44\u00a0<vmassol>\u00a0debugging further since the vfs tests still fails  \n10:44\u00a0<vmassol>\u00a0sorry for the noise  \n10:50\u00a0<vmassol>\u00a0added more ips  \n10:50\u00a0<vmassol>\u00a0ClemensR: wait  \n10:50\u00a0<vmassol>\u00a0there are thousands, we need a script  \n10:50\u00a0<vmassol>\u00a0and we shouldn't delete  \n10:50\u00a0<ClemensR>\u00a0ah, ok  \n10:50\u00a0<vmassol>\u00a0forget that  \n10:51\u00a0<vmassol>\u00a0we should make sure it doesn't go in the trash either  \n10:51\u00a0<vmassol>\u00a0I mean maunally it's going to be impossible  \n10:51\u00a0<vmassol>\u00a0we need some script  \n10:51\u00a0<vmassol>\u00a0I'm finishing debugging some failing vfs test and I'll start writing a script, unless someone wants to do that :)  \n10:52\u00a0<vmassol>\u00a0ATM we're banning ips to stop the flow  \n10:52\u00a0<ClemensR>\u00a0ok, I have a meeting in a few minutes, and better not write a \"nuke all\" script in a haste ;)  \n10:52\u00a0<vmassol>\u00a0:)  \n10:56\u00a0<vmassol>\u00a0mflorea: do you remember the issue I raised a few weeks ago regarding the tree macro not working anymore for the vfs macro because it was missing the root parameter in the URL to the JSON page?  \n10:56\u00a0<vmassol>\u00a0I don't remember what was the fix but we have the problem on the 7.4.x branch  \n10:56\u00a0<vmassol>\u00a0url I get is http://localhost:8080/xwiki/bin/get/VfsTest/testVfsMacro?sheet=Macros.VFSTreeJSON&&data=children&id=%23  \n10:56\u00a0<vmassol>\u00a0and it's missing the root parameter  \n10:58\u00a0<mflorea>\u00a0the issue I reported is this http://jira.xwiki.org/browse/XWIKI-12989 , and it is caused by the fact that the macro parameters are badly escaped.  \n10:59\u00a0<vmassol>\u00a0oh so you mean the bug is still there? on master too?  \n10:59\u00a0<mflorea>\u00a0if you check the HTML source of the page you'll see that the root param is there but there is some encoding issues  \n10:59\u00a0<mflorea>\u00a0yes  \n10:59\u00a0<vmassol>\u00a0ok then we need to fix it asap because it's a big issue  \n10:59\u00a0<vmassol>\u00a0before 7.4.1 is released  \n10:59\u00a0<vmassol>\u00a0ie before the end of this week  \n10:59\u00a0<mflorea>\u00a0it is planned for 7.4.1  \n11:01\u00a0<Enygma`>\u00a0tmortagne: I believe these tests should have been (re/)moved together with the move of oldrendering in contrib:  \n11:01\u00a0<Enygma`>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-test-ui/lastBuild/org.xwiki.enterprise$xwiki-enterprise-test-ui/testReport/org.xwiki.test.ui/BacklinksTest/testBacklinksCreationSyntax10/  \n11:02\u00a0<ClemensR>\u00a0has left #xwiki  \n11:04\u00a0<tmortagne>\u00a0Enygma`: yes they should  \n11:05\u00a0<tmortagne>\u00a0looking at it  \n11:05\u00a0<tmortagne>\u00a0did you see my message yesterday about jacoco failure ?  \n11:12\u00a0<vmassol>\u00a0evalica: don't know if you've seen it but the meeting app is not build on ci  \n11:13\u00a0<evalica>\u00a0vmassol: yes - I've talked with GD  \n11:13\u00a0<Enygma`>\u00a0tmortagne: yes, I noticed it in the evening. Will get there too, thanks for mentioning it.  \n12:08\u00a0<vmassol>\u00a0ok everyone  \n12:08\u00a0<vmassol>\u00a0we've temporarily disabled edit rights to everyone except admins on xwiki.org  \n12:08\u00a0<vmassol>\u00a0till we clean up the spam mess  \n12:09\u00a0<vmassol>\u00a0hmmm  \n12:09\u00a0<vmassol>\u00a0@Enygma` ?  \n12:09\u00a0<vmassol>\u00a0have you done that for all subwikis?  \n12:10\u00a0<vmassol>\u00a0or just the main wiki?  \n12:10\u00a0<vmassol>\u00a0actually main wiki may be enough for now  \n12:12\u00a0<Enygma`>\u00a0main wiki  \n12:13\u00a0<tmortagne>\u00a0subwikis inherit main wiki righs so we should make sure no right is set in subwikis probably  \n12:14\u00a0<tmortagne>\u00a0(since new right system)  \n12:20\u00a0<evalica>\u00a0has quit  \n12:21\u00a0<Enygma`>\u00a0edit rights seem to work on subwikis  \n12:21\u00a0<Enygma`>\u00a0(using a test user)  \n12:23\u00a0<tmortagne>\u00a0Enygma`: that's because most of them have explicit right set probably  \n12:23\u00a0<Enygma`>\u00a0yes, probably  \n12:23\u00a0<tmortagne>\u00a0and more specific right wins (allow set at wiki level wins over deny set at global level)  \n12:24\u00a0<tmortagne>\u00a0anyway since the issue is only on main wiki right now we can keep it like this  \n12:25\u00a0<sorinello>\u00a0has joined #xwiki  \n12:25\u00a0<Enygma`>\u00a0weird though, since platform and dev don`t have explicit rights for AllGroup, but the deny from main wiki does not propagate to them  \n12:25\u00a0<Enygma`>\u00a0and users are still allowed to edit  \n12:26\u00a0<tmortagne>\u00a0Enygma`: switch the right ui to global  \n12:26\u00a0<Enygma`>\u00a0actually, rights on local groups should not matter too much anyway if the user is a global one (from the main wiki)  \n12:26\u00a0<Enygma`>\u00a0hah, right :)  \n12:27\u00a0<Enygma`>\u00a0was slowly getting there :)  \n12:28\u00a0<tmortagne>\u00a0subwiki inherit main one only since new right system (ok it's starting to old to be called \"new\" but you see what I mean :)) so those explicit right set used to be necessary  \n12:30\u00a0<tmortagne>\u00a0mflorea or Enygma`: I don't remember since when copy is asynchronous, it seems to be the cause or several test failure (the test expecting the copy to be done while it's still running)  \n12:30\u00a0<tmortagne>\u00a0like http://ci.xwiki.org/job/xwiki-enterprise-test-wysiwyg-7.4.x/31/org.xwiki.enterprise$xwiki-enterprise-test-wysiwyg/testReport/org.xwiki.test.wysiwyg/ImageTest/testInsertImageFromPageWithSpecialCharactersInName/  \n12:31\u00a0<Enygma`>\u00a0mflorea: knows about it  \n12:46\u00a0<mflorea>\u00a0tmortagne: yes, I will handle those failures  \n12:50\u00a0<mflorea>\u00a0has quit  \n13:05\u00a0<vmassol>\u00a0looks like a spam user\u2026  \n13:06\u00a0<vmassol>\u00a0@Enygma` we should disable registration too  \n13:06\u00a0<vmassol>\u00a0as otherwise they'll create users but no pages and we won't be able to recognize the users as spam users :)  \n13:10\u00a0<sorinello\\_>\u00a0has joined #xwiki  \n13:10\u00a0<sorinello\\_>\u00a0has quit  \n13:13\u00a0<sorinello>\u00a0has quit  \n13:15\u00a0<sorinello>\u00a0has joined #xwiki  \n13:17\u00a0<mflorea>\u00a0has joined #xwiki  \n13:44\u00a0<evalica>\u00a0has joined #xwiki  \n13:49\u00a0<Enygma`>\u00a0vmassol: was having lunch. Seems like the spam slowed down.  \n13:51\u00a0<tmortagne>\u00a0mflorea: ok thanks  \n13:54\u00a0<vmassol>\u00a0Enygma`: yes, we've had 1 or 2 spam users created  \n13:54\u00a0<vmassol>\u00a0I still have 2 issues to fix before I can run my script but I need to go in a meeting in 5 mn  \n15:09\u00a0<msmeria>\u00a0has quit  \n16:05\u00a0<tmortagne>\u00a0has quit  \n16:22\u00a0<vmassol>\u00a0Enygma`: I think we should block registration  \n16:22\u00a0<vmassol>\u00a0don't you think?  \n16:22\u00a0<vmassol>\u00a0I see several users were created (most likely spam users)  \n16:23\u00a0<vmassol>\u00a0or we say we don't care till the user is used to create spam  \n16:29\u00a0<tmortagne>\u00a0has joined #xwiki  \n16:35\u00a0<mflorea>\u00a0does anyone have Postgres SQL with XWiki 7.2+? I need to test a query.  \n16:42\u00a0<Enygma`>\u00a0vmassol: registration blocked, updating the notice to mention that too  \n16:58\u00a0<vmassol>\u00a0guys, ready for me try my script? :)  \n17:11\u00a0<vmassol>\u00a0muted the bot...  \n17:12\u00a0<tmortagne>\u00a0thanks :)  \n17:15\u00a0<vmassol>\u00a0ok first few thousand pages removed  \n17:15\u00a0<vmassol>\u00a0working on next batch now  \n17:16\u00a0<vmassol>\u00a0hmmm I forgot one thing  \n17:16\u00a0<vmassol>\u00a0I've remove the AS but I forgot that deleting the page will also add new entries in the AS....  \n17:33\u00a0<vmassol>\u00a0ok I've manually removed the AS entries...  \n17:33\u00a0<vmassol>\u00a0now need to update my script...  \n17:40\u00a0<gdelhumeau>\u00a0does anybody knows why $services.rendering.render($services.rendering.parse('{{info}}Hello World{{/info}}', 'xwiki/2.1'), 'xhtml/1.0')  \n17:40\u00a0<gdelhumeau>\u00a0returns an empty string?  \n17:44\u00a0<vmassol>\u00a0does it execute the macro?  \n17:44\u00a0<vmassol>\u00a0from what I see in the code it doesn't seem so  \n17:47\u00a0<vmassol>\u00a0ok I'll go on and I'll handle the AS event after, by removing all events of type delete by me and for today  \n17:49\u00a0<gdelhumeau>\u00a0vmassol: I don't think it executes the macro  \n17:50\u00a0<vmassol>\u00a0gdelhumeau: that's why you get an empty string  \n17:50\u00a0<gdelhumeau>\u00a0ok  \n17:50\u00a0<gdelhumeau>\u00a0how can I make it executing the macro?  \n17:50\u00a0<vmassol>\u00a0you can't using this api  \n17:51\u00a0<vmassol>\u00a0it's missing\u2026  \n17:52\u00a0<gdelhumeau>\u00a0too bad  \n17:53\u00a0<gdelhumeau>\u00a0so I need to do an ajax request to get the rendering of some xwiki/2.1 code with macros?  \n17:53\u00a0<vmassol>\u00a0you can use getRenderedContent()  \n17:53\u00a0<vmassol>\u00a0document.getRenderedContent(...)  \n17:54\u00a0<gdelhumeau>\u00a0but this is not a document  \n17:54\u00a0<tmortagne>\u00a0yes doing just parse and render don't execute tx  \n17:54\u00a0<gdelhumeau>\u00a0it's an arbitrary code that I get from an object  \n17:55\u00a0<tmortagne>\u00a0if it's in an object you can use $doc.display then  \n17:57\u00a0<gdelhumeau>\u00a0but I am generating a JSON file  \n17:57\u00a0<gdelhumeau>\u00a0so outputSyntax=false  \n17:57\u00a0<gdelhumeau>\u00a0but I want this field to be rendered as HTML in the JSON file  \n18:03\u00a0<tmortagne>\u00a0$doc.display parse and execute the property content and gived you html which is what you first asked for  \n18:03\u00a0<tmortagne>\u00a0and more importantly it will do it with the right author  \n18:04\u00a0<tmortagne>\u00a0becasue executing some content you don't know with the right of a page that most probably have PR is not the safest idea  \n18:05\u00a0<woshilapin>\u00a0has quit  \n18:11\u00a0<gdelhumeau>\u00a0I see  \n18:41\u00a0<gdelhumeau>\u00a0has quit  \n19:06\u00a0<tmortagne>\u00a0has quit  \n19:07\u00a0<KermitTheFragger>\u00a0has quit  \n19:09\u00a0<mflorea>\u00a0has quit  \n19:12\u00a0<woshilapin>\u00a0has joined #xwiki  \n19:23\u00a0<woshilapin>\u00a0has quit  \n19:47\u00a0<abusenius>\u00a0has joined #xwiki  \n20:09\u00a0<xwikibot>\u00a0has joined #xwiki  \n21:02\u00a0<abusenius>\u00a0has quit  \n21:14\u00a0<woshilapin>\u00a0has joined #xwiki  \n21:23\u00a0<woshilapin>\u00a0has quit  \n21:57\u00a0<Slashman>\u00a0has quit  \n22:25\u00a0<evalica>\u00a0has quit  \n22:43\u00a0<woshilapin>\u00a0has joined #xwiki  \n22:53\u00a0<woshilapin>\u00a0has quit  \n23:07\u00a0<Enygma`>\u00a0has quit  \n23:51\u00a0<vmassol>\u00a0has quit\n"}