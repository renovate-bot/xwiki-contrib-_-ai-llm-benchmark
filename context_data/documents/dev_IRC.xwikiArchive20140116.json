{"id": "dev:IRC.xwikiArchive20140116", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140116", "title": "IRC Archive for channel #xwiki on 16 January 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has joined #xwiki  \n00:38\u00a0<vmassol>\u00a0has quit  \n00:53\u00a0<abusenius>\u00a0has quit  \n01:15\u00a0<polx>\u00a0has quit  \n01:34\u00a0<vmassol>\u00a0has joined #xwiki  \n01:39\u00a0<vmassol>\u00a0has quit  \n01:58\u00a0<mflorea>\u00a0has quit  \n02:35\u00a0<vmassol>\u00a0has joined #xwiki  \n02:40\u00a0<vmassol>\u00a0has quit  \n03:36\u00a0<vmassol>\u00a0has joined #xwiki  \n03:41\u00a0<vmassol>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:36\u00a0<vmassol>\u00a0has joined #xwiki  \n04:41\u00a0<vmassol>\u00a0has quit  \n05:37\u00a0<vmassol>\u00a0has joined #xwiki  \n05:42\u00a0<vmassol>\u00a0has quit  \n06:03\u00a0<Denis>\u00a0has quit  \n06:38\u00a0<vmassol>\u00a0has joined #xwiki  \n06:38\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n06:42\u00a0<vmassol>\u00a0has quit  \n07:19\u00a0<andreeapopescu>\u00a0has quit  \n07:39\u00a0<vmassol>\u00a0has joined #xwiki  \n07:44\u00a0<vmassol>\u00a0has quit  \n07:53\u00a0<evalica>\u00a0has joined #xwiki  \n08:04\u00a0<vmassol>\u00a0has joined #xwiki  \n08:18\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:31\u00a0<Sidali>\u00a0has joined #xwiki  \n08:38\u00a0<mflorea>\u00a0has joined #xwiki  \n08:41\u00a0<msmeria>\u00a0has joined #xwiki  \n08:41\u00a0<msmeria>\u00a0has quit  \n08:47\u00a0<msmeria>\u00a0has joined #xwiki  \n08:59\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n08:59\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n09:06\u00a0<lucaa>\u00a0has joined #xwiki  \n09:09\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:10\u00a0<lucaa>\u00a0has quit  \n09:11\u00a0<sburjan>\u00a0has joined #xwiki  \n09:11\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:12\u00a0<lucaa>\u00a0has joined #xwiki  \n09:20\u00a0<Denis>\u00a0has joined #xwiki  \n09:21\u00a0<cjd>\u00a0has joined #xwiki  \n09:30\u00a0<lucaa>\u00a0has quit  \n09:41\u00a0<vmassol>\u00a0good morning xwiki lovers!  \n09:41\u00a0<vmassol>\u00a0today is BFD, yeah :) Sending reminder email in a few minutes  \n09:41\u00a0<vmassol>\u00a082 bugs to crush  \n09:48\u00a0<lucaa>\u00a0has joined #xwiki  \n09:48\u00a0<gdelhumeau>\u00a0Guys, we do not have XWikiAllGroup by default in subwikis anymore  \n09:49\u00a0<gdelhumeau>\u00a0should we create an empty XWikiAllGroup page for subwiki XARs?  \n09:49\u00a0<vmassol>\u00a0do we need this only for subwikis with local users right?  \n09:49\u00a0<vmassol>\u00a0s/right//  \n09:49\u00a0<gdelhumeau>\u00a0no  \n09:49\u00a0<gdelhumeau>\u00a0we need it also to know which users are members of that subwiki  \n09:50\u00a0<vmassol>\u00a0but for workspaces type subwikis there are no members in subwikis  \n09:50\u00a0<lucaa>\u00a0vmassol: it's for putting global users in a local group to give them rights  \n09:50\u00a0<vmassol>\u00a0oh  \n09:51\u00a0<vmassol>\u00a0ok  \n09:51\u00a0<vmassol>\u00a0then I don't really understand the question from gdelhumeau  \n09:51\u00a0<vmassol>\u00a0it seems a huge regression  \n09:51\u00a0<vmassol>\u00a0and we need to fix it by doing what we were doing before  \n09:51\u00a0<vmassol>\u00a0I don't really undestans why we removes XWikiAllGroup  \n09:51\u00a0<gdelhumeau>\u00a0by default, if you don't add any member, the XWikiAllGroup page is not created  \n09:51\u00a0<vmassol>\u00a0\\*removed  \n09:52\u00a0<vmassol>\u00a0but we were providing such a page before  \n09:52\u00a0<vmassol>\u00a0why remove it?  \n09:52\u00a0<gdelhumeau>\u00a0before, this page was part of the administration-ui  \n09:52\u00a0<vmassol>\u00a0yes that's tehcnical  \n09:52\u00a0<vmassol>\u00a0but why remove it?  \n09:52\u00a0<gdelhumeau>\u00a0we have moved it to enterprise-admin-user  \n09:52\u00a0<vmassol>\u00a0from the pacaging  \n09:52\u00a0<vmassol>\u00a0packaging  \n09:52\u00a0<vmassol>\u00a0(for subwikis)  \n09:52\u00a0<gdelhumeau>\u00a0which is used for mainwiki only  \n09:52\u00a0<vmassol>\u00a0again  \n09:53\u00a0<vmassol>\u00a0why did you remove yuou from the packaging for subwikis?  \n09:53\u00a0<vmassol>\u00a0s/yuou/it  \n09:53\u00a0<gdelhumeau>\u00a0I just want to know if I should create a new XWikiAllGroup in the subwiki xars :)  \n09:53\u00a0<vmassol>\u00a0no that's not the way  \n09:53\u00a0<vmassol>\u00a0if you removed it  \n09:53\u00a0<gdelhumeau>\u00a0because these groups were not empty  \n09:53\u00a0<vmassol>\u00a0it means you had a reason  \n09:53\u00a0<vmassol>\u00a0what was that reason?  \n09:53\u00a0<gdelhumeau>\u00a0the contained XWiki.Admin which does not exists anymroe in subwiki  \n09:53\u00a0<vmassol>\u00a0ok so you made a mistake is that it?  \n09:54\u00a0<gdelhumeau>\u00a0maybe  \n09:54\u00a0<vmassol>\u00a0I don't get it  \n09:54\u00a0<vmassol>\u00a0you say:  \n09:54\u00a0<vmassol>\u00a01) this page is needed as otherwise it doesn't work  \n09:54\u00a0<vmassol>\u00a02) you removed it  \n09:54\u00a0<vmassol>\u00a0I conclude that you created a regression  \n09:54\u00a0<vmassol>\u00a0why maybe?  \n09:54\u00a0<vmassol>\u00a0what's the doubt?  \n09:54\u00a0<gdelhumeau>\u00a0I didn't say 1)  \n09:54\u00a0<vmassol>\u00a0you said it's needed to know which memebers are part of the subwikis  \n09:54\u00a0<vmassol>\u00a0just above  \n09:55\u00a0<gdelhumeau>\u00a0yes, but when you add a member, then it creates the group  \n09:55\u00a0<vmassol>\u00a0I still don't get it  \n09:55\u00a0<vmassol>\u00a0what's the problem? :)  \n09:55\u00a0<vmassol>\u00a0it works or it doesn't work  \n09:55\u00a0<vmassol>\u00a0?  \n09:55\u00a0<gdelhumeau>\u00a0I have a case with a subwiki does not have any user  \n09:55\u00a0<Denis>\u00a0vmassol: the question is do we what XWikiAllGroup even if there is no member of the workspace (the farm use case for example)  \n09:55\u00a0<gdelhumeau>\u00a0so there is no XWiki.XWikiAllGroup page in it  \n09:56\u00a0<gdelhumeau>\u00a0Denis: exactly  \n09:56\u00a0<vmassol>\u00a0Denis: that's not a question  \n09:56\u00a0<vmassol>\u00a0that's a consequence  \n09:56\u00a0<vmassol>\u00a0we need to know th eproblem first  \n09:56\u00a0<gdelhumeau>\u00a0actually, it breaks something, but I have different solution to fix it  \n09:56\u00a0<vmassol>\u00a0so my (stupid) answer is: if it doesn't break anything then we don't need a XWikiAllGroup page  \n09:57\u00a0<Denis>\u00a0vmassol: the consequence is that there is no XWikiAllGroup in subwiki anymore, but there no user anymore as well at the beginning  \n09:57\u00a0<vmassol>\u00a0and if it does we need one  \n09:57\u00a0<gdelhumeau>\u00a0http://jira.xwiki.org/browse/XWIKI-9867  \n09:57\u00a0<vmassol>\u00a0gdelhumeau: are you saying you don't know the consequences of not having a XWikiAllGroup?  \n09:57\u00a0<vmassol>\u00a0is that your question?  \n09:57\u00a0<gdelhumeau>\u00a0vmassol: yes, I don't know them  \n09:58\u00a0<vmassol>\u00a0ok got it now\u2026  \n09:58\u00a0<Denis>\u00a0this is not just a simple group, since we have the implied version of it, and we may need to put some right in a wiki, I do we do without it ?  \n09:58\u00a0<vmassol>\u00a0I thought you knew  \n09:58\u00a0<gdelhumeau>\u00a0I know 1 consequence, at least, which is XWIKI-9867, but I can fix it without adding an empty XWiki.XWikiAllGroup page...  \n09:58\u00a0<vmassol>\u00a0tha safest is to have one with just one empty entry in it I believe  \n09:58\u00a0<tmortagne>\u00a0the real thing to do IMO is to make XWikiAllGroup virtual all the time and stop with this maintaining nonsense  \n09:58\u00a0<vmassol>\u00a0tmortagne: sure but that's a step beyond. Are we prepared to risk this in 5.4 in a stabilization release?  \n09:59\u00a0<vmassol>\u00a0personally I know I don't master the consequences enough  \n09:59\u00a0<tmortagne>\u00a0regarding XWIKI-9867 XWikiAllGroup should not contain main wiki users, it does not make any sense  \n09:59\u00a0<Denis>\u00a0even when virtual, doesn't it be needed for being available in right UI, and other situation I do not even think about ?  \n10:00\u00a0<tmortagne>\u00a0if it's virtual all the time it should be handled by the UI, like it's done for guest user  \n10:00\u00a0<tmortagne>\u00a0i.e. a special group  \n10:02\u00a0<Denis>\u00a0ok, this is seems dangerous in a stabilization release, no ?  \n10:02\u00a0<gdelhumeau>\u00a0tmortagne: it is how workspaces works: the XWikiAllGroup contains the main users that are considered as members  \n10:03\u00a0<gdelhumeau>\u00a0Denis: yes, probably  \n10:05\u00a0<Denis>\u00a0what afraid me is not that it is managed to contained what it should, since it is quite easy, any logged user should be reported to be in allgroup, but more the places where we query the list of available groups to list them for some purpose like the UI right (in particular since we know that one should be completely rewritten in 6.x)  \n10:09\u00a0<tmortagne>\u00a0gdelhumeau: does not make it good  \n10:09\u00a0<tmortagne>\u00a0XWikiAllGroup means the wiki users  \n10:17\u00a0<Denis>\u00a0tmortagne, gdelhumeau: is there a difference between your views of XWikiAllGroup ?  \n10:17\u00a0<gdelhumeau>\u00a0it seems  \n10:18\u00a0<tmortagne>\u00a0Denis: putting different wiki users in XWikiAllGroup is a nonsense to me  \n10:18\u00a0<Denis>\u00a0tmortagne: do you exclude main wiki user from XWikiAllGroup then ?  \n10:19\u00a0<gdelhumeau>\u00a0tmortagne: easier to set rights inside the wiki, XWikiAllGroup concerns all the users than are in the wiki, global and local  \n10:20\u00a0<tmortagne>\u00a0XWikiAllGroup means local users and that's what it means when it's virtual, if you enable virtual XWikiAllGroup workspaces will be totally broken it seems which means workspace goes against a standard feature  \n10:31\u00a0<gdelhumeau>\u00a0to fix 5.4, I propose to add an empty XWikiAllGroup (and XWikiAdminGroup)  \n10:31\u00a0<gdelhumeau>\u00a0any objection?  \n10:31\u00a0<tmortagne>\u00a0add it where ?  \n10:31\u00a0<gdelhumeau>\u00a0xwiki-enterprise-ui-wiki  \n10:32\u00a0<tmortagne>\u00a0it's the quickest  \n10:58\u00a0<vmassol>\u00a0gdelhumeau: http://jira.xwiki.org/browse/XWIKI-9886 looks like a blocker to me  \n10:59\u00a0<vmassol>\u00a0since it means a feature that was working before isn't anymore  \n10:59\u00a0<vmassol>\u00a0do you agree?  \n11:00\u00a0<vmassol>\u00a0wow more and more webstandards failures: http://ci.xwiki.org/job/xwiki-enterprise-test-webstandards/lastBuild/testReport/  \n11:01\u00a0<vmassol>\u00a0gdelhumeau: I think this is for you: http://ci.xwiki.org/job/xwiki-enterprise-test-webstandards/lastBuild/org.xwiki.enterprise$xwiki-enterprise-test-webstandards/testReport/org.xwiki.test.webstandards.framework/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_space\\_XWiki\\_\\_page\\_XWikiServerXwiki\\_executed\\_with\\_credentials\\_Admin\\_admin/  \n11:01\u00a0<vmassol>\u00a0gdelhumeau: also it seems the problem of yesterday is still there: http://ci.xwiki.org/job/xwiki-enterprise-test-webstandards/lastBuild/org.xwiki.enterprise$xwiki-enterprise-test-webstandards/testReport/org.xwiki.test.webstandards.framework/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_\\_xwiki\\_bin\\_view\\_XWiki\\_Admin\\_category\\_preferences\\_executed\\_with\\_credentials\\_Admin\\_admin/  \n11:01\u00a0<gdelhumeau>\u00a0vmassol: yes  \n11:02\u00a0<gdelhumeau>\u00a0vmassol: but I have fixed it this morning  \n11:02\u00a0<tmortagne>\u00a0vmassol: it's older than 5.3 but before it was only with workspaces  \n11:02\u00a0<gdelhumeau>\u00a0it's like it did not re-rebuild  \n11:02\u00a0<tmortagne>\u00a0gdelhumeau: no you did not  \n11:02\u00a0<tmortagne>\u00a0forget that tough your were talking about the jira issue  \n11:02\u00a0<gdelhumeau>\u00a0https://github.com/xwiki/xwiki-platform/commit/8a7788a7829f7d9caaa4e560cb45f7cdf59bda95  \n11:02\u00a0<gdelhumeau>\u00a0ok  \n11:03\u00a0<gdelhumeau>\u00a0tmortagne: that means we need an XWikiMemberGroup now  \n11:04\u00a0<gdelhumeau>\u00a0and a migrator  \n11:04\u00a0<tmortagne>\u00a0gdelhumeau: probably yes  \n11:04\u00a0<tmortagne>\u00a0don't have much other idea  \n11:04\u00a0<gdelhumeau>\u00a0is it safe for 5.4???  \n11:04\u00a0<gdelhumeau>\u00a0it will breaks a lot of rights  \n11:05\u00a0<cjd>\u00a0has quit  \n11:05\u00a0<tmortagne>\u00a0depends of the point of view, it's safer than nothing when virtual XWikiAllGroup is enabled :)  \n11:05\u00a0<tmortagne>\u00a0but yes it's a dangerous change  \n11:05\u00a0<gdelhumeau>\u00a0I didn't knew about that virtual thing...  \n11:05\u00a0<tmortagne>\u00a0it won't break any right if the right are updated by the migrator too  \n11:06\u00a0<tmortagne>\u00a0i.e. putting XWikiMemberGroup everywhere XWikiAllGroup is probably  \n11:06\u00a0<Sidali>\u00a0has quit  \n11:06\u00a0<gdelhumeau>\u00a0by giving the same right to XWikiMemberGroup as for XWikiAllGroup?  \n11:07\u00a0<gdelhumeau>\u00a0I don't understand why xwiki-enterprise-test-webstandards is still failing  \n11:07\u00a0<tmortagne>\u00a0maybe not everything has been built  \n11:15\u00a0<Sidali>\u00a0has joined #xwiki  \n11:16\u00a0<tmortagne>\u00a0Denis: XWIKI-9887 sounds like something that would need your expertise  \n11:17\u00a0<Denis>\u00a0tmortagne: I know why, not how it could be fixed easily however  \n11:19\u00a0<Denis>\u00a0tmortagne: looks like we need a deps between the wiki descriptor and the wiki rights\u2026  \n11:21\u00a0<cjd>\u00a0has joined #xwiki  \n11:27\u00a0<tmortagne>\u00a0Denis: how does the right system get the first owner ?  \n11:27\u00a0<tmortagne>\u00a0it has to get it from descriptor already  \n11:28\u00a0<tmortagne>\u00a0(directly or indirectly)  \n11:28\u00a0<tmortagne>\u00a0so there is some place in the right module that knows about it  \n11:29\u00a0<Denis>\u00a0sure, the rule reader inject it  \n11:30\u00a0<Denis>\u00a0the problem is that the deps for the wiki is XWikiPrefs, and not the wiki descriptor  \n11:30\u00a0<Denis>\u00a0the question is, do we done it right to have this implemented that way, why does not the owner just being set in XWikiPreferences ?  \n11:31\u00a0<msmeria>\u00a0has quit  \n11:31\u00a0<polx>\u00a0has joined #xwiki  \n11:32\u00a0<Denis>\u00a0currently the security module has absolutely no idea about that specific stuff  \n11:32\u00a0<tmortagne>\u00a0Denis: the point was to make impossible to lose right whatever you do on your subwiki, putting the owner on the subwiki is simply useless  \n11:32\u00a0<cjd>\u00a0oh Denis did you see the last crash/  \n11:32\u00a0<cjd>\u00a0?  \n11:32\u00a0<cjd>\u00a0xwiki.org  \n11:32\u00a0<cjd>\u00a01/14/2014 05:13PM  \n11:33\u00a0<cjd>\u00a0lots of threads blockes on securityCache  \n11:33\u00a0<cjd>\u00a0I'm not sure if that's a problem or not  \n11:36\u00a0<cjd>\u00a0looks like 36 threads are blocked on that ReadWriteLock at the time when the wiki was killed  \n11:37\u00a0<cjd>\u00a0But I can't tell who's holding it and what their status is because the lock doesn't print itself in the stack trace  \n11:42\u00a0<gdelhumeau>\u00a0now we have webstandard fails in Blog and Search  \n11:42\u00a0<vmassol>\u00a0anyone understand why I get the following with checkstyle:  \n11:42\u00a0<vmassol>\u00a0AbstractXHTMLImageTypeRenderer.java:62:5: Variable access definition in wrong order.  \n11:42\u00a0<vmassol>\u00a0for:  \n11:42\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0@Inject  \n11:42\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0protected ComponentManager componentManager;  \n11:42\u00a0<vmassol>\u00a0?  \n11:43\u00a0<vmassol>\u00a062:5 points to \"@Inject\"  \n11:44\u00a0<tmortagne>\u00a0\"Variable access definition in wrong order.\" means that you don't follow public, protected, private order  \n11:44\u00a0<vmassol>\u00a0ok fixed  \n11:44\u00a0<vmassol>\u00a0thanks  \n11:44\u00a0<tmortagne>\u00a0it's not about the variable itself  \n11:44\u00a0<vmassol>\u00a0I mixed up the messages indeed  \n11:46\u00a0<Denis>\u00a0cjd: seen one of them runnable, which means it could be just normal  \n11:48\u00a0<cjd>\u00a0do you take out the lock and do anything blocking like hit the db ?  \n11:49\u00a0<cjd>\u00a0I think we should consider setting up a special lock which blows up if you try to do blocking operations while holding it  \n11:49\u00a0<cjd>\u00a0b/c it's too easy to go hit the db which might have a 30 second timeout while locking out the whole wiki  \n11:50\u00a0<Denis>\u00a0no, I don't, this lock is there to avoid access to inconsistant state of the cache only  \n11:50\u00a0<cjd>\u00a0hmm that's really weird then because lots of threads are blocking on it at the same time  \n11:51\u00a0<cjd>\u00a0it's definitely a perf bottleneck  \n11:55\u00a0<Denis>\u00a0cjd: it only blocks read/write access while a thread is modifying the cache, it seems quite difficult to be more fair  \n11:56\u00a0<cjd>\u00a0how big is the cache?  \n11:56\u00a0<cjd>\u00a0in linux they will often use a pair of caches and modify the cold one so the hot one can still be read  \n11:57\u00a0<cjd>\u00a0I suppose we can wait and see if this is a common bottleneck, maybe this was just a freak occurence  \n11:57\u00a0<Denis>\u00a0cjd: we already optimize by doing only atomic write for a single entry, while a thread may have to add a tree of them  \n11:58\u00a0<cjd>\u00a0/nod  \n12:00\u00a0<cjd>\u00a0I'm going on an assumption that xinit crashed xwiki because the threadpool was exhausted so it could not get a thread to do the http request  \n12:00\u00a0<cjd>\u00a0perhaps I'm just wrong and something totally different happened during the http request  \n12:00\u00a0<msmeria>\u00a0has joined #xwiki  \n12:01\u00a0<Denis>\u00a0cjd: a thread may have to retry its write operation if another one intend to do opposite operation, but this should be so unsual, that we had prefer this to limit the lock as much as possible  \n12:02\u00a0<Denis>\u00a0cjd: so we do our best to make fast read and slow write  \n12:02\u00a0<cjd>\u00a0sounds like you're doing the right thing so the fact that the majority of requests are blocked there is kind of a mystery...  \n12:02\u00a0<Denis>\u00a0cjd: I agree, this looks curious  \n12:10\u00a0<Denis>\u00a0cjd: it would be interesting to check that the size of the cache is well chosen, because suffering of too much eviction could increase the removal operation that is atomic for the tree, not a node, and could really impact the performance of the cache  \n12:11\u00a0<cjd>\u00a0how big is it (order of magnitude) ?  \n12:12\u00a0<cjd>\u00a010 entries? 100? 1000? 10000? 1000000?  \n12:13\u00a0<evalica>\u00a0has quit  \n12:15\u00a0<Denis>\u00a0default is 500  \n12:15\u00a0<msmeria>\u00a0has quit  \n12:15\u00a0<cjd>\u00a0why not use a ConcurrentHashMap ?  \n12:15\u00a0<cjd>\u00a0or maybe just try it and see if it performs better  \n12:16\u00a0<cjd>\u00a0they have some kind of buckets so there is no global lock for the map  \n12:16\u00a0<Kebir>\u00a0has joined #xwiki  \n12:18\u00a0<Denis>\u00a0cjd: the cache is a network, so it is very difficult to cut in parts  \n12:20\u00a0<msmeria>\u00a0has joined #xwiki  \n12:20\u00a0<Denis>\u00a0cjd: keeping the default of 500 entries for a large farm is probably not a good idea, 500 entries is not that much, maybe we should also increase it, because 500 entries in the cache does not means 500 access, only a fraction of it, since the cache keep also security rules  \n12:21\u00a0<cjd>\u00a0ahh so the cache is shared across a cluster?  \n12:21\u00a0<Denis>\u00a0cjd: we need a cache that evict using a LRU algo, so that we keep what is mostly used  \n12:22\u00a0<cjd>\u00a0lru is not the most efficient <digression>  \n12:22\u00a0<Denis>\u00a0cjd: the cache is not cluster aware, but it is shared by all wikis in a farm  \n12:22\u00a0<gdelhumeau>\u00a0if we have both XWikiAllGroup and XWikiMemberGroup, should we consider local users as members of the subwiki?  \n12:22\u00a0<cjd>\u00a0then what is the problem with using ConcurrentHashMap ?  \n12:23\u00a0<Denis>\u00a0cjd: due to the way the cache is used, LRU should be very efficient here  \n12:23\u00a0<Denis>\u00a0cjd: ConcurrentHashMap is not a cache  \n12:23\u00a0<cjd>\u00a0what's the difference?  \n12:25\u00a0<Denis>\u00a0a cache is limited in size, manage eviction, is configurable, has statistics reported in JMX, etc...  \n12:25\u00a0<cjd>\u00a0and slow  \n12:25\u00a0<cjd>\u00a0:P  \n12:25\u00a0<Denis>\u00a0but faster than no cache :)  \n12:26\u00a0<cjd>\u00a0questionable ;)  \n12:26\u00a0<cjd>\u00a0anyway that lock probably should get some attention because it seems to be bottlenecking xwiki.org  \n12:27\u00a0<Denis>\u00a0first keeping an eye on the cache stats would be good  \n12:27\u00a0<Denis>\u00a0vmassol: do we have javamelody on xwiki.org ?  \n12:27\u00a0<vmassol>\u00a0mfyes  \n12:27\u00a0<vmassol>\u00a0yes  \n12:28\u00a0<Denis>\u00a0how could I reach it ?  \n12:29\u00a0<vmassol>\u00a0http://www.xwiki.org/xwiki/monitoring  \n12:29\u00a0<vmassol>\u00a0(sent you the username/pwd privately)  \n12:31\u00a0<polx>\u00a0has quit  \n12:38\u00a0<vmassol>\u00a0mflorea: got a present for you coming up in a few minutes :)  \n12:39\u00a0<mflorea1>\u00a0has joined #xwiki  \n12:40\u00a0<mflorea>\u00a0has quit  \n12:48\u00a0<evalica>\u00a0has joined #xwiki  \n12:52\u00a0<polx>\u00a0has joined #xwiki  \n12:53\u00a0<Kebir>\u00a0has quit  \n12:57\u00a0<polx>\u00a0has quit  \n13:00\u00a0<Kebir>\u00a0has joined #xwiki  \n13:02\u00a0<vmassol>\u00a0mflorea1: present coming!  \n13:02\u00a0<vmassol>\u00a0so the present is that http://jira.xwiki.org/browse/XRENDERING-278 is now implemented  \n13:02\u00a0<mflorea1>\u00a0cool! :)  \n13:03\u00a0<mflorea1>\u00a0and thanks!  \n13:03\u00a0<vmassol>\u00a0I coded most of it yesteday in the train and finished it this morning  \n13:06\u00a0<mflorea1>\u00a0:)  \n13:07\u00a0<mflorea1>\u00a0lunch, back in 1h  \n13:13\u00a0<mflorea1>\u00a0has quit  \n13:16\u00a0<evalica1>\u00a0has joined #xwiki  \n13:16\u00a0<evalica>\u00a0has quit  \n13:17\u00a0<evalica1>\u00a0is now known as <evalica>  \n13:17\u00a0<sdumitriu>\u00a0has quit  \n13:19\u00a0<sdumitriu>\u00a0has joined #xwiki  \n13:23\u00a0<lucaa>\u00a0has quit  \n13:23\u00a0<evalica>\u00a0has quit  \n13:23\u00a0<vmassol>\u00a0tmortagne: hope it's ok to change the spec for XWiki Syntax 2.1. I don't fully remember what was our conclusion to the email thread, trying to find it now  \n13:24\u00a0<msmeria>\u00a0has quit  \n13:24\u00a0<sburjan>\u00a0has quit  \n13:27\u00a0<vmassol>\u00a0found it: http://markmail.org/thread/vw3derowozijqalr reading no  \n13:27\u00a0<vmassol>\u00a0now  \n13:34\u00a0<evalica>\u00a0has joined #xwiki  \n13:34\u00a0<vmassol>\u00a0actually more recent thread: http://markmail.org/thread/t2wb2xq7534qsshg  \n13:41\u00a0<msmeria>\u00a0has joined #xwiki  \n13:42\u00a0<vmassol>\u00a0ok finished reading\u2026 It seems we kind of agreed that it was ok to break backward compatibility by mentioning it in the RN (and possibly having some configuration option to ignore some type prefixes - this was suggsted by Denis). Sending a quick vote  \n13:44\u00a0<vmassol>\u00a0ah no I'm fine  \n13:44\u00a0<vmassol>\u00a0:)  \n13:44\u00a0<vmassol>\u00a0hmm nope  \n13:44\u00a0<vmassol>\u00a0forget that  \n13:46\u00a0<msmeria>\u00a0has quit  \n13:46\u00a0<evalica>\u00a0has quit  \n13:54\u00a0<polx>\u00a0has joined #xwiki  \n13:58\u00a0<vmassol>\u00a0sent  \n14:02\u00a0<polx>\u00a0has quit  \n14:09\u00a0<sburjan>\u00a0has joined #xwiki  \n14:09\u00a0<msmeria>\u00a0has joined #xwiki  \n14:09\u00a0<zenzla>\u00a0has joined #xwiki  \n14:18\u00a0<evalica>\u00a0has joined #xwiki  \n14:20\u00a0<lucaa>\u00a0has joined #xwiki  \n14:22\u00a0<vmassol1>\u00a0has joined #xwiki  \n14:23\u00a0<vmassol>\u00a0has quit  \n14:26\u00a0<sburjan>\u00a0has quit  \n14:26\u00a0<sburjan>\u00a0has joined #xwiki  \n14:33\u00a0<polx>\u00a0has joined #xwiki  \n14:37\u00a0<polx>\u00a0has quit  \n14:39\u00a0<polx>\u00a0has joined #xwiki  \n14:45\u00a0<cjd>\u00a0has quit  \n14:46\u00a0<cjd>\u00a0has joined #xwiki  \n15:00\u00a0<msmeria>\u00a0gdelhumeau: hi  \n15:01\u00a0<gdelhumeau>\u00a0msmeria: hi  \n15:01\u00a0<msmeria>\u00a0should the main wiki activity stream display activity from the rest of the subwikis or not ?  \n15:01\u00a0<gdelhumeau>\u00a0I know we have an issue about this  \n15:02\u00a0<gdelhumeau>\u00a0actually it is an improvement: http://jira.xwiki.org/browse/XWIKI-9347  \n15:03\u00a0<msmeria>\u00a0gdelhumeau: I knew there was smth about it. thanks :)  \n15:06\u00a0<mflorea>\u00a0has joined #xwiki  \n15:11\u00a0<gdelhumeau>\u00a0Guys, I would like to have your opinion on http://jira.xwiki.org/browse/XWIKI-9886  \n15:11\u00a0<polx>\u00a0has quit  \n15:23\u00a0<Denis>\u00a0cjd, vmassol1, tmortagne, sburjan, mflorea, sdumitriu, gdelhumeau, msmeria, \u2026: I am about to restart XWiki.org to activate some statistics on the security cache, any inconvenience ?  \n15:23\u00a0<vmassol1>\u00a0ok for me  \n15:23\u00a0<gdelhumeau>\u00a0nope  \n15:23\u00a0<cjd>\u00a0ok  \n15:23\u00a0<sdumitriu>\u00a0Go ahead  \n15:25\u00a0<sburjan>\u00a0OK also on my side  \n15:25\u00a0<msmeria>\u00a0fine by me  \n15:27\u00a0<mflorea>\u00a0fine with me also  \n15:28\u00a0<tmortagne>\u00a0go  \n15:29\u00a0<Denis>\u00a0restarting\u2026  \n15:33\u00a0<xwikibot>\u00a0has joined #xwiki  \n15:38\u00a0<gdelhumeau>\u00a0can I put XWikiAllGroup as a member of XWikiMemberGroup?  \n15:38\u00a0<gdelhumeau>\u00a0then I update all rights concerning XWikiAllGroup to concern XWikiMemberGroup instead  \n15:42\u00a0<vmassol>\u00a0tmortagne: are you 0 or -1 for comitting in 5.4 the suport for \"data:\"?  \n15:43\u00a0<vmassol>\u00a0I'm about to leave it and document it but I'd like to know first. Anyone against it?  \n15:43\u00a0<vmassol>\u00a0(with the check I feel it's safe)  \n15:43\u00a0<tmortagne>\u00a0vmassol: -0, I'm surprised you fight to introduce something you consider yourself as a breackage in 5.4  \n15:44\u00a0<tmortagne>\u00a0your always the first one to tell people to not do it  \n15:44\u00a0<vmassol>\u00a0I don't really fight, it's just that 1) I realized late it was a potential breakage but with the check it isn't anymore and 2) generally speaking it's an addition of a new type so it shouldn't change anything that exists and thus it shouldn't be risky  \n15:45\u00a0<vmassol>\u00a0so I agree that if I had thought about it before I wouldn't have started working on it yesterday in the train :)  \n15:45\u00a0<vmassol>\u00a0now history has shown that if you don't commit stuff when it's done, it doesn't get comitted before a long time  \n15:45\u00a0<vmassol>\u00a0(as with the \"user:\" support which still isn't there)  \n15:46\u00a0<vmassol>\u00a0so it's a chance to get it in and have nice copy paste in wysiwyg editor that's all  \n15:46\u00a0<vmassol>\u00a0but if anyone is strongly against I'll rollback  \n15:48\u00a0<KermitTheFragger>\u00a0has quit  \n15:50\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n15:51\u00a0<Denis>\u00a0vmassol: since it is in, I would keep it, but, you shoud IMO provide a workaround for people that have a wiki named \"data\", this is why I have suggested the configuration parameter that allow to exclude a prefix. This is mainly a migration issue.  \n15:52\u00a0<Denis>\u00a0else, you introduce a possible breakage, and for a stabilisation release, it does not look so good  \n15:52\u00a0<vmassol>\u00a0Denis: read my last answers  \n15:53\u00a0<vmassol>\u00a0there's a check now  \n15:53\u00a0<vmassol>\u00a0so unless the user has both a wiki named \"data\" AND a page starting with \"image/\" there won't be any issue  \n15:54\u00a0<Denis>\u00a0cjd: the security cache was obviously to short for xwiki.org, actually I have extend it to 10k, and after a few minute reuning, it has already half filled !  \n15:54\u00a0<cjd>\u00a0interesting  \n15:54\u00a0<cjd>\u00a0cachechurn utoh  \n15:55\u00a0<Denis>\u00a0cjd: the efficiency of the cache is quite good now 92% hit/hit+miss, and a 27 ratio for read/writes  \n15:56\u00a0<cjd>\u00a0nice  \n15:56\u00a0<Denis>\u00a0I wonder if you should not increase the default  \n15:57\u00a0<Denis>\u00a0how xwiki.org compare to the mean usage, this is not an easy one, and I am sure users will miss that optimization  \n15:57\u00a0<cjd>\u00a0is the risk of too big less than the risk of too small?  \n15:57\u00a0<cjd>\u00a0probably yes IMO  \n15:58\u00a0<Denis>\u00a0vmassol: this look good, is such check usable for all similar cases ?  \n15:58\u00a0<tmortagne>\u00a0Denis: how much memory are we talking about with 10k elements ?  \n15:58\u00a0<vmassol>\u00a0Denis: nope I'm just lucky here :)  \n15:58\u00a0<vmassol>\u00a0for the future we'll probably need what you mentioned  \n15:59\u00a0<vmassol>\u00a0but we don't need to do it just now  \n15:59\u00a0<vmassol>\u00a0for example I'll commit the \"user:\" support in 6.0 and I'll need your config option I think for that  \n15:59\u00a0<Denis>\u00a0ok, this seems reasonable to me  \n16:05\u00a0<vrachieru>\u00a0has joined #xwiki  \n16:09\u00a0<cjd>\u00a0has quit  \n16:12\u00a0<Denis>\u00a0tmortagne: I do not know a way to calculate that precisely, but we cache only very light stuff, so the cache could not get really big  \n16:18\u00a0<evalica>\u00a0has quit  \n16:20\u00a0<cjd>\u00a0has joined #xwiki  \n16:22\u00a0<tmortagne>\u00a0Denis: then I guess it's ok to put 10k by default  \n16:43\u00a0<polx>\u00a0has joined #xwiki  \n16:58\u00a0<mflorea>\u00a0has quit  \n17:00\u00a0<sburjan>\u00a0has quit  \n17:02\u00a0<msmeria>\u00a0has quit  \n17:10\u00a0<vrachieru>\u00a0has quit  \n17:15\u00a0<polx>\u00a0has quit  \n17:16\u00a0<polx>\u00a0has joined #xwiki  \n17:18\u00a0<polx>\u00a0has quit  \n17:19\u00a0<gdelhumeau>\u00a0I have an implementation that I won't have the time to finish today  \n17:19\u00a0<gdelhumeau>\u00a0can I commit on a branch and push it?  \n17:25\u00a0<tmortagne>\u00a0gdelhumeau: sure, it's always good to create branches for long task what you are working on  \n17:25\u00a0<tmortagne>\u00a0has quit  \n17:25\u00a0<gdelhumeau>\u00a0good, then you can review it too ;)  \n17:30\u00a0<polx>\u00a0has joined #xwiki  \n17:32\u00a0<Denis>\u00a0cjd: the cache is about to reach its limit now, the efficiency is improving, almost 97% hit/hit+miss and 64 read/write ratio  \n17:32\u00a0<cjd>\u00a097% sounds like a nice number  \n17:33\u00a0<cjd>\u00a0why 64% read/write? shouldn't it only write on miss/  \n17:33\u00a0<cjd>\u00a0?  \n17:34\u00a0<Denis>\u00a0it is the ratio between the number of read and the number of write to the cache  \n17:34\u00a0<cjd>\u00a0oh so 64:1, not 64%  \n17:35\u00a0<Denis>\u00a0yep, we read 64 more than we write  \n17:35\u00a0<cjd>\u00a0ok this is good  \n17:36\u00a0<Denis>\u00a0I really wonder what default number we should put, since 500 is definitely not a good idea  \n17:37\u00a0<polx>\u00a0has quit  \n17:39\u00a0<polx>\u00a0has joined #xwiki  \n17:43\u00a0<Kebir>\u00a0has quit  \n17:46\u00a0<polx>\u00a0has quit  \n18:13\u00a0<woshilapin>\u00a0has quit  \n18:22\u00a0<gdelhumeau>\u00a0have to go  \n18:22\u00a0<gdelhumeau>\u00a0bye!  \n18:22\u00a0<gdelhumeau>\u00a0has quit  \n18:37\u00a0<KermitTheFragger>\u00a0has quit  \n18:43\u00a0<vmassol>\u00a0bad BFD today, not many bugs closed\u2026.  \n18:46\u00a0<lucaa>\u00a0has quit  \n19:00\u00a0<cjd>\u00a0has quit  \n19:01\u00a0<abusenius>\u00a0has joined #xwiki  \n19:07\u00a0<zenzla>\u00a0has quit  \n19:18\u00a0<sdumitriu>\u00a0has quit  \n19:19\u00a0<sdumitriu>\u00a0has joined #xwiki  \n20:22\u00a0<herlo>\u00a0has joined #xwiki  \n20:47\u00a0<andreeapopescu>\u00a0has quit  \n21:42\u00a0<Kebir>\u00a0has joined #xwiki  \n21:54\u00a0<Sidali>\u00a0has quit  \n22:21\u00a0<vmassol>\u00a0has quit  \n22:28\u00a0<sdumitriu1>\u00a0has quit  \n22:44\u00a0<Kebir>\u00a0has quit  \n22:47\u00a0<Kebir>\u00a0has joined #xwiki  \n22:48\u00a0<herlo>\u00a0has left #xwiki  \n22:52\u00a0<vmassol>\u00a0has joined #xwiki  \n22:53\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n23:14\u00a0<vmassol>\u00a0has quit  \n23:32\u00a0<Kebir>\u00a0has quit  \n23:39\u00a0<Kebir>\u00a0has joined #xwiki\n"}