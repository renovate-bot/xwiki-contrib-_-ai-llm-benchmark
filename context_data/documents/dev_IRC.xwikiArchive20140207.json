{"id": "dev:IRC.xwikiArchive20140207", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140207", "title": "IRC Archive for channel #xwiki on 07 February 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<xwikibot>\u00a0has joined #xwiki  \n00:26\u00a0<vmassol>\u00a0has joined #xwiki  \n00:31\u00a0<vmassol>\u00a0has quit  \n00:56\u00a0<vmassol>\u00a0has joined #xwiki  \n01:05\u00a0<cjd>\u00a0has quit  \n02:43\u00a0<cjd>\u00a0has joined #xwiki  \n02:43\u00a0<cjd>\u00a0has quit  \n02:43\u00a0<cjd>\u00a0has joined #xwiki  \n02:55\u00a0<cjd>\u00a0has quit  \n02:58\u00a0<Denis>\u00a0has quit  \n02:59\u00a0<ansuz>\u00a0has quit  \n03:57\u00a0<ansuz>\u00a0has joined #xwiki  \n03:58\u00a0<vmassol>\u00a0has quit  \n04:17\u00a0<sdumitriu>\u00a0has joined #xwiki  \n04:22\u00a0<vmassol>\u00a0has joined #xwiki  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:58\u00a0<cjd>\u00a0has joined #xwiki  \n04:59\u00a0<cjd>\u00a0is now known as <Guest58532>  \n05:04\u00a0<Guest58532>\u00a0has joined #xwiki  \n05:15\u00a0<Guest58532>\u00a0is now known as <cjd\\_>  \n05:27\u00a0<cjd\\_>\u00a0has quit  \n05:27\u00a0<cjd\\_>\u00a0has joined #xwiki  \n05:35\u00a0<cjd\\_>\u00a0has quit  \n05:35\u00a0<cjd\\_>\u00a0has joined #xwiki  \n05:45\u00a0<sdumitriu>\u00a0has quit  \n05:51\u00a0<cjd\\_>\u00a0has quit  \n06:04\u00a0<Denis>\u00a0has quit  \n06:08\u00a0<cjd\\_>\u00a0has joined #xwiki  \n06:19\u00a0<ansuz>\u00a0has left #xwiki  \n06:50\u00a0<cjd\\_>\u00a0has quit  \n06:52\u00a0<vmassol>\u00a0has quit  \n07:15\u00a0<msmeria>\u00a0has joined #xwiki  \n07:17\u00a0<vmassol>\u00a0has joined #xwiki  \n07:17\u00a0<msmeria>\u00a0has quit  \n07:18\u00a0<msmeria>\u00a0has joined #xwiki  \n07:31\u00a0<vrachieru>\u00a0has joined #xwiki  \n07:42\u00a0<evalica>\u00a0has joined #xwiki  \n07:46\u00a0<kaisen>\u00a0has joined #xwiki  \n08:16\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:24\u00a0<xwikibot>\u00a0has joined #xwiki  \n08:58\u00a0<abusenius>\u00a0has joined #xwiki  \n08:59\u00a0<Danilo>\u00a0has quit  \n09:03\u00a0<abusenius>\u00a0has quit  \n09:24\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:27\u00a0<msmeria>\u00a0tmortagne: hello  \n09:28\u00a0<tmortagne>\u00a0msmeria: hi  \n09:28\u00a0<msmeria>\u00a0tmortagne: shouldn't 5.2.4 behave the same as 5.2.3 when creating subwikis ?  \n09:29\u00a0<tmortagne>\u00a0msmeria: no idea, better ask guillaume for this  \n09:29\u00a0<msmeria>\u00a0on 5.2.4 I get the DW after creating a subwiki asking me if it's an upgrade or a new install  \n09:29\u00a0<msmeria>\u00a0he's off on Fridays  \n09:29\u00a0<msmeria>\u00a0thanks  \n09:29\u00a0<tmortagne>\u00a0I don't think you should get DW at all on subwikis 5.2 AFAIK  \n09:30\u00a0<tmortagne>\u00a05.2 is still based on old workspaces  \n09:30\u00a0<tmortagne>\u00a0by 5.2.4 you mean 5.2.4-SNAPSHOT right ?  \n09:30\u00a0<msmeria>\u00a0no, 5.2.4 stable  \n09:31\u00a0<tmortagne>\u00a0msmeria: go to your wiki template and check if you have XE ui in the list of installed extensions  \n09:31\u00a0<tmortagne>\u00a0sounds like the extension was not properly registered when the template was created  \n09:31\u00a0<tmortagne>\u00a0and so DW did not seen it was already installed  \n09:32\u00a0<tmortagne>\u00a0which is generally related to missing snapshot repository with snaphot version  \n09:33\u00a0<msmeria>\u00a0tmortagne: when I went to the wiki template I got the DW  \n09:33\u00a0<msmeria>\u00a0Are you performing an upgrade? There are currently 290 documents in the database...  \n09:34\u00a0<tmortagne>\u00a0so it means than when you created the template it failed to find the extensio in the repository  \n09:34\u00a0<tmortagne>\u00a0you should probably retest from scratch  \n09:34\u00a0<tmortagne>\u00a0sounds like you tested when there was some issue on the repositories  \n09:34\u00a0<msmeria>\u00a0I get \"There are no extensions installed.\" in the list of installed ext  \n09:35\u00a0<msmeria>\u00a0is this related to XWIKI-10023 ?  \n09:35\u00a0<msmeria>\u00a0thanks! I'll retest  \n09:39\u00a0<msmeria>\u00a0tmortagne: it works now. no more DW on subwikis. thanks again!  \n09:39\u00a0<tmortagne>\u00a0msmeria: ok  \n09:40\u00a0<tmortagne>\u00a0I think we should probably allow putting full extension metadata somewhere in the xar package.xml so that it does not need to find it in a repository anymore, but need to be sure this won't break any XAR parser  \n10:01\u00a0<evalica>\u00a0has quit  \n10:12\u00a0<evalica>\u00a0has joined #xwiki  \n10:12\u00a0<vmassol>\u00a0good morning  \n10:17\u00a0<mflorea>\u00a0has joined #xwiki  \n10:22\u00a0<vmassol>\u00a0nice BFD yesterday guys!  \n10:22\u00a0<vmassol>\u00a017 bugs closed and 9 real fixes  \n10:22\u00a0<vmassol>\u00a0:)  \n10:22\u00a0<vmassol>\u00a0http://main.xwiki.org/xwiki/bin/view/Blog/Bug+Fixing+Day+54  \n10:38\u00a0<Slashman>\u00a0has joined #xwiki  \n10:46\u00a0<vmassol>\u00a0benoitc, CapNemo, ekarlso, Inge-, kaisen, Slashman and all: please add yourself to the xwiki user map if you haven't done so already, that helps the project! :) https://maps.google.com/maps/ms?msid=210331808187331529022.0004f02bd076d94db85c6&msa=0 Thanks!  \n10:46\u00a0<vmassol>\u00a0I'll send it to the user list now  \n11:00\u00a0<lucaa>\u00a0has joined #xwiki  \n11:39\u00a0<lucaa>\u00a0has quit  \n11:41\u00a0<lucaa>\u00a0has joined #xwiki  \n11:59\u00a0<lucaa>\u00a0has quit  \n12:00\u00a0<lucaa>\u00a0has joined #xwiki  \n12:15\u00a0<lucaa>\u00a0has quit  \n12:16\u00a0<lucaa>\u00a0has joined #xwiki  \n12:17\u00a0<lucaa>\u00a0has quit  \n12:18\u00a0<benoitc>\u00a0vmassol: looking, thanks! :)  \n12:18\u00a0<lucaa>\u00a0has joined #xwiki  \n12:18\u00a0<benoitc>\u00a0ok will add the place, waiting that CapNemo is waking up  \n12:25\u00a0<vmassol>\u00a0benoitc: thanks!  \n12:30\u00a0<vmassol>\u00a0ok done for the new action module and new webajrs module, going to commit on a branch and send a mail  \n12:51\u00a0<vmassol>\u00a0done  \n12:52\u00a0<vmassol>\u00a0please let me know in reply of my email if you're ok for me to merge my branch on master (after fixing checkstyle issues and adding a few more unit tests) ;)  \n14:13\u00a0<lucaa>\u00a0has quit  \n14:14\u00a0<lucaa>\u00a0has joined #xwiki  \n14:53\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:02\u00a0<polx>\u00a0has joined #xwiki  \n15:05\u00a0<msmeria>\u00a0has quit  \n15:19\u00a0<ansuz>\u00a0has joined #xwiki  \n15:27\u00a0<vrachieru>\u00a0has quit  \n15:27\u00a0<vmassol>\u00a0Denis: cool  \n15:27\u00a0<Denis>\u00a0vmassol: need to be tested more however  \n15:27\u00a0<vmassol>\u00a0I was going to ask that...  \n15:27\u00a0<Denis>\u00a0we have an hardware outage today, so I cannot test  \n15:28\u00a0<vmassol>\u00a0maybe you could explain some use cases to test  \n15:28\u00a0<vmassol>\u00a0I'd like to send an email to propose to release 5.4.1 Tuesday  \n15:28\u00a0<tmortagne>\u00a0Denis: details as much as possible things to test for msmeria  \n15:29\u00a0<Denis>\u00a0that is not easy, basically we need to check nothing else get broken  \n15:31\u00a0<Denis>\u00a0tmortagne: I can't explain it easily, it is really a weird issue  \n15:31\u00a0<Denis>\u00a0from the POV of a user  \n15:32\u00a0<tmortagne>\u00a0I mean what test to concentrate on to test as much aspect of the security module as possible  \n15:32\u00a0<tmortagne>\u00a0i.e. test that nothing else is broken  \n15:37\u00a0<vmassol>\u00a0Denis: did you merge on 5.4 branch or not yet?  \n15:37\u00a0<vmassol>\u00a0(don't forget it)  \n15:38\u00a0<Denis>\u00a0I am waiting first a confirmation it does break on master  \n15:38\u00a0<Denis>\u00a0I have not closed the issue on purpose  \n15:38\u00a0<vmassol>\u00a0ok  \n15:38\u00a0<vmassol>\u00a0you're waiting for the CI job results?  \n15:39\u00a0<vmassol>\u00a0note that I've suggested Tuesday to leave one more day for you )  \n15:39\u00a0<vmassol>\u00a0:)  \n15:39\u00a0<vmassol>\u00a0(initially I was planning more Monday)  \n15:41\u00a0<vmassol>\u00a0tmortagne, mflorea, Denis: if you could reply to my action module + webjars integration email that would be awesome. I'm ready to merge to platform (I'll just need 1 hour of checkstyle cleanup and some more unit tests). Note that I've had a call with tmortagne to explain what I did.  \n15:42\u00a0<DSpair>\u00a0has joined #xwiki  \n15:43\u00a0<Denis>\u00a0vmassol: I had a quick look, but I not sure that I have fully get it. Isn't there a potential issue with action to right mapping ?  \n15:45\u00a0<vmassol>\u00a0good point with rights, I didn't think about it\u2026 I guess the default is the same as view rights so FTM it'll work if you write actions that don't require more than view rights  \n15:45\u00a0<vmassol>\u00a0my webajrs action doesn't need more than view rights  \n15:47\u00a0<vmassol>\u00a0I see this:  \n15:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Right right = ACTION\\_MAP.get(action);  \n15:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (right == null) {  \n15:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}  \n15:48\u00a0<vmassol>\u00a0ah yes I know  \n15:48\u00a0<vmassol>\u00a0there's no right check actually  \n15:48\u00a0<vmassol>\u00a0which is why it works  \n15:48\u00a0<vmassol>\u00a0so indeed it'll work fine for any action that doesn't require any right check  \n15:49\u00a0<vmassol>\u00a0so I need to talk to you to understand how a new module can register a new action  \n15:49\u00a0<vmassol>\u00a0(in the rights system)  \n15:53\u00a0<Denis>\u00a0vmassol: you will be disappointed, but this is not yet something we manage, the current mapping is in the bridge and it is purely static  \n15:53\u00a0<vmassol>\u00a0ok shouldn't be hard to improve though  \n15:53\u00a0<vmassol>\u00a0pretty simple actually  \n15:54\u00a0<Denis>\u00a0if you take it from the authorisationManager, it manage right and does not know anything about actions  \n15:56\u00a0<Denis>\u00a0we are still missing 2 modules IMO, a authenticationModule to manage users properly, and a contextual authorization manager, that take context (user, action, current doc, etc\u2026) into account, as a front-end to the actual authorization manager  \n15:57\u00a0<vmassol>\u00a0yes ok, it' s probably hard to do right, but simple to hack it in the bridge modume  \n15:57\u00a0<vmassol>\u00a0\\*module  \n15:59\u00a0<tmortagne>\u00a0yes could have a configuration for the mamping in xwiki.cfg or xwiki.properties loaded by the bridge module at least  \n16:02\u00a0<Denis>\u00a0not very practical for extension however  \n16:02\u00a0<cjd\\_>\u00a0has joined #xwiki  \n16:04\u00a0<DSpair>\u00a0Hi all... I just upgraded my Debian install from 5.2.x to 5.4 using Debian packages... I have installed the new XAR import and updated all of the extensions; but I still cannot paste images into the WYSIWYG editor from the clipboard on either Windows or Linux using Chrome. Any suggestions?  \n16:04\u00a0<tmortagne>\u00a0Denis: you can't install an action as extension anyway  \n16:05\u00a0<tmortagne>\u00a0won't be found by struts  \n16:05\u00a0<vmassol>\u00a0DSpair: this was supposed to work already before 5.2. What I added in 5.4 was just the support for data uri images  \n16:05\u00a0<DSpair>\u00a0OK, well it's not working for me... Any suggestions?  \n16:05\u00a0<vmassol>\u00a0DSpair: I guess you should paste somewhere the HTML you wish to paste  \n16:05\u00a0<vmassol>\u00a0so that we can try it  \n16:06\u00a0<DSpair>\u00a0No, I'm trying to paste a screenshot...  \n16:06\u00a0<DSpair>\u00a0Not HTML  \n16:06\u00a0<Denis>\u00a0tmortagne: oh, I missed the point of Vincent work then  \n16:06\u00a0<polx>\u00a0has quit  \n16:06\u00a0<vmassol>\u00a0Denis: my point was to have a component interface used in the bridge and provide an implementation in the Action module  \n16:07\u00a0<vmassol>\u00a0something very basic allowing to contribute a new right  \n16:07\u00a0<vmassol>\u00a0instead of hardcoding it  \n16:07\u00a0<vmassol>\u00a0instead of hardcoding it in the static map  \n16:08\u00a0<Denis>\u00a0Vincent: I was reacting to \"you can't install an action as extension anyway\"  \n16:08\u00a0<vmassol>\u00a0old style actions no  \n16:08\u00a0<vmassol>\u00a0new style actions yes  \n16:08\u00a0<Denis>\u00a0so, we need a mapping more dynamic than the config files  \n16:08\u00a0<tmortagne>\u00a0yes but new style action test right the way they want, what use the mapping is struts actions  \n16:08\u00a0<vmassol>\u00a0yes  \n16:09\u00a0<Denis>\u00a0in particular, since you may as well dynamically register new rights  \n16:09\u00a0<tmortagne>\u00a0each action could be a registered as a right  \n16:10\u00a0<Denis>\u00a0this would make the right management much heavier, both technically and from the user point of view  \n16:10\u00a0<DSpair>\u00a0Another question. How do I force SSL?  \n16:11\u00a0<tmortagne>\u00a0DSpair: SSL is not really XWiki job, it's usually related to apache httpd or whatever you put in front of your application server  \n16:12\u00a0<Denis>\u00a0of course, so if only old action use the bridge, there is no problem lets keep as it is  \n16:12\u00a0<vmassol>\u00a0DSpair: you cannot do this kind of image copy. I guess the format is OS-specific.  \n16:13\u00a0<DSpair>\u00a0tmortagne: I understand that and when I request the SSL site, I keep getting redirected to the NON-SSL address.  \n16:13\u00a0<Denis>\u00a0but, I am sure you will dislike the direct usage of the AuthMan very quickly, so a improvement their will be quickly requested IMO  \n16:13\u00a0<DSpair>\u00a0vmassol: That sort of image pasting works fine (on Linux, Windows, and Mac) when using Confluence.... Why can't it work in XWiki?  \n16:14\u00a0<vmassol>\u00a0DSpair: no idea, if you can point us to some spec about it that would be nice  \n16:14\u00a0<tmortagne>\u00a0DSpair: I'm not sure I understand, where exactly are you redirected to non-ssl URL ?  \n16:15\u00a0<DSpair>\u00a0vmassol: Here's a JIRA issue on a firefox issue related to that paste: https://jira.atlassian.com/browse/CONF-29799  \n16:15\u00a0<tmortagne>\u00a0internally XWiki is supposed to use only relative URL without host/port/scheme  \n16:16\u00a0<DSpair>\u00a0tmortagne: If I request any page on my XWiki install via SSL (ex. https://my.xwikiinstall.com/bin/view/Main/WebHome), I get redirected to the same URL without the https  \n16:16\u00a0<Denis>\u00a0vmassol: regarding XWIKI-10016, do we also want a backport to 5.2 ?  \n16:17\u00a0<tmortagne>\u00a0DSpair: you get redirected to the exact same URL with just http instead of https ? not parameter ? nothing else ?  \n16:17\u00a0<DSpair>\u00a0tmortagne: OK, more details... It looks like it is the login page which is causing it.  \n16:17\u00a0<tmortagne>\u00a0s/not/no/  \n16:17\u00a0<vmassol>\u00a0DSpair: thanks found the interesting bit at https://jira.atlassian.com/browse/CONF-29799?focusedCommentId=501460&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-501460  \n16:18\u00a0<vmassol>\u00a0mflorea: are we doing anything with \u00a0event.clipboardData in the WYSIWYG?  \n16:18\u00a0<tmortagne>\u00a0AFAIK XWiki send a redirect to local adress and then tomcat or whatever send resolve the complete URL but if it get modifid to http then it means that the fact that it was https got lost in the process, how to you connect to tomcat from apache ?  \n16:19\u00a0<tmortagne>\u00a0I don't have this issue with ajp for example  \n16:19\u00a0<DSpair>\u00a0When I click the link in my bookmarks toolbar, it takes me to my login page with https. Once I log in, I am redirected without the https  \n16:19\u00a0<DSpair>\u00a0tmortagne: I am using Apache mod\\_proxy  \n16:19\u00a0<vmassol>\u00a0mflorea: another nice bit FTR: https://jira.atlassian.com/browse/CONF-29799?focusedCommentId=527203&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-527203  \n16:19\u00a0<mflorea>\u00a0vmassol: I don't we do, at least a quick search didn't reveal any results  \n16:20\u00a0<tmortagne>\u00a0DSpair: when you go to the login page you are still in https ?  \n16:20\u00a0<tmortagne>\u00a0what in the xredirect parameter you get ?  \n16:20\u00a0<tmortagne>\u00a0is  \n16:20\u00a0<vmassol>\u00a0DSpair: I'd suggest you create a jira issue as a feature request, I don't recall one on this  \n16:20\u00a0<DSpair>\u00a0tmortagne: Yes, but submitting the login form redirects to http instead.  \n16:20\u00a0<tmortagne>\u00a0the login is supposed to redirect to what is the xredirect in the URL  \n16:20\u00a0<DSpair>\u00a0tmortagne: Let me load up Chrome Dev Tools and look...  \n16:21\u00a0<tmortagne>\u00a0well you should see in directly in the URL  \n16:21\u00a0<tmortagne>\u00a0in the adress bar  \n16:21\u00a0<tmortagne>\u00a0no need for advanced tools  \n16:21\u00a0<tmortagne>\u00a0?xredirect=...  \n16:22\u00a0<tmortagne>\u00a0for example in my wiki I get: http://tuska.myxwiki.org/xwiki/bin/login/XWiki/XWikiLogin?xredirect=%2Fxwiki%2Fbin%2Fview%2FMain%2FWebHome  \n16:22\u00a0<tmortagne>\u00a0so the redirect does not have the http or https part it's just a relative URL  \n16:22\u00a0<DSpair>\u00a0tmortagne: xredirect:/xwiki/bin/view/Main/WebHome  \n16:23\u00a0<DSpair>\u00a0tmortagne: In the response headers I get \"Location:http://home.zanclus.com/xwiki/bin/view/Main/WebHome\"  \n16:23\u00a0<DSpair>\u00a0That is the redirection to non-SSL  \n16:23\u00a0<tmortagne>\u00a0ok so at XWiki level it seems ok but for some reason tomcat resolve it as an http URL, IMO it means that mod\\_proxy is configured in a way which hide the fact that it was a https URL  \n16:25\u00a0<tmortagne>\u00a0I don't know much apache httpd, I usually copy/paste a working ajp configuration, all I can suggest is to create a jira issue with details on how to reproduce exactly  \n16:25\u00a0<tmortagne>\u00a0maybe someone will have an idea on how to fix you configuration if it's an apache configuration issue or if there is really a bug fix it  \n16:26\u00a0<tmortagne>\u00a0but I have the same use case as you and it works well for me  \n16:26\u00a0<DSpair>\u00a0tmortagne: I found it... In the xwiki.cfg, there is a setting \"xwiki.home\" that I can set to hard-code the base URL  \n16:26\u00a0<tmortagne>\u00a0and it works when you comment xwiki.home ?  \n16:27\u00a0<tmortagne>\u00a0I'm actually surprised this option is used at all in this case, XWiki should send a relative URL  \n16:28\u00a0<DSpair>\u00a0tmortagne: No, I am going to set that value to resolve my issue. I am restarting the application now to test.  \n16:30\u00a0<vmassol>\u00a0guys I'd like to commit what I've put on a branch so that I can start documenting it and progress (I have too many things on branches ATM). If you could reply it would help me  \n16:30\u00a0<vmassol>\u00a0(or I'll just go ahead and do some lazy committing :))  \n16:31\u00a0<DSpair>\u00a0vmassol: Which component should that JIRA issue be attached to?  \n16:31\u00a0<vmassol>\u00a0WYSIWYG editor  \n16:31\u00a0<DSpair>\u00a0vmassol: That's not showing up as an option.  \n16:32\u00a0<vmassol>\u00a0maybe you meant Project and not component  \n16:32\u00a0<vmassol>\u00a0for project it's XWiki Platform  \n16:32\u00a0<vmassol>\u00a0and component is WYSIWYG editor  \n16:32\u00a0<DSpair>\u00a0vmassol: The JIRA issue screen shows \"Component(s)\"  \n16:32\u00a0<vmassol>\u00a0yes component is WYSIWYG editor  \n16:32\u00a0<vmassol>\u00a0in the xwiki platform project  \n16:33\u00a0<vmassol>\u00a0what project are you in?  \n16:33\u00a0<DSpair>\u00a0vmassol: That's the problem... I had the wrong project selected.  \n16:33\u00a0<DSpair>\u00a0Thanks  \n16:33\u00a0<Denis>\u00a0vmassol: once again, do you want the fix on 5.2 too ?  \n16:34\u00a0<vmassol>\u00a0Denis: no idea  \n16:34\u00a0<vmassol>\u00a0I don't know enough about your fix to decide  \n16:34\u00a0<vmassol>\u00a0I'll let you decide  \n16:34\u00a0<vmassol>\u00a0if it's a blocker it should be there  \n16:35\u00a0<Denis>\u00a0all is in the issue, some user may keep their rights after being revoked until cache eviction or a reboot  \n16:35\u00a0<Denis>\u00a0(user or group, is the same)  \n16:35\u00a0<vmassol>\u00a0Denis: so that's the issue we have on xwiki.org when I remove a user's page and the use can still edit stuff?  \n16:35\u00a0<vmassol>\u00a0s/use/user  \n16:35\u00a0<Denis>\u00a0yep  \n16:35\u00a0<vmassol>\u00a0ok I see, cool you fixed it  \n16:35\u00a0<DSpair>\u00a0XWIKI-10026 Created  \n16:36\u00a0<vmassol>\u00a0Denis: I think it's ok to not have it on 5.2.x for now  \n16:36\u00a0<vmassol>\u00a0(maybe later on when it's proven to work well enough, after several weeks)  \n16:36\u00a0<Denis>\u00a0ok I close the issue and leave for today  \n16:36\u00a0<vmassol>\u00a0thanks  \n16:36\u00a0<vmassol>\u00a0it's now on 5.4?  \n16:36\u00a0<vmassol>\u00a0ah yes  \n16:36\u00a0<vmassol>\u00a0missed hte commit  \n16:37\u00a0<vmassol>\u00a0have a good week end !  \n16:37\u00a0<vmassol>\u00a0:)  \n16:37\u00a0<cjd\\_>\u00a0has quit  \n16:37\u00a0<Denis>\u00a0nice WE to all of you guys as well  \n16:37\u00a0<tmortagne>\u00a0Denis: ou too  \n16:37\u00a0<tmortagne>\u00a0you too  \n16:38\u00a0<polx>\u00a0has joined #xwiki  \n16:38\u00a0<DSpair\\_>\u00a0has joined #xwiki  \n16:39\u00a0<Denis>\u00a0has quit  \n16:39\u00a0<mflorea>\u00a0vmassol: xar format mojo is currently setting the defaultLanguage to '' which is fine for most of our documents, but is not right for documents that are translated. E.g. Sandbox.WebHome should have defaultLanguage=en so that it is indexed correctly by Solr and so that it counts for the English value on the Language search facet.  \n16:40\u00a0<DSpair>\u00a0has quit  \n16:41\u00a0<vmassol>\u00a0mflorea: ok, so we need to have it look at the file suffix right?  \n16:41\u00a0<vmassol>\u00a0you can create a jira issue and I can look at it if you want  \n16:41\u00a0<vmassol>\u00a0Welcome.fr.xml \u2014> put defaultLanguage=fr  \n16:41\u00a0<vmassol>\u00a0is that it?  \n16:41\u00a0<mflorea>\u00a0file suffix doesn't help. File suffix could be used for language, not defaultLanguage  \n16:42\u00a0<mflorea>\u00a0defaultLanguage is the language of the default translation  \n16:42\u00a0<sdumitriu>\u00a0has quit  \n16:42\u00a0<vmassol>\u00a0ok then same logic  \n16:42\u00a0<vmassol>\u00a0we use en when  \n16:42\u00a0<mflorea>\u00a0I have no idea why all translations need to know the language of the default translations  \n16:42\u00a0<vmassol>\u00a0there are other versions of the file  \n16:42\u00a0<vmassol>\u00a0(translated versions)  \n16:42\u00a0<vmassol>\u00a0would that work?  \n16:43\u00a0<mflorea>\u00a0would work in 90% of the cases, but I imagine the xar plugin could be also use by third parties which have use other language as default, although I think this is rare  \n16:44\u00a0<mflorea>\u00a0actually no  \n16:44\u00a0<mflorea>\u00a0putting en everytime is not good  \n16:44\u00a0<DSpair\\_>\u00a0has quit  \n16:44\u00a0<mflorea>\u00a0actually yes  \n16:44\u00a0<mflorea>\u00a0sorry  \n16:44\u00a0<vmassol>\u00a0:)  \n16:44\u00a0<mflorea>\u00a0if there are multiple versions then the doc is translated so no technical  \n16:44\u00a0<mflorea>\u00a0but there is still the issues that we force en  \n16:45\u00a0<vmassol>\u00a0it's ok  \n16:45\u00a0<vmassol>\u00a0that can be a mojo parameter  \n16:45\u00a0<mflorea>\u00a0yep  \n16:45\u00a0<vmassol>\u00a0en would just be the default  \n16:45\u00a0<mflorea>\u00a0we can add the param later, when we have a request  \n16:45\u00a0<vmassol>\u00a0I can put it in, not a big deal anyway  \n16:46\u00a0<vmassol>\u00a0it's one line ;)  \n16:46\u00a0<mflorea>\u00a0as you wish  \n16:47\u00a0<mflorea>\u00a0let me know when you're done and I'll apply xar:format on platform  \n16:49\u00a0<vmassol>\u00a0or use https://developers.google.com/translate/v2/using\\_rest?hl=fr#detect-language to detect the language automatically ;)  \n16:49\u00a0<vmassol>\u00a0(just kidding ofc)  \n16:49\u00a0<cjd\\_>\u00a0has joined #xwiki  \n16:57\u00a0<vmassol>\u00a0mflorea: so I need to set the same defaultlanguage to all translated docs right?  \n16:57\u00a0<vmassol>\u00a0(main doc + all translations)  \n16:58\u00a0<mflorea>\u00a0yep  \n16:58\u00a0<mflorea>\u00a0en for all  \n16:58\u00a0<vmassol>\u00a0ok thanks  \n16:58\u00a0<mflorea>\u00a0<defaultLanguage>en</defaultLanguage>  \n17:00\u00a0<vmassol>\u00a0mflorea: you're creating the jira? I've started the coding  \n17:00\u00a0<vrachieru>\u00a0has joined #xwiki  \n17:02\u00a0<mflorea>\u00a0no, but I'll create one now  \n17:02\u00a0<vmassol>\u00a0ok thanks  \n17:12\u00a0<mflorea>\u00a0vmassol: http://jira.xwiki.org/browse/XCOMMONS-531  \n17:12\u00a0<vmassol>\u00a0thanks  \n17:13\u00a0<vmassol>\u00a0mflorea: do we have any bug right now because of this?  \n17:14\u00a0<mflorea>\u00a0not a bug, but on a clean install, before I create any documents, after I made the changes for http://jira.xwiki.org/browse/XWIKI-9977 , the Language facets has only No Language, which is a bit strange  \n17:15\u00a0<mflorea>\u00a0because we have English documents: Sandbox.WebHome, Main.Welcome, XWikiSyntax, etc.  \n17:17\u00a0<mflorea>\u00a0so I want to fix the defaultLanguage of these docs so that the Language facet displays a few en docs  \n17:19\u00a0<vmassol>\u00a0mflorea: sure, but this seems like a bug to me if it's doesn't in 5.4 for ex  \n17:22\u00a0<vmassol>\u00a0can't believe it, I coded it right on the first try ;)  \n17:22\u00a0<cjd\\_>\u00a0has quit  \n17:22\u00a0<mflorea>\u00a05.4 has a different behavior due to XWIKI-9977, but these docs don't have the defaultLanguage set since a very long time  \n17:33\u00a0<cjd\\_>\u00a0has joined #xwiki  \n17:39\u00a0<vmassol>\u00a0evalica: I don't know if you're following this but I've put some app best practices on http://dev.xwiki.org/xwiki/bin/view/Community/ApplicationDevelopmentBestPractices Might be good to follow it for the collaborative apps  \n17:40\u00a0<evalica>\u00a0vmassol: yes I know - they are linked from my draft http://design.xwiki.org/xwiki/bin/view/Proposal/ApplicationGuidelines  \n17:40\u00a0<vmassol>\u00a0ok cool  \n17:41\u00a0<vmassol>\u00a0if you find other generic stuff, please let me know so that we can discuss them and improve the guide :)  \n17:41\u00a0<evalica>\u00a0sure - thanks Vincent  \n17:48\u00a0<vrachieru>\u00a0has quit  \n17:49\u00a0<KermitTheFragger>\u00a0has quit  \n18:00\u00a0<kaisen>\u00a0has quit  \n18:05\u00a0<cjd\\_>\u00a0has quit  \n18:06\u00a0<ansuz>\u00a0has quit  \n18:12\u00a0<tmortagne>\u00a0has quit  \n18:22\u00a0<lucaa>\u00a0has quit  \n18:22\u00a0<polx>\u00a0has quit  \n18:34\u00a0<Slashman>\u00a0has quit  \n18:34\u00a0<vrachieru>\u00a0has joined #xwiki  \n18:37\u00a0<mflorea>\u00a0has quit  \n18:40\u00a0<Slashman>\u00a0has joined #xwiki  \n18:50\u00a0<Slashman>\u00a0has quit  \n18:51\u00a0<vrachieru>\u00a0has quit  \n19:04\u00a0<evalica>\u00a0has quit  \n19:08\u00a0<polx>\u00a0has joined #xwiki  \n19:20\u00a0<ansuz>\u00a0has joined #xwiki  \n19:24\u00a0<vrachieru>\u00a0has joined #xwiki  \n19:28\u00a0<vrachieru1>\u00a0has joined #xwiki  \n19:28\u00a0<vrachieru>\u00a0has quit  \n19:30\u00a0<abusenius>\u00a0has joined #xwiki  \n19:50\u00a0<ansuz>\u00a0has quit  \n20:23\u00a0<silverdrop>\u00a0has joined #xwiki  \n20:41\u00a0<cjd>\u00a0has joined #xwiki  \n20:41\u00a0<cjd>\u00a0is now known as <Guest56801>  \n20:41\u00a0<silverdrop>\u00a0has quit  \n20:45\u00a0<vrachieru1>\u00a0has quit  \n20:49\u00a0<silverdrop>\u00a0has joined #xwiki  \n20:52\u00a0<silverdrop>\u00a0has quit  \n21:01\u00a0<sdumitriu>\u00a0has joined #xwiki  \n21:14\u00a0<Guest56801>\u00a0has quit  \n21:15\u00a0<cjd>\u00a0has joined #xwiki  \n21:15\u00a0<cjd>\u00a0is now known as <Guest69936>  \n21:19\u00a0<sdumitriu>\u00a0has quit  \n21:30\u00a0<Guest69936>\u00a0has quit  \n22:02\u00a0<cjd\\_>\u00a0has joined #xwiki  \n22:20\u00a0<vmassol>\u00a0has quit  \n22:23\u00a0<cjd\\_>\u00a0has quit  \n22:26\u00a0<D-Spair>\u00a0has joined #xwiki  \n22:28\u00a0<vmassol>\u00a0has joined #xwiki  \n22:43\u00a0<cjd>\u00a0has joined #xwiki  \n22:43\u00a0<cjd>\u00a0is now known as <Guest44147>  \n22:55\u00a0<Guest44147>\u00a0has quit\n"}