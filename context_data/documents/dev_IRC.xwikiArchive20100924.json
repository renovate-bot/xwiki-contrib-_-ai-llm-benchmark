{"id": "dev:IRC.xwikiArchive20100924", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100924", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nabusenius - (00:13): I'm trying not to be too paranoid :)  \nsburjan` - (00:13): :)  \narkub left at 00:25 (Quit: Leaving  \njvelo left at 00:27 (Quit: Ex-Chat  \nphancox joined #xwiki at 01:17  \nMartinCleaver joined #xwiki at 01:32  \nlpereira left at 01:56 (Quit: Leaving.  \nabusenius left at 02:53 (Quit: Konversation terminated!  \nMartinCleaver left at 03:00 (Quit: MartinCleaver  \nvenkatesh joined #xwiki at 04:40  \nvenkatna joined #xwiki at 04:40  \nsdumitriu left at 05:07 (Ping timeout: 245 seconds  \nvenkatesh left at 06:12 (Quit: Leaving  \nvenkatesh joined #xwiki at 06:13  \nmflorea joined #xwiki at 07:15  \nDenis joined #xwiki at 07:40  \nasrfel joined #xwiki at 07:50  \ntmortagne joined #xwiki at 07:51  \njbrBridge - (07:51): [Ricardo Rodr&#xED;guez] hi, could anybody confirm if Lucene search is working in XWiki.org farm?  \nrrodriguez joined #xwiki at 07:52  \nflorinciu joined #xwiki at 07:52  \ntmortagne - (07:53): jbrBridge: something is wrong indeed  \njbrBridge - (07:54): [Ricardo Rodr&#xED;guez] it was working some hours ago, about 2:00  \ntmortagne - (07:55): hmm i checking the version of lucene plugin  \ntmortagne - (08:04): looks like for some reason the index is completely empty  \ntmortagne - (08:04): lets try to rebuild it  \ntmortagne - (08:05): [xwiki.org] Rebuilding Lucene index, that could make the farm pretty slow during that time  \ntmortagne - (08:06): ha  \ntmortagne - (08:06): there is something else actually  \ntmortagne - (08:06): looks like http://jira.xwiki.org/jira/browse/XPLUCENE-51 but it's supposed to be fixed in 2.3  \ntmortagne - (08:12): it's more complex than that actually there is an issue on the server and Lucene is unable to create its index  \ntmortagne - (08:12): lets wait for an admin  \njbrBridge - (08:17): [Ricardo Rodr&#xED;guez] tmortagne: thanks  \nrrodriguez left at 08:17 (Quit: rrodriguez  \nmflorea - (08:22): tmortagne: I'm trying to write the officepreview Java macro and I'm getting \"Found Banned Dependency: org.xwiki.platform:xwiki-core-rendering-macro-html:jar:2.5-SNAPSHOT\" because office-preview depends on office-importer which depends on html and velocity macros (bad design, there is a FIXME in the code). Is this ban something that I could bypass or do I have to refactor the office importer to drop the dependency on html macro?  \nvenkatesh left at 08:22 (Read error: Operation timed out  \ntmortagne - (08:23): mflorea: I never seen this message before, i'm not even sure what it means  \nvenkatna left at 08:23 (Ping timeout: 240 seconds  \nmflorea - (08:23): office importer dependency on html macro is runtime btw (it generates a xwiki/2.0 string with {{html}} and then it parses it)  \nmflorea - (08:23): [WARNING] Rule 0: org.apache.maven.plugins.enforcer.BannedDependencies failed with message:  \nmflorea - (08:23): Found Banned Dependency: org.xwiki.platform:xwiki-core-rendering-macro-html:jar:2.5-SNAPSHOT  \ntmortagne - (08:24): i don't see why would maven complain about about html macro  \ntmortagne - (08:24): there is other modules that depends on html macro AFAIK  \ntmortagne - (08:24): hmm  \ntmortagne - (08:24): is it an enforcer plugin thing ?  \ntmortagne - (08:26): trying to find enforcer plugin configuration  \ntmortagne - (08:28): hmm i think vmassol added something like that indeed (even if i can't find it) so that macros use RawBlock instead of html macro  \ntmortagne - (08:28): if they really need to output html block  \nmflorea - (08:29): I see  \ntmortagne - (08:30): now i don't see why office importer depends on html macro  \ntmortagne - (08:30): it's not a macro  \njvdrean joined #xwiki at 08:31  \nmflorea - (08:32): when importing a presentation, the office importer generates a zip with the resources (images, html files), attaches it to the wiki page, creates a string like this: {{html}}<iframe ...></iframe>{{/html}}, parses this string and returns the XDOM. The dependency on html macro is at runtime, but it still is.  \nmflorea - (08:33): now, suppose the office importer would generate a RawBlock, would this block be protected in WYSIWYG?  \ntmortagne - (08:34): this sounds indeed pretty bad design, i don't understand why it does not just create a new RawBlock with the html content as block content  \nmflorea - (08:34): what's the wiki syntax equivalent of a RawBlock?  \ntmortagne - (08:34): parsing seems pretty useless  \ntmortagne - (08:34): unless it doing that for cleaning and it that case it should explicitely use chtml cleaner  \ntmortagne - (08:34): mflorea: there is none  \ntmortagne - (08:35): if it's suppsoed to return an XDOM i don't see why it produce some to parse before, it can create the XDOM directly  \nvenkatesh joined #xwiki at 08:35  \nvenkatna joined #xwiki at 08:35  \nmflorea - (08:36): well, the real reason is that it also needs the URL from zip plugin, and since zip plugin is not a component Asiri did a trick and uses {{velocity}}  \nmflorea - (08:37): I can make the zip plugin a component, and make the importer generate a raw block, but my question is: is this raw block going to be protected in WYSIWYG?  \ntmortagne - (08:37): rawblock is what html macro is producing too  \ntmortagne - (08:38): and i don't understand what you mean by \"be protected in WYSIWYG\"  \nmflorea - (08:38): I see, so how is a raw block that contains an iframe rendered to wiki syntax? using the html macro?  \nmflorea - (08:38): by protected I mean the macro comments, which the editor detects and makes the content of the raw block readonly  \ntmortagne - (08:44): rawblock is not producing anything special no  \ntmortagne - (08:45): mflorea: about \"rendered to wiki syntax\" when never had the use case since the only way to produce RawBlock in a content is when a macro produce it  \ntmortagne - (08:45): so you have the macro marker around it  \nkwoot left at 08:45 (Quit: leaving  \nmflorea - (08:45): so I can't use it in the office importer, because office importer generates an iframe (for the moment) and there is not syntax component for an iframe so it has to use the html macro  \nkwoot joined #xwiki at 08:46  \nkwoot - (08:46): good morning all.  \ntmortagne - (08:47): office importe generate an iframe ?  \ntmortagne - (08:47): you mean office preview ?  \nmflorea - (08:47): I see, so RawBlock is usually produced by macros.  \ntmortagne - (08:47): i don't understand what iframe has to do with an imported content  \nmflorea - (08:47): both, when importing/previewing a presentation.  \nkwoot - (08:47): question: if I make a script to do as much as possibel a conversion from xwiki/1 to xwiki/2, are there certain spaces I can skip because they only contain macro code for example?  \ntmortagne - (08:48): what does the iframe contains ?  \nmflorea - (08:48): it's only for presentation, ppt. office importer generates a zip with all the slides (images) and uses the zip explorer plugin and an iframe to load the images and to display links to next/previous slide  \nmflorea - (08:49): actually the zip contain images and html files that display those images and links to next/previous. Office importer generates an iframe that point to the html of the first slide from the zip  \nmflorea - (08:49): it's nice I know, but it's what we have right now  \ntmortagne - (08:49): does not sounds really like an import to be...  \ntmortagne - (08:49): s/be/me/  \nmflorea - (08:50): I agree  \ntmortagne - (08:50): anyway to answer your question, office importe could come with its how \"presentation\" macro for example  \nmflorea - (08:50): the reason Asiri did it this way might be because the open office server generates this files.  \nmflorea - (08:51): now, I could (and probably should) display all the images on the same page  \ntmortagne - (08:51): that maybe just produce RawBlock insternally with some iframe but that's a technical details, you don't have to see the iframe in the page  \nmflorea - (08:51): and drop the iframe  \ntmortagne - (08:52): in all case there is always a way to not use the html macro here  \nmflorea - (08:52): indeed  \nkwoot - (08:53): kwoot: to elaborate: script is in python using xmlrpc, and I am trying to upgrade the default xwiki.xar to 2.0 syntax.  \nmflorea - (08:54): I'll do like this: refactor the zip explorer to use a component (move the logic inside the component), refactor the importer to use the zip explorer component to get the URL to an image inside the zip and create URLImage block in XDOM.  \ntmortagne - (08:55): kwoot: better convert everything IMO  \ntmortagne - (08:56): even if some pages only contain velocity macros it's better to have the whole wiki in xwiki/2.0 if that's what you want, i don't see the point of keeping some of them (if there is it's really not much for sure anyway)  \ntmortagne - (08:57): mflorea: couldn't you simply attach the image to the page instead of putting them in a zip ?  \nrrodriguez joined #xwiki at 08:58  \nmflorea - (08:59): the zip contains text files (with text extracted from slides) besides images, but yes, I could. For office preview they go in the temporary directroy  \nmflorea - (09:00): though we might have problems with name collisions is the pages already has an image attached with the same name  \ntmortagne - (09:00): yes  \ntmortagne - (09:00): it's less isolated  \nmflorea - (09:01): yep  \nmflorea - (09:01): I'll see  \ntmortagne - (09:01): maybe some prefix  \nmflorea - (09:02): right, namespacing the presentation resources should work  \ntmortagne - (09:07): mflorea: that should also be better for performance since the whole zip is loaded million times (like any attachment) when you see just one page of the presentation  \nmflorea - (09:07): indeed  \nrrodriguez left at 09:11 (Quit: rrodriguez  \nsilviar joined #xwiki at 09:14  \narkub joined #xwiki at 09:25  \nflorinciu left at 09:32 (Quit: Leaving.  \n\n"}