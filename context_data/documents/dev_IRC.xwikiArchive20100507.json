{"id": "dev:IRC.xwikiArchive20100507", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100507", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\njvdrean joined #xwiki at 00:22  \nlucaa left at 00:35 (Ping timeout: 265 seconds  \nabusenius left at 00:51 (Ping timeout: 246 seconds  \njvdrean left at 02:21 (Quit: Leaving.  \nSorinello left at 04:34 (Ping timeout: 240 seconds  \nSorinello joined #xwiki at 04:35  \nCalebJamesDeLisl left at 05:57 (Quit: Restart X11  \nCalebJamesDeLisl joined #xwiki at 05:58  \nDenis left at 07:00 (Read error: Connection reset by peer  \nDenis joined #xwiki at 07:08  \nannacondan joined #xwiki at 07:47  \nkibahop joined #xwiki at 07:54  \nvmassol joined #xwiki at 08:00  \nannacondan left at 08:13 (Quit: annacondan  \nmflorea joined #xwiki at 08:25  \nannacondan joined #xwiki at 08:31  \ntmortagne joined #xwiki at 08:36  \ntmortagne1 joined #xwiki at 08:37  \nlucaa joined #xwiki at 08:40  \ntmortagne left at 08:40 (Ping timeout: 246 seconds  \nsilviar joined #xwiki at 08:50  \nvmassol - (09:08): tmortagne1: good morning. Just had an idea (not sure it's a good idea yet)  \nvmassol - (09:08): it's related to the checks we do on wiki pages  \nvmassol - (09:08): right now we do that in some junit java code  \nvmassol - (09:09): I was wondering about the idea of having the checks done inside wiki pages so that we could provide a sanity check wiki page in the admin for admins  \nvmassol - (09:09): then we would use that page from our junit test  \nvmassol - (09:09): and people would be able to run it too from inside their wiki  \nvmassol - (09:10): thus killing 2 birds with one stone  \nvmassol - (09:10): I think we're lacking such kind of tools for wiki admins and it could be interesting  \nvmassol - (09:10): wdyt?  \nvmassol - (09:11): I'll post on the list  \nCalebJamesDeLisl - (09:14): I like the idea that the tests are closer to the code (applications).  \nvmassol - (09:15): mail sent  \nkibahop left #xwiki at 09:16  \ntmortagne1 - (09:28): vmassol: someone already talked about that on the mailing list AFAIK and was supposed to work on a POC of a XUnit but never had any news since then  \ntmortagne1 - (09:30): vmassol: http://xwiki.markmail.org/message/p7fomhexqdv7z3th?q=xunit  \nvmassol - (09:30): it's not really about unit testing in wiki pages  \ntmortagne1 - (09:31): it's the same, the goal is to write automated tests  \nvmassol - (09:31): ok but I don't think it requires anytthinh complex  \nvmassol - (09:32): for me it's a wiki page with buttons to start sanity checks  \nvmassol - (09:32): and which display results in the same page  \ntmortagne1 - (09:32): sanity check is just just about putting a button in a page...  \nvmassol - (09:32): and you can call those tests by passing an action in the url  \ntmortagne1 - (09:32): s/just just/not just/  \ntmortagne1 - (09:33): vmassol: you are describing the unit test part here, then sanity check would be one of this kind of tests  \nCalebJamesDeLisl - (09:34): Third party app developers can add tests to their apps and install them on myxwiki, then we will know if api changes have broken something.  \nvmassol - (09:36): tmortagne1: I'm talking about a page with 3 buttons for now:  \nvmassol - (09:37): - one for testing xhtml validity  \nvmassol - (09:37): - one for testing macro failures  \nvmassol - (09:37): - one for testing velocity warnings (this one is harder since we need to be able to get the console logs - we talked about it but it's not done)  \nvmassol - (09:37): + other sanity tests we may want to add later on  \nCalebJamesDeLisl - (09:38): Ahh, sorry I was thinking of something different. Back to code  \ntmortagne1 - (09:40): vmassol: sure but for that you need some tool executing a list of methods/pages/code snippets and showing a nice green/red icon with a message depending of the result to at least easily add more sanity check, that's the basic of a XUnit test tool for me  \nEnygma` joined #xwiki at 09:42  \nSvenDowideit left at 09:43 (Ping timeout: 245 seconds  \nSvenDowideit joined #xwiki at 09:45  \nevalica joined #xwiki at 09:50  \nSvenDowideit\\_ joined #xwiki at 09:54  \nSvenDowideit left at 09:57 (Ping timeout: 276 seconds  \nSvenDowideit joined #xwiki at 09:59  \nSvenDowideit\\_ left at 10:01 (Ping timeout: 276 seconds  \nSvenDowideit\\_ joined #xwiki at 10:02  \nSvenDowideit left at 10:05 (Ping timeout: 276 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \narkub joined #xwiki at 10:06  \njvdrean joined #xwiki at 10:07  \nsdumitriu joined #xwiki at 10:09  \nSvenDowideit\\_ joined #xwiki at 10:17  \nabusenius joined #xwiki at 10:18  \nSvenDowideit left at 10:19 (Ping timeout: 276 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nvmassol - (10:21): guys, anyone can see what's wrong with this livetable config: http://pastebin.com/YLUhcQ4R  \nvmassol - (10:21): there must be something very obvious but I don't see it  \nSvenDowideit\\_ joined #xwiki at 10:28  \nSvenDowideit left at 10:31 (Ping timeout: 276 seconds  \nDenis - (10:32): vmassol: nothing wrong, but there is an issue while building the JSON  \nSvenDowideit joined #xwiki at 10:32  \nvmassol - (10:32): Denis: is that because of the textarea? I thought this was fixed and working now ? (I'm on trunk)  \nDenis - (10:33): conversion issue of property clean, cannot convert '\\' into a boolean  \nDenis - (10:33): on an html macro  \nDenis - (10:34): but I could not found where it is really, it happen to me on the Search panel, during resolution of description  \nDenis - (10:35): I am on a recent build (5/5 at night), not trunk  \nvmassol - (10:35): indeed: http://pastebin.com/vTPAimNn  \nSvenDowideit\\_ left at 10:35 (Ping timeout: 276 seconds  \nDenis - (10:35): yes  \nSvenDowideit\\_ joined #xwiki at 10:38  \nflorinciu joined #xwiki at 10:40  \nSvenDowideit left at 10:40 (Ping timeout: 276 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit\\_ joined #xwiki at 10:44  \nSvenDowideit left at 10:47 (Ping timeout: 276 seconds  \nSvenDowideit joined #xwiki at 10:49  \nSvenDowideit\\_ left at 10:51 (Ping timeout: 264 seconds  \nSvenDowideit\\_ joined #xwiki at 10:53  \nSvenDowideit left at 10:56 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit\\_ joined #xwiki at 11:02  \nSvenDowideit left at 11:03 (Ping timeout: 264 seconds  \nSvenDowideit joined #xwiki at 11:04  \nSvenDowideit\\_ left at 11:07 (Ping timeout: 264 seconds  \nSvenDowideit\\_ joined #xwiki at 11:11  \nSvenDowideit left at 11:14 (Ping timeout: 264 seconds  \nSvenDowideit joined #xwiki at 11:14  \nSvenDowideit\\_ left at 11:17 (Ping timeout: 264 seconds  \nSvenDowi- joined #xwiki at 11:17  \nSvenDowideit\\_ joined #xwiki at 11:19  \nSvenDowideit left at 11:20 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nkibahop joined #xwiki at 11:21  \njvelociter joined #xwiki at 11:22  \nSvenDowi- left at 11:22 (Ping timeout: 264 seconds  \njvelociter - (11:23): Hi guys  \njvelociter - (11:23): someone knows since which version of XE the zipexplorer plugin is in the conf by default ?  \ntmortagne1 - (11:24): jvelociter: tough it always did  \njvelociter - (11:24): yes me too. That's why I ask (There's a warning on the selenium install notes that says one has to activate the plugin)  \ntmortagne1 - (11:27): selenium plugin is not very young itself, i guess you can remove this warning without saying from which version it's not needed anymore  \njvelociter - (11:27): tmortagne1: yep  \nmflorea left at 11:28 (Quit: Leaving.  \ntmortagne1 left at 11:29 (Quit: Leaving.  \ntmortagne joined #xwiki at 11:29  \nvmassol - (11:33): nice visual improvements jvelociter  \nvmassol - (11:33): cool  \nvmassol - (11:33): what's your plan re this app?  \nkibahop left #xwiki at 11:33  \nvmassol - (11:34): have you tested greenpepper on xwiki too jvelociter?  \nSorinello - (11:34): I read on the Selenium website that ..that the feature tends to be depricated in future versions. I mean the Selenium Test Runner that runs on their website  \nvmassol - (11:35): Sorinello: yes, I also think it's a bit of a dead end  \njvelociter - (11:35): vmassol: not much. I've done that yesterday with Flavius over the phone during a coaching session  \nvmassol - (11:35): ok great then  \njvelociter - (11:35): vmassol: yes I did not dig into greenpepper  \nvmassol - (11:36): you don't like it or you don't dig it?  \nvmassol - (11:36): :)  \nvmassol - (11:36): wait I said the same thing  \nvmassol - (11:36): you haven't tested it or you don't dig it?  \njvelociter - (11:36): I'd like to see if we can easily execute WebDriver tests written in groovy from the wiki itself, too  \njvelociter - (11:36): lol  \njvelociter - (11:36): haven't tested it  \nvmassol - (11:36): ok  \njvelociter - (11:37): (sounds possible on paper the groovy + WebDriver thing, but maybe I'm missing something)  \njvelociter - (11:37): it would allow to reuse the framework  \njvelociter - (11:37): note that I find the selenium IDE + selenium App already usefull  \nvmassol - (11:37): ok  \njvelociter - (11:37): you just have to manually check your test scenarios after they are recorded  \njvelociter - (11:38): to ensure you don't have selectors too weak  \nvmassol - (11:38): yes  \njvelociter - (11:38): + you have to enter some commands manually sometimes  \nvmassol - (11:38): yes it's not 100% full proof  \nvmassol - (11:38): you have to fix a few things  \njvelociter - (11:39): for example in the register test I had to enter the \"focus\" command on the field of the username maniually, it wasn't recorded by the IDE  \njvelociter - (11:39): besides this couple of tricks, it works  \nCalebJamesDeLisl - (11:40): Hmm, selenium app is similar to what I was thinking of. \u00a0Too bad the tests and the wiki are in different vms otherwise you could use unsafe to push a reference to selenium in to the context.  \nvmassol - (11:41): CalebJamesDeLisl: what greenpepper does in addition  \nvmassol - (11:41): is add the ability to add a DSL  \nvmassol - (11:41): so that you write your tests using that DSL  \nvmassol - (11:42): (in case you haven't seen it they integrate with xwiki)  \nvmassol - (11:42): http://www.greenpeppersoftware.com/  \nSvenDowideit\\_ joined #xwiki at 11:42  \nvmassol - (11:42): (we can get free licenses for xwiki when we need them)  \nSvenDowideit left at 11:43 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nCalebJamesDeLisl - (11:44): Yea, they plug us on the front page! I'm +1 for any software that will do that.  \nvmassol - (11:44): :)  \nvmassol - (11:47): jvelociter: \u00a0do you have any idea about this json response error: http://pastebin.com/vTPAimNn  \njvelociter - (11:48): vmassol: ha! I''ve seen that to, already. I though I was doing some thing un-orthodox. but it seems not  \njvelociter - (11:48): it happens when calling #display on a textarea  \njvelociter - (11:48): $doc.display  \njvelociter - (11:49): ah I think I know  \njvelociter - (11:49): what happen is this :  \njvelociter - (11:49): $escapetool.javascript escapes single quotes  \njvelociter - (11:50): and $doc.display on textareas returns {{html clean='false'}} (or something like this)  \nvmassol - (11:50): yes  \nvmassol - (11:50): you're right  \nsdumitriu - (11:51): Yes, I noticed that  \nvmassol - (11:51): although it returns double quotes  \njvelociter - (11:51): yes but it's the same  \njvelociter - (11:51): the escapetool escapes both  \njvelociter - (11:51): (for JS)  \nvmassol - (11:52): but I don't understand about the order of exec  \nsdumitriu - (11:52): FYI, I started reworking the localization component  \nvmassol - (11:52): when is that textarea field rendered?  \nsdumitriu - (11:52): I'll write wiki macros for it  \njvelociter - (11:52): the order is this :  \nsdumitriu - (11:53): Q: what do you prefer, {{translate}}, {{translation}}, {{l10n}}, something else?  \njvelociter - (11:53): - $doc.display displays the value of the field (it actually output the {{hml ... value thing)  \nsdumitriu - (11:53): l10n is short and well established, but it's too technical for normal users  \njvelociter - (11:53): - escapetool escapes the return value  \nvmassol - (11:53): ah yes it's then rednered by the page rendering  \nvmassol - (11:54): is that it?  \njvelociter - (11:54): - last, the renderer evaluates the wiki syntax returned by the velocity macro (including the {{html clean=\\'false)  \njvelociter - (11:54): yes  \nvmassol - (11:54): I mean by the json page rendering  \nsdumitriu - (11:55): jvelociter: One option I was considering is to render as plaintext instead of html  \njvelociter - (11:55): yes. It's a velocity block  \njvelociter - (11:55): sdumitriu: it's already outputSyntax=plain, no ?  \nvmassol - (11:55): jvdrean: so basically it means that the livetable doesn't support syntax 2.0 right now I think  \nvmassol - (11:56): I mean textarea for pages in 2.0 syntax  \njvelociter - (11:56): inside textarea properties you mean  \njvelociter - (11:56): yes  \njvelociter - (11:56): well, it use to support it  \njvelociter - (11:56): but then we started doing it cleanly escaping everything:)  \nvmassol - (11:56): well yes but not explcitely  \nvmassol - (11:57): it was kind of luck that it worked  \njvelociter - (11:57): not really. the .display APIs are supposed to work  \nvmassol - (11:57): yes but they're supposed to return wiki syntax  \nvmassol - (11:58): (for 2.0)  \nvmassol - (11:58): whereas  \nvmassol - (11:58): the jason shouldn't have wiki syntax  \nvmassol - (11:58): s/jason.json/  \nvmassol - (11:58): oops  \njvelociter - (11:58): yes that's what we decided, but it's a bit strange  \njvelociter - (11:58): (to surround with {{html}})  \nvmassol - (11:58): sure but not doing it is worse  \nvmassol - (11:59): we tried that initially  \njvelociter - (11:59): I don't know what's the clean way of fixing this  \nvmassol - (11:59): couldn't we render the returned content from display ?  \nsdumitriu - (11:59): I know  \njvelociter - (11:59): doing the rendering of the textarea ourselves could do it  \nsdumitriu - (11:59): Fix the display logic  \njvelociter - (11:59): isn't that costy ?  \nsdumitriu - (11:59): Get rid of ecs  \nsdumitriu - (11:59): Very  \njvelociter - (11:59): that's what I thought too. Especially if you have 5 fields like that and 20 entries  \nsdumitriu - (12:00): Wait, what costly  \nvmassol - (12:00): rewriting the displayers is a task we want to do  \njvelociter - (12:00): rendering manually all textareas  \nvmassol - (12:00): but right now we need to fix this  \nsdumitriu - (12:00): Ah, that, I don't know, it shouldn't be too costly  \nvmassol - (12:00): it's ok IMO  \njvelociter - (12:00): ok, so that's a way in  \njvelociter - (12:00): \b  \njvelociter - (12:00): we need a script service for that  \njvelociter - (12:00): or do we have it already ?  \nvmassol - (12:01): I don't know that  \nvmassol - (12:02): you could also cheat  \nvmassol - (12:02): ;)  \nvmassol - (12:02): so that isInRenderingEngine is false  \nvmassol - (12:02): but maybe too cheaty\u2026. :)  \nvmassol - (12:02): context.get(\"isInRenderingEngine\")  \njvelociter - (12:03): aha, too late, you said it  \nevalica left at 12:03 (Ping timeout: 240 seconds  \nvmassol - (12:03): that won't work probably anyway  \nvmassol - (12:04): we can't do what we said I think  \nvmassol - (12:04): for example imagien we have this content in the textarea:  \njvelociter - (12:04): what we said = ?  \nvmassol - (12:04): hello \\*\\*world\\*\\*  \nvmassol - (12:04): this will get transformed into:  \nvmassol - (12:05): {{html clean=false wiki=false}}hello <strong>world</strong>{{/html}}  \nvmassol - (12:05): right?  \nvmassol - (12:05): if you render manually in html you'll get:  \njvelociter - (12:05): I guess  \nevalica joined #xwiki at 12:05  \nvmassol - (12:05): <p>hello <strong>world</strong></p>  \njvelociter - (12:06): right  \nvmassol - (12:06): this is what you'll get in json  \nvmassol - (12:06): what happens after?  \njvelociter - (12:06): don't we have facilities to remote top level paragraphs ?  \njvelociter - (12:06): after it depends  \nvmassol - (12:06): this is inserted in the page DOM?  \njvelociter - (12:06): usually you will inject that in the DOM  \nvmassol - (12:06): (as is)  \njvelociter - (12:06): yes  \nvmassol - (12:06): ok so it would work  \njvelociter - (12:07): but you have an extra <p>  \njvelociter - (12:07): that you probably don't want  \nvmassol - (12:07): it's ok in table cells no?  \njvelociter - (12:07): (I know I wouldn't want it)  \nvmassol - (12:07): I think it's supposed in table cells  \nvmassol - (12:07): s/supposed/supported/  \njvelociter - (12:08): yes. but you don't necessarly insert it directly in the table cell  \njvelociter - (12:08): (since you can do whatever you fancy with it)  \nvmassol - (12:08): you're talking about use cases other than livetables?  \njvelociter - (12:09): I could try that with my use case on the reader application I'm working on, I'm not doing just standard things  \njvelociter - (12:09): no, I'm talking about livetables  \nvmassol - (12:10): CalebJamesDeLisl: could you give me/us a status on the invitation application? (I may have missed a few things while on holiday)  \nvmassol - (12:10): ?  \nannacondan left at 12:10 (Quit: annacondan  \njvelociter - (12:11): since you can plug event listeners on new JSON data, you can virtually inject that data anywhere in the DOM, not just in the table cells. For example you can build your own complex DOM fragment, and inject that in the table cell (instead of just injecting the JSON HTML)  \nvmassol - (12:11): (would be great to have it in 2.4M1 if it's not already there - planned date is 24th of may)  \nvmassol - (12:11): jvelociter: ok....  \nCalebJamesDeLisl - (12:11): It sends mail, users can join, report spam, decline. There's something in the sandbox.  \njvelociter - (12:11): vmassol: now I don't know how \"bad\" is to have a <p> arround all data  \nvmassol - (12:11): jvelociter: in any case it means the livetable is still broken for textarea right now  \nCalebJamesDeLisl - (12:11): Mostly working on UI stuff now.  \njvelociter - (12:12): yes  \nvmassol - (12:12): so we really need to fix that asap  \nmflorea joined #xwiki at 12:12  \njvelociter - (12:12): I'm creating a JIRA issue  \nvmassol - (12:12): CalebJamesDeLisl: do you need help re beautifying the UI? evalica: maybe you could have a look?  \nCalebJamesDeLisl - (12:12): She put together some proposal mockups and I am currently implementing them.  \nvmassol - (12:12): CalebJamesDeLisl: will it all be ready for 2.4M1?  \nCalebJamesDeLisl - (12:13): Hoping.  \nvmassol - (12:13): hehe  \nvmassol - (12:13): is there something committed in XE right now or only on incubator?  \nCiprian joined #xwiki at 12:13  \nCalebJamesDeLisl - (12:13): The new version is in the sandbox. Nothing in XE yet.  \nCalebJamesDeLisl - (12:14): There is just an old (mostly mockup) on the incubator.  \nvmassol - (12:14): ok when do you think you could have a demo up somewhere?  \njvelociter - (12:15): http://jira.xwiki.org/jira/browse/XE-661  \njvelociter - (12:15): (we need to create a livetable application BTW, I think)  \nCalebJamesDeLisl - (12:15): If you don't mind a few rough edges (UI) then by the end of the weekend.  \nvmassol - (12:15): (why?)  \nvmassol - (12:15): (that's for jvelo)  \nvmassol - (12:15): CalebJamesDeLisl: ok great, better show it asap  \njvelociter - (12:16): because now we have documents in XE  \nevalica - (12:16): vmassol: the invitation proposal mockups can be seen at http://incubator.myxwiki.org/xwiki/bin/view/Improvements/InvitationProposal  \nvmassol - (12:16): CalebJamesDeLisl: are you integrating that mockup?  \njvelociter - (12:16): and JIRA issues in XE. (for the issues related to that part)  \nCalebJamesDeLisl - (12:16): Doing my best ;)  \nvmassol - (12:16): I guess that's a yes  \nvmassol - (12:17): if you need help maybe some js/css/html experts here can provide guidance/help  \nvmassol - (12:17): I'm thinking about jvdrean, jvelociter, sdumitriu, evalica, lucaa ;)  \nCalebJamesDeLisl - (12:18): Working on the lightbox gave me a good handle on js. I have a working livetable json supplier so I'm pretty good in that regard.  \nvmassol - (12:18): ok  \nCalebJamesDeLisl - (12:18): BTW: should the livetable support non script browsers?  \njvelociter - (12:19): CalebJamesDeLisl: yes. It's quite a big refactoring, but yes  \nvmassol - (12:19): imo, ideally it should degrade in a simple table  \nvmassol - (12:19): we talked about it in the past  \njvelociter - (12:19): yes  \nvmassol - (12:19): don't know if we have a jira issue for it  \nCalebJamesDeLisl - (12:19): That is my thinking and what I'm implementing in the invitation.  \njvelociter - (12:20): a prerequisite for that is to have a datasource component that's agnostic to the output format  \njvelociter - (12:20): to be able to use it both as a JSON data source or as a HTML table  \nCalebJamesDeLisl - (12:21): Maybe a velocity script which converts json to html table would be a quick fix.  \njvelociter - (12:21): and then have the javascript component come and hijack the links of the table (previous page, next page, filters, etc)  \njvelociter - (12:21): CalebJamesDeLisl: no I think there are easier ways, without doing that  \njvelociter - (12:22): if you look at the JSON source, the JSON outputting does not have too much logic in it  \njvelociter - (12:22): so it's not too hard to extract  \nCalebJamesDeLisl - (12:22): Best of luck ;) \u00a0\u00a0Livetable is one place I have managed to avoid so far.  \njvelociter - (12:22): ideally I think it should be a java component that does the logic  \njvelociter - (12:22): hehe  \nCalebJamesDeLisl - (12:22): re tests: It'd be cool to test for javascript errors.  \nflorinciu left at 12:31 (Read error: Connection reset by peer  \narkub left at 12:59 (Ping timeout: 252 seconds  \nbbc581 left at 13:03 (Ping timeout: 268 seconds  \nannacondan joined #xwiki at 13:11  \nvmassol - (13:14): CalebJamesDeLisl: re test good idea, not sure how it can be done though  \nCalebJamesDeLisl - (13:21): Firebug can output errors so it must be possible for js (selenium)  \nCalebJamesDeLisl - (13:21): Coffee time.  \nflorinciu joined #xwiki at 13:23  \nplunden joined #xwiki at 13:34  \ntapaya joined #xwiki at 14:31  \ntapaya left #xwiki at 14:33  \nflorinciu left at 14:43 (Read error: Connection reset by peer  \ntmortagne - (14:47): CalebJamesDeLisl: looks like Configurable system is putting a <script> element inside a paragraph (just before the actual section content), see http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-webstandards/787/testReport/com.xpn.xwiki.it/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_\\_xwiki\\_bin\\_admin\\_XWiki\\_XWikiPreferences\\_editor\\_globaladmin\\_section\\_Search/  \nflorinciu joined #xwiki at 14:49  \nkibahop joined #xwiki at 14:53  \nEnygma` - (14:58): Hi, I want to add a tab to the docextra section at the bottom of a page. I already took care of inserting the section, now I am having problems populating it when it is clicked.  \nEnygma` - (14:58): Looking at the Annotation Feature's example, I see that I need to call the XWiki.displayDocExtra(extraID, extraTemplate, scrollToAnchor) javascript method and pass a section name and a vm template. In the Annotation Feature case, this vm is an attachment on the XWiki.DefaultSkin page which is part of the application's xar.  \nEnygma` - (14:58): I do not want this. I want to specify a vm file which is an attachment on any other document (a fixed one, which is is my application's xar but which does not override any existing default documents.)  \nEnygma` - (14:59): how is that vm exactly resolved?  \nCalebJamesDeLisl - (15:14): tmortagne: I see it. Looks like it's not the script tag but the noscript tag which is causing the failure. Thanks for pointing that out.  \ntmortagne - (15:16): CalebJamesDeLisl: you'r welcome :)  \nCalebJamesDeLisl - (15:17): Hey I'm happy with the new parser too. No more having to use the {{html}}</p> \u00a0some content <p>{{/html}} anti-pattern to force content out of the paragraph block.  \narkub joined #xwiki at 15:22  \nvmassol - (15:26): sdumitriu: are you aware of this potential problem: http://responcia.net/i/developpement/q/15/commons-dbcp-ou-c3p0-.html ?  \nsdumitriu - (15:31): Yes, I mentioned that this is one of the problems on myxwiki  \nsdumitriu - (15:31): There are a lot of connection problems in the logs  \nvmassol - (15:31): we could try the validation query thingie ?  \nsdumitriu - (15:31): And I said that I tried the autoreconnect parameter, which doesn't work  \nsdumitriu - (15:31): We could, but it's slow on performance  \nsdumitriu - (15:32): Not very slow, just slower  \nvmassol - (15:32): apparently that's the only solution they've found  \nvmassol - (15:32): apart from moving away from commons-dbcp that is  \nannacondan left at 15:32 (Quit: annacondan  \nsdumitriu - (15:32): I read about the dbcp/c3p0 debate last week  \nsdumitriu - (15:33): And the conclusion was that c3p0 is much better than the old dbcp, but the newer dbcp should be on par  \nvmassol - (15:33): there's a new released one?  \nvmassol - (15:33): checking...  \nvmassol - (15:34): hmm you mean the one that runs only in JDK 1.6?  \nsdumitriu - (15:34): XWIKI-5136  \nvmassol - (15:34): ah cool  \nvmassol - (15:34): I was on holiday so I missed this  \nvmassol - (15:34): so we don't have any feedback yet on this for myxwiki.org  \nsdumitriu - (15:34): I don't know if it's used on 2.3  \nvmassol - (15:35): the issue says it's fixed in 2.4M1  \nsdumitriu - (15:35): Hm, maybe that's why autoReconnectForPools didn't work, it still had the old dbcp jar  \nvmassol - (15:40): nuxeo doesn't like mysql: http://www.nuxeo.org/xwiki/bin/view/FAQ/WhyAvoidMySQL  \nsdumitriu - (15:40): I don't like mysql  \nsdumitriu - (15:42): Me and CalebJamesDeLisl would probably like a switch to postgresql  \nCalebJamesDeLisl - (15:43): Yup. The only thing I like about MySQL is allowMultiQueries. They really got that one right.  \nsdumitriu - (15:43): mysql is the popular guy which shadows the smarter kid  \nkibahop left #xwiki at 15:50  \nplunden left #xwiki at 16:13  \nflorinciu left at 16:25 (Read error: Connection reset by peer  \nflorinciu joined #xwiki at 16:30  \nannacondan joined #xwiki at 16:36  \nannacondan left at 16:42 (Quit: annacondan  \nvmassol left at 16:59 (Ping timeout: 265 seconds  \nvmassol joined #xwiki at 17:05  \nlucaa left at 17:08 (Ping timeout: 265 seconds  \nlucaa joined #xwiki at 17:08  \nsdumitriu - (17:19): Enygma`: Is your question still valid?  \nsdumitriu - (17:20): Back with my Q: what do you prefer, {{translate}}, {{translation}}, {{l10n}}, something else?  \nvmassol - (17:21): {{translation}} I think, you should ask on the list maybe?  \ntmortagne - (17:21): sdumitriu: would be several an anyway better asking it in a mail i guess  \ntmortagne - (17:21): s/would/could/  \nsdumitriu - (17:21): Yes, it was just a quick poll  \nEnygma` - (17:22): sdumitriu: We decided to go with Panels for now since the Tab approach was creating too much trouble.  \nvmassol - (17:22): full usage would be: {{translation key=\"\u2026.\"/}} ?  \nsdumitriu - (17:22): Enygma`: K  \nEnygma` - (17:23): in the end we found a work-around, but it was blocked as well by the fact that xwiki skins are not inheritable. Meaning that a new XWiki Skin document can not have a base skin another xwiki skin document.  \nEnygma` - (17:23): thanks anyway.  \nsdumitriu - (17:24): Ah, yes, Marius asked me about it  \nsdumitriu - (17:24): vmassol: {{translation key=\"some.key\" params=\"a,b,c\" default=\"This is a message\"/}}  \nsdumitriu - (17:24): It would be hard with params, suggestions welcome  \nsdumitriu - (17:25): How to put an array of values in a macro?  \nvmassol - (17:25): using the content part of the macro?  \nsdumitriu - (17:25): Newline as separator?  \nsdumitriu - (17:26): Yes, better as content, since we could have other macros as parameters  \nvmassol - (17:26): {{translation}}  \nsdumitriu - (17:26): {{translate key=\"some.message\"}}  \nsdumitriu - (17:26): {{username link=\"false\"/}}  \nsdumitriu - (17:26): {{/translate}}  \nvmassol - (17:26): {{param}}  \nvmassol - (17:26): ...  \nvmassol - (17:27): {{/param}}  \nsdumitriu - (17:27): Ah, yes, {{param}}  \nvmassol - (17:27): ?  \nvmassol - (17:27): a bit verbose maybe  \nsdumitriu - (17:27): But it's not a good name  \nsdumitriu - (17:27): macros are not context aware at the moment, so this would be a generic param  \nflorinciu left at 17:27 (Quit: Leaving.  \nannacondan joined #xwiki at 17:28  \nsdumitriu - (17:28): And the translation macro can only have {{param}} as content  \nsdumitriu - (17:28): So it's a bit verbose, indeed  \nvmassol - (17:28): I was thinking about sometihng else  \nvmassol - (17:28): trying to express it in pastebin  \nsdumitriu - (17:29): K  \nvmassol - (17:31): I was thinking about something like this but it's overly complex i think: http://pastebin.com/u0u1LPtj  \nvmassol - (17:31): (we'd also need that the output of each param macro be rendered in plain text)  \nvmassol - (17:32): so forget this  \nvmassol - (17:36): maybe the params parameter is the best  \nvmassol - (17:36): http://pastebin.com/2pxmSiT2  \nsdumitriu - (17:36): But we must escape \" and ,  \nvmassol - (17:36): yes  \nsdumitriu - (17:37): What to use for escape? ~ or \\ ?  \nsdumitriu - (17:37): Actually this is a generic question for macros  \nvmassol - (17:37): \\ probably  \nvmassol - (17:37): since we already use that  \nvmassol - (17:37): to escape quotes in macro parameters  \nsdumitriu - (17:37): We do?  \nsdumitriu - (17:37): I'll try  \ntmortagne - (17:38): no we don't  \ntmortagne - (17:38): we use ~  \ntmortagne - (17:38): everywhere  \ntmortagne - (17:38): in xwiki/2.0 syntax  \ntmortagne - (17:38): otherwise it's not consistent  \nvmassol - (17:38): hmm  \nevalica left at 17:38 (Ping timeout: 260 seconds  \nvmassol - (17:38): we changed it?  \nvmassol - (17:38): (I thought we were using \\ at some point for quote escaping)  \nsdumitriu - (17:39): Hm, doesn't quite work...  \ntmortagne - (17:39): at first it was using what wikimodel common was using, it's was not a reall choic  \ntmortagne - (17:39): it has been changed a long time ago  \ntmortagne - (17:39): to follow the xwiki/2.0 escaping syntax  \nsdumitriu - (17:39): Yes, works with ~\"  \nvmassol - (17:40): {{mymacro param=\"some ~\"\"/}} and {{mymacro param=\"some tilde ~~\"/}} ?  \ntmortagne - (17:41): should be that yes  \ntmortagne - (17:41): same rule than anywhere else in xwiki/2.0  \nsdumitriu - (17:42): Do we still have a linebreak syntax, like \\\\ was for 1.0? Other than a real newline  \nvmassol - (17:42): I think \\\\ is stil there yes  \ntmortagne - (17:42): yes \\\\ is part of xwiki/2.0 syntax too  \nvmassol - (17:43): note: one reason for ~ over \\ AFAIR was for the problem when you mix wiki content with velocity macro AFAIR  \nvmassol - (17:43): (in addition to \\\\)  \ntmortagne - (17:44): vmassol: isn't it the escaping syntax of Creole ?  \nvmassol - (17:44): yes was chekcing this  \nvmassol - (17:44): http://www.wikicreole.org/wiki/Creole1.0#section-Creole1.0-EscapeCharacter  \nvmassol - (17:44): that's the other reason ;)  \nCalebJamesDeLisl - (17:45): What's the official policy for js in onclick attributes?  \nsdumitriu - (17:47): No no no  \ntmortagne - (17:47): CalebJamesDeLisl: i think we are supposed to use something else than onclick actually (but i really don't know much about it)  \njvdrean - (17:47): CalebJamesDeLisl: inline event handlers not allowed  \nCalebJamesDeLisl - (17:48): How hard would it be to add a test?  \nsdumitriu - (17:48): I think this is covered by the dutch/wcag tests  \nsdumitriu - (17:49): document.observe(\"xwiki:dom:loaded\", function() { $('theClickedElement').observe('click', function(){ write code here; }); });  \nsdumitriu - (17:49): (In case you were looking for a stub)  \nCalebJamesDeLisl - (17:50): find ./ -name '\\*.xml' -exec egrep ' (onunload|onsubmit|onselect|onreset|onmouseup|onmouseover|onmouseout|onmousemove|onmousedown|onload|onkeyup|onkeypress|onkeydown|onfocus|ondblclick|onclick|onchange|onblur)=' {} \\; -print | sed -n -e 's/\\(^\\.\\/.\\*$\\)/\\1/p' | wc -l  \nCalebJamesDeLisl - (17:50): I think there were 23 files in violation.  \njvdrean - (17:50): CalebJamesDeLisl, sdumitriu: it should be covered by DWG/WCAG tests  \njvdrean - (17:50): List<String> forbiddenAttributes =  \njvdrean - (17:50): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Arrays.asList(ATTR\\_BLUR, ATTR\\_CHANGE, ATTR\\_CLICK, ATTR\\_FOCUS, ATTR\\_LOAD, ATTR\\_MOUSEOVER, ATTR\\_SELECT,  \njvdrean - (17:50): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ATTR\\_SELECT, ATTR\\_UNLOAD);  \njvdrean - (17:50): https://svn.xwiki.org/svnroot/xwiki/platform/xwiki-tools/trunk/xwiki-standards-validator/src/main/java/org/xwiki/validator/DutchWebGuidelinesValidator.java  \ntmortagne - (17:50): CalebJamesDeLisl: FYI: when you want to write a validation test for something like that not covered by WCAG test (and i think is one is), you can add this pretty easily in XWikiValidator class in xwiki-standards-validator tool project  \nCalebJamesDeLisl - (17:51): tmortagne: Thanks for the info. I will have to look into it. Invitation first ;)  \nsilviar left at 17:53 (Quit: Leaving.  \nvmassol - (17:54): yes focus focus focus :)  \nvmassol - (17:54): (good for me to say, I'm having a hard time to focus too ;))  \nCiprian left #xwiki at 17:59  \nEnygma` left at 18:01 (Quit: Leaving.  \nvmassol - (18:11): jvdrean: I was looking for how to customize the watchlist email template here http://code.xwiki.org/xwiki/bin/view/Applications/WatchlistApplication but i can't find it  \nsdumitriu - (18:14): Edit XWiki.WatchListMessage  \nsdumitriu - (18:14): objects  \nvmassol - (18:14): sdumitriu: I'm not looking for how to do it but for someone to doc it. It should have been on the wiki  \nvmassol - (18:15): (but thanks!)  \nsdumitriu - (18:15): Maybe Sorinello?  \nsdumitriu - (18:15): :)  \nvmassol - (18:16): too late!  \nvmassol - (18:16): jvdrean has been faster :)  \njvdrean - (18:17): funny, can't I use #toc(\"\" \"\" \"\") in an object field ?  \nsdumitriu - (18:18): No  \nvmassol - (18:18): jvdrean: yes\u2026 it works if you convert the page to 2.0 syntax and use {{toc/}}  \nsdumitriu - (18:18): #toc searches for real headings in the document content  \nvmassol - (18:19): sdumitriu: btw just noticed a bug in the object editor, see http://tinycoke.com/\\_6rTTdbBY8Ycs/screen\\_shot\\_2010-05-07\\_at\\_6.18.53\\_pm.png  \nvmassol - (18:19): the generated name is really ugly  \nsdumitriu - (18:19): What, the object title?  \nvmassol - (18:19): yes  \nsdumitriu - (18:19): It's even worse for other objects  \nvmassol - (18:19): when you see it at first you think there's a bug  \nsdumitriu - (18:20): Try the object editor on code.xwiki.org snippets/macros  \nvmassol - (18:20): just done it  \nvmassol - (18:20): and?  \nvmassol - (18:21): there's no reason the object is identified by the first field btw  \njvdrean - (18:21): I get 8 failing tests in addition to the 8 tests in error when I execute XE ui-tests on mac OS  \njvdrean - (18:21): http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-ui/788/console  \nvmassol - (18:21): http://code.xwiki.org/xwiki/bin/edit/Macros/NoScriptMacro?editor=object  \nvmassol - (18:21): MacroClass 0: Contributor  \nvmassol - (18:21): doesn't sounds a good id to me  \nvmassol - (18:21): there are a few cases where it'll work  \nvmassol - (18:21): but I can see lots of cases where it's not very good  \nsdumitriu - (18:22): vmassol: Agree  \ntmortagne - (18:22): vmassol: yes and anyway it's useless even when it makes sense  \nvmassol - (18:22): sdumitriu: the reason I'm mentioning this is becasue I wante to add a screenshpt for the doc but it doesn't look good ;)  \nsdumitriu - (18:22): We need to decide if we really want to encourage a name for all objects  \nvmassol - (18:23): sdumitriu: before we even decide this I think we should drop the generated title  \nsdumitriu - (18:23): Why  \nsdumitriu - (18:23): ?  \nvmassol - (18:23): because it's really ugly, not logical and make me think as a user....  \nsdumitriu - (18:23): As a user you should not see the object editor  \nvmassol - (18:24): as an advanced user  \nsdumitriu - (18:24): Think as a developer, not as a user  \nvmassol - (18:24): ok developer if you prefer  \nsdumitriu - (18:24): You're allowed to do that here  \nvmassol - (18:24): or admin  \nvmassol - (18:24): :)  \nvmassol - (18:33): jvdrean: what should go in Text and HTML fields?  \nvmassol - (18:33): oh the 2 versions depending on the client mail support  \njvdrean - (18:33): yes  \nvmassol - (18:34): jvdrean: what is language used for?  \nvmassol - (18:34): does it mean I can have several Mail objects?  \njvdrean - (18:34): yes  \nvmassol - (18:34): ok  \nldubost joined #xwiki at 18:49  \nvmassol - (18:49): tmortagne: have you asked for a better icon for the search admin icon?  \ntmortagne - (18:50): vmassol: i sent a mail about the new search UI asking for it among other things  \nvmassol - (18:50): I think you could ping Ciprian directly about this, wdyt?  \nvmassol - (18:50): (not sure he reads mails there)  \nlucaa left at 18:50 (Read error: No route to host  \ntmortagne - (18:51): sure, since there was no rush I tough mail was enough for now  \nvmassol - (18:52): well would be good to have in 2.4M1  \nvmassol - (18:52): (although there's no rush I agree)  \nannacondan left at 18:52 (Quit: annacondan  \nlucaa joined #xwiki at 18:56  \ntmortagne - (18:57): vmassol: well i was expecting to get answers to the mail before 2.4M1 :)  \nabusenius left at 19:05 (Ping timeout: 240 seconds  \nmflorea left at 19:08 (Quit: Leaving.  \nvmassol - (19:10): jvdrean: for the ui-tests module maybe the xwiki-url module should be used for parsing URLs? (I haven't thought much about it, just an idea)  \nlucaa left at 19:10 (Quit: Leaving.  \nkibaho1 joined #xwiki at 19:11  \njvdrean - (19:12): vmassol: good idea yes, I might have rushed a bit  \njvdrean left at 19:16 (Quit: Leaving.  \nvmassol left at 19:18 (Ping timeout: 248 seconds  \nvmassol joined #xwiki at 19:24  \narkub left at 19:43 (Ping timeout: 252 seconds  \nldubost left at 19:46 (Quit: ldubost  \nmflorea joined #xwiki at 20:21  \nabusenius joined #xwiki at 20:29  \nldubost joined #xwiki at 20:31  \ntmortagne left at 20:32 (Quit: Leaving.  \nlucaa joined #xwiki at 20:56  \nannacondan joined #xwiki at 21:51  \nSvenDowideit\\_ joined #xwiki at 22:22  \nSvenDowideit left at 22:22 (Ping timeout: 264 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit\\_ joined #xwiki at 22:26  \njvelociter - (22:29): vmassol: when bots save documents the strategy is to use the superadmin account, right ? like watchlist does  \nSvenDowideit left at 22:29 (Ping timeout: 276 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \njvelociter - (22:29): s/save/save or create/  \nvmassol - (22:30): hmmm  \njvelociter - (22:32): we've introduced that relatively recently  \njvelociter - (22:32): (for watchlist)  \nvmassol - (22:32): it says created by IRCBot  \njvelociter - (22:32): but I don't recall the rationale  \nvmassol - (22:32): http://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100507  \njvelociter - (22:32): but you have a user IRCBot, right ?  \nvmassol - (22:32): I don't think so  \njvelociter - (22:33): ah ok. just created by a user that does not exist  \nvmassol - (22:33): I think so....  \njvelociter - (22:34): I think using \"incarnated\" bots with \"real\" users (name, picture) can work for apps, sometimes  \nvmassol - (22:34): ok found the place  \nvmassol - (22:34): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc.author = \"IRCBot\"  \nvmassol - (22:34): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc.title = \"IRC Archive for channel ${channel}\"  \nvmassol - (22:34): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0xwiki.saveDocument(doc, \"Logging from IRC\", true, context)  \njvelociter - (22:34): but I'm wondering by default what we recomment  \njvelociter - (22:35): (when I say bot it's anything that can create documents automatically, like the watchlist thread, or class creation, etc)  \nldubost left at 22:36 (Quit: ldubost  \nvmassol - (22:37): I don't know, we need to define this.  \njvelociter - (22:40): yes. thought we had because of the superadmin thing (which is more or less recent), but maybe we just fixed something and didn't talk it through  \nvmassol - (22:41): I think we decided for superadmin for default pages  \nvmassol - (22:41): (pages in the default XE)  \nvmassol - (22:41): got to go, bbl  \nannacondan left at 22:50 (Quit: annacondan  \nmflorea left at 22:58 (Quit: Leaving.  \nSvenDowideit\\_ joined #xwiki at 23:03  \nSvenDowideit left at 23:06 (Ping timeout: 276 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nnpm left at 23:46 (Quit: Leaving.  \nnpm joined #xwiki at 23:57  \n\n"}