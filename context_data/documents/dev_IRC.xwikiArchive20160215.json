{"id": "dev:IRC.xwikiArchive20160215", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160215", "title": "IRC Archive for channel #xwiki on 15 February 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<ekarlso>\u00a0has quit  \n00:37\u00a0<ekarlso>\u00a0has joined #xwiki  \n00:48\u00a0<abusenius\\_>\u00a0has quit  \n05:41\u00a0<mflorea>\u00a0has joined #xwiki  \n07:20\u00a0<msmeria>\u00a0has joined #xwiki  \n07:58\u00a0<mflorea>\u00a0has quit  \n08:03\u00a0<lynxt>\u00a0has quit  \n08:03\u00a0<tillo>\u00a0has quit  \n08:04\u00a0<lynxt>\u00a0has joined #xwiki  \n08:05\u00a0<tillo>\u00a0has joined #xwiki  \n08:06\u00a0<vmassol>\u00a0has joined #xwiki  \n08:13\u00a0<Aranjedeath>\u00a0has quit  \n08:13\u00a0<cjd\\_>\u00a0has quit  \n08:48\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:58\u00a0<cjd>\u00a0has joined #xwiki  \n09:18\u00a0<mflorea>\u00a0has joined #xwiki  \n09:50\u00a0<helge>\u00a0has joined #xwiki  \n09:53\u00a0<helge>\u00a0Good Morning, I want a script to create a sibling of the current nested document. So I need to get the parent of the doc but cant figure out how to retreive it from any nested doc. Can somebody advise?  \n10:03\u00a0<vmassol>\u00a0helge: the ref to the parent of the current doc is $doc.documentReference.parent in velocity  \n10:06\u00a0<vmassol>\u00a0this should do it: $services.model.createEntityReference('test', 'DOCUMENT', $doc.documentReference.parent)  \n10:07\u00a0<vmassol>\u00a0now added to http://extensions.xwiki.org/xwiki/bin/view/Extension/Model+Module#HScriptServiceAPI  \n10:08\u00a0<vmassol>\u00a0helge: then you do $xwiki.getDocument($ref) and then $mydoc.save(\u2026)  \n10:09\u00a0<vmassol>\u00a0helge: another option: $services.model.resolveDocument('test', $doc.documentReference.parent)  \n10:10\u00a0<vmassol>\u00a0which is probably simpler and better  \n10:12\u00a0<vmassol>\u00a0actually even simpler: $services.model.resolveDocument('siblingpage', $doc.documentReference)  \n10:14\u00a0<vmassol>\u00a0it'll fill the blanks of the passed ref with the values fro $doc.documentReference  \n10:14\u00a0<vmassol>\u00a0since the page name is set ('silbingpage'), it'll be used  \n10:15\u00a0<vmassol>\u00a0and since the other parts are not set (spaces and wiki), it'll get copied from the passed $doc.documentReference  \n10:15\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:16\u00a0<Slashman>\u00a0has joined #xwiki  \n10:17\u00a0<helge>\u00a0has quit  \n10:18\u00a0<acotiuga>\u00a0has joined #xwiki  \n10:21\u00a0<helge>\u00a0has quit  \n10:27\u00a0<acotiuga>\u00a0has quit  \n10:28\u00a0<acotiuga>\u00a0has joined #xwiki  \n10:28\u00a0<benoitc>\u00a0has quit  \n10:30\u00a0<benoitc>\u00a0has joined #xwiki  \n10:32\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:34\u00a0<evalica>\u00a0has joined #xwiki  \n11:16\u00a0<vmassol>\u00a0acotiuga: good morning  \n11:17\u00a0<acotiuga>\u00a0good morning  \n11:17\u00a0<vmassol>\u00a0acotiuga: thanks for letting me realize that I should update the \"creating a jira project\" section :)  \n11:17\u00a0<vmassol>\u00a0done now at http://dev.xwiki.org/xwiki/bin/view/Community/DevelopmentPractices#HCreatingaJIRAproject  \n11:18\u00a0<helge>\u00a0has joined #xwiki  \n11:19\u00a0<helge>\u00a0vmassol: sorry, was kicked out due to network issues  \n11:19\u00a0<helge>\u00a0many thanks for your advice, though.  \n11:19\u00a0<vmassol>\u00a0helge: could you see what =I wrote?  \n11:19\u00a0<vmassol>\u00a0ok  \n11:19\u00a0<helge>\u00a0I will check the irc log and see.  \n11:20\u00a0<vmassol>\u00a0http://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160215  \n11:21\u00a0<helge>\u00a0That simple? Looks great, going to try it out. Thanks again.  \n11:23\u00a0<silverdrop>\u00a0has joined #xwiki  \n11:27\u00a0<vmassol>\u00a0yw  \n12:51\u00a0<Denis>\u00a0has joined #xwiki  \n13:06\u00a0<helge>\u00a0vmassol: when I am on test:A.B.C(.WebHome) and do $doc.documentReference.parent the output is test:A.B.C  \n13:08\u00a0<helge>\u00a0This holds me from creating a sibling. I guess it should work form terminal pages but does not from nested documents.  \n13:11\u00a0<helge>\u00a0$services.model.resolveDocument('sibling', $doc.documentReference.parent) creates a child document, not an actual sibling from a nested doc  \n13:14\u00a0<helge>\u00a0Not shure if \"child\" is right. In my example it creates test:A.B.C.sibling  \n13:15\u00a0<helge>\u00a0What I want was test:A.B.sibling  \n13:15\u00a0<vmassol>\u00a0if you're on A.B.C.WebHome then a silbing of WebHome is A.B.C.Sibling  \n13:16\u00a0<helge>\u00a0Ok, got that. But how can I create A.B.sibling from A.B.C when C is a nested doc?  \n13:16\u00a0<vmassol>\u00a0what you want is that if you're on A.B.C.WebHome, then create A.B.Sibling.WebHome right?  \n13:17\u00a0<helge>\u00a0exactly  \n13:17\u00a0<vmassol>\u00a0ok then you need to go a level up  \n13:17\u00a0<vmassol>\u00a0let me write it on playground  \n13:19\u00a0<vmassol>\u00a0do you also need it work on terminal pages? (that's more complex if you need that)  \n13:19\u00a0<helge>\u00a0no, nested is the future :)  \n13:21\u00a0<vmassol>\u00a0:)  \n13:23\u00a0<vmassol>\u00a0note that I'm not an expert in the latest tools/resolver we have and it's possible that there's a simpler way. It seems we do need a special resolver for this use case will be more frequent now  \n13:23\u00a0<vmassol>\u00a0(unless it already exists and I don't know about it)  \n13:25\u00a0<vmassol>\u00a0helge: so this should work:  \n13:25\u00a0<vmassol>\u00a0$services.model.resolveDocument('', 'default', $doc.documentReference.parent.parent)  \n13:26\u00a0<vmassol>\u00a0ofc to be perfect you'll need to verify that you're on 2 level deep at least so that .parent.parent works and the first .parent doesn't return null ;)  \n13:26\u00a0<vmassol>\u00a0note that I've used a default resolver to not have to hardcode the name 'WebHome' ;)  \n13:26\u00a0<vmassol>\u00a0(that's why I've passed '')  \n13:27\u00a0<vmassol>\u00a0I'll leave it to you to decide what to do when you're on A.WebHome and you wish to compute a \"sibling\"  \n13:28\u00a0<vmassol>\u00a0(I mean test:A.WebHome)  \n13:29\u00a0<helge>\u00a0vmassol: great, seams to work for me for the moment. I try to build my app and let you know. Thank you once again!  \n13:29\u00a0<vmassol>\u00a0FWIW if you're on test:A.WebHome, it'll return test:Main.WebHome  \n13:29\u00a0<vmassol>\u00a0the reason is that .parent.parent will return the wiki reference  \n13:30\u00a0<vmassol>\u00a0(it won't be null)  \n13:30\u00a0<vmassol>\u00a0and since no space is mentioned the default resolver will use \"Main\"  \n13:30\u00a0<helge>\u00a0so that shall work, too.  \n13:31\u00a0<vmassol>\u00a0at least it'll never fail :)  \n14:14\u00a0<ClemensR1>\u00a0has joined #xwiki  \n14:21\u00a0<woshilapin>\u00a0has joined #xwiki  \n14:38\u00a0<gdelhumeau>\u00a0Hello  \n14:38\u00a0<gdelhumeau>\u00a0I'm wondering, why do we have an EditModeClass object on Main.WebHome on XE?  \n14:38\u00a0<gdelhumeau>\u00a0with the value \"edit\"  \n14:39\u00a0<vmassol>\u00a0to force the edit mode  \n14:39\u00a0<vmassol>\u00a0as otherwise you'd go in form mode when you press edit  \n14:39\u00a0<gdelhumeau>\u00a0OK  \n14:39\u00a0<vmassol>\u00a0(with the ugly warning displayed and the hard to edit dashboard)  \n14:39\u00a0<gdelhumeau>\u00a0indeed that's why it's not \"inline\"  \n15:06\u00a0<msmeria>\u00a0has quit  \n15:20\u00a0<Denis2>\u00a0has joined #xwiki  \n15:22\u00a0<benoitc\\_>\u00a0has joined #xwiki  \n15:24\u00a0<benoitc>\u00a0has quit  \n15:24\u00a0<Denis>\u00a0has quit  \n15:25\u00a0<Slashman>\u00a0has joined #xwiki  \n15:25\u00a0<benoitc\\_>\u00a0is now known as <benoitc>  \n16:24\u00a0<meatcar\\_>\u00a0has joined #xwiki  \n16:25\u00a0<meatcar>\u00a0has quit  \n17:55\u00a0<vmassol>\u00a0has quit  \n17:55\u00a0<vmassol>\u00a0has joined #xwiki  \n18:12\u00a0<gdelhumeau>\u00a0has quit  \n18:15\u00a0<acotiuga>\u00a0has quit  \n18:16\u00a0<woshilapin>\u00a0has quit  \n18:16\u00a0<mflorea>\u00a0has quit  \n18:33\u00a0<Enygma`>\u00a0has quit  \n18:34\u00a0<evalica>\u00a0has quit  \n18:57\u00a0<KermitTheFragger>\u00a0has quit  \n19:00\u00a0<ClemensR1>\u00a0has quit  \n19:09\u00a0<vmassol>\u00a0has quit  \n19:10\u00a0<vmassol>\u00a0has joined #xwiki  \n19:21\u00a0<woshilapin>\u00a0has joined #xwiki  \n19:53\u00a0<woshilapin>\u00a0has quit  \n20:39\u00a0<cjd>\u00a0has quit  \n20:43\u00a0<Slashman>\u00a0has quit  \n21:30\u00a0<mflorea>\u00a0has joined #xwiki  \n21:43\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n21:54\u00a0<vmassol>\u00a0has quit  \n22:11\u00a0<helge>\u00a0has quit  \n22:36\u00a0<mflorea>\u00a0has quit\n"}