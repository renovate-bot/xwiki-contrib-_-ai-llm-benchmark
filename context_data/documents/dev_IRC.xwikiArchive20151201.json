{"id": "dev:IRC.xwikiArchive20151201", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20151201", "title": "IRC Archive for channel #xwiki on 01 December 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n06:01\u00a0<Denis>\u00a0has quit  \n06:02\u00a0<Denis>\u00a0has joined #xwiki  \n08:24\u00a0<cjd>\u00a0has quit  \n08:46\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:54\u00a0<woshilapin>\u00a0has quit  \n08:57\u00a0<KermitTheFragger>\u00a0has quit  \n08:59\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:06\u00a0<cjd>\u00a0has joined #xwiki  \n09:08\u00a0<KermitTheFragger>\u00a0has quit  \n09:09\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:10\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:37\u00a0<KermitTheFragger>\u00a0has quit  \n09:41\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:45\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:45\u00a0<KermitTheFragger>\u00a0has quit  \n09:50\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:59\u00a0<tmortagne>\u00a0has quit  \n10:01\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:08\u00a0<vmassol>\u00a0has joined #xwiki  \n10:09\u00a0<vmassol>\u00a0good morning  \n10:09\u00a0<Slashman>\u00a0has joined #xwiki  \n10:20\u00a0<Inge->\u00a0Morning :)  \n10:20\u00a0<ekarlso>\u00a0SEVERE: IOException while loading persisted sessions: java.io.EOFException < anyone seen that ?  \n10:21\u00a0<ekarlso>\u00a0I tried to upgrade but my whole instance blew up  \n10:21\u00a0<ekarlso>\u00a0I am in a ROOT installation  \n10:22\u00a0<vmassol>\u00a0morning  \n10:22\u00a0<vmassol>\u00a0ekarlso: you're not providing enough information to help you. This looks like a container error not an XWiki one.  \n10:25\u00a0<vmassol>\u00a0if you can have a full stack trace of the problem maybe we can help you.  \n10:28\u00a0<ekarlso>\u00a0http://pastebin.com/hFQuUcFL  \n10:30\u00a0<vmassol>\u00a0ok so the reason is:  \n10:30\u00a0<vmassol>\u00a0Caused by: org.infinispan.jmx.JmxDomainConflictException: ISPN000034: There's already a JMX MBean instance type=CacheManager,name=\"xwiki\" already registered under 'org.xwiki.infinispan' JMX domain. If you want to allow multiple instances configured with same JMX domain enable 'allowDuplicateDomains' attribute in 'globalJmxStatistics' config element  \n10:30\u00a0<vmassol>\u00a0did you try what is suggsted?  \n10:31\u00a0<ekarlso>\u00a0vmassol: the performance stuff ? yes, but I tried to upgrade the xwiki instance first and it blew  \n10:32\u00a0<vmassol>\u00a0?  \n10:32\u00a0<vmassol>\u00a0you said you had an error and you pasted the stack trace  \n10:32\u00a0<vmassol>\u00a0look at what you pasted  \n10:32\u00a0<vmassol>\u00a0you'll see the error which I have pasted above  \n10:33\u00a0<vmassol>\u00a0\"If you want to allow multiple instances configured with same JMX domain enable 'allowDuplicateDomains' attribute in 'globalJmxStatistics' config element\"  \n10:33\u00a0<vmassol>\u00a0you can find the config in WEB-INF/cache/infinispan/config.xml  \n10:33\u00a0<tmortagne>\u00a0ekarlso: is it expected that you have multiple instances of XWiki running ?  \n10:34\u00a0<vmassol>\u00a0now you should \u00a0report this on jira since it means we're registering something twice  \n10:34\u00a0<vmassol>\u00a0(unless you have several instances running in the same container)  \n10:34\u00a0<tmortagne>\u00a0vmassol: I don't think we have this issue by default, it would break all the tests  \n10:34\u00a0<vmassol>\u00a0ok  \n10:35\u00a0<tmortagne>\u00a0org.xwiki.infinispan is what contain all the XWiki standard cache  \n10:35\u00a0<ekarlso>\u00a0no, I only have 1 instance  \n10:35\u00a0<tmortagne>\u00a0not the kind of thing that is unnoticed when it break  \n10:36\u00a0<ekarlso>\u00a0but my /var/lib/tomcat7/webapps/ROOT should that look like: \u00a0index.html \u00a0META-INF  \n10:37\u00a0<tmortagne>\u00a0do you completely restart Tomcat ? Configuration reload does not always work well with XWiki  \n10:38\u00a0<ekarlso>\u00a0tmortagne: service tomcat7 restart  \n10:38\u00a0<ekarlso>\u00a0yets  \n10:38\u00a0<vmassol>\u00a0not restart, stop the container  \n10:38\u00a0<vmassol>\u00a0and start it agai  \n10:38\u00a0<vmassol>\u00a0\\*again  \n10:38\u00a0<tmortagne>\u00a0it should be the same thing  \n10:38\u00a0<vmassol>\u00a0(just to be sure)  \n10:39\u00a0<tmortagne>\u00a0the only explanations I have for this error is two instances of XWiki running on the same JVM  \n10:39\u00a0<vmassol>\u00a0you could do a ps -ef to find out  \n10:39\u00a0<ekarlso>\u00a0hmm, but if I had a root install, then upgraded will that place 2x installs kind of in the tomcat instance ?  \n10:41\u00a0<tmortagne>\u00a0vmassol: same JVM  \n10:41\u00a0<vmassol>\u00a0ah yes my bad osrry  \n10:42\u00a0<vmassol>\u00a0\\*sorry  \n10:42\u00a0<tmortagne>\u00a0ekarlso: depend what you mean exactly by upgrade  \n10:42\u00a0<tmortagne>\u00a0how did you upgraded XWiki ?  \n10:42\u00a0<vmassol>\u00a0ekarlso: then you can check your webapps directory and see if you have 2 xwiki there  \n10:43\u00a0<vmassol>\u00a0(containere's webapp dir that is)  \n10:43\u00a0<vmassol>\u00a0(or check your container admin console to see what's deployed to verify only 1 xwiki is deployed)  \n10:43\u00a0<tmortagne>\u00a0if you used Debian packages you might want to look at the warning in http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationViaAPT#HXWikiasrootwebapp  \n10:49\u00a0<ekarlso>\u00a0OMG :p  \n10:49\u00a0<ekarlso>\u00a0\\*stupid face\\*  \n10:50\u00a0<ekarlso>\u00a0someone slap me with a french baguette please .)  \n11:00\u00a0<ekarlso>\u00a0I put together a ansible role btw for deploying tomcat  \n11:03\u00a0<ekarlso>\u00a0should it do \"Starting LDAP auth\" on each req btw ?  \n11:12\u00a0<tmortagne>\u00a0ekarlso: depends what you have after, if it's something about \"a null user so it won't do anything\" yes it's just something for SSO authenticators to have a chance to do something before the user is read from the sessions  \n11:13\u00a0<tmortagne>\u00a0if you get a tons of log describing a real auth then you have an issue  \n11:18\u00a0<ekarlso>\u00a0http://pastebin.com/nik47gDS < gettign this now trying to update components  \n11:18\u00a0<ekarlso>\u00a0why does it say proxy, I never configured a proxy  \n11:22\u00a0<tmortagne>\u00a0ekarlso: can't really tell you much, the error indicate that when XWiki (from the server where it's installed) try to reach outside it got kicked by a proxy so looks like there is one somewhere between you and nexus.xwiki.org  \n11:27\u00a0<ekarlso>\u00a0tmortagne: I think you have a problem :)  \n11:27\u00a0<ekarlso>\u00a0http://nexus.xwiki.org/nexus < is blowing up from 3 different endpoitns from my side  \n11:27\u00a0<ekarlso>\u00a0it just \"hangs\"  \n11:27\u00a0<tmortagne>\u00a0indeed looks like the server is down  \n11:27\u00a0<tmortagne>\u00a0reporting it  \n11:28\u00a0<ekarlso>\u00a0I'm guessing the /nexus is reverse proxied since http://nexus.xwiki.org works  \n11:28\u00a0<tmortagne>\u00a0thanks for the report, should be fixed quickly  \n11:32\u00a0<tmortagne>\u00a0ekarlso: should be ok now  \n11:36\u00a0<ekarlso>\u00a0hmm, getting Installed version 7.2 is not valid Hide details  \n11:36\u00a0<ekarlso>\u00a0when hitting upgrade in the dist version  \n11:39\u00a0<ekarlso>\u00a0something to be concerned about ?  \n11:47\u00a0<tmortagne>\u00a07.2 is invalid because it's not compatible with your WAR (I guess you moved to 7.3), that's all  \n11:48\u00a0<vmassol>\u00a0(the mesage is misleading indeed, I had the same problem in the past too)  \n11:55\u00a0<ekarlso>\u00a0is this how xwiki looks by default ? http://wiki.creator.no/bin/view/Main/  \n11:55\u00a0<ekarlso>\u00a0I thought it looked more diff  \n11:56\u00a0<tmortagne>\u00a0ekarlso: you seems to be missing most standard pages  \n11:57\u00a0<tmortagne>\u00a0this looks like a totally empty wiki  \n11:57\u00a0<tmortagne>\u00a0(i.e. only the WAR)  \n11:57\u00a0<ekarlso>\u00a0tmortagne: is there any way to provision that ?  \n11:58\u00a0<tmortagne>\u00a0that's Distribution Wizard job that you are supposed to get as soon as you access your wiki  \n12:00\u00a0<vmassol1>\u00a0has joined #xwiki  \n12:00\u00a0<vmassol>\u00a0has quit  \n12:01\u00a0<ekarlso>\u00a0tmortagne: no way to force that ?  \n12:02\u00a0<tmortagne>\u00a0ekarlso: you did not get anything or you skipped it ?  \n12:02\u00a0<tmortagne>\u00a0what is weird is that if that's an upgrade you should have the previous pages  \n12:02\u00a0<tmortagne>\u00a0unless it was like that before  \n12:03\u00a0<ClemensR>\u00a0has joined #xwiki  \n12:06\u00a0<ekarlso>\u00a0whaaa, I dont have a Admin user either P  \n12:06\u00a0<ekarlso>\u00a0is there any way to get one ?  \n12:10\u00a0<tmortagne>\u00a0is this a new install or an upgrade  \n12:10\u00a0<tmortagne>\u00a0?  \n12:10\u00a0<tmortagne>\u00a0looks like a new install  \n12:10\u00a0<tmortagne>\u00a0if the wiki is totally empty I don't see how it can be an upgrade  \n12:11\u00a0<tmortagne>\u00a0maybe you have the wrong hibernate conf or something  \n12:12\u00a0<vmassol>\u00a0has joined #xwiki  \n12:12\u00a0<vmassol1>\u00a0has quit  \n12:12\u00a0<Pbas>\u00a0has quit  \n12:12\u00a0<tmortagne>\u00a0you should probably double check your /etc/xwiki/hibernate.cfg.xml file  \n12:12\u00a0<tmortagne>\u00a0that's if it's an upgrade  \n12:30\u00a0<ekarlso>\u00a0tmortagne: hmm, is there a way to force the dist wizard to run again ?  \n12:33\u00a0<ClemensR>\u00a0yes, remove the status file of the DW (let me look where it is ...)  \n12:34\u00a0<ClemensR>\u00a0in the PermDir under jobs/status/distribution/status.xml \u00a0... I think you can just move this aside , restart the server and get the DW again  \n12:35\u00a0<Pbas>\u00a0has joined #xwiki  \n12:35\u00a0<ClemensR>\u00a0PermDir = what you have configured the \"environment.permanentDirectory\" in xwiki.properties  \n12:36\u00a0\\*\u00a0ClemensR trying locally if it actually works ...  \n12:37\u00a0<ClemensR>\u00a0oh, hm, no, does not work for me, but likely because all content is already upgraded  \n12:38\u00a0<ClemensR>\u00a0ah, yes, thats why, the DW actually did run, but figured out it had nothing to do  \n12:38\u00a0<MasterPiece>\u00a0has joined #xwiki  \n13:05\u00a0<lynxt>\u00a0has quit  \n13:06\u00a0<lynxt>\u00a0has joined #xwiki  \n13:57\u00a0<tmortagne>\u00a0ClemensR: yes you don't get the DW if there is nothing to do  \n13:57\u00a0<tmortagne>\u00a0deleting the status is mostly about status having CANCEL for some steps  \n14:35\u00a0<xwikiorg\\_guest\\_5>\u00a0has joined #xwiki  \n14:57\u00a0<xwikiorg\\_guest\\_5>\u00a0Hello, just made a XWiki install on Tomcat, Windows with MySQL 5.7.9. Result is a few server errors and the first one is about a SQL syntax problem, concerning the use of \"type=InnoDB\" in a query. It seems \"type\" has been deprecated and replaced by \"engine\". Is this issue known? Should I downgrade to an earlier version of MySQL? Or perhaps is it possible to modify the SQL query? Or did I miss something? Many thanks  \n15:04\u00a0<ClemensR>\u00a0oh, where does the code mention InnoDB explitely? methinks it should not do that ... (away looking at the code)  \n15:06\u00a0<ClemensR>\u00a0hm, not mentiones axplicitely, phew. maybe it is in the config and just needs to be updated?  \n15:09\u00a0<xwikiorg\\_guest\\_5>\u00a0Hello Clemens, well I was unsure at where to look at. Been browsing around a bit but could find anything yet. Perhaps a misinterpretation of the error on my side  \n15:09\u00a0<xwikiorg\\_guest\\_5>\u00a0Here is a pastebin of my error log  \n15:09\u00a0<xwikiorg\\_guest\\_5>\u00a0http://pastebin.com/QxRhCUN9  \n15:09\u00a0<xwikiorg\\_guest\\_5>\u00a0sorry the formating is terrible  \n15:11\u00a0<ClemensR>\u00a0xwikiorg\\_guest\\_5: do you know where the hibernate.cfg.xml \u00a0for that XWki instance is located ?  \n15:12\u00a0<tmortagne>\u00a0xwikiorg\\_guest\\_5: what version of the mysql connector are you using ? I don't think XWiki is using things like \"type=InnoDB\" explicitely but the connector might  \n15:13\u00a0<tmortagne>\u00a0hmm actually it might come from the very old version of hibernate XWiki is using  \n15:14\u00a0<tmortagne>\u00a0the hibernate conf usually use org.hibernate.dialect.MySQL5InnoDBDialect dialect  \n15:14\u00a0<tmortagne>\u00a0and I guess org.hibernate.dialect.MySQL5InnoDBDialect is the one using this  \n15:14\u00a0<vmassol>\u00a0(sorry for the spam above)  \n15:14\u00a0<vmassol>\u00a0(we had an issue with jeanS which I had to fix)  \n15:14\u00a0<tmortagne>\u00a0if our version of Hibernate makes impossible to use last version of MySQL looks like upgrading it will become a lot more blocker  \n15:15\u00a0<xwikiorg\\_guest\\_5>\u00a0it looks like I forgot the 5  \n15:15\u00a0<sdumitriu>\u00a0has quit  \n15:15\u00a0<xwikiorg\\_guest\\_5>\u00a0in MySQL5InnoDBDialect  \n15:15\u00a0<ClemensR>\u00a0ah, phew  \n15:15\u00a0<xwikiorg\\_guest\\_5>\u00a0I'll try again  \n15:15\u00a0<tmortagne>\u00a0ok I could be it then  \n15:15\u00a0<ClemensR>\u00a0hope it works with the 5 :)  \n15:16\u00a0<tmortagne>\u00a0s/I/that/  \n15:16\u00a0<tmortagne>\u00a0me too  \n15:16\u00a0<tmortagne>\u00a0(eve if it would have been a good excuse to push for hibernate upgrade)  \n15:17\u00a0<ol-ow2>\u00a0has joined #xwiki  \n15:20\u00a0<ol-ow2>\u00a0hello, i've a class A, sheet A and template A, but i would like have a diffrente display and edit between each space ( A & B).  \n15:20\u00a0<ol-ow2>\u00a0xwiki 6.4  \n15:22\u00a0<cjd>\u00a0#if($doc.getSpace() == 'X') \u00a0{{include document=\"CodeSpace.ASheetForSpaceX\" /}} #end  \n15:22\u00a0<tmortagne>\u00a0same answer  \n15:22\u00a0<cjd>\u00a0I'm not entirely sure if that works but it seems like the right general approach  \n15:22\u00a0<xwikiorg\\_guest\\_5>\u00a0I got to the install wizard, my mistake (it was the missing '5' indeed). Thanks a lot for the quick response :)  \n15:22\u00a0<ClemensR>\u00a0glad to be able to help, and glad it works now :)  \n15:22\u00a0<ol-ow2>\u00a0thanks cjd & tmortagne  \n15:23\u00a0<tmortagne>\u00a0xwikiorg\\_guest\\_5: ok great, from where did you picked the wrong class ?  \n15:23\u00a0<ol-ow2>\u00a0i'll try this  \n15:23\u00a0<cjd>\u00a0Sure thing  \n15:27\u00a0<xwikiorg\\_guest\\_5>\u00a0Just checked the guide I followed, it has it right. Comments have it right as well. I did that yesterday so I can't recall, but I might have simply made a mistake by writing it by hand. Duh, I should have used the VM copypaste share (or the commented lines..)  \n15:30\u00a0<xwikiorg\\_guest\\_5>\u00a0anyway thanks! I'll be finishing my install  \n15:30\u00a0<tmortagne>\u00a0xwikiorg\\_guest\\_5: ok thanks for checking  \n15:31\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:00\u00a0<tmortagne>\u00a0has quit  \n16:03\u00a0<vmassol>\u00a0could be interesting to start using javax.annotation.concurrent.NotThreadSafe to mark not threadsafe code  \n16:05\u00a0<[d\\_\\_d]>\u00a0has quit  \n16:05\u00a0<vmassol>\u00a0same for javax.annotation.concurrent.Immutable  \n16:09\u00a0<xwikiorg\\_guest\\_5>\u00a0has quit  \n16:13\u00a0<[d\\_\\_d]>\u00a0has joined #xwiki  \n16:29\u00a0<vmassol>\u00a0going to commit the first version of the VFS module  \n16:32\u00a0<D-Spair>\u00a0has quit  \n16:53\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:11\u00a0<[d\\_\\_d]>\u00a0has quit  \n17:12\u00a0<ekarlso>\u00a0vmassol: how can I disable the register link ?  \n17:13\u00a0<vmassol>\u00a0first link in google  \n17:13\u00a0<vmassol>\u00a0\"xwiki how can i disable the register link\"  \n17:28\u00a0<ekarlso>\u00a0vmassol: meh, so I need to edit template  \n17:28\u00a0<ekarlso>\u00a0=  \n17:30\u00a0<vmassol>\u00a0nope  \n17:31\u00a0<vmassol>\u00a0first link for me is http://jira.xwiki.org/browse/XWIKI-2695  \n17:31\u00a0<vmassol>\u00a0read the comments  \n17:31\u00a0<vmassol>\u00a0sorry I don't have time to explain more  \n17:32\u00a0<ekarlso>\u00a0vmassol: thnx man !  \n17:33\u00a0<vmassol>\u00a0np  \n17:34\u00a0<KermitTheFragger>\u00a0has quit  \n17:35\u00a0<vmassol1>\u00a0has joined #xwiki  \n17:50\u00a0<ol-ow2>\u00a0has quit  \n17:56\u00a0<[d\\_\\_d]>\u00a0has joined #xwiki  \n18:10\u00a0<[d\\_\\_d]>\u00a0has quit  \n18:12\u00a0<cjd>\u00a0has quit  \n18:15\u00a0<woshilapin>\u00a0has quit  \n18:39\u00a0<vmassol1>\u00a0has quit  \n18:41\u00a0<vmassol>\u00a0has joined #xwiki  \n18:42\u00a0<ClemensR>\u00a0has quit  \n18:49\u00a0<[d\\_\\_d]>\u00a0has joined #xwiki  \n18:53\u00a0<tmortagne>\u00a0has quit  \n18:55\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:57\u00a0<[d\\_\\_d]>\u00a0has quit  \n18:59\u00a0<tmortagne>\u00a0has quit  \n19:08\u00a0<cjd>\u00a0has joined #xwiki  \n19:17\u00a0<[d\\_\\_d]>\u00a0has joined #xwiki  \n19:17\u00a0<vmassol>\u00a0has quit  \n19:18\u00a0<woshilapin>\u00a0has joined #xwiki  \n19:28\u00a0<tmortagne>\u00a0has joined #xwiki  \n19:30\u00a0<vmassol>\u00a0has joined #xwiki  \n19:31\u00a0<vmassol>\u00a0has quit  \n19:34\u00a0<tmortagne>\u00a0has quit  \n19:36\u00a0<abusenius>\u00a0has joined #xwiki  \n20:27\u00a0<tmortagne>\u00a0has joined #xwiki  \n20:28\u00a0<tmortagne>\u00a0has quit  \n20:41\u00a0<sorinello>\u00a0has quit  \n23:27\u00a0<Slashman>\u00a0has quit  \n23:29\u00a0<abusenius>\u00a0has quit  \n23:41\u00a0<OSIMasson>\u00a0has joined #xwiki  \n23:56\u00a0<MasterPiece>\u00a0has quit\n"}