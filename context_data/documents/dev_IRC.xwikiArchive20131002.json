{"id": "dev:IRC.xwikiArchive20131002", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20131002", "title": "IRC Archive for channel #xwiki on 02 October 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<UCC>\u00a0has quit  \n00:49\u00a0<abusenius>\u00a0has quit  \n01:50\u00a0<cjd>\u00a0has quit  \n01:51\u00a0<cjd>\u00a0has joined #xwiki  \n07:07\u00a0<cjd>\u00a0has quit  \n07:11\u00a0<cjd>\u00a0has joined #xwiki  \n07:20\u00a0<msmeria>\u00a0has joined #xwiki  \n07:25\u00a0<vmassol>\u00a0has joined #xwiki  \n07:48\u00a0<vmassol>\u00a0has quit  \n08:22\u00a0<polx>\u00a0has joined #xwiki  \n08:34\u00a0<polx>\u00a0has quit  \n08:35\u00a0<UCC>\u00a0has joined #xwiki  \n08:48\u00a0<polx>\u00a0has joined #xwiki  \n08:49\u00a0<mflorea>\u00a0has joined #xwiki  \n08:58\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:00\u00a0<sburjan>\u00a0has joined #xwiki  \n09:22\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:32\u00a0<polx>\u00a0has quit  \n09:35\u00a0<evalica>\u00a0has joined #xwiki  \n09:35\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:36\u00a0<polx>\u00a0has joined #xwiki  \n09:42\u00a0<polx>\u00a0has quit  \n10:09\u00a0<polx>\u00a0has joined #xwiki  \n10:14\u00a0<camil7>\u00a0has joined #xwiki  \n10:27\u00a0<vmassol>\u00a0has joined #xwiki  \n10:32\u00a0<polx>\u00a0has quit  \n10:33\u00a0<vmassol1>\u00a0has joined #xwiki  \n10:35\u00a0<vmassol>\u00a0has quit  \n10:51\u00a0<sburjan`>\u00a0has quit  \n10:59\u00a0<sburjan`>\u00a0has joined #xwiki  \n11:10\u00a0<vmassol1>\u00a0has quit  \n11:21\u00a0<Slashman>\u00a0has joined #xwiki  \n11:21\u00a0<mflorea>\u00a0tmortagne: you have opened issues planned for 5.2 http://jira.xwiki.org/issues/?jql=Project%20in%20%28%22XWiki%20Commons%22%2C%20%22XWiki%20Rendering%22%2C%20%22XWiki%20Platform%22%2C%20%22XWiki%20Enterprise%22%29%20and%20fixVersion%20in%20%28%225.2%22%29%20and%20resolution%20in%20%28%22Unresolved%22%29  \n11:22\u00a0<mflorea>\u00a0do you know how mush time you need to close them, if you still plan to close them for 5.2.  \n11:24\u00a0<tmortagne>\u00a0mflorea: I'm closing them right now  \n11:24\u00a0<mflorea>\u00a0ok, thanks  \n11:24\u00a0<tmortagne>\u00a0I was just keeping them open while improving and writing test but the first version is done  \n11:25\u00a0<tmortagne>\u00a0done  \n11:26\u00a0<mflorea>\u00a0now we need to decide what to do with the remaining 2 blockers  \n11:26\u00a0<tmortagne>\u00a0I don't think XWIKI-9515 is blocker  \n11:26\u00a0<tmortagne>\u00a0we are talking about migrating something that was disabled by default and tagged as experimental  \n11:27\u00a0<tmortagne>\u00a0and cleaning the index is not a big deal  \n11:27\u00a0<mflorea>\u00a0yes, I don't think it's a blocker either, and Vincent added a note do the release notes  \n11:27\u00a0<gdelhumeau>\u00a0If I do @Inject XWikiStoreInterface in a component, will I have the default one or the currently used one (i.e. hibernate store)?  \n11:28\u00a0<mflorea>\u00a0you'll get the one that has \"default\" hint (i.e. that has no hint specified)  \n11:29\u00a0<mflorea>\u00a0the implementation that is not annotated with @Named  \n11:30\u00a0<tmortagne>\u00a0gdelhumeau: there is no notion of current component  \n11:30\u00a0<gdelhumeau>\u00a0so, do I have an alternative to xwiki.getStore() ?  \n11:30\u00a0<tmortagne>\u00a0not a standard one anyway, you could imagine a XWikiStoreInterface registered for hint \"default\" and calling the configured XWikiStoreInterface  \n11:31\u00a0<tmortagne>\u00a0gdelhumeau: I don't think so  \n11:31\u00a0<gdelhumeau>\u00a0ok, thanks  \n11:31\u00a0<tmortagne>\u00a0you could introduce a Provider that look at the configuration if you feel it would be better on your side  \n11:31\u00a0<tmortagne>\u00a0it should be pretty easy to write  \n11:32\u00a0<gdelhumeau>\u00a0tmortagne: I don't know, I'm wondering if it is good to use XWikiContext and Wiki in an implemntation.  \n11:33\u00a0<tmortagne>\u00a0if you use XWikiStoreInterface you need XWikiContex anyway  \n11:33\u00a0<tmortagne>\u00a0it's not like getting injected with it would change much on that side  \n11:51\u00a0<polx>\u00a0has joined #xwiki  \n11:53\u00a0<UCC>\u00a0has quit  \n11:53\u00a0<UCC>\u00a0has joined #xwiki  \n12:08\u00a0<polx>\u00a0has quit  \n12:08\u00a0<polx>\u00a0has joined #xwiki  \n12:41\u00a0<vmassol>\u00a0has joined #xwiki  \n12:55\u00a0<mflorea>\u00a0has quit  \n12:56\u00a0<tmortagne>\u00a0guys would be nice to have reviews on http://jira.xwiki.org/browse/XWIKI-9176  \n12:59\u00a0<camil7>\u00a0I guess many are busy with the 5.2 release (?)  \n13:03\u00a0<tmortagne>\u00a0camil7: yep but there is a nice demo so it's easy to review  \n13:04\u00a0<camil7>\u00a0oh, spam  \n13:05\u00a0<tmortagne>\u00a0It looks like we have more and more spam  \n13:08\u00a0<camil7>\u00a0has left #xwiki  \n13:38\u00a0<camil7>\u00a0has joined #xwiki  \n13:51\u00a0<vmassol>\u00a0has quit  \n13:51\u00a0<mflorea>\u00a0has joined #xwiki  \n14:04\u00a0<vmassol>\u00a0has joined #xwiki  \n14:19\u00a0<mflorea>\u00a0vmassol: we have a blocker for 5.2, XWIKI-9438. I haven't followed the issue closely so I don't know if the problem is serious or not.  \n14:41\u00a0<vmassol>\u00a0back from meetings, catching up  \n14:44\u00a0<vmassol>\u00a0mflorea: yes it's a blocker because it's a regression. I wanted to look into it but didn't get the time. Trying to reproduce it now  \n14:44\u00a0<mflorea>\u00a0ok  \n14:45\u00a0<polx>\u00a0has quit  \n14:45\u00a0<polx>\u00a0has joined #xwiki  \n14:55\u00a0<ldubost>\u00a0has joined #xwiki  \n15:04\u00a0<gdelhumeau>\u00a0In my new API implementation, do you think we should keep the XWikiServerClass or should I create my own class (like XWiki.WikiClass)?  \n15:05\u00a0<vmassol>\u00a0you could create a new one but you'll need to still handle the old format too for backward compat  \n15:05\u00a0<tmortagne>\u00a0gdelhumeau: you should keep the same IMO or it's going to be a hell to migrate  \n15:05\u00a0<tmortagne>\u00a0and renaming it does not really bring anything  \n15:14\u00a0<gdelhumeau>\u00a0XWikiServerClassDocumentInitializer is located in oldcore in the \"mandatory\" package, should I move it to my new module?  \n15:16\u00a0<tmortagne>\u00a0gdelhumeau: yes probably  \n15:17\u00a0<gdelhumeau>\u00a0nice  \n15:28\u00a0<vmassol>\u00a0has quit  \n15:32\u00a0<vmassol>\u00a0has joined #xwiki  \n15:41\u00a0<vmassol>\u00a0sdumitriu: ping  \n15:45\u00a0<sdumitriu>\u00a0vmassol: Pong  \n15:45\u00a0<vmassol>\u00a0sdumitriu: I'm trying to fix XWIKI-5917  \n15:45\u00a0<vmassol>\u00a0would you remember why we use file:// in ExportURLFactory?  \n15:45\u00a0<vmassol>\u00a0(for example in createAttachmentURL())  \n15:46\u00a0<vmassol>\u00a0return new URI(\"file://\" + path.replace(\" \", \"%20\")).toURL();  \n15:46\u00a0<vmassol>\u00a0rather not just skipping the \"file://\" part  \n15:46\u00a0<vmassol>\u00a0s/not/than  \n15:46\u00a0<sdumitriu>\u00a0Because that's what the PDF export required  \n15:47\u00a0<sdumitriu>\u00a0Since FOP needs to have a location that it can access  \n15:47\u00a0<vmassol>\u00a0ok I see  \n15:47\u00a0<sdumitriu>\u00a0You recently changed the PDF export so that it knows how to get resources directly from the wiki  \n15:47\u00a0<sdumitriu>\u00a0Now that FOP doesn't require file:// anymore, you can change the ExportURLFactory  \n15:47\u00a0<sdumitriu>\u00a0Actually I don't know if that needs to exist anymore  \n15:48\u00a0<sdumitriu>\u00a0Maybe for OpenOffice export?  \n15:48\u00a0<vmassol>\u00a0indeed just checked and right now ExportURLFactory is only used by the Html export  \n15:48\u00a0<vmassol>\u00a0(HtmlPackager)  \n15:49\u00a0<sdumitriu>\u00a0vmassol: Gotta go, bb in 20 minutes  \n15:49\u00a0<vmassol>\u00a0k  \n15:49\u00a0<vmassol>\u00a0thanks  \n15:49\u00a0<vmassol>\u00a0I can progress now  \n15:50\u00a0<vmassol>\u00a0actually no, I still need to return a valid URL  \n16:03\u00a0<vmassol>\u00a0tmortagne: any idea why we need a full URL in XWikiWikiModel.getLinkURL()? If I were to change to not require a full URL any idea of what I would break?  \n16:04\u00a0<vmassol>\u00a0(I coded this part but I don't remember if I had any valid reason to ask for a full url)  \n16:05\u00a0<tmortagne>\u00a0vmassol: not sure  \n16:05\u00a0<tmortagne>\u00a0need to look at the code  \n16:06\u00a0<vmassol>\u00a0basically this means that for the view model we would get links with /xwiki/... instead of http://host/xwiki/...  \n16:07\u00a0<vmassol>\u00a0actually not even true I think  \n16:07\u00a0<vmassol>\u00a0it's correct actually  \n16:08\u00a0<tmortagne>\u00a0why do you say it require a valid URL ? it returns a String  \n16:08\u00a0<vmassol>\u00a0that was an answer to sergiu on something else  \n16:09\u00a0<vmassol>\u00a0it was about createAttachmentURL()  \n16:09\u00a0<vmassol>\u00a0if we were to not ask for a full URL in XWikWikiModel that would solve this issue  \n16:10\u00a0<vmassol>\u00a0the issue is that we can't support full urls for html exports  \n16:10\u00a0<vmassol>\u00a0since the attachments are relative to the html page  \n16:10\u00a0<tmortagne>\u00a0vmassol: I really don't see why this method should return full URL  \n16:10\u00a0<tmortagne>\u00a0it actually even sounds like a bug  \n16:10\u00a0<vmassol>\u00a0which method?  \n16:11\u00a0<vmassol>\u00a0createAttachmentURL()?  \n16:11\u00a0<tmortagne>\u00a0you are asking me about XWikiWikiModel.getLinkURL()  \n16:11\u00a0<vmassol>\u00a0yep  \n16:11\u00a0<vmassol>\u00a0ok  \n16:11\u00a0<vmassol>\u00a0so we seem in agreement  \n16:11\u00a0<tmortagne>\u00a0does it mean we have full URL all the time for attachment when rendering ?  \n16:11\u00a0<tmortagne>\u00a0that would be a important bug for me  \n16:11\u00a0<vmassol>\u00a0apparently yes  \n16:11\u00a0<vmassol>\u00a0why a bug?  \n16:12\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n16:12\u00a0<tmortagne>\u00a0because we should always use relative URL when possible  \n16:12\u00a0<vmassol>\u00a0ok then I'll change this since that makes it an easy fix for me  \n16:12\u00a0<tmortagne>\u00a0testing attachment rendering  \n16:12\u00a0<tmortagne>\u00a0I don't understand why we did not seen this before if that's the case  \n16:13\u00a0<tmortagne>\u00a0I don't get full URL in http://tuska.myxwiki.org/xwiki/bin/view/Test/Attachments  \n16:14\u00a0<tmortagne>\u00a0actually this is because of the regression introduce by sdumitriu  \n16:14\u00a0<tmortagne>\u00a0need to test before his comit  \n16:14\u00a0<vmassol>\u00a0yup  \n16:14\u00a0<tmortagne>\u00a0of in snapshot  \n16:14\u00a0<tmortagne>\u00a0or  \n16:15\u00a0<vmassol>\u00a0just tested locally on snapshot  \n16:15\u00a0<vmassol>\u00a0and indeed it's a full url  \n16:15\u00a0<vmassol>\u00a0I'll fix this  \n16:18\u00a0<tmortagne>\u00a0vmassol: I checked the code  \n16:18\u00a0<tmortagne>\u00a0anchorAttributes.put(XHTMLLinkRenderer.HREF, this.wikiModel.getLinkURL(reference));  \n16:19\u00a0<vmassol>\u00a0yes  \n16:19\u00a0<tmortagne>\u00a0so changing this method means fixing a bug anyway  \n16:19\u00a0<vmassol>\u00a0yep  \n16:19\u00a0<vmassol>\u00a0killing 2 birds  \n16:19\u00a0<tmortagne>\u00a0yep  \n16:19\u00a0<vmassol>\u00a0I'm retesting now  \n16:20\u00a0<vmassol>\u00a0the only danger is in url factories  \n16:20\u00a0<vmassol>\u00a0need to make sure they all have good impl for getURL()  \n16:20\u00a0<vmassol>\u00a0but should be ok  \n16:21\u00a0<polx>\u00a0has quit  \n16:30\u00a0<vmassol>\u00a0mflorea: should be fixed, I hope I didn't break something else  \n16:30\u00a0<mflorea>\u00a0ok, thanks, let's see if the build passes on CI  \n16:36\u00a0<vmassol>\u00a0there's still this problem of \"invalid\" implementation of ExportURLFactory which produces useless URLs\u2026 but this can be fixed when we reimplement it in the new URL module  \n16:38\u00a0<mflorea>\u00a0I see that xwiki-rendering is failing, but this is probably because of tmortagne's change  \n16:38\u00a0<tmortagne>\u00a0mflorea: I saw it yes, looking at it  \n16:39\u00a0<tmortagne>\u00a0looks like aspectj plugin does not use aspectj properly...  \n16:45\u00a0<tmortagne>\u00a0we don't have any special configuration to migrate so I guess it's a bug in 1.5  \n16:45\u00a0<tmortagne>\u00a0lets rollback  \n16:49\u00a0<evalica>\u00a0has quit  \n16:53\u00a0<msmeria>\u00a0has quit  \n16:53\u00a0<msmeria>\u00a0has joined #xwiki  \n16:53\u00a0<mflorea1>\u00a0has joined #xwiki  \n16:54\u00a0<mflorea>\u00a0has quit  \n16:59\u00a0<sburjan>\u00a0has quit  \n16:59\u00a0<mflorea1>\u00a0has quit  \n17:41\u00a0<polx>\u00a0has joined #xwiki  \n17:47\u00a0<polx>\u00a0has quit  \n17:47\u00a0<gdelhumeau>\u00a0You can see a draft of the new API there: https://github.com/gdelhumeau/xwiki-platform/tree/new-wiki-module/xwiki-platform-core/xwiki-platform-wiki  \n17:47\u00a0<gdelhumeau>\u00a0I'll send you an email soon for explanations  \n17:51\u00a0<gdelhumeau>\u00a0I'll get back the vincent's modifications when his branch will be merged to master  \n17:54\u00a0<vmassol>\u00a0gdelhumeau: I'm going to try a merge to master now locally  \n17:56\u00a0<UCC>\u00a0has quit  \n18:05\u00a0<Denis>\u00a0has joined #xwiki  \n18:08\u00a0<vmassol>\u00a0tighten your seat belts!  \n18:24\u00a0<gdelhumeau>\u00a0Denis: I am using AuthorizationManager in a new API  \n18:25\u00a0<gdelhumeau>\u00a0Since the javadoc says it is experimental, should XWikiRightService too?  \n18:25\u00a0<gdelhumeau>\u00a0+should I use  \n18:26\u00a0<Denis>\u00a0gdelhumeau: no  \n18:26\u00a0<gdelhumeau>\u00a0Great  \n18:27\u00a0<gdelhumeau>\u00a0how are you, btw?  \n18:27\u00a0<Denis>\u00a0tiref  \n18:27\u00a0<Denis>\u00a0tired  \n18:27\u00a0<Denis>\u00a0I had a fair yesterday, and I have worked hard to be ready  \n18:28\u00a0<Denis>\u00a0which means short nights :)  \n18:29\u00a0<gdelhumeau>\u00a0:)  \n18:35\u00a0<vmassol>\u00a0has quit  \n18:37\u00a0<KermitTheFragger>\u00a0has quit  \n18:45\u00a0<ldubost>\u00a0has quit  \n18:48\u00a0<gdelhumeau>\u00a0has quit  \n18:50\u00a0<tmortagne>\u00a0has quit  \n18:55\u00a0<polx>\u00a0has joined #xwiki  \n19:00\u00a0<polx>\u00a0has quit  \n19:02\u00a0<msmeria>\u00a0has quit  \n19:31\u00a0<Slashman>\u00a0has quit  \n20:52\u00a0<abusenius>\u00a0has joined #xwiki  \n20:55\u00a0<evalica>\u00a0has joined #xwiki  \n21:51\u00a0<UCC>\u00a0has joined #xwiki  \n21:52\u00a0<ldubost>\u00a0has joined #xwiki  \n21:53\u00a0<Denis>\u00a0has quit  \n21:59\u00a0<ldubost>\u00a0has quit  \n22:21\u00a0<Denis>\u00a0has joined #xwiki  \n23:41\u00a0<sdumitriu1>\u00a0has quit\n"}