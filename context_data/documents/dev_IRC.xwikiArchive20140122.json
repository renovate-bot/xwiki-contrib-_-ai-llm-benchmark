{"id": "dev:IRC.xwikiArchive20140122", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140122", "title": "IRC Archive for channel #xwiki on 22 January 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has joined #xwiki  \n00:23\u00a0<vmassol>\u00a0has quit  \n00:34\u00a0<abusenius>\u00a0has quit  \n00:36\u00a0<abusenius>\u00a0has joined #xwiki  \n00:39\u00a0<abusenius>\u00a0has quit  \n00:48\u00a0<vmassol>\u00a0has joined #xwiki  \n00:58\u00a0<lucaa>\u00a0has quit  \n01:15\u00a0<tekzilla>\u00a0has quit  \n01:21\u00a0<tekzilla>\u00a0has joined #xwiki  \n04:14\u00a0<midbrain>\u00a0has joined #xwiki  \n04:15\u00a0<midbrain>\u00a0has left #xwiki  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n06:04\u00a0<Denis>\u00a0has quit  \n06:53\u00a0<polx>\u00a0has joined #xwiki  \n06:57\u00a0<the\\_code`>\u00a0has joined #xwiki  \n06:57\u00a0<the\\_code`>\u00a0is now known as <the\\_codebot>  \n07:37\u00a0<polx>\u00a0has quit  \n08:05\u00a0<polx>\u00a0has joined #xwiki  \n08:09\u00a0<mflorea>\u00a0has joined #xwiki  \n08:18\u00a0<the\\_code`>\u00a0has joined #xwiki  \n08:23\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:23\u00a0<the\\_codebot>\u00a0has quit  \n08:26\u00a0<the\\_code`>\u00a0has quit  \n08:28\u00a0<Denis>\u00a0has joined #xwiki  \n08:31\u00a0<msmeria>\u00a0has joined #xwiki  \n08:51\u00a0<mflorea>\u00a0vmassol: good morning, how can we escape \" (quotes) in macro parameter values?  \n08:51\u00a0<vmassol>\u00a0good morning mflorea  \n08:51\u00a0<vmassol>\u00a0\\ I think  \n08:52\u00a0<vmassol>\u00a0or maybe thomas changed it to ~ afterwards, don't recall for sure  \n08:52\u00a0<mflorea>\u00a0let me try  \n08:52\u00a0<vmassol>\u00a0initially it was \\  \n08:54\u00a0<mflorea>\u00a0it's ~ now, thanks  \n08:54\u00a0<vmassol>\u00a0ok  \n08:57\u00a0<tmortagne>\u00a0has quit  \n08:59\u00a0<vrachieru>\u00a0has joined #xwiki  \n09:00\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:04\u00a0<vrachieru>\u00a0has quit  \n09:05\u00a0<vrachieru>\u00a0has joined #xwiki  \n09:08\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:11\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:15\u00a0<polx>\u00a0has quit  \n09:17\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n09:17\u00a0<polx>\u00a0has joined #xwiki  \n09:21\u00a0<evalica>\u00a0has joined #xwiki  \n09:32\u00a0<vmassol>\u00a0has quit  \n09:35\u00a0<vmassol>\u00a0has joined #xwiki  \n09:44\u00a0<cjd>\u00a0has joined #xwiki  \n09:45\u00a0<gdelhumeau>\u00a0Hi  \n09:45\u00a0<gdelhumeau>\u00a0I need your opinion on http://jira.xwiki.org/browse/XWIKI-9893  \n09:45\u00a0<ClemensR>\u00a0has joined #xwiki  \n09:50\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:56\u00a0<tmortagne>\u00a0vmassol, mflorea: wiki syntax is escaped with ~, it's not different for macros  \n09:57\u00a0<mflorea>\u00a0ok, thanks tmortagne, makes sense  \n09:57\u00a0<cjd>\u00a0has quit  \n10:04\u00a0<polx>\u00a0has quit  \n10:04\u00a0<sburjan>\u00a0has joined #xwiki  \n10:08\u00a0<polx>\u00a0has joined #xwiki  \n10:08\u00a0<polx>\u00a0has quit  \n10:16\u00a0<cjd>\u00a0has joined #xwiki  \n10:22\u00a0<vmassol>\u00a0tmortagne: did you check that the other parameters are working too? :)  \n10:22\u00a0<lucaa>\u00a0has joined #xwiki  \n10:23\u00a0<tmortagne>\u00a0vmassol: which ones ?  \n10:24\u00a0<vmassol>\u00a0those documented on http://platform.xwiki.org/xwiki/bin/view/Features/Exports  \n10:25\u00a0<tmortagne>\u00a0vmassol: XWIKI-9913 was a copy/paste mistake, not a personal decision  \n10:26\u00a0<vmassol>\u00a0all I'm saying is there was a bug on one param there may be other bugs for other params too  \n10:26\u00a0<vmassol>\u00a0since we don't seem to have tests for this  \n10:26\u00a0<vmassol>\u00a0the only solution is to verify all the params still work fine  \n10:26\u00a0<vmassol>\u00a0with the new system  \n10:26\u00a0<tmortagne>\u00a0vmassol: we are doing export all the time when developing, we would have seen bugs on other parameters very quickly and we did  \n10:26\u00a0<vmassol>\u00a0that's not correct  \n10:26\u00a0<tmortagne>\u00a0the history is the only thing that is not in page export  \n10:27\u00a0<vmassol>\u00a0the proof is that this param was NOT wirking  \n10:27\u00a0<vmassol>\u00a0working  \n10:27\u00a0<tmortagne>\u00a0again we never do that kind of export when developing  \n10:27\u00a0<vmassol>\u00a0WDYM not in page export?  \n10:27\u00a0<tmortagne>\u00a0we don't export with history  \n10:27\u00a0<vmassol>\u00a0and we don't export with other params either  \n10:27\u00a0<vmassol>\u00a0so why do you assume they'll just work?  \n10:28\u00a0<vmassol>\u00a0description  \n10:28\u00a0<vmassol>\u00a0license  \n10:28\u00a0<vmassol>\u00a0version  \n10:28\u00a0<vmassol>\u00a0etc  \n10:29\u00a0<tmortagne>\u00a0as you can see yourself in the code they are taken into account  \n10:29\u00a0<vmassol>\u00a0sigh  \n10:29\u00a0<vmassol>\u00a0the point is that YOU check not ME  \n10:29\u00a0<vmassol>\u00a0you changed the code  \n10:29\u00a0<vmassol>\u00a0the least you can do is release tested code  \n10:29\u00a0<vmassol>\u00a0:(  \n10:29\u00a0<vmassol>\u00a0now if you prefer to let users find the bugs so be it  \n10:29\u00a0<vmassol>\u00a0but it's not a good practice  \n10:30\u00a0<vmassol>\u00a0I'm stopping the discussion here  \n10:30\u00a0<vmassol>\u00a0I was simply trying to help you realize there may be other stuff to check  \n10:30\u00a0<evalica>\u00a0has quit  \n10:30\u00a0<vmassol>\u00a0but it seems complex to discuss  \n10:30\u00a0<vmassol>\u00a0...  \n10:33\u00a0<tmortagne>\u00a0there is unit tests that check that those parameters end up in the right place when they are set, the real issue is that export action even if it was a critical feature never had UI tests and I did not had time to create some yet  \n10:36\u00a0<tmortagne>\u00a0I did not seen the history issue in my last test because I enabled Backup package to get everything  \n10:36\u00a0<vmassol>\u00a0ok, I'm just worried that we're discovering this history issue very late in 5.4RC1 which is supposed to be the last release of the 5.x cycle. The issue is that we introduced the wikistream refactoring late so there are probably other issues we'll discover later, leading to 5.4.x releases. Not much we can do ATM except try to test as much as possible. The same may happen with wiki integration which happened late.  \n10:36\u00a0<vmassol>\u00a0What is happening in practice is that 5.4 is not really a stabilization release  \n10:36\u00a0<vmassol>\u00a0in 5.3 and 5.4 we've introduced new stuff  \n10:36\u00a0<vmassol>\u00a0and not just bug fixing  \n10:37\u00a0<vmassol>\u00a0thus we'll probably need several new releases to stabilize all this  \n10:37\u00a0<tmortagne>\u00a0and this is why I did not wanted to force XWIKI-9720 in 5.4  \n10:39\u00a0<vmassol>\u00a0yes, it's just that it's something we promised in 5.x so we decided to have it in  \n10:39\u00a0<vmassol>\u00a0sburjan, msmeria: would be nice if you could do extra tests on the import/export feature in 5.4 when you test it :)  \n10:40\u00a0<msmeria>\u00a0vmassol: ok. I will  \n10:40\u00a0<vmassol>\u00a0thanks  \n10:41\u00a0<msmeria>\u00a0yw  \n10:43\u00a0<tmortagne>\u00a0sburjan, msmeria: you might want to add tests on upgrading from non-DW version since I'm surprised XWIKI-9912 hasn't been found since 5.3 has been released, I tough you were doing tests like this  \n10:45\u00a0<sburjan>\u00a0tmortagne: it's odd, I never had this issue. Let me test again  \n10:45\u00a0<polx>\u00a0has joined #xwiki  \n10:46\u00a0<tmortagne>\u00a0sburjan: yes I don't understand it too but from what I can see in the code there is no way UI repair could have worked in 5.3  \n10:46\u00a0<sburjan>\u00a0tmortagne: trying from a 3.5.1 to 5.3  \n10:59\u00a0<sburjan>\u00a0tmortagne: I am hitting another issue, seems to be related to MySQL. And I didn't test with HSQLDB  \n10:59\u00a0<sburjan>\u00a0trying with Jetty + HSQLDB  \n11:05\u00a0<gdelhumeau>\u00a0I have to go, I'm going back in 1h30~2hours  \n11:09\u00a0<sburjan>\u00a0tmortagne: yes, I was able to reproduce with jety + hsqldb. It seems I have missed because I had other issues with MySQL, and I think this went unnoticed. So yes, human error  \n11:09\u00a0<tmortagne>\u00a0sburjan: what is the other issue ?  \n11:10\u00a0<sburjan>\u00a0tmortagne, I remember hitting a least http://jira.xwiki.org/browse/XWIKI-9822  \n11:10\u00a0<sburjan>\u00a0also I focused more on the subwiki integration testing  \n11:11\u00a0<tmortagne>\u00a0XWIKI-9822 is mysql only ?  \n11:12\u00a0<sburjan>\u00a0tmortagne: I only tested on MySQL, because 3.5.1 did not support postgres  \n11:12\u00a0<sburjan>\u00a0nor Oracle  \n11:13\u00a0<tmortagne>\u00a0I means I'm surprised you don't have the issue with hsqldb  \n11:13\u00a0<sburjan>\u00a0I didn't test with hsqldb  \n11:14\u00a0<sburjan>\u00a0but now I can confirm it, after testing with hsqldb  \n11:15\u00a0<vmassol>\u00a0@tmortagne: updating release dates in jira for 5.4RC1 and final  \n11:16\u00a0<sburjan>\u00a0tmortagne: so wiki stream export is enabled by default in 5.4-SNAPSHOT ?  \n11:16\u00a0<tmortagne>\u00a0sburjan: it's enabled by default in 5.3  \n11:16\u00a0<sburjan>\u00a0ok, thanks  \n11:17\u00a0<Denis>\u00a0tmortagne: XWIKI-9822 affected all DBs that could manage subwikis  \n11:17\u00a0<tmortagne>\u00a0Denis: yes that's what I tough so why I was not understanding why sburjan was talking about MySQL  \n11:18\u00a0<Denis>\u00a0MySQL is probably the most used for multiple wikis due to past issue in other engines  \n11:18\u00a0<sburjan>\u00a0the truth is that I don't usually test with hsqldb, because I prefer to test prod-like environments. but yes, if I would have tested with hsqldb, I would have noticed this issue  \n11:19\u00a0<vmassol>\u00a0guys, let me know if you find jenkins more responsive now, I've disabled the diskusage plugin which apparently was causing some slowness  \n11:19\u00a0<vmassol>\u00a0(I disabled it yesterday evening)  \n11:21\u00a0<tmortagne>\u00a0vmassol: I see all the old agents have been removed, AFAIK it was also very slow when all the agents were active  \n11:21\u00a0<tmortagne>\u00a0starting builds to fill all of them  \n11:21\u00a0<vmassol>\u00a0note that I'm not talking about build speed but about UI responsiveness  \n11:22\u00a0<tmortagne>\u00a0vmassol: by speed I mean the time to get the page loaded  \n11:23\u00a0<tmortagne>\u00a0which is the main issue we have  \n11:24\u00a0<tmortagne>\u00a0ok so at least right now loading home page with all agents active is quick for me  \n11:24\u00a0<tmortagne>\u00a0but could be just a good time  \n11:38\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n11:52\u00a0<polx>\u00a0has quit  \n12:02\u00a0<polx>\u00a0has joined #xwiki  \n12:04\u00a0<polx>\u00a0has quit  \n12:05\u00a0<polx>\u00a0has joined #xwiki  \n12:08\u00a0<vmassol>\u00a0mflorea: do you know if this is a flicker http://ci.xwiki.org/job/xwiki-enterprise-test-ui-5.2.x/62/org.xwiki.enterprise$xwiki-enterprise-test-ui/testReport/org.xwiki.test.ui.appwithinminutes/UserClassFieldTest/testSingleSelection/ ?  \n12:08\u00a0<vmassol>\u00a0this is the only test failing for 5.2.3  \n12:08\u00a0<polx>\u00a0has quit  \n12:10\u00a0<polx>\u00a0has joined #xwiki  \n12:10\u00a0<mflorea>\u00a0vmassol: yes, I've seen it failing before, it is most probably a flicker  \n12:10\u00a0<vmassol>\u00a0ok thanks, seems there 3 that are regualrly flickering we need to do something about them...  \n12:11\u00a0<lucaa>\u00a0has quit  \n12:13\u00a0<polx>\u00a0has quit  \n12:19\u00a0<polx>\u00a0has joined #xwiki  \n12:26\u00a0<evalica>\u00a0has joined #xwiki  \n12:33\u00a0<gdelhumeau>\u00a0back  \n12:40\u00a0<gdelhumeau>\u00a0about XWIKI-9886, the new proposal made by Denis is smart, but is it safe to do it in 5.4?  \n12:48\u00a0<ekarlso>\u00a0hmmms, there's a bug with devstack on Fedora 20: /win 37  \n12:57\u00a0<polx>\u00a0has quit  \n13:01\u00a0<sburjan>\u00a0vmassol, tmortagne : can I trigger a build for enterprise master ?  \n13:02\u00a0<vmassol>\u00a0sure  \n13:02\u00a0<sburjan>\u00a0vmassol: I don't want to do something which slows you from the release, like keeping busy \u00a0the agents, etc. This is why I asked :)  \n13:03\u00a0<sburjan>\u00a0done. thanks  \n13:04\u00a0<vmassol>\u00a0k thanks for asking  \n13:04\u00a0<polx>\u00a0has joined #xwiki  \n13:07\u00a0<vrachieru>\u00a0has quit  \n13:13\u00a0<mflorea>\u00a0has quit  \n13:15\u00a0<tmortagne>\u00a0sburjan: thanks for asking but if we are so short that you can't use one job for building one project as important as enterprise we have an issue :)  \n13:19\u00a0<sburjan>\u00a0:)  \n13:25\u00a0<vrachieru>\u00a0has joined #xwiki  \n13:26\u00a0<evalica>\u00a0has quit  \n13:31\u00a0<evalica>\u00a0has joined #xwiki  \n13:49\u00a0<gdelhumeau>\u00a0I suggest to not implement XWIKI-9347 in 5.4  \n13:50\u00a0<lucaa>\u00a0has joined #xwiki  \n14:10\u00a0<Sidali>\u00a0has joined #xwiki  \n14:11\u00a0<polx>\u00a0has quit  \n14:13\u00a0<DarkKnightCZ>\u00a0how exactly does \"ldap groups cache expiration\" works? form description i would assume it checks every group in certain interval (i need to disable synchronizing ldap groups on user login since it checks several groups on every login (e.g. cache doesn't work for this))  \n14:14\u00a0<tmortagne>\u00a0DarkKnightCZ: a group is removed from the cache when it's not used for more than the configured time  \n14:15\u00a0<tmortagne>\u00a0so it means that first login could be slow if there is a lot of groups but the following and for the configured time at least won't do any LDAP request to get groups members  \n14:17\u00a0<tmortagne>\u00a0what the cache store for is a map with the total list of members (including members of subgroups) for each group  \n14:17\u00a0<tmortagne>\u00a0(each used groups, not all the groups in the LDAP server)  \n14:18\u00a0<DarkKnightCZ>\u00a0ok, thanks  \n14:19\u00a0<DarkKnightCZ>\u00a0tmortagne: by the way, do you have any idea what part of wiki could generate many db connections? (or how to figure it out?)  \n14:22\u00a0<tmortagne>\u00a0loading a document generate quite some requests (but then its cached) then you have various things that request a lot of document, first solr/lucene indexing, an activity stream with a lot of different documents  \n14:24\u00a0<tmortagne>\u00a0as for figure out what is generating a specific request I guess you can see that with a profiler or in debug mode by putting a breackpoint in XWikiHibernateStore and looking at the stack  \n14:25\u00a0<tmortagne>\u00a0or maybe it's possible to configure hibernate itself to log more information like a caller stack  \n14:25\u00a0<DarkKnightCZ>\u00a0i've disabled solr, lucene and activity stream, but it still generates ~500 requests for simple page, ~1000 for normal page and 2k+ for page with some dynamic context  \n14:26\u00a0<DarkKnightCZ>\u00a0by the way, i've noticed hibernate mapping doesn't contain \"cache\" attributes (and it's neither in classes)  \n14:30\u00a0<tmortagne>\u00a0you get \u00a0request the first time you load a page or each time you load a page ?  \n14:30\u00a0<tmortagne>\u00a0in any case \u00a0sounds really a lot  \n14:31\u00a0<tmortagne>\u00a0what do you get when the page does not exist ? like going to /xwiki/bin/view/space/doesnotexist  \n14:31\u00a0<tmortagne>\u00a0i.e. to make sure no specific page is loaded  \n14:31\u00a0<DarkKnightCZ>\u00a0every time... but after i put ehcache in hibernate config file, repeated reloads generates only 200 requests  \n14:32\u00a0<tmortagne>\u00a0also you can try with /get/ action instead of /view/ one to not get only the page and not the UI around (so no panel etc)  \n14:32\u00a0<DarkKnightCZ>\u00a0/xwiki/bin/view/space/doesnotexist generated ~380 requests (select/update/delete)  \n14:33\u00a0<tmortagne>\u00a0you get delete request each time you load a page ?  \n14:33\u00a0<tmortagne>\u00a0is statistic module enabled in xwiki.cfg ?  \n14:33\u00a0<DarkKnightCZ>\u00a0hmm, /xwiki/bin/get/space/doesnotexist generates only 2 requests  \n14:34\u00a0<tmortagne>\u00a0ok so it looks like the issue is somewhere in the skin or one of the panels  \n14:34\u00a0<tmortagne>\u00a0you could try to disable panels one by one  \n14:35\u00a0<DarkKnightCZ>\u00a0statistics are disabled  \n14:37\u00a0<tmortagne>\u00a0DarkKnightCZ: you don't have any request executed if you don't load any page, right ?  \n14:37\u00a0<tmortagne>\u00a0i.e. not background task running  \n14:37\u00a0<DarkKnightCZ>\u00a0yep, no background tasks (checked)  \n14:37\u00a0<tmortagne>\u00a0ok  \n14:42\u00a0<vrachieru>\u00a0has quit  \n14:42\u00a0<vrachieru>\u00a0has joined #xwiki  \n14:43\u00a0<mflorea>\u00a0has joined #xwiki  \n14:52\u00a0<vmassol>\u00a0tmortagne: seems there's a problem with the extension importer on xwiki.org it creates dup objects  \n14:52\u00a0<vmassol>\u00a0for example: http://extensions.xwiki.org/xwiki/bin/edit/Extension/Activity+Macro?editor=object  \n14:52\u00a0<vmassol>\u00a0check the version objects  \n14:52\u00a0<vmassol>\u00a0any idea of how to fix this?  \n14:53\u00a0<vmassol>\u00a0also I've clicked on trigger for the scheduler job and it doesn't seem to be working, I'll unschedule and reschedule  \n14:55\u00a0<tmortagne>\u00a0vmassol: I don't see duplicated ExtensionCode.ExtensionVersionClass objects on http://extensions.xwiki.org/xwiki/bin/edit/Extension/Activity+Macro?editor=object  \n14:56\u00a0<vmassol>\u00a0indeed my bad  \n14:56\u00a0<vmassol>\u00a0I mixed up with the dependency objects  \n14:56\u00a0<vmassol>\u00a0ExtensionDependencyClass  \n14:56\u00a0<vmassol>\u00a0but they're not dups, they just look similar  \n14:57\u00a0<vmassol>\u00a0so the only issue that remains is making the scheduler work  \n14:57\u00a0<tmortagne>\u00a0it's not that they look similar, the first field is the extension version itself so you have one for each dependency  \n14:57\u00a0<vmassol>\u00a0btw yesterday I had to manually click update on an extension to get version 5.3 which is quite old which seems to indicate the job is not working properly  \n14:57\u00a0<vmassol>\u00a0and when I trigger it manually it also doesn't seem to work  \n14:58\u00a0<tmortagne>\u00a0which extension was it ?  \n14:58\u00a0<vmassol>\u00a0checking  \n14:58\u00a0<tmortagne>\u00a0there is a lot of extensions which have the right version so the scheduler works, but maybe it crash for some reason in the middle  \n14:59\u00a0<vmassol>\u00a0either AS or Presentation app I think  \n14:59\u00a0<vmassol>\u00a0not sure  \n14:59\u00a0<tmortagne>\u00a0a pity we can't see the result of a scheduler job execution  \n14:59\u00a0<vmassol>\u00a0in any case how can I check if the job is working now?  \n14:59\u00a0<vmassol>\u00a0yep  \n14:59\u00a0<vmassol>\u00a0I triggered it twice  \n15:00\u00a0<vmassol>\u00a0the bot should report changes here right?  \n15:00\u00a0<polx>\u00a0has joined #xwiki  \n15:00\u00a0<vmassol>\u00a0(I don't see why it wouldn't so yes)  \n15:00\u00a0<vmassol>\u00a0since I've now released 5.2.3 the job should update quite a lot of extenions  \n15:01\u00a0<tmortagne>\u00a0yes it should  \n15:02\u00a0<tmortagne>\u00a0my guess is that one extension make it fail, I can add a try/catch around each import and print the error in the log  \n15:03\u00a0<vmassol>\u00a0yep good idea  \n15:14\u00a0<tmortagne>\u00a0vmassol: wanted to use slf4j but org.slf4j.LoggerFactory.getLogger('Scheduler.BatchImporterScheduler').info('Starting extensions batch import') does not print anything in a groovy macro, I don't understand  \n15:15\u00a0<tmortagne>\u00a0hmm actually I may know  \n15:15\u00a0<tmortagne>\u00a0here  \n15:16\u00a0<tmortagne>\u00a0that's because we enabled info only on org.xwiki.\\*  \n15:16\u00a0<tmortagne>\u00a0vmassol: according to the log the importer has been executed on all extensions without any error  \n15:18\u00a0<tmortagne>\u00a0ok so now we have a clean log of what happen, now the issue is probably AETHER versions cache again  \n15:18\u00a0<tmortagne>\u00a0lets clean it  \n15:19\u00a0<tmortagne>\u00a0yep, that was it  \n15:20\u00a0<tmortagne>\u00a0this is a pain, I need to upgrade AETHER but they broke quite a lot of API, I was expecting that using the same version as Maven would be safe...  \n15:21\u00a0<vmassol>\u00a0ok thanks tmortagne  \n15:39\u00a0<vmassol>\u00a0tmortagne: still running?  \n15:39\u00a0<tmortagne>\u00a0vmassol: no it's finished  \n15:40\u00a0<tmortagne>\u00a0vmassol: Auto update seems to be disabled on activity macro  \n15:41\u00a0<vmassol>\u00a0ah ok  \n15:41\u00a0<vmassol>\u00a0sorry  \n15:41\u00a0<tmortagne>\u00a0seems a bit weird that the name of the extension is \"Activity Stream Application\" and the page is \"Activity Macro\"  \n15:42\u00a0<vmassol>\u00a0yes I know  \n15:42\u00a0<vmassol>\u00a0it was created manually first  \n15:42\u00a0<vmassol>\u00a0and then imported later on  \n15:43\u00a0<vmassol>\u00a0we need to decide if we want to name the app \"Activity Macro\" in git and risk having to rename it to AS Application later on if we add more pages or if we keep it AS App directly  \n15:54\u00a0<andreeapopescu>\u00a0has left #xwiki  \n15:59\u00a0<msmeria>\u00a0has quit  \n16:12\u00a0<polx>\u00a0has quit  \n16:15\u00a0<polx>\u00a0has joined #xwiki  \n16:15\u00a0<DarkKnightCZ>\u00a0has left #xwiki  \n16:20\u00a0<Sidali\\_>\u00a0has joined #xwiki  \n16:21\u00a0<gdelhumeau>\u00a0I remove fix-for 5.4rc1 in XWIKI-9347 ?  \n16:21\u00a0<Sidali>\u00a0has quit  \n16:22\u00a0<Sidali\\_>\u00a0is now known as <Sidali>  \n16:22\u00a0<vmassol>\u00a0why gdelhumeau?  \n16:22\u00a0<gdelhumeau>\u00a0see comments  \n16:22\u00a0<vmassol>\u00a0is it planned for 5.4?  \n16:23\u00a0<vmassol>\u00a0I saw the comment but I don't see the problem  \n16:23\u00a0<gdelhumeau>\u00a0it was not in the roadmap  \n16:23\u00a0<vmassol>\u00a0it's already a built in feature and we use it on xwiki.org for ages  \n16:23\u00a0<gdelhumeau>\u00a0but you and I have written fix-for 5.4  \n16:23\u00a0<vmassol>\u00a0my question remains  \n16:24\u00a0<vmassol>\u00a0except for the perf  \n16:24\u00a0<gdelhumeau>\u00a0OK, I thought it did not work  \n16:24\u00a0<vmassol>\u00a0do you have time for it?  \n16:24\u00a0<gdelhumeau>\u00a0well, it also depends on XWIKI-9886  \n16:24\u00a0<vmassol>\u00a0it's actually quite simple I think  \n16:24\u00a0<vmassol>\u00a0AFAIR all I had to do was specify the list of wikis in the macro  \n16:24\u00a0<vmassol>\u00a0(on xwiki.org)  \n16:25\u00a0<vmassol>\u00a0so to implement thi sissue you need to compute the list of wikis a given user have view access to right?  \n16:25\u00a0<vmassol>\u00a0s/access to right?/access to, right?  \n16:26\u00a0<gdelhumeau>\u00a0I guess, yes  \n16:26\u00a0<vmassol>\u00a0re speed I don't see the issue  \n16:26\u00a0<vmassol>\u00a0since  \n16:26\u00a0<vmassol>\u00a0the AS data is in one table on the main wiki for all subwikis  \n16:26\u00a0<vmassol>\u00a0right?  \n16:27\u00a0<gdelhumeau>\u00a0I don't know  \n16:27\u00a0<vmassol>\u00a0so it should be the exact same speed  \n16:28\u00a0<vmassol>\u00a0you can check ActivityStreamImpl  \n16:28\u00a0<KermitTheFragger>\u00a0has quit  \n16:28\u00a0<evalica>\u00a0has quit  \n16:29\u00a0<vmassol>\u00a0addDocumentActivityEvent() to be precise  \n16:29\u00a0<vmassol>\u00a0(I'm reading at the same time)  \n16:29\u00a0<vrachieru>\u00a0has quit  \n16:29\u00a0<vmassol>\u00a0there's a config param  \n16:29\u00a0<vmassol>\u00a0but by default it's stored in the main wiki I believe  \n16:31\u00a0<vmassol>\u00a0I'm not sure what happens if you set localstore and call the activity stream macro from the main wiki  \n16:32\u00a0<vmassol>\u00a0my guess is that you see only the events stored in the current wiki  \n16:32\u00a0<vmassol>\u00a0I've probablty configured xwiki.org to store in the main wiki, checking  \n16:32\u00a0<vmassol>\u00a0I haven't changed the default config  \n16:32\u00a0<vmassol>\u00a0hmm  \n16:33\u00a0<vmassol>\u00a0checking macro code  \n16:35\u00a0<vmassol>\u00a0yep seems to look only in 1 DB  \n16:36\u00a0<vmassol>\u00a0gdelhumeau: the only question is how costly is it to know the list of wikis the current user can access?  \n16:36\u00a0<vmassol>\u00a0(is this cached somewhere?)  \n16:38\u00a0<gdelhumeau>\u00a0vmassol: I don't think there is such a cache AFAIK  \n16:38\u00a0<vmassol>\u00a0this is the same code as wiki directory one, right?  \n16:38\u00a0<gdelhumeau>\u00a0I have to to go for 30minutes  \n16:38\u00a0<vmassol>\u00a0s/as wiki/as the wiki/  \n16:38\u00a0<gdelhumeau>\u00a0wiki directory shows all the wiki  \n16:38\u00a0<vmassol>\u00a0even those you cannot access?  \n16:39\u00a0<gdelhumeau>\u00a0yes  \n16:39\u00a0<vmassol>\u00a0really?  \n16:39\u00a0<vmassol>\u00a0that looks very bad  \n16:39\u00a0<vmassol>\u00a0I'm pretty sure we dsicussed this  \n16:39\u00a0<gdelhumeau>\u00a0but we had no decision  \n16:39\u00a0<vmassol>\u00a0you sure?  \n16:40\u00a0<vmassol>\u00a0knowing the name of a wiki you're not allowed to view is a big issues for customers  \n16:40\u00a0<vmassol>\u00a0when they are hosted on a farm  \n16:40\u00a0<tmortagne>\u00a0wiki index also list wikis you don't have access to but for which you can request access so it's not only about rights  \n16:41\u00a0<vmassol>\u00a0tmortagne: yes of course, open wikis should be listed  \n16:41\u00a0<vmassol>\u00a0open in the sens that you can request to join  \n16:41\u00a0<vmassol>\u00a0\\*sense  \n16:41\u00a0<Denis>\u00a0has quit  \n16:43\u00a0<evalica>\u00a0has joined #xwiki  \n16:43\u00a0<vmassol>\u00a0I'm mentioning this because in the past I've had issues with customers who do not want to show that they are using a given technology (xwiki in this case) and it was a corporate policy  \n16:46\u00a0<vmassol>\u00a0so what do we do for xwiki.org: upgrade to 5.2.3 or wait for 5.4?  \n16:47\u00a0<vmassol>\u00a0(same question for myxwiki.org)  \n16:49\u00a0<tmortagne>\u00a0vmassol: dow we have blockr issue on xwiki.org ? if not I would say lets wait for 5.4 I guess  \n16:50\u00a0<tmortagne>\u00a0myxwiki.org is a bit different  \n16:50\u00a0<vmassol>\u00a0well this release is a security issue\u2026  \n16:51\u00a0<vmassol>\u00a0but so far it's been ok and we have \"only\" 1-2 weeks more to wait for 5.4 final  \n16:51\u00a0<vmassol>\u00a0we could patch xwiki.org btw  \n16:51\u00a0<tmortagne>\u00a0we don't use \"Prevent unregistered users from...\" options in xwiki.org  \n16:51\u00a0<tmortagne>\u00a0so we don't really care about this issue  \n16:51\u00a0<vmassol>\u00a0right\u2026.  \n16:52\u00a0<tmortagne>\u00a0(and nobody should ever use those hacks IMO)  \n16:52\u00a0<vmassol>\u00a0ok so let's wait for 5.4  \n16:52\u00a0<sburjan>\u00a0has quit  \n16:59\u00a0<ClemensR>\u00a0our folks are using this \"Prevent unregistered users from...\" by default ;) ... but of course they should not need to  \n17:30\u00a0<tmortagne>\u00a0has quit  \n17:39\u00a0<ClemensR>\u00a0has left #xwiki  \n17:51\u00a0<polx>\u00a0has quit  \n18:12\u00a0<cjd>\u00a0has quit  \n18:19\u00a0<Denis>\u00a0has joined #xwiki  \n18:31\u00a0<mflorea>\u00a0has quit  \n18:52\u00a0<Slashman>\u00a0has joined #xwiki  \n18:58\u00a0<Emenems>\u00a0has quit  \n19:03\u00a0<Emenems>\u00a0has joined #xwiki  \n19:09\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n19:27\u00a0<Slashman>\u00a0has quit  \n19:38\u00a0<lucaa>\u00a0has quit  \n19:46\u00a0<woshilapin>\u00a0has quit  \n19:57\u00a0<gdelhumeau>\u00a0has quit  \n20:10\u00a0<abusenius>\u00a0has joined #xwiki  \n20:51\u00a0<andreeapopescu>\u00a0has left #xwiki  \n21:54\u00a0<Denis>\u00a0has quit  \n21:56\u00a0<vmassol>\u00a0has quit  \n22:27\u00a0<vmassol>\u00a0has joined #xwiki  \n22:28\u00a0<evalica>\u00a0has quit\n"}