{"id": "dev:IRC.xwikiArchive20111108", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20111108", "title": "IRC Archive for channel #xwiki on 08 November 2011 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n01:19\u00a0<sdumitriu>\u00a0has joined #xwiki  \n02:41\u00a0<sdumitriu>\u00a0has quit  \n03:40\u00a0<sdumitriu>\u00a0has joined #xwiki  \n04:03\u00a0<sdumitriu>\u00a0has quit  \n04:20\u00a0<sdumitriu>\u00a0has joined #xwiki  \n05:23\u00a0<CIA-102>\u00a0Sergiu Dumitriu\u000f master\u000f \\* rf3215f4\u000f \u000f/ xwiki-platform-core/xwiki-platform-administration/src/main/resources/XWiki/XWikiUserProfileSheet.xml :\u000f [misc] Refactor the user profile sheet to work with the /edit/ action. not just the deprecated /inline/ - http://git.io/tE3z1g  \n06:01\u00a0<Denis>\u00a0has quit  \n06:03\u00a0<Denis>\u00a0has joined #xwiki  \n06:21\u00a0<sdumitriu>\u00a0has quit  \n07:11\u00a0<mflorea>\u00a0has joined #xwiki  \n07:19\u00a0<CIA-102>\u00a0Marius Dumitru Florea\u000f feature-applicationWithinMinutes\u000f \\* ra0eda76\u000f \u000f/ (14 files in 10 dirs):\u000f Merge branch 'master' of github.com:xwiki/xwiki-platform into feature-applicationWithinMinutes (+10 more commits...) - http://git.io/W8L6mw  \n07:40\u00a0<vmassol>\u00a0has joined #xwiki  \n07:53\u00a0<tekzilla>\u00a0has quit  \n07:55\u00a0<tekzilla>\u00a0has joined #xwiki  \n08:01\u00a0<sburjan`>\u00a0has joined #xwiki  \n08:26\u00a0<vmassol>\u00a0has quit  \n08:35\u00a0<vmassol>\u00a0has joined #xwiki  \n08:51\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:17\u00a0<vmassol>\u00a0tmortagne: good morning. Did you do anything to xwiki.org yesterday in the end?  \n09:19\u00a0<+tmortagne>\u00a0vmassol: not much, I found that pretty often something is blocking XWiki several minutes and I think that's during that time that the check cron restart XWiki thinking it's down, what I did for now is to increase a bit the timeout until we find what is doing that  \n09:19\u00a0<+tmortagne>\u00a0(I just disabled the cron but that's because I was looking for xwiki.org upgrade to 3.2)  \n09:20\u00a0<vmassol>\u00a0so that would mean xwiki.org has become very slow from time to time  \n09:20\u00a0<vmassol>\u00a0and this makes the cron restart it  \n09:20\u00a0<vmassol>\u00a0?  \n09:22\u00a0<+tmortagne>\u00a0vmassol: i think so yes  \n09:22\u00a0<+tmortagne>\u00a0but no idea why  \n09:23\u00a0<+tmortagne>\u00a0sometime during slow time xwiki use lots of resources, sometime not and sometime it's not slow and still use something like 150% of the proc  \n09:24\u00a0<vmassol>\u00a0so we need to find out somehow what's blocking it and make it slow to answer....  \n09:24\u00a0<vmassol>\u00a0we really need to work on our internal perf tool  \n09:24\u00a0<vmassol>\u00a0actually maybe the monitoring plugin works well enough for that?  \n09:42\u00a0<+tmortagne>\u00a0vmassol: not sure what the monitoring plugin is capable of  \n09:43\u00a0<vmassol>\u00a0we could look at it but basically it tells you how long it takes to execute different parts of xwiki  \n09:43\u00a0<vmassol>\u00a0we have a request page to display information from it  \n09:43\u00a0<vmassol>\u00a0the only issue I think is that it doesn't remember on which page it was when it recorded the data (not sure, to be checked)  \n09:45\u00a0<sburjan>\u00a0has joined #xwiki  \n09:47\u00a0<+tmortagne>\u00a0vmassol:ok  \n09:48\u00a0<vmassol>\u00a0tmortagne: here: http://www.xwiki.org/xwiki/bin/view/Admin/RequestsStatus  \n09:48\u00a0<vmassol>\u00a0apparently the monitor plugin is off now  \n09:49\u00a0<vmassol>\u00a0we could turn it on  \n09:56\u00a0<evalica>\u00a0has joined #xwiki  \n10:00\u00a0<evalica>\u00a0has quit  \n10:22\u00a0<+tmortagne>\u00a0vote send about myxwiki.org upgrade guys  \n10:31\u00a0<vmassol>\u00a0s/myxwiki.org/xwiki.org/?  \n10:31\u00a0<vmassol>\u00a0yep  \n10:43\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:46\u00a0<evalica>\u00a0has joined #xwiki  \n10:48\u00a0<+tmortagne>\u00a0yep sorry was xwiki.org  \n10:52\u00a0<tmortagne>\u00a0has left #xwiki  \n10:56\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:06\u00a0<tmortagne>\u00a0has quit  \n11:06\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:07\u00a0<CIA-102>\u00a0Marius Dumitru Florea\u000f feature-applicationWithinMinutes\u000f \\* rb706d35\u000f \u000f/ (2 files):\u000f AppWithinMinutes/ClassEditor: Enhance StaticList fields editing. - http://git.io/ErXaKw  \n11:07\u00a0<CIA-102>\u00a0Marius Dumitru Florea\u000f feature-applicationWithinMinutes\u000f \\* r85a241a\u000f \u000f/ (2 files):\u000f AppWithinMinutes/ClassEditor: Bulletproofing the StaticList editor. - http://git.io/LpJqmg  \n11:11\u00a0<vmassol>\u00a0cjdelisle: much better with the one-liner CIA notification :)  \n11:12\u00a0<vmassol>\u00a0cjdelisle: btw can we control the name of the CIA user (to have something different than \"CIA-102\")?  \n12:10\u00a0<+sburjan>\u00a0FBI-320 :)  \n13:04\u00a0<@cjdelisle>\u00a0not that I know of  \n13:05\u00a0<@cjdelisle>\u00a0but cia-xx will have name recognition with people who are familiar with other foss projects because it is pretty widely used.  \n13:21\u00a0<mflorea>\u00a0has quit  \n14:21\u00a0<mflorea>\u00a0has joined #xwiki  \n14:27\u00a0<vmassol>\u00a0cjdelisle: do we still need this exclusion rule with the new oneliner?  \n14:28\u00a0<@cjdelisle>\u00a0It's still possible for the cia bot to write some of the log message, it would be possible to excluse it entiretly but I like seeing it if possible.  \n14:28\u00a0<vmassol>\u00a0cjdelisle: we'll need to make this configurable (as I've done for the docuemnt event botlet) since it'll be removed when we next update the ircbot app  \n14:30\u00a0<vmassol>\u00a0the way I've done is that you can have some groovy script in a textrea xproperty  \n14:30\u00a0<vmassol>\u00a0and it's executed and if false the action doesn't execute  \n14:30\u00a0<vmassol>\u00a0we could generalize this for all botlets  \n14:31\u00a0<@cjdelisle>\u00a0I don't really like the idea of putting too much work into something which is not going to benefit the code.  \n14:31\u00a0<vmassol>\u00a0how is that not going to benefit the code  \n14:31\u00a0<vmassol>\u00a0?  \n14:31\u00a0<@cjdelisle>\u00a0http://xkcd.com/974/  \n14:31\u00a0<vmassol>\u00a0(the exclusion mechanism)  \n14:31\u00a0<vmassol>\u00a0yeah I know this xkcd  \n14:31\u00a0<vmassol>\u00a0but you've just proved that there's a need  \n14:31\u00a0<vmassol>\u00a0what you've just done is lost work  \n14:32\u00a0<vmassol>\u00a0again it'll dispapear next time we upgrade the ircbot app  \n14:32\u00a0<lucaa>\u00a0has joined #xwiki  \n14:33\u00a0<vmassol>\u00a0btw what I'm talking about takes about 30 seocnds of additional work compared to what you did, the longest part is then to commit it ;)  \n14:33\u00a0<vmassol>\u00a0anyway  \n14:33\u00a0<@cjdelisle>\u00a0It will take me 10 minutes to understand how it was done and repeat it but if you like I can do that  \n14:33\u00a0<vmassol>\u00a0just be aware that it'll be gone next time we upgrade  \n14:33\u00a0<vmassol>\u00a0but we'll put it back manually  \n14:34\u00a0<vmassol>\u00a0after we realize the jira botlet kicks in  \n14:34\u00a0<vmassol>\u00a0:)  \n14:34\u00a0<@cjdelisle>\u00a0I am aware of it, my general thinking was that when I see it and it looks annoying I'll do it again  \n14:34\u00a0<vmassol>\u00a0if you want to do it, I can explain what I did  \n14:34\u00a0<vmassol>\u00a0really simple  \n14:34\u00a0<@cjdelisle>\u00a0and if I'm annoyed by doing it again I'll generalize it  \n14:34\u00a0<vmassol>\u00a0that reminds me of people not writing tests  \n14:35\u00a0<vmassol>\u00a0with your reasoning  \n14:35\u00a0<vmassol>\u00a0:)  \n14:35\u00a0<vmassol>\u00a0last week I spent 2 days on such an issue  \n14:35\u00a0<vmassol>\u00a0because someone didn't bother writing a test  \n14:35\u00a0<vmassol>\u00a0and since I didn't know the code I had to spend 2 days to find out the issue  \n14:35\u00a0<@cjdelisle>\u00a0not writing tests because \"if it breaks I'll fix it\"?  \n14:35\u00a0<vmassol>\u00a0I think this reasoning works only in 1 case  \n14:35\u00a0<vmassol>\u00a0when the person who finds the problems again  \n14:36\u00a0<vmassol>\u00a0is the same one who fixed it initially  \n14:36\u00a0<vmassol>\u00a0if it happens that it's another person  \n14:36\u00a0<vmassol>\u00a0then he'll spend a disproporionate amount of time  \n14:37\u00a0<vmassol>\u00a0of course it depends on the problem at hand  \n14:37\u00a0<vmassol>\u00a0here it's a small thing  \n14:37\u00a0<vmassol>\u00a0(I was just trying to rationalize the strategy ;))  \n14:38\u00a0<@cjdelisle>\u00a0I am on the fense about it because I recognize your position but on the other hand things which only are used here can be more messy than code which is shipped  \n14:38\u00a0<vmassol>\u00a0yes sure but the fact that we have the need ourselves proves to me it's a useful feature  \n14:38\u00a0<vmassol>\u00a0btw I doubt anyone else is using this app right now :)  \n14:39\u00a0<vmassol>\u00a0I'd like to advertise it more though, same as github has just advertised its Hubot one  \n14:39\u00a0<vmassol>\u00a0I wanted to add a few botlets first  \n14:39\u00a0<vmassol>\u00a0s/few/few more/  \n14:39\u00a0<@cjdelisle>\u00a0Also, although kind of off topic, I have observed interfaces being written too early because of a desire to \"do things right\" but without some trial and error first, the interface is not very well designed.  \n14:39\u00a0<vmassol>\u00a0yep, I'm all for YAGNI  \n14:40\u00a0<vmassol>\u00a0but in this case it's different  \n14:40\u00a0<vmassol>\u00a0because it's a case of soemthing that was written and in the field it's found that it's missing a feature  \n14:40\u00a0<vmassol>\u00a0(the ability to exclude something)  \n14:41\u00a0<vmassol>\u00a0on the interfaces thing, if you write a unit test you'll have a user for your code and it should help you design the api  \n14:41\u00a0<vmassol>\u00a0(actually that's why it's even best to write the unit test first  \n14:42\u00a0<vmassol>\u00a0and to write it the way you'd like to use the api from a user pov  \n14:42\u00a0<@cjdelisle>\u00a0because of that, I have grown weary of making perminent changes to serve a purpose until I have \"prototyped\" the change first.  \n14:42\u00a0<vmassol>\u00a0and then write the implementation that makes it work  \n14:42\u00a0<vmassol>\u00a0now on the xwiki side we're quite \"safe\" because xwiki is an operating system  \n14:43\u00a0<vmassol>\u00a0and as such you'll always find someone who needs to do all kind of weird stuff  \n14:43\u00a0<@cjdelisle>\u00a0With unit tests, I try to write those simply because it would take too long to compile everything for manual testing of a feature.  \n14:43\u00a0<vmassol>\u00a0which is what makes xwiki complex  \n14:44\u00a0<@cjdelisle>\u00a0btw I'm working on a new interface set for attachment storage which should make writing a \\*AttachmentStore much easier.  \n14:44\u00a0<vmassol>\u00a0the only solution for that complexity IMO is the divide and conquer one, at least that's the only one I know for xwiki  \n14:44\u00a0<vmassol>\u00a0ah cool  \n14:44\u00a0<@cjdelisle>\u00a0I'll be sending proposal mail soon  \n14:44\u00a0<@cjdelisle>\u00a0My method is write a really nice interface which is still based on XWikiAttachment but should not need access to the context or the XWiki object or anything  \n14:45\u00a0<@cjdelisle>\u00a0then after that we can talk about XWikiAttachment2.0  \n14:45\u00a0<vmassol>\u00a0:)  \n14:45\u00a0<@cjdelisle>\u00a0And it will be a good test case for moving to the next model.  \n14:45\u00a0<vmassol>\u00a0that reminds me that I need to ping sergiu on this  \n14:46\u00a0<@cjdelisle>\u00a0esp. since attachments are a relitively simple construct compared to objects or documents.  \n14:46\u00a0<vmassol>\u00a0to move my work in sandbox on a branch of platform  \n14:47\u00a0<vmassol>\u00a0in case you're interested here's how I did the configuration thing for the document event botlet:  \n14:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Binding binding = new Binding();  \n14:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0binding.setVariable(\"event\", event);  \n14:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0binding.setVariable(\"source\", source);  \n14:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0binding.setVariable(\"data\", data);  \n14:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0binding.setVariable(\"bot\", bot);  \n14:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0GroovyShell shell = new GroovyShell(binding);  \n14:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (shell.evaluate(onEventValidationScript)) {  \n14:48\u00a0<vmassol>\u00a0where \"onEventValidationScript\" contains the groovy script taken from an Xproperty  \n14:48\u00a0<@cjdelisle>\u00a0interesting  \n15:08\u00a0<+sburjan>\u00a0Hello. where can I find the source code of the Backlinks panel ?  \n15:09\u00a0<+sburjan>\u00a0ok, found it  \n15:11\u00a0<mbryant>\u00a0has joined #xwiki  \n15:13\u00a0<mbryant>\u00a0question guys, I am trying to pull up the API documnetation (javadoc API) for version 3.1.1 and i can not seem to get to it, do you have a valid link anywhere, or is there a differentw way to view it. (when i use the one provided in wiki it doesnt work, it sends me to some tool \"Sonatype\"  \n15:21\u00a0<vmassol>\u00a0mbryant: http://platform.xwiki.org/xwiki/bin/view/DevGuide/API isn't working?  \n15:21\u00a0<vmassol>\u00a0ndeed the link isn't working  \n15:21\u00a0<+tmortagne>\u00a0indeed looks like it's broken for some reason  \n15:21\u00a0<vmassol>\u00a0it says com  \n15:21\u00a0<+tmortagne>\u00a0but only for 3.1.1  \n15:22\u00a0<+tmortagne>\u00a0the 3.2 one is working well  \n15:22\u00a0<+tmortagne>\u00a0which is weird  \n15:22\u00a0<+tmortagne>\u00a0since they both use the same URL just with different version  \n15:22\u00a0<vmassol>\u00a0no  \n15:22\u00a0<vmassol>\u00a0it doesn't use the same URL  \n15:23\u00a0<+tmortagne>\u00a0it's supposed to since it's generated by the same macro  \n15:23\u00a0<vmassol>\u00a0nope  \n15:23\u00a0<vmassol>\u00a0there are different macros  \n15:23\u00a0<vmassol>\u00a0I'm fixing it  \n15:24\u00a0<+tmortagne>\u00a0yes there is one for the old versions but it should not be used anymore  \n15:24\u00a0<vmassol>\u00a0yep  \n15:24\u00a0<mbryant>\u00a0I have another question/concern in dealing with 3.2 if you have some time to hopefully clear them up  \n15:24\u00a0<mbryant>\u00a0well its more than one really its a handfull  \n15:25\u00a0<vmassol>\u00a0tmortagne: I'm fixing it but you have put a lock on the page  \n15:25\u00a0<vmassol>\u00a0can I force it?  \n15:31\u00a0<+tmortagne>\u00a0vmassol: yes I'm not editing it anymore  \n16:16\u00a0<cjdelisle>\u00a0has quit  \n16:21\u00a0<cjdelisle>\u00a0has joined #xwiki  \n16:27\u00a0<cjdelisle>\u00a0has quit  \n16:38\u00a0<cjdelisle>\u00a0has joined #xwiki  \n16:40\u00a0<cjdelisle>\u00a0has quit  \n16:45\u00a0<vmassol>\u00a0mbryant: page fixed  \n16:48\u00a0<vmassol>\u00a0evalica: you broke the top level menu  \n16:48\u00a0<vmassol>\u00a0(in case you're not aware ;))  \n16:49\u00a0<vmassol>\u00a0\"Unknown macro: menu\"  \n16:50\u00a0<+evalica>\u00a0second  \n16:51\u00a0<+tmortagne>\u00a0guys I'm going to restart xwiki.org in about 5 minutes if nobody complain  \n16:53\u00a0<+evalica>\u00a0for how long ?  \n16:59\u00a0<vmassol>\u00a0evalica: what's the next step? Remove the Ecosystem panel?  \n17:00\u00a0<vmassol>\u00a0tmortagne: we should change the description of extensions on extensions.xwiki.org Right now it says \"Extensions are ways to extend XWiki Enterprise\" but this is not quite correct  \n17:01\u00a0<+tmortagne>\u00a0evalica: a restart  \n17:01\u00a0<+evalica>\u00a0vmassol: after I create the surveys panel and make sure all links are accsible  \n17:02\u00a0<+tmortagne>\u00a0vmassol: yep no need to have XWiki Enterprise  \n17:02\u00a0<+evalica>\u00a0tmortagne: I'm finished - thanks  \n17:02\u00a0<+tmortagne>\u00a0ok  \n17:02\u00a0<+tmortagne>\u00a0will do it now then, for those who did not seen the mail i'm restarting on latest 3.\" snapshot  \n17:02\u00a0<+tmortagne>\u00a03.3  \n18:52\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:52\u00a0<Enygma`>\u00a0has quit  \n19:17\u00a0<sdumitriu>\u00a0has joined #xwiki  \n19:25\u00a0<lucaa>\u00a0has joined #xwiki  \n19:45\u00a0<xipe>\u00a0has quit  \n19:46\u00a0<xipe>\u00a0has joined #xwiki  \n19:46\u00a0<cjdelisle>\u00a0has quit  \n19:53\u00a0<cjdelisle>\u00a0has joined #xwiki  \n20:10\u00a0<abusenius>\u00a0has joined #xwiki  \n20:11\u00a0<mflorea>\u00a0has quit  \n20:11\u00a0<@cjdelisle>\u00a0does anyone know why we don't use hibernate's saveOrUpdate() function?  \n20:13\u00a0<@cjdelisle>\u00a0sdumitriu: any idea why we don't use saveOrUpdate()?  \n20:13\u00a0<@cjdelisle>\u00a0.  \n20:27\u00a0<@sdumitriu>\u00a0cjdelisle: No, Ludovic should be the only one to know  \n20:27\u00a0<@sdumitriu>\u00a0I guess that he thought that saveOrUpdate is slower than a manual check  \n20:34\u00a0<@cjdelisle>\u00a0I was reading about it a bit and some other people warn about using it with detached objects  \n20:35\u00a0<vmassol>\u00a0cjdelisle: you need to stop and restart the bot  \n20:35\u00a0<vmassol>\u00a0(for your change to take effect)  \n20:36\u00a0<@cjdelisle>\u00a0I did restart the jira botlet and since it's not complaining about each message it seems to have worked  \n20:36\u00a0<vmassol>\u00a0ok  \n20:36\u00a0<vmassol>\u00a0indeed you don't need to restart the whole bot  \n20:38\u00a0<jlagarde>\u00a0has joined #xwiki  \n20:54\u00a0<lucaa>\u00a0has quit  \n22:56\u00a0<abusenius>\u00a0has quit  \n23:05\u00a0<jlagarde>\u00a0has quit  \n23:25\u00a0<Ruudjah2>\u00a0has quit  \n\n"}