{"id": "dev:IRC.xwikiArchive20150928", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150928", "title": "IRC Archive for channel #xwiki on 28 September 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n00:36\u00a0<abusenius>\u00a0has joined #xwiki  \n00:41\u00a0<abusenius>\u00a0has quit  \n03:39\u00a0<xwikibot>\u00a0has joined #xwiki  \n03:40\u00a0<lynxt>\u00a0has quit  \n03:45\u00a0<lynxt>\u00a0has joined #xwiki  \n03:46\u00a0<tillo>\u00a0has joined #xwiki  \n06:00\u00a0<Denis1>\u00a0has joined #xwiki  \n06:03\u00a0<Denis>\u00a0has quit  \n07:01\u00a0<msmeria>\u00a0has joined #xwiki  \n07:04\u00a0<gsmeria>\u00a0has joined #xwiki  \n07:32\u00a0<Ramona1>\u00a0has joined #xwiki  \n08:13\u00a0<vmassol>\u00a0has joined #xwiki  \n08:32\u00a0<woshilapin>\u00a0has quit  \n08:42\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:51\u00a0<gsmeria1>\u00a0has joined #xwiki  \n08:52\u00a0<gsmeria>\u00a0has quit  \n09:15\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:15\u00a0<Pbas>\u00a0has joined #xwiki  \n09:29\u00a0<fcharton>\u00a0has joined #xwiki  \n09:29\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:38\u00a0<Ramona1>\u00a0has quit  \n09:53\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:47\u00a0<vmassol>\u00a0tmortagne: gm, could I leave this issue to you http://markmail.org/message/2uwcqqeccdhxopyi ?  \n10:47\u00a0<vmassol>\u00a0msmeria: seems we missed a test for this  \n10:48\u00a0<vmassol>\u00a0(and good morning :)))  \n10:48\u00a0<vmassol>\u00a0(we really miss docker containers for functional testing + automated upgrade tests)  \n10:55\u00a0<msmeria>\u00a0vmassol: we have a test for migrations: http://test.xwiki.org/xwiki/bin/view/Wiki+Tests/Migrate+XWiki+using+Distribution+Wizard but we didn't do an upgrade from 7.1.1 to 7.2 on Oracle  \n10:56\u00a0<vmassol>\u00a0yes but seen how often we have migration issues  \n10:56\u00a0<vmassol>\u00a0maybe we should run these migration tests on the 4 DBs just after RC1 is released, wdyt?  \n10:57\u00a0<msmeria>\u00a0I agree :)  \n10:58\u00a0<vmassol>\u00a0cool, do you think you could put this in your QA plan?  \n10:58\u00a0<vmassol>\u00a0(for next time)  \n11:03\u00a0<Slashman>\u00a0has joined #xwiki  \n11:06\u00a0<vmassol>\u00a0tmortagne: ?  \n11:07\u00a0<tmortagne>\u00a0vmassol: yes I saw the mail, but I tough I had simply copy/pasted other code about hidden document field  \n11:07\u00a0<tmortagne>\u00a0will look again  \n11:07\u00a0<vmassol>\u00a0ok  \n11:08\u00a0<tmortagne>\u00a0I confirm it's the exact same code in HiddenDocumentFilter  \n11:08\u00a0<tmortagne>\u00a0so I don't understand  \n11:08\u00a0<tmortagne>\u00a0https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-query/xwiki-platform-query-manager/src/main/java/org/xwiki/query/internal/HiddenDocumentFilter.java#L41  \n11:09\u00a0<tmortagne>\u00a0so we are using \"doc.hidden <> true\" since a long time it seems  \n11:10\u00a0<vmassol>\u00a0would you like me to test the upgrade? I have some oracle vm somewhere that i could dig out  \n11:10\u00a0<vmassol>\u00a0I guess msmeria has one too :)  \n11:11\u00a0<vmassol>\u00a0or gsmeria1  \n11:11\u00a0<vmassol>\u00a0actually it would help me if gsmeria1 or msmeria could do an upgrade test on oracle/pgsql  \n11:12\u00a0<vmassol>\u00a0(and thus validate http://test.xwiki.org/xwiki/bin/view/Wiki+Tests/Migrate+XWiki+using+Distribution+Wizard )  \n11:12\u00a0<vmassol>\u00a0(from 7.1.2 to 7.2)  \n11:12\u00a0<gsmeria1>\u00a0I don't have one. Maybe Manuel has it. I will tell him. He's in his lunch break now  \n11:13\u00a0<vmassol>\u00a0ok sorry I confused with ramona who had one  \n11:13\u00a0<vmassol>\u00a0s/confused/mixed up  \n11:13\u00a0<tmortagne>\u00a0we definitely need to try and reproduce it  \n11:13\u00a0<tmortagne>\u00a0and if we reproduce it try to understand how the hidden document filter can work...  \n11:15\u00a0<tmortagne>\u00a0hmm actually I may have an idea actually, looks like we don't go trough hibernate in migrators so maybe hibernate do some conversion for boolean fields  \n11:17\u00a0<tmortagne>\u00a0well it's encapsulated by hibernate but it's jdbc APIs so not sure  \n11:17\u00a0<vmassol>\u00a0tmortagne: see http://grepcode.com/file/repository.springsource.com/org.hibernate/com.springsource.org.hibernate/3.3.1/org/hibernate/dialect/Dialect.java#Dialect.toBooleanValueString%28boolean%29  \n11:17\u00a0<vmassol>\u00a0toBooleanValueString()  \n11:17\u00a0<vmassol>\u00a0\"The SQL literal value to which this database maps boolean values.\"  \n11:18\u00a0<vmassol>\u00a0(note that oracle10gdialect doesn't override it)  \n11:18\u00a0<tmortagne>\u00a0so that would be org.hibernate.jdbc.Work does not go trough hibernate  \n11:18\u00a0<tmortagne>\u00a0need to refactor migrator  \n11:19\u00a0<vmassol>\u00a0that would be strange  \n11:20\u00a0<vmassol>\u00a0(haven't checked our code so don't know what we call)  \n11:21\u00a0<tmortagne>\u00a0we use org.hibernate.jdbc.Work  \n11:21\u00a0<tmortagne>\u00a0but then hibernate give us a java.sql.Connection  \n11:21\u00a0<tmortagne>\u00a0and looks like it's a low level one...  \n11:47\u00a0<gsmeria1>\u00a0has quit  \n11:48\u00a0<gsmeria>\u00a0has joined #xwiki  \n11:56\u00a0<vmassol1>\u00a0has joined #xwiki  \n11:57\u00a0<vmassol>\u00a0has quit  \n11:58\u00a0<vmassol1>\u00a0has quit  \n12:00\u00a0<vmassol>\u00a0has joined #xwiki  \n12:01\u00a0<tmortagne>\u00a0vmassol, msmeria: I refactored the migrator for XWIKI-12625, would be great if one of you could test a migration on Oracle  \n12:02\u00a0<vmassol>\u00a0msmeria: do you think you or ramona could test/restest the migrations? (including to 7.3SNAPSHOT) :)  \n12:02\u00a0<vmassol>\u00a0tmortagne: you could also provide a modified jar to the guy for retesting I guess  \n12:03\u00a0<Denis1>\u00a0is now known as <Denis>  \n12:04\u00a0<tmortagne>\u00a0I wanted a test on our side before distribution a jar actually  \n12:04\u00a0<tmortagne>\u00a0s/distribution/distributing/  \n12:04\u00a0<vmassol>\u00a0k  \n12:04\u00a0<tmortagne>\u00a0anyway if you don't have the time right now I can start with that  \n12:15\u00a0<msmeria>\u00a0vmassol: I can't do it today at least.. I'll talk to Ramona  \n12:25\u00a0<Denis>\u00a0tmortagne: I can borrow you a VM for testing  \n12:27\u00a0<Denis>\u00a0s/borrow/lend  \n12:28\u00a0<tmortagne>\u00a0Denis: thanks, will try if if the guy does not answer but he seems reactive for now  \n12:29\u00a0<tmortagne>\u00a0I have to go, back in 2h  \n12:44\u00a0<Ramona1>\u00a0has joined #xwiki  \n15:06\u00a0<msmeria>\u00a0has quit  \n15:14\u00a0<gsmeria>\u00a0has quit  \n15:34\u00a0<cjd\\_firewall>\u00a0has joined #xwiki  \n15:50\u00a0<tmortagne>\u00a0has quit  \n16:33\u00a0<Ramona1>\u00a0has quit  \n16:53\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:26\u00a0<KermitTheFragger>\u00a0has quit  \n17:51\u00a0<tmortagne>\u00a0has quit  \n18:07\u00a0<cjd\\_firewall>\u00a0has quit  \n18:08\u00a0<gdelhumeau>\u00a0has quit  \n18:11\u00a0<woshilapin>\u00a0has quit  \n18:37\u00a0<sdumitriu>\u00a0has quit  \n18:38\u00a0<sdumitriu>\u00a0has joined #xwiki  \n18:42\u00a0<Ramona1>\u00a0has joined #xwiki  \n18:53\u00a0<Ramona1>\u00a0has quit  \n18:54\u00a0<abusenius>\u00a0has joined #xwiki  \n18:59\u00a0<Ramona1>\u00a0has joined #xwiki  \n19:19\u00a0<tmortagne>\u00a0has joined #xwiki  \n19:25\u00a0<Ramona1>\u00a0has quit  \n20:46\u00a0<Ramona1>\u00a0has joined #xwiki  \n21:04\u00a0<tmortagne>\u00a0has quit  \n21:05\u00a0<Ramona1>\u00a0has quit  \n21:12\u00a0<abusenius>\u00a0has quit  \n21:13\u00a0<abusenius>\u00a0has joined #xwiki  \n22:08\u00a0<vmassol>\u00a0has quit  \n22:22\u00a0<Slashman>\u00a0has quit  \n23:22\u00a0<abusenius>\u00a0has quit\n"}