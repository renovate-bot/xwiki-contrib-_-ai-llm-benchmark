{"id": "dev:IRC.xwikiArchive20150619", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150619", "title": "IRC Archive for channel #xwiki on 19 June 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n00:50\u00a0<sdumitriu1>\u00a0has quit  \n00:55\u00a0<sdumitriu>\u00a0has quit  \n00:56\u00a0<sdumitriu>\u00a0has joined #xwiki  \n00:56\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n03:08\u00a0<xwikibot>\u00a0has joined #xwiki  \n03:09\u00a0<\\_cjd>\u00a0has joined #xwiki  \n03:12\u00a0<cjd>\u00a0has quit  \n06:01\u00a0<Denis3>\u00a0has joined #xwiki  \n06:02\u00a0<Denis>\u00a0has quit  \n07:35\u00a0<msmeria>\u00a0has joined #xwiki  \n07:42\u00a0<msmeria1>\u00a0has joined #xwiki  \n07:44\u00a0<msmeria>\u00a0has quit  \n08:19\u00a0<\\_cjd>\u00a0has quit  \n08:25\u00a0<mflorea>\u00a0has joined #xwiki  \n08:32\u00a0<Trefex>\u00a0has joined #xwiki  \n08:41\u00a0<vmassol>\u00a0has joined #xwiki  \n08:42\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:52\u00a0<vmassol>\u00a0good morning  \n08:52\u00a0<vmassol>\u00a0FYI I've finished making changes to the URL Factories and now I'm debugging since ofc it doesn't work ;)  \n08:52\u00a0<vmassol>\u00a0(improving stuff on the way)  \n09:00\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:09\u00a0<\\_cjd>\u00a0has joined #xwiki  \n09:19\u00a0<gsmeria>\u00a0has joined #xwiki  \n09:21\u00a0<\\_cjd>\u00a0vmassol: https://www.topbug.net/blog/2013/04/14/install-and-use-gnu-command-line-tools-in-mac-os-x/  \n09:21\u00a0<\\_cjd>\u00a0I have not installed it yet but it looks pretty good for making your laptop behave the same as big iron  \n09:21\u00a0<\\_cjd>\u00a0is now known as <cjd>  \n09:32\u00a0<gsmeria>\u00a0has quit  \n09:34\u00a0<vmassol>\u00a0cjd; ok, not sure I need this though  \n09:35\u00a0<cjd>\u00a0\"need\" is a strong word for it, I think it is helpful because then you can (more often) reuse command line stuff between linux and osx  \n09:35\u00a0<vmassol>\u00a0not had the need for the past 9 years :)  \n09:36\u00a0<vmassol>\u00a0but yes I see what you mean  \n09:36\u00a0<cjd>\u00a0yeah, it's definitely possible to live w/o it  \n09:36\u00a0<cjd>\u00a0I just thought I'd share since I'm now a mac user  \n09:36\u00a0<vmassol>\u00a0hehe  \n09:37\u00a0<vmassol>\u00a0tmortagne: my XE is failing due to the migration you added. I'll rebuild more to ensure it's not my build  \n09:38\u00a0<Denis3>\u00a0is now known as <Denis>  \n09:38\u00a0<tmortagne>\u00a0vmassol: it's failing with what error ? I started XE several times with it  \n09:39\u00a0<vmassol>\u00a0\"Caused by: java.sql.SQLFeatureNotSupportedException: feature not supported\"  \n09:39\u00a0<vmassol>\u00a0I had just rebuilt oldcore and odel  \n09:39\u00a0<vmassol>\u00a0\\*model  \n09:39\u00a0<vmassol>\u00a0maybe there was more to build, I'm rebuilding the full enteprise now  \n09:40\u00a0<tmortagne>\u00a0maybe hsqldb does not support jdbc batch requests then (I worked on mysql)  \n09:41\u00a0<vmassol>\u00a0ah indded that would be it then  \n09:41\u00a0<tmortagne>\u00a0where is it failing ?  \n09:41\u00a0<tmortagne>\u00a0I would have assumed that the driver would just translate the batches in separated requests itself...  \n09:42\u00a0<vmassol>\u00a0https://gist.github.com/vmassol/e05f52510762ac593e7a  \n09:43\u00a0<gsmeria>\u00a0has joined #xwiki  \n09:44\u00a0<tmortagne>\u00a0hmm no it's not the batch actually  \n09:44\u00a0<tmortagne>\u00a0it's failing a a simple select  \n09:44\u00a0<tmortagne>\u00a0that's weird  \n09:45\u00a0<tmortagne>\u00a0trying to reproduce it, will see  \n09:46\u00a0<tmortagne>\u00a0improving a bit the method since it's a bit mixed right now (even if mysql did not care)  \n09:54\u00a0<mflorea>\u00a0has quit  \n09:56\u00a0<vmassol>\u00a0tmortagne: I've rebuilt XE and I don't have the problem anymore  \n09:57\u00a0<tmortagne>\u00a0vmassol: the migration is not executed when you start from scratch  \n09:57\u00a0<vmassol>\u00a0but maybe I have the old odcore, checking  \n09:57\u00a0<gsmeria>\u00a0has quit  \n09:57\u00a0<vmassol>\u00a0ah yes  \n09:57\u00a0<vmassol>\u00a0makes sense  \n09:57\u00a0<tmortagne>\u00a0you got it because you were doing an upgrade  \n09:58\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:01\u00a0<Slashman>\u00a0has joined #xwiki  \n10:08\u00a0<cjd>\u00a0has quit  \n10:08\u00a0<cjd>\u00a0has joined #xwiki  \n10:19\u00a0<vmassol>\u00a0cjd: I'm looking at PathStringEntityReferenceSerializer  \n10:19\u00a0<cjd>\u00a0has quit  \n10:19\u00a0<vmassol>\u00a0and I see you're using URL encoding for serializing an entity into a valid file name  \n10:20\u00a0<vmassol>\u00a0forget the question :)  \n10:20\u00a0<vmassol>\u00a0(which I haven't asked ;))  \n10:21\u00a0<gsmeria>\u00a0has quit  \n10:21\u00a0<cjd>\u00a0has joined #xwiki  \n10:26\u00a0<Trefex1>\u00a0has joined #xwiki  \n10:27\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:29\u00a0<Trefex>\u00a0has quit  \n10:33\u00a0<mflorea>\u00a0has joined #xwiki  \n10:41\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:47\u00a0<gsmeria>\u00a0has quit  \n10:52\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:53\u00a0<evalica>\u00a0has joined #xwiki  \n10:54\u00a0<msmeria>\u00a0has joined #xwiki  \n10:54\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:56\u00a0<msmeria1>\u00a0has quit  \n10:57\u00a0<Enygma`>\u00a0has quit  \n10:57\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:02\u00a0<ClemensR>\u00a0I have made a bugfix for a (potential) information leak thing at: https://github.com/xwiki/xwiki-platform/compare/XWIKI-11476?w=0 \u00a0... but I am not sure if this breaks something else, so it is just on a branch  \n11:03\u00a0<tmortagne>\u00a0ClemensR: XWikiRightServiceImpl is not really used by default anymore, this is the old right system  \n11:03\u00a0<ClemensR>\u00a0ah, strange, I thought it is used by the caching rights service to fill the cache  \n11:04\u00a0<ClemensR>\u00a0but then, this is likely to be a wontfix instead, if it is unused  \n11:04\u00a0<tmortagne>\u00a0checking the caching right service but the whole point is to not use XWikiRightServiceImpl anymore so I would be surpised  \n11:05\u00a0<ClemensR>\u00a0I guess I should try to reproduce the issue with 7.1.1 in the first place (code has been written when 6.x was master)  \n11:05\u00a0<tmortagne>\u00a0I don't see any reference to XWikiRightServiceImpl in XWikiCachingRightService but maybe it's trough some weird path  \n11:05\u00a0<tmortagne>\u00a0we use the new right system since 4.0  \n11:05\u00a0<tmortagne>\u00a0hmm maybe not 4.0 by default actually  \n11:06\u00a0<tmortagne>\u00a0but it was used in 6.x for sure  \n11:06\u00a0<tmortagne>\u00a0if XWikiCachingRightService ends up in XWikiRightServiceImpl that sounds like a bug to me  \n11:06\u00a0<tmortagne>\u00a0Denis ?  \n11:09\u00a0<Denis>\u00a0unused, these services are completely independent of each others  \n11:12\u00a0<ClemensR>\u00a0seems the issue is still there in 7.1.1, however (if it is an issue at all). But if my \"fix\" changes unused code, then of course it is pointless. \u00a0:-/  \n11:13\u00a0<ClemensR>\u00a0I thought it fixes it, but maybe I have messed with xwiki.cfg to use the old rights service ...  \n12:05\u00a0<gsmeria>\u00a0has quit  \n12:09\u00a0<Trefex1>\u00a0has quit  \n12:40\u00a0<sbaloul>\u00a0has joined #xwiki  \n12:42\u00a0<gsmeria>\u00a0has joined #xwiki  \n12:52\u00a0<msmeria1>\u00a0has joined #xwiki  \n12:53\u00a0<mflorea>\u00a0has quit  \n12:55\u00a0<msmeria>\u00a0has quit  \n13:06\u00a0<msmeria1>\u00a0has quit  \n13:21\u00a0<msmeria>\u00a0has joined #xwiki  \n13:32\u00a0<mflorea>\u00a0has joined #xwiki  \n13:34\u00a0<msmeria1>\u00a0has joined #xwiki  \n13:35\u00a0<msmeria>\u00a0has quit  \n14:00\u00a0<msmeria>\u00a0has joined #xwiki  \n14:02\u00a0<msmeria1>\u00a0has quit  \n14:24\u00a0<tmortagne>\u00a0msmeria: do you remember the minimum version of the pgsql connector required by XWiki 7.0+ from your tests ?  \n14:30\u00a0<msmeria>\u00a0tmortagne: hello. I don't remember the minimum version :(  \n14:33\u00a0<msmeria>\u00a0tmortagne: from this table: https://jdbc.postgresql.org/download.html it suggests it could be 9.2-1004, the first JDBC4.1/JDK 1.7 version listed  \n14:34\u00a0<tmortagne>\u00a0msmeria: someone got a message like \"org.postgresql.jdbc4.Jdbc4Connection.isValid(int)\" with his connector so I wanted to give him some verified version  \n14:36\u00a0<msmeria>\u00a0tmortagne: I can do a quick test with \u00a09.2-1004 now  \n14:38\u00a0<tmortagne>\u00a0msmeria: 9.2-1004 is the last 9.2 version so it should work since that's the version I have on ubuntu 15.04 which works well with XWiki  \n14:38\u00a0<tmortagne>\u00a0but from what I remember from your test you tested with lower variants of 9.2 which which it wasn't working  \n14:39\u00a0<tmortagne>\u00a0msmeria: anyway it would be good to indicate the minimum version required in http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationPostgreSQL  \n14:44\u00a0<tmortagne>\u00a0actually what is written about jdbc 4.1 driver is probably enough, it's just that on debian there is only a jdbc4 file which support 4.1 or not depending on the version  \n14:45\u00a0<msmeria>\u00a0tmortagne: actually I tested mysql jdbc driver versions some time ago, not postgresql  \n14:46\u00a0<tmortagne>\u00a0you sure, I tough I remember you testing it when we released 7.0 and discovered issues with the surprise jump to jdbc4  \n14:47\u00a0<tmortagne>\u00a0anyway the right inormation is most probably that the required version is whatever support jdbc4.1  \n14:47\u00a0<vmassol>\u00a0once you find out the minimal version please add it to http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationPostgreSQL :)  \n14:47\u00a0<vmassol>\u00a0(I did put the jdbc4.1 need on that page)  \n14:47\u00a0<msmeria>\u00a0tmortagne: yes, I'm sure I didn't test nothing on Postgres on 7.0  \n14:48\u00a0<tmortagne>\u00a0vmassol: the page say that you need a jdbc 4.1 connector and postgres indicate what version support 4.1 on https://jdbc.postgresql.org/download.html so it's probably enough  \n14:49\u00a0<tmortagne>\u00a0I just did not looked at the page before asking msmeria  \n14:50\u00a0<vmassol>\u00a0ok  \n14:59\u00a0<gsmeria>\u00a0has quit  \n15:24\u00a0<msmeria>\u00a0has quit  \n16:23\u00a0<ClemensR>\u00a0has left #xwiki  \n16:30\u00a0<xwikiorg\\_guest\\_8>\u00a0has joined #xwiki  \n16:34\u00a0<xwikiorg\\_guest\\_8>\u00a0has quit  \n16:46\u00a0<mflorea>\u00a0has quit  \n16:48\u00a0<chalx>\u00a0has quit  \n17:28\u00a0<tmortagne>\u00a0has quit  \n17:41\u00a0<KermitTheFragger>\u00a0has quit  \n17:46\u00a0<cjd>\u00a0vmassol: I had a thought re nested documents, we might not want to allow a sub-space (or sub-document) which has the same name as an existing attachment  \n17:47\u00a0<vmassol>\u00a0cjd: where do you see a limitation? (haven't seen it yet)  \n17:47\u00a0<cjd>\u00a0I propose to impose the limitation for usability reasons  \n17:47\u00a0<vmassol>\u00a0I've refactore the URL and didn't see the problem  \n17:47\u00a0<vmassol>\u00a0\\*refactored  \n17:47\u00a0<vmassol>\u00a0what usability?  \n17:48\u00a0<vmassol>\u00a0that would be the same as saying a doc should not be named after a page  \n17:48\u00a0<vmassol>\u00a0and a page should not be named after a wiki  \n17:48\u00a0<cjd>\u00a0I'm sure it's technically possible to allow a collision but it just messes with people's heads to not be able to preceive objects,attachments,subspaces as all things in the same namespace  \n17:48\u00a0<vmassol>\u00a0and a property should not be named after a doc, etc  \n17:48\u00a0<vmassol>\u00a0I much prefer to let people do what they want  \n17:48\u00a0<vmassol>\u00a0we're not going to name stuff similarly ourselves though  \n17:49\u00a0<vmassol>\u00a0but we're a platform  \n17:49\u00a0<vmassol>\u00a0and i don't like imposing arbitrary resitrations at an API level  \n17:49\u00a0<cjd>\u00a0well... sometimes limitations make freedom  \n17:49\u00a0<cjd>\u00a0consider: Thing getThing(String name) -> where Thing is possibly a folder, attachment, object or class  \n17:50\u00a0<cjd>\u00a0that would be impossible if you allowed namespace collisions  \n17:50\u00a0<vmassol>\u00a0restrictions are really bad  \n17:50\u00a0<vmassol>\u00a0eveyr time we have some we suffer  \n17:50\u00a0<vmassol>\u00a0consider the db posing restrictions on schemas  \n17:50\u00a0<vmassol>\u00a0we've had that and every time its days lost\u2026  \n17:51\u00a0<vmassol>\u00a0\\*schema nams  \n17:51\u00a0<cjd>\u00a0well in filesystems, you could theoretically have a folder with the same name as a file  \n17:51\u00a0<cjd>\u00a0there's no technical reason why the filesystem shouldn't allow it  \n17:51\u00a0<cjd>\u00a0but POSIX group said it was clearly insane so everyone has banned it  \n17:51\u00a0<vmassol>\u00a0??  \n17:51\u00a0<vmassol>\u00a0I can create a directory named afterr a file  \n17:52\u00a0<cjd>\u00a0with the same name in the same directory ?  \n17:52\u00a0<vmassol>\u00a0sure  \n17:52\u00a0<cjd>\u00a0not:~ user$ echo 'hi' > hi  \n17:52\u00a0<cjd>\u00a0not:~ user$ mkdir hi  \n17:52\u00a0<cjd>\u00a0mkdir: hi: File exists  \n17:52\u00a0<cjd>\u00a0not:~ user$  \n17:53\u00a0<vmassol>\u00a0mkdir test; cd test; touch test  \n17:53\u00a0<cjd>\u00a0hehe that's a file inside of a folder  \n17:53\u00a0<cjd>\u00a0that  \n17:53\u00a0<cjd>\u00a0's not what I'm referring to  \n17:53\u00a0<vmassol>\u00a0which is what we're doing  \n17:53\u00a0<cjd>\u00a0right, that for me is fine  \n17:53\u00a0<vmassol>\u00a0wiki > space > page > attachment  \n17:54\u00a0<vmassol>\u00a0page and attaxhment are not at the same leel  \n17:54\u00a0<vmassol>\u00a0\\*level  \n17:54\u00a0<cjd>\u00a0Imagine a document with an attachment called \u00a0\u00a0myspreadsheet.xls \u00a0and a \u00a0sub-document (nested) called \u00a0myspreadsheet.xls  \n17:54\u00a0<cjd>\u00a0IMO that should be banned for sanity reasons  \n17:55\u00a0<vmassol>\u00a0I'm not fond of it, but you coud propose it on the list  \n17:55\u00a0<vmassol>\u00a0(you may be right)  \n17:55\u00a0<cjd>\u00a0I'll try to catch Caty  \n17:55\u00a0<vmassol>\u00a0ok  \n17:55\u00a0<cjd>\u00a0thanks  \n17:55\u00a0<vmassol>\u00a0no, thanks to you :)  \n17:55\u00a0<cjd>\u00a0:)  \n17:55\u00a0<cjd>\u00a0bbl  \n17:56\u00a0<vmassol>\u00a0yup  \n18:04\u00a0<evalica>\u00a0has quit  \n18:04\u00a0<evalica>\u00a0has joined #xwiki  \n18:05\u00a0<evalica>\u00a0has quit  \n18:05\u00a0<Enygma`>\u00a0has quit  \n18:29\u00a0<abusenius>\u00a0has joined #xwiki  \n19:13\u00a0<vmassol>\u00a0has quit  \n19:22\u00a0<cjd>\u00a0has quit  \n19:40\u00a0<Pbas>\u00a0has left #xwiki  \n19:58\u00a0<mflorea>\u00a0has joined #xwiki  \n20:12\u00a0<cjd>\u00a0has joined #xwiki  \n20:47\u00a0<Slashman>\u00a0has quit  \n22:04\u00a0<cjd>\u00a0has quit  \n23:28\u00a0<mflorea>\u00a0has quit\n"}