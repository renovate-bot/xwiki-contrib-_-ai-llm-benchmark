{"id": "dev:IRC.xwikiArchive20160609", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160609", "title": "IRC Archive for channel #xwiki on 09 June 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<sdumitriu1>\u00a0has joined #xwiki  \n00:14\u00a0<vmassol>\u00a0has quit  \n00:22\u00a0<edvorg>\u00a0has quit  \n00:23\u00a0<edvorg>\u00a0has joined #xwiki  \n01:27\u00a0<lkrejci>\u00a0has quit  \n03:47\u00a0<evalica>\u00a0has joined #xwiki  \n03:52\u00a0<evalica>\u00a0has quit  \n04:43\u00a0<edvorg>\u00a0has quit  \n05:48\u00a0<evalica>\u00a0has joined #xwiki  \n05:53\u00a0<evalica>\u00a0has quit  \n07:00\u00a0<Aranjedeath>\u00a0has quit  \n07:20\u00a0<msmeria>\u00a0has joined #xwiki  \n08:00\u00a0<lkrejci>\u00a0has joined #xwiki  \n08:11\u00a0<fitz>\u00a0has joined #xwiki  \n08:25\u00a0<Ramona1>\u00a0has joined #xwiki  \n08:27\u00a0<Ramona1>\u00a01  \n08:29\u00a0<Ramona1>\u00a0has quit  \n08:29\u00a0<Ramona1>\u00a0has joined #xwiki  \n08:29\u00a0<Ramona1>\u00a0has quit  \n08:31\u00a0<vbuzila>\u00a0has joined #xwiki  \n08:31\u00a0<vbuzila>\u00a01  \n08:33\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:02\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:15\u00a0<acotiuga>\u00a0has joined #xwiki  \n09:38\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:15\u00a0<Slashman>\u00a0has joined #xwiki  \n10:21\u00a0<mflorea>\u00a0has joined #xwiki  \n10:34\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:34\u00a0<lkrejci>\u00a0has quit  \n10:34\u00a0<lkrejci>\u00a0has joined #xwiki  \n10:37\u00a0<vmassol>\u00a0has joined #xwiki  \n10:38\u00a0<Slashman>\u00a0has quit  \n10:44\u00a0<moep>\u00a0has joined #xwiki  \n10:52\u00a0<Slashman>\u00a0has joined #xwiki  \n11:02\u00a0<evalica>\u00a0has joined #xwiki  \n11:02\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:30\u00a0<acotiuga>\u00a0has quit  \n11:42\u00a0<Slashman>\u00a0has quit  \n11:51\u00a0<moep>\u00a0has quit  \n11:55\u00a0<Slashman>\u00a0has joined #xwiki  \n12:08\u00a0<lkrejci>\u00a0has quit  \n12:22\u00a0<vbuzila>\u00a0has quit  \n12:33\u00a0<lkrejci>\u00a0has joined #xwiki  \n12:33\u00a0<lkrejci>\u00a0has quit  \n12:43\u00a0<Denis1>\u00a0has quit  \n12:55\u00a0<vbuzila>\u00a0has joined #xwiki  \n12:57\u00a0<ClemensR>\u00a0has left #xwiki  \n12:57\u00a0<lkrejci>\u00a0has quit  \n12:57\u00a0<lkrejci>\u00a0has joined #xwiki  \n13:20\u00a0<moep>\u00a0has joined #xwiki  \n14:03\u00a0<vbuzila>\u00a0has quit  \n14:03\u00a0<vbuzila1>\u00a0has joined #xwiki  \n14:18\u00a0<lkrejci>\u00a0has quit  \n14:20\u00a0<lkrejci>\u00a0has joined #xwiki  \n14:20\u00a0<lkrejci>\u00a0has joined #xwiki  \n14:28\u00a0<edvorg>\u00a0has joined #xwiki  \n14:56\u00a0<lkrejci>\u00a0has quit  \n14:57\u00a0<lkrejci>\u00a0has joined #xwiki  \n15:01\u00a0<edvorg>\u00a0has quit  \n15:04\u00a0<msmeria>\u00a0has quit  \n15:30\u00a0<katrich>\u00a0has joined #xwiki  \n15:31\u00a0<ClemensR>\u00a0has joined #xwiki  \n15:31\u00a0<katrich>\u00a0Hello all, how to set up ldap auth with multiple AD domains?  \n15:38\u00a0<lkrejci>\u00a0has quit  \n15:39\u00a0<lkrejci>\u00a0has joined #xwiki  \n15:39\u00a0<lkrejci>\u00a0has joined #xwiki  \n15:43\u00a0<ClemensR>\u00a0I think if the different domains can be mapped to different subwikis, you can do that via a separate configuration by each subwiki; otherwise it might need some mapping / proxy magic on the LDAP/AD server side (which I unfortunately have little knowledge about)  \n15:50\u00a0<tmortagne>\u00a0katrich: it depends what you mean exactly by multiple AD domains, if you are using the embedded login/pass LDAP authentication your only choice usually if to have some kind of LDAP proxy dealing with the multiple LDAP servers for XWiki  \n15:52\u00a0<tmortagne>\u00a0if your plan is to use something like kerberos you could put an kerberos authentocator (like waffle in tomcat for example) in front of XWiki and use http://extensions.xwiki.org/xwiki/bin/view/Extension/XWiki+Authenticator+Trusted+LDAP which support multiple LDAP servers  \n15:57\u00a0<lkrejci>\u00a0has quit  \n15:57\u00a0<lkrejci>\u00a0has joined #xwiki  \n15:57\u00a0<lkrejci>\u00a0has joined #xwiki  \n16:02\u00a0<vbuzila1>\u00a0has left #xwiki  \n16:09\u00a0<katrich>\u00a0thanks for your suggestions  \n16:20\u00a0<xwikibot>\u00a0has joined #xwiki  \n16:25\u00a0<katrich>\u00a0tmortagne: ClemensR: by the way, why it's not possible to authenticate an user via standard ldap procedure using \"domain\\login\" form?  \n16:26\u00a0<tmortagne>\u00a0katrich: the issue is not the login, the issue is that you only have one LDAP server in the configuration  \n16:26\u00a0<lkrejci>\u00a0has quit  \n16:26\u00a0<katrich>\u00a0i tried and found xwiki sends \"domain\\\\login\" instead  \n16:27\u00a0<tmortagne>\u00a0that's why I told you about the need to have some proxy between XWiki and the LDAP servers  \n16:27\u00a0<ClemensR>\u00a0ah, it tries to escape the user name ...  \n16:27\u00a0<lkrejci>\u00a0has joined #xwiki  \n16:28\u00a0<katrich>\u00a0actually our ldap server can authenticate users from all our domains  \n16:28\u00a0<tmortagne>\u00a0then it should be ok  \n16:29\u00a0<katrich>\u00a0the problem then is in escaping  \n16:29\u00a0<tmortagne>\u00a0when do you put \"domain\\login\" \u00a0?  \n16:29\u00a0<tmortagne>\u00a0where  \n16:29\u00a0<katrich>\u00a0in login form  \n16:29\u00a0<katrich>\u00a0and in ldap\\_bind is {0}  \n16:30\u00a0<tmortagne>\u00a0that's weird, it should not be an problem there  \n16:30\u00a0<tmortagne>\u00a0s/an/a/  \n16:30\u00a0<tmortagne>\u00a0did you try to enable debug log and see what happen exactly ?  \n16:31\u00a0<ClemensR>\u00a0I do not see where it happens in the code either. where does the output happen that tells you that you get a double backslash ?  \n16:43\u00a0<katrich>\u00a0http://pastebin.com/gKAUquPf  \n16:43\u00a0<katrich>\u00a0this is debug  \n16:43\u00a0<katrich>\u00a0log  \n16:59\u00a0<ClemensR>\u00a0hmpf, there is some modification of the value in the login field before it hits the authenticator, but this does not duplicate backslashes (unless I am overlooking something)  \n17:10\u00a0<ClemensR>\u00a0uh, oh, I see, it does escape the login  \n17:10\u00a0<ClemensR>\u00a0there is this helper here: \u00a0https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-ldap/xwiki-platform-ldap-authenticator/src/main/java/com/xpn/xwiki/plugin/ldap/XWikiLDAPConnection.java#L422  \n17:12\u00a0<ClemensR>\u00a0and it assumes we get a full dn to bind to, like cn={0},department=USER,o=xyz  \n17:12\u00a0<ClemensR>\u00a0there we want to escape \"a,b\" and 'a\\b' as user login  \n17:13\u00a0<ClemensR>\u00a0but for AD, where login is passed in as '{0}' directly, we obviously do not, but it happens anyway  \n17:16\u00a0\\*\u00a0ClemensR starts falling in love with that ldap stuff, again ...   \n17:17\u00a0<katrich>\u00a0:D  \n17:19\u00a0<ClemensR>\u00a0well, usually it is passed in as: xwiki.authentication.ldap.bind\\_DN=subdomain\\\\{0} \u00a0for AD, so it does make some sense to escape here, either - to me at least, maybe AD does not need it.  \n17:20\u00a0<ClemensR>\u00a0but if you add the domain with the login ... the escaping obviously breaks the login  \n17:21\u00a0<ClemensR>\u00a0I guess you are not really interested in building XWiki from source with a small modification of your own? Because that would fix the issue easily ;)  \n17:21\u00a0<tmortagne>\u00a0thing is authenticator was not really designed to expect getting the bind DN directly in the login field, it expect a uid  \n17:21\u00a0<tmortagne>\u00a0katrich: what you could do is use http://extensions.xwiki.org/xwiki/bin/view/Extension/XWiki+Authenticator+Trusted+LDAP which does support this use case  \n17:22\u00a0<tmortagne>\u00a0(when there is no SSO in front of it it fallback on login/pass form and parse the login as it it was a http REMOTE\\_USER)  \n17:23\u00a0<tmortagne>\u00a0s/as it it was/as if it was/  \n17:23\u00a0<KermitTheFragger>\u00a0has quit  \n17:23\u00a0<tmortagne>\u00a0if you decide to go with passing the complete AD bind right in the login field this is the best I think  \n17:39\u00a0<katrich>\u00a0ok, i'll look on it, thanks  \n17:47\u00a0<lkrejci>\u00a0has quit  \n17:51\u00a0<lkrejci>\u00a0has joined #xwiki  \n17:51\u00a0<Aranjedeath>\u00a0has joined #xwiki  \n18:06\u00a0<mflorea>\u00a0has quit  \n18:16\u00a0<fitz>\u00a0has quit  \n18:23\u00a0<ClemensR>\u00a0has left #xwiki  \n18:26\u00a0<lkrejci>\u00a0has quit  \n18:27\u00a0<lkrejci>\u00a0has joined #xwiki  \n18:31\u00a0<Aranjedeath>\u00a0has quit  \n18:32\u00a0<Aranjedeath>\u00a0has joined #xwiki  \n18:44\u00a0<Enygma`>\u00a0has quit  \n18:54\u00a0<tmortagne>\u00a0has quit  \n19:06\u00a0<gdelhumeau>\u00a0has quit  \n19:07\u00a0<katrich>\u00a0has quit  \n19:13\u00a0<evalica>\u00a0has quit  \n19:42\u00a0<moep>\u00a0has quit  \n19:42\u00a0<tmortagne>\u00a0has joined #xwiki  \n20:25\u00a0<lkrejci>\u00a0has quit  \n20:44\u00a0<Slashman>\u00a0has quit  \n21:01\u00a0<tmortagne>\u00a0has quit  \n22:59\u00a0<vmassol>\u00a0has quit  \n23:00\u00a0<sorinello>\u00a0has quit  \n23:34\u00a0<sorinello>\u00a0has joined #xwiki\n"}