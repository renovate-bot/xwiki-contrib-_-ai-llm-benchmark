{"id": "dev:IRC.xwikiArchive20100120", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100120", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nA-Kaser left at 00:17 (\"\"Soyons r\u00e9alistes, exigeons l'impossible.\" Ch\u00e9 Guevara\"  \nCalebJamesDeLisl left at 00:26 (  \nsunny\\_slls joined #xwiki at 04:25  \nsunny\\_slls left at 05:48 (\"?? \" ?? ???? ????? \" ??\"  \nkibaho1 joined #xwiki at 08:05  \nplunden joined #xwiki at 09:44  \narkub joined #xwiki at 10:01  \nlucaa left at 10:07 (\"Leaving.\"  \nEnygma` joined #xwiki at 10:14  \nCalebJamesDeLisl joined #xwiki at 10:18  \nlucaa joined #xwiki at 10:28  \nxwiki-bridge - (10:29): [vmassol] good morning everyone, fyi I'm working on fixing stats which I have surely broken in my commits of the past 2 days  \nxwiki-bridge - (10:30): [vmassol] CalebJamesDeLisle: hi. BTW I found a way to \"fix\" BaseElement (with the help of tmortagne) - I've committed it yesterday  \nxwiki-bridge - (10:37): [CalebJamesDeLisle] Great. I'll have to take a look. I'll have to svn up :)  \nxwiki-bridge - (10:39): [vmassol] CalebJamesDeLisle: you can also check the mail commits, might be easier to see what I modified  \nxwiki-bridge - (10:39): [CalebJamesDeLisle] I always run svn revert then svn-clean.pl before upping so I have a clean copy. One day I had to do forensics on the harddisk because I wiped something I hadn't svn sdd'd  \nxwiki-bridge - (10:39): [CalebJamesDeLisle] :)  \nlucaa left #xwiki at 10:39  \nxwiki-bridge - (10:41): [vmassol] hmmm what should we do when XWikiDocument.setDocumentReference is called with a NULL reference? Right now it's allowed and the document then has a null reference. It doesn't look right to me  \nxwiki-bridge - (10:41): [vmassol] we could ignore it or throw a runtime exception  \nxwiki-bridge - (10:42): [vmassol] or  \nxwiki-bridge - (10:42): [vmassol] consider it to be the default reference  \nxwiki-bridge - (10:43): [tmortagne] yes doe snot seem right, i would say exception  \nxwiki-bridge - (10:44): [vmassol] right now for setSpace, setName we ignore it if the passed string is null  \nxwiki-bridge - (10:44): [tmortagne] hmm maybe ignore, in any case -0 for \"consider it to be the default reference\"  \nxwiki-bridge - (10:45): [vmassol] exception is best probably I agree IllegalParameterException  \nxwiki-bridge - (10:46): [lucaa] what does setFullName do when called with a null param?  \nxwiki-bridge - (10:46): [vmassol] just checked and in the hib mapping it says not-null=\"true\"  \nxwiki-bridge - (10:46): [vmassol] let me check  \nxwiki-bridge - (10:47): [vmassol] lucaa: you mean now or before my changes?  \nxwiki-bridge - (10:47): [lucaa] I mean before  \nxwiki-bridge - (10:47): [vmassol] right now it considers it the default reference  \nxwiki-bridge - (10:47): [vmassol] let me check before  \nxwiki-bridge - (10:49): [vmassol] hmm I had already modified it in XE 2.1 :)  \nxwiki-bridge - (10:49): [vmassol] let me check 2.0  \nxwiki-bridge - (10:50): [vmassol] already changed in 2.0 too  \nxwiki-bridge - (10:51): [vmassol] and in 1.9 too  \nxwiki-bridge - (10:51): [vmassol] and in 1.8 to  \nxwiki-bridge - (10:52): [Fabio Mancinelli] Vincent : Apparently the changes you did in the core broke the REST subsystem\u2026 Though today I am not able to investigate because I have a conf this afternoon and I preparing the presentation :(  \nxwiki-bridge - (10:52): [vmassol] ahah  \nxwiki-bridge - (10:52): [vmassol] in 1.5 it was ignoring it  \nxwiki-bridge - (10:52): [vmassol] (if the parameter to setFullName was null)  \nxwiki-bridge - (10:53): [vmassol] Fabio Mancinelli: yes I know, thanks. I have it planned to cheeck it  \nxwiki-bridge - (10:53): [lucaa] yes, I just found it too  \nxwiki-bridge - (10:54): [Fabio Mancinelli] It is surely related to object management because the concerned tests are those that manipulate objects   \nxwiki-bridge - (10:54): [vmassol] yes  \nxwiki-bridge - (10:54): [lucaa] so, vmassol, we could ignore it  \nxwiki-bridge - (10:56): [lucaa] actually, how about set document reference throws and setFullName tests for non null  \nxwiki-bridge - (10:56): [lucaa] ?  \nxwiki-bridge - (10:58): [vmassol] yes that's a good idea I think  \nxwiki-bridge - (10:59): [vmassol] although this means defining what XWiki.getDocument(DocumentReference reference...) is supposed to return when reference is null  \nxwiki-bridge - (11:00): [lucaa] null?  \nxwiki-bridge - (11:00): [vmassol] yes probably  \nxwiki-bridge - (11:00): [vmassol] null for velocity should be ok  \nxwiki-bridge - (11:00): [vmassol] so we'd need several additional checks in XWiki class  \nxwiki-bridge - (11:00): [lucaa] well no, actually, because that's public API... and getDocument() never returned null  \nxwiki-bridge - (11:01): [lucaa] but it's new API, right?  \nxwiki-bridge - (11:01): [lucaa] we should make the old API   \nxwiki-bridge - (11:01): [lucaa] XWiki.getDocument(String) return what it used to return when string was null, and new API return null or throw  \nxwiki-bridge - (11:03): [vmassol] just checked, it was returning Main.WebHome I think  \nxwiki-bridge - (11:03): [vmassol] (ie default reference)  \nxwiki-bridge - (11:04): [lucaa] well, as a general strategy, I think old (now deprecated API) should preserve the bahaviour, even if it delegates to new functions. New functions can be more restrictive (and very probable should)  \nxwiki-bridge - (11:04): [lucaa] s/bahaviour/behaviour/  \nxwiki-bridge - (11:05): [vmassol] indeed I agree for old API. The pb is to ensure it  \nxwiki-bridge - (11:07): [lucaa] I'm looking at the DAB  \nxwiki-bridge - (11:08): [lucaa] actually nevermind...  \nxwiki-bridge - (11:08): [vmassol] tmortagne: if I want to keep the same behavior as before I need to have null means default reference  \nxwiki-bridge - (11:09): [vmassol] since before we were doing: new XWikiDocument(); setFullName(....)  \nxwiki-bridge - (11:09): [tmortagne] no  \nxwiki-bridge - (11:09): [vmassol] and now new XWikiDocument(ref)  \nxwiki-bridge - (11:09): [tmortagne] you need setFullName to behave as before  \nxwiki-bridge - (11:09): [vmassol] nope  \nxwiki-bridge - (11:09): [tmortagne] i don't see what is has to do with setDocumentReference  \nxwiki-bridge - (11:09): [tmortagne] new APIs can do whatever we want  \nxwiki-bridge - (11:10): [vmassol] sure provided you fix all the places that uses it  \nxwiki-bridge - (11:12): [tmortagne] so it has nothing to do with before (stable branch), it's because it's too much work  \nxwiki-bridge - (11:12): [vmassol] yes  \nxwiki-bridge - (11:20): [lucaa] dear developers, could you please find a few minutes to express your opinions on http://n2.nabble.com/new-model-VOTE-Should-we-support-entities-that-don-t-have-a-unique-name-tp4421204p4421204.html ?  \nxwiki-bridge - (11:20): [lucaa] if anything unclear, reply or ping here, I'll more than willing to explain.   \nxwiki-bridge - (11:20): [lucaa] Thanks!  \nxwiki-bridge - (11:21): [vmassol] lucaa: you should start by expressing your opinion! :)  \nxwiki-bridge - (11:21): [lucaa] I did, I said I haven't made up my mind yet  \nxwiki-bridge - (11:21): [lucaa] which means actually a +1  \nxwiki-bridge - (11:21): [vmassol] is that a new rule?  \nxwiki-bridge - (11:21): [lucaa] support it, even if we don't use it, so that we don't have too many problems after  \nxwiki-bridge - (11:21): [lucaa] no  \nxwiki-bridge - (11:22): [lucaa] it's a particular case, because the +1 doesn't mean a -1 for the other choice  \nxwiki-bridge - (11:22): [vmassol] no vote means 0 not +1  \nxwiki-bridge - (11:22): [vmassol] actually no vote means no vote  \nxwiki-bridge - (11:23): [lucaa] yes, no vote does mean no vote  \nxwiki-bridge - (11:23): [lucaa] but me not making up my mind, means, for me, a +1. Meaning that if I won't make up my mind, I will vote for supporting entities with no free name, so that we're safe in case we decide we want to support them  \nxwiki-bridge - (11:23): [lucaa] does it make any sense?  \nxwiki-bridge - (11:24): [lucaa] if not nevermind  \nkibaho1 left #xwiki at 11:28  \nCalebJamesDeLisl - (11:38): !who  \nxwiki-bridge - (11:38): \\* members: CalebJamesDeLisle, Denis Gervalle, Eduard Moraru, evalica, Fabio Mancinelli, florinciu, glerouge, guillaum1, hoani.cross, jerome.velociter, jvdrean, lucaa, mflorea, NielsMayer, salecss, silviar, tmortagne, vmassol  \nCalebJamesDeLisl - (11:38): !shutdown \u00a0not again :(  \nCalebJamesDeLisl - (11:39): !shutdown  \nxwiki-bridge left at 11:39 (Remote closed the connection  \nCalebJamesDeLisl - (11:39): need a way to tell from irc if jabber connection is lost.  \nxwiki-bridge joined #xwiki at 11:40  \nxwiki-bridge - (11:40): \\* sdumitriu has set the subject to: XWiki Chat - http://www.xwiki.org/  \nxwiki-bridge - (11:40): [CalebJamesDeLisle] hi bridge  \nxwiki-bridge - (11:42): [CalebJamesDeLisle] It would be nice if I could tell from irc when the bridge has lost the jabber connection.  \nxwiki-bridge - (11:46): [vmassol] CalebJamesDeLisle: yes would be nice  \nxwiki-bridge - (11:47): [CalebJamesDeLisle] if the bridge strips some characters maybe I could get it to reflect a !who  \nCalebJamesDeLisl - (11:47): !\\who  \nxwiki-bridge - (11:47): [CalebJamesDeLisle] nope  \nlucaa joined #xwiki at 11:54  \nlucaa - (11:55): !who  \nxwiki-bridge - (11:55): \\* members: CalebJamesDeLisle, Denis Gervalle, guillaum1, NielsMayer, vmassol, wangguoqin1001  \nlucaa - (11:55): vmassol: do you mind if I indent / format the expectations in the model tests?  \nxwiki-bridge - (12:01): [vmassol] !news  \nxwiki-bridge - (12:02): [vmassol] hmm doesn't seem to be working  \nxwiki-bridge - (12:02): [vmassol] ah yes that's normal  \nxwiki-bridge - (12:02): [vmassol] it's not implemented yet... right now it only gives news in the wiki where it's installed  \nCalebJamesDeLisl - (12:46): !shutdown  \nxwiki-bridge left at 12:46 (Remote closed the connection  \nxwiki-bridge joined #xwiki at 12:48  \nCalebJamesDeLisl - (12:48): !who  \nxwiki-bridge - (12:48): \\* members:   \nCalebJamesDeLisl - (12:48): !help  \nxwiki-bridge - (12:48): !who - shows who is on the other channel  \nxwiki-bridge - (12:48): !shutdown - shutdown bridge (will probably attempt to rejoin after a few seconds)  \nCalebJamesDeLisl - (12:49): They turned off jabber?  \nCalebJamesDeLisl - (12:55): !help  \nxwiki-bridge - (12:55): !who - shows who is on the other channel  \nxwiki-bridge - (12:55): !shutdown - shutdown bridge (will probably attempt to rejoin after a few seconds)  \nCalebJamesDeLisl - (12:55): !who  \nxwiki-bridge - (12:55): \\* members:   \nCalebJamesDeLisl - (13:06): !who  \nxwiki-bridge - (13:06): \\* members:   \nCalebJamesDeLisl - (13:06): no members, thinking I reset the bridge before jabber was back up... I'll try again...  \nCalebJamesDeLisl - (13:06): !shutdown  \nxwiki-bridge left at 13:06 (Remote closed the connection  \nxwiki-bridge joined #xwiki at 13:07  \nCalebJamesDeLisl - (13:07): !who  \nxwiki-bridge - (13:07): \\* members:   \nCalebJamesDeLisl - (13:07): mmm jabber.org == dead.  \nCalebJamesDeLisl - (13:15): !who  \nxwiki-bridge - (13:15): \\* members:   \nCalebJamesDeLisl - (13:16): jabber's back up...  \nCalebJamesDeLisl - (13:16): !shutdown  \nxwiki-bridge left at 13:16 (Remote closed the connection  \nxwiki-bridge joined #xwiki at 13:17  \nxwiki-bridge - (13:17): \\* sdumitriu has set the subject to: XWiki Chat - http://www.xwiki.org/  \nCalebJamesDeLisl - (13:17): !who  \nxwiki-bridge - (13:17): \\* members: CalebJamesDeLisle, Denis Gervalle, NielsMayer, Ricardo Rodr\u00edguez, vmassol, wangguoqin1001  \nxwiki-bridge - (13:17): [CalebJamesDeLisle] FYI: <CalebJamesDeLisl> Has conference.jabber.org been rebooting every couple hours for the past few days? I'm in the xwiki channel and periodically all of the users get kicked.  \nxwiki-bridge - (13:17): [CalebJamesDeLisle] <|Kev|> It's not /that/ often  \nxwiki-bridge - (13:17): [CalebJamesDeLisle] \u00a0But yes, I've been running tests for the last couple of days that involve bringing ejabberd down.  \nxwiki-bridge - (13:17): [CalebJamesDeLisle] \u00a0On top of that, ejabberd's been crashing a bit more than usual.  \nxwiki-bridge - (13:25): [vmassol] CalebJamesDeLisle: ah ok so thy're aware of it at least  \nxwiki-bridge - (13:25): [CalebJamesDeLisle] Interesting ports on hermes.jabber.org (208.68.163.220):  \nxwiki-bridge - (13:25): [CalebJamesDeLisle] PORT \u00a0\u00a0\u00a0\u00a0STATE \u00a0\u00a0\u00a0SERVICE  \nxwiki-bridge - (13:25): [CalebJamesDeLisle] 5222/tcp filtered unknown  \nxwiki-bridge - (13:25): [CalebJamesDeLisle] it would be hard not to be aware of that :)  \nLukemon\\_ left at 13:28 (barjavel.freenode.net irc.freenode.net  \nLukemon\\_ joined #xwiki at 13:29  \nxwiki-bridge - (13:32): [vmassol] ok starting debugging REST tests now  \nLukemon\\_ left at 13:35 (barjavel.freenode.net irc.freenode.net  \nlucaa left at 13:35 (barjavel.freenode.net irc.freenode.net  \nCalebJamesDeLisl left at 13:35 (barjavel.freenode.net irc.freenode.net  \nxipe left at 13:35 (barjavel.freenode.net irc.freenode.net  \nEnygma` left at 13:35 (barjavel.freenode.net irc.freenode.net  \nSvenDowideit left at 13:35 (barjavel.freenode.net irc.freenode.net  \nnuvolari left at 13:35 (barjavel.freenode.net irc.freenode.net  \nplunden left at 13:35 (barjavel.freenode.net irc.freenode.net  \nxwiki-bridge left at 13:40 (  \nplunden joined #xwiki at 13:42  \nxwiki-bridge joined #xwiki at 13:43  \nLukemon\\_ joined #xwiki at 13:43  \nlucaa joined #xwiki at 13:43  \nCalebJamesDeLisl joined #xwiki at 13:43  \nxipe joined #xwiki at 13:43  \nEnygma` joined #xwiki at 13:44  \nnuvolari joined #xwiki at 13:44  \nSvenDowideit joined #xwiki at 13:44  \nnuvolari left at 13:52 (barjavel.freenode.net irc.freenode.net  \nEnygma` left at 13:52 (barjavel.freenode.net irc.freenode.net  \nSvenDowideit left at 13:52 (barjavel.freenode.net irc.freenode.net  \nxwiki-bridge left at 13:52 (barjavel.freenode.net irc.freenode.net  \nxipe left at 13:52 (barjavel.freenode.net irc.freenode.net  \nlucaa left at 13:52 (barjavel.freenode.net irc.freenode.net  \nCalebJamesDeLisl left at 13:52 (barjavel.freenode.net irc.freenode.net  \nLukemon\\_ left at 13:52 (barjavel.freenode.net irc.freenode.net  \nplunden left at 13:52 (barjavel.freenode.net irc.freenode.net  \nSvenDowideit joined #xwiki at 13:54  \nnuvolari joined #xwiki at 13:54  \nEnygma` joined #xwiki at 13:54  \nxipe joined #xwiki at 13:54  \nCalebJamesDeLisl joined #xwiki at 13:54  \nlucaa joined #xwiki at 13:54  \nLukemon\\_ joined #xwiki at 13:54  \nxwiki-bridge joined #xwiki at 13:54  \nplunden joined #xwiki at 13:54  \nxwiki-bridge - (13:54): [vmassol] (ie store it in the response somewhere)  \nxwiki-bridge - (13:54): [vmassol] (in the status text maybe)  \nxwiki-bridge - (14:07): [Fabio Mancinelli] vincent : Actually the exception message should be dumped in the representation body  \nxwiki-bridge - (14:08): [vmassol] Fabio Mancinelli: so it's just the test not showing it?  \nxwiki-bridge - (14:08): [Fabio Mancinelli] Vincent : At least XWikiExceptions  \nxwiki-bridge - (14:08): [vmassol] Fabio Mancinelli: so getHttpMethodInfo should be improved to display it?  \nxwiki-bridge - (14:10): [Fabio Mancinelli] Vincent : Yes  \nxwiki-bridge - (14:12): [vmassol] Fabio Mancinelli: indeed much better now  \nxwiki-bridge - (14:13): [Fabio Mancinelli] Vincent : Ok cool.  \nEnygma` left at 14:16 (barjavel.freenode.net irc.freenode.net  \nnuvolari left at 14:16 (barjavel.freenode.net irc.freenode.net  \nSvenDowideit left at 14:16 (barjavel.freenode.net irc.freenode.net  \nplunden left at 14:16 (barjavel.freenode.net irc.freenode.net  \nxwiki-bridge left at 14:16 (barjavel.freenode.net irc.freenode.net  \nlucaa left at 14:16 (barjavel.freenode.net irc.freenode.net  \nxipe left at 14:16 (barjavel.freenode.net irc.freenode.net  \nCalebJamesDeLisl left at 14:16 (barjavel.freenode.net irc.freenode.net  \nLukemon\\_ left at 14:16 (barjavel.freenode.net irc.freenode.net  \nsunny\\_slls joined #xwiki at 14:17  \nSvenDowideit joined #xwiki at 14:17  \nnuvolari joined #xwiki at 14:17  \nEnygma` joined #xwiki at 14:17  \nxipe joined #xwiki at 14:17  \nCalebJamesDeLisl joined #xwiki at 14:17  \nlucaa joined #xwiki at 14:17  \nLukemon\\_ joined #xwiki at 14:17  \nxwiki-bridge joined #xwiki at 14:17  \nplunden joined #xwiki at 14:17  \nsunny\\_slls left #xwiki at 14:17  \nxwiki-bridge - (14:19): [vmassol] lucaa: if you have questions re ref shoot here. I can help you and thomas too probably.  \nxwiki-bridge - (14:21): [vmassol] fyi I broke all object save yesterday  \nxwiki-bridge - (14:21): [vmassol] trying to debug it  \nxwiki-bridge - (14:27): [lucaa] so, first of all, how do you guys see the object reference parsing implementation?   \nxwiki-bridge - (14:27): [lucaa] I thought of it as hidden behind the ObjectReference implementation, meaning that no other code besides the ObjectReference is aware of it  \nxwiki-bridge - (14:27): [lucaa] and exposes it through 3 functions:  \nxwiki-bridge - (14:28): [lucaa] \u00a0\u00a0\u00a0\u00a0/\\*\\*  \nxwiki-bridge - (14:28): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* @return the name of the class of the object, if the original value was relative, it will be resolved wrt the  \nxwiki-bridge - (14:28): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0object's document (the current entity ref parent)  \nxwiki-bridge - (14:28): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nxwiki-bridge - (14:28): [lucaa] \u00a0\u00a0\u00a0\u00a0public DocumentReference getClassName();  \nxwiki-bridge - (14:28): [lucaa] \u00a0\u00a0\u00a0\u00a0/\\*\\*  \nxwiki-bridge - (14:28): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* @return the number of the object among the objects of the same type in the document  \nxwiki-bridge - (14:29): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nxwiki-bridge - (14:29): [lucaa] \u00a0\u00a0\u00a0\u00a0public int getObjectNumber();  \nxwiki-bridge - (14:29): [lucaa] \u00a0\u00a0\u00a0\u00a0/\\*\\*  \nxwiki-bridge - (14:29): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* @return {@code true} if the object is the default object of that class (usually the first of its type in a  \nxwiki-bridge - (14:29): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0document), {@code false} otherwise. When this returns true, {@link #getObjectNumber()} is no longer  \nxwiki-bridge - (14:29): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0relevant, the object index should be determined by the caller  \nxwiki-bridge - (14:29): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nxwiki-bridge - (14:29): [lucaa] \u00a0\u00a0\u00a0\u00a0public boolean isDefaultObject();  \nEnygma` left at 14:29 (barjavel.freenode.net irc.freenode.net  \nnuvolari left at 14:29 (barjavel.freenode.net irc.freenode.net  \nSvenDowideit left at 14:29 (barjavel.freenode.net irc.freenode.net  \nplunden left at 14:29 (barjavel.freenode.net irc.freenode.net  \nxwiki-bridge left at 14:29 (barjavel.freenode.net irc.freenode.net  \nlucaa left at 14:29 (barjavel.freenode.net irc.freenode.net  \nxipe left at 14:29 (barjavel.freenode.net irc.freenode.net  \nCalebJamesDeLisl left at 14:29 (barjavel.freenode.net irc.freenode.net  \nLukemon\\_ left at 14:29 (barjavel.freenode.net irc.freenode.net  \nLukemon\\_ joined #xwiki at 14:39  \nlucaa joined #xwiki at 14:39  \nCalebJamesDeLisl joined #xwiki at 14:39  \nxipe joined #xwiki at 14:39  \nxwiki-bridge joined #xwiki at 14:39  \nplunden joined #xwiki at 14:39  \nxwiki-bridge - (14:39): [lucaa] docref^className pointing to default?  \nxwiki-bridge - (14:39): [vmassol] classname without []  \nxwiki-bridge - (14:39): [vmassol] yes  \nxwiki-bridge - (14:39): [lucaa] yes, I think we did  \nEnygma` joined #xwiki at 14:42  \nnuvolari joined #xwiki at 14:42  \nSvenDowideit joined #xwiki at 14:42  \nxwiki-bridge - (14:42): [lucaa] http://n2.nabble.com/proposal-discussion-Object-properties-references-tp4348315p4419860.html  \nxwiki-bridge - (14:42): [lucaa] and you agreed here: http://n2.nabble.com/proposal-discussion-Object-properties-references-tp4348315p4419904.html  \nxwiki-bridge - (14:44): [vmassol] me yes but I thought tmortagne preferred the exception  \nxwiki-bridge - (14:44): [lucaa] yes, but you - it  \nxwiki-bridge - (14:44): [lucaa] iirc  \nxwiki-bridge - (14:44): [lucaa] I preferred throwing too  \nxwiki-bridge - (14:45): [lucaa] actually it seems indeed it's harder to throw than to assign some meaning  \nxwiki-bridge - (14:46): [lucaa] because if we want to throw, then it means we cannot use the default entity string resolver since we're gonna have to check the format of the name of the object reference  \nxwiki-bridge - (14:47): [lucaa] and 'default object' is, in my opinion, a pretty comfortable semantic for that kind of ref  \nxwiki-bridge - (14:48): [lucaa] tmortagne: in this light, are you fine with iii) ?   \nxwiki-bridge - (14:48): [lucaa] considering the ^className refs as referring the default object?  \nxwiki-bridge - (14:53): [tmortagne] lucaa: I prefer i from pure API POV but i'm ok with iii too if it's too painful (i just don't like ii and iv)  \nEnygma` left at 14:54 (\"Leaving.\"  \nplunden left #xwiki at 14:58  \nsunny\\_slls joined #xwiki at 15:05  \nxwiki-bridge - (15:07): \\* sdumitriu has set the subject to: XWiki Chat - http://www.xwiki.org/  \nsunny\\_slls left #xwiki at 15:14  \nxwiki-bridge - (16:24): [lucaa] actually after a discussion with Vincent, we thought that getClassName() should return String, like:  \nxwiki-bridge - (16:24): [lucaa] \u00a0/\\*\\*  \nxwiki-bridge - (16:24): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* @return the string serialization of the name of the class of the object, as specified in the original reference. It's the caller responsibility to resolve this serialization.  \nxwiki-bridge - (16:24): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nxwiki-bridge - (16:24): [lucaa] \u00a0\u00a0\u00a0\u00a0public String getClassName();  \nxwiki-bridge - (16:24): [lucaa] wdyt?  \nxwiki-bridge - (16:24): [lucaa] (tmortagne sdumitriu, et all)  \nxwiki-bridge - (16:24): [vmassol] yes otherwise you'd need a resolver to use it....  \nxwiki-bridge - (16:25): [vmassol] and Reference are not the place for doing resolving IMO. Also you wouldn't know which resolver to use  \nxwiki-bridge - (16:26): [tmortagne] I don't understand, wher eis this getClassName method ?  \nxwiki-bridge - (16:26): [tmortagne] BaseObjcet ?  \nxwiki-bridge - (16:27): [lucaa] in the ObjectReference, it's the API that would help get info out of  \nxwiki-bridge - (16:27): [lucaa] ^className[0] values  \nxwiki-bridge - (16:27): [lucaa] (see above)  \nxwiki-bridge - (16:27): [lucaa] (03:25:48 PM) lucaa: so, first of all, how do you guys see the object reference parsing implementation?   \nxwiki-bridge - (16:27): [lucaa] I thought of it as hidden behind the ObjectReference implementation, meaning that no other code besides the ObjectReference is aware of it  \nxwiki-bridge - (16:27): [lucaa] (03:26:01 PM) lucaa: and exposes it through 3 functions:  \nxwiki-bridge - (16:27): [lucaa] (03:26:59 PM) lucaa: \u00a0\u00a0\u00a0\u00a0/\\*\\*  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* @return the name of the class of the object, if the original value was relative, it will be resolved wrt the  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0object's document (the current entity ref parent)  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0public DocumentReference getClassName();  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0/\\*\\*  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* @return the number of the object among the objects of the same type in the document  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0public int getObjectNumber();  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0/\\*\\*  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* @return {@code true} if the object is the default object of that class (usually the first of its type in a  \nxwiki-bridge - (16:27): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0document), {@code false} otherwise. When this returns true, {@link #getObjectNumber()} is no longer  \nxwiki-bridge - (16:28): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\* \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0relevant, the object index should be determined by the caller  \nxwiki-bridge - (16:28): [lucaa] \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nxwiki-bridge - (16:28): [lucaa] \u00a0\u00a0\u00a0\u00a0public boolean isDefaultObject();  \nxwiki-bridge - (16:28): [tmortagne] i don't see what is has to do with resolver, the class is a particular class, it doe snot change depending of the context  \nxwiki-bridge - (16:28): [tmortagne] getClassName/Reference should return the reference of the class  \nxwiki-bridge - (16:29): [lucaa] but it can be passed as relative  \nxwiki-bridge - (16:29): [lucaa] like  \nxwiki-bridge - (16:30): [vmassol] tmortagne: example: wiki1:space1.page1^page2[1]  \nxwiki-bridge - (16:30): [lucaa] xwiki:Main.WebHome^TagClass[0]  \nxwiki-bridge - (16:30): [lucaa] in this case, you don't know what class does \"TagClass\" refer to  \nxwiki-bridge - (16:30): [tmortagne] yes you know  \nxwiki-bridge - (16:30): [lucaa] ?  \nxwiki-bridge - (16:30): [tmortagne] it's relative to the document  \nxwiki-bridge - (16:30): [tmortagne] on ObjectReference you look at your parent reference  \nxwiki-bridge - (16:31): [vmassol] I don't agree about that  \nxwiki-bridge - (16:31): [tmortagne] to find the right space and right wiki if you don't have it  \nxwiki-bridge - (16:31): [vmassol] the location of the class has nothing to do with the location of the object for me  \nxwiki-bridge - (16:31): [tmortagne] vmassol: then xwiki:Main.WebHome^TagClass[0] doe snot mean anything  \nxwiki-bridge - (16:31): [tmortagne] if you don't give the full name of the class you cna't use it  \nxwiki-bridge - (16:32): [vmassol] tmortagne: why is it different than \"page\" for a document?  \nxwiki-bridge - (16:33): [vmassol] (we're not talking about referencering a class here but about referencing an object for which the class can be anywhere)  \nxwiki-bridge - (16:33): [tmortagne] it's very different, a class is use by an object in a document so it's targeted form a document, like an include  \nxwiki-bridge - (16:33): [tmortagne] the class of an object in a document will not change depending of your current context  \nxwiki-bridge - (16:33): [tmortagne] the objet always iuse the same class  \nxwiki-bridge - (16:33): [lucaa] tmortagne: the way I (started to) see it: the class name is just a serialized reference to a document, for the caller. So, since it's the caller to interpret document references relative to current or to default or whatever, it's also him to interpret the class ref  \nxwiki-bridge - (16:34): [lucaa] but you can say the very same thing about document references  \nxwiki-bridge - (16:34): [lucaa] Space.Page is the same document  \nxwiki-bridge - (16:34): [lucaa] yet, it  \nxwiki-bridge - (16:34): [lucaa] it's the caller that decides how does he resolve that serialization  \nxwiki-bridge - (16:35): [tmortagne] when you have only \"Space.Page\" it mean you target some page called \"Space.Page\" depending of your context  \nxwiki-bridge - (16:35): [tmortagne] it's has nothing to do with saying that  \nxwiki-bridge - (16:35): [tmortagne] you know the document  \nxwiki-bridge - (16:36): [tmortagne] and for the exact same document the class of one of its object change  \nxwiki-bridge - (16:36): [tmortagne] depending of the context  \nxwiki-bridge - (16:36): [tmortagne] it's like saying that the reference of the parzent has nothing to do with the document  \nxwiki-bridge - (16:37): [lucaa] but in a reference, the class name is nothing else but a serialization too  \nxwiki-bridge - (16:38): [vmassol] in wht you'er saying thomas we should never specify absolute class names  \nxwiki-bridge - (16:38): [tmortagne] vmassol: no it's not what i'm saying  \nxwiki-bridge - (16:39): [vmassol] a class name can be anything for me, and if not full specified then it depends on the context  \nxwiki-bridge - (16:39): [tmortagne] i'm saying that the class reference depend of the document  \nxwiki-bridge - (16:39): [vmassol] for example if I'm on one wiki and the document points to another wiki and the wiki is not specified then the class is to be found in the current wiki  \nxwiki-bridge - (16:40): [vmassol] (it's a choice but we have to decide which we want)  \nxwiki-bridge - (16:41): [tmortagne] imagine you store \"xwiki:Main.WebHome^TagClass[0]\" as a reference, how the user is supposed to know what class you mean in your reference ?  \nxwiki-bridge - (16:41): [tmortagne] that's would make reference with class name not absolute almost unusable  \nxwiki-bridge - (16:41): [vmassol] imagine you store \"WebHome\" as a reference, how the user is supposed to know what space \u00a0you mean in your reference ?  \nxwiki-bridge - (16:42): [vmassol] (I fail to see the difference)  \nxwiki-bridge - (16:42): [lucaa] tmortagne: the same way the user is supposed to know what you meant when you said   \nxwiki-bridge - (16:42): [lucaa] TagClass as a document reference  \nSvenDowideit left at 16:42 (Remote closed the connection  \nxwiki-bridge - (16:42): [lucaa] the way I see it  \nxwiki-bridge - (16:42): [lucaa] (which is also what vmassol said)  \nxwiki-bridge - (16:44): [tmortagne] when you have \"WebHome\" depending of where it's stored there is a known context for it depending of the feature (parent, backlink etc..), if you make the general reference and the class name relative you have to know the context of both  \nxwiki-bridge - (16:45): [lucaa] yes, and? it's the responsibility of the caller, just as context (parent, backlink) is the responsibility of the feature  \nxwiki-bridge - (16:47): [vmassol] btw your solution thomas is hard to implement \u00a0I think  \nxwiki-bridge - (16:47): [vmassol] you'd need to use a resolver  \nxwiki-bridge - (16:47): [vmassol] to parser the class name  \nxwiki-bridge - (16:47): [vmassol] s/parser/parse/  \nxwiki-bridge - (16:47): [tmortagne] the problem with what you are saying is that you can get a java object EntityReference which is supposed to be valid and yet you dont klnow for sure what is the class in it  \nxwiki-bridge - (16:47): [vmassol] and since it's in a special context the character to escape are diferent  \nxwiki-bridge - (16:48): [tmortagne] it's a very big difference  \nxwiki-bridge - (16:48): [tmortagne] currently DocyumentReference is absolute  \nxwiki-bridge - (16:48): [tmortagne] when you have a DocumentReference you can find the target whithout taking care of the context  \nxwiki-bridge - (16:48): [tmortagne] that's true or all the EntityReference we have currently  \nxwiki-bridge - (16:49): [lucaa] but this is extra API that only obj ref has  \nxwiki-bridge - (16:49): [tmortagne] you are about to break that  \nxwiki-bridge - (16:49): [lucaa] EntityRef doesn't know about trhe class name, from entity pov is just a name  \nxwiki-bridge - (16:49): [tmortagne] i'm talking about typed entityRef  \nxwiki-bridge - (16:49): [tmortagne] that are supposed to check validity  \nxwiki-bridge - (16:50): [tmortagne] you can't have a relative DocumentReference  \nxwiki-bridge - (16:50): [lucaa] yes, I see  \nxwiki-bridge - (16:50): [tmortagne] same for SpaceReference or WikiRerence  \nxwiki-bridge - (16:50): [tmortagne] that's the goal  \nxwiki-bridge - (16:50): [tmortagne] you parse the string once and you have a valid java object  \nxwiki-bridge - (16:51): [tmortagne] here you will make resover returning an EntityReference whih is not comple/which depends of the context when you give it \"xwiki:Main.WebHome^TagClass[0]\"  \nxwiki-bridge - (16:52): [tmortagne] which is supposed to be impossible the way we defined resolvers  \nxwiki-bridge - (16:52): [vmassol] when you give \"xwiki:Main.WebHome^TagClass[0]\" it would be resolved to an absolute name  \nxwiki-bridge - (16:52): [tmortagne] how ?  \nxwiki-bridge - (16:53): [vmassol] by the resolver  \nxwiki-bridge - (16:53): [tmortagne] resolver will not use two different context  \nxwiki-bridge - (16:53): [tmortagne] for document and lass  \nxwiki-bridge - (16:53): [tmortagne] class  \nxwiki-bridge - (16:53): [vmassol] it'll use the same context for both  \nxwiki-bridge - (16:53): [vmassol] there's only one current document  \nxwiki-bridge - (16:54): [tmortagne] so that mean the class is not anything you want as you said  \nxwiki-bridge - (16:54): [tmortagne] this also mean that ObjectReference is supposed to return a complete reference for the class  \nxwiki-bridge - (16:54): [vmassol] yes  \nxwiki-bridge - (16:54): [tmortagne] otherwise it does not make sense since the class of the object has be resolved  \nxwiki-bridge - (16:54): [tmortagne] been  \nxwiki-bridge - (16:55): [vmassol] actually in teh constructor of ObjectReference you'd pass a DocumentReference  \nxwiki-bridge - (16:55): [vmassol] (probably)  \nxwiki-bridge - (16:55): [vmassol] for representing the class  \nxwiki-bridge - (16:56): [vmassol] ObjectReference(DocumentReference classReference, Integer number, EntityReference parent)  \nxwiki-bridge - (16:58): [vmassol] + DocumentReference getClassReference() + Integer getNumber()  \nxwiki-bridge - (16:58): [vmassol] that sounds good to me for ObjectReference, WDYT?  \nxwiki-bridge - (16:58): [tmortagne] yes  \nxwiki-bridge - (16:58): [lucaa] and it would be the ObjectReferenceResolver to resolve and handle setting the DocumentReference?  \nxwiki-bridge - (16:59): [lucaa] then how would EntityReference API work?  \nxwiki-bridge - (16:59): [lucaa] ObjectReference.setName()   \nsunny\\_slls joined #xwiki at 16:59  \nxwiki-bridge - (16:59): [vmassol] ahah....  \nxwiki-bridge - (17:00): [tmortagne] (yes for DocumentReference getClassReference() + Integer getNumber(), not sure about the constructor)  \nsunny\\_slls left #xwiki at 17:00  \nxwiki-bridge - (17:00): [tmortagne] for me it was based on the document because ObjectReference can look at it's parent to resolve the class name  \nxwiki-bridge - (17:00): [tmortagne] since it's supposed to be done by ObjectReference  \nxwiki-bridge - (17:01): [tmortagne] (generic resolver don't know about object name structure)  \nxwiki-bridge - (17:02): [tmortagne] so it would be resolver when you call setName (and so when constructor wall setName)  \nxwiki-bridge - (17:02): [lucaa] > ObjectReference can look at it's parent to resolve the class name  \nxwiki-bridge - (17:02): [lucaa] but it still needs a resolver, from an impl pov  \nxwiki-bridge - (17:02): [vmassol] lucaa: you could use a resolver/serializer that only supports absolute doc refs maybe?  \nxwiki-bridge - (17:02): [vmassol] to make the bridge between get/setName and get/setClassReference  \nxwiki-bridge - (17:03): [lucaa] well, vmassol, what tmortagne is saying is exactly my initial idea: to resolve relative to DocumentRef in ObjectRef (which would resolve relative to its parent)  \nxwiki-bridge - (17:04): [tmortagne] vmassol: you mean impossiblme ti use \"xwiki:Main.WebHome^TagClass[0]\" and have to use \"xwiki:Main.WebHome^wiki:Space.TagClass[0]\" ?  \nxwiki-bridge - (17:04): [lucaa] vmassol: and, if not absolute I throw IllegalArgumentException, as if the name was null?  \nxwiki-bridge - (17:04): [tmortagne] i don't think that's an option  \nxwiki-bridge - (17:04): [vmassol] tmortagne: this is \u00a0string  \nxwiki-bridge - (17:04): [vmassol] I'm talking about objects  \nxwiki-bridge - (17:04): [lucaa] tmortagne: no, to force absolute only on setName()  \nxwiki-bridge - (17:05): [vmassol] reference objects to be more precise  \nxwiki-bridge - (17:05): [tmortagne] sure but setName is also what is called by the generic resolver it don't know what are object name  \nxwiki-bridge - (17:05): [vmassol] if you try to construct a DocumentRefrence or EntityReference withouth an absolute class ref  \nxwiki-bridge - (17:05): [vmassol] then you throw an exception  \nxwiki-bridge - (17:06): [lucaa] but the generic resolver doesn't call ObjectReference.setName but EntityReference.setName  \nxwiki-bridge - (17:06): [tmortagne] so whatever the use case the parsing of the name has to be done in ObjectReference  \nxwiki-bridge - (17:07): [vmassol] yes  \nxwiki-bridge - (17:07): [vmassol] then the question is just how the resolver works  \nxwiki-bridge - (17:07): [lucaa] tmortagne: no, not realy. It can be done in ObjectReferenceResolver  \nxwiki-bridge - (17:07): [tmortagne] lucaa: yes but it does not change the fact that you will have to parse relative class reference in ObjectReference#setName  \nxwiki-bridge - (17:07): [vmassol] lucaa: no because you can construct ref object manually  \nxwiki-bridge - (17:08): [lucaa] tmortagne: true  \nxwiki-bridge - (17:08): [lucaa] vmassol: true  \nxwiki-bridge - (17:08): [vmassol] so you can only pass absolute class ref when you build a DocumentRefernce or EntityReference object  \nxwiki-bridge - (17:08): [vmassol] everuthing else should throw an exception  \nxwiki-bridge - (17:08): [lucaa] wait wait  \nxwiki-bridge - (17:08): [lucaa] actually no  \nSvenDowideit joined #xwiki at 17:19  \nKraDo joined #xwiki at 17:37  \nKraDo is now known as GillesSerasset ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nGillesSerasset left at 17:43 (\"Quitting!\"  \nCalebJamesDeLisl - (18:28): !shutdown  \nxwiki-bridge left at 18:28 (Remote closed the connection  \nxwiki-bridge joined #xwiki at 18:29  \nxwiki-bridge - (18:29): \\* sdumitriu has set the subject to: XWiki Chat - http://www.xwiki.org/  \nxwiki-bridge - (18:31): [vmassol] CalebJamesDeLisle: nice!  \nxwiki-bridge - (18:32): [vmassol] I don't see why we would want to keep the old one. You can put in as an attachment in jira to keep it for posterity if you want  \nxwiki-bridge - (18:32): [vmassol] wdyt?  \nxwiki-bridge - (18:32): [vmassol] old captcha plugin = the frist version you did?  \nxwiki-bridge - (18:33): [vmassol] or do we have an existing captcha plugin in our svn?  \nxwiki-bridge - (18:33): [CalebJamesDeLisle] existing.  \nxwiki-bridge - (18:33): [CalebJamesDeLisle] it's in xwiki-core/..../plugins/captcha  \nlucaa - (18:33): !who  \nxwiki-bridge - (18:33): \\* members: CalebJamesDeLisle, Denis Gervalle, guillaum1, NielsMayer, Ricardo Rodr\u00edguez, vmassol  \nxwiki-bridge - (18:33): [vmassol] ok found it  \nxwiki-bridge - (18:34): [vmassol] you should send a vote remove it probably. I'm +1 on my side  \nxwiki-bridge - (18:34): [vmassol] s/vote remove/vote to remove/  \nxwiki-bridge - (18:34): [CalebJamesDeLisle] Another option is to make it use my captcha component.  \nxwiki-bridge - (18:34): [vmassol] why would we do that?  \nxwiki-bridge - (18:34): [vmassol] what's you new \"captcha component\"?  \nxwiki-bridge - (18:35): [vmassol] you mentioned a XAR app  \nxwiki-bridge - (18:35): [vmassol] is there something else?  \nxwiki-bridge - (18:35): [vmassol] (you may have mentioned it but I forgot)  \nxwiki-bridge - (18:35): [CalebJamesDeLisle] I am working on a component for getting the captcha from jcaptcha.  \nxwiki-bridge - (18:35): [CalebJamesDeLisle] I was talking about an XAR application to make using it easier.  \nxwiki-bridge - (18:36): [vmassol] I'ma bit lost  \nxwiki-bridge - (18:36): [vmassol] I ahven't followed closely  \nxwiki-bridge - (18:36): [vmassol] so I don't know what you have  \nxwiki-bridge - (18:36): [CalebJamesDeLisle] I'll find the email, just a second...  \nxwiki-bridge - (18:37): [vmassol] this one; \"[xwiki-devs] [Proposal] Refactoring registration page and add some apis\"?  \nxwiki-bridge - (18:38): [CalebJamesDeLisle] no earlier.  \nxwiki-bridge - (18:38): [vmassol] \" [proposal] Migrating the captcha plugin to a component\" ?  \nxwiki-bridge - (18:39): [CalebJamesDeLisle] yes. \u00a0\u00a0http://xwiki.markmail.org/message/rtamtgjb5xwuj6bq  \nxwiki-bridge - (18:39): [vmassol] so to recap your final solution is:  \nxwiki-bridge - (18:39): [vmassol] 1) addition of a module in platform/core containing the components from this email  \nxwiki-bridge - (18:39): [CalebJamesDeLisle] yes.  \nxwiki-bridge - (18:40): [vmassol] how do you get access to the request in the end?  \nxwiki-bridge - (18:40): [vmassol] (don't recall if it's available from Container)  \nxwiki-bridge - (18:40): [CalebJamesDeLisle] It's not pretty.  \nxwiki-bridge - (18:41): [CalebJamesDeLisle] it comes from the container, using the if instanceof cast hack.  \nxwiki-bridge - (18:41): [vmassol] 2) modify templates to use the captcha if the config for captcha is on  \nxwiki-bridge - (18:42): [CalebJamesDeLisle] I haven't gotten that far yet.  \nlucaa left #xwiki at 18:42  \nxwiki-bridge - (18:42): [CalebJamesDeLisle] I have a registration page in progress.  \nxwiki-bridge - (18:43): [vmassol] ok so you're modifying the registration template for that right?  \nxwiki-bridge - (18:43): [CalebJamesDeLisle] Yes.  \nxwiki-bridge - (18:43): [vmassol] ok  \nxwiki-bridge - (18:43): [vmassol] so 1) is a component and removes the need for a plugin so the existing plugin should be dropped IMO. It could be removed to contrib/retired  \nxwiki-bridge - (18:43): [vmassol] (if we want to be clean)  \nxwiki-bridge - (18:44): [vmassol] but we can also remove it altogether  \nxwiki-bridge - (18:44): [vmassol] this needs a vote  \nxwiki-bridge - (18:44): [CalebJamesDeLisle] I'd be perfectly happy to leave it there except that it pulls in jcaptcha-all-1.0  \nxwiki-bridge - (18:44): [vmassol] better to remove past cruft when we can  \nxwiki-bridge - (18:45): [vmassol] especially since it's inside xwiki-core (the ball of mud)  \nxwiki-bridge - (18:45): [CalebJamesDeLisle] Seeing the old core get smaller always makes me happy.  \nxwiki-bridge - (18:45): [vmassol] yep  \nxwiki-bridge - (18:47): [CalebJamesDeLisle] Should I be making a dependency for my component in the web/standard/pom.xml? I'm thinking yes because that's where the register template will be, correct?  \nxwiki-bridge - (18:48): [vmassol] yes I think so  \nxwiki-bridge - (18:48): [vmassol] it's not needed in core anyway right?  \nxwiki-bridge - (18:48): [CalebJamesDeLisle] right.  \nxwiki-bridge - (18:48): [vmassol] (and it shouldn't be!)  \nxwiki-bridge - (18:49): [vmassol] and in the future we'll even break the need to have it tied to templates  \nxwiki-bridge - (18:49): [vmassol] when we have IX probably  \nxwiki-bridge - (18:49): [CalebJamesDeLisle] Is there any place (directory) for plugins which are components?  \nxwiki-bridge - (18:49): [vmassol] I don't understand  \nxwiki-bridge - (18:49): [vmassol] plugins are deprecated  \nxwiki-bridge - (18:49): [CalebJamesDeLisle] Okay.  \nxwiki-bridge - (18:49): [vmassol] they're the old way of providing extensibility in XE  \nxwiki-bridge - (18:50): [vmassol] the new way is components  \nxwiki-bridge - (18:50): [vmassol] so in the end all plugins should disappear  \nxwiki-bridge - (18:50): [CalebJamesDeLisle] I would consider captcha a \"plugin\" functionality, I didn't know if there were plugin components.  \nxwiki-bridge - (18:50): [vmassol] in the future  \nxwiki-bridge - (18:50): [vmassol] it will be a plugin in the sense of an IX \"plugin\"  \nxwiki-bridge - (18:51): [CalebJamesDeLisle] IX?  \nxwiki-bridge - (18:51): [vmassol] so an \"extension\"  \nxwiki-bridge - (18:51): [vmassol] an interface extension  \nxwiki-bridge - (18:51): [CalebJamesDeLisle] Okay, I was thinking IX = 4  \nxwiki-bridge - (18:51): [CalebJamesDeLisle] 4 I mean 9  \nxwiki-bridge - (18:51): [vmassol] the master plan is this: http://dev.xwiki.org/xwiki/bin/view/Design/InterfaceExtensions  \nxwiki-bridge - (18:52): [vmassol] :)  \nxwiki-bridge - (18:52): [vmassol] well the template part you're modifying will be an extension  \nxwiki-bridge - (18:52): [vmassol] and the component will be drawn by that extension  \nxwiki-bridge - (18:53): [CalebJamesDeLisle] Hey I was just compiling and I noticed InvitationManager pulled in the entire 1.8 branch.  \nxwiki-bridge - (18:53): [CalebJamesDeLisle] My version is ancient, was this fixed?  \nxwiki-bridge - (18:53): [vmassol] yeah  \nxwiki-bridge - (18:53): [vmassol] it was done voluntarily  \nxwiki-bridge - (18:53): [vmassol] to ensure that InvitationManager still work with 1.8  \nxwiki-bridge - (18:53): [vmassol] for backward compat  \nxwiki-bridge - (18:54): [vmassol] now we'd need to decide if we still want that now  \nxwiki-bridge - (18:54): [CalebJamesDeLisle] Okay so that isn't going to lead to a huge WEB-INF/lib  \nxwiki-bridge - (18:54): [vmassol] now that we've are close to a 2.2 release  \nxwiki-bridge - (18:54): [vmassol] nope  \nxwiki-bridge - (18:54): [vmassol] they're runtime deps  \nxwiki-bridge - (18:54): [CalebJamesDeLisle] :)  \nxwiki-bridge - (19:00): [vmassol] CalebJamesDeLisle: \"defaultSoundCaptcha\" should be \"sound\" I think  \nxwiki-bridge - (19:00): [vmassol] (the hint I mean)  \nxwiki-bridge - (19:01): [vmassol] and the image one \"image\"  \nxwiki-bridge - (19:01): [CalebJamesDeLisle] Yes for Captcha it should, but it also implements Action...  \nxwiki-bridge - (19:01): [vmassol] hmmm  \nxwiki-bridge - (19:02): [CalebJamesDeLisle] Pushing the limits of the ComponentManager am I?  \nxwiki-bridge - (19:02): [vmassol] I don't know if it's a good idea as a best practice to have one impl implementing 2 roles  \nxwiki-bridge - (19:03): [vmassol] the pb is that you're going to store unnecessary stuff in memory  \nxwiki-bridge - (19:03): [vmassol] there'll be 2 instances stored  \nxwiki-bridge - (19:03): [CalebJamesDeLisle] Really?  \nxwiki-bridge - (19:03): [vmassol] in addition it's probably harder to read  \nxwiki-bridge - (19:03): [vmassol] and the concerns are different  \nxwiki-bridge - (19:04): [vmassol] yes really :)  \nxwiki-bridge - (19:04): [CalebJamesDeLisle] So I would split them into DefaultSoundCaptchaAction hint:soundCaptcha and DefaultSoundCaptcha hint:sound  \nxwiki-bridge - (19:04): [vmassol] you don't need to repeat captcha  \nxwiki-bridge - (19:04): [vmassol] since the role is already Captcha  \nxwiki-bridge - (19:04): [vmassol] oh sorry  \nxwiki-bridge - (19:04): [vmassol] misread  \nxwiki-bridge - (19:04): [vmassol] re-reading  \nxwiki-bridge - (19:05): [vmassol] why Default?  \nxwiki-bridge - (19:05): [vmassol] the interface is Action right?  \nxwiki-bridge - (19:05): [CalebJamesDeLisle] JCaptcha supports multiple image captchas.  \nxwiki-bridge - (19:05): [CalebJamesDeLisle] Yes it implements Action  \nxwiki-bridge - (19:05): [vmassol] ok so default referes to jcaptcha?  \nxwiki-bridge - (19:06): [vmassol] fine then  \nxwiki-bridge - (19:06): [CalebJamesDeLisle] Default is the jcaptcha gimpy captcha, it also provides others.  \nxwiki-bridge - (19:06): [CalebJamesDeLisle] I will implement a few now that I have 2.0  \nxwiki-bridge - (19:06): [vmassol] will we want to support several?  \nxwiki-bridge - (19:06): [vmassol] at the same time  \nxwiki-bridge - (19:06): [vmassol] or a single impl that supports config?  \nxwiki-bridge - (19:07): [vmassol] anyway  \nxwiki-bridge - (19:07): [vmassol] that's a detail  \nxwiki-bridge - (19:07): [vmassol] :)  \nxwiki-bridge - (19:07): [CalebJamesDeLisle] Interesting.  \nxwiki-bridge - (19:08): [CalebJamesDeLisle] The pb is the solution must be given to the same place where the captcha come from.  \nxwiki-bridge - (19:08): [vmassol] the Action is not required right now right?  \nxwiki-bridge - (19:08): [vmassol] I'd recommend leaving it out of the commit for now actually  \nxwiki-bridge - (19:08): [CalebJamesDeLisle] Correct.  \nxwiki-bridge - (19:08): [vmassol] (since the action module isn't ready yet)  \nxwiki-bridge - (19:09): [CalebJamesDeLisle] I will have to add a struts action for sound captchas though.  \nxwiki-bridge - (19:09): [CalebJamesDeLisle] Also need freetts jars for sound captcha...  \nxwiki-bridge - (19:09): [vmassol] not for images?  \nxwiki-bridge - (19:09): [CalebJamesDeLisle] Correct.  \nxwiki-bridge - (19:10): [vmassol] ok  \nxwiki-bridge - (19:10): [vmassol] re the httpservlet/response need  \nxwiki-bridge - (19:10): [vmassol] is it possible to store the id where you want?  \nxwiki-bridge - (19:11): [CalebJamesDeLisle] Without supporting Action, I can get it from velocity $response  \nxwiki-bridge - (19:11): [CalebJamesDeLisle] Because struts provides it.  \nxwiki-bridge - (19:11): [CalebJamesDeLisle] I needed an image library from here http://www.jhlabs.com/ip/filters/download.html to get jcaptcha2.0 working.  \nxwiki-bridge - (19:11): [vmassol] I'm looking for a solution to remove it from the component  \nxwiki-bridge - (19:12): [vmassol] is jcaptcha done so that it can be used in different environments and not only web?  \nxwiki-bridge - (19:12): [vmassol] (if so they would have externalized where the id comes from)  \nxwiki-bridge - (19:12): [CalebJamesDeLisle] It just needs a string which is the same per user.  \nxwiki-bridge - (19:12): [vmassol] on our side we have the notion of Session in Container api  \nxwiki-bridge - (19:12): [vmassol] (it's empty right now but just because we didn't have the need till now)  \nxwiki-bridge - (19:13): [CalebJamesDeLisle] Session.toString() will give us the memory location.  \nxwiki-bridge - (19:13): [CalebJamesDeLisle] That will work if we don't need to support the struts implementation.  \nxwiki-bridge - (19:14): [CalebJamesDeLisle] Then we are back to Action if we have no struts...  \nxwiki-bridge - (19:14): [vmassol] by \"struts implementation\" you mean our current XWikiActions?  \nxwiki-bridge - (19:15): [vmassol] (not some jcaptcha specific struts thingie)  \nxwiki-bridge - (19:15): [CalebJamesDeLisle] Oh, there is a /bin/jcaptcha/ in the struts cfg.  \nxwiki-bridge - (19:15): [CalebJamesDeLisle] Yes it is a jcaptcha struts class.  \nxwiki-bridge - (19:15): [vmassol] and is it mandatory for jcatpcha to work or is it only one of the possibles ways to interact with it?.  \nxwiki-bridge - (19:16): [CalebJamesDeLisle] Just a possibility.  \nxwiki-bridge - (19:16): [vmassol] k  \nxwiki-bridge - (19:16): [CalebJamesDeLisle] The question becomes how do we get the captcha, no struts, no Action...  \nxwiki-bridge - (19:17): [vmassol] for now it's struts  \nxwiki-bridge - (19:17): [vmassol] I guess  \nxwiki-bridge - (19:17): [vmassol] but what's interesting is to see the way forward for the future  \nxwiki-bridge - (19:17): [vmassol] so that we know where we want to go  \nxwiki-bridge - (19:17): [CalebJamesDeLisle] So in order to provide the solution I need the request to get the right id.  \nxwiki-bridge - (19:18): [vmassol] request or session?  \nxwiki-bridge - (19:18): [CalebJamesDeLisle] jcaptcha can get the id using the request.  \nxwiki-bridge - (19:18): [vmassol] CaptchaModuleConfigHelper uses the request but I guess internally it gets the session from it  \nxwiki-bridge - (19:19): [CalebJamesDeLisle] It either gets the session or gets a parameter from the request depending on the config.  \nxwiki-bridge - (19:19): [vmassol] ok  \nxwiki-bridge - (19:19): [CalebJamesDeLisle] docjar is nice.  \nxwiki-bridge - (19:19): [CalebJamesDeLisle] for reading source code.  \nxwiki-bridge - (19:19): [vmassol] :)  \nxwiki-bridge - (19:19): [vmassol] yes  \nxwiki-bridge - (19:19): [vmassol] ok got to disconnect for 2 min  \nxwiki-bridge - (19:19): [vmassol] brb  \nxwiki-bridge - (19:19): [CalebJamesDeLisle] see ya.  \nxwiki-bridge - (19:34): [CalebJamesDeLisle] I have made some changes to the captcha component since sending the email.  \nxwiki-bridge - (19:35): [CalebJamesDeLisle] The Captcha interface is now CaptchaVerifier because it is not a specific puzzle but a component for verifying puzzles of a given type.  \nxwiki-bridge - (19:36): [CalebJamesDeLisle] String getUserId(HttpServletRequest request);  \nxwiki-bridge - (19:36): [CalebJamesDeLisle] boolean isAnswerCorrect(String captchaId, String answer)  \nxwiki-bridge - (19:37): [NielsMayer] good idea.   \nxwiki-bridge - (19:38): [NielsMayer] would that allow a all javascript captcha impl to be done instead of image recognition tasks, etc  \nxwiki-bridge - (19:38): [NielsMayer] for example a popup that asks people to solve an addition problem  \nxwiki-bridge - (19:38): [CalebJamesDeLisle] eg: recaptcha?  \nxwiki-bridge - (19:38): [NielsMayer] yeah  \nxwiki-bridge - (19:39): [CalebJamesDeLisle] I like generic :)  \nxwiki-bridge - (19:39): [NielsMayer] but also i would imagine it could allow some more interesting automated captchas via browser and crypto  \nxwiki-bridge - (19:39): [CalebJamesDeLisle] Ahhh hashcach  \nxwiki-bridge - (19:39): [NielsMayer] haven't heard of that  \nxwiki-bridge - (19:39): [CalebJamesDeLisle] hashcash  \nxwiki-bridge - (19:40): [CalebJamesDeLisle] send a hashed password which is really short and make the user's computer break the code.  \nxwiki-bridge - (19:40): [CalebJamesDeLisle] Calculate the brute force time.  \nxwiki-bridge - (19:40): [CalebJamesDeLisle] It was invented for email, to send an email it takes x processor cycles to solve a puzzle.  \nxwiki-bridge - (19:41): [NielsMayer] actually that was invented for unix long ago  \nxwiki-bridge - (19:41): [CalebJamesDeLisle] becomes too expensive to send spam  \nxwiki-bridge - (19:41): [NielsMayer] :-)  \nxwiki-bridge - (19:41): [CalebJamesDeLisle] And was called hashcash or something else?  \nxwiki-bridge - (19:41): [NielsMayer] \u00a0?  \nxwiki-bridge - (19:42): [CalebJamesDeLisle] was invented for unix long ago, what was it called?  \nxwiki-bridge - (19:42): [NielsMayer] timeout on login failure  \nxwiki-bridge - (19:43): [CalebJamesDeLisle] Yes. I remember a cs professor saying 3 failed logins, lock the account for 15 mins, I said why not 5 seconds per failed attempt.  \nxwiki-bridge - (19:44): [NielsMayer] because the former solution provides full employment for administrative sysadmins :-)  \nxwiki-bridge - (19:45): [CalebJamesDeLisle] BCrypt takes it to the next level by making the hash algorithm take a long time so cracking passwords takes forever even if you have the hashes.  \nxwiki-bridge - (19:46): [NielsMayer] it would be nice if there was an additional \"out\" for captcha, which is if the user is properly authenticated, e.g. w/ a certificate or well-computed crypto-cookie  \nxwiki-bridge - (19:47): [CalebJamesDeLisle] ??  \nxwiki-bridge - (19:47): [CalebJamesDeLisle] Why not just skip loading the captcha in velocity if the user is authenticated?  \nxwiki-bridge - (19:48): [NielsMayer] that's what i mean by \"out\"  \nxwiki-bridge - (19:48): [NielsMayer] as in skipping it from being necessary  \nxwiki-bridge - (19:48): [NielsMayer] but the thing is a bot can \"log in\"  \nxwiki-bridge - (19:48): [CalebJamesDeLisle] There is some html which has to not be loaded so I think it should be on the velocity level.  \nxwiki-bridge - (19:48): [NielsMayer] but a bot may not go through the trouble of getting a verisign client certificate  \nxwiki-bridge - (19:49): [CalebJamesDeLisle] Oh I see what you mean, I would just implement captcha.  \nxwiki-bridge - (19:49): [NielsMayer] but then anybody that logs in needs to do captcha  \nxwiki-bridge - (19:50): [CalebJamesDeLisle] Your implementation would check for a certificate or openid and return true of it's good.  \nxwiki-bridge - (19:50): [NielsMayer] \u00a0there should be an option, to allow the captcha to disable for more strongly authed logins  \nxwiki-bridge - (19:50): [CalebJamesDeLisle] I wouldn't bother anyone with a captcha unless they are anonymous.  \nxwiki-bridge - (19:52): [NielsMayer] sounds good. i just worry that the people making firstname==lastname accounts on xwikis all over the place are up to something  \nxwiki-bridge - (19:53): [NielsMayer] it won't be long before they're logging in and spamming us with viagra comments  \nxwiki-bridge - (19:54): [CalebJamesDeLisle] yeah that CalebJamesDeLisle user is trouble :)  \nxwiki-bridge - (19:55): [CalebJamesDeLisle] Confirmation emails would help.  \narkub left at 20:43 (Read error: 113 (No route to host)  \nxwiki-bridge - (21:24): [CalebJamesDeLisle] vmassol: Jcaptcha only supports struts and servlet for their default image captchas so eliminating the Action component would make sound captchas not work. Implementing a struts action or a servlet myself seems like a lot of work for something which is planned for replacement. Any advice?  \nlucaa joined #xwiki at 23:56  \nxwiki-bridge - (23:57): [vmassol] ok fixed the issue with the user profile (the avatar couldn't be changed, the upload was failing)  \nxwiki-bridge - (23:58): [vmassol] hopefully this will also fix the REST tests....  \nxwiki-bridge - (23:58): [vmassol] (one can always dream.... :))  \n\n"}