{"id": "dev:IRC.xwikiArchive20100923", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100923", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nxwikibot joined #xwiki at 09:06  \ntmortagne joined #xwiki at 09:19  \narkub joined #xwiki at 09:22  \nkwoot - (09:23): vmassol: thanks. trying it.  \nbblfish left at 09:28 (Quit: Leaving.  \nkwoot - (09:34): vmassol: fixed worked and documented as our holy bot tells us :-)  \nvmassol - (09:42): cool :)  \nmflorea joined #xwiki at 09:49  \njvdrean joined #xwiki at 09:56  \nkwoot - (10:01): vmassol: commercial question: what would adding kerberos authentication to xwiki cost?  \nkwoot - (10:01): you can email me the answer if you like.  \nlucaa joined #xwiki at 10:02  \nsburjan joined #xwiki at 10:04  \nvmassol - (10:07): kwoot: best is if you could send an email to sales at xwiki.com and explain the need  \nrrodriguez left at 10:08 (Quit: rrodriguez  \nkwoot - (10:11): vmassol: give me a minute :-)  \nkwoot - (10:13): vmassol: done.  \nkwoot - (10:14): Today working at home and can spend all day on xwiki stuff. like it.  \nvmassol - (10:16): kwoot: great! I like it too :)  \nlucaa left at 10:20 (Ping timeout: 245 seconds  \nkwoot - (10:33): vmassol: who would have knows... :-)  \nkwoot - (10:33): s/knows/known/  \nsdumitriu left at 10:36 (Ping timeout: 245 seconds  \nvmassol - (10:36): :)  \nsdumitriu joined #xwiki at 10:39  \nphancox left #xwiki at 10:59  \nsburjan - (11:07): sdumitriu: XWIKI-5433 doesnt apprea fixed in today's snapshot  \nsdumitriu - (11:08): Hm...  \nsdumitriu - (11:08): Right  \nsburjan - (11:11): I mean on JIRA is closed, but it still is present  \nsburjan - (11:11): on the product  \nsdumitriu - (11:14): Yes, I know  \nsdumitriu - (11:14): That's because the class is also included in the Administration app  \nlucaa joined #xwiki at 11:16  \nsburjan - (11:27): what class ?  \nsdumitriu - (11:28): XWiki.XWikiPreferences  \nsburjan - (11:28): so this is a shared class, right ?  \nvmassol - (12:06): mflorea: IMO you should rename xwiki-officeimporter into xwiki-office-importer, same for preview  \nsdumitriu left at 12:07 (Ping timeout: 240 seconds  \nvmassol - (12:07): we could send a vote on this but we should IMO 1) use short names when possible, 2) use \"-\" for long names when short names are notpossible  \nmflorea - (12:07): vmassol: sounds good, I'll send a vote  \nvmassol - (12:07): (initially I had only used \"-\" in names but asiri, alex and sergiu have started introducing names without \"-\")  \nvmassol - (12:07): patchservice (sergiu), officeimporter/officepreview (asiri)  \nvmassol - (12:08): I'd name xwiki-csrf too  \nvmassol - (12:08): and not xwiki-csrftoken  \nmflorea - (12:08): indeed  \nvmassol - (12:08): and patchservice in patch  \nvmassol - (12:09): no need to add manager/service suffixes IMO  \nvmassol - (12:09): they're all services/managers  \ncjdelisle - (12:19): We really need a spec for where we use - where we use camelCase and where we concatinatewords.  \ncjdelisle - (12:21): AFAIK camel case is for translations, class properties, document names, and use of - is for module names and html class names (?)  \nsdumitriu joined #xwiki at 12:22  \ncjdelisle - (12:22): The problem is if I look to what is being done already I can usually find everything has at one time been used for everything.  \nlucaa left at 12:33 (Ping timeout: 240 seconds  \ntmortagne - (12:38): guys we have an issue with 2.4 because admin app as been modified with csrf calls which don't work in 2.4... i don't understand why hudson did not said anything  \ntmortagne - (12:39): i will need to revert abusenius commit and release a 2.4.2 quickly i think  \ntmortagne - (12:40): not only admin app actually, pretty much all apps  \ntmortagne - (12:40): even wiki manager and application manager which are never released in a SNAPSHOT  \nflorinciu joined #xwiki at 12:43  \nflorinciu left at 12:58 (Ping timeout: 264 seconds  \ncjdelisle - (13:00): hmm the comment cancel button is smaller than the preview or post buttons.  \ncjdelisle - (13:02): same with rename, the cancel button is smaller.  \nabusenius joined #xwiki at 13:18  \nsdumitriu - (13:21): cjdelisle: It's somewhat normal  \nsdumitriu - (13:21): Cancel button = secondary button  \nsdumitriu - (13:21): We don't have complete styling for those at the moment  \nsdumitriu - (13:22): Normally they should look different, not just smaller  \nsburjan - (13:24): sdumitriu: can you tell me when you have fixed that issue ?  \nsburjan - (13:24): so I can retest  \nsdumitriu - (13:25): Sure  \nsdumitriu - (13:25): Not yet, btw  \nsburjan - (13:35): no hurry, it's minor anyway  \nmflorea - (13:42): vmassol: what's the rationale for throwing an exception when setting a null parent in AttachmentReference? Can't we have relative attachment references that specify only the file name? (i.e. image.png)  \ntmortagne - (13:42): mflorea: you use EntityReference for that  \ntmortagne - (13:43): typed entity reference are supposed to be valid  \nmflorea - (13:43): I see  \nmflorea - (13:43): thanks  \ntmortagne - (13:43): np  \nmflorea - (13:44): but wait  \nmflorea - (13:44): why is \"image.png\" not a valid relative reference for an attacmhent?  \ntmortagne - (13:44): there is no such thing as \"valid relative\"  \nmflorea - (13:44): so valid means absolute?  \ntmortagne - (13:45): when you have a typed entity reference you know you don't depend on anything to be able to find it  \ntmortagne - (13:45): valid means standalone  \ntmortagne - (13:45): you could resolve it based on anything  \nmflorea - (13:46): hmm, I still don't understand. You say I can't do new DocumentReference(relativeEntityReference) ?  \ntmortagne - (13:46): no you can't  \ntmortagne - (13:46): you are supposed to use resolvers  \ntmortagne - (13:47): to resolve a relative entity reference  \nmflorea - (13:48): I see. I'm not convinced why we can't have relative typed entity references. What's the problem with having a DocumentReference whose parent is null. You know is a document (say WebHome), but the space is not fixed.  \nlucaa joined #xwiki at 13:50  \nsilviar joined #xwiki at 13:51  \ntmortagne - (13:51): DocumentReference assure you that it's a valid and absolute reference, that's pretty much it's only job, it's it's exactly the same thing than EntityReference it's pretty useless  \nmflorea - (13:52): I see. Now I understand why there isn't any RelativeStringDocumentReferenceResolver :)  \nvenkatesh left at 14:09 (Ping timeout: 240 seconds  \nsdumitriu - (14:18): tmortagne: Why did you release 2.4.2?  \ntmortagne - (14:18): sdumitriu: \u00a0(12:38:45 PM) tmortagne: guys we have an issue with 2.4 because admin app as been modified with csrf calls which don't work in 2.4... i don't understand why hudson did not said anything  \nvmassol - (14:19): tmortagne: so 2.4.1 is unusable?  \ntmortagne - (14:19): yes it is  \nvmassol - (14:19): hmm  \nvmassol - (14:19): we should have had a vote IMO  \nsdumitriu - (14:19): +1  \nvmassol - (14:20): maybe re-releasing 2.4.1 could have been a solution  \nsdumitriu - (14:20): +1 again  \ntmortagne - (14:20): note when everything has been already release and announced IMO  \nvmassol - (14:20): but a vote would have been better anyway just so that we know/understand  \nvmassol - (14:20): I didn't even realize we were releasing 2.4.2  \nvmassol - (14:20): :)  \nvmassol - (14:21): I hope we fixed the hudson issue  \nvmassol - (14:21): so that it doesn't happen again  \ntmortagne - (14:21): i talked about it here and i did not see the point of sending a vote for a new release that was needed anyway  \nvmassol - (14:21): tmortagne: all releases need a vote  \nvmassol - (14:21): I'm not sure it was needed  \ntmortagne - (14:22): vmassol: and what i'm waiting 48 hours ?  \nvmassol - (14:22): if everyone agrees, no need  \nvmassol - (14:22): there are other options  \nvmassol - (14:22): like re-releasing a XAR if that's the only pb  \nvmassol - (14:22): or re-releasing 2.4.1  \ntmortagne - (14:22): it's not like 2.4.1 was an internal release  \nvmassol - (14:22): in any case it's a joint decision  \ntmortagne - (14:23): it's already public  \nvmassol - (14:23): it's not a small thing  \ntmortagne - (14:23): yes and my only concern was to fix the problem as quickly as possible  \nvmassol - (14:23): sure but you're not alone....  \nvmassol - (14:24): :)  \nvmassol - (14:24): it should be \"our\" concern to fix the pb as quickly as possible  \nvmassol - (14:24): is 2.4.2 officially released?  \ntmortagne - (14:26): in OW2 and on xwiki.org, not in wikipedia and all and missing the ANN mail  \nvmassol - (14:26): if we release 2.4.2 we need some special mail to ensure people don't use 2.4.1. We probably need to modify 2.4.1's release notes too  \nvmassol - (14:27): btw  \ntmortagne - (14:27): vmassol: that's already what i have done for the release note and planned for the mail  \nflorinciu joined #xwiki at 14:27  \nvmassol - (14:27): does it mean we don't do a smoke test before the release?  \nvmassol - (14:27): we need to analyse why we failed  \nvmassol - (14:27): so that we don't reproduce it  \nvmassol - (14:28): it really makes us look bad  \ntmortagne - (14:28): yes  \nabusenius - (14:29): hi everyone, sorry for breaking 2.4.1...  \ntmortagne - (14:29): we usually validate the sate before the release using hudson and my last check was before alex commit  \ntmortagne - (14:29): s/sate/state/  \nsdumitriu - (14:30): I prefer to release on maven, then have people test it before going further with ow2, wikis, announcements  \ntmortagne - (14:30): and i usually check application jira issues but there was no issue  \nvmassol - (14:30): yes this proves we need to set up a staging repo on nexus  \nabusenius - (14:31): a question, how can I do it right, the csrf changes to applications will be incompatible with 2.4 branch  \nvmassol - (14:31): and have people test it for a few days before we release (maybe 1 or 2 days would be enough)  \nabusenius - (14:31): and we don't have 2.4/2.5 distinction for apps afaik  \nvmassol - (14:31): abusenius: you missed the jira issues for sure  \nvmassol - (14:31): what you did is ok (commit on trunk)  \nabusenius - (14:32): yes, I should have made an issue for each app  \nvmassol - (14:32): except it would have been nice to warn others that all apps would need to be brenahced  \ntmortagne - (14:32): abusenius: when need we create branches  \nvmassol - (14:32): branched  \ntmortagne - (14:32): for applications  \nabusenius - (14:32): ok  \ntmortagne - (14:32): also some of the application you modified are only used in 2.4 branch  \ntmortagne - (14:33): (until 2.5 is the stable branch)  \nabusenius - (14:34): btw, hudson does not appear to build any functional tests for the 2.5 branch any more, is there something wrong?  \nsdumitriu - (14:36): tmortagne: Core build failed, did you enable the extension module in the core pom?  \ntmortagne - (14:37): sdumitriu: yes i did, last time i checked hudson had network issue  \nsdumitriu - (14:38): tmortagne: The extension pom is wrong  \nsdumitriu - (14:38): parent: xwiki-core-extension  \nsdumitriu - (14:38): <artifactId>xwiki-core-extension</artifactId>  \nsdumitriu - (14:39): 1: It has itself as parent  \nsdumitriu - (14:39): 2: the expected id is xwiki-extension  \nsdumitriu - (14:40): Or no  \ntmortagne - (14:40): no it's not  \ntmortagne - (14:40): i'm fixingthe parent  \ntmortagne - (14:40): it's a leftover of sandbox  \nsdumitriu - (14:42): Ok, I think the error on Hudson is caused by the parent  \nsdumitriu - (14:45): tmortagne: Missing header: \u00a0platform/core/trunk/xwiki-extension/src/test/java/org/xwiki/extension/test/ConfigurableDefaultCoreExtensionRepository.java  \nsdumitriu - (14:45): platform/core/trunk/xwiki-extension/src/test/java/org/xwiki/extension/repository/DefaultExtensionManagerTest.java  \nsdumitriu - (14:45): platform/core/trunk/xwiki-extension/src/test/java/org/xwiki/extension/repository/AetherDefaultRepositoryManagerTest.java  \nsdumitriu - (14:45): platform/core/trunk/xwiki-extension/src/main/java/org/xwiki/extension/repository/internal/aether/configuration/DefaultAetherConfiguration.java  \nsdumitriu - (14:46): platform/core/trunk/xwiki-extension/src/main/java/org/xwiki/extension/repository/internal/aether/configuration/AetherConfiguration.java  \nsdumitriu - (14:46): platform/core/trunk/xwiki-extension/src/main/java/org/xwiki/extension/repository/ExtensionRepositorySource.java  \nsdumitriu - (14:47): platform/core/trunk/xwiki-extension/src/main/java/org/xwiki/extension/internal/script/ExtensionManagerScriptService.java  \nvmassol - (14:59): abusenius: re xwiki-csrftoken are you ok to name it xwiki-csrf?  \nvmassol - (14:59): (I don't understand why we would need the \"token\" suffix)  \nabusenius - (14:59): yes  \nvmassol - (14:59): ok cool  \nabusenius - (14:59): I thought xwiki-csrf doesn't sound protective  \nabusenius - (15:00): but in principle it doesn't matter  \ncjdelisle - (15:00): http://svn.xwiki.org/svnroot/xwiki/platform/core/trunk/xwiki-extension/pom.xml seems to be missing <artifactId>maven-checkstyle-plugin</artifactId>  \ntmortagne - (15:03): cjdelisle: this project is not yet following checkstyle  \ntmortagne - (15:03): mainly on javadoc  \ntmortagne - (15:03): that would make pretty much all file to fail  \ncjdelisle - (15:03): I see.  \ncjdelisle - (15:04): find ./ -name 'pom.xml' -exec grep -v '<artifactId>maven-checkstyle-plugin</artifactId>' {} \\; -print | grep '^\\.\\/'  \ncjdelisle - (15:04): ouch, looks like checkstyle conformance is the exception not the rule.  \ntmortagne - (15:05): cjdelisle: in core module ? that's not the impression I have  \ntmortagne - (15:05): s/module/modules/  \ncjdelisle - (15:06): No something is wrong with my regex, it picked up crypto which is definitely checked.  \nlpereira joined #xwiki at 15:09  \ncjdelisle - (15:16): there we go  \ncjdelisle - (15:16): find ./ -name 'pom.xml' | xargs grep -iL 'maven-checkstyle-plugin'  \njvdrean - (15:18): I've modified the user administration and the rights UI (+ wrote a user directory) to use the UsersModule, do you see any other place to update ?  \njvdrean - (15:19): I'd also like to get feedback on the APIs and the users cache issue (http://dev.xwiki.org/xwiki/bin/view/Design/UsersModule#HNotesaboutthecurrentimplementation)  \nasrfel left at 15:43 (Quit: Leaving.  \nsdumitriu - (15:55): jvdrean: An user directory was also proposed by Raluca, attached to a Jira issue  \nsilviar left at 16:09 (Quit: Leaving.  \nmflorea1 joined #xwiki at 16:30  \nflorinciu left at 16:30 (Ping timeout: 245 seconds  \nmflorea left at 16:30 (Ping timeout: 245 seconds  \nsburjan left at 16:30 (Ping timeout: 245 seconds  \nlucaa left at 16:32 (Ping timeout: 272 seconds  \nxwikibot joined #xwiki at 22:47  \nsdumitriu - (22:47): XWIKI-5433  \nsdumitriu - (22:47): The problem is that the SMTP password field is cleartext  \nsdumitriu - (22:47): It has to be like this so that the mailsender can read it and send it to the SMTP server  \nsdumitriu - (22:48): 5433 just makes the HTML element appear as a password field  \nsdumitriu - (22:48): But the password is not safe at all  \nsdumitriu - (22:48): On the contrary, it gives the impression that it is safe, while it's not  \nsburjan` - (22:48): so it can't be changed to password ?  \ncjdelisle - (22:49): It's a question of whether we want \"fake security\".  \nsdumitriu - (22:49): $xwiki.getXWikiPreference('smtp\\_server\\_password') displays it to anyone  \nsburjan` - (22:49): well.. I suggested it  \nsdumitriu - (22:49): And that's more public than accessing the administration UI  \nsdumitriu - (22:50): cjdelisle: Exactly, do we want fake security?  \nsdumitriu - (22:50): The proper solution would be to have a crypt password  \nsdumitriu - (22:50): cjdelisle: Do we have that now?  \nsburjan` - (22:50): :(  \ncjdelisle - (22:51): There's no password encryption. IMO encryption is next to pointless if the key needs to be on the server.  \nsdumitriu - (22:51): Well, it does make things harder to break  \nabusenius - (22:51): we could encrypt any text though  \nsdumitriu - (22:52): So, I'd be in favor of reopening the issue and close it as wontfix  \nsburjan` - (22:52): yeah ...  \nsdumitriu - (22:52): Do I get +1?  \nabusenius - (22:53): imo we should first add some api to encrypt such things with some password from the configuration  \ncjdelisle - (22:53): I'm not a big fan of fake security because it impinges on the administrator's actions while giving him a false sense of security.  \nsburjan` - (22:53): well .. if noone sees the point to obfuscate that password, I'm +1 too  \nabusenius - (22:53): +1 for not obfuscating  \ncjdelisle - (22:53): OTOH, people like fake security, just look at SELinux ;)  \nsdumitriu - (22:53): cjdelisle: :))  \ncjdelisle - (22:54): Yea +1 won't fix.  \nabusenius - (22:55): and then we need to generate this password automatically (don'T remember jira issue)  \ncjdelisle - (22:55): You're talking about a \"root key\" for encrypting all secrets?  \nabusenius - (22:57): that too  \nabusenius - (22:57): but the point is to \\*generate\\* the passwords  \nabusenius - (22:58): (like the cookie password)  \nabusenius - (22:58): because I'm sure 99% of installations use titititititit  \ncjdelisle - (22:58): Can't really generate the smtp password because it's probably supplied by the admin.  \nabusenius - (22:58): sure, that one needs to be stored encrypted  \ncjdelisle - (22:58): Where do you put the key?  \nabusenius - (22:59): on the fs  \ncjdelisle - (23:00): We don't currently use persistent filesystem storage.  \nabusenius - (23:01): I know  \ncjdelisle - (23:01): I like that fact too, you can dump the db, move to another server and be back serving again no problem.  \nabusenius - (23:01): and I think this is very unfortunate from the security PoV  \ncjdelisle - (23:01): And how do you prevent malicious users reading the filesystem?  \nabusenius - (23:02): and from the storage size (aka attachments) PoV too  \nabusenius - (23:02): we allready have export/import, why additionally support db dump?  \ncjdelisle - (23:03): because it's the most common way people upgrade.  \ncjdelisle - (23:05): How many people do you think have a script which rm -rf's the webapps/xwiki folder and then copies in the new upgrade version?  \nabusenius - (23:06): probably many, because only because they can  \ncjdelisle - (23:06): If you put a key in that folder, you will not be very popular when a few dozen large installations upgrade and deep six all of their secrets.  \nabusenius - (23:07): unfortunately  \ncjdelisle - (23:07): Back to original question \"how do you prevent malicious users reading the filesystem?\"  \nsburjan` - (23:08): what is with this app ?  \nsburjan` - (23:08): what does it do ?  \nabusenius - (23:08): by not giving them any meanst to do so in the first place  \ncjdelisle - (23:08): sburjan`: which app?  \nsdumitriu - (23:08): Oh, that app is very nice  \nsburjan` - (23:08): sky writer :)  \nsdumitriu - (23:08): sburjan`: Search Mozilla SkyWriter  \ncjdelisle - (23:09): \"by not giving them any meanst to do so in the first place\" hmm. I think that's an api break.  \nsburjan` - (23:09): yeah, I heard about bespin  \nabusenius - (23:09): well, if api allows you to write to /etc/passwd, then the api is broken  \nsburjan` - (23:10): but not sure yet what id does  \nsburjan` - (23:10): \\*it  \ncjdelisle - (23:13): http://maven.xwiki.org/site/xwiki-core-parent/xwiki-core/apidocs/com/xpn/xwiki/util/Util.html#getResourceAsStream%28java.lang.String%29  \nsdumitriu - (23:24): Yeah, there are a few very bad API methods  \ncjdelisle - (23:26): $doc.save('lol')  \ncjdelisle - (23:26): never get used to those line breaks getting interpreted.  \ncjdelisle - (23:31): IMO the key is to distrust as much as possible. XSS, CSRF, even filesystem attacks are for amateurs, pros attack the kernel, use malformed packets and such, overflow buffers, root.  \ncjdelisle - (23:32): So the only real defense it to distrust the server as much as possible.  \ncjdelisle - (23:35): I think the reason why we haven't had any major embarrassments is because we're not using something really common like php.  \nabusenius - (23:45): no, the fact that \"pros\" can do this does not mean anything  \nflorinciu left at 23:45 (Read error: Connection reset by peer  \nabusenius - (23:46): there is no point in digging a tunnel if you can just take the door  \nabusenius - (23:46): the weakest part of the system is what counts  \nabusenius - (23:47): and, the costs (mostly time) of breaking in also counts  \nabusenius - (23:48): if you need to root the server to take over the wiki, then why bother? just take any other vulnerable app  \nabusenius - (23:50): being uncommon also helps a lot  \njvdrean joined #xwiki at 23:55  \nsburjan` - (23:59): are you suyre you're not a little bit paranoid over security ?  \njvdrean left at 23:59 (Client Quit  \nsburjan` - (23:59): we're not making a wiki for DoD or Nasa  \n\n"}