{"id": "dev:IRC.xwikiArchive20100710", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100710", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nsdumitriu joined #xwiki at 00:09  \nCalebJamesDeLisl - (00:13): pong abusenius  \nabusenius - (00:15): re signed scripts, do you know how to send the personal certificate to the server?  \nabusenius - (00:15): and which format it will use?  \nCalebJamesDeLisl - (00:16): meaning when you create a client cert?  \nabusenius - (00:16): yes, the one corresponding to the private key you use to sign  \nCalebJamesDeLisl - (00:16): org.bouncycastle.jce.netscape.NetscapeCertRequest  \nabusenius - (00:16): it needs to be known to the server so that it can verify  \nabusenius - (00:17): ah, this one, ok  \nCalebJamesDeLisl - (00:17): You send one of those doodads, and the server sends back a client sert.  \nCalebJamesDeLisl - (00:17): \\*cert  \nabusenius - (00:17): can you also decode base64 data in js or should it be something else?  \nCalebJamesDeLisl - (00:17): Basically all you are sending is a public key and a signed challenge string.  \nCalebJamesDeLisl - (00:18): No it's all handles by firefox internals, no need to tinker with javascript.  \nabusenius - (00:18): ok, cool  \nabusenius - (00:19): I have some proof of concept implementation of signed scripts  \nabusenius - (00:19): https://svn.xwiki.org/svnroot/xwiki/contrib/sandbox/xwiki-rendering-macro-signed  \nabusenius - (00:20): it can currently just do create/verify, is not persistent but shows the point  \nabusenius - (00:20): there is also a small app that shows some of the methods  \nCalebJamesDeLisl - (00:20): What I have is based on bblfish's work, i can create client certs and make a client able to sign text from their browser.  \nabusenius - (00:21): we need to merge our implementations somehow  \nCalebJamesDeLisl - (00:21): I have been trying to figure out how to validate pkcs7 signatures, looks like you have that done which is great.  \nabusenius - (00:21): at least they should be compatible :)  \nabusenius - (00:22): yes, so I basically need to add some api to give you the data to sign, then you can post it back  \nabusenius - (00:22): and you can allready import a new trusted cert  \nabusenius - (00:22): (if the format will match)  \nCalebJamesDeLisl - (00:22): We all sort of have to work around the firefox crypto.signText standard if we want to support client certs.  \nCalebJamesDeLisl - (00:23): \\* supported by opera too, also there is talk about chrome support.  \nabusenius - (00:23): I have used bouncy castle and PKCS7, so should be not hard to make it work  \nCalebJamesDeLisl - (00:23): Your're using CMSSignedData?  \nabusenius - (00:23): yes  \nCalebJamesDeLisl - (00:24): it sounds like we're both going the same direction here.  \nabusenius - (00:24): yes, it was good that you told me to use pkcs7 early :)  \nCalebJamesDeLisl - (00:25): Since my code is really a complete rewrite of bblfish's work I think I will seperate it entirely and put it under the LGPL.  \nabusenius - (00:25): its was a bit tricky to use, but it seems to work now  \nCalebJamesDeLisl - (00:26): I can send you a tar of what I have (I don't want to post to the sandbox until I have completely separated it from the foafssl stuff.)  \nabusenius - (00:26): would be cool  \nCalebJamesDeLisl - (00:27): The user's URL is still in the cert so I \\_think\\_ it will remain foafssl compatable.  \nCalebJamesDeLisl - (00:28): One more bit of awesomeness about crypto.signText() is we can authenticate the user by sending them a random string and asking them to sign it. No passwords to leak over wifi.  \nCalebJamesDeLisl - (00:28): Also no need for server ssl certs.  \nCalebJamesDeLisl - (00:29): \\* CA signed server ssl certs.  \nabusenius - (00:30): isn't man in the middle a problem here?  \nabusenius - (00:31): I mean, try to login to server, get a random string, send it to legitimate user, he signs, sends it to you, you send it to server...  \nCalebJamesDeLisl - (00:39): Yup, but that will only get him access to your current session, not your passwords. Also MITM is an active attack which generally means somebody knows you have something they want. Packet sniffing is something you can do with wireshark and can be done silently without anyone knowing and you can do it to everyone in a coffee shop at once just fishing for info.  \nCalebJamesDeLisl - (00:40): Also the point is a bit moot since the connection is not encrypted anyway.  \nCalebJamesDeLisl - (00:40): Mail sent.  \nCalebJamesDeLisl - (00:42): What do you think of only one script service called $crypto?  \nabusenius - (00:45): $crypto would be nice, especially if used also for other things like encryptions/hash etc.  \nCalebJamesDeLisl - (00:45): Not sure I like the name SignedScript, what if it's not a script just some information which the signatory wishes to assure everyone it is valid.  \nabusenius - (00:45): I have put everything together for now to simplify things  \nCalebJamesDeLisl - (00:46): Looking at you're work, I think it's best to fold my work into your's.  \nabusenius - (00:46): well, how would you call it then? SignedData?  \nCalebJamesDeLisl - (00:46): String? ;)  \nabusenius - (00:47): well, its not just sting  \nabusenius - (00:48): at least for the purpose of signed scripts it is handy to have  \nCalebJamesDeLisl - (00:48): XWikiSignature isn't a signature per se.  \nCalebJamesDeLisl - (00:49): XWikiNotary?  \nabusenius - (00:49): SignedScript has additional information about who signed it, when etc  \nabusenius - (00:49): ok, XWikiSignature is a really bad name :)  \nabusenius - (00:49): I named it after security.Signature  \nabusenius - (00:49): why notary?  \nCalebJamesDeLisl - (00:50): I think it's fun to try to make names which make code read almost as english sentences.  \nCalebJamesDeLisl - (00:51): Well a notary public witnesses the signing of documents and attests to their validity (among other things).  \nabusenius - (00:51): maybe, but it is a cryptographic signature not so much a human made one  \nCalebJamesDeLisl - (00:51): It's a cryptographic notary ;)  \nabusenius - (00:52): I don't know, notary doesn't sound intuitive to me  \nabusenius - (00:53): maybe because I have never had something to do with notaries, but a lot with crypto :)  \nabusenius - (00:54): thanks for the code, I'll look at it tomorrow  \nCalebJamesDeLisl - (00:54): I'll keep looking for words.  \nabusenius - (00:55): its a thing/person who can sign and verify correctness of any kind of data  \nabusenius - (00:55): I would call it DataSigner, but it does not mention verification ^^  \nsdumitriu left at 00:58 (Quit: Leaving.  \nabusenius - (01:00): ok, got to go, see you online  \nCalebJamesDeLisl - (01:00): see ya  \nabusenius left at 01:01 (Quit: Konversation terminated!  \nlucaa joined #xwiki at 05:30  \nlucaa left at 05:35 (Ping timeout: 276 seconds  \nEnygma` joined #xwiki at 06:01  \nEnygma` left at 06:16 (Quit: Leaving.  \nflorinciu joined #xwiki at 09:32  \nflorinciu left at 10:18 (Quit: Leaving.  \nflorinciu joined #xwiki at 10:20  \nmflorea joined #xwiki at 10:27  \nflorinciu1 joined #xwiki at 10:36  \nflorinciu left at 10:53 (Quit: Leaving.  \nflorinciu joined #xwiki at 11:04  \nsdumitriu joined #xwiki at 11:37  \nfmancinelli joined #xwiki at 12:02  \nvmassol left at 12:05 (Quit: Leaving.  \nfmancinelli left at 12:07 (Ping timeout: 252 seconds  \nvmassol joined #xwiki at 12:10  \nvmassol1 joined #xwiki at 12:11  \nvmassol left at 12:11 (Read error: Connection reset by peer  \nflorinciu left at 12:14 (Read error: Connection reset by peer  \nmflorea1 joined #xwiki at 12:56  \nmflorea left at 12:57 (Read error: Connection reset by peer  \nnuvolari is now known as all (~quassel@unaffiliated/nuvolari  \nall is now known as nuvolari (~quassel@unaffiliated/nuvolari  \nsdumitriu left at 15:00 (Ping timeout: 240 seconds  \nsdumitriu joined #xwiki at 15:12  \nflorinciu1 left at 15:53 (Quit: Leaving.  \nflorinciu joined #xwiki at 16:02  \njvelo left at 16:03 (Quit: Ex-Chat  \nabusenius joined #xwiki at 16:59  \nflorinciu left at 17:19 (Read error: Connection reset by peer  \nevalica joined #xwiki at 18:08  \nevalica left #xwiki at 18:08  \nflorinciu joined #xwiki at 18:31  \nflorinciu left at 18:31 (Client Quit  \nvmassol1 left at 18:31 (Quit: Leaving.  \nvmassol joined #xwiki at 18:31  \nvmassol left at 18:31 (Client Quit  \nmflorea1 left at 19:31 (Quit: Leaving.  \nflorinciu joined #xwiki at 19:54  \nfmancinelli joined #xwiki at 20:08  \nflorinciu left at 20:21 (Quit: Leaving.  \nsdumitriu left at 20:47 (Ping timeout: 240 seconds  \nsdumitriu joined #xwiki at 21:24  \nfmancinelli left at 23:15 (Read error: Operation timed out  \n\n"}