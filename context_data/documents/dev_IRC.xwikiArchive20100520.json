{"id": "dev:IRC.xwikiArchive20100520", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100520", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nCalebJamesDeLisl - (00:00): It's simple but if it doesn't work I'll try something different.  \nCalebJamesDeLisl - (00:00): then something different, etc.  \nbblfish - (00:01): ah ok  \nbblfish - (00:01): let me give you access then  \nbblfish - (00:03): I think you have it now  \nbblfish - (00:03): does it work?  \nbblfish - (00:04): i mean the admin rights?  \nCalebJamesDeLisl - (00:04): checking...  \nbblfish - (00:04): notice that the core element I have been working on is \u00a0WebId.XWikiUserProfileSheet  \nbblfish - (00:05): be careful how you chance things there, it contains rdfa  \nCalebJamesDeLisl - (00:05): yup, working. Let's see what I can do.  \ntmortagne left at 00:21 (Quit: Leaving.  \nbblfish - (00:28): any luck?  \nbblfish - (00:28): btw, you have to change WebId.XWikiUserProfileShee  \nbblfish - (00:28): t  \nbblfish - (00:29): because it replaces the \u00a0XWiki.XWikiUserProfileSheet  \nCalebJamesDeLisl - (00:35): Try now...  \nCalebJamesDeLisl - (00:35): http://webid.myxwiki.org/xwiki/bin/view/WebId/XWikiUserProfileSheet?viewer=code  \nCalebJamesDeLisl - (00:36): line 27  \nCalebJamesDeLisl - (00:36): added a \\n  \nbblfish - (00:36): ah seems to work  \nCalebJamesDeLisl - (00:37): The rule with macros is if they don't have an empty line above and below then they are inline.  \nbblfish - (00:37): ok  \nCalebJamesDeLisl - (00:37): inline == placed inside of a <p> element  \nCalebJamesDeLisl - (00:37): inline {{html}} macros fail if they contain content which can't be put in a <p> block  \nbblfish - (00:38): thanks. So now I just have to fix a few small remaining rdfa errors  \nbblfish - (00:38): http://validator.w3.org/check?uri=http://webid.myxwiki.org/xwiki/bin/view/XWiki/hjs&charset=(detect+automatically)&doctype=Inline&group=0  \nbblfish - (00:38): I want to make sure it's absolutely correct  \nbblfish - (00:38): because we are having some very weird bugs  \nabusenius left at 00:39 (Quit: Leaving  \nCalebJamesDeLisl - (00:39): the renderer was rewritten and the old renderer didn't enforce these rules properly.  \nbblfish - (00:39): yes vmassol was telling me. But the error messages are not good at telling you which velocity script is the problem  \nCalebJamesDeLisl - (00:40): Agreed.  \nCalebJamesDeLisl - (00:40): There are a few gotchas with that seemingly simple rule.  \nCalebJamesDeLisl - (00:40): \"  \nCalebJamesDeLisl - (00:40): some content  \nCalebJamesDeLisl - (00:40): #set($something = 'something')  \nCalebJamesDeLisl - (00:40): {{html}}  \nCalebJamesDeLisl - (00:40): \"  \nCalebJamesDeLisl - (00:40): inline.  \nbblfish - (00:41): can you unlock that file?  \nbblfish - (00:41): or should I just edit it  \nCalebJamesDeLisl - (00:41): yea you can force it.  \nbblfish - (00:41): thanks. That is very helpful  \nbblfish - (00:42): I hope this fixes our problems  \nCalebJamesDeLisl - (00:42): If the html macro is the first printed content on the page, it doesn't need a \\n  \nCalebJamesDeLisl - (00:43): {{velocity}} is not printed content, nor is #set($x = \"something\")  \nCalebJamesDeLisl - (00:43): The really nasty one is this:  \nCalebJamesDeLisl - (00:43): ## A velocity comment  \nCalebJamesDeLisl - (00:43): \u00a0  \nCalebJamesDeLisl - (00:43): {{html}}  \nCalebJamesDeLisl - (00:43): That's inline!  \nCalebJamesDeLisl - (00:43): the ## comment notation eats the newline.  \nbblfish - (00:43): oh dear  \nbblfish - (00:44): I'll try to remember that  \nCalebJamesDeLisl - (00:44): so if it follows a comment you need:  \nCalebJamesDeLisl - (00:44): \"  \nCalebJamesDeLisl - (00:44): ## a velocity comment  \nCalebJamesDeLisl - (00:44): \u00a0  \nCalebJamesDeLisl - (00:44): \u00a0  \nbblfish - (00:44): you mean a blank line  \nCalebJamesDeLisl - (00:44): {{html}}  \nCalebJamesDeLisl - (00:44): \"  \nCalebJamesDeLisl - (00:44): Yes.  \nCalebJamesDeLisl - (00:45): I'm putting a space in irc because it won't let me send just an \\n  \nbblfish - (00:45): ok  \nbblfish - (00:45): thanks a lot. I'll look over what you said  \nCalebJamesDeLisl - (00:46): But you can have a whole bunch of velocity code setting things and such and the macro will not be inline.  \nCalebJamesDeLisl - (00:46): if the document begins with a velocity macro and a bunch of set or if directives, nothing is \\_printed\\_ so the html macro is the first line.  \nabusenius joined #xwiki at 00:48  \nCalebJamesDeLisl - (00:49): Another trick which you can use to write cleaner velocity is replacing this:  \nCalebJamesDeLisl - (00:49): id=#if($x = $y)\"some id\"#end  \nCalebJamesDeLisl - (00:49): with this:  \nCalebJamesDeLisl - (00:49): id=##  \nCalebJamesDeLisl - (00:49): #if($x == $y)  \nCalebJamesDeLisl - (00:49): \u00a0\u00a0\"some id\"##  \nCalebJamesDeLisl - (00:50): #end  \nCalebJamesDeLisl - (00:50): because ## eats the newline.  \nbblfish - (00:50): you should put that in the wiki, or else you'll be repeating that a lot :-)  \nCalebJamesDeLisl - (00:50): I know I should. So much to do...  \nbblfish - (00:51): heh  \nbblfish - (00:51): is there a good editor for editing these scripts?  \nbblfish - (00:52): because it's really difficult to find the closing tags  \nbblfish - (00:52): for some html  \nCalebJamesDeLisl - (00:52): Hmm, \u00a0I use gedit with a custom syntax highlighting code I wrote.  \nCalebJamesDeLisl - (00:53): It doesn't find #end or {{/html}} but when you click on a ( or a { it highlights the matching } or )  \nbblfish - (00:54): this is really horrible to edit  \nCalebJamesDeLisl - (00:54): I found it was tricky to read because the tabbing is weird.  \nCalebJamesDeLisl - (00:55): I have found it easier to read code when I tab velocity stuff in 2 spaces and html in 1 space.  \nbblfish - (00:55): yes I should probably do that.  \nabusenius left at 00:56 (Ping timeout: 240 seconds  \nCalebJamesDeLisl - (00:58): You can look at this to see if it's what you want:  \nCalebJamesDeLisl - (00:58): http://incubator.myxwiki.org/xwiki/bin/view/InvitationMail/Invitation?viewer=code  \nCalebJamesDeLisl - (00:58): (have to log in to view it.)  \nbblfish - (00:59): yes, thanks  \nbblfish - (01:04): i think it would probably easier to generate rdf/xml  \nbblfish - (01:04): but I'll do that another time  \nCalebJamesDeLisl - (01:15): If you want this: http://tinycoke.com/image/6rsrJBbtgZCEQ.png just install gedit (I think it works with darwin ports)  \nsburjan left at 01:15 (Ping timeout: 248 seconds  \nsburjan joined #xwiki at 01:15  \nbblfish - (01:15): thanks, that's very kind  \nCalebJamesDeLisl - (01:16): Then I'll send you the syntax highlighting code.  \nsburjan left at 01:16 (Read error: Connection reset by peer  \nbblfish - (01:16): mhh  \nbblfish - (01:17): I think your newline adds a <p>  \nsburjan joined #xwiki at 01:17  \nCalebJamesDeLisl - (01:17): A macro is put in the <p>? or is it adding <p></p>  \nCalebJamesDeLisl - (01:17): ?  \nsburjan left at 01:18 (Read error: Connection reset by peer  \nbblfish - (01:18): <p></p>  \nsburjan joined #xwiki at 01:18  \nbblfish - (01:18): I should not be doing this at this time  \nbblfish - (01:18): I'll roll back  \nCalebJamesDeLisl - (01:18): I think that means one of the newlines is not needed.  \njfx left at 01:20 (Quit: WeeChat 0.3.0  \nbblfish - (01:24): phew thanks god for rollback  \nbblfish - (01:28): this is just a really ugly bug we have...  \nbblfish - (01:28): I think I may tomorrow try switching to rdf/xml  \nbblfish - (01:28): as the parsers are more stable for that  \nbblfish - (01:28): ...  \nbblfish - (01:28): got to go  \nbblfish left at 01:29 (Quit: Leaving.  \nflorinciu left at 01:35 (Read error: Connection reset by peer  \nlucaa left at 03:29 (Ping timeout: 240 seconds  \nnpm left at 03:53 (Quit: Leaving.  \nnpm joined #xwiki at 04:13  \nlmserique joined #xwiki at 04:36  \nlmserique left #xwiki at 04:36  \nDenis left at 07:03 (Ping timeout: 276 seconds  \nDenis joined #xwiki at 07:08  \nflorinciu joined #xwiki at 07:22  \ntmortagne joined #xwiki at 07:24  \nsdumitriu left at 07:39 (Ping timeout: 260 seconds  \nlucaa joined #xwiki at 07:52  \nvmassol joined #xwiki at 07:53  \nmflorea joined #xwiki at 07:56  \nplunden joined #xwiki at 08:11  \nlucaa left at 08:20 (Ping timeout: 264 seconds  \n\n"}