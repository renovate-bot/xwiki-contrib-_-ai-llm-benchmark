{"id": "dev:IRC.xwikiArchive20120104", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120104", "title": "IRC Archive for channel #xwiki on 04 January 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n02:11\u00a0<tekzilla>\u00a0has quit  \n02:12\u00a0<tekzilla>\u00a0has joined #xwiki  \n02:46\u00a0<rickross>\u00a0has joined #xwiki  \n03:11\u00a0<Agarri\\_FR>\u00a0has joined #xwiki  \n03:13\u00a0<Agarri\\_FR>\u00a0Hello, I'm currently trying xwiki and I set up a Wiki using the free 2-accounts plan  \n03:13\u00a0<Agarri\\_FR>\u00a0I created some content but I can't find how to allow \\*anonymous\\* users to see it  \n03:14\u00a0<Agarri\\_FR>\u00a0I looked to the doc, but the screenshots don't look like my administration page  \n03:14\u00a0<Agarri\\_FR>\u00a0The wiki : http://xhe.cloud.xwiki.com  \n03:46\u00a0<rickross>\u00a0has quit  \n03:49\u00a0<@sdumitriu>\u00a0Hi Agarri\\_FR  \n04:58\u00a0<DrLou\\_>\u00a0has quit  \n06:00\u00a0<Denis1>\u00a0has joined #xwiki  \n06:03\u00a0<Denis>\u00a0has quit  \n06:31\u00a0<DrLou>\u00a0has joined #xwiki  \n07:16\u00a0<sdumitriu>\u00a0has quit  \n08:29\u00a0<jvdrean>\u00a0has joined #xwiki  \n08:30\u00a0<vmassol>\u00a0has joined #xwiki  \n09:24\u00a0<mflorea>\u00a0has joined #xwiki  \n09:25\u00a0<Agarri\\_FR>\u00a0Any idea ?  \n09:38\u00a0<@cjdelisle>\u00a0My understanding is that the wiki you're using is only for collaboration between registered users.  \n09:38\u00a0<@cjdelisle>\u00a0You might consider looking at myxwiki as a free wiki where guests can view your work.  \n09:45\u00a0<vmassol>\u00a0has quit  \n09:51\u00a0<vmassol>\u00a0has joined #xwiki  \n09:53\u00a0<@cjdelisle>\u00a002:52 < xwikibot> Main.DocumentDoesNotExist was modified by XWiki.LiLucy <-- hehe creative spam  \n09:56\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:57\u00a0<vmassol>\u00a0cjdelisle: gm. What part is creative? :)  \n09:57\u00a0<vmassol>\u00a0it's manual for sure so that part is \"creative\"  \n09:59\u00a0<vmassol>\u00a0tmortagne: were you able to locate the issue with gwt-dev yesterday?  \n09:59\u00a0<@cjdelisle>\u00a0putting stuff in a page which is the landing page for nonexistant documents?  \n09:59\u00a0<vmassol>\u00a0cjdelisle: yeah, not sure they did this on purpose though  \n10:00\u00a0<@cjdelisle>\u00a0perhaps not, clever if they did though..  \n10:00\u00a0<vmassol>\u00a0yep  \n10:01\u00a0<vmassol>\u00a0tmortagne: seems gwt-dev is excluded completely in XE build, I'll try to find the exclusion and do the same in the plugin  \n10:02\u00a0<+tmortagne>\u00a0vmassol: yes I seen where gwt-dev is triggered as dependency and scope provided seems to work but gwt build I did to test crashed my machine yesterday and did not had time to restart it  \n10:03\u00a0<+tmortagne>\u00a0anyway there is a lot of other stuff to exclude too  \n10:03\u00a0<+tmortagne>\u00a0at least to have less stuff to download  \n10:03\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:04\u00a0<+tmortagne>\u00a0btw are you sure root webapp is required for integration tests ? I see you package it  \n10:04\u00a0<vmassol>\u00a0yes it's required  \n10:04\u00a0<vmassol>\u00a0I only put what's required  \n10:05\u00a0<vmassol>\u00a0the bare minimum for an empty wiki to display fine  \n10:05\u00a0<vmassol>\u00a0the reason for the root webapp is simple  \n10:05\u00a0<vmassol>\u00a0in web.xml we define filters  \n10:05\u00a0<vmassol>\u00a0once we move to servlet 3.x we won't need this anymore  \n10:05\u00a0<vmassol>\u00a0this there's no need for a web.xml anytmore  \n10:05\u00a0<lucaa>\u00a0has joined #xwiki  \n10:05\u00a0<vmassol>\u00a0as you can use annotations  \n10:06\u00a0<+tmortagne>\u00a0ok  \n10:07\u00a0<vmassol>\u00a0is it this doing the excludes: \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<packagingExcludes>\\*\\*/sc/\\*\\*,\\*\\*/wysiwyg/WEB-INF/\\*\\*,\\*\\*/gwt-unitCache/\\*\\*</packagingExcludes>  \n10:07\u00a0<vmassol>\u00a0(in wysiwyg war module)  \n10:08\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:10\u00a0<vmassol>\u00a0let me understand: we don't package the gwt-user and gwt-dev because we include what we need in our own wysiwyg war is that it?  \n10:11\u00a0<+tmortagne>\u00a0no actually gwt-dev and user are just here for the java to build properly before being converted to js, what you have in theses package are what API provided by GWT when to are in js  \n10:11\u00a0<+tmortagne>\u00a0from what I understood  \n10:11\u00a0<+tmortagne>\u00a0soo they should always be used as scope provided  \n10:12\u00a0<vmassol>\u00a0so they're only needed at build time but not runtime  \n10:12\u00a0<vmassol>\u00a0?  \n10:12\u00a0<+tmortagne>\u00a0it's kind of headers  \n10:12\u00a0<+tmortagne>\u00a0it's not java anymore at runtime  \n10:12\u00a0<vmassol>\u00a0well there's the server side part  \n10:12\u00a0<vmassol>\u00a0but maybe that server side has no gwt runtime?  \n10:12\u00a0<vmassol>\u00a0(runtime jar I mean)  \n10:13\u00a0<+tmortagne>\u00a0the server side does not depends on that as far as I can see  \n10:13\u00a0<vmassol>\u00a0ok I'll add exclusions on both gwt-dev and gwt-user for now  \n10:13\u00a0<+tmortagne>\u00a0there is actually only xwiki-platform-gwt-dom for gwt-dev  \n10:13\u00a0<vmassol>\u00a0unless you're already doing it  \n10:13\u00a0<+tmortagne>\u00a0I will make it provided scope  \n10:13\u00a0<vmassol>\u00a0I don't understand what you mean  \n10:14\u00a0<+tmortagne>\u00a0not sure yet why you get gwt-user since it's already scope provided  \n10:14\u00a0<vmassol>\u00a0should they need to be added to:  \n10:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0filter.add(new ExcludesArtifactFilter(Arrays.asList(  \n10:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"org.apache.xmlgraphic:batik-js\",  \n10:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"commons-logging:commons-logging\",  \n10:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"commons-logging:commons-logging-api\",  \n10:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"log4j:log4j\")));  \n10:14\u00a0<+tmortagne>\u00a0I mean <scope>provided</scope>  \n10:14\u00a0<vmassol>\u00a0s/should/shouldn't/  \n10:14\u00a0<vmassol>\u00a0because otherwise when we resolve transitively we'll get them  \n10:14\u00a0<vmassol>\u00a0this.resolver.resolveTransitively  \n10:15\u00a0<+tmortagne>\u00a0you should not resolce provided dependencies  \n10:15\u00a0<vmassol>\u00a0they're not  \n10:15\u00a0<vmassol>\u00a0meaning that their deps is not included  \n10:15\u00a0<vmassol>\u00a0but themselves are I guess  \n10:15\u00a0<vmassol>\u00a0becuase they're deps of a non runtime dep declaration  \n10:16\u00a0<+tmortagne>\u00a0right now they are not properly declared as provided anyway  \n10:16\u00a0<+tmortagne>\u00a0but putting them as provided as they should anyway should be enough to fix the issue  \n10:17\u00a0<+tmortagne>\u00a0but there is other dependencies I listed yesterday that should not be there either even if they don't cause much issue  \n10:19\u00a0<vmassol>\u00a0are you doing the runtime scope change now?  \n10:20\u00a0<+tmortagne>\u00a0yes  \n10:20\u00a0<vmassol>\u00a0ok  \n10:20\u00a0<vmassol>\u00a0I'll wait  \n10:20\u00a0<+tmortagne>\u00a0still need to find were gwt--user is not scope provided since you get it in the package  \n10:21\u00a0<vmassol>\u00a0we just need to do a dependency:tree on the 5 mandatory deps I'm adding in paclage mojo  \n10:21\u00a0<+tmortagne>\u00a0as far as i can see it's <scope>provided</scope> everywhere  \n10:21\u00a0<+tmortagne>\u00a0where is the list ?  \n10:21\u00a0<vmassol>\u00a0in getMandatoryJarDependencies  \n10:21\u00a0<+tmortagne>\u00a0checking  \n10:21\u00a0<vmassol>\u00a0just below:  \n10:21\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// We shouldn't need those but right now it's mandatory since they are defined in the default web.xml file we  \n10:21\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// provide. We'll be able to remove them when we start using Servlet 3.0 -->  \n10:25\u00a0<vmassol>\u00a0\u00a0in xwiki-platform-gwt-api it's defined a provided  \n10:26\u00a0<+tmortagne>\u00a0ha I know  \n10:26\u00a0<+tmortagne>\u00a0gwt-user was triggered by gwt-dev  \n10:26\u00a0<+tmortagne>\u00a0that's why I could not find it  \n10:27\u00a0<+tmortagne>\u00a0so fixing gwt-dev will fix gwt-user  \n10:27\u00a0<+tmortagne>\u00a0committing  \n10:27\u00a0<vmassol>\u00a0ok  \n10:31\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* r245f100\u000f \u000f/ xwiki-platform-core/xwiki-platform-gwt/xwiki-platform-gwt-dom/pom.xml :\u000f XWIKI-7342: gwt-dev should never be triggered as transitive dependency ...  \n10:31\u00a0<+tmortagne>\u00a0done  \n10:31\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* r0ae28e1\u000f \u000f/ xwiki-platform-core/xwiki-platform-gwt/xwiki-platform-gwt-dom/pom.xml :\u000f XWIKI-7342: gwt-dev should never be triggered as transitive dependency - http://git.io/NGo8qw  \n10:32\u00a0<vmassol>\u00a0testing locally  \n10:43\u00a0<vmassol>\u00a0hmm I must have some bug in the package mojo somewhere. I get this when trying to run the linkchecker test module:  \n10:43\u00a0<vmassol>\u00a0[ERROR] Failed to execute goal org.xwiki.platform:xwiki-platform-tool-packager-plugin:3.4-SNAPSHOT:package (default-package) on project xwiki-platform-linkchecker-test: Failed to import XAR [org.xwiki.platform:xwiki-platform-linkchecker-ui:xar:3.4-SNAPSHOT:compile]: Failed to get the list of components to load: JAR entry META-INF/components.txt not found in /Users/vmassol/.m2/repository/org/xwiki/platform/xwiki-platform-configuration-def  \n10:51\u00a0<+tmortagne>\u00a0vmassol: couln't it be caused by the change you made on component module ?  \n10:52\u00a0<vmassol>\u00a0I doubt it  \n10:52\u00a0<Agarri\\_FR>\u00a0@cjdelisle : thanks ! I just created an account on xwiki and I'll send a mail to the mailing-list  \n10:52\u00a0<vmassol>\u00a0I haven't changed that part  \n10:59\u00a0<vmassol>\u00a0tmortagne: do you have the same problem?  \n11:00\u00a0<vmassol>\u00a0full stack is here: http://pastebin.com/GbS68uNK  \n11:00\u00a0<vmassol>\u00a0the file exists in my local repo  \n11:01\u00a0<vmassol>\u00a0(and it does have a META-INF/components.txt entry)  \n11:01\u00a0<gdelhumeau>\u00a0where can I find documentation about $xwiki.mail ?  \n11:02\u00a0<vmassol>\u00a0gdelhumeau: I didn't even know we have this variable bound!  \n11:03\u00a0<+tmortagne>\u00a0vmassol: did not tested, checking  \n11:03\u00a0<vmassol>\u00a0gdelhumeau: oh sorry that's the mail plugin  \n11:03\u00a0<gdelhumeau>\u00a0http://maven.xwiki.org/site/xwiki-core-parent/xwiki-core/apidocs/com/xpn/xwiki/plugin/mail/MailPluginApi.html  \n11:03\u00a0<gdelhumeau>\u00a0just found it!  \n11:03\u00a0<vmassol>\u00a0yep  \n11:04\u00a0<vmassol>\u00a0gdelhumeau: I think we use a more recent version named mailsender plugin  \n11:04\u00a0<vmassol>\u00a0hmm maybe mail plugin is different  \n11:04\u00a0<vmassol>\u00a0ah yes  \n11:05\u00a0<vmassol>\u00a0mail plugin gets mail  \n11:05\u00a0<vmassol>\u00a0while mailsender sends mail  \n11:05\u00a0<gdelhumeau>\u00a0that's what I need :)  \n11:10\u00a0<vmassol>\u00a0tmortagne: seems it worked: http://ci.xwiki.org/job/xwiki-platform/1270/org.xwiki.platform$xwiki-platform-linkchecker-test/console  \n11:10\u00a0<+tmortagne>\u00a0hmm gwt-dev is not in http://ci.xwiki.org/job/xwiki-platform/ws/xwiki-platform-core/xwiki-platform-linkchecker/xwiki-platform-linkchecker-test/target/xwiki/webapps/xwiki/WEB-INF/lib/ anymore but gwt-user is so it probably also comes another way  \n11:11\u00a0<+tmortagne>\u00a0trying to find where  \n11:14\u00a0<+tmortagne>\u00a0it's <scope>provided</scope> in all dependencies listed in getMandatoryJarDependencies  \n11:14\u00a0<vmassol>\u00a0I think it's coming from xwiki-platform-gwt-api  \n11:15\u00a0<+tmortagne>\u00a0it's has the right scope in there  \n11:15\u00a0<vmassol>\u00a0hecking  \n11:16\u00a0<vmassol>\u00a0yes it's coming from there  \n11:16\u00a0<vmassol>\u00a0since it appears after the download of xwiki-platform-gwt-api  \n11:16\u00a0<vmassol>\u00a0in the log  \n11:16\u00a0<vmassol>\u00a0hmm no  \n11:17\u00a0<vmassol>\u00a0forget that  \n11:17\u00a0<vmassol>\u00a0it's not a list  \n11:17\u00a0<vmassol>\u00a0it's a set  \n11:17\u00a0<vmassol>\u00a0so there's no order  \n11:18\u00a0<vmassol>\u00a0xwiki-platform-webdav-server seems the most likely candidate  \n11:18\u00a0<vmassol>\u00a0checking in maven now  \n11:18\u00a0<+tmortagne>\u00a0webdav ? did not even tough of checking it  \n11:19\u00a0<+tmortagne>\u00a0no dependency on gwt  \n11:20\u00a0<vmassol>\u00a0indeed, I don't understand why gwt-user appears after it then in the log  \n11:21\u00a0<vmassol>\u00a0oh I know  \n11:21\u00a0<vmassol>\u00a0forget all I said  \n11:21\u00a0<vmassol>\u00a0we resolve them all together  \n11:21\u00a0<vmassol>\u00a0I had forgotten that  \n11:26\u00a0<+tmortagne>\u00a0vmassol: there is something weird: I can see you explicitely filter commons-logging but i can find it in http://ci.xwiki.org/job/xwiki-platform/ws/xwiki-platform-core/xwiki-platform-linkchecker/xwiki-platform-linkchecker-test/target/xwiki/webapps/xwiki/WEB-INF/lib/  \n11:27\u00a0<+tmortagne>\u00a0mayeb you are not using the right groupid in the filter  \n11:27\u00a0<+tmortagne>\u00a0\"commons-logging:commons-logging\",  \n11:27\u00a0<vmassol>\u00a0hmm strange I had checked that it worked at the time  \n11:27\u00a0<vmassol>\u00a0rechecking  \n11:28\u00a0<vmassol>\u00a0tmortagne: [INFO] +- com.google.gwt:gwt-user:jar:2.4.0:compile  \n11:28\u00a0<vmassol>\u00a0in xwiki-platform-gwt  \n11:29\u00a0<+tmortagne>\u00a0looking at xwiki-platform-gwt  \n11:29\u00a0<vmassol>\u00a0and also in \u00a0xwiki-platform-gwt-dom  \n11:29\u00a0<vmassol>\u00a0actually in all modules under -gwt  \n11:29\u00a0<vmassol>\u00a0since they inherit it from the parent  \n11:30\u00a0<+tmortagne>\u00a0I don't understand why I was not seeing it, I checked all theses modules  \n11:30\u00a0<vmassol>\u00a0I just did a mvn dependency:tree on the full platform  \n11:36\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* r7fce3ea\u000f \u000f/ (3 files in 3 dirs):\u000f XWIKI-7342: gwt-dev and gwt-user should never be triggered as transitive ...  \n11:48\u00a0<+tmortagne>\u00a0vmassol: I just removed the restriction on agent-1 for http://ci.xwiki.org/job/xwiki-platform/  \n11:48\u00a0<vmassol>\u00a0ok thanks  \n11:49\u00a0<vmassol>\u00a0checking commons-lang 2.4 now  \n11:49\u00a0<vmassol>\u00a0(ie why we get this one instead of 2.6)  \n11:50\u00a0<vmassol>\u00a0probably some missing exclusions to do  \n11:50\u00a0<+tmortagne>\u00a0you found why you get commons-logging ?  \n11:51\u00a0<vmassol>\u00a0havent' checked yet  \n11:51\u00a0<+tmortagne>\u00a0ok  \n11:51\u00a0<vmassol>\u00a0[INFO] +- org.apache.velocity:velocity:jar:1.7:compile  \n11:51\u00a0<vmassol>\u00a0[INFO] | \u00a0+- commons-collections:commons-collections:jar:3.2.1:compile  \n11:51\u00a0<vmassol>\u00a0[INFO] | \u00a0\\- commons-lang:commons-lang:jar:2.6:compile (version managed from 2.4)  \n11:51\u00a0<vmassol>\u00a0this means that commons-collections 3.2.1 has a dep on commons lang 2.4 AFAIU  \n11:51\u00a0<+tmortagne>\u00a0yep  \n11:51\u00a0<vmassol>\u00a0but it's forced to 2.6 since we declare it  \n11:52\u00a0<+tmortagne>\u00a0so it should be the same in the packager too I think  \n11:53\u00a0<+tmortagne>\u00a0unless resolveTransitively does not properly take into account managed dependencies  \n11:53\u00a0<vmassol>\u00a0yes it probablky doesn't  \n11:53\u00a0<+tmortagne>\u00a0or maybe not the 2.0.9 version at least  \n11:53\u00a0<+tmortagne>\u00a0siince that's the one used by th eplugin  \n11:54\u00a0<+tmortagne>\u00a0maybe a more recent one would do it  \n11:54\u00a0<vmassol>\u00a0checking somethin first  \n11:54\u00a0<vmassol>\u00a0this call  \n11:54\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ArtifactResolutionResult arr = this.resolver.resolveTransitively(mandatoryTopLevelArtifacts,  \n11:54\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.project.getArtifact(), this.local, this.remoteRepos, this.metadataSource, filter);  \n11:54\u00a0<vmassol>\u00a0doesn't know anything about the project AFAICS  \n11:55\u00a0<vmassol>\u00a0this.project.getArtifact is the originating artifact  \n11:55\u00a0<vmassol>\u00a0of course it's possible that internally artfact has a refernce to the project  \n11:57\u00a0<vmassol>\u00a0in any case it's probably time to start using maven 3.x  \n11:58\u00a0<+tmortagne>\u00a0not sure what it has to do with the project, the managerd dependecies are declared in the root pom from which they all depends  \n11:58\u00a0<+tmortagne>\u00a0and resolveTransitively is supposed to properly resolve parent pom so it has the information  \n11:58\u00a0<+tmortagne>\u00a0but sure maven 2 was overriding transitive dependecies with managed dependencies versions  \n11:59\u00a0<+tmortagne>\u00a0s:sure/not sure/  \n12:03\u00a0<mflorea>\u00a0has quit  \n12:20\u00a0<vmassol>\u00a0lunch bbl  \n12:25\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* r512c76c\u000f \u000f/ xwiki-platform-core/xwiki-platform-wysiwyg/xwiki-platform-wysiwyg-server/pom.xml :\u000f Missing dependency - http://git.io/vJqkMA  \n12:26\u00a0<vmassol>\u00a0tmortagne: you sure this new dep you added has the right scope?  \n12:26\u00a0<vmassol>\u00a0servlet api is usually provided scope  \n12:28\u00a0<+tmortagne>\u00a0vmassol: it has  \n12:28\u00a0<+tmortagne>\u00a0the scope is in the managed dependency  \n12:34\u00a0<vmassol>\u00a0ok I hope it works  \n12:35\u00a0<+tmortagne>\u00a0IT IS  \n12:35\u00a0<+tmortagne>\u00a0it is  \n12:41\u00a0<vmassol>\u00a0tmortagne: ah I'm using the resolveTransitively api without the manager version param  \n12:41\u00a0<vmassol>\u00a0maybe that's the reason  \n12:42\u00a0<vmassol>\u00a0I'll try something  \n12:43\u00a0<vmassol>\u00a0trying this instead:  \n12:43\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ArtifactResolutionResult arr = this.resolver.resolveTransitively(mandatoryTopLevelArtifacts,  \n12:43\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.project.getArtifact(), this.project.getManagedVersionMap(), this.local, this.remoteRepos,  \n12:43\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.metadataSource, filter);  \n12:48\u00a0<vmassol>\u00a0Enygma`: bad idea  \n12:48\u00a0<vmassol>\u00a0I think it had a cache  \n12:48\u00a0<+Enygma`>\u00a0it was crap :)  \n12:49\u00a0<+Enygma`>\u00a0it took 1 minute to load  \n12:49\u00a0<vmassol>\u00a0you maede it way worse  \n12:49\u00a0<vmassol>\u00a0:(  \n12:49\u00a0<vmassol>\u00a0the cache is now NOT used  \n12:49\u00a0<vmassol>\u00a0this line has no effect in 2.0 syntax:  \n12:49\u00a0<vmassol>\u00a0$context.setCacheDuration(3600)  \n12:50\u00a0<+Enygma`>\u00a0I planned to use the {{cache}} macro  \n12:50\u00a0<vmassol>\u00a0yep  \n12:50\u00a0<vmassol>\u00a0that will be good  \n12:50\u00a0<+Enygma`>\u00a02.0 syntax was the first steo  \n12:50\u00a0<vmassol>\u00a0:)  \n12:50\u00a0<+Enygma`>\u00a0\\*step  \n12:50\u00a0<vmassol>\u00a0ok  \n12:50\u00a0<vmassol>\u00a0I jumped too fast then ;)  \n12:50\u00a0<+Enygma`>\u00a0np :)  \n12:50\u00a0<+Enygma`>\u00a0so, btw, is this method deprecated, or what? $context.setCacheDuration(3600)  \n12:50\u00a0<vmassol>\u00a0but context.setCacheDuration is supposed to work in 1.0 syntax  \n12:50\u00a0<vmassol>\u00a0if it's not we need to know  \n12:51\u00a0<vmassol>\u00a0it's not deprecated  \n12:51\u00a0<vmassol>\u00a0it'(s used only in 1.0 syntax  \n12:51\u00a0<vmassol>\u00a0since we consider 1.0 syntax deprecated we could consider it deprecated  \n12:51\u00a0<vmassol>\u00a0:)  \n12:51\u00a0<+Enygma`>\u00a0I see  \n12:51\u00a0<+Enygma`>\u00a0well, it was not working  \n12:52\u00a0<vmassol>\u00a0let me check that  \n12:53\u00a0<+Enygma`>\u00a0hm... or maybe the huge loading time is only caused by the big number of images that are loaded sequentially :|  \n12:54\u00a0<vmassol>\u00a0tmortagne: works  \n12:56\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* rfc87ad2\u000f \u000f/ xwiki-platform-tools/xwiki-platform-tool-packager-plugin/src/main/java/org/xwiki/tool/packager/PackageMojo.java :\u000f XWIKI-7317: Add \"package\" Mojo to Packager plugin in order to create custom HSQDB/Jetty distributions ...  \n12:57\u00a0<+Enygma`>\u00a0no major improvement (so caching worked before too)  \n12:58\u00a0<vmassol>\u00a0hmm you're right it doesn't seem to work, see http://playground.xwiki.org/xwiki/bin/view/Main/VMA?text=pierre  \n12:58\u00a0<+Enygma`>\u00a0it's not the query itself that is problematic, but the fetching of the images on the page  \n12:58\u00a0<vmassol>\u00a0ah no  \n12:59\u00a0<vmassol>\u00a0I think the request is part of the key :)  \n12:59\u00a0<vmassol>\u00a0changing the content  \n13:00\u00a0<vmassol>\u00a0it works  \n13:00\u00a0<vmassol>\u00a0http://playground.xwiki.org/xwiki/bin/view/Main/VMA  \n13:00\u00a0<vmassol>\u00a0so caching was working  \n13:00\u00a0<+Enygma`>\u00a0yes  \n13:01\u00a0<+Enygma`>\u00a0well, for better or worst, we have one more syntax 2.0 page on xwiki.org :P  \n13:01\u00a0<vmassol>\u00a0yes that's good  \n13:01\u00a0<+Enygma`>\u00a0to improve that page, we need specialized domains for media fetching  \n13:01\u00a0<+Enygma`>\u00a0\\*subdomains  \n13:02\u00a0<+Enygma`>\u00a0so that images can be fetched in paralel  \n13:03\u00a0<+Enygma`>\u00a0anyway... it's a pretty nasty experience to watch such a page load :)  \n13:04\u00a0<vmassol>\u00a0well xwiki.org is not well right now  \n13:04\u00a0<vmassol>\u00a0so it's \"normal\" the page loads slwoly  \n13:04\u00a0<+Enygma`>\u00a0and, come to think of it, that page should not contain References, but Screenshots of XWiki features  \n13:04\u00a0<vmassol>\u00a0it loads much faster when xwiki.org is ok  \n13:04\u00a0<+Enygma`>\u00a0we already have http://www.xwiki.org/xwiki/bin/view/References/WebHome for references  \n13:04\u00a0<vmassol>\u00a0\"Screenshots of XWiki Instances  \n13:04\u00a0<vmassol>\u00a0\"  \n13:05\u00a0<vmassol>\u00a0that's the title  \n13:05\u00a0<+Enygma`>\u00a0yes, but that's not normal since in the QuickLinks it says \"Screenshots\"  \n13:05\u00a0<vmassol>\u00a0but yes would be nice to have both  \n13:05\u00a0<vmassol>\u00a0want to do it? :)  \n13:05\u00a0<+Enygma`>\u00a0when you click on that for a software product, you expect screenshots of the product's features  \n13:05\u00a0<+Enygma`>\u00a0I`ll add the issue :P  \n13:06\u00a0<vmassol>\u00a0ok lunch time for real this time, bbl  \n13:06\u00a0<+Enygma`>\u00a0bon apetit  \n13:06\u00a0<vmassol>\u00a0thxs  \n13:34\u00a0<+tmortagne>\u00a0vmassol: ok cool  \n13:36\u00a0<Agarri\\_FR>\u00a0I've send an email to the users@ mailing list, asking for creation of an account on myxwiki  \n13:36\u00a0<Agarri\\_FR>\u00a0Thanks @cjdelisle for your help  \n13:38\u00a0<@cjdelisle>\u00a0sure thing  \n13:57\u00a0<vmassol>\u00a0hmm seems we have a display issue on http://ci.xwiki.org/job/xwiki-platform/1273/org.xwiki.platform$xwiki-platform-linkchecker-test/testReport/junit/org.xwiki.test.ui.linkchecker/LinkcheckerTest/org\\_xwiki\\_test\\_ui\\_linkchecker\\_LinkcheckerTest/  \n13:57\u00a0<vmassol>\u00a0tmortagne: what should we do? simply restart the agent in the jenkins ui?  \n13:58\u00a0<+tmortagne>\u00a0vmassol: if it's xvnc which crashed yes but I think agent-3 has more issue that that, integration test often fail to start on it  \n13:59\u00a0<vmassol>\u00a0ok trying to rest art the agent using the ui for now  \n14:00\u00a0<vmassol>\u00a0we should probably also update the slave jar at some point  \n14:01\u00a0<vmassol>\u00a0forcing manual build of platform  \n14:04\u00a0<+tmortagne>\u00a0the slave has the same version than the one on agent-1 but it's maybe old too, did not checked  \n14:05\u00a0<Agarri\\_FR>\u00a0has quit  \n14:07\u00a0<Agarri\\_FR>\u00a0has joined #xwiki  \n14:08\u00a0<vmassol>\u00a0tmortagne: found where commons-logging is coming from  \n14:08\u00a0<vmassol>\u00a0it's coming from the linkchecker-test module itself  \n14:09\u00a0<vmassol>\u00a0the package mojo copies all jar deps from the project in additon to the mandatory ones  \n14:09\u00a0<vmassol>\u00a0but there's no filtering on the deps coming from the project  \n14:10\u00a0<+tmortagne>\u00a0ok  \n14:10\u00a0<vmassol>\u00a0I'm going to fix this  \n14:10\u00a0<vmassol>\u00a0I think I'll do an exclude after the resolve  \n14:10\u00a0<vmassol>\u00a0I hope it has the same effect  \n14:10\u00a0<vmassol>\u00a0I'm not sure about transitive deps of excluded deps  \n14:11\u00a0<vmassol>\u00a0hmmm or I can resolve transitively the project deps too even if that is not necessary  \n14:12\u00a0<+tmortagne>\u00a0excelude after the resolve will make the resolve potentially do lots of useless stuff  \n14:12\u00a0<+tmortagne>\u00a0better keeping it  \n14:12\u00a0<vmassol>\u00a0yes  \n14:12\u00a0<vmassol>\u00a0I agree  \n14:16\u00a0<vmassol>\u00a0actually my algo was bad  \n14:16\u00a0<vmassol>\u00a0since we need to resolve them all together in one go  \n14:16\u00a0<vmassol>\u00a0the mandatory ones and the ones from the project  \n14:16\u00a0<vmassol>\u00a0doing this now  \n14:16\u00a0<Agarri\\_FR>\u00a0has quit  \n14:23\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* r0ea8176\u000f \u000f/ xwiki-platform-tools/xwiki-platform-tool-packager-plugin/src/main/java/org/xwiki/tool/packager/PackageMojo.java :\u000f XWIKI-7317: Add \"package\" Mojo to Packager plugin in order to create custom HSQDB/Jetty distributions ...  \n14:26\u00a0<vmassol>\u00a0so that leaves us with:  \n14:26\u00a0<vmassol>\u00a0\\* not the same version of activation, 1.1 instead of 1.1.1  \n14:26\u00a0<vmassol>\u00a0\\* not the same version of jta, 1.1 instead of 1.0.1B  \n14:26\u00a0<vmassol>\u00a0\\* smatgwt-3.0 which is not in XE  \n14:26\u00a0<vmassol>\u00a0\\* validation-api which is not in XE  \n14:26\u00a0<vmassol>\u00a0\\* xercesImpl which is not in XE  \n14:26\u00a0<vmassol>\u00a0\\* xml-api which is not in XE  \n14:28\u00a0<vmassol>\u00a0hmm same problem: http://ci.xwiki.org/job/xwiki-platform/1274/org.xwiki.platform$xwiki-platform-linkchecker-test/testReport/junit/org.xwiki.test.ui.linkchecker/LinkcheckerTest/org\\_xwiki\\_test\\_ui\\_linkchecker\\_LinkcheckerTest/  \n14:28\u00a0<vmassol>\u00a0Xlib: \u00a0extension \"RANDR\" missing on display \":1.0\".  \n14:34\u00a0<Agarri\\_FR>\u00a0has joined #xwiki  \n14:44\u00a0<vmassol>\u00a0I don't think activation 1.1 is an issue. It's \u00a01.1.1 in XE because of the addiitonal jars. We don't require 1.1.1  \n14:44\u00a0<vmassol>\u00a0same for jta  \n14:44\u00a0<vmassol>\u00a0checking smartgwt now  \n14:46\u00a0<vmassol>\u00a0we should really drop it  \n14:46\u00a0<vmassol>\u00a0it's only used for the treeview  \n14:50\u00a0<vmassol>\u00a0can't find where we exclude it though....  \n14:50\u00a0<vmassol>\u00a0I can see we unpack it to get smartclient from it  \n14:50\u00a0<vmassol>\u00a0but I don't see where we exclude it from being in the XE war  \n14:52\u00a0<vmassol>\u00a0unless maven-dependency-plugin removes artifacts being expanded from the artifact list....  \n14:54\u00a0<vmassol>\u00a0jvdrean: ping  \n14:55\u00a0<+tmortagne>\u00a0vmassol: actually I find it weird that we don't have xercesImpl in XE, I don't remember us remomving it, I checked the version when we moved to java 6 and it was still too old for removing xercesImpl  \n14:55\u00a0<vmassol>\u00a0can you confirm that we only need smartgwt at build time similar to gwt-user and gwt-dev?  \n14:56\u00a0<vmassol>\u00a0tmortagne: I think we should use \"provided\" too for smartgwt  \n14:56\u00a0<+tmortagne>\u00a0probably  \n14:57\u00a0<+jvdrean>\u00a0vmassol: pong, I need to check  \n14:57\u00a0<+tmortagne>\u00a0vmassol: looks like th diff tool I used yesterday made a mistake, we have xercesimpl in XE  \n14:57\u00a0<+tmortagne>\u00a0maybe it was not the same version  \n14:57\u00a0<+tmortagne>\u00a0rechecking  \n14:58\u00a0<evalica>\u00a0has joined #xwiki  \n14:59\u00a0<+tmortagne>\u00a0tmortagne: yep that's it I mixed version change and not here for xercesImpl si it's ok I guess  \n14:59\u00a0<+tmortagne>\u00a0well actually no  \n14:59\u00a0<+tmortagne>\u00a0it's not that ok  \n14:59\u00a0<+tmortagne>\u00a0I made the mistake because we actually have both jar in the packager  \n15:00\u00a0<vmassol>\u00a0jvdrean: do you know where we exclude smartgwt from being in the XE war? I can't find where this is done  \n15:00\u00a0<+tmortagne>\u00a0but should be fixed now that you resolve all at once  \n15:00\u00a0<vmassol>\u00a0also do you know where we use the gwt compiler with smartgwt, can find it either  \n15:00\u00a0<vmassol>\u00a0I think I found that one  \n15:01\u00a0<vmassol>\u00a0(if the gwt plugin uses the projects deps)  \n15:01\u00a0<vmassol>\u00a0(in xwiki-platform-wysiwyg)  \n15:02\u00a0<+jvdrean>\u00a0we use it for xwiki-platform-wysiwyg-client  \n15:03\u00a0<+tmortagne>\u00a0vmassol: some stuff I forgot:  \n15:03\u00a0<+tmortagne>\u00a0\\* we have xwiki-platform-gwt dom which is not in XE  \n15:03\u00a0<+tmortagne>\u00a0\\* we have xwiki-platform-user which is not in XE  \n15:03\u00a0<+tmortagne>\u00a0\\* we have xwiki-wysiwyg-plugin-apiwhich is not in XE  \n15:03\u00a0<+tmortagne>\u00a0those are fully converted to js I think  \n15:04\u00a0<+jvdrean>\u00a0and it's required at build time, it's normal not to find the smartgwt jar in XE  \n15:05\u00a0<vmassol>\u00a0jvdrean: I'm marking smartgwt as a provided dep  \n15:05\u00a0<vmassol>\u00a0btw why do we have it in oldcore?  \n15:06\u00a0<vmassol>\u00a0same question for gwt-user, gwt-dev  \n15:06\u00a0<+jvdrean>\u00a0in oldcore ?!  \n15:06\u00a0<vmassol>\u00a0sorry not oldcore platform-core  \n15:06\u00a0<vmassol>\u00a0ah dpemgmt  \n15:08\u00a0<vmassol>\u00a0testing build and then I'll commit  \n15:12\u00a0<+tmortagne>\u00a0s/xwiki-platform-user/xwiki-platform-gwt-user/  \n15:16\u00a0<vmassol>\u00a0jvdrean: when are you going to provide us with a nice treeview that is not using smartgwt? :)  \n15:21\u00a0<+jvdrean>\u00a0hehe :)  \n15:22\u00a0<vmassol>\u00a0come on, use your 20% time! :)  \n16:06\u00a0<vmassol>\u00a0found this in the GWT maven plugin doc:  \n16:06\u00a0<vmassol>\u00a0\"Note : Don't define gwt-dev as project dependency : this JAR only contains gwt SDK tools and has many common libraries packaged that may conflict with the ones defined for your project, resulting in uncomprehensibleNoSuchMethodErrors. The gwt-maven-plugin will automagically resolve the required dependency and add it to classpath when lauching GWT tools.\"  \n16:08\u00a0<vmassol>\u00a0and btw the doc does use \"provided\" as the scope for gwt-user on http://mojo.codehaus.org/gwt-maven-plugin/user-guide/project.html  \n16:08\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:10\u00a0<vmassol>\u00a0actually we need gwt-devs in the depmgmt section  \n16:10\u00a0<vmassol>\u00a0since we use a different version  \n16:11\u00a0<vmassol>\u00a0however I don't think we need to add deps on gwt-user and gwt-devs elswhere than in the depmgmt section  \n16:11\u00a0<vmassol>\u00a0sorry not depmgmt  \n16:11\u00a0<vmassol>\u00a0but pluginmgmt  \n16:11\u00a0<vmassol>\u00a0for the maven gwt plugin  \n16:12\u00a0<vmassol>\u00a0I'll try to remove them  \n16:14\u00a0<vmassol>\u00a0hmm not sure what this comment means:  \n16:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0<!-- We use our custom version of GWT because some dependencies are missing from the gwt-user 2.3.0 POM. -->  \n16:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0<gwt.version>2.4.0</gwt.version>  \n16:17\u00a0<evalica>\u00a0has quit  \n16:17\u00a0<evalica>\u00a0has joined #xwiki  \n16:31\u00a0<+tmortagne>\u00a0vmassol: probably old comment  \n16:32\u00a0<+tmortagne>\u00a0I think we used to have a custom build of gwt-user 2.3  \n16:32\u00a0<vmassol>\u00a0yep that's what I think too  \n16:44\u00a0<xwikibot>\u00a0has joined #xwiki  \n17:22\u00a0<Agarri\\_FR>\u00a0has left #xwiki  \n17:47\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* r182350d\u000f \u000f/ (7 files in 7 dirs):\u000f XWIKI-7342: Dependencies needed by the GWT compiler should never be triggered as transitive dependencies ...  \n18:06\u00a0<CIA-123>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r2df51e2\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-api/src/main/java/org/xwiki/extension/repository/internal/DefaultExtensionRepositoryManager.java :\u000f [misc] Typo - http://git.io/IHEphQ  \n18:41\u00a0<vmassol>\u00a0tmortagne: I'm finishing moving gwt deps as provided scope and then I'll modify the PackageMojo to use the wysiwyg war instead since that's better I think  \n18:41\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* r5dab899\u000f \u000f/ (2 files):\u000f XWIKI-7343: Add MPL2 to the list of known licenses - http://git.io/XHvm8Q  \n18:41\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* rbbaf93b\u000f \u000f/ (12 files in 6 dirs):\u000f XWIKI-7344: Add repository admin UI to validate all extensions in the wiki - http://git.io/dESy5w  \n18:42\u00a0<+tmortagne>\u00a0vmassol: well not sure since WYSIWYG is pretty big and it's not really a minimum requirement for lots of application  \n18:43\u00a0<vmassol>\u00a0well having only part of gwt doesn't make any sense since it's required for the wysiwyg editor  \n18:43\u00a0<vmassol>\u00a0we can decide not to have the wysiwyg editor by default  \n18:43\u00a0<vmassol>\u00a0it's a choice  \n18:44\u00a0<vmassol>\u00a0but I kind of agree that we could make the wysiwyg editor not part of the base  \n18:44\u00a0<vmassol>\u00a0it makes sense  \n18:44\u00a0<vmassol>\u00a0we can remove all its deps once we move to servlet 3.0 too  \n18:44\u00a0<vmassol>\u00a0it's nicer to consider it an extra \"component\"  \n18:44\u00a0<vmassol>\u00a0ie that we can have a runtime without it  \n18:45\u00a0<+tmortagne>\u00a0yep  \n18:45\u00a0<+tmortagne>\u00a0there is wikis that are dedicated to a task which does not require WYSIWYG, like l10n for example  \n18:48\u00a0<evalica>\u00a0has quit  \n18:56\u00a0<tmortagne>\u00a0has quit  \n18:59\u00a0<Enygma`>\u00a0has quit  \n19:00\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* raa0374e\u000f \u000f/ (5 files in 5 dirs):\u000f XWIKI-7342: Dependencies needed by the GWT compiler should never be triggered as transitive dependencies ...  \n19:06\u00a0<gdelhumeau>\u00a0has quit  \n19:08\u00a0<vmassol>\u00a0has quit  \n19:11\u00a0<vmassol>\u00a0has joined #xwiki  \n20:35\u00a0<vmassol>\u00a0sdumitriu: any idea why this happens http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-linkchecker-test/1279/testReport/junit/org.xwiki.test.ui.linkchecker/LinkcheckerTest/org\\_xwiki\\_test\\_ui\\_linkchecker\\_LinkcheckerTest/ ?  \n20:36\u00a0<@sdumitriu>\u00a0Nope  \n20:36\u00a0<vmassol>\u00a0I've disconnected and reconnected the agent through the jenkins ui but it didn't hlep  \n20:42\u00a0<sdumitriu>\u00a0has quit  \n21:23\u00a0<vmassol>\u00a0has quit  \n21:24\u00a0<vmassol>\u00a0has joined #xwiki  \n21:44\u00a0<vmassol>\u00a0has quit  \n22:29\u00a0<eshon\\_>\u00a0has joined #xwiki  \n22:30\u00a0<eshon\\_>\u00a0has left #xwiki  \n22:36\u00a0<jvdrean>\u00a0has quit  \n22:40\u00a0<DrLou>\u00a0has quit  \n22:40\u00a0<DrLou\\_>\u00a0has joined #xwiki  \n22:44\u00a0<eshon\\_>\u00a0has joined #xwiki  \n22:50\u00a0<eshon\\_>\u00a0has left #xwiki  \n23:19\u00a0<sburjan`>\u00a0has joined #xwiki  \n23:55\u00a0<sdumitriu>\u00a0has joined #xwiki  \n\n"}