{"id": "dev:IRC.xwikiArchive20121102", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20121102", "title": "IRC Archive for channel #xwiki on 02 November 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<xwikibot>\u00a0has joined #xwiki  \n11:45\u00a0<vmassol>\u00a0has quit  \n11:57\u00a0<mrvanes>\u00a0has joined #xwiki  \n12:10\u00a0<jvdrean>\u00a0has joined #xwiki  \n12:10\u00a0<Enygma`1>\u00a0has joined #xwiki  \n12:13\u00a0<Enygma`>\u00a0has quit  \n12:13\u00a0<vmassol>\u00a0has joined #xwiki  \n12:13\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:13\u00a0<tmortagne>\u00a0guys, some quick votes on dev mailing list  \n12:14\u00a0<Enygma`1>\u00a0has quit  \n12:14\u00a0<xwiki\\_novice>\u00a0has joined #xwiki  \n12:17\u00a0<evalica>\u00a0mflorea: can tmortagne restart a bit xwiki.org to see if it fixes the {{contributors}} macro problem, or are you still working on it now and you need it?  \n12:17\u00a0<vmassol>\u00a0has quit  \n12:43\u00a0<jvdrean>\u00a0has left #xwiki  \n12:44\u00a0<vmassol>\u00a0has joined #xwiki  \n12:48\u00a0<vmassol>\u00a0has quit  \n13:15\u00a0<vmassol>\u00a0has joined #xwiki  \n13:19\u00a0<vmassol>\u00a0has quit  \n13:24\u00a0<Enygma`>\u00a0has quit  \n13:30\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:46\u00a0<vmassol>\u00a0has joined #xwiki  \n13:50\u00a0<vmassol>\u00a0has quit  \n14:17\u00a0<vmassol>\u00a0has joined #xwiki  \n14:20\u00a0<mflorea>\u00a0has quit  \n14:20\u00a0<fmancinelli>\u00a0has quit  \n14:20\u00a0<fmancinelli>\u00a0has joined #xwiki  \n14:21\u00a0<fmancinelli\\_>\u00a0has joined #xwiki  \n14:22\u00a0<vmassol>\u00a0has quit  \n14:23\u00a0<fmancinelli>\u00a0guys what is the URI for accessing to subwikis?  \n14:37\u00a0<tmortagne>\u00a0fmancinelli: http://platform.xwiki.org/xwiki/bin/view/AdminGuide/AccessWiki  \n14:38\u00a0<tmortagne>\u00a0not sure I understand you question but you should find everything about how to access any wiki here  \n14:39\u00a0<xwiki\\_novice>\u00a0has quit  \n14:39\u00a0<xwiki\\_novice>\u00a0has joined #xwiki  \n14:44\u00a0<fmancinelli>\u00a0yep this /xwiki/wiki/subwiki/view/...  \n14:44\u00a0<fmancinelli>\u00a0thanks  \n14:47\u00a0<fmancinelli>\u00a0Does this ring a bell? 2012-11-02 14:46:41,522 [Lucene Index Rebuilder] ERROR c.x.x.p.l.IndexRebuilder \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- Error in lucene rebuild thread: Invalid locale format:  \n14:47\u00a0<fmancinelli>\u00a0java.lang.IllegalArgumentException: Invalid locale format:  \n14:47\u00a0<fmancinelli> at org.apache.commons.lang3.LocaleUtils.toLocale(LocaleUtils.java:94) ~[commons-lang3-3.1.jar:3.1]  \n14:48\u00a0<fmancinelli>\u00a0and similarly java.lang.IllegalArgumentException: Invalid locale format: default  \n14:48\u00a0<vmassol>\u00a0has joined #xwiki  \n14:51\u00a0<fmancinelli>\u00a0context: I am using the xwiki-idea integration. yesterday everything was fine, but today every message is gone (no label/message is displayed anywhere, I only have icons)  \n14:51\u00a0<fmancinelli>\u00a0I think that the exception I pasted might be related  \n14:53\u00a0<vmassol>\u00a0has quit  \n15:08\u00a0<tmortagne>\u00a0fmancinelli: this is probably caused by the refactor I did  \n15:09\u00a0<tmortagne>\u00a0I changed String based language API to Locale based APIs  \n15:09\u00a0<tmortagne>\u00a0looks like \"default\" is not very nice  \n15:09\u00a0<tmortagne>\u00a0finishing something related and I will look at it  \n15:11\u00a0<tmortagne>\u00a0fmancinelli: could you give me a bigger stack trace  \n15:12\u00a0<tmortagne>\u00a0I want to know here \"default\" is set as language  \n15:12\u00a0<fmancinelli>\u00a0http://pastebin.com/nduX3V4A  \n15:13\u00a0<tmortagne>\u00a0I found it actually  \n15:13\u00a0<tmortagne>\u00a0but I don't understand why \"default\"  \n15:13\u00a0<tmortagne>\u00a0it does not make much sense as a language  \n15:13\u00a0<tmortagne>\u00a0empty string wy not  \n15:13\u00a0<tmortagne>\u00a0but \"default\"...  \n15:14\u00a0<fmancinelli>\u00a0keep in mind that it could be a glitch of Idea that is messing up somehow (I downloaded the latest build and it seems to work fine)  \n15:15\u00a0<tmortagne>\u00a0fmancinelli: no it seems to be a real thing  \n15:15\u00a0<tmortagne>\u00a0crap  \n15:15\u00a0<tmortagne>\u00a0impossible to convert that to a Locale  \n15:16\u00a0<tmortagne>\u00a0need to find some retro compatibility trick  \n15:19\u00a0<vmassol>\u00a0has joined #xwiki  \n15:19\u00a0<polx>\u00a0has quit  \n15:22\u00a0<polx>\u00a0has joined #xwiki  \n15:24\u00a0<tmortagne>\u00a0fmancinelli: should be a it better now  \n15:24\u00a0<tmortagne>\u00a0master is still a bit unstable since I merged localization branch  \n15:24\u00a0<vmassol>\u00a0has quit  \n15:27\u00a0<mflorea>\u00a0has joined #xwiki  \n15:39\u00a0<Enygma`>\u00a0has quit  \n15:40\u00a0<Enygma`>\u00a0has joined #xwiki  \n15:40\u00a0<Enygma`>\u00a0has quit  \n15:40\u00a0<Enygma`1>\u00a0has joined #xwiki  \n15:51\u00a0<vmassol>\u00a0has joined #xwiki  \n15:56\u00a0<vmassol>\u00a0has quit  \n15:58\u00a0<Enygma`1>\u00a0has quit  \n16:01\u00a0<Enygma`>\u00a0has joined #xwiki  \n16:12\u00a0<xwikibot>\u00a0has joined #xwiki  \n16:22\u00a0<vmassol>\u00a0has joined #xwiki  \n16:24\u00a0<xwiki\\_novice>\u00a0has quit  \n16:27\u00a0<xwikibot>\u00a0has joined #xwiki  \n16:29\u00a0<fmancinelli>\u00a0Enygma`, this is for you :) I am trying to build xwiki-platform locally but it fails on XWiki Platform - Workspace - UI with the following error: http://pastebin.com/efipVYJm  \n16:29\u00a0<fmancinelli>\u00a0any hint?  \n16:30\u00a0<fmancinelli>\u00a0looks like I am missing some repos  \n16:31\u00a0<tmortagne>\u00a0fmancinelli: you have everything needed in setting.xml ?  \n16:31\u00a0<fmancinelli>\u00a0I am checking it but it seems to be ok  \n16:31\u00a0<tmortagne>\u00a0I mean what's on http://dev.xwiki.org/xwiki/bin/view/Community/Building  \n16:32\u00a0<fmancinelli>\u00a0I always used that (unless it has changed recently)  \n16:33\u00a0<fmancinelli>\u00a0let me re-copy paste just to be sure  \n16:34\u00a0<xwiki\\_novice>\u00a0has joined #xwiki  \n16:36\u00a0<fmancinelli>\u00a0seems to be ok now  \n16:41\u00a0<tmortagne>\u00a0fmancinelli: maybe you had maven.xwiki.org instead of the nexus repository  \n16:42\u00a0<tmortagne>\u00a0it's not exactly what I would call recent but it used to be only maven.xwiki.org at some point  \n16:42\u00a0<Enygma`>\u00a0has quit  \n16:44\u00a0<Enygma`>\u00a0has joined #xwiki  \n16:49\u00a0<mrvanes\\_>\u00a0has joined #xwiki  \n16:50\u00a0<mrvanes>\u00a0has quit  \n16:53\u00a0<vmassol>\u00a0has joined #xwiki  \n16:57\u00a0<vmassol>\u00a0has quit  \n17:11\u00a0<sburjan>\u00a0has quit  \n17:20\u00a0<Slashman>\u00a0has quit  \n17:22\u00a0<fmancinelli>\u00a0recompiled everything but still have the problem when running inside idea :|  \n17:23\u00a0<tmortagne>\u00a0fmancinelli: which one ?  \n17:24\u00a0<vmassol>\u00a0has joined #xwiki  \n17:24\u00a0<fmancinelli>\u00a0the thing you were supposed to fix, the locale exception and the xwiki without any string displayed (only icons)  \n17:26\u00a0<fmancinelli>\u00a0ah  \n17:26\u00a0<fmancinelli>\u00a0you did something also in commons  \n17:26\u00a0<fmancinelli>\u00a0maybe that's the cause (because I had recompiled platform from scratch, removing also my .m2/repository  \n17:27\u00a0<tmortagne>\u00a0fmancinelli: no what's in commons i something else  \n17:27\u00a0<tmortagne>\u00a0if you have new oldcore I don't see how you have have the exact same error  \n17:28\u00a0<tmortagne>\u00a0you may have other issue, that's possible  \n17:28\u00a0<vmassol>\u00a0has quit  \n17:28\u00a0<fmancinelli>\u00a0I am recompiling again with an empty .m2/repository  \n17:29\u00a0<tmortagne>\u00a0fmancinelli: the only thing that you really need to build is oldcore  \n17:29\u00a0<tmortagne>\u00a0you sure you pulled ?  \n17:29\u00a0<tmortagne>\u00a0(for tis error at least)  \n17:29\u00a0<fmancinelli>\u00a0I am working in a branch and the last commit from master I merged is this: commit 969ac509139994f207ea63cd1316583fa4eb8380  \n17:29\u00a0<fmancinelli>\u00a0Date: \u00a0\u00a0Fri Nov 2 16:39:35 2012 +0100  \n17:29\u00a0<fmancinelli>\u00a0\u00a0\u00a0\u00a0\u00a0\\* add required security module to default package  \n17:31\u00a0<fmancinelli>\u00a0ok, merged your very last commits  \n17:31\u00a0<fmancinelli>\u00a0last is 571697854a30f4563ac0414de80f81bced8c4e80  \n17:32\u00a0<tmortagne>\u00a0this last commit was not required  \n17:32\u00a0<evalica1>\u00a0has joined #xwiki  \n17:32\u00a0<evalica>\u00a0has quit  \n17:32\u00a0<fmancinelli>\u00a0ok, but it's just to say that i'm up-to-date... let's see  \n17:37\u00a0<xwikibot>\u00a0has joined #xwiki  \n17:50\u00a0<fmancinelli>\u00a0strange  \n17:50\u00a0<fmancinelli>\u00a0there is always a glitch at workspace-ui. restarting the build from there makes it disappear  \n17:50\u00a0<fmancinelli>\u00a0I can't manage to build platform in one shot  \n17:52\u00a0<xwikibot>\u00a0has joined #xwiki  \n17:52\u00a0<tmortagne>\u00a0I know there is some issue with 3.0.3 on jenkins agents  \n17:53\u00a0<fmancinelli>\u00a03.04  \n17:53\u00a0<tmortagne>\u00a0(and works well with 3.0.4)  \n17:53\u00a0<tmortagne>\u00a0ok  \n17:53\u00a0<fmancinelli>\u00a03.0.4  \n17:53\u00a0<fmancinelli>\u00a0with oracle JDK  \n17:53\u00a0<tmortagne>\u00a06 or 7 ?  \n17:53\u00a0<fmancinelli>\u00a07  \n17:54\u00a0<polx>\u00a0has quit  \n17:54\u00a0<fmancinelli>\u00a0Java version: 1.7.0\\_09, vendor: Oracle Corporation  \n17:55\u00a0<vmassol>\u00a0has joined #xwiki  \n17:55\u00a0<abusenius>\u00a0has quit  \n17:58\u00a0<fmancinelli>\u00a0f\\*ck no way. still the same result :|  \n17:59\u00a0<fmancinelli>\u00a0I give up  \n17:59\u00a0<fmancinelli>\u00a0maybe idea has some jars cached somewhere  \n18:00\u00a0<vmassol>\u00a0has quit  \n18:02\u00a0<fmancinelli>\u00a0ah... question: does anything changed wrt to resources in the webapp? maybe there are some resources missing in my webapp.  \n18:02\u00a0<fmancinelli>\u00a0btw the lucene error is still there: java.lang.IllegalArgumentException: Invalid locale format: default  \n18:02\u00a0<fmancinelli> at com.xpn.xwiki.doc.XWikiDocument.getTranslatedDocument(XWikiDocument.java:5408) ~[xwiki-platform-oldcore-4.3-SNAPSHOT.jar:na]  \n18:03\u00a0<fmancinelli>\u00a0and also  \n18:03\u00a0<fmancinelli>\u00a0java.lang.IllegalArgumentException: Invalid locale format: default  \n18:03\u00a0<fmancinelli> at org.apache.commons.lang3.LocaleUtils.toLocale(LocaleUtils.java:105) ~[commons-lang3-3.1.jar:3.1]  \n18:03\u00a0<fmancinelli> at com.xpn.xwiki.doc.XWikiDocument.getTranslatedDocument(XWikiDocument.java:5408) ~[xwiki-platform-oldcore-4.3-SNAPSHOT.jar:na]  \n18:03\u00a0<fmancinelli>\u00a0sorry ava.lang.IllegalArgumentException: Invalid locale format:  \n18:03\u00a0<fmancinelli> at com.xpn.xwiki.doc.XWikiDocument.getTranslatedDocument(XWikiDocument.java:5408) ~[xwiki-platform-oldcore-4.3-SNAPSHOT.jar:na]  \n18:04\u00a0<tmortagne>\u00a0fixed one getTranslatedDocument but not thee other it seems  \n18:06\u00a0<fmancinelli>\u00a0what I don't understand is why I don't have any string displayed in my XWiki  \n18:07\u00a0<fmancinelli>\u00a0I am building enterprise to see if the .zip distribution works fine  \n18:08\u00a0<tmortagne>\u00a0fmancinelli: fixed  \n18:09\u00a0<tmortagne>\u00a0by no string you mean no string or no translation ?  \n18:09\u00a0<tmortagne>\u00a0as I told you I just merged the new localization module today  \n18:09\u00a0<tmortagne>\u00a0so there might be another issue in your setup  \n18:10\u00a0<fmancinelli>\u00a0no string = any text. for example in the top level menus I just see icons  \n18:10\u00a0<tmortagne>\u00a0ok but thoses are translations  \n18:11\u00a0<tmortagne>\u00a0you don't have anything in the log related ?  \n18:11\u00a0<fmancinelli>\u00a0nope, just those lucene errors  \n18:13\u00a0<tmortagne>\u00a0fmancinelli: if you can debug now would be nice if you could look at what is happening in XWikiMessageTool#get(String key)  \n18:14\u00a0<tmortagne>\u00a0I still have some stuff to stabilize on my side  \n18:14\u00a0<abusenius>\u00a0has joined #xwiki  \n18:14\u00a0<fmancinelli>\u00a0let idea finish to update dependencies and I will run it again  \n18:14\u00a0<tmortagne>\u00a0I have some unit tests for it but there might be missing use case  \n18:15\u00a0<fmancinelli>\u00a0ok, I've built enterprise  \n18:16\u00a0<fmancinelli>\u00a0and I get the same exception for lucene  \n18:16\u00a0<fmancinelli>\u00a0but that's before your commit  \n18:16\u00a0<fmancinelli>\u00a0recompiling oldcore is enough, right?  \n18:22\u00a0<fmancinelli>\u00a0btw this is my xwiki-enterprise-jetty-hsqldb built just before your last commit: http://tinypic.com/view.php?pic=1z6qplf&s=6  \n18:23\u00a0<tmortagne>\u00a0fmancinelli: yes the issue is in XWikiDocument only so rebuilding oldcore is enough  \n18:24\u00a0<fmancinelli>\u00a0ok  \n18:24\u00a0<fmancinelli>\u00a0better  \n18:24\u00a0<fmancinelli>\u00a0now I have strings :)  \n18:24\u00a0<tmortagne>\u00a0as for the XE deistribution comming from jenkins I'm not sure it's perfectly up to date since platfor had build issues all day long  \n18:24\u00a0<tmortagne>\u00a0ok cool  \n18:24\u00a0<tmortagne>\u00a0I'm still working on all that  \n18:24\u00a0<fmancinelli>\u00a0but I see message keys  \n18:24\u00a0<fmancinelli>\u00a0everywhere like the image I posted  \n18:24\u00a0<tmortagne>\u00a0I may have been a bit optimistic when I refactored String to Locale APIs ;)  \n18:25\u00a0<fmancinelli>\u00a0anyway now at least I can click on login :)  \n18:25\u00a0<tmortagne>\u00a0fmancinelli: it very possible you are missing some jars  \n18:25\u00a0<tmortagne>\u00a0so you have xwiki-platform-localization-legacy for example ?  \n18:25\u00a0<fmancinelli>\u00a0let me check  \n18:26\u00a0<tmortagne>\u00a0it's where the gathering of ApplicationResources translations is done  \n18:26\u00a0<vmassol>\u00a0has joined #xwiki  \n18:26\u00a0<fmancinelli>\u00a0nope  \n18:27\u00a0<fmancinelli>\u00a0it's also missing from the .zip I built from enterprise  \n18:27\u00a0<tmortagne>\u00a0XE pom.xml has it but I doubt it has been rebuilded since  \n18:28\u00a0<tmortagne>\u00a0by jenkins I mean  \n18:28\u00a0<tmortagne>\u00a0make sure to build XE war yourself  \n18:29\u00a0<fmancinelli>\u00a0xwiki-enterprise-web?  \n18:29\u00a0<tmortagne>\u00a0yep  \n18:29\u00a0<tmortagne>\u00a0you should have the licalization modules listed as dependencies there  \n18:29\u00a0<fmancinelli>\u00a0ahhhhhhh  \n18:30\u00a0<tmortagne>\u00a0but I think jenkins did not built it because of platform build issues  \n18:30\u00a0<vmassol>\u00a0has quit  \n18:33\u00a0<fmancinelli>\u00a0ok that's was the problem  \n18:33\u00a0<fmancinelli>\u00a0I forgot to pull in enterprise  \n18:34\u00a0<fmancinelli>\u00a0and I have to add these new jars in xwiki-debug-{idea,eclipse}  \n18:34\u00a0<fmancinelli>\u00a0I am pretty sure that now it will work  \n18:37\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:41\u00a0<fmancinelli>\u00a0hmmm  \n18:43\u00a0<fmancinelli>\u00a0jars are there (localization-\\*.jar) but I have relost all the translations (I only see icons).  \n18:43\u00a0<fmancinelli>\u00a0I am talking about xwiki-enterprise  \n18:50\u00a0<tmortagne>\u00a0fmancinelli: can you try to debug XWikiMessageTool to understand what is happenning exactly ?  \n18:52\u00a0<fmancinelli>\u00a0yep, let me import oldcore in the IDE  \n18:52\u00a0<tmortagne>\u00a0I'm almost done on my side fixing last issues, will try xwiki-debug-eclipse  \n18:55\u00a0<fmancinelli>\u00a0the method where things happen is get(), right?  \n18:55\u00a0<tmortagne>\u00a0yep  \n18:55\u00a0<xwiki\\_novice>\u00a0has quit  \n18:57\u00a0<vmassol>\u00a0has joined #xwiki  \n19:01\u00a0<vmassol>\u00a0has quit  \n19:12\u00a0<xwikibot>\u00a0has joined #xwiki  \n19:14\u00a0<evalica1>\u00a0has quit  \n19:21\u00a0<Enygma`>\u00a0has quit  \n19:28\u00a0<vmassol>\u00a0has joined #xwiki  \n19:32\u00a0<vmassol>\u00a0has quit  \n19:54\u00a0<tmortagne>\u00a0has quit  \n19:59\u00a0<vmassol>\u00a0has joined #xwiki  \n20:03\u00a0<vmassol>\u00a0has quit  \n20:14\u00a0<npm>\u00a0has joined #xwiki  \n20:30\u00a0<vmassol>\u00a0has joined #xwiki  \n20:34\u00a0<vmassol>\u00a0has quit  \n20:45\u00a0<fmancinelli>\u00a0has quit  \n20:45\u00a0<fmancinelli\\_>\u00a0has quit  \n21:02\u00a0<vmassol>\u00a0has joined #xwiki  \n21:06\u00a0<vmassol>\u00a0has quit  \n21:33\u00a0<vmassol>\u00a0has joined #xwiki  \n21:37\u00a0<vmassol>\u00a0has quit  \n22:04\u00a0<vmassol>\u00a0has joined #xwiki  \n22:05\u00a0<mrvanes\\_>\u00a0has quit  \n22:09\u00a0<vmassol>\u00a0has quit  \n22:24\u00a0<xwiki\\_novice>\u00a0has joined #xwiki  \n22:32\u00a0<cjd>\u00a0has quit  \n22:35\u00a0<vmassol>\u00a0has joined #xwiki  \n22:39\u00a0<fmancinelli>\u00a0has joined #xwiki  \n22:40\u00a0<vmassol>\u00a0has quit  \n22:40\u00a0<xwiki\\_novice>\u00a0has quit  \n22:42\u00a0<fmancinelli\\_>\u00a0has joined #xwiki  \n22:48\u00a0<jvelo>\u00a0has joined #xwiki  \n23:07\u00a0<vmassol>\u00a0has joined #xwiki  \n23:11\u00a0<vmassol>\u00a0has quit  \n23:22\u00a0<xwikibot>\u00a0has joined #xwiki  \n23:42\u00a0<xwikibot>\u00a0has joined #xwiki  \n23:43\u00a0<vmassol>\u00a0has quit  \n23:57\u00a0<xwikibot>\u00a0has joined #xwiki\n"}