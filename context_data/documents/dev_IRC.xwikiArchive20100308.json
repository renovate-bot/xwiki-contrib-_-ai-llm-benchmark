{"id": "dev:IRC.xwikiArchive20100308", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100308", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nmarta1 left at 00:14 (Quit: Leaving.  \nvmassol left at 00:23 (Quit: Leaving.  \nsdumitriu left at 00:59 (Ping timeout: 246 seconds  \nLadySerena joined #xwiki at 03:10  \nLadySerena - (03:12): what would cause this to happen? http://varus.felinewith.me/resources/js/prototype.js  \nMichelleShi\\_ joined #xwiki at 03:30  \nCalebJamesDeLisl - (03:32): Getting lots of connection refused and bad gateway, is it constantly resetting?  \nLadySerena - (03:32): something about clearing the cache  \nLadySerena - (03:33): for some reason XWiki is no longer sourcing the static files, its just giving blank pages  \nLadySerena - (03:33): and that caused a recursive loop in the SSI handler  \nCalebJamesDeLisl - (03:34): That stuff isn't really handled by XWiki, it's the container. A possible workaround might be /bin/skin/js/prototype.js  \nCalebJamesDeLisl - (03:34): That uses XWiki to get the file.  \nLadySerena - (03:35): dammit  \nCalebJamesDeLisl - (03:36): Just wget'd the main page, knock it over?  \nLadySerena - (03:40): ...  \nCalebJamesDeLisl - (03:40): Ahh , there's a loop in there.  \nLadySerena - (03:40): ya, the SSI handler  \nMichelleShi\\_ left at 03:42 (Quit: Leaving  \ndaning joined #xwiki at 03:43  \nnickless left at 03:44 (Quit: Leaving  \nLadySerena - (03:44): somehow the xwiki.html for the XWiki button in the top got overwritten  \nCalebJamesDeLisl - (03:47): How were you calling it? \u00a0If the page is missing, XWiki will throw a \"page not found\" page which might then pull in the missing page again.  \nLadySerena - (03:51): <!-- # include file=\"/xwiki.html\" -->  \nCalebJamesDeLisl - (03:52): That'll do it. (if xwiki.html is missing.)  \nLadySerena - (03:52): or somehow gets overwritten  \nLadySerena - (03:52): damn  \nLadySerena - (03:52): same thing happened to projectwonderful.html  \nCalebJamesDeLisl - (03:55): You have one more include just below the search button.  \nCalebJamesDeLisl - (03:55): Not looping forever, only three times...  \nCalebJamesDeLisl - (03:56): (maybe that one is projectwonderful...)  \nLadySerena - (03:57): the XWiki|Powered badge is /xwiki.html  \nLadySerena - (03:58): and the ad banner in the center is /projectwonderful.html  \nCalebJamesDeLisl - (04:00): okay this works... http://varus.felinewith.me/bin/skin/resources/js/prototype/prototype.js \u00a0\u00a0now checking direct from glassfish.  \nLadySerena - (04:01): interesting  \nCalebJamesDeLisl - (04:03): I see.  \nCalebJamesDeLisl - (04:03): Been trying to get rid of /bin/ ? :)  \nLadySerena - (04:04): yep  \nCalebJamesDeLisl - (04:05): if you don't specify an action after /bin/ then it assumes view.  \nLadySerena - (04:05): well ya  \nCalebJamesDeLisl - (04:06): so xwiki/bin/Space/Page \u00a0is read as xwiki/bin/view/Space/Page  \nLadySerena - (04:06): thing is, I did the URL shortening MONTHS ago  \nCalebJamesDeLisl - (04:06): Hmm.  \nLadySerena - (04:06): it was only today when I cleared the caches it started screwing up and sourcing pages instead of images or javascripts  \nCalebJamesDeLisl - (04:06): Could caches persist that long?  \nLadySerena - (04:07): one is a cache, the other is a store  \nLadySerena - (04:07): today I cleared the webserver's cache and wiped the common store  \nLadySerena - (04:10): [jlhawkwell@varus-www:/usr/local/www/java/common] sudo rm -r bin resources skins  \nCalebJamesDeLisl - (04:16): I get the same page from /bin/resources/js/prototype/prototype.js  \nLadySerena - (04:16): try taking the /bin off?  \nLadySerena - (04:16): well, when GF comes back up  \nCalebJamesDeLisl - (04:17): Same with or without the /bin/  \nLadySerena - (04:20): hmm  \nLadySerena - (04:20): now this IS interesting  \nCalebJamesDeLisl - (04:20): ??  \nLadySerena - (04:21): xwiki.html got overwritten again  \nCalebJamesDeLisl - (04:22): With what? An XWiki page?  \nLadySerena - (04:22): ya  \nLadySerena - (04:22): I dun get it  \nCalebJamesDeLisl - (04:22): On the filesystem?!  \nLadySerena - (04:22): ya  \nLadySerena - (04:22): wrf  \nLadySerena - (04:23): \\*wtf  \nLadySerena - (04:23): WHISKEY TANGO FOXTROT, OVER?  \nCalebJamesDeLisl - (04:23): lol, never heard that one...  \nCalebJamesDeLisl - (04:25): I suppose you could chmod 744  \nLadySerena - (04:25): it was root:root 444  \nLadySerena - (04:25): somehow nginx made it www:root 644  \nCalebJamesDeLisl - (04:25): nginx has root?  \nLadySerena - (04:26): no, its supposed to be running as www:www  \nLadySerena - (04:26): which is 80:80 on FreeBSD  \nCalebJamesDeLisl - (04:27): I got pwnd by BSD playing cuwin.  \nCalebJamesDeLisl - (04:28): s/playing/playing with/  \nCalebJamesDeLisl - (04:29): Does nginx get started in the init script then su to www? It could be changing files before it su's.  \nLadySerena - (04:30): it starts as root and then drops  \nCalebJamesDeLisl - (04:30): Maybe a good idea to make an init script to drop then start (if possible)  \nLadySerena - (04:31): nuuu, it can only bind to port 80 with root privs  \nCalebJamesDeLisl - (04:31): iptables?  \nCalebJamesDeLisl - (04:31): redirect to 8080  \nLadySerena - (04:32): ipfw  \nLadySerena - (04:32): but I don't think that's configured  \nLadySerena - (04:32): dammit again!  \nCalebJamesDeLisl - (04:35): does /bin/skin/resources/js/prototype/prototype.js overwrite it?  \nLadySerena - (04:35): dunno, try it?  \nCalebJamesDeLisl - (04:35): (might be because xwiki.html is pulled in to each page...)  \nLadySerena - (04:36): it ran like that fine for weeks  \nCalebJamesDeLisl - (04:36): Murphy's law  \nCalebJamesDeLisl - (04:38): oops pulled the wrong page, probably overwrote it.  \nLadySerena - (04:38): nuuu  \nLadySerena - (04:38): ya didn't  \nCalebJamesDeLisl - (04:40): Hmm. Probably because I pulled a page which is in the cache.  \nLadySerena - (04:40): probably  \nCalebJamesDeLisl - (04:40): http://varus.felinewith.me/bin/resources/js/prototype/prototype.js  \nLadySerena - (04:40): o.O  \nLadySerena - (04:41): yea, that  \nLadySerena - (04:41): why does it do that?  \nCalebJamesDeLisl - (04:42): On localhost I get a 'contact your admin' error with that url.  \nLadySerena - (04:42): o.O  \nLadySerena - (04:42): O.o  \nLadySerena - (04:42): on yer vanilla installation of XWiki?  \nCalebJamesDeLisl - (04:43): (but I'm not running root webapp.) \u00a0yes vanilla (but 2.3 trunk)  \nLadySerena - (04:43): heh  \nLadySerena - (04:43): actually, PHP and Java (GlassFish/XWiki) are on a separate host from nginx  \nCalebJamesDeLisl - (04:55): Maybe it doesn't know the context is view.  \nCalebJamesDeLisl - (04:55): s/context/action/  \nCalebJamesDeLisl - (04:57): http://varus.felinewith.me/view/resources/js/prototype/prototype.js gives what I would expect  \nLadySerena - (04:58): but I have this in my xwiki.cfg  \nLadySerena - (04:58): xwiki.unknownActionResponse=view  \nCalebJamesDeLisl - (05:02): I expect not to get prototype.js but still not sure why it gives you an empty page instead of \"page not found\"  \nLadySerena - (05:02): neither am I  \nLadySerena - (05:07): my config files are here: http://ladyserenakitty.com/?viewer=attachments  \nLadySerena - (05:08): in the meantime, I'm just going to copy all the static files to the webserver  \nCalebJamesDeLisl - (05:09): The action is 'unknown'  \nLadySerena - (05:09): so it should default to \"view\" since that's what the xwiki.unknownActionResponse directive should tell it  \nCalebJamesDeLisl - (05:11): I have to look where that gets used, maybe it doesn't change the action to view but just try to treat it as view.  \nCalebJamesDeLisl - (05:11): or use the view template.  \nLadySerena - (05:11): hmm  \nLadySerena - (05:11): it seems perhaps through my fuckery we have found a new bug  \nCalebJamesDeLisl - (05:12): You can get it working right now by rewriting /resources/\\* to /bin/skin/resources/\\*  \nLadySerena - (05:12): hmm  \nCalebJamesDeLisl - (05:13): Have to do some more find-grepping to see where that unknownActionResponse gets used...  \nLadySerena - (05:17): okay, that fixed the images  \nLadySerena - (05:18): whoa, looks like all the javascripts are in /resources/  \nCalebJamesDeLisl - (05:19): Cool. On my end it indeed looks like a bug but I'm not sure how quickly it can be fixed because it's relatively dangerous.  \nCalebJamesDeLisl - (05:19): Actually there might be a safe way to fix...  \nLadySerena - (05:20): well, until its fixed: http://twitter.com/VarusOnline/status/10154622385  \nCalebJamesDeLisl - (05:21): killall firefox \u00a0\u00a0\u00a0for like the 10th time...  \nLadySerena - (05:21): omg  \nLadySerena - (05:21): get Chrome  \nLadySerena - (05:22): I switched to Safari because it used less memory than Firefox  \nLadySerena - (05:22): then I switched to Chrome because it uses less memory than Safari  \nCalebJamesDeLisl - (05:22): noscript.  \nLadySerena - (05:22): ohs  \nCalebJamesDeLisl - (05:23): Doesn't help that it's 3.0.10  \nLadySerena - (05:24): D:  \nLadySerena - (05:25): OpenSolaris 2010.03 (snv\\_133) has Firefox 3.5.7 in IPS  \nCalebJamesDeLisl - (05:26): I have 3.5 on the desktop but 10,000 addons and all, updating doesn't sound fun.  \nLadySerena - (05:26): http://varus.felinewith.me/General/vCoreSystem  \nCalebJamesDeLisl - (05:27): Neat.  \nLadySerena - (05:28): yep  \nLadySerena - (05:28): that \"Central Login Service\" that page speaks of is really just going to be an LDAP server  \nLadySerena - (05:29): but have to say things in ways non-geeks will understand, and they understand \"Central Login Service\"  \nCalebJamesDeLisl - (05:30): I remember you asking about LDAP. How did installing it go?  \nLadySerena - (05:30): installing it was a breeze  \nLadySerena - (05:30): THEN I found out OpenDS is in IPS  \nLadySerena - (05:31): only after I had already downloaded and installed OpenDS manually  \nCalebJamesDeLisl - (05:31): IPS=repository?  \nLadySerena - (05:31): yep  \nCalebJamesDeLisl - (05:31): I did that with maven, building maven is hard.  \nLadySerena - (05:32): my database server is going to stay on pkg.opensolaris.org/release/  \nCalebJamesDeLisl - (05:33): Never used Solaris, Been using Fedora since it was Redhat6.1  \nLadySerena - (05:33): I used Solaris for a bit, but there really wasn't much in its IPS repo  \nLadySerena - (05:33): didn't have all the software I need  \nLadySerena - (05:34): so I switched to OpenSolaris, which has a bigger IPS repo and more of the software I need  \nLadySerena - (05:34): IPS = Image Packaging System  \nCalebJamesDeLisl - (05:34): Ahh, there's a difference (shows what I know).  \nCalebJamesDeLisl - (05:35): I've been working on getting the action system to be componentized so we can dump struts and hopefully improve page load time. So far it's a design proposal.  \nCalebJamesDeLisl - (05:36): http://dev.xwiki.org/xwiki/bin/view/Design/ActionModule  \nLadySerena - (05:45): yea, I remember a lot of that talk, too  \nLadySerena - (05:46): somehow it looks as though I managed to entirely get rid of /bin/  \nCalebJamesDeLisl - (05:46): Congratulations. just don't make a space called \"bin\" ;)  \nLadySerena - (05:47): ya, no kiddin'  \nCalebJamesDeLisl - (05:47): (actually that might be okay if it's rewritten as /bin/bin/ so then no space called \"view\")  \nLadySerena - (05:48): also, I managed to get a system-wide filter in GlassFish that fixes the IP address  \nCalebJamesDeLisl - (05:48): You mean fixes the links?  \nLadySerena - (05:48): nuuu, fixes the remoteAddr  \nLadySerena - (05:48): http://ladyserenakitty.com/RemoteIPTest/  \nLadySerena - (05:49): (that's a test servlet I wrote)  \nLadySerena - (05:49): before I added the filter, GlassFish saw all requests as coming from 10.25.1.2 (the IP of the web server)  \nCalebJamesDeLisl - (05:49): Ahh.  \nLadySerena - (05:52): yea, nginx sends a header called X-Real-IP with the client's actual IP address to the proxy backend  \nLadySerena - (05:52): you can see it in my nginx.conf  \nCalebJamesDeLisl - (05:53): I don't know much about nginx.  \nLadySerena - (05:54): well its faster than Cherokee  \nLadySerena - (05:54): and Cherokee was faster than lighttpd  \nLadySerena - (05:54): and lighttpd was faster than Apache  \nCalebJamesDeLisl - (05:55): So it's a cache and an http server?  \nLadySerena - (05:56): yep  \nLadySerena - (05:56): lighttpd did not support proxying, it was only direct-serve, fastcgi, or proxy  \nLadySerena - (05:57): \\* it didn't support caching  \nLadySerena - (05:57): Cherokee was the same way  \nLadySerena - (05:57): nginx supports more than just caching, though, it also supports storing  \nCalebJamesDeLisl - (05:58): (caching to disk)?  \nLadySerena - (05:58): like my config for XWiki has /resources/\\* set up as a store (not a cache)  \nLadySerena - (05:58): meaning files it got from the back-end proxy under that folder are stored permanently on-disk and nginx never asks the back-end for those files again  \nLadySerena - (05:59): yea, nginx actually caches to memory and to disk  \nCalebJamesDeLisl - (05:59): that explains the (over)writing. \u00a0Does it check for \"content:unchanged\" header?  \nLadySerena - (05:59): nginx also supports stores and caching on FastCGI, too (and that's helped Varus quite a bit)  \nLadySerena - (06:00): yep  \nLadySerena - (06:00): nginx has better caching logic than most caching proxies or web browsers  \nCalebJamesDeLisl - (06:01): We have to work on our caching. One proposal was a cache macro or maybe a nocache macro is better.  \nLadySerena - (06:03): with the cache I have set up in nginx, I can turn off GlassFish's HTTP File Cache and not affect performance at all  \nLadySerena - (06:03): :D  \nLadySerena - (06:04): how's that for the ultimate HTTP daemon?  \nCalebJamesDeLisl - (06:05): I wouldn't expect an inside cache to affect performance (but I don't have experience with setting up real world systems)  \nCalebJamesDeLisl - (06:07): BTW: here's your bug http://jira.xwiki.org/jira/browse/XWIKI-4986 \u00a0(fixing this won't make the url work but there will be a page not found error.)  \nLadySerena - (06:09): :D  \nLadySerena - (06:09): and oh yea, I've been running Varus Online since 2005  \nLadySerena - (06:10): so I've been running a production environment (ie, a real-world environment) since  \nLadySerena - (06:10): and yes, anything on an internal network affects the site just as much as the external network  \nLadySerena - (06:11): I had a 3x increase in performance when I set up an internal DNS server with A and PTR records for all the internal servers  \nCalebJamesDeLisl - (06:11): Hmm, rather than push hosts files to each server?  \nLadySerena - (06:12): MySQL does a gethostbyaddr() when a client connects, adding that DNS service got rid of the lookup timeout  \nLadySerena - (06:12): yea, I started with that, but found it was much easier to set up an internal DNS  \nLadySerena - (06:13): besides, the internal DNS can cache results from external DNS servers, thereby improving performance even more for users  \nCalebJamesDeLisl - (06:13): Why MySQL?  \nLadySerena - (06:13): if there's a performance hack, I've probably used it  \nLadySerena - (06:13): why not MySQL?  \nLadySerena - (06:14): but nuuu, seriously, MySQL is fast, has plenty of support, and is reliable  \nCalebJamesDeLisl - (06:14): I am running postgres here. mysql seems to hate unicode, and I have a hard time getting it to log to the console.  \nLadySerena - (06:14): I have no issues with unicode on my MySQL service  \nLadySerena - (06:15): hmm, all my tables are latin1\\_swedish\\_ci  \nCalebJamesDeLisl - (06:20): Also what's the deal with the max packet size? I was looking up how big a query could be in postgres and they said \"how much ram do you have?\"  \nLadySerena - (06:21): not sure, really  \nLadySerena - (06:23): the XWiki instance at http://varus.felinewith.me/ is now official: http://varusonline.com/forum/viewtopic.php?t=news&item=1  \nCalebJamesDeLisl - (06:24): The unicode problem is you can't have 4 byte utf8 otherwise mysql chokes. They say you can disguise it as a byte stream using latin1 though.  \nLadySerena - (06:25): I've not had any problems with the default collation.  \nCalebJamesDeLisl - (06:25): \"You have 100 Gold, and 2 Skill Points.\" \u00a0lol  \nLadySerena - (06:26): I'm also totally abusing XWiki: http://varus.felinewith.me/HowTo/PrivacySettings  \nLadySerena - (06:27): using it to make how-to guides for everything on Varus, complete with screenshots  \nCalebJamesDeLisl - (06:31): I think it'd be cool to have a forum as an XWiki application.  \nCalebJamesDeLisl - (06:31): todo listed...  \nLadySerena - (06:31): XD  \nLadySerena - (06:32): well, I'm working on my own vCore System  \nLadySerena - (06:32): but I'm still going to use XWiki  \nLadySerena - (06:32): I was thinking, it might even be cool to use XWiki for Member Profiles in the new system  \nCalebJamesDeLisl - (06:35): If you write your vCore system using the component manager then you can pull in a component here and there such as rendering...  \nLadySerena - (06:35): ya, I was thinking about that  \nLadySerena - (06:35): doing that  \nCalebJamesDeLisl - (06:41): Was think it would be neat if components could exist on multiple computers.  \nCalebJamesDeLisl - (06:41): s/think/thinking  \nLadySerena - (06:41): dat's the magic of clustering  \nLadySerena - (06:42): I did have a GlassFish cluster between my laptop and my iMac  \nLadySerena - (06:42): they were able to share data, and to some extent, share functions  \nCalebJamesDeLisl - (06:42): Okay at the container level. There's also clustervm at the java level.  \nLadySerena - (06:43): oooooooooooooooh  \nCalebJamesDeLisl - (06:43): ?  \nLadySerena - (06:44): clustering at the Java level and the container level  \nLadySerena - (06:44): do both and watch pure awesomeness?  \nCalebJamesDeLisl - (06:44): more likely a massive crash.  \nLadySerena - (06:44): XD  \nLadySerena - (06:45): probably be better to do it with groups of hosts  \nLadySerena - (06:45): like rows and columns of servers, A1-E5  \nLadySerena - (06:46): on the lettered ones you'd link up clustervm  \nLadySerena - (06:46): and across the numbered ones you'd link the GlassFish cluster  \nCalebJamesDeLisl - (06:47): I see. These cluster programs must be trying to guess where the code is separated to minimize network traffic.  \nLadySerena - (06:47): most likely  \nCalebJamesDeLisl - (06:47): XWiki component clustering sounds attractive because we know where code is separated and it would be easy to know where rendering is done etc.  \nLadySerena - (06:48): but a 2-tier configuration like that is the best way I can think of to cluster at both the Java and container levels  \nCalebJamesDeLisl - (06:49): Not fragile enough, better use intels, amds and powerpc.  \nCalebJamesDeLisl - (06:49): Also multiple operating systems would make it more fun.  \nLadySerena - (06:50): web: FreeBSD/i386  \nLadySerena - (06:50): app: FreeBSD/amd64  \nLadySerena - (06:50): db: OpenSolaris/x86\\_64  \nCalebJamesDeLisl - (06:51): But those are different programs connected together, not the same programs getting run on a cluster, correct?  \nLadySerena - (06:52): oh yea, that  \nLadySerena - (06:52): different daemons all doing different things on my servers  \nCalebJamesDeLisl - (06:52): hah, what happens when somebody calls \"synchronized\"  \nCalebJamesDeLisl - (06:52): (on a cluster)  \nLadySerena - (06:53): D:  \nLadySerena - (06:53): bye bye switch!  \nCalebJamesDeLisl - (06:53): :)  \nCalebJamesDeLisl - (06:54): I was reading something about scsi networking, sounded neat.  \nLadySerena - (06:54): >.>  \nLadySerena - (06:54): <.<  \nLadySerena - (06:54): using UltraSCSI or SAS?  \nCalebJamesDeLisl - (06:54): Can't remember, maybe it was ancient tech.  \nCalebJamesDeLisl - (06:55): Host to host sata would be awesome. Actually usb3 will make life much easier.  \nCalebJamesDeLisl - (06:55): (I imagine usb3 supports host to host...)  \nLadySerena - (06:56): actually, most SATA host controllers do support generic data streams  \nLadySerena - (06:56): so it is actually possible (with the right drivers) to network multiple machines over SATA  \nCalebJamesDeLisl - (06:58): Hmm. The only reason for my interest is ethernet has a lot of overhead. \u00a0For most use cases, a couple of GB ethernet pipes would do the trick.  \nLadySerena - (06:59): ya  \nLadySerena - (06:59): you can reduce overhead by setting the MTU to 9000 (look for \"Jumbo Frame\" support on your hardware)  \nCalebJamesDeLisl - (07:00): Ok. and you can use the frame before it's completely loaded?  \nLadySerena - (07:01): nuuu, you still have to wait for the packet checksum to arrive  \nCalebJamesDeLisl - (07:03): So you would have to pad if you need low latency.  \nLadySerena - (07:10): not necessarily  \nLadySerena - (07:10): just send a smaller packet  \nLadySerena - (07:11): the MTU is only the maximum packet size, many packets are actually smaller than the MTU  \nCalebJamesDeLisl - (07:11): Yes, forgot about that.  \nCalebJamesDeLisl - (07:12): \"You're doing something which is already done for you\" the story of the java programmer.  \nLadySerena - (07:12): DNS request packets are 56 bytes in length, and that's including the ARP, IP, and UDP, and checksum segments  \nCalebJamesDeLisl - (07:14): Hmm, I remember reading that a tcp ack packet takes 2 atm frames when sent over pppoe over atm (a lot of dsl services)  \nCalebJamesDeLisl - (07:14): because ethernet has a minimum size and pads up to it.  \nLadySerena - (07:14): that depends on the OS, mostly  \nLadySerena - (07:15): while newer ethernet chipsets have gotten smarter in handling corrupted packets and sending resend requests, they've gotten dumber interms of packet sizes  \nCalebJamesDeLisl - (07:16): So minimum size is ignored with older chipsets.  \nLadySerena - (07:20): nuuu, with older chipsets a packet that isn't long enough is rejected  \nLadySerena - (07:20): the newer ones don't care about packet sizes  \nmflorea joined #xwiki at 07:21  \nLadySerena - (07:21): the minimum ethernet packet size is 64 bytes, but I've seen 56-byte packets on my networks because the operating systems are taking advantage of the fact newer chipsets are dumber with packet lengths  \nLadySerena - (07:22): the newer chipsets also detect corrupted or segmented packets and send resend requests so the OS doesn't have to  \nLadySerena - (07:22): FreeBSD takes advantage of both of these features of newer chipsets  \nCalebJamesDeLisl - (07:23): Hmm. Can't remember where the document was about that, it was a free ip compression program.  \nLadySerena - (07:25): oh, and while newer chipsets do a lot of the low-level verification and resend requesting, they do at least notify the OS of those activities  \nLadySerena - (07:26): http://varus.felinewith.me/HowTo/PrivacySettings \u00a0:D  \nbblfish left at 07:32 (Ping timeout: 265 seconds  \nbblfish joined #xwiki at 07:38  \nCalebJamesDeLisl - (07:41): Looking around, looks like the atm frame payload is 48 bytes so ack packets will take 2 frames unless ethernet can send less than 48 bytes total.  \ndaning\\_ joined #xwiki at 07:42  \ndaning left at 07:43 (Read error: Connection reset by peer  \ndaning\\_ left at 07:47 (Client Quit  \nplunden1 joined #xwiki at 08:03  \nvmassol joined #xwiki at 08:10  \nkibahop joined #xwiki at 08:13  \nbblfish - (08:38): hi  \nheadache joined #xwiki at 08:54  \nheadache - (08:54): hello  \nbblfish - (08:55): good morning from France  \nheadache - (08:55): good morning from Italy :D  \nCalebJamesDeLisl - (09:03): Just found an incorrect translation key for the livetable loading message in rightsUI.vm need a jira issue?  \nLadySerena - (09:06): goodnight from Texas  \nDenis joined #xwiki at 09:09  \ndaning\\_ joined #xwiki at 09:14  \ndaning\\_ is now known as daning ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nvmassol - (09:23): CalebJamesDeLisl: normally yes but since it's minor I'd say nah just go for it...  \nCalebJamesDeLisl - (09:23): Good because I just did.  \nvmassol - (09:23): :)  \nvmassol - (09:23): bb in 2 mn (moving to office ;))  \nvmassol left at 09:23 (Quit: Leaving.  \nlucaa left #xwiki at 09:26  \nvmassol joined #xwiki at 09:26  \nEnygma` joined #xwiki at 09:29  \nCalebJamesDeLisl - (09:32): I'm planning on adding a property to XWikiPreferences class, should it be added in XWiki.java where it will be automatically added to everyone's copy or add it in the XWikiPreferences.xml so it will be introduced when people import it?  \nvmassol - (09:33): anything added to XWikiPReferences should be discussed on the list I think since that object is already very large. It also depends on what you're adding re your question  \nvmassol - (09:33): (it's also a critical object)  \nvmassol - (09:33): (since upgrading it is extermely hard)  \nvmassol - (09:34): (so it should be avoided as much as possible IMO)  \nvmassol - (09:34): actually IMO this object is an antipattern  \nCalebJamesDeLisl - (09:34): I had talked about it on the list, I can send a message specifically about adding the key.  \narkub joined #xwiki at 09:35  \nvmassol - (09:35): each app should have its own config object and the admin ui should gather them all together for easy display/edit  \nvmassol - (09:35): ok I must have missed your mail  \nvmassol - (09:35): what thread is it caleb?  \nCalebJamesDeLisl - (09:35): just a second, I'll find it.  \nCalebJamesDeLisl - (09:37): [xwiki-devs] [proposal] Make AddCommentAction support captcha  \nCalebJamesDeLisl - (09:38): Also here: xwiki-devs] [Proposal] Allow anonymous commenting with captcha  \nvmassol - (09:39): indeed I didn't read those\u2026  \nCalebJamesDeLisl - (09:40): I thought \"guest\\_comment\\_requires\\_captcha\" best matched other names in XWikiPreferences.  \nsilviar joined #xwiki at 09:40  \nvmassol - (09:40): my first reaction  \nvmassol - (09:41): is to not add this option by default in java  \nvmassol - (09:41): since it's optional and not required for xwiki to function  \nvmassol - (09:41): (this is the rule normally for stuff created in java)  \nCalebJamesDeLisl - (09:41): Good point.  \nCalebJamesDeLisl - (09:44): I guess I'll just check for the property in the class before displaying the checkbox in rightsUI. (I assumed rightsUI was the place for that.)  \nvmassol - (09:45): hmm  \nvmassol - (09:46): thinking aloud, in a perfect world  \nvmassol - (09:47): ideally we should probably have a captcha extension (one or several - one for registration, one for comments) with its own configuration options  \nvmassol - (09:48): in the future I envision lots of (small and focused) extensions, bringing their icons and configuration options for the admin page  \nbblfish - (09:48): hello  \nheadache - (09:48): vmassol, i'm checking out from http://svn.xwiki.org/svnroot/xwiki/platform/trunks now i'am right?  \nbblfish - (09:48): I think everything is ready for deploying WebId on xwiki now.  \nvmassol - (09:48): now back to present  \nCalebJamesDeLisl - (09:48): extension? So that it would be reusable?  \nvmassol - (09:48): ;)  \nvmassol - (09:49): extension simply means it's an extension, not something you have to install  \nvmassol - (09:49): but that you can add on top of an existing install  \nvmassol - (09:49): for ex you install the bare wiki, you go to the extension page  \nvmassol - (09:49): you get a list of all avail extensions  \nvmassol - (09:49): you see the captcha one  \nvmassol - (09:49): you install it  \nvmassol - (09:49): you configure it  \nvmassol - (09:49): you use it  \nvmassol - (09:50): (this is the extension manager desciption)  \nCalebJamesDeLisl - (09:50): Just one captcha extension for all different uses?  \nvmassol - (09:50): for this to work we need: 1) extension manager, 2) extension points in UX (IX)  \nvmassol - (09:51): could be one or several  \nheadache - (09:51): it seems like eclipse  \nvmassol - (09:51): it is indeed  \nvmassol - (09:51): it's similar to all dynamic systems  \nCalebJamesDeLisl - (09:51): It reminds me of the XWiki.Configurable which I have to rename...  \nvmassol - (09:51): including OSes  \nCalebJamesDeLisl - (09:52): pulls XWiki.Registration configuration into the admin page.  \nheadache - (09:52): vmassol, where do you study about extensible apps or dynamic systems?  \nvmassol - (09:52): google  \nheadache - (09:53): there are no books about these systems?  \nvmassol - (09:53): books?  \nvmassol - (09:53): what is it?  \nvmassol - (09:53): :)  \nvmassol - (09:53): just kidding  \nvmassol - (09:53): I don't know  \nvmassol - (09:53): probably  \nCalebJamesDeLisl - (09:54): (lol) \u00a0The reason why I'm using XWikiPreferences for comment captcha setting is because there is no way to make CommentAddAction into an application without it needing programming right.  \ntmortagne joined #xwiki at 09:55  \nbblfish - (09:55): vmassol: I have fixed a few things that needed fixing for WebId to function correctly on some other sites. Do you think we can try deploying today?  \nvmassol - (09:56): bblfish: yes  \nbblfish - (09:56): cool  \nvmassol - (09:56): where are the updated files?  \nvmassol - (09:56): I can try in 1 hour  \nbblfish - (09:56): still here http://bblfish.net/tmp/2010/02/xwiki/  \nvmassol - (09:59): so that you can have fun later on in your life?  \nheadache - (10:00): :D  \nheadache - (10:00): vmassol, or headache  \njvelociter joined #xwiki at 10:01  \nheadache - (10:02): vmassol, 2-3 years ago the president of my faculty in C.S. said \"And you would you make money with open source?\"  \nheadache - (10:05): he intends that is not possible, \u00a0nowadays he has a researcher lurking in sourceforge for interesting projects :D  \nKermitTheFragger joined #xwiki at 10:05  \nCalebJamesDeLisl - (10:05): Nicola Tesla was thrown out of class for daring to assert that alternating current might be better than direct current.  \nvmassol - (10:06): :)  \nheadache - (10:08): jruby, groovy there's also common lisp :D  \nCalebJamesDeLisl - (10:11): Argh, need to add a comment related translation key, all existing translation keys have no prefix eg: 'addcomment=Add Comment' which standard to follow?  \njvelociter left at 10:13 (Quit: jvelociter  \njvelociter joined #xwiki at 10:16  \nCalebJamesDeLisl - (10:16): Whop never mind, I just didn't see it.  \nCiprian joined #xwiki at 10:27  \nanamarias joined #xwiki at 10:27  \nheadache - (10:27): cool all apps are merely xml files  \nheadache - (10:31): it's difficult to find concrete classes :)  \nCalebJamesDeLisl - (10:33): Are you in enterprise or in platform?  \nheadache - (10:33): platform  \nheadache - (10:34): i've cheched out trunk from platform \"top project\"  \nheadache - (10:34): \\*checked  \nCalebJamesDeLisl - (10:35): I started reading in platform/core/xwiki-core/src/main/java/com/xpn/xwiki/doc/XWikiDocument.java That's the center of the old core.  \nCalebJamesDeLisl - (10:36): We are working on replacing xwiki-core though.  \nheadache - (10:36): i'll read it :)  \nCalebJamesDeLisl - (10:37): It's big so there's nothing wrong with just scanning over the headlines.  \ndaning left at 10:37 (Ping timeout: 256 seconds  \nlucaa joined #xwiki at 10:52  \nGillesSerasset joined #xwiki at 10:59  \nheadache - (11:07): i've a trouble building platform/trunks/web  \nheadache - (11:07): [INFO] XWiki Platform - Web - GWT - WYSIWYG Editor - Server Side \u00a0FAILURE [1:43.888s]  \nCalebJamesDeLisl - (11:14): where did you issue the mvn install command from? platform/trunks or platform/trunks/web?  \nheadache - (11:15): platform/trunks/web  \nCalebJamesDeLisl - (11:15): I usually build from platform/trunks unless I have a reason to build one module.  \nCalebJamesDeLisl - (11:16): That way you get everything built. It takes a while though.  \nheadache - (11:16): CalebJamesDeLisl, maybe i don't need web for now i've builded everything except web  \nCalebJamesDeLisl - (11:17): Unfortunately web depends on every other module and enterprise pulls everything else in by depending on web.  \nheadache - (11:18): ok i should be patient and build all from trunks  \nheadache - (11:18): CalebJamesDeLisl, thank you for support  \nCalebJamesDeLisl - (11:18): I added some notes about building platform, on my pentium4 I can build it in 10 minutes.  \nCalebJamesDeLisl - (11:18): http://dev.xwiki.org/xwiki/bin/view/Community/Building#HBuildingXWikiPlatform  \nCalebJamesDeLisl - (11:19): getting a 10 minute build requires \u00a0mvn install -Pdev -Dtest=none -DfailIfNoTests=false  \nCalebJamesDeLisl - (11:20): Without -Pdev it runs out of memory on my computer.  \nheadache - (11:20): yes i'm reading  \nheadache - (11:21): tmortagne, do you know how to use command line options using maven inside eclipse  \ntmortagne - (11:24): headache: Run As -> Maven build... i think  \nheadache - (11:25): tmortagne, yes but if i would add -e (option for show errors) ?  \nheadache left at 11:30 (Read error: Connection reset by peer  \nheadache joined #xwiki at 11:32  \nlucaa left at 11:56 (Quit: Leaving.  \nbblfish - (12:03): hello  \nbblfish - (12:03): somehow the support for Chrome and client side certs is progressing  \nbblfish - (12:03): we can now login to a few of the sites  \nbblfish - (12:04): see: http://code.google.com/p/chromium/issues/detail?id=36207  \nvmassol - (12:04): bblfish: sorry I had forgotten I need to record the castcodeurs podcast at 12:35  \nbblfish - (12:04): oh sounds fun  \nvmassol - (12:04): you don't know it?  \nvmassol - (12:04): see http://lescastcodeurs.com/  \nbblfish - (12:05): cool :-)  \nvmassol - (12:05): guys I think we need to move some plugin packaging in the standard war instead of in the XE war  \nvmassol - (12:05): for example skinx plugins  \nvmassol - (12:06): since otherwise the platform doesn't work  \nvmassol - (12:06): I'll do the move, unless someone doesn't agree  \nvmassol - (12:18): jodatime is needed too apparently  \nmflorea left at 12:28 (Quit: Leaving.  \nheadache - (12:36): CalebJamesDeLisl, as you said before build from trunks works without problems :))  \nCalebJamesDeLisl - (12:36): Cool. How long did it take?  \nCalebJamesDeLisl - (12:37): It says at the bottom of the log.  \nheadache - (12:37): 22 minutes  \nCalebJamesDeLisl - (12:37): Not too bad.  \nheadache - (12:37): yes :)  \nheadache - (12:37): CalebJamesDeLisl, i would familiarize with codebase where i should read ?  \nCalebJamesDeLisl - (12:38): Probably best to start off reading the javadoc.  \nCalebJamesDeLisl - (12:38): At least get an idea for the landscape before you dive into code.  \nheadache - (12:39): do you remember where is the javadoc?  \nheadache - (12:40): lol :D  \nheadache - (12:40): what a stupid question  \nCalebJamesDeLisl - (12:40): http://platform.xwiki.org/xwiki/bin/view/DevGuide/Scripting There are links to a lot of the major apis and classes here.  \nCalebJamesDeLisl - (12:40): no such thing (Or I would have asked it.)  \nCiprian left at 12:47 (Read error: Connection reset by peer  \narkub left at 12:57 (Ping timeout: 245 seconds  \ntmortagne left at 12:58 (Ping timeout: 276 seconds  \ntmortagne joined #xwiki at 12:59  \ntmortagne left at 13:06 (Ping timeout: 256 seconds  \ntmortagne joined #xwiki at 13:06  \nsdumitriu joined #xwiki at 13:35  \nkibahop - (13:41): HI. I'm testing XEM based on this document: http://manager.xwiki.org/xwiki/bin/view/AdminGuide/InstallationMySQL. So far so good, but I get: \u00a0\"Error number 9001 in 5: com.xpn.xwiki.plugin.wikimanager.WikiManagerPlugin: You dont have right to create wiki\" when I try to create a new wiki. Any hints? Thanks.  \nCalebJamesDeLisl - (13:48): Not an XEM expert but I think I remember someone asking this on the list and an answer was to make sure the wiki manager is saved with programming access.  \ntmortagne - (13:49): this is probably due to install with guest issue i reported  \nmflorea joined #xwiki at 13:50  \ntmortagne - (13:51): /WikiManager/CreateNewWiki page needs to be saved with Admin user  \ntmortagne - (13:51): kibahop:  \nCalebJamesDeLisl - (13:53): How new is the install as guest issue? Did guest used to have programming access?  \nsdumitriu left at 14:03 (Ping timeout: 252 seconds  \nlucaa joined #xwiki at 14:25  \nkibahop - (14:26): CalebJamesDeLisl: tmortagne: That was it. Tried again. It works now. Thanks.  \nflaviusolaru joined #xwiki at 14:35  \njvdrean joined #xwiki at 14:48  \nEnygma` left at 14:54 (Quit: Leaving.  \nvmassol - (15:27): tmortagne: I haven't fully followed but we cannot import in a brand new wiki without being logged in anymore?  \ntmortagne - (15:28): vmassol: yes, if you import with guest as it used to be then every page of XE will have Guest as author, which mean all pages that needs programming right are broken  \nvmassol - (15:28): so that's a regression?  \nvmassol - (15:28): (to be sure)  \nvmassol - (15:28): (tmortagne)  \nvmassol - (15:29): the pb is in 2.2.2?  \nvmassol - (15:29): do we know what caused it?  \ntmortagne - (15:29): it's detailed in the issue, i'm on the phoen right now  \ntmortagne - (15:29): yes it's a regression  \nvmassol - (15:29): ok  \narkub joined #xwiki at 15:30  \njvdrean left #xwiki at 15:38  \njvdrean joined #xwiki at 15:38  \nGillesSerasset left at 15:41 (Ping timeout: 248 seconds  \nnickless joined #xwiki at 15:43  \nsdumitriu joined #xwiki at 15:47  \njvdrean - (15:51): @jvelociter: but having to give PR to subwiki admins breaks isolation  \njvdrean - (15:51): since they'd become farm admins  \nsdumitriu - (15:52): I'm -1 on giving programming rights to subwiki users  \njvelociter - (15:53): jvdrean: the way I see it is that you need to be farm admin to import as backup, thus to import the initial XAR  \njvelociter - (15:53): it makes sense  \njvelociter - (15:53): IMHO  \njvelociter - (15:53): since in theory you are supposed to copy a template or create a wiki from XAR  \njvelociter - (15:53): jvdrean: vmassol created http://jira.xwiki.org/jira/browse/XWIKI-4987  \njvdrean - (15:54): ok but the first upgrade would break pages which were requiring PRs  \njvelociter - (15:54): ah true  \njvelociter - (15:55): but there is no way we can have both  \njvelociter - (15:55): the import as backup for non PR users and security  \njvelociter - (15:56): jvdrean: vmassol on which host is the IRC bot ?  \njvelociter - (15:56): xwiki.org? \u00a0myxwiki ?  \nvmassol - (15:56): dev.xwiki.org  \nsdumitriu - (15:56): http://dev.xwiki.org/  \njvelociter - (15:57): thanks  \nsdumitriu - (15:57): Maybe import backup should require admin rights, not programming rights  \njvelociter - (15:57): then we reintroduce a security issue  \nCalebJamesDeLisl - (15:57): (further in the future) we could sign the packages or the documents.  \njvelociter - (15:57): local admin can escalate to global admin + PR  \nplunden1 left #xwiki at 15:58  \nCalebJamesDeLisl - (15:59): For the moment we might be able to patch in a list of document hashes which are allowed to be imported as backups.  \nsdumitriu - (15:59): jvelociter: Right...  \njvelociter - (15:59): CalebJamesDeLisl: that would work for XE docs, but not for other applications that require PR  \njvelociter - (16:00): (contributed apps, etc.)  \nsdumitriu - (16:00): Well, the truth is that we've always required PR to be granted FOR farm programmers, and this is a good requirement  \nsdumitriu - (16:00): And we've always required PR TO grant PR to farm pages  \njvelociter - (16:00): well there is no other choice for the moment w/ our programming model  \nsdumitriu - (16:01): So it's OK to require a PR user to import a document with PR  \nsdumitriu - (16:01): But it's not that OK to require PR to preserve the author of other pages  \njvelociter - (16:01): (except signing XARs)  \nsdumitriu - (16:01): Hm, how about this:  \nsdumitriu - (16:01): Since PR works only for global users, forbid only global users when importing  \nsdumitriu - (16:01): So:  \nsdumitriu - (16:02): User U imports document D  \nsdumitriu - (16:02): If U has PR, then D is imported as is  \nsdumitriu - (16:02): If U has Admin, then all the documents having a local author are imported as is, documents with an external user will get the current user (U) as their author  \nsdumitriu - (16:03): If U doesn't have admin, then all documents get U as the author  \nsdumitriu - (16:03): This is a good algorithm for importing in virtual wikis, don't you agree?  \njvelociter - (16:03): sdumitriu: this works but does not resolve the XAR update for pages that needs PR in a local wiki  \njvelociter - (16:03): (ex: myxwiki)  \nsdumitriu - (16:04): jvelociter: Well, too bad  \nsdumitriu - (16:04): We can't fix it  \njvelociter - (16:04): yes there is no easy fix that's sure  \nsdumitriu - (16:04): Just ask a farm admin to fix it  \nsdumitriu - (16:04): We could have a ticket system where users can ask an update  \njvelociter - (16:04): sdumitriu: I think it's time we have pages that declare the need for PR with an object  \nsdumitriu - (16:05): Yep  \njvelociter - (16:05): this way we can easily list then all  \njvelociter - (16:05): and a with a UI a farm admin can validate an upgrade  \njvelociter - (16:05): just one click  \nCalebJamesDeLisl - (16:05): Suppose someone edits one of those files?  \nvmassol - (16:06): actually we shouldn't allow non PR author to edit a PR page, shoudln't we?  \njvelociter - (16:06): hehe  \njvelociter - (16:06): maybe not, indeed  \nCalebJamesDeLisl - (16:06): Or edits the XAR file before importing?  \njvelociter - (16:07): (and with this model, we pages that gets save with a PR user but that do not have the object should not execute code)  \njvelociter - (16:07): CalebJamesDeLisl: we are back on the hash or xar signing need...  \nCalebJamesDeLisl - (16:07): This has been simmering in my mind for a few weeks (before the regression).  \njvelociter - (16:08): but actually we can have this as an external app in a first time  \njvelociter - (16:08): in the validation UI, we upload the legitimate XAR  \njvelociter - (16:08): so we can compare hashes on the fly  \nCalebJamesDeLisl - (16:11): Sounds pretty easy to implement. The documents get installed without programming right, the application spots them (by name), reads and hashes their xml, resaves them with a new user if hash is approved.  \nCalebJamesDeLisl - (16:12): Application just does periodic database queries for approved documents.  \njvelociter - (16:13): IMHO we should go for the XWiki.ProgrammingPage object directly, and not look for pages by name  \nCalebJamesDeLisl - (16:15): For a long term solution, I think the document should be signed when it is saved by whatever user saves it.  \njvelociter - (16:16): test: XWIKI-4987  \nCalebJamesDeLisl - (16:16): Programming object is an interesting idea especially if the only place where PR code can be executed is a text area in that object.  \njvdrean - (16:16): (thinking), why do we require PR in the default XAR ? Isn't it only because of missing APIs ?  \njvelociter - (16:17): jvdrean: yes  \njvelociter - (16:17): (but the problem remains anyway for other apps)  \njvelociter - (16:17): vmassol: the bot is back  \nvmassol - (16:17): cool thanks jvdrean  \nvmassol - (16:17): what was the pb?  \nvmassol - (16:18): s/jvdrean/jvelociter  \nCalebJamesDeLisl - (16:18): \"why do we require PR in the default XAR\" \u00a0I was talking earlier about possibly allowing non-PR code to execute in the security context of it's author.  \nCalebJamesDeLisl - (16:18): adding an api to switch security context.  \njvelociter - (16:18): vmassol: a DNS issue apparently  \nvmassol - (16:18): ok  \nsdumitriu - (16:18): Normally, a page that requires PR means a missing API  \nCalebJamesDeLisl - (16:19): So an author can switch the code to their context then save a page which the viewer can't edit.  \nsdumitriu - (16:19): This is the case for some of the AllDocs tabs  \nvmassol - (16:19): sdumitriu: not always, for our default XE yes we shouldn't use privileged apis  \nvmassol - (16:20): but the notion of privileged api makes sense I think  \nsdumitriu - (16:20): +1  \nvmassol - (16:20): for \"dangerous\" apis  \nsdumitriu - (16:20): I said \"normally\"  \nvmassol - (16:20): ok  \nsdumitriu - (16:21): I would need a method fo querying the trash, but I didn't add it yet since we're not supposed to freely add new methods to the old core  \nvmassol - (16:22): cannot you use a predefined query using the query manager?  \nvmassol - (16:22): (ie without introducing a new api)  \nsdumitriu - (16:22): Hm, idea for the new storage: a storage type implementation should have a main data type that it stores, and the public search method should allow searching for that entity type  \nsdumitriu - (16:22): vmassol: Yes, good idea  \nCalebJamesDeLisl - (16:22): +1  \nvmassol - (16:22): sdumitriu: in a sense it's similar to introducing an api ;)  \nvmassol - (16:23): (since you expose a public name)  \nsdumitriu - (16:23): vmassol: WDYM?  \nvmassol - (16:23): not much...  \nvmassol - (16:23): just that whether it's java api or a new exposed string  \nvmassol - (16:24): it's something that is made public  \nvmassol - (16:24): and that would need to go through deprecation if we want to be strict and remove/rename it in the future  \nsdumitriu - (16:24): I mean:  \nsdumitriu - (16:24): Storage<Document>, Storage<Attachment>, Storage<DeletedDocument>  \nvmassol - (16:24): (I was talking about using the QM)  \nsdumitriu - (16:24): But for that we'd need typed components  \nsdumitriu - (16:25): Ah, I see  \nsavi joined #xwiki at 16:28  \nkibahop left #xwiki at 16:28  \nkibahop joined #xwiki at 16:39  \nkibahop left #xwiki at 16:39  \njvdrean - (16:41): @CalebJamesDeLisl the captcha config is not located in the XWiki.XWikiPreferences class right ?  \nCalebJamesDeLisl - (16:41): For comments it is.  \nCalebJamesDeLisl - (16:41): I just committed it 5 minutes ago.  \nCalebJamesDeLisl - (16:42): You mean an analogue of captcha.enabled? no it is not.  \njvdrean - (16:43): yes I was thinking of something like captcha.enabled  \nsdumitriu - (16:43): captcha.disabled = remove the captcha jar from the distribution  \njvdrean - (16:43): I'm wondering if we might want to offer this setting  \nCalebJamesDeLisl - (16:44): There is a setting for the registration page which can be set on a per subwiki basis.  \nkibahop joined #xwiki at 16:44  \nCalebJamesDeLisl - (16:44): There is also a setting for comments which can be defined per wiki/subwiki or per space.  \njvdrean - (16:46): I think we should drop the captcha.enabled setting but having register/comment settings both in xwiki.cfg (or xwiki.properties) and the wiki administrations sounds good  \njvdrean - (16:47): provided the per-wiki setting precedes the config file one of course  \nvmassol - (16:47): it's always in both  \nvmassol - (16:47): the config system is across the board  \nCalebJamesDeLisl - (16:48): Applications can't access the config system though.  \nglerouge joined #xwiki at 16:48  \nbblfish - (16:48): hi  \nvmassol - (16:48): they can  \nvmassol - (16:48): (but not without PR right now)  \nCalebJamesDeLisl - (16:49): I don't think that's a compelling reason to require the registration page to have PR.  \nflaviusolaru - (16:49): hi guys i have an bug on an XE 2.1.1, everytime i use $util.encodeURI(\"anytext here\") i get the text Textile... any ideea?  \nvmassol - (16:49): no no  \nvmassol - (16:49): CalebJamesDeLisl: it's not how it works  \nvmassol - (16:49): here's the strategy:  \nvmassol - (16:49): any component that need to be made avail from pages/Scripting should implement ScriptService  \nvmassol - (16:50): that's all  \nsdumitriu - (16:50): flaviusolaru: Are you sure? WDYM?  \nvmassol - (16:50): \u00a0no need for PR  \nvmassol - (16:50): :)  \nCalebJamesDeLisl - (16:50): So the captcha component should know about it applications (registration page, comments) ?  \nvmassol - (16:51): ah yes we've had this discussion  \nvmassol - (16:51): I vaguely remember it now :)  \nvmassol - (16:51): this works if your app has java code  \nvmassol - (16:51): otherwise it's a bit overkill  \nflaviusolaru - (16:51): sdumitriu: i have something like this:  \nflaviusolaru - (16:51): \u00a0\u00a0\u00a0#set($title = $xwiki.encodeURI(\"TEXdfaisuhfksahglkshfgoskad\"))  \nflaviusolaru - (16:51): \u00a0\u00a0\u00a0$response.sendRedirect($xwiki.getURL($topicDocFullName, \"inline\", \"template=$!{bbTopicTemplate}&parent=${bbRootDomain}&title=${title}\"))  \nvmassol - (16:51): it depends if you want to make you app code reusable from other components  \nvmassol - (16:51): but I was talking about  \nvmassol - (16:51): config options from other modules  \nvmassol - (16:52): like the rendering module, the core module, etc  \nvmassol - (16:52): which can easily be made avail from scripts  \nvmassol - (16:52): (if we need/want it)  \nvmassol - (16:52): re apps it's all about reusability of the app  \nsdumitriu - (16:52): flaviusolaru: And what do you get?  \nvmassol - (16:52): if you don't need reusability at the java level indeed there's no motivation  \nCalebJamesDeLisl - (16:52): I believe that applications should never be known to java code (this is why I dislike XWikiPreferences)  \nsdumitriu - (16:53): +1  \nsdumitriu - (16:53): XWikiPreferences is way too big  \nvmassol - (16:53): +1 but that's not what we are saying  \nsdumitriu - (16:53): It's not a scalable model  \nvmassol - (16:53): itt's the oteher way around  \nflaviusolaru - (16:53): sdumitriu: BulletinBoard/QDLED+topic2?template=BBCode.TopicClassTemplate&parent=Domains.WebHome&title=Textile  \nvmassol - (16:53): apps can call java code  \nvmassol - (16:53): and ?1 to have any code logic in apps btw  \nvmassol - (16:53): this is such a bad practice  \nsdumitriu - (16:54): flaviusolaru: Are you sure nobody else sets $title between the two lines?  \nvmassol - (16:54): (it's good for hacking but not for any serious dev)  \nvmassol - (16:54): (so apps we deliver shouldn't do this)  \nvmassol - (16:54): the IRC bot app is a good example of what not to do  \nvmassol - (16:54): :)  \nCalebJamesDeLisl - (16:54): \"any code logic in apps\"?  \nvmassol - (16:54): yes code that is not presentation glue  \nflaviusolaru - (16:55): sdumitriu: between what? the #set($title) and the redirect?  \nflaviusolaru - (16:55): sdumitriu: the lines are one after the other  \nsdumitriu - (16:55): Yes  \nCalebJamesDeLisl - (16:56): My feeling is that apps should be allowed to do anything which doesn't require PR, and templates/core should only do what can't be done in apps.  \nvmassol - (16:56): CalebJamesDeLisl: I'ml talking about best dev practices, reusability, maintenance, automated unit testing, etc  \nvmassol - (16:57): we know how to do all these in java but not in xwiki scripts  \nvmassol - (16:57): IDEs auto completion, highlighting, debugging, etc can be added to the lsit  \nvmassol - (16:57): s/lsit/list/  \nsdumitriu - (16:57): flaviusolaru: Do you have a link?  \nsdumitriu - (16:58): Where I can see this live?  \nCalebJamesDeLisl - (16:58): I had been thinking about how to test apps :)  \nvmassol - (16:58): basically apps should have backend services that provide their core business logic  \nvmassol - (16:58): and the scripts in pages should just call the business logic and present it  \nvmassol - (16:58): what was done before with plugin + xar  \nvmassol - (16:59): and now is done with components + xar  \nvmassol - (16:59): re testing of apps, the pb is not how to do testing, this is relatively eas  \nvmassol - (16:59): easy  \nvmassol - (17:00): (using a fit/fitness-like system)  \nCalebJamesDeLisl - (17:00): The other reason for my feeling that apps should do everything possible is that it shows users what they can do with XWiki.  \nvmassol - (17:00): the hard part is how to do unit testing  \nvmassol - (17:00): that's a bad reason! :)  \nvmassol - (17:01): let's code in assembly language to show users what they can do with their computer! ;)  \nvmassol - (17:01): we certainly have enough badly coded apps to show  \nsdumitriu - (17:01): +1 with Vincent  \nsdumitriu - (17:02): That's not the right reason  \nsdumitriu - (17:02): But I think that doing as much as possible in the wiki is better  \nvmassol - (17:02): sdumitriu: we could remove entirely our java code  \nsdumitriu - (17:02): If an application can be written without requiring a component, and still look like a clean piece of code, that's good  \nvmassol - (17:02): and move everything in groovy scripts in pages  \nvmassol - (17:02): :)  \nvmassol - (17:03): but I'd be ?1 till we get the same level of tools  \nCalebJamesDeLisl - (17:03): Sounds like python paste.  \nvmassol - (17:03): that we have in java IDEs  \nvmassol - (17:03): sdumitriu: the trick is \"clean\"  \nvmassol - (17:04): \"clean piece of code\"  \nvmassol - (17:04): I don't consider the blog app as clean right now for ex  \nvmassol - (17:04): it has virtually no unit tests for ex  \nCalebJamesDeLisl - (17:04): We need an application to unit test applications ;)  \nvmassol - (17:05): yes that's my point  \nheadache - (17:05): +1 for junit in action guy :)  \nvmassol - (17:05): hehe  \nvmassol - (17:05): if we want to reach the same leve as we currently have with java we have to invent lots of stuff  \njvelociter - (17:05): yes we could have apps embed their own test  \nvmassol - (17:05): s/leve/level/  \njvelociter - (17:05): tests  \njvelociter - (17:05): I've been thinking about this for a while  \nvmassol - (17:05): me to, I even coded it  \nvmassol - (17:05): but it doesn't work  \njvelociter - (17:05): I need to look into your selenium app  \njvelociter - (17:05): yes  \nvmassol - (17:06): you can also look at greenpepper  \nvmassol - (17:06): which works in xwiki  \nCalebJamesDeLisl - (17:06): junit lost a lot of points with me the other night when I routed out those leaks.  \nvmassol - (17:06): but all this good  \nvmassol - (17:06): if your're not a java dev and you're a user of xwiki  \nvmassol - (17:06): it's way less good if you're the developer of xwiki  \nvmassol - (17:07): CalebJamesDeLisl: I'd like to get to the bottom of that btw  \nvmassol - (17:07): have you traced it in junit code where it keeps a handle on fields?  \nCalebJamesDeLisl - (17:07): I did and I extended the class and got it fixed AFAIK.  \nvmassol - (17:08): could you share the info where it's kept?  \nCalebJamesDeLisl - (17:08): http://jira.xwiki.org/jira/browse/XWIKI-4953  \nCalebJamesDeLisl - (17:09): Added another patch.  \nbblfish - (17:09): vmassol: did the podcast go well?  \nvmassol - (17:09): bblfish: ah right, I promised you an upgrade :)  \nvmassol - (17:10): (had forgotten :))  \nvmassol - (17:10): yes it went well  \nbblfish - (17:10): I listened to last months, it was very interesting  \nbblfish - (17:10): I should look through them  \nvmassol - (17:10): cool  \nbblfish - (17:10): yes, it would be nice to put that up.  \nCalebJamesDeLisl - (17:10): I suppose you could extend the test runner and null the tests after they are run, my solution was to null everything the tests linked to.  \nvmassol - (17:11): CalebJamesDeLisl: I've seen your commit but I don't like the solution too much  \nbblfish - (17:11): just if you need a pointer http://bblfish.net/tmp/2010/02/xwiki/  \nvmassol - (17:11): it makes a lots of ugly tear downs  \nbblfish - (17:11): I think there is a lot to improve on it, but it will help to have feedback  \nCalebJamesDeLisl - (17:11): You would get into the test runner and null the entire threads?  \nvmassol - (17:12): CalebJamesDeLisl: no clue, I don't know where the pb lies actually, checking your patch in the jira issue  \nvmassol - (17:12): btw is this jira issue the same as for your commit?  \nvmassol - (17:12): in which case shouldn't it be closed? (or maybe it's just a test which is why it's still open)  \nvmassol - (17:13): CalebJamesDeLisl: just checked your patch  \nvmassol - (17:13): I still don't see where it's kept in junit  \nCalebJamesDeLisl - (17:14): Issue is still open because not all tests are done yet, and the patch is not applied.  \nvmassol - (17:14): ok so what you applied already is different?  \nvmassol - (17:14): hmm maybe what you applied is for old tests  \nvmassol - (17:15): while the patch is for component oriented code?  \nCalebJamesDeLisl - (17:15): It's all for old (3.8) tests.  \nCalebJamesDeLisl - (17:16): The patch extends this: http://www.jmock.org/javadoc/1.1.0/org/jmock/core/VerifyingTestCase.html  \nvmassol - (17:16): yes seen that  \nvmassol - (17:16): CalebJamesDeLisl: can you point me where in junit it keeps a ref to tests already passed?  \nvmassol - (17:16): ie the root of the pb  \nCalebJamesDeLisl - (17:17): I don't remember, I will have to look again.  \nvmassol - (17:17): becasue we'd need to report it to them  \nvmassol - (17:18): and since I'm surprised nobody has done that already, maybe there's more to it than we see  \nCalebJamesDeLisl - (17:18): It's pretty well known.  \nvmassol - (17:18): I don't recall seeing it  \nsavi left #xwiki at 17:18  \nCalebJamesDeLisl - (17:18): You saw the atlassian blog where they mentioned that it happened.  \nvmassol - (17:19): I've seen lots of references to nulling  \nvmassol - (17:19): oh yes and al ot more  \nvmassol - (17:19): but these are not the core pb  \nvmassol - (17:19): they are just workaournds  \nCalebJamesDeLisl - (17:19): (linked on the jira issue)  \nvmassol - (17:19): \"The JUnit test runner keeps every TestCase object, including all their instance variables, in memory for the duration of the whole test run.\"  \nvmassol - (17:19): I'd like to know why this is done  \nCalebJamesDeLisl - (17:20): I was afraid I'd break something if I messed with the runner.  \nvmassol - (17:20): I'm having the same reaction as bob lee: \"Does it really? There's no reason it should. JUnit creates a new instance for every test method (i.e. multiple instances of each test class). Does it hold onto all of these? Seems like it would be a \\*lot\\* simpler to fix the test runner.\"  \nvmassol - (17:21): in the past I reached the same point as you've reached  \nvmassol - (17:21): but I've never taken the time to go deeper  \nvmassol - (17:21): and find out why they do this in junit  \nvmassol - (17:21): I'm curious know to find out  \nCalebJamesDeLisl - (17:22): Okay, I'll crash the tests and get another dump.  \nCalebJamesDeLisl - (17:41): I incorrectly used runtime scope for making core depend in captcha, just to verify the correct scope is provided because core will run without it?  \nflaviusolaru left at 17:42 (Read error: Connection reset by peer  \nplunden left #xwiki at 17:48  \njvelociter - (17:50): guys, for XWIKI-4987  \njvelociter - (17:51): I plan on adding a checkbox for admins that have PR, that says \"import as backup pack (conserve authors and dates from the package)\"  \njvelociter - (17:51): what do you think the default value should be ?  \njvelociter - (17:51): checked or not checked ?  \njvelociter - (17:51): I'd say not checked  \njvdrean - (17:53): should this depend on the setting in package.xml ?  \nKermitTheFragger left at 17:56 (Quit: Leaving  \nheadache - (17:58): can i update this page http://platform.xwiki.org/xwiki/bin/view/DevGuide/Architecture?  \nheadache - (17:59): in the section regarding Extending XWiki i see a little inconstency  \nheadache - (17:59): \\*inconsistency  \nCalebJamesDeLisl - (17:59): Sure.  \njvelociter - (17:59): jvdrean: well we've sort of decided it was not up to the package to decide this  \njvelociter - (17:59): but up to the one that imports  \nheadache - (18:00): XWiki enterprise instead of XWiki platform  \njvelociter - (18:00): (same as we don't necessarily import history from the package)  \nCalebJamesDeLisl - (18:01): \"XWiki enterprise instead of XWiki platform\" that is a page about XWiki Platform, not Enterprise.  \nheadache - (18:03): CalebJamesDeLisl, reading page i understand that i can extend XWiki or by using XWiki services as provided by core platform or by extending XWiki enterprise  \njvelociter - (18:04): jvdrean: but we could decide to check or not by default depending on waht the package satys  \nCalebJamesDeLisl - (18:04): I read that line, it looks right to me.  \njvelociter - (18:04): sats  \njvelociter - (18:04): says  \njvelociter - (18:05): this way it will be checked for XE docs  \nglerouge - (18:05): jvelociter: jvdrean will be back in a couple minutes  \njvelociter - (18:05): so will I :|)  \njvdrean - (18:07): jvelociter: yes that's what I meant, \"decide to check or not by default depending on waht the package satys\"  \njvelociter - (18:07): ok  \njvdrean - (18:08): now that it's said tmortagne wrote that there was an agreement not to need the package.xml in the future  \nheadache - (18:08): CalebJamesDeLisl, yes you're right  \njvdrean - (18:08): so I don't know :)  \nsilviar left at 18:09 (Quit: Leaving.  \ntmortagne - (18:11): jvdrean: i said package.xml should not be needed but getting default values in it is ok i think, since we need to get the default value from somewhere... as long as you can override anything from the package.xml in the UI it ok  \nlucaa left #xwiki at 18:11  \njvdrean - (18:12): I get java.lang.OutOfMemoryError: Java heap space on a fresh install with MAVEN\\_OPTS=\"-Xmx1024m\"  \njvdrean - (18:12): [jv:~]$ mvn -v  \njvdrean - (18:12): Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)  \njvdrean - (18:12): Java version: 1.6.0\\_15  \njvdrean - (18:12): Java home: /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home  \njvdrean - (18:12): Default locale: en\\_US, platform encoding: MacRoman  \njvdrean - (18:12): OS name: \"mac os x\" version: \"10.6.2\" arch: \"x86\\_64\" Family: \"mac\"  \njvdrean - (18:12): any idea ?  \njvdrean - (18:12): the exception occurs during xwiki-core tests  \nCalebJamesDeLisl - (18:14): I guess I'm breaking a lot today, It's because the tests leak memory and I removed the line which isolates them thinking I had gotten the leakage low enough that it wouldn't throw an out of memory error.  \nheadache - (18:14): jvdrean, look here http://jira.codehaus.org/browse/GEOT-2686  \nheadache - (18:15): try with Maven 2.2.1  \nheadache - (18:15): ops  \nheadache - (18:15): :(  \nanamarias left at 18:15 (Quit: anamarias  \njvdrean - (18:15): headache: thanks, I'm using 2.2.1 thogh  \nheadache - (18:15): yes  \njvdrean - (18:18): trying with Xmx1440, my 2Gb of RAM seems tiny now  \nCalebJamesDeLisl - (18:19): It's not there where the problem is, it's in the pom file. I'm going to revert my change.  \njvdrean - (18:22): oh I missed you message above  \nCalebJamesDeLisl - (18:25): reverted. svn up and it should build fine.  \njvdrean - (18:30): CalebJamesDeLisl: there's also the xwiki-captcha scope which needs a fix, right ?  \nCalebJamesDeLisl - (18:30): Yes. doing that next.  \nsdumitriu left at 18:48 (Ping timeout: 245 seconds  \nmflorea left at 18:56 (Quit: Leaving.  \nheadache - (19:10): but the data model is present at the presentation model or is inside the core?  \nsdumitriu joined #xwiki at 19:11  \nbblfish - (19:19): hello  \nheadache - (19:20): hello  \narkub left at 19:27 (Ping timeout: 245 seconds  \nheadache - (19:32): goodbye boys & girls  \nheadache left at 19:32 (Quit: Sto andando via  \njvdrean - (19:32): bye headache  \njvdrean left at 19:48 (Quit: Leaving.  \nglerouge left at 19:51 (Quit: Leaving.  \ntmortagne left at 20:02 (Quit: Leaving.  \nkibahop left at 21:02 (Quit: Leaving.  \nmflorea joined #xwiki at 21:12  \nplunden joined #xwiki at 21:29  \nlucaa joined #xwiki at 21:35  \nLadySerena - (22:30): HEY PEEPS!  \nLadySerena - (22:30): how cool would it be if I set up my vCore System so that it takes all requests for its domains, and for the wiki.\\* subdomains, its vcURL handler forwarded the requests to XWiki?  \nmflorea left at 22:34 (Quit: Leaving.  \njvelociter - (22:41): vmassol: I'm looking for the JIRA issue re deleting a package in the importer does not redirect back to the importer  \njvelociter - (22:41): any hint / words you would have used in the description ?  \nvmassol - (22:41): hmm I don't recall, is it me who created it ? :)  \njvelociter - (22:41): (I tried \"importer attachment\" and \"delete package\")  \njvelociter - (22:41): vmassol: I assumed  \njvelociter - (22:41): but maybe not  \njvelociter - (22:41): :)  \nvmassol - (22:42): the pb has been there for a while already  \njvelociter - (22:42): ok looking w/o specified reportre  \nvmassol - (22:42): I'm not even sure there's a jira issue  \nlucaa - (22:42): jvelociter: I remember silviar found this issue too, or something similar, she might have reported  \njvelociter - (22:43): ok  \njvelociter - (22:43): will add xaadministration  \njvelociter - (22:43): to the serach  \nvmassol - (22:44): found this one:  \nvmassol - (22:44): http://jira.xwiki.org/jira/browse/XAADMINISTRATION-71  \njvelociter - (22:44): found  \njvelociter - (22:44): yes  \njvelociter - (22:44): was Silvia indeed  \njvelociter - (22:44): thanks all  \nvmassol - (23:07): the \"tested by\" section in extension documentation is a good idea indeed  \njvelociter - (23:07): vmassol: I have an error running ui-tests from cmd line  \njvelociter - (23:07): java.lang.Exception: Invalid directory from where to stop XWiki  \njvelociter - (23:08): + NPE at \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at org.xwiki.it.ui.framework.TestUtils.closeDriver(TestUtils.java:30)  \nvmassol - (23:09): does it work on hudson?  \nvmassol - (23:09): invalid directory from where to stop xwiki must be coming from thomas' executor I guess  \nvmassol - (23:09): (haven't checked that code)  \njvelociter - (23:13): haven't checked hudson  \njvelociter - (23:13): (I assumed you did after the move)  \njvelociter - (23:13): though the tests are executed and pass properly, locally  \nvmassol - (23:32): jvelociter: is this an error:  \nvmassol - (23:32): - \u00a0<packaging>pom</packaging>  \nvmassol - (23:32): + \u00a0<packaging>jar</packaging>  \njvelociter - (23:32): arf  \nvmassol - (23:32): :)  \njvelociter - (23:32): I did not meant to commit that  \njvelociter - (23:32): :)  \njvelociter - (23:33): (I've been especially careful, see how it worked)  \nvmassol - (23:33): hehe  \nvmassol left at 23:39 (Quit: Leaving.  \nvmassol joined #xwiki at 23:43  \n\n"}