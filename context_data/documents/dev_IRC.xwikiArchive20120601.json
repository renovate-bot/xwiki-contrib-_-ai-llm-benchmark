{"id": "dev:IRC.xwikiArchive20120601", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120601", "title": "IRC Archive for channel #xwiki on 01 June 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:01\u00a0<ries>\u00a0Come to think of it\u2026 binary data like images, are they stored in the DB or in the filesystem?  \n00:03\u00a0<+sburjan`>\u00a0by default in the db .. as BLOB's .. but you can use external fs storage if you want  \n00:05\u00a0<@cjd>\u00a0Even if they are stored in the db, they are cached in temp files so that you don't trash your db with big requests.  \n00:16\u00a0<ries>\u00a0cjd: sburjan` so, when I run xwiki in a cluster, each instance will take care of it's own set of cache files, right?  \n00:16\u00a0<jvdrean>\u00a0has joined #xwiki  \n00:19\u00a0<@cjd>\u00a0ries: yes, they will all cache temp files independently and invalidate/delete them automatically when changes are made in other nodes in the cluster.  \n00:23\u00a0<Inge->\u00a0how is that information propagated between instances?  \n00:25\u00a0<@cjd>\u00a0Events are propigated across wikis using JGroups.  \n00:40\u00a0<lucaa>\u00a0has joined #xwiki  \n00:46\u00a0<Shaddox>\u00a0has joined #xwiki  \n00:56\u00a0<ries>\u00a0cjd: I think I made a configuration at the time, although I didn't fully understood it...  \n00:57\u00a0<jvdrean>\u00a0has quit  \n01:00\u00a0<ssavi>\u00a0has quit  \n01:38\u00a0<lucaa>\u00a0has quit  \n01:45\u00a0<ssavi>\u00a0has joined #xwiki  \n02:01\u00a0<Shaddox>\u00a0has quit  \n02:23\u00a0<ssavi>\u00a0has left #xwiki  \n07:03\u00a0<Denis1>\u00a0has joined #xwiki  \n07:06\u00a0<Denis>\u00a0has quit  \n07:33\u00a0<mflorea>\u00a0has joined #xwiki  \n08:03\u00a0<CIA-87>\u00a0tmortagne\u000f feature-diff-display\u000f \\* r3b3275c\u000f https://github.com/xwiki/xwiki-commons/commit/3b3275c2c5848ca36416cc8a8d667c1c9faeb7f6 \u000f/ (3 files in 2 dirs):\u000f XCOMMONS-184: Introduce API to display diffs in various formats - http://git.io/vo5Aew  \n08:03\u00a0<CIA-87>\u00a0Marius Dumitru Florea\u000f feature-diff-display\u000f \\* r3378132\u000f https://github.com/xwiki/xwiki-commons/commit/3378132d85b6dd53659fd1930381ac0afe9107c2 \u000f/ (24 files in 10 dirs):\u000f XCOMMONS-184: Introduce API to display diffs in various formats - http://git.io/EYrNyg  \n08:03\u00a0<CIA-87>\u00a0tmortagne\u000f feature-diff-display\u000f \\* rdd8c095\u000f https://github.com/xwiki/xwiki-commons/commit/dd8c0955ea77b2ca9a89c51b0320fb6e77b75907 \u000f/ xwiki-commons-core/xwiki-commons-diff/xwiki-commons-diff-api/src/main/java/org/xwiki/diff/DiffResult.java :\u000f XCOMMONS-184: Introduce API to display diffs in various formats - http://git.io/TsDCFw  \n08:03\u00a0<CIA-87>\u00a0Marius Dumitru Florea\u000f feature-diff-display\u000f \\* rccb348e\u000f https://github.com/xwiki/xwiki-commons/commit/ccb348e3a172c46cb41f9863e31118ed1e73b658 \u000f/ :\u000f Merge branch 'feature-diff-display' of github.com:xwiki/xwiki-commons into feature-diff-display - http://git.io/lA-WSQ  \n08:03\u00a0<CIA-87>\u00a0Marius Dumitru Florea\u000f feature-diff-display\u000f \\* r438cd80\u000f https://github.com/xwiki/xwiki-commons/commit/438cd80f8a2dd784d04b895c9e7cb9f828609677 \u000f/ (16 files in 4 dirs):\u000f XCOMMONS-184: Introduce API to display diffs in various formats - http://git.io/WM4iHA  \n08:15\u00a0<vmassol>\u00a0has joined #xwiki  \n08:26\u00a0<tekzilla>\u00a0has quit  \n08:27\u00a0<vmassol>\u00a0has quit  \n08:28\u00a0<tekzilla>\u00a0has joined #xwiki  \n09:01\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:08\u00a0<vmassol>\u00a0has joined #xwiki  \n09:14\u00a0<jvdrean>\u00a0has joined #xwiki  \n09:16\u00a0<vmassol>\u00a0has quit  \n09:31\u00a0<sburjan>\u00a0has joined #xwiki  \n09:36\u00a0<jvdrean>\u00a0has quit  \n09:54\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:26\u00a0<vmassol>\u00a0has joined #xwiki  \n10:27\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:33\u00a0<evalica>\u00a0has joined #xwiki  \n10:33\u00a0<evalica1>\u00a0has joined #xwiki  \n10:34\u00a0<evalica>\u00a0has quit  \n10:55\u00a0<Denis1>\u00a0is now known as <Denis>  \n10:56\u00a0<lucaa>\u00a0has joined #xwiki  \n11:04\u00a0<evalica1>\u00a0is now known as <evalica>  \n11:05\u00a0<jssol>\u00a0has joined #xwiki  \n11:27\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* r4e40f06\u000f https://github.com/xwiki/xwiki-commons/commit/4e40f0635a584905fde0a597a6a6a2cf60fb3058 \u000f/ (3 files in 3 dirs):\u000f XCOMMONS-185: Expose org.slf4j.Logger interface in org.xwiki.logging.LogQueue - http://git.io/0pq58g  \n11:40\u00a0<jssol>\u00a0has quit  \n11:47\u00a0<tmortagne>\u00a0has quit  \n11:52\u00a0<tmortagne>\u00a0has joined #xwiki  \n12:21\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* r91a72cf\u000f https://github.com/xwiki/xwiki-commons/commit/91a72cf961434fd15f70f2cacb8c99f70fbee33c \u000f/ (2 files in 2 dirs):\u000f XCOMMONS-167: Introduce diff/merge API - http://git.io/xkU2AQ  \n12:32\u00a0<mflorea>\u00a0has quit  \n12:56\u00a0<CIA-87>\u00a0Caleb James DeLisle\u000f feature-store-attachments-newstore\u000f \\* rd09be06\u000f https://github.com/xwiki/xwiki-platform/commit/d09be063181452e38a63f7bf6768cb570d4d5b56 \u000f/ (9 files in 9 dirs):\u000f Got the attachment-newstore building again. - http://git.io/MNK\\_VQ  \n13:43\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* r11cf603\u000f https://github.com/xwiki/xwiki-commons/commit/11cf60363f86ad66345fb011bd8e44f151c5ec0e \u000f/ (6 files in 5 dirs):\u000f XCOMMONS-185: Expose org.slf4j.Logger interface in org.xwiki.logging.LogQueue - http://git.io/py45dQ  \n13:43\u00a0<@cjd>\u00a0\u00a0\u00a0\u00a0\u00a0<T> T getInstance(Type roleType) throws ComponentLookupException;  \n13:43\u00a0<@cjd>\u00a0this is too bad, I wish I'd noticed earlier  \n13:43\u00a0<@cjd>\u00a0it's equivilent to returning Object but harder to cast  \n13:45\u00a0<+Enygma`>\u00a0Does anyone know why we can't have {{velocity}} macros in gadgets?  \n13:45\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* r56176cc\u000f https://github.com/xwiki/xwiki-platform/commit/56176cc67e21305820387278a15ed886a079018e \u000f/ (11 files in 8 dirs):\u000f XCOMMONS-185: Expose org.slf4j.Logger interface in org.xwiki.logging.LogQueue - http://git.io/-ZZe8Q  \n13:45\u00a0<+Enygma`>\u00a0Says \"Nested macros not allowed\"  \n13:46\u00a0<@cjd>\u00a0what are gadgets?  \n13:46\u00a0<+tmortagne>\u00a0not sure exactly what gadget are  \n13:46\u00a0<+tmortagne>\u00a0are thoses wiki macros or java macros ?  \n13:47\u00a0<+tmortagne>\u00a0or not macros at all ?  \n13:47\u00a0<@cjd>\u00a0the reason why nested macros are not allowed is because otherwise there are a billion ways to make groovy script execute by abusing velocity macros which take input  \n13:47\u00a0<+tmortagne>\u00a0in any case to get this error it mean gadget is executing you content inside a velocity macro  \n13:48\u00a0<+Enygma`>\u00a0Dashboard gadgets  \n13:48\u00a0<+tmortagne>\u00a0or that you call a gadget inside a velocity macro and gadget are not \"registered\" as allowed to execute scripts like wiki amcro are  \n13:48\u00a0<+tmortagne>\u00a0need to check exactly what a gadget is  \n13:48\u00a0<+tmortagne>\u00a0are you using gadget inside a velocity macro ?  \n13:49\u00a0<+tmortagne>\u00a0(or other script macro)  \n13:49\u00a0<+Enygma`>\u00a0a gadget is displayed using the {{dashboard}} java macro  \n13:49\u00a0<+Enygma`>\u00a0the dashboard displays multiple gadgets  \n13:49\u00a0<+tmortagne>\u00a0sure but what is a gadget ?  \n13:50\u00a0<+Enygma`>\u00a0XObject of class XWiki.GadgetClass  \n13:50\u00a0<+Enygma`>\u00a0the content field allows you to write the content of the gadget  \n13:51\u00a0<+tmortagne>\u00a0and are you using the {{dashboard}} macro in a script ?  \n13:51\u00a0<+Enygma`>\u00a0I know that you can write wiki syntax in the gadget content because I`ve used that for the Workspace Application  \n13:51\u00a0<@cjd>\u00a0the easy answer is probably to use {{include document=\"MyGadget.MyGadgetCode\" /}}  \n13:52\u00a0<+tmortagne>\u00a0basically we need to find what is this parent script macro which cause the issue you have  \n13:52\u00a0<+Enygma`>\u00a0If I look at Dashboard.WebHome, yes, the {{dashboard}} macro is called inside a {{velocity}} macro  \n13:52\u00a0<+tmortagne>\u00a0I can see for example that DashboardMacro is not properly registered as allowing script so you could have this issue but generating it with a script  \n13:52\u00a0<+tmortagne>\u00a0can bee easily fixed is that's the issue  \n13:53\u00a0<+tmortagne>\u00a0like with include and wiki macros  \n13:53\u00a0<mflorea>\u00a0has joined #xwiki  \n13:54\u00a0<+Enygma`>\u00a0problem is that this was working before  \n13:54\u00a0<+Enygma`>\u00a0as I mentioned, I am using {{velocity}} macros inside a gadget's content for the main dashboard of a workspace  \n13:54\u00a0<+Enygma`>\u00a0now, when trying to add a new gadget for the main dashboard of XE, it seems that I can not use the {{velocity}} macro anymore  \n13:55\u00a0<+Enygma`>\u00a0I wonder if workspaces are affected as well  \n13:55\u00a0<+tmortagne>\u00a0I doubt this really used to work  \n13:55\u00a0<+Enygma`>\u00a0so what you are saying Thomas is that this might be cause by the fact that Dashboard.WebHome is calling {{dashboard}} from inside a {{velocity}} script?  \n13:55\u00a0<+Enygma`>\u00a0script=macro  \n13:56\u00a0<+tmortagne>\u00a0yes  \n13:56\u00a0<+tmortagne>\u00a0that's what I'm saying  \n13:56\u00a0<+Enygma`>\u00a0so this was introduced with the feature of \"user dashboard\"  \n13:56\u00a0<+tmortagne>\u00a0and DashboardMacro should implements NestedScriptMacroEnabled to be break script check  \n13:56\u00a0<+tmortagne>\u00a0but right now it's not  \n13:57\u00a0<+tmortagne>\u00a0but I doubt this ever worked  \n13:57\u00a0<+tmortagne>\u00a0at least after the check on inner script macros  \n13:58\u00a0<+Enygma`>\u00a0worked before: https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-workspace/xwiki-platform-workspace-template-features/src/main/resources/Dashboard/WebHome.xml#L410  \n13:59\u00a0<+tmortagne>\u00a0what worked ? that work if you don't have script in the gadgets but it can't since we have the check on inner script  \n13:59\u00a0<+tmortagne>\u00a0because nothing has been done to support it as far as I can see  \n13:59\u00a0<+tmortagne>\u00a0unless DashboardMacro used to execute the transformations itself and is not anymore  \n13:59\u00a0<+tmortagne>\u00a0but that would be weird  \n14:00\u00a0<+Enygma`>\u00a0maybe lucaa knows more about this  \n14:00\u00a0<+tmortagne>\u00a0actually I can see  \n14:00\u00a0<+tmortagne>\u00a0renderer.renderGadgets(gadgets, gadgetRenderer, context);  \n14:01\u00a0<+tmortagne>\u00a0but not sure it's really rendering gardgets or if it's a bad name for what is actually parsing the gadgets only  \n14:02\u00a0<+Enygma`>\u00a0another weird thing is that if you write velocity directly in the gadget's content (without using the {{velocity}} macro), the code is not interpreted  \n14:02\u00a0<+tmortagne>\u00a0ok looks like it's just very bad naming  \n14:02\u00a0<+tmortagne>\u00a0so it's more \u00a0a formater than a renderer  \n14:03\u00a0<+Enygma`>\u00a0so it does not act like a gadget is executed in a {{velocity}} macro, but the nested exception still pops up.  \n14:03\u00a0<+tmortagne>\u00a0not sure I unsdesrtand your last use case  \n14:03\u00a0<+tmortagne>\u00a0ha ok I see  \n14:03\u00a0<+tmortagne>\u00a0weel that's normal  \n14:03\u00a0<+tmortagne>\u00a0it's wiki content  \n14:04\u00a0<+tmortagne>\u00a0so it's parsed as such  \n14:04\u00a0<+tmortagne>\u00a0depending of your gardget document syntax  \n14:04\u00a0<+tmortagne>\u00a0if you don't put it inside velocity macro it's not velocity  \n14:04\u00a0<+tmortagne>\u00a0exactly like with include macro  \n14:05\u00a0<+tmortagne>\u00a0I can see why it does not work now but can't explain you how it ever worked  \n14:05\u00a0<+Enygma`>\u00a0so it is executed \"outside\" of the scope of the {{velocity}} macro that contains the {{dashboard/include}} macro  \n14:05\u00a0<+Enygma`>\u00a0but when it comes to throwing a nested exception, that still counts!?  \n14:06\u00a0<+tmortagne>\u00a0you are mixing two things here  \n14:06\u00a0<+tmortagne>\u00a0you gadget is parsed with the syntax you indicated for it  \n14:06\u00a0<+tmortagne>\u00a0so if you don't put {{velocity}} then you will not have a velocity macro in the parsed XDOM  \n14:07\u00a0<+tmortagne>\u00a0then this XDOM is inserted in the document XDOM containing the dashboard  \n14:07\u00a0<+tmortagne>\u00a0and then we execute transformations  \n14:07\u00a0<+tmortagne>\u00a0and haveing a script macro inside another script macro is forbidden by default  \n14:07\u00a0<+tmortagne>\u00a0unless the second script macro is inside a macro which break that check like wiki macro for example  \n14:09\u00a0<+Enygma`>\u00a0ha, I think I know why it was working  \n14:10\u00a0<+Enygma`>\u00a0because if you look at the git link I gave you, my version of the Dashboard.WebHome is old and does not contain the user dashboard code that introduced the {{velocity}} top macro that is causing me problems now  \n14:11\u00a0<+tmortagne>\u00a0Enygma`: indeed I was looking a the wrong <content> element in which I was seeing a {{velocity}} macro but did not looked at the details  \n14:11\u00a0<+tmortagne>\u00a0so yes that's why it's working in this version  \n14:11\u00a0<+tmortagne>\u00a0you simply don't have inner script macro  \n14:12\u00a0<+Enygma`>\u00a0so my options are to create a new wiki macro or to use include ?  \n14:12\u00a0<+Enygma`>\u00a0include = new page and include that  \n14:12\u00a0<+tmortagne>\u00a0Enygma`: the dashboard macro should be fixed IMO  \n14:12\u00a0<+tmortagne>\u00a0it's not right that it does not allow script in gadget content  \n14:12\u00a0<+Enygma`>\u00a0well, that too... since it's not normal to be allowed to have wiki syntax, but not velocity macros  \n14:13\u00a0<+Enygma`>\u00a0unfortunately I am not very intimate with java macros and rendering  \n14:13\u00a0<+tmortagne>\u00a0the inner script macro protection is for script macro you generated using a script macro but if you have a \"safe\" macrin in between it's ok  \n14:13\u00a0<+tmortagne>\u00a0macro  \n14:13\u00a0<+tmortagne>\u00a0I can take care of fixing it  \n14:14\u00a0<+Enygma`>\u00a0yes, you mentioned it needs to implement an interface to allow it to do this  \n14:14\u00a0<+tmortagne>\u00a0or tell you what to do and you take care or the testing etc which is what is going to take most of the time ;)  \n14:15\u00a0<+Enygma`>\u00a0however, if we do this, will \u00a0gadgets be able to have nested velocity macros inside them?  \n14:15\u00a0<+tmortagne>\u00a0no  \n14:15\u00a0<+Enygma`>\u00a0then it should be ok  \n14:15\u00a0<+tmortagne>\u00a0the macro just break the parent following where it is  \n14:15\u00a0<+tmortagne>\u00a0the check just stop here but it does not disabe completely the check  \n14:15\u00a0<+Enygma`>\u00a0cool  \n14:22\u00a0<+Enygma`>\u00a0yes... I see the NestedScriptMacroEnabled interface is just a marker interface, no methods  \n14:22\u00a0<+tmortagne>\u00a0yep  \n14:22\u00a0<+tmortagne>\u00a0you can see how it's used in NestedScriptMacroValidatorListener  \n14:24\u00a0<+Enygma`>\u00a0ok, so I`ll just add \"implements NestedScriptMacroEnabled\" to the DashboardMacro and hope nothing else breaks :)  \n14:25\u00a0<+tmortagne>\u00a0should be ok, would be nice to add a unit test ;)  \n14:31\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* rca8268c\u000f https://github.com/xwiki/xwiki-commons/commit/ca8268cebd3372f1f77bb0f1f05b65c31b3b1d56 \u000f/ xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/test/java/org/xwiki/extension/test/AbstractExtensionHandlerTest.java :\u000f XCOMMONS-185: Expose org.slf4j.Logger interface in org.xwiki.logging.LogQueue - http://git.io/I4nh2Q  \n14:32\u00a0<+tmortagne>\u00a0vmassol: xwiki is executed with your user on windows 7 ? it's not a service or something ?  \n14:32\u00a0<vmassol>\u00a0it's executed by the user who runs it AFAIK  \n14:33\u00a0<vmassol>\u00a0I'm not running it as a service here  \n14:33\u00a0<vmassol>\u00a0just running the installer and then starting it with my user  \n14:33\u00a0<+tmortagne>\u00a0you get the value from System.getProperty() ?  \n14:33\u00a0<vmassol>\u00a0nope  \n14:33\u00a0<vmassol>\u00a0it's a comomns configuration feature  \n14:34\u00a0<+tmortagne>\u00a0you know who commons configuration gets it ?  \n14:34\u00a0<vmassol>\u00a0see http://commons.apache.org/configuration/userguide/howto\\_basicfeatures.html#Variable\\_Interpolation  \n14:34\u00a0<vmassol>\u00a0good question  \n14:34\u00a0<vmassol>\u00a0probably using System.exec I'd say  \n14:34\u00a0<vmassol>\u00a0it's not a system property but an env variable  \n14:34\u00a0<+tmortagne>\u00a0maybe there is a bug or limitation with that on Windows 7  \n14:34\u00a0<+tmortagne>\u00a0you registered the env var to the user or globally ?  \n14:35\u00a0<vmassol>\u00a0I didn't do anything  \n14:35\u00a0<vmassol>\u00a0it's a standard env variable on win7  \n14:35\u00a0<+tmortagne>\u00a0ha right did not realy lokked at the var :)  \n14:36\u00a0<vmassol>\u00a0its value is c:\\ProgramData on my version of win7  \n14:39\u00a0<vmassol>\u00a0that said I don't like too much using directly an env variable and I'd prefer to use the system property xwiki.data.dir that I'm introducing but I need some votes before choosing this...  \n14:41\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* r559c464\u000f https://github.com/xwiki/xwiki-platform/commit/559c464f93a13db87cbfbc0781f800d11f0e0365 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/doc/merge/MergeResult.java :\u000f Fix checkstyle - http://git.io/4UpjUQ  \n14:44\u00a0<+jvdrean>\u00a0hi, I'm not able to find release tags for xwiki-platform for versions > xwiki-platform-3.2-milestone-2  \n14:44\u00a0<+jvdrean>\u00a0does anyone see a reason for this ?  \n14:44\u00a0<+jvdrean>\u00a0[jv:~/Dev/xwiki.org/xwiki-platform]$ git tag -l | wc -l  \n14:44\u00a0<+jvdrean>\u00a0\u00a0\u00a0\u00a0\u00a01158  \n14:44\u00a0<+jvdrean>\u00a0[jv:~/Dev/xwiki.org/xwiki-platform]$ git tag -l -n | grep xwiki-platform  \n14:44\u00a0<+jvdrean>\u00a0xwiki-platform-3.0.1 Tagging xwiki-platform-3.0.1  \n14:44\u00a0<+jvdrean>\u00a0xwiki-platform-3.1 Releasing XWiki 3.1  \n14:44\u00a0<+jvdrean>\u00a0xwiki-platform-3.1-milestone-1 [maven-release-plugin] \u00a0copy for tag xwiki-platform-3.1-milestone-1  \n14:44\u00a0<+jvdrean>\u00a0xwiki-platform-3.1-milestone-2 Releasing XWiki 3.1-milestone-2  \n14:44\u00a0<+jvdrean>\u00a0xwiki-platform-3.1-rc-1 Releasing XWiki 3.1-rc-1  \n14:44\u00a0<+jvdrean>\u00a0xwiki-platform-3.2-milestone-1 Tagging xwiki-platform-3.2-milestone-1  \n14:44\u00a0<+jvdrean>\u00a0xwiki-platform-3.2-milestone-2 Tagging xwiki-platform-3.2-milestone-2  \n14:44\u00a0<@cjd>\u00a0git pull --tags  \n14:44\u00a0<@cjd>\u00a0?  \n14:45\u00a0<+jvdrean>\u00a0@cjd, thanks  \n14:45\u00a0<vmassol>\u00a0or git getch --tags  \n14:45\u00a0<vmassol>\u00a0fetch  \n14:46\u00a0<@cjd>\u00a0I've been getting in to the fetch/merge cycle, very nice stuff once you get the hang of it  \n15:06\u00a0<+sburjan>\u00a0vmassol: are you 100% sure Windows 7 has this env var builtin (PROGRAMDATA) ?  \n15:09\u00a0<vmassol>\u00a0yes, as I said echo %PROGRAMDATA% returns c:\\ProgramData  \n15:12\u00a0<+sburjan>\u00a0I see there are 3 types of contexts but not sure how you specify them (UserAndSystem, User and System.)  \n15:16\u00a0<+sburjan>\u00a0vmassol: on how I see things, using &PROGRAMDATA% will allow separate users to use their own xwiki instances ?  \n15:16\u00a0<+sburjan>\u00a0each use with its own XWiki ?  \n15:16\u00a0<vmassol>\u00a0no  \n15:17\u00a0<+sburjan>\u00a0and should we allow this ?  \n15:18\u00a0<vmassol>\u00a0that's not a problem  \n15:18\u00a0<CIA-87>\u00a0tmortagne\u000f feature-diff-display\u000f \\* re1c89cf\u000f https://github.com/xwiki/xwiki-commons/commit/e1c89cfe36053706ae1ad80ccbf4f62c51840161 \u000f/ xwiki-commons-core/xwiki-commons-diff/xwiki-commons-diff-script/src/main/java/org/xwiki/diff/internal/script/DiffScriptService.java :\u000f XCOMMONS-184: Introduce API to display diffs in various formats - http://git.io/4YxA2Q  \n15:44\u00a0<vmassol>\u00a0has quit  \n15:55\u00a0<tmortagne>\u00a0has quit  \n16:02\u00a0<tmortagne>\u00a0has joined #xwiki  \n16:03\u00a0<tmortagne>\u00a0has quit  \n16:03\u00a0<tmortagne1>\u00a0has joined #xwiki  \n16:12\u00a0<florinciu>\u00a0has quit  \n16:12\u00a0<ries>\u00a0Good morning  \n16:13\u00a0<ries>\u00a0is there like black list spaces also a black listed documents?  \n16:13\u00a0<ries>\u00a0I want to remove WebPreferences from a document list  \n16:36\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* ra4a97f9\u000f https://github.com/xwiki/xwiki-platform/commit/a4a97f9b8639a5df945b02da1495db79719e27dc \u000f/ xwiki-platform-core/xwiki-platform-dashboard/xwiki-platform-dashboard-macro/pom.xml :\u000f Add missing dependencies - http://git.io/PKV5AA  \n16:37\u00a0<Shaddox>\u00a0has joined #xwiki  \n16:38\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* r183836c\u000f https://github.com/xwiki/xwiki-platform/commit/183836c48dfb4cfc17b33d04ab5fce5043fb0c68 \u000f/ xwiki-platform-core/xwiki-platform-rendering/xwiki-platform-rendering-macros/pom.xml :\u000f [cleanup] Remove useless dependency - http://git.io/nlJdtA  \n16:52\u00a0<tmortagne1>\u00a0has quit  \n16:59\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:24\u00a0<@sdumitriu>\u00a0ries: Yes, there is  \n17:24\u00a0<@sdumitriu>\u00a0Still in xwikivars.vm  \n17:26\u00a0<CIA-87>\u00a0tmortagne\u000f feature-diff-display\u000f \\* r4c5d891\u000f https://github.com/xwiki/xwiki-commons/commit/4c5d891760d6aee83b39a44d46e580efc07b7486 \u000f/ xwiki-commons-core/xwiki-commons-diff/xwiki-commons-diff-script/src/main/java/org/xwiki/diff/internal/script/DiffDisplayerScriptService.java :\u000f XCOMMONS-184: Introduce API to display diffs in various formats - http://git.io/AfgsGQ  \n17:30\u00a0<evalica>\u00a0has quit  \n17:41\u00a0<sburjan>\u00a0has quit  \n18:09\u00a0<CIA-87>\u00a0Sergiu Dumitriu\u000f stable-4.0.x\u000f \\* r0997427\u000f https://github.com/xwiki/xwiki-platform/commit/0997427a84e14254cd409abec70d3e75654b92dd \u000f/ xwiki-platform-core/xwiki-platform-colibri/src/main/resources/colibri/colibri.css :\u000f XE-1178: Preview, Save & Continue, Save & View and Cancel buttons unreadable using Colibri skin - http://git.io/D94M1g  \n18:10\u00a0<CIA-87>\u00a0Sergiu Dumitriu\u000f stable-3.5.x\u000f \\* r12600b0\u000f https://github.com/xwiki/xwiki-platform/commit/12600b0bf7ad269c617f2ce11ba8ce55cfa436dd \u000f/ xwiki-platform-core/xwiki-platform-colibri/src/main/resources/colibri/colibri.css :\u000f XE-1178: Preview, Save & Continue, Save & View and Cancel buttons unreadable using Colibri skin - http://git.io/7dKxMw  \n18:18\u00a0<CIA-87>\u00a0tmortagne\u000f master\u000f \\* r0375d9d\u000f https://github.com/xwiki/xwiki-platform/commit/0375d9da1a8e28816706e26cb31063fb6c89af13 \u000f/ xwiki-platform-core/xwiki-platform-dashboard/xwiki-platform-dashboard-macro/pom.xml :\u000f [cleanup] Remove useless dependency - http://git.io/PqAdog  \n18:26\u00a0<tmortagne>\u00a0has quit  \n18:30\u00a0<Denis>\u00a0has quit  \n18:31\u00a0<CIA-87>\u00a0Sergiu Dumitriu\u000f master\u000f \\* re297f1d\u000f https://github.com/xwiki/xwiki-platform/commit/e297f1d03fe6cce5980b29c99c7eae633b8d1443 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/resources/ApplicationResources.properties :\u000f XWIKI-7867: Broken translations in page history when interacting with annotations - http://git.io/m52uUg  \n18:37\u00a0<jamie\\_\\_wiki>\u00a0has joined #xwiki  \n18:40\u00a0<jamie\\_\\_wiki>\u00a0Just reported a wysiwyg editor \"link\" -> \"attached file\" then \"all pages\" tab bug: XWIKI-7874  \n18:40\u00a0<jamie\\_\\_wiki>\u00a0Guessing it's a URI encoding bug..  \n18:46\u00a0<CIA-87>\u00a0Sorin Burjan\u000f master\u000f \\* r1e3b24b\u000f https://github.com/xwiki/xwiki-enterprise/commit/1e3b24b846c47a189174ab6fcd3416e962aace47 \u000f/ (35 files in 11 dirs):\u000f XE-1176: Exclude failing Selenium 2 tests on IE9 from running - http://git.io/SMZ78w  \n18:46\u00a0<CIA-87>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r5b19f25\u000f https://github.com/xwiki/xwiki-enterprise/commit/5b19f25cef4e05b23c6a0cc9e88b7ed5c7e1120b \u000f/ (35 files in 11 dirs):\u000f Merge pull request #23 from sorinello/XE-1176 - http://git.io/2n9V8w  \n18:50\u00a0<jamie\\_\\_wiki>\u00a0When an attachment with a filename (I think with a dash '-') is uploaded to a page, then a popup warning window \"Server returned TRANSPORT\\_ERROR with no error message\" is shown if you attempt to view the attachments for that page, and no attachments are shown in the \"all pages\" tree-view tab.  \n18:52\u00a0<jamie\\_\\_wiki>\u00a0Humm.. \u00a0all my attachments uploaded are watermarked with a \"-[rw]\" added to the end of the filename before the filename extension, breaking almost all those page's attachments via the wysiwyg \"link\" button.. damn.  \n18:52\u00a0<ssavi>\u00a0has joined #xwiki  \n18:56\u00a0<jamie\\_\\_wiki>\u00a0Actually, it seems as though it's the \"[\" and probably \"]\" characters that break it..  \n18:57\u00a0<jvdrean>\u00a0has quit  \n19:04\u00a0<@cjd>\u00a0the attachment filename has \"-[rw]\" added to the end?  \n19:04\u00a0<@cjd>\u00a0how are you uploading the attachments and what kind of servlet container are you using?  \n19:04\u00a0<jamie\\_\\_wiki>\u00a0Looks like they should be encoded as %5B for Left Square Bracket (\"[\") \u00a0\u00a0and %5D for Right Square Bracket (\"]\")..  \n19:05\u00a0<@cjd>\u00a0The first issue is I don't know of anything in XWiki which alters the attachment filename in that way.  \n19:05\u00a0<jamie\\_\\_wiki>\u00a0cjd: Hi I'm uploaded them via Tomcat 7 and the webdav client bitkenex  \n19:06\u00a0<jamie\\_\\_wiki>\u00a0cjd: sorry, I'm automatically changing the filename myself before upload. \u00a0eg. \u00a0\u00a0mypic.jpg becomes mypic-[rw].jpg \u00a0so I know it's resized and watermarked.  \n19:07\u00a0<@cjd>\u00a0ok  \n19:07\u00a0<@cjd>\u00a0(note that xwiki resizes images and caches the resized version)  \n19:07\u00a0<@cjd>\u00a0\\*if you specify a smaller size  \n19:08\u00a0<@cjd>\u00a0so it's breaking links then..  \n19:08\u00a0<jamie\\_\\_wiki>\u00a0I can view these attachments on the page, on the \"current page\" tab of the \"link\" wysiwyg button but not the \"all pages\" tab of the \"link\" button..  \n19:08\u00a0<jamie\\_\\_wiki>\u00a0It barfs and doesn't list any attachments for that note when you go to expand it in the tree view \"link\" button  \n19:09\u00a0<jamie\\_\\_wiki>\u00a0There's a popup when you click to expand that page's attachments: \"Server returned TRANSPORT\\_ERROR with no error message.\"  \n19:09\u00a0<jamie\\_\\_wiki>\u00a0\"for that note\" should be \"for that page\"  \n19:09\u00a0<@cjd>\u00a0I see you reported an issue  \n19:11\u00a0<jamie\\_\\_wiki>\u00a0yes.. it seems to be caused by the [ and ] not being url encoded  \n19:12\u00a0<jamie\\_\\_wiki>\u00a0I reported this as XWIKI-7874..  \n19:13\u00a0<jamie\\_\\_wiki>\u00a0The other one I saw you updated: XWIKI-7835 \u00a0was relating to a + character on upload which was something different :)  \n19:21\u00a0<mflorea>\u00a0has quit  \n20:04\u00a0<ssavi>\u00a0has quit  \n20:13\u00a0<CIA-87>\u00a0Eduard Moraru\u000f master\u000f \\* r8a6c33a\u000f https://github.com/xwiki/xwiki-platform/commit/8a6c33afd61105efdd81e6f4e3ee861c3fc138ba \u000f/ (5 files in 4 dirs):\u000f XWIKI-7872: Can't use the velocity macro inside Dashboard gadgets - http://git.io/csQVPA  \n20:13\u00a0<CIA-87>\u00a0Eduard Moraru\u000f master\u000f \\* r6a6d7a4\u000f https://github.com/xwiki/xwiki-platform/commit/6a6d7a4cbbf81bd613389078849dfca8af1c838c \u000f/ (2 files):\u000f [build] Renamed dashboard macro \\*Tests class to \\*Test so that it is used by maven in the build. (1/2) - http://git.io/Jz12yQ  \n20:13\u00a0<CIA-87>\u00a0Eduard Moraru\u000f master\u000f \\* ra4f792c\u000f https://github.com/xwiki/xwiki-platform/commit/a4f792c25384b129fee4f6f60cd9a028ef6246d6 \u000f/ xwiki-platform-core/xwiki-platform-dashboard/xwiki-platform-dashboard-macro/src/test/java/org/xwiki/rendering/macro/dashboard/IntegrationTest.java :\u000f [build] Renamed dashboard macro \\*Tests class to \\*Test so that it is used by maven in the build. (2/2) - http://git.io/zo3pVg  \n20:14\u00a0<lucaa>\u00a0has quit  \n20:19\u00a0<CIA-87>\u00a0Eduard Moraru\u000f stable-4.0.x\u000f \\* rb114677\u000f https://github.com/xwiki/xwiki-platform/commit/b1146774ebbe2b6f17a1d0700981713440e5e916 \u000f/ (5 files in 4 dirs):\u000f XWIKI-7872: Can't use the velocity macro inside Dashboard gadgets - http://git.io/poUluA  \n20:21\u00a0<CIA-87>\u00a0Eduard Moraru\u000f stable-3.5.x\u000f \\* r98efc1b\u000f https://github.com/xwiki/xwiki-platform/commit/98efc1b170fd0be3b388b47af7f4ab450bf5c4c3 \u000f/ (5 files in 4 dirs):\u000f XWIKI-7872: Can't use the velocity macro inside Dashboard gadgets - http://git.io/bArzsQ  \n20:28\u00a0<Enygma`>\u00a0has quit  \n20:29\u00a0<sburjan`>\u00a0has quit  \n20:29\u00a0<sburjan`>\u00a0has joined #xwiki  \n20:29\u00a0<sburjan`>\u00a0has quit  \n20:50\u00a0<jamie\\_\\_wiki>\u00a0cjd: I just added a comment to the issue XWIKI-7874.. \u00a0I just stepped through the code and the parameters, including filename, are not url encoded before they are passed to the .build() method of the UriBuilder. \u00a0And the org.restlet.routing.Template does not encode them before it attempts to builds the uri..  \n20:51\u00a0<@cjd>\u00a0interesting  \n20:53\u00a0<jamie\\_\\_wiki>\u00a0The original url parameters to the DomainObjectFactory.createAttachment method are encoded correctly, but the xwikiAttachment.getFilename() gets the \"raw\" unencoded filename..  \n20:54\u00a0<@cjd>\u00a0if you want to be really helpful and push this issue, the thing to do is write a test case which we can merge into our automated tests.  \n20:54\u00a0<@cjd>\u00a0https://github.com/xwiki/xwiki-enterprise/blob/master/xwiki-enterprise-test/xwiki-enterprise-test-webdav/src/test/it/org/xwiki/test/webdav/DefaultWebDAVTest.java <-- here are the webdav tests  \n20:55\u00a0<@cjd>\u00a0webdav seems to be one of the least tested modules  \n20:55\u00a0<@cjd>\u00a0if you're busy, I totally understand, I'm swamped right now myself.  \n21:06\u00a0<jamie\\_\\_wiki>\u00a0cjd: I'll see what I can do..  \n22:29\u00a0<jamie\\_\\_wiki>\u00a0Ok, I did a preliminary set of tests https://github.com/xwiki/xwiki-enterprise/pull/24  \n22:30\u00a0<jamie\\_\\_wiki>\u00a0I have an xwiki instance running on localhost 8080, so I didn't get a chance to test running it.  \n22:35\u00a0<@cjd>\u00a0that looks really nice  \n22:36\u00a0<@cjd>\u00a0I gather when I pull it, it will fail but we will have a concrete way to define the bug.  \n22:37\u00a0<jamie\\_\\_wiki>\u00a0I believe so.. \u00a0although I'm not certain. \u00a0Does the webdav client use the same interface as the wysiwyg client?  \n22:40\u00a0<jamie\\_\\_wiki>\u00a0humm.. actually I'm not sure if maybe the filenames should be urlencoded before the request is sent? Or maybe the HTTP client will encode them correctly..  \n22:40\u00a0<CIA-87>\u00a0has quit  \n22:42\u00a0<@cjd>\u00a0I think the wysiwyg client uses a GWT server rather than the WebDav interface but this is just an educated guess, I have not delved deeply into the WYSIWYG code.  \n22:47\u00a0<jamie\\_\\_wiki>\u00a0Oops, I think I should have edited the \"rest\" test code. \u00a0But I'll just do one more update to the webdav to add the + plus filename test, which should be able to throw up the XWIKI-7835 problem.. (I think it silently changes the char + to an underscore \\_ )  \n23:07\u00a0<CIA-117>\u00a0has joined #xwiki  \n\n"}