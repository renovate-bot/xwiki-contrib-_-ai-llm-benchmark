{"id": "dev:IRC.xwikiArchive20081023", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20081023", "title": "IRC Archive for channel #xwiki on 23 October 2008 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nxwikibot - (23/10/2008 05:13): XWiki.SujoyBanerjee was modified by XWiki.SujoyBanerjee (deleted document) - http://playground.xwiki.org/xwiki/bin/view/XWiki/SujoyBanerjee  \nxwikibot - (23/10/2008 10:17): XWiki.amerradwan was modified by XWiki.amerradwan (Created user) - http://workspaces.xwiki.org/xwiki/bin/view/XWiki/amerradwan  \nxwikibot - (23/10/2008 11:33): XWiki.pobegus was modified by XWiki.pobegus (Created user) - http://workspaces.xwiki.org/xwiki/bin/view/XWiki/pobegus  \nsdumitriu - (23/10/2008 14:14): vmassol: I don't like the way the PlexusLogger is used  \nvmassol - (23/10/2008 14:14): sdumitriu: what's wrong?   \nsdumitriu - (23/10/2008 14:14): Can't we do better than new PlexusLogger()?  \nvmassol - (23/10/2008 14:21): sdumitriu: what's the need?  \nsdumitriu - (23/10/2008 14:21): No need, just \"niceness\"  \nvmassol - (23/10/2008 14:21): I don't understand what's not nice  \nsdumitriu - (23/10/2008 14:22): It's not nice that switching to a different implementation is hard  \nsdumitriu - (23/10/2008 14:22): I have to change the plexus lifecycle  \nsdumitriu - (23/10/2008 14:23): LogEnablePhase  \nsdumitriu - (23/10/2008 14:23): Hi alexmaru  \nvmassol - (23/10/2008 14:24): sdumitriu: but this is the internal plexus code  \nvmassol - (23/10/2008 14:24): it's in the plexus module so there' s no need to change implementation   \nsdumitriu - (23/10/2008 14:25): I know there isn't a need  \nvmassol - (23/10/2008 14:25): it's tied to plexus  \nsdumitriu - (23/10/2008 14:25): But what if somebody wants to change it?  \nsdumitriu - (23/10/2008 14:25): To use something outside plexus  \nvmassol - (23/10/2008 14:25): anyway if you have something better by all means change it (unless you introduce too much compleixty)  \nvmassol - (23/10/2008 14:25): we must use plexus IMO  \nvmassol - (23/10/2008 14:25): and plexus logger can be configured   \nvmassol - (23/10/2008 14:26): to use any logging implementation  \nvmassol - (23/10/2008 14:26): so I really don't see any need right now  \nvmassol - (23/10/2008 14:26): to be honest I'd rather we wait for a need  \nsdumitriu - (23/10/2008 14:26): Me too  \nsdumitriu - (23/10/2008 14:26): It was just an observation  \nsdumitriu - (23/10/2008 14:27): Something else does bother me  \nsdumitriu - (23/10/2008 14:27): The Logger interface seems to have somethings we don't need  \nvmassol - (23/10/2008 14:27): sdumitriu: here's some doc:  \nvmassol - (23/10/2008 14:27): http://docs.codehaus.org/display/PLEXUS/Custom+Logging+Implementation  \nsdumitriu - (23/10/2008 14:28): Why are these needed?  \nsdumitriu - (23/10/2008 14:28): \u00a0\u00a0\u00a0\u00a0Logger getChildLogger(String name);  \nsdumitriu - (23/10/2008 14:28): \u00a0\u00a0\u00a0\u00a0int getThreshold();  \nsdumitriu - (23/10/2008 14:28): \u00a0\u00a0\u00a0\u00a0void setThreshold(int threshold);  \nsdumitriu - (23/10/2008 14:28): \u00a0\u00a0\u00a0\u00a0String getName();  \nvmassol - (23/10/2008 14:28): threshold is needed for deciding to log or not  \nvmassol - (23/10/2008 14:28): for a given \"level\"  \nsdumitriu - (23/10/2008 14:28): And all the int LEVEL\\_XXX = N;  \nvmassol - (23/10/2008 14:29): child is to get a child logger, i.e. it's possible to create a logger that inherits from a parent  \nvmassol - (23/10/2008 14:29): (thus it inherites all its characteristics)  \nvmassol - (23/10/2008 14:29): etc  \nsdumitriu - (23/10/2008 14:29): But do we need that?  \nsdumitriu - (23/10/2008 14:29): Those are methods used by plexus in the internal logger object  \nsdumitriu - (23/10/2008 14:29): Our interface shouldn't expose them if we're not going to use them  \nvmassol - (23/10/2008 14:30): sdumitriu: I did it quickly with the following rationale:  \nsdumitriu - (23/10/2008 14:30): The threshold can be checked with isWarnEnabled()  \nvmassol - (23/10/2008 14:30): 1) it was easy to map the plexus logger  \nsdumitriu - (23/10/2008 14:30): And it should be set through configuration only, not through code, IMHO  \nvmassol - (23/10/2008 14:31): 2) the plexus guys have thought about this for a very long time (since Avalon in 2000) and I trust them to have chosen carefully the methods  \nvmassol - (23/10/2008 14:32): and they've also done all implementations against other logging subsystem  \nvmassol - (23/10/2008 14:32): so I'm inclined to say their interface is good and will work with any logging implementation  \nsdumitriu - (23/10/2008 14:33): Yes, but their interface is internal  \nvmassol - (23/10/2008 14:33): now for the threshold I'd prefer some enum  \nvmassol - (23/10/2008 14:33): internal?  \nsdumitriu - (23/10/2008 14:33): We must only work with one implementation, the Plexus Logger interface  \nvmassol - (23/10/2008 14:34): org.codehaus.plexus.logging.Logger \u00a0is not internal AFAIK  \nsdumitriu - (23/10/2008 14:34): Internal = Internal to the org.xwiki...PlexusLogger class  \nsdumitriu - (23/10/2008 14:34): We're not exposing it anywhere  \nsdumitriu - (23/10/2008 14:34): We're wrapping their wrapper  \nvmassol - (23/10/2008 14:34): it's good that our interface is generic and will work with any impelmentatyion  \nvmassol - (23/10/2008 14:34): right now we're using the plexus one  \nvmassol - (23/10/2008 14:34): tomorrow we'll need to use the OSGi one too  \nsdumitriu - (23/10/2008 14:36): On another topic, http://jira.xwiki.org/jira/browse/XWIKI-2766  \nsdumitriu - (23/10/2008 14:36): I think the guy wants to say that the wysiwyg editor outputs HTML  \nsdumitriu - (23/10/2008 14:36): \"the wysiwyg-editor writes the <h1><h2><h3>.. tags AUTOMATICALLY!!!!!!!!!!!!!!!!! \"  \nsdumitriu - (23/10/2008 14:36): If that's true, then it's a serious problem  \nvmassol - (23/10/2008 14:39): I think that might be a regression  \nvmassol - (23/10/2008 14:39): in 1.6  \nvmassol - (23/10/2008 14:39): when I made the change from h2 to h1 maybe  \njvdrean - (23/10/2008 14:40): (I was looking at this comment right now too)  \nxwikibot - (23/10/2008 15:23): XWiki.SharmilaR was modified by XWiki.SharmilaR (Created user) - http://www.xwiki.org/xwiki/bin/view/XWiki/SharmilaR  \nxwikibot - (23/10/2008 15:39): AdminGuide.Database Administration was modified by xwiki:XWiki.RaffaelloPelagalli - http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Database+Administration  \nphreeza - (23/10/2008 16:24): i am about to start working on a patch to add a new property that will allow linking two objects, like a foreign key in a relational DB. My focus will be on making it work for custom mapped objects, but it should work with normal ones as well. Do you guys have any interest in that, ie do you think you might accept that into the trunk?  \nphreeza - (23/10/2008 16:24): just so that i know if i should write it nice, because if i'm going to be the only one using it i won't bother...  \nvmassol - (23/10/2008 16:26): phreeza: can't answer right now without knowing more but I'd suggest you propose it on the list  \nphreeza - (23/10/2008 16:26): i think a feature like that would have a lot of potential, because it would basically enable the development of an application that is a Wiki-style Database frontend. highly configurable and with rollback capability  \nphreeza - (23/10/2008 16:26): on -users or on -dev  \nphreeza - (23/10/2008 16:26): ?  \nvmassol - (23/10/2008 16:26): dev  \nphreeza - (23/10/2008 16:26): ok i'll do that  \nvmassol - (23/10/2008 16:26): thanks. I want to make sure about 2 things:  \nvmassol - (23/10/2008 16:26): 1) whether we already have a way for doing what you want or not  \nvmassol - (23/10/2008 16:26): 2) whether your design is a good one   \nphreeza - (23/10/2008 16:27): ok i will adress 1) in the mail   \nvmassol - (23/10/2008 16:27): and answer to 1) is no and answer to 2) is \"good\" then yes we'll want to apply your patch :)  \nphreeza - (23/10/2008 16:27): 2 you will have to decide ;)  \nxwikibot - (23/10/2008 17:13): DevGuide.DataModel was modified by xwiki:XWiki.BrianJones (Added comment) - http://platform.xwiki.org/xwiki/bin/view/DevGuide/DataModel  \nxwikibot - (23/10/2008 17:16): DevGuide.DataModel was modified by xwiki:XWiki.VincentMassol (Added comment) - http://platform.xwiki.org/xwiki/bin/view/DevGuide/DataModel  \nxwikibot - (23/10/2008 17:27): DevGuide.DataModel was modified by xwiki:XWiki.BrianJones (Added comment) - http://platform.xwiki.org/xwiki/bin/view/DevGuide/DataModel  \nxwikibot - (23/10/2008 17:57): AdminGuide.Configuration was modified by xwiki:XWiki.VincentMassol (Rewrote PDF/RTF export section) - http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Configuration  \nsdumitriu - (23/10/2008 20:04): vmassol\\_: Do you have time to review a piece of code?  \nsdumitriu - (23/10/2008 20:06): http://pastebin.com/mfeacb7b  \nsdumitriu - (23/10/2008 20:30): vmassol: Do you have time to review a piece of code? http://pastebin.com/mfeacb7b  \nvmassol - (23/10/2008 20:32): sdumitriu: I'd like to but I'd like to finish something I've been working on during the whole day first. I should be done in 1-2 hours. You can ping me then  \nsdumitriu - (23/10/2008 20:32): K  \nvmassol - (23/10/2008 20:32): I also have your mail to review  \nvmassol - (23/10/2008 20:32): (the localization one)  \nsdumitriu - (23/10/2008 20:33): It's not big, it won't take long  \nsdumitriu - (23/10/2008 20:33): I'll be online later, when I get to Ludovic's  \nsdumitriu - (23/10/2008 21:32): vmassol: Ping  \nvmassol - (23/10/2008 21:32): sdumitriu: pong  \nsdumitriu - (23/10/2008 21:32): We can't use the cache module, since that code is in the PlexusLogger, which is involved in the component creation  \nvmassol - (23/10/2008 21:33): I don't understand  \nsdumitriu - (23/10/2008 21:33): So it would be a chicken-egg problem  \nvmassol - (23/10/2008 21:33): the code I reviewed is in the localization module right?  \nsdumitriu - (23/10/2008 21:35): No  \nsdumitriu - (23/10/2008 21:35): In xwiki-plexus  \nvmassol - (23/10/2008 21:35): then I'm lost  \nvmassol - (23/10/2008 21:35): :)  \nvmassol - (23/10/2008 21:35): oh I see  \nvmassol - (23/10/2008 21:35): it's the message format patch  \nsdumitriu - (23/10/2008 21:35): Yes  \nsdumitriu - (23/10/2008 21:35): Exactly  \nsdumitriu - (23/10/2008 21:35): Well, the map wasn't part of the patch  \nsdumitriu - (23/10/2008 21:36): I added it so that we don't re-create MessageFormats for frequently used strings  \nsdumitriu - (23/10/2008 21:36): This should improve logging performance a bit  \nvmassol - (23/10/2008 21:36): hmmm  \nsdumitriu - (23/10/2008 21:36): Hm, actually I don't know if it would be that important  \nvmassol - (23/10/2008 21:36): right  \nsdumitriu - (23/10/2008 21:36): Since the log should be clear  \nvmassol - (23/10/2008 21:37): that was also my hmmm ;)  \nsdumitriu - (23/10/2008 21:37): This adds complexity for a minor benefit  \nsdumitriu - (23/10/2008 21:37): So I think I'll better drop it  \nsdumitriu - (23/10/2008 21:37): Over-improving performance is bad :)  \nvmassol - (23/10/2008 21:38): yes I agree  \nsdumitriu - (23/10/2008 21:39): Gotta go  \nsdumitriu - (23/10/2008 21:39): Bye  \nvmassol - (23/10/2008 21:39): bye  \nxwikibot - (23/10/2008 23:50): XWiki.athanasios was modified by XWiki.athanasios (Created user) - http://workspaces.xwiki.org/xwiki/bin/view/XWiki/athanasios  \nxwikibot - (23/10/2008 23:51): UserGuide.WebHome was modified by XWiki.athanasios - http://workspaces.xwiki.org/xwiki/bin/view/UserGuide/  \n\n"}