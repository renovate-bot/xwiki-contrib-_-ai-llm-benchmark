{"id": "dev:IRC.xwikiArchive20111223", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20111223", "title": "IRC Archive for channel #xwiki on 23 December 2011 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:02\u00a0<Enygma`>\u00a0has quit  \n00:58\u00a0<jvdrean>\u00a0has quit  \n01:18\u00a0<Enygma`>\u00a0has joined #xwiki  \n01:40\u00a0<Enygma`>\u00a0has quit  \n01:58\u00a0<DrLou>\u00a0has joined #xwiki  \n03:29\u00a0<tekzilla>\u00a0has quit  \n03:31\u00a0<tekzilla>\u00a0has joined #xwiki  \n06:01\u00a0<Denis2>\u00a0has joined #xwiki  \n06:02\u00a0<Denis>\u00a0has quit  \n06:42\u00a0<DrLou>\u00a0has quit  \n07:08\u00a0<sdumitriu>\u00a0has quit  \n08:38\u00a0<mflorea>\u00a0has joined #xwiki  \n08:46\u00a0<Denis2>\u00a0is now known as <Denis>  \n08:52\u00a0<sburjan`>\u00a0has quit  \n09:33\u00a0<vmassol>\u00a0has joined #xwiki  \n09:39\u00a0<+mflorea>\u00a0vmassol: I just discovered that I can't access the objects of a document through its translations. I have to get the objects from the original document. Do you know if this is by design?  \n09:40\u00a0<vmassol>\u00a0mflorea: yes it's by design  \n09:40\u00a0<vmassol>\u00a0objects are not translatable  \n09:40\u00a0<vmassol>\u00a0we have a \u00a0jira issue about this  \n09:40\u00a0<vmassol>\u00a0(since a long very lonf time)  \n09:40\u00a0<vmassol>\u00a0\\*long  \n09:40\u00a0<+mflorea>\u00a0sure, but if they are shared, I would expect to be able to access the (same) objects from the translated document  \n09:41\u00a0<+mflorea>\u00a0now $tdoc.getObject() always returns null  \n09:41\u00a0<vmassol>\u00a0I think the idea from ludovic was that translations should only override what they change  \n09:42\u00a0<+mflorea>\u00a0ok  \n09:42\u00a0<vmassol>\u00a0(not saying it's the right thing to do)  \n09:42\u00a0<vmassol>\u00a0(I don't know this part too well either)  \n09:43\u00a0<+mflorea>\u00a0the problem is that a class sheet is not applied on a translation of a class entry (doc with an object of that class)  \n09:43\u00a0<+mflorea>\u00a0because the translation doesn't have the objects..  \n09:44\u00a0<+mflorea>\u00a0I need to change the sheet manager to always look for the original document  \n09:44\u00a0<vmassol>\u00a0I don't remember: is it possible to get the main doc from a translated doc?  \n09:45\u00a0<+mflorea>\u00a0I see DocumenModelBridge#getOriginalDocument()  \n09:45\u00a0<vmassol>\u00a0that's different  \n09:46\u00a0<vmassol>\u00a0that's to send the event and so that listener can compute the diff  \n09:46\u00a0<vmassol>\u00a0(ie we save original doc before changes are made to the doc)  \n09:46\u00a0<+mflorea>\u00a0indeed..  \n09:46\u00a0<vmassol>\u00a0since a translated doc is the same class as main doc I don't think there's any way  \n09:47\u00a0<vmassol>\u00a0so indeed you need to hold the main doc and work with it I think (would need to be checked further to be 100% sure)  \n09:50\u00a0<+mflorea>\u00a0arr, dab.getDocument always returns the translated document, so I can't get the original document..  \n09:50\u00a0<+mflorea>\u00a0well, I'm in the old core, so I can do workarounds, but it's ugly  \n09:54\u00a0<vmassol>\u00a0mflorea: you could add an api in DAB  \n09:54\u00a0<vmassol>\u00a0AFAIR someone introduced the getTranslated() call not that long ago  \n09:54\u00a0<vmassol>\u00a0(several months :))  \n09:55\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0public DocumentModelBridge getDefaultDocument(DocumentReference documentReference) throws Exception maybe  \n09:56\u00a0<vmassol>\u00a0https://github.com/xwiki/xwiki-platform/commit/f1188a7be56600aa975d7ccc747a203893b71f2d#diff-0 :)  \n09:57\u00a0<vmassol>\u00a0but I only fixed a regression I introduced: http://jira.xwiki.org/browse/XWIKI-6627  \n09:57\u00a0<vmassol>\u00a0\"This is a regression. This issue was first fixed in http://jira.xwiki.org/browse/XWIKI-2892. The regression was introduced in http://jira.xwiki.org/browse/XWIKI-5807 during a refactoring.\"  \n09:57\u00a0<vmassol>\u00a0here: http://jira.xwiki.org/browse/XWIKI-2934  \n09:58\u00a0<vmassol>\u00a0makes sense to me to add a getDefaultDocument API in DAB  \n09:58\u00a0<vmassol>\u00a0mflorea: wdyt?  \n09:59\u00a0<+mflorea>\u00a0I agree  \n10:01\u00a0<+mflorea>\u00a0should I add it to DAB or DMB? i.e. DAB.getDefaultDocument(ref) vs. DAB.getDocument(ref).getDefaultDocument()  \n10:01\u00a0<+mflorea>\u00a0or maybe both  \n10:01\u00a0<vmassol>\u00a0DAB  \n10:02\u00a0<vmassol>\u00a0in DMB how would you implement it?  \n10:02\u00a0<vmassol>\u00a0you'd need to call $xwiki which is bad from XWikiDcoument IMO  \n10:02\u00a0<+mflorea>\u00a0yep  \n10:02\u00a0<+mflorea>\u00a0because right now only xwiki.getDocument returns the default doc  \n10:02\u00a0<+mflorea>\u00a0ok, I'll add it only to DAB  \n10:06\u00a0<vmassol>\u00a0bb in 15mn  \n10:37\u00a0<lucaa>\u00a0has joined #xwiki  \n10:57\u00a0<vmassol>\u00a0has quit  \n10:58\u00a0<vmassol>\u00a0has joined #xwiki  \n11:22\u00a0<jvdrean>\u00a0has joined #xwiki  \n12:32\u00a0<vmassol>\u00a0guys there are tests failing on platform  \n12:32\u00a0<vmassol>\u00a0DownloadActionTest  \n12:32\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-oldcore/1234/testReport/  \n12:32\u00a0<vmassol>\u00a0been failing since the 21st: ?  \n12:32\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-platform/  \n12:33\u00a0<vmassol>\u00a0seems it's related to \"XWIKI-7310 : Change the default value of 'xwiki.virtual.usepath' to 1\"  \n12:33\u00a0<vmassol>\u00a0anyone know where Eddy is?  \n12:35\u00a0<vmassol>\u00a0answer: on holidays  \n12:35\u00a0<vmassol>\u00a0checking more  \n12:35\u00a0<vmassol>\u00a0since it seems teh commit of the 21st is not the same test failure  \n12:36\u00a0<vmassol>\u00a0ahah  \n12:36\u00a0<vmassol>\u00a0indeed it's different  \n12:36\u00a0<vmassol>\u00a0the new failure seems caused by : \"XWIKI-7311: Preserve non-ASCII characters in atachment names when downloading attachments\"  \n12:36\u00a0<vmassol>\u00a0commit b9b16892a320ca5392f16c6fc1cc092ba27abb0b  \n12:41\u00a0<vmassol>\u00a0seems the problem is that the test has not been updated  \n12:47\u00a0<vmassol>\u00a0we need to be more careful as devs and at the very minimum run the unit tests for the code that is modified...  \n12:48\u00a0<vmassol>\u00a0(sergiu/marta if you read the backlogs this message was for your you ;))  \n12:48\u00a0<vmassol>\u00a0\\*for you  \n12:49\u00a0<vmassol>\u00a0btw this shows that 1/ as devs we don't check jenkins enough and 2/ that a build manager could have helped here (the BM being not necessary if we collectively do 1/)  \n12:49\u00a0<vmassol>\u00a0trying to fix the problem  \n12:52\u00a0<vmassol>\u00a0I'll assume that the code is right since I don't understand the commit ....  \n13:09\u00a0<vmassol>\u00a0fixed...  \n13:09\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* rfe0439a\u000f \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/test/java/com/xpn/xwiki/web/DownloadActionTest.java :\u000f XWIKI-7311: Preserve non-ASCII characters in atachment names when downloading attachments ...  \n14:21\u00a0<jvdrean>\u00a0has quit  \n14:56\u00a0<CIA-114>\u00a0Marius Dumitru Florea\u000f master\u000f \\* r58570c9\u000f \u000f/ xwiki-platform-core/xwiki-platform-web/src/main/webapp/resources/js/xwiki/lightbox/lightbox.js :\u000f XWIKI-7061: Unable to add users to a group on IE9 - http://git.io/64oRqA  \n14:57\u00a0<CIA-114>\u00a0Marius Dumitru Florea\u000f stable-3.3.x\u000f \\* rdb41be5\u000f \u000f/ xwiki-platform-core/xwiki-platform-web/src/main/webapp/resources/js/xwiki/lightbox/lightbox.js :\u000f XWIKI-7061: Unable to add users to a group on IE9 ...  \n15:30\u00a0<sburjan`>\u00a0has joined #xwiki  \n15:40\u00a0<DrLou>\u00a0has joined #xwiki  \n16:17\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* r38703a4\u000f \u000f/ (147 files in 32 dirs):\u000f XWIKI-7320: Move UI Test framework and Platform PageObject classes to the Platform Test module - http://git.io/2MFMyQ  \n16:18\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* r885dacb\u000f \u000f/ (54 files in 5 dirs):\u000f XWIKI-7320: Move UI Test framework and Platform PageObject classes to the Platform Test module - http://git.io/UvPrGQ  \n17:41\u00a0<sdumitriu>\u00a0has joined #xwiki  \n18:53\u00a0<mflorea>\u00a0has quit  \n20:15\u00a0<lucaa>\u00a0has quit  \n20:40\u00a0<vmassol>\u00a0has quit  \n21:13\u00a0<abusenius>\u00a0has joined #xwiki  \n23:29\u00a0<rrodriguez>\u00a0has joined #xwiki  \n\n"}