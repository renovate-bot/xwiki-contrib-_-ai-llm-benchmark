{"id": "dev:IRC.xwikiArchive20130613", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130613", "title": "IRC Archive for channel #xwiki on 13 June 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<kstuart>\u00a0has quit  \n00:20\u00a0<kstuart>\u00a0has joined #xwiki  \n00:21\u00a0<abusenius\\_>\u00a0has quit  \n01:51\u00a0<Denis>\u00a0has quit  \n02:28\u00a0<sburjan`>\u00a0has quit  \n02:34\u00a0<kstuart>\u00a0has quit  \n03:12\u00a0<chalx>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n05:33\u00a0<SvenDowideit>\u00a0has quit  \n05:36\u00a0<SvenDowideit\\_>\u00a0has joined #xwiki  \n05:51\u00a0<Denis>\u00a0has quit  \n07:14\u00a0<mflorea>\u00a0has joined #xwiki  \n07:58\u00a0<vmassol>\u00a0has joined #xwiki  \n08:09\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:15\u00a0<evalica>\u00a0has joined #xwiki  \n08:30\u00a0<tmortagne>\u00a0guys anyone know how to disable mail displayer obfuscator ?  \n08:31\u00a0<tmortagne>\u00a0it's pretty useless in an intranet and I actually don't have any idea how to get the real mail without editing the user profile  \n08:37\u00a0<sburjan`>\u00a0has joined #xwiki  \n08:41\u00a0<mflorea>\u00a0tmortagne: if you're referring to the new email property displayer, it is localed in displayer\\_email.vm, so one solution is to delete/rename that Velocity template  \n08:41\u00a0<tmortagne>\u00a0mflorea: so there is no configuration for this behavior ?  \n08:43\u00a0<mflorea>\u00a0unfortunately no. We could have an XWiki preference, and check it in displayer\\_email.vm  \n08:45\u00a0<vmassol>\u00a0mflorea: that's part of the display module? trying to find documentation on xwiki.org about it  \n08:45\u00a0<tmortagne>\u00a0yes, when you are in an intranet and you want people to know about each other mails it's quite a pain, I'm actually not sure it's good to have that obfuscator by default  \n08:46\u00a0<vmassol>\u00a0I don't see any Display Module on e.x.o  \n08:47\u00a0<vmassol>\u00a0found the jira: http://jira.xwiki.org/browse/XWIKI-9071  \n08:47\u00a0<tmortagne>\u00a0having some admin want to hide mails in a public website and search a bit for it is ok while having new user completely lost with his mail \"broken\" is not very nice  \n08:48\u00a0<tmortagne>\u00a0vmassol: I'm not talking about that  \n08:48\u00a0<mflorea>\u00a0tmortagne: having an XWiki preference is the easiest solution. And I'm fine with having obfuscation disabled by default  \n08:48\u00a0<vmassol>\u00a0marius is apparently  \n08:48\u00a0<tmortagne>\u00a0no he is not  \n08:48\u00a0<tmortagne>\u00a0we are talking about configuring the displayer  \n08:48\u00a0<vmassol>\u00a0since this is the commit that added displayer\\_email.vm  \n08:49\u00a0<vmassol>\u00a0ok I'll stop trying to help sorry for helping  \n08:49\u00a0<vmassol>\u00a0going back to my stuff  \n08:49\u00a0<tmortagne>\u00a0vmassol: we are not talking about a bug here introduce by some commit, we are talking about how to make the displayer configurable  \n08:49\u00a0<mflorea>\u00a0tmortagne: I'm talking about adding a check in the displayed for this \"obfuscate email\" global preference  \n08:50\u00a0<mflorea>\u00a0s/displayed/displayer  \n08:50\u00a0<tmortagne>\u00a0mflorea: yes I understood  \n08:52\u00a0<vmassol>\u00a0mflorea: btw apparently there was a way to set non obsfucated before it seems by setting $obsfucateEmail to true: https://github.com/xwiki/xwiki-platform/commit/adf37dd2991428f2b2bcd972a323403ec58b29dd  \n08:53\u00a0<mflorea>\u00a0vmassol: and how was an admin using it?  \n08:53\u00a0<vmassol>\u00a0mflorea: do we have documentation that explains how displayer\\_\\*.vm is used?  \n08:53\u00a0<vmassol>\u00a0mflorea: there was no ui for it AFAIK  \n08:53\u00a0<mflorea>\u00a0so it wasn't usable  \n08:53\u00a0<vmassol>\u00a0by a non dev, no it wasn't  \n08:54\u00a0<vmassol>\u00a0a dev could set it in layoutextravars.vm  \n08:54\u00a0<mflorea>\u00a0tmortagne is not talking about dropping the obfuscation for a single sheet, he wants it for the entire wiki  \n08:54\u00a0<mflorea>\u00a0so $obsfucateEmail wouldn't help even a dev  \n08:54\u00a0<tmortagne>\u00a0layoutextravars.vm is for the whole wiki  \n08:55\u00a0<tmortagne>\u00a0it's possible some skins have been broken  \n08:56\u00a0<vmassol>\u00a0mflorea: I don't know how displayer\\_email.vm works (couldn't find doc). Can we be sure that whenever an email field is used it's going to be used or does it depend on how the email field is displayed?  \n08:56\u00a0<tmortagne>\u00a0(even if a preference would make a lot more sense)  \n08:57\u00a0<mflorea>\u00a0vmassol: it work like any other default custom displayer (displayer\\_\\*.vm)  \n08:57\u00a0<vmassol>\u00a0yes but I don't know how that works  \n08:57\u00a0<vmassol>\u00a0that's why I'm looking for some doc  \n08:57\u00a0<vmassol>\u00a0do we have some?  \n08:57\u00a0<tmortagne>\u00a0I doubt we have  \n08:58\u00a0<vmassol>\u00a0is that feature parts of the Display module?  \n08:58\u00a0<mflorea>\u00a0it's from oldcore  \n08:59\u00a0<mflorea>\u00a0http://jira.xwiki.org/browse/XWIKI-8085  \n08:59\u00a0<bouquetf>\u00a0has quit  \n09:02\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:02\u00a0<vmassol>\u00a0I wonder where we should document this  \n09:04\u00a0<vmassol>\u00a0mflorea: created XINFRA-89  \n09:05\u00a0<mflorea>\u00a0vmassol: why XINFRA?  \n09:05\u00a0<vmassol>\u00a0because that's where we put jira for infra  \n09:05\u00a0<vmassol>\u00a0including xwiki.org  \n09:05\u00a0<vmassol>\u00a0\\*jiras  \n09:06\u00a0<vmassol>\u00a0see http://jira.xwiki.org/browse/XINFRA  \n09:06\u00a0<mflorea>\u00a0ok  \n09:06\u00a0<vmassol>\u00a0(click components)  \n09:09\u00a0<tmortagne>\u00a0created http://jira.xwiki.org/browse/XWIKI-9224  \n09:10\u00a0<mflorea>\u00a0tmortagne: I created one too :)  \n09:10\u00a0<mflorea>\u00a0actually, both are valid  \n09:11\u00a0<mflorea>\u00a0mine is for adding the preference, and yours is about having it set to false by default  \n09:11\u00a0<tmortagne>\u00a0lets say that :)  \n09:13\u00a0<tmortagne>\u00a0mflorea: I overwritten displayer\\_email.vm in the skin but it does not seems to be taken into account  \n09:13\u00a0<tmortagne>\u00a0sounds like class displayers skip the skin and go directly to the templates folder  \n09:14\u00a0<tmortagne>\u00a0hmm wait I may have forgotten something  \n09:16\u00a0<tmortagne>\u00a0nop, does not work  \n09:17\u00a0<mflorea>\u00a0let me check the code  \n09:17\u00a0<mflorea>\u00a0(I didn't wrote it :) )  \n09:17\u00a0<tmortagne>\u00a0mflorea: don't worry about this I will look at it  \n09:17\u00a0<tmortagne>\u00a0you have enough stuff on your hands  \n09:17\u00a0<mflorea>\u00a0ok  \n09:18\u00a0<msmeria>\u00a0has joined #xwiki  \n09:24\u00a0<mflorea>\u00a0tmortagne: please check the quality build afterwards. It's fails on Solr API.  \n09:24\u00a0<tmortagne>\u00a0that's weird I built it on my side with -Pquality  \n09:24\u00a0<tmortagne>\u00a0checking  \n09:41\u00a0<sburjan>\u00a0has joined #xwiki  \n09:43\u00a0<tmortagne>\u00a0mflorea: displayer\\_email.vm does not seems to be used at all actually, replace it's content by \"fs displayer\" and I get my mail (obfuscated)  \n09:43\u00a0<tmortagne>\u00a0will debug it  \n09:50\u00a0<msmeria>\u00a0tmortagne: solr search doesn't work at all on the latest snapshot  \n09:51\u00a0<tmortagne>\u00a0downloading it  \n09:57\u00a0<msmeria>\u00a0tmortagne: when you index or reindex it does it in like 1sec, but I don't think anything gets indexed  \n09:58\u00a0<tmortagne>\u00a0msmeria: when you start index it pile all the stuff to index in a backgroud thread, it not because you get the page that it's done  \n09:58\u00a0<tmortagne>\u00a0a better test is to save one page and search for it  \n09:58\u00a0<tmortagne>\u00a0instead of reindexing the whole wiki  \n09:58\u00a0<Putchhat>\u00a0has joined #xwiki  \n09:58\u00a0<tmortagne>\u00a0that way to can test right away  \n10:01\u00a0<Putchhat>\u00a0has quit  \n10:02\u00a0<msmeria>\u00a0tmortagne: I did that. the new page doesn't appear in the search results on the Main.Search page, but it does appear as a suggestion when I search for it  \n10:02\u00a0<tmortagne>\u00a0msmeria: forget about the suggestion it does not have anything to do with SOLR  \n10:02\u00a0<tmortagne>\u00a0I just created a page and searched for it's name and I can find it  \n10:02\u00a0<tmortagne>\u00a0search for \\*:\\*  \n10:03\u00a0<tmortagne>\u00a0that should give you all the indexed documents that are not hidden  \n10:03\u00a0<msmeria>\u00a0I get 36 results  \n10:04\u00a0<msmeria>\u00a0but my new page still isn't in there  \n10:04\u00a0<tmortagne>\u00a0and when you search for the page name of one of theses results you get nothing ?  \n10:04\u00a0<tmortagne>\u00a0msmeria: did you restarted ?  \n10:04\u00a0<tmortagne>\u00a0you probabaly have the index still running  \n10:04\u00a0<tmortagne>\u00a0so your page is simply the last in the queue  \n10:04\u00a0<msmeria>\u00a0tmortagne: I didn't. restarting now  \n10:05\u00a0<msmeria>\u00a0is that normal ?  \n10:05\u00a0<msmeria>\u00a0having to restart the wiki in order to see new pages ?  \n10:05\u00a0<tmortagne>\u00a0it not what I said  \n10:05\u00a0<tmortagne>\u00a0you asked to index the whole wiki so it's what it's doing  \n10:05\u00a0<msmeria>\u00a0ah...  \n10:05\u00a0<tmortagne>\u00a0your page is going to be indexed when it finished all the other pages  \n10:05\u00a0<msmeria>\u00a0got it now :)  \n10:06\u00a0<msmeria>\u00a0tmortagne: thanks !  \n10:07\u00a0<msmeria>\u00a0and sorry for the false alarm  \n10:07\u00a0<tmortagne>\u00a0msmeria: I seems to have an issue with content search with the last snapshot, will let you test that too  \n10:07\u00a0<tmortagne>\u00a0page name and title works well  \n10:08\u00a0<msmeria>\u00a0tmortagne: ok, I'll test that too  \n10:12\u00a0<mflorea>\u00a0tmortagne: I know.. I remembered http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki51M1#HIssuesspecifictoXWiki5.1Milestone1  \n10:12\u00a0<mflorea>\u00a0re email..  \n10:13\u00a0<tmortagne>\u00a0mflorea: right, that's probably the issue  \n10:20\u00a0<chalx>\u00a0has joined #xwiki  \n10:26\u00a0<tmortagne>\u00a0msmeria: actually content search seems ok, I don't know what I did before but will still wait your test on it  \n10:28\u00a0<tmortagne>\u00a0mflorea: that was it  \n10:29\u00a0<mflorea>\u00a0ok  \n10:29\u00a0<tmortagne>\u00a0still, I'm wondering why EM did not changed the field  \n10:29\u00a0<tmortagne>\u00a0will have to check that  \n10:29\u00a0<tmortagne>\u00a0ha it's a generated class  \n10:29\u00a0<tmortagne>\u00a0that's why  \n10:29\u00a0<mflorea>\u00a0yep  \n10:29\u00a0<tmortagne>\u00a0shouldn't we check the field type in the init code ?  \n10:30\u00a0<mflorea>\u00a0I think we should  \n10:32\u00a0<tmortagne>\u00a0actually I'm wondering if that should not be the job of all the BaseClass#add\\*Field but I guess it's a too dangerous change for an API that old  \n10:33\u00a0<tmortagne>\u00a0(it's also very bad name since those set/put fields and don't add them)  \n10:43\u00a0<msmeria>\u00a0tmortagne: http://pastebin.com/F3BCq9Lq I got this while Solr is indexing the wiki. A question: when a page is indexed (appears in the results) does that mean its content is indexed as well ? Or it might mean that just its name/title is indexed ?  \n10:44\u00a0<tmortagne>\u00a0msmeria: http://pastebin.com/F3BCq9Lq contains errors about lucene, not solr  \n10:45\u00a0<tmortagne>\u00a0and yes the content is indexed since we want to search in content too  \n10:45\u00a0<tmortagne>\u00a0probably the main thing we want to search in :)  \n10:47\u00a0<msmeria>\u00a0tmortagne: than I guess content search doesn't work  \n10:47\u00a0<tmortagne>\u00a0msmeria: what did you tested ?  \n10:47\u00a0<msmeria>\u00a0the page appears when searching for its name, but when I search its content I don't get any results  \n10:47\u00a0<msmeria>\u00a0I created a new page with content and then I triggered indexing the wiki  \n10:48\u00a0<tmortagne>\u00a0msmeria: don't trigger indexing  \n10:48\u00a0<msmeria>\u00a0hmm...  \n10:48\u00a0<tmortagne>\u00a0msmeria: could you try the following:  \n10:48\u00a0<tmortagne>\u00a0\\* stop  \n10:48\u00a0<tmortagne>\u00a0\\* delete solr folder in data  \n10:48\u00a0<tmortagne>\u00a0\\* restart  \n10:49\u00a0<tmortagne>\u00a0\\* create a page and search for its content  \n10:49\u00a0<msmeria>\u00a0tmortagne: ok I'll do that  \n10:49\u00a0<tmortagne>\u00a0and forget about solr admin  \n10:49\u00a0<msmeria>\u00a0I still don't know why I get lucene errors in the console when my search engine is solr  \n10:50\u00a0<tmortagne>\u00a0lucne is never disabled  \n10:50\u00a0<msmeria>\u00a0ah..  \n10:50\u00a0<tmortagne>\u00a0what you choose in the search admin is not the one running  \n10:50\u00a0<tmortagne>\u00a0it's the one you get by default when searching  \n10:50\u00a0<tmortagne>\u00a0but all searching engine are still available  \n10:51\u00a0<tmortagne>\u00a0what you get in the suggest come from lucene plugin  \n10:53\u00a0<sburjan>\u00a0tmortagne: so we didn't fixed the issue I reported you on Monday ? about the pages from the default package ?  \n10:53\u00a0<tmortagne>\u00a0sburjan: I did fixed it  \n10:53\u00a0<tmortagne>\u00a0you can try saving Sandbox page  \n10:54\u00a0<sburjan>\u00a0and without touching the pages from the default package it won't work ?  \n10:54\u00a0<tmortagne>\u00a0sburjan: the existing pages are not automatically indexed at startup, that's not done yet and it's not the issue you reported  \n10:55\u00a0<tmortagne>\u00a0you save the page to trigger indexing not to modify it  \n10:55\u00a0<tmortagne>\u00a0it won't change anything to the page  \n10:55\u00a0<sburjan>\u00a0well my Issue was that I can't find nothing if I search for \"Sandbox\" or \"WebHome\". I don;t know the technical details why it was not working  \n10:56\u00a0<tmortagne>\u00a0sburjan: I explained to you why it was not working, those page don't have any language and the UI search for en pages  \n10:56\u00a0<sburjan>\u00a0yes but users don't care about technical aspects, they want search to work on all docs  \n10:56\u00a0<tmortagne>\u00a0and ?  \n10:57\u00a0<sburjan>\u00a0and ATM it's not behaving how users would expect  \n10:57\u00a0<msmeria>\u00a0tmortagne: I tested what you said and content search doesn't seem to work  \n10:57\u00a0<msmeria>\u00a0searching by name works  \n10:57\u00a0<tmortagne>\u00a0sburjan: again the existing pages are not yet automatically indexed at startup  \n10:57\u00a0<tmortagne>\u00a0this is nothing new  \n10:59\u00a0<tmortagne>\u00a0what content do you have and what did you searched ?  \n10:59\u00a0<tmortagne>\u00a0msmeria:  \n10:59\u00a0<tdelafosse>\u00a0has joined #xwiki  \n11:00\u00a0<tmortagne>\u00a0sburjan: when you don't use the jetty/hsqldb distribution pages are already indexed because you have to import them  \n11:00\u00a0<msmeria>\u00a0I had: \"these are random words\" and I searched for these, random and words in this format: these, \\*these, these\\*, \\*these\\*  \n11:00\u00a0<tmortagne>\u00a0msmeria: trying  \n11:03\u00a0<tmortagne>\u00a0I have a page were content works and another were it does not work and I created them the exact same way, will have to try debugging it but pretty much everything is done on solr side...  \n11:11\u00a0<tmortagne>\u00a0msmeria: I want to try something  \n11:12\u00a0<msmeria>\u00a0what ?  \n11:12\u00a0<tmortagne>\u00a0coul you try to resave your document that contain \"these are random words\"  \n11:12\u00a0<tmortagne>\u00a0and then search for \"random\"  \n11:13\u00a0<msmeria>\u00a0tmortagne: sure thing  \n11:14\u00a0<tmortagne>\u00a0looks like there is a bug with first version of documents (will look at it)  \n11:14\u00a0<tmortagne>\u00a0when I resave the document I get content search working  \n11:14\u00a0<tmortagne>\u00a0I would like to know if you have the same thing  \n11:15\u00a0<msmeria>\u00a0tmortagne: you are right. content search works after saving  \n11:15\u00a0<sburjan>\u00a0tmortagne: testing atm a XEM on Tomcat + DW, to see if it indexes the pages as they are imported  \n11:15\u00a0<tmortagne>\u00a0msmeria: and when you search for \"these\" or \"are\" you get nothing right ?  \n11:15\u00a0<msmeria>\u00a0right  \n11:15\u00a0<msmeria>\u00a0\"words\" works  \n11:16\u00a0<tmortagne>\u00a0that's because those 2 words are configured as stopwords in the english parser which mean they are not taken into account  \n11:16\u00a0<tmortagne>\u00a0like google does not care when you put things like this in the search  \n11:16\u00a0<tmortagne>\u00a0looking at the first version bug now  \n11:18\u00a0<msmeria>\u00a0tmortagne: just tested with another doc with other words and I can find all of them after saving the doc  \n11:18\u00a0<tmortagne>\u00a0sburjan: when you are done importing search for \\*:\\* to get all pages (hidden pages are well hidden by default)  \n11:18\u00a0<tmortagne>\u00a0msmeria: you mean saving twice the doc right ?  \n11:18\u00a0<msmeria>\u00a0right  \n11:18\u00a0<tmortagne>\u00a0ok  \n11:19\u00a0<tmortagne>\u00a0lets see if I can understand what is happening with first version  \n11:19\u00a0<msmeria>\u00a0good luck !  \n11:21\u00a0<sburjan>\u00a0tmortagne: after DW is complete, I switch to SOLR search (WITHOUT reindexing anything), then I search for \"\\*:\\*\". I get 2 results: XWikiServerClassTemplate and XWikiServerClassTemplate  \n11:22\u00a0<sburjan>\u00a0\"Sandbox\" and \"WebHome\" return 0 results  \n11:23\u00a0<tmortagne>\u00a0sburjan: let me look at the issue with first version first, it might be related  \n11:33\u00a0<vmassol1>\u00a0has joined #xwiki  \n11:35\u00a0<vmassol>\u00a0has quit  \n11:41\u00a0<tmortagne>\u00a0msmeria: first save should be ok with my last commit  \n11:41\u00a0<tmortagne>\u00a0doing the same as you now that this issue is fixed to see  \n11:41\u00a0<tmortagne>\u00a0sburjan  \n11:42\u00a0<msmeria>\u00a0tmortagne: ok I'll test again when there's a new snapshot  \n11:46\u00a0<tmortagne>\u00a0mflorea: I will have to go in about 15 min and won't be available until Monday, in any case IMO there is no reason to block a M2 for any issue found on SOLR  \n11:47\u00a0<mflorea>\u00a0tmortagne: ok, but I'll leave the release for tomorrow  \n11:58\u00a0<polx>\u00a0has joined #xwiki  \n12:05\u00a0<polx>\u00a0Hello XWiki experts, what's the best practice to write a view that outputs xml (so, no wiki syntax, no html, no escaping, no formatting) in syntax 2.1?  \n12:06\u00a0<vmassol1>\u00a0a view = a page right?  \n12:06\u00a0<vmassol1>\u00a0(polx)  \n12:07\u00a0<vmassol1>\u00a0is now known as <vmassol>  \n12:07\u00a0<polx>\u00a0a view = a page?  \n12:07\u00a0<polx>\u00a0oh, yes, well xpage=plain  \n12:07\u00a0<vmassol>\u00a0you just need to set the response type  \n12:07\u00a0<vmassol>\u00a0and use xpage=plain yes  \n12:07\u00a0<vmassol>\u00a0you can check the RSS feed pages  \n12:08\u00a0<vmassol>\u00a0$response.setContentType('application/rss+xml')  \n12:08\u00a0<vmassol>\u00a0that's all  \n12:08\u00a0<polx>\u00a0application/xml works too?  \n12:08\u00a0<vmassol>\u00a0sure  \n12:08\u00a0<vmassol>\u00a0any valid mime type will work  \n12:08\u00a0<vmassol>\u00a0it just gives some info to the client  \n12:08\u00a0<polx>\u00a0trying  \n12:08\u00a0<vmassol>\u00a0you don't really need it  \n12:09\u00a0<vmassol>\u00a0depends what your client needs to do with it  \n12:10\u00a0<polx>\u00a0so using this: {{velocity filter=\"none\" wiki=\"false\"}}$response.setContentType(\"application/xml\")  \n12:10\u00a0<polx>\u00a0still escapes me all the \"<\".  \n12:12\u00a0<vmassol>\u00a0polx: see http://playground.xwiki.org/xwiki/bin/view/Blog/BlogRss?xpage=plain  \n12:12\u00a0<vmassol>\u00a0http://playground.xwiki.org/xwiki/bin/view/Blog/BlogRss?viewer=code  \n12:16\u00a0<sburjan>\u00a0tmortagne: ok. gonna wait for a newer snapshot  \n12:17\u00a0<polx>\u00a0ok got it a bit.  \n12:19\u00a0<sburjan>\u00a0tmortagne: it seems now that the search \u00a0works. I did nothing, just went to lunch. so it means that an indexing threas was running in the background  \n12:19\u00a0<sburjan>\u00a0\\*thread  \n12:20\u00a0<polx>\u00a0@vmassol, the problem is wiki=\"false\" on the velocity macro. That's the thing that fails.  \n12:20\u00a0<tmortagne>\u00a0sburjan: all indexing is done on background that's for sure but it did not started alone, you maybe tried too quickly or you only had hidden document when you tried  \n12:20\u00a0<sburjan>\u00a0tmortagne: I tried too quickly  \n12:21\u00a0<tmortagne>\u00a0sburjan: in general when doing test on standard document you should probably enabled hidden documents in your profile because most of them are hidden  \n12:21\u00a0<sburjan>\u00a0well I am admin anyway, so I should see t hem by default, right ?  \n12:21\u00a0<polx>\u00a0vmassol: so should the documentation of the velocity macro be updated to say that \"parsed as plain text\" means it's heavily escaped?  \n12:24\u00a0<sburjan>\u00a0tmortagne: another remark. In the facet about language, there is a checkbox which has no language. I guess those are the docs which don;t have a language set ?  \n12:24\u00a0<tmortagne>\u00a0those are probable the document with the language \"\" yes  \n12:25\u00a0<chalx>\u00a0has quit  \n12:25\u00a0<tmortagne>\u00a0we'll need to improve a bit the UI to displaye something like \"No language\" or something like this  \n12:25\u00a0<tmortagne>\u00a0note: there is still an issue with content search for document with no language  \n12:26\u00a0<sburjan>\u00a0also, when I hover over my results, the URL is something like: http://localhost:8080/xwiki/bin/view/Sandbox/TestPage2?language= .. seems the language param is added  \n12:26\u00a0<tmortagne>\u00a0looks like \\* means \"one or more\" for solr...  \n12:26\u00a0<tmortagne>\u00a0sburjan: I don't know much about the UI, you will have to ask mflorea for details  \n12:26\u00a0<sburjan>\u00a0ok  \n12:29\u00a0<vmassol>\u00a0polx:  \n12:30\u00a0<vmassol>\u00a0polx: wdym by \"heavily escaped\"  \n12:32\u00a0<sburjan>\u00a0tmortagne: small stack: http://pastebin.com/imic5eQe  \n12:33\u00a0<tmortagne>\u00a0sburjan: do you have any idea how to reproduce it ? because the error itself does not make much sense to me so I would need to have detail on how to reproduce so that I can debug it  \n12:35\u00a0<Slashman>\u00a0has joined #xwiki  \n12:49\u00a0<polx>\u00a0has quit  \n13:02\u00a0<vmassol>\u00a0sdumitriu: ping  \n13:03\u00a0<vmassol>\u00a0sdumitriu: do you remember why adding an object changes the content author but updating an object property doesn't?  \n13:36\u00a0<tmortagne>\u00a0has quit  \n13:43\u00a0<mflorea>\u00a0has quit  \n14:22\u00a0<chalx>\u00a0has joined #xwiki  \n14:27\u00a0<msmeria>\u00a0has quit  \n14:35\u00a0<msmeria>\u00a0has joined #xwiki  \n15:06\u00a0<sdumitriu>\u00a0vmassol: No, AFAIK any object change is supposed to change only the author, not the contentAuthor  \n15:07\u00a0<vmassol>\u00a0sdumitriu: ok thanks, I've sent a mail to confirm this actually  \n15:07\u00a0<vmassol>\u00a0since it's going to be a pretty important change from what we have now  \n15:08\u00a0<vmassol>\u00a0sdumitriu: I have a fix for http://jira.xwiki.org/browse/XWIKI-8754 locally but I'll need some review before I apply it  \n15:10\u00a0<sdumitriu>\u00a0vmassol: OK, shoot  \n15:10\u00a0<mflorea>\u00a0has joined #xwiki  \n15:10\u00a0<vmassol>\u00a0thanks, I need 5 more minutes  \n15:16\u00a0<vmassol>\u00a0sdumitriu: https://gist.github.com/vmassol/5773559/raw/c5e14304ca11104f2f9c75d12977fe4a54072283/gistfile1.txt  \n15:16\u00a0<vmassol>\u00a0it's 2 main changes  \n15:16\u00a0<vmassol>\u00a0change 1:  \n15:16\u00a0<vmassol>\u00a0in query module also return the language  \n15:17\u00a0<vmassol>\u00a0(this one is my biggest worry since I think it was probably returning a String before and now it's an object array, strangely it works fine in velocity)  \n15:17\u00a0<vmassol>\u00a0change 2: modify the livetable to get the translated doc  \n15:18\u00a0<vmassol>\u00a0I haven't run the full platform yet to see if it breaks things  \n15:18\u00a0<vmassol>\u00a0going to do it now  \n15:20\u00a0<vmassol>\u00a0bb in 15 minutes  \n15:21\u00a0<vmassol>\u00a0fyi when no unique filter is used I get: https://www.evernote.com/shard/s119/sh/f4b8d1f5-faf8-4f3f-a6e2-f56aa1490bc0/4c0e35246f306a68103ca783d71470a7  \n15:35\u00a0<vmassol>\u00a0back  \n15:37\u00a0<evalica>\u00a0has quit  \n15:47\u00a0<sdumitriu>\u00a0vmassol: My main concern is that there's an API break...  \n15:47\u00a0<sdumitriu>\u00a0gridresult\\_buildRowJSON might be used someplace else  \n15:47\u00a0<sdumitriu>\u00a0Or it might be redefined  \n15:47\u00a0<vmassol>\u00a0yes a small break  \n15:47\u00a0<vmassol>\u00a0however  \n15:47\u00a0<sdumitriu>\u00a0For custom livetables  \n15:47\u00a0<vmassol>\u00a0strangely  \n15:47\u00a0<vmassol>\u00a0it worked even when I didn't modify gridresult\\_buildRowJSON  \n15:48\u00a0<vmassol>\u00a0maybe some veloctiy conversion voodoo that I haven't figured out  \n15:48\u00a0<vmassol>\u00a0(didn't research it yet)  \n15:50\u00a0<polx>\u00a0has joined #xwiki  \n15:59\u00a0<sdumitriu>\u00a0vmassol: Indeed, it works with getDocument(String[]), but I have no idea why  \n15:59\u00a0<sdumitriu>\u00a0Maybe a side effect since we added the smarter parameter conversion?  \n15:59\u00a0<vmassol>\u00a0maybe  \n16:00\u00a0<msmeria>\u00a0has quit  \n16:07\u00a0<vmassol>\u00a0sdumitriu: the biggest issue IMO is on the java side  \n16:07\u00a0<sdumitriu>\u00a0Indeed  \n16:07\u00a0<vmassol>\u00a0instead of returning a List of String we now return a List of Object[]  \n16:08\u00a0<vmassol>\u00a0ok there's a solution  \n16:08\u00a0<vmassol>\u00a0(for the java side)  \n16:08\u00a0<vmassol>\u00a0it's to introduce a language QueryFilter  \n16:08\u00a0<vmassol>\u00a0that adds the \"doc.language\"  \n16:09\u00a0<vmassol>\u00a0and then use it where we need it, ie in the livetable query  \n16:09\u00a0<vmassol>\u00a0(for ,now)  \n16:09\u00a0<vmassol>\u00a0basically filters allow to make the query dynamoc  \n16:09\u00a0<vmassol>\u00a0\\*dynamic  \n16:09\u00a0<sdumitriu>\u00a0Sounds better  \n16:10\u00a0<vmassol>\u00a0\u00a0it's a bit of string manipulation voodoo but it should work  \n16:11\u00a0<vmassol>\u00a0hmmm  \n16:11\u00a0<vmassol>\u00a0not sure actually  \n16:11\u00a0<vmassol>\u00a0checking the hook point  \n16:11\u00a0<vmassol>\u00a0yes it's ok  \n16:11\u00a0<vmassol>\u00a0pfew  \n16:11\u00a0<vmassol>\u00a0the filters are applied after completeShortFormStatement()  \n16:24\u00a0<vmassol>\u00a0sdumitriu: once I've fixed the java part, is the patch ok from your POV to be committed?  \n16:24\u00a0<sdumitriu>\u00a0Yes  \n16:24\u00a0<vmassol>\u00a0ok cool  \n16:37\u00a0<polx>\u00a0vmassol: member:polx-wdym by \"heavily escaped\". I mean it will be escaped as much as needed for the plain text to have the same appearance within html.  \n16:38\u00a0<vmassol>\u00a0this isn't the velocity macro that does this  \n16:38\u00a0<vmassol>\u00a0(polx)  \n16:39\u00a0<vmassol>\u00a0it's the HTML renderer  \n16:39\u00a0<vmassol>\u00a0there's no escaping done in the velocity macro  \n16:39\u00a0<polx>\u00a0There is some form of it.  \n16:40\u00a0<polx>\u00a0There is a radical difference between {{velocity filter=\"none\"}}{{html clean=\"false\" wiki=\"false\"}} and {{velocity filter=\"none\" wiki=\"false\"}}{{html clean=\"false\" wiki=\"false\"}}  \n16:40\u00a0<vmassol>\u00a0polx: you can check PlainTextStreamParser if you wish to see  \n16:40\u00a0<vmassol>\u00a0for yourslef  \n16:40\u00a0<polx>\u00a0I think it's just about clarity of documentation.  \n16:41\u00a0<vmassol>\u00a0yes and I tell you that the velocity macro doesn't do any escaping :)  \n16:41\u00a0<vmassol>\u00a0(when wiki=false)  \n16:41\u00a0<polx>\u00a0It's a parameter of the velocity macro so it is done by the macro... I am not sure any page author wants to know whether this is part of a satelite component of the macro or not.  \n16:43\u00a0<vmassol>\u00a0sorry but it has nothing to do  \n16:43\u00a0<vmassol>\u00a0and it's not even a satellite  \n16:44\u00a0<vmassol>\u00a0the role of a macro is not to output HTML  \n16:44\u00a0<vmassol>\u00a0it doens't do that  \n16:44\u00a0<vmassol>\u00a0the output is decided by the user of the macr  \n16:44\u00a0<vmassol>\u00a0macro  \n16:44\u00a0<vmassol>\u00a0and it can be anything  \n16:44\u00a0<vmassol>\u00a0html, pdf, etc  \n16:44\u00a0<vmassol>\u00a0and it's that code that will decide what to do  \n16:44\u00a0<vmassol>\u00a0not the macro  \n16:45\u00a0<vmassol>\u00a0documenting it in the velocity macro is just plain wrong  \n16:45\u00a0<vmassol>\u00a0because it may not even have this behavior  \n16:46\u00a0<vmassol>\u00a0polx: TBH I don't really understand the issue  \n16:47\u00a0<vmassol>\u00a0wiki=true will consider the content contains wiki syntax and will parse it with a wiki syntax parser  \n16:48\u00a0<vmassol>\u00a0wiki=false will parse with a plain text parser  \n16:53\u00a0<polx>\u00a0has quit  \n17:01\u00a0<polx>\u00a0has joined #xwiki  \n17:04\u00a0<polx>\u00a0has quit  \n17:07\u00a0<polx>\u00a0has joined #xwiki  \n17:09\u00a0<polx>\u00a0and \"nothing\" will not parse it. That's what I wanted!  \n17:17\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n17:30\u00a0<sburjan>\u00a0has quit  \n17:31\u00a0<chalx>\u00a0has quit  \n17:36\u00a0<polx>\u00a0has quit  \n17:54\u00a0<vmassol>\u00a0sdumitriu: I've finished implementing a language filter but I've just realized it's not good enough  \n17:55\u00a0<vmassol>\u00a0right now it returns all docs in all available translations  \n17:55\u00a0<vmassol>\u00a0but I need the other behavior  \n17:55\u00a0<vmassol>\u00a0s/need/also need/  \n17:55\u00a0<vmassol>\u00a0ie only return the doc for the current user language  \n17:55\u00a0<sdumitriu1>\u00a0But is the language filter always applied?  \n17:55\u00a0<vmassol>\u00a0it's more performant to do the filtering on the server side than in the livetable macro  \n17:56\u00a0<sdumitriu1>\u00a0Can't it be pulled bu the livetable?  \n17:56\u00a0<vmassol>\u00a0yes sure  \n17:56\u00a0<vmassol>\u00a0right nowI have:  \n17:56\u00a0<vmassol>\u00a0\u00a0\u00a0#set($query = $services.query.hql($sql).addFilter('language').addFilter('hidden').addFilter('unique').setLimit($limit).setOffset($offset).bindValues($sqlParams))  \n17:56\u00a0<vmassol>\u00a0but I've reliazed that I cannot combine \"language\" and \"unique\"  \n17:56\u00a0<vmassol>\u00a0that won't work  \n17:57\u00a0<sdumitriu1>\u00a0Indeed  \n17:57\u00a0<vmassol>\u00a0so I need to remove \"unique\" and instead have that behavior in the lanague filter  \n17:57\u00a0<sdumitriu1>\u00a0Oh, I see  \n17:57\u00a0<vmassol>\u00a0basically I'd like that language filter to have 2 possible behaviors  \n17:58\u00a0<vmassol>\u00a0(ie configurable)  \n17:58\u00a0<vmassol>\u00a0either return all translations  \n17:58\u00a0<sdumitriu1>\u00a0You're trying to get only one translation in the livetable, but you want to know which translation it is  \n17:58\u00a0<vmassol>\u00a0or only return the translation for the current language  \n17:58\u00a0<sdumitriu1>\u00a0Make two filters  \n17:58\u00a0<sdumitriu1>\u00a0language + currentLanguage  \n17:58\u00a0<vmassol>\u00a0not sure  \n17:58\u00a0<vmassol>\u00a0well  \n17:58\u00a0<vmassol>\u00a0ideally you should be able to set a parameter on a filter  \n17:59\u00a0<vmassol>\u00a0ideally something like: addFilter('language', {'unique' : true})  \n18:00\u00a0<vmassol>\u00a0on the java side, it's easy to have a setUnique(boolean returnOnlyCurrentLanguage) for ex  \n18:00\u00a0<vmassol>\u00a0I just need to figure out the bridge with the SS  \n18:00\u00a0<sdumitriu1>\u00a0I don't like it  \n18:00\u00a0<sdumitriu1>\u00a0The filter does two completely different things  \n18:01\u00a0<kstuart>\u00a0has joined #xwiki  \n18:01\u00a0<sdumitriu1>\u00a0Include the language in the response vs. only filter documents in the current language  \n18:01\u00a0<sdumitriu1>\u00a0And I'm not sure the second is possible  \n18:01\u00a0<vmassol>\u00a0well I have 2 choices  \n18:02\u00a0<vmassol>\u00a0even for the filter that returns a unique result, I could still include the language  \n18:02\u00a0<vmassol>\u00a0if I don't do this  \n18:02\u00a0<vmassol>\u00a0then I need to handle the 2 cases in the livetable macro  \n18:02\u00a0<vmassol>\u00a0but yes it's probaby better not to return the language when unique  \n18:02\u00a0<vmassol>\u00a0since the language can be known as it's the current one  \n18:03\u00a0<vmassol>\u00a0ok I'll do 2 filters  \n18:03\u00a0<vmassol>\u00a0the unique one will have to be loctaed in oldcore  \n18:03\u00a0<vmassol>\u00a0since I don't have an api to get the current language outside of oldcore  \n18:03\u00a0<vmassol>\u00a0brb  \n18:10\u00a0<polx>\u00a0has joined #xwiki  \n18:11\u00a0<gdelhumeau>\u00a0has quit  \n18:16\u00a0<sdumitriu>\u00a0has quit  \n18:18\u00a0<sdumitriu>\u00a0has joined #xwiki  \n18:45\u00a0<polx>\u00a0has quit  \n18:46\u00a0<polx>\u00a0has joined #xwiki  \n18:48\u00a0<polx>\u00a0has quit  \n18:55\u00a0<vmassol>\u00a0sdumitriu: jv hasn't planned for query filters to contribute query parameters....  \n18:56\u00a0<vmassol>\u00a0I'll need to add that somehow (I'll have to break an API I think) as otherwise I'll need to do manual escaping to prevent SQL injection  \n18:56\u00a0<sdumitriu1>\u00a0As in \"prop.value = :param\"?  \n18:56\u00a0<vmassol>\u00a0yes  \n18:56\u00a0<sdumitriu1>\u00a0No manual escaping  \n18:56\u00a0<vmassol>\u00a0so right now a filter cannot have any dynamic value  \n18:56\u00a0<vmassol>\u00a0yep  \n18:56\u00a0<vmassol>\u00a0my patch is growing bigger and bigger....  \n18:56\u00a0<vmassol>\u00a0going down the rabbit hole \u2026.  \n18:57\u00a0<vmassol>\u00a0it's not hard to add, but it breaks an api  \n19:01\u00a0<vmassol>\u00a0mail sent, would be great if you guys could answer quickly so that I can finish quickly my impl  \n19:01\u00a0<vmassol>\u00a0sdumitriu: quickly, are you ok that I break the QueryFilter IF?  \n19:18\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n19:27\u00a0<vmassol>\u00a0sdumitriu: ok I have everything ready with hardcoding of param ATM\u2026. just waiting for decision  \n19:32\u00a0<vmassol>\u00a0ok I'll commit something that's not risky ATM  \n19:32\u00a0<vmassol>\u00a0found a way around it :)  \n19:56\u00a0<mflorea>\u00a0has quit  \n19:57\u00a0<vmassol1>\u00a0has joined #xwiki  \n19:58\u00a0<msmeria>\u00a0has joined #xwiki  \n19:59\u00a0<msmeria>\u00a0has quit  \n19:59\u00a0<vmassol>\u00a0has quit  \n20:21\u00a0<sdumitriu1>\u00a0vmassol1: How is one supposed to use a Block (rendering) from Velocity?  \n20:21\u00a0<vmassol1>\u00a0sdumitriu: with the RenderingSS  \n20:21\u00a0<vmassol1>\u00a0you have parser and render methods  \n20:22\u00a0<sdumitriu1>\u00a0And what should I render it as? XHTML?  \n20:22\u00a0<vmassol1>\u00a0not sure what's the question  \n20:22\u00a0<sdumitriu1>\u00a0https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-uiextension/xwiki-platform-uiextension-api/src/main/java/org/xwiki/uiextension/UIExtension.java#L57  \n20:22\u00a0<vmassol1>\u00a0you render it to whatever format you want  \n20:22\u00a0<vmassol1>\u00a0dpeends what you generate  \n20:23\u00a0<vmassol1>\u00a0ie what your velocity is supposed to do  \n20:23\u00a0<vmassol1>\u00a0ah wait  \n20:23\u00a0<vmassol1>\u00a0why do you need to render?  \n20:23\u00a0<sdumitriu1>\u00a0But if I'm in a {{velocity}} block in a wiki document, will the already rendered content be marked as such?  \n20:23\u00a0<sdumitriu1>\u00a0I don't want to put it in a {{html}} macro to have it parsed and rendered again  \n20:24\u00a0<sdumitriu1>\u00a0I need to render because execute() returns a Block  \n20:24\u00a0<sdumitriu1>\u00a0And printing that block just output the Java Object ID  \n20:25\u00a0<vmassol1>\u00a0I don't know what jv has done on that  \n20:36\u00a0<tdelafosse>\u00a0has quit  \n20:47\u00a0<vmassol1>\u00a0pfeww\u2026 just finished on time for the BFD\u2026 :)  \n20:47\u00a0<vmassol1>\u00a0hope it all works  \n20:47\u00a0<vmassol1>\u00a0and I didn't cause any regression  \n20:48\u00a0<vmassol1>\u00a0that's the problem of BFD just before a release\u2026. :(  \n20:48\u00a0<vmassol1>\u00a012 bugs closed today but only 1 real one fixed: http://jira.xwiki.org/secure/Dashboard.jspa?selectPageId=11599  \n20:48\u00a0<vmassol1>\u00a0not much participation :(  \n21:50\u00a0<chalx>\u00a0has joined #xwiki  \n23:37\u00a0<sdumitriu1>\u00a0has quit\n"}