{"id": "dev:IRC.xwikiArchive20160112", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160112", "title": "IRC Archive for channel #xwiki on 12 January 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<mflorea>\u00a0has joined #xwiki  \n06:51\u00a0<msmeria>\u00a0has joined #xwiki  \n07:26\u00a0<vmassol>\u00a0has joined #xwiki  \n07:32\u00a0<mflorea>\u00a0has quit  \n08:44\u00a0<Inge->\u00a0has quit  \n08:51\u00a0<Inge->\u00a0has joined #xwiki  \n08:58\u00a0<lucaa>\u00a0has joined #xwiki  \n09:05\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:45\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:04\u00a0<vmassol>\u00a0good morning  \n10:06\u00a0<mflorea>\u00a0has joined #xwiki  \n10:06\u00a0<mflorea>\u00a0has quit  \n10:06\u00a0<mflorea1>\u00a0has joined #xwiki  \n10:35\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:49\u00a0<Slashman>\u00a0has joined #xwiki  \n11:08\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:09\u00a0<MasterPiece>\u00a0has joined #xwiki  \n11:30\u00a0<lucaa>\u00a0has quit  \n11:30\u00a0<lucaa1>\u00a0has joined #xwiki  \n11:42\u00a0<evalica>\u00a0has joined #xwiki  \n11:52\u00a0<MasterPiece>\u00a0has quit  \n13:10\u00a0<lucaa1>\u00a0has quit  \n13:12\u00a0<vmassol>\u00a0tmortagne: for my understand this https://www.evernote.com/l/AHdKzRkRq5lKN7Ayx28jgy9pFLrYwB3a\\_Xg means that the tree macro will be removed from the wiki to be installed at the farm level, right?  \n13:28\u00a0<evalica1>\u00a0has joined #xwiki  \n13:28\u00a0<evalica>\u00a0has quit  \n14:05\u00a0<tmortagne>\u00a0vmassol: I think when nothing is indicated it means farm yes, mflorea1 ?  \n14:08\u00a0<mflorea1>\u00a0vmassol, tmortagne: I think so too. You click Install on Farm right?  \n14:37\u00a0<ClemensR>\u00a0has left #xwiki  \n14:46\u00a0<lucaa>\u00a0has joined #xwiki  \n14:59\u00a0<Aison>\u00a0has joined #xwiki  \n14:59\u00a0<Aison>\u00a0hello  \n14:59\u00a0<Aison>\u00a0is it possible that multiple persons are editing a subpart of the same page at the same time?  \n15:03\u00a0<msmeria>\u00a0has quit  \n15:04\u00a0<tmortagne>\u00a0Aison: if they don't save at the exact same same time it should be ok I think  \n15:04\u00a0<tmortagne>\u00a0to be tested  \n15:04\u00a0<tmortagne>\u00a0you will still get a warning saying that the document is already locked and asking you if you want to force  \n15:05\u00a0<tmortagne>\u00a0another possibility is to use some experimental real time collaboration editor on http://extensions.xwiki.org like http://extensions.xwiki.org/xwiki/bin/view/Extension/RtWiki which work well AFAIK  \n15:12\u00a0<Aison>\u00a0just trying :-)  \n15:15\u00a0<ansuz>\u00a0I just released 1.14  \n15:16\u00a0<ansuz>\u00a0it uses the serverside merge from xwiki  \n17:15\u00a0<vmassol>\u00a0tmortagne, mflorea1: yes I chose install on farm, so ok it's indeed for that reason that it's removing it and reinstalling it in a different namespac  \n17:29\u00a0<vmassol>\u00a0mflorea1: seems the VFS tree macro is not working anymore on 8.0 (it's working fine in 7.4RC1).  \n17:29\u00a0<vmassol>\u00a0the reason seems to be that the {{tree}}\u00a0macro is not passing the root in the query string anymore. Is that possible?  \n17:30\u00a0<vmassol>\u00a0(when calling the page that generates the json)  \n17:35\u00a0<vmassol>\u00a0on http://extensions.xwiki.org/xwiki/bin/view/Extension/Tree+Widget#HDynamicData it's still mentioned that the root query string param should be passed  \n17:37\u00a0<vmassol>\u00a0note that this is why the vfs test on platform has been failing for a few week(s)  \n17:37\u00a0<mflorea1>\u00a0vmassol: I have a 8.0-SNAPSHOT and the root parameter is passed  \n17:38\u00a0<mflorea1>\u00a0I tried with {{documentTree finder=\"true\" root=\"document:xwiki:Sandbox.WebHome\" /}}  \n17:38\u00a0<vmassol>\u00a0my call is:  \n17:38\u00a0<vmassol>\u00a0{{tree root=\"$xcontext.macro.params.root\" reference=\"path:$xwiki.getURL($doc.getDocumentReference(), 'get', 'sheet=Macros.VFSTreeJSON&amp;outputSyntax=plain')\" links=\"true\"/}}  \n17:38\u00a0<vmassol>\u00a0and it's called with: {{vfsTree root=\"attach:[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)/\"/}}  \n17:39\u00a0<vmassol>\u00a0s/&amp;/&  \n17:39\u00a0<vmassol>\u00a0(I copied the page xml above)  \n17:40\u00a0<vmassol>\u00a0the URL I see that is called is:  \n17:40\u00a0<vmassol>\u00a0http://localhost:8080/xwiki/bin/get/Main/VFS/WebHome?sheet=Macros.VFSTreeJSON&&data=children&id=%23  \n17:40\u00a0<mflorea1>\u00a0this still works for me {{tree reference=\"XWiki.DocumentTree\" finder=\"true\" root=\"document:xwiki:Sandbox.WebHome\" /}}  \n17:41\u00a0<mflorea1>\u00a0http://localhost:8080/xwiki/bin/get/XWiki/DocumentTree?root=document%3Axwiki%3ASandbox.WebHome&outputSyntax=plain&data=children&id=%23  \n17:41\u00a0<mflorea1>\u00a0ah, I know  \n17:41\u00a0<vmassol>\u00a0something must have changed since it's working on 7.4 but not on 8.0  \n17:41\u00a0<vmassol>\u00a0ah?  \n17:54\u00a0<vmassol>\u00a0mflorea1: ? you're trying to fix it? :)  \n17:55\u00a0<mflorea1>\u00a0no, to understand the problem  \n17:55\u00a0<vmassol>\u00a0ok thought you had found the reason \u00a0:)  \n18:07\u00a0<mflorea1>\u00a0vmassol: it's caused by the xml escaping introduced by gdelhumeau recently. The & gets double escaped but I don't understand why. Can you confirm that root parameter is present in the URL if you check the HTML source of the page?  \n18:07\u00a0<mflorea1>\u00a0https://github.com/xwiki/xwiki-platform/commit/3c21894c345a754f5df92e2d341c13bf65680c56  \n18:09\u00a0<mflorea1>\u00a0this is what I get in the HTML source:  \n18:09\u00a0<mflorea1>\u00a0/xwiki/bin/get/XWiki/DocumentTree?outputSyntax=plain&amp;#38;root=document%3Axwiki%3ASandbox.WebHome  \n18:09\u00a0<mflorea1>\u00a0this part is wrong &amp;#38;  \n18:09\u00a0<mflorea1>\u00a0the & is escaped twice, but I don't understand why  \n18:09\u00a0<vmassol>\u00a0since the macro doesn't generate anything the html of the page is empty  \n18:10\u00a0<mflorea1>\u00a0the macro generates HTML  \n18:11\u00a0<vmassol>\u00a0ok found it  \n18:11\u00a0<mflorea1>\u00a0<div class=\"xtree jstree-no-links\" ...  \n18:11\u00a0<vmassol>\u00a0<div class=\"xtree\" data-responsive=\"true\" data-url=\"/xwiki/bin/get/Main/VFS/WebHome?sheet=Macros.VFSTreeJSON&amp;#38;outputSyntax=plain&amp;#38;root=attach%3ASandbox.WebHome%40test.zip%2F\" data-dragAndDrop=\"false\" data-contextMenu=\"false\" data-icons=\"true\" data-edges=\"true\" data-checkboxes=\"false\" data-openTo=\"\" data-finder=\"false\"></div>  \n18:11\u00a0<mflorea1>\u00a0yes, so root is there  \n18:11\u00a0<vmassol>\u00a0yep  \n18:16\u00a0<mflorea1>\u00a0I know, the tree macro uses wiki syntax like this  \n18:16\u00a0<mflorea1>\u00a0(% attr1=\"value1\" attr2=\"value2\" ... %)  \n18:18\u00a0<mflorea1>\u00a0the issue is that the values are HTML escaped before being put in (% ... %) so we get double escaping  \n18:19\u00a0<mflorea1>\u00a0I wasn't aware that syntax params are HTML escaped when rendered  \n18:19\u00a0<mflorea1>\u00a0it makes sense though  \n18:19\u00a0<gdelhumeau>\u00a0has quit  \n18:21\u00a0<mflorea1>\u00a0I'll have to refactor a bit tree\\_macros.vm  \n18:41\u00a0<tmortagne>\u00a0has quit  \n18:44\u00a0<vmassol>\u00a0mflorea1: ok, thanks  \n18:51\u00a0<mflorea1>\u00a0vmassol: I reported XWIKI-12989 because on 7.4 only the openTo param is affected. with gdelhumeau's change the reference parameter is affected too on 8.0-SNAPSHOT  \n19:02\u00a0<Enygma`>\u00a0has quit  \n19:02\u00a0<evalica1>\u00a0has quit  \n19:03\u00a0<Aison>\u00a0has quit  \n19:04\u00a0<mflorea1>\u00a0has quit  \n19:25\u00a0<woshilapin>\u00a0has quit  \n19:25\u00a0<MasterPiece>\u00a0has joined #xwiki  \n19:26\u00a0<abusenius>\u00a0has joined #xwiki  \n20:00\u00a0<MasterPiece>\u00a0has quit  \n20:08\u00a0<martinus\\_\\_>\u00a0has quit  \n20:12\u00a0<MasterPiece>\u00a0has joined #xwiki  \n20:24\u00a0<Slashman>\u00a0has quit  \n20:29\u00a0<lucaa1>\u00a0has joined #xwiki  \n20:29\u00a0<lucaa>\u00a0has quit  \n20:34\u00a0<lucaa1>\u00a0has quit  \n20:47\u00a0<MasterPiece>\u00a0has quit  \n21:19\u00a0<woshilapin>\u00a0has joined #xwiki  \n21:29\u00a0<woshilapin>\u00a0has quit  \n21:56\u00a0<vmassol>\u00a0has quit  \n22:10\u00a0<vmassol>\u00a0has joined #xwiki  \n22:32\u00a0<lucaa>\u00a0has joined #xwiki  \n23:13\u00a0<vmassol1>\u00a0has joined #xwiki  \n23:14\u00a0<vmassol1>\u00a0has quit  \n23:14\u00a0<vmassol>\u00a0has quit  \n23:14\u00a0<vmassol1>\u00a0has joined #xwiki  \n23:20\u00a0<vmassol1>\u00a0has quit\n"}