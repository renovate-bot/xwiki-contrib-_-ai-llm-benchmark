{"id": "dev:IRC.xwikiArchive20110705", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110705", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:42\u00a0<xwikibot>\u00a0has joined #xwiki  \n01:15\u00a0<@cjdelisle>\u00a0abusenius: pong  \n01:18\u00a0<+abusenius>\u00a0cjdelisle: hi, I'm fixing functional tests to work with csrf protection  \n01:19\u00a0<bbc581>\u00a0has joined #xwiki  \n01:19\u00a0<+abusenius>\u00a0and for storage tests, the problem is that you construct the url to modify pages  \n01:20\u00a0<+abusenius>\u00a0I want to refactor them a bit so that there is a couple of methods that construct the urls, like in ui tests  \n01:20\u00a0<+abusenius>\u00a0I'd automatically add the secret token there  \n01:20\u00a0<+abusenius>\u00a0wdyt?  \n01:22\u00a0<@cjdelisle>\u00a0it all sounds good  \n01:22\u00a0<+abusenius>\u00a0also, in ui tests, things like login-as-admin-and-delete will not work with xredirect any more  \n01:22\u00a0<@cjdelisle>\u00a0I don't see exactly what you're doing from your description but they certainly are not \"my\" storage tests so you are welcome to have at them.  \n01:23\u00a0<+abusenius>\u00a0well, just want to sync what I'm doing  \n01:24\u00a0<+abusenius>\u00a0basically I'll add getURL method instead of doing \"/xwiki/bin/\" + action + \"...\"  \n01:24\u00a0<@cjdelisle>\u00a0It all sounds good, I'll try to remember to keep a closer eye on the mailing list to see your patches.  \n01:25\u00a0<+abusenius>\u00a0cool  \n01:26\u00a0<+abusenius>\u00a0I think we will be able to enable csrf protection by default in 3.2 if everybody agrees  \n01:26\u00a0<+abusenius>\u00a0at least we should let it enabled until rc1  \n01:27\u00a0<+abusenius>\u00a0\\*leave  \n01:28\u00a0<@cjdelisle>\u00a0I like the idea of at least testing with it on.  \n03:06\u00a0<DrLou>\u00a0has joined #xwiki  \n03:08\u00a0<sdumitriu>\u00a0has quit  \n04:36\u00a0<abusenius>\u00a0has quit  \n05:52\u00a0<DrLou>\u00a0has quit  \n07:02\u00a0<tekzilla>\u00a0has quit  \n07:03\u00a0<Denis>\u00a0has quit  \n07:04\u00a0<tekzilla>\u00a0has joined #xwiki  \n07:07\u00a0<mflorea>\u00a0has joined #xwiki  \n07:09\u00a0<Denis>\u00a0has joined #xwiki  \n08:51\u00a0<bbc581>\u00a0has quit  \n09:21\u00a0<kwoot>\u00a0has joined #xwiki  \n09:22\u00a0<kwoot>\u00a0has left #xwiki  \n09:27\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:49\u00a0<sburjan>\u00a0has joined #xwiki  \n09:55\u00a0<sburjan>\u00a0has quit  \n10:06\u00a0<sburjan>\u00a0has joined #xwiki  \n10:12\u00a0<evalica>\u00a0has joined #xwiki  \n10:22\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:04\u00a0<+mflorea>\u00a0I see that api.Document.createNewObject(className) resolves the className using an EntityReferenceResolver with \"xclass\" hint, which default to XWiki space if no space is specified. I find this unnatural because it forces me to include the space name when I write an application that has its own classes inside the application space.  \n11:07\u00a0<pulasthi>\u00a0has joined #xwiki  \n11:09\u00a0<+tmortagne>\u00a0mflorea: this is retro compatibility stuff  \n11:09\u00a0<+tmortagne>\u00a0this method always behaved that way  \n11:09\u00a0<+tmortagne>\u00a0(resolving with XWiki space)  \n11:09\u00a0<+mflorea>\u00a0ok, makes sense now  \n11:11\u00a0<+tmortagne>\u00a0there is no method in Document to which you can directly give the DocumentReference ?  \n11:11\u00a0<+tmortagne>\u00a0and yo use model script service to do your resolve the way you want it  \n11:11\u00a0<+mflorea>\u00a0nop, just a single createNewObject method, that gets a string ref  \n11:12\u00a0<+tmortagne>\u00a0ok, I guess we could add one  \n11:17\u00a0<abusenius>\u00a0has joined #xwiki  \n11:22\u00a0<jvdrean>\u00a0has joined #xwiki  \n11:29\u00a0<pulasthi>\u00a0has left #xwiki  \n11:51\u00a0<+mflorea>\u00a0guys, I'm looking for a way to do this:  \n11:51\u00a0<+mflorea>\u00a0document X includes (among other things) document Y rendered with sheet Z (which is not the default sheet of Y).  \n11:51\u00a0<+mflorea>\u00a0In other words, I want to render a document in the context of another document. Is it possible?  \n11:52\u00a0<+mflorea>\u00a0i.e. render a document (Z) in the content of another document (Y) but inside a different document (X)  \n11:52\u00a0<+mflorea>\u00a0s/content/context  \n11:52\u00a0<pulasthi>\u00a0has joined #xwiki  \n11:52\u00a0<pulasthi>\u00a0cjdelisle : hi  \n11:56\u00a0<+tmortagne>\u00a0mflorea: I hope it's not possible :)  \n11:56\u00a0<+mflorea>\u00a0why?  \n11:56\u00a0<+tmortagne>\u00a0would make super easy to get programing right  \n11:56\u00a0<+tmortagne>\u00a0you execute anything in the contexte of a document with programming right  \n11:57\u00a0<+mflorea>\u00a0but what I described is not much different than the include macro  \n11:57\u00a0<+tmortagne>\u00a0no really  \n11:57\u00a0<+tmortagne>\u00a0include execute the included content in your document  \n11:57\u00a0<+tmortagne>\u00a0so with you as author  \n11:57\u00a0<+tmortagne>\u00a0you don't execute any content in the context of the document you want  \n11:57\u00a0<+mflorea>\u00a0I see  \n11:58\u00a0<+mflorea>\u00a0basically you need programming rights to set the context doc  \n11:58\u00a0<+tmortagne>\u00a0yep  \n11:58\u00a0<+mflorea>\u00a0ok, thanks, then I need to change my strategy :)  \n11:59\u00a0<+tmortagne>\u00a0mflorea: we could imagine an API to to a restricted version of what you want  \n11:59\u00a0<+tmortagne>\u00a0id does it but with a dropPermission  \n11:59\u00a0<+tmortagne>\u00a0if you don't need programming right that should do it I guess  \n12:00\u00a0<+tmortagne>\u00a0but it require a script service in java  \n12:00\u00a0<+tmortagne>\u00a0you can't do it right now in a xar  \n12:00\u00a0<+mflorea>\u00a0my use case is this: I have a document, Y that has more objects, and a default sheet. I want to render this doc using a different sheet (Z) than the default one, but I also want to display the result inside another document (X)  \n12:01\u00a0<+tmortagne>\u00a0is this be done in Java ?  \n12:01\u00a0<+mflorea>\u00a0no, velocity  \n12:02\u00a0<+tmortagne>\u00a0isn't this supposed to be the new rendering behavior ?  \n12:02\u00a0<+tmortagne>\u00a0I tough new sheet things by action was for platform  \n12:02\u00a0<+tmortagne>\u00a0I men you last mails  \n12:02\u00a0<+tmortagne>\u00a0s/men/mean/  \n12:03\u00a0<+mflorea>\u00a0yes, but I'm not working on this right now, I'm trying to make a prototype of the AppWithinMinutes wizard using the available API to better understand what is missing.  \n12:04\u00a0<+tmortagne>\u00a0well if that's just a prototype then you can use programming right  \n12:04\u00a0<+tmortagne>\u00a0but we agree that this will then be done in java, right ?  \n12:04\u00a0<+mflorea>\u00a0of course  \n12:04\u00a0<+tmortagne>\u00a0ok, was a bit lost :)  \n12:04\u00a0<+mflorea>\u00a0:)  \n12:05\u00a0<@cjdelisle>\u00a0pulasthi: hello  \n12:06\u00a0<pulasthi>\u00a0hey i just started working on deep query was a bit busy with my internship project  \n12:07\u00a0<pulasthi>\u00a0cjdelisle: when flatterning the objects would we have to consider cases like this.  \n12:07\u00a0<pulasthi>\u00a0cjdelisle:http://paste.ubuntu.com/638314/  \n12:08\u00a0<@cjdelisle>\u00a0yes  \n12:09\u00a0<@cjdelisle>\u00a0I have been trying to debug an issue where lists are not being loaded properly.  \n12:09\u00a0<@cjdelisle>\u00a0That one is kind of a pain since it's there but it is not loaded, when the object is loaded I get null.  \n12:10\u00a0<pulasthi>\u00a0\u00a0cjdelisle: hmm making the objects flat can be done without much effort but making the queries work with the new flattened objects is the hard part i assume  \n12:10\u00a0<pulasthi>\u00a0:)  \n12:11\u00a0<@cjdelisle>\u00a0That does sound like it will be the issue.  \n12:12\u00a0<pulasthi>\u00a0hmm first i will right an class to flattern the objects ill think of a way to make the quries work  \n12:13\u00a0<pulasthi>\u00a0i assume we will have to look at the queries to identify deep query statments  \n12:13\u00a0<@cjdelisle>\u00a0cool, if you have any questions I can help out.  \n12:15\u00a0<pulasthi>\u00a0ok :)  \n12:17\u00a0<+tmortagne>\u00a0so who want's to be build manager this week ?  \n13:02\u00a0<abusenius>\u00a0has quit  \n13:14\u00a0<pulasthi>\u00a0has left #xwiki  \n13:26\u00a0<evalica1>\u00a0has joined #xwiki  \n13:27\u00a0<evalica>\u00a0has quit  \n13:29\u00a0<sburjan>\u00a0has quit  \n13:32\u00a0<bbc581>\u00a0has joined #xwiki  \n13:34\u00a0<DrLou>\u00a0has joined #xwiki  \n13:39\u00a0<+mflorea>\u00a0tmortagne: should a velocity variable defined in the included doc be visible in the host doc? Like this:  \n13:39\u00a0<+mflorea>\u00a0{{include document=\"X\" /}}  \n13:39\u00a0<+mflorea>\u00a0## Use velocity var defined in X  \n13:39\u00a0<+mflorea>\u00a0The other way around works:  \n13:39\u00a0<+mflorea>\u00a0## Set a velocity variable and use it in the included doc  \n13:40\u00a0<+mflorea>\u00a0{{include document=\"X\" /}}  \n13:42\u00a0<mflorea>\u00a0has quit  \n13:44\u00a0<sburjan>\u00a0has joined #xwiki  \n14:04\u00a0<cjdelisle>\u00a0has quit  \n14:07\u00a0<cjdelisle>\u00a0has joined #xwiki  \n14:21\u00a0<sburjan>\u00a0has quit  \n14:22\u00a0<cjdelisle>\u00a0has quit  \n14:22\u00a0<sburjan>\u00a0has joined #xwiki  \n14:24\u00a0<mflorea>\u00a0has joined #xwiki  \n14:24\u00a0<cjdelisle>\u00a0has joined #xwiki  \n14:27\u00a0<SvenDowideit>\u00a0has quit  \n14:32\u00a0<abusenius>\u00a0has joined #xwiki  \n14:35\u00a0<sdumitriu>\u00a0has joined #xwiki  \n14:40\u00a0<+mflorea>\u00a0tmortagne: re my velocity question, here's my code http://pastebin.com/KjZygGnz and the result I get on a 3.2 snapshot.  \n14:42\u00a0<+tmortagne>\u00a0mflorea: if I understand well #set($myVar = \"after\") does not do anything even in the included page itself, right ?  \n14:42\u00a0<+mflorea>\u00a0wait a sec  \n14:42\u00a0<+mflorea>\u00a0no, it does  \n14:43\u00a0<+mflorea>\u00a0the first 2 strings are printed from Y, and the third from X  \n14:43\u00a0<+mflorea>\u00a0so Y behaves correctly, $myVar is \"before\" and then \"after\"  \n14:43\u00a0<@sdumitriu>\u00a0It's normal  \n14:43\u00a0<+mflorea>\u00a0but it stays \"before\" in X  \n14:43\u00a0<+tmortagne>\u00a0yes I missread  \n14:43\u00a0<@sdumitriu>\u00a0The include is executed after the entire first block is executed  \n14:44\u00a0<+mflorea>\u00a0hmm  \n14:44\u00a0<@sdumitriu>\u00a0Since velocity and wiki syntax are executed in sequence, not as it is parsed  \n14:44\u00a0<+tmortagne>\u00a0ho I did not seen you added the include in the velocity  \n14:44\u00a0<+tmortagne>\u00a0indeed there is no way it's doing what youexpect  \n14:44\u00a0<@sdumitriu>\u00a0It would work if you used the velocity #include  \n14:44\u00a0<+tmortagne>\u00a0velocity does not execute {{include}}  \n14:44\u00a0<+mflorea>\u00a0so the solution is to split?  \n14:44\u00a0<+mflorea>\u00a0let me try  \n14:44\u00a0<+tmortagne>\u00a0mflorea: you should split as much as possible anyway  \n14:45\u00a0<+tmortagne>\u00a0it's always better to separate different blocks of velocity  \n14:45\u00a0<+mflorea>\u00a0yep, works now  \n14:45\u00a0<+mflorea>\u00a0thanks guys  \n14:52\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n15:09\u00a0<+mflorea>\u00a0tmortagne: I hit a funny issue: the velocity macro (and all script macros I guess) doesn't \"evaluate\" the include macro when output=false. I understand the reason, but in my case the included doc generates no output, it only evaluates velocity code (that I want to keep separated)  \n15:14\u00a0<sburjan>\u00a0has quit  \n15:15\u00a0<sburjan>\u00a0has joined #xwiki  \n15:22\u00a0<mbryant>\u00a0has joined #xwiki  \n15:24\u00a0<mbryant>\u00a0Hey All I have a question involving publishing pages via the REST api... I am curious as to what the structure of the xml for a page needs to look like as well as placing objects on that page, what that xml needs to look like. \u00a0We have done some prelim testing, and just publishing a page with objects XML did not work, \u00a0is this documented anywhere?  \n15:33\u00a0<sburjan>\u00a0has quit  \n15:33\u00a0<+tmortagne>\u00a0mflorea: yep I created a jira issue long time ago about it  \n15:34\u00a0<+tmortagne>\u00a0not very nice but not critical either so still not fixed  \n15:34\u00a0<sburjan>\u00a0has joined #xwiki  \n15:34\u00a0<+tmortagne>\u00a0mflorea: XWIKI-3749  \n15:34\u00a0<+mflorea>\u00a0tmortagne: yes, it's not a problem for me because I can leave without output=false  \n15:34\u00a0<+mflorea>\u00a0thanks for the link  \n15:38\u00a0<arkub>\u00a0has joined #xwiki  \n15:49\u00a0<bbc581>\u00a0has quit  \n16:14\u00a0<sburjan>\u00a0has quit  \n16:15\u00a0<sburjan>\u00a0has joined #xwiki  \n16:21\u00a0<mbryant>\u00a0has quit  \n16:35\u00a0<mbryant>\u00a0has joined #xwiki  \n17:09\u00a0<evalica1>\u00a0has quit  \n17:09\u00a0<Enygma`>\u00a0has quit  \n17:10\u00a0<rrodriguez>\u00a0has joined #xwiki  \n17:20\u00a0<rrodriguez>\u00a0has quit  \n17:23\u00a0<rrodriguez>\u00a0has joined #xwiki  \n17:36\u00a0<rrodriguez>\u00a0has quit  \n17:38\u00a0<abusenius>\u00a0has quit  \n17:42\u00a0<Spazholio>\u00a0What version of tomcat is recommended when running Xwiki? \u00a0Does it matter?  \n17:45\u00a0<@sdumitriu>\u00a0At least 5.5  \n17:45\u00a0<@sdumitriu>\u00a0It should work with almost any recent version, you should look at the features of Tomcat when choosing, XWiki isn't that pretentious  \n17:46\u00a0<@sdumitriu>\u00a0Just keep this in mind:  \n17:46\u00a0<@sdumitriu>\u00a0http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Encoding#HTomcat  \n17:57\u00a0<rrodriguez>\u00a0has joined #xwiki  \n18:00\u00a0<rrodriguez>\u00a0has quit  \n18:11\u00a0<Spazholio>\u00a0Gotcha, thanks.  \n18:23\u00a0<mbryant>\u00a0has quit  \n18:23\u00a0<mbryant>\u00a0has joined #xwiki  \n18:32\u00a0<tmortagne>\u00a0has quit  \n18:35\u00a0<mbryant>\u00a0hey can anyone point me to the infomration that I need to provide when creating an xml for an object via the RESTful API?  \n18:37\u00a0<abusenius>\u00a0has joined #xwiki  \n18:37\u00a0<jvdrean>\u00a0has quit  \n19:05\u00a0<mflorea>\u00a0has quit  \n19:07\u00a0<mflorea>\u00a0has joined #xwiki  \n19:07\u00a0<sburjan>\u00a0has quit  \n19:18\u00a0<newbie>\u00a0has joined #xwiki  \n19:18\u00a0<newbie>\u00a0is now known as <Guest99929>  \n19:18\u00a0<Guest99929>\u00a0has quit  \n19:21\u00a0<mbryant>\u00a0has quit  \n19:47\u00a0<arkub>\u00a0has quit  \n20:18\u00a0<mflorea>\u00a0has quit  \n20:43\u00a0<Denis>\u00a0has quit  \n22:00\u00a0<sburjan`>\u00a0has quit  \n22:17\u00a0<rrodriguez>\u00a0has joined #xwiki  \n22:54\u00a0<sburjan`>\u00a0has joined #xwiki  \n\n"}