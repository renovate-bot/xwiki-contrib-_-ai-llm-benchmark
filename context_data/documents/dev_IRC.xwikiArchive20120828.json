{"id": "dev:IRC.xwikiArchive20120828", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120828", "title": "IRC Archive for channel #xwiki on 28 August 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n01:11\u00a0<ssavi>\u00a0has quit  \n04:25\u00a0<ssavi>\u00a0has joined #xwiki  \n05:30\u00a0<coud>\u00a0has joined #xwiki  \n05:41\u00a0<sburjan>\u00a0has quit  \n05:42\u00a0<coud>\u00a0has quit  \n05:46\u00a0<sburjan>\u00a0has joined #xwiki  \n07:33\u00a0<mflorea>\u00a0has joined #xwiki  \n08:09\u00a0<mflorea>\u00a0has quit  \n08:25\u00a0<vmassol>\u00a0has joined #xwiki  \n08:40\u00a0<vmassol>\u00a0has quit  \n08:42\u00a0<vmassol>\u00a0has joined #xwiki  \n08:53\u00a0<ssavi>\u00a0has quit  \n08:56\u00a0<ssavi>\u00a0has joined #xwiki  \n09:01\u00a0<ssavi>\u00a0has quit  \n09:45\u00a0<+sburjan>\u00a0Hello vmassol . Regarding on what we discussed at the hackathon, first we start by having a maven project which will download and create a provisioned box, with .box extensions, right ?  \n09:48\u00a0<vmassol>\u00a0we have 2 needs: provide a VM for download (we need to discuss this with XWiki SAS since it would have a large bandwidth cost if we were to make the download available) and use that VM for system testing  \n09:50\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:51\u00a0<+sburjan>\u00a0ok. Until we discuss this with xWiki SAS, I will put a hardcoded link as a value for the base box, but also parameterize this in case the user wants to download another basebox  \n09:51\u00a0<+sburjan>\u00a0and that box we download, it will be provisioned and re-packaged as the projects's artefact/final result  \n09:53\u00a0<+sburjan>\u00a0just want to make sure I understod properly the goals  \n10:00\u00a0<vmassol>\u00a0tmortagne: is it normal that there isn't any change in the last bot notification? :)  \n10:00\u00a0<vmassol>\u00a0(and good morning!)  \n10:01\u00a0<+tmortagne>\u00a0good morning  \n10:01\u00a0<+tmortagne>\u00a0non it's not  \n10:01\u00a0<+tmortagne>\u00a0s/non/no/  \n10:01\u00a0<+tmortagne>\u00a0looks like a bug  \n10:02\u00a0<+tmortagne>\u00a0I added missing ## before markdown/1.0  \n10:03\u00a0<+tmortagne>\u00a0vmassol: the link seems wrong to be  \n10:03\u00a0<+tmortagne>\u00a0there is no rev1  \n10:04\u00a0<+tmortagne>\u00a0hmm actually looks like is worst than expected, I can't find my modification in the history of the page  \n10:04\u00a0<+tmortagne>\u00a0s/to be/to me/  \n10:06\u00a0<+tmortagne>\u00a0so in this case you don't see any change because the 4.1 version does not exists in the history  \n10:06\u00a0<+tmortagne>\u00a0sounds like a pretty serious issue  \n10:07\u00a0<+tmortagne>\u00a0what is weird is that my modification is applied by its version is lost  \n10:09\u00a0<+tmortagne>\u00a0looks like the history of this page is not in a very good shape, the UI can't find any modification whetever the versions compared  \n10:10\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:32\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:39\u00a0<vmassol>\u00a0cool stuff about developing a java skype bot: http://dow.ngra.de/2012/01/06/skype-bot-for-fun-and-profit/  \n11:34\u00a0<+sburjan>\u00a0vmassol: IMHO it would make more sense to put the vagrant maven module in platform, instead of enterprise. WDYT ?  \n11:35\u00a0<+tmortagne>\u00a0sburjan: itt does not depends on XE ?  \n11:36\u00a0<+sburjan>\u00a0well ATM I am working on the maven project that downloads a box, provisions it and re-packages it. so this shouldn't be depenent on anything, not even latform IMO  \n11:37\u00a0<+tmortagne>\u00a0then could even be commons :)  \n11:37\u00a0<+sburjan>\u00a0thanks. :)  \n11:37\u00a0<+tmortagne>\u00a0but it has to depends on things that are all on maven central or commons to be on commons  \n11:38\u00a0<+tmortagne>\u00a0if it trigger some dependencies coming from xwiki external or some other custom maven repository you can't go lower than platform  \n11:39\u00a0<+sburjan>\u00a0ATM I don't have any dependency, and I do't think I';; need any. The only requirement is to have vagrant instaled on your machine  \n11:39\u00a0<+tmortagne>\u00a0sburjan: is it needed to build the project itself ?  \n11:40\u00a0<+tmortagne>\u00a0would not be very nice to have to have vagrant to build/release commons  \n11:40\u00a0<+sburjan>\u00a0no. it only creates a vagrant box if everything is successful. nothing more. from there, there will be other maven projects that will use the box and do whatever they want with it. at least this is how I see it  \n11:47\u00a0<CIA-122>\u00a0tmortagne\u000f feature-extensiondistribution\u000f \\* rfeae444\u000f https://github.com/xwiki/xwiki-platform/commit/feae4449efd11b67a73d4ba4b05eb1a6921cb3cf \u000f/ (2 files in 2 dirs):\u000f XWIKI-7896: Display a global install/upgrade wizard when starting an new version of an XWiki instance - http://git.io/uSJZnw  \n11:51\u00a0<vmassol>\u00a0sburjan: XE  \n11:51\u00a0<vmassol>\u00a0it depends on XE  \n11:51\u00a0<vmassol>\u00a0since you need to provision an XE  \n11:51\u00a0<vmassol>\u00a0(even a XEM for some boxes)  \n11:52\u00a0<vmassol>\u00a0\"downloads a box, provisions it and re-packages it\" \u2014> provision means installing XE at the very least  \n11:53\u00a0<+sburjan>\u00a0Ok, in this case I understand  \n11:53\u00a0<+sburjan>\u00a0I was breaking the oepration in 2 steps 1) create box 2) pus XE or XEm on it  \n11:53\u00a0<+sburjan>\u00a0thanks vmassol  \n11:53\u00a0<vmassol>\u00a0download a box is part 1  \n11:54\u00a0<vmassol>\u00a0it's the stuff that doesn't change  \n11:54\u00a0<vmassol>\u00a0then you provision the moving stuff  \n11:55\u00a0<vmassol>\u00a0I'd say that moving stuff = apache, XE, DB, xinit  \n11:55\u00a0<vmassol>\u00a0tomcat  \n11:55\u00a0<+sburjan>\u00a0yepp  \n11:55\u00a0<vmassol>\u00a0bbiab  \n12:09\u00a0<tekzilla>\u00a0has joined #xwiki  \n13:22\u00a0<+tmortagne>\u00a0guys, new quick vote on dev list  \n14:46\u00a0<mflorea>\u00a0has joined #xwiki  \n16:00\u00a0<SvenDowideit>\u00a0has quit  \n16:00\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n17:51\u00a0<dirk\\_schmitt>\u00a0has joined #xwiki  \n17:54\u00a0<vmassol>\u00a0tmortagne: I've just tried to install the wiki component extension in my 4.2-SNAP and I have the same problem that I reported in a jira issue:  \n17:54\u00a0<vmassol>\u00a0Caused by: org.xwiki.component.manager.ComponentLookupException: Can't find descriptor for the component [role = [interface org.xwiki.model.reference.EntityReferenceSerializer] hint = [compactwiki]]  \n17:54\u00a0<vmassol>\u00a0(using EM)  \n17:54\u00a0<vmassol>\u00a0seems like it's pretty common for all extensions that contain componetns  \n17:54\u00a0<+tmortagne>\u00a0actually you have the same problem that you reported in several jira \u00a0issues  \n17:55\u00a0<+tmortagne>\u00a0but I was not able to reproduce it  \n17:55\u00a0<dirk\\_schmitt>\u00a0I have problems to migrate a xwiki 3.1 instance to xwiki 4.1 with a postgresql database behind.  \n17:55\u00a0<dirk\\_schmitt>\u00a0Ist it a alternate solution to export all pages to a xar archive, drop the database, setup the xwiki instance from scratch and import the xar archive ?  \n17:56\u00a0<+tmortagne>\u00a0vmassol: do you have legacy ?  \n17:56\u00a0<vmassol>\u00a0no  \n17:56\u00a0<+tmortagne>\u00a0org.xwiki.model.reference.EntityReferenceSerializer is a legacy role AFAIK  \n17:56\u00a0<+tmortagne>\u00a0and its the same issue in all EM jira issue you reported  \n17:57\u00a0<vmassol>\u00a0so it would mean JV is using a legacy dependency in a platform module?  \n17:57\u00a0<+tmortagne>\u00a0I guess  \n17:57\u00a0<vmassol>\u00a0I don't see how this is possivle  \n17:57\u00a0<+tmortagne>\u00a0org.xwiki.model.reference.EntityReferenceSerializer is legacy role for sure  \n17:57\u00a0<vmassol>\u00a0we have enforcer rules for this  \n17:57\u00a0<vmassol>\u00a0(AFAIR)  \n17:57\u00a0<vmassol>\u00a0jvdrean: any idea?  \n17:57\u00a0<+tmortagne>\u00a0hmm checking to be sure but you should have a String or a EntityReference as generic type I think  \n17:58\u00a0<vmassol>\u00a0tmortagne: trying to install manually without EM  \n17:58\u00a0<vmassol>\u00a0last time it worked with my jira issue  \n17:58\u00a0<vmassol>\u00a0so I don't think this is the problem  \n17:58\u00a0<+tmortagne>\u00a0just checked and EntityReferenceSerializer has a generic type  \n17:58\u00a0<+tmortagne>\u00a0so the error you have is because you don't have legacy for sure  \n17:58\u00a0<+tmortagne>\u00a0no on why you have code that try to load this component i'm not sure  \n17:59\u00a0<vmassol>\u00a0yes works manually  \n17:59\u00a0<vmassol>\u00a0(by copying the wiki component jar to WEB-INF/lib)  \n18:00\u00a0<+tmortagne>\u00a0vmassol: are you sure you don't install some older version with EM ?  \n18:01\u00a0<+tmortagne>\u00a0what is trying to lookup this component according to your stack trace ?  \n18:01\u00a0<vmassol>\u00a0tmortagne: yes I'm sure  \n18:02\u00a0<vmassol>\u00a0let me get it  \n18:02\u00a0<vmassol>\u00a0https://gist.github.com/3499427  \n18:02\u00a0<vmassol>\u00a0I get this when I restart XE  \n18:02\u00a0<vmassol>\u00a0(with the wiki component extension installed through EM)  \n18:04\u00a0<CIA-122>\u00a0Jean-Vincent Drean\u000f master\u000f \\* r29291aa\u000f https://github.com/xwiki/xwiki-platform/commit/29291aa2509c56f5afe232cba4eaf26f4b0691e8 \u000f/ xwiki-platform-core/xwiki-platform-component/xwiki-platform-component-wiki/src/main/java/org/xwiki/component/wiki/internal/WikiComponentConstants.java :\u000f XWIKI-5195 : Make possible to implement any component from the wiki, using objects - http://git.io/C7K8oQ  \n18:05\u00a0<+tmortagne>\u00a0according to the stack trace DefaultWikiComponentManagerEventListener has a dependency on org.xwiki.model.reference.EntityReferenceSerializer and I don't see how EM can have any influence at this level  \n18:06\u00a0<vmassol>\u00a0tmortagne: compactwiki is in oldcore  \n18:06\u00a0<vmassol>\u00a0(not in legacy)  \n18:06\u00a0<+tmortagne>\u00a0no  \n18:06\u00a0<+tmortagne>\u00a0org.xwiki.model.reference.EntityReferenceSerializer<String> is in oldcore  \n18:06\u00a0<vmassol>\u00a0@Component(\"compactwiki\")  \n18:06\u00a0<vmassol>\u00a0public class CompactWikiStringEntityReferenceSerializer extends CompactStringEntityReferenceSerializer  \n18:06\u00a0<vmassol>\u00a0is in oldcore  \n18:07\u00a0<+tmortagne>\u00a0follow the extends  \n18:07\u00a0<+tmortagne>\u00a0and you will find  \n18:07\u00a0<+tmortagne>\u00a0class AbstractStringEntityReferenceSerializer implements EntityReferenceSerializer<String>  \n18:07\u00a0<+tmortagne>\u00a0so no it's not in oldcore  \n18:07\u00a0<+tmortagne>\u00a0EntityReferenceSerializer<String> with \"compactwiki\" is  \n18:08\u00a0<vmassol>\u00a0I don't see any legacy here  \n18:08\u00a0<+tmortagne>\u00a0here where ?  \n18:08\u00a0<vmassol>\u00a0you said the issue was becuase I didn't have legacy  \n18:09\u00a0<vmassol>\u00a0but I don't see anytyhing that requires legacy here  \n18:09\u00a0<+tmortagne>\u00a0all I'm saying is that org.xwiki.model.reference.EntityReferenceSerializer role is implemented only in legacy  \n18:09\u00a0<+tmortagne>\u00a0while in non legacy we implements always org.xwiki.model.reference.EntityReferenceSerializer<String> or org.xwiki.model.reference.EntityReferenceSerializer<EntityReference>  \n18:09\u00a0<vmassol>\u00a0I don't understand this sentence  \n18:09\u00a0<+tmortagne>\u00a0it's not the same role  \n18:09\u00a0<vmassol>\u00a0we surely have a lot of serializers not in megacy  \n18:09\u00a0<vmassol>\u00a0\\*legacy  \n18:09\u00a0<+tmortagne>\u00a0you forget about the generic type  \n18:10\u00a0<vmassol>\u00a0ok without the generic yes  \n18:10\u00a0<vmassol>\u00a0but we don't use that here  \n18:10\u00a0<+tmortagne>\u00a0ComponentManager says otherwise  \n18:10\u00a0<vmassol>\u00a0here = in DefaultWikiComponentManagerEventListener  \n18:11\u00a0<vmassol>\u00a0tmortagne: how can you explain it works fine without EM?  \n18:11\u00a0<vmassol>\u00a0couldn't there be some CL issue instead?  \n18:11\u00a0<+tmortagne>\u00a0I have no idea, either ComponentManager log is wrong or you are not looking at the right source  \n18:12\u00a0<vmassol>\u00a0or EM has a bug  \n18:12\u00a0<vmassol>\u00a0somehow  \n18:12\u00a0<+tmortagne>\u00a0depends if what CM say is right  \n18:12\u00a0<+tmortagne>\u00a0you should check how this log is printed so that we are sure of what we have  \n18:13\u00a0<+tmortagne>\u00a0make sure it print the full role  \n18:13\u00a0<+tmortagne>\u00a0it will be more clear then  \n18:35\u00a0<tmortagne>\u00a0has quit  \n18:36\u00a0<ssavi>\u00a0has joined #xwiki  \n18:42\u00a0<mflorea>\u00a0has quit  \n18:52\u00a0<dirk\\_schmitt>\u00a0I have problems to migrate a xwiki 3.1 instance to xwiki 4.1 with a postgresql database behind.  \n18:52\u00a0<dirk\\_schmitt>\u00a0Ist it a alternate solution to export all pages to a xar archive, drop the database, setup the xwiki instance from scratch and import the xar archive ?  \n18:53\u00a0<@sdumitriu>\u00a0dirk\\_schmitt: Yes  \n18:54\u00a0<dirk\\_schmitt>\u00a0In some sections of the xwiki I have big attachments (stored in the database).  \n18:54\u00a0<dirk\\_schmitt>\u00a0Will these attachments are also exported to the xar archive ?  \n18:55\u00a0<@sdumitriu>\u00a0But if the database is too big, you should use the large xar import/export extensions  \n18:55\u00a0<@sdumitriu>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/Large+Wiki+Export  \n18:55\u00a0<@sdumitriu>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/Large+XAR+Import  \n18:55\u00a0<@sdumitriu>\u00a0Yes, everything is exported in the XAR  \n18:57\u00a0<vmassol>\u00a0dirk\\_schmitt: see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Backup for the exact list of what is exported and what's not  \n18:57\u00a0<gdelhumeau>\u00a0has quit  \n18:59\u00a0<dirk\\_schmitt>\u00a0In the current installation the WYSIWYG Editor is broken. (Maybe side effects from a hardware crash ?  \n18:59\u00a0<dirk\\_schmitt>\u00a0Is this asset (java script code) in the war or the xar distribution ?  \n19:01\u00a0<vmassol>\u00a0war  \n19:04\u00a0<dirk\\_schmitt>\u00a0O.k. - thanks a lot for the answers.  \n19:08\u00a0<ssavi>\u00a0has quit  \n19:14\u00a0<CIA-122>\u00a0Vincent Massol\u000f master\u000f \\* r9263012\u000f https://github.com/xwiki/xwiki-rendering/commit/92630129951942dd5767ee1f8c34d7580e1d6263 \u000f/ xwiki-rendering-transformations/xwiki-rendering-transformation-macro/src/main/java/org/xwiki/rendering/internal/transformation/macro/MacroTransformation.java :\u000f XRENDERING-227: Invalid message about invalid macro parameter when the Macro Transformation fails to get the Macro Descriptor - http://git.io/I2\\_bWA  \n19:20\u00a0<CIA-122>\u00a0Vincent Massol\u000f master\u000f \\* r92e71cb\u000f https://github.com/xwiki/xwiki-platform/commit/92e71cba21b8437bc5709743e6dd108192c65929 \u000f/ (4 files in 3 dirs):\u000f XWIKI-5195: Allow implementing any component from the wiki, using objects - http://git.io/QG8Ltg  \n19:40\u00a0<jvdrean>\u00a0has quit  \n20:06\u00a0<cjd>\u00a0has quit  \n20:15\u00a0<vmassol>\u00a0has quit  \n20:19\u00a0<jvdrean>\u00a0has joined #xwiki  \n20:41\u00a0<vmassol>\u00a0has joined #xwiki  \n20:43\u00a0<vmassol>\u00a0has quit  \n20:57\u00a0<dirk\\_schmitt>\u00a0has quit  \n21:21\u00a0<cjd>\u00a0has joined #xwiki  \n22:02\u00a0<mflorea>\u00a0has joined #xwiki  \n22:14\u00a0<mflorea>\u00a0has quit  \n\n"}