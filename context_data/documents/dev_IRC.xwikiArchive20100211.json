{"id": "dev:IRC.xwikiArchive20100211", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100211", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nflorinciu1 left at 00:46 (Read error: Connection reset by peer  \nflaviusolaru joined #xwiki at 00:50  \nflaviusolaru left at 03:39 (Read error: Connection reset by peer  \nxwiki-bridge left at 05:20 (Quit: xwiki-bridge  \nxwiki-bridge joined #xwiki at 05:21  \nskuzz - (06:05): exit  \nskuzz - (06:05): exit  \nskuzz - (06:05): ]q  \nskuzz - (06:05): \\q  \nskuzz left at 06:05 (Quit: User abort with 5 Ctrl-C's  \nnpm left at 06:31 (Quit: Leaving.  \nnpm joined #xwiki at 06:33  \nsdumitriu left at 07:09 (Ping timeout: 256 seconds  \nplunden joined #xwiki at 07:15  \nkibahop joined #xwiki at 07:35  \nkibahop left #xwiki at 07:35  \nmflorea joined #xwiki at 08:15  \nvmassol joined #xwiki at 08:19  \nflorinciu joined #xwiki at 09:14  \nvmassol left at 09:19 (Quit: Leaving.  \nSvenDowideit left at 09:28 (Changing host  \nSvenDowideit joined #xwiki at 09:28  \nsilviar left at 09:32 (Remote host closed the connection  \nbblfish - (09:34): I will be in PAris for the next few days  \nvmassol joined #xwiki at 09:49  \nsilviar joined #xwiki at 09:52  \nanamarias joined #xwiki at 10:08  \nCalebJamesDeLisl - (10:24): To tell if the last author of a document has access to another document, I'd like to add hasAccessLevel to the api for checking access for users other than the current user. How much against it are you?  \nvmassol - (10:24): nice phrasing!  \nplunden left at 10:24 (Read error: Connection reset by peer  \nglerouge joined #xwiki at 10:25  \nbblfish - (10:26): just about to leave for Paris  \nCalebJamesDeLisl - (10:26): I don't see any access being provided which isn't already available via a big searchDocuments query (working on one now)  \nCalebJamesDeLisl - (10:27): I don't like adding things to the api but I think this could be quite useful.  \nvmassol - (10:28): hasAccessLevel is already there I think  \nvmassol - (10:28): let me check  \nCalebJamesDeLisl - (10:28): for the current user, it is.  \nvmassol - (10:29): ok I see  \nvmassol - (10:29): let me check the auth api  \nvmassol - (10:30): CalebJamesDeLisl: it's there I think  \nvmassol - (10:30): \u00a0\u00a0\u00a0\u00a0public boolean hasAccessLevel(String level, String user, String docname)  \nvmassol - (10:30): this is in api.XWiki.java  \nKermitTheFragger joined #xwiki at 10:30  \nCalebJamesDeLisl - (10:31): Thanks. \\*feeling quite foolish now but glad I don't have to lobby for api changes :)  \nvmassol - (10:31): :)  \nCalebJamesDeLisl - (10:32): BTW: I think access can be checked in 2 queries.  \nCalebJamesDeLisl - (10:32): Might be able \u00a0to speed up the checker (although I'd hate to touch that code.)  \nvmassol - (10:34): yes at some point we'll need to create a module for authentication/authorization and rewrite is compeltemy  \nvmassol - (10:34): \\* completely  \nplunden joined #xwiki at 10:34  \nglerouge - (10:35): (for the record, at some point there is no XWiki module that Vincent doesn't want to rewrite completely)  \nvmassol - (10:35): yep  \nvmassol - (10:35): that's because the entropy of the universe is negative  \nvmassol - (10:36): so anything you don't keep touching decays  \nCalebJamesDeLisl - (10:37): I usually don't want to rewrite anything until I start working on it then I find I want to rewrite everything too.  \narkub joined #xwiki at 10:38  \nglerouge - (10:39): :)  \nbblfish left at 10:41 (Ping timeout: 260 seconds  \nCalebJamesDeLisl - (10:42): Should be able to do checking in a single query but the whole \"you must be allowed but even so you can't be denied\" thing has me baffled as to how to express in sql.  \njvdrean joined #xwiki at 10:46  \nxwikibot joined #xwiki at 10:52  \nlucaa joined #xwiki at 11:42  \nCalebJamesDeLisl - (11:43): glerouge: re email about mockup, I could copy-paste the html into an html macro and show you basically what I'm looking at now, it would be quick but it is still rather ugly. I could take some time to get things looking better (more like what they will look like) and then upload that. Which do you prefer?  \nglerouge - (11:45): ugly but fast is better  \nglerouge - (12:07): CalebJamesDeLisl: couldn't you use property.prettyName instead of liveValidation\\_enabled if the fields come from a XClass ?  \nCalebJamesDeLisl - (12:08): I was just typing up the email to say that the pretty names haven't yet been set.  \nCalebJamesDeLisl - (12:08): Is that what you meant?  \nglerouge - (12:09): yes  \nglerouge - (12:09): you can put a nicer name / explanation in the pretty name  \nCalebJamesDeLisl - (12:09): I also intend to use a msg.get so that it is translatable.  \nCalebJamesDeLisl - (12:10): (the prettyName)  \nglerouge - (12:10): ok  \nCalebJamesDeLisl - (12:10): Another thing I want to do is add a button at the bottom which saves all fields because I don't like multiple save buttons.  \nCalebJamesDeLisl - (12:11): I will have to do it with javascript because the multiple forms is a technical limitation of SaveAction.  \nglerouge - (12:12): ok  \nglerouge - (12:12): why don't you put each thing in it own administration section ?  \nglerouge - (12:12): rather than making the default one longer  \nCalebJamesDeLisl - (12:14): I hadn't thought about it. I had done it that way because it made sense that the registration page would go under registration.  \nglerouge - (12:15): right  \nglerouge - (12:15): but for some other apps (say the bulleting board) a dedicated section would be better  \nCalebJamesDeLisl - (12:15): Easier to implement too.  \nCalebJamesDeLisl - (12:17): Actually since it just appends the code onto whatever is there, I can just make the admin app display a blank page if the section isn't defined, thus anything which specifies that section will show up there.  \nCalebJamesDeLisl - (12:18): Then the only issue is adding icons to the admin main page for apps such as the bulletin board which should have their own admin page.  \nglerouge - (12:18): 2 options  \nglerouge - (12:18): the app defines its own icon  \nglerouge - (12:19): + we add a generic icon for apps that don't have one  \nglerouge - (12:19): thus we get:  \nglerouge - (12:20): section defined -> append below | no section no icon -> new section with default icon | no section icon -> new section with icon  \nCalebJamesDeLisl - (12:20): That sounds good.  \nglerouge - (12:21): do you imply that some of my ideas don't? :p  \nCalebJamesDeLisl - (12:21): :)  \njvdrean left at 12:24 (Quit: Leaving.  \njvelociter joined #xwiki at 12:38  \nCalebJamesDeLisl - (12:40): Suppose 2 apps specify the icons for the same admin section, who wins?  \nglerouge - (12:41): 2 possibilities  \nglerouge - (12:41): the first one who asks / ask the administrator who wins  \nCalebJamesDeLisl - (12:42): the first one who asks - I think by default the lowest database id shows up first.  \nCalebJamesDeLisl - (12:43): Repeatable but that's about all that can be said for it.  \nglerouge - (12:43): asking the admin upon app installation might be better  \nmflorea left at 12:43 (Quit: Leaving.  \nglerouge - (12:43): \"this new app you're installing wants to change the icon, are you ok about it?\"  \nCalebJamesDeLisl - (12:44): I'm not big on mixing the importer up with the configurable if avoidable.  \nglerouge - (12:45): don't touch the importer  \nglerouge - (12:46): alert the admin hte neext time he accesses the admin UI  \nCalebJamesDeLisl - (12:46): That's an idea.  \nglerouge - (12:47): it's not perfect  \nglerouge - (12:47): especially if another admin ends up choosing for an app isntallaed by the first admin  \nCalebJamesDeLisl - (12:50): How about if the first app to be installed always wins but subsequent apps have their icons placed on the page next to their name?  \nCalebJamesDeLisl - (12:50): Might be ugly.  \nCalebJamesDeLisl - (12:51): It would probably be okay if the images were force scaled down.  \nCalebJamesDeLisl - (12:54): Actually come to think about it, +1 for \"first app to be installed always wins\" and -1 for \"subsequent apps have their icons placed on the page next to their name\". WDYT?  \nbbc581 joined #xwiki at 12:55  \nxenon75 joined #xwiki at 12:58  \nbbc581 left at 13:00 (Ping timeout: 252 seconds  \njvdrean joined #xwiki at 13:00  \nflaviusolaru joined #xwiki at 13:03  \nglerouge - (13:04): CalebJamesDeLisl: sounds ok to me  \nCalebJamesDeLisl - (13:04): Great, onward...  \nglerouge - (13:04): as long as the default apps win it's ok (for instance the registration couldn't be overwritten since it's already there)  \nglerouge - (13:05): if we can safely assume that first = default  \nsdumitriu joined #xwiki at 13:07  \nCalebJamesDeLisl left at 13:13 (Ping timeout: 240 seconds  \nvmassol - (13:20): new sequence diagram macro ready  \nvmassol - (13:20): isn't it cool?  \nglerouge - (13:20): we thought so :)  \nvmassol - (13:21): I contacted them to add us to  \nvmassol - (13:21): http://www.websequencediagrams.com/embedding.html  \nvmassol - (13:21): when I saw confluence written there I couldn't not create a wiki macro for this!  \nvmassol - (13:21): :)  \nglerouge - (13:21): sdumitriu: one thing I don't understand is that my xwiki-based intranet or xwiki.org almost never restart (and I use my intranet quite often) whereas myxwiki.org is almost always acting up  \nglerouge - (13:21): lo  \nglerouge - (13:21): l  \nvmassol - (13:22): glerouge: that would prove that the pb is not with the sofwtare  \nvmassol - (13:22): but with how people use it  \nvmassol - (13:22): s/prove/tend to prove/  \nvmassol - (13:22): like leaving comments open to anyone  \nvmassol - (13:23): (leading to ton of spams slowing down the machine)  \nvmassol - (13:23): or writing complex queries  \nvmassol - (13:23): that take time  \nvmassol - (13:23): the pb is that we're not measuring this  \nvmassol - (13:23): so we're in the dark  \nglerouge - (13:24): yep  \nglerouge - (13:24): it would be interesting to do some analysis so that we correct it instead of simply complaining about it all the time  \nglerouge - (13:24): sdumitriu: do you think you could handle it ?  \nsdumitriu - (13:25): Yes, but the real question is when  \nsdumitriu - (13:26): There's another difference between myxwiki and xwiki  \nsdumitriu - (13:26): myxwiki is running another version  \nsdumitriu - (13:26): It's true that it used to restart before, but only 2-3 times per day  \nsdumitriu - (13:26): Now it restarts hourly  \nglerouge - (13:27): which version is it using ? should we upgrade it to the latest one to make sure we don't have a serious memory leak ?  \nsdumitriu - (13:27): Upgrading doesn't prove anything  \nsdumitriu - (13:27): Profiling does  \nglerouge - (13:27): that's one of the (few) things I don't know how to do yet ;)  \nvmassol - (13:30): we need to uprgade myxwiki.org to 2.2RC2 today  \nvmassol - (13:30): do we have a volunteer?  \nglerouge - (13:30): they're off eating ;)  \nmflorea joined #xwiki at 13:38  \nbbc581 joined #xwiki at 14:08  \nbbc581 left at 14:12 (Ping timeout: 240 seconds  \nplunden left at 14:32 (Read error: Connection reset by peer  \nplunden joined #xwiki at 14:34  \nxenon75 - (14:44): vmassol : In the usage section maybe there is a leftover\u2026 there's an example of the {{yuml}} macro  \nvmassol - (14:45): xenon75: thanks, fixing  \nxenon75 is now known as fmancinelli ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nvmassol - (14:46): fixed thanks  \nvmassol - (14:46): :)  \nvmassol - (14:47): jvdrean: don't you think the wiki and space menus should be hidden when the user doesn't have view rights in the wiki or space?  \nvmassol - (14:47): (try removing view rights from the guest user and log out, you'll see the 2 menus are there)  \nglerouge - (14:47): I've been asked something similar on one of my projects  \nvmassol - (14:47): here's an example: https://xwiki.imolinfo.it/xwiki/bin/login/XWiki/XWikiLogin?srid=q96b13aS  \nvmassol - (14:48): the search box too  \nglerouge - (14:48): not for the search box  \nglerouge - (14:48): there might be a page available with proper rights  \nvmassol - (14:48): the search box shouldn't be shown if you don't have view rights on it!  \nvmassol - (14:49): it = Search page  \nglerouge - (14:49): right  \nvmassol - (15:09): CSS expert needed. We have a bug in http://localhost:8080/xwiki/bin/view/Main/AllDocs?view=tree which shows a horizontal scrollbar when it shouldn't  \nvmassol - (15:09): (in the colibri skin)  \nvmassol - (15:09): who could fix this?  \nvmassol - (15:10): I was pretty sure caty fixed it but it's surfaced again  \nvmassol - (15:17): jvdrean? glerouge (since he knows how to do everything!)? A pity caty is not online too.  \nglerouge - (15:17): she should be back soon  \nglerouge - (15:17): oana was in bucharest a couple hours ago  \nglerouge - (15:17): she should be able to fix it tomorrow if that's ok ?  \nvmassol - (15:17): mflorea: I have a question. How do you remove a macro in the wysiwyg editor? I selected it and hit the backspace key and that triggered the browser's back action  \nvmassol - (15:18): glerouge: tomorrow is still fine  \nglerouge - (15:18): click on the macro then click the macro menu then click \"remove macro\"  \nmflorea - (15:18): vmassol: let me check  \nglerouge - (15:18): (the macro menu in the editor toolbar)  \nvmassol - (15:18): mflorea: the key used to work AFAIR  \nglerouge - (15:18): vmassol: I agree it should  \nvmassol - (15:19): mflorea: I also got a cursor pb in FF 3.6. I edit the home page, clicked at the end of the first line, hit enter and the cursor stayed on the first line  \nvmassol - (15:19): I have the feeling FF 3.6 broke a few things  \nvmassol - (15:20): actually when I git return the cursor is moved to the beginning of the first line  \nvmassol - (15:20): (and not to the beginning of the second, empty, line)  \nvmassol - (15:22): mflorea: also for macros that have content on more than one line I'd suggest adding extra NL so that the frist content line appears on a separate line from the macro name  \nvmassol - (15:22): (first and last NL are ignored for macros)  \nmflorea - (15:22): vmassol: so you're using FF3.6  \nvmassol - (15:22): (in order to present them in a nice manner)  \nvmassol - (15:22): yes  \nvmassol - (15:23): mflorea: and when you edit a macro there are extra NL that appear  \nvmassol - (15:23): (the frist and last NL are not ignored as they should)  \nvmassol - (15:24): (last, I still have the double click issue)  \nplunden left #xwiki at 15:25  \nvmassol - (15:25): (double click for macros)  \nhcross joined #xwiki at 15:29  \nhcross - (15:29): hi guys  \nhcross - (15:30): could you advice me regarding the way dynamically create forms for manipulating list of objects (of the same class) attached to a page  \nhcross - (15:31): currently I use $doc.newObject('Core.MyClass') but I cannot set params nor add more than one object (?)  \nplunden joined #xwiki at 15:31  \nhcross - (15:31): here it is about a validation macro  \nhcross - (15:31): I declared a ValidationVoteClass with the following params  \nhcross - (15:32): user : list of users  \nhcross - (15:32): vote : ok | ko | undecided (static list)  \nEnygma` joined #xwiki at 15:32  \nhcross - (15:33): the macros should be used like this : {{validation users=\"HoaniCross,VincentMassol\"/}}  \nhcross - (15:33): and this allow to dynamically add a floating box with a way to validate the document if you are part of the validation declared users  \nvmassol - (15:34): hcross: hoe you're going to submit back this simple workflow feature! :) It's been asked often  \nhcross - (15:34): I want the ValidationVoteClass objects created the first time the macro is used but I faced the problem decribed previously  \nvmassol - (15:34): s/hoe/hope/  \nhcross - (15:36): my client, for which I developed this module, as sign a \"open source\" licensing possibilities clause in the contract linking it to my company, thus I will ask him for releasing this part :) but this NEED to work for my next interview which is programmed in... less than 4 hours (it's 04:39am here)  \nhcross - (15:38): maybe the macro code could help you :  \nhcross - (15:38): {{velocity}}  \nhcross - (15:38): ## +----<( get macro parameters and init part )>----+  \nhcross - (15:38): ##  \nhcross - (15:38): #set ($valUsers = $util.split($context.macro.params.users,\",\"))  \nhcross - (15:38): #set ($objects = $doc.getObjects('Core.ValidationVoteClass'))  \nhcross left at 15:38 (Excess Flood  \nglerouge - (15:38): lol  \nvmassol - (15:38): tinypaste....  \nvmassol - (15:38): flooder!  \nvmassol - (15:38): :)  \nhcross joined #xwiki at 15:39  \nvmassol - (15:39): tinypaste hoani  \nhcross - (15:39): flood ban sorry :)  \nhcross - (15:40): http://tinypaste.com/a83a7  \nmflorea - (15:43): vmassol: (1) click+delete is indeed a FF3.6-only issue. I need to investigate the cause. (2) Even if the cursor is wrongly displayed when you type the characters are inserted in the right place and the caret is correctly updated. Looks like a FF3.6 rendering bug. I need to investigate this too. (3) I don't understand \"also for macros that have content on more than one line I'd suggest adding extra NL so that the frist content line appears on   \nvmassol - (15:44): mflorea: try this in wiki mode: http://tinypaste.com/0d5b0  \nvmassol - (15:45): you'll see the NL are discarded. It prints \"Hi Marius.\"  \nvmassol - (15:45): now edit in wysiwyg mode and double click the macro  \nvmassol - (15:45): you'll see extra lines in the textarea edit field  \nvmassol - (15:45): they shouldn't be there  \nmflorea - (15:47): vmassol: the new lines are inside the macro content. The macro content starts after the }} and end before the {{. NL are discarted when the macro content is displayed, but that is a different thing. \\n has no effect in HTML..  \nvmassol - (15:47): mflorea: the NL shouldn't be there in the wysiwyg field and when you insert a new macro you should add NL  \nvmassol - (15:48): (when the content is on more than 1 line IMO)  \nmflorea - (15:48): I don't agree. The edit macro dialog allows you to edit the macro content exactly as you edit it in the wiki editor.  \nvmassol - (15:48): (or said differently when the macro is standalone but i don't know if you can detect this)  \nvmassol - (15:48): mflorea: this is wrong  \nvmassol - (15:48): the first and last NL are not content  \nmflorea - (15:48): why?  \nmflorea - (15:50): they are because the Java API gives them to me. If they weren't inside the content then getting the macro content from the rendering wouldn't include them  \nvmassol - (15:50): they are non significant content if you prefer  \nvmassol - (15:50): and they look real weird when displayed  \nvmassol - (15:50): in the edit field  \nmflorea - (15:50): then the rendering should from them  \nvmassol - (15:50): they're not understandable  \nvmassol - (15:50): the rendering does remove them  \nmflorea - (15:50): then why are them kept by the rendering?  \nvmassol - (15:50): they are not  \nvmassol - (15:51): have you tried my example?  \nmflorea - (15:51): no, it doesn't remove them, otherwise how can I get them?  \nvmassol - (15:51): have you tried my example?  \nmflorea - (15:51): yes  \nvmassol - (15:51): it doesn't show \"Hi Marius.\"?  \nvmassol - (15:52): what you get is the macro content from the marker  \nvmassol - (15:52): ie as is  \nvmassol - (15:52): not as rendered  \nmflorea - (15:52): that has nothing to do with the content, this is just the way the content is displayed. Line when you have multiple whitespaces inside HTML source and they are displayed as a single whitespace  \nvmassol - (15:52): (since it's macro content)  \nvmassol - (15:53): in the same manner you get non significant white spaces too  \nvmassol - (15:53): for velocity macros  \nvmassol - (15:53): you could display them in a special manner too  \nvmassol - (15:53): different background color, etc  \nvmassol - (15:54): what I mean is that non significant content needs special habndling  \nvmassol - (15:54): from the code that displays them  \nmflorea - (15:54): vmassol: I'm not displaying the code in the edit macro dialog. I'm allowing the user to edit it  \nvmassol - (15:54): to be honest I stared using the wysiwyg today and I quickly stopped when I saw I had to edit my content in wiki mode afterwards to fix it  \nvmassol - (15:54): and that's just too bad  \nvmassol - (15:55): since it's easy to fix  \nmflorea - (15:55): wdym? :|  \nmflorea - (15:55): what did you have to fix?  \nvmassol - (15:55): add 2 extra NL  \nmflorea - (15:55): why?  \nvmassol - (15:55): because I want my wiki code to be readable  \nvmassol - (15:56): and this is the convention we use  \nvmassol - (15:56): to have extra NL before and after macro content  \nvmassol - (15:56): we use that everywhere  \nmflorea - (15:56): then why do you edit with a wysiwyg editor?  \nvmassol - (15:56): the point is to be able to go back and forth without problem  \nmflorea - (15:56): anyway, you can add the newlines from the edit macro dialog  \nvmassol - (15:56): you don't understand  \nvmassol - (15:56): let me call you  \njvdrean1 joined #xwiki at 16:21  \njvdrean left at 16:21 (Read error: Connection reset by peer  \nCalebJamesDeLisl joined #xwiki at 16:26  \nplunden left #xwiki at 16:28  \nanamarias - (16:32): how do you create a document with the name and space you want in velocity? I only see $xwiki.createDocument() , and no method in document to set the name or space...  \nlucaa - (16:32): getDocument() creates a doc  \nlucaa - (16:32): isNew() tells you if the doc u got with getDocument is new or existing  \nglerouge - (16:32): if the doc doesnt' exist yet  \nanamarias - (16:32): riiight :P  \nglerouge - (16:32): and then you need to do doc.save()  \nanamarias - (16:33): thanks :)  \nglerouge - (16:33): I mean, $mynewdocwithafancyname.save()  \nCalebJamesDeLisl left at 16:33 (Ping timeout: 240 seconds  \nvmassol - (16:37): hcross: \"currently I use $doc.newObject('Core.MyClass') but I cannot set params nor add more than one object (?)\" wdym by params?  \nvmassol - (16:38): $doc.newObject returns the object  \nvmassol - (16:38): for ex: http://code.xwiki.org/xwiki/bin/view/Snippets/RestoreXWikiAllGroupSnippet  \nvmassol - (16:38): #set($member = $allGroupDoc.newObject(\"XWiki.XWikiGroups\"))  \nvmassol - (16:38): \u00a0$member.set(\"member\", $userDocName)  \nvmassol - (16:38): is that what you mean?  \nvmassol - (16:42): I have to go out for 30 mn, bb after  \njvdrean1 left at 17:04 (Quit: Leaving.  \nanamarias - (17:22): let's say I have this code:  \nanamarias - (17:22): {{velocity}}  \nanamarias - (17:22): \u00a0\u00a0#set($macroCode = '{{velocity}}#set($url = \\'my\\_url\\'){{/velocity}}'))  \nanamarias - (17:22): \u00a0\u00a0// do something with $macroCode string  \nanamarias - (17:22): {{/velocity}}  \nanamarias - (17:22): what do I do so that '{{velocity}}#set($url = \\'my\\_url\\'){{/velocity}}' is not interpreted  \nanamarias - (17:23): and treat it as a plain string  \nanamarias - (17:23): \\*treated  \njvelociter - (17:23): anamarias: verbatim block ?  \njvelociter - (17:23): ah no  \nanamarias - (17:24): even if I need to set the property of an object ? still in velocity  \nanamarias - (17:24): $obj.set('prop', $macroCode)  \njvelociter - (17:24): you can concatenate strings  \njvelociter - (17:25): #set($code = \"{{velocity\" + \"}} #set(...) {{/velocity\" + \"}}\"  \nanamarias - (17:26): i'm trying this \u00a0\u00a0#set($macroCode = '{{{{{velocity}}#set($gadgeturl = \\'}}}')  \nanamarias - (17:27): it doesn't break anymore, but I need to check the saved object value  \nanamarias - (17:27): that it's the correct one  \nanamarias - (17:27): or I could concatenate strings, that will work for sure :)  \nvmassol - (17:28): well IMO this shows a design pb  \nvmassol - (17:28): why do you need to pass wiki syntax?  \nvmassol - (17:28): why not pass the url for ex?  \nvmassol - (17:30): btw if you really wanted to write wiki + velocity syntax in a velocity macro  \nvmassol - (17:30): you'd need to escape it for velocity and for wiki syntax  \nvmassol - (17:30): so escape # for velocity and escape '{' for wiki syntax  \nvmassol - (17:31): something like macroCode = '~{{velocity}}\\#set....  \nsdumitriu - (17:31): Whi \\#?  \nvmassol - (17:31): to escape from velocity  \nsdumitriu - (17:31): Really?  \nvmassol - (17:31): since velocity is executed first  \nsdumitriu - (17:31): How come?  \nsdumitriu - (17:31): Isn't it escaped already?  \nvmassol - (17:31): by whom?  \nsdumitriu - (17:31): ~{{  \nvmassol - (17:31): no  \nvmassol - (17:32): {{velocity}} does 2 things:  \nvmassol - (17:32): Step 1: run velocity on the content  \nvmassol - (17:32): Step 2: run the wiki parser on the result  \nvmassol - (17:32): but IMO here it should be done differently but I don't have teh full use case to suggest something better  \nsdumitriu - (17:32): OK, so you're not talking about the {{velocity}} inside, but the one already executing  \nvmassol - (17:33): well I understood that Ana doesn't want the inside one executed  \nvmassol - (17:33): so it needs to be escaped (or done differently)  \nvmassol - (17:34): you could also use verbatim indeed as suggested by jerome but you'd still need the velocity escapes  \narkub left at 17:36 (Quit: Leaving  \nmflorea - (17:37): guys, who has time to try something quick on its local XE instance, preferably a new one, 2.2SNAPSHOT?  \nvmassol - (17:37): I have one from a few days (2.3 snap) if you want  \nmflorea - (17:38): great. go to Main.AllDocs and open the tree view  \nvmassol - (17:38): done  \nmflorea - (17:39): copy: Blog.WebHome and paste it in the input below the tree (it's important to paste the text and not write it)  \nvmassol - (17:39): copy?  \nmflorea - (17:39): copy from this chat  \nmflorea - (17:39): just  \nmflorea - (17:39): Blog.WebHome  \nvmassol - (17:39): done  \nvmassol - (17:39): it scrolls correctly  \nvmassol - (17:40): but not vertical scrollbar  \nvmassol - (17:40): s/not/no/  \nmflorea - (17:40): in my case the browser goes into an infinite loop  \nvmassol - (17:40): oh verical scrollbars are busted  \nvmassol - (17:41): actually they appear but badly  \nsilviar left #xwiki at 17:41  \nmflorea - (17:41): but is the page responding after you paste the text?  \nvmassol - (17:42): yes  \nmflorea - (17:42): hmm, ok, I have XWiki Enterprise 2.3-SNAPSHOT.26941  \nmflorea - (17:43): and FF3.5.7, let me try on 3.6  \nmflorea - (17:46): same with 3.6, at least on 3.6 I get  \nmflorea - (17:46): too much recursion  \nmflorea - (17:46): http://192.168.2.14:8080/xwiki/resources/js/smartclient/modules/ISC\\_Grids.js  \nmflorea - (17:46): Line 79  \nvmassol - (17:46): maybe my version is too old and this was introduced recently  \njvdrean joined #xwiki at 17:46  \nfmancinelli left at 18:08 (Quit: Leaving.  \njvdrean left at 18:14 (Quit: Leaving.  \njvdrean joined #xwiki at 18:18  \nKermitTheFragger left at 18:20 (Quit: Leaving  \njvdrean left at 18:27 (Quit: Leaving.  \nplunden joined #xwiki at 18:30  \njvdrean joined #xwiki at 18:31  \nsdumitriu left at 18:57 (Ping timeout: 252 seconds  \ntmortagne joined #xwiki at 19:19  \nmflorea left at 19:27 (Quit: Leaving.  \nflorinciu left at 19:27 (Ping timeout: 256 seconds  \nhcross1 joined #xwiki at 19:39  \nhcross1 - (19:40): hi, connected from my client hq :)  \nhcross1 - (19:40): that's why I'm duplicated  \nhcross1 - (19:40): I got a trouble with my xwiki macro code  \nxenon75 joined #xwiki at 19:41  \nglerouge - (19:41): what kind of trouble ?  \nhcross1 - (19:41): I embeeded groovy code that access doc variable  \nhcross1 - (19:42): the problem is that the doc ref is the macro doc  \nhcross1 - (19:42): not the doc that uses the macro :(  \nglerouge - (19:42): it's a known issue  \nglerouge - (19:42): the workaround is documented  \nhcross1 - (19:42): is there any way to get the \"caller\" document using context ?  \nhcross1 - (19:42): ah cool :) an URL pliz  \nglerouge - (19:43): Following are few useful hints if you plan to do advanced scripting inside your wiki macros:  \nglerouge - (19:43): \u2022 Access parameters: Use the context object (Ex. $context.macro.params.param1)  \nglerouge - (19:43): \u2022 Access macro body (if your macro defines one): Use the context object (Ex. $context.macro.content)  \nglerouge - (19:43): \u2022 Access http://svn.xwiki.org/svnroot/xwiki/platform/core/trunk/xwiki-rendering/xwiki-rendering-api/src/main/java/org/xwiki/rendering/transformation/MacroTransformationContext.java: Use the context object (Ex. $context.macro.context)  \nglerouge - (19:43): http://platform.xwiki.org/xwiki/bin/view/DevGuide/WikiMacroTutorial  \nlucaa - (19:43): restarting myxwiki.org  \nglerouge - (19:44): are you using $context or $xcontext ?  \nhcross1 - (19:44): $xcontext.put(\"valUsers\", $valUsers)  \nhcross1 - (19:44): $xcontext.put(\"objects\", $objects)  \nhcross1 - (19:44): just before opening the groovy part  \nhcross1 - (19:45): and in the groovy part : valUsers = xcontext.get(\"valUsers\")  \nhcross1 - (19:45): objects = xcontext.get(\"objects\")  \nglerouge - (19:45): you also have http://jira.xwiki.org/jira/browse/XWIKI-4262  \nhcross1 - (20:01): even printing out (with println()) in a groovy script of the code of a macro outputs nothing !  \nhcross1 - (20:01): like the outputstream has not been properly injected  \njvdrean left at 20:05 (Quit: Leaving.  \nglerouge left at 20:08 (Quit: Leaving.  \ntmortagne left at 20:08 (Quit: Leaving.  \nglerouge joined #xwiki at 20:11  \nlucaa left #xwiki at 20:15  \nflaviusolaru left at 20:15 (Read error: Connection reset by peer  \nglerouge left at 20:16 (Ping timeout: 265 seconds  \nanamarias - (20:26): vmassol: escaping the string with ~ and \\ worked, i.e. doesn't break the page anymore  \nanamarias - (20:26): but when I look at the result, the ~ caracters are still present  \nanamarias - (20:27): (result = value of the created object property)  \nanamarias - (20:28): I get: ~{{velocity}}#set($gadgeturl = 'http://www.google.com/ig/modules/docs.xml')~{{/velocity}}~{{include document='MacrosCode.GoogleGadgetsMacroCode'}}  \nanamarias - (20:28): my code is:  \nanamarias - (20:28): \u00a0\u00a0#set($macroCode = \"~{{velocity}}\\#set($gadgeturl = '\" + $url + \"')~{{/velocity}}\" +  \nanamarias - (20:28): \u00a0\u00a0\u00a0\u00a0\"~{{include document='MacrosCode.GoogleGadgetsMacroCode'}}\")  \nanamarias - (20:28): \u00a0\u00a0#set($discard = $macroObj.set('code', $macroCode))  \nanamarias - (20:30): hmm looks like I don't really need the ~, works without it  \nhcross1 - (21:07): is the request object available in groovy embeeded in a macro code ?  \nmflorea joined #xwiki at 21:07  \nhcross1 - (21:27): how do you use Document.updateObjectFromRequest('XWiki.MyClass') ?  \nhcross1 - (21:27): a form pointing to the page containting this assert is sufficient ?  \njvelociter left at 21:34 (Quit: jvelociter  \nflorinciu joined #xwiki at 21:50  \nvmassol left at 21:59 (Quit: Leaving.  \nxenon75 left at 22:11 (Quit: Leaving.  \nCalebJamesDeLisl joined #xwiki at 22:19  \nplunden left at 23:01 (Quit: Leaving.  \nmflorea left at 23:14 (Quit: Leaving.  \n\n"}