{"id": "dev:IRC.xwikiArchive20121025", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20121025", "title": "IRC Archive for channel #xwiki on 25 October 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<fmancinelli>\u00a0has quit  \n00:12\u00a0<SvenDowideit>\u00a0has quit  \n00:12\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n00:15\u00a0<jvdrean>\u00a0has quit  \n00:24\u00a0<vmassol>\u00a0has joined #xwiki  \n00:36\u00a0<vmassol>\u00a0has quit  \n00:36\u00a0<Denis>\u00a0has joined #xwiki  \n01:03\u00a0<vmassol>\u00a0has joined #xwiki  \n01:15\u00a0<sburjan`>\u00a0has quit  \n01:17\u00a0<vmassol>\u00a0has quit  \n01:17\u00a0<sburjan`>\u00a0has joined #xwiki  \n01:43\u00a0<vmassol>\u00a0has joined #xwiki  \n01:56\u00a0<vmassol>\u00a0has quit  \n02:20\u00a0<Denis>\u00a0has quit  \n02:24\u00a0<vmassol>\u00a0has joined #xwiki  \n02:35\u00a0<vmassol>\u00a0has quit  \n03:04\u00a0<vmassol>\u00a0has joined #xwiki  \n03:16\u00a0<vmassol>\u00a0has quit  \n03:43\u00a0<vmassol>\u00a0has joined #xwiki  \n03:44\u00a0<tillo>\u00a0has quit  \n03:45\u00a0<tillo>\u00a0has joined #xwiki  \n03:45\u00a0<tillo>\u00a0has quit  \n03:45\u00a0<tillo>\u00a0has joined #xwiki  \n03:58\u00a0<vmassol>\u00a0has quit  \n04:24\u00a0<vmassol>\u00a0has joined #xwiki  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:37\u00a0<vmassol>\u00a0has quit  \n05:04\u00a0<vmassol>\u00a0has joined #xwiki  \n05:15\u00a0<tekzilla>\u00a0has quit  \n05:17\u00a0<tekzilla>\u00a0has joined #xwiki  \n05:18\u00a0<vmassol>\u00a0has quit  \n05:45\u00a0<vmassol>\u00a0has joined #xwiki  \n05:58\u00a0<vmassol>\u00a0has quit  \n06:00\u00a0<Denis>\u00a0has quit  \n06:26\u00a0<vmassol>\u00a0has joined #xwiki  \n06:39\u00a0<vmassol>\u00a0has quit  \n07:07\u00a0<vmassol>\u00a0has joined #xwiki  \n07:21\u00a0<vmassol>\u00a0has quit  \n07:42\u00a0<coud>\u00a0has joined #xwiki  \n07:48\u00a0<vmassol>\u00a0has joined #xwiki  \n08:01\u00a0<vmassol>\u00a0has quit  \n08:19\u00a0<vmassol>\u00a0has joined #xwiki  \n08:20\u00a0<mflorea>\u00a0has joined #xwiki  \n08:23\u00a0<coud>\u00a0has quit  \n08:38\u00a0<mrvanes>\u00a0has joined #xwiki  \n09:10\u00a0<vmassol>\u00a0good morning  \n09:16\u00a0<Denis>\u00a0has joined #xwiki  \n09:18\u00a0<vmassol>\u00a0AndreasJonsson: good morning, do you think you could have a look at http://nemo.sonarsource.org/drilldown/violations/XWIKI?severity=CRITICAL ?  \n09:18\u00a0<vmassol>\u00a0actually maybe it should be Denis  \n09:19\u00a0<vmassol>\u00a0I assumed you wrote it but it seems to be Denis actually....  \n09:19\u00a0<vmassol>\u00a0Denis: ?  \n09:19\u00a0<vmassol>\u00a0http://nemo.sonarsource.org/drilldown/violations/XWIKI?rids%5B%5D=367322&rule=pmd%3AXPathRule\\_1339015068&rule\\_sev=CRITICAL&severity=CRITICAL#  \n09:19\u00a0<vmassol>\u00a0it's the only critical violation we have  \n09:20\u00a0<Denis>\u00a0but what is it ?  \n09:20\u00a0<vmassol>\u00a0it's explained there  \n09:21\u00a0<Denis>\u00a0do not understand what it means currently  \n09:21\u00a0<vmassol>\u00a0looks pretty clear to me  \n09:21\u00a0<vmassol>\u00a0http://nemo.sonarsource.org/rules/show/pmd:XPathRule\\_1339015068?layout=false  \n09:22\u00a0<vmassol>\u00a0trying to understand the bug report, it seems to be fixed in 1.8 but in the meantime we should use something else  \n09:25\u00a0<Denis>\u00a0not clear to me currently  \n09:26\u00a0<vmassol>\u00a0what it means is that you shouldn't use Long.bitCount  \n09:26\u00a0<vmassol>\u00a0it's buggy  \n09:29\u00a0<Denis>\u00a0I do not feel we are affected  \n09:29\u00a0<vmassol>\u00a0why?  \n09:44\u00a0<Denis>\u00a0because we never use it  \n09:44\u00a0<vmassol>\u00a0Denis: then the code needs to be removed we don't want dead code  \n09:44\u00a0<vmassol>\u00a0it's even worse  \n09:44\u00a0<Denis>\u00a0it is the full implementation of Set  \n09:46\u00a0<vmassol>\u00a0just throw a new RuntimeException('\"unused\") but I doubt that you can guarantee that it's not used  \n09:47\u00a0<Denis>\u00a0since it is not internal, it can of course be used by others  \n09:47\u00a0<vmassol>\u00a0even by AbstractSet  \n09:48\u00a0<Denis>\u00a0I really doubt it is, but yes it could as well  \n09:49\u00a0<vmassol>\u00a0hmm btw it seems this implementation is limiting the ability to add new rights no?  \n09:49\u00a0<Denis>\u00a0no  \n09:49\u00a0<Denis>\u00a0it limit the number of rights to 64  \n09:49\u00a0<vmassol>\u00a0exactly what I said :)  \n09:49\u00a0<Denis>\u00a0sure it is do that way  \n09:49\u00a0<vmassol>\u00a0that's bad  \n09:50\u00a0<Denis>\u00a0but could you really manage that number of rights ?  \n09:50\u00a0<vmassol>\u00a0of course  \n09:50\u00a0<vmassol>\u00a0why not?  \n09:50\u00a0<vmassol>\u00a0we have hundreds of extenions  \n09:50\u00a0<Denis>\u00a0beacuse admin user will not do it right, I am sure  \n09:50\u00a0<vmassol>\u00a0I'm pretty sure  \n09:50\u00a0<vmassol>\u00a0that's not our problem  \n09:50\u00a0<vmassol>\u00a0it's the same as saying  \n09:50\u00a0<vmassol>\u00a0we limit the # of components  \n09:51\u00a0<vmassol>\u00a0because they interact with each other  \n09:51\u00a0<vmassol>\u00a0and people will make mistakes  \n09:51\u00a0<vmassol>\u00a0we need to offer a sclaable platform  \n09:51\u00a0<vmassol>\u00a0each app could bring its own right  \n09:51\u00a0<vmassol>\u00a0doesn't mean it's going to used  \n09:51\u00a0<Denis>\u00a0no, I am just saying that a right management interface with all the hierarchy aspect and so much rights will be not usabe  \n09:52\u00a0<vmassol>\u00a0that 's exactly  \n09:52\u00a0<vmassol>\u00a0(the proposal done by Caty)  \n09:52\u00a0<Denis>\u00a0and on the other hand, because we do many right manipulation, this implementation of the Set greatly improve our performance  \n09:52\u00a0<Denis>\u00a0it is a trade of  \n09:52\u00a0<vmassol>\u00a0not to self: deploy my new version of the irc bot...  \n09:52\u00a0<vmassol>\u00a0s/not/note/  \n09:53\u00a0<vmassol>\u00a0your impl is going to work for some time for sure :)  \n09:53\u00a0<Denis>\u00a0vmassol: there is also other aspects of dynamic addition of Rights you may have missed, like the fact that we cannot unload them  \n09:54\u00a0<vmassol>\u00a0why not?  \n09:54\u00a0<Denis>\u00a0there are somewhat positionnal  \n09:54\u00a0<vmassol>\u00a0errr?  \n09:54\u00a0<Denis>\u00a0for the same reason  \n09:55\u00a0<vmassol>\u00a0it's your impl that is not going to work  \n09:55\u00a0<vmassol>\u00a0not the concept  \n09:55\u00a0<vmassol>\u00a0it just means the impl is not correct  \n09:55\u00a0<Denis>\u00a0its is for speed and memory  \n09:55\u00a0<vmassol>\u00a0yes but I doubt that it's a problem  \n09:55\u00a0<Denis>\u00a0the implementation from Andreas were even worse  \n09:56\u00a0<vmassol>\u00a0we defiintley need to be able to add and rmoeve rights  \n09:56\u00a0<vmassol>\u00a0so if the impl cannot do we shouldn't even consider it  \n09:56\u00a0<vmassol>\u00a0since it's not fulfulling the main reason for the new impl  \n09:56\u00a0<Denis>\u00a0we could remove rights, but a singe run will keep them  \n09:56\u00a0<vmassol>\u00a0I'm dispapointed  \n09:56\u00a0<Denis>\u00a0untill restart  \n09:57\u00a0<vmassol>\u00a0couldn't you at least keep holes?  \n09:57\u00a0<vmassol>\u00a0anyway, a better impl is maybe required rather than trying to aptch somerthing  \n09:57\u00a0<vmassol>\u00a0that is not even fully used yet  \n09:57\u00a0<vmassol>\u00a0better start clean  \n09:57\u00a0<sburjan>\u00a0has joined #xwiki  \n09:57\u00a0<Denis>\u00a0write it yourself if this is really what you want, my feeling is that adding Right is not an everyday task, it is a startup task, and that everyday we prefer to see the list of Rights as a enum, more than something dynamic  \n09:58\u00a0<vmassol>\u00a0it's an every day task  \n09:58\u00a0<Denis>\u00a0no  \n09:58\u00a0<vmassol>\u00a0Denis: you're going against the use cases we defined  \n09:58\u00a0<vmassol>\u00a0yes it is  \n09:58\u00a0<Denis>\u00a0tell me the last time you add one ?  \n09:58\u00a0<vmassol>\u00a0because when you add an extenson it bring sthe rights  \n09:58\u00a0<vmassol>\u00a0you jooking?  \n09:58\u00a0<vmassol>\u00a0of course I don't yet, WE DON'T SUPPROT IT :)  \n09:58\u00a0<Denis>\u00a0sure, it will, and works perfectly, it do it once, at startup  \n09:59\u00a0<vmassol>\u00a0we're not going to add extension at startup  \n09:59\u00a0<vmassol>\u00a0this is not the goal  \n09:59\u00a0<vmassol>\u00a0wwe have cerated the EM for that  \n09:59\u00a0<vmassol>\u00a0so when I add the blog app for ex, I can bring in some blog rights  \n09:59\u00a0<Denis>\u00a0sure and for you it means that the wiki never restart ?  \n09:59\u00a0<vmassol>\u00a0ability to write a blog post foe ex  \n09:59\u00a0<vmassol>\u00a0yes  \n09:59\u00a0<vmassol>\u00a0we've coded the EM to not hav eto restart xwiki  \n10:00\u00a0<Denis>\u00a0sorry, it will have, like any program have to, all what say is that it happen really rarely compare to check rights  \n10:00\u00a0<vmassol>\u00a0of course we all know that a java app needs to be restarted from time to time but that's a different use case then restarting after instalaintg an extension  \n10:00\u00a0<vmassol>\u00a0I don't agree, once rights are available dynalically people love to set rights  \n10:00\u00a0<vmassol>\u00a0and extensions will bring rigths with them  \n10:00\u00a0<Denis>\u00a0and component adding rights should not be as well the most usual, if all component bring their right for a small action, it will be a mess \u00a0to manage  \n10:01\u00a0<vmassol>\u00a0for me it's a big -1  \n10:01\u00a0<vmassol>\u00a0to have a rigths impl that doesn't support dynalic addition  \n10:01\u00a0<vmassol>\u00a0until someone proves to me it cannot be done  \n10:01\u00a0<vmassol>\u00a0right now I don't believe it cannot be done  \n10:02\u00a0<vmassol>\u00a0(easily)  \n10:02\u00a0<Denis>\u00a0ok, for me it is a big ?1 to use a standard set to cache, check and store rights, it will simply defeat my initial goal which was to be really faster  \n10:02\u00a0<vmassol>\u00a0if you want fast  \n10:02\u00a0<vmassol>\u00a0then don't code a dynamic system  \n10:02\u00a0<vmassol>\u00a0you've chosen the wrong project Denis  \n10:02\u00a0<vmassol>\u00a0:)  \n10:02\u00a0<Denis>\u00a0you have at least twenty right check for a single page load  \n10:03\u00a0<vmassol>\u00a0what it needs is to be fast enough  \n10:03\u00a0<Denis>\u00a0you should really care about that  \n10:03\u00a0<vmassol>\u00a0yes and don't you think that's the problem? :)  \n10:04\u00a0<Denis>\u00a0sorry, I disagree, it is part of the reason we have bad feedback about our page load time  \n10:05\u00a0<vmassol>\u00a0Denis: I don't think it's up to you to decide  \n10:05\u00a0<vmassol>\u00a0we have discussed and agreed  \n10:05\u00a0<vmassol>\u00a0about ability to add rights dynamically  \n10:05\u00a0<vmassol>\u00a0if you disagree you need to say so in the right thread  \n10:05\u00a0<vmassol>\u00a0not just go ahead and ignore what we discussed  \n10:05\u00a0<vmassol>\u00a0I'm just discovering this now  \n10:06\u00a0<Denis>\u00a0this does not prevent you to unload and load your extension during the same run  \n10:06\u00a0<vmassol>\u00a0I've never seen it mentioned  \n10:06\u00a0<vmassol>\u00a0and it's pretty limitating  \n10:06\u00a0<vmassol>\u00a0so we won't decide between the 2 of us  \n10:07\u00a0<vmassol>\u00a0we need to bring this to the others  \n10:07\u00a0<vmassol>\u00a0and decide  \n10:07\u00a0<vmassol>\u00a0what to do for the future  \n10:07\u00a0<vmassol>\u00a0the initial reason for the talk is that we have a critiucial bug in our code  \n10:07\u00a0<vmassol>\u00a0so either you say the tool is wrong  \n10:08\u00a0<vmassol>\u00a0and then  \n10:08\u00a0<vmassol>\u00a0we use an exclude  \n10:08\u00a0<Denis>\u00a0no, there is a bug in the VM you use, not in my code  \n10:09\u00a0<vmassol>\u00a0you think users will care about that argument? :)  \n10:09\u00a0<vmassol>\u00a0especially when there are workarounds  \n10:09\u00a0<vmassol>\u00a0are you sating there's no other way to code the size method?  \n10:09\u00a0<vmassol>\u00a0s/sating/saying/  \n10:09\u00a0<vmassol>\u00a0(I haven't read the code so cannot provide a solution right now)  \n10:09\u00a0<Denis>\u00a0we may rewrite Long.bitCount() surely :)  \n10:10\u00a0<vmassol>\u00a0looks pretty simple  \n10:10\u00a0<vmassol>\u00a0http://www.docjar.com/html/api/java/lang/Long.java.html  \n10:10\u00a0<vmassol>\u00a0simple is not the right word  \n10:10\u00a0<vmassol>\u00a0small is a better word  \n10:10\u00a0<vmassol>\u00a0we could check  \n10:10\u00a0<vmassol>\u00a0how they fixed it in jdk8  \n10:12\u00a0<AndreasJonsson>\u00a0As I understand it, the method bitCount is replaced with the instruction popcount during jit-compilation on platforms where it is supported.  \n10:12\u00a0<vmassol>\u00a0hmm if they fixed the jvm itself that's not going to help us  \n10:12\u00a0<AndreasJonsson>\u00a0But it was scheduled incorrectly.  \n10:13\u00a0<vmassol>\u00a0what about having a counter  \n10:13\u00a0<vmassol>\u00a0that we increase by 1 for each rigths added  \n10:13\u00a0<vmassol>\u00a0and then we just return this counter?  \n10:13\u00a0<Denis>\u00a0vmassol: at least the code you mention works perfectly and fix the issue  \n10:14\u00a0<AndreasJonsson>\u00a0The correct workaround is to use the flag -XX:-UsePopCountInstruction on affected versions of the jvm.  \n10:14\u00a0<Denis>\u00a0vmassol: it could be worse counting  \n10:14\u00a0<vmassol>\u00a0AndreasJonsson: that's not the problem  \n10:14\u00a0<vmassol>\u00a0the problem is that you open up security vulnerabilities and you won't know it  \n10:15\u00a0<vmassol>\u00a0we can't really know what would happen  \n10:15\u00a0<vmassol>\u00a0in our case maybe the issue is less importnat since we use it only in size()  \n10:15\u00a0<vmassol>\u00a0so it means returnning a wrong size I guess  \n10:15\u00a0<vmassol>\u00a0I don't know what consequences that would have  \n10:16\u00a0<Denis>\u00a0no  \n10:16\u00a0<vmassol>\u00a0anyway, if we think we'reg ood  \n10:16\u00a0<vmassol>\u00a0good  \n10:16\u00a0<Denis>\u00a0it is not returning a wrong size that happen  \n10:16\u00a0<vmassol>\u00a0then we need to put an exlucde  \n10:16\u00a0<Denis>\u00a0it is that optimized code calling this function, may have conditional instruction affected  \n10:16\u00a0<vmassol>\u00a0an exclude with an explanation as to why we think we're not affected  \n10:17\u00a0<Denis>\u00a0it is clearly a bad issue  \n10:17\u00a0<Denis>\u00a0I am pretty sure we are not affected directly  \n10:17\u00a0<Denis>\u00a0but I may change this implementation just for safety  \n10:18\u00a0<vmassol>\u00a0Denis: then maybe you could add:  \n10:18\u00a0<vmassol>\u00a0@SuppressWarnings(\"PMD\")  \n10:18\u00a0<vmassol>\u00a0to the method  \n10:18\u00a0<vmassol>\u00a0with a comment ;)  \n10:18\u00a0<vmassol>\u00a0(see http://pmd.sourceforge.net/suppressing.html )  \n10:19\u00a0<vmassol>\u00a0actually @SuppressWarnings(\"PMD.UnusedLocalVariable\") is better replacing UnusedLocalVariable by the correct violation name  \n10:20\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:21\u00a0<vmassol>\u00a0hmm i wonder if this rule comes from pmd or from sonar  \n10:22\u00a0<Denis>\u00a0vmassol: it is faster to replace the implementation, and I will simply comment out the call to Long.bitCount with a comment, maybe we can revert this in several years :)  \n10:22\u00a0<vmassol>\u00a0if you have an alternate impl ok  \n10:22\u00a0<vmassol>\u00a0:)  \n10:22\u00a0<Denis>\u00a0you provide it !  \n10:23\u00a0<vmassol>\u00a0didn't realize  \n10:23\u00a0<Denis>\u00a0vmassol: seem the IRCbot issue is really more urgent :D  \n10:23\u00a0<vmassol>\u00a0rrrr  \n10:23\u00a0<vmassol>\u00a0going to update now xwiki.org  \n10:23\u00a0<vmassol>\u00a0I don't know the problem but my update should show it  \n10:24\u00a0<vmassol>\u00a0need to test first something locally on 4.2  \n10:30\u00a0<coud5>\u00a0has joined #xwiki  \n10:31\u00a0<fmancinelli>\u00a0has joined #xwiki  \n10:32\u00a0<mrvanes>\u00a0has quit  \n10:32\u00a0<AndreasJonsson>\u00a0But the fix to the bitCount-bug is backported, so it should be in the latest release of openjdk-6, right?  \n10:33\u00a0<AndreasJonsson>\u00a0Fixed-versions: 6u38  \n10:36\u00a0<vmassol>\u00a0where do you see this mentioned AndreasJonsson?  \n10:36\u00a0<vmassol>\u00a0on http://bugs.sun.com/bugdatabase/view\\_bug.do?bug\\_id=7063674 I can't find it  \n10:36\u00a0<AndreasJonsson>\u00a0http://bugs.sun.com/bugdatabase/view\\_bug.do?bug\\_id=2225485  \n10:37\u00a0<vmassol>\u00a0ah yes missed the related backports links  \n10:37\u00a0<vmassol>\u00a0just installed latest java 6 on my mac  \n10:37\u00a0<vmassol>\u00a0java full version \"1.6.0\\_37-b06-434\"  \n10:38\u00a0<vmassol>\u00a0so not yet released it seems  \n10:39\u00a0<AndreasJonsson>\u00a0Debian unstable distributes 6b24-1.11.5-1. :(  \n10:41\u00a0<Denis>\u00a0vmassol: should I really file that as a bug in JIRA ?  \n10:42\u00a0<vmassol>\u00a0Denis: good question\u2026  \n10:42\u00a0<Denis>\u00a0an improvement ?  \n10:42\u00a0<vmassol>\u00a0since we've taken the time to analyze it, I think it woud be good yes  \n10:42\u00a0<vmassol>\u00a0bug is better I think  \n10:42\u00a0<vmassol>\u00a0from a user POV if he has it it's a bug  \n10:43\u00a0<vmassol>\u00a0the only advantage is to use jira as a reference for our discussion  \n10:46\u00a0<mrvanes>\u00a0has joined #xwiki  \n10:57\u00a0<Denis>\u00a0vmassol: fixed in 4.2 and 4.3  \n10:57\u00a0<vmassol>\u00a0thanks Denis  \n11:00\u00a0<Denis>\u00a0vmassol: regarding the limited number of additional rights available during a single run, I should admit that I have not emphasized that clearly in my merge vote  \n11:00\u00a0<Denis>\u00a0there was so much to say about that new right module  \n11:02\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:03\u00a0<Denis>\u00a0anyway, replacing the RightSet and RightMap with a more standard Map and Set implementation, and maybe a few other minor changes will simply remove the limitation if we really think it is needed  \n11:04\u00a0<Denis>\u00a0I would not do that, simply because it will increase the memory footprint of the right cache and the performance of rights checks largely, but it is up to you to open a discussion on this :)  \n11:05\u00a0<Denis>\u00a0by the way, the RightMap and RightSet are publicly exposed so other may use those optimized implementation while manipulating right permissions  \n11:06\u00a0<vmassol>\u00a0well we still need to conclude on the young api thread  \n11:06\u00a0<vmassol>\u00a0it might not be good to expose those  \n11:06\u00a0<Denis>\u00a0and this is way, I have provided a full implementation, with complete unit tests  \n11:06\u00a0<vmassol>\u00a0nor to expose any api till we use it more ourselves and thus stabilize it  \n11:06\u00a0<Denis>\u00a0I do not think this change anything, we may improve their implementation anytime  \n11:07\u00a0<vmassol>\u00a0I'm talkig design  \n11:07\u00a0<vmassol>\u00a0not impl  \n11:07\u00a0<Denis>\u00a0it will not change the design much  \n11:07\u00a0<vmassol>\u00a0Denis: check your skype! :)  \n11:07\u00a0<Denis>\u00a0(not runned)  \n11:11\u00a0<Denis>\u00a0vmassol: I remember having ask a lot for feedback before the merge of this new implementation, and apart from Thomas, I have not get much feedback !  \n11:12\u00a0<vmassol>\u00a0right...  \n11:12\u00a0<vmassol>\u00a0I would have reviewed a design  \n11:12\u00a0<vmassol>\u00a0but not the impl  \n11:12\u00a0<vmassol>\u00a0no time for that  \n11:12\u00a0<vmassol>\u00a0(just too big)  \n11:12\u00a0<vmassol>\u00a0did you send a mail on the design?  \n11:12\u00a0<Denis>\u00a0I have not started the design  \n11:13\u00a0<vmassol>\u00a0we can't assume devs will read thousands of lines of code  \n11:13\u00a0<vmassol>\u00a0hwoever if we make it easy by  \n11:13\u00a0<vmassol>\u00a0explanaing big decisions  \n11:13\u00a0<vmassol>\u00a0and asking for feedback about it  \n11:13\u00a0<vmassol>\u00a0then yo'ull get answers  \n11:13\u00a0<Denis>\u00a0it was initially code from Andreas, that I found personally not badly designed, but somehow badly implemented  \n11:13\u00a0<vmassol>\u00a0for ex  \n11:13\u00a0<vmassol>\u00a0if in yur email you say  \n11:14\u00a0<Denis>\u00a0I have tried to do so  \n11:14\u00a0<vmassol>\u00a0I've taken teh decision that rights cannot be unloaded dynalically  \n11:14\u00a0<vmassol>\u00a0then you would have had a response I think  \n11:14\u00a0<vmassol>\u00a0:)  \n11:14\u00a0<vmassol>\u00a0ok  \n11:14\u00a0<vmassol>\u00a0in any case I know I haven't reviewed it and it's bad  \n11:14\u00a0<Denis>\u00a0but this was quite big  \n11:14\u00a0<vmassol>\u00a0I'm just swamped  \n11:14\u00a0<vmassol>\u00a0from all various directions  \n11:15\u00a0<vmassol>\u00a0I personally prefer to do like this:  \n11:15\u00a0<vmassol>\u00a0- start designing a new domain  \n11:15\u00a0<vmassol>\u00a0- send mail about the importnat decisions  \n11:15\u00a0<vmassol>\u00a0get an agreement  \n11:16\u00a0<vmassol>\u00a0- start coding, and refine the design and possibly send vzarious emails when I find issue and diverge from my initial proposal  \n11:16\u00a0<vmassol>\u00a0in order to get other devs to participate a bit  \n11:16\u00a0<vmassol>\u00a0the key I think is to send small emails  \n11:16\u00a0<vmassol>\u00a0which are easy to respond to  \n11:22\u00a0<Denis>\u00a0I understand that, I would have probably followed this way if I had started from scratch  \n11:23\u00a0<Denis>\u00a0anyway, the main interface of the AutorizationManager was clear and does not provide an unregister method  \n11:23\u00a0<vmassol>\u00a0normally it shouldn't  \n11:23\u00a0<vmassol>\u00a0wel it depends  \n11:23\u00a0<vmassol>\u00a0the Componetn way is to use the CM  \n11:24\u00a0<vmassol>\u00a0but you may want to register/unregister non componentns too maybe?  \n11:24\u00a0<vmassol>\u00a0which btw is a mess in the OM too  \n11:27\u00a0<coud6>\u00a0has joined #xwiki  \n11:30\u00a0<coud5>\u00a0has quit  \n11:44\u00a0<Denis>\u00a0vmassol: for sure, there is many other way to see it, what we have done with Andreas, is to pursue the idea that we want to see the rights as an enum most of the time  \n11:45\u00a0<Denis>\u00a0vmassol: note that registering the same right twice has no effect and is transparent to the caller  \n12:01\u00a0<vmassol>\u00a0has quit  \n12:03\u00a0<vmassol>\u00a0has joined #xwiki  \n12:05\u00a0<mflorea>\u00a0has quit  \n12:10\u00a0<coud6>\u00a0has quit  \n12:10\u00a0<coud6>\u00a0has joined #xwiki  \n12:27\u00a0<cdop>\u00a0has joined #xwiki  \n12:28\u00a0<cdop>\u00a0hi! appwithinminute is not translated yet. how/where should i do it? I mean \"Entries\", \"Actions\", \"Add new entry\" and so on...  \n12:30\u00a0<tmortagne>\u00a0cdop: on http://l10n.xwiki.org/xwiki/bin/view/XE/XWikiCoreResources i think  \n12:31\u00a0<tmortagne>\u00a0there is some translation of appwithinminute at least, not sure about theses specific translations but I guess they are here too  \n12:31\u00a0<vmassol>\u00a0if not you shoudl raise a jira issue  \n12:32\u00a0<vmassol>\u00a0guys, I'm going to upgrade the IRCbot on xwiki.org to try to fix some issue  \n12:35\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:38\u00a0<coud6>\u00a0has quit  \n12:38\u00a0<evalica>\u00a0has joined #xwiki  \n12:43\u00a0<xwikibot>\u00a0has joined #xwiki  \n12:55\u00a0<vmassol>\u00a0test  \n12:57\u00a0<cdop>\u00a0tmortagne: thanks :)  \n12:59\u00a0<vmassol>\u00a0fmancinelli: http://blog.fabiomancinelli.org/2011/03/07/XWikis\\_RESTful\\_API.html 404  \n12:59\u00a0<vmassol>\u00a0:)  \n13:00\u00a0<vmassol>\u00a0jvdrean: happy? :)  \n13:06\u00a0<vmassol>\u00a0fmancinelli: lots of REST broken links...  \n13:16\u00a0<sburjan>\u00a0all the spam  \n13:16\u00a0<vmassol>\u00a0it would be spam if it were not useful :)  \n13:16\u00a0<vmassol>\u00a0here it just shows how bad we are  \n13:16\u00a0<vmassol>\u00a0l10n hmmm  \n13:17\u00a0<vmassol>\u00a0indded it's not responding  \n13:23\u00a0<vmassol>\u00a0tmortagne: l10n is not responidng  \n13:29\u00a0<mflorea>\u00a0has joined #xwiki  \n13:53\u00a0<vmassol>\u00a0has quit  \n13:57\u00a0<vmassol>\u00a0has joined #xwiki  \n13:58\u00a0<silviar>\u00a0has joined #xwiki  \n14:01\u00a0<vmassol>\u00a01  \n14:01\u00a0<vmassol>\u00a03  \n14:01\u00a0<vmassol>\u00a04  \n14:01\u00a0<vmassol>\u00a05  \n14:01\u00a0<vmassol>\u00a0yeah  \n14:01\u00a0<vmassol>\u00a0:)  \n14:01\u00a0<vmassol>\u00a0got it  \n14:08\u00a0<vmassol>\u00a0hmm I wonder if it's normal that we receive the watchlist notif before the creation one\u2026 maybe\u2026 depends if we want to be sure the doc has been created before sending the watchlist update or not  \n14:24\u00a0<vmassol>\u00a0going to restart xwiki.org again\u2026 sorry....  \n14:28\u00a0<xwikibot>\u00a0has joined #xwiki  \n14:28\u00a0<vmassol>\u00a0these 2 are because we have some init issue in xwiki  \n14:29\u00a0<vmassol>\u00a0plugins are initialized before the URL factory is ready  \n14:29\u00a0<vmassol>\u00a0it just happens once at startup but we'll need to fix that at some point  \n14:29\u00a0<vmassol>\u00a0note to self: bulletproof the user too  \n14:30\u00a0<vmassol>\u00a0so first time each subwiki is called  \n14:32\u00a0<fmancinelli>\u00a0I am publishing to maven central to finish the release... The command on the release plan help once executed says that the integration-tests profile doesn't exits so I suppose it's a leftover (so I will run the command without this profile)  \n14:34\u00a0<vmassol>\u00a0fmancinelli: it's ok  \n14:35\u00a0<vmassol>\u00a0it doesn't harm to keep it  \n14:35\u00a0<vmassol>\u00a0for when we will have modules that run only when this profile is activated  \n14:35\u00a0<vmassol>\u00a0actually wait  \n14:35\u00a0<vmassol>\u00a0we already have  \n14:35\u00a0<vmassol>\u00a0in rendering  \n14:35\u00a0<vmassol>\u00a0ah no, indeed it's called standalone now  \n14:36\u00a0<vmassol>\u00a0do you run with the -Pstandalone profile fmancinelli?  \n14:36\u00a0<vmassol>\u00a0ouch no  \n14:36\u00a0<vmassol>\u00a0:(  \n14:36\u00a0<vmassol>\u00a0this means we've been missing some modules in the past releases to central  \n14:37\u00a0<vmassol>\u00a0the standalone module is an important one for rendering  \n14:37\u00a0<vmassol>\u00a0updating page  \n14:37\u00a0<vmassol>\u00a0done  \n14:38\u00a0<vmassol>\u00a0indeed we have some holes here: http://repo2.maven.org/maven2/org/xwiki/rendering/xwiki-rendering-standalone/  \n14:38\u00a0<vmassol>\u00a0missing 4.2\\*  \n14:38\u00a0<vmassol>\u00a0fmancinelli: make sure you add -Pstandalone, you can rerun it  \n14:41\u00a0<vmassol>\u00a0going to stress the bot...  \n14:41\u00a0<vmassol>\u00a01  \n14:41\u00a0<vmassol>\u00a02  \n14:41\u00a0<vmassol>\u00a034  \n14:41\u00a0<vmassol>\u00a04  \n14:41\u00a0<vmassol>\u00a05  \n14:41\u00a0<vmassol>\u00a06  \n14:41\u00a0<vmassol>\u00a0a  \n14:41\u00a0<vmassol>\u00a0b  \n14:41\u00a0<vmassol>\u00a0c  \n14:41\u00a0<vmassol>\u00a0d  \n14:42\u00a0<vmassol>\u00a0gotcha!  \n14:42\u00a0<fmancinelli>\u00a0vmassol, ok so -Prelease,legacy,standalone  \n14:43\u00a0<vmassol>\u00a0very interesting error: https://raw.github.com/gist/3952351/a3c08cdce12dd6a6d3490cf32cefbc2ee07793f6/gistfile1.txt  \n14:43\u00a0<vmassol>\u00a0fmancinelli: don't worry about adding intergation-tests  \n14:43\u00a0<vmassol>\u00a0as I said it's much better to have more than not enough  \n14:43\u00a0<vmassol>\u00a0;)  \n14:44\u00a0<Slashman>\u00a0has joined #xwiki  \n14:45\u00a0<vmassol>\u00a0mflorea: btw using the page content for storing data along with a sheet is not always a good solution  \n14:45\u00a0<vmassol>\u00a0just discovered that with the irc bot  \n14:45\u00a0<vmassol>\u00a0the reason is performance  \n14:45\u00a0<fmancinelli>\u00a0oops I was mislead... the error was due to a problem with the passphrase (the missing profile was only a warning :)). Ok, anyway it was useful to spot the missing -Pstandalone :)  \n14:46\u00a0<vmassol>\u00a0if your data are in the doc content then when the title is computed the full content is parsed into an XDOM  \n14:46\u00a0<mflorea>\u00a0vmassol: what king of performance issue?  \n14:46\u00a0<vmassol>\u00a0even if it's not used for displaying the page view  \n14:46\u00a0<vmassol>\u00a0so with the IRC bot  \n14:46\u00a0<mflorea>\u00a0you should set the page title!  \n14:46\u00a0<vmassol>\u00a0ok so it's not th etitle  \n14:46\u00a0<vmassol>\u00a0but it's parsed  \n14:47\u00a0<vmassol>\u00a0into an XDOM  \n14:47\u00a0<vmassol>\u00a0(since I set the title)  \n14:47\u00a0<vmassol>\u00a0so all our texts are parsed which makes it 1) slow and 2) creates some issue as I discovered  \n14:47\u00a0<mflorea>\u00a0when is the content parsed?  \n14:47\u00a0<vmassol>\u00a0I had to add {{{\u2026}}} around some content when converting older content  \n14:47\u00a0<mflorea>\u00a0I still don't see the problem  \n14:48\u00a0<vmassol>\u00a0for irc bot  \n14:48\u00a0<vmassol>\u00a0the content is parsed as content  \n14:48\u00a0<vmassol>\u00a0whereas it shouldn't be  \n14:48\u00a0<vmassol>\u00a0it's data that should't be parsed  \n14:48\u00a0<mflorea>\u00a0but that's an edge case  \n14:48\u00a0<vmassol>\u00a0so I'm going to change that again  \n14:48\u00a0<vmassol>\u00a0and put them back in the XObject  \n14:48\u00a0<vmassol>\u00a0and leave the page content empty  \n14:48\u00a0<vmassol>\u00a0a real pain since I ocnverted 1000s of pages already ;)  \n14:49\u00a0<vmassol>\u00a0I didn't think about this\u2026.  \n14:49\u00a0<vmassol>\u00a0not really an edge case  \n14:49\u00a0<vmassol>\u00a0it slows down the page view  \n14:49\u00a0<mflorea>\u00a0why can't you change the irc bot?  \n14:49\u00a0<vmassol>\u00a0change what?  \n14:49\u00a0<vmassol>\u00a0I can check why the content is parsed by debugging it  \n14:50\u00a0<mflorea>\u00a0wait  \n14:50\u00a0<mflorea>\u00a0why not setting the page syntax?  \n14:50\u00a0<mflorea>\u00a0to plain?  \n14:50\u00a0<mflorea>\u00a0if you don't need the content parsed  \n14:50\u00a0<tmortagne>\u00a0I agree, if the page is supposed to contains plain text then it should be set to the proper syntaxe  \n14:50\u00a0<vmassol>\u00a0hmm that would work provided you don't have any textarea containing wiki syntax  \n14:51\u00a0<tmortagne>\u00a0i.e. the document syntax should really be what the content is  \n14:51\u00a0<vmassol>\u00a0I'll try your idea  \n14:51\u00a0<mflorea>\u00a0if you use the doc just for storing data, then I think the syntax should be plain  \n14:51\u00a0<tmortagne>\u00a0+1  \n14:52\u00a0<vmassol>\u00a0mflorea: yes I agree, except for the case I mentioned  \n14:52\u00a0<vmassol>\u00a0(which is not my case btw)  \n14:53\u00a0<vmassol>\u00a0ie if you have xobject textarea in wiki syntax  \n14:53\u00a0<vmassol>\u00a0since we don't have any way ATM to specify its syntax  \n14:53\u00a0<mflorea>\u00a0indeed  \n14:53\u00a0<tmortagne>\u00a0not sure it's a very common use case  \n14:53\u00a0<mflorea>\u00a0we can add a syntax meta prop to the TextArea prop (defaulting to doc syntax if not specified / empty)  \n14:54\u00a0<vmassol>\u00a0now I doubt a lot of people are going to think about this  \n14:54\u00a0<vmassol>\u00a0:)  \n14:54\u00a0<vmassol>\u00a0especially since plain/1.0 is not on by default  \n14:54\u00a0<tmortagne>\u00a0and yes that would make sense to be able to set the syntax for the field  \n14:54\u00a0<vmassol>\u00a0I still need to find out why the content is parsed  \n14:55\u00a0<vmassol>\u00a0hey it's our first use case for plain/1.0 as input  \n14:55\u00a0<vmassol>\u00a0;)  \n14:55\u00a0<tmortagne>\u00a0not really actually, we should have used it for translations too  \n14:56\u00a0<vmassol>\u00a0yep  \n14:56\u00a0<tmortagne>\u00a0we get points when we produce errors in the IRC bot ? :)  \n14:56\u00a0<vmassol>\u00a0yes  \n14:56\u00a0<vmassol>\u00a0did you see the error tmortagne, it's weird:  \n14:57\u00a0<vmassol>\u00a0https://raw.github.com/gist/3952351/a3c08cdce12dd6a6d3490cf32cefbc2ee07793f6/gistfile1.txt  \n14:57\u00a0<vmassol>\u00a0maybe the first page save has not finished when we try to do a second save  \n14:57\u00a0<vmassol>\u00a0I believe we didn't see it before because we were saving logs in an xobject and not in the page content and somehow this problem didn't happen....  \n14:58\u00a0<vmassol>\u00a0what  \n14:58\u00a0<vmassol>\u00a0javamelody  \n14:58\u00a0<vmassol>\u00a0ahah  \n14:58\u00a0<vmassol>\u00a0that's a differnt matter  \n14:58\u00a0<vmassol>\u00a0ah no  \n14:58\u00a0<vmassol>\u00a0it's just a wrapper  \n14:58\u00a0<vmassol>\u00a0forget that  \n14:58\u00a0<vmassol>\u00a0it's for stats counting  \n14:59\u00a0<vmassol>\u00a0btw if I modify the ircbot app to set the page in plain/1.0 syntax then when someone installs the ircbot app it's going to fail I guess  \n14:59\u00a0<vmassol>\u00a0because by defualt plain/1.0 is not available in the list of syntaxes  \n15:00\u00a0<vmassol>\u00a0(need to check if that's true or not, maybe we just use it if it's there and doesn't check existing configured syntaxes)  \n15:00\u00a0<vmassol>\u00a0well there'll be an issue when editing the page for sure  \n15:00\u00a0<vmassol>\u00a0maybe we need to have plain/1.0 by default too now ;)  \n15:00\u00a0<tmortagne>\u00a0vmassol: this list is just what is displayed, it's not what's enabled  \n15:01\u00a0<vmassol>\u00a0yes  \n15:01\u00a0<vmassol>\u00a0it's going to work since I fixed it I think  \n15:01\u00a0<vmassol>\u00a0;)  \n15:01\u00a0<tmortagne>\u00a0I saw something about it yes  \n15:01\u00a0<vmassol>\u00a0I think I now add the syntax name  \n15:01\u00a0<vmassol>\u00a0even if it's not configured  \n15:01\u00a0<vmassol>\u00a0:)  \n15:01\u00a0<tmortagne>\u00a0if we don't we should anyway  \n15:01\u00a0<vmassol>\u00a0will try  \n15:03\u00a0<vmassol>\u00a0hmmm  \n15:03\u00a0<vmassol>\u00a0need to fix this too  \n15:06\u00a0<vmassol>\u00a0mflorea: even if the title is set it seems that AbstractDocumentTitleDisplayer calls dparseTitle()  \n15:06\u00a0<vmassol>\u00a0looks like a bug  \n15:07\u00a0<mflorea>\u00a0what's wrong with parseTitle? does it parse the content? let me check  \n15:07\u00a0<vmassol>\u00a0ah no wait  \n15:07\u00a0<vmassol>\u00a0that's normal  \n15:07\u00a0<vmassol>\u00a0since the title can contain velocity  \n15:07\u00a0<vmassol>\u00a0I need to put my breakpoint elsewhere  \n15:08\u00a0<mflorea>\u00a0yep  \n15:08\u00a0<vmassol>\u00a0hmm  \n15:08\u00a0<vmassol>\u00a0hmm still strnage  \n15:09\u00a0<vmassol>\u00a0why do remove paragraph? we're not uspposed to generate HTML  \n15:09\u00a0<mflorea>\u00a0that was there before my refactoring  \n15:10\u00a0<vmassol>\u00a0ok  \n15:10\u00a0<vmassol>\u00a0found the reason for getXDOM()  \n15:10\u00a0<vmassol>\u00a0in isSheetExpected  \n15:10\u00a0<vmassol>\u00a0it calls getDefaultEditMode  \n15:10\u00a0<fmancinelli>\u00a0the username/password to be used for the publishing on maven central are the same I can use to login to https://oss.sonatype.org ? Because mvn ... keeps telling me that Return code is: 401, ReasonPhrase:Unauthorized  \n15:10\u00a0<mflorea>\u00a0yeah.. which looks for include macro..  \n15:10\u00a0<vmassol>\u00a0which calls getXDOM  \n15:11\u00a0<mflorea>\u00a0that's for the old sheet mechanism  \n15:11\u00a0<vmassol>\u00a0it's costing us ....  \n15:11\u00a0<vmassol>\u00a0even when it's not needed here  \n15:11\u00a0<vmassol>\u00a0I guess we could add some ifs  \n15:12\u00a0<vmassol>\u00a0if the new sheet mechanism is used  \n15:12\u00a0<mflorea>\u00a0it's hackish  \n15:13\u00a0<vmassol>\u00a0I don't undersrtand somerthing  \n15:13\u00a0<vmassol>\u00a0if we have a class binding  \n15:13\u00a0<vmassol>\u00a0why are we doing this  \n15:13\u00a0<vmassol>\u00a0?  \n15:13\u00a0<vmassol>\u00a0ie why are we calling getDefaultEditMode?  \n15:14\u00a0<vmassol>\u00a0that means that getDefaultEditMode is \"stronger\" than class binding?  \n15:14\u00a0<vmassol>\u00a0(is that why?)  \n15:15\u00a0<vmassol>\u00a0ie for EditModeClass to have precedence  \n15:15\u00a0<fmancinelli>\u00a0looks it's working now... maybe it was a glitch.  \n15:15\u00a0<vmassol>\u00a0hmm so it would also mean that the sheetclass mechanism would take precedence  \n15:16\u00a0<vmassol>\u00a0in any case it means that right now it's more costly to store the data in the page content than in an xobject  \n15:16\u00a0<vmassol>\u00a0even if it's plain text it's still going to be parsed  \n15:17\u00a0<mflorea>\u00a0but parsing plain text should be fast no?  \n15:17\u00a0<vmassol>\u00a0faster than parser xwiki/2.0 for sure  \n15:17\u00a0<vmassol>\u00a0but still longer than no parsing  \n15:17\u00a0<mflorea>\u00a0right  \n15:18\u00a0<vmassol>\u00a0irc logs can be quite long  \n15:18\u00a0<mflorea>\u00a0re why I call getDefaultEditMode, I don't remember exactly  \n15:20\u00a0<mflorea>\u00a0I think we can modify getDefaultEditMode to use the sheet manager to check for bindings, prior to checking for include macro  \n15:22\u00a0<mflorea>\u00a0but I'm not sure it will fix something in your case. Are you using a sheet for the IRC documents?  \n15:23\u00a0<mflorea>\u00a0if they don't have any document or class sheet then the sheet displayer still needs to check for the old way to include sheets  \n15:25\u00a0<vmassol>\u00a0I'm using a sheet yes for display IRC log docs  \n15:25\u00a0<vmassol>\u00a0\\*displaying  \n15:25\u00a0<vmassol>\u00a0bound to the IRC log class  \n15:25\u00a0<mflorea>\u00a0ok, so can help  \n15:33\u00a0<vmassol>\u00a0hmm http://www.xwiki.org/xwiki/bin/view/FAQ/WebHomeNew seems broken  \n15:43\u00a0<sburjan>\u00a0fmancinelli: how much did you have to wait yesterday to install the XEM-UI using the Distribution Wizard ?  \n15:57\u00a0<xwikibot>\u00a0has joined #xwiki  \n15:59\u00a0<fmancinelli>\u00a0sburjan, nothing. I had a pre-existing database that got migrated.  \n16:04\u00a0<vmassol>\u00a0the faq LT gets the correct entries: http://www.xwiki.org/xwiki/bin/get/FAQCode/FAQJSON?outputSyntax=plain&transprefix=faq.&classname=FAQCode.FAQClass&collist=doc.title,doc.creationDate,doc.date&space=FAQ&offset=1&limit=30&reqNo=1&sort=doc.creationDate&dir=desc  \n16:04\u00a0<vmassol>\u00a0so it seems there's some problem for displaying them  \n16:27\u00a0<fmancinelli>\u00a0vmassol: does this ring a bell: [ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project xwiki-rendering-standalone: Failed to deploy artifacts: Could not transfer artifact org.xwiki.rendering:xwiki-rendering-standalone:jar:4.3-20121025.142237-1 from/to sonatype-nexus-staging (https://oss.sonatype.org/service/local/staging/deploy/maven2): Failed to transfer file: https:  \n16:29\u00a0<fmancinelli>\u00a0commons and almost all the other artifacts in rendering have been successfully uploaded except this standalone  \n16:30\u00a0<tmortagne>\u00a0for some reason looks like you are building standalone in SNAPSHOT  \n16:30\u00a0<mflorea>\u00a0has quit  \n16:31\u00a0<tmortagne>\u00a0sounds like missing profile at release:prepare time  \n16:31\u00a0<tmortagne>\u00a0since standalone is not enabled by default  \n16:35\u00a0<vmassol>\u00a0tmortagne: if XWikiContext.getUserReference returns null it means XWikiguest?  \n16:36\u00a0<vmassol>\u00a0hmm actually  \n16:36\u00a0<tmortagne>\u00a0vmassol: looks like you forgot to update the release script after XRENDERING-217  \n16:36\u00a0<vmassol>\u00a0that's not fully true  \n16:36\u00a0<vmassol>\u00a0tmortagne: definitely  \n16:36\u00a0<vmassol>\u00a0I didn't touch it  \n16:36\u00a0<tmortagne>\u00a0getUserReference return ull for guest yes  \n16:36\u00a0<vmassol>\u00a0yes it returns null for guests  \n16:36\u00a0<vmassol>\u00a0but when you get null it doesn't necessarily means guest  \n16:36\u00a0<tmortagne>\u00a0btw we don't have any release of standalone in 4.2.x...  \n16:37\u00a0<vmassol>\u00a0I have the issue as I told you about url factory  \n16:37\u00a0<vmassol>\u00a0tmortagne: this is what I mentioend above ;)  \n16:37\u00a0<vmassol>\u00a0(the missing 4.2\\*)  \n16:37\u00a0<tmortagne>\u00a0did not seen it  \n16:38\u00a0<vmassol>\u00a0plugins are initialized before the user is set in the context  \n16:38\u00a0<vmassol>\u00a0I'll use Guest for now in the irc bot even though it's not perfect  \n16:51\u00a0<fmancinelli>\u00a0vmassol: in order to fix the issue I need to redo the release of rendering... which will take some time... could we defer this to M2? (I will correct the maven\\_release script though)  \n16:51\u00a0<tmortagne>\u00a0+1  \n16:52\u00a0<vmassol>\u00a0what issue?  \n16:52\u00a0<vmassol>\u00a0reading above  \n16:53\u00a0<vmassol>\u00a0why would you want to redo the release scrpt?  \n16:53\u00a0<vmassol>\u00a0I don't get it  \n16:53\u00a0<fmancinelli>\u00a0because the rendering release has been done without the -Pstandalone profile activated  \n16:53\u00a0<vmassol>\u00a0ah so it's not a problem of central  \n16:53\u00a0<vmassol>\u00a0but a problem that it's not in our own repo  \n16:54\u00a0<vmassol>\u00a0you don't need to redo the script, I think all that is needed is to add the required profile  \n16:54\u00a0<vmassol>\u00a0are you adding it?  \n16:55\u00a0<fmancinelli>\u00a0hmmm. the rendering standalone module tagged as 4.3-milestone-1 has a pom with 4.3-SNAPSHOT  \n16:55\u00a0<vmassol>\u00a0re release yes ok we can wait for m2 to run it  \n16:55\u00a0<vmassol>\u00a0yes that's normla  \n16:55\u00a0<vmassol>\u00a0\"normal\"  \n16:55\u00a0<vmassol>\u00a0that's because it wasn't included in the profile  \n16:55\u00a0<vmassol>\u00a0but there shouldb't be any standaline module built  \n16:56\u00a0<fmancinelli>\u00a0yes of course, but this is the problem  \n16:56\u00a0<vmassol>\u00a0\"the rendering standalone module tagged as 4.3-milestone-1 has a pom with 4.3-SNAPSHOT\"  \n16:56\u00a0<vmassol>\u00a0where do you see this?  \n16:57\u00a0<vmassol>\u00a0there shouldn't be any tag of standalone module  \n16:57\u00a0<vmassol>\u00a0just a tag for the whole rendering  \n16:57\u00a0<tmortagne>\u00a0vmassol: as I said the release:prepare has been done without the profile enabled so the tag of rendering is wrong  \n16:57\u00a0<vmassol>\u00a0and it's normal it has 4.3-SNAPSHOT there  \n16:57\u00a0<vmassol>\u00a0tmortagne: I know that's what I'm explaining to fmancinelli  \n16:57\u00a0<tmortagne>\u00a0he already know what is the issue :)  \n16:57\u00a0<vmassol>\u00a0no  \n16:57\u00a0<vmassol>\u00a0since he just asked  \n16:58\u00a0<vmassol>\u00a0\"hmmm. the rendering standalone module tagged as 4.3-milestone-1 has a pom with 4.3-SNAPSHOT\"  \n16:58\u00a0<vmassol>\u00a0that means to me he's he's wondering  \n16:58\u00a0<vmassol>\u00a0hence my reply to explain it  \n16:58\u00a0<vmassol>\u00a0:)  \n16:58\u00a0<vmassol>\u00a0if he knew he wouldn't have said that...  \n17:02\u00a0<fmancinelli>\u00a0ok, maybe there's been a misunderstanding. I know what happened. Now my question is how to proceed and what I propose is the following: 1) leave things like they are 2) finish the publication on maven central without activating the -Pstandalone profile 3) fix the maven\\_release.sh script by adding -Pstandalone on mvn commands 4) the next M2 release will be ok  \n17:02\u00a0<vmassol>\u00a0-1 for 1)  \n17:02\u00a0<vmassol>\u00a0we need to fix the script  \n17:02\u00a0<vmassol>\u00a02) ok  \n17:02\u00a0<fmancinelli>\u00a0fix the script is 3)  \n17:02\u00a0<vmassol>\u00a0ah yes 3) is ok  \n17:02\u00a0<vmassol>\u00a04) is ok as I said  \n17:03\u00a0<fmancinelli>\u00a0ok +1  \n17:03\u00a0<vmassol>\u00a0\"re release yes ok we can wait for m2 to run it\"  \n17:04\u00a0<vmassol>\u00a0we might want to deploy standalone 4.2\\* and 4.3M1 in teh futrue though  \n17:04\u00a0<vmassol>\u00a0we can do this with a mvn deploy  \n17:05\u00a0<vmassol>\u00a0at last for 4.2 which is important since it's a final  \n17:05\u00a0<vmassol>\u00a0we'll see if someone asks...  \n17:05\u00a0<vmassol>\u00a0:)  \n17:10\u00a0<vmassol>\u00a0Denis: I'm having a hard time with https://raw.github.com/gist/3952351/a3c08cdce12dd6a6d3490cf32cefbc2ee07793f6/gistfile1.txt if you have any idea\u2026.  \n17:16\u00a0<coud6>\u00a0has joined #xwiki  \n17:23\u00a0<vmassol>\u00a0funny thing is that I can't reproduce it locally but then I'm on hsqldb  \n17:32\u00a0<silviar>\u00a0has quit  \n17:46\u00a0<vmassol>\u00a0ok I've fixed http://www.xwiki.org/xwiki/bin/view/FAQ/WebHomeNew  \n17:46\u00a0<vmassol>\u00a0but there's a problem with docuemtns with \".\" in their name  \n17:46\u00a0<vmassol>\u00a0they generate invalid json  \n17:53\u00a0<cdop>\u00a0question: i need a velocity function to convert from html to text and back. anything buildin? or do-your-self?  \n17:54\u00a0<cdop>\u00a0btw guys, i am ripe for a quote... but i keep colleting to put it in one... right now i am on custom json for appwithinmin-livetables :)  \n17:55\u00a0<vmassol>\u00a0cdop: \u00a02mn  \n17:57\u00a0<cdop>\u00a0:)  \n17:58\u00a0<vmassol>\u00a0you cannot convert from html to text and back since text doens't have syntax  \n17:58\u00a0<vmassol>\u00a0or you mean html to xwiki syntax 2.0/2.1 and then back?  \n17:58\u00a0<tmortagne>\u00a0cdop: what dos \"text\" mean ?  \n17:59\u00a0<tmortagne>\u00a0s/dos/does/  \n18:00\u00a0<Denis>\u00a0vmassol: does not look good :(  \n18:00\u00a0<vmassol>\u00a0cdop: see http://extensions.xwiki.org/xwiki/bin/view/Extension/Rendering+Module#HRenderingScriptService  \n18:01\u00a0<vmassol>\u00a0Denis: this happens when the bot tries to save content from IRC  \n18:01\u00a0<vmassol>\u00a0here's an live example....  \n18:01\u00a0<vmassol>\u00a0a  \n18:01\u00a0<vmassol>\u00a0a  \n18:01\u00a0<vmassol>\u00a0a  \n18:01\u00a0<vmassol>\u00a0a  \n18:01\u00a0<vmassol>\u00a0a  \n18:01\u00a0<vmassol>\u00a0a  \n18:01\u00a0<vmassol>\u00a0a  \n18:01\u00a0<vmassol>\u00a01  \n18:01\u00a0<vmassol>\u00a02  \n18:01\u00a0<vmassol>\u00a0\"  \n18:01\u00a0<vmassol>\u00a0grr  \n18:01\u00a0<tmortagne>\u00a0:)  \n18:01\u00a0<Denis>\u00a0:D  \n18:01\u00a0<vmassol>\u00a0a  \n18:01\u00a0<vmassol>\u00a0z  \n18:01\u00a0<vmassol>\u00a0e  \n18:01\u00a0<vmassol>\u00a0r  \n18:01\u00a0<vmassol>\u00a0t  \n18:01\u00a0<vmassol>\u00a0y  \n18:02\u00a0<vmassol>\u00a0hmm  \n18:02\u00a0<vmassol>\u00a0ahah  \n18:02\u00a0<cdop>\u00a0tmortagne: tmortagne \"text\" means \"$row.get('longText1')\"  \n18:03\u00a0<cdop>\u00a0now i want to convert it to text, make a substring on it, then convert it back to html (although all formats are gone then...)  \n18:03\u00a0<cdop>\u00a0what i want to do: display just the first 50 letters of a (html-)longtext in a live-table.  \n18:04\u00a0<vmassol>\u00a0Denis: you got caught by Sergiu\u2026.  \n18:04\u00a0<vmassol>\u00a0you got caught by \"So\u00a0we\u00a0have\u00a0copied\u00a0the\u00a0source\u00a0used\u00a0for\u00a0the\u00a0openJDK7\u00a0implementation\u00a0as\u00a0a\u00a0replacement\u00a0here:\"  \n18:04\u00a0<vmassol>\u00a0without the line you could have said you did it without looking ;)  \n18:05\u00a0<tmortagne>\u00a0cdop: what I don't understand is what syntax do you mean exactly by text, html iss text  \n18:07\u00a0<Denis>\u00a0vmassol: and does it implies anything that I have copied a exerpt from GPL code ?  \n18:07\u00a0<cdop>\u00a0well, #set($discard = $row.get('longText1').substring(1,10)) -> with that i get \"<table bor\"  \n18:07\u00a0<vmassol>\u00a0Denis: it means we cannot dsitribute it  \n18:07\u00a0<vmassol>\u00a0or the whole distribution would be GPL  \n18:07\u00a0<cdop>\u00a0no, i mean \"table bor\"  \n18:08\u00a0<tmortagne>\u00a0cdop: so you want to convert html to plain text without any syntax ?  \n18:09\u00a0<cdop>\u00a0right. and then back to html (for non-ascii-chars) :)  \n18:09\u00a0<tmortagne>\u00a0by definition plain text does not have any syntax so there is nothing to convert to html  \n18:09\u00a0<tmortagne>\u00a0except maybe replaceing the \\n by <br> and put all that in a <p>  \n18:09\u00a0<vmassol>\u00a0cdop: see http://extensions.xwiki.org/xwiki/bin/view/Extension/Rendering+Module#HRenderingScriptService  \n18:10\u00a0<cdop>\u00a0vmassol: thanks, i guess thats what i need :) tmortagne thanks, too :)  \n18:14\u00a0<Denis>\u00a0vmassol: there is no tons of way to compute this, do you means that copying silently is better ?  \n18:15\u00a0<vmassol>\u00a0I was joking\u2026. but Sergiu raises a real issue....  \n18:15\u00a0<vmassol>\u00a0now  \n18:15\u00a0<vmassol>\u00a0I think I read  \n18:15\u00a0<vmassol>\u00a0that thre's a minimum # ofl ines  \n18:15\u00a0<vmassol>\u00a0for it to be considered an issue  \n18:16\u00a0<Denis>\u00a0I am even sure OpenJDK does not have invent this  \n18:16\u00a0<vmassol>\u00a0IMO you can reply to Sergiu that  \n18:16\u00a0<vmassol>\u00a01) there are not enough # of lines to be an issue  \n18:16\u00a0<vmassol>\u00a02) it's temporary  \n18:17\u00a0<vmassol>\u00a0jvdrean: do we still keep the practice of a \\*Code space for tech content or do we remove that now that we have hidden docs?  \n18:19\u00a0<vmassol>\u00a0there might be the rights issue  \n18:19\u00a0<Slashman>\u00a0has quit  \n18:19\u00a0<vmassol>\u00a0we may want to protect all tech pages  \n18:19\u00a0<vmassol>\u00a0from being edited by any editor  \n18:21\u00a0<vmassol>\u00a0tmortagne/mflorea: just tried to uninstall the FAQ app locally  \n18:21\u00a0<vmassol>\u00a0(installed as an EM extension)  \n18:21\u00a0<vmassol>\u00a0and got:  \n18:21\u00a0<vmassol>\u00a0We couldn't find any extension with id 'org.xwiki.platform:xwiki-platform-faq-ui' and version '${escapetool.xml($extensionVersion)}'. Make sure you have the right extension repositories configured.  \n18:21\u00a0<vmassol>\u00a0(after I clicked on the uninstall button)  \n18:21\u00a0<vmassol>\u00a0on 4.3-SNAPSHOT  \n18:22\u00a0<tmortagne>\u00a0vmassol: you get the proper version displayed in the extension box ?  \n18:22\u00a0<vmassol>\u00a0all was ok till I pressed \"uninstall\", I didn't check what version was printed  \n18:22\u00a0<vmassol>\u00a0I'll retry  \n18:23\u00a0<tmortagne>\u00a0I mean before you uninstall anything, the version is supposed to be displayed in the extension details  \n18:23\u00a0<tmortagne>\u00a0according to the error there is something that make the veersion variable in velocity be null  \n18:23\u00a0<tmortagne>\u00a0so I was wondering if it's only when unintalling  \n18:24\u00a0<vmassol>\u00a0I confirm  \n18:24\u00a0<vmassol>\u00a0the install went fine  \n18:24\u00a0<vmassol>\u00a0and when checking installed extension  \n18:24\u00a0<vmassol>\u00a0it correctly says 4.3-SNAPSHOT  \n18:25\u00a0<tmortagne>\u00a0ok so there might bo something wrong in the ajax call for uninstall I guess  \n18:25\u00a0<tmortagne>\u00a0you should probably create a jira issue associated to 4.3M1  \n18:25\u00a0<vmassol>\u00a0trying again  \n18:25\u00a0<vmassol>\u00a0my 4.3-SNAPSHOT is of 1-2 days  \n18:25\u00a0<tmortagne>\u00a0what's weird is that I'm sure mflorea wrote integration test with ininstall  \n18:25\u00a0<tmortagne>\u00a0uninstall  \n18:26\u00a0<tmortagne>\u00a0and it's not a very special extension  \n18:26\u00a0<vmassol>\u00a0yep same result when I click \"apply\"  \n18:26\u00a0<vmassol>\u00a0yeah it's very standard without deps (actually it should have some deps, I'll add them ,))  \n18:27\u00a0<tmortagne>\u00a0I won't have time to look at it today (have to go in 10 minutes) and it's probably better to wait for mflorea who will find the issue in 5 minutes I guess  \n18:28\u00a0<vmassol>\u00a0creating issue  \n18:29\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-8375  \n18:29\u00a0<tmortagne>\u00a0ok  \n18:31\u00a0<tmortagne>\u00a0has quit  \n18:56\u00a0<fmancinelli>\u00a0has quit  \n18:57\u00a0<Denis>\u00a0vmassol: does the sql DB I have accessed last time is the one holding the data of the bot ?  \n18:58\u00a0<vmassol>\u00a0yes  \n18:58\u00a0<vmassol>\u00a0well depends  \n18:58\u00a0<vmassol>\u00a0the irc bot pages are on the dev subwiki  \n18:58\u00a0<vmassol>\u00a0not the main wiki  \n18:59\u00a0<Denis>\u00a0but this the same sql server ?  \n19:00\u00a0<vmassol>\u00a0Denis: yes same server  \n19:00\u00a0<vmassol>\u00a0(xwiki.org)  \n19:00\u00a0<vmassol>\u00a0but  \n19:00\u00a0<vmassol>\u00a0we were accessing some dev server  \n19:00\u00a0<vmassol>\u00a0you need to access the xwiki.org server  \n19:01\u00a0<vmassol>\u00a0since that dev server doesn't exist anymore  \n19:01\u00a0<vmassol>\u00a0got to go prepare dinner for the kids, bb in a few minutes....  \n19:02\u00a0<Denis>\u00a0vmassol: how could I ?  \n19:06\u00a0<mflorea>\u00a0has joined #xwiki  \n19:08\u00a0<vmassol>\u00a0Denis: back  \n19:08\u00a0<vmassol>\u00a0wdym?  \n19:08\u00a0<Denis>\u00a0I would like to access the mysql server where your code fails currently  \n19:08\u00a0<vmassol>\u00a0see skype  \n19:13\u00a0<sburjan>\u00a0has quit  \n19:16\u00a0<jvdrean>\u00a0has quit  \n19:29\u00a0<mflorea>\u00a0has quit  \n19:37\u00a0<vmassol>\u00a0has quit  \n19:42\u00a0<vmassol>\u00a0has joined #xwiki  \n19:46\u00a0<evalica>\u00a0has quit  \n19:50\u00a0<Enygma`>\u00a0has quit  \n20:03\u00a0<xwikibot>\u00a0has joined #xwiki  \n20:10\u00a0<mrvanes>\u00a0has quit  \n20:19\u00a0<abusenius>\u00a0has joined #xwiki  \n20:27\u00a0<sburjan`>\u00a0hmm.. another it seems I found another JAR duplication  \n20:29\u00a0<sburjan`>\u00a0seems that we have a duplication on xercesImpl. I'll try looking into it tomorrow if I'll have the time  \n20:29\u00a0<vmassol>\u00a0ok cool  \n20:31\u00a0<sburjan`>\u00a0but for now, I made XEM smaller with 2.8 MB :)  \n20:31\u00a0<vmassol>\u00a0:)  \n20:32\u00a0<vmassol>\u00a0100MB more to go....  \n20:33\u00a0<sburjan`>\u00a0yes :)  \n20:35\u00a0<vmassol>\u00a0we're getting there  \n20:35\u00a0<vmassol>\u00a0once everything is an extension  \n20:35\u00a0<vmassol>\u00a0then XE will be only as large as the minimal extension manager with a command line interface  \n20:35\u00a0<vmassol>\u00a0ie around 1MB  \n20:35\u00a0<vmassol>\u00a0:)  \n20:38\u00a0<sburjan`>\u00a0looking forward to that moment :)  \n21:11\u00a0<mflorea>\u00a0has joined #xwiki  \n21:37\u00a0<Denis>\u00a0vmassol: I think I know why the bot crash, but not \u00a0why it happen  \n21:37\u00a0<vmassol>\u00a0ah?  \n21:37\u00a0<Denis>\u00a0it is related to the xwikircs table  \n21:39\u00a0<Denis>\u00a0the key is in three columns: docid, version1, version2  \n21:39\u00a0<vmassol>\u00a0yep  \n21:39\u00a0<Denis>\u00a0do you know what is expected in versions ?  \n21:40\u00a0<vmassol>\u00a0version1 is the major  \n21:40\u00a0<vmassol>\u00a0version2 is the minor  \n21:40\u00a0<vmassol>\u00a0for ex for 2.1, version1=2, version2=1  \n21:40\u00a0<vmassol>\u00a0(AFAIR)  \n21:40\u00a0<Denis>\u00a0seems you attempt to save twice the same version  \n21:41\u00a0<vmassol>\u00a0hmm could that happen if  \n21:41\u00a0<vmassol>\u00a0the first save is in progress and then a second save to the doc happen  \n21:41\u00a0<vmassol>\u00a0but before the version is incremented  \n21:41\u00a0<vmassol>\u00a0like now ;)  \n21:42\u00a0<vmassol>\u00a0we would need to check the default DB isolation level  \n21:42\u00a0<vmassol>\u00a0ah  \n21:42\u00a0<vmassol>\u00a0I have some idea  \n21:42\u00a0<vmassol>\u00a0since xwiki.org is on myisam  \n21:42\u00a0<vmassol>\u00a0and thus no transaction  \n21:43\u00a0<vmassol>\u00a0it's possible that the version increment is not done in a separate transaction  \n21:43\u00a0<vmassol>\u00a0and thus the doc can start to be saved a second time before the first one has finished  \n21:45\u00a0<Denis>\u00a0plausible, the document is saved quite often  \n21:45\u00a0<vmassol>\u00a0it's saved at each line you type  \n21:45\u00a0<vmassol>\u00a0and the error happens when you type fast  \n21:45\u00a0<Denis>\u00a0right  \n21:46\u00a0<Denis>\u00a0if I look at your gist, the timing was really small between version 390 and 391  \n21:48\u00a0<Denis>\u00a0btw, do you like my new implem of the bitCount() ?  \n21:48\u00a0<vmassol>\u00a0not looked at the details yet :)  \n21:49\u00a0<Denis>\u00a0similar but no more the same :)  \n21:49\u00a0<vmassol>\u00a0even shorter ;)  \n21:49\u00a0<Denis>\u00a0yep  \n21:50\u00a0<Denis>\u00a0in writing at least, not sure if you look at cpu cycle, but probably  \n21:51\u00a0<Denis>\u00a0bit math is alway fun :)  \n21:51\u00a0<vmassol>\u00a0don't ask me to maintain it!  \n21:51\u00a0<vmassol>\u00a0:)  \n22:11\u00a0<Denis>\u00a0x  \n22:11\u00a0<Denis>\u00a0x  \n22:16\u00a0<vmassol>\u00a0mflorea: seems like this new extension is good candidate for your class as component proposal :)  \n22:16\u00a0<vmassol>\u00a0see http://extensions.xwiki.org/xwiki/bin/download/Extension/Semantic+XWiki/xwiki-platform-oldcore-sparq-support.diff  \n22:17\u00a0<mflorea>\u00a0indeed :)  \n22:18\u00a0<mflorea>\u00a0I'll leave a comment on the extension page  \n22:18\u00a0<vmassol>\u00a0good idea  \n22:23\u00a0<Denis>\u00a0vmassol: could not the issue be related with the softreference used for archivedoc ?  \n22:23\u00a0<vmassol>\u00a0I don't know enough this part to have an opinion atm  \n22:24\u00a0<Denis>\u00a0I do not either, it is really not good code  \n22:24\u00a0<vmassol>\u00a0but that should not be an issue with timing if this was the case  \n22:26\u00a0<Denis>\u00a0vmassol: probably, but it does not seems to happen each time you type fast  \n22:27\u00a0<vmassol>\u00a0yes but then it should happen also when you type slow and I haven't seen that yet  \n22:28\u00a0<Denis>\u00a0difficult to really know when it really happen  \n22:53\u00a0<fmancinelli>\u00a0has joined #xwiki  \n23:01\u00a0<vmassol>\u00a0has quit  \n23:02\u00a0<vmassol>\u00a0has joined #xwiki  \n23:05\u00a0<abusenius>\u00a0has quit  \n23:06\u00a0<coud6>\u00a0has quit  \n23:10\u00a0<vmassol>\u00a0has quit  \n23:40\u00a0<vmassol>\u00a0has joined #xwiki  \n23:45\u00a0<vmassol>\u00a0has quit  \n23:55\u00a0<fooobarrr>\u00a0has joined #xwiki  \n23:56\u00a0<fooobarrr>\u00a0I'm having an issue with the 'Tasks' extension on xwiki 4.0  \n23:58\u00a0<fooobarrr>\u00a0when I'm in the 'task manager' space and click on a username in the assignee column I get the following error: http://ideone.com/3GfJDt  \n23:58\u00a0<fooobarrr>\u00a0and then the application seems to freeze up\n"}