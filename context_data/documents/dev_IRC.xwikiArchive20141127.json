{"id": "dev:IRC.xwikiArchive20141127", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20141127", "title": "IRC Archive for channel #xwiki on 27 November 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has joined #xwiki  \n00:52\u00a0<Lyes1>\u00a0has quit  \n01:01\u00a0<vmassol>\u00a0has quit  \n05:59\u00a0<OSIMasson>\u00a0has quit  \n06:01\u00a0<Denis1>\u00a0has joined #xwiki  \n06:03\u00a0<Denis>\u00a0has quit  \n07:51\u00a0<msmeria>\u00a0has joined #xwiki  \n07:51\u00a0<vmassol>\u00a0has joined #xwiki  \n08:08\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:11\u00a0<cjd>\u00a0has quit  \n08:28\u00a0<vmassol>\u00a0tmortagne: good morning, GD is marked for 6.3 on http://dev.xwiki.org/xwiki/bin/view/Community/ReleaseManagerRoster and you're marked next. What should we do to decide who's next RM for 6.4M1 on Monday? We need to find the RM today so that he can prepare to be ready for the Monday release  \n08:29\u00a0<vmassol>\u00a0my take is that we cannot have 2 persons doing a release so 6.3 should be marked either as your release or GD's  \n08:30\u00a0<vmassol>\u00a0and I believe it should be marked yours actually since you replaced GD (even though he helped finish it)  \n08:31\u00a0<tmortagne>\u00a0vmassol: we already said it was GD on 6.3, I will do the next one  \n08:31\u00a0<tmortagne>\u00a0he just forgot to move himself  \n08:31\u00a0<vmassol>\u00a0ok fine with me  \n08:31\u00a0<vmassol>\u00a0moving  \n08:33\u00a0<vmassol>\u00a0cool http://ci.xwiki.org/job/xwiki-platform/ is building again  \n08:33\u00a0<vmassol>\u00a0(just finished)  \n08:33\u00a0<vmassol>\u00a0several failing enterprise tests though  \n08:57\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:24\u00a0<Lyes>\u00a0has joined #xwiki  \n09:24\u00a0<cjd>\u00a0has joined #xwiki  \n09:37\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:40\u00a0<Lyes1>\u00a0has joined #xwiki  \n09:40\u00a0<Lyes>\u00a0has quit  \n09:46\u00a0<Lyes1>\u00a0has quit  \n09:58\u00a0<mflorea>\u00a0has joined #xwiki  \n10:18\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:21\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:33\u00a0<benoitc\\_>\u00a0is now known as <benoitc>  \n10:33\u00a0<benoitc>\u00a0has quit  \n10:44\u00a0<martin-h>\u00a0has joined #xwiki  \n10:57\u00a0<evalica>\u00a0has joined #xwiki  \n10:58\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:43\u00a0<Lyes>\u00a0has joined #xwiki  \n13:07\u00a0<evalica1>\u00a0has joined #xwiki  \n13:07\u00a0<evalica>\u00a0has quit  \n13:18\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n13:18\u00a0<DarkKnightCZ>\u00a0hi, any easy way how to export whole space as xar?  \n13:23\u00a0<tmortagne>\u00a0DarkKnightCZ: depends on your version, there is http://jira.xwiki.org/browse/XWIKI-11337 in 6.3  \n13:24\u00a0<tmortagne>\u00a0before 6.3 you will have to either export the whole wiki and then cleanup the XAR, put yourself all the pages in the export URL or use an extension that provide this feature  \n13:24\u00a0<tmortagne>\u00a0there is several on extnsions.xwiki.org AFAIK  \n13:27\u00a0<DarkKnightCZ>\u00a0yup, 6.2... but modifying the xar isn't so hard (if the wiki doesn't have more pages... exporting 2GB wiki for several pages would be a lot more fun :) )  \n13:29\u00a0<tmortagne>\u00a0yep if the wiki is very big the simplest is probably to choose one of the extensions on extensions.xwiki.org  \n13:34\u00a0<DarkKnightCZ>\u00a0yup, thanks  \n13:40\u00a0<evalica>\u00a0has joined #xwiki  \n13:40\u00a0<evalica1>\u00a0has quit  \n14:02\u00a0<Slashman>\u00a0has joined #xwiki  \n14:10\u00a0<vmassol>\u00a0guys I need your opinion on something  \n14:11\u00a0<vmassol>\u00a0I've just realized that the new mail sender api script service has no check on permissions....  \n14:11\u00a0<vmassol>\u00a0so I'd like to put some permission check but I'm wondering what to put  \n14:11\u00a0<vmassol>\u00a0obviously an easy solution is to ask for PR  \n14:12\u00a0<vmassol>\u00a0but this means that you won't allow local admins to be able to send mails for example. So I guess a perfect solution would be to have a special right for sending emails but our admin UI for rights is not extensible  \n14:12\u00a0<vmassol>\u00a0and I don't want to code yet another UI (as GD did for the \"wiki creation right\")  \n14:12\u00a0<vmassol>\u00a0and the problem is:  \n14:13\u00a0<vmassol>\u00a0we use the scripting api in the Registration.xml page for example  \n14:13\u00a0<vmassol>\u00a0and this page won't have PR  \n14:13\u00a0<vmassol>\u00a0no registration sorry  \n14:13\u00a0<vmassol>\u00a0ResetPassword.xml  \n14:13\u00a0<vmassol>\u00a0(for now that's the only place but we'll have more later as we move from the old api to this one)  \n14:13\u00a0<vmassol>\u00a0btw I've noticed that the old mailsender doesn't do any check either\u2026.  \n14:14\u00a0<vmassol>\u00a0so I'm not sure what's best...  \n14:14\u00a0<vmassol>\u00a0if you have any idea I'm all ears :)  \n14:16\u00a0<vmassol>\u00a0ofc a solution is to have the resetpassword.xml do the mail sending in some java api and do the same whenever there's a need but that's a lot of work\u2026 wonder if there's somerhting simpler  \n14:20\u00a0<vmassol>\u00a0actually this is what we do registration, the email is sent in a java api  \n14:20\u00a0<ClemensR>\u00a0the obvious (to me) but not so nice alternative to PR would be to check for Admin rights instead, so at least local admins can set up pages who can send mail.  \n14:20\u00a0<vmassol>\u00a0Clemesn that won't work  \n14:21\u00a0<vmassol>\u00a0becuase it would mean that only admins can reste their passwords :)  \n14:21\u00a0<vmassol>\u00a0\\*reset  \n14:21\u00a0<ClemensR>\u00a0or allow the admin to configure the right ... ah, it wont, ok  \n14:21\u00a0<vmassol>\u00a0I think the only solution I can think of ATM is:  \n14:21\u00a0<ClemensR>\u00a0ah, I thought check PR on the author of the page, nit the viewer  \n14:21\u00a0<ClemensR>\u00a0s/nit/not/  \n14:21\u00a0<vmassol>\u00a0yes we could do that  \n14:22\u00a0<vmassol>\u00a0but we usually don't like to have pages requiring PR  \n14:22\u00a0<vmassol>\u00a0they're a pain  \n14:22\u00a0<ClemensR>\u00a0which is known to produce the \"usual\" problems ... yes  \n14:22\u00a0<vmassol>\u00a0so signed scripts\u2026 hehe  \n14:22\u00a0<vmassol>\u00a0Denis1: any christmas gift planned for the xwiki project from your part? :)  \n14:23\u00a0<vmassol>\u00a0so I either PR on the doc or the api way  \n14:23\u00a0<vmassol>\u00a0if we go the api way then we still need to decide what permission the scripting api requires: either Admin or PR  \n14:24\u00a0<vmassol>\u00a0Admin is fine if you trust your local admins which may not always be true  \n14:24\u00a0<vmassol>\u00a0(for example myxwiki.org)  \n14:24\u00a0<ClemensR>\u00a0if mail sending is considered dangerous enough that not everybody can do it \u00a0(and I see why one would thing so;) then yes, looks like the \"write an api for every use\"  \n14:24\u00a0<ClemensR>\u00a0s/thing/think/  \n14:26\u00a0<ClemensR>\u00a0looks like an extra setting in the Mail config admin ? \"Which (global) right is required to use the mail sender API: Programming/Admin/Edit/View ?\"  \n14:26\u00a0<vmassol>\u00a0that's what I was saying above  \n14:26\u00a0<vmassol>\u00a0So I guess a perfect solution would be to have a special right for sending emails but our admin UI for rights is not extensible and I don't want to code yet another UI (as GD did for the \"wiki creation right\")  \n14:27\u00a0<vmassol>\u00a0maybe I should bite the bullet and do it  \n14:27\u00a0<vmassol>\u00a0but it doesn't work actually  \n14:27\u00a0<ClemensR>\u00a0I mean: allow the (main) admin to pick which right is necessary  \n14:27\u00a0<OSIMasson>\u00a0has joined #xwiki  \n14:27\u00a0<vmassol>\u00a0as I said te check can only be done on the document  \n14:27\u00a0<vmassol>\u00a0as we need eveyrone to be able to reset their password (for example)  \n14:28\u00a0<vmassol>\u00a0or do you mean:  \n14:28\u00a0<vmassol>\u00a0API (for ResetPassword.xml) + a new right for the mail sender script service  \n14:29\u00a0<ClemensR>\u00a0ah, I thought the reset passwd \u00a0was the special API case, where the rights are not used anyway \u00a0(?)  \n14:29\u00a0<tmortagne>\u00a0vmassol: I would vote for a special API, but in the case of reset passwor as we already discusses having it in a page is quite wrong and it should be a a dedicated actio anyway  \n14:29\u00a0<vmassol>\u00a0(which is probably the best but that's going to take a lot of time)  \n14:29\u00a0<tmortagne>\u00a0now the question remain for other applications that would wand to send mails  \n14:29\u00a0<tmortagne>\u00a0requiring PR is quite a pain  \n14:30\u00a0<vmassol>\u00a0either that or they create their own apis\u2026.  \n14:30\u00a0<ClemensR>\u00a0I thought only the scripting API for the mail sender does the check? ... (/me goes away reading the docs first)  \n14:30\u00a0<vmassol>\u00a0there's no check now but that's the idea yes  \n14:30\u00a0<vmassol>\u00a0(ClemensR)  \n14:31\u00a0<vmassol>\u00a0tmortagne: for example the Meeting Manager app  \n14:31\u00a0<vmassol>\u00a0has a need to send mails  \n14:31\u00a0<vmassol>\u00a0Lyes: can you confirm that ATM the meeting manager has no java code?  \n14:32\u00a0<vmassol>\u00a0so if would mean that they'd need to introduce some java module just for this  \n14:32\u00a0<vmassol>\u00a0or require PR for some of their pages  \n14:33\u00a0<tmortagne>\u00a0yes  \n14:33\u00a0<vmassol>\u00a0I don't see any other solution right now  \n14:33\u00a0<vmassol>\u00a0so to summarize:  \n14:33\u00a0<tmortagne>\u00a0but keeping this API fully open is probably not an option  \n14:33\u00a0<vmassol>\u00a01) modify resetpassword feature to call some java code to do the mail sending  \n14:33\u00a0<vmassol>\u00a02) add a doc PR check in the mail sender scirp service  \n14:33\u00a0<vmassol>\u00a0\\*script  \n14:34\u00a0<vmassol>\u00a0there remains one problem  \n14:34\u00a0<vmassol>\u00a0what do we do with the old mailsender plugin\u2026.  \n14:34\u00a0<Lyes>\u00a0has quit  \n14:34\u00a0<tmortagne>\u00a0I would prefer 1) do a proper action dedicated to reset password since haveing it has a page cause other issues  \n14:34\u00a0<Lyes>\u00a0has joined #xwiki  \n14:35\u00a0<vmassol>\u00a0yes we agree  \n14:35\u00a0<vmassol>\u00a0nope  \n14:35\u00a0<vmassol>\u00a0at least not that I have seen by looking at the code  \n14:35\u00a0<vmassol>\u00a0ofc the solution is to migrate to use the new mail sender api and to write java code where needed  \n14:35\u00a0<vmassol>\u00a0but it's a breaking change  \n14:35\u00a0<tmortagne>\u00a0indeed not a single test in there  \n14:36\u00a0<vmassol>\u00a0for extensions using the old mailsdner api  \n14:37\u00a0<vmassol>\u00a0let me check the code  \n14:37\u00a0<vmassol>\u00a0- Invitation.WebHome  \n14:37\u00a0<vmassol>\u00a0that seems all  \n14:37\u00a0<vmassol>\u00a0in platform  \n14:38\u00a0<vmassol>\u00a0there's no invitation java api module yet  \n14:38\u00a0<vmassol>\u00a0so that would mean adding one with some api  \n14:38\u00a0<vmassol>\u00a0a bit of work...  \n14:48\u00a0<martin-h>\u00a0has quit  \n14:51\u00a0<ClemensR>\u00a0the \"send page as mail\" uses the mailplugin, too, via shareinline.vm ...  \n14:55\u00a0<vmassol>\u00a0ah indeedI only checked .xml pages  \n14:56\u00a0<vmassol>\u00a0hmm  \n14:57\u00a0<vmassol>\u00a0we don't have special rights in vms, right?  \n14:57\u00a0<vmassol>\u00a0(filesystem vms)  \n14:58\u00a0<vmassol>\u00a0how do we give PRs to a vm? :)  \n14:59\u00a0<Lyes>\u00a0@Vincent : we have integration test on the Meeting manager  \n14:59\u00a0<Lyes>\u00a0@vmassol  \n14:59\u00a0<vmassol>\u00a0Lyes: ok but not java api  \n14:59\u00a0<vmassol>\u00a0\\*no  \n14:59\u00a0<Lyes>\u00a0no  \n14:59\u00a0<Lyes>\u00a0only tests  \n14:59\u00a0<DarkKnightCZ>\u00a0has quit  \n15:03\u00a0<msmeria>\u00a0has quit  \n15:06\u00a0<vmassol>\u00a0so the answer is to use ##!priviledged=true ;)  \n15:13\u00a0<tmortagne>\u00a0yea don't make it too public right now, those fancy template properties hasn't been discussed much yet  \n16:02\u00a0<ClemensR>\u00a0btw, when sending a page via mail, the line before the user message reads \u00a0\"Here is their message:\" while the mail is only from a single user. I guess someone wanted to dodge the \"Here is his/her message\" decision. Maybe just \"Here is the message:\" might be better, however ?  \n16:02\u00a0<gsmeria>\u00a0has quit  \n16:02\u00a0<gsmeria1>\u00a0has joined #xwiki  \n16:05\u00a0<mflorea>\u00a0has quit  \n16:05\u00a0<mflorea>\u00a0has joined #xwiki  \n16:09\u00a0<gsmeria1>\u00a0has quit  \n16:19\u00a0<gsmeria>\u00a0has joined #xwiki  \n16:28\u00a0<vmassol>\u00a0guys do you agree with my comment at http://jira.xwiki.org/browse/XWIKI-10789 ?  \n16:31\u00a0<vmassol>\u00a0updated  \n16:41\u00a0<woshilapin>\u00a0has quit  \n16:42\u00a0<woshilapin>\u00a0has joined #xwiki  \n16:53\u00a0<tmortagne>\u00a0vmassol: it's always nice to remove stuff from XWikiPreferences yes  \n16:53\u00a0<tmortagne>\u00a0but hope nothing is expecting to find those fields here  \n16:54\u00a0<tmortagne>\u00a0the old mail plugin would have to be refactored too take the configuration in the right place  \n16:56\u00a0<vmassol>\u00a0yes, that's why I said deprecated not removed  \n16:57\u00a0<vmassol>\u00a0but there's the problem of updating thereafter  \n16:57\u00a0<vmassol>\u00a0unless we don't want to support that  \n16:58\u00a0<tmortagne>\u00a0you can't just say it's deprecated and let the plugin use wrong value, it probably not very hard to make the plugin use MailSenderConfiguration component  \n16:58\u00a0<vmassol>\u00a0sure  \n16:58\u00a0<vmassol>\u00a0but what about other extensiotns  \n16:59\u00a0<vmassol>\u00a0?  \n16:59\u00a0<vmassol>\u00a0(using those values)  \n16:59\u00a0<tmortagne>\u00a0other extension that are sending mail without using the standard mail sender plugin or new component ?  \n16:59\u00a0<tmortagne>\u00a0I seriously doubt there is much  \n16:59\u00a0<vmassol>\u00a0there are probably people who's extended the mailsender plugin with additional code  \n17:00\u00a0<vmassol>\u00a0they'll need to update their code too or it won't work  \n17:00\u00a0<vmassol>\u00a0but it could be acceptable  \n17:00\u00a0<tmortagne>\u00a0in that case they should use createMailConfiguration API provided by the plugin  \n17:00\u00a0<vmassol>\u00a0we would documet in release notes  \n17:00\u00a0<vmassol>\u00a0oh yes I'd definitely introduce a MailConfiguration (I already have it)  \n17:01\u00a0<tmortagne>\u00a0you don't understand createMailConfiguration is an existing API in the plugin  \n17:01\u00a0<tmortagne>\u00a0anyone that want to \"extend\" the plugin should use that to acces the configuration  \n17:01\u00a0<tmortagne>\u00a0no directly access XWikiPreference document  \n17:01\u00a0<vmassol>\u00a0it's not extension I'm worried about  \n17:01\u00a0<vmassol>\u00a0people usually don't extend  \n17:01\u00a0<vmassol>\u00a0they just copy the code  \n17:01\u00a0<vmassol>\u00a0and make modifications  \n17:01\u00a0<vmassol>\u00a0and then use their version  \n17:02\u00a0<vmassol>\u00a0but as I said we could decide to not support that  \n17:02\u00a0<vmassol>\u00a0and that's all  \n17:02\u00a0<vmassol>\u00a0:)  \n17:02\u00a0<tmortagne>\u00a0we want to get rid of everything in XWikiPreference anyway  \n17:14\u00a0<evalica>\u00a0has quit  \n17:21\u00a0<vmassol>\u00a0Enygma`: cool, there's a candidate for freedom sponsor on the list! I'll let you reply to him ;)  \n17:31\u00a0<Slashman\\_>\u00a0has joined #xwiki  \n17:34\u00a0<Slashman>\u00a0has quit  \n17:49\u00a0<KermitTheFragger>\u00a0has quit  \n17:49\u00a0<Enygma`>\u00a0vmassol: found it! Writing a reply  \n17:52\u00a0<tmortagne>\u00a0now he needs to have answers :)  \n18:07\u00a0<Lyes>\u00a0has quit  \n18:07\u00a0<Lyes>\u00a0has joined #xwiki  \n18:08\u00a0<woshilapin>\u00a0has quit  \n18:08\u00a0<cjd>\u00a0has quit  \n18:13\u00a0<ClemensR>\u00a0has left #xwiki  \n18:41\u00a0<gsmeria>\u00a0has quit  \n18:50\u00a0<evalica1>\u00a0has quit  \n18:50\u00a0<evalica>\u00a0has joined #xwiki  \n18:51\u00a0<evalica>\u00a0has joined #xwiki  \n18:53\u00a0<mflorea>\u00a0has quit  \n19:00\u00a0<evalica>\u00a0has quit  \n19:01\u00a0<Enygma`>\u00a0has quit  \n19:25\u00a0<Slashman\\_>\u00a0has quit  \n19:37\u00a0<sburjan>\u00a0has quit  \n19:48\u00a0<cjd>\u00a0has joined #xwiki  \n20:38\u00a0<OSIMasson>\u00a0has quit  \n21:09\u00a0<tmortagne>\u00a0has quit  \n21:21\u00a0<sburjan>\u00a0has joined #xwiki  \n21:25\u00a0<Lyes>\u00a0has quit  \n21:32\u00a0<Lyes>\u00a0has joined #xwiki  \n22:43\u00a0<vmassol>\u00a0has quit  \n23:16\u00a0<woshilapin>\u00a0has joined #xwiki  \n23:19\u00a0<martin-h>\u00a0has joined #xwiki  \n23:28\u00a0<woshilapin>\u00a0has quit  \n23:58\u00a0<Lyes>\u00a0has quit\n"}