{"id": "dev:IRC.xwikiArchive20170320", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20170320", "title": "IRC Archive for channel #xwiki on 20 March 2017 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<OSIMasson1>\u00a0has quit  \n02:01\u00a0<xwikiorg\\_guest\\_1>\u00a0has joined #xwiki  \n02:02\u00a0<xwikiorg\\_guest\\_1>\u00a0has quit  \n06:11\u00a0<mflorea>\u00a0has joined #xwiki  \n08:55\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:56\u00a0<vmassol>\u00a0good morning everyone  \n08:56\u00a0<vmassol>\u00a0so today is supposed to be release day! :)  \n08:58\u00a0<acotiuga>\u00a0has joined #xwiki  \n09:03\u00a0<Pbas>\u00a0has joined #xwiki  \n09:13\u00a0<mflorea>\u00a0has quit  \n09:14\u00a0<vmassol>\u00a0BTW regarding our jenkins I uprgade the pipeline plugins. Before that when I committed something on a contrib repo it wasn't picked up automatically and after the upgrade when I committed it was picked up, so I hope that this fixed our issue  \n09:14\u00a0<vmassol>\u00a0let me know if you see a problem again  \n09:14\u00a0<tmortagne>\u00a0cool  \n09:15\u00a0<vmassol>\u00a0tmortagne: btw you have some mediawiki extension branches not building on ci  \n09:16\u00a0<tmortagne>\u00a0vmassol: I know, waiting for a Bliki release  \n09:16\u00a0<vmassol>\u00a0ok  \n09:23\u00a0<msmeria>\u00a0has joined #xwiki  \n09:30\u00a0<vmassol>\u00a0tmortagne: 8 failing tests related to extensions in platform. Most probaby flickers  \n09:31\u00a0<mflorea>\u00a0has joined #xwiki  \n09:31\u00a0<tmortagne>\u00a0vmassol: we don't have flickers in extension test so I doubt it  \n09:32\u00a0<vmassol>\u00a0ony my side I need to fix http://ci.xwiki.org/job/xwiki-platform\\_Sonar/968/consoleFull which is caused by revapi but that's strange since it doesn't happen on the normal job for platform. Checking  \n09:37\u00a0<vmassol>\u00a0BTW I've just downloaded the latest snapshot for the jetty/hsqldb distribution  \n09:38\u00a0<vmassol>\u00a0and I'm getting lots of errors in the logs  \n09:38\u00a0<vmassol>\u00a0https://gist.githubusercontent.com/vmassol/f4862b7bad9a2a0512fc6f80c4043195/raw/955f804befe0fb5081fc84327caaa1a434abba53/gistfile1.txt  \n09:40\u00a0<tmortagne>\u00a0Caused by: javax.imageio.IIOException: Bad PNG signature!  \n09:40\u00a0<tmortagne>\u00a0at com.sun.imageio.plugins.png.PNGImageReader.readHeader(PNGImageReader.java:242)  \n09:40\u00a0<tmortagne>\u00a0... 16 common frames omitted  \n09:40\u00a0<tmortagne>\u00a0looks like someone committed a bud png  \n09:40\u00a0<tmortagne>\u00a0or it's a Tika bug  \n09:41\u00a0<tmortagne>\u00a0xwiki:[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \n09:41\u00a0<tmortagne>\u00a0does not sounds like a new png unless someone modified it  \n09:42\u00a0<tmortagne>\u00a0don't see any recent change to this attachment  \n09:43\u00a0<tmortagne>\u00a0I don't remember any upgrade of Tilka in the current snapshot  \n09:43\u00a0<tmortagne>\u00a0so that's weird  \n09:44\u00a0<tmortagne>\u00a0other possibility is that's it's a consequence of hsqldb driver issue in the first errors  \n09:44\u00a0<tmortagne>\u00a0vmassol: maybe a side effect of you optimisation to check database version  \n09:46\u00a0<msmeria1>\u00a0has joined #xwiki  \n09:48\u00a0<tmortagne>\u00a0xwiki-enterprise-test-webstandards keep crashing because of memory issue even when it build alone (just tried)  \n09:48\u00a0<msmeria>\u00a0has quit  \n09:49\u00a0<tmortagne>\u00a0nu validator really cause more issues than it solves...  \n10:01\u00a0<msmeria1>\u00a0has quit  \n10:06\u00a0<msmeria>\u00a0has joined #xwiki  \n10:26\u00a0<vmassol>\u00a0there are also hibernate issues  \n10:26\u00a0<vmassol>\u00a0in the logs  \n10:26\u00a0<tmortagne>\u00a0vmassol: yes that's what I was talking about  \n10:27\u00a0<vmassol>\u00a0yes I'll check my code since that's the only thing related to DB that happeed redcently  \n10:27\u00a0<vmassol>\u00a0\\*recently  \n10:27\u00a0<tmortagne>\u00a0maybe you left the driver or the session or whatever is a bad state  \n10:27\u00a0<tmortagne>\u00a0maybe you left the driver or the session or whatever in a bad state  \n10:30\u00a0<tmortagne>\u00a0note that I don't have those errors with the very last snapshot  \n10:30\u00a0<tmortagne>\u00a0and jenkins does not seems to have them either  \n10:30\u00a0<tmortagne>\u00a0maybe it's related to your environment  \n10:31\u00a0<Slashman>\u00a0has joined #xwiki  \n10:46\u00a0<vmassol>\u00a0yes I have somerthing very strange  \n10:46\u00a0<vmassol>\u00a0trying to figure it out  \n11:01\u00a0<faichelbaum>\u00a0Hi guys. Due to some glitch during creation of a page, we have a Nested page with his URI \"../08%2F2016/\"  \n11:01\u00a0<faichelbaum>\u00a0I can't get into it neither move it nor delete it  \n11:01\u00a0<faichelbaum>\u00a0any idea how we could get rid of it ?  \n11:01\u00a0<vmassol>\u00a0hi faichelbaum that shouldn't cause any problem  \n11:01\u00a0<vmassol>\u00a0are the \"/\" part of the page name?  \n11:02\u00a0<vmassol>\u00a0ah I know  \n11:02\u00a0<vmassol>\u00a0%2F is /  \n11:02\u00a0<faichelbaum>\u00a0the one in the middle ? seems so :/  \n11:02\u00a0<vmassol>\u00a0my guess is that you're on tomcat  \n11:02\u00a0<faichelbaum>\u00a0indeed  \n11:02\u00a0<vmassol>\u00a0you need to read http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationTomcat  \n11:02\u00a0<vmassol>\u00a0especcially the part in red :)  \n11:03\u00a0<faichelbaum>\u00a0ok reading  \n11:05\u00a0<vmassol>\u00a0tmortagne: when in a cluster and running the DW, does the status.xml file for the disribution synced? I'm asking since I'm noticinf that the DW is appearing for test.xwiki.org and I'm \u00a0100% sure I ran it alreayd when I did the upgrade  \n11:05\u00a0<vmassol>\u00a0\"does the status.xml file for the disribution synced\" = is the status.xml file synced between the nodes  \n11:05\u00a0<faichelbaum>\u00a0using tomcat 8.5.8 for xwiki 9.1.2 : not sure if the red part still applies  \n11:06\u00a0<vmassol>\u00a0faichelbaum: actually it doesn't  \n11:06\u00a0<vmassol>\u00a0I mixed topics  \n11:06\u00a0<vmassol>\u00a0faichelbaum: you need to read this part: http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationTomcat#HAllowing222F22inpagenames  \n11:06\u00a0<faichelbaum>\u00a0no worries  \n11:06\u00a0<vmassol>\u00a0well the 2 are valid and need to be chcked  \n11:07\u00a0<faichelbaum>\u00a0gotcha  \n11:07\u00a0<tmortagne>\u00a0vmassol: \"does the status.xml file for the disribution synced\", no  \n11:07\u00a0<vmassol>\u00a0ok so it's \"normal\" that we get the DW twice, once for each node, right?  \n11:08\u00a0<tmortagne>\u00a0vmassol: no it's not normal  \n11:08\u00a0<tmortagne>\u00a0if you get it twice it means there is things to do usually  \n11:08\u00a0<tmortagne>\u00a0I guess you get it because of curriki  \n11:08\u00a0<vmassol>\u00a0what would curriki have to do with test.xwiki.oprg?  \n11:08\u00a0<vmassol>\u00a0what would curriki have to do with test.xwiki.org?  \n11:08\u00a0<tmortagne>\u00a0you have an invalid extension install in curriki.xwiki.org  \n11:08\u00a0<tmortagne>\u00a0so you get Extensions step  \n11:09\u00a0<tmortagne>\u00a0bu you should not get the default UI step  \n11:09\u00a0<faichelbaum>\u00a0restarting tomcat to test the fix  \n11:09\u00a0<vmassol>\u00a0so when one subwiki has some extensoins not valid  \n11:09\u00a0<vmassol>\u00a0then all other subwiki will get the DW?  \n11:09\u00a0<tmortagne>\u00a0no  \n11:09\u00a0<tmortagne>\u00a0main wiki will  \n11:09\u00a0<vmassol>\u00a0ok but here  \n11:09\u00a0<vmassol>\u00a0I'm talking about test.xwiki.org  \n11:09\u00a0<vmassol>\u00a0not main wiki  \n11:10\u00a0<vmassol>\u00a0(msmeria is the one getting it to be precise)  \n11:10\u00a0<tmortagne>\u00a0what step do you get in the DW ?  \n11:10\u00a0<vmassol>\u00a0msmeria: ?  \n11:10\u00a0<tmortagne>\u00a0if you get Extensions step then it means you have an invalid extension in your wiki  \n11:10\u00a0<vmassol>\u00a0msmeria pasted me this \"Installed version 8.2.1 is not valid\"  \n11:11\u00a0<vmassol>\u00a0so I doubt it's the extension step  \n11:11\u00a0<msmeria>\u00a0I got the first step with the UI upgrade  \n11:11\u00a0<msmeria>\u00a0the extensions step didn't pop up  \n11:11\u00a0<tmortagne>\u00a0then it means you did not upgraded this wiki  \n11:11\u00a0<tmortagne>\u00a0you still have XE 8.2.1  \n11:11\u00a0<tmortagne>\u00a0you still have XE 8.2.1 UI  \n11:11\u00a0<vmassol>\u00a0I'm positibe I did  \n11:12\u00a0<vmassol>\u00a0I even remember the merge conflicts I had to resolve for test  \n11:12\u00a0<vmassol>\u00a0\\*positive  \n11:12\u00a0<vmassol>\u00a0BTW this happened twicr azlrady  \n11:12\u00a0<tmortagne>\u00a0then it means you did it when the second node was down and did not catched it  \n11:12\u00a0<vmassol>\u00a0with another wiki too a few daysa go  \n11:12\u00a0<msmeria>\u00a0so now I finished the UI upgrade to 8.4.4  \n11:13\u00a0<msmeria>\u00a0I see \"Powered by XWiki 8.4.4-node2\" at the bottom of the wiki  \n11:13\u00a0<vmassol>\u00a0ok so 100% sure we don't have a cluster issue anywhere....  \n11:13\u00a0<tmortagne>\u00a0msmeria: that's the WAR version  \n11:13\u00a0<msmeria>\u00a0ah ok  \n11:13\u00a0<tmortagne>\u00a0actually that's what is written in vesion.properties to me more precise  \n11:15\u00a0<msmeria>\u00a0I still have 2 apps with 8.2.1 installed: http://test.xwiki.org/xwiki/bin/admin/XWiki/XWikiPreferences?section=XWiki.InstalledExtensions&search=8.2.1&repo=installed  \n11:15\u00a0<msmeria>\u00a0XWiki Platform - Panels - UI\u00a0 and Administration Application  \n11:16\u00a0<tmortagne>\u00a0maybe those are not part of XWiki.org Flavor  \n11:17\u00a0<tmortagne>\u00a0msmeria: what is installed on xwiki.org subwikis is not XE but a special flavor  \n11:18\u00a0<vmassol>\u00a0still those shoud be part of the flavor normally or it's a bug, checking other wikis  \n11:19\u00a0<msmeria>\u00a0tmortagne: ok, I understand  \n11:19\u00a0<vmassol>\u00a0yes those don't appear on other subwikis and I haven't updated those manually during the upgrade  \n11:19\u00a0<vmassol>\u00a0checking xwikiorg flavor now  \n11:19\u00a0<tmortagne>\u00a0is EM did not ungraded it means it did not found them as dependenceies  \n11:19\u00a0<msmeria>\u00a0thought we had XE on all wikis  \n11:19\u00a0<tmortagne>\u00a0is EM did not ungraded it means it did not found them as dependencies  \n11:21\u00a0<vmassol>\u00a0yes the xwikorg flavor does depend on admin ui app: [INFO] | \u00a0+- org.xwiki.platform:xwiki-platform-administration-ui:xar:8.4.4:compile  \n11:21\u00a0<vmassol>\u00a0same for org.xwiki.platform:xwiki-platform-livetable-ui:xar:8.4.4:compile  \n11:22\u00a0<vmassol>\u00a0and [INFO] | \u00a0+- org.xwiki.platform:xwiki-platform-panels-ui:xar:8.4.4:compile  \n11:22\u00a0<tmortagne>\u00a0not sure why you are talking about livetab:e  \n11:22\u00a0<vmassol>\u00a0so the issue is not that they're not in the flavor  \n11:22\u00a0<vmassol>\u00a0because those are the 3 apps on http://test.xwiki.org/xwiki/bin/admin/XWiki/XWikiPreferences?section=XWiki.InstalledExtensions&search=8.2.1&repo=installed&force=1  \n11:23\u00a0<tmortagne>\u00a0I see only 2  \n11:24\u00a0<tmortagne>\u00a0panels and admin  \n11:24\u00a0<msmeria>\u00a0me 2 :)  \n11:24\u00a0<vmassol>\u00a0must be a cliuster issu  \n11:24\u00a0<vmassol>\u00a0must be a cluster issue  \n11:25\u00a0<vmassol>\u00a0this is what I see: https://www.evernote.com/l/AHe2a91MbmdP2Z3w-zd8o\\_c7d09\\_TrV0vBs  \n11:25\u00a0<vmassol>\u00a0I'mm on  \n11:25\u00a0<vmassol>\u00a0node1  \n11:25\u00a0<vmassol>\u00a0so we do have some cluster sync issues  \n11:25\u00a0<tmortagne>\u00a0actually admin app is installed on node 2 as far as I can see  \n11:26\u00a0<tmortagne>\u00a0the upgrade probably been executed on node2  \n11:26\u00a0<vmassol>\u00a0try this: http://test.xwikiorg-node1.xwikisas.com/xwiki/bin/admin/XWiki/XWikiPreferences?section=XWiki.InstalledExtensions&search=8.2.1&repo=installed&force=1&srid=1OH5c9hQ  \n11:26\u00a0<tmortagne>\u00a0the upgrade probably been executed on node 2  \n11:26\u00a0<tmortagne>\u00a0and something prevented node1 to reveive the information  \n11:26\u00a0<vmassol>\u00a0vs http://test.xwikiorg-node2.xwikisas.com/xwiki/bin/admin/XWiki/XWikiPreferences?section=XWiki.InstalledExtensions&search=8.2.1&repo=installed&force=1&srid=1OH5c9hQ  \n11:26\u00a0<tmortagne>\u00a0and something prevented node1 to receive the information  \n11:26\u00a0<vmassol>\u00a0yes this is what we noticed with the UI issues too  \n11:27\u00a0<faichelbaum>\u00a0vmassol: that did the trick (also had to update the nginx conf due to the proxy\\_pass sending encoded URI ;)  \n11:28\u00a0<vmassol>\u00a0what could have happened  \n11:28\u00a0<vmassol>\u00a0is indeed that only 1 node was up  \n11:28\u00a0<vmassol>\u00a0I need to check the process we wrote don  \n11:28\u00a0<vmassol>\u00a0I need to check the process we wrote down  \n11:28\u00a0<vmassol>\u00a0(with Kevin)  \n11:29\u00a0<tmortagne>\u00a0it's ok to have only one node up during upgrade but in that case the permanent dire should be synched by hand before starting the second node then  \n11:36\u00a0<vmassol>\u00a0FTR apparenty my revapi changes of last week are not working for platform, I'm on it  \n11:36\u00a0<vmassol>\u00a0(that's whay xwiki-platform-extension-script is failing to build)  \n11:38\u00a0<vmassol>\u00a0ah no  \n11:38\u00a0<vmassol>\u00a0it's a real issue :)  \n11:38\u00a0<vmassol>\u00a0tmortagne: could you check it out?  \n11:38\u00a0<tmortagne>\u00a0what is ?  \n11:39\u00a0<vmassol>\u00a0tmortagne: http://ci.xwiki.org/job/xwiki-platform\\_Sonar/968/consoleFull  \n11:40\u00a0<tmortagne>\u00a0vmassol: ExtensionId is in commons and revapi is already setup for this since a long time  \n11:41\u00a0<vmassol>\u00a0I don't understand  \n11:41\u00a0<vmassol>\u00a0you mean we lost a config param for revapi?  \n11:41\u00a0<tmortagne>\u00a0revapi is complaining about a xwiki-commons class in the platform build  \n11:42\u00a0<tmortagne>\u00a0it was not doing that before  \n11:42\u00a0<vmassol>\u00a0need to remember about that  \n11:43\u00a0<vmassol>\u00a0checking something  \n11:43\u00a0<vmassol>\u00a0ah yes found it  \n11:44\u00a0<vmassol>\u00a0I removed too much  \n11:44\u00a0<vmassol>\u00a0https://github.com/xwiki/xwiki-platform/commit/6c21fe9da8d13d3ca52a8bb1b103f026975ec0dc#diff-f7d9f26837a9903e7c4befe7db15b03fL190  \n12:07\u00a0<msmeria>\u00a0has quit  \n12:11\u00a0<vmassol>\u00a0mflorea: should we send an email to postpone the release by 1 day? Will you be finished by today EOD?  \n12:26\u00a0<msmeria>\u00a0has joined #xwiki  \n13:00\u00a0<msmeria1>\u00a0has joined #xwiki  \n13:03\u00a0<msmeria>\u00a0has quit  \n13:20\u00a0<mflorea>\u00a0vmassol: I'm trying to finish today. Even if I don't finish everything, I can merge what I have and finish the rest for the final version this week.  \n13:21\u00a0<vmassol>\u00a0ok so let's make sure we start the release tomorrow monring  \n13:21\u00a0<vmassol>\u00a0\\*morning  \n13:21\u00a0<vmassol>\u00a0I'll send a mail  \n14:00\u00a0<Marie-Odile>\u00a0has joined #xwiki  \n14:07\u00a0<msmeria>\u00a0has joined #xwiki  \n14:09\u00a0<msmeria1>\u00a0has quit  \n15:57\u00a0<chaas>\u00a0has joined #xwiki  \n15:58\u00a0<chaas>\u00a0has quit  \n15:58\u00a0<chaas>\u00a0has joined #xwiki  \n15:58\u00a0<chaas>\u00a0is now known as <Signum>  \n16:03\u00a0<acotiuga>\u00a0has quit  \n16:33\u00a0<tarmacx>\u00a0has joined #xwiki  \n16:37\u00a0<Marie-Odile>\u00a0has left #xwiki  \n17:01\u00a0<msmeria>\u00a0has quit  \n17:49\u00a0<KermitTheFragger>\u00a0has quit  \n18:04\u00a0<mflorea>\u00a0has quit  \n18:38\u00a0<mflorea>\u00a0has joined #xwiki  \n18:54\u00a0<sdumitriu1>\u00a0has quit  \n19:07\u00a0<sgc072>\u00a0has joined #xwiki  \n20:09\u00a0<Slashman>\u00a0has quit  \n20:15\u00a0<sgc\\_072>\u00a0has joined #xwiki  \n20:18\u00a0<sgc072>\u00a0has quit  \n20:26\u00a0<sgc\\_072>\u00a0has quit  \n20:34\u00a0<Ulydev>\u00a0has joined #xwiki  \n20:57\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n21:09\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n22:00\u00a0<tarmacx>\u00a0has quit  \n22:24\u00a0<tillo>\u00a0has quit  \n22:24\u00a0<tillo\\_>\u00a0is now known as <tillo>  \n22:25\u00a0<tillo\\_>\u00a0has joined #xwiki  \n22:39\u00a0<Ulydev>\u00a0has quit  \n22:57\u00a0<KermitTheFragger>\u00a0has quit\n"}