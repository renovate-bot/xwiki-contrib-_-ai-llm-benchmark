{
  "id": "xwiki:Documentation.UserGuide.Features.DistributionWizard",
  "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard",
  "title": "Distribution Wizard",
  "collection": "Eval_fr",
  "mimetype": "text/markdown",
  "language": "fr",
  "content": "**Contenu** [Installation Propre](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HCleanInstall)\n\t+ [Étape de Bienvenue](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HWelcomeStep)\n\t+ [Utilisateur Admin](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HAdminuser)\n\t+ [Interface Utilisateur](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HUserInterface)\n\t\t- [Étape de Saveur](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HFlavorstep)\n\t\t- [Interface Utilisateur par Défaut](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HDefaultUserInterface)\n\t+ [Étape de Rapport](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HReportstep)\n* [Mise à Jour](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HUpgrade)\n\t+ [Interface Utilisateur](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HUserInterface-1)\n\t\t- [Étape de Saveur](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HFlavorstep-1)\n\t\t- [Interface Utilisateur par Défaut](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HDefaultUserInterface-1)\n\t+ [Étape des Dépendances Orphelines](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HOrphaneddependenciesstep)\n\t+ [Wikis](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HWikis)\n\t+ [Extensions](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HExtensions)\n* [Mise à Jour avec Réparation](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HUpgradewithRepair)\n* [Rejouer l'Installation ou la Mise à Jour](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HReplayInstallorUpgrade)\n* [Mode Automatique](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HAutomaticmode)\n* [Dépannage](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HTroubleshooting)\n\t+ [L'assistant ne s'affiche pas au démarrage](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HThewizardfailstoappearatstartup)\n\t+ [Configurer une nouvelle instance XWiki sans réinstaller](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HSettingupnewXWikiinstancewithoutreinstalling)\n\t+ [Désactiver le démarrage automatique de l'Assistant de Distribution (Depuis 7.1RC1)](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#HDisabletheautomaticstartofDistributionWizard)\nL'Assistant de Distribution (aussi connu sous le nom de DW) est une fonctionnalité qui a plusieurs objectifs :\n\n* Il permet de provisionner un wiki vide en permettant à l'administrateur de sélectionner une [Saveur](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Applications#%23HFlavors) lors de la première exécution de XWiki\n* Il permet de créer un compte utilisateur administrateur dans le wiki.\n* Il permet également de mettre à jour une instance XWiki existante vers une nouvelle version en mettant à jour toutes les Extensions requises.\n\nIl fonctionne en utilisant le Gestionnaire d'Extensions de XWiki pour détecter automatiquement votre version de XWiki afin de rechercher, résoudre, télécharger et installer l'interface utilisateur correspondant à votre version. Il nécessite une connexion Internet pour fonctionner.\n\n# Installation Propre\n\nAprès avoir placé votre WAR XWiki dans votre conteneur de servlets (Tomcat, Jetty, etc.), vous démarrez XWiki. Lors du premier accès à XWiki, cela déclenchera l'Assistant de Distribution et vous pourrez y accéder si le wiki est vide (première installation) ou si vous êtes connecté avec un utilisateur ayant des droits ADMIN (mise à jour). Si l'assistant ne s'affiche pas, consultez la [section de dépannage](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard#troubleshooting).\n\n## Étape de Bienvenue\n\nLors du premier accès, vous serez accueilli par l'Assistant de Distribution, vous offrant les 3 options possibles :\n\n* **Continuer** : en choisissant cette option, vous passerez à l'étape suivante de l'Assistant de Distribution\n* **Plus tard** : DW vous invitera de nouveau après le redémarrage de XWiki ; notez que le bouton Plus tard a une sous-option \"Rejouer les actions enregistrées\" qui a le même effet sur l'Assistant de Distribution, mais au lieu de vous rediriger vers la page demandée initialement, il vous redirige vers l'[Historique des Extensions](https://extensions.xwiki.org/xwiki/bin/view/Extension/Extension%20Manager%20Application#HExtensionHistory) où vous pouvez télécharger et rejouer un fichier d'historique (par exemple, vous pouvez rejouer une installation ou une mise à jour effectuée sur un autre wiki). Si la base de données est vide, vous devrez vous connecter avec l'utilisateur superadmin.\n* **Jamais** : Ignore le DW et vous devrez importer manuellement le XAR\n\n![dw-welcomeStep.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-welcomeStep.png?rev=1.5)\n\n## Utilisateur Admin\n\nDepuis la version 8.0, la première étape vous permet d'enregistrer le propriétaire du wiki. Vous serez ensuite automatiquement enregistré avec ce compte et il sera utilisé pour installer tout ce qui doit être installé.\n\n![dw-firstadminuserStep.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-firstadminuserStep.png?rev=1.1)\n\n## Interface Utilisateur\n\nDepuis la version 7.1, il existe deux modes pour l'Assistant de Distribution : **Saveur** et **Interface Utilisateur par Défaut**.\n\nDepuis la version 9.5, le mode par défaut est **Saveur**.\n\nPour passer en mode **Interface Utilisateur par Défaut**, vous pouvez faire l'une des actions suivantes :\n\n* [depuis 10.2] avoir les propriétés suivantes correctement définies dans le fichier WEB-INF/xwiki.properties de l'application web :\n\t+ distribution.defaultUI : l'ID de l'extension[/version] de l'application à utiliser sur le wiki principal\n\t+ distribution.defaultWikiUI : l'ID de l'extension[/version] de l'application à utiliser sur les autres wikis\n* [depuis 8.4] avoir les propriétés suivantes correctement définies dans le fichier META-INF/extension.xed de l'application web :\n\t+ xwiki.extension.distribution.ui : l'ID de l'extension de l'application à utiliser sur le wiki principal\n\t+ xwiki.extension.distribution.ui.version : la version de l'application à utiliser sur le wiki principal\n\t+ xwiki.extension.distribution.wikiui : l'ID de l'extension de l'application à utiliser sur les autres wikis\n\t+ xwiki.extension.distribution.wikiui.version : la version de l'application à utiliser sur les autres wikis\n* [seulement lorsque aucune extension.xed n'existe] avoir les propriétés suivantes correctement définies dans le fichier META-INF/maven/org.xwiki.enterprise/xwiki-enterprise-web/pom.xml de l'application web :\n\t+ xwiki.extension.distribution.ui : l'ID de l'extension de l'application à utiliser sur le wiki principal\n\t+ xwiki.extension.distribution.ui.version : la version de l'application à utiliser sur le wiki principal\n\t+ xwiki.extension.distribution.wikiui : l'ID de l'extension de l'application à utiliser sur les autres wikis\n\t+ xwiki.extension.distribution.wikiui.version : la version de l'application à utiliser sur les autres wikis\n\nSi vous construisez un WAR personnalisé en utilisant Maven, vous définirez ces propriétés dans le pom de votre projet et laisserez le plugin Extension générer le bon fichier extension.xed.\n\n### Étape de Saveur\n\nS'il n'y a pas d'interface utilisateur par défaut définie comme expliqué ci-dessus, vous aurez l'Étape de Saveur. Une saveur est une collection d'applications selon différents besoins. Vous pouvez avoir une saveur pour une base de connaissances ou un site web public, par exemple.\n\n![dw-flavor-step1.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-flavor-step1.png?rev=1.3)\n\n* Sélectionnez une saveur dans la liste des saveurs.\n* Cliquez sur \"installer la saveur\".![dw-flavor-step2.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-flavor-step2.png?rev=1.2)\n* Vous pouvez également choisir de laisser le wiki vide.![dw-noflavor.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-noflavor.png?rev=1.2)\n* Dans le cas où vous avez sélectionné une saveur, les étapes suivantes sont similaires à celles décrites dans la section précédente (Interface Utilisateur).\n\n### Interface Utilisateur par Défaut\n\nLa première étape vérifiera votre version de XWiki et proposera une version de l'interface utilisateur adaptée à votre version.\n\n* Cliquez sur **Installer** pour installer l'interface utilisateur proposée. Cela résoudra les extensions qui vont être installées.![dw-uiStep.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-uiStep.png?rev=1.2)\n* Cliquez sur le bouton **Continuer**. Cela lancera l'installation réelle des extensions précédemment résolues.![dw-uiStep-installPlan.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-uiStep-installPlan.png?rev=1.2)\n* Vous serez invité à insérer les identifiants de l'administrateur, qui sont **Admin/admin**.![dw-uiStep-login.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-uiStep-login.png?rev=1.2)\n* Après l'installation terminée, vous pouvez cliquer sur le bouton Continuer pour passer à l'étape suivante.\n* Comme il s'agit d'une installation propre, les étapes 2 et 3 sont ignorées.\n\n## Étape de Rapport\n\nDepuis la version 5.4\n\nLa dernière étape affiche tous les changements apportés au wiki.\n\n![dw-report.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-report.png?rev=1.3)\n\n# Mise à Jour\n\nL'Assistant de Distribution vous permet également d'effectuer une mise à jour sans avoir à importer manuellement le fichier XAR.\n\n## Interface Utilisateur\n\nDepuis la version 7.1, il existe deux modes pour l'Assistant de Distribution : **Saveur** et **Interface Utilisateur par Défaut**.\n\nDepuis la version 9.5, le mode par défaut est **Saveur**.\n\nPour passer en mode **Interface Utilisateur par Défaut**, vous pouvez faire l'une des actions suivantes :\n\n* [depuis 10.2] avoir les propriétés suivantes correctement définies dans le fichier WEB-INF/xwiki.properties de l'application web :\n\t+ distribution.defaultUI : l'ID de l'extension[/version] de l'application à utiliser sur le wiki principal\n\t+ distribution.defaultWikiUI : l'ID de l'extension[/version] de l'application à utiliser sur les autres wikis\n* [depuis 8.4] avoir les propriétés suivantes correctement définies dans le fichier META-INF/extension.xed de l'application web :\n\t+ xwiki.extension.distribution.ui : l'ID de l'extension de l'application à utiliser sur le wiki principal\n\t+ xwiki.extension.distribution.ui.version : la version de l'application à utiliser sur le wiki principal\n\t+ xwiki.extension.distribution.wikiui : l'ID de l'extension de l'application à utiliser sur les autres wikis\n\t+ xwiki.extension.distribution.wikiui.version : la version de l'application à utiliser sur les autres wikis\n* [seulement lorsque aucune extension.xed n'existe] avoir les propriétés suivantes correctement définies dans le fichier META-INF/maven/org.xwiki.enterprise/xwiki-enterprise-web/pom.xml de l'application web :\n\t+ xwiki.extension.distribution.ui : l'ID de l'extension de l'application à utiliser sur le wiki principal\n\t+ xwiki.extension.distribution.ui.version : la version de l'application à utiliser sur le wiki principal\n\t+ xwiki.extension.distribution.wikiui : l'ID de l'extension de l'application à utiliser sur les autres wikis\n\t+ xwiki.extension.distribution.wikiui.version : la version de l'application à utiliser sur les autres wikis\n\nSi vous construisez un WAR personnalisé en utilisant Maven, vous définirez ces propriétés dans le pom de votre projet et laisserez le plugin Extension générer le bon fichier extension.xed.\n\n### Étape de Saveur\n\nS'il n'y a pas d'interface utilisateur par défaut définie comme expliqué ci-dessus, vous aurez l'Étape de Saveur. Une saveur est une collection d'applications selon différents besoins. Vous pouvez avoir une saveur pour une base de connaissances ou un site web public, par exemple.\n\n![dw-flavor-step1.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-flavor-step1.png?rev=1.3)\n\n* Sélectionnez une saveur dans la liste des saveurs.\n* Cliquez sur \"installer la saveur\".![dw-flavor-step2.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-flavor-step2.png?rev=1.2)\n* Vous pouvez également choisir de laisser le wiki vide.![dw-noflavor.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-noflavor.png?rev=1.2)\n* Dans le cas où vous avez sélectionné une saveur, les étapes suivantes sont similaires à celles décrites dans la section précédente (Interface Utilisateur).\n\n### Interface Utilisateur par Défaut\n\nLa première étape vérifiera votre version de XWiki et proposera une version de l'interface utilisateur adaptée à votre version.\n\n* Cliquez sur **Installer** pour installer l'interface utilisateur proposée. Cela résoudra les extensions qui vont être installées.![dw-uiStep.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-uiStep.png?rev=1.2)\n* Cliquez sur le bouton **Continuer**. Cela lancera l'installation réelle des extensions précédemment résolues.![dw-uiStep-installPlan.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-uiStep-installPlan.png?rev=1.2)\n* Vous serez invité à insérer les identifiants de l'administrateur, qui sont **Admin/admin**.![dw-uiStep-login.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-uiStep-login.png?rev=1.2)\n* Après l'installation terminée, vous pouvez cliquer sur le bouton Continuer pour passer à l'étape suivante.\n* Comme il s'agit d'une installation propre, les étapes 2 et 3 sont ignorées.\n\n## Étape des Dépendances Orphelines\n\nDepuis la version 11.10\n\n![orphaned.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/orphaned.png?rev=1.1)\n\nCette étape est exécutée juste après l'Étape de Saveur.\n\nSon travail est de s'assurer qu'aucune dépendance orpheline (extension installée en tant que dépendance mais qui n'a plus de dépendance arrière) ne reste dans les extensions installées. L'étape propose de désinstaller celles qui sont invalides par défaut et de faire des autres des extensions de premier niveau (c'est-à-dire prises en compte par la tâche de mise à jour).\n\n## Wikis\n\nDepuis la version 5.3 et seulement s'il y a une interface utilisateur par défaut configurée.\n\nL'Assistant de Distribution liste tous les wikis existants avec la version recommandée de l'interface utilisateur qui doit être installée afin de mettre à jour l'ensemble par défaut des pages du wiki.\n\n![dw-wikisStep.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-wikisStep.png?rev=1.3)\n\n## Extensions\n\n![dw-extensionsStep-checkForUpdates.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-extensionsStep-checkForUpdates.png?rev=1.2)\n\nDans la dernière étape, vous pouvez mettre à jour les extensions que vous avez peut-être installées sur vos wikis. Si vous êtes sur un sous-wiki, vous ne pouvez vérifier les mises à jour que pour les extensions installées sur ce sous-wiki. Sur le wiki principal, les administrateurs globaux peuvent choisir entre :\n\n* calculer le plan de mise à jour uniquement pour le wiki principal + l'espace de noms global\n* calculer le plan de mise à jour pour l'ensemble de la ferme (tous les wikis + l'espace de noms global)\n\nLa première option est adaptée lorsque chaque wiki de la ferme est géré par une entité différente tandis que la deuxième option est adaptée lorsque la ferme est gérée par une seule entité. Évidemment, calculer le plan de mise à jour pour l'ensemble de la ferme prend plus de temps (avec le nombre de wikis) que de calculer le plan de mise à jour uniquement pour le wiki principal.\n\n![dw-extensionsStep-computingUpgradePlan.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/DistributionWizard/dw-extensionsStep-computingUpgradePlan.png?rev=1.2)\n\nAprès que le plan de mise à jour soit calculé, il y a deux catégories d'extensions listées, comme vous pouvez le voir sur l'image ci-dessous :\n\n"
}