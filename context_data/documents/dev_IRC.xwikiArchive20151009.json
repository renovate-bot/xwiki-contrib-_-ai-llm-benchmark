{"id": "dev:IRC.xwikiArchive20151009", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20151009", "title": "IRC Archive for channel #xwiki on 09 October 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Denis1>\u00a0has joined #xwiki  \n06:04\u00a0<Denis>\u00a0has quit  \n06:53\u00a0<zzeroo>\u00a0has joined #xwiki  \n07:16\u00a0<Ramona>\u00a0has joined #xwiki  \n07:44\u00a0<woshilapin>\u00a0has quit  \n07:54\u00a0<woshilapin>\u00a0has joined #xwiki  \n07:58\u00a0<woshilapin>\u00a0has quit  \n08:00\u00a0<sdumitriu>\u00a0has quit  \n08:04\u00a0<msmeria>\u00a0has joined #xwiki  \n08:11\u00a0<vmassol>\u00a0has joined #xwiki  \n08:16\u00a0<sdumitriu>\u00a0has joined #xwiki  \n08:35\u00a0<zzeroo>\u00a0has quit  \n08:49\u00a0<vmassol>\u00a0has quit  \n09:00\u00a0<KermitTheFragger>\u00a0has quit  \n09:03\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:04\u00a0<zzeroo>\u00a0has joined #xwiki  \n09:05\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:25\u00a0<spawn57>\u00a0has joined #xwiki  \n09:28\u00a0<Ramona2>\u00a0has joined #xwiki  \n09:28\u00a0<Ramona>\u00a0has quit  \n09:28\u00a0<cjd>\u00a0has joined #xwiki  \n09:38\u00a0<woshilapin>\u00a0has joined #xwiki  \n10:16\u00a0<spawn57>\u00a0are there any replacements for the methods doc.getContentOfSection and doc.updateDocumentSection?  \n10:21\u00a0<tmortagne>\u00a0spawn57: why do you want a replacement ? they don't seems to be deprecated  \n10:23\u00a0<spawn57>\u00a0I'm trying to create a document by copying a template and replacing some placeholder content.  \n10:23\u00a0<spawn57>\u00a0replacing content in a specific section seems better than replacing it in the whole document...  \n10:31\u00a0<tmortagne>\u00a0spawn57: I still don't understand why you are searching for some new version of doc.getContentOfSection and doc.updateDocumentSection, again they are not deprecated so you can use them  \n10:32\u00a0<spawn57>\u00a0oh.  \n10:33\u00a0<spawn57>\u00a0in the template, I have a section where I add placeholder content. \u00a0e.g. =Section 2= <content goes here> ..and I have a script where I take the template and replace the content in section 2 with some data from \u00a0I got from JIRA.  \n10:35\u00a0<spawn57>\u00a0Also I don't see doc.getContentOfSection in the scripting documentation anymore ... http://platform.xwiki.org/xwiki/bin/view/ScriptingDocumentation/?url=http:%2F%2Fnexus.xwiki.org%2Fnexus%2Fservice%2Flocal%2Frepositories%2Fpublic%2Farchive%2Forg%2Fxwiki%2Fplatform%2Fxwiki-platform-oldcore%2F7.1.2%2Fxwiki-platform-oldcore-7.1.2-javadoc.jar%2F!%2Fcom%2Fxpn%2Fxwiki%2Fapi%2FDocument.html  \n10:36\u00a0<tmortagne>\u00a0Those methods are in protected API, not public scripting API. Where did you saw reference of them ?  \n10:36\u00a0<tmortagne>\u00a0(ie.e they are in XWikiDocument and not api.Document)  \n10:37\u00a0<tmortagne>\u00a0you can use them if you have programming right  \n10:37\u00a0<Slashman>\u00a0has joined #xwiki  \n10:37\u00a0<tmortagne>\u00a0the only alternative as far as I can see is to get the document XDOM, search for the SectionBlock, modify it and then call setContent(XDOM)  \n10:44\u00a0<spawn57>\u00a0I see  \n10:44\u00a0<spawn57>\u00a0i saw'em here http://nexus.xwiki.org/nexus/service/local/repositories/releases/archive/org/xwiki/platform/xwiki-platform-oldcore/5.1/xwiki-platform-oldcore-5.1-javadoc.jar/!/com/xpn/xwiki/api/DocumentSection.html#DocumentSection(int, int, java.lang.String, java.lang.String)  \n10:44\u00a0<spawn57>\u00a0sorry, I saw them here http://nexus.xwiki.org/nexus/service/local/repositories/releases/archive/org/xwiki/platform/xwiki-platform-oldcore/5.1/xwiki-platform-oldcore-5.1-javadoc.jar/!/com/xpn/xwiki/doc/XWikiDocument.html#getContentOfSection(int)  \n10:46\u00a0<tmortagne>\u00a0you can access XWikiDocument instance using $doc.document  \n10:46\u00a0<tmortagne>\u00a0spawn57  \n10:46\u00a0<spawn57>\u00a0ah  \n10:46\u00a0<spawn57>\u00a0let me try that  \n10:47\u00a0<tmortagne>\u00a0see http://platform.xwiki.org/xwiki/bin/view/ScriptingDocumentation/?url=http:%2F%2Fnexus.xwiki.org%2Fnexus%2Fservice%2Flocal%2Frepositories%2Fpublic%2Farchive%2Forg%2Fxwiki%2Fplatform%2Fxwiki-platform-oldcore%2F7.1.2%2Fxwiki-platform-oldcore-7.1.2-javadoc.jar%2F!%2Fcom%2Fxpn%2Fxwiki%2Fapi%2FDocument.html%23getDocument%28%29  \n10:47\u00a0<tmortagne>\u00a0if you don't have the right to use it you will get null  \n10:48\u00a0<spawn57>\u00a0..I'm coding in groovy atm  \n10:49\u00a0<spawn57>\u00a0dammit.  \n10:49\u00a0<spawn57>\u00a0doc.getDocument is returning null.  \n10:51\u00a0<tmortagne>\u00a0it's impossible to not have programming right in groovy  \n10:51\u00a0<mflorea>\u00a0has joined #xwiki  \n10:51\u00a0<tmortagne>\u00a0otherwise it would not even execute the Groovy code  \n10:52\u00a0<tmortagne>\u00a0doc.getDocument() will give you the XWikiDocument for sure  \n10:56\u00a0<spawn57>\u00a0let me try again  \n10:57\u00a0<tmortagne>\u00a0mflorea: Hi  \n10:58\u00a0<tmortagne>\u00a0I added a comment to your last commit about Solr  \n10:58\u00a0<mflorea>\u00a0let me see  \n10:59\u00a0<mflorea>\u00a0indeed, I'll remove it  \n10:59\u00a0<spawn57>\u00a0ah, I got it!  \n10:59\u00a0<mflorea>\u00a0thanks tmortagne  \n10:59\u00a0<spawn57>\u00a0thanks tmortagne  \n10:59\u00a0<tmortagne>\u00a0so many thanks :)  \n11:00\u00a0<mflorea>\u00a0:)  \n11:05\u00a0<spawn57>\u00a0tmortagne: got my proof of concept script working. \u00a0I know what to do now. \u00a0Thanks again!  \n11:07\u00a0<tmortagne>\u00a0spawn57: if you end with something that could be useful to other would be great to put it on http://extensions.xwiki.org, would be just a snippet showing how to manipulate sections  \n11:07\u00a0<spawn57>\u00a0how do I submit it?  \n11:08\u00a0<spawn57>\u00a0nvm, I read the site and I figured out how to sumbit it really quickly  \n11:16\u00a0<spawn57>\u00a0have a look  \n11:18\u00a0<tmortagne>\u00a0spawn57: great thanks :)  \n11:18\u00a0<spawn57>\u00a0np  \n11:24\u00a0<woshilapin>\u00a0has quit  \n11:47\u00a0<woshilapin>\u00a0has joined #xwiki  \n12:10\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:28\u00a0<spawn57>\u00a0has quit  \n12:31\u00a0<cjd>\u00a0tmortagne: do you know of anything which might cause .xar imports to fail (not import XWikiPreferences) on 6.0 but fixed in 6.4.4 ?  \n12:34\u00a0<zzeroo>\u00a0save  \n12:35\u00a0<zzeroo>\u00a0has quit  \n12:35\u00a0<zzeroo>\u00a0has joined #xwiki  \n12:36\u00a0<zzeroo>\u00a0has quit  \n12:36\u00a0<zzeroo>\u00a0has joined #xwiki  \n12:57\u00a0<evalica>\u00a0has joined #xwiki  \n13:14\u00a0<tmortagne>\u00a0cjd: did you selected only part of the XAR for import ?  \n13:14\u00a0<tmortagne>\u00a0hmm wait checking something  \n13:15\u00a0<tmortagne>\u00a0yep what caused most of the import related bugs is handling of partial import but I'm pretty sure a few other bugs have been fixed between 6.0 and 6.4.4  \n13:16\u00a0<tmortagne>\u00a0if the question is \"is it possible there is bugs in 6.0\" then the answer is definitely yes  \n13:16\u00a0<tmortagne>\u00a0trying to list them so that you can look at them  \n13:20\u00a0<tmortagne>\u00a0if what is failing is a class that already existed in the wiki then there is a also a few bugs that have been fixed in the store about property type auto refactoring  \n13:23\u00a0<tmortagne>\u00a0cjd: http://jira.xwiki.org/issues/?jql=project%20%3D%20XWIKI%20AND%20issuetype%20%3D%20Bug%20AND%20fixVersion%20in%20%28%226.2.8%22%2C%20%226.3.1%22%2C%20%226.4.6%22%2C%20%226.0.1%22%2C%20%226.1%22%2C%20%226.1-milestone-1%22%2C%20%226.1-milestone-2%22%2C%20%226.1-rc-1%22%2C%20%226.2%22%2C%20%226.2-milestone-1%22%2C%20%226.2-milestone-2%22%2C%20%226.2-rc-1%22%2C%20%226.2.1%22%2C%20%226.2.2%22%2C%20%226.2.3%22%2C%20%226.2.4%22%2C%20%226.2.5%22%2C%20  \n13:58\u00a0<tmortagne>\u00a0mflorea: most of the currently failing test are caused my java.lang.ClassNotFoundException: solr.DataImportHandler (and prevent a lot of other tests to run)  \n13:59\u00a0<mflorea>\u00a0I'm going to commit, I was debugging some other issue with Solr  \n13:59\u00a0<tmortagne>\u00a0ok  \n13:59\u00a0<tmortagne>\u00a0s/my/by/  \n14:01\u00a0<mflorea>\u00a0done  \n14:12\u00a0<cjd>\u00a0tmortagne: sorry was at lunch, thanks for the link although it seems your irc message was truncated  \n14:13\u00a0<tmortagne>\u00a0cjd: it just a filter on search query \"xar\" and module \"Filter XAR\" and \"Old core\"  \n14:13\u00a0<cjd>\u00a0anyway I've isolated the culpret, it's xwikipreferences  \n14:14\u00a0<tmortagne>\u00a0what happen exactly ?  \n14:18\u00a0<cjd>\u00a0It says \"error importing\" and yet shows no documents skipped and no documents with error  \n14:18\u00a0<cjd>\u00a0XWikiPreferences is left unaltered  \n14:18\u00a0<cjd>\u00a0\\*also no documents imported successfully  \n14:20\u00a0<gsmeria>\u00a0has joined #xwiki  \n14:22\u00a0<cjd>\u00a0nothing is written in the log  \n14:29\u00a0<Ramona2>\u00a0has quit  \n14:41\u00a0<msmeria>\u00a0has quit  \n14:42\u00a0<tmortagne>\u00a0yes there is no real log in 6.0, it's hard to get details when it's failing during the XAR reading  \n14:42\u00a0<cjd>\u00a0hm mqybe I did something bad to my wiki because I cannot even import XWikiPreferences from the xwiki-enterprise-ui-mainwiki-all-6.0.1.xar  \n14:43\u00a0<tmortagne>\u00a0you just just select it alone it's probably because of partial import bugs I told you about  \n14:43\u00a0<cjd>\u00a0ok how about making a .xar with only that .xml file in it ?  \n14:43\u00a0<cjd>\u00a0is that a good way to test ?  \n14:43\u00a0<tmortagne>\u00a0yep  \n14:43\u00a0<cjd>\u00a0ok cool  \n14:43\u00a0<tmortagne>\u00a0you don't even need to modify the package.xml file  \n14:44\u00a0<tmortagne>\u00a0juste remove the pages you don't want  \n14:44\u00a0<cjd>\u00a0I get the same error from a .xar which is dumped from another wiki, a .xar which is built using maven and a .xar which is built using my nodejs tool  \n14:45\u00a0<cjd>\u00a0ftr I did not try the nodejs built one first, lest something in my code corrupts the db  \n14:46\u00a0<tmortagne>\u00a0in any case if it's working in 6.4.4 it's definitely a bug  \n14:46\u00a0<tmortagne>\u00a0note that as a workaround you can use old packager plugin to import in 6.0  \n14:47\u00a0<tmortagne>\u00a0looks at property xwiki.action.import.xar.usewikistream property in xwiki.cfg  \n14:47\u00a0<cjd>\u00a0ahh yeah, good thinking  \n14:48\u00a0<tmortagne>\u00a0we had to start putting the new importer as default at some point but I made sure to make as easy as possible to keep using the old one just in case  \n14:49\u00a0<cjd>\u00a0ftr I'm impressed with how it works when you import/export \"deprecated properties\" IE: objects without a corrisponding class  \n14:51\u00a0<cjd>\u00a0Importing xwiki-enterprise-ui-mainwiki-all-6.0.1.xar: Import successful  \n14:51\u00a0<cjd>\u00a0hmm ok  \n15:00\u00a0<Enygma`>\u00a0has quit  \n15:10\u00a0<woshilapin>\u00a0has quit  \n15:27\u00a0<cjd>\u00a0well if it was any surprise, indeed with the old package plugin, the import works well  \n15:27\u00a0<cjd>\u00a0works with a xar w/ just XWikiPreferences (and classes on which it depends), a xar with everything -> fail  \n15:29\u00a0<cjd>\u00a0I could write a bug but I have really no clue what I'd say  \n15:31\u00a0<tmortagne>\u00a0cjd: idn't you said it was working on 6.4.4 ?  \n15:31\u00a0<cjd>\u00a0correct  \n15:31\u00a0<cjd>\u00a0but I don't know just which version it started to work on obviously  \n15:32\u00a0<tmortagne>\u00a0sure but we don't support anything older that 6.4.x branch anymore so if you create a jira issue it will be closed as cannot reproduce  \n15:32\u00a0<cjd>\u00a0music to my ears  \n15:33\u00a0<cjd>\u00a0Creating bugs for difficult to reproduce stuff that which requires heavy investigation != fun  \n15:35\u00a0<tmortagne>\u00a0cjd: in your case creating the jira issue could not have been very hard: you just explain what you see and how you get there and it seems easy to reproduce in your case, you could have provided the XAR to test with  \n15:36\u00a0<tmortagne>\u00a0s/could/would/  \n15:36\u00a0<tmortagne>\u00a0most of the time it's more important to describe how to reproduce an issue that provide a partial analysis of it  \n15:37\u00a0<cjd>\u00a0/nod  \n15:46\u00a0<tmortagne>\u00a0has quit  \n16:25\u00a0<benedict>\u00a0has quit  \n16:36\u00a0<Ramona>\u00a0has joined #xwiki  \n16:41\u00a0<ansuz>\u00a0has quit  \n16:42\u00a0<gsmeria>\u00a0has quit  \n16:52\u00a0<OSIMasson>\u00a0has joined #xwiki  \n17:00\u00a0<gsmeria>\u00a0has joined #xwiki  \n17:00\u00a0<gsmeria>\u00a0has joined #xwiki  \n17:01\u00a0<gsmeria>\u00a0has left #xwiki  \n17:05\u00a0<Enygma`>\u00a0has joined #xwiki  \n17:09\u00a0<mflorea>\u00a0has quit  \n17:15\u00a0<OSIMasson>\u00a0has quit  \n17:22\u00a0<evalica>\u00a0has quit  \n17:30\u00a0<KermitTheFragger>\u00a0has quit  \n17:45\u00a0<woshilapin>\u00a0has joined #xwiki  \n17:51\u00a0<Enygma`>\u00a0has quit  \n18:05\u00a0<woshilapin>\u00a0has quit  \n18:22\u00a0<OSIMasson>\u00a0has joined #xwiki  \n18:30\u00a0<vmassol>\u00a0has joined #xwiki  \n18:40\u00a0<zzeroo>\u00a0has quit  \n18:51\u00a0<cjd>\u00a0has quit  \n18:57\u00a0<vmassol>\u00a0has quit  \n19:10\u00a0<Ramona>\u00a0has quit  \n19:10\u00a0<zzeroo>\u00a0has joined #xwiki  \n19:34\u00a0<cjd>\u00a0has joined #xwiki  \n19:36\u00a0<OSIMasson>\u00a0has quit  \n19:54\u00a0<abusenius>\u00a0has joined #xwiki  \n20:01\u00a0<zzeroo>\u00a0has quit  \n20:27\u00a0<OSIMasson>\u00a0has joined #xwiki  \n20:28\u00a0<Slashman>\u00a0has quit  \n20:35\u00a0<OSIMasson>\u00a0has quit  \n20:41\u00a0<Slashman>\u00a0has joined #xwiki  \n21:37\u00a0<OSIMasson>\u00a0has joined #xwiki  \n21:45\u00a0<OSIMasson>\u00a0has quit  \n21:45\u00a0<OSIMasson>\u00a0has joined #xwiki  \n22:01\u00a0<Slashman>\u00a0has quit  \n22:54\u00a0<woshilapin>\u00a0has joined #xwiki\n"}