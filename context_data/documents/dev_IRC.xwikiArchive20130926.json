{"id": "dev:IRC.xwikiArchive20130926", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130926", "title": "IRC Archive for channel #xwiki on 26 September 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Denis>\u00a0has quit  \n02:25\u00a0<Slashman>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n06:02\u00a0<Denis>\u00a0has quit  \n06:02\u00a0<Denis>\u00a0has joined #xwiki  \n07:18\u00a0<Denis>\u00a0has quit  \n08:03\u00a0<Denis>\u00a0has joined #xwiki  \n08:11\u00a0<evalica>\u00a0has joined #xwiki  \n08:14\u00a0<vmassol>\u00a0has joined #xwiki  \n08:38\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:52\u00a0<sburjan>\u00a0has joined #xwiki  \n09:35\u00a0<cjd>\u00a0has quit  \n09:45\u00a0<vmassol>\u00a0hmm some test bugs on ci:  \n09:45\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-faq-test-tests/4430/testReport/junit/org.xwiki.faq.test.ui/FAQTest/testFAQ/  \n09:45\u00a0<vmassol>\u00a0Caused by: org.xwiki.component.manager.ComponentLookupException: Can't find descriptor for the component [role = [interface org.xwiki.rendering.renderer.BlockRenderer] hint = [annotatedxhtml/1.0]]  \n09:45\u00a0<vmassol>\u00a0strange  \n09:47\u00a0<cjd>\u00a0has joined #xwiki  \n09:50\u00a0<mflorea>\u00a0has joined #xwiki  \n09:52\u00a0<sburjan>\u00a0vmassol: will there be a release today ? or it's only BFD ?  \n09:53\u00a0<vmassol>\u00a0mflorea just arrived, let's ask him :)  \n09:53\u00a0<mflorea>\u00a0well, is CI in a good shape?  \n09:54\u00a0<vmassol>\u00a0I think so, it's rebuilding now. That said I just accepted a PR and it hasn't been rebuilt yet with that PR  \n09:54\u00a0<mflorea>\u00a0I see platform build has failed  \n09:54\u00a0<vmassol>\u00a0yes  \n09:55\u00a0<vmassol>\u00a0indeed  \n09:55\u00a0<vmassol>\u00a0I sent the info this morning on IRC  \n09:55\u00a0<vmassol>\u00a0I don't know yet the problrme,its strange  \n09:55\u00a0<vmassol>\u00a0some CM lookup failing  \n09:55\u00a0<vmassol>\u00a0I'm also worried about the unstability that could result from the BFD  \n09:57\u00a0<vmassol>\u00a0tmortagne: a pity you reverted http://jira.xwiki.org/browse/XWIKI-9438 with a commit message not belonging to XWIKI-5917  \n09:57\u00a0<vmassol>\u00a0also shouldn't the affects be the version after you reverted?  \n09:58\u00a0<vmassol>\u00a0otherwise if the affects is 2.7 then 9438 shouldn't be closed as fixed  \n09:58\u00a0<vmassol>\u00a0if sergiu fixed 9438 even by introducing some error then affects shouldn't be 2.7  \n09:59\u00a0<tmortagne>\u00a0vmassol: teh verion after I reverted is 5.2RC1 and the affact is 5.2RC1, I don't understand what you mean  \n09:59\u00a0<vmassol>\u00a0looking at the wrong one for affects :)  \n09:59\u00a0<tmortagne>\u00a0indeed the RC1 is not listed and I mixed  \n10:00\u00a0<tmortagne>\u00a0as for the commit you have it in http://jira.xwiki.org/browse/XWIKI-5917  \n10:00\u00a0<vmassol>\u00a0yes I know but it's in the wrong issue  \n10:00\u00a0<vmassol>\u00a0since that issue was closed  \n10:01\u00a0<tmortagne>\u00a0it's not the wrong issue, it's the comment git revert put  \n10:01\u00a0<vmassol>\u00a0or if it wasn't fixed at that time (ie if someone uses 3.0M2 and still has the problem) then it needs to be reopened and closed as invalid  \n10:01\u00a0<tmortagne>\u00a0XWIKI-9438 is not about revarting the commit, it's about fixing it  \n10:02\u00a0<vmassol>\u00a0you don't understand  \n10:02\u00a0<vmassol>\u00a09438 says it has reverted the commit  \n10:02\u00a0<vmassol>\u00a0but if you look in the commit tab it's empty  \n10:02\u00a0<vmassol>\u00a0so it's not possible  \n10:02\u00a0<tmortagne>\u00a0again it's the git revert automatic commit message  \n10:02\u00a0<vmassol>\u00a0yes I know but you could have changed that  \n10:02\u00a0<vmassol>\u00a0before pushing it  \n10:02\u00a0<vmassol>\u00a0that's why I said: \"it's a pity\"  \n10:03\u00a0<vmassol>\u00a0now  \n10:03\u00a0<vmassol>\u00a0the real question for me:  \n10:03\u00a0<vmassol>\u00a0what happens if someone uses 3.0M2  \n10:03\u00a0<vmassol>\u00a0does it work or not?  \n10:04\u00a0<vmassol>\u00a0you just said \"that was very wrong\" but you didn't explain why  \n10:04\u00a0<tmortagne>\u00a0I guess if sdumitriu say it's fixed  \n10:04\u00a0<tmortagne>\u00a0see jira.xwiki.org/browse/XWIKI-7993  \n10:04\u00a0<vmassol>\u00a0ok so we have a big regression in 5.2 then  \n10:04\u00a0<tmortagne>\u00a0it is explained why  \n10:06\u00a0<vmassol>\u00a0in summary: we fixed XWIKI-7993 but created a regression on XWIKI-9438  \n10:06\u00a0<vmassol>\u00a0right?  \n10:07\u00a0<tmortagne>\u00a0we fixed a regression that was caused by the fix for XWIKI-5917  \n10:07\u00a0<vmassol>\u00a0sure but we created another regression in exhcange  \n10:08\u00a0<tmortagne>\u00a0yes but I prefer having an important API usable than a feature that is not much used...  \n10:09\u00a0<vmassol>\u00a0sure  \n10:09\u00a0<vmassol>\u00a0but  \n10:09\u00a0<vmassol>\u00a0it means 9438 is a regression and thus a blocker  \n10:09\u00a0<vmassol>\u00a0for 5.2 final  \n10:09\u00a0<vmassol>\u00a0I'm going to try looking into it today  \n10:11\u00a0<vmassol>\u00a0you exchanged a regression from a dev \u00a0POV by a regression from a user POV  \n10:11\u00a0<vmassol>\u00a0so users using 5.2 right now and doing HTML exports  \n10:11\u00a0<vmassol>\u00a0are going to find their images broken  \n10:11\u00a0<vmassol>\u00a0this is pretty bad  \n10:22\u00a0<Inge->\u00a05.2 out?  \n10:23\u00a0<Inge->\u00a0hmm not yet http://main.xwiki.org/xwiki/bin/view/Roadmaps/WebHome  \n10:23\u00a0<vmassol>\u00a0we're releasing RC1 today or tomorrow  \n10:24\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:43\u00a0<vmassol>\u00a0I can reproduce the issue on the FAQ integration test  \n10:43\u00a0<vmassol>\u00a0looking into it  \n10:44\u00a0<vmassol>\u00a0I believe someone has added the need for a new dependency somewhere  \n10:45\u00a0<vmassol>\u00a0indeed for some reason (checking why) the annotated html syntax is now required  \n10:47\u00a0<vmassol>\u00a0mflorea: do you know why wysiwyg-server doesn't have any dep on rendering modules it uses?  \n10:47\u00a0<mflorea>\u00a0because it depends on oldcore?  \n10:47\u00a0<vmassol>\u00a0and?  \n10:47\u00a0<vmassol>\u00a0normally each module needs to add the dep of what it needs  \n10:47\u00a0<vmassol>\u00a0oldcore may not need annotatedxhtml for ex  \n10:48\u00a0<vmassol>\u00a0but you may need it  \n10:48\u00a0<mflorea>\u00a0ok, but this is not new  \n10:48\u00a0<vmassol>\u00a0yes I still don't know what's new  \n10:49\u00a0<mflorea>\u00a0I agree about declaring dependencies that are directly used  \n10:51\u00a0<vmassol>\u00a0comparing with 5.2M2  \n10:53\u00a0<vmassol>\u00a0hmm I've compared the dependencies for faq-tests-test  \n10:53\u00a0<vmassol>\u00a0and there was not dep on annotatedxhtml either in 5.2M2  \n10:53\u00a0<vmassol>\u00a0s/not/no  \n10:53\u00a0<vmassol>\u00a0so the difference is not in the deps  \n10:53\u00a0<vmassol>\u00a0so it must be in what the test uses, something has changed that triggers the use of the wysiwyg  \n10:53\u00a0<vmassol>\u00a0while it wasn't using it before  \n10:54\u00a0<vmassol>\u00a0actually no  \n10:54\u00a0<vmassol>\u00a0it's somewhere in the init  \n10:54\u00a0<vmassol>\u00a0on the first page call it now initializes some wysiwyg code  \n10:54\u00a0<vmassol>\u00a0it probably didn't do this before  \n10:55\u00a0<vmassol>\u00a0I see:  \n10:55\u00a0<vmassol>\u00a02013-09-26 10:54:37,067 [http://localhost:8080/xwiki/bin/view/Main/] ERROR o.x.v.i.DefaultVelocityEngine \u00a0- Left side ($listtool.size($services.workspace.getWorkspaces())) of '>' operation has null value at /templates/menuview.vm[line 12, column 81]  \n10:55\u00a0<vmassol>\u00a02013-09-26 10:54:37,325 [http://localhost:8080/xwiki/bin/view/Main/] ERROR .s.DefaultScriptServiceManager - Failed to lookup script service for role hint [wysiwyg]  \n10:55\u00a0<vmassol>\u00a0org.xwiki.component.manager.ComponentLookupException: Failed to lookup component [org.xwiki.wysiwyg.server.internal.DefaultWysiwygEditorScriptService] identified by [role = [interface org.xwiki.script.service.ScriptService] hint = [wysiwyg]]  \n10:55\u00a0<vmassol>\u00a0so it seems to mean that we now have some workspace-related init that needs wysiwyg services  \n10:57\u00a0<mflorea>\u00a0strange, I don't see what workspaces would have to do with the wysiwyg editor script service  \n10:57\u00a0<gdelhumeau>\u00a0me neither  \n10:57\u00a0<vmassol>\u00a0may not be related to workspaces  \n10:57\u00a0<vmassol>\u00a0checking sources  \n10:58\u00a0<vmassol>\u00a0I see this in contentmenu.vm:  \n10:58\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0#if ($services.wysiwyg.isSyntaxSupported($tdoc.syntax.toIdString()) || $tdoc.syntax.toIdString() == 'xwiki/1.0')  \n10:58\u00a0<vmassol>\u00a0so wysiwyg services are needed on any page load probably  \n10:58\u00a0<vmassol>\u00a0not sure it's good btw since we should be able to work without wysiwyg  \n10:59\u00a0<gdelhumeau>\u00a0the problem is: all templates are in xwiki-platfrom-web  \n10:59\u00a0<vmassol>\u00a0addedby sergiu in XWIKI-8712  \n10:59\u00a0<vmassol>\u00a04.5M1  \n10:59\u00a0<vmassol>\u00a0the requirement on wysiwyg I mean  \n11:00\u00a0<vmassol>\u00a0gdelhumeau: wdym?  \n11:00\u00a0<tmortagne>\u00a0has quit  \n11:03\u00a0<gdelhumeau>\u00a0in contentmenu.vm, there is a check related to wysiwyg. contentmenu.vm is located in \u00a0xwiki-platfrom-web, which should not depend on the wysiwyg module. But how can we add something related to wysiwyg in a template? Should we create new UI Extension Point? Actually, a lot of new Ui Extension Point in all the \\*.vm?  \n11:03\u00a0<msmeria>\u00a0has joined #xwiki  \n11:03\u00a0<vmassol>\u00a0tempalte should not depend on wysiwyg  \n11:04\u00a0<msmeria>\u00a0has quit  \n11:08\u00a0<Denis>\u00a0has quit  \n11:10\u00a0<cjd>\u00a0has left #xwiki  \n11:10\u00a0<cjd>\u00a0has joined #xwiki  \n11:11\u00a0<Denis>\u00a0has joined #xwiki  \n11:19\u00a0<gdelhumeau>\u00a0vmassol: we agree. But how can you handle the wysiwyg in the XWiki UI, then?  \n11:22\u00a0<vmassol>\u00a0well wysiwyg doesn't have to be a template feature  \n11:22\u00a0<vmassol>\u00a0the main role of templates is to be there when there are no pages in the DB  \n11:23\u00a0<vmassol>\u00a0we could decide that UIs needing wysiwyg are located in wiki pages  \n11:23\u00a0<vmassol>\u00a0would that be a problem?  \n11:25\u00a0<vmassol>\u00a0anyway, I still don't know what the problem is ATM for the build  \n11:26\u00a0<vmassol>\u00a0must be some commit done recently  \n11:26\u00a0<vmassol>\u00a0checking CI  \n11:26\u00a0<gdelhumeau>\u00a0I will talk about what I know: workspaces. I need to add the \"home\" menu in the top bar, so I have changed menuview.vm. I don't how to do it without changing the .vm.  \n11:26\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:26\u00a0<vmassol>\u00a0extension points  \n11:26\u00a0<vmassol>\u00a0the menu is supposed to be written only as etxenison poits  \n11:26\u00a0<vmassol>\u00a0I talked to you about this in the past aready, do you remember?  \n11:27\u00a0<vmassol>\u00a0hmm ci is in bad shape, not loading here  \n11:28\u00a0<gdelhumeau>\u00a0ok, so we have to add a lot of extension points  \n11:28\u00a0<vmassol>\u00a0for the top menu it's just 1  \n11:28\u00a0<vmassol>\u00a0(maybe 2)  \n11:30\u00a0<vmassol>\u00a0relates to http://jira.xwiki.org/browse/XWIKI-5379  \n11:31\u00a0<vmassol>\u00a0and http://jira.xwiki.org/browse/XWIKI-6548  \n11:34\u00a0<msmeria>\u00a0has joined #xwiki  \n11:34\u00a0<msmeria>\u00a0hello, devs  \n11:34\u00a0<vmassol>\u00a0so the platform build worked yesterday at 14:55 so some commits after that broke it  \n11:36\u00a0<gdelhumeau>\u00a0vmassol: implementing these JIRAs can be done during a BFD?  \n11:36\u00a0<msmeria>\u00a0I've found a bug yesterday on a 5.2 snapshot: when I search with Solr for content that is not in English I don't get any results  \n11:36\u00a0<msmeria>\u00a0it doesn't reproduce on 5.2m2  \n11:37\u00a0<msmeria>\u00a0I'm going to test again on the latest snapshot now  \n11:37\u00a0<vmassol>\u00a0gdelhumeau: wdym? to rewrite the top menu using uix?  \n11:37\u00a0<gdelhumeau>\u00a0vmassol: yes  \n11:37\u00a0<vmassol>\u00a0this is definitely not some quick things to do nor are there bugs so no, not during BFD :)  \n11:41\u00a0<UCC>\u00a0has joined #xwiki  \n11:53\u00a0<msmeria>\u00a0I couldn't reproduce it on the latest snapshot  \n12:09\u00a0<tmortagne>\u00a0msmeria: ok  \n12:34\u00a0<vmassol>\u00a0so the first call to $services.wysiwyg is indeed in contentmenu.vm:  \n12:34\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0#if ($services.wysiwyg.isSyntaxSupported($tdoc.syntax.toIdString()) || $tdoc.syntax.toIdString() == 'xwiki/1.0')  \n12:37\u00a0<vmassol>\u00a0mflorea: do you know why sdumitriu added this:  \n12:37\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0#if ($services.wysiwyg.isSyntaxSupported($tdoc.syntax.toIdString()) || $tdoc.syntax.toIdString() == 'xwiki/1.0')  \n12:37\u00a0<vmassol>\u00a0why not use the rendering script service instead?  \n12:38\u00a0<vmassol>\u00a0ok than answer is that we don't really have such an api there but that's really a wrong call  \n12:38\u00a0<vmassol>\u00a0s/than/the  \n12:38\u00a0<vmassol>\u00a0ah wait looking at wrong api I think  \n12:39\u00a0<vmassol>\u00a0wel  \n12:39\u00a0<vmassol>\u00a0well  \n12:39\u00a0<vmassol>\u00a0it's not too hard to call getAvailableParserSyntaxes and getAvailableRendererSyntaxes  \n12:40\u00a0<vmassol>\u00a0ok I get it now  \n12:40\u00a0<vmassol>\u00a0the wysiwyg api is more specific, it says which syntax is supported by the wysiwyg  \n12:40\u00a0<vmassol>\u00a0so it's correct  \n12:44\u00a0<vmassol>\u00a0mflorea: I don't understand why there was a change but I'll add the dep on rendering modules in wysiwyg server  \n12:45\u00a0<tmortagne>\u00a0vmassol: what is weird is that not having the WYSIWYG script service should not generate an error, it should just return null  \n12:45\u00a0<vmassol>\u00a0the wysiwyg ss is there  \n12:45\u00a0<vmassol>\u00a0but yes I agree  \n12:46\u00a0<vmassol>\u00a0well it cannot be loaded  \n12:46\u00a0<vmassol>\u00a0so yes it's the same as not being there  \n12:46\u00a0<tmortagne>\u00a0right read too quickly  \n12:46\u00a0<tmortagne>\u00a0no it's not the same actually  \n12:46\u00a0<tmortagne>\u00a0it's normal to fail if the component fail to initialize  \n12:46\u00a0<npst>\u00a0has joined #xwiki  \n12:46\u00a0<vmassol>\u00a0yeah  \n12:46\u00a0<npst>\u00a0hello :)  \n12:47\u00a0<tmortagne>\u00a0it was not visible before because error was never logged  \n12:47\u00a0<tmortagne>\u00a0I doubt there is anything new around dependencies  \n12:47\u00a0<vmassol>\u00a0really?  \n12:47\u00a0<vmassol>\u00a0what changed for the log?  \n12:47\u00a0<npst>\u00a0i just activated monitoring (via the monitor plugin) and am wondering what the last number in each line wuold mean  \n12:47\u00a0<tmortagne>\u00a0but I improved the default script service manager to know when there is a real issue with a script service instead of ignoring evrything  \n12:47\u00a0<tmortagne>\u00a0it use to just catch and ignore everything  \n12:47\u00a0<vmassol>\u00a0ahhh ok  \n12:47\u00a0<vmassol>\u00a0that explains it  \n12:47\u00a0<vmassol>\u00a0:)  \n12:48\u00a0<vmassol>\u00a0ok so introduced the typo that I just fixed, didn't realize it :)  \n12:48\u00a0<tmortagne>\u00a0yep  \n12:48\u00a0<vmassol>\u00a0ok all is explained now  \n12:48\u00a0<vmassol>\u00a0cool  \n12:49\u00a0<vmassol>\u00a0adding missing dep  \n12:49\u00a0<npst>\u00a0as in [...] - MONITOR Main.Pagename view hibernate: 18ms 17  \n12:49\u00a0<npst>\u00a0what's the 17 here  \n12:49\u00a0<vmassol>\u00a0mflorea: do you know why you have all deps a <scope>provided in wysiwyg-server?  \n12:49\u00a0<npst>\u00a0(also, sorry for interrupting)  \n12:49\u00a0<vmassol>\u00a0runtime I would understand but provided?  \n12:50\u00a0<vmassol>\u00a0tmortagne: if you have an idea too?  \n12:50\u00a0<mflorea>\u00a0vmassol: because the wysiwyg generates a war that is merged with the platform web war and those deps are provided by the platform web war  \n12:51\u00a0<vmassol>\u00a0hmm so we need to declare the deps twice?  \n12:51\u00a0<vmassol>\u00a0or actually not declare them in wysiwyg-server  \n12:51\u00a0<vmassol>\u00a0?  \n12:51\u00a0<vmassol>\u00a0something seems wrong  \n12:52\u00a0<vmassol>\u00a0or not optimal rater  \n12:52\u00a0<vmassol>\u00a0\\*rather  \n12:53\u00a0<vmassol>\u00a0hmm wysiwy-server generates a jar actually  \n12:54\u00a0<tmortagne>\u00a0npst: from monitor point of view it's a free description with depends on the module how used monitor plugin API, checking what module would produce that line  \n12:55\u00a0<vmassol>\u00a0the merge is done in enterprise-web btw  \n12:55\u00a0<vmassol>\u00a0but I don't see why you need to prevent inclusion of wysiwyg war deps  \n12:57\u00a0<tmortagne>\u00a0npst: ha no actually it could be the number of time the monitor timer has been called  \n12:57\u00a0<tmortagne>\u00a0in any case it does not give you much technical information  \n12:58\u00a0<npst>\u00a0so it's not likely to tell me what exactly hibernate is doing there  \n12:59\u00a0<npst>\u00a0i'm struggling with several second long freezes every now and then and trying to get to the root of it  \n12:59\u00a0<tmortagne>\u00a0npst: no idea, sorry but would probably have more useful information by enabling hibernate debug log  \n12:59\u00a0<npst>\u00a0yes, that would be my next step then.  \n12:59\u00a0<npst>\u00a0thanks for your help.  \n12:59\u00a0<tmortagne>\u00a0or by using mytop (if that's mysql) to see if something is long there  \n12:59\u00a0<npst>\u00a0oh, and are the sources online somewhere, so i could have checked for the monitor output myself?  \n13:00\u00a0<npst>\u00a0it's oracle  \n13:01\u00a0<npst>\u00a0ah, gotta run, lunch break  \n13:01\u00a0<npst>\u00a0cya later  \n13:02\u00a0<tmortagne>\u00a0npst: https://github.com/xwiki/xwiki-platform/tree/master/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/monitor  \n13:06\u00a0<npst>\u00a0has quit  \n13:22\u00a0<tmortagne>\u00a0has quit  \n13:29\u00a0<evalica>\u00a0has quit  \n13:52\u00a0<vmassol>\u00a0mflorea: ping when you're back  \n13:52\u00a0<mflorea>\u00a0I'm here  \n13:53\u00a0<vmassol>\u00a0I'm still working on fixing the test issue  \n13:53\u00a0<vmassol>\u00a0but I need to understand some things about wysiwyg packaing  \n13:53\u00a0<vmassol>\u00a0packaging  \n13:53\u00a0<vmassol>\u00a0about the provided scope  \n13:54\u00a0<vmassol>\u00a0let me explain what I need  \n13:54\u00a0<vmassol>\u00a0in the packager plugin, I draw a dep on wysiwyg-server  \n13:54\u00a0<vmassol>\u00a0but since its deps are provided it doesn't bring any transitive deps  \n13:55\u00a0<vmassol>\u00a0so even if I add a dep on xwiki-rendering-syntax-annotatedxhtml it won't get added to the generated xwiki instance  \n13:55\u00a0<mflorea>\u00a0I see  \n13:57\u00a0<vmassol>\u00a0first question: should I draw a dep on the wysiwyg WAR instead of on wyswyg-server?  \n13:58\u00a0<vmassol>\u00a0right now I have the various wysiwyg deps added  \n13:58\u00a0<tmortagne>\u00a0has joined #xwiki  \n13:58\u00a0<vmassol>\u00a0see https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-tools/xwiki-platform-tool-packager-plugin/pom.xml  \n13:58\u00a0<vmassol>\u00a0note that even if I depend on the wysiwyg war it won't help  \n13:59\u00a0<vmassol>\u00a0since the deps are not in that war since they're defined as provided  \n13:59\u00a0<vmassol>\u00a0this is what I don't understand  \n13:59\u00a0<vmassol>\u00a0how do you ensure that enteprrise-web has all the deps required by wysiwyg-server (for ex)  \n13:59\u00a0<vmassol>\u00a0?  \n14:01\u00a0<mflorea>\u00a0remove the provided scope and make sure jars are not duplicated when the wars are merged  \n14:01\u00a0<vmassol>\u00a0yep  \n14:01\u00a0<vmassol>\u00a0this is what we do for the rest  \n14:02\u00a0<vmassol>\u00a0we have checks for duplication in enterprise-web  \n14:02\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<groupId>com.ning.maven.plugins</groupId>  \n14:02\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<artifactId>maven-duplicate-finder-plugin</artifactId>  \n14:02\u00a0<mflorea>\u00a0yes, but fails the build, not fix it  \n14:02\u00a0<vmassol>\u00a0it does fail the build  \n14:03\u00a0<vmassol>\u00a0what's also possible  \n14:03\u00a0<mflorea>\u00a0a common issue is with snapshot jars, build locally vs taken from CI, the name is different even if it's the same jar  \n14:04\u00a0<vmassol>\u00a0is to have runtime deps in the wysiwyg modules  \n14:04\u00a0<vmassol>\u00a0but not include them in the wysiwyg war  \n14:04\u00a0<mflorea>\u00a0yes, better, include in the war only the jar we need, because we there's only 2 jars  \n14:05\u00a0<vmassol>\u00a0mflorea: I do'nt remember how we do this btu we have the same issue for platform-web  \n14:05\u00a0<vmassol>\u00a0and enteprrise-web  \n14:05\u00a0<vmassol>\u00a0ah I know  \n14:05\u00a0<vmassol>\u00a0we don't have any deps in platform-web  \n14:05\u00a0<mflorea>\u00a0maven war plugin should support a list of includes  \n14:05\u00a0<vmassol>\u00a0:)  \n14:05\u00a0<vmassol>\u00a0it does  \n14:05\u00a0<vmassol>\u00a0and you can tell it to include transitive deps I think  \n14:05\u00a0<vmassol>\u00a0I'll check  \n14:05\u00a0<vmassol>\u00a0ok trying this  \n14:06\u00a0<mflorea>\u00a0no transitive deps, just wysiwyg-server and wysiwyg-client-shared  \n14:06\u00a0<vmassol>\u00a0I meant  \n14:06\u00a0<vmassol>\u00a0to \\*not\\* include transitive deps  \n14:06\u00a0<vmassol>\u00a0:)  \n14:07\u00a0<mflorea>\u00a0good  \n14:08\u00a0<vmassol>\u00a0@marius: why are there some deps in wysiwyg-war that don't have the provided scope?  \n14:08\u00a0<mflorea>\u00a0so that they are included in the war I think  \n14:09\u00a0<mflorea>\u00a0it's wysiwyg-client-shared and wysiwyg-server  \n14:20\u00a0<ekarlso>\u00a0has quit  \n14:32\u00a0<vmassol>\u00a0mflorea: do you know exactly what we wish to include in the wysiwyg war?  \n14:32\u00a0<vmassol>\u00a0we already have this:  \n14:32\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<packagingExcludes>\\*\\*/sc/\\*\\*,\\*\\*/wysiwyg/WEB-INF/\\*\\*,\\*\\*/gwt-unitCache/\\*\\*</packagingExcludes>  \n14:32\u00a0<vmassol>\u00a0so the idea is to reverse it and use packagingIncludes instead  \n14:33\u00a0<vmassol>\u00a0we currently have 7 deps in wysiwyg-war  \n14:34\u00a0<vmassol>\u00a0I can also exclude all jars that don't have xwiki-platform-wysiwyg in their name if that's easier  \n14:39\u00a0<polx>\u00a0has joined #xwiki  \n14:51\u00a0<tmortagne>\u00a0vmassol: we did had the issue but between XE and XEM not platform and XE and the way we fixed it in XEM was by excluding wikimanager and workspaces dependencies in XEM war  \n14:51\u00a0<mflorea>\u00a0vmassol: only two jars should be incuded, wysiwyg-server and wysiwyg-client-shared  \n14:51\u00a0<mflorea>\u00a0as for resources  \n14:52\u00a0<mflorea>\u00a0we need just resources/js/xwiki/wysiwyg/xwe/\\*  \n14:52\u00a0<tmortagne>\u00a0another possibility is to create an empty war like the platform-web and let others add dependencies on these two jars  \n14:53\u00a0<tmortagne>\u00a0not empty but without jars I mean  \n15:08\u00a0<polx>\u00a0has quit  \n15:20\u00a0<msmeria>\u00a0has quit  \n16:45\u00a0<xwikibot>\u00a0has joined #xwiki  \n16:48\u00a0<vmassol>\u00a0almost there fixing the platform build  \n16:52\u00a0<Denis>\u00a0has quit  \n17:08\u00a0<fmancinelli>\u00a0has joined #xwiki  \n17:18\u00a0<vmassol>\u00a0ok faq test still failing but not more exception in console, debugging  \n17:24\u00a0<vmassol>\u00a0getting closer!  \n17:25\u00a0<vmassol>\u00a0hmm  \n17:25\u00a0<vmassol>\u00a0seems like the translation object is not registered anymore in functional tests for some reason  \n17:26\u00a0<vmassol>\u00a0going to debug that  \n17:27\u00a0<vmassol>\u00a0tmortagne: can you tell me where is the code that registers translations \u00a0in wiki pages at init time?  \n17:28\u00a0<vmassol>\u00a0ah found the module  \n17:28\u00a0<vmassol>\u00a0source-wiki  \n17:28\u00a0<tmortagne>\u00a0xwiki-platform-localization-source-wiki module  \n17:28\u00a0<tmortagne>\u00a0maybe this jar is just not there  \n17:28\u00a0<vmassol>\u00a0checking  \n17:29\u00a0<vmassol>\u00a0it's thre: webapps/xwiki/WEB-INF/lib/xwiki-platform-localization-source-wiki-5.2-SNAPSHOT.jar  \n17:32\u00a0<tmortagne>\u00a0the initialization entry point is org.xwiki.localization.wiki.internal.DocumentTranslationBundleInitializer if you want to debug  \n17:32\u00a0<vmassol>\u00a0yep  \n17:32\u00a0<tmortagne>\u00a0could be a right issue  \n17:32\u00a0<vmassol>\u00a0I'm tracing  \n17:32\u00a0<vmassol>\u00a0it finds the doc  \n17:32\u00a0<vmassol>\u00a0tracing the loading of the content now  \n17:32\u00a0<tmortagne>\u00a0like the author of those document not having admin right  \n17:33\u00a0<vmassol>\u00a0hmm no error  \n17:34\u00a0<vmassol>\u00a0ahah found something  \n17:34\u00a0<vmassol>\u00a0if I'm on http://localhost:8080/xwiki/bin/view/FAQCode/Translations I can see the translations are correct (it's the translation for the applications panel)  \n17:34\u00a0<vmassol>\u00a0hmm if I refresh it's wrong  \n17:35\u00a0<vmassol>\u00a0the translations are lost on a refresh  \n17:36\u00a0<vmassol>\u00a0debugging the call to render()  \n17:37\u00a0<sburjan>\u00a0has quit  \n17:41\u00a0<vmassol>\u00a0hmmm getBundles doesn't have the bundle after a redresh  \n17:45\u00a0<vmassol>\u00a0tmortagne: how does it work since the bundles are stored in the EC? So at each request there's some code that puts the bundles in the new EC?  \n17:46\u00a0<tmortagne>\u00a0vmassol: it depends which bundles, the translation pages associated to a wiki are added in the EC when needed yes  \n17:47\u00a0<tmortagne>\u00a0but the bundled themself are not recreated since they are registered components, what is in the EC is just an ordered list  \n17:51\u00a0<cjd>\u00a0has quit  \n17:56\u00a0<cjd>\u00a0has joined #xwiki  \n18:09\u00a0<fmancinelli>\u00a0has quit  \n18:54\u00a0<tmortagne>\u00a0has quit  \n19:23\u00a0<gdelhumeau>\u00a0has quit  \n19:54\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n19:57\u00a0<mflorea>\u00a0has quit  \n20:15\u00a0<evalica>\u00a0has joined #xwiki  \n20:42\u00a0<fmancinelli>\u00a0has joined #xwiki  \n20:55\u00a0<Enygma`>\u00a0has joined #xwiki  \n21:14\u00a0<UCC>\u00a0has quit  \n21:14\u00a0<UCC>\u00a0has joined #xwiki  \n21:28\u00a0<Enygma`>\u00a0has quit  \n21:38\u00a0<UCC>\u00a0has quit  \n21:45\u00a0<vmassol>\u00a0has quit  \n21:50\u00a0<evalica>\u00a0has quit  \n22:13\u00a0<ekarlso>\u00a0has joined #xwiki  \n22:30\u00a0<fmancinelli>\u00a0has quit  \n23:48\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n23:50\u00a0<sburjan`>\u00a0has quit  \n23:50\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n23:55\u00a0<sburjan`>\u00a0has quit\n"}