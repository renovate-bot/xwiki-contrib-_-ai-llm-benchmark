{"id": "dev:IRC.xwikiArchive20140513", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140513", "title": "IRC Archive for channel #xwiki on 13 May 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has joined #xwiki  \n00:24\u00a0<lucaa>\u00a0has quit  \n00:38\u00a0<vmassol>\u00a0has quit  \n00:40\u00a0<Denis>\u00a0has joined #xwiki  \n00:56\u00a0<Denis>\u00a0has quit  \n01:04\u00a0<vmassol>\u00a0has joined #xwiki  \n01:10\u00a0<Denis>\u00a0has joined #xwiki  \n01:11\u00a0<vmassol>\u00a0has quit  \n01:20\u00a0<Denis>\u00a0has quit  \n01:30\u00a0<Denis>\u00a0has joined #xwiki  \n02:07\u00a0<vmassol>\u00a0has joined #xwiki  \n02:11\u00a0<vmassol>\u00a0has quit  \n03:03\u00a0<Denis>\u00a0has quit  \n03:08\u00a0<vmassol>\u00a0has joined #xwiki  \n03:12\u00a0<vmassol>\u00a0has quit  \n04:08\u00a0<vmassol>\u00a0has joined #xwiki  \n04:13\u00a0<vmassol>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:40\u00a0<Denis>\u00a0has quit  \n05:09\u00a0<vmassol>\u00a0has joined #xwiki  \n05:14\u00a0<vmassol>\u00a0has quit  \n06:10\u00a0<vmassol>\u00a0has joined #xwiki  \n06:14\u00a0<vmassol>\u00a0has quit  \n07:11\u00a0<vmassol>\u00a0has joined #xwiki  \n07:15\u00a0<vmassol>\u00a0has quit  \n08:09\u00a0<vmassol>\u00a0has joined #xwiki  \n08:37\u00a0<msmeria>\u00a0has joined #xwiki  \n08:37\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:43\u00a0<msmeria1>\u00a0has joined #xwiki  \n08:47\u00a0<msmeria1>\u00a0has quit  \n08:48\u00a0<msmeria>\u00a0tmortagne: good morning  \n08:49\u00a0<msmeria>\u00a0do you have any idea what this stack means ? http://pastebin.com/yQ7V2TY2  \n08:49\u00a0<msmeria>\u00a0I get it each time I start xwiki 6.0  \n08:49\u00a0<msmeria>\u00a0doesn't reproduce on 5.4.4  \n08:50\u00a0<cjd>\u00a0has joined #xwiki  \n08:53\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:56\u00a0<Denis1>\u00a0has joined #xwiki  \n08:59\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:02\u00a0<tmortagne>\u00a0msmeria: Hi  \n09:02\u00a0<tmortagne>\u00a0msmeria: well the message is pretty clear to me \"The process cannot access the file because it is being used by another process.\"  \n09:02\u00a0<msmeria>\u00a0tmortagne: hello  \n09:03\u00a0<tmortagne>\u00a0looks like XWiki does not have the right to load the distribution status because the file is locked  \n09:03\u00a0<tmortagne>\u00a0it's the first time I see this kind of message but locking a files is not really linux style  \n09:04\u00a0<msmeria>\u00a0I'm on Windows  \n09:04\u00a0<tmortagne>\u00a0yes I can see that :)  \n09:04\u00a0<tmortagne>\u00a0but I don't know what to tell you, according to the message there is another process than XWiki locking this file  \n09:05\u00a0<msmeria>\u00a0I don't remember seeing this message on rc1, so this must me smth introduced after rc1  \n09:06\u00a0<msmeria>\u00a0does locking those 2 files have any negative impact on xwiki ?  \n09:06\u00a0<msmeria>\u00a0or can it be ignored ?  \n09:06\u00a0<msmeria>\u00a0the wiki seems to be working fine  \n09:07\u00a0<tmortagne>\u00a0according to the stack trace in this case i mean XWiki cannot save the distribution status because of that  \n09:07\u00a0<msmeria>\u00a0then that looks like a bug..  \n09:07\u00a0<tmortagne>\u00a0but that's only when the status already exist so until you find what process is locking this file upgrade won't be very nice  \n09:08\u00a0<tmortagne>\u00a0msmeria: again the error is talking about \"another process\"  \n09:08\u00a0<tmortagne>\u00a0I think there is tool on windows to find which process have a lock on a file  \n09:08\u00a0<tmortagne>\u00a0you could try to check that  \n09:09\u00a0<msmeria>\u00a0ok, I will  \n09:11\u00a0<Denis1>\u00a0has quit  \n09:15\u00a0<lucaa>\u00a0has joined #xwiki  \n09:24\u00a0<lucaa>\u00a0has quit  \n09:52\u00a0<Denis1>\u00a0has joined #xwiki  \n09:56\u00a0<sdumitriu1>\u00a0has quit  \n09:58\u00a0<msmeria>\u00a0tmortagne: hello again  \n09:58\u00a0<msmeria>\u00a0I couldn't find out which process is locking those 2 files  \n09:58\u00a0<msmeria>\u00a0I used http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx  \n09:58\u00a0<msmeria>\u00a0I'm gonna create an issue  \n10:00\u00a0<tmortagne>\u00a0you are testing when XWiki is running ?  \n10:00\u00a0<tmortagne>\u00a0(http://www.emptyloop.com/unlocker/ sounds like a better fit for it)  \n10:01\u00a0<msmeria>\u00a0tmortagne: ok I'll try with Unlocker too  \n10:03\u00a0<tmortagne>\u00a0make sure to when XWiki is running  \n10:03\u00a0<tmortagne>\u00a0so see if XWiki is locking itself despite the error message talking about \"another process\"  \n10:05\u00a0<tmortagne>\u00a0s/so/to/  \n10:07\u00a0<msmeria>\u00a0tmortagne: no luck. I get the same result as with Process Explorer: http://s27.postimg.org/3v22afdtf/Untitled.png  \n10:08\u00a0<msmeria>\u00a0windows says it's not locked, but xwiki says it is locked...  \n10:08\u00a0<tmortagne>\u00a0well this is not an XWiki error so I don't understand, this is a system error  \n10:08\u00a0<tmortagne>\u00a0it's not XWiki saying that  \n10:08\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:08\u00a0<msmeria>\u00a0yes, but those 2 statuses aren't written on disk  \n10:08\u00a0<msmeria>\u00a0that's an xwiki issue  \n10:09\u00a0<msmeria>\u00a0or better said: an issue affecting xwiki :)  \n10:09\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n10:10\u00a0<msmeria>\u00a0so basically I have 2 files with names like this: status.xml5594315961630033960.tmp inside my Temp folder  \n10:10\u00a0<tmortagne>\u00a0I don't understand \"but those 2 statuses aren't written on disk\" then  \n10:10\u00a0<msmeria>\u00a0but they aren't copied to data/jobs/ ...  \n10:10\u00a0<tmortagne>\u00a0so what is locked is status.xml5594315961630033960.tmp then  \n10:10\u00a0<msmeria>\u00a0I mean they are just inside my temp folder and not in my D:\\XWiki\\6.0\\xwiki-enterprise-jetty-hsqldb-6.0 - Copy\\data\\jobs\\status\\distribution folder  \n10:10\u00a0<tmortagne>\u00a0and since XWiki is not able to move it of course it never end up in data/jobs/  \n10:11\u00a0<msmeria>\u00a0yes  \n10:11\u00a0<tmortagne>\u00a0you get an error when XWiki try to move the file  \n10:11\u00a0<tmortagne>\u00a0since it's a move you can't really have it in both places  \n10:11\u00a0<msmeria>\u00a0I thought you knew that from the error message  \n10:11\u00a0<tmortagne>\u00a0yes and I told you it was a move  \n10:12\u00a0<tmortagne>\u00a0but I did not know if the target or the source was locked  \n10:12\u00a0<tmortagne>\u00a0the error message does not say that  \n10:12\u00a0<tmortagne>\u00a0it's just saying that one is  \n10:13\u00a0<msmeria>\u00a0yes, the one from temp is  \n10:13\u00a0<tmortagne>\u00a0checking the code doing the move but looks like the error is simply wrong and it's not \"another process locking the file\"  \n10:13\u00a0<msmeria>\u00a0yes that's also misleading  \n10:14\u00a0<msmeria>\u00a0as I already said: on 5.4.4 this issue doesn't reproduce  \n10:14\u00a0<tmortagne>\u00a0I think I know what Windows does not like  \n10:15\u00a0<tmortagne>\u00a0could you create an issue with what you have ?  \n10:15\u00a0<msmeria>\u00a0yes  \n10:15\u00a0<tmortagne>\u00a0I will commit something so that you can test a snapshot  \n10:15\u00a0<msmeria>\u00a0do you want me to assign it to you ?  \n10:15\u00a0<msmeria>\u00a0ok  \n10:15\u00a0<tmortagne>\u00a0sure  \n10:16\u00a0<tmortagne>\u00a0by the way you should reproduce the same issue in 5.4.5-SNAPSHOT  \n10:18\u00a0<gdelhumeau>\u00a0has quit  \n10:30\u00a0<lucaa>\u00a0has joined #xwiki  \n10:34\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:38\u00a0<tmortagne>\u00a0msmeria: would be great if you could test with last jar on http://maven.xwiki.org/snapshots/org/xwiki/commons/xwiki-commons-job/6.0.1-SNAPSHOT/  \n10:40\u00a0<msmeria>\u00a0tmortagne: you mean this one: http://maven.xwiki.org/snapshots/org/xwiki/commons/xwiki-commons-job/6.0.1-SNAPSHOT/xwiki-commons-job-6.0.1-20140513.083644-2.jar ?  \n10:41\u00a0<tmortagne>\u00a0yes  \n10:42\u00a0<tmortagne>\u00a0(in your 6.0 instance)  \n10:43\u00a0<msmeria>\u00a0testing now  \n10:44\u00a0<msmeria>\u00a0tmortagne: different error: http://pastebin.com/am5UTSS5  \n10:44\u00a0<msmeria>\u00a0but  \n10:45\u00a0<msmeria>\u00a0the 2 files are in their folders  \n10:45\u00a0<tmortagne>\u00a0data\\jobs\\status\\distribution\\status.xml exist and is not empty ?  \n10:45\u00a0<msmeria>\u00a0yes  \n10:45\u00a0<msmeria>\u00a0and data/jobs/solr/indexer/status.xml  \n10:45\u00a0<tmortagne>\u00a0I don't understand why XWiki would not have right to read it  \n10:46\u00a0<tmortagne>\u00a0that's what the error is saying  \n10:46\u00a0<tmortagne>\u00a0it created that file...  \n10:48\u00a0<tmortagne>\u00a0I don't have much idea here, the error does not make any sense  \n10:49\u00a0<msmeria>\u00a0tmortagne: so this happened just the first time I started the server  \n10:49\u00a0<msmeria>\u00a0after a restart I don't get the error anymore  \n10:50\u00a0<tmortagne>\u00a0the only difference I can think of is that this file does not exist the first time  \n10:50\u00a0<tmortagne>\u00a0but that's not what the error message is talking about and the code test if the file exist before trying to load it  \n10:54\u00a0<tmortagne>\u00a0msmeria: you can reproduce it all the time by deleting the file and restarting ?  \n10:54\u00a0<tmortagne>\u00a0data\\jobs\\status\\distribution\\status.xml for example  \n10:54\u00a0<msmeria>\u00a0tmortagne: testing  \n10:57\u00a0<gdelhumeau\\_>\u00a0has joined #xwiki  \n10:57\u00a0<gdelhumeau>\u00a0has quit  \n10:58\u00a0<msmeria>\u00a0tmortagne: that seems to have been a false alarm  \n10:58\u00a0<msmeria>\u00a0I've tested on a new xwiki 6.0 with your jar and I don't get that error at all  \n10:58\u00a0<tmortagne>\u00a0msmeria: maybe some rare race condition then  \n10:59\u00a0<msmeria>\u00a0good job on fixing it :)  \n10:59\u00a0<tmortagne>\u00a0when some thread is trying to read than file at the exact moment it's moved (but that would mean Windows file system handling is not great...)  \n10:59\u00a0<tmortagne>\u00a0yea especially good job on creating this regression...  \n11:00\u00a0<msmeria>\u00a0since Windows 7 there are some problems with rights issues. some apps don't start unless you open them as administrator, I couldn't save some files on C:/ partition etc...  \n11:01\u00a0<tmortagne>\u00a0that's expected I guess since you are not admin anymore by default in recent Windows but here it's files on which XWiki has full rights  \n11:28\u00a0<cjd>\u00a0Does anyone have any experience starting the wysiwyg editor manually from script in a page? (so it's spawned during page-view-mode)  \n11:47\u00a0<vmassol>\u00a0too bad marius is off\u2026  \n11:47\u00a0<vmassol>\u00a0I think there's some doc on xwiki.org  \n11:49\u00a0<cjd>\u00a0Yeah, I tried it and it doesn't start up  \n11:49\u00a0<cjd>\u00a0so I'm reading the code  \n11:52\u00a0<vmassol>\u00a0cjd: have you seen this: http://incubator.myxwiki.org/xwiki/bin/view/Drafts/WysiwygDevGuide ?  \n11:52\u00a0<vmassol>\u00a0actualy page has been moved  \n11:53\u00a0<cjd>\u00a0yeah, the one that it was moved to is the one which I was reading  \n11:53\u00a0<vmassol>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/WYSIWYG+Editor+Module#HUsetheWYSIWYGeditoroutsideXWiki  \n11:53\u00a0<vmassol>\u00a0?  \n11:54\u00a0<vmassol>\u00a0ok  \n11:54\u00a0<vmassol>\u00a0then I won't be able to help you further....  \n11:54\u00a0<cjd>\u00a0ahh I should try that \"outside xwiki\" one  \n11:54\u00a0<cjd>\u00a0I'm inside xwiki so I was just trying <script src=\"XWikiWysiwyg.js\">  \n11:58\u00a0<vmassol>\u00a0changing all jira projects to remove the default assignee == project lead  \n11:59\u00a0<vmassol>\u00a0tmortagne: do you really want to be the default assignee for ex for: http://jira.xwiki.org/plugins/servlet/project-config/AUTHJDBC/summary  \n11:59\u00a0<vmassol>\u00a0?  \n11:59\u00a0<vmassol>\u00a0same for http://jira.xwiki.org/plugins/servlet/project-config/AUTHTLDAP/summary  \n12:05\u00a0<vmassol>\u00a0I've put unassigned  \n12:07\u00a0<vmassol>\u00a0so now there's only curriki that I've left with the project lead as default assignee  \n12:09\u00a0<tmortagne>\u00a0vmassol: no default assignee is just because I did not changed the default when you create a project  \n12:11\u00a0<vmassol>\u00a0ok  \n12:11\u00a0<vmassol>\u00a0(that's what I thought)  \n12:37\u00a0<Slashman>\u00a0has joined #xwiki  \n12:44\u00a0<Slashman>\u00a0hello, I have just updated xwiki from 5.4.4 to 6.0 and I can't access the wiki anymore, seems like a redirect problem, when I enter https://wiki.enterprise.net/, I got this in my address bar: http://apaste.info/Obl  \n12:44\u00a0<Slashman>\u00a0my apache configuration is: http://apaste.info/aSf  \n12:45\u00a0<Slashman>\u00a0any idea? it worked perfectly with xwiki 5.4.4 :'(  \n12:51\u00a0<kaisen>\u00a0has joined #xwiki  \n12:58\u00a0<vmassol>\u00a0Slashman: nice url :)  \n12:58\u00a0<Slashman>\u00a0vmassol: yes :(  \n12:59\u00a0<vmassol>\u00a0maybe you should check the main wiki's descriptor in XWiki.XWikiServerXwiki  \n13:00\u00a0<vmassol>\u00a0I don't remember any modification from 5.4.x to 6.0 in this domain...  \n13:00\u00a0<vmassol>\u00a0maybe a bad merge happened during the upgrade of this page  \n13:01\u00a0<Slashman>\u00a0I don't know what the \"main wiki's descriptor in XWiki.XWikiServerXwiki\" is, could you be more specific?  \n13:02\u00a0<vmassol>\u00a0go to that page and verify the alias field  \n13:02\u00a0<vmassol>\u00a0and compare to what you had before  \n13:03\u00a0<Slashman>\u00a0sorry I don't understand... which page? can you give me the url?  \n13:04\u00a0<vmassol>\u00a0XWiki/XWikiServerXwiki  \n13:05\u00a0<vmassol>\u00a0bin/view/XWiki/XWikiServerXwiki  \n13:05\u00a0<vmassol>\u00a0you can naivgate to it  \n13:05\u00a0<Slashman>\u00a0actually I can't, login is mandatory to access it  \n13:05\u00a0<Slashman>\u00a0and login gives me the redirect loop  \n13:05\u00a0<vmassol>\u00a0your wiki is private?  \n13:05\u00a0<Slashman>\u00a0yes  \n13:05\u00a0<vmassol>\u00a0nice :)  \n13:06\u00a0<vmassol>\u00a0let me find some email from sergiu where he explained how to force login  \n13:07\u00a0<Slashman>\u00a0that would be great :p  \n13:07\u00a0<vmassol>\u00a0Try to open  \n13:07\u00a0<vmassol>\u00a0http://localhost:8080/xwiki/bin/loginsubmit/XWiki/XWikiLogin?j\\_username=Admin&j\\_password=admin  \n13:07\u00a0<vmassol>\u00a0let me know if this works  \n13:07\u00a0<kaisen>\u00a0Hello  \n13:07\u00a0<vmassol>\u00a0if not, remove your apache config and try it  \n13:07\u00a0<vmassol>\u00a0kaisen: hello  \n13:08\u00a0<kaisen>\u00a0some time ago that I find time to look after XWiki...  \n13:08\u00a0<kaisen>\u00a0But this week I planned to upgrade my 5.2.2 to the current 6.0  \n13:09\u00a0<vmassol>\u00a0cool  \n13:09\u00a0<kaisen>\u00a0as I use the debian apt-get way I do a standard upgrade - but unfortunately there is a error while installation :(  \n13:09\u00a0<vmassol>\u00a0tmortagne: anything we need to do to update the debian upgrade?  \n13:10\u00a0<Slashman>\u00a0vmassol: I got this tomcat error: http://apaste.info/gdg  \n13:10\u00a0<kaisen>\u00a0While configuring the xwiki-enterprise-mysql-common (6.0)  \n13:10\u00a0<Slashman>\u00a0vmassol: I connected myself directly on the tomcat, no apache between me and the server  \n13:10\u00a0<kaisen>\u00a0I get the error 'ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)'  \n13:10\u00a0<vmassol>\u00a0Slashman: so when there's no apache, you still have the \"redirect loop\" issue?  \n13:10\u00a0<Slashman>\u00a0vmassol: yes  \n13:11\u00a0<Slashman>\u00a0and by the way, I used the debian package to upgrade, maybe there is a problem here?  \n13:11\u00a0<vmassol>\u00a0Slashman: and the last error you pasted is when you call the http://localhost:8080/xwiki/bin/loginsubmit/XWiki/XWikiLogin?j\\_username=Admin&j\\_password=admin url ?  \n13:11\u00a0<Slashman>\u00a0vmassol: that's right  \n13:12\u00a0<vmassol>\u00a0trying locally  \n13:15\u00a0<vmassol>\u00a0hmm works locally  \n13:17\u00a0<vmassol>\u00a0Slashman: cehcking some code to try to guess what could have happened  \n13:17\u00a0<Slashman>\u00a0catalina.out gives me that: 2014-05-13 13:13:56,703 [http://localhost:8080/xwiki/bin/loginsubmit/XWiki/XWikiLogin?j\\_username=Admin&j\\_password=xxxxxxxxxxxxx] WARN \u00a0o.a.s.a.RequestProcessor \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- Unhandled Exception thrown: class java.lang.RuntimeException  \n13:18\u00a0<Slashman>\u00a0which is not very helpful  \n13:20\u00a0<vmassol>\u00a0seems your wiki is missing some init but I don't see how that's possible, maybe some jars are missing\u2026.  \n13:20\u00a0<kaisen>\u00a0Ok if I remove the root password from mysql I can install the packed  \n13:21\u00a0<vmassol>\u00a0kaisen: tmortagne is the one who's maintaining the debian package, but he's away for a few minutes more, he can help when he's back  \n13:22\u00a0<Slashman>\u00a0vmassol: any idea how I could force the war to reinstall themselves?  \n13:23\u00a0<vmassol>\u00a0Slashman: do you still have the old version? You could try comparing the JAR file names from WEB-INF/lib to see if anything is missing  \n13:23\u00a0<vmassol>\u00a0or you could download the WAR from the web and comapre with what you have  \n13:24\u00a0<vmassol>\u00a0http://maven.xwiki.org/releases/org/xwiki/enterprise/xwiki-enterprise-web/6.0/xwiki-enterprise-web-6.0.war  \n13:24\u00a0<vmassol>\u00a0(that's better than comparing with the old version actually)  \n13:24\u00a0<Slashman>\u00a0looking  \n13:25\u00a0<vmassol>\u00a0downloading xwiki 6.0 locally now to try it  \n13:25\u00a0<vmassol>\u00a0(I was on 6.1-SNAPSHOT)  \n13:26\u00a0<kaisen>\u00a0ok so I will wait for tmortagne  \n13:28\u00a0<Slashman>\u00a0vmassol: should'nt I just copy all jar from the war to /usr/lib/xwiki/WEB-INF/lib?  \n13:30\u00a0<tmortagne>\u00a0kaisen: Hi  \n13:30\u00a0<Slashman>\u00a0vmassol: all jar are in their correct location  \n13:31\u00a0<kaisen>\u00a0Hello tmortagne  \n13:31\u00a0<tmortagne>\u00a0Debian is supposed to ask you the root password while installing  \n13:31\u00a0<tmortagne>\u00a0it always did for me  \n13:31\u00a0<kaisen>\u00a0unfortunately for me not  \n13:32\u00a0<tmortagne>\u00a0now I don't really see why it would need that for an upgrade since the database already exist  \n13:32\u00a0<kaisen>\u00a0But anyway I remove the root pw and the installations went through  \n13:32\u00a0<vmassol>\u00a0Slashman: ok so it's not that\u2026 I'm a bit out of ideas ATM\u2026 let me try version 6.0, it just finished downloading  \n13:32\u00a0<tmortagne>\u00a0kaisen: what OS is this exactly ?  \n13:33\u00a0<tmortagne>\u00a0the whole database handling is not really done by the installer itself actually it's standard debian toolkit  \n13:33\u00a0<kaisen>\u00a0Debian GNU/Linux 7.5 (wheezy)  \n13:33\u00a0<tmortagne>\u00a0you could try uninstall then install  \n13:33\u00a0<tmortagne>\u00a0as long as you don't use --purge it won't remove you any data  \n13:33\u00a0<Slashman>\u00a0vmassol: I'm using postgres 9.3 btw, dunno if this have any impact (worked fine with 5.4.4)  \n13:34\u00a0<vmassol>\u00a0shouldn't change anything normally  \n13:34\u00a0<kaisen>\u00a0you mean apt-get purge xwiki-enterprise-tomcat7-mysql \u00a0?  \n13:34\u00a0<tmortagne>\u00a0no I mean apt-get remove, if you use purge you will remove all data  \n13:34\u00a0<Slashman>\u00a0kaisen: purge = delete data  \n13:35\u00a0<tmortagne>\u00a0and not this package  \n13:35\u00a0<tmortagne>\u00a0xwiki-enterprise-common  \n13:35\u00a0<tmortagne>\u00a0this is the base package on which all the other depend  \n13:35\u00a0<kaisen>\u00a0So I ran now apt-get remove xwiki-enterprise-tomcat7-mysql  \n13:35\u00a0<tmortagne>\u00a0so remove xwiki-enterprise-common and then install xwiki-enterprise-tomcat7-mysql  \n13:36\u00a0<vmassol>\u00a0Slashman: works fine in 6.0 for me\u2026 hmm \u2026 tmortagne, if you have any idea...  \n13:36\u00a0<Slashman>\u00a0maybe I should try the aptitude remove/install too...  \n13:37\u00a0<vmassol>\u00a0:)  \n13:37\u00a0<kaisen>\u00a0@tmortagne ok done -  \n13:38\u00a0<vmassol>\u00a0tmortagne: btw just noticed that when we start XE 6.0 now, a first request to it it sent internally since I see the db migration message at startup\u2026 Did you know this?  \n13:39\u00a0<kaisen>\u00a0If I try to open the xwiki page I get a error that tell me the The requested resource (/xwiki) is not available.  \n13:41\u00a0<tmortagne>\u00a0kaisen: you installed xwiki-enterprise-tomcat7-mysql ?  \n13:41\u00a0<kaisen>\u00a0yes  \n13:42\u00a0<tmortagne>\u00a0trying the 6.0 debian install myself on Ubuntu, maybe something changed in the WAR that broke the installer some way (the installer itself did not really changed)  \n13:44\u00a0<kaisen>\u00a0I will just clone my 5.2.2 again and run it again, beside I will use a virgin debian install and try a fresh installation  \n13:44\u00a0<vmassol>\u00a0tmortagne: yes  \n13:45\u00a0<tmortagne>\u00a0kaisen: install from scratch of 6.0 work well for me  \n13:46\u00a0<tmortagne>\u00a0I will try to install 5.2.2 and upgrade to 6.0  \n13:46\u00a0<kaisen>\u00a0but is there a way to export import the data from 5.2.2 to 6.0?  \n13:46\u00a0<tmortagne>\u00a0but i'm not in the exact same OS as you since it's the last ubuntu  \n13:46\u00a0<tmortagne>\u00a0you don't need to  \n13:47\u00a0<tmortagne>\u00a0XWiki will update the database automatically  \n13:47\u00a0<kaisen>\u00a0I run also in some trouble last time with upgrading to 5.3  \n13:47\u00a0<kaisen>\u00a0As the database didi't start to upgrade  \n13:47\u00a0<tmortagne>\u00a0I upgraded several farms since 5.0 and never had any issue  \n13:47\u00a0<kaisen>\u00a0so I went back to 5.2.2  \n13:47\u00a0<evalica>\u00a0has joined #xwiki  \n13:47\u00a0<tmortagne>\u00a0maybe you disabled migration in xwiki.cfg  \n13:48\u00a0<tmortagne>\u00a0kaisen: lets check what is missing in your current install  \n13:48\u00a0<tmortagne>\u00a0so tomcat does not find XWiki it seems  \n13:48\u00a0<tmortagne>\u00a0checking what you are supposed to have  \n13:48\u00a0<Slashman>\u00a0tmortagne: I too have an issue upgrading from 5.4.4 to 6.0 with debian package  \n13:48\u00a0<kaisen>\u00a0When 5.4 was released I upgraded a clone to 5.4 which works well but I didn't find time to get the clone to production  \n13:49\u00a0<Slashman>\u00a0<Slashman> hello, I have just updated xwiki from 5.4.4 to 6.0 and I can't access the wiki anymore, seems like a redirect problem, when I enter https://wiki.enterprise.net/, I got this in my address bar: http://apaste.info/Obl  \n13:49\u00a0<Slashman>\u00a0tried without the apache, same problem with the tomcat direct  \n13:50\u00a0<tmortagne>\u00a0kaisen: do to you have a xwiki link to /etc/xwiki/xwiki-tomcat.xml in /etc/tomcat7/Catalina/localhost  \n13:51\u00a0<tmortagne>\u00a0Slashman: look like infinite redirect but I don't have much idea what would cause this except maybe if guest does not have view right on login page or something like this maybe  \n13:51\u00a0<tmortagne>\u00a0or if guest does not have login right  \n13:52\u00a0<Slashman>\u00a0tmortagne: how could I check/correct that?  \n13:52\u00a0<tmortagne>\u00a0I don't think it's related to debian package, might be something that changed in 6.0  \n13:52\u00a0<tmortagne>\u00a0hmm  \n13:52\u00a0<Slashman>\u00a0tmortagne: it's a private wiki, so maybe a right changed? guess could only access the login page before  \n13:53\u00a0<tmortagne>\u00a0Slashman: checking something  \n13:53\u00a0<gdelhumeau\\_>\u00a0has quit  \n13:53\u00a0<tmortagne>\u00a0I think you can put XWiki in basic auth mode so that it does not need login page access  \n13:54\u00a0<gdelhumeau\\_>\u00a0has joined #xwiki  \n13:54\u00a0<tmortagne>\u00a0xwiki.authentication property in xwiki.cfg  \n13:54\u00a0<Slashman>\u00a0looking  \n13:54\u00a0<tmortagne>\u00a0AFAIR that should send a basic chalendge to the browser instead of a redirect to login page  \n13:55\u00a0<tmortagne>\u00a0\\*challenge  \n13:55\u00a0<kaisen>\u00a0has quit  \n13:55\u00a0<tmortagne>\u00a0kaisen left, lets try a 5.2.2 -> 6.0 upgrade  \n13:55\u00a0<gdelhumeau\\_>\u00a0bb in ~1h  \n13:58\u00a0<Slashman>\u00a0tmortagne: I can login with the basic \"xwiki.authentication\" !  \n13:58\u00a0<Slashman>\u00a0tmortagne: currently following the wizard  \n13:59\u00a0<tmortagne>\u00a0ok maybe that will be enough to fix whatever issue you had but if not I guess the first thing to check is guest \"login\" right  \n14:00\u00a0<Slashman>\u00a0it's strange that it worked before the upgrade though  \n14:01\u00a0<tmortagne>\u00a0maybe something changed in the way login right is handled but I don't have any changed at this level in mind  \n14:02\u00a0<tmortagne>\u00a0Slashman: the issue is on main wiki ?  \n14:03\u00a0<Slashman>\u00a0tmortagne: yes, there is only one  \n14:03\u00a0<tmortagne>\u00a0ok  \n14:04\u00a0<Slashman>\u00a0tmortagne: I'm looking for the guess rights, seems like it has no right at all, but the possible rights are : see, manage, etc  \n14:05\u00a0<Slashman>\u00a0I don't see a \"login\" right  \n14:05\u00a0<tmortagne>\u00a0where are you looking at right exactly ? I don't know those rights :)  \n14:05\u00a0<Slashman>\u00a0user/group => access right  \n14:05\u00a0<Slashman>\u00a0I'm translating since the wiki is in french  \n14:06\u00a0<tmortagne>\u00a0actually yes I don't see the login right listed  \n14:07\u00a0<Slashman>\u00a0oh well, can I quickly put the wiki in english and then back to french?  \n14:08\u00a0<tmortagne>\u00a0putting my test wiki in french  \n14:08\u00a0<kaisen>\u00a0has joined #xwiki  \n14:08\u00a0<evalica>\u00a0has quit  \n14:09\u00a0<tmortagne>\u00a0Slashman: could you look at /xwiki/bin/edit/XWiki/XWikiPreferences?editor=object  \n14:10\u00a0<tmortagne>\u00a0and see if you have a XWiki.XWikiGlobalRights object with \"login\" right (\"Niveaux\") set to anyone  \n14:10\u00a0<Slashman>\u00a0looking  \n14:12\u00a0<Slashman>\u00a0I'll screenshot this, hard to describe  \n14:12\u00a0<tmortagne>\u00a0well not sure screenshot will help since you could have several right selected for the same object  \n14:13\u00a0<Slashman>\u00a0hm  \n14:13\u00a0<Slashman>\u00a0ok I have an admin group that seems ok  \n14:13\u00a0<tmortagne>\u00a0basically you should not have object with login right selected I think  \n14:14\u00a0<Slashman>\u00a0the I have XWikiGlobalRights 1: XWiki.XWikiAllGroup with view/edit/register/comment  \n14:14\u00a0<tmortagne>\u00a0that would assign that login right to the object user/group and guest would loose it  \n14:15\u00a0<Slashman>\u00a0then XWikiGlobalRights 3 containing \"XWikiGuest\" with view and register  \n14:15\u00a0<tmortagne>\u00a0hmm that's weird, guest have view right and yet it's redirected to login ?  \n14:15\u00a0<tmortagne>\u00a0is it still after the upgrade ?  \n14:16\u00a0<Slashman>\u00a0oh sorry the right for guess is forbiden  \n14:16\u00a0<tmortagne>\u00a0note that you don't need to forbid it  \n14:16\u00a0<tmortagne>\u00a0s/it's/it/  \n14:17\u00a0<Slashman>\u00a0ok, removing the forbid for guest  \n14:17\u00a0<tmortagne>\u00a0kaisen: currently trying a upgrade from 5.2.2 to 6.0  \n14:18\u00a0<Slashman>\u00a0tmortagne: guest is gone from the list now  \n14:18\u00a0<tmortagne>\u00a0I did not get any error but I don't have root password, checking if the upgrade worked well and I will try with a root password  \n14:18\u00a0<tmortagne>\u00a0(was for kaisen)  \n14:19\u00a0<tmortagne>\u00a0Slashman: do you still have infinite redirect ?  \n14:19\u00a0<Slashman>\u00a0will revert the auth config  \n14:19\u00a0<tmortagne>\u00a0(when putting back default authenticator)  \n14:20\u00a0<tmortagne>\u00a0kaisen: \"bad\" news the upgrade went well for me, so you remember what you modified after 5.2.2 install ? any standard file or anything else that xwiki.properties and xwiki.cfg ?  \n14:20\u00a0<tmortagne>\u00a0Slashman: if you still have the issue I will try to put the same rights you have for guest  \n14:21\u00a0<Slashman>\u00a0tmortagne: it works! thank you so much  \n14:21\u00a0<tmortagne>\u00a0hmm do you reproduce the issue if you put back deny rights ?  \n14:21\u00a0<tmortagne>\u00a0that would be a regression with deny behavior I guess  \n14:21\u00a0<tmortagne>\u00a0or maybe it's the upgrade that fixed whatever was the issue  \n14:22\u00a0<Slashman>\u00a0trying  \n14:24\u00a0<Slashman>\u00a0tmortagne: it works now, s  \n14:24\u00a0<Slashman>\u00a0tmortagne: it works now, so I guess the upgrade fixed it  \n14:25\u00a0<tmortagne>\u00a0Slashman: when you go to /xwiki/bin/view/XWiki/XWikiPreferences?xpage=history is there a modification that seems to have been done by the upgrade ?  \n14:26\u00a0<Slashman>\u00a0tmortagne: hm by the way, I cannot log out now, I'm testing with a second browser  \n14:26\u00a0<tmortagne>\u00a0sorry /xwiki/bin/view/XWiki/XWikiPreferences?viewer=history  \n14:28\u00a0<Slashman>\u00a0tmortagne: no modification done by the upgrade, last modification is \"Administrator 13/05/2014, 14:22 deny register droit pour XWiki.XWikiGuest\"  \n14:28\u00a0<Slashman>\u00a0and before that: Administrator 08/10/2013, 17:33 clear view droit pour XWiki.enterprise  \n14:29\u00a0<tmortagne>\u00a0ok, I don't have much idea of what could have changed to fix that. Maybe the bug was on login page itself  \n14:29\u00a0<tmortagne>\u00a0hmm actually there is no login page by default  \n14:30\u00a0<tmortagne>\u00a0anyway at least it's fixed now :)  \n14:32\u00a0<tmortagne>\u00a0kaisen: did you had my message about /etc/tomcat7/Catalina/localhost ?  \n14:32\u00a0<Slashman>\u00a0tmortagne: yes, thank you again, and now I know how that I can use basic for xwiki.authentication ;)  \n14:33\u00a0<tmortagne>\u00a0Slashman: you're welcome :)  \n14:46\u00a0<kaisen>\u00a0@tmortagne sorry I was afk - to you question ,yes I check the /etc/tomcat7/Catalina/localhost and it is linked to /etc/xwiki/xwiki-tomcat.xml  \n14:46\u00a0<tmortagne>\u00a0and /etc/xwiki/xwiki-tomcat.xml exists ?  \n14:46\u00a0<kaisen>\u00a0yes  \n14:46\u00a0<tmortagne>\u00a0and tomcat tells you it cannot find xwiki ?  \n14:47\u00a0<kaisen>\u00a0yes :(  \n14:47\u00a0<tmortagne>\u00a0then it sounds like XWiki failing to initialize  \n14:47\u00a0<tmortagne>\u00a0you should have something in /var/log/tomcat7/catalina.out  \n14:48\u00a0<tmortagne>\u00a0could be great if you could clear that file restart tomcat and paste it's content to pastebin or something like this  \n14:50\u00a0<kaisen>\u00a0@tmortagne http://apaste.info/4gm  \n14:52\u00a0<tmortagne>\u00a0indeed it find XWiki but fail to start it but I have no idea what this error mean  \n14:52\u00a0<tmortagne>\u00a0there is pretty much nothing in there except \"it failed\" basically  \n14:53\u00a0<kaisen>\u00a0yes crazy  \n14:54\u00a0<tmortagne>\u00a0do you have a web.xml file (a link actually) in /usr/lib/xwiki/WEB-INF ?  \n14:54\u00a0<tmortagne>\u00a0trying to find on google what a single \"Error listenerStart\" could mean  \n14:55\u00a0<kaisen>\u00a0yes there is one  \n14:55\u00a0<tmortagne>\u00a0hmm wait  \n14:55\u00a0<tmortagne>\u00a0there is something weird actually  \n14:56\u00a0<tmortagne>\u00a0I think the important thing is validateJarFile(/usr/lib/xwiki/WEB-INF/lib/javax.servlet-3.0.0.v201112011016.jar)  \n14:56\u00a0<tmortagne>\u00a0this jar should not be in XWiki  \n14:56\u00a0<tmortagne>\u00a0try removing it  \n14:56\u00a0<tmortagne>\u00a0checking what I have on my side  \n14:56\u00a0<tmortagne>\u00a0hmm I don't have that jar  \n14:57\u00a0<tmortagne>\u00a0did you added it ?  \n14:57\u00a0<tmortagne>\u00a0this jar is part of Tomcat actually and from what I found on google it does not like that an application provide it  \n14:58\u00a0<tmortagne>\u00a0ha non wait  \n14:58\u00a0<tmortagne>\u00a0I have one actually  \n14:58\u00a0<tmortagne>\u00a0but tomcat is not complaining  \n14:58\u00a0<tmortagne>\u00a0but it does not look right to me to have it  \n15:00\u00a0<tmortagne>\u00a0not sure why tomcat does not complain for me and complain for you, I guess ubuntu and debian don't have exact same default configuration for tomcat  \n15:01\u00a0<vmassol>\u00a0sorry was in a meeting, catching up now  \n15:02\u00a0<tmortagne>\u00a0vmassol: XE-1393  \n15:03\u00a0<tmortagne>\u00a0checking where it comes from  \n15:04\u00a0<tmortagne>\u00a0looks like it comes from solr  \n15:07\u00a0<vmassol>\u00a0yes this jar shouldn't be here  \n15:07\u00a0<vmassol>\u00a0maybe we should have an exclude at the war creation level to ensure it's never there  \n15:07\u00a0<vmassol>\u00a0at least an enforcer check  \n15:08\u00a0<tmortagne>\u00a0excluding it from solr module for now since it does not make sense anyway  \n15:10\u00a0<tmortagne>\u00a0vmassol: we have a dependency management for it already but solr is using a weird version with a non standard groupid/artifactid  \n15:10\u00a0<vmassol>\u00a0sure I was referring to finding a way so that it doesn't happen again  \n15:10\u00a0<vmassol>\u00a0ok  \n15:11\u00a0<tmortagne>\u00a0any dependency on standard servlet-api should have it's scope changed to provided automatically  \n15:48\u00a0<msmeria>\u00a0has quit  \n15:50\u00a0<kaisen>\u00a0@tmortagne I tried now couple of upgrade variatns with a other clone but I end up anytime that the /xwiki could not found  \n15:51\u00a0<kaisen>\u00a0also the root pw dialog is not popping up.  \n15:51\u00a0<tmortagne>\u00a0kaisen: did you removed the /usr/lib/xwiki/WEB-INF/lib/javax.servlet-3.0.0.v201112011016.jar file ?  \n15:51\u00a0<kaisen>\u00a0with a installation from scrath it works on debian  \n15:52\u00a0<tmortagne>\u00a0root pw dialog seems to be only when installing from scratch, sounds like it's remembering it when upgrading or something like this  \n15:52\u00a0<tmortagne>\u00a0maybe you changed it after XWiki install  \n15:53\u00a0<kaisen>\u00a0not that I can remember as the one from my installation documentation still fits  \n15:54\u00a0<kaisen>\u00a0And for you question regadring the jar file. I rename it but it still doesn't work  \n15:54\u00a0<tmortagne>\u00a0you changed the extension ?  \n15:55\u00a0<tmortagne>\u00a0you should remove it anyway, this jar is totally useless and should never have been here  \n15:55\u00a0<tmortagne>\u00a0what log do you when you remove it ?  \n15:57\u00a0<kaisen>\u00a0ok rename is not enough  \n15:57\u00a0<kaisen>\u00a0I rename it  \n15:57\u00a0<kaisen>\u00a0now i removed it  \n15:58\u00a0<vmassol>\u00a0(rename is definitely not enough)  \n15:58\u00a0<tmortagne>\u00a0vmassol: not sure tomcat loads it if it's not ending with \".jar\"  \n15:59\u00a0<vmassol>\u00a0don't know  \n15:59\u00a0<kaisen>\u00a0http://apaste.info/XPl  \n16:00\u00a0<vmassol>\u00a0you need to enable some logging  \n16:00\u00a0<vmassol>\u00a0we have instructions for that  \n16:00\u00a0<vmassol>\u00a0let me get them  \n16:01\u00a0<vmassol>\u00a0kaisen: here http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationTomcat#HSEVERE:ErrorlistenerStart  \n16:02\u00a0<vmassol>\u00a0hmm tomcat6, don't know for tomcat7, would be nice to google and update that doc :)  \n16:02\u00a0<tmortagne>\u00a0maybe it's the same  \n16:03\u00a0<kaisen>\u00a0checking it  \n16:03\u00a0<vmassol>\u00a0http://stackoverflow.com/questions/22075543/tomcat-7-0-42-error-listenerstart  \n16:03\u00a0<vmassol>\u00a0maybe you're using java6? :)  \n16:03\u00a0<kaisen>\u00a0could be  \n16:04\u00a0<kaisen>\u00a0as I don't touch java while installation  \n16:04\u00a0<vmassol>\u00a0the instruction seem to be the same as for tomcat6  \n16:04\u00a0<vmassol>\u00a0updazting odc  \n16:04\u00a0<vmassol>\u00a0let me know if they work  \n16:05\u00a0<vmassol>\u00a0xwiki 6.0+ requires java7  \n16:05\u00a0<vmassol>\u00a0(which wasn't the case before)  \n16:05\u00a0<tmortagne>\u00a0f\\* totally forgot to update the debian package to require java 7 minimum  \n16:06\u00a0<kaisen>\u00a0@tmortagne :)  \n16:06\u00a0<kaisen>\u00a0It's also my fault as I read the requerment but didn't think about to check java  \n16:10\u00a0<Slashman>\u00a0has quit  \n16:13\u00a0<kaisen>\u00a0Is it enough if I do it manually with apt-get install openjdk-7-jre ?  \n16:13\u00a0<tmortagne>\u00a0tomcat is supposed to use whatever is the default  \n16:14\u00a0<tmortagne>\u00a0I guess apt-get install openjdk-7-jre \u00a0should change the default but not sure on debian  \n16:14\u00a0<tmortagne>\u00a0I usually install the oracle VMs  \n16:15\u00a0<tmortagne>\u00a0try java -version after apt-get install openjdk-7-jre  \n16:17\u00a0<tmortagne>\u00a0if tomcat is not using default java version you should make sure it's not explicitly set in /etc/default/tomcat7  \n16:20\u00a0<cjd>\u00a0Random thought re deprecation policy: for things like the tinymce editor, we could actually make it fail to load unless the admin adds a line to the xwiki config file...  \n16:21\u00a0<cjd>\u00a0then we could use the thing that pings with version numbers to find out how many people are adding this line  \n16:21\u00a0<cjd>\u00a0with the additional benefit that new wikis won't have deprecated functionality by default so people won't just endlessly produce extensions using it  \n16:24\u00a0<lucaa>\u00a0has quit  \n16:35\u00a0<tmortagne>\u00a0has quit  \n16:35\u00a0<kaisen>\u00a0here the logs with extended information http://apaste.info/omd  \n16:41\u00a0<vmassol>\u00a0yep that's java version  \n16:41\u00a0<vmassol>\u00a0you need java7  \n16:41\u00a0<kaisen>\u00a0ok  \n16:42\u00a0<lucaa>\u00a0has joined #xwiki  \n16:45\u00a0<kaisen>\u00a0Is Unsupported major.minor version 51.0 telling you this?  \n16:50\u00a0<vmassol>\u00a0yep  \n16:51\u00a0<vmassol>\u00a0see https://blogs.oracle.com/henrik/entry/java\\_7\\_questions\\_answers for example  \n16:51\u00a0<vmassol>\u00a0\"Q: I have created an application in Java 7, but when my users try to run it they get an Unsupported major.minor version 51.0 error. What does this mean and what can I do about it?\"  \n16:51\u00a0<vmassol>\u00a0(kaisen)  \n17:01\u00a0<kaisen>\u00a0Thanks \bvmassol\b  \n17:02\u00a0<kaisen>\u00a0manually purge open-jdk-6 and install open-jdk-7 fix the problem  \n17:06\u00a0<kaisen>\u00a0@\btmortagne\b one last question, if you change the debian package require to java 7, will it install java 7 automatically while a upgrade?  \n17:21\u00a0<Denis1>\u00a0has quit  \n17:24\u00a0<evalica>\u00a0has joined #xwiki  \n17:26\u00a0<evalica>\u00a0has quit  \n17:34\u00a0<kaisen>\u00a0has quit  \n17:34\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:02\u00a0<lucaa>\u00a0has quit  \n18:04\u00a0<woshilapin>\u00a0has quit  \n18:17\u00a0<polx>\u00a0has joined #xwiki  \n18:35\u00a0<KermitTheFragger>\u00a0has quit  \n18:43\u00a0<polx>\u00a0has quit  \n18:50\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:51\u00a0<vmassol>\u00a0has quit  \n18:53\u00a0<vmassol>\u00a0has joined #xwiki  \n19:11\u00a0<vmassol>\u00a0has quit  \n19:11\u00a0<tmortagne>\u00a0has quit  \n19:14\u00a0<gdelhumeau\\_>\u00a0has quit  \n19:19\u00a0<lucaa>\u00a0has joined #xwiki  \n19:21\u00a0<polx>\u00a0has joined #xwiki  \n19:31\u00a0<polx>\u00a0has quit  \n19:42\u00a0<polx>\u00a0has joined #xwiki  \n19:44\u00a0<Denis>\u00a0has joined #xwiki  \n19:45\u00a0<polx>\u00a0has quit  \n19:56\u00a0<abusenius>\u00a0has joined #xwiki  \n20:21\u00a0<polx>\u00a0has joined #xwiki  \n20:35\u00a0<cjd>\u00a0has quit  \n21:11\u00a0<lucaa>\u00a0has quit  \n21:15\u00a0<vmassol>\u00a0has joined #xwiki  \n21:57\u00a0<vmassol>\u00a0has quit  \n21:57\u00a0<vmassol>\u00a0has joined #xwiki  \n22:31\u00a0<vmassol>\u00a0has quit  \n22:48\u00a0<vmassol>\u00a0has joined #xwiki  \n23:02\u00a0<vmassol>\u00a0has quit  \n23:25\u00a0<lucaa>\u00a0has joined #xwiki  \n23:28\u00a0<vmassol>\u00a0has joined #xwiki  \n23:50\u00a0<vmassol>\u00a0has quit\n"}