{"id": "dev:IRC.xwikiArchive20161011", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20161011", "title": "IRC Archive for channel #xwiki on 11 October 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<woshilapin>\u00a0has quit  \n01:10\u00a0<woshilapin>\u00a0has joined #xwiki  \n01:22\u00a0<woshilapin>\u00a0has quit  \n01:22\u00a0<woshilapin>\u00a0has joined #xwiki  \n01:28\u00a0<woshilapin>\u00a0has quit  \n01:29\u00a0<woshilapin>\u00a0has joined #xwiki  \n01:30\u00a0<woshilapin>\u00a0has quit  \n01:30\u00a0<woshilapin>\u00a0has joined #xwiki  \n01:34\u00a0<woshilapin>\u00a0has quit  \n01:36\u00a0<woshilapin>\u00a0has joined #xwiki  \n01:36\u00a0<woshilapin>\u00a0has quit  \n01:37\u00a0<woshilapin>\u00a0has joined #xwiki  \n01:37\u00a0<woshilapin>\u00a0has quit  \n01:38\u00a0<woshilapin>\u00a0has joined #xwiki  \n02:59\u00a0<woshilapin>\u00a0has quit  \n03:00\u00a0<woshilapin>\u00a0has joined #xwiki  \n03:14\u00a0<jonesmeier>\u00a0has quit  \n03:16\u00a0<jonesmeier>\u00a0has joined #xwiki  \n06:15\u00a0<D-Spair>\u00a0has quit  \n06:30\u00a0<D-Spair>\u00a0has joined #xwiki  \n07:37\u00a0<vmassol>\u00a0has joined #xwiki  \n07:59\u00a0<msmeria>\u00a0has joined #xwiki  \n09:13\u00a0<woshilapin>\u00a0has quit  \n09:13\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:26\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:11\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:18\u00a0<Slashman>\u00a0has joined #xwiki  \n10:33\u00a0<woshilapin>\u00a0has quit  \n10:34\u00a0<woshilapin>\u00a0has joined #xwiki  \n10:41\u00a0<msmeria>\u00a0has quit  \n10:41\u00a0<edvorg>\u00a0has quit  \n10:41\u00a0<edvorg>\u00a0has joined #xwiki  \n10:48\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:48\u00a0<evalica>\u00a0has joined #xwiki  \n10:49\u00a0<msmeria>\u00a0has joined #xwiki  \n11:08\u00a0<msmeria>\u00a0has quit  \n11:08\u00a0<msmeria>\u00a0has joined #xwiki  \n12:04\u00a0<evalica>\u00a0has quit  \n12:33\u00a0<evalica>\u00a0has joined #xwiki  \n12:34\u00a0<evalica>\u00a0has quit  \n12:50\u00a0<evalica>\u00a0has joined #xwiki  \n13:05\u00a0<Enygma`>\u00a0has quit  \n13:29\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:48\u00a0<edvorg>\u00a0has quit  \n14:00\u00a0<msmeria>\u00a0has quit  \n14:01\u00a0<msmeria>\u00a0has joined #xwiki  \n15:24\u00a0<acotiuga>\u00a0has joined #xwiki  \n15:33\u00a0<msmeria>\u00a0has quit  \n15:53\u00a0<acotiuga>\u00a0has quit  \n15:54\u00a0<acotiuga>\u00a0has joined #xwiki  \n16:09\u00a0<Pbas>\u00a0Hello, with velocity and API, are we a method to know root parent (previous $doc.space)? (If not, I can use stringutils to extract parent name)  \n16:10\u00a0<gdelhumeau>\u00a0$doc.documentReference.parent ?  \n16:10\u00a0<Pbas>\u00a0thxs I will give \u00a0a try  \n16:15\u00a0<tmortagne>\u00a0Pbas: you should avoid manipulating document name/reference as string, see http://extensions.xwiki.org/xwiki/bin/view/Extension/Model+Module#HScriptServiceAPI for various references related script APIs  \n16:16\u00a0<Pbas>\u00a0nope: \u00a0$doc.documentReference.parent return xwiki:MySpace.MysublevelPage for xwiki:MySpace.MysublevelPage.NewPage  \n16:16\u00a0<Pbas>\u00a0Ok I will check it  \n16:16\u00a0<tmortagne>\u00a0you want xwiki:MySpace ?  \n16:16\u00a0<Pbas>\u00a0yes  \n16:17\u00a0<Pbas>\u00a0an array containinx all parents would be great  \n16:17\u00a0<tmortagne>\u00a0then indeed .parent is not enough, it gives you the direct parent of the document  \n16:17\u00a0<tmortagne>\u00a0$doc.documentReference does contain all parents  \n16:18\u00a0<tmortagne>\u00a0getParent() is just one of the method provided by this API  \n16:18\u00a0<Pbas>\u00a0ha yes I forgot thant xwiki is great, I will check $doc.documentReference  \n16:18\u00a0<tmortagne>\u00a0basically you need to go from parent to parent until the parent type is wiki  \n16:21\u00a0<Pbas>\u00a0I thinking about some method like: $doc.getParents() return [\"rootParent\",\"MySubLevel\",,...] for xwiki:rootParent.MySubLevel.MyPage  \n16:22\u00a0<Pbas>\u00a0Then I must use a #foreach loop :-/  \n16:24\u00a0<gdelhumeau>\u00a0Pbas: no, use $doc.documentReference.lastSpaceReference  \n16:24\u00a0<tmortagne>\u00a0gdelhumeau: no  \n16:24\u00a0<gdelhumeau>\u00a0ah sorry  \n16:24\u00a0<gdelhumeau>\u00a0wiki  \n16:24\u00a0<tmortagne>\u00a0he want the first space reference  \n16:24\u00a0<gdelhumeau>\u00a0then it's the same  \n16:25\u00a0<gdelhumeau>\u00a0$doc.documentReferene.wikiReference  \n16:25\u00a0<gdelhumeau>\u00a0$doc.documentReference.wikiReference  \n16:25\u00a0<tmortagne>\u00a0space, not wiki  \n16:25\u00a0<tmortagne>\u00a0there is several spaces  \n16:25\u00a0<Pbas>\u00a0yes tmortagne  \n16:25\u00a0<gdelhumeau>\u00a0ok, sorry for the n oise  \n16:25\u00a0<Pbas>\u00a0np  \n16:26\u00a0<gdelhumeau>\u00a0there is also $doc.documentReference.spaceReferences with returns a list of spaces  \n16:26\u00a0<Pbas>\u00a0getSpaceReferences => space references of this document in ... an ordered list  \n16:26\u00a0<tmortagne>\u00a0$doc.documentReference.reversedReferenceChain gives you the list you are refering  \n16:26\u00a0<Pbas>\u00a0ho yes  \n16:26\u00a0<vmassol>\u00a0Pbase: there's an api if you ant the spaces  \n16:26\u00a0<vmassol>\u00a0getSpaceReferences  \n16:27\u00a0<gdelhumeau>\u00a0I would do something like $doc.documentReference.spaceReferences.get(0)  \n16:27\u00a0<vmassol>\u00a0List<SpaceReference> getSpaceReferences()  \n16:27\u00a0<tmortagne>\u00a0and indeed getSpaceReferences is the same but with only spaces  \n16:27\u00a0<vmassol>\u00a0(on DocumentReference)  \n16:27\u00a0<Pbas>\u00a0etSpaceReferences is in ordered list (alpha order?)  \n16:27\u00a0<gdelhumeau>\u00a0no Pbas  \n16:27\u00a0<tmortagne>\u00a0Pbas: the order of the reference  \n16:27\u00a0<gdelhumeau>\u00a0from root to children  \n16:28\u00a0<Pbas>\u00a0cool that it, I test  \n16:28\u00a0<gdelhumeau>\u00a0the code is easy to understand: https://github.com/xwiki/xwiki-platform/blob/fbcc541bfd6d329e61354a530599d94c30889083/xwiki-platform-core/xwiki-platform-model/src/main/java/org/xwiki/model/reference/DocumentReference.java#L305-L305  \n16:31\u00a0<Pbas>\u00a0OK: I obtain \"Space xwiki:Encyclop\u00e9die\" with \"$doc.documentReference.spaceReferences.get(0)\"  \n16:32\u00a0<vmassol>\u00a0then use getName()  \n16:32\u00a0<vmassol>\u00a0what you printed is $doc.documentReference.spaceReferences.get(0).toString()  \n16:32\u00a0<vmassol>\u00a0(that's why you're seeing this)  \n16:33\u00a0<vmassol>\u00a0you need to call getName() to get Encyclop\u00e9die  \n16:33\u00a0<Pbas>\u00a0$doc.documentReference.spaceReferences.get(0).getName() is ok now  \n16:34\u00a0<Pbas>\u00a0ho shame on me 3 people to have old space name ;-)  \n16:34\u00a0<Pbas>\u00a0thxs it's working now  \n16:34\u00a0<vmassol>\u00a0nested space brings its complexity for sure ;)  \n16:35\u00a0<vmassol>\u00a0but in general you don't need to deal with a specific space  \n16:35\u00a0<vmassol>\u00a0(ie extract a specific part)  \n16:35\u00a0<vmassol>\u00a0(don't know your use case)  \n16:35\u00a0<Pbas>\u00a0yes but I try  \n16:36\u00a0<Pbas>\u00a0to modify \"Blank page\" template  \n16:36\u00a0<Pbas>\u00a0in .vm loke on our xwiki 7.0.1  \n16:36\u00a0<Pbas>\u00a0and I wanted a particular page for a specific space  \n16:37\u00a0<Pbas>\u00a0s/loke/like  \n16:37\u00a0<Pbas>\u00a0on my 7.0.1 xwiki templates/editwysiwygnew.vm I modified templates/editwysiwygnew.vm  \n16:38\u00a0<Pbas>\u00a0containing some #if ($tdoc.content == \"\" && $tdoc.space == $escapetool.xml(\"Encyclop\u00e9die\")) \u00a0\u00a0\u00a0\u00a0=> \u00a0\u00a0$xwiki.getTextArea($itemModLContenu.getContent())  \n16:38\u00a0<vmassol>\u00a0ah ok so you want to see if a given page is under a given tree node  \n16:39\u00a0<Pbas>\u00a0yes  \n16:39\u00a0<vmassol>\u00a0could be an interesting api to add  \n16:40\u00a0<vmassol>\u00a0something like:  \n16:40\u00a0<vmassol>\u00a0boolean EntityReference.isUnder(EntityReference)  \n16:40\u00a0<tmortagne>\u00a0Pbas, vmassol: $doc.documentReference.hasParent('wiki:Encyclop\u00e9die')  \n16:40\u00a0<vmassol>\u00a0or contains()  \n16:40\u00a0<vmassol>\u00a0boolean EntityReference.contains(EntityReference)  \n16:40\u00a0<vmassol>\u00a0or hasParent() indeed  \n16:41\u00a0<tmortagne>\u00a0vmassol: it's not a suggestion :)  \n16:41\u00a0<tmortagne>\u00a0we do have a hasParent method  \n16:41\u00a0<Pbas>\u00a0$doc.documentReference.hasParent('wiki:Encyclop\u00e9die') is it recursive?  \n16:41\u00a0<vmassol>\u00a0haha :)  \n16:41\u00a0<vmassol>\u00a0indeed  \n16:41\u00a0<vmassol>\u00a0hasParent(EntityReference expectedParent)  \n16:41\u00a0<tmortagne>\u00a0Pbas: the parameter is the reference you want to test  \n16:41\u00a0<tmortagne>\u00a0it will look in all the parents if it matches it  \n16:42\u00a0<gdelhumeau>\u00a0since 7.3RC1  \n16:42\u00a0<tmortagne>\u00a0ha right you need 7.0.1 API  \n16:42\u00a0<Pbas>\u00a0no  \n16:42\u00a0<Pbas>\u00a0My need is on 8.2.1  \n16:43\u00a0<tmortagne>\u00a0ok then you can use it  \n16:43\u00a0<Pbas>\u00a0yes thxs it's working and it is mor elegant  \n16:43\u00a0<tmortagne>\u00a0easier to read yes  \n16:44\u00a0<tmortagne>\u00a0(it's essentially doing the same as what you were doing)  \n16:44\u00a0<Pbas>\u00a0yes  \n16:45\u00a0<Pbas>\u00a0ty for your help :)  \n16:54\u00a0<Enygma`>\u00a0has quit  \n17:00\u00a0<acotiuga>\u00a0has quit  \n17:31\u00a0<Enygma`>\u00a0has joined #xwiki  \n18:14\u00a0<evalica>\u00a0has quit  \n18:16\u00a0<woshilapin>\u00a0has quit  \n18:16\u00a0<woshilapin>\u00a0has joined #xwiki  \n18:16\u00a0<woshilapin>\u00a0has quit  \n18:17\u00a0<woshilapin>\u00a0has joined #xwiki  \n18:18\u00a0<Enygma`>\u00a0has quit  \n18:22\u00a0<gdelhumeau>\u00a0has quit  \n18:47\u00a0<Aranjedeath>\u00a0has joined #xwiki  \n19:08\u00a0<tmortagne>\u00a0has quit  \n19:08\u00a0<tmortagne>\u00a0has joined #xwiki  \n19:13\u00a0<tmortagne>\u00a0has quit  \n19:15\u00a0<barretto>\u00a0has quit  \n20:09\u00a0<vmassol>\u00a0has quit  \n20:26\u00a0<sorinello>\u00a0has quit  \n20:27\u00a0<sorinello>\u00a0has joined #xwiki  \n20:27\u00a0<sorinello>\u00a0has joined #xwiki  \n21:20\u00a0<Slashman>\u00a0has quit  \n21:31\u00a0<Aranjedeath>\u00a0has quit  \n21:32\u00a0<Aranjedeath>\u00a0has joined #xwiki  \n22:00\u00a0<daemoen\\_>\u00a0is now known as <daemoen>  \n23:58\u00a0\\*\u00a0daemoen peers around  \n23:58\u00a0<daemoen>\u00a0channel is quiet today  \n23:59\u00a0<daemoen>\u00a0kinda =D\n"}