{"id": "dev:IRC.xwikiArchive20101018", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20101018", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nrrodriguez left at 00:42 (Quit: rrodriguez  \njvdrean left at 00:53 (Quit: Leaving.  \njvdrean joined #xwiki at 00:54  \njvdrean left at 01:01 (Quit: Leaving.  \ntmortagne joined #xwiki at 01:32  \ntmortagne left at 01:32 (Client Quit  \nsdumitriu left at 03:44 (Quit: Leaving.  \nvenkatesh joined #xwiki at 04:41  \nvenkatesh left at 04:43 (Client Quit  \nvenkatesh joined #xwiki at 04:44  \nabusenius left at 05:03 (Ping timeout: 265 seconds  \nSvenDowideit left at 06:02 (Ping timeout: 255 seconds  \nSvenDowideit joined #xwiki at 06:06  \nSvenDowideit left at 06:18 (Quit: ZNC - http://znc.sourceforge.net  \nSvenDowideit joined #xwiki at 06:19  \nvenkatesh left at 06:31 (Ping timeout: 272 seconds  \nvenkatesh joined #xwiki at 06:46  \nrrodriguez joined #xwiki at 06:57  \nSvenDowideit left at 06:58 (Changing host  \nSvenDowideit joined #xwiki at 06:58  \nrrodriguez left at 07:18 (Quit: rrodriguez  \nrrodriguez joined #xwiki at 07:36  \nmflorea joined #xwiki at 07:59  \nasrfel joined #xwiki at 08:27  \nsburjan joined #xwiki at 08:39  \nrrodriguez left at 08:41 (Quit: rrodriguez  \nrrodriguez joined #xwiki at 08:44  \nrrodriguez left at 08:54 (Ping timeout: 245 seconds  \njvelociter joined #xwiki at 09:16  \nsilviar joined #xwiki at 09:29  \nDenis joined #xwiki at 09:35  \narkub joined #xwiki at 09:35  \nvmassol1 - (09:36): good morning  \nvmassol1 - (09:37): a full coverage report can now be found here: http://maven.xwiki.org/site/clover/  \nvmassol1 - (09:37): 53.2%  \ntmortagne joined #xwiki at 09:41  \nsburjan - (09:49): and the ideal value would be aprox. 80% ?  \nvmassol1 - (09:52): yes between 70-80%  \nvmassol1 - (09:53): it can be higher but the cost to reach higher level is usually too high compared to the real benefits (ROI too low basically), unless you do test driven developmment (TDD)  \nvmassol1 - (09:53): when doing TDD by definition you get 100%  \nvmassol1 - (09:53): (which doesn't mean your code will work btw but that's another story)  \nsburjan - (09:55): and how can we rise that 53.2% to 70-80% ?  \nvmassol1 - (09:58): by checking where we miss tests and write them  \nvmassol1 - (09:58): + remove old dead code  \nvmassol1 - (09:58): sburjan: this is really a good thing for you since you can know see exactly where we miss tests  \nsburjan - (09:58): yes !  \nvmassol1 - (09:59): I'll give you one example  \nsburjan - (09:59): but I guess we need JUnit tests more instead of ui-tests  \nvmassol1 - (09:59): both  \nvmassol1 - (09:59): for example click on com.xpn.web  \nvmassol1 - (09:59): package in the cloud in the tree map  \nvmassol1 - (10:00): you'll see that we have 0 tests for the portlet mode  \nsburjan - (10:00): yes  \nvmassol1 - (10:00): and that there are some actions that are never tested  \nvmassol1 - (10:00): so either they're useless and should be removed  \nvmassol1 - (10:00): or they need tests  \nvmassol1 - (10:00): etc  \nvmassol1 - (10:00): (was just an example)  \njvdrean joined #xwiki at 10:00  \nsburjan - (10:03): yes, I'm still trying to figure out where we need unit tests and where we need functional/ui-tests  \nsburjan - (10:03): I guess for portlet mode, for example, we need unit tests  \nvmassol1 - (10:03): yep not always easy  \nvmassol1 - (10:03): the rule is simple  \nvmassol1 - (10:03): unit tests should be preferred  \nvmassol1 - (10:03): since they run faster, can be controlled more, etc  \nsburjan - (10:04): after i read the book, I should be able to try to write some  \nvmassol1 - (10:04): but since we have old code writing functional tests for old code is usually simpler  \nvmassol1 - (10:04): in any case don't decide by yourself, make some proposal  \nvmassol1 - (10:04): and we can help you  \nvmassol1 - (10:04): you need a good knowledge of the existing code base to decide  \nvmassol1 - (10:04): so hard to decide by yourself  \nsburjan - (10:05): yes, that is true. Most of the code I look at on the xwiki platform ... I can't figure it what it does exactly.  \nsburjan - (10:05): i still don't have a solid understanding of how core is organized and works  \nsburjan - (10:05): but working on it  \narkub left at 10:23 (Ping timeout: 240 seconds  \narkub joined #xwiki at 10:39  \nvmassol1 - (10:51): mflorea: good morning. AFAIK 2.5 hasn't been released yet\u2026 :)  \nmflorea - (10:52): vmassol1: good morning. They why was the announcement mail sent?  \nvmassol1 - (10:52): for RC1  \nmflorea - (10:53): oh, I'm stupid  \nvmassol1 - (10:53): :)  \nmflorea - (10:53): right, I was thinking at something else, reverting..  \nsburjan - (10:58): RC1 was released in the weekend  \nvmassol1 - (10:59): final is planned for the 25th but we hsould start the release around this Thursday morning to be sure we'll release on time on the 25th  \nvmassol1 - (10:59): this means we still have 2-3 days to fix critical bugs  \nvmassol1 - (10:59): it also means we need a lot of testing right now on RC1  \nvmassol1 - (11:00): sburjan: we need your help there!  \nsburjan - (11:00): I know  \nsburjan - (11:00): I'm here :)  \nvmassol1 - (11:00): cool :)  \nsburjan - (11:01): gonna start testing in 1h ...  \nsburjan - (11:01): (atm reporting some bugs on other projects)  \nEnygma` joined #xwiki at 11:02  \narkub left at 11:13 (Ping timeout: 252 seconds  \nmflorea left at 11:19 (Quit: Leaving.  \nsburjan - (11:25): vmassol1: huge +1 for the com.xpn -> org.xwiki proposal. I won't vote on list since I'm not a committer, so my +1 doesnt count  \nvmassol1 - (11:26): sburjan: you can vote  \nvmassol1 - (11:26): it just won't be binding but it's useful and will be taken into account  \nvmassol1 - (11:26): you can and you should vote when you feel concerned by votes  \nsburjan - (11:29): okay. I'll keep that in mind. I'll express my opinions from now on (where I feel the need)  \nvmassol1 - (11:29): cool  \nsburjan - (11:33): I remember I proposed this 3 months ago, but I was told that we can't break the API by changing the package names  \nrrodriguez joined #xwiki at 11:33  \nsburjan - (11:34): and we need to do this .. slowly in time  \nvmassol1 - (11:41): sburjan: you proposed this for XE?  \nvmassol1 - (11:41): are you sure you didn't propose this for xwiki-core?  \nvmassol1 - (11:42): there's no API in XE  \nsburjan - (11:45): yes, for xwiki-core  \narkub joined #xwiki at 11:49  \narkub left at 11:58 (Ping timeout: 264 seconds  \nmflorea joined #xwiki at 12:14  \nsdumitriu joined #xwiki at 12:18  \nrrodriguez left at 12:23 (Read error: Operation timed out  \narkub joined #xwiki at 12:24  \nrrodriguez joined #xwiki at 12:26  \nvmassol1 - (12:27): note that for clover I've realized that office importer functional tests were not executed since they're not part of the build...  \nsdumitriu - (12:28): vmassol1, tmortagne: Ping  \nvmassol1 - (12:29): sdumitriu: pong  \nsdumitriu - (12:29): Someone or something messed up www.myxwiki.org  \nsdumitriu - (12:29): Looks like someone did an import of the default xar without unchecking the modified documents  \nsdumitriu - (12:30): On the 14th  \nsdumitriu - (12:30): And it wasn't me  \nsdumitriu - (12:30): Do you know who is responsible?  \nsdumitriu - (12:31): And there's no history, either, so I can't revert to the old versions  \nvmassol1 - (12:31): sdumitriu: on the main wiki?  \nvmassol1 - (12:31): (it wasn't me either)  \nsdumitriu - (12:31): Yes  \nvmassol1 - (12:32): indeed, very bad  \nsdumitriu - (12:32): I tried to fix it a bit (changed Admin password, gave admin/PR to the staff)  \nvmassol1 - (12:32): we need to ask infra for a backup restore IMO  \nvmassol1 - (12:33): we need to remember if we've created any new wiki during that period  \nsdumitriu - (12:33): No  \nvmassol1 - (12:33): otherwise we would loose the wiki descriptors  \nvmassol1 - (12:33): sdumitriu: is the problem \"just\" on the main wiki ?  \nsdumitriu - (12:33): Looks like it  \nsdumitriu - (12:34): incubator is OK  \njvdrean left at 12:35 (Quit: Leaving.  \narkub left at 12:38 (Quit: Leaving  \njvdrean joined #xwiki at 12:45  \njvelociter - (12:59): sdumitriu: I see history, for example on Main.WebHome  \njvelociter - (13:00): there are 3 versions, one from 2009  \nsdumitriu - (13:00): Yes, but it's not the history that we want  \nsdumitriu - (13:00): The 2009 version is the default version  \njvelociter - (13:00): wdym ?  \njvelociter - (13:00): ah  \nsdumitriu - (13:00): And the two versions from the 14th are imports only  \nsdumitriu - (13:01): And given that it was imported twice, I suspect that someone did 3 imports  \nsdumitriu - (13:01): One with \"as backup\", which preserved the date from the xar  \nsdumitriu - (13:01): And two without backup, which used the current date  \nsdumitriu - (13:03): It might have been a google bot  \nsdumitriu - (13:03): But it means that rights were really messed up  \nvmassol1 - (13:24): jvelociter: we don't have any backup for myxwiki.org? I was sure we talked about it in the past  \nvmassol1 - (13:24): I was sure we had backups  \njvelociter - (13:25): vmassol1: honestly I don't recall  \njvelociter - (13:25): but I'll check  \nvmassol1 - (13:26): thanks  \nvenkatesh left at 13:30 (Remote host closed the connection  \nesdaniel joined #xwiki at 13:31  \nesdaniel - (13:32): good afternoon... how do I link to an attachment from a different page to the page I'm editing, pls?>  \nvmassol1 - (13:32): esdaniel: in 2.0 syntax?  \nvmassol1 - (13:32): attach:wiki:space.page@filename  \nvmassol1 - (13:33): esdaniel: see http://platform.xwiki.org/xwiki/bin/view/Main/XWikiSyntax#HLinks  \nesdaniel - (13:34): vmassol: thanks  \nesdaniel - (13:45): vmassol: not working, what's wrong with this: [Bylaws>Main:[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)]  \nsdumitriu - (13:47): That's the old xwiki/1.0 syntax  \nesdaniel - (13:47): ah i'm mixing old and new then  \nesdaniel - (13:48): what would be correct link?  \nvmassol1 - (13:48): esdaniel: see http://platform.xwiki.org/xwiki/bin/view/Main/XWikiSyntax#HLinks  \nsdumitriu - (13:48): What's the syntax of the document?  \nsdumitriu - (13:48): 2.0 or 1.0?  \nesdaniel - (13:49): bloody good question really... we migrated from 1.0 to 2.0 however unlike an xml doc that tells you at top what verion it is i hav eno clue  \nesdaniel - (13:50): i just want to link to an attachment in another part of the wiki  \nsdumitriu - (13:50): In edit mode, the syntax should be printed in a panel on the right  \nesdaniel - (13:50): cool, ok it's set to 1.0  \nesdaniel - (13:51): albeit i had the editor maximized just then, so had to unmaximize to check that  \nsdumitriu - (13:51): Then you might be interested in this: http://code.xwiki.org/xwiki/bin/view/Macros/AttachMacro  \nvmassol1 - (13:51): esdaniel: then read http://platform.xwiki.org/xwiki/bin/view/Main/XWikiSyntax#HLinks and use the xwiki 1.0 column  \nvmassol1 - (13:51): I'm really interested in knowing what's not clear in http://platform.xwiki.org/xwiki/bin/view/Main/XWikiSyntax#HLinks to improve it if need be  \nesdaniel - (13:51): you mean this of course: {attach:text|document=Space.Page|file=img.png}  \nsdumitriu - (13:51): Yes  \nesdaniel - (13:52): well what was clear was you pointed me at that link 3 times  \nvmassol1 - (13:52): yes  \nesdaniel - (13:52): i do read what i'm told  \nesdaniel - (13:52): whether or not i understand is a different question ;-)  \nvmassol1 - (13:52): so was the pb just that you didn't know you were using the 1.0 syntax?  \nvmassol1 - (13:52): or something else?  \nesdaniel - (13:53): problem was that i used google to find the page you kept pointing me at before i came here, i failed to apply because yes, tried to use 2.0 instead of 1.0 as i was unaware of this  \nvmassol1 - (13:53): (btw if you click help in your wiki you should get that page too)  \nesdaniel - (13:53): now need to see if can correctly apply 1.0  \nvmassol1 - (13:53): hmm one thing we could do I guess in the help of XE  \nvmassol1 - (13:53): is automatically set the syntax help page to the currnets yntax  \nesdaniel - (13:53): well you could have migrated all the pages to 2.0 syntax  \nvmassol1 - (13:53): ie have one page per syntax  \nvmassol1 - (13:54): esdaniel: yes we're doing that  \nvmassol1 - (13:54): esdaniel: which page are you editing?  \nvmassol1 - (13:54): (you seem to hint that it's a default page)  \nvmassol1 - (13:56): s/yes we're doing that/yes we're doing that but it's taking us longer than it should have, we need to work more actively on it/  \nvmassol1 - (13:56): (we juste migrated the admin app to 2.0 syntax FWIW)  \nvmassol1 - (13:56): s/juste/just/  \nesdaniel - (13:59): ok, cool, link sorted, it was the home page  \nvmassol1 - (13:59): the home page has been migrated to 2.0 syntax a long time ago  \nvmassol1 - (14:00): you probably didn't update it on your wiki  \nvmassol1 - (14:00): (which is fine since it's your home page)  \nesdaniel - (14:00): if you tell me i can't drive my car because there's no petrol i can accept that  \nesdaniel - (14:01): to tell me i have to update a page to another syntax version is all together a different request  \nvmassol1 - (14:01): hehe\u2026 nice timely example  \nvmassol1 - (14:01): you don't have to  \nesdaniel - (14:01): anyhow, no worries  \nvmassol1 - (14:01): it's your choice  \nesdaniel - (14:01): appreciate the immediacy and availability of the help, you got me movig again, thanks  \nesdaniel - (14:01): bye for now  \nesdaniel left #xwiki at 14:01  \nsdumitriu - (14:02): Indeed, FYI the whole Administration application was migrated  \nsdumitriu - (14:02): Panels should be committed soon  \nsdumitriu - (14:02): I'm no Statistics now  \nsdumitriu - (14:02): And that's about it  \nvmassol1 - (14:02): cool  \nsdumitriu - (14:03): s/no/on  \nvmassol1 - (14:03): about it = ?  \nvmassol1 - (14:03): I thought there were like 60-80 pages remaining  \nsdumitriu - (14:03): There are no other applications bundled by default still in the 1.0 syntax  \nsdumitriu - (14:03): There are a few remaining documents  \nsdumitriu - (14:03): Yes, most of those 60 are panels  \nvmassol1 - (14:03): i have a script to find this out \u00a0btw (you probably know)  \nsdumitriu - (14:03): Yes, I have one too  \nvmassol1 - (14:04): http://code.xwiki.org/xwiki/bin/view/Snippets/SyntaxesDistributionChartSnippet  \nvmassol1 - (14:04): ok  \nsdumitriu - (14:04): There's a problem with statistics, though  \nsdumitriu - (14:04): The 2.0 chart macro is not good enough  \nvmassol1 - (14:05): ahah good to know  \nvmassol1 - (14:05): what's missing?  \nsdumitriu - (14:05): I think it doesn't support timeline charts  \nabusenius joined #xwiki at 14:05  \nsdumitriu - (14:05): I don't remember  \nvmassol1 - (14:05): no diea  \nvmassol1 - (14:05): idea  \nsdumitriu - (14:05): I'll have to check  \nsdumitriu - (14:07): Indeed, I didn't see any problems when building with maven 2.2.1 and java 1.6, the comment on top of the Building page should be fixed  \nvmassol1 - (14:07): ok removing the warning  \ncjdelisle - (14:08): Hello all.  \ncjdelisle - (14:08): Anyone have any opinions about \"[proposal] New database table binarychunk, interface c.x.x.store.BinaryStore, and interface c.x.x.doc.BinaryObject\"  \nsdumitriu - (14:08): cjdelisle: Still digesting it, but I'm not convinced about it  \nvmassol1 - (14:09): sdumitriu: you remember the jira issue?  \nsdumitriu - (14:09): vmassol1: For what?  \ncjdelisle - (14:09): Cool. Glad to see it's not forgotten.  \nvmassol1 - (14:09): sdumitriu: bogdan mentioned a jira issue in his comment  \nsdumitriu - (14:09): Nope  \nvmassol1 - (14:10): ok I'll assume there isn't one  \nsdumitriu - (14:10): vmassol1: You should use comment replies  \nvmassol1 - (14:10): sdumitriu: indeed  \ncjdelisle - (14:12): I have some code here which drops down from hibernate to jdbc and does a manual insert (for streaming). Should I hold the commit and try to get some review of the patch?  \nsdumitriu - (14:13): Bypassing hibernate is not a good option at the moment  \nsdumitriu - (14:13): Are you sure it will work with all databases?  \ncjdelisle - (14:13): (The added table would replace the hibernate bypass but it looks like that will take a while to decide on)  \ncjdelisle - (14:14): It's pretty simple. Just a prepared statement with an insert.  \nsdumitriu - (14:14): You should try oracle and mssql first, but none of the developers has one of those around  \ncjdelisle - (14:15): I could install oracle here. Mssql would be more difficult.  \nvmassol1 - (14:15): it's not oracle or mssql or ...  \nvmassol1 - (14:15): it's all existing DBs  \nvmassol1 - (14:15): existing and future  \nsdumitriu - (14:15): I tried several times to install Oracle Express, but I think they make it a huge pain on purpose, so that you just go and give them a boat of money to install it for you  \ncjdelisle - (14:15): hehe  \nvmassol1 - (14:15): it's better to delegate that testing work to someone else  \nvmassol1 - (14:15): hibernate community will do that sort of testing  \nvmassol1 - (14:16): we already have a lot of work here  \nvmassol1 - (14:16): :)  \ncjdelisle - (14:16): Hibernate doesn't support streaming --> limited attachment size.  \ncjdelisle - (14:16): Or add a db table (proposal)  \nvmassol1 - (14:16): what do they say when you ask them how to implement this feature?  \ncjdelisle - (14:17): I haven't asked, I can ask but are we able to upgrade hibernate or are we locked in to a version?  \nvmassol1 - (14:17): we can upgrade  \nvmassol1 - (14:17): it's actually a good thing to do  \nvmassol1 - (14:17): I created a jira issue a few days ago  \nvmassol1 - (14:17): to uprgade to the latest version btw  \ncjdelisle - (14:17): I know that the xml mappings are deprecated now, not sure when they'll be removed.  \nvmassol1 - (14:18): then we need to depreacte them on our side too  \nvmassol1 - (14:18): and start using the proper way, whatever it is  \nvmassol1 - (14:18): cjdelisle: hibernate is pretty well used  \ncjdelisle - (14:19): Yes but we use a lot of features which may change in newer versions. Maybe I'm wrong.  \nvmassol1 - (14:19): in any case it's always better to follow upgrades  \ncjdelisle - (14:19): +1  \ncjdelisle - (14:20): I tested the streaming code which I have already and it makes no difference in attachment size limits. I have code which improves them a lot but it uses jdbc to get streaming. That could be avoided but would require the proposed added db table.  \nvmassol1 - (14:21): cjdelisle: I think it would be good to see what hibernate dev team has to say about this  \nvmassol1 - (14:21): they're the experts after all  \nvmassol1 - (14:21): I don't like too much the added table too to be honest  \ncjdelisle - (14:22): Why is that? Because it breaks up the content?  \nvmassol1 - (14:22): because it's additional work  \nvmassol1 - (14:22): and something we shouldn't have to think about  \nvmassol1 - (14:23): that's why we use frameworks, to delegate the work to them when it's not our code business  \nvmassol1 - (14:23): s/code/core/  \ncjdelisle - (14:23): Well we can hide from the low level but then we have bad performance.  \nvmassol1 - (14:24): yes I understand  \nvmassol1 - (14:24): I just want to be sure that's true  \nvmassol1 - (14:24): I mean people must have reported this to the hib team probably so either they  \nvmassol1 - (14:24): decided not to address it for some good reason  \nvmassol1 - (14:24): (would be good to know)  \nvmassol1 - (14:24): or they're working on it  \nvmassol1 - (14:24): (good to know too)  \ncjdelisle - (14:25): Streaming is difficult. Not supported well in the db itself.  \nvmassol1 - (14:25): ok so that's a good reason not to do it maybe  \nvmassol1 - (14:25): ?  \ncjdelisle - (14:27): Postgres blows up if streamed >500MB of content.  \ncjdelisle - (14:27): The proposed table would make it <1MB chunks so it wouldn't really be streaming at the db level.  \nvmassol1 - (14:27): so  \nvmassol1 - (14:27): it means  \nvmassol1 - (14:27): we're using the wrong approach  \nvmassol1 - (14:27): and should store attachments in the file system  \nvmassol1 - (14:27): for ex  \nvmassol1 - (14:27): rather than trying to brute force it in the DB  \nvmassol1 - (14:27): (at least for large attachments)  \nvmassol1 - (14:27): I'm just making this up  \nvmassol1 - (14:27): since I don't really know anything  \nvmassol1 - (14:27): I just to be sure we've thought about everyhing  \nvmassol1 - (14:27): before we decide on something that is relatively complex  \ncjdelisle - (14:28): Filesystem storage is an option but we lose the power of \"dump db, that's all there is\".  \ncjdelisle - (14:29): I think that's a big + for an admin to be able to get a .sql file and know that there isn't anything else hiding on the system.  \nsdumitriu - (14:39): sburjan, silviar: Can you start preparing the 2.5 release notes?  \nlucaa joined #xwiki at 14:39  \nsburjan - (14:39): whan are we launching 2.5 final ?  \nsburjan - (14:39): \\*when  \nvmassol1 - (14:40): sburjan: see message from ealier today  \nvmassol1 - (14:40): let me try to find it again  \nsburjan - (14:40): I'll look for it  \nsdumitriu - (14:40): The initial proposed date is 25th  \nsburjan - (14:40): yse  \nsburjan - (14:40): yes  \nvmassol1 - (14:40): here:  \nvmassol1 - (14:40): vmassol1  \nvmassol1 - (14:40): 10:59  \nvmassol1 - (14:40): final is planned for the 25th but we hsould start the release around this Thursday morning to be sure we'll release on time on the 25th  \nvmassol1 - (14:40): 10:59  \nvmassol1 - (14:40): this means we still have 2-3 days to fix critical bugs  \nvmassol1 - (14:40): 10:59  \nvmassol1 - (14:40): it also means we need a lot of testing right now on RC1  \nvmassol1 - (14:40): 11:00  \nvmassol1 - (14:40): sburjan: we need your help there!  \nvmassol1 - (14:40): sdumitriu: we should start the release this Thursday IMO  \nsburjan - (14:41): sdumitriu: can you create the page with the issues to be documented ? (I don't have the rights to create that page)  \nvmassol1 - (14:41): in order to be able to release on the 25th  \nsdumitriu - (14:41): sburjan: Final release notes is mostly aggregate of M1+M2  \nsburjan - (14:41): okay. so I'll merge in a cool manner the two pages  \nsdumitriu - (14:41): Yes  \nvmassol1 - (14:42): sdumitriu: do you agree?  \nsdumitriu - (14:43): vmassol1: Yes  \nsdumitriu - (14:43): Absolutely  \nvmassol1 - (14:43): ok cool  \nsburjan - (14:43): Observation : http://www.xwiki.org/xwiki/bin/view/Main/ReleaseNotesXWikiEnterprise25RC1 is not linked by it's parent  \nsburjan - (14:44): and sdumitriu : create this page so i can start a little bit later doing the release notes. http://www.xwiki.org/xwiki/bin/view/Main/ReleaseNotesXWikiEnterprise25  \nsdumitriu - (14:44): Why can't you create it?  \nsburjan - (14:46): It seems you locked me :)  \nsburjan - (14:46): but last time i tried to create this I hadn't rights .. and afair tmortagne told me that only the release manager can create those  \nsdumitriu - (14:47): sburjan: Created  \nsburjan - (14:47): sdumitriu: thanks. I'll start working on that asap  \ncjdelisle - (14:47): IIRC I gave permission to everyone on that page.  \ncjdelisle - (14:47): Or maybe I reset it, can't remember.  \nsburjan - (14:48): cjdelisle: don't you remember the talk we had last time ? maybe then you gave permissions to everyone  \ncjdelisle - (14:49): If it gets defaced, it's my fault. If you don't have permission because it was set back to committers only, it's my fault.  \ntmortagne - (14:49): sburjan: i doubt it \u00a0was about http://www.xwiki.org/xwiki/bin/view/Main/ReleaseNotes\\* pages, maybe http://www.xwiki.org/xwiki/bin/view/Main/ReleaseNotes page  \ntmortagne - (14:50): and what i told you is that release manager add the new release in http://www.xwiki.org/xwiki/bin/view/Main/ReleaseNotes when it's released  \ntmortagne - (14:50): it was not about rights but about timing  \nsburjan - (14:50): well now I have rights on all of them, which is good  \nsburjan - (14:51): ok guys. bbl  \nsburjan left at 14:52 (Quit: Ex-Chat  \ncjdelisle - (14:56): IIRC mssql jdbc driver takes streams and converts them into byte arrays before saving so it has no effect in that case.  \ncjdelisle - (15:00): This might be possible using Hibernate.createBlob which will also require a new db table/column and I don't think it's as assured as my proposal.  \ncjdelisle - (15:01): I have heard some horror stories about oracle not streaming blobs correctly.  \ncjdelisle - (15:01): If I write it, it will work ;)  \nsdumitriu - (15:12): vmassol1: WDYT about the 2.0 version for migrated apps?  \nvmassol1 - (15:13): sdumitriu: I don't really see the relationship. I'm not too fond of it.  \nvmassol1 - (15:13): for me 2.0 means a big change that is not backward compat  \nvmassol1 - (15:13): I won't oppose it though  \nvmassol1 - (15:13): we need to finish the discussion proposed by caleb It hink  \nsdumitriu - (15:13): Well, the admin app at least will see a big change  \nvmassol1 - (15:14): regarding aligning the versions  \nvmassol1 - (15:14): unless the discussion is over  \nvmassol1 - (15:14): (not sure)  \nsdumitriu - (15:14): Right, I have to reply on that as well  \ncjdelisle - (15:14): I wouldn't call it over. More like hung... (between round 1 and round 2? ;) )  \nsdumitriu - (15:15): Yeah, waiting for my big -1  \nsdumitriu - (15:15): :D  \ncjdelisle - (15:16): hehe I would think you being the release manager would want nothing more than to make one branch and be done.  \nvmassol1 - (15:17): I also would like more time to think about it but haven't set my head to it yet  \nvmassol1 - (15:17): (so I've just replied to the thread without thinking about what a good solution might be)  \ncjdelisle - (15:17): I agree it definitely has some drawbacks but I think it's a big leap toward the mythical pushbutton release.  \ncjdelisle - (15:19): any opinions on \"[proposal] Begin using database column names which match the names of the object properties and table names which match the class name.\" before I go ahead and add the comment to the mapping files?  \ncjdelisle - (15:23): https://forum.hibernate.org/viewtopic.php?t=936233 <-- apparently blob handling is a db compatibility nightmare.  \ncjdelisle - (15:25): hmmm hibernate.org uses php.  \nsdumitriu - (15:28): Basically, there are two models:  \nsdumitriu - (15:28): The KDE model, and the Maven model  \nsdumitriu - (15:29): Which one is better for us?  \nsdumitriu - (15:29): I say the Maven model, looking at the future  \nsdumitriu - (15:29): Although we're closer to the KDE release model right now  \ncjdelisle - (15:29): KDE = everything has one version?  \nsdumitriu - (15:29): Yes  \nvmassol1 - (15:30): we seem to be close to the eclipse model no?  \nvmassol1 - (15:30): modules can be released separately and then there's a train release  \nsdumitriu - (15:31): Yes, KDE/Maven were more like the two extremes  \nsdumitriu - (15:31): We're somewhere between, as is Eclipse  \ncjdelisle - (15:31): If we were to embrace to the maven model then it would make sense that modules were released at different times and when XE was released it just took the latest versions of the existing modules.  \nsdumitriu - (15:31): Yes, and this is the goal  \nsdumitriu - (15:31): But we need the extension manager for this  \ncjdelisle - (15:32): So then each application is released by it's owner when he choses and the \"release manager\" has a much smaller job.  \nsdumitriu - (15:32): Once the platform is more stable, and applications are more stable as well, we won't be bound to group releases  \nsdumitriu - (15:32): Yep  \nsdumitriu - (15:32): Actually, the same is true now as well  \ncjdelisle - (15:32): \"Once the platform is more stable\" when?  \nsdumitriu - (15:33): Well, one milestone would be no more xwiki-core  \ncjdelisle - (15:33): Hoe many years?  \nsdumitriu - (15:33): Then we can also release individual modules as needed  \nvmassol1 - (15:34): sdumitriu: not sure we want that although we could do it  \nsdumitriu - (15:34): Like, some are more stable, and don't really need a version increase so often  \nsdumitriu - (15:34): Others are actively maintained  \nsdumitriu - (15:34): Yes, we could, but that doesn't mean that we will  \nvmassol1 - (15:34): sdumitriu: at least before we think about it we would need release tools  \nvmassol1 - (15:35): (better release tools)  \ncjdelisle - (15:35): what? find -exec sed isn't a good enough release tool?  \ncjdelisle - (15:35): ;)  \nvmassol1 - (15:36): cjdelisle: if you want to be the next release manager let us know :)  \ncjdelisle - (15:37): I'm afraid of releasing because the job looks horrible.  \nflorinciu joined #xwiki at 15:37  \ncjdelisle - (15:38): That's why I proposed this change in the first place, I'd like to try a release but I'm scared of the current process.  \nsdumitriu - (15:39): It's not that hard  \nsdumitriu - (15:39): It's mostly boring  \ncjdelisle - (15:40): and takes about 2 days.  \ntmortagne - (15:40): well it's not really taking that long technically  \ntmortagne - (15:40): the worst part (for me) is paperwork  \ncjdelisle - (15:42): IMO the options are: let each project be released on it's own and then the release manager only handles XE. Or release everything as a single project.  \ntmortagne - (15:44): cjdelisle: \"let each project be released\" for me it's already the case in theory simply because they don't have the same version, thing is it's less work to release the dependencies of XE when we need them, that's all  \nasrfel left at 15:45 (Quit: Leaving.  \ncjdelisle - (15:45): Well then it's as if each project elects the same release manager and he just happens to release all of them at once.  \ncjdelisle - (15:45): That seems like too much work for one man.  \ntmortagne - (15:46): \"Well then it's as if each project elects the same release manager and he just happens to release all of them at once.\" yes it is, we have XWiki release managers not XE release managers  \ntmortagne - (15:46): cjdelisle: again release an application is nothing, most of the work is around XE  \ncjdelisle - (15:47): Then IMO \"XWiki\" should be one project.  \ntmortagne - (15:47): release an application really only mean executing: mvn release:prepare && mvn release:perform and nothing more  \ncjdelisle - (15:49): One release manager, one release cycle, \"if it walks like a duck and quacks\", it's one project.  \ntmortagne - (15:51): cjdelisle: actually it's not exactly true  \ntmortagne - (15:51): for example you have applications shared between two branches of XE  \ntmortagne - (15:52): which are released by two different release manager most of the time  \njvdrean left at 15:57 (Read error: Connection reset by peer  \nrrodriguez left at 16:00 (Quit: rrodriguez  \nrrodriguez joined #xwiki at 16:02  \nrrodriguez left at 16:02 (Client Quit  \njvdrean joined #xwiki at 16:16  \ncjdelisle - (16:21): Got a response from the Hibernate people.  \ncjdelisle - (16:23): For db streaming in hibernate, switch column type to blob and use Hibernate.createBlob.  \ncjdelisle - (16:23): But that is not supported well by different dbs.  \ncjdelisle - (16:25): The option they recommended is a file on the filesystem because the db will be smaller and faster.  \ntmortagne - (16:25): If i remember well Denis told me that mysql was just emulating the streaming for example (i.e. load everything in a buffer in memory and then provide a stream)  \ntmortagne - (16:26): when he worked of the first attachment memory exhaustion improvement pass  \ncjdelisle - (16:26): That's an \"OK\" case, the worst case is a db just doesn't support it (fails).  \ntmortagne - (16:26): indeed  \ncjdelisle - (16:26): I was given this: http://in.relation.to/Bloggers/PostgreSQLAndBLOBs  \ncjdelisle - (16:27): IMO blobs look like a nightmare.  \ncjdelisle - (16:28): So. Option1 = store all big things on the filesystem.  \ncjdelisle - (16:28): + database is fast and large content loads fast.  \nsdumitriu - (16:28): I have FSAttachmentStorage almost done  \nsdumitriu - (16:29): Just needs some cleanup  \ncjdelisle - (16:29): - mysql\\_dump fails  \ncjdelisle - (16:29): sdumitriu, Am I stepping on your toes with my changes?  \nsdumitriu - (16:29): No  \nsdumitriu - (16:29): Actually depends  \nsdumitriu - (16:29): If you change the interfaces, yes a bit  \ncjdelisle - (16:32): I don't want to work on attachments if you are going to be working there too.  \ncjdelisle - (16:33): I already have them storing to temp files and if you have store in filesystem code then that's already redundant.  \ncjdelisle - (16:35): Since how long ago have you been working on this?  \nDenis - (16:41): cjdelisle: IMO, choosing where to store attachment should be flexible  \nsdumitriu - (16:41): Since August  \nsdumitriu - (16:42): But it's been left there since then  \ncjdelisle - (16:43): +1 flexible. Maybe have the class name to use as the persistence engine stored in the config file.  \ncjdelisle - (16:44): sdumitriu, Are you working on storage of the attachment archive and deleted attachment as well?  \nsdumitriu - (16:45): Denis: Yes, it's an alternative implementation for XWikiAttachmentStore  \nsdumitriu - (16:45): Yep, that's how it is already  \nsdumitriu - (16:45): Yes  \ntmortagne - (16:45): \"Maybe have the class name to use\", make persistence engine component and use role hint is better  \nsdumitriu - (16:47): tmortagne: This is already the case  \ncjdelisle - (16:47): Option2 is my email proposal. According to the Hibernate people, that can be made transparent with custom types but they didn't like the idea due to performance costs.  \ntmortagne - (16:47): sdumitriu: ok cool  \nsdumitriu - (16:50): setAttachmentStore(Utils.getComponent(XWikiAttachmentStoreInterface.class, Param(\"xwiki.store.attachment.hint\")));  \ncjdelisle - (16:50): re Option1: We can probably use a generic filesystem stored binary type which on the outside looks a lot like my proposal.  \nsdumitriu - (16:51): cjdelisle: My current implementation stores them as-is  \nsdumitriu - (16:51): Meaning that if you store a text file, you can edit it on the filesystem  \ncjdelisle - (16:52): But it must store the history and DeletedAttachment as well, do you use a different class to manage each?  \nsdumitriu1 joined #xwiki at 16:54  \nsdumitriu left at 16:55 (Disconnected by services  \nsdumitriu1 is now known as sdumitriu ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \ntmortagne left at 16:57 (Quit: Leaving.  \ntmortagne joined #xwiki at 16:57  \nmflorea - (16:58): vmassol1: ludovic found this bug http://jira.xwiki.org/jira/browse/XWIKI-5588 . Should I commit the fix now on 2.5 or wait after 2.5 final is release and commit for 2.5.1?  \nvmassol1 - (16:58): mflorea: how critical is it? checking the issue  \nvmassol1 - (16:59): is it a regression?  \nmflorea - (16:59): basically you can't left/right align an image and also put a link around it  \nmflorea - (16:59): no, it is pretty old, just that no one discovered it so far..  \ncjdelisle - (17:00): If we accept storage of things on the filesystem, we can log changes to everything. The eventual hope would be to be able to rebuild a completely crashed database.  \ncjdelisle - (17:00): bbiab  \nvmassol1 - (17:00): the question is whether we want to accept changes to a final without going through a RC  \ntmortagne left at 17:00 (Client Quit  \ncjdelisle - (17:00): +1 for \"going through a RC\"  \ntmortagne joined #xwiki at 17:01  \nvmassol1 - (17:01): cjdelisle: you need to think about the RM too  \nvmassol1 - (17:01): unless you want to be the RM  \nvmassol1 - (17:01): we have one week left before final  \nvmassol1 - (17:01): so going through a RC means release RC2 sometimes tomorrow  \nmflorea - (17:01): vmassol1: for instance, by looking at the code this bug was present in 2.0 too  \nvmassol1 - (17:02): (RM = Release Manager)  \ncjdelisle - (17:02): I do want to do a release but I hope it can be made to take < 1 day.  \nvmassol1 - (17:02): it can but it's still a lot of work  \ncjdelisle - (17:03): bb  \nvmassol1 - (17:03): sdumitriu: wdyt?  \nvmassol1 - (17:03): tmortagne: wdyt?  \nabusenius - (17:04): are security bugs like http://jira.xwiki.org/jira/browse/XABLOG-111 severe enough to be included into 2.5?  \nsdumitriu - (17:04): There's already a change for 2.5  \nsdumitriu - (17:05): +1 for including XABLOG-111  \ntmortagne - (17:05): vmassol1: \"wdyt\" about cjdelisle as RM ?  \nvmassol1 - (17:05): tmortagne: nope  \nvmassol1 - (17:06): tmortagne: about fixing things for the final without going through a RC  \nvmassol1 - (17:06): or  \nabusenius - (17:06): a \"nice\" fix for XABLOG-111 its quite big  \nvmassol1 - (17:06): for me it's too late for XABLOG-111  \nvmassol1 - (17:06): it should \u00a0have been raised before for 2.5  \nvmassol1 - (17:06): we have a lot of important issues  \nvmassol1 - (17:06): we should only include blocking one IMO  \nvmassol1 - (17:06): since RC1 has already been released  \nvmassol1 - (17:07): I dont feel XABLOG nor marius are blocking  \nvmassol1 - (17:07): s/marius/marius's  \nvmassol1 - (17:07): so personally I'd put them in 2.5.1/2.6M1  \nmflorea - (17:08): I'm fine with it (especially sine mine is an old issue that wasn't discovered until today)  \ntmortagne - (17:08): vmassol1: i will let sdumitriu decide on that since he is the release manager, I'm not -1 to put important not dangerous bugfix in 2.5 but if it's an old issue it's probably not that important and certainly not blocker  \nabusenius - (17:08): I tend to agree too, the fix can easily break blog app  \nsdumitriu - (17:10): Safer without them  \ncjdelisle - (17:22): If you want RC2 today, I will do it. As long as you don't mind a maniac at the wheel.  \nvmassol1 - (17:25): :)  \ncjdelisle - (17:26): On a similar note, I notice hudson agents have only one executor each. Was there some testing which went into picking that number?  \ncjdelisle - (17:27): I would think the way to go is start with 2x the number of cpu cores and decrease until ram depletion and swap thrashing stops.  \nrrodriguez\\_ joined #xwiki at 17:30  \nrrodriguez\\_ left at 17:35 (Client Quit  \nlucaa - (17:45): hi guys  \nlucaa - (17:45): I have an API question  \nlucaa - (17:45): well, more or less API  \nlucaa - (17:45): is it normal that  \nlucaa - (17:45): XWikiDocument#getXObjects(DocumentReference classReference)  \nlucaa - (17:45): returns null in positions of deleted documents?  \nlucaa - (17:45): deleted objects I meant  \nlucaa - (17:46): vmassol1: any idea? I know you played around with those functions...  \nlucaa - (17:46): is it normal == has it been like this forever or it's a new thing  \nlucaa - (17:46): ?  \nvmassol1 - (17:46): it's always been like this AFAIK  \ntmortagne - (17:46): yep  \nsdumitriu - (17:46): Yes, normal  \nlucaa - (17:47): actually  \nlucaa - (17:47): public Vector<BaseObject> getObjects(String className)  \nlucaa - (17:47): which is now deprecated and implemented with getXObjects...  \nlucaa - (17:47): sdumitriu: then if it's normal, we have an ugly bug in the SkinExtensionPlugin  \ncjdelisle - (17:48): If it's normal than it should be javadoc'd  \nlucaa - (17:48): namely com.xpn.xwiki.plugin.skinx.AbstractDocumentSkinExtensionPlugin#hasPageExtensions(XWikiContext context)  \nlucaa - (17:48): which gets all objects with XWikiDocuments#getObjects and doesn't check them for null  \nlucaa - (17:50): which throws NPE in the middle of  \nlucaa - (17:50): getImportString(XWikiContext context)  \nlucaa - (17:50): and fails to generate correctly the imports of scripts included with .use on pages which have a deleted SSX object  \nrrodriguez\\_ joined #xwiki at 17:53  \nsilviar left at 17:55 (Quit: Leaving.  \nflorinciu1 joined #xwiki at 18:13  \nflorinciu left at 18:16 (Ping timeout: 240 seconds  \nflorinciu1 left at 18:16 (Client Quit  \nlpereira joined #xwiki at 18:33  \nlucaa left at 18:36 (Ping timeout: 255 seconds  \nrrodriguez\\_ left at 18:39 (Quit: rrodriguez\\_  \narkub joined #xwiki at 18:45  \nvmassol1 left at 19:08 (Quit: Leaving.  \nmflorea left at 19:12 (Quit: Leaving.  \nflorinciu joined #xwiki at 19:23  \nrrodriguez\\_ joined #xwiki at 20:00  \nlucaa joined #xwiki at 20:25  \ntmortagne left at 20:31 (Quit: Leaving.  \nlucaa left at 20:33 (Ping timeout: 240 seconds  \nrrodriguez\\_ left at 20:42 (Quit: rrodriguez\\_  \nlpereira left at 21:20 (Ping timeout: 255 seconds  \nvmassol joined #xwiki at 21:33  \nlpereira joined #xwiki at 21:54  \nmflorea joined #xwiki at 21:56  \njvdrean left at 22:00 (Quit: Leaving.  \nlucaa joined #xwiki at 22:04  \nlucaa1 joined #xwiki at 22:09  \nlucaa left at 22:10 (Ping timeout: 264 seconds  \nvmassol left at 23:05 (Quit: Leaving.  \nlpereira left at 23:10 (Quit: Leaving.  \nxipe\\_ joined #xwiki at 23:12  \narkub left at 23:14 (Ping timeout: 240 seconds  \njvelociter\\_ joined #xwiki at 23:16  \nmflorea left at 23:16 (\\*.net \\*.split  \njvelociter left at 23:16 (\\*.net \\*.split  \nxipe left at 23:16 (\\*.net \\*.split  \njvelociter\\_ is now known as jvelociter ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nflorinciu left at 23:25 (Read error: Connection reset by peer  \nmflorea joined #xwiki at 23:25  \nEnygma` left at 23:34 (Ping timeout: 272 seconds  \nlucaa1 left at 23:46 (Ping timeout: 240 seconds  \nlucaa joined #xwiki at 23:48  \nmflorea left at 23:56 (Quit: Leaving.  \n\n"}