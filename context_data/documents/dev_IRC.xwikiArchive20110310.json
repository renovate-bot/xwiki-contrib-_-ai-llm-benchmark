{"id": "dev:IRC.xwikiArchive20110310", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110310", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:19\u00a0<+mflorea>\u00a0sdumitriu: enterprise build fails when both hsqldb and derby profiles are activated.  \n00:19\u00a0<+mflorea>\u00a0mvn clean install -Plicense,hsqldb -DskipTests  \n00:19\u00a0<+mflorea>\u00a0mvn clean install -Plicense,derby -DskipTests  \n00:19\u00a0<+mflorea>\u00a0both work fine, but the following fails:  \n00:19\u00a0<+mflorea>\u00a0mvn clean install -Plicense,derby,hsqldb -DskipTests  \n00:19\u00a0<+mflorea>\u00a0Note that I need the license profile to prevent enterprise web from failing (another topic) but the hsqldb build fails even without the license profile active. I'll dig more in the morning but if you have time please take a look  \n00:20\u00a0<mflorea>\u00a0has quit  \n01:09\u00a0<abusenius>\u00a0has quit  \n01:24\u00a0<jstoldt>\u00a0has joined #xwiki  \n01:26\u00a0<jstoldt|Notebook>\u00a0has quit  \n02:14\u00a0<@sdumitriu>\u00a0Hey jstoldt  \n03:16\u00a0<sburjan`>\u00a0has quit  \n03:41\u00a0<venkatesh>\u00a0has joined #xwiki  \n03:41\u00a0<venkatesh>\u00a0has quit  \n03:54\u00a0<DrLou>\u00a0has quit  \n07:08\u00a0<mflorea>\u00a0has joined #xwiki  \n07:08\u00a0<@sdumitriu>\u00a0Hey mflorea  \n07:09\u00a0<@sdumitriu>\u00a0Sent you an email  \n07:09\u00a0<+mflorea>\u00a0let me read  \n07:13\u00a0<@sdumitriu>\u00a0WDYT?  \n07:15\u00a0<+mflorea>\u00a0so did happens because we updated maven release plugin from 2.0 to 2.1? It worked when I released M2. I don't understand what has changed  \n07:15\u00a0<@sdumitriu>\u00a0Did we update the maven-release-plugin?  \n07:15\u00a0<+mflorea>\u00a0you did it in december  \n07:16\u00a0<@sdumitriu>\u00a0But that was before M2  \n07:16\u00a0<+mflorea>\u00a0but it worked fine for 3.0M1 and M2  \n07:16\u00a0<+mflorea>\u00a0yes  \n07:16\u00a0<@sdumitriu>\u00a0I looked at the commits for it  \n07:16\u00a0<@sdumitriu>\u00a0And none seems to cause this  \n07:17\u00a0<+mflorea>\u00a0and I'm still using maven 2.2.1, same used for M2  \n07:17\u00a0<@sdumitriu>\u00a0It gets the active profiles from MavenProject  \n07:17\u00a0<@sdumitriu>\u00a0But that one is just a container  \n07:17\u00a0<@sdumitriu>\u00a0It gets the activeProfiles from somewhere else, I don't know where  \n07:17\u00a0<+mflorea>\u00a0wdym by MavenProject?  \n07:17\u00a0<@sdumitriu>\u00a0So it could be a maven internal dependency that was updated  \n07:17\u00a0<@sdumitriu>\u00a0http://svn.apache.org/viewvc/maven/maven-2/tags/maven-2.2.1/maven-project/src/main/java/org/apache/maven/project/MavenProject.java?view=log  \n07:18\u00a0<+mflorea>\u00a0but what could have triggered this?  \n07:18\u00a0<+mflorea>\u00a0I see  \n07:19\u00a0<@sdumitriu>\u00a0Hm, actually no  \n07:19\u00a0<+mflorea>\u00a0let me try to build the 3.0M2 enterprise tag to see if the difference is on our side or maven's side  \n07:19\u00a0<@sdumitriu>\u00a0Now that I read more I understand better  \n07:20\u00a0<@sdumitriu>\u00a0activeProfiles is listed in .m2/settings.xml  \n07:20\u00a0<@sdumitriu>\u00a0And it only contains xwiki and xwikisas  \n07:20\u00a0<@sdumitriu>\u00a0(that's what I was getting in my debugs)  \n07:20\u00a0<+mflorea>\u00a0only xwiki on hudson machine  \n07:20\u00a0<@sdumitriu>\u00a0Yet somehow the command line gets all the profiles  \n07:21\u00a0<@sdumitriu>\u00a0Look at http://svn.apache.org/viewvc/maven/release/tags/maven-release-2.1/maven-release-plugin/src/main/java/org/apache/maven/plugins/release/AbstractReleaseMojo.java?view=markup  \n07:21\u00a0<@sdumitriu>\u00a0Starting with 276  \n07:22\u00a0<@sdumitriu>\u00a0I don't get it  \n07:22\u00a0<@sdumitriu>\u00a0Where does it get all those extra profiles from?  \n07:23\u00a0<+mflorea>\u00a0294 additionalProfile?  \n07:23\u00a0<@sdumitriu>\u00a0later: return null  \n07:24\u00a0<@sdumitriu>\u00a0If you look in /home/hudsonagent/releases/trunks/enterprise/release.properties you'll see at some point:  \n07:24\u00a0<@sdumitriu>\u00a0exec.additionalArguments=-Plicense,hsqldb,jetty -DskipTests -P ci,jetty,glassfish,hsqldb,mysql,pgsql,derby,xwiki  \n07:24\u00a0<+mflorea>\u00a0so it can be overwritten in a derived class  \n07:24\u00a0<@sdumitriu>\u00a0I wonder, did someone change settings.xml?  \n07:25\u00a0<@sdumitriu>\u00a0Nope  \n07:25\u00a0<+mflorea>\u00a0I change it a bit but I didn't touch the profiles section  \n07:25\u00a0<@sdumitriu>\u00a0\u00a0<activeProfiles>  \n07:25\u00a0<@sdumitriu>\u00a0\u00a0\u00a0\u00a0<activeProfile>xwiki</activeProfile>  \n07:25\u00a0<@sdumitriu>\u00a0\u00a0</activeProfiles>  \n07:26\u00a0<+mflorea>\u00a0yep, I just added a mirror for central because it was down two days ago and I commented out the xwikisas repos because they were causing some trouble  \n07:34\u00a0<@sdumitriu>\u00a0I'm going to sleep  \n07:35\u00a0<+mflorea>\u00a0ok, I'll dig more and talk with Vincent when he enters  \n07:59\u00a0<vmassol>\u00a0has joined #xwiki  \n08:05\u00a0<vmassol>\u00a0good morning  \n08:05\u00a0<vmassol>\u00a0wow myxwiki.org fails every hour now  \n08:22\u00a0<npm>\u00a0has quit  \n08:27\u00a0<npm>\u00a0has joined #xwiki  \n08:27\u00a0<npm>\u00a0has quit  \n08:30\u00a0<npm>\u00a0has joined #xwiki  \n08:53\u00a0<vmassol>\u00a0mflorea: good morning, could you give me the url of the issue you created for maven release plugin?  \n08:53\u00a0<vmassol>\u00a0I'd like to follow it, tweet it\u2026 to get traction on it  \n08:59\u00a0<vmassol>\u00a0sdumitriu: you there? looking at myxwiki.org kill logs it seems we have lots of jboss cache locking  \n08:59\u00a0<vmassol>\u00a0the majority of threads are blocked with jboss cache locks  \n09:02\u00a0<+mflorea>\u00a0vmassol: I haven't created the issue yet. Let me do it now.  \n09:02\u00a0<vmassol>\u00a0ok thanks  \n09:02\u00a0<+mflorea>\u00a0and Sergiu is most probably sleeping  \n09:02\u00a0<+mflorea>\u00a0(08:34:28 AM) sdumitriu: I'm going to sleep  \n09:02\u00a0<vmassol>\u00a0he seems connected maybe it's marta ;)  \n09:03\u00a0<vmassol>\u00a0in any case we have locking issue on myxwiki.org  \n09:03\u00a0<+mflorea>\u00a0yes, too many restarts  \n09:03\u00a0<vmassol>\u00a0yes but seem to be caused by lock issues  \n09:04\u00a0<vmassol>\u00a0it restarts every hour...  \n09:04\u00a0<vmassol>\u00a0I'd like to install 3.0M3 once it's released  \n09:04\u00a0<vmassol>\u00a0not sure it's going to do anything but at least we'd be running the latest  \n09:16\u00a0<rrodriguez>\u00a0has joined #xwiki  \n09:34\u00a0<npm>\u00a0has quit  \n09:36\u00a0<npm>\u00a0has joined #xwiki  \n09:37\u00a0<arkub>\u00a0has joined #xwiki  \n09:40\u00a0<venkatesh>\u00a0has joined #xwiki  \n09:45\u00a0<+mflorea>\u00a0vmassol: http://jira.codehaus.org/browse/MRELEASE-666  \n09:46\u00a0<vmassol>\u00a0thank  \n09:51\u00a0<vmassol>\u00a0it's a sign of the devil!  \n09:52\u00a0<vmassol>\u00a0(nice number you picked marius ;))  \n09:52\u00a0<+mflorea>\u00a0:) I noticed  \n10:06\u00a0<lucaa>\u00a0has joined #xwiki  \n10:06\u00a0<sburjan`>\u00a0has joined #xwiki  \n10:11\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:24\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:29\u00a0<vmassol>\u00a0tmortagne: good morning. I'd like to create a test framework module in rendering/  \n10:29\u00a0<vmassol>\u00a0however we have a module name \"clash\"  \n10:29\u00a0<vmassol>\u00a0I'm wondering how to name it\u2026.  \n10:30\u00a0<vmassol>\u00a0right now we have rendering-tests already\u2026.  \n10:30\u00a0<vmassol>\u00a0so we need to differentiate between test framework and functional tests  \n10:30\u00a0<vmassol>\u00a0rendering-test-framework, rendering-tests?  \n10:30\u00a0<+tmortagne>\u00a0well it wold be names rendering-test if it's a framework and not tests  \n10:30\u00a0<vmassol>\u00a0(and commons-test-framework)  \n10:31\u00a0<+tmortagne>\u00a0but it's probably not different enough  \n10:31\u00a0<+tmortagne>\u00a0visually  \n10:31\u00a0<+tmortagne>\u00a0i think i prefer having rendering-test and rename the other one unless test vs tests is enough  \n10:31\u00a0<vmassol>\u00a0or rendering-test for the fwk and rendering-functional-tests  \n10:32\u00a0<+tmortagne>\u00a0yep  \n10:32\u00a0<vmassol>\u00a0in commons we have commons-tests  \n10:32\u00a0<vmassol>\u00a0so we'd need to rename it commons-test  \n10:32\u00a0<+tmortagne>\u00a0ok did not seen that  \n10:33\u00a0<vmassol>\u00a0do I need to send a vote or should I go ahead?  \n10:33\u00a0<vmassol>\u00a0hmm functional or integration? rendering-integration-tests might be better  \n10:33\u00a0<+tmortagne>\u00a0no need for a vote IMO  \n10:33\u00a0<+tmortagne>\u00a0yep probablu integration  \n10:33\u00a0<+tmortagne>\u00a0probably  \n10:34\u00a0<vmassol>\u00a0ok going ahead  \n10:42\u00a0<vmassol>\u00a0mflorea: udpated roadmap page with latest date you fixed  \n10:44\u00a0<+mflorea>\u00a0vmassol: ok, thanks, I'm having troubles releasing enterprise. Since 3.0M2 we've added profiles for databases to the parent pom and these profiles are activated now during build (only hsqldb and jetty were supposed to be actived).  \n10:48\u00a0<vmassol>\u00a0mflorea: you forgto to change the releae date for 3.0M3 for platform/core  \n10:48\u00a0<vmassol>\u00a0doing it  \n10:48\u00a0<+mflorea>\u00a0hmm, I though I changed it  \n10:48\u00a0<+mflorea>\u00a0thanks  \n10:53\u00a0<vmassol>\u00a0mflorea: finishing up something and then I can try to help you if you need  \n10:54\u00a0<+mflorea>\u00a0ok, thanks  \n11:12\u00a0<+mflorea>\u00a0vmassol: you add in r35214 database profile to enterprise pom. Where were these profiles before? I'm asking because I don't see other related changes inside the enterprise project so I suppose they were outside enterprise. The issue is that these profiles are now activated from the command lines and we can build XE for only one db (as I understood)  \n11:12\u00a0<vmassol>\u00a0they were in the top level pom  \n11:12\u00a0<vmassol>\u00a0sergiu sent a mail explaining his findings  \n11:13\u00a0<+mflorea>\u00a0yep  \n11:13\u00a0<vmassol>\u00a0with soltions he's proposing  \n11:13\u00a0<vmassol>\u00a0I haven't parsed the mail yet  \n11:14\u00a0<vmassol>\u00a0well we only build XE for one db  \n11:14\u00a0<vmassol>\u00a0hmmm aybe not, I don't recall actually  \n11:14\u00a0<vmassol>\u00a0but that's how I remember it  \n11:14\u00a0<vmassol>\u00a0it was coded to be like this  \n11:15\u00a0<vmassol>\u00a0the profiles are exclusive  \n11:15\u00a0<+tmortagne>\u00a0yes we usually build XE with one db  \n11:15\u00a0<+tmortagne>\u00a0(and it always been like this)  \n11:16\u00a0<+tmortagne>\u00a0but for the release we activate them all in the command line  \n11:16\u00a0<vmassol>\u00a0we only activate in order to modify the poms  \n11:16\u00a0<vmassol>\u00a0but that's actually wrong  \n11:16\u00a0<vmassol>\u00a0I mean it should not work  \n11:16\u00a0<vmassol>\u00a0actually wait  \n11:16\u00a0<vmassol>\u00a0we only do this for prepare  \n11:16\u00a0<abusenius>\u00a0has joined #xwiki  \n11:16\u00a0<vmassol>\u00a0which is ok since it doesn't execute them  \n11:16\u00a0<+tmortagne>\u00a0\u00a0mvn release:prepare \u00a0-Pci,hsqldb,mysql,pgsql,derby,jetty,glassfish \u00a0-DautoVersionSubmodules=true -DreleaseVersion=2.6.1 \u00a0-DdevelopmentVersion=2.6-SNAPSHOT -Dtag=xwiki-enterprise-2.6.1 \u00a0-Darguments=\"-N\"  \n11:17\u00a0<vmassol>\u00a0but not for perform  \n11:17\u00a0<vmassol>\u00a0since perform wouldn't work  \n11:17\u00a0<+tmortagne>\u00a0not for perform yes  \n11:17\u00a0<vmassol>\u00a0for prepare it's ok because the props are ot used  \n11:17\u00a0<vmassol>\u00a0it only serves to activate the modules  \n11:17\u00a0<+tmortagne>\u00a0since we distribute only one db  \n11:18\u00a0<+tmortagne>\u00a0yep to make sure all the modules are prepared and committed  \n11:18\u00a0<+mflorea>\u00a0vmassol: wdym by \"props are not used\"? because XE is built even in prepare  \n11:19\u00a0<vmassol>\u00a0the profiles define db properties  \n11:19\u00a0<+tmortagne>\u00a0mflorea: use the -Darguments=\"-N\" so that it's not trying to build it and we will be ok for the prepare  \n11:19\u00a0<vmassol>\u00a0jdbc connection, etc  \n11:19\u00a0<+tmortagne>\u00a0(it will not try to build it, just prepare it)  \n11:20\u00a0<+tmortagne>\u00a0s/-Darguments=\"-N\"/you/  \n11:20\u00a0<+tmortagne>\u00a0s/we/you/  \n11:31\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:34\u00a0<evalica>\u00a0has joined #xwiki  \n11:35\u00a0<arkub>\u00a0has quit  \n12:11\u00a0<mflorea>\u00a0has quit  \n12:15\u00a0<jstoldt>\u00a0good morning everyone  \n12:22\u00a0<vmassol>\u00a0good morning jstoldt  \n12:22\u00a0<jstoldt>\u00a0:)  \n12:41\u00a0<DrLou>\u00a0has joined #xwiki  \n13:06\u00a0<venkatesh>\u00a0has quit  \n13:25\u00a0<rrodriguez>\u00a0has quit  \n13:28\u00a0<mflorea>\u00a0has joined #xwiki  \n13:38\u00a0<vmassol>\u00a0tmortagne: I'm not sure SyntaxWrappingListener is a good idea  \n13:38\u00a0<vmassol>\u00a0(just noticing it now)  \n13:39\u00a0<vmassol>\u00a0I understand why you did it but it looks a bit too magical for me  \n13:39\u00a0<vmassol>\u00a0note: I'm rewriting a new rendering test framework based on junit4 so I'll remove it from there  \n13:40\u00a0<+tmortagne>\u00a0(trying to remember what it is :))  \n13:40\u00a0<vmassol>\u00a0you removed metadata syntax from the generated XDOM  \n13:41\u00a0<vmassol>\u00a0so that you didn't have to change test expectations  \n13:41\u00a0<vmassol>\u00a0ie \\*.test files  \n13:41\u00a0<+tmortagne>\u00a0yea i see know, i don'y like it much either but i needed something quickly  \n13:41\u00a0<vmassol>\u00a0ok  \n13:41\u00a0<+tmortagne>\u00a0and having to change each and evry test files...  \n13:41\u00a0<vmassol>\u00a0since I'm doing a new fwk  \n13:41\u00a0<vmassol>\u00a0tests can be migrated one by one  \n13:41\u00a0<+tmortagne>\u00a0note that it's not only that  \n13:42\u00a0<+tmortagne>\u00a0the problem is when you have several different source and expect the same result  \n13:42\u00a0<+tmortagne>\u00a0that does not work anymore without this hack  \n13:42\u00a0<+tmortagne>\u00a0sincu eyou don't have the same metadata  \n13:43\u00a0<vmassol>\u00a0shouldn't all sources generate the same expectyed output?  \n13:43\u00a0<vmassol>\u00a0thats what we had before  \n13:43\u00a0<+tmortagne>\u00a0it's the same XDOM but this metadata is about source syntax  \n13:43\u00a0<vmassol>\u00a0ah yes  \n13:44\u00a0<+tmortagne>\u00a0maybe event rendering should not take care of that like 99% of the renderers  \n13:44\u00a0<vmassol>\u00a0so ideally we'd need some regex  \n13:44\u00a0<vmassol>\u00a0in the expected output  \n13:44\u00a0<+tmortagne>\u00a0i was think of something like replacing by \"sourcesyntax\" when it's the same than the source syntax  \n13:44\u00a0<vmassol>\u00a0beginMetadata [syntax=\".\\*\"]  \n13:45\u00a0<+tmortagne>\u00a0thaat way the result is always the same and you can still test things like context macro syntax feature  \n13:45\u00a0<vmassol>\u00a0or yes we could introduce some vars  \n13:45\u00a0<vmassol>\u00a0$sourceSyntax  \n13:45\u00a0<vmassol>\u00a0beginMetadata [syntax=\"$sourceSyntax\"]  \n13:45\u00a0<+tmortagne>\u00a0yea var would be great  \n13:45\u00a0<+tmortagne>\u00a0for other things too  \n13:46\u00a0<+tmortagne>\u00a0maybe a syntax a bit less commons like $${var}  \n13:46\u00a0<+tmortagne>\u00a0we need {} anyway when the var is followed by something  \n13:47\u00a0<vmassol>\u00a0anyway I won't do that now, I need to convert to junit4 first  \n13:47\u00a0<vmassol>\u00a0(I'm doing this with Parametrized tests for now)  \n13:49\u00a0<arkub>\u00a0has joined #xwiki  \n14:58\u00a0<vmassol>\u00a0so here's the new way to write an integration test:  \n14:58\u00a0<vmassol>\u00a0http://pastebin.com/h6qezjdz  \n14:58\u00a0<vmassol>\u00a0(rendering integration test that is)  \n14:58\u00a0<vmassol>\u00a0can't be simpler....  \n14:59\u00a0<+lucaa>\u00a0junit 4? mmh...  \n15:00\u00a0<vmassol>\u00a0yes junit4  \n15:00\u00a0<vmassol>\u00a0now I need to add stuff to allow to customization  \n15:00\u00a0<vmassol>\u00a0like how you define mocks, etc  \n15:01\u00a0<vmassol>\u00a0well actually how you get the CM  \n15:02\u00a0<+tmortagne>\u00a0nice :)  \n15:03\u00a0<+tmortagne>\u00a0no way to configure junit in the pom to not even having to add the IntegrationTests class ? ;)  \n15:03\u00a0<vmassol>\u00a0hehe  \n15:04\u00a0<vmassol>\u00a0maybe, that would probbly need a custom maven junit runner though  \n15:04\u00a0<vmassol>\u00a0since I believe the default one will look for source files  \n15:04\u00a0<vmassol>\u00a0(.java files)  \n15:05\u00a0<+tmortagne>\u00a0yep probably  \n15:07\u00a0<vmassol>\u00a0I think I'll add an annotation @ComponentManager  \n15:07\u00a0<vmassol>\u00a0if a method annotated with that annotation is present then the suite will that CM  \n15:07\u00a0<vmassol>\u00a0if not, it'll create one  \n15:10\u00a0<vmassol>\u00a0ah there's better  \n15:10\u00a0<vmassol>\u00a0thinking a bit more....  \n15:12\u00a0<arkub>\u00a0has quit  \n15:14\u00a0<nuvolari>\u00a0vmassol++ [for maven pro's on maven.apache] :D  \n15:15\u00a0<nuvolari>\u00a0wish we could use that :/  \n15:15\u00a0<nuvolari>\u00a0at work  \n15:15\u00a0<vmassol>\u00a0nuvolari: hi. You're not using maven at work?  \n15:16\u00a0<nuvolari>\u00a0I'm a junior and not carrying enough weight to convince them...  \n15:17\u00a0<nuvolari>\u00a0I'm the odd one out. love intellij + maven. the only one using that  \n15:17\u00a0<nuvolari>\u00a0well, I try to use maven where I can  \n15:17\u00a0<nuvolari>\u00a0not in the main projects  \n15:17\u00a0<vmassol>\u00a0I use intellij and maven too, works great  \n15:19\u00a0<nuvolari>\u00a0I'm running on the trial version :P consider buying a lisence the end of the month  \n15:45\u00a0<jstoldt>\u00a0hey vmassol, added the icon mappings in the images syntax guide: http://dev.xwiki.org/xwiki/bin/view/Drafts/Syntax+Guide+Improvements#HImages  \n15:46\u00a0<jstoldt>\u00a0what do you reckon, is this ready for committing?  \n15:46\u00a0<vmassol>\u00a0jstoldt: i don't know what's best for documenting the icon transformation  \n15:46\u00a0<vmassol>\u00a0first it's optional  \n15:46\u00a0<vmassol>\u00a0so it's not always there  \n15:47\u00a0<vmassol>\u00a0I guess it's ok for now but we'll need to tune this  \n15:47\u00a0<vmassol>\u00a0(in the future)  \n15:47\u00a0<vmassol>\u00a0since it's not part of the syntax  \n15:47\u00a0<jstoldt>\u00a0you mean there is a way to disable it? because i didn't read that in the 2.6 release notes  \n15:47\u00a0<vmassol>\u00a0it's a config property  \n15:47\u00a0<vmassol>\u00a0let me find it  \n15:47\u00a0<vmassol>\u00a0it's in the release notes  \n15:48\u00a0<jstoldt>\u00a0in the release notes it basically says the mapping might be changed by the admin  \n15:48\u00a0<jstoldt>\u00a0or can be changed...  \n15:48\u00a0<vmassol>\u00a0yeah  \n15:48\u00a0<vmassol>\u00a0it just says:  \n15:48\u00a0<vmassol>\u00a0\"Added ability to define in xwiki.properties which Rendering Transformations to execute when rendering a document.\"  \n15:48\u00a0<jstoldt>\u00a0hmmmm  \n15:49\u00a0<vmassol>\u00a0#-# [Since 2.6RC1]  \n15:49\u00a0<vmassol>\u00a0#-# Controls what transformations will be executed when rendering content.  \n15:49\u00a0<vmassol>\u00a0#-# A transformation modifies the parsed content. For example the Icon transformation replaces some characters with  \n15:49\u00a0<vmassol>\u00a0#-# icons, a WikiWord transformation will automatically create links when it finds wiki words, etc.  \n15:49\u00a0<vmassol>\u00a0#-# Note that the Macro transformation is a special transformation that replaces macro markers by the result of the  \n15:49\u00a0<vmassol>\u00a0#-# macro execution. If you don't list it, macros won't get executed.  \n15:49\u00a0<vmassol>\u00a0#-# The default value is: rendering.transformations = macro, icon  \n15:49\u00a0<jstoldt>\u00a0okay, so where should the defaults go then? admin guide at some point?  \n15:49\u00a0<vmassol>\u00a0the configuration option yes  \n15:49\u00a0<jstoldt>\u00a0no, i mean thedefault mappings  \n15:50\u00a0<vmassol>\u00a0default mapping too indeed  \n15:50\u00a0<vmassol>\u00a0but I also agree it needs to be surfaced to end users  \n15:50\u00a0<jstoldt>\u00a0i thought they might be good to have in the syntax guide because this is more of a user thing than an admin thing  \n15:50\u00a0<vmassol>\u00a0in the syntax guide  \n15:50\u00a0<jstoldt>\u00a0exactly  \n15:50\u00a0<vmassol>\u00a0we talked about this yesterday  \n15:50\u00a0<jstoldt>\u00a0was i participating or was i slacking off?  \n15:51\u00a0<vmassol>\u00a0it should \u00a0be explained separately from the syntax  \n15:51\u00a0<vmassol>\u00a0as an add on  \n15:51\u00a0<vmassol>\u00a0but still in the syntax guide  \n15:51\u00a0<vmassol>\u00a0IMO it warrants it's own \"tab\"  \n15:51\u00a0<jstoldt>\u00a0well, if there is a link in the syntax guide that point there it should be good  \n15:51\u00a0<vmassol>\u00a0btw it's not the only transformation  \n15:51\u00a0<vmassol>\u00a0we also have wikiword  \n15:52\u00a0<vmassol>\u00a0that one is just off by default  \n15:52\u00a0<jstoldt>\u00a0yeah, you told me something about the whole transformation stuff but to be honest, i have little to no idea about it  \n15:52\u00a0<jstoldt>\u00a0so i was just focussing on the images and related stuff now  \n15:52\u00a0<vmassol>\u00a0I can explain:  \n15:52\u00a0<vmassol>\u00a0http://rendering.xwiki.org/xwiki/bin/view/Main/WebHome  \n15:52\u00a0<vmassol>\u00a0:)  \n15:52\u00a0<vmassol>\u00a0look at the diagram  \n15:52\u00a0<vmassol>\u00a0and the 3 lines of explanation below it  \n15:53\u00a0<vmassol>\u00a0then for slightly more advanced doc: http://rendering.xwiki.org/xwiki/bin/view/Main/Architecture  \n15:53\u00a0<vmassol>\u00a0so as you can see the macro feature is actually a transformation  \n15:54\u00a0<vmassol>\u00a0so icon, wikiword and macro are at the same level  \n15:54\u00a0<vmassol>\u00a0and should probably be explained at the same level too in the syntax guide  \n15:54\u00a0<jstoldt>\u00a0okay, i understand  \n15:54\u00a0<vmassol>\u00a0they can all be turned on/off  \n15:54\u00a0<jstoldt>\u00a0so you'd suggest a \"transformations\" heading (level 1), is that right?  \n15:54\u00a0<vmassol>\u00a0yes  \n15:54\u00a0<vmassol>\u00a0but  \n15:54\u00a0<vmassol>\u00a0that may be too technical  \n15:54\u00a0<vmassol>\u00a0the word I mean  \n15:55\u00a0<vmassol>\u00a0so we could have 3 tabs  \n15:55\u00a0<vmassol>\u00a0Macro  \n15:55\u00a0<jstoldt>\u00a0true but it also arises curiosity ;)  \n15:55\u00a0<vmassol>\u00a0Icons  \n15:55\u00a0<vmassol>\u00a0WikiWord  \n15:55\u00a0<vmassol>\u00a0yeah  \n15:55\u00a0<jstoldt>\u00a0mhmm  \n15:55\u00a0<vmassol>\u00a0I don't know  \n15:55\u00a0<vmassol>\u00a0it won't scale though  \n15:55\u00a0<vmassol>\u00a0so subentries maybe  \n15:55\u00a0<vmassol>\u00a0anyway something like this  \n15:55\u00a0<vmassol>\u00a0(just need to find the right word)  \n15:56\u00a0<vmassol>\u00a0but yes the idea is that it's separated from the syntax  \n15:56\u00a0<jstoldt>\u00a0okay, so i think this is WIP for the new syntax pages  \n15:56\u00a0<vmassol>\u00a0(ie the other tabs)  \n15:56\u00a0<vmassol>\u00a0yep  \n15:56\u00a0<jstoldt>\u00a0okay, gonna remove it and make a patch with just the image specs  \n15:56\u00a0<jstoldt>\u00a0remove it from my work file .xml^^  \n15:56\u00a0<vmassol>\u00a0ok  \n15:56\u00a0<vmassol>\u00a0so when do you start on the nex syntax page? :)  \n15:57\u00a0<vmassol>\u00a0I'm sure evalica can help you and work on it with you  \n15:57\u00a0<vmassol>\u00a0evalica could help with the style part and you do the content part (for ex)  \n15:57\u00a0<vmassol>\u00a0since you're now a master jedi of the syntax!  \n15:57\u00a0<jstoldt>\u00a0i do actually wonder. i want to do some work for another project tomorrow  \n15:58\u00a0<vmassol>\u00a0sure, your call, your time  \n15:58\u00a0<jstoldt>\u00a0and next week i am going to the leipzig book fair  \n15:58\u00a0<jstoldt>\u00a0so it might be the week after next week when i get really busy with this  \n15:58\u00a0<+evalica>\u00a0vmassol: I don't want to work on the syntax - I have the app within minutes specs to do  \n15:59\u00a0<+evalica>\u00a0vmassol: the style part is already in platform with the admin stuff - there's nothing new  \n15:59\u00a0<jstoldt>\u00a0evalica: like i said, i still got some other stuff to do first. but i might need some assistance when putting this together  \n15:59\u00a0<vmassol>\u00a0I'm trying to find some good will to make the new syntax page a reality....  \n15:59\u00a0<jstoldt>\u00a0just a couple of questions  \n15:59\u00a0<vmassol>\u00a0:)  \n16:05\u00a0<jstoldt>\u00a0XE-854  \n16:10\u00a0<vmassol>\u00a0ok so here's the way to configure mocks in the new rendering test fwk: http://pastebin.com/EWLFq8gP  \n16:10\u00a0<vmassol>\u00a0tmortagne: like it?  \n16:11\u00a0<+tmortagne>\u00a0vmassol: why don't you use @Requirement style for ComponentManager ?  \n16:12\u00a0<vmassol>\u00a0wdym?  \n16:12\u00a0<vmassol>\u00a0you still need a method  \n16:12\u00a0<vmassol>\u00a0called by the suite  \n16:13\u00a0<vmassol>\u00a0I was actually doing it the junit-way  \n16:13\u00a0<vmassol>\u00a0same as Paametrized for ex  \n16:14\u00a0<vmassol>\u00a0we could combine both @Requirement-way + reuse the @Before annotation but I'm not sure it's best  \n16:17\u00a0<+tmortagne>\u00a0i mean who is injecting the componentmanager ?  \n16:17\u00a0<vmassol>\u00a0ok wrapping up for now, we can tune a bit later after I've committed a first version  \n16:17\u00a0<vmassol>\u00a0it's RenderingTestSuite  \n16:17\u00a0<+tmortagne>\u00a0the you can do whatever you want  \n16:17\u00a0<vmassol>\u00a0sure  \n16:18\u00a0<@sdumitriu>\u00a0vmassol: Can you add a warning about the cache macro on http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWikiEnterprise271 ?  \n16:18\u00a0<vmassol>\u00a0sdumitriu: yes good idea  \n16:18\u00a0<@sdumitriu>\u00a0Actually two  \n16:18\u00a0<@sdumitriu>\u00a0You can an inline one next to \"XWIKI-4322 - Add a {{cache}} macro\"  \n16:18\u00a0<@sdumitriu>\u00a0XWIKI-4322 - Add a {{cache}} macro {{warning}}not enabled by default{{/warning}}  \n16:22\u00a0<vmassol>\u00a0sdumitriu: done  \n16:26\u00a0<vmassol>\u00a0tmortagne: do you know why we have a setUpMocks() in RenderingTests for the box macro module?  \n16:26\u00a0<vmassol>\u00a0it mocks wikimodel but if I don't use it, the tests pass fine  \n16:27\u00a0<vmassol>\u00a0actually it's probably me who added it at some point since the tests were failing but it's no longer the case for some reason  \n16:27\u00a0<vmassol>\u00a0I'll jsut remove it unless you see a good reason to keep it  \n16:27\u00a0<vmassol>\u00a0since the only test that uses the image param is passing a url  \n16:27\u00a0<vmassol>\u00a0there's no need to be in wiki mode  \n16:27\u00a0<vmassol>\u00a0it's probably a leftover  \n16:38\u00a0<sburjan`>\u00a0has quit  \n16:39\u00a0<+tmortagne>\u00a0vmassol: yep if the test pass anyway (i don't remember why it was needed)  \n16:49\u00a0<jvelociter>\u00a0has quit  \n16:49\u00a0<jvelociter>\u00a0has joined #xwiki  \n16:57\u00a0<evalica>\u00a0has quit  \n17:03\u00a0<jstoldt>\u00a0has quit  \n17:10\u00a0<jvelociter>\u00a0has quit  \n17:10\u00a0<rrodriguez>\u00a0has joined #xwiki  \n17:11\u00a0<vmassol>\u00a0grr\u2026 having a hard time figuring out why I get test names like this: http://tinycoke.com/\\_6rX7KFDMaxY/screen\\_shot\\_2011-03-10\\_at\\_5.11.14\\_pm.png  \n17:29\u00a0<vmassol>\u00a0tmortagne: first version committed, need to refine it  \n17:36\u00a0<vmassol>\u00a0has quit  \n17:41\u00a0<vmassol>\u00a0has joined #xwiki  \n17:48\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] One question about xwiki pdf/rtf export.  \n17:48\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] If I try to export a whole space, e.g. https://www.computer42.org/xwiki/bin/export/DevNotes/WebHome?format=pdf&pagebreaks=1&includechilds=8  \n17:48\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] I'm getting this error:  \n17:48\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Wrapped Exception: org.apache.fop.fo.ValidationException: Property ID \"HDevelopmentNotes\" (found on \"fo:block\") previously used; ID values must be unique within a document! (See position 1446:261)  \n17:49\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] \u00a0\u00a0\u00a0\u00a0Error number 11015 in 11: Exception while exporting  \n17:49\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Wrapped Exception: Error number 12002 in 12: Exception while exporting PDF  \n17:49\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)]  \n17:49\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Is there a fix in 2.7.1 or 3.x realized or planned?  \n17:49\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Should I create a new Jira Issue ?  \n17:49\u00a0<@sdumitriu>\u00a0It is fixed in 2.7.1  \n17:49\u00a0<@sdumitriu>\u00a0XWIKI-5910  \n18:08\u00a0<evalica>\u00a0has joined #xwiki  \n18:12\u00a0<arkub>\u00a0has joined #xwiki  \n18:18\u00a0<jbrBridge>\u00a0[[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] sdumitriu: Great - I will test it over the week end :-)  \n18:22\u00a0<@sdumitriu>\u00a0evalica: http://platform.xwiki.org/xwiki/bin/view/DevGuide/VerticalForms#H3.Help  \n18:23\u00a0<sburjan>\u00a0has joined #xwiki  \n18:26\u00a0<vmassol>\u00a0sdumitriu: I sent a mail for you about message stream  \n18:26\u00a0<vmassol>\u00a0(on the devs list)  \n18:27\u00a0<@sdumitriu>\u00a0Yep  \n18:27\u00a0<@sdumitriu>\u00a0All obvious stuff  \n18:28\u00a0<@sdumitriu>\u00a0And implemented on the java side  \n18:28\u00a0<vmassol>\u00a0I'm talking about XE's usage in production (not about server side)  \n18:28\u00a0<vmassol>\u00a0with what we have now I don't think we can release it in prod  \n18:32\u00a0<vmassol>\u00a0mflorea: I put the commons/rendernig moves at the bottom on \u00a0the RN page  \n18:33\u00a0<vmassol>\u00a0you think it should be moved?  \n18:34\u00a0<+mflorea>\u00a0I added a section in the New and Noteworthy  \n18:34\u00a0<vmassol>\u00a0yes hence my question  \n18:35\u00a0<+mflorea>\u00a0I though it may be useful to write down a few words about the new projects, but links to their wikis is also fine.  \n18:35\u00a0<vmassol>\u00a0so you'd suggest moving what I put below in the page up there?  \n18:35\u00a0<vmassol>\u00a0\"Notes specific to XWiki Enterprise 3.0M3\"  \n18:35\u00a0<sburjan>\u00a0has quit  \n18:36\u00a0<vmassol>\u00a0Ihad put them under \"Backward Compatibility and Migration Notes\"  \n18:36\u00a0<+mflorea>\u00a0yes, my main reason is that it's not just about the migration, but it's also a new thing the devs can play with  \n18:36\u00a0<vmassol>\u00a0well yes although it's not new  \n18:36\u00a0<vmassol>\u00a0packages were not modified  \n18:36\u00a0<+mflorea>\u00a0i.e. it's more visible in the New and Noteworthy section  \n18:36\u00a0<vmassol>\u00a0but yes would be more visible  \n18:36\u00a0<vmassol>\u00a0ok I'll move  \n18:36\u00a0<+mflorea>\u00a0sure, it's just marketing :)  \n18:46\u00a0<vmassol>\u00a0sdumitriu: please reply to my mail  \n18:46\u00a0<@sdumitriu>\u00a0More talk, less work?  \n18:46\u00a0<@sdumitriu>\u00a0Sure  \n18:47\u00a0<vmassol>\u00a0yes less work is good  \n18:47\u00a0<vmassol>\u00a0we're talking about RC now  \n18:47\u00a0<vmassol>\u00a0we have to be careful  \n18:48\u00a0<vmassol>\u00a0and the message stream feature was done at the last moment so we need to be extra careful we can ship it  \n18:48\u00a0<vmassol>\u00a0I need to know whether you plan to fix the issues I raised  \n18:48\u00a0<vmassol>\u00a0if not we need to either 1) decide they're not important or 2) find someone else to do it  \n18:49\u00a0<vmassol>\u00a0so it's important to know  \n18:50\u00a0<vmassol>\u00a0bb in 40mn  \n19:08\u00a0<evalica>\u00a0has quit  \n19:15\u00a0<Enygma`>\u00a0has quit  \n19:18\u00a0<mflorea>\u00a0has quit  \n19:19\u00a0<arkub>\u00a0has quit  \n19:20\u00a0<arkub\\_>\u00a0has joined #xwiki  \n19:20\u00a0<arkub\\_>\u00a0has quit  \n19:20\u00a0<mflorea>\u00a0has joined #xwiki  \n19:22\u00a0<+mflorea>\u00a0vmassol: should we add/keep links to Commons/Rendering javadoc on http://platform.xwiki.org/xwiki/bin/view/DevGuide/API ? Or should we put this information in their wikis? I'm more in favor of having the javadoc links in one place.  \n19:27\u00a0<+mflorea>\u00a0lucaa, sdumitriu: please add some words and images about the stuff you implemented during 3.0M3 (look for your TODOs) . I'll add about mine. Need to ping also Jerome and Ludovic  \n19:27\u00a0<vmassol>\u00a0has quit  \n19:28\u00a0<+mflorea>\u00a0and thanks :)  \n19:28\u00a0<mflorea>\u00a0has quit  \n19:36\u00a0<vmassol>\u00a0has joined #xwiki  \n19:40\u00a0<lucaa>\u00a0has quit  \n19:56\u00a0<rrodriguez>\u00a0has quit  \n20:03\u00a0<tmortagne>\u00a0has left #xwiki  \n21:14\u00a0<vmassol>\u00a0fyi going to move the macro archetype to the rendering module  \n21:22\u00a0<lucaa>\u00a0has joined #xwiki  \n21:24\u00a0<vmassol>\u00a0lots of errors on trunk: http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/lastBuild/testReport/  \n21:25\u00a0<@sdumitriu>\u00a0K, my bad  \n21:25\u00a0<@sdumitriu>\u00a0Will fix it  \n21:26\u00a0<vmassol>\u00a0k  \n22:16\u00a0<mflorea>\u00a0has joined #xwiki  \n22:17\u00a0<mflorea>\u00a0has quit  \n22:27\u00a0<vmassol>\u00a0has quit  \n22:36\u00a0<jstoldt|Notebook>\u00a0has joined #xwiki  \n22:44\u00a0<jvdrean>\u00a0has quit  \n22:57\u00a0<jstoldt|Notebook>\u00a0has quit  \n23:18\u00a0<sdumitriu>\u00a0has quit  \n23:48\u00a0<DrLou>\u00a0has quit  \n23:59\u00a0<DrLou>\u00a0has joined #xwiki  \n\n"}