{"id": "dev:IRC.xwikiArchive20101212", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20101212", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nlucaa left at 00:03 (Client Quit  \nlucaa joined #xwiki at 00:03  \nlucaa left at 00:07 (Ping timeout: 240 seconds  \nlpereira left at 00:13 (Quit: Leaving.  \nlucaa joined #xwiki at 00:16  \nlucaa left at 00:24 (Quit: Leaving.  \nlucaa joined #xwiki at 00:24  \nvmassol - (00:28): hmm seems LiveTableResultsMacros is wrong to me  \nvmassol - (00:29): it uses {{velocity}} to generate the JSON  \nlucaa left at 00:29 (Client Quit  \nvmassol - (00:29): which means that the wiki syntax parser is executed after velocity is executed  \nvmassol - (00:29): so for example if you have a String with \\\\ in it  \nvmassol - (00:29): you'll get \"jsonfield\" : \"\u2026\\\\\u2026\"  \nvmassol - (00:30): which will be transformed into \"jsonfield\" : \"...\\n...\"  \nvmassol - (00:30): which is wrong  \nsdumitriu - (00:30): Right  \nvmassol - (00:30): (it should be \\\\n in json)  \nvmassol - (00:30): so we should have {{velocity wiki=\"false\"  \nvmassol - (00:30): and only evaluate depending on the field  \nvmassol - (00:30): textarea with wiki syntax eval on  \nsdumitriu - (00:30): There is absolutely no need to execute anything else than velocity  \nvmassol - (00:30): (but display will do that)  \nvmassol - (00:31): sdumitriu: do you know why we generate 2 fields:  \nvmassol - (00:31): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"$escapetool.javascript(${colname})\" : \"$escapetool.javascript($fieldDisplayValue.replaceFirst($regextool.quote('{{html clean=\"false\" wiki=\"false\"}}'), '').replaceAll(\"$regextool.quote('{{/html}}')$\", ''))\",  \nvmassol - (00:31): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"$escapetool.javascript(${colname})\\_value\" : \"$escapetool.javascript(${fieldValue})\",  \nsdumitriu - (00:31): I used to know that  \nsdumitriu - (00:32): Yes  \nsdumitriu - (00:32): One is the internal value, one is the display value  \nvmassol - (00:32): yes ok  \nvmassol - (00:32): so indeed we need wiki=\"false\"  \nsdumitriu - (00:33): Hm, actually there is a reason why wiki=true might be a good thing  \nsdumitriu - (00:33): Or not  \nsdumitriu - (00:33): No, indeed, fieldDisplayValue should be enough  \nvmassol - (00:33): yep  \nvmassol - (00:34): trying it on dev.xwiki.org  \nlucaa joined #xwiki at 00:37  \nlucaa left at 00:38 (Read error: Connection reset by peer  \nvmassol - (00:38): works much better now :)  \nvmassol - (00:38): http://dev.xwiki.org/xwiki/bin/view/Design/#|t=designs&p=1&l=30&s=doc.name&d=asc&Status=Completed works now  \nvmassol - (00:39): now I need to check when the value is used vs the display value  \nvmassol - (00:39): the jira ref column seems to use the value instead of the display value  \nlucaa1 joined #xwiki at 00:40  \nlucaa1 left at 00:47 (Read error: Connection reset by peer  \nlucaa joined #xwiki at 00:48  \nlucaa left at 00:52 (Ping timeout: 264 seconds  \nvmassol - (00:53): sdumitriu: we'll need to decide if we want to run the wiki syntax parser (but if we want it'll have to be executed before the js escape)  \nsdumitriu - (00:54): Isn't it already executed when calling obj.get, or whatever we use there? Let me check  \nvmassol - (00:54): or\u2026. better\u2026 after json has been transported  \nvmassol - (00:54): getValue() doesn't execute it for sure  \nvmassol - (00:54): get or dsplay() only executes it for textarea and when the correct mode is set  \nvmassol - (00:55): but when you write in a page {{vellcity}} $object.getValue(\"\u2026\") it gets executed  \nsdumitriu - (00:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#set($fieldDisplayValue = \"$!itemDoc.display($colname, 'view')\")  \nvmassol - (00:55): so if we want that same behavior  \nvmassol - (00:55): we'll need to execute it explciitely  \nsdumitriu - (00:55): That should get the field fully rendered  \nvmassol - (00:55): nope  \nvmassol - (00:55): only for textarea  \nlucaa joined #xwiki at 00:55  \nvmassol - (00:55): (and with the correct mode)  \nsdumitriu - (00:55): Hm...  \nsdumitriu - (00:56): Do we know for sure that object properties will be rendered?  \nsdumitriu - (00:56): We can't assume that  \nvmassol - (00:57): well that's something that may have to be defined in the liveable options  \nvmassol - (00:57): (options for each field)  \nlucaa1 joined #xwiki at 00:59  \nlucaa left at 00:59 (Read error: Connection reset by peer  \nflorinciu left at 01:07 (Read error: Connection reset by peer  \nvmassol left at 01:10 (Quit: Leaving.  \njvelo joined #xwiki at 01:11  \nsdumitriu left at 01:33 (Quit: Leaving.  \nabusenius left at 01:58 (Quit: Konversation terminated!  \njvelo left at 02:03 (Ping timeout: 240 seconds  \nSashi - (02:26): why does xwiki take so long to load  \nSashi - (02:27): as oppseed to php files?  \ncjdelisle` - (02:28): There's a lot of things which happen, permissions checks, quite a few database requests.  \ncjdelisle` - (02:28): Also performance is not as good as it should be.  \ncjdelisle` - (02:29): But even with perfect performance, xwiki just does more than a plain php page.  \nSashi - (02:33): true  \nnpm left at 05:18 (Remote host closed the connection  \nnpm joined #xwiki at 05:21  \nlucaa1 left at 06:48 (Ping timeout: 240 seconds  \nvmassol joined #xwiki at 09:02  \nlucaa joined #xwiki at 09:14  \nlucaa left at 09:18 (Client Quit  \nlucaa joined #xwiki at 09:32  \nlucaa left at 09:35 (Client Quit  \nlucaa joined #xwiki at 09:35  \nsburjan\\_ joined #xwiki at 09:39  \nsburjan` left at 09:40 (Ping timeout: 272 seconds  \nsburjan\\_ is now known as sburjan` ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \njvelo joined #xwiki at 09:51  \nlucaa left at 09:55 (Quit: Leaving.  \nlucaa joined #xwiki at 10:04  \nmflorea joined #xwiki at 10:11  \nlucaa left at 10:13 (Quit: Leaving.  \nnpm\\_ joined #xwiki at 10:25  \njvelo left at 10:28 (Ping timeout: 240 seconds  \nnpm left at 10:29 (Ping timeout: 265 seconds  \nvenkatna joined #xwiki at 10:31  \nvenkatna left at 10:32 (Client Quit  \nvmassol left at 10:37 (Quit: Leaving.  \njvelo joined #xwiki at 10:49  \nnpm\\_\\_ joined #xwiki at 10:51  \nnpm\\_ left at 10:51 (Ping timeout: 240 seconds  \nvmassol joined #xwiki at 11:59  \nvmassol - (12:07): cjdelisle`: do we support captcha for comments, I don't recall?  \nsburjan` - (12:08): vmassol: afaik yes is you enable it from admin area  \nsburjan` - (12:08): unregistered users should put a code before writing a comment  \nvmassol - (12:09): sburjan`: where is that in the admin?  \nsburjan` - (12:09): afair in rights  \nvmassol - (12:09): ah right  \nvmassol - (12:09): found it  \nvmassol - (12:10): sburjan`: I couldn't find it documented on xwiki.org  \nsburjan` - (12:10): me neither  \nsburjan` - (12:10): this is what I was looking for now  \nvmassol - (12:11): works cool  \nsburjan` - (12:12): found it ?  \nvmassol - (12:12): no  \nvmassol - (12:13): adding it  \nvmassol - (12:13): XWIKI-4952  \nvmassol left at 12:23 (Quit: Leaving.  \nDenis joined #xwiki at 12:45  \nabusenius joined #xwiki at 12:57  \nflorinciu joined #xwiki at 13:22  \nvmassol joined #xwiki at 14:17  \nvmassol left at 14:32 (Quit: Leaving.  \nvmassol joined #xwiki at 14:43  \nvmassol left at 14:50 (Quit: Leaving.  \nvmassol joined #xwiki at 15:26  \nvmassol left at 15:50 (Quit: Leaving.  \nmflorea left at 16:13 (Quit: Leaving.  \nsburjan` left at 16:23 (Quit: 0x0 Quit  \nsburjan` joined #xwiki at 16:34  \nxwikibot joined #xwiki at 20:38  \nxwikibot joined #xwiki at 21:25  \ncjdelisle` - (21:34): !news  \nnpm\\_ is now known as npm ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nsdumitriu joined #xwiki at 21:40  \nvmassol - (21:49): ohloh has fixed our issue: https://www.ohloh.net/p/compare?metric=Activity&project\\_0=XWiki&project\\_1=Foswiki  \nvmassol - (21:49): (we now have full stats again)  \nvmassol - (21:50): https://www.ohloh.net/p/compare?metric=Contributors&project\\_0=XWiki&project\\_1=Foswiki  \nvmassol - (21:51): they seem to have lots of activity too, the two projects look similar  \nvmassol - (21:52): hmm seems I've broken ohloh\u2026. its down now :)  \ncjdelisle` - (21:53): haha. It's like internet clean house month. if not a down due to DDoS then down from a crash.  \ncjdelisle` - (21:53): Did you increase the permgen space? My experience with tomcat is when it runs out of permgen you need at least a kill -4 to stop it.  \nvmassol - (21:57): no I didn't  \nvmassol - (21:57): it seems there are some pages that fail to rename  \nvmassol - (21:57): when I try to rename them the thread never stops  \nvmassol - (21:57): and seem to be causing issues  \nvmassol - (21:58): also found that renaming a page in xwiki syntax 1.0 doesn't work anymore  \nvmassol - (21:58): it fails here:  \nvmassol - (21:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0newDocument.setContent(newDocumentXDOM);  \ncjdelisle` - (21:58): That doesn't make much sense.  \nvmassol - (21:58): this tries to lokup a BlockRenderer for the 1.0 synatx which doesn't exis  \nvmassol - (21:58): thus the delete part of the rename is not done  \nvmassol - (21:58): but yes this is different from the hang up  \nvmassol - (21:59): I have renamed several pages on xwiki.org though  \nvmassol - (21:59): and it worked fine  \nvmassol - (21:59): so I'm not understanding sometihng obbiously  \nvmassol - (22:00): it's when there are links to be refactoed in the new document it sees  \nvmassol - (22:00): seems  \nvmassol - (22:01): I have reproduced the rename issue locally  \ncjdelisle` - (22:11): Caused by: java.lang.OutOfMemoryError: Java heap space  \ncjdelisle` - (22:11): org.xwiki.velocity.XWikiVelocityException: Failed to evaluate content with id [/templates/htmlheader.vm]  \ncjdelisle` - (22:14): lots of haepspace, no permgen.  \njvelo joined #xwiki at 22:15  \njvelo left at 22:29 (Ping timeout: 250 seconds  \nabusenius left at 22:37 (Quit: Konversation terminated!  \nMenso joined #xwiki at 22:38  \nvmassol left at 23:16 (Quit: Leaving.  \nsdumitriu left at 23:35 (Quit: Leaving.  \nMenso1 joined #xwiki at 23:40  \nMenso left at 23:42 (Ping timeout: 240 seconds  \n\n"}