{"id": "dev:IRC.xwikiArchive20121106", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20121106", "title": "IRC Archive for channel #xwiki on 06 November 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has quit  \n00:12\u00a0<jvdrean>\u00a0has quit  \n00:33\u00a0<abusenius>\u00a0has quit  \n00:34\u00a0<vmassol>\u00a0has joined #xwiki  \n00:38\u00a0<fmancinelli>\u00a0has quit  \n00:46\u00a0<vmassol>\u00a0has quit  \n01:14\u00a0<vmassol>\u00a0has joined #xwiki  \n01:26\u00a0<vmassol>\u00a0has quit  \n01:53\u00a0<vmassol>\u00a0has joined #xwiki  \n02:05\u00a0<vmassol>\u00a0has quit  \n02:18\u00a0<coud10>\u00a0has quit  \n02:33\u00a0<vmassol>\u00a0has joined #xwiki  \n02:46\u00a0<vmassol>\u00a0has quit  \n02:53\u00a0<Denis>\u00a0has quit  \n03:12\u00a0<vmassol>\u00a0has joined #xwiki  \n03:24\u00a0<vmassol>\u00a0has quit  \n03:51\u00a0<vmassol>\u00a0has joined #xwiki  \n04:03\u00a0<vmassol>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:32\u00a0<vmassol>\u00a0has joined #xwiki  \n04:44\u00a0<vmassol>\u00a0has quit  \n05:11\u00a0<vmassol>\u00a0has joined #xwiki  \n05:24\u00a0<vmassol>\u00a0has quit  \n05:51\u00a0<vmassol>\u00a0has joined #xwiki  \n05:57\u00a0<tekzilla>\u00a0has quit  \n05:59\u00a0<tekzilla>\u00a0has joined #xwiki  \n06:03\u00a0<Denis>\u00a0has quit  \n06:06\u00a0<vmassol>\u00a0has quit  \n06:32\u00a0<vmassol>\u00a0has joined #xwiki  \n06:33\u00a0<jvelo>\u00a0has quit  \n06:45\u00a0<vmassol>\u00a0has quit  \n07:13\u00a0<vmassol>\u00a0has joined #xwiki  \n07:26\u00a0<vmassol>\u00a0has quit  \n07:41\u00a0<mflorea>\u00a0has joined #xwiki  \n07:53\u00a0<vmassol>\u00a0has joined #xwiki  \n08:04\u00a0<vmassol1>\u00a0has joined #xwiki  \n08:04\u00a0<vmassol>\u00a0has quit  \n08:15\u00a0<jvelo>\u00a0has joined #xwiki  \n08:34\u00a0<Denis>\u00a0has joined #xwiki  \n08:37\u00a0<mflorea>\u00a0has quit  \n08:46\u00a0<npm>\u00a0has quit  \n09:00\u00a0<mflorea>\u00a0has joined #xwiki  \n09:11\u00a0<vmassol1>\u00a0cjd: good morning, would be great if you could find some time to fix http://jira.xwiki.org/browse/XWIKI-8403# :)  \n09:11\u00a0<vmassol1>\u00a0is now known as <vmassol>  \n09:27\u00a0<vmassol>\u00a0oh just realized that 4.3M2 should have been released yesterday.....  \n09:27\u00a0<vmassol>\u00a0who's the RM?  \n09:42\u00a0<sburjan>\u00a0has joined #xwiki  \n09:42\u00a0<vmassol>\u00a0has quit  \n09:46\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:59\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:06\u00a0<vmassol>\u00a0has joined #xwiki  \n10:07\u00a0<vmassol>\u00a0hi guys, who's the RM for 4.3M2 and what's the status for the release (should have been released yesterday)?  \n10:08\u00a0<sburjan>\u00a0has quit  \n10:08\u00a0<vmassol>\u00a0hmm http://ci.xwiki.org/job/xwiki-platform/2848/console  \n10:08\u00a0<vmassol>\u00a0session is closed  \n10:09\u00a0<vmassol>\u00a0(I haven't had time to read the commits related to the store yet, hope it's not some regression)  \n10:09\u00a0<vmassol>\u00a0AndreasJonsson: any idea?  \n10:10\u00a0<vmassol>\u00a0tmortagne: I think you broke http://ci.xwiki.org/view/Commons/job/xwiki-commons%20Quality%20Checks/ ;)  \n10:11\u00a0<tmortagne>\u00a0vmassol: yes, I'm on it  \n10:11\u00a0<vmassol>\u00a0ok  \n10:11\u00a0<sburjan>\u00a0has joined #xwiki  \n10:12\u00a0<vmassol>\u00a0I'm manually triggering build of platform to see if the problem is flickering or not  \n10:12\u00a0<vmassol>\u00a0btw platform 4.2 is failing since the 30th of October: http://ci.xwiki.org/view/Platform/job/xwiki-platform-4.2/  \n10:14\u00a0<vmassol>\u00a0hmm seems we have compilation errors in http://ci.xwiki.org/view/Functional%20Tests/job/xwiki-enterprise-test-cluster/1678/console  \n10:14\u00a0<vmassol>\u00a0might be caused by Fabio's move of REST resources?  \n10:14\u00a0<AndreasJonsson>\u00a0vmassol: I have been monitoring the test results carefully since I committed my fixes.  \n10:17\u00a0<vmassol>\u00a0trying to fix the cluster tests  \n10:17\u00a0<AndreasJonsson>\u00a0vmassol: I have seen a couple of exceptions that worries me, but I have failed to reproduced them.  \n10:19\u00a0<vmassol>\u00a0AndreasJonsson: have you seen this one before?  \n10:20\u00a0<AndreasJonsson>\u00a0No.  \n10:21\u00a0<vmassol>\u00a0I don't really understand why the session would be closed at that time  \n10:21\u00a0<AndreasJonsson>\u00a0It could possibly be a regression. \u00a0Also, this one about failing to save xwiki:XWiki.ComponentClass could be: http://ci.xwiki.org/job/xwiki-enterprise-test-extension/1179/console  \n10:22\u00a0<AndreasJonsson>\u00a0I don't understand this either. \u00a0I have not added any code that closes the session at any other time than it would have before my fixes.  \n10:24\u00a0<vmassol>\u00a0AndreasJonsson: I've not reviewed your modifications yet. The only thing I've seen so far while glancing at some emails and \u00a0which has raised a warning in my head is the threadlocal addition  \n10:25\u00a0<vmassol>\u00a0we need to be very careful to release any threadlocal explicitly as otherwise it may cause a memory leak, but I haven't checked yet if it's released or not  \n10:25\u00a0<vmassol>\u00a0(I'm referring to http://blog.crazybob.org/2006/02/threadlocal-memory-leak.html )  \n10:25\u00a0<AndreasJonsson>\u00a0Ok, I will have a look at that.  \n10:26\u00a0<vmassol>\u00a0https://www.google.fr/search?q=threadlocal+memory+leak&aq=f&oq=threadlocal+memory+leak&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8  \n10:26\u00a0<vmassol>\u00a0ahah  \n10:27\u00a0<jvelo>\u00a0has quit  \n10:30\u00a0<sburjan>\u00a0:)  \n10:31\u00a0<vmassol>\u00a0it seems it's harder and harder to find RMs, we might need to come up with some different strategies than waiting for devs to propose themselves...  \n10:31\u00a0<vmassol>\u00a0(side note: I'd have proposed myself but I need to 1) catch up with my emails and 2) prepare my presentation for Devoxx next week  \n10:31\u00a0<vmassol>\u00a0)  \n10:31\u00a0<Slashman>\u00a0has joined #xwiki  \n10:33\u00a0<fmancinelli>\u00a0has joined #xwiki  \n10:35\u00a0<vmassol>\u00a0hmm platform fails to build fo rme  \n10:35\u00a0<vmassol>\u00a0in extension-script  \n10:36\u00a0<vmassol>\u00a0tmortagne: https://gist.github.com/4023700  \n10:36\u00a0<vmassol>\u00a0or mflorea maybe  \n10:36\u00a0<sburjan>\u00a0vmassol: are you using apache 3.0.3 or 3.0.4 ?  \n10:36\u00a0<sburjan>\u00a0\\*maven  \n10:37\u00a0<vmassol>\u00a03.0.3  \n10:37\u00a0<vmassol>\u00a0(ie the recommended version here: http://dev.xwiki.org/xwiki/bin/view/Community/Building )  \n10:37\u00a0<sburjan>\u00a0try with 3.0.4. I remember having some issues with 3.0.3. Alsi while you were in vacation next week I remember that tmortagne updated the agents to 3.0.4  \n10:38\u00a0<vmassol>\u00a0then we haven an issue because we recommend 3.0.3  \n10:38\u00a0<mflorea>\u00a0vmassol: it's a bug in 3.0.3  \n10:38\u00a0<vmassol>\u00a0mflorea: why didn't we update the Building page then?  \n10:38\u00a0<vmassol>\u00a0we forgot?  \n10:39\u00a0<vmassol>\u00a0how do we handle the issue we have with 3.0.4?  \n10:39\u00a0<vmassol>\u00a0this issue  \n10:39\u00a0<mflorea>\u00a0yes, I've been using 3.0.4 for a long time  \n10:39\u00a0<mflorea>\u00a0what issue?  \n10:39\u00a0<vmassol>\u00a0mflorea: http://dev.xwiki.org/xwiki/bin/view/Community/Building  \n10:40\u00a0<vmassol>\u00a0mflorea: could you point me to the maven bug url?  \n10:40\u00a0<vmassol>\u00a0(the one related to the TreeWalker)  \n10:40\u00a0<mflorea>\u00a0I don't have it. Maven 3.0.3 just doesn't bring a transitive dep as it should  \n10:41\u00a0<evalica>\u00a0has joined #xwiki  \n10:43\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:44\u00a0<rakkaus\\_>\u00a0has joined #xwiki  \n10:44\u00a0<vmassol>\u00a0mflorea: It would be nice to understand the issue and then to update the building page  \n10:44\u00a0<mflorea>\u00a0TreeWalker is in a jar dependency of xalan (xalan-serializer I think) and Maven 3.0.3 fails to put this jar in the class path  \n10:45\u00a0<mflorea>\u00a0dependency:tree on Maven 3.0.4 includes this jar, while on Maven 3.0.3 it does not  \n10:45\u00a0<rakkaus\\_>\u00a0Hello guys, I have a question, I need convert my documents from Xwiki 2.0 to -> 1.0, how I can do that?  \n10:46\u00a0<rakkaus\\_>\u00a0It's should be simply, but i cant find any tool for that.  \n10:46\u00a0<vmassol>\u00a0mflorea: ok thanks, can I leave it to you to update the Building page?  \n10:46\u00a0<mflorea>\u00a0yes  \n10:46\u00a0<vmassol>\u00a0thanks  \n10:47\u00a0<tmortagne>\u00a0rakkaus\\_: it's not that simple actually because we don't really have any tool to generate xwiki/1.0 syntax  \n10:47\u00a0<vmassol>\u00a0rakkaus\\_: since XWiki Syntax 1.0 is deprecated and not used there should be not reason for that  \n10:48\u00a0<rakkaus\\_>\u00a0:( may be you know any tool that can convert my Xwiki 2.0 to other formats? like a confluence?  \n10:49\u00a0<vmassol>\u00a0what's your need?  \n10:49\u00a0<vmassol>\u00a0what do you wish to achieve?  \n10:50\u00a0<rakkaus\\_>\u00a0i have task to copy all documentation from our Xwiki 2.0 no confluence  \n10:51\u00a0<rakkaus\\_>\u00a0I have tool for that called UWC but that tool supports only xwiki 1.0  \n10:55\u00a0<vmassol>\u00a0rakkaus\\_: I'd be curious to know the reason for switching :)  \n10:55\u00a0<vmassol>\u00a0you can generate HTML with xwiki rendering  \n10:55\u00a0<vmassol>\u00a0I guess confluence takes HTML natively now so that should work  \n10:56\u00a0<rakkaus\\_>\u00a0reason is simple, internal we use Xwiki but part of our customers wants confluence...  \n10:57\u00a0<rakkaus\\_>\u00a0how I can generate HTML with xwiki rendering?  \n10:57\u00a0<vmassol>\u00a0you can check the doc on http://rendering.xwiki.org  \n10:57\u00a0<vmassol>\u00a0it has some examples  \n10:58\u00a0<rakkaus\\_>\u00a0ok, thank you!  \n10:58\u00a0<evalica>\u00a0vmassol: do you know why I can't save the page ReleasemanagerRoster? I wanted to add a toc or to change the order, but after the save the [groovy] macros failes  \n10:58\u00a0<vmassol>\u00a0it's saved  \n10:58\u00a0<vmassol>\u00a0(evalica)  \n10:59\u00a0<vmassol>\u00a0I can view it fine  \n10:59\u00a0<vmassol>\u00a0and it has the toc  \n10:59\u00a0<vmassol>\u00a0ah no the macro fails  \n10:59\u00a0<vmassol>\u00a0vbecause you don't have PR I guess  \n10:59\u00a0<vmassol>\u00a0let me save it  \n10:59\u00a0<vmassol>\u00a0ah no  \n10:59\u00a0<vmassol>\u00a0it's because you broke the code I think  \n11:00\u00a0<AndreasJonsson>\u00a0I would like to merge feature-authorization-context before we release 4.3M2, but that will probably delay the relase further. \u00a0Any opinions about that?  \n11:00\u00a0<vmassol>\u00a0it's parsing the XDOM  \n11:00\u00a0<evalica>\u00a0vmassol: I'm gonna revert it then  \n11:00\u00a0<vmassol>\u00a0so maybe since you changed the structure it's causing some error  \n11:01\u00a0<vmassol>\u00a0AndreasJonsson: hmm I can't make a call about this yet (i'd need to catch up with my emails first) but what I see is that we've committed a lot of big stuff not long ago and we already have a lot to stabilize  \n11:01\u00a0<vmassol>\u00a0how long more do you reckon we'd need?  \n11:01\u00a0<vmassol>\u00a0I think first the vOTE would need to be concluded  \n11:02\u00a0<vmassol>\u00a0I don't remember seeing some answer yet  \n11:02\u00a0<evalica>\u00a0vmassol: you also need to vote on solr in order to be commited, there will be also a stabilization for it  \n11:02\u00a0<vmassol>\u00a0ah solr is not committed yet?  \n11:02\u00a0<vmassol>\u00a0(in master I mean)  \n11:03\u00a0<evalica>\u00a0waiting for vote  \n11:03\u00a0<AndreasJonsson>\u00a0It is likely to cause some regressions, particularily in extensions.  \n11:03\u00a0<vmassol>\u00a0hmm that's bad  \n11:03\u00a0<vmassol>\u00a0since we're already lagging by one day  \n11:03\u00a0<vmassol>\u00a0so this means at least 1 week of delay :(  \n11:03\u00a0<vmassol>\u00a0to stabilize and ensure proper testing  \n11:03\u00a0<evalica>\u00a0the voting process is slow  \n11:03\u00a0<vmassol>\u00a0no  \n11:03\u00a0<vmassol>\u00a0it's fast  \n11:03\u00a0<vmassol>\u00a0the sender was slow  \n11:03\u00a0<vmassol>\u00a0:)  \n11:04\u00a0<vmassol>\u00a0the vote is 72 hours this is fast  \n11:04\u00a0<vmassol>\u00a0committing on last days of release is always bad  \n11:04\u00a0<evalica>\u00a0we don't have yet a manager \u2026  \n11:04\u00a0<vmassol>\u00a0bad in the sense = no feedback, regressions, not enough testing, etc  \n11:04\u00a0<vmassol>\u00a0evalica: I can see that\u2026 seems I'm useful after all ....  \n11:05\u00a0<vmassol>\u00a0but right now we're in a bad shape  \n11:05\u00a0<vmassol>\u00a0for 4.3M2  \n11:05\u00a0<vmassol>\u00a0since I don't see how we could release without delaying by more than a week  \n11:05\u00a0<vmassol>\u00a0unless we agree not to have solr \u00a0in it  \n11:06\u00a0<evalica>\u00a0at least is a M2, not a RC or a final \u2026. and is always good when we have new features  \n11:06\u00a0<vmassol>\u00a0no  \n11:06\u00a0<vmassol>\u00a0it's good when we have tested and reviewed features  \n11:06\u00a0<vmassol>\u00a0otherwise it's less good  \n11:06\u00a0<evalica>\u00a0you also need time to implement those features  \n11:06\u00a0<vmassol>\u00a0err?  \n11:06\u00a0<vmassol>\u00a0that seems obvious to me  \n11:06\u00a0<evalica>\u00a0:) it is  \n11:07\u00a0<vmassol>\u00a0if I have to implement a full wik it'll take me one year minimum, if I have to implement a parser it'll take me 1 month, if I have to implement one class it'll take me 1 day...  \n11:07\u00a0<vmassol>\u00a0it's all about doing something that's possible int he timeframe you have  \n11:07\u00a0<vmassol>\u00a0that's called tileboxing  \n11:08\u00a0<vmassol>\u00a0timeboxing  \n11:08\u00a0<vmassol>\u00a0comittting a soon as you have the minimum workong  \n11:08\u00a0<vmassol>\u00a0and then working incrementally  \n11:08\u00a0<vmassol>\u00a0this allows to solve integration issues and allow committers to progressively understand your code  \n11:09\u00a0<vmassol>\u00a0it's agile dev basically  \n11:09\u00a0<vmassol>\u00a0anyway  \n11:09\u00a0<vmassol>\u00a0what's sure  \n11:09\u00a0<vmassol>\u00a0is that we won't be able to release today  \n11:09\u00a0<vmassol>\u00a0nor this week IMO  \n11:09\u00a0<vmassol>\u00a0lots of tests are broken ATM  \n11:09\u00a0<vmassol>\u00a0then we need to decide if we also want to wait for Andreas' branch merge  \n11:09\u00a0<AndreasJonsson>\u00a0vmassol: \u00a0As of feature-authorization-context, it's not really anything to vote about. \u00a0It fixes some issues which I think everyone agrees on that they need to be fixed. \u00a0But it might break some extensions, so better put it in a milestone release than in a RC, right?  \n11:10\u00a0<vmassol>\u00a0AndreasJonsson: yes but if it's dangerous we might want to wait for 4.4M1  \n11:11\u00a0<Enygma`>\u00a0vmassol: I`m going to go ahead and merge 'feature-solr-search' since we`re short on time and there are already 6 +1s.  \n11:11\u00a0<vmassol>\u00a0:)  \n11:11\u00a0<vmassol>\u00a0Enygma`: ok, I think we want that anyway in 4.3 since it was part of the roadma p  \n11:11\u00a0<vmassol>\u00a0and it's not dangerous since it's not on by default  \n11:12\u00a0<vmassol>\u00a0(not too dangerous)  \n11:12\u00a0<Enygma`>\u00a0right :)  \n11:12\u00a0<vmassol>\u00a0Enygma`: make sure it's seen as experimental in the administration maybe?  \n11:13\u00a0<Enygma`>\u00a0yes, I`d have to add an \"Experimental\" notice somewhere since it`s not there right now  \n11:18\u00a0<vmassol>\u00a0evalica: fixed  \n11:18\u00a0<evalica>\u00a0vmassol: thanks  \n11:31\u00a0<sburjan>\u00a0vmassol: this looks interesting: http://docs.codehaus.org/display/SONAR/Toxicity+Chart+Plugin  \n11:31\u00a0<sburjan>\u00a0are we using it ?  \n11:33\u00a0<vmassol>\u00a0sburjan: no, we're not using sonar ATM, but I'd like to set up our own instance in not too long  \n11:33\u00a0<vmassol>\u00a0using = having some rules around it, not just runnin git  \n12:39\u00a0<vmassol>\u00a0has quit  \n12:50\u00a0<npm>\u00a0has joined #xwiki  \n12:52\u00a0<vmassol>\u00a0has joined #xwiki  \n12:55\u00a0<vmassol>\u00a0Enygma`: seems the solr module is not compiling, see http://ci.xwiki.org/view/Platform/job/xwiki-platform/2850/console  \n12:57\u00a0<vmassol>\u00a0could someone check why this escaping test is fialing: http://ci.xwiki.org/view/Functional%20Tests/job/xwiki-enterprise-test-escaping/org.xwiki.enterprise$xwiki-enterprise-test-escaping/1914/testReport/org.xwiki.test.escaping/ObjectAndClassEditorTest/testObjectEditor/  \n12:57\u00a0<vmassol>\u00a0?  \n12:59\u00a0<vmassol>\u00a0mflorea: I see you're the last one to have modified editobject.vm....  \n13:00\u00a0<vmassol>\u00a0and http://ci.xwiki.org/view/Functional%20Tests/job/xwiki-enterprise-test-escaping/org.xwiki.enterprise$xwiki-enterprise-test-escaping/1914/testReport/org.xwiki.test.escaping/ObjectAndClassEditorTest/testObjectEditor/ says it's related to editobject.vm, could there be a relationship?  \n13:03\u00a0<vmassol>\u00a0wow, test-ui has not been building for about a week too....  \n13:03\u00a0<vmassol>\u00a0:(  \n13:03\u00a0<vmassol>\u00a0http://ci.xwiki.org/view/Functional%20Tests/job/xwiki-enterprise-test-ui/  \n13:06\u00a0<mflorea>\u00a0vmassol: I'm almost done with my work for 4.3M2. I'll start looking at the failing tests after lunch  \n13:09\u00a0<vmassol>\u00a0ok  \n13:11\u00a0<vmassol>\u00a0tmortagne: there\"s a high chance that http://ci.xwiki.org/job/xwiki-platform/2846/ is causing the build failure of http://ci.xwiki.org/view/Functional%20Tests/job/xwiki-enterprise-test-selenium/  \n13:11\u00a0<Enygma`>\u00a0vmassol: looking at it  \n13:17\u00a0<mflorea>\u00a0has quit  \n13:18\u00a0<vmassol>\u00a0AndreasJonsson: I'm worried  \n13:18\u00a0<vmassol>\u00a0just noticed some exceptios I hadn't seen locally  \n13:18\u00a0<vmassol>\u00a0before  \n13:19\u00a0<vmassol>\u00a0https://gist.github.com/4024318  \n13:19\u00a0<vmassol>\u00a0this is definitely new and wasn't there when I left for Holidays 10 days ago  \n13:21\u00a0<vmassol>\u00a0(I got this when manually running the FAQ functional tests)  \n13:21\u00a0<Inge->\u00a0so it is your fault for having a vacation!  \n13:21\u00a0<vmassol>\u00a0yeah that's one way of viewing it :)  \n13:22\u00a0<Inge->\u00a0:P  \n13:22\u00a0<vmassol>\u00a0found another problem too  \n13:22\u00a0<vmassol>\u00a0for tmortagne this one  \n13:22\u00a0<vmassol>\u00a0https://gist.github.com/4024325  \n13:34\u00a0<cjd>\u00a0Good morning, I'm going to yank PreemptiveLock first thing, it isn't strictly necessary since the underlying storage now uses randomly named temp files and on any sane filesystem the rename operation is atomic.  \n13:35\u00a0<cjd>\u00a0Good example of me trying to be too clever and making something which fails in weird ways on various processor types  \n13:35\u00a0<cjd>\u00a0now I have cjdns for that :)  \n13:36\u00a0<vmassol>\u00a0ok great  \n13:38\u00a0<vmassol>\u00a0Enygma`: you might want to remove the checkstyle comment too  \n13:38\u00a0<vmassol>\u00a0hmmm  \n13:39\u00a0<vmassol>\u00a0you've just added it  \n13:39\u00a0<Enygma`>\u00a0which one vmassol?  \n13:39\u00a0<vmassol>\u00a0I'm looking at https://github.com/xwiki/xwiki-platform/commit/18729e973c519788b5727775ad652b604174a1d3  \n13:39\u00a0<vmassol>\u00a0I don't understand the comment re checzktyle  \n13:40\u00a0<vmassol>\u00a0AFAIK we don't comment stuff like this because it doesn't really make sense, to reduce fan out complecxity you can act on just any dep  \n13:40\u00a0<vmassol>\u00a0also you should use whatever is best for the code  \n13:41\u00a0<vmassol>\u00a0and you can exclude one checkstyle rule with the checkstyle-permissions file and put a comment there to explain why it's excludd  \n13:41\u00a0<Enygma`>\u00a0if I use the java.lang.Locale constructor, I get class fan out complexity over 20. But we agreed that java.lang.\\* should be excluded by checkstyle, but a current checkstyle bug prevents that  \n13:41\u00a0<vmassol>\u00a0checkstyle-suppressions.xml I mean  \n13:42\u00a0<vmassol>\u00a0(not checkstyle-permissions)  \n13:42\u00a0<Enygma`>\u00a0yes, I could do it like that too  \n13:42\u00a0<Enygma`>\u00a0but I would exclude the entire method just for that...  \n13:42\u00a0<Enygma`>\u00a0anyway, if you think it's best  \n13:42\u00a0<vmassol>\u00a0I think it's better to have clean code  \n13:42\u00a0<vmassol>\u00a0as clean as possible I mean  \n13:43\u00a0<vmassol>\u00a0and when the checkstyle fan out bug is fixed we can just removed the suppressions file  \n13:43\u00a0<vmassol>\u00a0you should explain it in comment and link to the checkztyle bug  \n13:43\u00a0<Enygma`>\u00a0k  \n13:44\u00a0<vmassol>\u00a0https://sourceforge.net/tracker/?func=detail&atid=397078&aid=3575496&group\\_id=29721  \n13:45\u00a0<Enygma`>\u00a0thanks  \n13:51\u00a0<vmassol>\u00a0sburjan: shouldn't we update http://dev.xwiki.org/xwiki/bin/view/Community/DatabaseSupportStrategy for virtual model support?  \n13:51\u00a0<vmassol>\u00a0would be great if you could report which supported DBs work in virtual model and which don't...  \n13:52\u00a0<sburjan>\u00a0I first need to find out what virtual mode is :)  \n13:52\u00a0<vmassol>\u00a0multiwiki  \n13:52\u00a0<vmassol>\u00a0virtual=1  \n13:52\u00a0<sburjan>\u00a0oh, ok  \n13:52\u00a0<sburjan>\u00a0I ALWAYS confuse virtual mode with the thing that allows you to put subwikis as subdomains. like dev.xwiki.org  \n13:53\u00a0<rakkaus\\_>\u00a0has quit  \n13:53\u00a0<sburjan>\u00a0i'll put that in my ToDo list  \n13:53\u00a0<vmassol>\u00a0thanks  \n13:54\u00a0<vmassol>\u00a0someone just asked the question on the list  \n13:54\u00a0<vmassol>\u00a0and I was about to give him the link to the DB support page  \n13:54\u00a0<vmassol>\u00a0but it couldn't have answered his question  \n13:54\u00a0<vmassol>\u00a0if you read this page  \n13:54\u00a0<vmassol>\u00a0then postgreSQL is as supported as MySQL  \n13:54\u00a0<vmassol>\u00a0which is not true I believe  \n13:55\u00a0<sburjan>\u00a0yes, I agree. afaik except postgres they all support multiwiki. In postgres you have to create the subwiki database manually if I remember correctly  \n13:55\u00a0<vmassol>\u00a0actually this page doesn't answer the level of support we have  \n13:55\u00a0<vmassol>\u00a0it just says that we're supporting it  \n13:58\u00a0<Inge->\u00a0I would have preferred postgresql, but after talking to you guys, I went \"safe\" with mysql instead...  \n13:58\u00a0<vmassol>\u00a0yep we need to spend some time to make it work on postgresql  \n13:58\u00a0<vmassol>\u00a0I could do it if I find 3-4 days  \n13:59\u00a0<vmassol>\u00a0but not now, too busy ATM  \n14:17\u00a0<AndreasJonsson>\u00a0vmassol: Its again something with xwiki:XWiki.ComponentClass, so probably the same issue that I'm worried about myself. \u00a0I'm trying to reproduce it locally...  \n14:17\u00a0<vmassol>\u00a0tmortagne: the FAQ application is now using the new localization module :) Your first client!  \n14:18\u00a0<vmassol>\u00a0(just committed)  \n14:18\u00a0<tmortagne>\u00a0that was fast :)  \n14:18\u00a0<vmassol>\u00a0It allowed me to fix a bug in my functional tests  \n14:18\u00a0<vmassol>\u00a0and to remove 6 lines from it :)  \n14:18\u00a0<tmortagne>\u00a0good it's that way ;)  \n14:18\u00a0<vmassol>\u00a0yep  \n14:19\u00a0<vmassol>\u00a0tmortagne: now there's the componet duplications I mentioned above  \n14:20\u00a0<tmortagne>\u00a0well those components you listed exist in only one module AFAIK so I don't know from where this duplication comes from  \n14:22\u00a0<vmassol>\u00a0yes I don't know either  \n14:22\u00a0<vmassol>\u00a0it happens when I start XE too  \n14:23\u00a0<vmassol>\u00a0(I mean clean hsqldb/jetty XE built from sources)  \n14:23\u00a0<tmortagne>\u00a0finishing something and will look at it  \n14:32\u00a0<vmassol>\u00a0Enygma`: do you think you could do RM for 4.3M2/RC/final? We need someone and I cannot do it for this one (I have devoxx to prepare now + catch up on stuff). I can do the 4.4 one though  \n14:43\u00a0<mflorea>\u00a0has joined #xwiki  \n15:10\u00a0<AndreasJonsson>\u00a0vmassol: I have an idea about the exception regarding xwiki:XWiki.ComponentClass. \u00a0Its related to XWIKI-8322, the integration of the new execution context declartions, but I wouldn't call it a regression, because in theory it could have occured also before. \u00a0The XWikiStatsStoreService and the UpdateThread do not clone the xwikicontext when spawning a new thread. \u00a0This means we have a race condition for the \"hibsession\" context variable during the fi  \n15:10\u00a0<Enygma`>\u00a0right, so I`ll take care of 4.3M2 and for the others we`ll have to see when we get there.  \n15:11\u00a0<vmassol>\u00a0great! thanks a lot Enygma` that's cool  \n15:11\u00a0<vmassol>\u00a0:  \n15:11\u00a0<vmassol>\u00a0:)  \n15:11\u00a0<Enygma`>\u00a0:)  \n15:12\u00a0<vmassol>\u00a0AndreasJonsson: are stats on by default?  \n15:13\u00a0<vmassol>\u00a0AFAIK they're off by default  \n15:13\u00a0<vmassol>\u00a0but maybe you're still right with some other threads like the Lucene one  \n15:14\u00a0<AndreasJonsson>\u00a0The lucene threads are cloning the context. \u00a0How about the UpdateThread? \u00a0Is that spawned in the default configuration?  \n15:18\u00a0<vmassol>\u00a0I didn't even know about this update thread\u2026 :) apparently it's the feed plugin that handles it, is it started by default?  \n15:19\u00a0<vmassol>\u00a0it seems you have to call startUpdateFeedsInSpace to start it  \n15:19\u00a0<vmassol>\u00a0so I'd say it's not running by default  \n15:27\u00a0<AndreasJonsson>\u00a0If they are not running by default they do not explain this particular exception. \u00a0But they should clone the context in any case. \u00a0But I think that it is clear that the exception must be caused by a race condition for \"hibsession\".  \n15:29\u00a0<tmortagne>\u00a0AndreasJonsson: I think stats are on by default  \n15:30\u00a0<vmassol>\u00a0tmortagne:  \n15:30\u00a0<vmassol>\u00a0#-# Note: Statistics are disabled by default for improved performances/space.  \n15:30\u00a0<vmassol>\u00a0xwiki.stats.default=0  \n15:30\u00a0<vmassol>\u00a0(from xwiki.cfg)  \n15:30\u00a0<tmortagne>\u00a0that's only part of the configuration  \n15:31\u00a0<vmassol>\u00a0I know but the message is pretty clear, we should fix it if it's wrong  \n15:31\u00a0<vmassol>\u00a0the full config is:  \n15:31\u00a0<vmassol>\u00a0#-# Stats configuration allows to globally activate/deactivate stats module (launch storage thread, register events...).  \n15:31\u00a0<vmassol>\u00a0#-# Enabled by default.  \n15:31\u00a0<vmassol>\u00a0#-# \"statistics\".  \n15:31\u00a0<vmassol>\u00a0xwiki.stats.default=0  \n15:31\u00a0<vmassol>\u00a0I personally never understand what it means  \n15:32\u00a0<vmassol>\u00a0it means the thread is started but not used?  \n15:32\u00a0<tmortagne>\u00a0xwiki.stats control if the thread should be started, xwiki.stats.default can be changed at runtime, it's just the default configuration  \n15:33\u00a0<vmassol>\u00a0so for our cases at hand it's the same as saying that stats are not used by default  \n15:33\u00a0<tmortagne>\u00a0nothing is saved id that's the question but pretty sure a context is created and initialized  \n15:34\u00a0<vmassol>\u00a0yes but if it's not used to save anything it shouldn't afftect \u00a0anything  \n15:35\u00a0<AndreasJonsson>\u00a0GroovyJob also seems to use xwikicontext without cloning it.  \n15:35\u00a0<vmassol>\u00a0it does  \n15:35\u00a0<vmassol>\u00a0AndreasJonsson:  \n15:35\u00a0<vmassol>\u00a0(this code I know)  \n15:36\u00a0<vmassol>\u00a0it's created in scheduleJob()  \n15:36\u00a0<vmassol>\u00a0in SchedulerPlugin  \n15:36\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0XWikiContext stubContext = prepareJobStubContext(object, context);  \n15:36\u00a0<vmassol>\u00a0ah but indeed it's not cloned  \n15:37\u00a0<vmassol>\u00a0but it's \"reset\"  \n15:37\u00a0<vmassol>\u00a0in prepareJobStubContext()  \n15:38\u00a0<vmassol>\u00a0for the store it's calling \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0context.getWiki().getStore().cleanUp(context);  \n15:38\u00a0<vmassol>\u00a0which ends any current transaction  \n15:38\u00a0<vmassol>\u00a0hmm that might be why...  \n15:39\u00a0<AndreasJonsson>\u00a0The UpdateThread also calls cleanUp, if it is running, regardless of wheter stats is enabled or not...  \n15:42\u00a0<AndreasJonsson>\u00a0Sorry, of course I ment to look at XWikiStatsStoreService, and that does not seem to touch the store if stats is enabled.  \n15:42\u00a0<AndreasJonsson>\u00a0s/enabled/disabled/  \n15:43\u00a0<vmassol>\u00a0still this was not happening before so some code was changed in the store impleentation  \n15:44\u00a0<fmancinelli>\u00a0guys, xwiki.org uses filesystem attachments?  \n15:44\u00a0<vmassol>\u00a0no  \n15:44\u00a0<fmancinelli>\u00a0ok  \n15:45\u00a0<AndreasJonsson>\u00a0Its a race condition, if you are \"lucky\" with the timing, it will not happen.  \n15:47\u00a0<vmassol>\u00a0I don't believe in this kind of coincidences  \n15:47\u00a0<vmassol>\u00a0it wasn't happening noticably before and suddenyly we get it every few minutes/hours  \n15:48\u00a0<vmassol>\u00a0so my take is that something has changed which is either making it more visible or causing it altogether  \n15:48\u00a0<vmassol>\u00a0but I don't know hte code you changed yet so cannot make a guess  \n15:54\u00a0<vmassol>\u00a0Enygma`: you may want to name it 43M2 to be consistent with past names ;)  \n15:56\u00a0<Enygma`>\u00a0hmm, sorry... the \"Create Release Plan\" step is confusing  \n15:56\u00a0<Enygma`>\u00a0thought it asked for the version, but then asked for the version again the page template  \n15:56\u00a0<Enygma`>\u00a0fixing it  \n15:57\u00a0<vmassol>\u00a0you can also fix the app to make it better if you want  \n15:57\u00a0<vmassol>\u00a0personally I'd like to rename it Release instead of ReleasePlan  \n15:57\u00a0<vmassol>\u00a0so that it becomes our Release application  \n15:58\u00a0<vmassol>\u00a0tmortagne: ahah\u2026 some copy paste? :)  \n15:58\u00a0<vmassol>\u00a0(just seen your last commit)  \n15:59\u00a0<tmortagne>\u00a0has quit  \n16:06\u00a0<tmortagne>\u00a0has joined #xwiki  \n16:28\u00a0<vmassol>\u00a0AndreasJonsson: it keeps biting us: http://ci.xwiki.org/job/xwiki-platform/2856/consoleFull  \n16:29\u00a0<vmassol>\u00a0it happens really regularly now  \n16:36\u00a0<cjd>\u00a0Same cause as PreemptiveLock failing, switching from AMD to inferior Intel processors :)  \n16:37\u00a0<vmassol>\u00a0I'm all for removing code so cool  \n16:37\u00a0<vmassol>\u00a0:)  \n16:38\u00a0<vmassol>\u00a0(unnecessary code that is ;))  \n16:46\u00a0<Enygma`>\u00a0fmancinelli: wondering how your fix for the rest test causes an escaping test to fail http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/1911/ ... they should be unrelated, though the only connection I see could be the className parameter (from the XWIKI-5242 jira issue that the escaping test is trying to protect against), but a change in a test like you did should have no impact on the rest of the code...  \n16:46\u00a0<Enygma`>\u00a0xwikibot: you`re tripping :)  \n16:50\u00a0<jvelo>\u00a0has joined #xwiki  \n16:51\u00a0<fmancinelli>\u00a0Enygma`, wait... context switching  \n16:52\u00a0<fmancinelli>\u00a0Enygma`, maybe it was just a glitch.  \n16:52\u00a0<fmancinelli>\u00a0Enygma`, the build seems fine now  \n16:52\u00a0<Enygma`>\u00a0I thought so too, but it is consistent in the last builds since your commit  \n16:54\u00a0<Enygma`>\u00a0fmancinelli: the http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/ tests are still failing  \n16:55\u00a0<Enygma`>\u00a0I mean, just the 1 test that seems to be failing since your commit as resulting from http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/1911/  \n16:55\u00a0<fmancinelli>\u00a0yes, but it doesn't make any sense :|  \n16:56\u00a0<Enygma`>\u00a0I agree :)  \n16:56\u00a0<Enygma`>\u00a0as I said, the only connection I see is the className parameter, as mentioned in the Jira issue... but even that is far fetched...  \n16:57\u00a0<vmassol>\u00a0Enygma`: I wrote about this this morning too I think  \n16:58\u00a0<vmassol>\u00a0(on irc)  \n16:58\u00a0<fmancinelli>\u00a0but they are unrelated APIs. I mean the URIs in XWIKI-5242 are not even part of REST  \n16:58\u00a0<fmancinelli>\u00a0let me check locally  \n16:58\u00a0<vmassol>\u00a0and my take was that mflorea also changed editiobject.vm  \n16:59\u00a0<vmassol>\u00a0and maybe it was linked  \n16:59\u00a0<vmassol>\u00a0mflorea said he would check this afternoon  \n16:59\u00a0<mflorea>\u00a0yes, I'm looking at the failing tests  \n16:59\u00a0<mflorea>\u00a0this one included  \n16:59\u00a0<cjd>\u00a0http://imgur.com/a/07TG4  \n17:00\u00a0<vmassol>\u00a0see history at 1:00 (paris time)  \n17:00\u00a0<vmassol>\u00a012:55 to be precise  \n17:01\u00a0<tmortagne>\u00a0has quit  \n17:01\u00a0<vmassol>\u00a0cjd: is that a proposal for a new xwiki logo? :)  \n17:02\u00a0<cjd>\u00a0heh  \n17:02\u00a0<cjd>\u00a0that's taken out my window  \n17:02\u00a0<vmassol>\u00a0nice  \n17:02\u00a0<vmassol>\u00a0makes me hungry....  \n17:02\u00a0<cjd>\u00a0not very good quality, need a better long shot lense  \n17:02\u00a0<vmassol>\u00a0nah I'm kidding :)  \n17:02\u00a0<cjd>\u00a0heh, not much tastes better  \n17:02\u00a0<fmancinelli>\u00a0on its way back after voting  \n17:03\u00a0<Enygma`>\u00a0cjd, yeah, you need to move your house a bit closer to the wildlife to get a better picture  \n17:03\u00a0<Enygma`>\u00a0fmancinelli: lol  \n17:03\u00a0<Enygma`>\u00a0awesome picture :)  \n17:03\u00a0<cjd>\u00a0all of those trees around there are apple trees  \n17:04\u00a0<Enygma`>\u00a0fmancinelli: so I guess we`ll leave mflorea handle the escaping test... sorry for the noise  \n17:04\u00a0<fmancinelli>\u00a0Enygma`, no problem  \n17:04\u00a0<mflorea>\u00a0yes  \n17:04\u00a0<vmassol>\u00a0cjd: oh, no linux trees?  \n17:04\u00a0<fmancinelli>\u00a0lol  \n17:04\u00a0<cjd>\u00a0heh  \n17:04\u00a0<vmassol>\u00a0too much context switching here...  \n17:05\u00a0<cjd>\u00a0context switching is expensive  \n17:05\u00a0<cjd>\u00a0events > threads :)  \n17:10\u00a0<Enygma`>\u00a0vmassol or anyone else, do you know why xwiki-enterprise jobs no longer link properly to the xwiki-platform jobs that triggered them? http://ci.xwiki.org/job/xwiki-enterprise/9536/ says: \"Started by upstream project \"xwiki-platform\" build number 2,846\" with the build number messed up and no link?  \n17:11\u00a0<vmassol>\u00a0works fine Enygma`: http://ci.xwiki.org/job/xwiki-enterprise/9541/  \n17:11\u00a0<vmassol>\u00a0it's just that we only save the last 10 builds for each job  \n17:11\u00a0<vmassol>\u00a0we could decide to save more  \n17:11\u00a0<Enygma`>\u00a0mh, right...  \n17:12\u00a0<Enygma`>\u00a0last 10 builds means last 10 build results or the actual artefacts as well?  \n17:13\u00a0<Enygma`>\u00a0if it`s only about build results, then yes, I would be in favor of increasing that number... since build results should not be very expensive to store compared to the actual artefacts  \n17:14\u00a0<vmassol>\u00a0I think it's only the build result, not the workspace  \n17:14\u00a0<vmassol>\u00a0AFAIK you can only see the last build's workspace  \n17:32\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:34\u00a0<vmassol>\u00a0guys, has anyone fixed the logback configuration when I was away?  \n17:34\u00a0<vmassol>\u00a0tmortagne maybe?  \n17:35\u00a0<tmortagne>\u00a0vmassol: not sure what you are referring to  \n17:35\u00a0<vmassol>\u00a0I'm referring to the fact that our default logback.xml config doesn't use a rolling file appender  \n17:35\u00a0<vmassol>\u00a0and thus logs keep growing forever  \n17:36\u00a0<tmortagne>\u00a0ok then no I did not fixed it  \n17:36\u00a0<tmortagne>\u00a0is this really logback job ?  \n17:36\u00a0<vmassol>\u00a0tmortagne: yes  \n17:36\u00a0<tmortagne>\u00a0I mean it's tomcat which write in the file  \n17:36\u00a0<tmortagne>\u00a0I don't see what logback can do about it  \n17:36\u00a0<vmassol>\u00a0hmm  \n17:36\u00a0<vmassol>\u00a0indeed we have removed the file appender  \n17:36\u00a0<tmortagne>\u00a0our default configuration is writing in the standard output  \n17:37\u00a0<vmassol>\u00a0so it's now tomcat  \n17:37\u00a0<vmassol>\u00a0so nothing to fix in plaform  \n17:37\u00a0<vmassol>\u00a0but still we need to fix it on xwiki.org and myxwiki.org  \n17:37\u00a0<vmassol>\u00a0and document it  \n17:38\u00a0<jvelo>\u00a0has quit  \n17:38\u00a0<AndreasJonsson>\u00a0A small detail I had forgotten about is that I sneaked in a synchronized in checkHibernate to ensure that hibernate isn't initiated several times. \u00a0But since the field sessionFactory in DefaultHibernateSessionFactory isn't volatile, it may still be initiated several times. \u00a0But surely, it couldn't be \\_more\\_ likely to happen due to my change?  \n17:40\u00a0<vmassol>\u00a0AndreasJonsson: you've not been able to reproduce it yet? When I had it , I was doing this: built the FAQ tests module and started xwiki from target/xwiki and then started the test in debug mode  \n17:41\u00a0<Enygma`>\u00a0tmortagne: can you please take a look over http://ci.xwiki.org/job/xwiki-enterprise-test-extension/org.xwiki.enterprise$xwiki-enterprise-test-extension/1180/testReport/ when you have the time?  \n17:42\u00a0<Denis>\u00a0has quit  \n17:42\u00a0<AndreasJonsson>\u00a0vmassol: No, I haven't reproduced it.  \n17:42\u00a0<tmortagne>\u00a0Enygma`: I'm reading http://jira.xwiki.org/browse/XWIKI-8309?focusedCommentId=72637&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-72637 if that's whaat you mean  \n17:44\u00a0<tmortagne>\u00a0has quit  \n17:46\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:46\u00a0<Enygma`>\u00a0tmortagne: yes, that`s probably the cause as mflorea pointed out :)  \n17:47\u00a0<mflorea>\u00a0tmortagne: I've checked the extension tests  \n17:47\u00a0<mflorea>\u00a0you just need to fix the choice format handling  \n17:48\u00a0<Enygma`>\u00a0vmassol: what do we need to do to increase the number of build results we store in jenkins?  \n17:48\u00a0<mflorea>\u00a0and AndreasJonsson needs to fix the ListProperty#setList breackage  \n17:48\u00a0<tmortagne>\u00a0mflorea: I think I know what is wrong, as an optimization the module create a MessageFormat only when the content contains at least {0} but looks like it's not enough  \n17:48\u00a0<tmortagne>\u00a0I think I will remove this optimization for now  \n17:49\u00a0<mflorea>\u00a0ok  \n17:50\u00a0<AndreasJonsson>\u00a0mflorea: I saw your comment, I will fix it.  \n17:50\u00a0<mflorea>\u00a0AndreasJonsson: great, thanks  \n17:51\u00a0<vmassol>\u00a0Enygma`: just edit each job  \n18:12\u00a0<sburjan>\u00a0has quit  \n18:16\u00a0<vmassol>\u00a0mflorea: regarding your commits  \n18:16\u00a0<vmassol>\u00a0for fixing the tests  \n18:16\u00a0<vmassol>\u00a0are these required or they're just nice to have?  \n18:16\u00a0<vmassol>\u00a0my real question is: have we broken backward compat?  \n18:16\u00a0<mflorea>\u00a0IMO no  \n18:16\u00a0<vmassol>\u00a0so if I had before: setFieldValue(\"proptype\",\u00a0\"com.xpn.xwiki.objects.classes.StringClass\");  \n18:17\u00a0<vmassol>\u00a0it would still work  \n18:17\u00a0<mflorea>\u00a0no, but that's just UI  \n18:17\u00a0<vmassol>\u00a0ah yes indeed  \n18:18\u00a0<mflorea>\u00a0the string \"com.xpn.xwiki.objects.classes.StringClass\" is what you get from PropertyType#getClassType()  \n18:18\u00a0<vmassol>\u00a0that's api though  \n18:18\u00a0<mflorea>\u00a0and now you get \"String\"  \n18:18\u00a0<mflorea>\u00a0sure, but I've taken care that the API works with \"com.xpn.xwiki.objects.classes.StringClass\" also  \n18:19\u00a0<vmassol>\u00a0ok  \n18:19\u00a0<vmassol>\u00a0so \"\"com.xpn.xwiki.objects.classes.StringClass\" \u00a0is deprecated  \n18:19\u00a0<mflorea>\u00a0so if you use the API you can use both, but on the UI, the HTML contains \"String\" now  \n18:19\u00a0<mflorea>\u00a0yes  \n18:19\u00a0<vmassol>\u00a0we need to put that somewhere in the RN maybe  \n18:19\u00a0<vmassol>\u00a0(maybe it's there already?)  \n18:20\u00a0<mflorea>\u00a0yes, I'll put it when I document http://jira.xwiki.org/browse/XWIKI-8355  \n18:20\u00a0<vmassol>\u00a0ok  \n18:25\u00a0<tmortagne>\u00a0has quit  \n18:26\u00a0<vmassol>\u00a0Enygma`: I think the SOLR query executor should be located in the solr module  \n18:26\u00a0<vmassol>\u00a0instead of xwiki-platform-core/xwiki-platform-query  \n18:27\u00a0<vmassol>\u00a0actually you should have a -solr/ parent POM module  \n18:27\u00a0<vmassol>\u00a0and 3 submodules  \n18:27\u00a0<vmassol>\u00a0-api, -ui and the query executor  \n18:27\u00a0<Enygma`>\u00a0yep, that`s what I was thinking now  \n18:28\u00a0<Enygma`>\u00a0though what is the policy on creating sub-parents?  \n18:28\u00a0<vmassol>\u00a0it's ok we're doing this already  \n18:28\u00a0<vmassol>\u00a0check the extension module for ex  \n18:29\u00a0<Enygma`>\u00a0I know, but I thought that we had moved to a flat structure and that we want to keep it that way  \n18:29\u00a0<vmassol>\u00a0not really  \n18:29\u00a0<vmassol>\u00a0we've moved to a domain-based hiearchy  \n18:29\u00a0<vmassol>\u00a0instead of tech-based hiearchy  \n18:29\u00a0<vmassol>\u00a0and we're grouping modules together when they belong to the same \"business\" domain  \n18:30\u00a0<Enygma`>\u00a0ok then, makes sense  \n18:30\u00a0<vmassol>\u00a0this is the \"component\" way  \n18:31\u00a0<vmassol>\u00a0or rather the \"extension\" way  \n18:31\u00a0<vmassol>\u00a0(in our terminology)  \n18:50\u00a0<evalica>\u00a0has quit  \n18:52\u00a0<mflorea>\u00a0has quit  \n18:54\u00a0<Enygma`>\u00a0has quit  \n19:20\u00a0<Slashman>\u00a0has quit  \n19:25\u00a0<abusenius>\u00a0has joined #xwiki  \n19:32\u00a0<jvelo>\u00a0has joined #xwiki  \n19:54\u00a0<fmancinelli>\u00a0has quit  \n20:22\u00a0<sburjan`>\u00a0has quit  \n21:01\u00a0<sburjan`>\u00a0has joined #xwiki  \n21:20\u00a0<fmancinelli>\u00a0has joined #xwiki  \n21:33\u00a0<jvelo>\u00a0has quit  \n21:51\u00a0<Denis>\u00a0has joined #xwiki  \n22:13\u00a0<AndreasJonsson>\u00a0I'm finally getting somewhere. \u00a0There are actually 2 issues:  \n22:13\u00a0<vmassol>\u00a0ahah?  \n22:13\u00a0<AndreasJonsson>\u00a01. The statistics thread \\*does\\* touch the storage, because the velocity context initialization touches the storage.  \n22:13\u00a0<AndreasJonsson>\u00a02. The application started event can sent several times.  \n22:15\u00a0<AndreasJonsson>\u00a0There is a missing 'return xwiki' in the double-locking construct in XWiki.getMainXWiki()  \n22:16\u00a0<AndreasJonsson>\u00a0I'm thinking that the addition of a synchronization in checkHibernate alters the probability that the race condition will actually happen.  \n22:18\u00a0<AndreasJonsson>\u00a0But does it matter if hibernate is initiated several times? \u00a0Using a volatile variable to ensure that it isn't would be a slight performance hit, so if it doesn't matter, I should maybe also remove this synchronization again?  \n22:26\u00a0<vmassol>\u00a0what we should do is init hibernate when the app started event is sent; that would make sure it's initiliazed only once  \n22:26\u00a0<vmassol>\u00a0(AndreasJonsson)  \n22:26\u00a0<vmassol>\u00a0instead of doing lazy initialization  \n22:29\u00a0<AndreasJonsson>\u00a0Yes, but the hibernate initialization must run before the other event listeners.  \n22:29\u00a0<vmassol>\u00a0the DB init event listener need to send the Db ready event  \n22:29\u00a0<vmassol>\u00a0then other listeners who need to wait for DB to be ready need to wait on this DB ready event  \n22:29\u00a0<vmassol>\u00a0s/wait/listen  \n22:30\u00a0<AndreasJonsson>\u00a0That would be a nice solution.  \n23:25\u00a0<Denis>\u00a0has quit  \n23:42\u00a0<vmassol>\u00a0has quit\n"}