{"id": "dev:IRC.xwikiArchive20130521", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130521", "title": "IRC Archive for channel #xwiki on 21 May 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<xwikibot>\u00a0has joined #xwiki  \n09:25\u00a0<vmassol>\u00a0(restarted irc bot)  \n09:34\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:37\u00a0<gihanchanukak>\u00a0has joined #xwiki  \n09:41\u00a0<Denis1>\u00a0has joined #xwiki  \n09:41\u00a0<Denis1>\u00a0is now known as <Denis>  \n09:45\u00a0<gihanchanukak>\u00a0has quit  \n10:00\u00a0<gihanchanukak>\u00a0has joined #xwiki  \n10:55\u00a0<sburjan>\u00a0Hello. I have a question. In a velocity script, I use \"$util.parseInt\", but I get console infos that this is deprecated. What should I use instead ?  \n11:23\u00a0<tdelafosse>\u00a0has joined #xwiki  \n11:28\u00a0<vmassol>\u00a0sburjan: http://velocity.apache.org/tools/devel/generic/MathTool.html  \n11:28\u00a0<vmassol>\u00a0(if you need it, you might not even need anything)  \n11:29\u00a0<vmassol>\u00a0hmm not the right tool I think, checking  \n11:30\u00a0<vmassol>\u00a0NumberTool, checking if we have it  \n11:30\u00a0<vmassol>\u00a0yep we have it  \n11:31\u00a0<vmassol>\u00a0$number.integer($myNumber) \u00a0-> 13  \n11:31\u00a0<vmassol>\u00a0ah no, the opposite ;)  \n11:31\u00a0<vmassol>\u00a0toNumber  \n11:32\u00a0<gdelhumeau>\u00a0has quit  \n11:32\u00a0<vmassol>\u00a0ah found a better solution  \n11:33\u00a0<vmassol>\u00a0http://velocity.apache.org/tools/devel/apidocs/org/apache/velocity/tools/generic/ConversionTool.html  \n11:33\u00a0<vmassol>\u00a0but it seems we don't have it, we should  \n11:35\u00a0<sburjan>\u00a0vmassol: thanks, I will use $mathtool.toInteger  \n11:35\u00a0<sburjan>\u00a0I don't see toNumber method  \n11:35\u00a0<vmassol>\u00a0indeed that works  \n11:35\u00a0<vmassol>\u00a0toNumber is in numbertool  \n11:36\u00a0<vmassol>\u00a0but mathtool.toInteger is better for your use case  \n11:37\u00a0<vmassol>\u00a0to get ConversionTool I think we need to ugrade to tools 2.0: http://jira.xwiki.org/browse/XWIKI-5347#  \n11:41\u00a0<sburjan>\u00a0vmassol: indeed, no more warnings.  \n11:41\u00a0<sburjan>\u00a0thanks ! :)  \n11:43\u00a0<mflorea>\u00a0vmassol: wiki syntax is a PITA to use when you want to protect against user input because there's no way to escape wiki syntax, at least not an easy way. I started replacing HTML with wiki syntax in the sorl search UI but soon I discovered it's a pain to handle unsafe user input. Now I'm tempted to move back to HTML.  \n11:44\u00a0<vmassol>\u00a0mflorea: yeah, I think we agreed to add a method to escape wiki syntax in the escapetool  \n11:44\u00a0<vmassol>\u00a0and even as a SS  \n11:44\u00a0<vmassol>\u00a0don't remember the details though  \n11:44\u00a0<vmassol>\u00a0we do want to get rid of using the html macro though indeed  \n11:45\u00a0<vmassol>\u00a0(but we're missing some tooling, like a form macro, etc)  \n11:45\u00a0<mflorea>\u00a0in order to achieve this we need (1) some way to create form using wiki syntax and (2) ability to escape wiki syntax  \n11:45\u00a0<mflorea>\u00a0yep  \n11:51\u00a0<sburjan>\u00a0havin a xwiki form macro would be SO cool  \n12:43\u00a0<gihanchanukak>\u00a0has quit  \n12:45\u00a0<gihanchanukak>\u00a0has joined #xwiki  \n12:51\u00a0<huhongbo>\u00a0has quit  \n12:57\u00a0<mflorea>\u00a0has quit  \n13:19\u00a0<vmassol>\u00a0sdumitriu: ping  \n13:21\u00a0<vmassol>\u00a0sdumitriu: would be nice to revert jenkins, do you have time to do it?  \n13:22\u00a0<sdumitriu>\u00a0Hi vmassol  \n13:22\u00a0<sdumitriu>\u00a0Yes  \n13:24\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n13:24\u00a0<vmassol>\u00a0ok cool, let me know if you need hlep  \n13:24\u00a0<vmassol>\u00a0\\*help  \n13:32\u00a0<vmassol>\u00a0so guys  \n13:33\u00a0<vmassol>\u00a0we have plenty of releases to do this week  \n13:33\u00a0<vmassol>\u00a04.5.4 and 5.0.2  \n13:33\u00a0<vmassol>\u00a0any volunteers?  \n13:33\u00a0<sdumitriu>\u00a0I can do 4.5.4  \n13:34\u00a0<vmassol>\u00a0that would be cool, thanks sdumitriu  \n13:36\u00a0<vmassol>\u00a0sdumitriu: any idea when you could do it?  \n13:37\u00a0<sdumitriu>\u00a0Any pending issues?  \n13:37\u00a0<vmassol>\u00a0checking  \n13:37\u00a0<vmassol>\u00a0but I don't think so  \n13:37\u00a0<vmassol>\u00a0since manuel/sorin tested it at end of last week  \n13:37\u00a0<vmassol>\u00a0dashboard is here btw: http://jira.xwiki.org/secure/Dashboard.jspa?selectPageId=11590  \n13:37\u00a0<vmassol>\u00a0I have created the RN already too  \n13:38\u00a0<vmassol>\u00a0ah I see one  \n13:38\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-9004  \n13:38\u00a0<vmassol>\u00a0reported by thomas  \n13:38\u00a0<vmassol>\u00a0thomas is off today  \n13:38\u00a0<msmeria>\u00a0I'm currently doing a full manual test on the latest snapshot og 4.5.4. So far I didn't find any major bugs  \n13:39\u00a0<mflorea>\u00a0has joined #xwiki  \n13:40\u00a0<vmassol>\u00a0I can work on http://jira.xwiki.org/browse/XWIKI-9004 if we don't release today  \n13:40\u00a0<vmassol>\u00a0depends if we consider it important or not  \n13:44\u00a0<sdumitriu>\u00a0How about Friday?  \n13:45\u00a0<vmassol>\u00a0@sdumitriu: I find it a bit late but it depends when you have time. I can fix this issue today. Tomorrow or the day after would be better if you can IMO  \n13:46\u00a0<vmassol>\u00a0there are a lot of important stuff in 4.5.4 that we need asap  \n13:46\u00a0<sdumitriu>\u00a0OK for tomorrow  \n13:46\u00a0<vmassol>\u00a0ok starting to work on it  \n13:48\u00a0<vmassol>\u00a0I don't really get the issue though  \n13:48\u00a0<vmassol>\u00a0I've checked the code and I have:  \n13:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0protected boolean isInSchemaMode()  \n13:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0{  \n13:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return StringUtils.equals(getConfiguration().getProperty(\"xwiki.virtual\\_mode\"), \"schema\");  \n13:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0}  \n13:49\u00a0<vmassol>\u00a0so it the property is not defined it'll be the same as having: <property name=\"xwiki.virtual\\_mode\">schema</property>  \n13:49\u00a0<vmassol>\u00a0s/it/if/  \n13:49\u00a0<vmassol>\u00a0going to try it for real  \n13:52\u00a0<vmassol>\u00a0any volunteer for 5.0.2? :)  \n13:53\u00a0<vmassol>\u00a0thomas is ok to release it I think though  \n14:20\u00a0<sdumitriu>\u00a0has quit  \n14:23\u00a0<Denis>\u00a0mflorea: Hi, when a new wiki is created without any template, shouldn't the DW kicks in on first admin access to it ?  \n14:23\u00a0<cjd>\u00a0has quit  \n14:31\u00a0<cjd>\u00a0has joined #xwiki  \n14:44\u00a0<mflorea>\u00a0Denis: I'd says yes, but Thomas knows best the internals (I don't see him only at the moment)  \n14:44\u00a0<kstuart>\u00a0has quit  \n14:44\u00a0<mflorea>\u00a0s/only/online  \n14:45\u00a0<Denis>\u00a0mflorea: it had not for me, and I found this wondering since the only way to get the interface is the old import  \n14:46\u00a0<mflorea>\u00a0you're using a recent version right? (>=5.0)  \n14:46\u00a0<Denis>\u00a0mflorea: more over, after initial \"upgrade\", it seems that restoring an old database in a subwiki does not trigger the DW either  \n14:46\u00a0<Denis>\u00a0sure, 5.0.1 at the moment  \n14:47\u00a0<mflorea>\u00a0restore at db level right?  \n14:48\u00a0<kstuart>\u00a0has joined #xwiki  \n14:49\u00a0<Denis>\u00a0yes, I mean restoring at db level, the migration kick in, but not the DW  \n14:49\u00a0<mflorea>\u00a0unfortunately I haven't looked over the code that triggers the DW in subwikis so I can't tell why it wasn't triggered in your case. Looks like a bug, but I'd wait for Thomas to confirm it.  \n14:50\u00a0<Denis>\u00a0it seems like once the DW has kick in at initial upgrade of the farm, and you choose to upgrade all subwikis, it does not came back in any subwiki that appear later or is downgraded  \n14:51\u00a0<jbwiv>\u00a0has joined #xwiki  \n14:52\u00a0<mflorea>\u00a0wait, on the \"Upgrade Mode\" step you have chosen the \"Upgrade all wikis option\"?  \n14:52\u00a0<msmeria>\u00a0has quit  \n14:52\u00a0<Denis>\u00a0yes  \n14:53\u00a0<jbwiv>\u00a0vmassol: remember that image issue with postgresql? I did a fresh install of the database and the images worked (even with postgres), so it would appear this is specifically related to the restoration of the old database. Is there another way to save our work without losing everything? could an export/import work?  \n14:53\u00a0<mflorea>\u00a0then I believe it's \"normal\" that the DW doesn't show up  \n14:53\u00a0<Denis>\u00a0\"normal\" is a misfeature than  \n14:53\u00a0<mflorea>\u00a0yes  \n14:54\u00a0<Denis>\u00a0it only means that I want to upgrade all \"existing\" wikis now, but not that future or changed one should not be reconsidered later  \n14:54\u00a0<mflorea>\u00a0yep, it's a mix  \n14:54\u00a0<mflorea>\u00a0and it makes sense  \n14:54\u00a0<Denis>\u00a0it should not differ from chosing the other options, and going to each wiki in turn  \n14:55\u00a0<Denis>\u00a0I would understand than restoring a db could require also to cleanup a state for the given wiki  \n14:56\u00a0<Denis>\u00a0but not that newly created wiki does not get considered  \n14:56\u00a0<mflorea>\u00a0well, it's actually only for newly created wiki without a template  \n14:56\u00a0<mflorea>\u00a0you don't want the DW when there is a template  \n14:56\u00a0<Denis>\u00a0correct  \n14:57\u00a0<Denis>\u00a0except if outdated  \n14:57\u00a0<Denis>\u00a0the template could be outdated  \n14:57\u00a0<mflorea>\u00a0indeed  \n14:57\u00a0<mflorea>\u00a0you should report a bug  \n14:58\u00a0<Denis>\u00a0ok  \n15:02\u00a0<gihanchanukak>\u00a0has quit  \n15:14\u00a0<evalica>\u00a0has quit  \n15:15\u00a0<Denis>\u00a0vmassol: do you know when Thomas will be back ?  \n15:21\u00a0<vmassol>\u00a0Denis: tomorrow AFAIK  \n15:22\u00a0<Denis>\u00a0Context#getWikiServer() has been deprecated, does not work properly anymore, and I do not see a replacement for it  \n15:25\u00a0<gihanchanuka>\u00a0has joined #xwiki  \n15:53\u00a0<npm>\u00a0has joined #xwiki  \n15:54\u00a0<npm\\_\\_>\u00a0has quit  \n15:56\u00a0<jbwiv>\u00a0has quit  \n15:58\u00a0<evalica>\u00a0has joined #xwiki  \n16:00\u00a0<evalica>\u00a0has quit  \n16:02\u00a0<vmassol>\u00a0sdumitriu1: fixed XWIKI-9004  \n16:32\u00a0<jbwiv>\u00a0has joined #xwiki  \n16:35\u00a0<Slashman>\u00a0has joined #xwiki  \n16:36\u00a0<jbwiv>\u00a0has quit  \n16:37\u00a0<vmassol>\u00a0sdumitriu1: any update on ci? are you progressing on finding out what is the problem for the downgrade?  \n16:38\u00a0<sdumitriu1>\u00a0Not yet  \n16:38\u00a0<sdumitriu1>\u00a0Maybe the dashboard plugin needs to be downgraded...  \n16:44\u00a0<vmassol>\u00a0if you upgraded it yes maybe  \n16:55\u00a0<evalica>\u00a0has joined #xwiki  \n17:13\u00a0<evalica>\u00a0has quit  \n17:33\u00a0<sdumitriu1>\u00a0has quit  \n17:34\u00a0<msmeria>\u00a0has joined #xwiki  \n17:37\u00a0<msmeria>\u00a0has quit  \n17:38\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:52\u00a0<cjd>\u00a0has quit  \n18:19\u00a0<gihanchanuka>\u00a0has quit  \n18:43\u00a0<gdelhumeau>\u00a0has quit  \n18:55\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n18:56\u00a0<gdelhumeau>\u00a0has quit  \n18:59\u00a0<cjd>\u00a0has joined #xwiki  \n19:06\u00a0<tdelafosse>\u00a0has quit  \n19:10\u00a0<sburjan>\u00a0has quit  \n19:15\u00a0<gihanchanuka>\u00a0has joined #xwiki  \n19:20\u00a0<mflorea>\u00a0has quit  \n20:18\u00a0<abusenius>\u00a0has joined #xwiki  \n21:43\u00a0<gihanchanuka>\u00a0has quit  \n22:41\u00a0<Denis>\u00a0has quit  \n23:01\u00a0<vmassol>\u00a0has quit  \n23:56\u00a0<sdumitriu>\u00a0has quit  \n23:59\u00a0<Slashman>\u00a0has quit\n"}