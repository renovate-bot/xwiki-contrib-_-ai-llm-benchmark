{
  "id": "xwiki:Documentation.AdminGuide.Upgrade.WebHome",
  "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/",
  "title": "Upgrading",
  "collection": "Eval_de",
  "mimetype": "text/markdown",
  "language": "de",
  "content": "**Inhalt** [Aktualisierung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HUpgrading)\n\t+ [Teil 1 Aktualisierung der Distribution](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HPart1Upgradingthedistribution)\n\t\t- [Methode 1.A Aktualisierung vom Debian-Paket .DEB](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HMethod1.AUpgradingfromtheDebianpackage.DEB)\n\t\t- [Methode 1.B Aktualisierung von Docker .Docker](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HMethod1.BUpgradingfromDocker.Docker)\n\t\t- [Methode 1.C Aktualisierung der WAR .WAR](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HMethod1.CUpgradingtheWAR.WAR)\n\t\t- [Methode 1.D Aktualisierung des Demo-Pakets .ZIP](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HMethod1.DUpgradingthedemopackage.ZIP)\n\t+ [Teil 2 Aktualisierung des Flavors](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HPart2Upgradingtheflavor)\n\t\t- [Verwendung des Distributionsassistenten](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HUsingDistributionWizard)\n\t+ [Alternative Neu anfangen, plus Export und Reimport Ihrer Daten](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HAlternativeStartfresh2CplusExportandReimportyourdata)\n* [Downgrade](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HDowngrading)\n* [Fehlerbehebung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HTroubleshooting)\n\t+ [XWiki startet nicht ohne Fehler im Log und bleibt bei der Solr-Initialisierung hängen](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/#HXWikiwon27tstartwithoutanyerrorinthelogandstaystuckonSolrinitialization)\nHinweis 1 XWiki bietet Migrationspfade, um von jeder älteren Version auf eine neuere Version zu aktualisieren. Sie müssen nicht auf Zwischenversionen aktualisieren.\n\nHinweis 2 Es ist auch ratsam, die [Release Notes](https://www.xwiki.org/xwiki/bin/view/ReleaseNotes/) für die Versionen zwischen Ihrer alten Version und der neuen Version, auf die Sie aktualisieren, zu überprüfen. Sie sollten besonders auf den Abschnitt in den Release Notes achten, der den Titel \"Issues specific to XWiki <version>\" trägt. Beispielsweise ist es wichtig zu überprüfen, ob die neue Version von XWiki, auf die Sie aktualisieren, neue [Hardware- oder Softwareanforderungen](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Installation/#HHardwareandSoftwarerequirements) hat.\n\nBackup Bevor Sie fortfahren, stellen Sie sicher, dass Sie [alle Ihre Daten sichern](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Backup), falls etwas mit dem Update / Downgrade schief geht. Je nach Nutzung sollten Sie Ihre Informationen regelmäßig sichern.\n\nErweiterungen Bevor Sie XWiki selbst aktualisieren, ist es generell eine gute Idee, sicherzustellen, dass alle Ihre Erweiterungen auf dem neuesten Stand sind, da neue Versionen möglicherweise Kompatibilitätskorrekturen enthalten, die sonst verhindern könnten, dass die neue Version vollständig startet.\n\n# Aktualisierung\n\nHalten Sie Ihre XWiki-Instanz auf dem neuesten Stand, um von den besten neuen Funktionen zu profitieren und Ihre Daten vor Sicherheitsbedrohungen zu schützen. Es gibt mehrere Methoden, XWiki zu aktualisieren, abhängig davon, wie viele Daten Sie migrieren müssen oder wie erfahren Sie mit verschiedenen Tools sind.\n\nIn den meisten Fällen besteht ein Upgrade aus zwei Teilen:\n\n* Teil 1: Aktualisierung der *Distribution* auf dem *Server / Dateisystem* und\n* Teil 2: Aktualisierung des *Flavors (Wiki-Seiten)* aus einem *Browser*.\n\n\n\n---\n\n## Teil 1 Aktualisierung der Distribution\n\n### Methode 1.A Aktualisierung vom Debian-Paket .DEB\n\n* Paketindex aktualisieren:sudo apt update\n* Paketaktualisierung:sudo apt upgradeDies wird alle Pakete aktualisieren, nicht nur XWiki. Wenn Sie alle anderen Pakete vermeiden und nur XWiki aktualisieren möchten, können Sie sudo apt install xwiki-tomcat9-mariadb verwenden (ändern Sie xwiki-tomcat9-mariadb in das oberste Paket, das Sie installiert haben, wenn Sie etwas anderes installiert haben).\n\nWenn Sie von einer Version vor 9.5 aktualisieren, wird apt upgrade nichts finden, da sich der Paketname geändert hat ([XWiki Enterprise existiert nicht mehr](https://www.xwiki.org/xwiki/bin/view/Blog/XWiki%20Enterprise%20is%20dead%2C%20long%20live%20XWiki%21)).\n\nAlles, was Sie in diesem Fall tun müssen, ist, das xwiki-tomcat\\*-Paket zu installieren, das dem obersten xwiki-enterprise-tomcat\\*-Paket entspricht, das Sie zuvor installiert haben. Wenn Sie beispielsweise xwiki-enterprise-tomcat8-mysql 9.4 hatten, sollten Sie sudo apt install xwiki-tomcat8-mysql ausführen.\n* Seitenaktualisierung:Nach dem Upgrade müssen Sie jedoch immer noch die neue Benutzeroberfläche installieren; siehe nächsten Schritt [Aktualisierung des Flavors](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Upgrade/UpgradeDebian/#HPart2Upgradingtheflavor) unten.\n\n### Methode 1.B Aktualisierung von Docker .Docker\n\n* Wenn Sie XWiki mithilfe des offiziellen XWiki-Docker-Images installiert haben, [folgen Sie den Anweisungen dort](https://github.com/xwiki-contrib/docker-xwiki/blob/master/README.md#upgrading-xwiki) zum Aktualisieren.\n\n### Methode 1.C Aktualisierung der WAR .WAR\n\n* Die allgemeine Strategie besteht darin, [die neue WAR-Distribution herunterzuladen](https://www.xwiki.org/xwiki/bin/view/Main/Download) und Ihre derzeit installierte WAR-Datei durch diese zu ersetzen. Stellen Sie jedoch sicher, dass Sie nicht darüber kopieren, da dies einige alte Dateien hinterlassen könnte, die dazu führen würden, dass XWiki fehlschlägt (z. B. wenn alte JARs im WEB-INF/lib-Verzeichnis liegen). Darüber hinaus würden Sie einige XWiki-Konfigurationsdateien überschreiben, die sich im WEB-INF-Verzeichnis befinden (xwiki.properties und xwiki.cfg, um nur zwei zu nennen).\n* Bevor Sie Ihre aktuelle WAR-Datei ersetzen, stellen Sie sicher, dass Sie [sie sichern, einschließlich Konfigurations- und Datendateien](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Backup).\n* Sie müssen auch sicherstellen, dass Sie das gleiche XWiki Permanent-Verzeichnis verwenden (konfiguriert in WEB-INF/xwiki.properties mit der Eigenschaft environment.permanentDirectory).\n* Einige zusätzliche Operationen können für das Upgrade erforderlich sein, und Sie müssen die [Release Notes](https://www.xwiki.org/xwiki/bin/view/ReleaseNotes/) für alle Versionen von der Version, die Sie aktualisieren, bis zur neuen Version, die Sie installieren, überprüfen. Es ist auch möglich, dass neue Funktionen verfügbar sind und einige Konfigurationsdateien geändert werden müssen. Wenn dies der Fall ist, wird dies in den Release Notes angegeben.\n* Beachten Sie, dass das Datenbankschema bei Bedarf automatisch aktualisiert wird. Alles, was Sie tun müssen, ist sicherzustellen, dass Ihre xwiki.cfg-Datei korrekt konfiguriert ist, um die Migration durchzuführen. Hier ist ein relevanter Auszug aus der xwiki.cfg-Datei:\n\n#-# Ob Migrationen aktiviert sind oder nicht. Sollte beim Upgrade aktiviert sein, aber für eine bessere Startzeit ist es besser,  \n#-# sie im Produktionsbetrieb zu deaktivieren.  \nxwiki.store.migration=1  \n  \n#-# Ob nach der Migration beendet werden soll. Nützlich, wenn ein Server Migrationen für eine große Datenbank durchführen soll, ohne danach live zu gehen.  \n# xwiki.store.migration.exitAfterEnd=0  \n  \n#-# Geben Sie die Liste der zu migrierenden Datenbanken an.  \n#-# um alle Wikis-Datenbanken zu aktualisieren, setzen Sie xwiki.store.migration.databases=all  \n#-# um nur einige Wikis-Datenbanken zu aktualisieren, setzen Sie xwiki.store.migration.databases=xwiki,wiki1,wiki2  \n#-# Hinweis: Das Hauptwiki wird immer migriert, unabhängig von der Konfiguration.  \n# xwiki.store.migration.databases=Von einer fehlgeschlagenen Migration können die Datenbanktabellen **DATABASECHANGELOG** und **DATABASECHANGELOGLOCK** übrig bleiben.  \nStellen Sie sicher, dass diese Tabellen gelöscht werden, bevor Sie eine fehlgeschlagene Migration neu starten.\n* **Ungültige Erweiterungen**\n\nBeachten Sie auch, dass beim Upgrade einige Erweiterungen, die zuvor gültig waren, ungültig werden können (z. B. könnten sie umbenannt, entfernt oder Versionen haben, die nicht mit der Version der installierten WAR-Datei übereinstimmen, wie im folgenden Beispiel). In diesem Fall sehen Sie in der Konsole Nachrichten wie:\n\n2013-12-02 11:43:01,688 [localhost-startStop-1] WARN  ltInstalledExtensionRepository - Ungültige Erweiterung [org.xwiki.enterprise:xwiki-enterprise-ui-common-5.2.1] im Namespace [wiki:xwiki]  \n2013-12-02 11:43:01,688 [localhost-startStop-1] WARN  ltInstalledExtensionRepository - Ungültige Erweiterung [org.xwiki.platform:xwiki-platform-workspace-ui-5.2.1] im Namespace [wiki:xwiki]  \n2013-12-02 11:43:01,688 [localhost-startStop-1] WARN  ltInstalledExtensionRepository - Ungültige Erweiterung [org.xwiki.enterprise:xwiki-enterprise-ui-mainwiki-5.2.1] im Namespace [wiki:xwiki]  \n2013-12-02 11:43:01,689 [localhost-startStop-1] WARN  ltInstalledExtensionRepository - Ungültige Erweiterung [org.xwiki.enterprise:xwiki-enterprise-ui-wiki-all-5.2.1] im Namespace [wiki:workspacetemplate]Dies sind nur Warnungen und beeinträchtigen nicht die Stabilität Ihrer Instanz. Tatsächlich wird der Distributionsassistent, den Sie erhalten (siehe den nächsten Abschnitt über \"Aktualisierung der Wiki-Dokumente\"), Sie bitten, diese ungültigen Erweiterungen zu aktualisieren und die alten Versionen zu entfernen, die ungültig geworden sind.\n\n### Methode 1.D Aktualisierung des Demo-Pakets .ZIP\n\n* Wenn Sie die Standarddistribution (ZIP- oder JAR-Distribution) installiert haben und diese aktualisieren möchten, ist es am einfachsten, die [neue Version herunterzuladen](https://www.xwiki.org/xwiki/bin/view/Main/Download) und sie wie beim ersten Mal zu installieren. Stellen Sie nur sicher, dass Sie die neue Version nicht über die alte installieren (beide Installationen müssen existieren).\n* Kopieren Sie dann [die Konfigurationsdateien und das permanente Verzeichnis](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Backup) von der alten Installation in die neue. Idealerweise sollten Sie die Konfigurationsdateien nicht genau kopieren, da die neue Version neue Konfigurationsoptionen hinzugefügt haben könnte und daher idealerweise ein Merge anstelle eines reinen Kopierens durchgeführt werden sollte. Eine andere Strategie besteht darin, die neuen Konfigurationsdateien zu verwenden, die alten Konfigurationsdateien nicht zu kopieren und stattdessen die neue Konfiguration manuell zu bearbeiten, um die gleichen Änderungen vorzunehmen, die Sie möglicherweise zuvor vorgenommen haben (wenn Sie die Konfigurationsdateien nie berührt haben, gibt es offensichtlich nichts zu tun!).\n* Wenn Sie ein Unix-System verwenden, sind hier einige Befehle, die Ihnen beim Merge helfen können, anstatt es vollständig manuell zu machen:\n\n## Hinweis: Wir gehen davon aus, dass \"xwiki.new\" ein symbolischer Link ist, der auf den Speicherort der neuen XWiki-Version verweist, und dass \"xwiki\" der Speicherort der vorherigen XWiki-Installation ist.  \nmv xwiki.new/WEB-INF/web.xml xwiki.new/WEB-INF/web.xml.ori; sudo sdiff xwiki/WEB-INF/web.xml xwiki.new/WEB-INF/web.xml.ori -B -W -E -o xwiki.new/WEB-INF/web.xml  \nmv xwiki.new/WEB-INF/xwiki.cfg xwiki.new/WEB-INF/xwiki.cfg.ori; sudo sdiff xwiki/WEB-INF/xwiki.cfg xwiki.new/WEB-INF/xwiki.cfg.ori -B -W -E -o xwiki.new/WEB-INF/xwiki.cfg  \nmv xwiki.new/WEB-INF/xwiki.properties xwiki.new/WEB-INF/xwiki.properties.ori; sudo sdiff xwiki/WEB-INF/xwiki.properties xwiki.new/WEB-INF/xwiki.properties.ori -B -W -E -o xwiki.new/WEB-INF/xwiki.properties  \nmv xwiki.new/WEB-INF/struts-config.xml xwiki.new/WEB-INF/struts-config.xml.ori; sudo sdiff xwiki/WEB-INF/struts-config.xml xwiki.new/WEB-INF/struts-config.xml.ori -B -W -E -o xwiki.new/WEB-INF/struts-config.xml  \nmv xwiki.new/WEB-INF/classes/logback.xml xwiki.new/WEB-INF/classes/logback.xml.ori; sudo sdiff xwiki/WEB-INF/classes/logback.xml xwiki.new/WEB-INF/classes/logback.xml.ori -B -W -E -o xwiki.new/WEB-INF/classes/logback.xml\n* Beachten Sie, dass das Datenbankschema bei Bedarf automatisch aktualisiert wird. Alles, was Sie tun müssen, ist sicherzustellen, dass Ihre xwiki.cfg-Datei korrekt konfiguriert ist, um die Migration durchzuführen. Hier ist ein relevanter Auszug aus der xwiki.cfg-Datei:\n\n#-# Ob Migrationen aktiviert sind oder nicht. Sollte beim Upgrade aktiviert sein, aber für eine bessere Startzeit ist es besser,  \n#-# sie im Produktionsbetrieb zu deaktivieren.  \nxwiki.store.migration=1  \n  \n#-# Ob nach der Migration beendet werden soll. Nützlich, wenn ein Server Migrationen für eine große Datenbank durchführen soll, ohne danach live zu gehen.  \n# xwiki.store.migration.exitAfterEnd=0  \n  \n#-# Geben Sie die Liste der zu migrierenden Datenbanken an.  \n#-# um alle Wikis-Datenbanken zu aktualisieren, setzen Sie xwiki.store.migration.databases=all  \n#-# um nur einige Wikis-Datenbanken zu aktualisieren, setzen Sie xwiki.store.migration.databases=xwiki,wiki1,wiki2  \n#-# Hinweis: Das Hauptwiki wird immer migriert, unabhängig von der Konfiguration.  \n# xwiki.store.migration.databases=Von einer fehlgeschlagenen Migration können die Datenbanktabellen **DATABASECHANGELOG** und **DATABASECHANGELOGLOCK** übrig bleiben.  \nStellen Sie sicher, dass diese Tabellen gelöscht werden, bevor Sie eine fehlgeschlagene Migration neu starten.\n\n\n\n---\n\n## Teil 2 Aktualisierung des Flavors\n\n### Verwendung des Distributionsassistenten\n\nEmpfohlen Der empfohlene Weg, eine XWiki-Installation zu aktualisieren, besteht darin, den [Distributionsassistenten](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/DistributionWizard) zu verwenden, der nach dem Upgrade der XWiki-WAR-Datei automatisch ausgelöst wird (Sie müssen mit einem Benutzer angemeldet sein, der Administratorrechte hat). Er ermöglicht es Ihnen, installierte Erweiterungen in Ihrem Wiki automatisch zu aktualisieren und unterstützt automatische Merges und Konfliktlösungen.\n\nWenn Sie ein XWiki-Farm (d. h. ein Wiki mit mehreren Unterwikis) aktualisieren, müssen Sie zu jedem Unterwiki navigieren. Sie werden dann für jedes Wiki, das ein Upgrade benötigt, mit dem Distributionsassistenten präsentiert.\n\nStellen Sie sicher, dass Sie den Distributionsassistenten (DW) mit einem Benutzer ausführen, der Programmierrechte hat. Die folgenden Seiten müssen von einem Benutzer mit Programmierrechten gespeichert werden, um korrekt zu funktionieren, und sie könnten geändert worden sein, sodass der DW sie möglicherweise ändern muss:\n\n* AppWithinMinutes.DynamicMessageTool (aus Kompatibilitätsgründen beibehalten, nicht verwendet)\n* AnnotationCode.Style\n* AppWithinMinutes.LiveTableEditSheet\n* AppWithinMinutes.ClassEditSheet\n* AnnotationCode.Script\n* XWiki.OfficeImporterAdmin\n* Filter.WebHome\n* WikiManager.Translations\n\nWenn Sie das Upgrade bereits mit einem Benutzer ohne Programmierrechte durchgeführt haben, melden Sie sich mit einem Benutzer an, der diese Berechtigungen hat (oder bitten Sie jemanden, der sie hat), [navigieren Sie zu diesen Seiten](https://www.xwiki.org/xwiki/bin/view/FAQ/How%20can%20I%20navigate%20to%20a%20given%20page), bearbeiten Sie sie (vorzugsweise mit dem Wiki-Editor) und speichern Sie sie ohne Änderungen.\n\n\n\n---\n\n## Alternative Neu anfangen, plus Export und Reimport Ihrer Daten\n\nEs gibt Fälle, in denen Sie nur [Ihren aktuellen Inhalt als XAR exportieren](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/ImportExport) und [in eine neue Instanz reimportieren](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/ImportExport) können. Sie sollten diese Methode verwenden, wenn Sie genau wissen, welchen Inhalt Sie erstellt haben, und manuell überprüfen, dass Sie nichts in der alten Instanz vergessen haben.\n\nEs wird normalerweise nicht empfohlen, da es bedeutet, die automatische Migration von Daten vollständig zu umgehen, was oft keine gute Idee ist, da es einige Daten unzugänglich machen könnte, weil sie aus irgendeinem Grund geändert werden müssen (die Dateisystemanhänge werden in einem anderen Pfad gespeichert, einige Daten wurden von String zu Liste geändert usw.).\n\nWenn Ihr Anwendungsfall darin besteht, XWiki auf einen anderen Server zu verschieben und es zu aktualisieren, sollten Sie dies in zwei Schritten tun:\n\n* Verschieben Sie XWiki auf die neue Version in der exakt gleichen Version und stellen Sie sicher, dass alles wie erwartet funktioniert\n* Aktualisieren Sie XWiki wie in den vorherigen Abschnitten beschrieben\nEinige Tipps:\n\n* Stellen Sie sicher, dass Sie nur Ihre eigenen Inhaltsseiten und nicht die Standard-XWiki-Seiten importieren, da Sie die in der neuen XWiki-Installation bereitgestellten Seiten überschreiben würden.\n* Sie könnten auf Probleme stoßen, wenn Sie versuchen, ein großes XAR zu exportieren. In diesem Fall möchten Sie möglicherweise [eine der Exporterweiterungen installieren](https://extensions.xwiki.org/xwiki/bin/view"
}