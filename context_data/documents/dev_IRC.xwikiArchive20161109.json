{"id": "dev:IRC.xwikiArchive20161109", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20161109", "title": "IRC Archive for channel #xwiki on 09 November 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<moep>\u00a0has quit  \n06:21\u00a0<mflorea>\u00a0has joined #xwiki  \n07:37\u00a0<edvorg>\u00a0has quit  \n08:07\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:18\u00a0<vmassol>\u00a0has joined #xwiki  \n09:12\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:20\u00a0<martinus\\_\\_>\u00a0hi there, I'm unable to find the headers authenticator extension on http://extensions.xwiki.org ?  \n09:21\u00a0<vmassol>\u00a0martinus\\_\\_: hi  \n09:22\u00a0<vmassol>\u00a0you're probably viewing the Recommended extensions only  \n09:22\u00a0<vmassol>\u00a0click on All to see all of them  \n09:22\u00a0<vmassol>\u00a0s/All/Browse button for All extensions  \n09:22\u00a0<martinus\\_\\_>\u00a0vmassol, right :-O how did I get to a search that doesn't search in \"All\" ?  \n09:23\u00a0<martinus\\_\\_>\u00a0thanks  \n09:23\u00a0<vmassol>\u00a0the search always search in all extensions  \n09:23\u00a0<vmassol>\u00a0type \"headers\" in the search box and you'll find the extensions you're looking for  \n09:25\u00a0<martinus\\_\\_>\u00a0vmassol, I think I followed a link and didn't see I was in \"recommended\" and typed my search in the first column  \n09:25\u00a0<vmassol>\u00a0ah not search then  \n09:25\u00a0<vmassol>\u00a0filtering :)  \n09:25\u00a0<vmassol>\u00a0that would explain it indeed  \n09:25\u00a0<martinus\\_\\_>\u00a0right :)  \n09:25\u00a0<vmassol>\u00a0now just noticed a problem in search  \n09:26\u00a0<vmassol>\u00a0seems we're no longer searching just in the Extensions space, checking that  \n09:26\u00a0<martinus\\_\\_>\u00a0I've a bit forgotten there was a recommended/all thing  \n09:26\u00a0<vmassol>\u00a0np  \n09:26\u00a0<vmassol>\u00a0it's meant to showcase the \"best\" extensions  \n09:27\u00a0<vmassol>\u00a0(definition of \"best\" is at http://extensions.xwiki.org/xwiki/bin/view/ExtensionCode/RecommendedExtensions/RecommendedDefinition/ )  \n09:27\u00a0<msmeria>\u00a0has joined #xwiki  \n09:27\u00a0<vmassol>\u00a0oh I know  \n09:27\u00a0<vmassol>\u00a0that must because of the nested spaces switch  \n09:27\u00a0<vmassol>\u00a0hmm  \n09:28\u00a0<vmassol>\u00a0mflorea: any idea why this url http://extensions.xwiki.org/xwiki/bin/view/ExtensionCode/ExtensionSearch?space=Extension&text=headers&f\\_type=DOCUMENT&f\\_locale=en&f\\_locale=&r=1 also returns entries not in the Extension space?  \n09:28\u00a0<vmassol>\u00a0(AFAIK it used to work)  \n09:28\u00a0<vmassol>\u00a0for ex it returns http://extensions.xwiki.org/xwiki/bin/view/XWiki/XWikiSyntaxGroups  \n09:29\u00a0<vmassol>\u00a0could it be that we broke some backward compat thing at some point in search?  \n09:29\u00a0<vmassol>\u00a0(thing = support for the \"space\" parameter)  \n09:31\u00a0<vmassol>\u00a0and good morning! :)  \n09:39\u00a0<Slashman>\u00a0has joined #xwiki  \n09:41\u00a0<vmassol>\u00a0tmortagne: good morning  \n09:43\u00a0<vmassol>\u00a0no question :)  \n09:57\u00a0<tmortagne>\u00a0vmassol: always nice to hear :)  \n10:06\u00a0<vmassol>\u00a0ok I've found one question!  \n10:07\u00a0<vmassol>\u00a0do you remember why in XWikiLDAPConfigTest you set data in the MockConfigurationSource (i.e. getConfigurationSource()). I don't see where it's used in XWikiLDAPConfig  \n10:11\u00a0<mflorea>\u00a0vmassol: the space param has been removed long ago, in 5.4, when we removed the advanced search options http://jira.xwiki.org/browse/XWIKI-9795, including the space list box https://github.com/xwiki/xwiki-platform/commit/b6ae6bb223af40dfb85fc6e1984d73a6828601c4#diff-64d97f2c3133248a571cabf2b072bb0b . You can achieve the same using the f\\_space\\_exact param (i.e. using the facets), but even this is not documented as it's something internal to the search UI.  \n10:11\u00a0<mflorea>\u00a0There is no search URL \"API\" at the moment.  \n10:15\u00a0<tmortagne>\u00a0vmassol: XWiki#Param use ConfigurationSource with hint \"xwikicfg\" which is mocked with MockConfigurationSource  \n10:16\u00a0<vmassol>\u00a0ah ok didn't realize XWiki#Param was sing the cfg config source  \n10:17\u00a0<vmassol>\u00a0I guess I could also modify XWikiLDAPConfig to directly use that configuration source  \n10:17\u00a0<vmassol>\u00a0(we'll see if I get to that, right now trying to figure out why the test is failing when it shouldn't)  \n10:21\u00a0<Pbas>\u00a0gdelhumeau : Hello everyone, Is it ok for my PR https://github.com/xwiki/xwiki-platform/pull/547 now \u00a0(if you have time) ?  \n10:30\u00a0<Pbas>\u00a0ty :)  \n10:31\u00a0<Pbas>\u00a0Oups forget to remove my git appreciation!  \n10:31\u00a0<Pbas>\u00a0I forgot sorry  \n10:40\u00a0<gdelhumeau>\u00a0I saw it :p  \n10:51\u00a0<Pbas>\u00a0could you close https://jira.xwiki.org/browse/XWIKI-13818 (I can not do it myself even if I take this issue)  \n11:07\u00a0<vmassol>\u00a0tmortagne: is this normal in getCacheExpiration  \n11:07\u00a0<vmassol>\u00a0(): \u00a0return context.getWiki().getXWikiPreferenceAsInt(\"ldap\\_groupcache\\_expiration\", context); ? Should it call getLDAPParam() instead or is it done because this param should be retrived from xwiki.cfg ?  \n11:08\u00a0<tmortagne>\u00a0getXWikiPreferenceAsInt is not xwiki.cfg  \n11:09\u00a0<tmortagne>\u00a0I need to check I don't remember  \n11:09\u00a0<vmassol>\u00a0well  \n11:09\u00a0<vmassol>\u00a0getLDAPParam does the prefix conversion  \n11:09\u00a0<vmassol>\u00a0so I don't understand why it's not called  \n11:09\u00a0<vmassol>\u00a0I'm planning to fix it but I don't want to make a mistake  \n11:11\u00a0<vmassol>\u00a0there's the memory config which is not called dunno if it makes a difference  \n11:12\u00a0<tmortagne>\u00a0IMO it should use a new getLDAPParamAsInt method probably  \n11:12\u00a0<vmassol>\u00a0ok  \n11:12\u00a0<vmassol>\u00a0doing that  \n11:13\u00a0<tmortagne>\u00a0also getLDAPParamAsLong/Int should do the same thing as this method and fallback on following configuration when the value is invalid I think  \n11:13\u00a0<vmassol>\u00a0indeed it doesn't seem to fallback  \n11:13\u00a0<vmassol>\u00a0I'll do that too  \n11:13\u00a0<tmortagne>\u00a0thanks  \n11:18\u00a0<vmassol>\u00a0tmortagne: however there's a problem. memoryConfiguration only supports string ATM. I'd like to change it to Map<String, Object> but there's:  \n11:18\u00a0<vmassol>\u00a0public Map<String, String> getMemoryConfiguration()  \n11:21\u00a0<tmortagne>\u00a0vmassol: this is not your only issue, the whole XWikiLDAPConfig assume everything is stored as String  \n11:21\u00a0<tmortagne>\u00a0getLDAPParam return String too for example  \n11:26\u00a0<vmassol>\u00a0yes but I was deprecating this in favor of a generic one since I now use configurationsource everywhere  \n11:27\u00a0<vmassol>\u00a0and I can do this because the signatire is different ;) I've removed the XWikicontext from it  \n11:27\u00a0<vmassol>\u00a0(actually the default type is also different, from String to T)  \n11:28\u00a0<vmassol>\u00a0but maybe this is too ambitious...  \n11:29\u00a0<tmortagne>\u00a0vmassol: probably too ambitious for now and not related which what you are doing, you might create regressions  \n11:29\u00a0<vmassol>\u00a0in any case my question here was about getLDAPParamAsLong()  \n11:29\u00a0<vmassol>\u00a0which doesn't look into the memoryconfig  \n11:29\u00a0<vmassol>\u00a0I wanted to know if that's normal or not  \n11:30\u00a0<tmortagne>\u00a0it's calls getLDAPParam  \n11:30\u00a0<vmassol>\u00a0ah yes  \n11:30\u00a0<vmassol>\u00a0:)  \n11:30\u00a0<tmortagne>\u00a0everything calls getLDAPParam  \n11:30\u00a0<vmassol>\u00a0almost, fixing the places that don't ;)  \n11:30\u00a0<vmassol>\u00a0ok I'm keepting the storage as String  \n11:31\u00a0<tmortagne>\u00a0there was several ?  \n11:31\u00a0<vmassol>\u00a0so far I've found only 1  \n11:31\u00a0<vmassol>\u00a0there was another one but it was expected  \n11:31\u00a0<vmassol>\u00a0getHttpHeader()  \n11:31\u00a0<vmassol>\u00a0it looks only in xwiki.cfg but it's part of the javadoc so it's expected  \n11:32\u00a0<tmortagne>\u00a0yes, it's a security  \n11:32\u00a0<tmortagne>\u00a0otherwise it would be easy to set another one at wiki level and bypass authentication  \n11:33\u00a0<vmassol>\u00a0ok  \n11:36\u00a0<gdelhumeau>\u00a0Pbas: you haven't changed the icon for the blog categories in the right panel?  \n11:37\u00a0<gdelhumeau>\u00a0or the \"sitemap\" icon in the category management?  \n11:37\u00a0<Pbas>\u00a0I change Blog.CategoriesPanel icon  \n11:38\u00a0<Pbas>\u00a0I have changed  \n11:38\u00a0<gdelhumeau>\u00a0Pbas: http://pasteboard.co/p76QPK9P8.png  \n11:39\u00a0<gdelhumeau>\u00a0and http://pasteboard.co/p782fQTPR.png  \n11:39\u00a0<vmassol>\u00a0tmortagne: I still don't understand something  \n11:39\u00a0<Pbas>\u00a0ha yes this one http://pasteboard.co/p76QPK9P8.png I'm talking in jira issue  \n11:40\u00a0<Pbas>\u00a0I'm talking about: I didn't found an equivalent in icon set  \n11:40\u00a0<vmassol>\u00a0getCacheExpiration() only checks in xwiki.cfg if it fails to retrieve the param from XWikiPreferences (it catches an exception). But getXWikiPreferenceAsInt is normally not trhowing excpetion so it can return an null or empty value without checking in xwiki.cfg, is that expected?  \n11:41\u00a0<vmassol>\u00a0I'd have expected it to fallback not on exception but on null or empty value as it's done in getLDAPParam  \n11:44\u00a0<gdelhumeau>\u00a0Pbas: \"chart-organisation\" is available in the xwiki icon set  \n11:45\u00a0<Pbas>\u00a0chart-organisation is not similar to chart-organisation-add it doesn't matter?  \n11:45\u00a0<gdelhumeau>\u00a0I see  \n11:46\u00a0<gdelhumeau>\u00a0I think 'add' could be a nice replacement  \n11:46\u00a0<vmassol>\u00a0actually same problem with getLDAPPort()  \n11:46\u00a0<Pbas>\u00a0and about bullet\\_feed icon  \n11:47\u00a0<Pbas>\u00a0$services.icon.render('bullet\\_feed')  \n11:47\u00a0<Pbas>\u00a0display orange icon  \n11:47\u00a0<Pbas>\u00a0with awesome icon set  \n11:53\u00a0<Pbas>\u00a0FYI, I add this in comment issue: \\* Like I said previous: I didn't found an equivalent to \"chart\\_organisation\\_add.png\" with font awesome  \n11:53\u00a0<Pbas>\u00a0\\* and $services.icon.render('bullet\\_feed') displayed rss icon with font awesome (a new issue?)  \n11:56\u00a0<tmortagne>\u00a0vmassol: NumberFormatException is a runtime exception  \n11:56\u00a0<tmortagne>\u00a0getXWikiPreferenceAsInt does not catch it  \n11:56\u00a0<vmassol>\u00a0I know but that's not my question  \n11:56\u00a0<vmassol>\u00a0my question is when there's no parsing error  \n11:56\u00a0<vmassol>\u00a0why don't we fallback?  \n11:57\u00a0<vmassol>\u00a0s/parsing error/conversion error  \n11:59\u00a0<tmortagne>\u00a0getXWikiPreferenceAsInt always execute parseInt and parseInt fail with empty and null  \n12:00\u00a0<tmortagne>\u00a0getXWikiPreferenceAsInt return int, not Integer so either it return a valid number or it throw an exception  \n12:00\u00a0<tmortagne>\u00a0it does not have much choice  \n12:00\u00a0<gdelhumeau>\u00a0bullet\\_feed is not an icon from the XWiki Icon Set  \n12:01\u00a0<edvorg>\u00a0has joined #xwiki  \n12:01\u00a0<tmortagne>\u00a0vmassol: if it wasn't xwiki.cfg would never been taken into account  \n12:01\u00a0<vmassol>\u00a0that was my point :)  \n12:01\u00a0<vmassol>\u00a0but ok it is taken into account, good  \n12:01\u00a0<tmortagne>\u00a0anyway you are going to refactor those methods  \n12:02\u00a0<gdelhumeau>\u00a0Pbas: look at http://playground.xwiki.org/xwiki/bin/view/IconThemesCode/IconPickerMacro in the \"Play with it\" section  \n12:02\u00a0<vmassol>\u00a0yes but I needed to know the good behavior  \n12:02\u00a0<vmassol>\u00a0what I have is ok, it handles all cases  \n12:03\u00a0<gdelhumeau>\u00a0Pbas: you could use rss, caret-right, even folder  \n12:05\u00a0<Pbas>\u00a0yes thxs I will find again which icon I used in Blog.ManageCategories  \n12:06\u00a0<Pbas>\u00a0gdelhumeau: I will PR this afternoon thxs  \n13:01\u00a0<vmassol>\u00a0tmortagne: this is wrong it seems: http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Authentication#HGenericLDAPconfiguration The default is not 1 but 0 correct?  \n13:24\u00a0<tmortagne>\u00a0yes the default is 0  \n13:24\u00a0<tmortagne>\u00a0fixed thanks  \n13:51\u00a0<evalica>\u00a0has joined #xwiki  \n13:51\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:54\u00a0<edvorg>\u00a0has quit  \n15:09\u00a0<Pbas>\u00a0Hello, about my problem since 8.3 version (after 1 day since tomcat started, xwiki pages loading is VERY slown: 50s). I think I found the cause of it (but I don't know how to fix it). As soon as a job scheduled is startes, CPU is overloaded, here a javamelody monotring screenshot: https://snag.gy/6uHzMp.jpg  \n15:10\u00a0<Pbas>\u00a0Have you encoutered this problem?  \n15:15\u00a0<tmortagne>\u00a0Pbas: which job exactly ?  \n15:15\u00a0<tmortagne>\u00a0a custom job on your side ?  \n15:15\u00a0<Pbas>\u00a0a custom job, who is updating some groups  \n15:16\u00a0<tmortagne>\u00a0so I guess it means your job end up in some infinite loop or something like this  \n15:16\u00a0<tmortagne>\u00a0or maybe it's triggered way too often  \n15:16\u00a0<Pbas>\u00a0mmm working fine on 7.0.1 version  \n15:16\u00a0<tmortagne>\u00a0what cron are you using ?  \n15:16\u00a0<tmortagne>\u00a0maybe there is a change it does not like that make it a lot slower  \n15:16\u00a0<Pbas>\u00a0xwiki cron engine  \n15:16\u00a0<tmortagne>\u00a0I mean the cron expression  \n15:17\u00a0<Pbas>\u00a0a groovy script?  \n15:17\u00a0<tmortagne>\u00a0the real question is how often is it triggered  \n15:17\u00a0<Pbas>\u00a0on time per day  \n15:18\u00a0<tmortagne>\u00a0could you paste the cron expression you are using, it's located in the job wiki page  \n15:18\u00a0<Pbas>\u00a0It is a fix for this issue: http://jira.xwiki.org/browse/XWIKI-12570  \n15:18\u00a0<tmortagne>\u00a0Pbas: this is fixed in 8.3  \n15:19\u00a0<tmortagne>\u00a0at least that's what XWIKI-13574 indicates  \n15:19\u00a0<Pbas>\u00a0k then I will remove it but i think that, when a job contains an error, CPU is oveloaded  \n15:20\u00a0<Pbas>\u00a0because I had another script to reinit ldap cach  \n15:20\u00a0<Pbas>\u00a0who is brokent by new extension  \n15:20\u00a0<Pbas>\u00a0and I have same problem  \n15:20\u00a0<Pbas>\u00a0I must check it again anyways  \n15:21\u00a0<Pbas>\u00a0I could paste my custom script, but I suppose i is not necessary because subgroup issue is resolved  \n15:22\u00a0<Pbas>\u00a0I must check my ldap reinit cach:  \n15:22\u00a0<Pbas>\u00a0import com.xpn.xwiki.plugin.ldap.XWikiLDAPUtils;  \n15:22\u00a0<Pbas>\u00a0XWikiLDAPUtils.resetGroupCache();  \n15:26\u00a0<tmortagne>\u00a0Pbas: if you have a way to reproduce the CPU overloaded issue on standard instance don't hesitate to create a jira issue with steps  \n15:27\u00a0<Pbas>\u00a0np, ty  \n16:03\u00a0<vmassol>\u00a0tmortagne: I'm worried about something, I see in XWikiLDAPAuthServiceImpl#initConfiguration that if econtext is null then XWikiLDAPConfig.getInstance() is called. However in the XWikiLDAPConfig() constructor I do a Utils.getComponent(ConfigurationSource.class, \"wiki\")\u2026 Do you think this could fail in some cases?  \n16:11\u00a0<msmeria>\u00a0has quit  \n16:12\u00a0<tmortagne>\u00a0vmassol: I don't know any use case where ExecutionContext is null but returning XWikiLDAPConfig.getInstance() is better than returning null that's all  \n16:25\u00a0<gdelhumeau>\u00a0[ANN] Updating translations on stable-8.4.x  \n16:25\u00a0<gdelhumeau>\u00a0so after the build is ok I can directly process the release  \n17:31\u00a0<xwikiorg\\_guest\\_3>\u00a0has joined #xwiki  \n17:31\u00a0<xwikiorg\\_guest\\_3>\u00a0Hello :)  \n17:31\u00a0<xwikiorg\\_guest\\_3>\u00a0i have my office server working great  \n17:32\u00a0<xwikiorg\\_guest\\_3>\u00a0this is a very good job and very useful to have docx import possible  \n17:32\u00a0<xwikiorg\\_guest\\_3>\u00a0thanks to the devs if they are here  \n17:32\u00a0<xwikiorg\\_guest\\_3>\u00a0i have now a question on pdf export  \n17:33\u00a0<xwikiorg\\_guest\\_3>\u00a0i managed to modify the footer and add an image to it  \n17:33\u00a0<xwikiorg\\_guest\\_3>\u00a0but i want the image to be right aligned  \n17:33\u00a0<edvorg>\u00a0has joined #xwiki  \n17:34\u00a0<xwikiorg\\_guest\\_3>\u00a0i added style=\"vertical-align:right\" to the img tag in pdffooter.vm but it does not align the image  \n17:34\u00a0<xwikiorg\\_guest\\_3>\u00a0i have to create a custom PDFclass or something like that ?  \n17:49\u00a0<xwikiorg\\_guest\\_3>\u00a0has quit  \n18:04\u00a0<tmortagne>\u00a0has quit  \n20:03\u00a0<moep>\u00a0has joined #xwiki  \n20:46\u00a0<evalica>\u00a0has quit  \n21:04\u00a0<Slashman>\u00a0has quit  \n22:37\u00a0<mflorea>\u00a0has quit  \n22:57\u00a0<gdelhumeau>\u00a0has quit  \n23:02\u00a0<moep>\u00a0has quit  \n23:06\u00a0<moep>\u00a0has joined #xwiki\n"}