{"id": "dev:IRC.xwikiArchive20150522", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150522", "title": "IRC Archive for channel #xwiki on 22 May 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<woshilapin>\u00a0has quit  \n01:23\u00a0<Harrison\\_\\_>\u00a0has quit  \n01:57\u00a0<debajit>\u00a0has quit  \n06:01\u00a0<Denis2>\u00a0has joined #xwiki  \n06:03\u00a0<Denis>\u00a0has quit  \n07:12\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n07:27\u00a0<silverdrop>\u00a0has joined #xwiki  \n07:44\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:05\u00a0<msmeria>\u00a0has joined #xwiki  \n08:28\u00a0<mflorea>\u00a0has joined #xwiki  \n08:28\u00a0<mflorea>\u00a0has quit  \n08:28\u00a0<mflorea1>\u00a0has joined #xwiki  \n08:28\u00a0<vmassol>\u00a0has joined #xwiki  \n08:50\u00a0<ol-ow2>\u00a0has joined #xwiki  \n09:00\u00a0<cjd>\u00a0has joined #xwiki  \n09:07\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:45\u00a0<lucaa>\u00a0has joined #xwiki  \n09:52\u00a0<fmancinelli>\u00a0has joined #xwiki  \n10:16\u00a0<silverdrop>\u00a0has quit  \n10:27\u00a0<lucaa>\u00a0has quit  \n10:29\u00a0<lucaa>\u00a0has joined #xwiki  \n10:34\u00a0<woshilapin>\u00a0has quit  \n10:36\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:41\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:41\u00a0<evalica>\u00a0has joined #xwiki  \n10:47\u00a0<woshilapin>\u00a0has joined #xwiki  \n10:57\u00a0<Pbas>\u00a0hello, here tmortagn my bug & answer to avoid it: http://jira.xwiki.org/browse/XWIKI-12121  \n10:59\u00a0<tmortagne>\u00a0Pbas: thanks, need to reproduce and understand how this can happen now...  \n11:01\u00a0<Pbas>\u00a0perhaps you can simply add a line: remove cache +solr subdirectory before upgrade in documentation about upgrading xwiki?  \n11:05\u00a0<tmortagne>\u00a0Pbas: what you get is a bug that should never happen, I would really prefer fix it ASAP  \n11:06\u00a0<tmortagne>\u00a0but I need to reproduce it to fix it  \n11:06\u00a0<gsmeria>\u00a0has quit  \n11:06\u00a0<Pbas>\u00a0Ok I keep my corrupted cache if you want it.  \n11:16\u00a0<tmortagne>\u00a0Pbas: could you attach your cache to the issue ? in a zip or something  \n11:17\u00a0<Pbas>\u00a0Ok  \n11:23\u00a0<Bugendolf>\u00a0has quit  \n11:25\u00a0<Pbas>\u00a0Done :-)  \n11:27\u00a0<silverdrop>\u00a0has joined #xwiki  \n11:28\u00a0<tmortagne>\u00a0thanks  \n11:30\u00a0<Bugendolf>\u00a0has joined #xwiki  \n11:32\u00a0<gsmeria>\u00a0has joined #xwiki  \n11:50\u00a0<Bugendolf>\u00a0has quit  \n11:59\u00a0<Bugendolf>\u00a0has joined #xwiki  \n12:12\u00a0<cjd>\u00a0has quit  \n12:24\u00a0<evalica>\u00a0has quit  \n13:02\u00a0<msmeria>\u00a0has quit  \n13:03\u00a0<msmeria>\u00a0has joined #xwiki  \n13:08\u00a0<Slashman>\u00a0has joined #xwiki  \n13:22\u00a0<vmassol>\u00a0guys our build is really in a bad shape  \n13:22\u00a0<vmassol>\u00a0http://ci.xwiki.org/  \n13:22\u00a0<vmassol>\u00a0I cannot execute any func test ATM  \n13:23\u00a0<vmassol>\u00a0they fail with: \"Caused by: org.hibernate.DuplicateMappingException: Duplicate query mapping getSpaceDocsName\" when trying to load XARs  \n13:23\u00a0<vmassol>\u00a0trying to find the cause now...  \n13:23\u00a0<vmassol>\u00a0plenty of :  \n13:24\u00a0<vmassol>\u00a012:09:48.347 [main] WARN \u00a0o.x.o.i.DefaultObservationManager - The [org.xwiki.component.internal.AbstractEntityComponentManager$1] listener is overwritting a previously registered listener [org.xwiki.component.internal.AbstractEntityComponentManager$1] since they both are registered under the same id [org.xwiki.component.internal.WikiComponentManager]. In the future consider removing a Listener first if you really want to register it ag  \n13:24\u00a0<vmassol>\u00a0too  \n13:29\u00a0<vmassol>\u00a0hmm actually XWikiMessageToolBridgeTest doesnt work at all in my ide  \n13:29\u00a0<vmassol>\u00a0java.lang.NoClassDefFoundError: Failed to get fields for class [org.xwiki.activeinstalls.internal.server.DefaultDataManager] because the class [io/searchbox/Action] couldn't be found in the ClassLoader.  \n13:36\u00a0<cjd>\u00a0has joined #xwiki  \n13:50\u00a0<tmortagne>\u00a0looks like we have a cross injection because of the listeners  \n13:50\u00a0<vmassol>\u00a0this is not very nice btw: this.observation.addListener(new AbstractEventListener(this.contextKey, EVENTS)  \n13:51\u00a0<vmassol>\u00a0(doing a new on an abstract class)  \n13:51\u00a0<vmassol>\u00a0hmm no striek that, it's ok  \n13:51\u00a0<vmassol>\u00a0\\*strike  \n13:51\u00a0<tmortagne>\u00a0there was no point in create a special class just for this  \n13:51\u00a0<vmassol>\u00a0does it mean initalize is called several times?  \n13:52\u00a0<tmortagne>\u00a0the issue if that WikiComponentManager trigger a dependency on observation manager which load all listener and one listener trigger a dependency on WikiComponentManager, etc.  \n13:52\u00a0<tmortagne>\u00a0so yes we end up with the initialize called several times  \n13:52\u00a0<vmassol>\u00a0ok I'll let you fix this  \n13:52\u00a0<tmortagne>\u00a0trying to find the best way to fix this cross reference  \n13:52\u00a0<vmassol>\u00a0this is probably hte problem I have in my func tests too  \n14:06\u00a0<vmassol>\u00a0indeed seems initiliaze is called several times  \n14:06\u00a0<vmassol>\u00a0my problem is becuause this is called several times:  \n14:06\u00a0<vmassol>\u00a0public void initialize() throws InitializationException  \n14:06\u00a0<vmassol>\u00a0in HqlQueryExecutor  \n14:15\u00a0<vmassol>\u00a0at last it works :)  \n14:15\u00a0<vmassol>\u00a0I can work!  \n14:15\u00a0<vmassol>\u00a0lost a good portion of the morning :(  \n14:33\u00a0<lucaa>\u00a0has quit  \n14:38\u00a0<vmassol>\u00a0tmortagne: there are still test issues on platform  \n14:38\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-platform/1353/console  \n14:38\u00a0<tmortagne>\u00a0vmassol: I know, I'm on it  \n14:38\u00a0<vmassol>\u00a0ok  \n14:38\u00a0<tmortagne>\u00a0but it's different this time  \n14:38\u00a0<vmassol>\u00a0yes  \n14:38\u00a0<tmortagne>\u00a0it's just that we have lots of listener that are now lookuped and some of them expect to find things that don't exist  \n14:39\u00a0<tmortagne>\u00a0xwiki-platform-tool-xmldoc-update-plugin triggers many thing that are totally useless for what it does  \n14:48\u00a0<tmortagne>\u00a0we really need to start cleanup the tons of useless dependencies we have at oldcore level...  \n14:48\u00a0<tmortagne>\u00a0it's a pain for unit tests  \n14:48\u00a0<tmortagne>\u00a0and here for tools  \n14:55\u00a0<Enygma`>\u00a0has quit  \n14:56\u00a0<Enygma`>\u00a0has joined #xwiki  \n15:05\u00a0<cjd>\u00a0has quit  \n15:13\u00a0<cjd>\u00a0has joined #xwiki  \n15:23\u00a0<DarkKnightCZ>\u00a0has quit  \n15:54\u00a0<lucaa>\u00a0has joined #xwiki  \n15:55\u00a0<msmeria>\u00a0has quit  \n16:05\u00a0<silverdrop>\u00a0has quit  \n16:32\u00a0<Pbas>\u00a0has left #xwiki  \n16:43\u00a0<Denis2>\u00a0has quit  \n17:02\u00a0<Harrison\\_\\_>\u00a0has joined #xwiki  \n17:06\u00a0<gsmeria>\u00a0has quit  \n17:15\u00a0<sdumitriu>\u00a0has quit  \n17:27\u00a0<Bugen\\_do>\u00a0has joined #xwiki  \n17:27\u00a0<mflorea1>\u00a0has quit  \n17:31\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:35\u00a0<ol-ow2>\u00a0has quit  \n17:37\u00a0<Harrison\\_\\_>\u00a0has quit  \n17:48\u00a0<lucaa>\u00a0has quit  \n17:49\u00a0<lucaa>\u00a0has joined #xwiki  \n18:08\u00a0<cjd>\u00a0has quit  \n18:18\u00a0<Enygma`>\u00a0has quit  \n18:18\u00a0<evalica>\u00a0has quit  \n19:07\u00a0<fmancinelli>\u00a0has quit  \n19:25\u00a0<cjd>\u00a0has joined #xwiki  \n19:27\u00a0<lucaa>\u00a0has quit  \n19:27\u00a0<lucaa>\u00a0has joined #xwiki  \n19:55\u00a0<debajit>\u00a0has joined #xwiki  \n19:57\u00a0<debajit>\u00a0Hi, I am trying to understand how the cache is read or updated with displaying or editing a page. Where should I look to understand this? I looked at http://extensions.xwiki.org/xwiki/bin/view/Extension/Observation+Module+Remote and then I looked at the EditAction (https://github.com/xwiki/xwiki-platform/blob/fe3cfb377e9bef727ef6780f55628ccca0924e2  \n19:57\u00a0<debajit>\u00a00/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/web/EditAction.java) but I am not able to tell who is listening to the document-updated event. Where could I find this information?  \n20:00\u00a0<vmassol>\u00a0debajit: I have to go (late here) but check XWikiCacheStore in the oldcore module  \n20:03\u00a0<debajit>\u00a0vmassol: Thanks!  \n20:14\u00a0<tmortagne>\u00a0has quit  \n20:59\u00a0<lucaa>\u00a0has quit  \n21:53\u00a0<MasterPiece>\u00a0has joined #xwiki  \n22:26\u00a0<OSIMasson>\u00a0has quit  \n22:28\u00a0<OSIMasson>\u00a0has joined #xwiki  \n23:13\u00a0<Slashman>\u00a0has quit  \n23:37\u00a0<vmassol>\u00a0has quit\n"}