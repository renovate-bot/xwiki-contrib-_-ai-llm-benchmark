{"id": "dev:IRC.xwikiArchive20100202", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100202", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nxwikibot joined #xwiki at 09:05  \nvmassol - (09:14): mflorea: fyi if you haven't already seen it: http://code.google.com/p/google-web-toolkit/source/detail?r=7517  \nvmassol - (09:14): and good morning btw!  \ntmortagne joined #xwiki at 09:15  \nmflorea - (09:16): vmassol: cool! but I can't say I missed them :)  \nvmassol - (09:17): :)  \nvmassol - (09:17): (doing some user cleanup)  \njvdrean left at 09:23 (Quit: Leaving.  \nvmassol - (09:33): ok enough for today....  \nxenon75 joined #xwiki at 09:41  \nnuvolari - (09:53): hmm, is there a way to scale an image by percentage and only giving width/height?  \njvdrean joined #xwiki at 09:55  \nlucaa joined #xwiki at 09:57  \ntmortagne - (10:03): nuvolari: [[image:file.png||width=\"50%\"]] ?  \nnuvolari - (10:04): tmortagne: I think something with our setup is wrong, the image won't display if I scale it :/  \nsdumitriu - (10:04): X-less server?  \nnuvolari - (10:05): sdumitriu: umh, I think so  \nnuvolari - (10:05): it's in production setup  \nsdumitriu - (10:05): Then java needs a headless switch  \ntmortagne - (10:05): nuvolari: another way maybe is by using image plugin (which is supposed to resize image server side), let me find the proper syntax  \nKermitTheFragger joined #xwiki at 10:06  \nxenon75 left at 10:09 (Quit: Leaving.  \nlucaa left at 10:24 (Ping timeout: 258 seconds  \nlucaa joined #xwiki at 10:24  \nflorinciu joined #xwiki at 11:00  \nxenon75 joined #xwiki at 11:26  \nEnygma` joined #xwiki at 11:27  \nsdumitriu left at 11:29 (Read error: Operation timed out  \nsdumitriu joined #xwiki at 11:31  \nsdumitriu left at 11:46 (Ping timeout: 272 seconds  \nvmassol - (12:11): test  \nxwiki-bridge left at 12:11 (Remote host closed the connection  \nxwikibot joined #xwiki at 12:12  \nvmassol - (12:12): not pong  \nvmassol - (12:12): :)  \nvmassol - (12:13): test  \nvmassol - (12:13): ok logging is back to normal  \nxwiki-bridge left at 12:21 (Remote host closed the connection  \nxwiki-bridge joined #xwiki at 12:21  \nxwiki-bridge left at 12:22 (Remote host closed the connection  \nflaviusolaru joined #xwiki at 12:54  \nCalebJamesDeLisl joined #xwiki at 12:58  \nsdumitriu joined #xwiki at 13:01  \nsdumitriu - (13:07): news  \nsdumitriu left at 13:07 (Quit: Leaving.  \nsdumitriu joined #xwiki at 13:07  \nxenon75 left at 13:11 (Quit: Leaving.  \nbbc581 joined #xwiki at 13:25  \nbbc581 left at 13:30 (Ping timeout: 240 seconds  \nbbc581 joined #xwiki at 13:30  \nsdumitriu - (13:48): vmassol: Looking at http://dev.xwiki.org/xwiki/bin/view/Community/DevelopmentPractices#HSubversionconfigurationandlineendings  \nsdumitriu - (13:48): The label for the attach:config looks weird  \nvmassol - (13:49): sdumitriu: talking to me? what is this?  \nsdumitriu - (13:49): What, can't I talk to you anymore?  \nvmassol - (13:49): why couldn't you?  \nvmassol - (13:50): what is this = what is \"The label for the attach:config looks weird\"  \nsdumitriu - (13:50): \"You talkin' to me?!\"  \nvmassol - (13:50): :)  \nsdumitriu - (13:50): K, so, in the old syntax the label, if unspecified, was just the name of the attachment  \nsdumitriu - (13:50): Without the attach: prefix  \nvmassol - (13:51): oh nothing to do with my link then  \nvmassol - (13:51): ?  \nvmassol - (13:51): oh missed one line  \nvmassol - (13:51): :)  \nvmassol - (13:51): I had missed \"vmassol: Looking at http://dev.xwiki.org/xwiki/bin/view/Community/DevelopmentPractices#HSubversionconfigurationandlineendings\"  \nvmassol - (13:51): looking  \nvmassol - (13:53): hmm I don't understand why it prints \"attach:\"  \nvmassol - (13:53): looking at code  \nsdumitriu - (13:56): vmassol: Could be something already fixed, since this is 2.0.2  \nsdumitriu - (13:56): Better check that it still happens on trunk first  \nvmassol - (13:56): yes good idea  \nvmassol - (13:56): checking  \nvmassol - (13:58): it's still there  \nvmassol - (13:59): I know why  \nvmassol - (13:59): fixing code  \nvmassol - (13:59): btw guys  \nvmassol - (13:59): would be great if some of us answer Henry Story's email about FOAF+SSL  \nvmassol - (14:00): fyi Henry has some free time to implement this feature  \nvmassol - (14:00): and we talked on skype  \nvmassol - (14:00): and I said xwiki could be interested if he wanted to do it with us  \nvmassol - (14:00): I'll answer myself later today  \nvmassol - (14:00): but just wanted to give you some background  \nsdumitriu - (14:01): K  \narkub joined #xwiki at 14:09  \nvmassol - (14:26): sdumitriu: ok to do the same for mailto? (ie not print the \"mailto:\" part)  \nvmassol - (14:26): s/sdumitriu/sdumitriu & tmortagne/  \ntmortagne - (14:28): mailto is not the same thing for me, i'm not sure we should interpret it (currently it's just an url like another for us)  \nvmassol - (14:28): it's not a url tmortagne  \nvmassol - (14:28): it's a uri  \nvmassol - (14:28): mailto:[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nEnygma` left at 14:28 (Quit: Leaving.  \nsdumitriu - (14:28): Yes  \nEnygma` joined #xwiki at 14:28  \ntmortagne - (14:29): vmassol: you plain with words, my point is that we don't intepret it  \nsdumitriu - (14:29): I mean +1 for hiding mailto: in the label  \ntmortagne - (14:29): \\*play  \nvmassol - (14:29): tmortagne: I'm not playing, I thougt you wanted to differentiate URLs from URI and display full label for URLs but not for URIs  \ntmortagne - (14:30): attach has a special meaning for us so it has nothing to do with the rest of the references we find in the link block  \nvmassol - (14:31): this is not the pb thomas  \nmflorea1 joined #xwiki at 14:31  \nvmassol - (14:31): the question is whether we want to hide the prefix for mailto uris  \nvmassol - (14:31): since we know what it represents  \nvmassol - (14:31): ie making it nier when displayed  \nvmassol - (14:31): s/nier/nicer/  \nmflorea left at 14:32 (Ping timeout: 246 seconds  \nlucaa left at 14:32 (Quit: Leaving.  \nvmassol - (14:32): I'm not 100% sure but I think hidden is better  \nlucaa joined #xwiki at 14:32  \ntmortagne - (14:33): vmassol: i'm just saying that from rendering POV currently we don't really know what is mailto: and we will have to add this interpretation  \nvmassol - (14:33): I know but we will if we want to display it nice  \ntmortagne - (14:33): also it will maybe be weird for user that when he has something like \"[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)\" it's not interpreted  \ntmortagne - (14:33): because it will somethimes find some that are interpreted  \nvmassol - (14:34): I don't think it's a pb  \nvmassol - (14:34): if I write: HelloWorld  \nvmassol - (14:34): and [[HelloWorld]]  \nvmassol - (14:34): they're not going to be displayed similarly either  \nvmassol - (14:35): (ie we have a syntax for links that the user has to use)  \ntmortagne - (14:36): i'm not talking about syntax users  \nvmassol - (14:39): btw  \nvmassol - (14:40): for mailto we currently have a test for: mailto:[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)?subject=This is a test  \nvmassol - (14:40): so ideally when displayed the query string should also be hidden....  \nsdumitriu - (14:41): +1  \ntmortagne - (14:43): -0, for me it's like saying that we should remove the \"?param=value\" from \"http://host?param=value\" when printing it  \nvmassol - (14:46): why is it the same thomas?  \nvmassol - (14:46): they don't represent the same thing  \nvmassol - (14:46): it's about offering a label that makes sense  \nvmassol - (14:46): have a look at websites with mailto urls  \nvmassol - (14:46): you'll see that in general they don't print mailto: before  \nvmassol - (14:47): for mailto we have an easy solution which is to just print the email  \nvmassol - (14:47): for urls there's no simple solution  \nvmassol - (14:47): printing //host will not mean anything  \nvmassol - (14:57): tmortagne: I'm ready to commit, I need to know what to do  \ntmortagne - (14:58): where i'm speaking about removing \"http:\" ?  \ntmortagne - (14:58): i'm only talking about query string  \nvmassol - (14:59): so you're ok to remove the \"mailto\" prefix ?  \ntmortagne - (14:59): i'm +0, i don't like too much having to interpret it but yes it's nicer  \nvmassol - (15:00): ok so do you want to have: [[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)?subject=mail subject  \nvmassol - (15:00): or [[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nvmassol - (15:00): ?  \nvmassol - (15:00): (for the label)  \nvmassol - (15:00): for me there's no doubt I prefer the shorter form  \nsdumitriu - (15:01): Me too  \ntmortagne - (15:02): i don't know what can contains query string for mail, it depends of what you can put as query string, if it's only prepared datas for the mail client then ok  \nsdumitriu - (15:02): Yes, it's only mail headers  \nsdumitriu - (15:02): But anyway, there's no danger  \nsdumitriu - (15:02): Even if the query string contains a CC for example, it's not like the mail sent automatically  \nsdumitriu - (15:03): The user will se what's in there  \nsdumitriu - (15:03): I need a new computer, the keys on this one aren't working well anymore  \nvmassol - (15:04): btw we also need to decide how to display this: attach:Space.Page@filename  \nvmassol - (15:04): should we only display filename?  \nsdumitriu - (15:05): Yes  \nvmassol - (15:05): ok fixing that too then  \ntmortagne - (15:07): is jabber server getting better (if someone tested it) ?  \nsdumitriu - (15:08): Nope  \nvmassol - (15:09): tmortagne: please confirm your agreement (or not) for removing the query string for mailto uri  \nvmassol - (15:09): I'm ready to commit  \nvmassol - (15:09): (creating jira issue)  \nsdumitriu - (15:10): Let's put it differently  \nsdumitriu - (15:10): Why would you want to see it there?  \ntmortagne - (15:10): vmassol: i'm ok  \nvmassol - (15:10): ok cool  \nkibahop left #xwiki at 15:12  \nvmassol - (15:12): done  \ntmortagne - (15:13): sdumitriu: it's not really the problem, my POV is just that the less parsing we have to do the better it is  \nvmassol - (15:15): I'll need to do a refactoring to make the code cleaner  \nvmassol - (15:15): something like a URI Label Generator  \nvmassol - (15:16): with components for each uri scheme  \nvmassol - (15:16): if it exists use it, if not use the full reference as label  \ntmortagne - (15:17): ok  \nvmassol - (15:18): this would make uris \"pluggable\"  \nvmassol - (15:18): the lavel part of it at least  \nvmassol - (15:18): we still need the otehr part  \nvmassol - (15:18): (we have a jira issue for that)  \nvmassol - (15:18): s/lavel/label/  \nflaviusolaru - (15:32): hi all, i have a small problem... while editing a user i've entered in description some chinese characters and now everytime i edit that document i get the folowing error...  \nflaviusolaru - (15:32): \u00a0Notice \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0A problem occurred while trying to process your request. Please contact the webmaster if this happens again.  \nflaviusolaru - (15:32): Detailed information:  \nflaviusolaru - (15:32): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Error number 3201 in 3: Exception while saving document Players.Samsung Wrapped Exception: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.xpn.xwiki.objects.LargeStringProperty# \u00a0\u00a0] com.xpn.xwiki.XWikiException: Error number 3201 in 3: Exception while saving document Players.Samsung Wrapped Exception: Row was updated or deleted by another transaction (or unsaved-value mapping was incor  \nflaviusolaru - (15:32): Wrapped Exception: \u00a0org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.xpn.xwiki.objects.LargeStringProperty# \u00a0\u00a0]  \nflaviusolaru - (15:33): this happens when i change the profile photo...  \nlucaa - (15:38): mmh, that's a cool property  \nlucaa - (15:38): error I meant  \nflaviusolaru - (15:41): ok now how do i get rid of that document forever..? it's a XE 2.1.1  \nflaviusolaru - (15:41): so i can recreate it  \nEnygma` left at 15:45 (Ping timeout: 256 seconds  \nKermitTheFragger left at 15:55 (Quit: Leaving  \nvmassol - (15:59): tmortagne: I think we should identify the URI shceme in the link parser  \nvmassol - (15:59): otherwise code using Link have to parse the reference  \nvmassol - (16:00): anyway not doing it now\u2026. no time...  \nGillesSerasset joined #xwiki at 16:01  \nGillesSerasset - (16:02): Hi all,  \nvmassol - (16:02): hi GillesSerasset\u2026 oh oh questions coming... ;)  \nGillesSerasset - (16:02): I'm trying to compile xwiki from sources with eclipse  \nGillesSerasset - (16:02): hi Vincent  \nGillesSerasset - (16:02): I get this: log4j:WARN No appenders could be found for logger (org.apache.catalina.startup.TldConfig).  \nGillesSerasset - (16:02): log4j:WARN Please initialize the log4j system properly.  \nvmassol - (16:02): (since you said you had plenty of questions)  \nvmassol - (16:02): not a problem  \nGillesSerasset - (16:03): I solved a lot of them by now, but I'm quite stuck here  \nvmassol - (16:03): you'll need to configure it if you want to get logs for org.apache.catalina.\\*  \nvmassol - (16:03): this is just a warning meaning you won't get logs for catalina in xwiki's log file  \nvmassol - (16:03): which is just fine  \ntmortagne - (16:03): vmassol: sure but for now nobody use URI scheme at rendering api level  \ntmortagne - (16:04): (xhtml renderer is doing cleanup on something he knows since he knows what means mailto in a xhtml reference)  \nvmassol - (16:04): tmortagne: sure but a uri scheme is something generic that can be useful to anyone manipulating links  \ntmortagne - (16:04): vmassol: not yet :)  \nGillesSerasset - (16:05): well, the problem with this is just after:  \nGillesSerasset - (16:05): Feb 2, 2010 3:40:56 PM org.apache.catalina.core.StandardContext start  \nGillesSerasset - (16:05): SEVERE: Error listenerStart  \nGillesSerasset - (16:05): Feb 2, 2010 3:40:56 PM org.apache.catalina.core.StandardContext start  \nGillesSerasset - (16:05): SEVERE: Context [/xwiki] startup failed due to previous errors  \nGillesSerasset - (16:05): init: Bootstrapping class not in Py.BOOTSTRAP\\_TYPES[class=class org.python.core.PyBaseString]  \nGillesSerasset left at 16:05 (Excess Flood  \nGillesSerasset joined #xwiki at 16:06  \nGillesSerasset - (16:06): argh...  \nvmassol - (16:06): tinypaste.com  \nGillesSerasset - (16:06): Feb 2, 2010 3:40:56 PM org.apache.catalina.core.StandardContext start  \nGillesSerasset - (16:06): SEVERE: Error listenerStart  \nGillesSerasset - (16:06): Feb 2, 2010 3:40:56 PM org.apache.catalina.core.StandardContext start  \nGillesSerasset - (16:06): SEVERE: Context [/xwiki] startup failed due to previous errors  \nGillesSerasset - (16:06): Thats the following lines...  \nGillesSerasset - (16:07): need to say that I don't see any previous errors except from the log4j one  \ntmortagne - (16:07): vmassol: also it's difficult to have something like Link#getScheme since Link is not always a URI and can be DOCUMENT or INTERWIKI  \nvmassol - (16:07): yes there's a design pb  \nvmassol - (16:08): (we could have different links impl for ex: DocumentLink, URILink, etc that extend Link)  \nGillesSerasset - (16:08): complete log is here:  \nGillesSerasset - (16:08): http://tinypaste.com/55f50  \nGillesSerasset - (16:08): any idea ?  \nvmassol - (16:09): GillesSerasset: where have you put the log4j.properties file?  \ntmortagne - (16:09): vmassol: as you suggested previously it could be different kind of events instead of merging everything in beginLink/endLink  \ntmortagne - (16:11): or yes follow the way it's done with images  \ntmortagne - (16:11): which would be more consistent anyway  \nvmassol - (16:11): yes  \nvmassol - (16:12): GillesSerasset: the xwiki log4j config shouldn't affect the container's logging config normally  \nvmassol - (16:12): (they're not in the same CL)  \nGillesSerasset - (16:12): well, then, I don't understand why I get this  \nvmassol - (16:13): I also don't understand how it could fail if a logging config is not there  \nGillesSerasset - (16:13): I tried under eclipse (run in server\"  \nvmassol - (16:13): looks like a bad tomcat config to me  \nGillesSerasset - (16:13): and I also uncompressed the war generated from xwiki-web-standard into a tomcat webapps dir  \nGillesSerasset - (16:14): mmmm, I'll tried to reinstall a new tomcat from scratch...  \nvmassol - (16:14): this is not the right war to use btw  \nvmassol - (16:14): you should use the XE war  \nvmassol - (16:14): they're almost similar but with different libs and config files  \nGillesSerasset - (16:16): yes, and I could not compile the standard web without adding a dependency in the pom.xml...  \nvmassol - (16:16): std web builds fine  \nGillesSerasset - (16:16): I'll try with the enterprise/trunk source dir  \nvmassol - (16:16): it's built by all of us + hudson with no pb  \nlucaa left at 16:16 (Read error: Connection reset by peer  \nvmassol - (16:16): so you shouldn't need to add anything  \nlucaa joined #xwiki at 16:16  \nGillesSerasset - (16:16): apparently no, it requires captcha, but captcha is not in pom.xml, then libs are missing in war  \nvmassol - (16:17): GillesSerasset: the captch is there in the pom  \nvmassol - (16:17): (since 2.2M2)  \nGillesSerasset - (16:17): mmm  \nvmassol - (16:18): try a svn up :)  \nGillesSerasset - (16:18): did it 5 minutes ago  \nGillesSerasset - (16:18): I must be using the wrong source dir here...  \nvmassol - (16:19): you can check it here: http://svn.xwiki.org/svnroot/xwiki/platform/web/trunk/standard/pom.xml  \nGillesSerasset - (16:19): I'm doing mvn install under plateform/web/standard  \nGillesSerasset - (16:19): mmm I checked out plateform/trunks I this  \nGillesSerasset - (16:19): this -> think  \nGillesSerasset - (16:20): svn dir comes from: /svnroot/xwiki/!svn/ver/26263/platform/web/trunk  \nGillesSerasset - (16:20): seems to be ok...  \nGillesSerasset - (16:24): argh... you are right, I really don't know what happened...  \nGillesSerasset - (16:25): I'll check out a fresh folder... mine seems to be strange...  \nGillesSerasset - (16:25): I checked it out last week...  \nGillesSerasset - (16:32): mmm, BTW, does it run under tomcat 6 or should I use the last tomcat 5.5  \nvmassol - (16:33): both should be fine IMO but sdumitriu should know better  \nvmassol - (16:33): I think there's an issue with url encoding in TC 5.5.x but not sure  \ntmortagne - (16:34): tomcat6 has the same / encoding issue AFAIK  \ntmortagne - (16:34): but it's more a tomcat choice than a bug...  \nsdumitriu - (16:37): It's a tomcat choice preventing stupid developers bug  \nflaviusolaru left at 16:43 (Quit: Leaving.  \nGillesSerasset left at 17:02 (Quit: Computer goes to sleep!  \nCalebJamesDeLisl - (17:11): I turned up something interesting, thought I'd share. I was thinking about beefing up the email regex on the registration page, I copied it from LiveValidation and it only blocks spaces and @ before the @example.com  \nCalebJamesDeLisl - (17:12): Turns out ()[]\\;:,<> are not allowed unless they are in quotes.  \nCalebJamesDeLisl - (17:14): \"<script>alert(\"owned\")</script>\"[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection) appears to be valid.  \nCalebJamesDeLisl - (17:14): <a href=\"$email\">mail me</a> would be bad.  \nsdumitriu - (17:15): The definitive source is the RFC  \nCalebJamesDeLisl - (17:15): I took a look at it, long.  \nCalebJamesDeLisl - (17:16): I got some info here http://haacked.com/archive/2007/08/21/i-knew-how-to-validate-an-email-address-until-i.aspx  \nflorinciu left at 17:21 (Quit: Leaving.  \nvmassol - (17:44): sdumitriu: :)  \nvmassol - (17:44): (re the regex for parsing an email address)  \nCalebJamesDeLisl - (18:00): I took a look at: http://tools.ietf.org/html/rfc3696 it's a boiled down version.  \nCalebJamesDeLisl - (18:01): Basically anything is allowed if it's either in quotes or is preceded by a backslash.  \nCalebJamesDeLisl - (18:02): my\"'); drop table emails; -- '\"[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection) is valid.  \nCalebJamesDeLisl - (18:03): uneven number of quotes is not allowed.  \nCalebJamesDeLisl - (18:05): an example from the rfc: Abc\\@[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection) \u00a0valid.  \nCalebJamesDeLisl - (18:06): I think it makes the most sense to block \" and \\, and treat everything as not escaped or quoted WDYT?  \nvmassol - (18:11): sounds good to me  \nvmassol - (18:11): but I'm no expert  \nvmassol - (18:12): sdumitriu: I've tried to respond to Henry Story but your input in a reply email would be great too  \ntmortagne left at 18:38 (Quit: Leaving.  \nnuvolari - (18:41): Hi, do you know any place for some good velocity tutorials? or more into the layout part, not using it like in xwiki for example  \nvmassol - (18:42): jvdrean: I wonder why we don't check for edit rights before displaying section edit links  \njvdrean - (18:42): vmassol: sounds like a bug  \nvmassol - (18:43): jvdrean: how do I check that from xwiki.jus?  \nvmassol - (18:43): s/jus/js/  \njvdrean - (18:46): AFAIK there's nothing to do it FTM  \njvdrean - (18:47): putting something like XWiki.hasEdit in javascript.vm seems like the way to go  \nvmassol - (18:48): ok I see  \nCalebJamesDeLisl - (18:59): I have a regex which supports all valid email addresses except ones using quotes or \\ to allow special characters eg: \"my <> email\"@example.com or cases where the email is at an ip address eg: example@[127.0.0.1]  \nCalebJamesDeLisl - (19:00): over at regular-expressions.info they have a regex which supports everything, it's 427 characters long.  \nsdumitriu - (19:01): regular-expressions.info is a good site  \nCalebJamesDeLisl - (19:01): funny thing about the rfc is it allows capital letters to point to a different address but then recommends url escaping.  \nCalebJamesDeLisl - (19:02): regular-expressions.info even said don't use their huge regex.  \nCalebJamesDeLisl - (19:02): also the regular-expressions.info regex didn't allow capitals, I think they should be allowed.  \nlucaa left #xwiki at 19:04  \nvmassol left at 19:08 (Quit: Leaving.  \nvmassol joined #xwiki at 19:10  \narkub left at 19:18 (Quit: Leaving  \nCalebJamesDeLisl - (19:35): it would be nice if there was a default user who didn't have programming rights so I could sandbox my application.  \n\n"}