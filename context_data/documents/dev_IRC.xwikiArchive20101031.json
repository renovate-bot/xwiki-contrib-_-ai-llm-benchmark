{"id": "dev:IRC.xwikiArchive20101031", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20101031", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nrrodriguez left at 01:35 (Quit: rrodriguez  \njbrBridge left at 02:13 (Remote host closed the connection  \njbrBridge joined #xwiki at 02:13  \ncjdelisle - (02:14): !shutdown  \njbrBridge left at 02:14 (Remote host closed the connection  \njbrBridge joined #xwiki at 02:15  \nabusenius left at 02:55 (Ping timeout: 276 seconds  \nsdumitriu left at 05:58 (Ping timeout: 264 seconds  \nmarta\\_ joined #xwiki at 06:55  \nnpm left at 07:11 (Remote host closed the connection  \nnpm joined #xwiki at 07:31  \nmarta\\_ left at 07:52 (Ping timeout: 264 seconds  \nvmassol joined #xwiki at 07:54  \nnpm left at 08:00 (Remote host closed the connection  \nnpm joined #xwiki at 08:02  \nvmassol left at 09:45 (Quit: Leaving.  \nmflorea joined #xwiki at 09:48  \nrrodriguez joined #xwiki at 09:58  \nvmassol joined #xwiki at 10:18  \nmarta\\_ joined #xwiki at 12:03  \nabusenius joined #xwiki at 12:33  \nmflorea left at 12:35 (Quit: Leaving.  \nsdumitriu joined #xwiki at 12:42  \nsdumitriu left at 13:01 (Ping timeout: 252 seconds  \nlucaa joined #xwiki at 13:06  \nmarta\\_ left at 13:12 (Ping timeout: 264 seconds  \nlucaa left at 13:28 (Ping timeout: 245 seconds  \nvmassol - (14:34): hmm seems section editing doesn't work with included documents\u2026.  \nabusenius left at 14:43 (Read error: Connection reset by peer  \nabusenius joined #xwiki at 14:46  \nabusenius left at 15:01 (Read error: Operation timed out  \nabusenius joined #xwiki at 15:03  \nnpm\\_ joined #xwiki at 15:32  \nnpm left at 15:33 (Ping timeout: 265 seconds  \nvmassol left at 15:34 (Ping timeout: 255 seconds  \nvmassol joined #xwiki at 15:39  \narkub joined #xwiki at 15:56  \nlpereira joined #xwiki at 16:39  \nlucaa1 joined #xwiki at 16:40  \nlucaa1 left at 16:47 (Read error: Connection reset by peer  \nlucaa1 joined #xwiki at 16:47  \nlucaa1 left at 16:50 (Client Quit  \nlucaa1 joined #xwiki at 16:55  \nlucaa1 left at 17:37 (Ping timeout: 240 seconds  \nlucaa1 joined #xwiki at 17:40  \nlucaa1 left at 17:44 (Ping timeout: 240 seconds  \nlucaa joined #xwiki at 18:49  \nlucaa left at 18:52 (Read error: No route to host  \nlucaa joined #xwiki at 18:52  \nlucaa left at 18:56 (Ping timeout: 252 seconds  \njvelociter - (19:04): hi guys. Just did a 2.5 war + mySQL install. {{spaces}} and {{tags}} macros on home page are not recognized after the default XAR import - needs either server restart or document save  \njvelociter - (19:04): I've created XWIKI-5641  \njvelociter - (19:05): I think this is quite critical, makes the experience quite odd  \ncjdelisle - (19:05): Yup that's a problem with the order of the xar as far as we can tell.  \njbrBridge - (19:10): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Hi! I have here a public page. For registered users I need to add some additional content (mainly links to other pages).  \njbrBridge - (19:10): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Is there a way to realize this ?  \ncjdelisle - (19:11): {{velocity}} #if($xcontext.getUser() != 'XWiki.XWikiGuest') you are registered! #end {{/velocity}}  \ncjdelisle - (19:12): check out http://platform.xwiki.org/xwiki/bin/view/DevGuide/Scripting  \nlucaa joined #xwiki at 19:13  \njbrBridge - (19:34): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Thanks for the hint.  \njbrBridge - (19:34): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] I refined it to :  \njbrBridge - (19:34): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)]  \njbrBridge - (19:34): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] {{velocity}}  \njbrBridge - (19:34): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] \u00a0#if($xwiki.hasAccessLevel(\"edit\"))  \njbrBridge - (19:34): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] \\*\\*#end  \njbrBridge - (19:34): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] {{/velocity}}  \ncjdelisle - (19:35): hasAccessLevel will only work if the user can edit that page but that's a way.  \nrrodriguez left at 19:42 (Quit: rrodriguez  \nlpereira left at 19:43 (Quit: Leaving.  \nrrodriguez joined #xwiki at 19:45  \nlucaa left at 20:01 (Ping timeout: 252 seconds  \nlucaa joined #xwiki at 20:45  \nabusenius left at 20:49 (Read error: Operation timed out  \njbrBridge - (20:51): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] [cjdelisle] That is intended - here are multiple user groups.  \nabusenius joined #xwiki at 20:52  \nsburjan` left at 21:03 (Read error: Connection reset by peer  \nlpereira joined #xwiki at 21:14  \nvmassol left at 22:06 (Ping timeout: 255 seconds  \nvmassol joined #xwiki at 22:13  \nvmassol left at 22:14 (Client Quit  \nvmassol joined #xwiki at 22:15  \njbrBridge - (22:19): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Another question: How to change the language of a document. I have here some pages which contain \"DE\" content but which are recognized as \"EN\".  \ncjdelisle - (22:20): IIRC you have to create a translation of the document and copy the content into the translation.  \ncjdelisle - (22:21): Also if the default language for your wiki is EN then every page has to have an EN version.  \ncjdelisle - (22:21): (IIRC)  \njbrBridge - (22:26): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] How can I delete only one translation ?  \ncjdelisle - (22:27): I \\_think\\_ you go to that translation and use the delete button.  \ncjdelisle - (22:27): If it's the same language as the \"default for the wiki\" then it will get all of the translations though.  \ncjdelisle - (22:27): Anyway you can always use the \"undelete\" button.  \njbrBridge - (22:28): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Right - I was just a coward  \nvmassol left at 22:38 (Quit: Leaving.  \nsburjan` joined #xwiki at 22:49  \nlucaa - (22:58): gang, how do you feel about adding a save function to the XWiki class with a parameter to skipNotifications?  \nlucaa - (22:59): would that be dangerous from the pov of potential misuses?  \ncjdelisle - (22:59): Can you getStore().saveXWikiDoc?  \ncjdelisle - (23:00): I havn't formed an opinion, just thinking out loud...  \nlucaa - (23:00): it would mean duplicating all the code in saveDocument  \nlucaa - (23:01): except for skipping the part where saveDocument sends the notifications  \ncjdelisle - (23:01): Ideally saveDocument would forward the call.  \nlucaa - (23:01): wdym?  \ncjdelisle - (23:02): saveDocument would call saveDocumentNoNotification and then it would send the notification.  \nlucaa - (23:04): easy & safe I just put a boolean param and the old saveDocument calls the new one with the param on true  \nlucaa - (23:04): wait, I'll show you a patch  \nlucaa - (23:07): http://pastebin.com/JGeJAKfg  \ncjdelisle - (23:09): line9 == infinite loop. no?  \nlucaa - (23:09): no  \ncjdelisle - (23:09): heh nevermind...  \nlucaa - (23:10): in general, I only wonder if such an API is dangerous  \nlucaa - (23:11): I find it quite useful, for the case of saves which are only technical, they're not of interest for the user  \nlucaa - (23:12): in my case, the save of the document when annotations are updated as a result of a document modification. The user doesn't really know about the annotations updates and are not relevant for him...  \ncjdelisle - (23:21): So you would suppress the document update event?  \nsburjan` - (23:21): you want to remove those notifications from annotations ?  \nsburjan` - (23:22): IMO .. if something breaks, it will be very hard to debug.  \ncjdelisle - (23:22): I assume the editing of annotations would not cause a general DocumentUpdateEvent.  \nlucaa - (23:22): it will, when update is made by the user  \nlucaa - (23:23): but annotations have a document update listener which updates the annotations automatically when a document content is changed  \ncjdelisle - (23:23): I guess I don't know much about annotations, when else are they updated?  \ncjdelisle - (23:23): oh ic.  \nlucaa - (23:23): and annos are saved as objects  \nlucaa - (23:23): so you have a document update event for the actual user update  \nlucaa - (23:24): and then you have a second one when the annotations are automatically updated and the document is saved to save the annotations objects  \nlucaa - (23:24): it's very odd for the user  \nlucaa - (23:25): and this would be a nice way to fix that, and offer the API for future situations like this to be avoided  \ncjdelisle - (23:25): Maybe we should have the ability to save just one Object in a document and not the entire document? That would be harder and take longer though.  \nlucaa - (23:26): yes, but notifications still should be sent, IMO  \nsburjan` - (23:27): yes +1 for that  \nsburjan` - (23:27): for keeping the notifications  \ncjdelisle - (23:27): Sure but then it would be an ObjectUpdateEvent so it would be at least more self explanatory.  \nlucaa - (23:27): or we make 3 types of notifications: document updated (content || metadata || objects), document content updated, document metadata updated, object updated,  \nlucaa - (23:27): well  \nlucaa - (23:27): think about a blog post  \nlucaa - (23:27): users don't know that the post is NOT the document but an object inside this document  \nlucaa - (23:28): and the blog post example is actually the most frequent one  \nlucaa - (23:28): a document has some sort of structure, which is stored, actually, in an object inside, and document content only renders that obj  \nlucaa - (23:29): users perceive the document as being \"structured\" and expect a document update event when changing the object field  \ncjdelisle - (23:29): Well the user probably not concerned with the fact that notifications are being sent if he doesn't know about how objects work.  \nlucaa - (23:29): object update event without document update event will only make things complicated  \nlucaa - (23:29): well, what I'm fixing now is for the new recent changes to work fine  \ncjdelisle - (23:29): I see.  \nlucaa - (23:29): XWIKI-5632 (see related issues)  \nlucaa - (23:29): so users \\_will\\_ see the events  \ncjdelisle - (23:30): +0 for me for the api change. It would make refactoring of Package easier.  \ncjdelisle - (23:30): If someone doesn't like it but you still want to take the suppression route, you can just drop down to the storage level and do it there.  \nlucaa - (23:31): yes, but I don't like that solution  \nlucaa - (23:31): it's reimplementing the logic  \ncjdelisle - (23:31): Not very much of it though, set db, call, finally {reset db}  \nlucaa - (23:31): so adding an extra check or an extra anything in the saveDocument will not be reflected  \nlucaa - (23:32): which is not cool  \ncjdelisle - (23:33): I see the suppression method as a bit of a kludge either way, \"save a document without telling anyone\" It indicates that there is something amiss with the save/notification cycle.  \nlucaa - (23:34): no, it means that there should be 2 levels of notifications, or a param (showUser)  \nlucaa - (23:34): showToUser, actually  \nlucaa - (23:35): because I find it very normal that there are some events that the user doesn't care about  \ncjdelisle - (23:35): hmm. Another thought is that perhaps the saving of the document should be intercepted by the annotations module and it should be modified on save.  \ncjdelisle - (23:35): ^^ also takes longer...  \nlucaa - (23:35): you mean prenotifications?  \ncjdelisle - (23:36): Hmm. I suppose that is what it is.  \ncjdelisle - (23:36): I imagined something like registering a transformation.  \nlucaa1 joined #xwiki at 23:36  \nlucaa left at 23:37 (Read error: No route to host  \nlucaa1 - (23:37): right now it is intercepted, by listening to the DocumentUpdateEvent  \nlucaa1 - (23:37): except that the update event is sent after the save  \nsburjan` - (23:37): lucaa1: ipv6 Address ? :)  \ncjdelisle - (23:37): That's your MAC by the way.  \ncjdelisle - (23:37): Unless it's set to random that is...  \nsburjan` - (23:38): MAC address ?  \nlucaa1 - (23:38): ?  \nsburjan` - (23:38): I'm more sure it's ipv6  \nlucaa1 - (23:38): can anyone paste me the part of conversation that I missed?  \ncjdelisle - (23:38): yup, ip6 uses your mac addr as the ending.  \nsburjan` - (23:38): we wew talking about your IP address :)  \nsburjan` - (23:38): lol.. didn.t knew that  \ncjdelisle - (23:38): <lucaa> you mean prenotifications?  \ncjdelisle - (23:39): <cjdelisle> Hmm. I suppose that is what it is.  \ncjdelisle - (23:39): <cjdelisle> I imagined something like registering a transformation.  \ncjdelisle - (23:39): \\* lucaa1 (~lucaa@2a01:e35:8b9a:4300:f27b:cbff:fe20:fca8) has joined #xwiki  \ncjdelisle - (23:39): \\* lucaa has quit (Read error: No route to host)  \ncjdelisle - (23:39): <lucaa1> right now it is intercepted, by listening to the DocumentUpdateEvent  \ncjdelisle - (23:39): <lucaa1> except that the update event is sent after the save  \ncjdelisle - (23:39): <sburjan`> lucaa1: ipv6 Address ? :)  \nlucaa1 - (23:39): isn't that the host name?  \nlucaa1 - (23:39): usually?  \nlucaa1 - (23:40): not hostname  \nlucaa1 - (23:40): it's address  \nlucaa1 - (23:40): I wouldn't know why ipv6...  \nsburjan` - (23:40): yes.. but it is a ipv6 address, not an ipv4 one  \ncjdelisle - (23:40): If you're on a linux/macos box and you punch in ifconfig, I bet you'll see the same address for mac as the end of the ip6 addr.  \nsburjan` - (23:40): well.. maybe your ISP is giving you one  \nlucaa1 - (23:41): yes it is my ipv6 address on eth1  \nsburjan` - (23:41): :)  \nsburjan` - (23:41): sorry for changing the subject, I'll let you continue  \nlucaa1 - (23:41): to my shame I didn't know this is actually happening in year 2010 on this continent...  \nsburjan` - (23:42): ipv6 is already started to be used :)  \nlucaa1 - (23:42): yeah, soon we won't be able to remember our addresses  \nlucaa1 - (23:42): yeeey!  \ncjdelisle - (23:43): Yea right, never happen.  \nsburjan` - (23:43): I laughed my ass of today reading this : http://www.theastralworld.com/prophecies/babavanga.php  \nsburjan` - (23:43): \\*off  \nsburjan` - (23:44): really interesting  \ncjdelisle - (23:45): Actually you usually get a huge block of ip6 addresses so usually only the first 2 numbers matter.  \nsburjan` - (23:45): fistt 2 numbers of first 2 blocks ?  \ncjdelisle - (23:46): Mac spoof DE:AD:BE:EF:CA:FE and that'll be the end of the addr.  \nsburjan` - (23:46): yeah, I don't like the MAC spoof  \nsburjan` - (23:46): and afaik .. the 48 bit address had it's logic like in ipv4  \nsburjan` - (23:47): subnetting, VLSM, CIDR  \ncjdelisle - (23:47): CIDR --> FAIL  \nsburjan` - (23:47): if you append MAC address .. how can you use that ?  \ncjdelisle - (23:47): You can use it to ID someone by their IP addr.  \ncjdelisle - (23:48): IP --> MAC --> CC# that bought the card. --> pwnd.  \nsburjan` - (23:48): yeah ..  \nsburjan` - (23:48): so what, ipv6 doesnt user CIDR and VLSM ?  \ncjdelisle - (23:49): ip6 is trying to use CIDR but the only way to get people to use IP6 is to hand out PI /64's and pretty soon it's all going to be a deaggrigated swamp.  \nsburjan` - (23:49): yeah ..  \ncjdelisle - (23:49): And worse than the 192/8 swamp because it's bigger.  \nsburjan` - (23:49): i'm not familiar at all with ipv6  \ncjdelisle - (23:50): Same as ip4, just longer numbers.  \ncjdelisle - (23:50): It's a stopgap measure for a human problem.  \ncjdelisle - (23:50): The problem is people want as many addrs as possible and they want them in blocks as small as possible.  \ncjdelisle - (23:51): so.  \ncjdelisle - (23:52): prenotification/transformation.  \ncjdelisle - (23:52): I figure we'll have to accept the suppression method for now.  \ncjdelisle - (23:53): But in the future I can see this as being valuable.  \ncjdelisle - (23:53): The question is: What order are the transformations run in?  \nlucaa1 - (23:55): what's the connection between prenotifications and transformations?  \nlucaa1 - (23:55): in this context at least  \ncjdelisle - (23:56): I'm talking about transforming a document while it is being saved.  \nlucaa1 - (23:56): ah  \ncjdelisle - (23:56): (nothing to do with rendering)  \ncjdelisle - (23:56): It's more about transforming because each transformation has to be executed in a certain order.  \nlucaa1 - (23:56): I think ftm there is no guarantee for the order of notifications  \nlucaa1 - (23:57): actually I'm pretty sure  \ncjdelisle - (23:57): This is quite different then because there must be a guarantee otherwise there would be no guarantee of what the outcome will be.  \nlucaa1 - (23:58): the event listeners are picked automatically from all the impl of EventListener  \nlucaa1 - (23:58): and ftm there is no way to set an order on that, afaik  \ncjdelisle - (23:59): Hmm. What happens if a listener recieves a notification and then it changes the document?  \ncjdelisle - (23:59): Does the next listener get the different document?  \n\n"}