{"id": "dev:IRC.xwikiArchive20120604", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120604", "title": "IRC Archive for channel #xwiki on 04 June 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:00\u00a0<jamie\\_\\_wiki>\u00a0has quit  \n00:56\u00a0<Shaddox>\u00a0has quit  \n02:19\u00a0<sdumitriu>\u00a0has quit  \n02:36\u00a0<sdumitriu>\u00a0has joined #xwiki  \n05:53\u00a0<mflorea>\u00a0has joined #xwiki  \n08:15\u00a0<ssavi>\u00a0has joined #xwiki  \n08:21\u00a0<abusenius>\u00a0has joined #xwiki  \n08:32\u00a0<tekzilla>\u00a0has quit  \n08:33\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:35\u00a0<tekzilla>\u00a0has joined #xwiki  \n08:51\u00a0<tmortagne>\u00a0has quit  \n08:52\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:52\u00a0<abusenius>\u00a0has quit  \n09:00\u00a0<+tmortagne>\u00a0mflorea: Hi, there is a weird stack trace on http://ci.xwiki.org/job/xwiki-enterprise-test-ui/org.xwiki.enterprise$xwiki-enterprise-test-ui/1377/testReport/org.xwiki.test.ui.administration/UserProfileTest/testChangeDefaultEditor/, don't know if it's related to the test but looks like it's trying to save a WYSIWYG content to \"default\" syntax  \n09:01\u00a0<+tmortagne>\u00a0maybe you will have an idea  \n09:01\u00a0<+mflorea>\u00a0let me check  \n09:12\u00a0<vmassol>\u00a0has joined #xwiki  \n09:13\u00a0<+mflorea>\u00a0looks like a flicker. either the syntax of the user profile document (which is previewed) is not properly set or the edit form is not submitted properly (fields missing). I'll try to reproduce it later locally.  \n09:14\u00a0<+tmortagne>\u00a0mflorea: ok so it's more \"\" than \"default\"  \n09:14\u00a0<+mflorea>\u00a0yes  \n09:15\u00a0<tmortagne>\u00a0has quit  \n09:16\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:40\u00a0<CIA-117>\u00a0Marius Dumitru Florea\u000f feature-diff-display\u000f \\* rca8df2c\u000f https://github.com/xwiki/xwiki-commons/commit/ca8df2cf1b2e8923fe1576e8ad01fc435251f9f2 \u000f/ (21 files in 7 dirs):\u000f XCOMMONS-184: Introduce API to display diffs in various formats - http://git.io/qha4EA  \n09:41\u00a0<CIA-117>\u00a0Marius Dumitru Florea\u000f feature-diff-display\u000f \\* re5ebc54\u000f https://github.com/xwiki/xwiki-commons/commit/e5ebc548a6db2d50ccab2fdb672af99fbae516bb \u000f/ (10 files in 8 dirs):\u000f Merge branch 'master' of github.com:xwiki/xwiki-commons into feature-diff-display - http://git.io/Bac0aQ  \n09:41\u00a0<CIA-117>\u00a0tmortagne\u000f feature-diff-display\u000f \\* r4e40f06\u000f https://github.com/xwiki/xwiki-commons/commit/4e40f0635a584905fde0a597a6a6a2cf60fb3058 \u000f/ (3 files in 3 dirs):\u000f XCOMMONS-185: Expose org.slf4j.Logger interface in org.xwiki.logging.LogQueue - http://git.io/0pq58g  \n09:42\u00a0<CIA-117>\u00a0tmortagne\u000f feature-diff-display\u000f \\* r91a72cf\u000f https://github.com/xwiki/xwiki-commons/commit/91a72cf961434fd15f70f2cacb8c99f70fbee33c \u000f/ (2 files in 2 dirs):\u000f XCOMMONS-167: Introduce diff/merge API - http://git.io/xkU2AQ  \n09:42\u00a0<CIA-117>\u00a0tmortagne\u000f feature-diff-display\u000f \\* r11cf603\u000f https://github.com/xwiki/xwiki-commons/commit/11cf60363f86ad66345fb011bd8e44f151c5ec0e \u000f/ (6 files in 5 dirs):\u000f XCOMMONS-185: Expose org.slf4j.Logger interface in org.xwiki.logging.LogQueue - http://git.io/py45dQ  \n09:42\u00a0<CIA-117>\u00a0tmortagne\u000f feature-diff-display\u000f \\* rca8268c\u000f https://github.com/xwiki/xwiki-commons/commit/ca8268cebd3372f1f77bb0f1f05b65c31b3b1d56 \u000f/ xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/test/java/org/xwiki/extension/test/AbstractExtensionHandlerTest.java :\u000f XCOMMONS-185: Expose org.slf4j.Logger interface in org.xwiki.logging.LogQueue - http://git.io/I4nh2Q  \n09:51\u00a0<vmassol>\u00a0good morning everyone  \n09:52\u00a0<vmassol>\u00a0today is CTS day #1. However I know we're all busy on the 4.1 RC1 release so if you can't participate it's ok\u2026 I'm also going to reduce my participation to the minimum since I'd like to finish the Windows7 support in our installer and it's more complex than I initially thought....  \n09:53\u00a0<vmassol>\u00a0tmortagne: nice toto macro on http://extensions.xwiki.org/xwiki/bin/view/Extension/Diff+Module ;)  \n09:53\u00a0<+tmortagne>\u00a0vmassol: better ? :)  \n09:53\u00a0<vmassol>\u00a0yep  \n09:53\u00a0<vmassol>\u00a0:)  \n09:54\u00a0<jvdrean>\u00a0has joined #xwiki  \n09:59\u00a0<vmassol>\u00a0so today is bank holiday in Romania?  \n10:06\u00a0<lucaa>\u00a0has joined #xwiki  \n10:08\u00a0<jvdrean>\u00a0has quit  \n10:21\u00a0<+tmortagne>\u00a0vmassol: is it ? (sorry mflorea)  \n10:21\u00a0<+mflorea>\u00a0yes  \n10:21\u00a0<+mflorea>\u00a0np :)  \n10:24\u00a0<sburjan>\u00a0has joined #xwiki  \n10:35\u00a0<vmassol>\u00a0guys I'm a bit stuck to progress on the windows7 installer ATM without modifying Environment module to use system property xwiki.data.dir if set\u2026 any idea of what I should do?  \n10:35\u00a0<vmassol>\u00a0should I send a very specific vote about this?  \n10:41\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:42\u00a0<ssavi>\u00a0has quit  \n11:39\u00a0<tmortagne>\u00a0has quit  \n11:47\u00a0<sburjan>\u00a0has quit  \n11:51\u00a0<sburjan>\u00a0has joined #xwiki  \n12:04\u00a0<sburjan>\u00a0has quit  \n12:05\u00a0<tmortagne>\u00a0has joined #xwiki  \n12:15\u00a0<tmortagne>\u00a0has quit  \n12:15\u00a0<tmortagne>\u00a0has joined #xwiki  \n12:17\u00a0<tmortagne>\u00a0has quit  \n12:17\u00a0<tmortagne>\u00a0has joined #xwiki  \n12:20\u00a0<sburjan>\u00a0has joined #xwiki  \n12:58\u00a0<sburjan>\u00a0has quit  \n13:10\u00a0<sburjan>\u00a0has joined #xwiki  \n13:19\u00a0<vmassol>\u00a0cjd: good morning. ping  \n13:50\u00a0<CIA-117>\u00a0Vincent Massol\u000f master\u000f \\* rc669741\u000f https://github.com/xwiki/xwiki-commons/commit/c6697419e6fcd5b22bbc313973462736b22b9b55 \u000f/ (3 files in 3 dirs):\u000f [Misc] Use String.format and small message improvements - http://git.io/LqOBhg  \n14:07\u00a0<Denis>\u00a0has joined #xwiki  \n14:40\u00a0<sburjan>\u00a0has quit  \n15:02\u00a0<@cjd>\u00a0good morning vmassol, what's on your mind?  \n15:21\u00a0<vmassol>\u00a0cjd: hi, I think I wanted to discuss the opportunity to throw an exception instead of using the temp directory for the permanent dir location but I'll send a mail about this later on.  \n15:21\u00a0<vmassol>\u00a0also  \n15:21\u00a0<vmassol>\u00a0I've reverted some of your changes in the messages generated  \n15:21\u00a0<vmassol>\u00a0it seems you had removed printing the location of the tmp dir  \n15:21\u00a0<vmassol>\u00a0I'm not sure why since it is important info  \n15:21\u00a0<vmassol>\u00a0so I've added it back  \n15:22\u00a0<vmassol>\u00a0it seems to me you rmoeved it to make the test pass which wasn't optimal....  \n15:22\u00a0<vmassol>\u00a0so I've fixed the test to work instead....  \n15:22\u00a0<@cjd>\u00a0I removed it because what it says it's not provbly true at the time.  \n15:22\u00a0<vmassol>\u00a0I don't see how it cannot be true  \n15:23\u00a0<vmassol>\u00a0we set the permanent dir  \n15:23\u00a0<@cjd>\u00a0Actually \"can't find permanent dir, attempting to use temporary dir at [x]\"  \n15:23\u00a0<vmassol>\u00a0and we set it with the value we get  \n15:23\u00a0<@cjd>\u00a0would be more correct  \n15:23\u00a0<@cjd>\u00a0but if that temporary dir can't be found then it will fail over once again  \n15:23\u00a0<vmassol>\u00a0isn't that what we do?  \n15:23\u00a0<@cjd>\u00a0looking  \n15:24\u00a0<vmassol>\u00a0indeed doens't look good  \n15:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.logger.warn(\"No permanent directory configured. Using temporary directory [{}].\",  \n15:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0DEFAULT\\_TMP\\_DIRECTORY);  \n15:24\u00a0<vmassol>\u00a0it should use:  \n15:24\u00a0<vmassol>\u00a0it should use the result from the call \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.permanentDirectory = this.initializeDirectory(locations, false);  \n15:25\u00a0<vmassol>\u00a0the code is a bit clonky\u2026. would need soem cleanup  \n15:25\u00a0<vmassol>\u00a0:)  \n15:25\u00a0<vmassol>\u00a0but no time right now  \n15:25\u00a0<vmassol>\u00a0anyway I'm back on my work on windows7  \n15:26\u00a0<@cjd>\u00a0the line above is not strictly true  \n15:26\u00a0<@cjd>\u00a0anyway if the tests pass and it hasn't broken anything then it's not a big deal IMO  \n15:46\u00a0<@cjd>\u00a0vmassol: as per our agreement, I'm branching now and asking on the list if anyone needs to commit against that branch, I gather you're going to need to do some commits for win7 support?  \n15:47\u00a0<vmassol>\u00a0yep, just replied  \n15:54\u00a0<+sburjan`>\u00a0guys, what version of Selenium 2 do we use ?  \n15:54\u00a0<+sburjan`>\u00a0I can't find it in the pom file  \n15:55\u00a0<+sburjan`>\u00a0I am looking in https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-test/pom.xml  \n15:55\u00a0<vmassol>\u00a0platform test I think  \n15:56\u00a0<vmassol>\u00a0actually top level pom  \n15:56\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0<selenium.version>2.21.0</selenium.version>  \n15:57\u00a0<+sburjan`>\u00a0I have issues starting the IE9 build because of some annoying idiotic error  \n15:57\u00a0<+sburjan`>\u00a0I managed to fix this on IE9 (local VM) .. but doesn't want to work on the Jenkins agent  \n16:03\u00a0<@cjd>\u00a0wow no open issues, all issues have documentation, wonder if I really woke up this morning  \n16:35\u00a0<tmortagne>\u00a0has quit  \n16:56\u00a0<sdumitriu>\u00a0has quit  \n17:01\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:13\u00a0<@cjd>\u00a0sburjan`: just to confirm I should create a job for IE8 tests for the 4.1.x stable branch?  \n17:13\u00a0<@cjd>\u00a0IE9 looks like it's still a big experimental, correct?  \n17:13\u00a0<@cjd>\u00a0s/big/bit/  \n17:27\u00a0<pgmjsd>\u00a0has quit  \n17:29\u00a0<CIA-117>\u00a0Andreas Jonsson\u000f master\u000f \\* rf85298a\u000f https://github.com/xwiki/xwiki-platform/commit/f85298a117e2f48ac9198e3be8d93bd5519f14db \u000f/ xwiki-platform-core/xwiki-platform-search/xwiki-platform-search-lucene/src/main/java/com/xpn/xwiki/plugin/lucene/IndexUpdater.java :\u000f XWIKI-7753: Added missing event to lucene index updater event listener. - http://git.io/H6CXpQ  \n17:31\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:37\u00a0<jamie\\_\\_wiki>\u00a0has joined #xwiki  \n17:39\u00a0<+sburjan`>\u00a0Hello. Is there any plan to update to selenium 2.22 ? There is an issue and the selenium guys told me that 2.22 gives a petter errorr message which could help me debug.  \n17:39\u00a0<ssavi>\u00a0has joined #xwiki  \n17:39\u00a0<+sburjan`>\u00a0\\*better  \n17:40\u00a0<CIA-117>\u00a0Andreas Jonsson\u000f stable-4.0.x\u000f \\* r573370c\u000f https://github.com/xwiki/xwiki-platform/commit/573370cb9937cc4f5d58a8914027f0151546d167 \u000f/ xwiki-platform-core/xwiki-platform-search/xwiki-platform-search-lucene/src/main/java/com/xpn/xwiki/plugin/lucene/IndexUpdater.java :\u000f XWIKI-7753: Added missing event to lucene index updater event listener. - http://git.io/\\_5QxhA  \n17:40\u00a0<+sburjan`>\u00a0FYI: the issue is related to IE9 which seems it cannot be launched by the agent due to some stupid IE security setting  \n17:43\u00a0<CIA-117>\u00a0Andreas Jonsson\u000f stable-3.5.x\u000f \\* r00c1383\u000f https://github.com/xwiki/xwiki-platform/commit/00c13837d549bf2465af9050fcc59cd2b5ed6814 \u000f/ xwiki-platform-core/xwiki-platform-search/xwiki-platform-search-lucene/src/main/java/com/xpn/xwiki/plugin/lucene/IndexUpdater.java :\u000f XWIKI-7753: Added missing event to lucene index updater event listener. - http://git.io/ba8bUQ  \n17:46\u00a0<CIA-117>\u00a0Andreas Jonsson\u000f stable-4.1.x\u000f \\* r6966da7\u000f https://github.com/xwiki/xwiki-platform/commit/6966da7aea67efa7a47e64d949390ed0a2db3f68 \u000f/ xwiki-platform-core/xwiki-platform-search/xwiki-platform-search-lucene/src/main/java/com/xpn/xwiki/plugin/lucene/IndexUpdater.java :\u000f XWIKI-7753: Added missing event to lucene index updater event listener. - http://git.io/R3n2GA  \n17:49\u00a0<CIA-117>\u00a0Caleb James DeLisle\u000f master\u000f \\* rcf6f6e1\u000f https://github.com/xwiki/xwiki-commons/commit/cf6f6e183f0c16f2320bfe546fe3a8da6a2ff859 \u000f/ (61 files in 61 dirs):\u000f [maven-release-plugin] prepare release stable-4.1.x - http://git.io/lvtXAQ  \n17:51\u00a0<CIA-117>\u00a0Caleb James DeLisle\u000f master\u000f \\* r561cc5a\u000f https://github.com/xwiki/xwiki-commons/commit/561cc5a6e951b351451d6714743812bd1c83f0ba \u000f/ pom.xml :\u000f [branch] Updating inter-project dependencies on master - http://git.io/Da8Zjg  \n18:00\u00a0<jvdrean>\u00a0has quit  \n18:00\u00a0<jvdrean>\u00a0has joined #xwiki  \n18:02\u00a0<CIA-117>\u00a0Caleb James DeLisle\u000f master\u000f \\* r56fb378\u000f https://github.com/xwiki/xwiki-rendering/commit/56fb3788173a1ea9b065efc9e6dd4e87432d4038 \u000f/ (43 files in 43 dirs):\u000f [maven-release-plugin] prepare release stable-4.1.x - http://git.io/CniJIA  \n18:10\u00a0<CIA-117>\u00a0Caleb James DeLisle\u000f feature-store-attachments-newstore\u000f \\* r5178fee\u000f https://github.com/xwiki/xwiki-platform/commit/5178fee854fcdbed94dffefa5da7a7cc262751cc \u000f/ xwiki-platform-core/xwiki-platform-store/xwiki-platform-store-filesystem-attachments/src/test/java/org/xwiki/store/legacy/store/internal/AbstractFilesystemAttachmentStoreTest.java :\u000f removed file, missed in last commit. - http://git.io/jQTm2w  \n18:10\u00a0<CIA-117>\u00a0Caleb James DeLisle\u000f master\u000f \\* rb0be057\u000f https://github.com/xwiki/xwiki-platform/commit/b0be057e741eead5af4d01943eaa262508bbc5b3 \u000f/ (211 files in 211 dirs):\u000f [maven-release-plugin] prepare release stable-4.1.x - http://git.io/e6eroA  \n18:12\u00a0<CIA-117>\u00a0Caleb James DeLisle\u000f master\u000f \\* ra362106\u000f https://github.com/xwiki/xwiki-enterprise/commit/a362106e446816aa16cbef7400f2c195f662bc01 \u000f/ (47 files in 47 dirs):\u000f [maven-release-plugin] prepare release stable-4.1.x - http://git.io/8ysRYA  \n18:12\u00a0<jamie\\_\\_wiki>\u00a0has quit  \n18:15\u00a0<CIA-117>\u00a0Caleb James DeLisle\u000f master\u000f \\* r0d7d2aa\u000f https://github.com/xwiki/xwiki-manager/commit/0d7d2aae43bc027e3dec54d3a3df51664b642978 \u000f/ (16 files in 16 dirs):\u000f [maven-release-plugin] prepare release stable-4.1.x - http://git.io/JfhMFg  \n18:23\u00a0<lucaa>\u00a0has quit  \n18:23\u00a0<mflorea>\u00a0has quit  \n18:29\u00a0<jvdrean>\u00a0has quit  \n18:29\u00a0<tmortagne>\u00a0has quit  \n18:31\u00a0<+sburjan`>\u00a0should I create a issue about this ?  \n18:33\u00a0<lucaa>\u00a0has joined #xwiki  \n18:33\u00a0<mflorea>\u00a0has joined #xwiki  \n18:44\u00a0<vmassol>\u00a0cjd: question, why do you initialize the permanent dir in getPermanentDirectory() instead of in an intiialize() method?  \n18:45\u00a0<vmassol>\u00a0actually maybe it wasn't you ;)  \n18:45\u00a0<vmassol>\u00a0yep I see i've done it like this initially, you just expanded on it  \n18:45\u00a0<@cjd>\u00a0there is a chicken-and-egg issue with a dependency, can't remember if it was with permanent or temp directory.  \n18:45\u00a0<vmassol>\u00a0so let me change my question  \n18:46\u00a0<vmassol>\u00a0do you think (as I do) that it's a good idea to initilize it in an initialize() method \u00a0(Initializable)  \n18:46\u00a0<vmassol>\u00a0?  \n18:46\u00a0<jamie\\_\\_wiki>\u00a0has joined #xwiki  \n18:46\u00a0<@cjd>\u00a0yes, +1 for that  \n18:46\u00a0<jamie\\_\\_wiki>\u00a0cjd: \u00a0I modified the REST test, similar to the webdav test to add attachments with filenames requiring url encoding. \u00a0This produces the http 500 error problem in XWIKI-7874.  \n18:47\u00a0<@cjd>\u00a0the problem is that environment depends on configuration and configuration depends on environment  \n18:47\u00a0<vmassol>\u00a0cjd: what does this mean \" \u00a0\u00a0\u00a0/\\* Rather than overriding this, it is safer to override getPermanentDirectoryName() \\*/\" ?  \n18:47\u00a0<@cjd>\u00a0that's the chicken-and-egg issue  \n18:47\u00a0<@cjd>\u00a0so it's solved by hoping the getPermanentDir is not called until after configuration is established  \n18:47\u00a0<@cjd>\u00a0which is indeed brittle but that's how it was and I had no better idea at the time (still don't)  \n18:48\u00a0<@cjd>\u00a0XWIKI-7874  \n18:48\u00a0<@cjd>\u00a0hmm  \n18:49\u00a0<vmassol>\u00a0cjd: the chicken and egg is solved by this:  \n18:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0/\\*\\*  \n18:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\* Environment configuration data. We load it lazily to avoid a cyclic runtime dependency between the Environment  \n18:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\* implementation (which requires a Configuration Source) and the Configuration Source implementation (which  \n18:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\* requires an Environment).  \n18:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \n18:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0@Inject  \n18:49\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0private Provider<EnvironmentConfiguration> configurationProvider;  \n18:49\u00a0<jamie\\_\\_wiki>\u00a0The test I modified before (webdav) was the wrong one, it was the rest test that I was having an issue with. (the pic-[rw].jpg problem with brackets not being url encoded)  \n18:50\u00a0<@cjd>\u00a0yes, which means if you call that in the initialize() function, the universe will explode (If I'm not mistaken)  \n18:50\u00a0<vmassol>\u00a0why?  \n18:50\u00a0<vmassol>\u00a0let me think ;)  \n18:50\u00a0<jamie\\_\\_wiki>\u00a0I'll go back and fix up the webdav test as well though now I can run the tests.  \n18:51\u00a0<@cjd>\u00a0jamie\\_\\_wiki: thanks, do you have the pull request link right there?  \n18:51\u00a0<jamie\\_\\_wiki>\u00a0yup it's https://github.com/xwiki/xwiki-enterprise/pull/25  \n18:52\u00a0<vmassol>\u00a0cjd: indeed it should lead to a cyclic issue, I'll document it  \n18:52\u00a0<vmassol>\u00a0cjd: I still don't get this comment: \"/\\* Rather than overriding this, it is safer to override getPermanentDirectoryName() \\*/\"  \n18:53\u00a0<jamie\\_\\_wiki>\u00a0The fix required in DomainObjectFactory is likely the same as what I did in the rest test - encode the filename first, then change UriBuilder.build() to buildFromEncoded() so it doesn't double encode the % in the encoded filename string.  \n18:57\u00a0<jvdrean>\u00a0has joined #xwiki  \n18:58\u00a0<Denis1>\u00a0has joined #xwiki  \n18:58\u00a0<Denis>\u00a0has quit  \n19:00\u00a0<@cjd>\u00a0vmassol: if you override getPermanentDirectory then return \"new File(some.location);\" it is not tested and that location might not exist or might not be accessable or it might point to a file  \n19:00\u00a0<@cjd>\u00a0if you override getPermanentDirectoryName() then all of those cases are checked and it will fail over.  \n19:01\u00a0<vmassol>\u00a0cjd: might be good to explain that more in the javadoc\u2026. (it's not even in javadoc now ;))  \n19:01\u00a0<@cjd>\u00a0good point  \n19:02\u00a0<@cjd>\u00a0If I commit now will it break you?  \n19:03\u00a0<vmassol>\u00a0not anymore :)  \n19:03\u00a0<CIA-117>\u00a0Vincent Massol\u000f master\u000f \\* r3a907af\u000f https://github.com/xwiki/xwiki-commons/commit/3a907af3d13710eed48139bc32aa9470ab536874 \u000f/ xwiki-commons-core/xwiki-commons-environment/xwiki-commons-environment-common/src/main/java/org/xwiki/environment/internal/AbstractEnvironment.java :\u000f [Misc] Documented why we initialize the permanent directory in getPermanentDirectory - http://git.io/wdFAbA  \n19:04\u00a0<vmassol>\u00a0cjd: I'm going to add support for the xwiki.data.dir system property in there now. First I need to read and understand the code  \n19:05\u00a0<vmassol>\u00a0cjd: coudl you also document getPermanentDirectoryName?  \n19:05\u00a0<@cjd>\u00a0I see  \n19:05\u00a0<@cjd>\u00a0sure thing  \n19:05\u00a0<vmassol>\u00a0thanks  \n19:07\u00a0<@cjd>\u00a0another thing we need to think about is XWiki#getTempDir and XWiki#getWorkDir which should use Environment  \n19:07\u00a0<vmassol>\u00a0indeed  \n19:08\u00a0<vmassol>\u00a0are they used anymore?  \n19:08\u00a0<@cjd>\u00a0I'd need to use a find-grep to see  \n19:09\u00a0<vmassol>\u00a07 usages  \n19:09\u00a0<vmassol>\u00a0PDF and HTML export  \n19:10\u00a0<vmassol>\u00a0charting plugin  \n19:10\u00a0<vmassol>\u00a0graphviz plugin  \n19:10\u00a0<vmassol>\u00a0image plugin  \n19:10\u00a0<vmassol>\u00a0svg plugin  \n19:10\u00a0<vmassol>\u00a0(for getTempDirectory)  \n19:13\u00a0<abusenius>\u00a0has joined #xwiki  \n19:17\u00a0<vmassol>\u00a0cjd: is it normal that in servlet env we use \u00a0\u00a0\u00a0\u00a0private static final String DEFAULT\\_TMP\\_DIRECTORY = System.getProperty(\"java.io.tmpdir\"); ?  \n19:18\u00a0<vmassol>\u00a0ah no there's an override of getTemporaryDirectoryName  \n19:19\u00a0<vmassol>\u00a0I hope  \n19:20\u00a0<vmassol>\u00a0need to read the tests since it's just too complex to parse visually :)  \n19:20\u00a0<vmassol>\u00a0ok I see now  \n19:20\u00a0<vmassol>\u00a0it'll use DEFAULT\\_TMP\\_DIRECTORY only if the Servlet tmp dir is not set  \n19:21\u00a0<vmassol>\u00a0but in practice this won't happen  \n19:21\u00a0<vmassol>\u00a0we'll get a NPE instead  \n19:21\u00a0<vmassol>\u00a0:)  \n19:21\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return ((File) this.getServletContext().getAttribute(\"javax.servlet.context.tempdir\"))  \n19:21\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.getCanonicalPath();  \n19:21\u00a0<vmassol>\u00a0will throw a NPE  \n19:22\u00a0<vmassol>\u00a0got to go, bbl  \n19:37\u00a0<lucaa>\u00a0has quit  \n20:06\u00a0<CIA-117>\u00a0Caleb James DeLisle\u000f master\u000f \\* r9a4bb0d\u000f https://github.com/xwiki/xwiki-commons/commit/9a4bb0dfa47f7e0a3edbab8b0861b24b9dd73c8c \u000f/ xwiki-commons-core/xwiki-commons-environment/xwiki-commons-environment-common/src/main/java/org/xwiki/environment/internal/AbstractEnvironment.java :\u000f [misc] Add better documentation for AbstractEnvironment. - http://git.io/-VZ9fA  \n20:57\u00a0<CIA-117>\u00a0Andreas Jonsson\u000f master\u000f \\* r5dc4d17\u000f https://github.com/xwiki/xwiki-platform/commit/5dc4d17b3ad2f09327cc32d67dfcd3fc377ec12d \u000f/ (2 files in 2 dirs):\u000f XWIKI-7845: removed explicit check for edit rights on macro definition document during wiki macro registration. - http://git.io/kQgHWw  \n21:47\u00a0<vmassol>\u00a0has quit  \n22:24\u00a0<jvdrean>\u00a0has quit  \n22:25\u00a0<jvdrean>\u00a0has joined #xwiki  \n22:29\u00a0<jvdrean>\u00a0has quit  \n22:55\u00a0<ssavi>\u00a0has quit  \n23:03\u00a0<mflorea>\u00a0has quit  \n23:20\u00a0<rrodriguez>\u00a0has joined #xwiki  \n23:30\u00a0<rrodriguez\\_>\u00a0has joined #xwiki  \n23:30\u00a0<ssavi>\u00a0has joined #xwiki  \n23:32\u00a0<rrodriguez>\u00a0has quit  \n23:32\u00a0<rrodriguez\\_>\u00a0is now known as <rrodriguez>  \n23:45\u00a0<abusenius>\u00a0has quit  \n23:48\u00a0<jvdrean>\u00a0has joined #xwiki  \n\n"}