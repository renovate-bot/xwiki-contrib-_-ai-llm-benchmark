{"id": "dev:IRC.xwikiArchive20080826", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20080826", "title": "IRC Archive for channel #xwiki on 26 August 2008 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nxwikibot - (26/08/2008 00:05): 1. test was modified by XWiki.st (deleted document) - http://playground.xwiki.org/xwiki/bin/view/1/+test  \nxwikibot - (26/08/2008 00:06): 1.yyy was modified by XWiki.st (deleted document) - http://playground.xwiki.org/xwiki/bin/view/1/yyy  \nxwikibot - (26/08/2008 07:06): XWiki.JenniferZhang was modified by XWiki.JenniferZhang (Created user) - http://www.xwiki.org/xwiki/bin/view/XWiki/JenniferZhang  \nvmassol - (26/08/2008 10:15): mflorea: I think I'll move the EventsRenderer into main sources, that should solve the problem for now, wdyt?  \nmflorea - (26/08/2008 10:27): vmassol: yes. Another option would be to drop this dependency. I added so that you can see the events during the conversion. If you think you won't needed that much then I can remove the code that uses the EventsRenderer.  \nvmassol - (26/08/2008 10:28): mflorea: it is displayed always? I'm trying to build the whole thing to see how the wysiwyg editor looks  \nvmassol - (26/08/2008 10:28): (I think it's useful but only for debugging)  \nmflorea - (26/08/2008 10:28): EventsRenderer is uses only for debugging the html 2 xwiki conversion through the wysiwyg  \nvmassol - (26/08/2008 10:29): mflorea: do I have to do anything to activate the wysiwyg editor and the debugging?  \nmflorea - (26/08/2008 10:29): no, it's not displayed.  \nvmassol - (26/08/2008 10:30): mflorea: is the wysiwyg editor displayed all the time or do I have to set some config param in xwiki.cfg for ex?  \nmflorea - (26/08/2008 10:30): the wysiwyg is enabled by default in xwiki.cfg. All you have to do is to create a page, set its syntax id to xwiki/2.0, save & continue, and the link to the new wysiwyg should apear in the right panel  \nvmassol - (26/08/2008 10:30): ok  \nvmassol - (26/08/2008 10:31): and for the debugging how do I enable the display of the events?  \nmflorea - (26/08/2008 10:32): :( well, right now you can't. Give me 10 min. I'll add a debug parameter to switch between debug and normal mode  \nvmassol - (26/08/2008 10:33): ok thanks this could be useful I think for testing  \nvmassol - (26/08/2008 10:34): ok it's building fine now  \nvmassol - (26/08/2008 10:34): I'll commit my change  \nmflorea - (26/08/2008 10:34): yes, doing right now.  \nmflorea - (26/08/2008 10:34): ok, I'll update  \nmflorea - (26/08/2008 10:36): vmassol: one thing. If you manage to build xe and see the editor, look for the toolbar features that you know they are not yet supported by the rendering. I can disable those. I think indent and outdent are in this category  \nvmassol - (26/08/2008 10:36): yes there's no indent/outdent right now  \nvmassol - (26/08/2008 10:36): ok I'll try them  \nmflorea - (26/08/2008 10:37): thanks!  \nvmassol - (26/08/2008 10:42): mflorea: the enterprise build doesn't work for me  \nmflorea - (26/08/2008 10:42): why? :(  \nvmassol - (26/08/2008 10:42): becuase of missing: ) com.xpn.xwiki.platform.plugins:xwiki-plugin-wysiwyg:jar:0.1-SNAPSHOT  \nvmassol - (26/08/2008 10:42): btw there should be no 0.1-SNAPSHOT we should start at 1.0-SNAPSHOT  \nvmassol - (26/08/2008 10:43): ah svn up helped I think  \nmflorea - (26/08/2008 10:43): this plugin is build when you build platform/plugins. If you build only the platform/web then you have to build it  \nvmassol - (26/08/2008 10:44): I built everything but I didn't svn up enterprise  \nvmassol - (26/08/2008 10:44): its building now  \nvmassol - (26/08/2008 10:44): do you still have 0.1-SNAPSHOT?  \nvmassol - (26/08/2008 10:44): if so could you move it to 1.0-SNAPSHOT?  \nmflorea - (26/08/2008 10:45): yes, changing now  \nvmassol - (26/08/2008 10:48): mflorea: ah so the L&F is not the one on the design page. We'll need to put that in the release notes so that people don't expect this to be the final look  \nvmassol - (26/08/2008 10:49): mflorea: switching from \"new wysiwyg\" to wiki looses the style changes  \nvmassol - (26/08/2008 10:50): ah no the styles are not saved at all  \nvmassol - (26/08/2008 10:50): even when saving  \nmflorea - (26/08/2008 10:50): vmassol: yes. I focused on the functionality. Implementing the L&F shouldn't be that difficult  \nmflorea - (26/08/2008 10:50): but the rendering supports styling?  \nvmassol - (26/08/2008 10:50): bold  \nvmassol - (26/08/2008 10:50): I've tried only bold  \nmflorea - (26/08/2008 10:51): let me try  \nvmassol - (26/08/2008 10:51): mflorea: first it removed all bold style  \nvmassol - (26/08/2008 10:51): then now it only adds one star  \nvmassol - (26/08/2008 10:52): mflorea: here's a suggestion  \nvmassol - (26/08/2008 10:52): remove the new wysiwyg tab in edit view  \nvmassol - (26/08/2008 10:53): and replace the old wysiwyg editor with the new one whenever the page is in syntax 2.0  \nvmassol - (26/08/2008 10:53): since the old wysiwyg doesn't support the 2.0 syntax it shold never be displayed anyway  \nmflorea - (26/08/2008 10:53): ok, I can do that  \nvmassol - (26/08/2008 10:53): it needs to be done also for the edit menu at the top left  \nmflorea - (26/08/2008 10:54): re:bold, same here :(. let me enable debugging so we can see more  \nmflorea - (26/08/2008 10:54): yes, right now the new wysiwyg doesn't appear there  \nvmassol - (26/08/2008 10:55): mflorea: re the features not supported you can remove Font and Font Size  \nvmassol - (26/08/2008 10:55): same for color  \nvmassol - (26/08/2008 10:55): same for background color  \nvmassol - (26/08/2008 10:55): same for alignments  \nvmassol - (26/08/2008 10:56): that should be it  \nvmassol - (26/08/2008 10:56): they're all styles  \nvmassol - (26/08/2008 10:56): which is not supported by the XHTML parser from wikimodel yet  \nmflorea - (26/08/2008 10:57): so you think I should remove them or disable them?  \nmflorea - (26/08/2008 10:57): disabled=grayed  \nvmassol - (26/08/2008 10:57): I think not visible is better  \nvmassol - (26/08/2008 10:58): grayed means they can be ungreyed  \nmflorea - (26/08/2008 10:58): ok  \nvmassol - (26/08/2008 10:58): italic is not working at all  \nvmassol - (26/08/2008 11:25): mflorea: let me know when I can retest  \nxwikibot - (26/08/2008 11:27): XWiki.MohamedSaeed was modified by XWiki.MohamedSaeed (Created user) - http://www.xwiki.org/xwiki/bin/view/XWiki/MohamedSaeed  \nmflorea - (26/08/2008 11:34): vmassol: you can debug the editor now by adding &debug to edit URL's query string. In the mean time I'll change the templates in order to hide the old wysiwyg if the syntax is xwiki/2.0.  \nmflorea - (26/08/2008 11:35): I'll also add the new wysiwyg in the upper menu  \nvmassol - (26/08/2008 11:36): mflorea: ok does the bold/italic work now?  \nvmassol - (26/08/2008 11:36): mflorea: nice to use the url  \nmflorea - (26/08/2008 11:37): no, and the problem might be caused by the fact the the rich text area uses styles for making text bold and italic  \nvmassol - (26/08/2008 11:37): mflorea: you mean you've never tested the bold feature? :)  \nvmassol - (26/08/2008 11:38): or said differently you've never tested the integration of the wysiwyg editor and the new rendering?  \nvmassol - (26/08/2008 11:38): if so we cannot release it  \nvmassol - (26/08/2008 11:38): and we need to remove the wysiwyg  \nvmassol - (26/08/2008 11:38): since it won't work   \nvmassol - (26/08/2008 11:38): (I hope not)  \nmflorea - (26/08/2008 11:39): hmm, I do remember it worked once. This is not the first time I run the wysiwyg with the new rendering and it worked. I remember Guillaume tested it also  \nvmassol - (26/08/2008 11:40): ok so that's only some momentary glitch I hope  \nmflorea - (26/08/2008 11:40): I hope too  \nmflorea - (26/08/2008 11:42): but the question is: is the new rendering able to interpret <span style=\"font-weight: bold;\">foo</span> as \\*\\*foo\\*\\*. If not, I believe I can force the richtextarea to out <b> tags instead. But we should go with style in the future  \nvmassol - (26/08/2008 11:45): mflorea: no  \nvmassol - (26/08/2008 11:45): you need to use <strong>  \nvmassol - (26/08/2008 11:45): same for italics, underscore, striked out, etc  \nvmassol - (26/08/2008 11:46): for italics it's <em>  \nmflorea - (26/08/2008 11:46): :( this will happen only if HTMLCleaner know to convert <b> to strong. I don't controll the tags used by the richtextarea. At most I can tell so use tags instead of css  \nvmassol - (26/08/2008 11:48): yes the HTMLCleaner should do that (don't know if it does it right now)  \nvmassol - (26/08/2008 11:48): let me check wikimodel for now to see if it supports <b> too  \nvmassol - (26/08/2008 11:50): mflorea: yes <b> and <strong> are both recognized by the wikimodel XHTML parser  \nmflorea - (26/08/2008 11:50): great  \nvmassol - (26/08/2008 11:50): for underline you can use <u> or <ins>  \nmflorea - (26/08/2008 11:50): I'm forcing the richtextarea to use tags  \nvmassol - (26/08/2008 11:51): striekd out is <del>, <s> or <strike>  \nvmassol - (26/08/2008 11:51): ok  \nvmassol - (26/08/2008 12:28): mflorea: can you commit it so that I can test? is it working fine?  \nmflorea - (26/08/2008 12:30): vmassol: not yet. I have to debug a bit because I don't get the expected result. I'll ping you in a few minutes.  \nvmassol - (26/08/2008 12:30): ok  \nvmassol - (26/08/2008 13:28): daning: what's the best way in htmlcleaner to replace <b> by <strong>, etc?  \ndaning - (26/08/2008 13:31): vmassol: You mean replace all of them?  \nvmassol - (26/08/2008 13:31): yes we need to generate XHTML  \nvmassol - (26/08/2008 13:31): and <b> isn't XHTML  \ndaning - (26/08/2008 13:32): vmassol: Now I use jdom to do this. I think w3c dom can do this too.  \nvmassol - (26/08/2008 13:32): daning: so there's no way to tell HTMLCleaner to replace a tag by another?  \ndaning - (26/08/2008 13:32): vmassol: no. no way now.  \nvmassol - (26/08/2008 13:33): daning: hmmm  \nvmassol - (26/08/2008 13:33): not good  \nvmassol - (26/08/2008 13:33): a pity I couldn't find any good HTML to XHTML tool  \ndaning - (26/08/2008 13:33): vmassol: Yes. If it can do this. I will not use any filter to clean html.  \ndaning - (26/08/2008 13:34): vmassol: see this http://sourceforge.net/forum/forum.php?thread\\_id=1935192&forum\\_id=637245  \nvmassol - (26/08/2008 13:39): daning: just created this post: http://sourceforge.net/forum/forum.php?thread\\_id=2186210&forum\\_id=637245  \nvmassol - (26/08/2008 13:39): daning: I'm adding a cleaningfilter for this now  \ndaning - (26/08/2008 13:40): vmassol: ok.  \nvmassol - (26/08/2008 13:49): daning: have you found how to replace a tag easily using TagNode?  \nludobot - (26/08/2008 13:49): vmassol: daning: have you found how to replace a tag easily using TagNode?  \nvmassol - (26/08/2008 13:50): ludobot: stop repeating my words! :)  \nludobot - (26/08/2008 13:50): vmassol: ludobot: stop repeating my words! :)  \ndaning - (26/08/2008 13:50): vmassol: No. TagNode don't provide any method like setName() in TagNode.  \nludobot - (26/08/2008 13:50): daning: vmassol: No. TagNode don't provide any method like setName() in TagNode.  \nvmassol - (26/08/2008 13:51): daning: so I guess we have to remove from teh parent and add a child  \nvmassol - (26/08/2008 13:52): but there doesn't seem to be a way to say where to add the child exactly... hmmm  \ndaning - (26/08/2008 13:52): vmassol: I thought that way before, but on pb in this way, you can't control the position of the new child.  \nvmassol - (26/08/2008 13:53): hmmm this library is really not stable enough....  \ndaning - (26/08/2008 13:54): vmassol: compare to jtidy, which is better?  \nvmassol - (26/08/2008 13:55): jtidy is better definitely  \nvmassol - (26/08/2008 13:55): the problem is that it's dead but maybe there are ways to extend it if we need to make changes in it  \nvmassol - (26/08/2008 13:56): I'll check it out now, the good thing is that we now have an XWiki interface (HTMLCleaner) so the implementation isn't as important as before  \ndaning - (26/08/2008 13:56): vmassol: I think if we want to use the \"swap tag\" feature, we will need to extend htmlcleaner or jtidy for now.  \nvmassol - (26/08/2008 13:57): we don't have to extend htmlcleaner we can simply use JDOM or standard DOM too int eh CleaningFilter  \nvmassol - (26/08/2008 13:58): but yes I'm wondering if we shouldn't use jtidy while waiting for htmlcleaner to be better  \nvmassol - (26/08/2008 13:58): mflorea: I think you've used JTidy. Any input on this?  \nmflorea - (26/08/2008 14:00): hmm, I don't know for sure if jtidy replaces <b> with strong. I know here is a configuration option to force XHTML output  \nmflorea - (26/08/2008 14:00): I can test  \nvmassol - (26/08/2008 14:03): my worry with jtidy is that the number of bugs in its tracker is growing and they won't get fixed unless someone takes over  \nmflorea - (26/08/2008 14:04): yes :(  \nmflorea - (26/08/2008 14:13): vmassol: see http://jtidy.sourceforge.net/apidocs/org/w3c/tidy/Tidy.html#setLogicalEmphasis(boolean)  \nmflorea - (26/08/2008 14:13): and http://jtidy.sourceforge.net/apidocs/org/w3c/tidy/Tidy.html#setXHTML(boolean)  \nvmassol - (26/08/2008 14:14): yep  \nmflorea - (26/08/2008 14:14): but I'm not sure they work 100% :|  \nvmassol - (26/08/2008 14:14): thanks  \nvmassol - (26/08/2008 14:14): I'm still not sure we want to use jtidy  \nvmassol - (26/08/2008 14:14): I'm hesitating  \nmflorea - (26/08/2008 14:14): me neither  \nvmassol - (26/08/2008 14:14): I think I may simply create some filters using w3c document  \nvmassol - (26/08/2008 14:25): mflorea: any luck with the wysiwyg editor?  \nvmassol - (26/08/2008 14:29): daning: btw you should use element.getChildren() and then check the tag name. You should use directly getElementByName(name).  \nmflorea - (26/08/2008 14:29): vmassol: It's killing me. I have the code, but I have to place it in the right place so it gets execute at the right time :) . And after some trial and error I found the right time is juat after the richtextarea is shown. But since I don't have a \"onload\" event, I'll force when the use starts to write. Hope this is my last try..  \nvmassol - (26/08/2008 14:29): ok... :)  \nvmassol - (26/08/2008 14:30): it used to work though so you must have had it right at some point :)  \ndaning - (26/08/2008 14:31): vmassol: You mean in htmlcleaner or in w3c dom?  \nvmassol - (26/08/2008 14:31): daning: in your office importer plugin   \nvmassol - (26/08/2008 14:31): (in the filters)  \nmflorea - (26/08/2008 14:37): vmassol: (while building) is the new rendering going to support conversion from XHTML to other wiki syntaxes (or maybe it does already). I'm asking because the syntax is combo has many entries. The wysiwyg is not bind to a specific syntax. Right now I'm passing the syntax id to the wysiwyg. The editor passes the syntax id over to the service making the conversion, service which loads the converter using the syntax id as a hint.  \nvmassol - (26/08/2008 14:38): mflorea: the new rendering supports any number of syntaxes  \nmflorea - (26/08/2008 14:38): but I guess they are not yet implemented  \nvmassol - (26/08/2008 14:38): we only need to have a renderer for the given syntax  \nvmassol - (26/08/2008 14:39): yep  \nmflorea - (26/08/2008 14:39): I see  \nvmassol - (26/08/2008 14:39): right now only the XWikiSyntaxRenderer is implemented  \nmflorea - (26/08/2008 14:39): right  \nvmassol - (26/08/2008 14:39): we do support parsing of different syntaxes already  \nvmassol - (26/08/2008 14:39): but for the rendering only the xwiki syntax is currently supported  \nmflorea - (26/08/2008 14:40): ok  \nvmassol - (26/08/2008 14:40): so we can convert from other syntaxes to the xwiki syntax for example  \nvmassol - (26/08/2008 14:40): but not the other way around right now ;)  \nmflorea - (26/08/2008 14:40): :) got it, thanks  \nvmassol - (26/08/2008 14:40): however it's quite easy to implement a new rendererer  \nvmassol - (26/08/2008 14:40): should take about 1 hour for a basic one  \nvmassol - (26/08/2008 14:41): (basic = works in 99% of cases)  \nmflorea - (26/08/2008 14:41): nice :)  \nmflorea - (26/08/2008 14:48): ok, now it works. I get some rendering exceptions, but I think I have to do an update on platform  \nmflorea - (26/08/2008 14:50): vmassol: you can update and retest  \nvmassol - (26/08/2008 14:50): ok will try, getting some lunch now and will try just after  \nmflorea - (26/08/2008 14:51): ok  \nasyd - (26/08/2008 15:20): it is possible to have links on the same page, using an anchor?  \nasyd - (26/08/2008 15:21): I don't think, but asking to be sure  \nvmassol - (26/08/2008 15:22): asyd: yes it's possible  \nvmassol - (26/08/2008 15:22): just use # in the link  \nasyd - (26/08/2008 15:22): ah!  \nvmassol - (26/08/2008 15:22): for example [label>#anchor]  \nasyd - (26/08/2008 15:23): and is there an anchor defined for each title (first level?)  \nvmassol - (26/08/2008 15:23): yes  \nvmassol - (26/08/2008 15:23): check the source you'll see an id starting with H  \nasyd - (26/08/2008 15:23): by the way, the XWikiSyntax page doesn't talk about this feature, you should mention it  \nasyd - (26/08/2008 15:23): ok, thanks  \nvmassol - (26/08/2008 15:23): asyd: yes it should be updated if ti's not mentioned  \nmflorea - (26/08/2008 15:31): vmassol: I'm commiting now the changes needed to make the new wysiwyg the default editor for any syntax other than xwiki/1.0.  \nvmassol - (26/08/2008 15:31): mflorea: ok good  \nvmassol - (26/08/2008 15:31): I'm doing a clean checkout now since I have modified stuff in my workspace  \nmflorea - (26/08/2008 15:31): ok  \nvmassol - (26/08/2008 15:45): mflorea: building now  \nasyd - (26/08/2008 15:45): (hmm e the # seem doesn't works here), old version of xwiki though  \nvmassol - (26/08/2008 15:53): asyd: it should, it's been there forever  \nvmassol - (26/08/2008 15:53): try prefixing with the document name  \nvmassol - (26/08/2008 15:54): [label>Space.Document#id]  \nasyd - (26/08/2008 15:54): ok  \nasyd - (26/08/2008 15:54): well I tried [OSpace.Document#anchor]  \nmflorea - (26/08/2008 15:54): vmassol: I'll removing the following plugins: align, indent, font and color because they are not yet supported by the rendering. Let's hope we'll have them by 1.6M2  \nvmassol - (26/08/2008 15:55): asyd: can you try it on playground.xwiki.org and give me page name?  \nasyd - (26/08/2008 15:55): ok  \nxwikibot - (26/08/2008 15:55): Design.NewUIProposal was modified by xwiki:XWiki.evalica (Added comment) - http://watch.xwiki.org/xwiki/bin/view/Design/NewUIProposal  \nasyd - (26/08/2008 16:00): vmassol: ah funny, that works only if the targetd page exists :)  \nvmassol - (26/08/2008 16:01): asyd: of course  \nvmassol - (26/08/2008 16:01): how can you link to something that doesn't exist? :)  \nasyd - (26/08/2008 16:01): by outputing href=\"http://....link#Anchor\" ? ;p  \nvmassol - (26/08/2008 16:01): hehe but that would be invalid  \nasyd - (26/08/2008 16:02): ok  \nvmassol - (26/08/2008 16:02): if you click on it it would be broken  \nvmassol - (26/08/2008 16:02): the ids are generated depending on the section content  \nvmassol - (26/08/2008 16:02): anyway it could have worked I guess but it doesn't \u00a0but that shouldn't be a pb right?  \nasyd - (26/08/2008 16:05): indeed  \nasyd - (26/08/2008 16:05): if you want I can update XWikiSyntax page  \nvmassol - (26/08/2008 16:07): asyd: would be great but I don't think you can but if you can send me a patch that would be awesome :)  \nvmassol - (26/08/2008 16:07): asyd: try it you'll see what I mean   \nasyd - (26/08/2008 16:08): yeah I know, in fact my \"hidden\" question was \"give me persmissions to edit the page\" :)  \nvmassol - (26/08/2008 16:08): ah that won't help  \nasyd - (26/08/2008 16:08): ah ok  \nvmassol - (26/08/2008 16:08): check the page content you'll see what I mean  \nvmassol - (26/08/2008 16:09): http://platform.xwiki.org/xwiki/bin/view/Main/XWikiSyntax?viewer=code&  \nasyd - (26/08/2008 16:09): ah, indeed  \nvmassol - (26/08/2008 16:09): so what you have to modify is http://svn.xwiki.org/svnroot/xwiki/enterprise/trunk/wiki/src/main/resources/XWiki/XWikiSyntax.xml  \nasyd - (26/08/2008 16:09): ok  \nasyd - (26/08/2008 16:10): cofefe time  \nmflorea - (26/08/2008 16:19): vmassol: I'm commiting the changes to remove the unsupported plugins.  \nmflorea - (26/08/2008 16:19): (in fact, I'm loading only the supported ones)  \nvmassol - (26/08/2008 16:19): ok starting XE now  \nvmassol - (26/08/2008 16:23): mflorea: so far so good  \nvmassol - (26/08/2008 16:24): mflorea: one bug found  \nvmassol - (26/08/2008 16:25): enter this in wiki mode: ~~this~~ ,,is ,,\\*\\*bold\\*\\*.  \nvmassol - (26/08/2008 16:25): now go in wysiwyg mode, select the whole thing and click on bold  \nvmassol - (26/08/2008 16:25): then save  \nvmassol - (26/08/2008 16:25): the bold is not taken into account  \nvmassol - (26/08/2008 16:26): mflorea: indent outdent should be kept for lists  \nvmassol - (26/08/2008 16:26): mflorea: lists are not working but it could be because of the rendering  \nvmassol - (26/08/2008 16:26): let me check the debug flag  \nvmassol - (26/08/2008 16:28): mflorea: how does it work?  \nvmassol - (26/08/2008 16:28): I tried adding &debug  \nvmassol - (26/08/2008 16:31): ok got it working now  \nvmassol - (26/08/2008 16:31): (the debug flag)  \nmflorea - (26/08/2008 16:32): vmassol: sorry, I was out for a moment  \nvmassol - (26/08/2008 16:33): mflorea: one thing that is a pain is that the debug text areas keep refreshing  \nvmassol - (26/08/2008 16:34): and thus if you're scrolling they keep putting you at the top of the text area  \nvmassol - (26/08/2008 16:34): every few seconds  \nvmassol - (26/08/2008 16:34): I'll copy paste the content but would be nice to fix this :)  \nasyd - (26/08/2008 16:34): vmassol: sorry to disturb you, I have a strange oproblem when I drag my mouse over the button edit, there is no context menu with \"edit class\" etc..  \nmflorea - (26/08/2008 16:34): yes.. but I have to refresh to show the latest changes  \nvmassol - (26/08/2008 16:35): yes but could you do this without changing the cursor location  \nvmassol - (26/08/2008 16:35): ?  \nmflorea - (26/08/2008 16:35): I'll refresh only if the content is different  \nvmassol - (26/08/2008 16:35): ok  \nvmassol - (26/08/2008 16:35): asyd: yes I got that too. Do a browser refresh and it'll work  \nasyd - (26/08/2008 16:36): hmm, ok  \nvmassol - (26/08/2008 16:36): I don't know what's causing this  \nvmassol - (26/08/2008 16:36): you need a full refresh  \nasyd - (26/08/2008 16:36): I have this problem from this morning, on two differnt browser :/  \nasyd - (26/08/2008 16:36): I see  \nvmassol - (26/08/2008 16:36): strange  \nasyd - (26/08/2008 16:37): indeed :/  \nasyd - (26/08/2008 16:38): I'm not able to find the word object in the source page, I suspect someone broke something :/  \nvmassol - (26/08/2008 16:38): mflorea: the HTML outputted for lists is not correct  \nvmassol - (26/08/2008 16:38): it's not valid XHTML  \nmflorea - (26/08/2008 16:38): let me see  \nvmassol - (26/08/2008 16:38): it generates <ul><li>...</li>ul>....  \nvmassol - (26/08/2008 16:38): but it should generate= <ul><li><ul>...  \nvmassol - (26/08/2008 16:39): (or rather <ul><li>...<ul>...)  \nvmassol - (26/08/2008 16:39): and our HTMLCleaner doesn't know how to clean this yet  \nmflorea - (26/08/2008 16:42): :| it doesn't happen in my case. strange  \nasyd - (26/08/2008 16:42): hmm I probably have a problem with my browser, got the same probleme with 2 differents others wiki (including playground.xwiki..)  \nasyd - (26/08/2008 16:43): can you give an example of url ? xwiki/bin/edit/Page?<something>=classes ?  \nvmassol - (26/08/2008 16:44): mflorea: you need to have a nested list in a list  \nmflorea - (26/08/2008 16:44): let me try  \nvmassol - (26/08/2008 16:45): asyd: http://localhost:8080/xwiki/bin/edit/Test/VMA?editor=class  \nasyd - (26/08/2008 16:45): thanks  \nasyd - (26/08/2008 16:45): vmassol: just wondering, which browser do you use with your mac? ;p  \nvmassol - (26/08/2008 16:46): asyd: FF3  \nasyd - (26/08/2008 16:46): ok  \nninfo - (26/08/2008 16:51): Hello everyone ;)  \nsdumitriu - (26/08/2008 16:51): Hi ninfo  \nvmassol - (26/08/2008 16:51): sdumitriu: have you played with jdom before?  \nvmassol - (26/08/2008 16:51): or anyone else for that matter  \nninfo - (26/08/2008 16:52): any dev with some spare time? :)  \nsdumitriu - (26/08/2008 16:52): vmassol: Not that much, because I prefer to work with the official DOM  \nvmassol - (26/08/2008 16:52): document.getContent(new ElementFilter(\"b\")) doesn't to work  \nvmassol - (26/08/2008 16:52): sdumitriu: really?  \nvmassol - (26/08/2008 16:52): weird  \nvmassol - (26/08/2008 16:52): jdom is supposed to be muche easier  \nsdumitriu - (26/08/2008 16:52): ninfo: Good luck with that  \nninfo - (26/08/2008 16:52): yeah, i figured  \nninfo - (26/08/2008 16:52): lol  \nmflorea - (26/08/2008 16:53): vmassol: I can't reproduce. It's really strange because I get the html from the richtextarea.  \nvmassol - (26/08/2008 16:53): mflorea: do this: level 1 item, then hit enter, hit indent type some text  \nninfo - (26/08/2008 16:53): it's not time consuming, so i'll ask  \nvmassol - (26/08/2008 16:55): mflorea: you'll get http://rafb.net/p/C9vaXn90.html  \nmflorea - (26/08/2008 16:55): vmassol: nope. it happens all the time?  \nvmassol - (26/08/2008 16:55): mflorea: yes  \nmflorea - (26/08/2008 16:55): and what's wrong?  \nvmassol - (26/08/2008 16:56): this is not valid XHTML. The nested ul must inside a li  \nmflorea - (26/08/2008 16:56): oh  \nvmassol - (26/08/2008 16:56): a ul element can only accept li items  \nvmassol - (26/08/2008 16:58): guys I can see people use jdom with this api on the web: document.getContent(\"tagname\") but I don't get this api even with jdom 1.1. Any idea?  \nvmassol - (26/08/2008 16:59): ok got my problem with Elementfilter  \nninfo - (26/08/2008 17:01): So, lets imagine you have a svg image in a xwiki page  \nninfo - (26/08/2008 17:01): and you want to, for each svg image, check if the user has edit priviledged and if so, display a edit button  \nvmassol - (26/08/2008 17:01): sdumitriu: can you do this with the w3c dom api: http://rafb.net/p/2lMYnz41.html ?  \nninfo - (26/08/2008 17:02): (that would create a new page and call my app in there)  \nvmassol - (26/08/2008 17:02): sdumitriu: (I tried but it lead to complex code and here it's very simple)  \nninfo - (26/08/2008 17:02): what would be the easiest and better way to do this?  \nninfo - (26/08/2008 17:05): no thoughs, anyone?  \nsdumitriu - (26/08/2008 17:05): vmassol: You can't change the name of an element, you would have to create a new element and move all the children, attributes and replace the old element in the DOM tree  \nvmassol - (26/08/2008 17:06): sdumitriu: yep exactly  \nsdumitriu - (26/08/2008 17:06): ninfo: Are the images are inside the document?  \nsdumitriu - (26/08/2008 17:06): ninfo: Are the images inside the document?  \nvmassol - (26/08/2008 17:07): sdumitriu: I'm modifying HTMLCleaner to return a JDOM Document instead of a W3C Document. Ok for you? It's easy to get W3C Document from JDOM if needed. Ok for you?  \nninfo - (26/08/2008 17:07): they are inside the page  \nvmassol - (26/08/2008 17:07): (one \"okay for you\" to remove ;))  \nninfo - (26/08/2008 17:07): whitin {svg} tags  \nmflorea - (26/08/2008 17:08): vmassol: yes, this is a problem. I have limited control over the editor's output. It's sad that this is the code generated by FF. IE is going to be at least as worse as FF. The single option we have is to make HTMLCleaner clean this code. I'll investigate to see if there is a way to force the richtextarea to output cleaner code, but I doubt it because I read a lot about it and I haven't came across something related.  \nvmassol - (26/08/2008 17:09): mflorea: I'm committing my change to the HTMLCleaner so that it convers b into strong and i into em  \nvmassol - (26/08/2008 17:09): I've made changes to the interfaces  \nvmassol - (26/08/2008 17:09): once I'm done maybe you could help me writing this filter?  \nvmassol - (26/08/2008 17:09): s/writing/write/  \nsdumitriu - (26/08/2008 17:09): ninfo: Then only the page rights apply, right?  \nmflorea - (26/08/2008 17:09): yes, I will  \nvmassol - (26/08/2008 17:09): I should be done in 15 minutes  \nninfo - (26/08/2008 17:10): yeah  \nninfo - (26/08/2008 17:10): sdumitriu: yeah  \nninfo - (26/08/2008 17:10): atm, at least  \nsdumitriu - (26/08/2008 17:11): Then you can use #if($hasEdit)  \nninfo - (26/08/2008 17:11): hmm, but that's in the page content  \nninfo - (26/08/2008 17:11): i wanted this to be automatic  \nsdumitriu - (26/08/2008 17:12): wdym?  \nninfo - (26/08/2008 17:12): well  \nninfo - (26/08/2008 17:12): that way if you want to insert a svg into a page, and be able to edit it  \nninfo - (26/08/2008 17:12): you will have to put the script needed to call my app  \nninfo - (26/08/2008 17:13): and i want this part to be done without user interaction  \nmflorea - (26/08/2008 17:14): vmassol: I can't stay too much. I'll commit the changes regarding the list of plugins to be loaded. I included indent as you requested, for nested lists. I'll commit also the changes to avoid useless refreshes on debug text areas  \nvmassol - (26/08/2008 17:14): mflorea: ok thanks  \nvmassol - (26/08/2008 17:14): I'll try to finish the rest then tonight or we'll finish tomorrow morning  \nsdumitriu - (26/08/2008 17:14): ninfo: You mean you want to check the rights not in velocity, but inside the java code for the {svg} macro?  \nninfo - (26/08/2008 17:15): yop  \nninfo - (26/08/2008 17:15): sdumitriu: yop  \nninfo - (26/08/2008 17:15): well, it can't be done in the svg macro i think  \nvmassol - (26/08/2008 17:15): daning: I'm changing HTMLCleaner to output a JDOM Document instead of a W3C document  \nvmassol - (26/08/2008 17:15): daning: since it's much easier to use JDOM  \nvmassol - (26/08/2008 17:15): I'm sure you'll like it  \nvmassol - (26/08/2008 17:16): so the cleaning filter now accept a jdom document  \nninfo - (26/08/2008 17:16): cause you only have access to the page as a string, from what i understand  \nvmassol - (26/08/2008 17:16): daning: I'll be committing it shortly  \nvmassol - (26/08/2008 17:17): daning: just need to rewrite stripHTMLEnvelope before committing  \nsdumitriu - (26/08/2008 17:17): ninfo: Something like context.getWiki().getRightService().hasAccessLevel(\"edit\", context.getUser(), docname, context);  \ndaning - (26/08/2008 17:18): vmassol: I'm sorry about this. I just have rewrite all my filter to match the w3c document. But I still keep the old filters. So I just revert my change.  \nvmassol - (26/08/2008 17:19): daning: wait  \nvmassol - (26/08/2008 17:19): let me finish first since I don't know exactly what will be the outcome yet  \nninfo - (26/08/2008 17:19): sdumitriu: that part is already done in the SVGMacro class  \nninfo - (26/08/2008 17:19): now i dont know how i should create the edit button next to the image  \nvmassol - (26/08/2008 17:20): daning: I think I was too hasty. I can still generate a w3c Document but use JDOM for the filters  \ndaning - (26/08/2008 17:20): vmassol: And about use the w3c dom, I think w3c dom can be powerful as node have a replace(newchild, oldchild) interface.  \nvmassol - (26/08/2008 17:20): daning: yes but you can't use it easily  \nvmassol - (26/08/2008 17:20): AFAIK  \nvmassol - (26/08/2008 17:20): meaning you need to find the parent  \nvmassol - (26/08/2008 17:20): and you need to recreae the children  \ndaning - (26/08/2008 17:20): vmassol: Yes. But I can use node.getNodeParent() to get parent.  \nvmassol - (26/08/2008 17:21): what about the children?  \ndaning - (26/08/2008 17:21): vmassol: Yes, have to recreate the new child.  \nsdumitriu - (26/08/2008 17:21): Not recreate, just move  \nvmassol - (26/08/2008 17:22): yes move  \nvmassol - (26/08/2008 17:22): one by one   \nsdumitriu - (26/08/2008 17:22): If you do a foreach on the children, and call appendChild, they are automatically removed from the old node  \nsdumitriu - (26/08/2008 17:22): VIncent, you just do a foreach, it's not like you have to manually carry each node in your arms from one node to the other  \nsdumitriu - (26/08/2008 17:22): :D  \nvmassol - (26/08/2008 17:22): :)  \nvmassol - (26/08/2008 17:23): I'll leave the w3c Document as output but internally I'll use JDOM for the cleaning filters  \ndaning - (26/08/2008 17:24): vmassol: OK. I will keep my w3c dom filters.  \nsdumitriu - (26/08/2008 17:24): ninfo: What can't you do? You just have to write some HTML  \ndaning - (26/08/2008 17:26): sdumitriu: If I want to change a node 's name from b to strong, I think I only can create a strong node and add the b's textcontent to strong and replace b with strong. Any better idea?  \nvmassol - (26/08/2008 17:26): hmmm that's generating a lot of conversions  \nvmassol - (26/08/2008 17:26): from TagNode to JDOM to DOM to JDOM to String  \nsdumitriu - (26/08/2008 17:26): I'm not sure it will work  \nsdumitriu - (26/08/2008 17:26): It's better to move children one by one  \nvmassol - (26/08/2008 17:27): would be better to have TagNode to JDOM to String   \nsdumitriu - (26/08/2008 17:27): textcontent might loose attributes  \nvmassol - (26/08/2008 17:28): anyway I need to commit something so doing it like this and we'll tune it later on  \ndaning - (26/08/2008 17:28): sdumitriu: got it.  \ndaning - (26/08/2008 17:32): vmassol: Do you change the CleaningFilter's interface to filter(w3c document)?  \nvmassol - (26/08/2008 17:34): daning: just committed it now  \nvmassol - (26/08/2008 17:34): I've changed CleaningFilter to use JDOM Document  \nmflorea - (26/08/2008 17:34): vmassol: I'm done. We'll talk tomorrow to see how I can help you with the rendering.  \ndaning - (26/08/2008 17:34): vmassol: I will co it.  \nvmassol - (26/08/2008 17:34): mok  \nvmassol - (26/08/2008 17:34): mflorea: ok  \nvmassol - (26/08/2008 17:35): daning: if you have generic cleaningfilter please give them to me so that I can commit them in the xml module  \nvmassol - (26/08/2008 17:36): daning: but your non generic cleaning filters should work since clean() still generates a w3c Document   \ndaning - (26/08/2008 17:36): vmassol: I will commit them to officeconverter, and you check the code there. Is that OK?  \nvmassol - (26/08/2008 17:36): daning: ok fine but tell me which ones they are  \ndaning - (26/08/2008 17:36): vmassol: OK.  \nvmassol - (26/08/2008 17:36): so that I can move them  \nvmassol - (26/08/2008 17:36): right now I need to work on the ul li stuff discussed with marius  \nvmassol - (26/08/2008 18:30): jvdrean: we have jottinger \u00a0here who's trying to install the XE XAR in 1.5  \njottinger - (26/08/2008 18:30): vmassol: STILL got an error while preparing importing  \njottinger - (26/08/2008 18:31): and that's the same prob with the standard .xar \\*and\\* the admin xar  \nvmassol - (26/08/2008 18:31): he's installed the WAR but apparently he's not getting any message for installing the admin app  \nvmassol - (26/08/2008 18:31): and it's not working...  \nvmassol - (26/08/2008 18:31): any idea?  \njvdrean - (26/08/2008 18:31): from /xwiki/bin/import/XWiki/XWikiPreferences right ?  \njottinger - (26/08/2008 18:31): yes  \njvdrean - (26/08/2008 18:32): no error message ?  \njottinger - (26/08/2008 18:32): I have xwiki-application-adminis~.xar uploaded from windows  \njottinger - (26/08/2008 18:32): select it, see the XWiki.\\* modules  \njottinger - (26/08/2008 18:32): all are selected still  \njottinger - (26/08/2008 18:32): select \"import\" button, wait a second or three  \njvdrean - (26/08/2008 18:33): and nothing happens ?  \njvdrean - (26/08/2008 18:33): anything in the xwiki log ? by any change do you have firebug installed ?  \njottinger - (26/08/2008 18:33): whoa!  \njottinger - (26/08/2008 18:33): Third time was the charm  \njottinger - (26/08/2008 18:33): the admin app just uploaded  \njottinger - (26/08/2008 18:34): so that's the first time it's accepted \\*anything\\* -- if I import the enterprise .xar, will it overwrite the admin app?  \njvdrean - (26/08/2008 18:34): yes  \njottinger - (26/08/2008 18:35): okay, so I'll need to re-import that  \njdolan\\_ - (26/08/2008 18:35): is anyone running on mssql in production?  \njdolan\\_ - (26/08/2008 18:35): i gather it's not the recommended platform..  \nvmassol - (26/08/2008 18:36): jdolan: correct! :)  \njdolan\\_ - (26/08/2008 18:36): but our client kinda likes microsoft (boo!)  \nvmassol - (26/08/2008 18:36): jdolan: I have not tried it myself  \njdolan\\_ - (26/08/2008 18:36): we're trying to convince them to purchase mysql support alongside their xwiki support..  \njdolan\\_ - (26/08/2008 18:36): but they already own sql server..  \njdolan\\_ - (26/08/2008 18:37): (all of our developers are on linux, too.. so sql server for staging/production will just make life harder on all of us)  \nvmassol - (26/08/2008 18:37): it should work fine I guess provided 1) the drivers are working fine and 2) the HBM file is correctly configured and 3) there's no hibernate bugs with MSSQL ;)  \njdolan\\_ - (26/08/2008 18:37): hah, so it's basically untested.  \njdolan\\_ - (26/08/2008 18:37): that would be superb ammo for me.  \nvmassol - (26/08/2008 18:37): haven't heard anyone using it in production though but that may exist  \nvmassol - (26/08/2008 18:38): jdolan: you could try contacting [[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection) and ask the question and ask if they'll support mssql ;)  \njdolan\\_ - (26/08/2008 18:40): yea, i've got a thread going with guillaume.  \nvmassol - (26/08/2008 18:41): jdolan: ah ok ;)  \nsdumitriu - (26/08/2008 18:43): jdolan\\_: Several people on the mailing list tried to use mssql, and I think they succeeded  \nsdumitriu - (26/08/2008 18:43): So it's not impossible  \nsdumitriu - (26/08/2008 18:43): Just that users are more experienced than developers on this topic  \njdolan\\_ - (26/08/2008 18:45): scary! \u00a0:)  \ncypromis - (26/08/2008 18:49): hmmm any news on an intro to mail auth ?  \ncypromis - (26/08/2008 18:49): or captcha ?  \ncypromis - (26/08/2008 18:50): they are totaly unworkable for me  \nsdumitriu - (26/08/2008 18:54): Mail auth should be working fine  \nsdumitriu - (26/08/2008 18:54): What's not working?  \ncypromis - (26/08/2008 18:56): it sends empty emails  \ncypromis - (26/08/2008 18:57): cause I have no clue what to ut in the fields  \ncypromis - (26/08/2008 18:57): so it sends you an email with an empty subject  \ncypromis - (26/08/2008 18:57): and empty body  \ncypromis - (26/08/2008 18:57): :D  \nsdumitriu - (26/08/2008 18:58): Oh, you mean validation email, not mailserver authentication  \ncypromis - (26/08/2008 18:59): yep  \nxipe - (26/08/2008 19:01): FYI: The XWiki build platform (Hudson / Archiva / Maven) will be shutted down tonight for ~30 minutes for some hardware tests of the server.  \nvmassol - (26/08/2008 19:02): xipe: ok thanks  \ncypromis - (26/08/2008 19:04): oh another q.  \ncypromis - (26/08/2008 19:05): can I have xwiki read only mirrors ?  \ncypromis - (26/08/2008 19:05): ie. can xwiki, when I do not auth anybody work on a readonly db ?  \nsdumitriu - (26/08/2008 19:25): cypromis: One database for guests, another database for authenticated users?  \ncypromis - (26/08/2008 19:25): I am thinking about mirrors  \ncypromis - (26/08/2008 19:26): the real wiki with read/write would be in the US for example  \ncypromis - (26/08/2008 19:26): and replicated rdbms in multiple different places with xwikis local  \ncypromis - (26/08/2008 19:26): read only  \nxwikibot - (26/08/2008 21:16): XWiki.LevyMatlala was modified by XWiki.LevyMatlala (Created user) - http://www.xwiki.org/xwiki/bin/view/XWiki/LevyMatlala  \nxwikibot - (26/08/2008 21:22): Drafts.Documenting XWiki Velocity Macros was modified by xwiki:XWiki.LudovicDubost - http://dev.xwiki.org/xwiki/bin/view/Drafts/Documenting+XWiki+Velocity+Macros  \nxwikibot - (26/08/2008 21:22): XWiki.LevyMatlala was modified by XWiki.LevyMatlala - http://www.xwiki.org/xwiki/bin/view/XWiki/LevyMatlala  \nxwikibot - (26/08/2008 21:22): XWiki.LevyMatlala was modified by XWiki.LevyMatlala - http://www.xwiki.org/xwiki/bin/view/XWiki/LevyMatlala  \ncypromis - (26/08/2008 21:35): postgresql 8.3.3 jdbc driver has set/getcatalog methods  \ncypromis - (26/08/2008 21:35): the ones you need for virtual wikis  \ncypromis - (26/08/2008 21:35): wouls be maybe an interesting reason to test it ?  \nvmassol - (26/08/2008 21:36): cypromis: cool this is for thomas mortagne. Maybe you could send an email to the list or create a jira issue for it?  \ncypromis - (26/08/2008 21:36): I should maybe join the list first :)  \nvmassol - (26/08/2008 21:36): deginitely :)  \nvmassol - (26/08/2008 21:36): s/deginitely/definitely/  \nxwikibot - (26/08/2008 22:37): XWiki.NassimaAmrouche was modified by XWiki.NassimaAmrouche (Created user) - http://www.xwiki.org/xwiki/bin/view/XWiki/NassimaAmrouche  \nxwikibot - (26/08/2008 22:56): XWiki.grimsell was modified by XWiki.grimsell - http://www.xwiki.org/xwiki/bin/view/XWiki/grimsell  \ncypromis - (26/08/2008 23:04): hmm  \nsdumitriu - (26/08/2008 23:09): cypromis: Can you wait 1 or 2 more days for the validation messages?  \ncypromis - (26/08/2008 23:10): sure :)  \nsdumitriu - (26/08/2008 23:10): I know what must be in there, I just have to find some time for it  \ncypromis - (26/08/2008 23:10): I am just redoing freesiwtch.org from the start  \ncypromis - (26/08/2008 23:10): with autogeneraation of sites for new projects  \ncypromis - (26/08/2008 23:10): so virtual xwiki was very interesting for me  \ncypromis - (26/08/2008 23:10): :)  \ncypromis - (26/08/2008 23:11): and since postgres now supports setcatalog  \ncypromis - (26/08/2008 23:11): it is all coming together  \nart - (26/08/2008 23:36): Evening... anyone still on?  \nvmassol - (26/08/2008 23:44): art: thanks for the jira  \nvmassol - (26/08/2008 23:44): cypromis: cool  \nart - (26/08/2008 23:45): no probs. thought its straight forward so didn't put much text in  \nart - (26/08/2008 23:47): Got a question though, if we use other authentication method, any suggestion to like the user/group into into XWiki so that XWiki can do the authentication?  \nart - (26/08/2008 23:47): suggestion to 'link'  \nvmassol - (26/08/2008 23:48): art: maybe you can have a look at http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Authentication#HCustomAuthentication  \nvmassol - (26/08/2008 23:49): we have several implementations in xwiki sources already so maybe you could have a look at those?  \nart - (26/08/2008 23:49): vmassol: need to setup XWiki to use SiteMinder for authentication but would like to preserve the flexibility or ACL control using the XWiki interface  \nvmassol - (26/08/2008 23:49): the way it's done for LDAP is that it creates XWiki users under the hood  \nart - (26/08/2008 23:50): right......   \nart - (26/08/2008 23:52): situation i am in is that I have to link it with Siteminder, using siteminder for authentication is easy because we can just front it with apache and use the module, and pass on the ID / Group info on the header. However, how to maintain the user/group info in xwiki is my problem. i don't want to duplicate the info  \nvmassol - (26/08/2008 23:54): art: you'll need to write some code to do the sync as it's done for LDAP I guess  \nvmassol - (26/08/2008 23:55): like check first if the user is in siteminder, if so check if it's in xwiki and if not create the user, etc  \nvmassol - (26/08/2008 23:55): I'm not the one who wrote the LDAP auth so I'm not an expert here  \nvmassol - (26/08/2008 23:55): but you could 1) check the source and/or 2) ask on the list  \nart - (26/08/2008 23:56): yup... i had a look \u00a0on the users details today, xwiki users are basically wiki pages, am i right?  \nvmassol - (26/08/2008 23:56): yes with some special objects attached to the page  \nart - (26/08/2008 23:57): so if I need to sync the user/group, i will loop through and check the users profile which are the wiki page  \nvmassol - (26/08/2008 23:59): there's an api to get/manager users  \n\n"}