{"id": "dev:IRC.xwikiArchive20151110", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20151110", "title": "IRC Archive for channel #xwiki on 10 November 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<LucasLima>\u00a0has quit  \n00:12\u00a0<thisismatt>\u00a0has quit  \n00:16\u00a0<vmassol1>\u00a0debajit: all I can think of is that it's used to differentiate local users from global users  \n00:16\u00a0<vmassol1>\u00a0(somehow)  \n00:17\u00a0<vmassol1>\u00a0and we add an A HREF for local groups to link to them  \n00:18\u00a0<vmassol1>\u00a0now I don't see what this had to do with \"wiki\" but maybe the code is reusing some livetable property for some custom usage\u2026  \n00:33\u00a0<vmassol1>\u00a0has quit  \n00:52\u00a0<abusenius>\u00a0has quit  \n01:08\u00a0<Pbas>\u00a0has quit  \n01:14\u00a0<Pbas>\u00a0has joined #xwiki  \n01:59\u00a0<MasterPiece>\u00a0has joined #xwiki  \n02:24\u00a0<xwikibot>\u00a0has joined #xwiki  \n02:27\u00a0<MasterPiece>\u00a0has quit  \n02:34\u00a0<debajit>\u00a0vmassol: Thanks  \n02:39\u00a0<debajit>\u00a0has quit  \n06:01\u00a0<Denis>\u00a0has quit  \n06:01\u00a0<Denis3>\u00a0has joined #xwiki  \n06:01\u00a0<Denis3>\u00a0is now known as <Denis>  \n07:08\u00a0<msmeria>\u00a0has joined #xwiki  \n07:46\u00a0<kais3n>\u00a0has joined #xwiki  \n07:56\u00a0<Ramona>\u00a0has joined #xwiki  \n08:11\u00a0<sorinello>\u00a0has quit  \n08:14\u00a0<sorinello>\u00a0has joined #xwiki  \n08:18\u00a0<sorinello>\u00a0has quit  \n08:20\u00a0<sorinello>\u00a0has joined #xwiki  \n08:30\u00a0<cjd>\u00a0has quit  \n08:33\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:47\u00a0<Ramona>\u00a0has quit  \n08:49\u00a0<Bugendolf>\u00a0has joined #xwiki  \n08:54\u00a0<KermitTheFragger>\u00a0has quit  \n09:01\u00a0<vmassol1>\u00a0has joined #xwiki  \n09:02\u00a0<woshilapin>\u00a0has quit  \n09:02\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:04\u00a0<Ramona>\u00a0has joined #xwiki  \n09:09\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:17\u00a0<woshilapin>\u00a0has quit  \n09:18\u00a0<Pbas>\u00a0Good morning everyone :-) I try to delete two last version of my doc with this groovy code  \n09:18\u00a0<Pbas>\u00a0def MyGroup = xwiki.getDocument('XWiki.GF\\_PiloteP3')  \n09:18\u00a0<Pbas>\u00a0def gArch = MyGroup.getDocumentArchive()  \n09:18\u00a0<Pbas>\u00a0gArch.removeVersions(gArch.getLatestVersion(), gArch.getPrevVersion(gArch.getLatestVersion()), context)  \n09:18\u00a0<Pbas>\u00a0(http://maven.xwiki.org/site/docs/xwiki-javadoc-4.1.x/com/xpn/xwiki/doc/XWikiDocumentArchive.html#removeVersions%28Version,%20Version,%20com.xpn.xwiki.XWikiContext%29)  \n09:18\u00a0<Pbas>\u00a0but removeVersions crash with this log  \n09:18\u00a0<Pbas>\u00a0Possible solutions: removeVersions(org.suigeneris.jrcs.rcs.Version, org.suigeneris.jrcs.rcs.Version, com.xpn.xwiki.XWikiContext)  \n09:18\u00a0<Pbas>\u00a0Have you got i idea what I'm doing wrong? Thxs  \n09:20\u00a0<cjd>\u00a0has joined #xwiki  \n09:20\u00a0<Ramona>\u00a0has quit  \n09:28\u00a0<tmortagne>\u00a0Pbas: you are passing the wrong context  \n09:28\u00a0<tmortagne>\u00a0contex variable is a ScriptContext and the method expect a XWikiContext  \n09:28\u00a0<tmortagne>\u00a0so that would be xcontext.context  \n09:29\u00a0<tmortagne>\u00a0(xcontext binding is a public com.xpn.xwiki.api.Context and the method want the more protected XWikiContext)  \n09:29\u00a0<Pbas>\u00a0Ok thxs I will give a try (I don't understand very well what is context in doc :-( )  \n09:30\u00a0<tmortagne>\u00a0not sure what you means by \"context in doc\"  \n09:30\u00a0<tmortagne>\u00a0the method want the XWiki context because it's needed to manipulate the database  \n09:31\u00a0<Pbas>\u00a0In a lot of method there are \"protected XWikiContext context \u00a0The current context, needed by the underlying protected object\" but didn't found an explication what it is  \n09:31\u00a0<Pbas>\u00a0perhaps a java concept?  \n09:32\u00a0<Pbas>\u00a0or xwiki concept?  \n09:32\u00a0<tmortagne>\u00a0it's the XWiki context as it's name indicate so yes a XWiki concept :)  \n09:32\u00a0<tmortagne>\u00a0it contains things like current wiki, current user, etc.  \n09:32\u00a0<tmortagne>\u00a0contextual information  \n09:32\u00a0<cjd>\u00a0hehe the \"context\" is an object which follows you through the current http request/response cycle and then is deleted  \n09:32\u00a0<tmortagne>\u00a0and among other things it's needed when you need to access the XWiki database  \n09:33\u00a0<cjd>\u00a0I had no idea what it was either when I started with XWiki  \n09:34\u00a0<Pbas>\u00a0It is an important things to use xwiki api but doc about this missing in my opinion  \n09:34\u00a0<tmortagne>\u00a0in more public/script oriented APIs it's hidden but its still here  \n09:35\u00a0<tmortagne>\u00a0API taking this XWikiContext are mostly old things which are replaced when we all the API related to document manipulation is a big jump  \n09:35\u00a0<cjd>\u00a0Context objects are not only confined to XWiki, it's a design pattern in software dev, irronically this is the only link I can find about it... http://c2.com/cgi/wiki?ContextObjectsAreEvil :)  \n09:35\u00a0<tmortagne>\u00a0s/when/when we find time/  \n09:38\u00a0<Pbas>\u00a0Thxs. Anyway gArch.removeVersions didn't crash but didn't remove version last version...  \n09:38\u00a0<sorinello>\u00a0has quit  \n09:40\u00a0<Pbas>\u00a0I can copy / past this Context description in a new faq maybe?  \n09:46\u00a0<tmortagne>\u00a0Pbas: sure if you feel more comfortable with a FAQ  \n09:47\u00a0<Pbas>\u00a0Probably someone will correct it :-)  \n09:52\u00a0<Pbas>\u00a0gArch.removeVersions(gArch.getLatestVersion(), gArch.getPrevVersion(gArch.getLatestVersion()), xcontext.context) didn't remove last version: maybe this method can not remove current one?  \n09:54\u00a0<tmortagne>\u00a0Pbas: from what I can see in the code the method does not seems to work for current version but not sure it's intended  \n09:56\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:56\u00a0<Pbas>\u00a0It is an ugly fix for http://jira.xwiki.org/browse/XWIKI-12570 I will update a group every night but I want remove last version  \n09:56\u00a0<Pbas>\u00a0last version generated by my fix  \n09:58\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:59\u00a0<Pbas>\u00a0(not sure if it will refresh group cache anyway)  \n09:59\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n10:00\u00a0<mflorea>\u00a0has joined #xwiki  \n10:07\u00a0<tmortagne>\u00a0Pbas: I don't see any modification to the DB in the method, it use the context to access the DB but it expect you to save the archive when you are done modifying it  \n10:08\u00a0<tmortagne>\u00a0see example in delete version action https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/web/DeleteVersionsAction.java#L60  \n10:09\u00a0<tmortagne>\u00a0and I think I was wrong for the last version support in recent version, I remember some issue about this but not sure if it was fixed or not  \n10:09\u00a0<Pbas>\u00a0Ha thxs: MyGroup.save() missing after gArch.removeVersions  \n10:10\u00a0<Pbas>\u00a0It seem to be fix :)  \n10:12\u00a0<Pbas>\u00a0Version number is increase by +1 but it is ok now. Ok thxs a lot for your help  \n10:12\u00a0<Pbas>\u00a0I must wait now if it fix the issue  \n10:17\u00a0<Slashman>\u00a0has joined #xwiki  \n10:32\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:34\u00a0<evalica>\u00a0has joined #xwiki  \n11:50\u00a0<Ramona1>\u00a0has joined #xwiki  \n12:37\u00a0<mflorea>\u00a0gdelhumeau: can you check http://ci.xwiki.org/job/xwiki-enterprise-test-rest/1825/org.xwiki.enterprise$xwiki-enterprise-test-rest/testReport/org.xwiki.test.rest/PageResourceTest/testGETPageChildren/ . Having \"Main.WebHome\" as parent of XWiki.Notifications.Code.NotificationsMenuUIX leads to a 404 Not Found on XWiki.Notifications.Code.WebHome  \n12:37\u00a0<gdelhumeau>\u00a0ok mflorea  \n12:38\u00a0<mflorea>\u00a0the quick fix is to change the parent  \n12:38\u00a0<gdelhumeau>\u00a0yes  \n12:39\u00a0<gdelhumeau>\u00a0the problem is that this test is checking if the space of the child have a webhome?  \n12:40\u00a0<mflorea>\u00a0afaics, the test gets the list of \u00a0child pages for Main.WebHome and then checks the REST links for these. The space home page is probably such a link  \n12:42\u00a0<gdelhumeau>\u00a0does it means that having pages without existing hierarchy parents is a problem?  \n12:43\u00a0<gdelhumeau>\u00a0Here we don't have a XWiki.Code.Notifications.WebHome page  \n12:43\u00a0<gdelhumeau>\u00a0neither XWiki.Code.WebHome  \n12:43\u00a0<mflorea>\u00a0it's not a problem, but this text expects it for the children of the Main.WebHome  \n12:43\u00a0<mflorea>\u00a0the link is probably for rel=\"http://www.xwiki.org/rel/space\"  \n12:44\u00a0<mflorea>\u00a0actually no, because the failing URL ends with WebHome  \n12:46\u00a0<mflorea>\u00a0regarding having holes in the hierarchy of the default XAR, we need to decide. The fact that is technically possible doesn't mean we want it by default  \n12:59\u00a0<gdelhumeau>\u00a0I can put XWiki.WebHome as parent then  \n13:21\u00a0<mflorea>\u00a0+1  \n13:45\u00a0<sorinello>\u00a0has joined #xwiki  \n14:25\u00a0<vmassol1>\u00a0has quit  \n15:21\u00a0<msmeria>\u00a0has quit  \n15:26\u00a0<pomo>\u00a0has joined #xwiki  \n15:29\u00a0<pomo>\u00a0Hi, I'm getting \"Failed to import documents. Reason: Internal Server Error\" importing pages from an old xwiki, any suggestion where to get further info? There's nothing in tomcat log :(  \n16:15\u00a0<pomo>\u00a0has quit  \n16:53\u00a0<ClemensR>\u00a0has joined #xwiki  \n17:13\u00a0<kais3n>\u00a0has quit  \n17:50\u00a0<KermitTheFragger>\u00a0has quit  \n18:19\u00a0<OSIMasson>\u00a0has joined #xwiki  \n18:20\u00a0<OSIMasson>\u00a0has left #xwiki  \n18:22\u00a0<ClemensR>\u00a0tmortagne: are you telling me I am blocking the release tomorrow with XWIKI-12793 ?  \n18:22\u00a0<tmortagne>\u00a0it's a regression  \n18:24\u00a0<ClemensR>\u00a0ok, I will try to see if I can fix it today. if I cannot, should I rollback the fix for XWIKI-12731 ?  \n18:31\u00a0<tmortagne>\u00a0I don't think we can release 7.3 final with XWIKI-12793 so the best would probably be to revert the cause yes  \n18:35\u00a0<vmassol1>\u00a0has joined #xwiki  \n18:42\u00a0<tmortagne>\u00a0has quit  \n19:04\u00a0<Ramona1>\u00a0has quit  \n19:06\u00a0<evalica>\u00a0has quit  \n19:07\u00a0<Enygma`>\u00a0has quit  \n19:13\u00a0<cjd>\u00a0has quit  \n19:16\u00a0<Ramona>\u00a0has joined #xwiki  \n19:20\u00a0<vmassol1>\u00a0has quit  \n19:35\u00a0<abusenius>\u00a0has joined #xwiki  \n19:36\u00a0<woshilapin>\u00a0has quit  \n19:38\u00a0<mflorea>\u00a0has quit  \n19:38\u00a0<ClemensR>\u00a0has quit  \n19:49\u00a0<cjd>\u00a0has joined #xwiki  \n20:04\u00a0<Ramona>\u00a0has quit  \n20:08\u00a0<Slashman>\u00a0has quit  \n20:11\u00a0<Ramona>\u00a0has joined #xwiki  \n20:20\u00a0<Ramona>\u00a0has quit  \n20:56\u00a0<Denis>\u00a0Hi guys, is there a way to do conditional programming for nested spaces ?  \n20:58\u00a0<Denis>\u00a0I would like to adapt an extension that runs from 5.x, and do not want to maintain multiple versions, but to put a condition, to know if let say, doc.location is supported or if I should use doc.space in a document livetable, for example  \n20:59\u00a0<cjd>\u00a0It was done for webide, it's not easy  \n21:00\u00a0<cjd>\u00a0#set($nestedSpaces = !$xwiki.getVersion().matches('^([1-6]\\..\\*|7\\.[01].\\*)'))  \n21:02\u00a0<cjd>\u00a0another one: \u00a0\u00a0$services.model.createDocumentReference(\"wiki\", [\"A\", \"B\"], \"page\") == 'wiki:A.B.page'  \n21:03\u00a0<cjd>\u00a0which works but was considered less good by the developers  \n21:03\u00a0<cjd>\u00a0AKA: This discussion came up.  \n21:09\u00a0<Denis>\u00a0in this regards, it looks like we have been even worse than the flamingo conditions  \n21:09\u00a0<Denis>\u00a0it starts to be very difficult to create cross-version extensions  \n21:43\u00a0<Denis>\u00a0thanks caleb for sharing, I will use the first one even if I found it the worse one  \n21:44\u00a0<Denis>\u00a0the second one looks more functional check, but depends a syntax\u2026 there is probably a third way :)  \n21:45\u00a0<cjd>\u00a0second one depends on the default toString() of document references  \n21:45\u00a0<cjd>\u00a0which is not specified (even though IMO it really should be)  \n21:59\u00a0<gdelhumeau>\u00a0has quit  \n22:36\u00a0<OSIMasson>\u00a0has joined #xwiki  \n23:08\u00a0<woshilapin>\u00a0has joined #xwiki  \n23:29\u00a0<sorinello\\_>\u00a0has joined #xwiki  \n23:32\u00a0<sorinello>\u00a0has quit  \n23:47\u00a0<sorinello\\_\\_>\u00a0has joined #xwiki  \n23:48\u00a0<sorinello\\_>\u00a0has quit\n"}