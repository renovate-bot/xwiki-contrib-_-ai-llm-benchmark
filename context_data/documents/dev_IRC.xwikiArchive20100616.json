{"id": "dev:IRC.xwikiArchive20100616", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100616", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nabusenius left at 00:07 (Quit: Konversation terminated!  \nabusenius joined #xwiki at 00:08  \nanamarias left at 01:20 (Quit: anamarias  \nabusenius left at 01:38 (Quit: Konversation terminated!  \nlucaa left at 02:22 (Ping timeout: 265 seconds  \nmflorea joined #xwiki at 06:33  \nDenis left at 07:04 (Read error: Connection reset by peer  \nDenis joined #xwiki at 07:10  \nvmassol joined #xwiki at 07:35  \nkibahop joined #xwiki at 07:54  \nkibahop left #xwiki at 07:54  \nkibahop joined #xwiki at 08:23  \nplunden joined #xwiki at 08:27  \nplunden left #xwiki at 08:28  \nplunden joined #xwiki at 08:28  \nsburjan joined #xwiki at 08:32  \nkibahop left #xwiki at 08:39  \nvmassol - (08:53): sburjan: good morning  \nvmassol - (08:53): I've fixed a few things on the http://platform.xwiki.org/xwiki/bin/view/Features/DocumentLifecycle page you can check the history  \nvmassol - (08:53): one more thing to fix that I'lll let you do is fix the Delete section  \nvmassol - (08:53): it says \" This option is non reversible so be very careful when you use it.\"  \nvmassol - (08:53): this is not correct  \nvmassol - (08:54): it'll go to the trash  \nvmassol - (08:54): and you can get it back  \nsburjan - (08:54): hello vmassol  \nvmassol - (08:54): we need some text for this + screenshots  \nvmassol - (08:54): and explain how to undelete  \nsburjan - (08:54): okay, you want me to create a section on DocumentLifecylce to explain how to undelete a Page ?  \nvmassol - (08:54): no  \nvmassol - (08:55): you can put it in the Delete seciton  \nvmassol - (08:55): section  \nsburjan - (08:55): okay  \nvmassol - (08:56): I think this needs rewording too:  \nvmassol - (08:56): \"A rename feature is available in XWiki. Its effect is to change the page name (that is, you get http://<server>/xwiki/bin/View/NewSpace/NewPageName instead of http://<server>/xwiki/bin/View/OldSpace/OldPageName)\"  \nvmassol - (08:57): the rename will perform 2 refactoring:  \nvmassol - (08:57): - update backlinks  \nvmassol - (08:57): - update parent information  \nsilviar joined #xwiki at 09:01  \nsburjan - (09:08): It's just that I can't find the Trash  \nvmassol left at 09:16 (Quit: Leaving.  \nvmassol joined #xwiki at 09:23  \nEnygma` joined #xwiki at 09:29  \nvmassol - (09:31): sburjan: just do a test and delete a page, you'll see the screen that you get  \nsburjan - (09:31): found it, now creating the screens  \narkub joined #xwiki at 09:32  \nvmassol - (09:32): silviar, sburjan:I think we're missing an application on code.xwiki.org  \nvmassol - (09:33): the XWiki Enterprise application itself  \nvmassol - (09:33): which means the following features are not documented right now:  \nvmassol - (09:33): - dashboard  \nvmassol - (09:33): - recent changes  \njvdrean joined #xwiki at 09:34  \nvmassol - (09:34): - alldocs  \nvmassol - (09:34): - spaces  \nsburjan - (09:34): hmmmm  \nvmassol - (09:34): - color themses too  \nsburjan - (09:34): spaces as far as I know are documented because I created some screen shots  \nsburjan - (09:34): how to add a new space, etc  \nsilviar - (09:34): For color themes we have an application page; spaces are here http://platform.xwiki.org/xwiki/bin/view/Features/Spaces  \nvmassol - (09:35): sburjan: no, not the space feature  \nvmassol - (09:35): the Spaces page  \nsburjan - (09:35): oh  \nvmassol - (09:35): http://localhost:8080/xwiki/bin/view/Main/Spaces  \nvmassol - (09:36): silviar: ok this is wrong  \nvmassol - (09:36): same discussion as we've had this morning  \nvmassol - (09:36): it's not fully wrong  \nvmassol - (09:36): just the space dashboard shouldn't be documented there  \nvmassol - (09:36): since it's not a platform feature  \nvmassol - (09:36): I mean this part \"On your wiki's homepage you will see a list of all available spaces:\"  \nvmassol - (09:37): and also the space creation from that dashboard  \nsilviar - (09:37): yes, you're right; we'll explain the spaces dashboard & creation on a separate XE Application page and link that page later from Features.Spaces  \nsilviar - (09:38): for more details  \nvmassol - (09:38): is color themese doc'ed somewhere?  \nvmassol - (09:38): maybe in the colibri skin  \nvmassol - (09:38): which is not the right place in this case  \nvmassol - (09:38): btw colorthemes should be moved to its own app I believe  \nvmassol - (09:38): sdumitriu: do you remember why you put it in XE?  \nsilviar - (09:38): http://code.xwiki.org/xwiki/bin/view/Applications/ColorThemeApplication  \nvmassol - (09:39): silviar: ok leave it here for now since it might well be where we want it to be  \nvmassol - (09:39): need to get agreement from sdumitriu  \nvmassol - (09:39): (right now in the code it's in the XE app and not a standalone app)  \nsilviar - (09:40): We discussed this when the color themes where updated and at that time a new application seemed the right solution  \nsilviar - (09:40): ok  \nvmassol - (09:40): re dashboard we could also decide to have an app for this actually and it could contain:  \nvmassol - (09:40): - recent changes  \nvmassol - (09:40): - dashboard  \nvmassol - (09:40): - spaces  \nvmassol - (09:40): - alldocs  \nvmassol - (09:41): sdumitriu: wdyt?  \nvmassol - (09:41): jvdrean, jvelociter, Denis: wdyt?  \nvmassol - (09:42): actually we agreed a long time ago to separate all XE pages into separate apps  \nvmassol - (09:42): we just haven't finished it  \nvmassol - (09:43): in jira I called this app \"navigation\" but we might want a better name. Dashboard isn't so bad since it's about dashboards.  \nDenis - (09:44): vmassol: +1 for an application for everything  \nvmassol - (09:44): Denis: do you agree to have one app for:  \nvmassol - (09:44): - recent changes  \nvmassol - (09:44): 9:40  \nvmassol - (09:44): - dashboard  \nvmassol - (09:44): 9:40  \nvmassol - (09:44): - spaces  \nvmassol - (09:44): 9:40  \nvmassol - (09:44): - alldocs  \nvmassol - (09:44): (a single app that is)  \nvmassol - (09:44): what would you call it?  \nvmassol - (09:44): is dashboard a fair name?  \nDenis - (09:44): vmassol: not bad  \nevalica joined #xwiki at 09:45  \nvmassol - (09:45): silviar: let me get agreement for this app and I'll code it and then we can document it as \u00a0new app  \nsilviar - (09:45): ok  \nsburjan - (09:46): vmassol, : take a look atthe page  \nvmassol - (09:46): so we won't need a xe app  \nsilviar - (09:46): Maybe sburjan can start on a draft and then we just move it  \nvmassol - (09:46): sburjan: it's not correct  \nvmassol - (09:46): you documented alldocs  \nvmassol - (09:46): which isn't part of platform  \nvmassol - (09:46): as I said  \nvmassol - (09:46): just dleete a page  \nvmassol - (09:46): you'll get the trash for the page  \nsilviar - (09:47): I'm showing him right now  \nvmassol - (09:47): ok thanks silviar  \njvdrean - (09:47): +0 (I think dashboards could be a feature of XE)  \nvmassol - (09:48): jvdrean: wdym? I'll be part of XE of course  \nvmassol - (09:48): s/I'll/it'll/  \nvmassol - (09:48): or are you saying it has no menaning outside of XE  \nvmassol - (09:48): like I'm creating a wiki for myself  \nvmassol - (09:49): and I want these dashboards  \nvmassol - (09:49): are you saying this won't happen?  \nvmassol - (09:49): (in this case we can put back all our apps in one app ;))  \nvmassol - (09:50): note: I was thinking we could put our XEM dashboards in there too in the future  \nvmassol - (09:50): (or maybe not)  \nvmassol - (09:51): jvdrean: or are you thinking about the extra release work? :)  \njvdrean - (09:51): I've put a +0 because I know this is a endless debate :)  \nvmassol - (09:51): I just want to know your position  \nvmassol - (09:51): since it wasn't clear  \njvdrean - (09:51): I think it's overkill and I think it could be documented in XE wiki  \nvmassol - (09:51): you'd prefer a single XE app?  \nDenis - (09:54): vmassol: for sure, multiplying the app may increase release work, on the other hand, if these are stable, this is not true  \nflorinciu joined #xwiki at 09:54  \nvmassol - (09:54): re the future, I feel it makes sense to have separate apps with the extension manager  \nDenis - (09:56): personnaly, I prefer separate apps as well, I already remove part of XE like the blogs in my initial installation in production, to be able to replace it by an implementation that suit me better  \nDenis - (09:56): so having separate apps allow more flexibility  \njvdrean - (09:57): I think optional apps deserve their own lifecycle but I know we have different opinions about what's optional in XE :) (re the fact that for XE is the platform, I haven't seen a project not using XE wiki)  \njvdrean - (09:57): s/that for/that for me/  \nvmassol - (09:58): xe is a platform packaging if you prefer  \nvmassol - (09:58): but you can't say it's the platform  \nvmassol - (09:58): for ex talk to julien who's using the xwiki rendering engine  \nvmassol - (09:59): he's not using anything else  \nvmassol - (09:59): he's using a piece of the platform  \nvmassol - (09:59): ok I know it's a special case but it would be great to have each piece be as independent as possible from the rest  \njvdrean - (09:59): I know your PoV and I won't fight, thus the +0  \nvmassol - (10:00): XE is simply a bundling of apps/config  \njvdrean - (10:00): (and yes the rendering is a special case :) )  \nvmassol - (10:00): the thing is  \nvmassol - (10:00): we had several products before  \nvmassol - (10:00): so platform made a lot of sense to be separated  \nvmassol - (10:01): I'm sure I could be convinced to remove XE  \nvmassol - (10:01): and consider xwiki as a runtime platform only  \nvmassol - (10:01): (with the exception of rendering + wysiwyg)  \nvmassol - (10:01): (and maybe other components later on)  \nvmassol - (10:02): (re components that'll be possible when there's a component manager in the JDK - but that's another discussion ;))  \njvdrean - (10:02): I already failed at convincing you when we talked about the future svn reorg  \nanamarias joined #xwiki at 10:02  \nvmassol - (10:02): jvdrean: you should keep trying  \nvmassol - (10:02): I wasn't strongly against it  \nvmassol - (10:03): my main comment I think is that the xwiki.org project should offer a usable enterprise wiki  \nvmassol - (10:04): and not jsut a platform  \nvmassol - (10:04): a bit like eclipse if you want  \nvmassol - (10:04): so if we name the main product of xwiki.org XWiki Platform then it's not very appealiling for users  \ntmortagne joined #xwiki at 10:04  \nvmassol - (10:04): it'll appeal only to developers  \nvmassol - (10:05): we could decide that's what we want though  \nvmassol - (10:05): but I think that what we have now goes beyond just a bare platform  \nvmassol - (10:05): we have refined UIs that form a usable product  \nvmassol - (10:05): if we can solve this point we could definitely agree on something  \ntmortagne1 joined #xwiki at 10:06  \ntmortagne left at 10:06 (Read error: No route to host  \ntmortagne1 left at 10:08 (Client Quit  \nmariusbutuc joined #xwiki at 10:08  \njvdrean - (10:12): the way I'd present it is \"XWiki Enterprise is both an enterprise wiki and a web dev platform, you can get XE and develop a project on top of it. It's core is also made of reusable components that you can get separately and use in your own project\". I wouldn't say \"There's XWiki Enterprise and XWiki Platform, you can get the second and build your own project on top of it. Also note that XWiki Platform is made of smaller reusable  \nvmassol - (10:13): ok so you'd keep XE and remove platform  \nvmassol - (10:13): not the other way around  \njvdrean - (10:13): exactly  \nvmassol - (10:14): so you wouldn't be able to get just some pieces  \nvmassol - (10:14): it's an all or nothing  \nvmassol - (10:14): you get XE and you remove stuff if you need to  \ntmortagne joined #xwiki at 10:14  \nvmassol - (10:15): but not in an organized way  \nmflorea left at 10:15 (Quit: Leaving.  \nvmassol - (10:15): meaning you cannot say \"remove this feature\"  \nvmassol - (10:15): you'd need to manually remove pages one by one  \nvmassol - (10:15): right?  \nvmassol - (10:15): the idea of the extension manager is to list all installed features in some admin page  \njvdrean - (10:15): I'd keep an organization similar to the one we currently have  \njvdrean - (10:16): allowing to exclude the blog app for example, which is not coupled to the other pieces  \njvdrean - (10:16): but I would ask the question about the admin app  \njvdrean - (10:17): it's tightly coupled to many other pieces and I often find myself doing lockdowns in xe branches for it  \nlucaa joined #xwiki at 10:18  \nvmassol left at 10:20 (Ping timeout: 276 seconds  \nvmassol joined #xwiki at 10:29  \nabusenius joined #xwiki at 10:31  \nsilviar - (10:34): vmassol: wdyt about adding the part on creating templates to the \"Document Lifecycle\" page instead of \"Page editing\"? I can talk about the template creation after the description on how you create an empty wiki page  \nCalebJamesDeLisl - (10:57): Good morning. What's the status on Alex's 2.0 renderer patch?  \nCalebJamesDeLisl - (10:58): Default is no nested scripts.  \nCalebJamesDeLisl - (11:00): The config key is: rendering.macro.script.nestedscripts.enabled  \nCalebJamesDeLisl - (11:00): We have switched to camel case in xwiki.properties haven't we.  \ntmortagne - (11:01): CalebJamesDeLisl: not exactly, only for the last part  \nCalebJamesDeLisl - (11:01): Ok, so that key is good?  \ntmortagne - (11:01): looks ok to me  \nCalebJamesDeLisl - (11:02): I don't like this but I don't see a good way around at the moment: \u00a0\u00a0} else if (\"include\".equals(parentId)) {  \nCalebJamesDeLisl - (11:02): It's not an api.  \ntmortagne - (11:03): yes but that's already how include macro is manager round currently so it's not worst that what's already exists, should be improved latter  \nCalebJamesDeLisl - (11:03): vmassol: Your opinion?  \ntmortagne - (11:03): s/round/around/  \ntmortagne - (11:04): i prefer that that introducing a not well though api  \nmflorea joined #xwiki at 11:13  \nvmassol - (11:16): silviar: yes  \nvmassol - (11:17): (that's what I meant)  \nsilviar - (11:17): ok  \nvmassol - (11:17): (I mixed the name of the pages)  \nmflorea left at 11:17 (Client Quit  \nCalebJamesDeLisl - (11:17): Are we going to remove jira issue numbers from the (nested script) patch? It references XWIKI-5275  \ntmortagne - (11:18): CalebJamesDeLisl: i already asked abusenius to remove that yesterday  \nmflorea joined #xwiki at 11:18  \ntmortagne - (11:18): as well as some other womments  \ntmortagne - (11:18): comments  \nCalebJamesDeLisl - (11:19): He switched from the secret issue to the public one.  \ntmortagne - (11:19): abusenius: did you took care of theses ? (i did not cheked)  \nCalebJamesDeLisl - (11:20): It's no problem for me to remove them when committing, I will also have to document it in xwiki.properties  \nabusenius - (11:20): good morning everyone  \nabusenius - (11:20): no, I didnt  \ntmortagne - (11:21): CalebJamesDeLisl: i was not only about this comment  \nEnygma` left at 11:21 (Quit: Leaving.  \nEnygma` joined #xwiki at 11:21  \nCalebJamesDeLisl - (11:21): What else is there?  \ntmortagne - (11:22): there is some codestyle modification not related with this issue  \ntmortagne - (11:22): let me find my comments  \nCalebJamesDeLisl - (11:22): Yup, I can remove that from the patch.  \nCalebJamesDeLisl - (11:23): Hmm, there's an unclosed <p> block in ScriptMacroConfiguration javadoc  \ntmortagne - (11:23): (02:23:30 PM) <moi>: also you have a modification in MacroTransformation that is just codestyle  \ntmortagne - (11:24): (02:37:35 PM) <moi>: btw don't put comment with jira issue number in it, if there is not logical explanation for the code it should not be there. In this case it's more an improvement of what i done for XWIKI-5230 so it's really not directly related to XWIKI-5275  \nCalebJamesDeLisl - (11:25): Alex do you want to make these changes and upload a new patch with the changes?  \ntmortagne - (11:25): CalebJamesDeLisl: also don't forget to fix the @since tags before committing  \ntmortagne - (11:25): (abusenius could not know in which version it would be committed at the end)  \nCalebJamesDeLisl - (11:25): Ahh you saw my \"fix @since\" commit ;)  \ntmortagne - (11:26): CalebJamesDeLisl: i was only talking about abusenius patch ;)  \nabusenius - (11:26): I fixed @since to 2.4M2 in the last patch alread  \nabusenius - (11:26): y  \ntmortagne - (11:26): ok  \nabusenius - (11:26): and I guess its faster if you change it, Caleb  \nCalebJamesDeLisl - (11:27): So TODO: remove codestyle change to MacroTransformation, add configuration param to xwiki.properties.vm, remove XWIKI-\\*, remove stray <p> tag. anything else?  \nabusenius - (11:27): there is only one style change, in wrapInMacroMarker  \nabusenius - (11:27): the removed import is needed  \nabusenius - (11:28): otherwise there is fan out error  \nCalebJamesDeLisl - (11:28): Yup.  \ntmortagne - (11:28): CalebJamesDeLisl: about MacroTransformation just revert the file after applying teh patch, there is no modification exctep codestyle in it actually  \nabusenius - (11:28): there is a new comment :)  \ntmortagne - (11:29): sure but tht would be another committ  \nCalebJamesDeLisl - (11:29): I was going to delete that part from the diff file, same end.  \ntmortagne - (11:29): it has nothing to do with your patch  \nabusenius - (11:29): true  \ntmortagne - (11:29): i can commit it now if you absolutely want it ;)  \nabusenius - (11:30): yes I do :)  \ntmortagne - (11:30): ok :)  \nabusenius - (11:30): hate missing comments  \nCalebJamesDeLisl - (11:31): Hey, fix a bunch of comments, especially in xwiki.api.\\* and I will definitely commit that.  \nabusenius - (11:31): anyway, I think both 1.0 and 2.0 script fixes should also be backported to 2.3.1 and 2.2.something  \ntmortagne - (11:32): we don't support 2.2 anymore  \nabusenius - (11:32): ah ok, then 2.3.1  \nabusenius - (11:32): since we wanted to do an advisory etc.  \nabusenius - (11:33): are there more changes since 2.3.1?  \nCalebJamesDeLisl - (11:33): isScriptNested always returns false if isScriptNestingEnabled \u00a0seems like it shouldn't lie.  \nCalebJamesDeLisl - (11:33): Ok, fanout violation. Fine it should lie.  \nabusenius - (11:34): yea, that was the reason :)  \nCalebJamesDeLisl - (11:34): Should I add a TODO comment that the almost fanout violation should be refactored?  \nabusenius - (11:35): I guess so, its not nice  \ntmortagne - (11:36): yep  \nCalebJamesDeLisl - (11:42): What happens here? @param <P> the type of macro parameters bean.  \nCalebJamesDeLisl - (11:42): do we get an html <p> block?  \nanamarias left at 11:49 (Quit: anamarias  \nabusenius - (11:50): thats what eclipse generates, and at least in eclipse javadoc preview it seems to display what needed  \nCalebJamesDeLisl - (11:51): Ahh, I got rid of the unclosed <p> block because it didn't seem right. Above is something which had existed before, javadoc must escape it when it's after a @param tag.  \nCalebJamesDeLisl - (11:56): Ok, changes made. Everyone's on board with this? vmassol your silence is taken as acquiescence.  \ntmortagne - (12:03): CalebJamesDeLisl: @param is  \ntmortagne - (12:03): @param paramname descrciption text  \ntmortagne - (12:03): so here <P> is the param name and not part of the description of teh parameter so i don't see why it should be escaped  \ntmortagne - (12:04): that's the description of the generic type and AFAIK it's correct like that  \nCalebJamesDeLisl - (12:04): Yea, I figured javadoc would handle it correctly, it was there so I didn't touch it.  \nCalebJamesDeLisl - (12:04): BTW: committed.  \nCalebJamesDeLisl - (12:05): On to the test.  \nCalebJamesDeLisl - (12:06): abusenius: You can make your tests a lot faster by not edit, save, etc.  \ntmortagne - (12:07): does this really need an integration test ? unit test seems enough IMO  \nCalebJamesDeLisl - (12:08): It's not unit tested, he was having a problem parsing the error.  \ntmortagne - (12:08): at least for \"Prevent nested script macros\"  \nCalebJamesDeLisl - (12:09): abusenius: To make tests faster: getDriver().get(getUtil().getURL(\"Space\", \"Page\", \"preview\", new HashMap<String, String>(){{put(\"content\", \"the content you want on the page\");}});  \nabusenius - (12:10): I see, good idea  \nCalebJamesDeLisl - (12:10): Is there any way we can unit test this?  \nabusenius - (12:11): tmortagne: is it possible to use regex for matching in event/1.0 ? or can it be done differently?  \ntmortagne - (12:11): abusenius: no there is no regexp support in rendering test framework but you could do a \"normal\" unit test  \ntmortagne - (12:12): hmm you could also wrapp the macro  \ntmortagne - (12:12): and catch the exception  \nCalebJamesDeLisl - (12:12): I am partial to integration tests because they prove everything works. I'll apply this patch then we can add unit tests.  \nabusenius - (12:12): wdym wrap?  \ntmortagne - (12:12): to produce something \"nicer\" to match  \ntmortagne - (12:13): class VelocityMacroTest extends VelocityMacro  \ntmortagne - (12:13): and overwrite execute  \nabusenius - (12:13): ah, I see  \ntmortagne - (12:13): to change the exception by something else  \ntmortagne - (12:14): but pure junit/jmock test should not be too hard either  \ntmortagne - (12:14): that's usualy how we test for exception like that  \ntmortagne - (12:14): see IncludeMacroTest  \ntmortagne - (12:14): in include macro  \ntmortagne - (12:15): i added testIncludeMacroWithRecursiveInclude recently for example  \ntmortagne - (12:15): it's pretty much the same needs  \nabusenius - (12:16): looking..  \nabusenius - (12:17): yea, true  \ntmortagne - (12:18): CalebJamesDeLisl: \"@version $Id$\" looks like your svn client is not properly setup  \ntmortagne - (12:19): (Id is supposed to be automatically replaced by commit user and date)  \nCalebJamesDeLisl - (12:19): Hmm, it usually works. I always see my name and wonder how it got \\_there\\_.  \narkub left at 12:19 (Quit: Leaving  \ntmortagne - (12:20): CalebJamesDeLisl: that's because in many file sdumitriu explicitely configured the file itself to for the svn client to do it  \ntmortagne - (12:20): but you are siupposed to setup you client to do it automatically for new files  \nCalebJamesDeLisl - (12:20): @version $Id: ScriptMacroConfiguration.java 29494 2010-06-16 10:03:02Z cjdelisle $  \nCalebJamesDeLisl - (12:21): Yea it's just not in the patch email.  \nsburjan - (12:21): vmassol, : I am updating the import/export function. Should I createscreens forboth skins ? (PS: They look very much the same)  \nvmassol - (12:22): sburjan: I'd no then  \nvmassol - (12:22): on the phone right now  \nsburjan - (12:22): ok  \ntmortagne - (12:23): CalebJamesDeLisl: http://svn.xwiki.org/svnroot/xwiki/platform/core/trunk/xwiki-rendering/xwiki-rendering-macros/xwiki-rendering-macro-script/src/main/java/org/xwiki/rendering/macro/script/ScriptMacroConfiguration.java  \ntmortagne - (12:23): i don't see it  \nCalebJamesDeLisl - (12:24): http://svn.xwiki.org/svnroot/xwiki/platform/core/trunk/xwiki-rendering/xwiki-rendering-macros/xwiki-rendering-macro-script/src/main/java/org/xwiki/rendering/macro/script/DefaultScriptMacroParameters.java  \nCalebJamesDeLisl - (12:24): Not there either.  \nCalebJamesDeLisl - (12:24): I think you need to checkout in order to see it.  \ntmortagne - (12:24): CalebJamesDeLisl: i don't think so  \ntmortagne - (12:24): taht's something put by your client, in the file itself  \ntmortagne - (12:24): my client will not find it alone  \nCalebJamesDeLisl - (12:28): tmortagne: Have a look at this one: http://svn.xwiki.org/svnroot/xwiki/platform/xwiki-plugins/trunk/lucene/src/main/java/com/xpn/xwiki/plugin/lucene/IndexFields.java  \nmariusbutuc left at 12:28 (Quit: Leaving.  \ntmortagne - (12:29): seems weird to me  \nCalebJamesDeLisl - (12:30): On your disk you'll see your name and the revision etc.  \nCalebJamesDeLisl - (12:30): It happens on checkout rather than commit.  \nCalebJamesDeLisl - (12:30): It confused me for a while too.  \ntmortagne - (12:32): indeed i was sure it was about commit especially since i seen it in some committs  \nCalebJamesDeLisl - (12:37): What you are seeing is the older revision because nobody ever clears the content between $ $.  \nCalebJamesDeLisl - (12:37): So you are often checking in the content with the last author.  \nCalebJamesDeLisl - (12:38): with the revision id string from the last author.  \nvmassol - (13:18): CalebJamesDeLisl: just done a review of your commit  \nvmassol - (13:18): (by mail)  \nvmassol - (13:18): (was on the phone the whole morning)  \nCalebJamesDeLisl - (13:19): Ahh, sorry for excluding you from the decision, you could have said you were on the phone and I would have waited.  \nvmassol - (13:19): np  \nvmassol - (13:19): it's easier to comment on a commit btw  \nCalebJamesDeLisl - (13:20): what do you think of isNestedScriptViolation?  \nvmassol - (13:21): did you see my comments?  \nCalebJamesDeLisl - (13:21): Yes.  \nvmassol - (13:21): I'm proposing something more generic and IMO more object-oriented  \nvmassol - (13:21): so there's no notion of \"nestd script\"  \nvmassol - (13:21): there's only a notion of validation  \nvmassol - (13:21): ScriptValidator  \nvmassol - (13:22): NestedScriptValidator  \nvmassol - (13:22): no more utils!  \nvmassol - (13:22): (I hate utils)  \nvmassol - (13:22): for me utils is like spaghetti code  \nCalebJamesDeLisl - (13:23): So rename ScriptUtils to NestedScriptValidator?  \nvmassol - (13:23): basically yes  \nCalebJamesDeLisl - (13:24): Or are you talking about removing everything and taking another approach?  \nvmassol - (13:24): nope  \nvmassol - (13:24): I've put the code!  \nvmassol - (13:24): in comment  \nvmassol - (13:24): :)  \nvmassol - (13:24): try {  \nvmassol - (13:24): \u00a0for (ScriptValidator validator : componentManager.lookupList(ScriptValidator.class)) {  \nvmassol - (13:24): \u00a0\u00a0\u00a0\u00a0\u00a0validator.validate(context); <-- will throw ScriptValidationException  \nvmassol - (13:24): \u00a0}  \nvmassol - (13:24): } catch (ScriptValidationException e) {  \nvmassol - (13:25): \u00a0throw new MacroExecutionException(\"Script failed to pass validations. Reason = [\" + e.getMessage() + \"]\", e);  \nvmassol - (13:25): }  \nvmassol - (13:26): btw we might not need any config param with this  \nCalebJamesDeLisl - (13:26): No config param so it's always not allowed?  \nvmassol - (13:27): IMO there aren't a lot of use cases where you want it allowed and it the user really wants  \nvmassol - (13:27): it can be done by implementing a ScriptValidator that overrides the nestedscriptvalidator  \nvmassol - (13:27): (same hint)  \nCalebJamesDeLisl - (13:27): tmortagne: Didn't like that idea.  \nvmassol - (13:27): I think it was not presented in this manner  \nvmassol - (13:28): it's a small and focused component  \nvmassol - (13:28): ok what we could do if tmortagne doesn't agree is this;:  \nvmassol - (13:28): replace the config param  \nvmassol - (13:28): with a param config listing the validator hints to execute  \nvmassol - (13:28): by default it would contain one validator: \"nested\"  \nvmassol - (13:29): (validator hints = hints of the validators)  \nCalebJamesDeLisl - (13:29): What other possible validators might we ever have?  \nvmassol - (13:29): for ex  \nvmassol - (13:29): forbid using the ruby macro  \nvmassol - (13:29): I don't know  \nvmassol - (13:29): anything you want  \nvmassol - (13:29): forbid having some special content  \nvmassol - (13:30): we can pass more data in parameters to the vlaidator  \nCalebJamesDeLisl - (13:30): ruby should be forbidden but why not just remove the ruby macro, or comonoent-override it?  \nvmassol - (13:30): ok then it's not a good ex  \nvmassol - (13:30): but based on content it's a good one  \nvmassol - (13:30): or based on params  \nvmassol - (13:30): or based on the cycle of the moon  \nvmassol - (13:31): or based on the context , ie depending on what page you're on  \nvmassol - (13:31): so that for some special page you allow it  \nvmassol - (13:31): and not on other pages  \nvmassol - (13:31): I don't know  \nvmassol - (13:31): you can imagine whatever you want  \nCalebJamesDeLisl - (13:31): I worry about making something generic if we can't imagine another use for it.  \nvmassol - (13:31): my examples don't convince you?  \nCalebJamesDeLisl - (13:32): Is it a scriptValidator or a macroValidator?  \nvmassol - (13:32): macro validator would be my choice if we can make it at that level  \nvmassol - (13:32): I was just tryiong not to make big changes  \nvmassol - (13:32): to your commit  \nvmassol - (13:32): the change I proposed is really small  \nvmassol - (13:33): now as I was trying to arguye  \nvmassol - (13:33): for a more general mechanism  \nvmassol - (13:33): but nobody was listening, remmeber  \nvmassol - (13:33): :)  \nCalebJamesDeLisl - (13:33): If it's a MacroValidator then we can use it to decide who gets to run the html macro for ex.  \nvmassol - (13:33): my comment here  \nvmassol - (13:34): is only to get rid of this ugly util component  \narkub joined #xwiki at 13:34  \nvmassol - (13:34): as quickly as possible  \nCalebJamesDeLisl - (13:34): What I heard from \"general mechanism\" was transformation which I think is technically impossible.  \nvmassol - (13:34): now if you want to discuss something more generic  \nvmassol - (13:34): I'm fine  \nvmassol - (13:34): nope  \nvmassol - (13:34): I didn't say that  \nvmassol - (13:34): I said transformation OR filter  \nvmassol - (13:35): I even said  \nvmassol - (13:35): that my pref was for Tx  \nvmassol - (13:35): and if not possible for filter  \nvmassol - (13:35): I still don' tknow if Tx is not possible  \nvmassol - (13:35): but again Im busy on other stuff  \nvmassol - (13:35): I've alrady spent a lot of time on this  \nCalebJamesDeLisl - (13:35): Ok, filter being a new concept that makes sense.  \nvmassol - (13:35): and you too  \nvmassol - (13:36): I wanted to kepp my comment general  \nvmassol - (13:36): not to spend time  \nvmassol - (13:36): but I guess I've been dragged into it  \nvmassol - (13:36): :)  \nCalebJamesDeLisl - (13:36): Ok, your change will be made.  \nCalebJamesDeLisl - (13:36): Anyway that Utils class was only ever going to have one util so I dodn't much like that either.  \nmariusbutuc joined #xwiki at 13:36  \nvmassol - (13:37): CalebJamesDeLisl: a macro validator would be great though for the future but this can wait a bit  \nvmassol - (13:38): although maybe it's not more work\u2026 I'll let you decide\u2026 :)  \nCalebJamesDeLisl - (13:38): Default: false (disabled) <-- better?  \nvmassol - (13:38): almost  \nvmassol - (13:38): :)  \nvmassol - (13:38): a sentence might be good too  \nvmassol - (13:38): does this mean that by default it's disabled?  \nvmassol - (13:38): false is certainly better than 0  \nCalebJamesDeLisl - (13:39): Ok.  \nvmassol - (13:39): but I don't know what this means in an interface  \nvmassol - (13:39): this is implementation  \nvmassol - (13:39): not interface IMO  \nCalebJamesDeLisl - (13:39): Good point, removing it entirely.  \nvmassol - (13:39): this too:  \nvmassol - (13:39): + \\* You can override the default values for each of the configuration properties below by defining them in XWiki's global  \nvmassol - (13:39): + \\* configuration file using a prefix of \"rendering.macro.script\" followed by the property name. For example:  \nvmassol - (13:39): + \\* <code>rendering.macro.script.nestedscripts.enabled = 1</code>  \nvmassol - (13:39): this is also implementation  \nCalebJamesDeLisl - (13:42): hmm s/isNestedScriptsEnabled/areNestedScriptsEnabled/  \nCalebJamesDeLisl - (13:42): no never mind, \"is\" is generic term for boolean  \nvmassol - (13:43): IMO we don't need this anymore  \nvmassol - (13:43): since it could be replaced by a list of validators to execute  \nvmassol - (13:43): unless we want to execute them all  \nvmassol - (13:43): in which casae we can remove the config param altogether  \nvmassol - (13:44): (depends on tmortagne for the param removal)  \nCalebJamesDeLisl - (13:44): I will remove it for now.  \nvmassol - (13:45): I'm for the less clutter possible  \nvmassol - (13:45): yes I think it's better to remove  \nvmassol - (13:45): and wait for someone to ask us about it  \nvmassol - (13:46): (especially since there's always a solution based on components)  \nsburjan - (13:54): vmassol : are you around ?  \nvmassol - (13:54): yes  \nsburjan - (13:54): check this out  \nsburjan - (13:54): http://platform.xwiki.org/xwiki/bin/view/AdminGuide/User%20Management  \nvmassol - (13:55): what do you want me to check?  \nsburjan - (13:55): Should I switch to Colibri screens  \nsburjan - (13:55): right ?  \nvmassol - (13:55): the fact that it's not documented at the right level?  \nsburjan - (13:55): yes  \nsburjan - (13:55): and the screens are old  \nvmassol - (13:55): - registration should go in the admin app (I think caleb put it there)  \nvmassol - (13:56): - user profile is in the admin app too I think  \nvmassol - (13:56): for now you could just redo the screens  \nvmassol - (13:56): till we complete this morning's discussion  \nvmassol - (13:57): yes colibri  \nvmassol - (13:57): and toucan when the screens are very different  \nvmassol - (13:57): (I think they're the same)  \nsburjan - (13:57): they are  \nsburjan - (13:57): okay  \nsburjan - (13:57): screens onlythen  \ntmortagne - (13:59): CalebJamesDeLisl, vmassol: I'm ok with list of validators, it's indeed nicer, i even have one more use case: the test for programming right which is done in all script macros except velocity one which i don't like the way it is currently  \nCalebJamesDeLisl - (14:00): Is @Requiring a list of validators ok or are we going to want to hot add them?  \nvmassol - (14:00): lookupList is always better I think  \nvmassol - (14:01): unless we really want a list based on configuration  \ntmortagne - (14:01): CalebJamesDeLisl: make it dynamic makes it ready for wiki componenents and extension manager  \nvmassol - (14:01): tmortagne: so you agree to drop the config part?  \nvmassol - (14:01): (otherwise it's anti-dynamic ;))  \ntmortagne - (14:02): vmassol: i did not say that  \ntmortagne - (14:02): the default is to test all validators  \nCalebJamesDeLisl - (14:02): where do I find lookupList? this is new to me.  \nvmassol - (14:02): CM  \nvmassol - (14:02): lookList + lookupMap  \ntmortagne - (14:03): CalebJamesDeLisl: in the ComponentManager you have several lokkp apis  \nvmassol - (14:03): tmortagne: so if the config is not defined all  \nvmassol - (14:03): else the list?  \nCalebJamesDeLisl - (14:03): Hmm, fanout.  \ntmortagne - (14:03): vmassol: yep  \nvmassol - (14:03): fine with me  \nvmassol - (14:03): default should be all  \ntmortagne - (14:03): yep  \nCalebJamesDeLisl - (14:06): does \u00a0\u00a0\u00a0\u00a0public void validate(MacroTransformationContext) provide enough?  \nvmassol - (14:07): probably need macro data too  \ntmortagne - (14:07): CalebJamesDeLisl: you should also give parameters i think  \nvmassol - (14:07): content + params  \ntmortagne - (14:07): and probably content too  \nCalebJamesDeLisl - (14:07): What would the line look like?  \nCalebJamesDeLisl - (14:08): MacroTransformationContext context, String content, Object... parameters?  \nvmassol - (14:08): there's an object for params  \ntmortagne - (14:08): CalebJamesDeLisl: the macro parameters  \ntmortagne - (14:08): look at script macro  \nCalebJamesDeLisl - (14:08): Ok, I was about to ask where the params were coming from.  \ntmortagne - (14:08): isn't it a ScriptMacroValidator ?  \nvmassol - (14:08): in term of order  \nvmassol - (14:09): I'd use the exact same order as Macro.execute  \nvmassol - (14:09): for consistency  \nvmassol - (14:09): ok for SMV  \ntmortagne - (14:10): yep better follow Macro.execute  \nvmassol - (14:10): I'm still wondering if it wouldn't be better to do a MV right away  \nvmassol - (14:10): might not be more work  \nvmassol - (14:10): MV = MacroValidator  \nvmassol - (14:10): and will prevent a deprecation phase  \nvmassol - (14:11): which is always a pain  \nCalebJamesDeLisl - (14:11): If everything is internal why do we need a deprecation phase?  \nvmassol - (14:11): it's not internal  \ntmortagne - (14:11): it could  \nvmassol - (14:12): could = could be internal?  \ntmortagne - (14:12): we don't have to make it public interface  \nvmassol - (14:12): yes but then it's not a feature  \nvmassol - (14:12): tmortagne: wdyt about MV?  \nCalebJamesDeLisl - (14:12): I can't find LookupList, find-grep LookupList returns nothing.  \ntmortagne - (14:13): for now we want a nice way to protect from nested script macros, the goal is not to introduce this new feature, it can always be decided latter with more though maybe  \nvmassol - (14:13): MV sounds attractive to me and pretty generic  \nvmassol - (14:13): we juste need to decide what to pass to recognize the macro  \nvmassol - (14:13): s/we juste/we'd just/  \nvmassol - (14:14): you think it's too rushed?  \ntmortagne - (14:14): vmassol: yes MV is nice i just don't want to rush it too much since we don't really need it at this level  \nCalebJamesDeLisl - (14:14): There is no AbstractMacro.evaluate so how would it get run?  \ntmortagne - (14:14): CalebJamesDeLisl: it would be run before the call to execute  \nvmassol - (14:14): ok fine but I'm pretty sure we'll need it one day and since it's not more work  \ntmortagne - (14:14): in the MacroTrnasformation  \ntmortagne - (14:15): MacroTransformation  \nvmassol - (14:15): but ok we can do it in 2 steps  \nvmassol - (14:20): silviar: might be great to add nice icons for applications. For ex: http://enterprise.xwiki.org/xwiki/bin/view/Main/Features  \nsburjan - (14:20): vmassol : I have a question  \nvmassol - (14:20): (they can be picked from our icon set used on xwiki.org)  \nvmassol - (14:20): (there are only 2 icons defined for apps right now: search and tags)  \nvmassol - (14:21): s/silviar/silviar+sburjan/  \nsilviar - (14:21): yes, they would look nice; I'll talk to Caty and Ciprian about it  \nvmassol - (14:21): you don't need to create them  \nvmassol - (14:21): since we're already using an icon set  \nsilviar - (14:21): yes, but maybe they can pick the best for each app  \nvmassol - (14:21): thought you wanted them to create them  \nvmassol - (14:22): because picking them is easy but your call  \nsburjan - (14:22): http://platform.xwiki.org/xwiki/bin/view/AdminGuide/User%20Management#HChangingthepasswordforanyuser .At this section, t he trick with ?xpage=passwd ..wouldnt it be more simple to integrate in some interface rather than in some interface ?  \nvmassol - (14:23): sburjan: that's an old trick  \nvmassol - (14:23): should be removed  \nvmassol - (14:23): now that we have a UI for it  \nvmassol - (14:23): oh wait  \nvmassol - (14:24): that's for any user  \nsburjan - (14:24): for ANY, yes  \nsburjan - (14:24): and I don't find anywhere in the interface to change for ANY user  \nvmassol - (14:25): sburjan: just tested  \nvmassol - (14:25): it works fine  \nsburjan - (14:25): okay. but shouldn't this be moved to some interface ?  \nvmassol - (14:25): it is htere!  \nvmassol - (14:25): that's what I mean by \"it works fine\"  \nvmassol - (14:25): you just go the profile of the person for which you wish to change the pws  \nvmassol - (14:25): s/pws/pwd  \nvmassol - (14:26): and click on the change pwd button  \nvmassol - (14:26): :)  \nvmassol - (14:26): it cannot be more easy  \nvmassol - (14:26): :)  \nsburjan - (14:26): okay. I will remove the trick from the documentation then  \nvmassol - (14:26): yep  \nsburjan - (14:26): and explain these steps  \nsburjan - (14:26): ok  \nCalebJamesDeLisl - (14:27): Do we use camel case for component roles? Not thinking today.  \nvmassol - (14:29): \"nested\" should be enough no?  \nvmassol - (14:29): for a SMV  \nvmassol - (14:29): you're talking hint I presume  \nvmassol - (14:29): (not role)  \nCalebJamesDeLisl - (14:31): I was going to do nestedScript and them make ScriptMacroValidator interface be MacroValidator.  \nCalebJamesDeLisl - (14:32): Since then all we have to do is add the hook to validate other macros. Make sense?  \nevalica - (14:32): vmassol: I don't quite see the value of adding icons for each application - and is not very scalable - and we need to keep track of other icons that were set for other applications  \nevalica - (14:33): vmassol: k I get it now .. just for those /Main/Features - k  \nflorinciu left at 14:34 (Quit: Leaving.  \nplunden left #xwiki at 14:49  \nsburjan left at 14:50 (Quit: Ex-Chat  \ntmortagne - (14:57): CalebJamesDeLisl: core build is broken, checkstyle error in script macro  \ntmortagne - (14:58): it does not like @todo, use a separated // TODO instead  \nCalebJamesDeLisl - (15:09): Ok, thanks.  \nbbc581 left at 15:38 (Quit: bbc581  \nevalica left #xwiki at 15:42  \nEnygma` left at 15:46 (Ping timeout: 240 seconds  \nsilviar - (15:48): Hi! Can someone please take a look at this page? http://code.xwiki.org/xwiki/bin/view/Applications/AnnotationsApplication  \nsilviar - (15:49): It seems I can't edit it inline  \nsilviar - (15:49): And attaching an Icon to it doesn't work either  \ntmortagne - (15:54): silviar: same thing with object editor actually  \ntmortagne - (15:54): ha no the content is somwhere else i think  \ntmortagne - (15:55): silviar: go to platform:Features.Annotations page  \ntmortagne - (15:55): the way it's done is bad, the {{include document=\"platform:Features.Annotations\" context=\"new\"/}} should be in the object i think  \nsilviar - (15:55): I see; :) and do you have an Idea how to go about adding the icon?  \nsilviar - (15:56): I should copy the content to the page directly, right? From the features page  \ntmortagne - (15:56): i don't know why it's done that way, it's a mess  \nsilviar - (15:57): I think it's done that way to make sure any changes done on one page are reflected in the other  \nsilviar - (15:57): but there won't be a need for that  \ntmortagne - (15:57): code:Applications.PanelsApplication and platform:Features.Annotations page should be rethink for sure  \nsilviar - (15:57): The features page will be much shorter  \nsilviar - (15:57): and will point to the Application Page  \ntmortagne - (15:57): it does not make sense to have icons on http://code.xwiki.org/xwiki/bin/view/Applications/PanelsApplication  \ntmortagne - (15:57): \\*images  \ntmortagne - (15:58): since theses images are supposed to be on platform:Features.Annotations already  \nsilviar - (15:59): I've discussed this earlier today with vmassol and we concluded we should keep most of the info on the Application page  \nsilviar - (15:59): and only have a summary on the features page  \ntmortagne - (16:00): silviar: i'm talking about what is done technically now, i'm not talking about the result  \ntmortagne - (16:00): whatever you want to do there is no reason to duplicate images the way it's done currently  \narkub left at 16:01 (Quit: Leaving  \nmariusbutuc left at 16:01 (Quit: Leaving.  \ntmortagne - (16:01): i don't understand why you have images attached to http://code.xwiki.org/xwiki/bin/view/Applications/PanelsApplication page  \ntmortagne - (16:02): the images should be where the content is  \nsilviar - (16:02): you mean annotations, right?  \ntmortagne - (16:02): no  \ntmortagne - (16:02): i mean images  \ntmortagne - (16:03): look at attachements on the pages  \ntmortagne - (16:03): the image of this page are attached in both pages  \nvmassol - (16:03): jvdrean: thanks  \nvmassol - (16:03): :)  \ntmortagne - (16:03): the attachement in http://code.xwiki.org/xwiki/bin/view/Applications/PanelsApplication are useless  \ntmortagne - (16:03): s/attachement/attachements/  \nvmassol - (16:04): the panel wizard needs to be documented somewhere though  \nsilviar - (16:06): Don't you mean annotations being both in platform:Features & code:Applications?  \nsilviar - (16:06): :)  \nsilviar - (16:06): and both pages having the same images attached?  \nsilviar - (16:07): when in fact the content is stored in a single page?  \ntmortagne - (16:10): silviar: i don't know what you are calling annotations here but i'm only talking about attachements  \ntmortagne - (16:11): again there is no reason to have all the attachements i see on code:Applications page since theses are already on platform:Features  \nsilviar - (16:13): ok :) By Annotations I meant the annotations page on code:Applications; we were talking about the same thing  \nsilviar - (16:14): now the issue is how to I proceed to editing code:Applications.Annotations  \nsilviar - (16:14): so that it's no longer dependent on features page  \ntmortagne - (16:14): al is the wiki content  \ntmortagne - (16:15): s/al/all/  \ntmortagne - (16:15): edit in wiki mode  \ntmortagne - (16:15): to remove the include  \ntmortagne - (16:15): the second include  \nsilviar - (16:15): it is enough to remove {{include document=\"platform:Features.Annotations\" context=\"new\"/}}?  \ntmortagne - (16:15): it should not be here anyway  \nsilviar - (16:15): a, ok  \nsilviar - (16:15): :)  \nsilviar - (16:15): thanks  \ntmortagne - (16:15): even if you want to include another page the include should be in inline content  \nsilviar - (16:16): got it  \nvmassol - (16:20): CalebJamesDeLisl: what's the status re the invitation manager? is there anything to do to it before the 2.4 final release?  \nvmassol - (16:20): (haven't tested it yet myself)  \nCalebJamesDeLisl - (16:21): Add a means to access it (maybe from the user profile)  \nvmassol - (16:21): is it supposed to be accessible by anyone in the default XE?  \nvmassol - (16:21): or just admin?  \nvmassol - (16:22): (I guess I need to try it to know)  \nvmassol - (16:22): is it supposed to be done and usable right now?  \nvmassol - (16:22): (except for this accessibility part)  \nCalebJamesDeLisl - (16:22): Accessable to anyone, to prevent that just disable view to Invitation.WebHome  \nCalebJamesDeLisl - (16:22): Also XAINVITATION-5  \nvmassol - (16:23): ok so we could ask silviar and sorin to help us test it?  \nvmassol - (16:23): silviar: have you or sorin looked at it already  \nvmassol - (16:23): ?  \nCalebJamesDeLisl - (16:24): Yup, sometimes the tables get too large but trying to fix that with CSS made it ugly all the time.  \nvmassol - (16:24): CalebJamesDeLisl: hmm maybe we need caty's help to beautify it then?  \nCalebJamesDeLisl - (16:25): It's only when the email address is too long. Usually it isn't an issue.  \nsilviar - (16:25): I've only tested it on the incubator so far  \nsilviar - (16:25): Sorin, not yet  \nCalebJamesDeLisl - (16:26): Incubator is an old version.  \nvmassol - (16:26): silviar: it should be avail in recent snapshots  \nvmassol - (16:26): of X 2.4  \nvmassol - (16:26): \\*XE  \nvmassol - (16:26): silviar: do you think sorin or you could plan to test it?  \nvmassol - (16:27): (fyi XE 2.4 M2 is planned to be released next Monday)  \nsilviar - (16:27): yes, I know about the release date; I'll talk to Sorin to test it, if that's ok with you  \nvmassol - (16:27): sure  \nvmassol - (16:27): great  \nvmassol - (16:27): thanks  \nsilviar - (16:27): np  \nCalebJamesDeLisl - (16:27): My main goal is to get INVITATION-5 fixed and provide a link in the user profile (XAINVITATION-6)  \nvmassol - (16:28): CalebJamesDeLisl: re user profile that sounds slightly strange to me  \nvmassol - (16:28): was this disucssed on the list (I may have missed mails)  \nlucaa - (16:28): hmm.. guys, what kind of rights do I need to have to have a macro defined in a wiki page recognized as a macro? I have a page with macros invocations and when I log out some of the macros give \"unknown macro\" errors?  \nvmassol - (16:28): maybe caty has some ideas on this  \nlucaa - (16:28): (without ? at the en)  \nlucaa - (16:28): d  \nvmassol - (16:28): lucaa: depends on visibility  \nvmassol - (16:28): (if you're talking about wiki macros)  \nlucaa - (16:29): yes  \nCalebJamesDeLisl - (16:29): Somebody suggested it (I forgot who) I have no idea where to put it.  \nlucaa - (16:30): vmassol: and I assume I need to choose at least current wiki  \nvmassol - (16:30): depedns what you want to do  \nlucaa - (16:30): I want it visible to gues  \nlucaa - (16:30): t  \nvmassol - (16:30): anyway you need PR for global visibility  \nvmassol - (16:30): ie in all subwikis  \nlucaa - (16:31): but how does this work? what does current user mean?  \nvmassol - (16:31): lucaa: otherwise you just need edit rights  \nvmassol - (16:31): lucaa: \u00a0DefaultWikiMAcroManager.isAllowed()  \nlucaa - (16:32): vmassol: was that a RTFC?  \nvmassol - (16:32): yes luke  \nvmassol - (16:32): if you're curious  \nvmassol - (16:32): otherwise you just read what I've typed above  \nvmassol - (16:32): current user means that only your user will see that macro  \nvmassol - (16:33): you're lucky I was going to RTFM you to http://platform.xwiki.org/xwiki/bin/view/DevGuide/WikiMacroTutorial but it's not documented :)  \nlucaa - (16:34): assuming that my user saved the macro? created the macro? or what? or it just means \"registered user\" (as in <> XWiki.Guest)  \nlucaa - (16:34): also, the fact that it's not visible it means that it just isn't executed? as in I save the page with my user and I cannot view it with other user?  \nvmassol - (16:34): saved  \nlucaa - (16:34): (there's a WAFM for that ;) )  \nlucaa - (16:35): unless current user is some sort of an admin in which case he would see anything, right? regardless of who saved the macro...  \nvmassol - (16:36): nope  \nvmassol - (16:36): only the user who saved  \nvmassol - (16:36): it's for a single user  \nvmassol - (16:36): private macro feature  \nlucaa - (16:36): well, there's a bug in there then, I was able to use a macro I didn't save  \nvmassol - (16:36): with visibility = user?  \nlucaa - (16:36): yepo  \nlucaa - (16:37): can you save this page for me please, to change the author  \nlucaa - (16:37): http://incubator.myxwiki.org/xwiki/bin/view/XWiki/PanelMacro  \nvmassol - (16:38): done  \nlucaa - (16:40): I can still see this http://incubator.myxwiki.org/xwiki/bin/view/Sandbox/PanelsMacroTest correctly  \nlucaa - (16:41): with my global user which has a lot of rights and so on  \nlucaa - (16:41): if I logout though, I cannot see it anymore  \nlucaa - (16:41): I get unknown macro exc  \ntmortagne - (16:41): i get a \"Unknown macro: panel\"  \nvmassol - (16:41): looks like a bug then  \ntmortagne - (16:41): with my farm admin user  \ntmortagne - (16:42): so it's working well for me  \nvmassol - (16:42): becuase the way it works is that it's registereed in a map with the currnet user as the key  \nlucaa - (16:42): with a local little user I get an exception  \nlucaa - (16:42): then is my user some sort of ... god?  \nlucaa - (16:42): farm admin  \ntmortagne - (16:43): did you really refreshed the page ? ;)  \nlucaa - (16:43): wahahah, good one tmortagne  \nlucaa - (16:43): I logged in and out a few times so I guess I did...  \ntmortagne - (16:44): \"Unknown macro: panel\" with guest user too  \ntmortagne - (16:44): lucaa: \u00a0where is the macro itself ?  \nlucaa - (16:45): (05:37:51 PM) lucaa: http://incubator.myxwiki.org/xwiki/bin/view/XWiki/PanelMacro  \nlucaa - (16:45): maybe the're two?  \nlucaa - (16:45): like a copy of this page?  \ntmortagne - (16:46): vmassol: doe snot macro works for you ?  \ntmortagne - (16:46): on http://incubator.myxwiki.org/xwiki/bin/view/Sandbox/PanelsMacroTest  \nvmassol - (16:46): I saved it  \nvmassol - (16:46): so i can view it  \ntmortagne - (16:46): did you tied on http://incubator.myxwiki.org/xwiki/bin/view/Sandbox/PanelsMacroTest ?  \ntmortagne - (16:46): tried  \nvmassol - (16:47): yes it works for me and that's normal since I saved that wiki macro  \nlucaa - (16:47): ok, I'll save it now and we'll see if vmassol still sees it  \ntmortagne - (16:47): vmassol: i know that's normal... i trying to find why it's working for lucaa  \nlucaa - (16:47): try again, both  \ntmortagne - (16:48): \"Unknown macro: panel\" for me  \nvmassol - (16:48): I can see it  \nvmassol - (16:49): looks like some cache issue  \nlucaa - (16:49): tmortagne, can you save as well so that we all can see it?  \nlucaa - (16:49): :)  \ntmortagne - (16:49): vmassol: yes i think when you save the macro it's not removed from the former user CM  \nvmassol - (16:50): tmortagne: yes  \nvmassol - (16:50): there's an unregister  \nvmassol - (16:50): but it's done with the current user probably  \nvmassol - (16:50): checking  \ntmortagne - (16:50): yep  \ntmortagne - (16:50): actually it's not that simple, the unregoster should take care of the old value of the visibility too  \nvmassol - (16:51): lucaa: so you found a bug  \nvmassol - (16:52): so basically once you have to right to view the macro you'll get it till the next restart  \nvmassol - (16:52): s/to right/the right/  \nvmassol - (16:53): (when current user visibility is used)  \nlucaa - (16:53): vmassol: it was totally by mistake. I thought I could see / use the macro without ever saving it before (it was initially saved by the author) but I might have remembered bad, since this explanation doesn't apply to that case  \nvmassol - (16:53): same problem with current wiki too  \nlucaa - (16:53): s/saved by the author/saved by the creator/  \nlucaa - (16:56): can you leave that macro on the incubator with current wiki? I kinda need it visible  \nlucaa - (16:56): thanks  \ntmortagne - (16:56): vmassol: i don't understand how onEvent even worked for deleted macros  \nvmassol - (16:57): you mean \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0} else if (event instanceof DocumentDeleteEvent) {  \nvmassol - (16:57): doesn'nt work?  \ntmortagne - (16:57): yes  \ntmortagne - (16:57): it can't  \nvmassol - (16:57): we don't send delete events?  \ntmortagne - (16:57): no that's not it  \ntmortagne - (16:57): it's calling unregisterMacroInternal with the document reference  \ntmortagne - (16:58): and unregisterMacroInternal is trying to unregister something that doe snot exists anymore  \ntmortagne - (16:58): since it onlu has the documen reference  \nvmassol - (16:58): ah  \nvmassol - (16:58): :)  \ntmortagne - (16:58): and not the old version of the document which in in the event datas  \nvmassol - (16:58): indeed  \nvmassol - (16:58): we need to add some tests  \ntmortagne - (16:59): yep i tough we had some but since it's a bad design it loiks like it has bnot been even teste by hand  \nevalica joined #xwiki at 16:59  \ntmortagne - (16:59): s/teste/tested/  \nvmassol - (16:59): tmortagne: you're creating the jira issue for it?  \nvmassol - (16:59): (please say yes :))  \ntmortagne - (17:00): let's say ok boss  \nvmassol - (17:00): coooool  \nvmassol - (17:00): :)  \nvmassol - (17:02): CalebJamesDeLisl: this should be removed I believe  \nvmassol - (17:02): + \u00a0\u00a0\u00a0@Requirement(role = ScriptMacroValidator.class)  \nvmassol - (17:02): + \u00a0\u00a0\u00a0private List<ScriptMacroValidator> validators;  \nvmassol - (17:03): it makes them static  \nCalebJamesDeLisl - (17:03): So then how do we get to the validators?  \nvmassol - (17:03): actually I really need to take the time  \nvmassol - (17:03): to work on a proxy version for the injections  \nvmassol - (17:04): so that they are dynamic even when injected with @requiremeent  \nvmassol - (17:04): right now, it's cm.lookupList  \nCalebJamesDeLisl - (17:04): Like Guice provider. That's a great idea.  \nvmassol - (17:04): or like CDI  \nvmassol - (17:04): (JSR299)  \nCalebJamesDeLisl - (17:04): Ok, I was looking for LookupList (a class) and couldn't find it.  \nvmassol - (17:04): they use Instance<MyComponent> myComponent  \nvmassol - (17:05): and then you do myComponent.get()  \nvmassol - (17:05): (myComponent field being injected)  \nvmassol - (17:05): that allows both static and dynamic forms  \nvmassol - (17:05): I still don't know if we want static in some cases or not  \ntmortagne - (17:06): CalebJamesDeLisl:  \ntmortagne - (17:06): @Requirement  \ntmortagne - (17:06): private ComponentManager componentManager;  \nCalebJamesDeLisl - (17:06): If we don't want static, how about having a list which is dynamic?  \ntmortagne - (17:06): to get the CM  \nCalebJamesDeLisl - (17:06): Boom fanout violation.  \nvmassol - (17:06): :)  \nvmassol - (17:07): maybe 21 is too low\u2026. huh huh  \nvmassol - (17:07): we have some exceptions added in some checkstyle configs and that's not good  \nCalebJamesDeLisl - (17:07): I like the idea that the list returned is always dynamic.  \nvmassol - (17:07): I had one or two myself and couldn't find a good idea to reduce the fanout  \nvmassol - (17:08): CalebJamesDeLisl: it wouldn't be just for list but for any returned type  \nCalebJamesDeLisl - (17:08): ?  \nvmassol - (17:08): @Requirement  \nvmassol - (17:09): private MyComponentRole myComponent;  \nCalebJamesDeLisl - (17:09): What I mean is when I call a list the way I did, I should get a list which is a \"view\" of the component registry.  \nvmassol - (17:10): CalebJamesDeLisl: you need 2 tests IMO  \nvmassol - (17:10): macroscript3  \nvmassol - (17:10): you've hijacked a test!  \nvmassol - (17:10): :)  \nvmassol - (17:10): the test was about \"+.# Validate wiki=false option\"  \nvmassol - (17:10): and now it's about a lot more  \nflorinciu joined #xwiki at 17:11  \nvmassol - (17:11): I think a separate tests for this feature would be better  \njvdrean left at 17:11 (Quit: Leaving.  \nCalebJamesDeLisl - (17:11): AFAIK no changes were made to unit tests.  \nvmassol - (17:11): ah no my bad  \nvmassol - (17:11): you haven't added a test!  \nvmassol - (17:11): we need one  \nvmassol - (17:11): to prove that it works  \nCalebJamesDeLisl - (17:12): r29501  \nvmassol - (17:12): ah  \nvmassol - (17:12): no  \nCalebJamesDeLisl - (17:12): It is an integration test though.  \nvmassol - (17:12): not ui-tests  \nvmassol - (17:12): ouch  \nvmassol - (17:12): bad  \nvmassol - (17:12): we \\*awlays\\* need unit tests  \nvmassol - (17:12): always always always  \nvmassol - (17:12): and \\*sometimes\\* functional tests  \nvmassol - (17:12): :)  \nvmassol - (17:13): why everything?  \nCalebJamesDeLisl - (17:13): Trying to figure out whether i'm past halfway through this quagmire.  \nvmassol - (17:13): I think you are  \njvdrean joined #xwiki at 17:13  \nvmassol - (17:13): a unit test should be pretty easy to write  \nvmassol - (17:13): much more than a functional test  \nvmassol - (17:14): but yes  \nvmassol - (17:14): personally I wouldn't have applied the patch  \nvmassol - (17:14): without a unit test  \nCalebJamesDeLisl - (17:14): I learned to hate unit tests because xwiki-core is such a rat's nest.  \nvmassol - (17:14): xwiki-core indeed  \nabusenius - (17:15): I can write those unit tests, I just didn't know how to fix old ones  \nCalebJamesDeLisl - (17:15): Great. I have other stuff to do today.  \nabusenius - (17:16): the problem is that they were testing e.g. if the inner macro is evaluated  \nabusenius - (17:16): but there are only script macros available, and nested scripts are forbidden now  \nCalebJamesDeLisl - (17:17): I actually like functional tests because they prove everything works. Unit tests are like an advanced debugging tool IMO.  \nvmassol - (17:17): CalebJamesDeLisl: not really but we could talk a long time avbout this  \nvmassol - (17:17): since this is my domain of predilection  \nvmassol - (17:17): :)  \nvmassol - (17:18): (unfortunatley we both don't have the time right now)  \nabusenius - (17:18): but testing that nested scripts fail is easy  \nCalebJamesDeLisl - (17:18): Ping me when you have some tests.  \nabusenius - (17:18): ok  \nevalica left at 17:18 (Read error: Connection reset by peer  \nbblfish left at 17:19 (Quit: Leaving.  \nCalebJamesDeLisl - (17:19): lunch time  \nevalica joined #xwiki at 17:19  \nvmassol - (17:19): bon appetit  \nbblfish joined #xwiki at 17:20  \nKermitTheFragger joined #xwiki at 17:31  \narkub joined #xwiki at 17:31  \nsilviar left at 17:37 (Quit: Leaving.  \nflorinciu left at 17:53 (Quit: Leaving.  \nflorinciu joined #xwiki at 18:00  \nflorinciu left at 18:21 (Quit: Leaving.  \narkub left at 18:39 (Quit: Leaving  \nmflorea left at 18:50 (Quit: Leaving.  \nKermitTheFragger left at 18:52 (Quit: Leaving  \nevalica left at 19:02 (Ping timeout: 260 seconds  \njvdrean left at 19:18 (Quit: Leaving.  \nlucaa left at 19:21 (Quit: Leaving.  \nabusenius left at 19:28 (Ping timeout: 276 seconds  \nabusenius joined #xwiki at 19:33  \njfx joined #xwiki at 19:36  \ntmortagne left at 19:39 (Quit: Leaving.  \nvmassol left at 19:42 (Quit: Leaving.  \nmflorea joined #xwiki at 20:03  \nmflorea left at 20:08 (Quit: Leaving.  \nnuvolari left at 20:39 (Remote host closed the connection  \nvmassol joined #xwiki at 20:40  \nvmassol1 joined #xwiki at 20:44  \nvmassol1 left at 20:44 (Client Quit  \nvmassol1 joined #xwiki at 20:46  \nvmassol left at 20:48 (Ping timeout: 245 seconds  \nnuvolari joined #xwiki at 20:54  \nabusenius left at 22:02 (Quit: Konversation terminated!  \nabusenius joined #xwiki at 22:02  \ndlindgren left at 22:25 (Quit: Page closed  \nflorinciu joined #xwiki at 23:11  \nvmassol1 left at 23:15 (Quit: Leaving.  \nvmassol joined #xwiki at 23:16  \nvmassol left at 23:29 (Quit: Leaving.  \nnpm left at 23:33 (Quit: Leaving.  \nnpm joined #xwiki at 23:37  \n\n"}