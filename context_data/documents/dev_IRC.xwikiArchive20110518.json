{"id": "dev:IRC.xwikiArchive20110518", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110518", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:00\u00a0<@sdumitriu>\u00a0Enygma`: Bug report  \n00:00\u00a0<+Enygma`>\u00a0it isn't a known bug?  \n00:02\u00a0<+Enygma`>\u00a0XWIKI-5040 seems to be it  \n00:03\u00a0<+sburjan`>\u00a0Enygma`: wdym from another wiki ?  \n00:03\u00a0<+Enygma`>\u00a0as in, multi wiki environment, you are on wiki A, in the object editor of page X and you have an object there for which the class document is located in wiki B and it references it  \n00:04\u00a0<JSeymour>\u00a0cjdelisle, sdumitriu: I want to thank you both for your help today. \u00a0Now I'm goin' home. \u00a0I'll catch y'all tomorrow. \u00a0(When I'll probably have more quesitons ;).)  \n00:04\u00a0<@cjdelisle>\u00a0glad things are running for ya  \n00:05\u00a0<+Enygma`>\u00a0it seems the bug is 1y+ old  \n00:06\u00a0<JSeymour>\u00a0has quit  \n01:23\u00a0<Enygma`>\u00a0has quit  \n01:57\u00a0<sdumitriu>\u00a0has quit  \n02:17\u00a0<abusenius>\u00a0has quit  \n07:32\u00a0<vmassol>\u00a0has joined #xwiki  \n07:40\u00a0<pulasthi>\u00a0has joined #xwiki  \n07:48\u00a0<pulasthi>\u00a0cjdelisle: hi  \n07:52\u00a0<vmassol>\u00a0has quit  \n08:23\u00a0<mflorea>\u00a0has joined #xwiki  \n08:33\u00a0<Denis>\u00a0has joined #xwiki  \n08:50\u00a0<evalica>\u00a0has joined #xwiki  \n09:00\u00a0<sburjan>\u00a0has joined #xwiki  \n09:12\u00a0<vmassol>\u00a0has joined #xwiki  \n09:12\u00a0<vmassol1>\u00a0has joined #xwiki  \n09:16\u00a0<vmassol>\u00a0has quit  \n09:18\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:25\u00a0<arkub>\u00a0has joined #xwiki  \n09:27\u00a0<jamesxu>\u00a0has joined #xwiki  \n09:29\u00a0<jamesxu>\u00a0I am downloading the latest XE instance from http://maven.xwiki.org/snapshots/org/xwiki/enterprise/xwiki-enterprise-jetty-hsqldb/3.1M1-SNAPSHOT/, when I am running it to add a page, the page will not load wysiwyg editor successfully, leaving the loading icon all the time  \n09:30\u00a0<+tmortagne>\u00a0jamesxu: http://maven.xwiki.org/snapshots/org/xwiki/enterprise/xwiki-enterprise-jetty-hsqldb/3.1M1-SNAPSHOT/, is not the latest snapshot  \n09:30\u00a0<+tmortagne>\u00a0http://maven.xwiki.org/snapshots/org/xwiki/enterprise/xwiki-enterprise-jetty-hsqldb/3.1-SNAPSHOT/ is  \n09:31\u00a0<jamesxu>\u00a0ok, I am downloading it now, hope it works fine~~~  \n09:31\u00a0<+tmortagne>\u00a0when you have M\\* or RC\\* it's because it was used before a release  \n09:31\u00a0<vmassol1>\u00a0hi guys. I'm looking at the commons build failure on jenkins  \n09:32\u00a0<+tmortagne>\u00a0ho it was working well yesterday  \n09:32\u00a0<vmassol1>\u00a0btw 3.1M1-SNAPSHOT is an invalid version  \n09:32\u00a0<vmassol1>\u00a0should have been 3.1-milestone-1-SNAPSHOT  \n09:32\u00a0<vmassol1>\u00a0we need to purge those from our repo now  \n09:32\u00a0<vmassol1>\u00a0tmortagne: it's clirr trying to check against 3.1M1 version  \n09:32\u00a0<vmassol1>\u00a0http://ci.xwiki.org/job/xwiki-commons/103/org.xwiki.commons$xwiki-commons-tool-license-resources/console  \n09:33\u00a0<+tmortagne>\u00a0then clirr is wrongly configured  \n09:33\u00a0<+tmortagne>\u00a0it shoud be based on 3.0  \n09:33\u00a0<vmassol1>\u00a0yes, trying to find where  \n09:33\u00a0<+tmortagne>\u00a0in commons-core I guess  \n09:33\u00a0<vmassol1>\u00a0it doesn't make sense though  \n09:33\u00a0<vmassol1>\u00a0no this is tool  \n09:34\u00a0<jamesxu>\u00a0vamassol1: thank you for your explaination~~~  \n09:34\u00a0<+tmortagne>\u00a0ha then it's weird  \n09:34\u00a0<vmassol1>\u00a0yes something is amiss  \n09:34\u00a0<+tmortagne>\u00a0since clirr is not supposed to be run for tools  \n09:34\u00a0<vmassol1>\u00a0yep  \n09:34\u00a0<vmassol1>\u00a0and I don't see it configured  \n09:34\u00a0<vmassol1>\u00a0wil try locally  \n09:35\u00a0<+tmortagne>\u00a0maybe clirr is actually enabled by default  \n09:35\u00a0<+tmortagne>\u00a0and we need to skip it in tools  \n09:35\u00a0<vmassol1>\u00a0yes maybe  \n09:35\u00a0<vmassol1>\u00a0it does run locally  \n09:35\u00a0<vmassol1>\u00a0fixing this  \n09:35\u00a0<vmassol1>\u00a0but it checks against 3.1-milestone-1 here  \n09:35\u00a0<vmassol1>\u00a0(I run with -o though)  \n09:36\u00a0<+tmortagne>\u00a0<xwiki.checkstyle.skip>false</xwiki.checkstyle.skip> in root pom so yes itseems enabled by default  \n09:36\u00a0<vmassol1>\u00a0yep  \n09:36\u00a0<+tmortagne>\u00a0I guess tools doe snot have <xwiki.checkstyle.skip>true</xwiki.checkstyle.skip>  \n09:36\u00a0<vmassol1>\u00a0clirr  \n09:36\u00a0<+tmortagne>\u00a0yes sorry wrong copy/paste  \n09:37\u00a0<+tmortagne>\u00a0but still valid with <xwiki.clirr.skip>false</xwiki.clirr.skip> :)  \n09:37\u00a0<vmassol1>\u00a0that said we need to purge that 3.1M1 version  \n09:37\u00a0<+tmortagne>\u00a0yes  \n09:38\u00a0<+tmortagne>\u00a0but it's a pain doing it one by one on nexus, we need a batch tool for it. Maybe there is some way in nexus to do it  \n09:38\u00a0<vmassol1>\u00a0I'm not 100% sure we don't want clirr on tools  \n09:38\u00a0<+tmortagne>\u00a0we can also clean the snapshot repository and expect jira to rebuild what is needed  \n09:39\u00a0<+tmortagne>\u00a0jenkins  \n09:39\u00a0<+tmortagne>\u00a0not jira  \n09:41\u00a0<+tmortagne>\u00a0vmassol1: what I don't understand it's faling now  \n09:41\u00a0<vmassol1>\u00a0ok I've just disavled clirr for modules without java sources  \n09:41\u00a0<vmassol1>\u00a0I haven't removed it completely from tools  \n09:43\u00a0<+tmortagne>\u00a0right now it only make sense for xwiki-commons-tool-validation-resources  \n09:43\u00a0<+tmortagne>\u00a0having clirr  \n09:43\u00a0<+tmortagne>\u00a0since it's a library  \n09:43\u00a0<vmassol1>\u00a0err?  \n09:43\u00a0<vmassol1>\u00a0these are just reosurces  \n09:43\u00a0<+tmortagne>\u00a0ha no  \n09:44\u00a0<vmassol1>\u00a0the only modules that makes sense is the xar plugin  \n09:44\u00a0<+tmortagne>\u00a0mixed with standard validation which has ben moved  \n09:44\u00a0<+tmortagne>\u00a0I was loking at platform  \n09:44\u00a0<vmassol1>\u00a0I've pushed my change  \n09:44\u00a0<+tmortagne>\u00a0so there is no tool in commons that would need clirr  \n09:45\u00a0<+tmortagne>\u00a0since none as used as library  \n09:45\u00a0<+tmortagne>\u00a0s/as/are/  \n09:45\u00a0<+tmortagne>\u00a0unless we can use it to make shure we don't break a goal in a mavenplugin maybe  \n09:46\u00a0<vmassol1>\u00a0checking nexus settings re cleanup  \n09:46\u00a0<+tmortagne>\u00a0goal are in documentation so I guess clirr is useless here  \n09:47\u00a0<+tmortagne>\u00a0documentation=javadoc  \n09:47\u00a0<vmassol1>\u00a0not 100% useless, it's a choice it doesn't hurt to keep it imo  \n09:47\u00a0<vmassol1>\u00a0someone can build a maven plugin on top of our plugin by extending it  \n09:48\u00a0<vmassol1>\u00a0ok our nexus rule seem to indicate that we always keep at least 3 snapshots  \n09:48\u00a0<+tmortagne>\u00a0vmassol1: as far as i can see you did not set a <clirr.previous.version> for tools  \n09:48\u00a0<+tmortagne>\u00a0just pulled  \n09:49\u00a0<vmassol1>\u00a0indeed I didn't  \n09:49\u00a0<vmassol1>\u00a0this commons top level pom is problematic now  \n09:50\u00a0<+tmortagne>\u00a0well for now it just mean duplicating one property  \n09:50\u00a0<vmassol1>\u00a0no, it means remembering to change it at each release :)  \n09:50\u00a0<vmassol1>\u00a0(that's the harder part)  \n09:50\u00a0<+tmortagne>\u00a0sure but that was already the problem with what you have to change in core  \n09:51\u00a0<+tmortagne>\u00a0and it' snot each release it's each final release  \n09:51\u00a0<vmassol1>\u00a0ok I propose to change the nexus settings  \n09:52\u00a0<vmassol1>\u00a0max retention day: from 2 to 5 and min snapshots count from 3 to 0, wdyt?  \n09:52\u00a0<vmassol1>\u00a0maybe 5 is too much, 2 might be enough I don't know  \n09:52\u00a0<+tmortagne>\u00a0so it's from 5 to 2 right ?  \n09:53\u00a0<vmassol1>\u00a0I'll keep 2 for now  \n09:53\u00a0<vmassol1>\u00a0so to summarize  \n09:53\u00a0<vmassol1>\u00a0I propose to change the min snapshots count to 0  \n09:53\u00a0<tmortagne>\u00a0has left #xwiki  \n09:53\u00a0<vmassol1>\u00a0so basically remove all snapshots that are older than 2 days  \n09:53\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:53\u00a0<+tmortagne>\u00a0what that means \u00a0?  \n09:53\u00a0<vmassol1>\u00a0so basically remove all snapshots that are older than 2 days  \n09:54\u00a0<+tmortagne>\u00a0I means the min snapshots count set to 0  \n09:54\u00a0<vmassol1>\u00a0that means we wont keep any snapshot if they are older than 2 days  \n09:54\u00a0<+tmortagne>\u00a0ok  \n09:55\u00a0<vmassol1>\u00a0cjdelisle: there are maven pb on ci with some command line param you set I guess  \n09:55\u00a0<vmassol1>\u00a0tmortagne: this should remove the old 3.1M1-SNAPSHOT artifacts  \n09:55\u00a0<+tmortagne>\u00a0I'm ok with that, it will do a uge cleanup at once since we have lots of old SNOPSHOTS I did a cleanup by hand bu there is remaining  \n09:55\u00a0<vmassol1>\u00a0starting clean now  \n09:55\u00a0<vmassol1>\u00a0from nexus  \n09:58\u00a0<+tmortagne>\u00a0vmassol1: re clirr.previous.version for tools, are you doing it ?  \n09:58\u00a0<vmassol1>\u00a0tmortagne: nope you can do it  \n09:58\u00a0<+tmortagne>\u00a0ok  \n09:59\u00a0<vmassol1>\u00a0cjdelisle: http://ci.xwiki.org/job/xwiki-platform/158/console  \n09:59\u00a0<vmassol1>\u00a0\"Unable to parse command line options: Unrecognized option: -T2\"  \n10:00\u00a0<vmassol1>\u00a0it's using maven 2.2.1  \n10:00\u00a0<vmassol1>\u00a0\"http://stacktrace.hudson-labs.org/search?query=Found%20mavenVersion%202.2.1%20from%20file%20jar:file:/home/hudsonagent/maven/lib/maven-2.2.1-uber.jar!/META-INF/maven/org.apache.maven/maven-core/pom.properties\"  \n10:01\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:02\u00a0<+tmortagne>\u00a0vmassol1: checking  \n10:03\u00a0<+tmortagne>\u00a0should be ok now  \n10:03\u00a0<+tmortagne>\u00a0forgot one link  \n10:06\u00a0<vmassol1>\u00a0has quit  \n10:13\u00a0<vmassol1>\u00a0has joined #xwiki  \n10:33\u00a0<jamesxu>\u00a0has quit  \n10:39\u00a0<vmassol1>\u00a0has quit  \n10:40\u00a0<jamesxu>\u00a0has joined #xwiki  \n10:53\u00a0<vmassol>\u00a0has joined #xwiki  \n10:56\u00a0<lucaa>\u00a0has joined #xwiki  \n11:03\u00a0<+lucaa>\u00a0hello guys  \n11:04\u00a0<+lucaa>\u00a0I see we constantly have this on ci while building the platform  \n11:04\u00a0<+lucaa>\u00a0Exception in thread \"pool-7577-thread-1\" java.lang.OutOfMemoryError: PermGen space  \n11:07\u00a0<vmassol>\u00a0has quit  \n11:14\u00a0<abusenius>\u00a0has joined #xwiki  \n11:36\u00a0<evalica>\u00a0has quit  \n11:39\u00a0<vmassol>\u00a0has joined #xwiki  \n11:42\u00a0<+tmortagne>\u00a0cjdelisle: looks like there is not enough permgen to build parallel  \n11:43\u00a0<+tmortagne>\u00a0adding some more to see  \n11:46\u00a0<+tmortagne>\u00a0set permgen to 512, lets see  \n11:51\u00a0<vmassol>\u00a0has quit  \n12:05\u00a0<arkub>\u00a0has quit  \n12:23\u00a0<abusenius>\u00a0has quit  \n12:36\u00a0<sdumitriu>\u00a0has joined #xwiki  \n12:58\u00a0<lucaa>\u00a0has quit  \n12:58\u00a0<vmassol>\u00a0has joined #xwiki  \n13:41\u00a0<evalica>\u00a0has joined #xwiki  \n13:44\u00a0<+tmortagne>\u00a0sdumitriu: WDYT about removing 2.7 branch from jenkins ?  \n13:44\u00a0<vmassol>\u00a0+1  \n13:44\u00a0<@sdumitriu>\u00a0I'm +1, but ask Ludo  \n13:44\u00a0<+tmortagne>\u00a0(asking since the release is not annonced yet)  \n13:44\u00a0<vmassol>\u00a0(was thinking the same)  \n13:45\u00a0<vmassol>\u00a0btw ludo agreed for our 3.1 release. I'll send the mail to the devs list now  \n13:45\u00a0<@sdumitriu>\u00a0K  \n13:45\u00a0<@sdumitriu>\u00a0Good  \n13:45\u00a0<+tmortagne>\u00a0ok cool  \n13:45\u00a0<+tmortagne>\u00a0vmassol: remove the lucene part  \n13:46\u00a0<vmassol>\u00a0yep  \n13:58\u00a0<evalica>\u00a0has quit  \n13:59\u00a0<vmassol>\u00a0btw we need a release manager for 3.1M2  \n14:00\u00a0<@sdumitriu>\u00a0cjdelisle won't do it?  \n14:00\u00a0<@sdumitriu>\u00a0I can do the release  \n14:00\u00a0<vmassol>\u00a0cjdelisle: ?  \n14:06\u00a0<jamesxu>\u00a0has quit  \n14:12\u00a0<@sdumitriu>\u00a0WDYT about hiding old packages from OW2? http://forge.ow2.org/project/showfiles.php?group\\_id=170  \n14:12\u00a0<@sdumitriu>\u00a0xwiki-applications  \n14:12\u00a0<+tmortagne>\u00a0+1  \n14:13\u00a0<@sdumitriu>\u00a0xwiki-plugins  \n14:13\u00a0<@sdumitriu>\u00a0xwiki-skins  \n14:13\u00a0<@sdumitriu>\u00a0I'm not sure about xwiki-workspaces  \n14:17\u00a0<@sdumitriu>\u00a0mflorea: I think http://jira.xwiki.org/jira/browse/XE-919 is caused by your changes to the ExportAction  \n14:17\u00a0<@sdumitriu>\u00a0Can you look into it?  \n14:19\u00a0<+mflorea>\u00a0sdumitriu: how can my changes to ExportAction affect what sections are displayed on the administration?  \n14:20\u00a0<@sdumitriu>\u00a0Try it  \n14:20\u00a0<@sdumitriu>\u00a0The section is displayed, but the content is empty  \n14:22\u00a0<@sdumitriu>\u00a0There are two fixes possible:  \n14:22\u00a0<@sdumitriu>\u00a01. Don't use the /export/ action for that section (velocity change)  \n14:22\u00a0<@sdumitriu>\u00a02. Fix the ExportAction to behave like it used to do (java change, backwards compatible)  \n14:36\u00a0<lucaa>\u00a0has joined #xwiki  \n14:40\u00a0<+mflorea>\u00a0sdumitriu: https://github.com/xwiki/xwiki-platform/commit/3054b996241f98ee6f5eb43ef59c3fd6c881a060  \n14:41\u00a0<@sdumitriu>\u00a0Oh, right  \n14:41\u00a0<@sdumitriu>\u00a0:D  \n14:41\u00a0<+mflorea>\u00a0:)  \n14:41\u00a0<+sburjan>\u00a0FYI I will merge LoginLogoutTests form Se1 to Se2  \n14:42\u00a0<+sburjan>\u00a0:D  \n14:43\u00a0<finbrein>\u00a0has joined #xwiki  \n14:52\u00a0<jamesxu>\u00a0has joined #xwiki  \n14:55\u00a0<jamesxu>\u00a0has quit  \n15:23\u00a0<finbrein>\u00a0has quit  \n15:26\u00a0<@cjdelisle>\u00a0vmassol: I added the -T2 because I thought we had upgraded to maven3  \n15:27\u00a0<@cjdelisle>\u00a0so agent2 is on maven3 and agent1 is on maven2? That sounds quite wrong.  \n15:28\u00a0<@sdumitriu>\u00a0No, they're both on maven3  \n15:28\u00a0<@sdumitriu>\u00a0Agent1 was on maven2 during the 2.7.2 release  \n15:29\u00a0<@cjdelisle>\u00a0then -T2 should be fine  \n15:29\u00a0<@cjdelisle>\u00a0re release, I can do it but I don't think we're ready for a release today, we don't even have any working builds.  \n15:32\u00a0<@cjdelisle>\u00a0java.lang.OutOfMemoryError: PermGen space  \n15:32\u00a0<@cjdelisle>\u00a0I don't think our MAVEN\\_OPTS are making it to maven.  \n15:33\u00a0<@cjdelisle>\u00a0hudsonagent@ks365275:~$ echo $MAVEN\\_OPTS  \n15:33\u00a0<@cjdelisle>\u00a0-Xmx600m  \n15:33\u00a0<@cjdelisle>\u00a0I was tinkering with that last night until I went to bed.  \n15:36\u00a0<vmassol>\u00a0is this caused by the -T2?  \n15:37\u00a0<@cjdelisle>\u00a0No, it is caused by the fact that we were using 32 bit java before and now we are using 64 bit.  \n15:37\u00a0<@cjdelisle>\u00a0IMO  \n15:37\u00a0<@cjdelisle>\u00a0It was happening before I added the threading.  \n15:38\u00a0<+tmortagne>\u00a0sdumitriu: that's explain it, I tough I forgot to move to maven3 :)  \n15:40\u00a0<vmassol>\u00a0I see -Xmx768m -XX:MaxPermSize=128m is set on jenkins  \n15:41\u00a0<@cjdelisle>\u00a0I set that because I was getting permgen errors but it has not improved, I don't see it on the command line, and I don't see it when I echo $MAVEN\\_OPTS  \n15:41\u00a0<@cjdelisle>\u00a0So I was tracking the problem down last night  \n15:41\u00a0<JSeymour>\u00a0has joined #xwiki  \n15:42\u00a0<vmassol>\u00a0cjdelisle: here: http://ci.xwiki.org/job/xwiki-platform/162/consoleFull  \n15:42\u00a0<vmassol>\u00a0it was executed with:  \n15:42\u00a0<vmassol>\u00a0http://stacktrace.hudson-labs.org/search?query=%5Bxwiki-platform%5D%20$%20/home/hudsonagent/java/bin/java%20-Xmx1024m%20-cp%20/home/hudsonagent/hudson\\_root/maven3-agent.jar:/home/hudsonagent/maven/boot/plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main /home/hudsonagent/maven/ /home/hudsonagent/bin/slave.jar /home/hudsonagent/hudson\\_root/maven3-interceptor.jar 36494  \n15:43\u00a0<vmassol>\u00a0do we have a MAVEN\\_OPTS var set on the agent?  \n15:43\u00a0<@cjdelisle>\u00a0yes we do  \n15:43\u00a0<vmassol>\u00a0set to -Xmx1024m?  \n15:43\u00a0<@cjdelisle>\u00a0-Xmx600m <-- agent1  \n15:43\u00a0<@cjdelisle>\u00a0agent2 same  \n15:43\u00a0<vmassol>\u00a0hmmm what about on the jenkins machine itself? (just in case)  \n15:44\u00a0<@cjdelisle>\u00a0checking  \n15:44\u00a0<@sdumitriu>\u00a0Greasemonkey is great!  \n15:45\u00a0<@cjdelisle>\u00a0adsbegone?  \n15:45\u00a0<@sdumitriu>\u00a0Nope, doing repetitive tasks  \n15:45\u00a0<@cjdelisle>\u00a0nothing on maven.xwiki.org  \n15:45\u00a0<@sdumitriu>\u00a0OW2 forge UI sux big time  \n15:45\u00a0<@cjdelisle>\u00a0oh hehe you must share that script  \n15:46\u00a0<@sdumitriu>\u00a0I doubt it's useful  \n15:47\u00a0<@cjdelisle>\u00a0oh I thought it was a release script  \n15:47\u00a0<@sdumitriu>\u00a0It just displays a Hide button that I can click to hide old releases  \n15:49\u00a0<vmassol>\u00a0btw we seem to have this issue too: https://issues.jenkins-ci.org/browse/JENKINS-9213  \n15:49\u00a0<vmassol>\u00a0it looks minor though  \n15:51\u00a0<@cjdelisle>\u00a0I think what is supposed to be happening is it propigates that \"-Xmx768m -XX:MaxPermSize=128m\" to the MAVEN\\_OPTS on the slaves.  \n15:52\u00a0<vmassol>\u00a0hmm I don't think we have updated the slaves though have we?  \n15:53\u00a0<+tmortagne>\u00a0we have a mismatch between how memory is configured in agent1 and agent2, agent1 is set in http://ci.xwiki.org/computer/agent-1/configure but not agent2  \n15:53\u00a0<@cjdelisle>\u00a0Yes, I removed the configuration from agent2 because I thought maybe that was causing the problem.  \n15:54\u00a0<+tmortagne>\u00a0we should remove configuration in both agent and set it in general jenking config  \n15:54\u00a0<+tmortagne>\u00a0they both have the same need  \n15:54\u00a0<@cjdelisle>\u00a0apparently none of those entries make a hill of beans difference  \n15:54\u00a0<@cjdelisle>\u00a0That was my thinking but I wanted to test and my test failed because agent2 is still doing it wrong.  \n15:56\u00a0<vmassol>\u00a0cjdelisle: did you try \"Global MAVEN\\_OPTS\" in jenkins'c onfig?  \n15:56\u00a0<@cjdelisle>\u00a0I did, same result  \n15:56\u00a0<@cjdelisle>\u00a0It probably makes more sense to use that since it's \"for the task\" but we need to understand why it's not propigating  \n15:56\u00a0<@cjdelisle>\u00a0Or perhaps it is and we're not looking in the right place  \n15:58\u00a0<vmassol>\u00a0tmortagne: did you update the agents when you moved to maven3?  \n15:58\u00a0<vmassol>\u00a0(the agent jar I mean)  \n15:58\u00a0<vmassol>\u00a0(so that they are in sync with the jenkins version)  \n15:58\u00a0<+tmortagne>\u00a0vmassol: why ?  \n15:58\u00a0<+tmortagne>\u00a0i did not upgraded jenkins  \n15:58\u00a0<vmassol>\u00a0well normally the agents have to be in sync in term of versions  \n15:58\u00a0<+tmortagne>\u00a0ok but i don't see the relationship with maven  \n15:59\u00a0<vmassol>\u00a0maybe the passing of params from the master to the salve is defective  \n15:59\u00a0<vmassol>\u00a0because of a mismatch of versions  \n15:59\u00a0<+tmortagne>\u00a0I did not upgraded jenkins central so I don't see why I would do that for agents  \n15:59\u00a0<vmassol>\u00a0I see a lot of new files on the agents though  \n15:59\u00a0<+tmortagne>\u00a0I just upraded maven and java  \n16:00\u00a0<vmassol>\u00a0ah was looking in the wrong dir  \n16:00\u00a0<vmassol>\u00a0ok I'll update them  \n16:02\u00a0<Enygma`>\u00a0has quit  \n16:03\u00a0<jamesxu>\u00a0has joined #xwiki  \n16:06\u00a0<vmassol>\u00a0slave.jar updated on agents, probably need to restart agents though  \n16:07\u00a0<@cjdelisle>\u00a0ERROR: Ignore Problem expanding maven opts macros org.jenkinsci.plugins.tokenmacro.TokenMacro  \n16:07\u00a0<@cjdelisle>\u00a0that's happening on the builds  \n16:07\u00a0<vmassol>\u00a0yep I pasted the issue above earlier  \n16:08\u00a0<@cjdelisle>\u00a0hmm maybe that is version mismatch related.  \n16:08\u00a0<vmassol>\u00a0https://issues.jenkins-ci.org/browse/JENKINS-9213  \n16:08\u00a0<vmassol>\u00a0no seems something else  \n16:09\u00a0<@cjdelisle>\u00a0is there any way to get maven to only build the things which have changed?  \n16:09\u00a0<vmassol>\u00a0btw agent1 says java5 in its system propreties here: http://ci.xwiki.org/computer/agent-1/systemInfo ?  \n16:09\u00a0<abusenius>\u00a0has joined #xwiki  \n16:09\u00a0<vmassol>\u00a0restarting agent 1  \n16:11\u00a0<vmassol>\u00a0it's now on 1.411  \n16:11\u00a0<vmassol>\u00a0but http://ci.xwiki.org/computer/agent-1/systemInfo still says JDK 1.5  \n16:12\u00a0<vmassol>\u00a0btw on agent2: it says: [xwiki-enterprise] $ /home/hudsonagent/java/bin/java -Xmx1400m -XX:MaxPermSize=512m  \n16:12\u00a0<vmassol>\u00a0agent2 is on jdk6: http://ci.xwiki.org/computer/agent-2/systemInfo  \n16:12\u00a0<vmassol>\u00a0so why is agent1 on jdk5?  \n16:13\u00a0<vmassol>\u00a0btw agent1 says -Xmx1400m -XX:MaxPermSize=512m too at http://ci.xwiki.org/computer/agent-1/systemInfo  \n16:13\u00a0<@sdumitriu>\u00a0Does it need a restart?  \n16:13\u00a0<pulasthi1>\u00a0has joined #xwiki  \n16:13\u00a0<@sdumitriu>\u00a0Or did you just do that?  \n16:13\u00a0<+tmortagne>\u00a0vmassol: I think it's the agent itself  \n16:13\u00a0<+tmortagne>\u00a0not maven  \n16:13\u00a0<vmassol>\u00a0sdumitriu: I just restarted agent1  \n16:13\u00a0<+tmortagne>\u00a0checking something  \n16:13\u00a0<vmassol>\u00a0tmortagne: ah maybe  \n16:14\u00a0<pulasthi>\u00a0has quit  \n16:14\u00a0<vmassol>\u00a0still would be good to have both on the same config  \n16:14\u00a0<@cjdelisle>\u00a0well the -Xmx and maxPermSize just propigated, I guess restarting agent1 did it  \n16:14\u00a0<@cjdelisle>\u00a0\\*to both agents  \n16:14\u00a0<vmassol>\u00a0I changed the slave jar versions too  \n16:15\u00a0<vmassol>\u00a0that might have helped too  \n16:15\u00a0<@cjdelisle>\u00a0-Xmx768m -XX:MaxPermSize=128m <-- that's still the gloabl var on master though  \n16:16\u00a0<vmassol>\u00a0so where does the 1400 come from?  \n16:16\u00a0<vmassol>\u00a0that's a global conf which could be overriden by a specific maven confg  \n16:16\u00a0<vmassol>\u00a0s/confg/conf/  \n16:16\u00a0<vmassol>\u00a0ok for agent1: http://ci.xwiki.org/computer/agent-1/configure  \n16:17\u00a0<vmassol>\u00a0so that's normal for agent1  \n16:17\u00a0<vmassol>\u00a0it's overriding the general config value  \n16:17\u00a0<vmassol>\u00a0and for agent2 you probbal yhavn't restarted it  \n16:17\u00a0<vmassol>\u00a0after you made the change  \n16:17\u00a0<vmassol>\u00a0correct?  \n16:17\u00a0<vmassol>\u00a0so let me restartd agent2 now  \n16:17\u00a0<@cjdelisle>\u00a0I did not restart anything, I didn't know I had to in order to make that change.  \n16:17\u00a0<vmassol>\u00a0restarting 2 now  \n16:18\u00a0<@cjdelisle>\u00a0I thouk we out to remove the entry from agent1 and let them both propigate from master after the next reset  \n16:19\u00a0<vmassol>\u00a0hmm still the same: http://ci.xwiki.org/job/xwiki-manager-3.0/20/console  \n16:19\u00a0<@cjdelisle>\u00a0ram on agent 1 and 2 is 3G and 2G respectively  \n16:20\u00a0<+tmortagne>\u00a0vmassol: java version on agent1 should be ok after a restart now  \n16:20\u00a0<+tmortagne>\u00a0(but was only for agent itself)  \n16:20\u00a0<vmassol>\u00a0ok  \n16:21\u00a0<+tmortagne>\u00a0doing the same thing for agent2 even if default system java is 1.6 already  \n16:21\u00a0<+tmortagne>\u00a0at least that we we don't depends on the system  \n16:21\u00a0<+tmortagne>\u00a0i.e. something none of us have control on ;)  \n16:22\u00a0<vmassol>\u00a0letting the ci build now\u2026.  \n16:22\u00a0<@cjdelisle>\u00a0I understand you can use a utility called ln to get root ;)  \n16:26\u00a0<@cjdelisle>\u00a0I'm going to grab a cup of coffee, I'll be back in a little while.  \n16:28\u00a0<vmassol>\u00a0argh http://ci.xwiki.org/job/xwiki-platform/163/console  \n16:28\u00a0<vmassol>\u00a0using -Xmx1024 again  \n16:30\u00a0<vmassol>\u00a0trying global maven opts  \n16:33\u00a0<+tmortagne>\u00a0vmassol: where are you seing -Xmx1024 ?  \n16:33\u00a0<vmassol>\u00a0tmortagne: here: http://ci.xwiki.org/job/xwiki-platform/167/console  \n16:34\u00a0<+tmortagne>\u00a0the one I see if about java, not maaven  \n16:34\u00a0<+tmortagne>\u00a0maven  \n16:34\u00a0<+tmortagne>\u00a0what is supposed to look at MAVEN\\_OPTS env vars ?  \n16:34\u00a0<vmassol>\u00a0maven3 agent is in java  \n16:35\u00a0<vmassol>\u00a0now I don't know if it spanws another process or not  \n16:36\u00a0<vmassol>\u00a0cjdelisle:  \n16:36\u00a0<vmassol>\u00a0I have never tried parallel builds with maven  \n16:36\u00a0<vmassol>\u00a0is it really safe since some pugins are not thread safe?  \n16:37\u00a0<vmassol>\u00a0lots of warnings in the logs  \n16:37\u00a0<vmassol>\u00a0IMO we're calling for problems with this  \n16:37\u00a0<vmassol>\u00a0since we're trying to stabilize the build now I'd suggest we turn it off for now, wdyt?  \n16:39\u00a0<+tmortagne>\u00a0what's weird is that I can't find -Xmx1024 anywhere jenkins configuration of in .bashrc  \n16:39\u00a0<vmassol>\u00a0might be \u00a0a default value in jenkins  \n16:39\u00a0<+tmortagne>\u00a0not very nice, by default it should let system decide  \n16:40\u00a0<+tmortagne>\u00a0hmm  \n16:40\u00a0<+tmortagne>\u00a0or maybe in the project itself actually  \n16:40\u00a0<+tmortagne>\u00a0checking  \n16:40\u00a0<@sdumitriu>\u00a0Last call: Should I hide the Workspaces releases from the ow2 forge?  \n16:40\u00a0<vmassol>\u00a0https://issues.jenkins-ci.org/browse/JENKINS-5409  \n16:40\u00a0<+tmortagne>\u00a0not project either  \n16:40\u00a0<vmassol>\u00a0maybe that's why global maven opts isn't used with maven3  \n16:41\u00a0<vmassol>\u00a0I read somewhere that maven3 was using freestyle project ?  \n16:41\u00a0<+tmortagne>\u00a0what's a freestyle project ?  \n16:41\u00a0<vmassol>\u00a0https://issues.jenkins-ci.org/browse/JENKINS-8704  \n16:42\u00a0<sburjan>\u00a0has quit  \n16:42\u00a0<vmassol>\u00a0\"The only was to push in custom global settings when using maven 3 is to replace the settings.xml in the Jenkins/tools/maven\"  \n16:43\u00a0<+tmortagne>\u00a0nice...  \n16:44\u00a0<vmassol>\u00a0not sure what \"jenkins/tools/maven\" is  \n16:47\u00a0<+tmortagne>\u00a0me neither, that does not exists in filesystem  \n16:49\u00a0<+tmortagne>\u00a0no on agents at least  \n16:49\u00a0<+tmortagne>\u00a0maybe in jenkins root  \n16:51\u00a0<vmassol>\u00a0I looked everywhere and couldn't find it  \n16:52\u00a0<vmassol>\u00a0seems to be a windows setup  \n16:52\u00a0<vmassol>\u00a0http://jira.codehaus.org/secure/attachment/55047/maven-debug.txt  \n16:52\u00a0<vmassol>\u00a0\u00a0url: file:///Y:/Program%20Files%20(x86)/Jenkins/tools/Maven/.m2/repository/  \n16:52\u00a0<+tmortagne>\u00a0maybe it's just to say \"wherever the maven tool is configured\"  \n16:52\u00a0<+tmortagne>\u00a0anyway that' sthe only place with a setting.xml  \n16:53\u00a0<vmassol>\u00a0I didn't know that settings.xml can contain java params  \n16:53\u00a0<+tmortagne>\u00a0now I don't see how setting.xml would have any influence on the java configuration to run maven, I tough the file was read in java  \n16:53\u00a0<vmassol>\u00a0yep  \n16:53\u00a0<vmassol>\u00a0doesn't exist: http://maven.apache.org/settings.html  \n16:55\u00a0<+tmortagne>\u00a0I don't understand why something called \"Global MAVEN\\_OPTS\" does not simply set MAVEN\\_OPTS before calling maven  \n16:55\u00a0<+tmortagne>\u00a0this jira issue seems weird  \n16:56\u00a0<vmassol>\u00a0restarting jenkins just in case  \n16:57\u00a0<+tmortagne>\u00a0note that I found a -Xmx1024m, that's what jenkins is started with  \n16:59\u00a0<vmassol>\u00a0ahah  \n16:59\u00a0<vmassol>\u00a0good good  \n16:59\u00a0<vmassol>\u00a0so let's change that one  \n17:01\u00a0<vmassol>\u00a0are you doing it tmortagne?  \n17:01\u00a0<+tmortagne>\u00a0but what's weird is that jenkins is exactly started with -XX:MaxPermSize=128m -Xmx1024m  \n17:01\u00a0<vmassol>\u00a0hmm  \n17:01\u00a0<+tmortagne>\u00a0and we don't have -XX:MaxPermSize=128m in maven  \n17:01\u00a0<vmassol>\u00a0our issue is with permgen in the build right?  \n17:01\u00a0<+tmortagne>\u00a0note that it is not the even var  \n17:02\u00a0<vmassol>\u00a01024MB should be enough  \n17:02\u00a0<+tmortagne>\u00a0it is what is given to java  \n17:02\u00a0<+tmortagne>\u00a0yes we have permgen issue  \n17:02\u00a0<+tmortagne>\u00a0s/even/env/  \n17:17\u00a0<+tmortagne>\u00a0disabling T2 since the console is hard \u00a0to read  \n17:17\u00a0<+tmortagne>\u00a0will enabled it when all works well  \n17:18\u00a0<@cjdelisle>\u00a0vmassol: If you want to turn off threading then I don't mind, I have been using it all along on local because it cuts build time in half for me.  \n17:18\u00a0<@cjdelisle>\u00a0I have not had any adverse effects from it althugh I would still not use it when building a release.  \n17:19\u00a0<+tmortagne>\u00a0s/enabled/enable/  \n17:19\u00a0<@cjdelisle>\u00a0I watched swap with t2 and there's a little bit of swapping but it is by no means threashing.  \n17:22\u00a0<+tmortagne>\u00a0anyway better taking care of that when we are sure all works well  \n17:22\u00a0<@cjdelisle>\u00a0makes sense  \n17:22\u00a0<+tmortagne>\u00a0hard to find what is the problem when we change too many things  \n17:23\u00a0<+tmortagne>\u00a0but I agree that now platform is very big so T2 would be an important benefit to build it  \n17:23\u00a0<vmassol>\u00a0tmortagne: do you remember a jira issue iwth include macro not taking into account document language? I remmeber it but cannot find it again  \n17:24\u00a0<+tmortagne>\u00a0yes I remember a very old fixed on e about that  \n17:25\u00a0<vmassol>\u00a0actually all our component code which uses the DAB doesn't support translated content I think\u2026. :(  \n17:25\u00a0<vmassol>\u00a0(since there's no api in the bridge to get that)  \n17:25\u00a0<+tmortagne>\u00a0http://jira.xwiki.org/jira/browse/XWIKI-2892  \n17:25\u00a0<vmassol>\u00a0ah thans  \n17:26\u00a0<+tmortagne>\u00a0http://jira.xwiki.org/jira/browse/XWIKI-2934 to be more precise actually  \n17:26\u00a0<@cjdelisle>\u00a0echo $MAVEN\\_OPTS  \n17:27\u00a0<@cjdelisle>\u00a0-Xmx600m  \n17:27\u00a0<@cjdelisle>\u00a0on agent 1  \n17:27\u00a0<@cjdelisle>\u00a0still  \n17:27\u00a0<+tmortagne>\u00a0( vmassol )  \n17:27\u00a0<@cjdelisle>\u00a0maybe hudson sets it for just a second while it does a build but that doesn't make much sense  \n17:29\u00a0<@cjdelisle>\u00a0hmm  \n17:30\u00a0<@cjdelisle>\u00a0nvm had to re login  \n17:36\u00a0<@cjdelisle>\u00a0exciting new error messages  \n17:36\u00a0<@cjdelisle>\u00a0http://ci.xwiki.org/job/xwiki-platform/169/consoleText  \n17:38\u00a0<+tmortagne>\u00a0yes is the same on XE and XEM, i don't understand what is the real issue  \n17:39\u00a0<+tmortagne>\u00a0even if jboss server was completely broken maven should just skip it  \n17:39\u00a0<+tmortagne>\u00a0and jboss server works well as far as i can see  \n17:40\u00a0<+tmortagne>\u00a0it's really annoying this velocity tool with no proper pom.xml...  \n17:51\u00a0<krekas>\u00a0has joined #xwiki  \n17:51\u00a0<krekas>\u00a0hello guys  \n17:52\u00a0<krekas>\u00a0i have a question. is it possible to parse a value trough link? like ....xwiki/view/Space/Page?value=1  \n17:52\u00a0<krekas>\u00a0and check that value in the Page document  \n17:53\u00a0<+tmortagne>\u00a0krekas: you can access http request parameters using $request.myparam in velocity  \n17:53\u00a0<+tmortagne>\u00a0so in your case $request.value  \n17:55\u00a0<pulasthi1>\u00a0has left #xwiki  \n17:57\u00a0<krekas>\u00a0has quit  \n18:17\u00a0<arkub>\u00a0has joined #xwiki  \n18:20\u00a0<Stulle|Workstati>\u00a0has quit  \n18:22\u00a0<vmassol>\u00a0tmortagne: grr\u2026. I introduced a regression in the include macro\u2026.. in 3.0M1  \n18:22\u00a0<vmassol>\u00a0XWIKI-6627  \n18:24\u00a0<vmassol>\u00a0jsut sent a vote mail to fix it  \n18:32\u00a0<vmassol>\u00a0tmortagne: btw you fixed getDocumentContent to support translated docs but you haven't changed the setDocumentContent impls\u2026 :)  \n18:39\u00a0<vmassol>\u00a0bbiab, going home  \n18:39\u00a0<vmassol>\u00a0has quit  \n18:56\u00a0<+lucaa>\u00a0guys, I still have an issue with xwiki-platform-oldcore which appears twice in the WEB-INF/lib when I build enterprise locally  \n18:58\u00a0<@cjdelisle>\u00a0once as SNAPSHOT and once with a timestamp?  \n18:58\u00a0<+tmortagne>\u00a0lucaa: this is a known issue of trunk that is \u00a0supposed gto be be fixed by getting rid of web standard  \n18:58\u00a0<+lucaa>\u00a0aha  \n18:58\u00a0<+lucaa>\u00a0won't it create problems at one point, classes conflicts et all?  \n18:58\u00a0<+tmortagne>\u00a0but you don't have this issue in a realease because both have the same name  \n18:59\u00a0<+tmortagne>\u00a0no it's supposed to \u00a0be pretty much the same thing  \n18:59\u00a0<+tmortagne>\u00a0just not with the same name  \n18:59\u00a0<+lucaa>\u00a0ok, it's fine then  \n18:59\u00a0<tmortagne>\u00a0has quit  \n19:09\u00a0<lpereira>\u00a0has joined #xwiki  \n19:54\u00a0<lpereira>\u00a0has quit  \n20:02\u00a0<arkub>\u00a0has quit  \n20:12\u00a0<mflorea>\u00a0has quit  \n21:01\u00a0<lucaa>\u00a0has quit  \n22:59\u00a0<JSeymour>\u00a0has quit  \n\n"}