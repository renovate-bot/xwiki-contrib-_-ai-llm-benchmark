{"id": "dev:IRC.xwikiArchive20100106", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100106", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nxwiki-bridge - (00:33): [Lady Serena Kitty] http://ladyserenakitty.com/bin/UpsyncLDAP  \nLukemon - (02:29): Caleb yes please, those changes don't seem to matter anymore in 2.0 syntax  \nCalebJamesDeLisl - (02:30): 1.0 is still used quite a bit so the change I committed will help.  \nCalebJamesDeLisl - (02:30): I was thinking about maybe not parsing groovy unless there is a <% does that make sense?  \nxwiki-bridge - (02:31): [Lady Serena Kitty] well, since Groovy requires <% %>, then yes, it does make sense  \nxwiki-bridge - (02:31): [Lady Serena Kitty] actually, I'd check for the presence of both  \nCalebJamesDeLisl - (02:33): Doubles the processing to match <% and %> which is a dangerous proposition when trying to improve performance.  \nxwiki-bridge - (02:34): [Lady Serena Kitty] aye, but I've run into BBCode parsing situations where the parser dies because the precheck only checked for the opener  \nCalebJamesDeLisl - (02:38): The groovy parser runs all of the time as it is, this is just a preprocessor to streamline things.  \nCalebJamesDeLisl - (02:38): Anyway I don't think it's worth the effort because parsing happens line by line (don't ask me why)  \nxwiki-bridge - (02:39): [Lady Serena Kitty] oh, its still worth it  \nxwiki-bridge - (02:39): [Lady Serena Kitty] skipping a parser that operates line-by-line will improve performance  \nCalebJamesDeLisl - (02:40): Every parser runs on the page one line at a time. Luke's last change was to skip over the velocity parser if there were no $ or # in a given line.  \nCalebJamesDeLisl - (02:41): This would be different because groovy must be parsed from the <% to the %> regardless of what line they are on.  \nLukemon - (02:42): nah, I don't think Velocity stuff is parsed line by line  \nLukemon - (02:43): during debugging I saw multiline templates passed to evaluate() method  \nCalebJamesDeLisl - (02:55): Luke, I stand corrected. BTW: first line of XWikiGroovyRenderer is:  \nCalebJamesDeLisl - (02:55): if (content.indexOf(\"<%\") == -1) {  \nCalebJamesDeLisl - (02:55): return content;  \nCalebJamesDeLisl - (02:55): }  \nLukemon - (02:58): :)  \nCalebJamesDeLisl - (03:10): Hmm, I don't have enough power to close the issue, I guess it up to you Luke ;) \u00a0xwikibot summon link to XWIKI-4639  \nCalebJamesDeLisl left at 04:05 (\"bed time\"  \ntoulmean joined #xwiki at 08:20  \ntoulmean - (08:22): hey guys, where's your pricing for the enterprise edition ?  \ntoulmean left at 09:30 (  \nvmassol joined #xwiki at 09:40  \nvmassol left #xwiki at 09:41  \narkub joined #xwiki at 10:04  \nxwiki-bridge - (10:10): [Vincent Massol] hmmm one thing to verify after my change is the usage of Current\\*Factory  \nxwiki-bridge - (10:10): [Vincent Massol] since the behavior I have is to use the current page name if it's not defined  \nxwiki-bridge - (10:11): [Vincent Massol] whereas in lots of places before (all places?) the usage was to default to \"WebHome\"  \nxwiki-bridge - (10:12): [Vincent Massol] maybe I should fallback to the default\\*Factory for terminal segment?  \nxwiki-bridge - (10:13): [Vincent Massol] bb in 5mn  \nlucaa joined #xwiki at 10:23  \nxwiki-bridge - (10:37): [Vincent Massol] actually no we cannot do that since we need an empty link to point to the current page for ex  \nKermitTheFragger joined #xwiki at 10:38  \nlucaa left #xwiki at 10:39  \nxwiki-bridge - (11:08): [Vincent Massol] does anyone recall if http://jira.xwiki.org/jira/browse/XWIKI-4639 is really implemented?  \nxwiki-bridge - (11:08): [Vincent Massol] I don't recall seeing a commit  \nxwiki-bridge - (11:08): [Vincent Massol] ah there's one commit  \nxwiki-bridge - (11:09): [Vincent Massol] ok forget it  \nxwiki-bridge - (11:43): [anamarias] hi, I need a bit of help with encoding a url parameter in JS and decoding it back in Velocity. I kept trying in many ways but it still not working  \nxwiki-bridge - (11:43): [anamarias] I build an URL for my ajax request like this:   \nxwiki-bridge - (11:43): [anamarias] var url = \"$xwiki.getURL('Cockpit2.TreatAJAXRequest', 'view')\" + \"?xpage=plain&community=\" + encodeURI(communityName);  \nxwiki-bridge - (11:44): [anamarias] , where var communityName = \"SemanticCommunity.Felix\u2019 Semantic Community\";  \nxwiki-bridge - (11:44): [anamarias] At this location: Cockpit2.TreatAJAXRequest, I do:  \nxwiki-bridge - (11:44): [anamarias] #set($communityName = $util.decodeURI(\"$!{request.community}\"))  \nxwiki-bridge - (11:45): [anamarias] But I get 'SemanticCommunity.Felix\u00e2?? Semantic Community' instead  \nxwiki-bridge - (11:45): [lucaa] well, since you do some velocity in the url assignment, why don't you use the velocity encoding function too?  \nxwiki-bridge - (11:45): [lucaa] instead of the js (I assume) encodeURI  \nxwiki-bridge - (11:46): [anamarias] hmm, let me try that  \nxwiki-bridge - (11:59): [anamarias] yup, it works like this  \nxwiki-bridge - (12:00): [lucaa] cool  \nxwiki-bridge - (12:00): [anamarias] however, there is another parameter I did not mentioned, which is taken from an input field  \nxwiki-bridge - (12:00): [anamarias] so I can't use the velocity method  \nxwiki-bridge - (12:01): [lucaa] but are you sure you need to decode the request.something values?  \nxwiki-bridge - (12:01): [lucaa] aren't thy decoded from the URI already when set in the request?  \nxwiki-bridge - (12:02): [anamarias] i'll make some more tests  \nxwiki-bridge - (12:03): [lucaa] what I mean is yes, you need to encode stuff when you create the URL to make sure you don't collide with special characters, etc  \nxwiki-bridge - (12:03): [lucaa] but when you have already received the request.something values, they're already obtained from the URL of the get (post), therefore they should be fine decoded  \nxwiki-bridge - (12:03): [lucaa] yes, do some tests, I'm curious too  \nxwiki-bridge - (12:11): [anamarias] lucaa: for the value I take from the input field, looks like it's encoded automatically when put in a url, and decoded directly when taken from the request in velocity  \nxwiki-bridge - (12:11): [anamarias] no need to decode  \nxwiki-bridge - (12:11): [lucaa] encoded automatically?  \nxwiki-bridge - (12:12): [anamarias] well, I do : \u00a0\u00a0var speechcomName = $('SemanticCommunity\\_speechCommunityInput').value;  \nxwiki-bridge - (12:12): [anamarias]   \nxwiki-bridge - (12:12): [anamarias] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0var url\\_params = \"?xpage=plain&speechCommunity=\" + speechcomName;  \nxwiki-bridge - (12:13): [lucaa] have you tried to put a lot of mess in that value? like &s and ?s?  \nxwiki-bridge - (12:14): [anamarias] hmm not that much  \nxwiki-bridge - (12:14): [anamarias] ok  \nxwiki-bridge - (12:17): [anamarias] even encodeURI() (JS function) gives me : /Cockpit2/SemanticCommunityAddSpeechCommunityRequest?xpage=plain&speechCommunity=foo%22%20bar%20&s%20&?  \nxwiki-bridge - (12:17): [anamarias] for input string : \"foo\" bar &s &?\"  \nxwiki-bridge - (12:18): [anamarias] transformed into : \"foo%22%20bar%20&s%20&?\"  \nxwiki-bridge - (12:18): [anamarias] which is not good  \nxwiki-bridge - (12:20): [lucaa] well it seems encodeURI encodes a full URI and since & means something it doesn't escape it  \nxwiki-bridge - (12:20): [lucaa] this page http://www.w3schools.com/jsref/jsref\\_encodeURI.asp says you should use encodeURIComponent()  \nxwiki-bridge - (12:26): [anamarias] thanks anca  \nxwiki-bridge - (12:26): [lucaa] no pb  \nxwiki-bridge - (12:42): [Vincent Massol] lucaa: we've found a solution with thomas to make the Normalizer a factory  \nxwiki-bridge - (12:42): [Vincent Massol] I'm implementing it  \nxwiki-bridge - (12:43): [Vincent Massol] basically we don't need to change the factory interface   \nxwiki-bridge - (12:43): [Vincent Massol] createEntityReferece(source, return type - the type to extract from the source)  \nxwiki-bridge - (12:44): [Vincent Massol] so you could have normalizerFactory.createEntityReference(spaceReference, EntityType.DOCUMENT) for ex  \nxwiki-bridge - (12:44): [Vincent Massol] the normalizer factory would transform the space reference into a document reference in this case  \nxwiki-bridge - (12:45): [lucaa] I think it's the only thing I haven't thought about as a possible meaning of \"type to extract from\"  \nxwiki-bridge - (12:45): [Vincent Massol] and for normalizerFactory.createEntityReference(docReference, EntityType.SPACE) it would extract the space referece from the doc reference  \nxwiki-bridge - (12:46): [lucaa] I don't find very normal to transform a space ref to a document one  \nxwiki-bridge - (12:46): [lucaa] I mean  \nxwiki-bridge - (12:46): [Vincent Massol] it's the point of the normalizer, it fills the blanks  \nxwiki-bridge - (12:46): [lucaa] that ref could have a parent. What would you do? shift everything?  \nxwiki-bridge - (12:47): [Vincent Massol] sorry what ref?  \nxwiki-bridge - (12:47): [lucaa] the space ref  \nxwiki-bridge - (12:47): [lucaa] I don;t think I got it right  \nxwiki-bridge - (12:47): [Vincent Massol] the parent of the space ref is the wiki  \nxwiki-bridge - (12:47): [Vincent Massol] we don't change that  \nxwiki-bridge - (12:47): [Vincent Massol] we add a document ref  \nxwiki-bridge - (12:47): [Vincent Massol] that has the space ref as the parent  \nxwiki-bridge - (12:47): [Vincent Massol] that's the current behavior  \nxwiki-bridge - (12:47): [Vincent Massol] ('btw)  \nxwiki-bridge - (12:48): [lucaa] and gets the document from the base of the normalizer, right?  \nxwiki-bridge - (12:48): [Vincent Massol] base?  \nxwiki-bridge - (12:48): [Vincent Massol] we have default/current normalizer factories  \nxwiki-bridge - (12:48): [Vincent Massol] so it gets it from there  \nxwiki-bridge - (12:49): [Vincent Massol] I think it works fine, you just have to consider the type as the output type  \nxwiki-bridge - (12:49): [lucaa] wait a sec  \nxwiki-bridge - (12:49): [lucaa] I misunderstood some stuff  \nxwiki-bridge - (12:49): [Vincent Massol] the factory transforms the source into a type specified by the output  \nxwiki-bridge - (12:50): [Vincent Massol] (note: it would even work for absolute textual representation with type://)  \nxwiki-bridge - (12:50): [Vincent Massol] type : //  \nxwiki-bridge - (12:51): [lucaa] ok, well I misunderstood the purpose of the normalizer. Now that I finally understood it it's a couple of times more obvious that it needs to be a factory  \nxwiki-bridge - (12:51): [lucaa] how would it work with type://  \nxwiki-bridge - (12:51): [lucaa] ?  \nxwiki-bridge - (12:51): [Vincent Massol] same as the normalizer  \nxwiki-bridge - (12:51): [Vincent Massol] :)  \nxwiki-bridge - (12:51): [Vincent Massol] since the normalizer takes a referencer  \nxwiki-bridge - (12:51): [Vincent Massol] with a type  \nxwiki-bridge - (12:52): [Vincent Massol] type: // is also a reference with a type  \nxwiki-bridge - (12:52): [lucaa] you mean you fill in potentially missing fields from the configuration?  \nxwiki-bridge - (12:53): [Vincent Massol] type : /// or EntityReference is the same  \nxwiki-bridge - (12:53): [Vincent Massol] it contains the same kind of data  \nxwiki-bridge - (12:53): [lucaa] so basically you parse type:// to an entity ref (with type as the EntityType and the following string as a string representation) and then use the normalizing behaviour for the passed EntityType  \nxwiki-bridge - (12:53): [Vincent Massol] just represented differently  \nxwiki-bridge - (12:53): [lucaa] interesting  \nxwiki-bridge - (12:53): [Vincent Massol] lunch, I'll be implementing the normalizer as a factory just after  \nxwiki-bridge - (12:54): [Vincent Massol] hint would be \"current/reference\" and \"default/reference\"  \nxwiki-bridge - (12:54): [Vincent Massol] \"current\" and \"default\" are \"aliases\" for \"current/string\" and \"default/string\"  \nxwiki-bridge - (12:54): [Vincent Massol] bbl  \nxwiki-bridge - (12:59): [lucaa] <thinking-aloud>  \nxwiki-bridge - (12:59): [lucaa] anyway, what I thought the normalizer is doing is to resolve a reference (and make it absolute) wrt to another passed reference (other than default values or current document), which is what I called \"base\".   \nxwiki-bridge - (12:59): [lucaa] this can be useful (I used it in the wysiwyg, but that's a different ballgame) when manipulating links, for example.   \nxwiki-bridge - (12:59): [lucaa] it can also be a factory, and it's a general case for the two factory impl we have now, the default & current.   \nxwiki-bridge - (12:59): [lucaa] now, we don't really need it now, since I don't see a usecase right away (other than trying to use the model code in the wysiwyg instead of the client side reimplementation of resource references manipulation)  \nxwiki-bridge - (13:18): [anamarias] lucaa: I need more help :p  \nxwiki-bridge - (13:19): [anamarias] For:  \nxwiki-bridge - (13:19): [anamarias] HTML:  \nxwiki-bridge - (13:19): [anamarias] <meta name=\"document\" content=\"SemanticCommunity.Felix&#8217; Semantic Community\"/>  \nxwiki-bridge - (13:19): [anamarias] JS:  \nxwiki-bridge - (13:19): [anamarias] var communityName = $$(\"meta[name='document']\")[0].content;  \nxwiki-bridge - (13:19): [anamarias] console.log(communityName);  \nxwiki-bridge - (13:19): [anamarias] console.log(encodeURIComponent(communityName));  \nxwiki-bridge - (13:19): [anamarias]   \nxwiki-bridge - (13:19): [anamarias] I get in the Firebug Console:  \nxwiki-bridge - (13:19): [anamarias] SemanticCommunity.Felix\u2019 Semantic Community  \nxwiki-bridge - (13:19): [anamarias] SemanticCommunity.Felix%E2%80%99%20Semantic%20Community  \nxwiki-bridge - (13:19): [anamarias]   \nxwiki-bridge - (13:19): [anamarias] But the 2nd line should be: Felix%27%20Semantic%20Community  \nxwiki-bridge - (13:19): [anamarias] because doing decodeURIComponent gives: \u00e2\u20ac\u2122 for %E2%80%99%  \nxwiki-bridge - (13:20): [anamarias] why isn't console.log(encodeURIComponent(communityName)) Felix%27%20Semantic%20Community ? if so  \nxwiki-bridge - (13:24): [lucaa] because because... well... because &# smth is a html entity  \nxwiki-bridge - (13:25): [lucaa] and it's interpreted at a different level than the encoding  \nxwiki-bridge - (13:25): [lucaa] therefore the encoding encodes the & and does not interpret the entity  \nxwiki-bridge - (13:25): [anamarias] hmm how do I make communityName really be \"Felix\u2019 Semantic Community\" string  \nxwiki-bridge - (13:26): [anamarias] and not only look like this when printed  \nxwiki-bridge - (13:26): [lucaa] I don't understand, it is that  \nxwiki-bridge - (13:27): [anamarias] well, I do : console.log(communityName); and I get \"Felix\u2019 Semantic Community\"  \nxwiki-bridge - (13:27): [lucaa] I'm looking at : http://www.elizabethcastro.com/html/extras/entities.html  \nxwiki-bridge - (13:27): [lucaa] yes, but that doesn't mean the console is not interpreting the entities  \nxwiki-bridge - (13:27): [lucaa] (it's not that clear in my head either, don't worry, I'm trying to make sense now)  \nxwiki-bridge - (13:27): [anamarias] looks like this is what happens, evil console  \nxwiki-bridge - (13:28): [lucaa] it show's you how the string \\_looks like\\_  \nxwiki-bridge - (13:28): [lucaa] which is ok  \nxwiki-bridge - (13:28): [lucaa] s/show's/shows/  \nxwiki-bridge - (13:28): [anamarias] should display the raw string, not it's representation  \nxwiki-bridge - (13:30): [lucaa] sdumitriu: do you have any idea how to handle this kind of stuff?  \nxwiki-bridge - (13:37): [anamarias] look what I found: http://www.experts-exchange.com/Programming/Languages/Scripting/JavaScript/Q\\_21998152.html  \nxwiki-bridge - (13:38): [anamarias] but looks like a trick, rather than an actual function:   \nxwiki-bridge - (13:38): [anamarias] function removeHTMLEntities(inputString){  \nxwiki-bridge - (13:38): [anamarias] \u00a0 \u00a0 var div = document.createElement('div');  \nxwiki-bridge - (13:38): [anamarias] \u00a0 \u00a0 div.innerHTML = inputString;  \nxwiki-bridge - (13:38): [anamarias] \u00a0 \u00a0 return div.innerHTML;  \nxwiki-bridge - (13:38): [anamarias] }  \nxwiki-bridge - (13:39): [lucaa] oh it's a trick  \nxwiki-bridge - (13:39): [lucaa] it forces the htmlentities to be interpreted  \nxwiki-bridge - (13:40): [anamarias] yes  \nxwiki-bridge - (13:40): [anamarias] any way to do it nicely ?  \nxwiki-bridge - (13:41): [lucaa] I don't know one, anybody else?  \nxwiki-bridge - (13:51): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] Hello people  \nxwiki-bridge - (13:51): [anamarias] hmm it didn't work this way either  \nxwiki-bridge - (13:53): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] :NO:  \nxwiki-bridge - (13:53): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] Anyone alive?  \nxwiki-bridge - (13:53): [Vincent Massol] nope  \nxwiki-bridge - (13:53): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] :-D  \nxwiki-bridge - (13:54): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] I'm new to this community  \nxwiki-bridge - (13:55): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] Seems like new participants r not welcomed  \nxwiki-bridge - (13:56): [sdumitriu] That's not true  \nxwiki-bridge - (13:56): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] 8-)  \nxwiki-bridge - (13:56): [Vincent Massol] do you use xwiki? or want to use it?  \nxwiki-bridge - (13:56): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] Well, what's true then?  \nxwiki-bridge - (13:57): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] Vincent Massol: whats xwiki?  \nxwiki-bridge - (13:57): [Vincent Massol] I think you're in the wrong chat  \nxwiki-bridge - (13:57): [Vincent Massol] this is a xwiki-only chat  \nxwiki-bridge - (13:59): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] So users who dont know whats xwiki have not right to be in here?  \nxwiki-bridge - (14:00): [anamarias] this solution seems not to be working either: :(  \nxwiki-bridge - (14:00): [anamarias] function removeHTMLEntities(inputString){  \nxwiki-bridge - (14:00): [anamarias] \u00a0 \u00a0 var div = document.createElement('div');  \nxwiki-bridge - (14:00): [anamarias] \u00a0 \u00a0 div.innerHTML = inputString;  \nxwiki-bridge - (14:00): [anamarias] \u00a0 \u00a0 return div.innerHTML;  \nxwiki-bridge - (14:00): [anamarias] }  \nxwiki-bridge - (14:04): [?\u00bb\u00bb?????? ??\u00a5\u00ab\u00ab?] Ok  \nCalebJamesDeLisl joined #xwiki at 16:14  \nCalebJamesDeLisl - (16:25): Good morning folks in Jabber land who didn't see me join.  \nxwiki-bridge - (16:27): [lucaa] CalebJamesDeLisl Good mornin'. The xwiki bridge sends join notifications too  \nCalebJamesDeLisl - (16:28): A hah, I have never seen a join notification come from the jabber end so I assumed...  \nxwiki-bridge - (16:34): [Vincent Massol] Hi Caleb, yes we saw you :)  \nCalebJamesDeLisl - (16:36): I just double checked that forward link test script, it does what I expected.  \nxwiki-bridge - (16:36): [Vincent Massol] what do you expeect?  \nxwiki-bridge - (16:37): [Vincent Massol] your expectation = the bug?  \nCalebJamesDeLisl - (16:38): I just removed the rename call to double check and it does what I expected.  \nCalebJamesDeLisl - (16:38): Step 1: Create two documents in same space (poorly named though)  \nCalebJamesDeLisl - (16:38): Step 2: Link test2.target to test2.source using link syntax [[source]]  \nCalebJamesDeLisl - (16:38): Step 3: Move test2.target to test2B.target and check to see if link has been refactored to still point to test2.source   \nxwiki-bridge - (16:39): [Vincent Massol] yes I've seen this  \nxwiki-bridge - (16:39): [Vincent Massol] but I don't understand what it means  \nxwiki-bridge - (16:40): [Vincent Massol] is it failing?  \nxwiki-bridge - (16:40): [Vincent Massol] is it succeeding?  \nCalebJamesDeLisl - (16:40): If I make two pages in the same space and link one to the other with syntax: [[otherpage]] then move the page containing the link to another space, shouldn't the link be refactored to say [[origionalspace.otherpage]] rather than being broken by the rename?  \nxwiki-bridge - (16:40): [Vincent Massol] ok I'll check just after my upcoming commit  \nCalebJamesDeLisl - (16:41): If that script succeeds, you should see: \"[[test2.source]] should equal [[test2.source]]\"  \nxwiki-bridge - (16:42): [Vincent Massol] I'll test it manually  \nCalebJamesDeLisl - (16:43): When this is working I or somebody should add the test to the unit tests.  \nCalebJamesDeLisl - (16:45): Seeing XWIKI-4719 inspired me to test all of the functionality required by rename.  \nxwiki-bridge - (16:57): [Vincent Massol] lucaa: please let me know on the list what you think re Resolver vs Factory, etc  \nxwiki-bridge - (17:38): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Hi all  \nxwiki-bridge - (17:39): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] I have come up with new api for WikiImporter http://svn.xwiki.org/svnroot/xwiki/contrib/sandbox/importexport/xwiki-wikiimporter-api/  \ntoulmean joined #xwiki at 17:39  \nxwiki-bridge - (17:40): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Can i have some feed back / review so that i can start implementation part.  \nxwiki-bridge - (17:43): [glerouge] Hi arunreddy  \nxwiki-bridge - (17:43): [glerouge] you'll need to wait for Asiri's feedbck  \nxwiki-bridge - (17:43): [glerouge] he's the one who spent the most time working on this  \nxwiki-bridge - (17:43): [glerouge] he might stop by later today  \nxwiki-bridge - (17:44): [Vincent Massol] [[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection): that's cool. Haven't checked it yet  \nxwiki-bridge - (17:44): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Ok ,Thanks glerouge.  \nxwiki-bridge - (17:45): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] :)  \nxwiki-bridge - (17:47): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] The new WikiImporter Api uses events and little similiar to macro api.  \nxwiki-bridge - (17:47): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] Suggested by thomas and asiri.  \nxwiki-bridge - (17:52): [Vincent Massol] sdumitriu: any opinion on the Factory vs Resolve (I'm about to start the refactoring)  \nxwiki-bridge - (17:52): [Vincent Massol] ?  \nxwiki-bridge - (17:53): [Vincent Massol] btw Transformer was another possibility  \nxwiki-bridge - (17:53): [Vincent Massol] ;)  \nxwiki-bridge - (17:53): [Vincent Massol] mflorea: without paying attention here's the javadoc I had for the EntityReferenceFactory:  \nxwiki-bridge - (17:53): [Vincent Massol] \u00a0\\* Transforms an Entity reference defined in a given representation into an {@link EntityReference} object.  \nxwiki-bridge - (17:55): [Vincent Massol] Here's the new one:  \nxwiki-bridge - (17:55): [Vincent Massol] \u00a0\\* Resolve an Entity reference defined in a given representation into a valid {@link EntityReference} object.  \nxwiki-bridge - (17:55): [mflorea] Vincent Massol: I understand now :)  \nxwiki-bridge - (17:55): [mflorea] thanks  \nxwiki-bridge - (17:56): [Vincent Massol] cool  \nxwiki-bridge - (17:58): [Vincent Massol] better:  \nxwiki-bridge - (17:58): [Vincent Massol] \u00a0\\* Resolve an Entity reference defined in a given representation into a validated {@link EntityReference} object,  \nxwiki-bridge - (17:58): [Vincent Massol] \u00a0\\* ie with valid values and a valid hierarchy (eg a Document reference must have a parent which is a space reference,  \nxwiki-bridge - (17:58): [Vincent Massol] \u00a0\\* etc).  \nxwiki-bridge - (17:58): [Vincent Massol] even better:  \nxwiki-bridge - (17:58): [Vincent Massol] \u00a0\\* Resolve an Entity reference defined in a given representation into a validated {@link EntityReference} object,  \nxwiki-bridge - (17:58): [Vincent Massol] \u00a0\\* ie with valid values and a valid hierarchy (eg a Document reference must have a parent which is a space reference,  \nxwiki-bridge - (17:58): [Vincent Massol] \u00a0\\* reference values must not be null, etc).  \nxwiki-bridge - (17:58): [Vincent Massol] ok I'm going for it  \nxwiki-bridge - (17:59): [mflorea] q: can I resolve a relative string representation?  \nxwiki-bridge - (17:59): [Vincent Massol] yes  \nxwiki-bridge - (18:00): [mflorea] i.e. \"space.page\" without wiki  \nxwiki-bridge - (18:00): [Vincent Massol] yes  \nxwiki-bridge - (18:00): [Vincent Massol] you need to choose to use the default or current resolver  \nxwiki-bridge - (18:00): [Vincent Massol] (there are 2 right now for strings)  \nxwiki-bridge - (18:00): [Vincent Massol] whatever you pass to it  \nxwiki-bridge - (18:00): [mflorea] but the first reference will have a null wiki, right?  \nxwiki-bridge - (18:00): [Vincent Massol] you are sure to get back a valid reference  \nxwiki-bridge - (18:01): [Vincent Massol] no  \nxwiki-bridge - (18:01): [Vincent Massol] it'll be either the default wiki or the current wiki  \nxwiki-bridge - (18:01): [mflorea] I mean, the entity reference returned by resolve(\"space.page\")  \nxwiki-bridge - (18:01): [Vincent Massol] depending on which impl you use  \nxwiki-bridge - (18:01): [mflorea] ok, this happens in behind  \nxwiki-bridge - (18:02): [mflorea] calling resolve(\"space.page\") will return an entity refernce with the wiki part filled depending on the impl, either the current wiki or the defualt wiki  \nxwiki-bridge - (18:02): [Vincent Massol] yes  \nxwiki-bridge - (18:02): [mflorea] ok  \ntoulmean left at 18:55 (  \nKermitTheFragger left at 19:02 (\"Leaving\"  \narkub left at 19:14 (Read error: 60 (Operation timed out)  \ntoulmean joined #xwiki at 19:20  \nxwiki-bridge - (19:35): [Vincent Massol] Caleb: indeed I could reproduce the pb with rename  \nCalebJamesDeLisl - (19:36): Have you compiled your last update?  \nxwiki-bridge - (19:36): [Vincent Massol] yes  \nxwiki-bridge - (19:36): [Vincent Massol] debugging now  \nCalebJamesDeLisl - (19:36): Okay, I would like to test a few other things (translations parents etc.) and I will make a set of things that need to be fixed with rename.  \nxwiki-bridge - (19:38): [Vincent Massol] dinner time, will continue after  \nCalebJamesDeLisl - (19:38): I'm about to have lunch :)  \ntoulmean left #xwiki at 20:42  \nxwiki-bridge - (20:54): [Vincent Massol] Caleb: I've answered on http://jira.xwiki.org/jira/browse/XWIKI-4726?focusedCommentId=47467&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action\\_47467  \nxwiki-bridge - (20:54): [Vincent Massol] Are you interested in implementing it?  \nxwiki-bridge - (20:55): [Vincent Massol] or would you rather that I do it\u2026 (I won't have the time now but maybe next week)  \nCalebJamesDeLisl - (20:56): Right now I'm writing the test for XWIKI-4719 this renaming business is so complicated I think it needs to be test driven. I can get to it after that.  \nxwiki-bridge - (20:57): [Vincent Massol] ok I'll let you do both issues then, let me know if you need help  \nxwiki-bridge - (20:57): [Vincent Massol] should be easier with the new tools I have created in xwiki-model :)  \nCalebJamesDeLisl - (20:59): I can see how it will help already, thanks.  \nCalebJamesDeLisl - (21:37): If the parent of each translation of a document is changed when the parent is renamed, what should happen when the parent is different for one of the translations?  \nCalebJamesDeLisl - (21:37): eg: translated version of a document lists a different parent, should it be changed? Probably not.  \nxwiki-bridge - (21:38): [sdumitriu] No  \nCalebJamesDeLisl - (21:45): Suppose parent of docA is docB but parent of spanish version of docA is docC should docA show up on docC.getChildren?  \n\n"}