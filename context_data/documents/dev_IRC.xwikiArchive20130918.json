{"id": "dev:IRC.xwikiArchive20130918", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130918", "title": "IRC Archive for channel #xwiki on 18 September 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n02:12\u00a0<polx>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n05:51\u00a0<Denis>\u00a0has quit  \n06:55\u00a0<polx>\u00a0has joined #xwiki  \n07:33\u00a0<vmassol>\u00a0has joined #xwiki  \n07:40\u00a0<polx\\_>\u00a0has joined #xwiki  \n07:41\u00a0<polx>\u00a0has quit  \n07:41\u00a0<polx\\_>\u00a0is now known as <polx>  \n08:16\u00a0<mflorea>\u00a0has joined #xwiki  \n08:27\u00a0<vmassol>\u00a0has quit  \n08:29\u00a0<msmeria>\u00a0has joined #xwiki  \n08:31\u00a0<msmeria>\u00a0has quit  \n08:32\u00a0<msmeria>\u00a0has joined #xwiki  \n08:34\u00a0<sburjan>\u00a0has joined #xwiki  \n08:34\u00a0<Denis>\u00a0has joined #xwiki  \n08:41\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:45\u00a0<UCC>\u00a0has joined #xwiki  \n09:04\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:34\u00a0<vmassol>\u00a0has joined #xwiki  \n09:35\u00a0<evalica>\u00a0has joined #xwiki  \n09:53\u00a0<mflorea>\u00a0tmortagne: is this last commit fixing http://ci.xwiki.org/job/xwiki-platform/4378/org.xwiki.platform$xwiki-platform-wikistream-instance-script/console ?  \n09:54\u00a0<mflorea>\u00a0I guess not  \n09:54\u00a0<tmortagne>\u00a0mflorea: thid last commit has nothing to do with it it  \n09:55\u00a0<tmortagne>\u00a0I on't understand http://ci.xwiki.org/job/xwiki-platform/4378/org.xwiki.platform$xwiki-platform-wikistream-instance-script/console, I seen it when it failed and expected it to be a timing issue  \n09:55\u00a0<tmortagne>\u00a0this ROLEHINT variable does exist and I don't have any issue when building with maven myself  \n09:57\u00a0<mflorea>\u00a0I get the build failure locally  \n09:57\u00a0<mflorea>\u00a0source code up to date  \n09:57\u00a0<mflorea>\u00a0I'm building only xwiki-platform-wikistream-instance-script  \n09:58\u00a0<tmortagne>\u00a0mflorea: this variable is not in this module  \n09:58\u00a0<tmortagne>\u00a0it's in xwiki-platform-wikistream-script  \n09:58\u00a0<mflorea>\u00a0ok  \n09:58\u00a0<tmortagne>\u00a0I build the whoe xwiki-platform/xwiki-platform-core/xwiki-platform-wikistream without any issue  \n09:59\u00a0<tmortagne>\u00a0and xwiki-platform-wikistream-script is listed as module of xwiki-platform-wikistream  \n10:01\u00a0<mflorea>\u00a0well, I build xwiki-platform-wikistream-script and then xwiki-platform-wikistream-instance-script offline (mvn -o) and it still fails  \n10:01\u00a0<mflorea>\u00a0note that I'm using the command line  \n10:01\u00a0<tmortagne>\u00a0I'm using the command line too  \n10:01\u00a0<tmortagne>\u00a0build the whole xwiki-platform-wikistream  \n10:01\u00a0<mflorea>\u00a0java 7  \n10:01\u00a0<tmortagne>\u00a0there is dependencies on xwiki-platform-wikistream-instance-api  \n10:02\u00a0<tmortagne>\u00a0I'm using java 6 to build with maven like jenkins does  \n10:04\u00a0<tmortagne>\u00a0rebuilt with cleaned local repository and -o and still no issue  \n10:04\u00a0<mflorea>\u00a0it works if I build the entire xwiki-platform-wikistream  \n10:05\u00a0<tmortagne>\u00a0I started a full xwiki-platform build on jenkins, weird things happen with feature to build only part of it depending on the commits  \n10:05\u00a0<tmortagne>\u00a0xwiki-platform quality built fine for example on jenkins  \n10:05\u00a0<mflorea>\u00a0ah, yes, that could be it  \n10:05\u00a0<tmortagne>\u00a0I saw this error on xwiki-platform quality first and restarted it fully and looks like it worked  \n10:05\u00a0<mflorea>\u00a0probably it didn't detect correctly which modules to rebuild based on the commit  \n10:06\u00a0<tmortagne>\u00a0yes, happen quite often (in case where you add new APIs and the same time as new module using it)  \n10:09\u00a0<vmassol>\u00a0mflorea: not sure you should label BFD in advance :) If you don't do them tomorrow and close them say several days later an forgot to remove the label they'll be counted in the global BFD stats  \n10:10\u00a0<vmassol>\u00a0(just noticed your strategy of preparing BFD work :))  \n10:10\u00a0<vmassol>\u00a0FWIW personally I prepare them in JIRA Client with a flag  \n10:27\u00a0<mflorea>\u00a0vmassol: so far I haven't forgot a label and managed to fix what I marked in advance :)  \n10:30\u00a0<vmassol>\u00a0ok :)  \n10:51\u00a0<Slashman>\u00a0has joined #xwiki  \n10:54\u00a0<sdumitriu>\u00a0has quit  \n10:55\u00a0<sdumitriu>\u00a0has joined #xwiki  \n12:04\u00a0<xwikibot>\u00a0has joined #xwiki  \n12:10\u00a0<npst>\u00a0has joined #xwiki  \n12:10\u00a0<npst>\u00a0why hello there  \n12:11\u00a0<npst>\u00a0i'm trying to implement kerberos SSO and have problems with either my apache settings or the xwiki authentication  \n12:12\u00a0<npst>\u00a0see, i'm trying to rewrite the username to lowercase. but my appservertrustedauthserviceimpl seems to get a capitalized name.  \n12:12\u00a0<npst>\u00a0would anyone know which header field that authenticator is using?  \n12:12\u00a0<npst>\u00a0(i tried REMOTE\\_USER for now)  \n12:13\u00a0<vmassol>\u00a0hi npst, sorry I don't know on my side, maybe others here know  \n12:23\u00a0<npst>\u00a0might be, might be :D  \n12:24\u00a0<vmassol>\u00a0thomas might know but he must be out for lunch right now  \n12:26\u00a0<npst>\u00a0i'll be here a while (if my connection doesn't die)  \n12:53\u00a0<mflorea>\u00a0has quit  \n13:28\u00a0<vmassol1>\u00a0has joined #xwiki  \n13:30\u00a0<vmassol>\u00a0has quit  \n13:50\u00a0<mflorea>\u00a0has joined #xwiki  \n13:56\u00a0<tmortagne>\u00a0npst: this authenticator is using HttpServletRequest.getRemoteUser() and this is not a HTTP header so there is no way to set it using headers  \n13:57\u00a0<tmortagne>\u00a0whatever filter that is taking care of the actual authentication is supposed to set this value properly, now it depends if it's a filter in your application server or in apache or whatever other frontend HTTP server  \n14:00\u00a0<npst>\u00a0hi tm :)  \n14:00\u00a0<npst>\u00a0the actual authentication is done via kerberos  \n14:01\u00a0<npst>\u00a0am i supposed to use a different authenticator, or is this a thing in the kerberos settings then?  \n14:02\u00a0<tmortagne>\u00a0npst: kerberos is the server but you have something in front of XWiki which is supposed to communicate with kerberos and set the proper remote user  \n14:02\u00a0<sburjan>\u00a0vmassol1: ping  \n14:02\u00a0<vmassol1>\u00a0pong  \n14:02\u00a0<vmassol1>\u00a0is now known as <vmassol>  \n14:03\u00a0<npst>\u00a0that would be my apache, yeah. i'm RewriteHeader-ing like a berserker there  \n14:04\u00a0<sburjan>\u00a0vmassol: I am testing the migration on PostgreSQL from 4.5.4 to 5.2M2 and I have the following issue: http://pastebin.com/pVzbLJ8S  \n14:04\u00a0<sburjan>\u00a0AFAIK we fixed this when you were here in Iasi  \n14:06\u00a0<tmortagne>\u00a0npst: by the way appart from AppServerTrustedAuthServiceImpl you also have AppServerTrustedKerberosAuthServiceImpl authenticator which only difference is that it extract the user id from the remote user instead of taking it as it is (I don't know kerberos very well but I guess the remote user is somethings like domain\\userid or userid@domain by default)  \n14:08\u00a0<vmassol>\u00a0sburjan: that's because you're missing some mapping  \n14:08\u00a0<vmassol>\u00a0this one: \"relation \"xwikiid\" does not exist\"  \n14:09\u00a0<sburjan>\u00a0well I started with a blank database  \n14:09\u00a0<sburjan>\u00a0I tried twice  \n14:10\u00a0<npst>\u00a0i'm stripping the domain in the apache already, to be able to authenticate via kerberos. but i'll try using the different authenticator  \n14:10\u00a0<sburjan>\u00a0gonna try one more time. If I hit the issue again, I will report it  \n14:10\u00a0<npst>\u00a0you say the REMOTE\\_USER field is the right onw to edit, tho?  \n14:11\u00a0<tmortagne>\u00a0npst: maybe http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Authentication#HKerberosSSOAuthentication would help you  \n14:11\u00a0<npst>\u00a0hopefully. thanks so far :)  \n14:12\u00a0<tmortagne>\u00a0npst: no I said the opposite, XWiki does not get the remote user from the HTTP headers, it's a special field (not sure exactly how to set it at apache level)  \n14:12\u00a0<vmassol>\u00a0sburjan: make sure you have the \"activeinstalls.hbm.xml' mapping  \n14:13\u00a0<vmassol>\u00a0sorry  \n14:13\u00a0<vmassol>\u00a0instance.hbm.xml  \n14:13\u00a0<npst>\u00a0a special field, hmmm...  \n14:13\u00a0<sburjan>\u00a0in my 5.2M2 ?  \n14:13\u00a0<sburjan>\u00a0vmassol,  \n14:13\u00a0<vmassol>\u00a0sburjan: I need to add this in the release notes actually  \n14:13\u00a0<vmassol>\u00a0for people who upgrade  \n14:14\u00a0<sburjan>\u00a0vmassol: where should I look for it ?  \n14:14\u00a0<vmassol>\u00a0hibernate.cfg.xml  \n14:15\u00a0<sburjan>\u00a0vmassol: yes, I have it: <mapping resource=\"instance.hbm.xml\"/>  \n14:15\u00a0<sburjan>\u00a0in my 5.2  \n14:15\u00a0<vmassol>\u00a0ok then I need to check if we require a specific mapping for pgsql and other dbs  \n14:15\u00a0<vmassol>\u00a0checking  \n14:15\u00a0<tmortagne>\u00a0npst: from what I see on google it looks like the remote user is an environment variable at lowest level  \n14:16\u00a0<tmortagne>\u00a0Servlet API translate it for XWiki as something related to the request but in practice it's not stored in the HTTP request itself  \n14:17\u00a0<sburjan>\u00a0vmassol: waiting :)  \n14:19\u00a0<vmassol>\u00a0sburjan: should work on all DBs I think  \n14:20\u00a0<vmassol>\u00a0I don't see anything specific that wouldn't work on pgsl in instance.hbm.xml  \n14:20\u00a0<vmassol>\u00a0now  \n14:20\u00a0<vmassol>\u00a0you also have this error:  \n14:20\u00a0<vmassol>\u00a0\"schema \"$xwiki.getURL(\"${xcontext.mainWikiName}\" does not exist\"  \n14:20\u00a0<vmassol>\u00a0this is clearly wrong but I don't know from where it's coming  \n14:21\u00a0<sburjan>\u00a0I get all the stacktraces when the migrators are triggered.  \n14:21\u00a0<sburjan>\u00a0before the DW kicks in  \n14:22\u00a0<vmassol>\u00a0\"ERROR: relation \"hibernate\\_sequence\" already exists\"  \n14:22\u00a0<sburjan>\u00a0I am reporting it  \n14:22\u00a0<vmassol>\u00a0hmm  \n14:22\u00a0<sburjan>\u00a0so you can see the full stacktraceand steps  \n14:22\u00a0<vmassol>\u00a0ok  \n14:33\u00a0<sburjan>\u00a0vmassol: http://jira.xwiki.org/browse/XWIKI-9473  \n14:33\u00a0<vmassol>\u00a0thanks  \n14:33\u00a0<vmassol>\u00a0now some work for me for tomorrow :)  \n14:33\u00a0<sburjan>\u00a0vmassol: other db's might be affectred. I only tested on Postgres  \n14:34\u00a0<vmassol>\u00a0yes they probably are  \n14:34\u00a0<vmassol>\u00a0well just oracle probably  \n14:35\u00a0<sburjan>\u00a0ok, gonna try to check Oracle today also  \n14:37\u00a0<npst>\u00a0has quit  \n14:52\u00a0<vmassol>\u00a0mflorea: taking all the nice issues for tomorrow's BFD? :) (just kidding)  \n14:52\u00a0<sburjan>\u00a0vmassol: http://maven.xwiki.org/releases/ I think the fveron dir should not be there :)  \n14:52\u00a0<mflorea>\u00a0I left one or two :)  \n14:52\u00a0<vmassol>\u00a0hehe  \n14:53\u00a0<vmassol>\u00a0sburjan: that's for ludovic actually  \n14:53\u00a0<vmassol>\u00a0I'll let him know  \n15:09\u00a0<tmortagne>\u00a0sburjan: this is a previous version of a contrib extension  \n15:10\u00a0<sburjan>\u00a0tmortagne: I know, but it shouldn't be there afaik  \n15:11\u00a0<vmassol>\u00a0we should have a rule in our nexus to do some validation of groupid  \n15:11\u00a0<vmassol>\u00a0(as they do on the sonatype nexus)  \n15:22\u00a0<xwikiorg\\_guest\\_1>\u00a0has joined #xwiki  \n15:22\u00a0<xwikiorg\\_guest\\_1>\u00a0is now known as <npst>  \n15:22\u00a0<npst>\u00a0hey  \n15:23\u00a0<npst>\u00a0just FYI, my apache/kerberos/xwiki settings where all good. the field filled by kerberos contained the value from the AD  \n15:23\u00a0<npst>\u00a0so just renaming the users to the ad-capitalization-style is my solution  \n15:25\u00a0<npst>\u00a0on a sidenote: the User Listing won't load, i also can't add users. is this a known bug with 4.1.3?  \n15:32\u00a0<tmortagne>\u00a0sburjan: it has been put there so that the extension.xwiki.org importer find it when importing the new id  \n15:33\u00a0<tmortagne>\u00a0to not loose old version that were not in github/maven  \n15:33\u00a0<npst>\u00a0to be clear: both the user-list-page in the admin section as well as bin/UserDirectory load, but show no users. only that loading bar.  \n15:33\u00a0<npst>\u00a0catalina.out shows a lot of debug info, but no warning or worse  \n15:33\u00a0<sburjan>\u00a0tmortagne: ok, you know better  \n15:39\u00a0<UCC>\u00a0has quit  \n15:44\u00a0<npst>\u00a0.. the proptotype.js seems to get a 401 in line 557: this.transport.send(this.body);  \n15:54\u00a0<tmortagne>\u00a0has quit  \n15:58\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n15:58\u00a0<sburjan\\_>\u00a0has quit  \n15:58\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n16:02\u00a0<sburjan`>\u00a0has quit  \n16:02\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n16:02\u00a0<msmeria>\u00a0has quit  \n16:04\u00a0<polx>\u00a0has quit  \n16:14\u00a0<npst>\u00a0my problem sounds very much alike this one  \n16:14\u00a0<npst>\u00a0http://lists.xwiki.org/pipermail/users/2013-March/025000.html  \n16:14\u00a0<npst>\u00a0sadly, there's no solution there  \n16:23\u00a0<Denis>\u00a0has quit  \n16:28\u00a0<tmortagne>\u00a0has joined #xwiki  \n16:38\u00a0<polx>\u00a0has joined #xwiki  \n16:49\u00a0<vmassol>\u00a0has quit  \n16:52\u00a0<vmassol>\u00a0has joined #xwiki  \n16:57\u00a0<polx>\u00a0has quit  \n17:08\u00a0<mflorea>\u00a0has quit  \n17:09\u00a0<sburjan>\u00a0has quit  \n17:18\u00a0<polx>\u00a0has joined #xwiki  \n17:18\u00a0<polx>\u00a0has quit  \n17:18\u00a0<polx>\u00a0has joined #xwiki  \n17:19\u00a0<vmassol>\u00a0has quit  \n17:54\u00a0<gdelhumeau>\u00a0bye  \n17:59\u00a0<gdelhumeau>\u00a0has quit  \n18:04\u00a0<npst>\u00a0has quit  \n18:06\u00a0<Denis>\u00a0has joined #xwiki  \n18:07\u00a0<UCC>\u00a0has joined #xwiki  \n18:11\u00a0<vmassol>\u00a0has joined #xwiki  \n18:13\u00a0<tmortagne>\u00a0has quit  \n18:29\u00a0<polx\\_>\u00a0has joined #xwiki  \n18:33\u00a0<polx>\u00a0has quit  \n18:34\u00a0<polx\\_>\u00a0has quit  \n18:34\u00a0<vmassol>\u00a0has quit  \n18:55\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n19:26\u00a0<Slashman>\u00a0has quit  \n19:34\u00a0<sdumitriu1>\u00a0has quit  \n19:36\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n19:45\u00a0<abusenius>\u00a0has joined #xwiki  \n20:01\u00a0<polx>\u00a0has joined #xwiki  \n20:04\u00a0<tekzilla>\u00a0has quit  \n20:05\u00a0<tekzilla>\u00a0has joined #xwiki  \n20:50\u00a0<vmassol>\u00a0has joined #xwiki  \n20:55\u00a0<sdumitriu1>\u00a02013-09-18 14:49:06,894 [http://10.62.100.2:8080/bin/preview/data/P0000003] WARN \u00a0o.h.h.QuerySplitter \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- no persistent classes found for query class: delete from org.xwiki.instance.InstanceId  \n20:55\u00a0<sdumitriu1>\u00a02013-09-18 14:49:06,896 [http://10.62.100.2:8080/bin/preview/data/P0000003] WARN \u00a0x.i.i.DefaultInstanceIdManager - Failed to save Instance id to database. Reason: [MappingException: Unknown entity: org.xwiki.instance.InstanceId]  \n20:58\u00a0<vmassol>\u00a0sdumitriu: is that the issue reported by sburjan with postgresql  \n20:58\u00a0<vmassol>\u00a0?  \n20:58\u00a0<sdumitriu1>\u00a0Doubt it, I'm on HSQLDB  \n20:59\u00a0<vmassol>\u00a0how can I reproduce?  \n20:59\u00a0<vmassol>\u00a0do you have the mapping file in your hibernate.cfg.xml?  \n20:59\u00a0<sdumitriu1>\u00a0No idea, I just built and ran  \n20:59\u00a0<vmassol>\u00a0(instance.hbm.xml)  \n20:59\u00a0<sdumitriu1>\u00a0Checking  \n20:59\u00a0<vmassol>\u00a0maybe someone removed it  \n20:59\u00a0<vmassol>\u00a0I built yesterday and it was there  \n21:00\u00a0<sdumitriu1>\u00a0I'm on 5.2m2  \n21:01\u00a0<vmassol>\u00a0strange, I'll download it  \n21:01\u00a0<vmassol>\u00a0so it doesn't even start ?  \n21:01\u00a0<vmassol>\u00a0I don't see how we could have missed that  \n21:01\u00a0<sdumitriu1>\u00a0Wait  \n21:01\u00a0<sdumitriu1>\u00a0I have a custom build for the war  \n21:02\u00a0<vmassol>\u00a0ah maybe you don't have the jars then  \n21:02\u00a0<vmassol>\u00a0you need the xwiki-platform-instance one  \n21:03\u00a0<sdumitriu1>\u00a0\u00a0\u00a0\u00a0\u00a0<xwiki.db.common.extraMappings>activitystream.hbm.xml,instance.hbm.xml</xwiki.db.common.extraMappings>  \n21:03\u00a0<vmassol>\u00a0ok  \n21:05\u00a0<sdumitriu1>\u00a0Fixed, sorry for the wrong alarm  \n21:06\u00a0<vmassol>\u00a0pfew :)  \n21:26\u00a0<polx>\u00a0has quit  \n21:33\u00a0<vmassol>\u00a0has quit  \n21:35\u00a0<vmassol>\u00a0has joined #xwiki  \n22:16\u00a0<polx>\u00a0has joined #xwiki  \n22:27\u00a0<vmassol>\u00a0has quit  \n22:32\u00a0<evalica>\u00a0has quit  \n23:12\u00a0<polx>\u00a0has quit  \n23:12\u00a0<polx>\u00a0has joined #xwiki  \n23:50\u00a0<UCC>\u00a0has quit  \n23:57\u00a0<abusenius>\u00a0has quit\n"}