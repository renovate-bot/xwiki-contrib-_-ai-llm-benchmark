{"id": "dev:IRC.xwikiArchive20111012", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20111012", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:00\u00a0<lpereira>\u00a0has quit  \n00:25\u00a0<abusenius>\u00a0has quit  \n00:46\u00a0<vmassol>\u00a0has joined #xwiki  \n01:04\u00a0<+sburjan`>\u00a0hello vmassol  \n01:04\u00a0<vmassol>\u00a0sburjan`: hi\u2026 going to bed soon now :)  \n01:05\u00a0<+sburjan`>\u00a0I saw you wrote me on skype today. What was it about, because I only got the message when I got home  \n01:05\u00a0<vmassol>\u00a0it was about updating the RN  \n01:05\u00a0<+sburjan`>\u00a0oh, ok  \n01:05\u00a0<vmassol>\u00a0but we talked about it on IRC this morning and you've done it already  \n01:05\u00a0<+sburjan`>\u00a0yep  \n01:05\u00a0<+sburjan`>\u00a0I didn't get you message on skype at work, only at home  \n01:05\u00a0<vmassol>\u00a0ok  \n01:05\u00a0<+sburjan`>\u00a0sorry for disturbing :)  \n01:05\u00a0<vmassol>\u00a0np  \n01:05\u00a0<vmassol>\u00a0thanks for checking!  \n01:06\u00a0<+sburjan`>\u00a0np  \n01:28\u00a0<vmassol>\u00a0has quit  \n01:43\u00a0<DrLou\\_>\u00a0has joined #xwiki  \n01:43\u00a0<DrLou>\u00a0has quit  \n01:43\u00a0<DrLou\\_>\u00a0is now known as <DrLou>  \n02:05\u00a0<pturcotte>\u00a0has joined #xwiki  \n03:36\u00a0<DrLou>\u00a0has quit  \n04:09\u00a0<npm>\u00a0has quit  \n05:16\u00a0<sdumitriu>\u00a0has quit  \n05:21\u00a0<sdumitriu>\u00a0has joined #xwiki  \n06:30\u00a0<npm>\u00a0has joined #xwiki  \n07:00\u00a0<Denis1>\u00a0has joined #xwiki  \n07:00\u00a0<Denis>\u00a0has quit  \n08:12\u00a0<mflorea>\u00a0has joined #xwiki  \n08:31\u00a0<vmassol>\u00a0has joined #xwiki  \n08:59\u00a0<Denis1>\u00a0is now known as <Denis>  \n08:59\u00a0<vmassol>\u00a0has quit  \n09:31\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:38\u00a0<vmassol>\u00a0has joined #xwiki  \n09:41\u00a0<sburjan>\u00a0has joined #xwiki  \n09:59\u00a0<vmassol>\u00a0pushing 3.2 final to Maven central now  \n09:59\u00a0<vmassol>\u00a0(good morning\u00e0  \n10:34\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:36\u00a0<evalica>\u00a0has joined #xwiki  \n10:36\u00a0<@sdumitriu>\u00a0Denis: BTW, why is getLocalKey needed?  \n10:39\u00a0<+sburjan>\u00a0hello sdumitriu  \n10:39\u00a0<@sdumitriu>\u00a0Hello sburjan  \n10:43\u00a0<vmassol>\u00a0tmortagne: skype ping\u2026 :)  \n11:11\u00a0<lucaa>\u00a0has joined #xwiki  \n11:14\u00a0<vmassol>\u00a0ok 3.2 pushed, now need to wait for sync  \n11:21\u00a0<+tmortagne>\u00a0cool  \n11:21\u00a0<vmassol>\u00a0rc1 is already there btw: http://repo2.maven.org/maven2/org/xwiki/rendering/xwiki-rendering-api/  \n11:22\u00a0<+tmortagne>\u00a0vmassol: shouldn't we change the release deploy configuration in 3.3 for commons and rendering or do we want to keep things or our side and sync with central ?  \n11:22\u00a0<vmassol>\u00a0I don't know yet  \n11:22\u00a0<vmassol>\u00a0haven't made up my mind  \n11:23\u00a0<+tmortagne>\u00a0how do you sync right now ?  \n11:24\u00a0<vmassol>\u00a0I'll update the Release Process now with this information  \n11:25\u00a0<+tmortagne>\u00a0ok  \n11:25\u00a0<+tmortagne>\u00a0do \u00a0we really need to put milestone and rc on central ?  \n11:25\u00a0<+tmortagne>\u00a0sounds a bit overkill to me  \n11:26\u00a0<vmassol>\u00a0if you ask me then yes we need to do so  \n11:26\u00a0<vmassol>\u00a0for the exact same reason we're releasing milestones and rc  \n11:27\u00a0<+tmortagne>\u00a0I mean I don't see much milestone and rc on central, other project generally keep then on their own repo  \n11:27\u00a0<vmassol>\u00a0tmortagne: I had already documented it a while ago: http://dev.xwiki.org/xwiki/bin/view/Community/ReleaseProcess#HPublishtoMavenCentral :)  \n11:27\u00a0<vmassol>\u00a0tmortagne: I don't think that's a correct statement  \n11:27\u00a0<vmassol>\u00a0a more correct statement is that a lot of projects don't have milestones/rcs  \n11:28\u00a0<+tmortagne>\u00a0the fact that I don't see much is a correct statement :)  \n11:28\u00a0<vmassol>\u00a0have you looked at the full repo?  \n11:28\u00a0<vmassol>\u00a0http://search.maven.org/#search%7Cga%7C1%7Crc  \n11:28\u00a0<+tmortagne>\u00a0I did not say there were not in general in maven central, only talking about the project I know  \n11:29\u00a0<vmassol>\u00a0anyway  \n11:29\u00a0<vmassol>\u00a0I don't care what others are doing  \n11:29\u00a0<vmassol>\u00a0I want us to be better than them  \n11:29\u00a0<vmassol>\u00a0the central repo is made to receive all releases be them final or not, provided they're not snapshots  \n11:29\u00a0<+tmortagne>\u00a0in this case we should really directly related on central since I don't see any reason to have stuff on our side  \n11:29\u00a0<vmassol>\u00a0I see value for people to try out our milestones/rcs  \n11:30\u00a0<+tmortagne>\u00a0s/related/release/  \n11:30\u00a0<+tmortagne>\u00a0having them on our side doe snot prevent anyone to try them  \n11:30\u00a0<vmassol>\u00a0it does  \n11:30\u00a0<vmassol>\u00a0this is exactly why we're pushing them to central now  \n11:30\u00a0<vmassol>\u00a0so that people can get them easily without having to configure extra repos  \n11:31\u00a0<vmassol>\u00a0re \"in this case we should really directly related on central since I don't see any reason to have stuff on our side\", I agree  \n11:31\u00a0<vmassol>\u00a0I also don't see much value  \n11:31\u00a0<vmassol>\u00a0except mabye in having all our artifacts available from our repo and not have \"holes\" but that's low value probably  \n11:31\u00a0<+tmortagne>\u00a0actually I see one :)  \n11:32\u00a0<+tmortagne>\u00a0I have a script to \"convert\" a maven repository as debian repositoty which I hope to start using in 3.3  \n11:33\u00a0<+tmortagne>\u00a0just need my patch to be release in the debian maven plugin I use before starting the vote  \n11:33\u00a0<+tmortagne>\u00a0actually it's not for rendering and commons for now  \n11:33\u00a0<+tmortagne>\u00a0so so need indeed  \n11:34\u00a0<vmassol>\u00a0still we don't need to rush  \n11:34\u00a0<vmassol>\u00a0it's pretty easy to deploy to central  \n11:34\u00a0<+tmortagne>\u00a0well I'm saying that because it would make release much easier to release directly on central than having to sync  \n11:34\u00a0<vmassol>\u00a0let's think a bit more about it before taking a decision  \n11:34\u00a0<+tmortagne>\u00a0at least we can't forget  \n11:34\u00a0<vmassol>\u00a0sure  \n11:35\u00a0<vmassol>\u00a0when I get bored about doing it, I'll propose something :)  \n11:35\u00a0<+tmortagne>\u00a0if it's in the releaseprocess it supposed to be done by the release manager ;)  \n11:35\u00a0<vmassol>\u00a0ATM I'm ok to continue doing it for a while...  \n11:35\u00a0<vmassol>\u00a0I'm ok to help  \n11:35\u00a0<+tmortagne>\u00a0couldn't it be a bit automated in a cron on our maven server or something ?  \n11:36\u00a0<vmassol>\u00a0maybe but really it's too early for that IMO  \n11:36\u00a0<vmassol>\u00a0(we would need to check if the nexus REST api allows closing a staged repo and promoting it)  \n11:37\u00a0<vmassol>\u00a0(there's probably an api for that)  \n13:07\u00a0<mflorea>\u00a0has quit  \n13:16\u00a0<DrLou>\u00a0has joined #xwiki  \n13:24\u00a0<+Enygma`>\u00a0Hi  \n13:24\u00a0<+Enygma`>\u00a0we have some problems with the test builds on http://ci.xwiki.org  \n13:25\u00a0<+tmortagne>\u00a0Enygma`: trying something on agent-2  \n13:25\u00a0<+Enygma`>\u00a0we keep getting out of memory errors on xwiki-enterprise-test-escaping on agent 2 after it was complaining about an invalid language  \n13:26\u00a0<+Enygma`>\u00a0agent3 seems to try to reuse some selenium session that probably did not get cleared  \n13:26\u00a0<+Enygma`>\u00a0that is no longer there after I restarted things  \n13:27\u00a0<+Enygma`>\u00a0and agent 5 got a SIGSEGV on the VM while runing xwiki-enterprise-test-ui  \n13:27\u00a0<+tmortagne>\u00a0Enygma`: I stopped the slave and there is maven build still running (doing probably nothing but still here)  \n13:27\u00a0<+tmortagne>\u00a0looks like they have never been killed  \n13:27\u00a0<+Enygma`>\u00a0I killed them manually  \n13:27\u00a0<+Enygma`>\u00a0but I did not restart the slave itself  \n13:27\u00a0<+tmortagne>\u00a0one is from yesterday  \n13:28\u00a0<+Enygma`>\u00a0maybe the slave needs a restart too  \n13:28\u00a0<+tmortagne>\u00a0I see Oct11 in the START  \n13:28\u00a0<+tmortagne>\u00a0Enygma`: as I sayd I stoped the slave  \n13:28\u00a0<+tmortagne>\u00a0and they are still here  \n13:28\u00a0<+tmortagne>\u00a0s/sayd/said/  \n13:28\u00a0<+tmortagne>\u00a0(that's what \"Disconnect\" does)  \n13:28\u00a0<+tmortagne>\u00a0killing them  \n13:30\u00a0<+Enygma`>\u00a0well, you killed everything  \n13:30\u00a0<+Enygma`>\u00a0I killed only one of the 2 slave processes  \n13:30\u00a0<+Enygma`>\u00a0the one that was eating up memory  \n13:30\u00a0<+tmortagne>\u00a0ok there is nothing running on agent-2 now, restarting the slave  \n13:30\u00a0<+Enygma`>\u00a0yep  \n13:30\u00a0<+tmortagne>\u00a0Enygma`: Disconnect is supposed to stop everything  \n13:31\u00a0<+tmortagne>\u00a0so if you had something after then it's wonrg  \n13:31\u00a0<+tmortagne>\u00a0wrong  \n13:31\u00a0<+Enygma`>\u00a0to restart the slave do you still use the jenkins ui?  \n13:31\u00a0<+tmortagne>\u00a0not yet restarted but yes i'm going to do it from jenkins  \n13:31\u00a0<+Enygma`>\u00a0tmortagne: then it was wrong and I needed to kill off everything :)  \n13:32\u00a0<+tmortagne>\u00a0Enygma`: actually it's already restarted, it never stay \"disconnected\" very long  \n13:32\u00a0<+Enygma`>\u00a0what is the process on the slave machine that actually starts a slave when receiving the command from the UI?  \n13:32\u00a0<+tmortagne>\u00a0it a bit a pain but it's ok here  \n13:32\u00a0<+tmortagne>\u00a0Enygma`: the slave is actually started from jenkins using ssh  \n13:33\u00a0<+Enygma`>\u00a0ah, right  \n13:33\u00a0<+Enygma`>\u00a0I get it now  \n13:33\u00a0<+tmortagne>\u00a0there is really nothhing running on the agent server by default  \n13:33\u00a0<+Enygma`>\u00a0I`ll handle agent-5  \n13:33\u00a0<+tmortagne>\u00a0ok I restarted the escaping test build  \n13:34\u00a0<+tmortagne>\u00a0lets see  \n13:34\u00a0<+tmortagne>\u00a0ps aux seems ok at least  \n13:34\u00a0<+Enygma`>\u00a0taking down agent5  \n13:35\u00a0<+tmortagne>\u00a0Enygma`: you can use \"Mark this node temp...\" button on the top right corner if you want to be sure no build will be added to your agent (in case it's restarted \u00a0automatically)  \n13:36\u00a0<+Enygma`>\u00a0ok  \n13:36\u00a0<+tmortagne>\u00a0I don't know why it reconnect it automaticlaly even when you explicitely asked it to be disconnected  \n13:36\u00a0<+tmortagne>\u00a0but it always been like that...  \n13:37\u00a0<+Enygma`>\u00a0yes, noticed that...  \n13:37\u00a0<+Enygma`>\u00a0maybe in case you forget to reconnect :)  \n13:37\u00a0<+Enygma`>\u00a0and you just wanted a restart  \n13:37\u00a0<+tmortagne>\u00a0maybe  \n13:37\u00a0<+Enygma`>\u00a0so I`ve marked agent5 as temporary offline  \n13:38\u00a0<+Enygma`>\u00a0but it still spawned a java -XX:MaxPermSize=128m -Xmx1024m -jar /home/hudsonagent/bin/slave.jar process after I`ve killed everything  \n13:38\u00a0<+Enygma`>\u00a0and it's still marked as offline  \n13:38\u00a0<+tmortagne>\u00a0probably mean it has been restarted  \n13:38\u00a0<+tmortagne>\u00a0it's maked as offline  \n13:38\u00a0<+tmortagne>\u00a0taht's two different things  \n13:38\u00a0<+Enygma`>\u00a0a  \n13:38\u00a0<+Enygma`>\u00a0ok  \n13:38\u00a0<+tmortagne>\u00a0it just mean \"don't send me builds\"  \n13:38\u00a0<+Enygma`>\u00a0will mark it as online then  \n13:39\u00a0<+tmortagne>\u00a0that's to meke sure you only have slave  \n13:39\u00a0<+tmortagne>\u00a0make  \n13:39\u00a0<+Enygma`>\u00a0are these errors normal for this test http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/471/console ?  \n13:39\u00a0<+Enygma`>\u00a0because they seemsed to go on and on until an out of memory error  \n13:40\u00a0<+Enygma`>\u00a0handling agent3  \n13:41\u00a0<+tmortagne>\u00a0Enygma`: yes I think, what escaping test do is putting very bad stuff in every used request parameters to see if the page is properly protected and not printed as it is  \n13:41\u00a0<+Enygma`>\u00a0ok  \n13:41\u00a0<+tmortagne>\u00a0so when it put unexisting language in lang= parameter you get theses error I think  \n13:43\u00a0<+Enygma`>\u00a0there are 2 firefox processes on agent-5 after I`ve disconencted and killed any java process. Is that normal, or do I have to kill them too?  \n13:44\u00a0<+Enygma`>\u00a0they might be leftovers from the tests  \n13:46\u00a0<+tmortagne>\u00a0Enygma`: still OutOfMemoryError on agent-2  \n13:47\u00a0<+tmortagne>\u00a0so the issue does not come from multiple build not killed  \n13:47\u00a0<+tmortagne>\u00a0we really have something eating too much memory it seems  \n13:48\u00a0<+Enygma`>\u00a0guess so  \n13:48\u00a0<+Enygma`>\u00a0what about my question on the firefox processes  \n13:49\u00a0<+Enygma`>\u00a0can I kill them?  \n13:52\u00a0<+Enygma`>\u00a0ok, killing them :)  \n13:53\u00a0<+Enygma`>\u00a0same for agent5  \n13:57\u00a0<+Enygma`>\u00a0afk for 20 minutes  \n14:17\u00a0<pturcotte>\u00a0has quit  \n14:20\u00a0<+tmortagne>\u00a0Enygma`: trying to allocate more memory to maven builds in jenkins and see if it's enough  \n14:21\u00a0<+tmortagne>\u00a0hmm it's probably more at start\\_xwiki.sh level actually  \n14:22\u00a0<+tmortagne>\u00a0if the issue is a memory leak then we need to find it  \n14:22\u00a0<+tmortagne>\u00a0ha it's not XWiki actually  \n14:22\u00a0<+tmortagne>\u00a0it's failing in jenkins  \n14:23\u00a0<+tmortagne>\u00a0so it's le memory allocated to the slave maybe or lastest jenkins version which have a memory leak  \n14:23\u00a0<+tmortagne>\u00a0vmassol: did you upgraded jenkins recently ?  \n14:25\u00a0<+tmortagne>\u00a0apart from this looks like there is something wrong with the cache  \n14:25\u00a0<+tmortagne>\u00a0maybe that's what produce the outofmemory give the size of the produced log  \n14:26\u00a0<+tmortagne>\u00a0but it does not fail right away so i'm not sure how to reproduce it  \n14:26\u00a0<+tmortagne>\u00a0according to the error it looks like the document cache has been stopped at some point  \n14:28\u00a0<+tmortagne>\u00a0why did I clicked on \"full log\"...  \n14:30\u00a0<+tmortagne>\u00a0ok looks like all the stuck builds have the same kind of cache issues  \n14:31\u00a0<+tmortagne>\u00a0but jenkins is not very solid if it's stuck just because of the size of the log...  \n14:33\u00a0<mflorea>\u00a0has joined #xwiki  \n14:37\u00a0<+Enygma`>\u00a0so you`r looking into the cache, right?  \n14:37\u00a0<+tmortagne>\u00a0Enygma`: yes I think I found the issue  \n14:37\u00a0<+tmortagne>\u00a0when flushCache is called the cache is recreated  \n14:38\u00a0<+tmortagne>\u00a0but in infinispan when you use the same id you get the same cache  \n14:38\u00a0<+tmortagne>\u00a0so you get the previous stopped cache  \n14:38\u00a0<+tmortagne>\u00a0I'm adding something to make sure the cache is started when you ask it again  \n14:38\u00a0<+Enygma`>\u00a0ok  \n14:38\u00a0<+tmortagne>\u00a0addin unit test  \n14:38\u00a0<+tmortagne>\u00a0adding  \n14:47\u00a0<+tmortagne>\u00a0Enygma`: that was it, committing  \n14:47\u00a0<+Enygma`>\u00a0ok  \n14:47\u00a0<+Enygma`>\u00a0should I clean up the 3 agents before trying to build?  \n14:47\u00a0<+tmortagne>\u00a0at least that's what produce the errors  \n14:48\u00a0<+tmortagne>\u00a0not sure if that's what make jenkins fail but I think so  \n14:48\u00a0<+tmortagne>\u00a0Enygma`: will take care of it, that's my fault  \n14:48\u00a0<+tmortagne>\u00a0committing first  \n14:48\u00a0<+Enygma`>\u00a0ok :)  \n14:52\u00a0<vmassol>\u00a0tmortagne: not recently  \n14:53\u00a0<+tmortagne>\u00a0vmassol: it's ok that's not the issue I think  \n14:53\u00a0<+tmortagne>\u00a0but looks like jenkins is not very good with big log  \n14:58\u00a0<+tmortagne>\u00a0Enygma`: pushed and cleaned, lets see  \n15:02\u00a0<+tmortagne>\u00a0BTW slave has -Xmx1024m which is pretty big  \n15:12\u00a0<+Denis>\u00a0sdumitriu: we need a key without the wiki name to compute the hash, it is a private method  \n15:16\u00a0<pturcotte>\u00a0has joined #xwiki  \n15:34\u00a0<Denis>\u00a0has quit  \n16:14\u00a0<+tmortagne>\u00a0Enygma`: looks like that was it  \n16:40\u00a0<Denis>\u00a0has joined #xwiki  \n16:50\u00a0<+Enygma`>\u00a0tmortagne: yes  \n17:50\u00a0<+Denis>\u00a0vmassol: you have open a vote for including language and version entity reference, and it seems to have been +1, so I wonder if you have commit something regarding this or if you have something locally ?  \n17:53\u00a0<vmassol>\u00a0Denis: hi. Nothing yet. This was in the context of my new model work.  \n17:53\u00a0<vmassol>\u00a0(but I haven't been working on it since then)  \n17:54\u00a0<+Denis>\u00a0vmassol: seems it would be useful for better calculating unique key for computing the docids  \n17:54\u00a0<vmassol>\u00a0yes I'm sure  \n17:54\u00a0<vmassol>\u00a0right now we have to pass reference + language everywhere  \n17:56\u00a0<+Denis>\u00a0when to you expect to introduce it ?  \n18:04\u00a0<vmassol>\u00a0no specific plan  \n18:04\u00a0<vmassol>\u00a0if someone else wants to do it, I'm fine  \n18:09\u00a0<vmassol>\u00a0has quit  \n18:16\u00a0<Enygma`1>\u00a0has joined #xwiki  \n18:16\u00a0<Enygma`>\u00a0has quit  \n18:20\u00a0<evalica>\u00a0has quit  \n18:28\u00a0<Enygma`1>\u00a0has quit  \n18:37\u00a0<tmortagne>\u00a0has quit  \n18:44\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:53\u00a0<tmortagne>\u00a0has quit  \n19:04\u00a0<@sdumitriu>\u00a0New GitHub UI  \n19:04\u00a0<sburjan>\u00a0has quit  \n19:04\u00a0<mflorea>\u00a0has quit  \n19:48\u00a0<lucaa>\u00a0has quit  \n20:26\u00a0<abusenius>\u00a0has joined #xwiki  \n21:12\u00a0<pturcotte>\u00a0has quit  \n21:24\u00a0<pturcotte>\u00a0has joined #xwiki  \n22:07\u00a0<mflorea>\u00a0has joined #xwiki  \n22:11\u00a0<mflorea>\u00a0has quit  \n22:17\u00a0<vmassol>\u00a0has joined #xwiki  \n22:34\u00a0<vmassol>\u00a0has quit  \n22:59\u00a0<abusenius>\u00a0has quit  \n23:02\u00a0<pturcotte>\u00a0has quit  \n\n"}