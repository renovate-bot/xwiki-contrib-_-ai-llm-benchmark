{"id": "dev:IRC.xwikiArchive20131105", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20131105", "title": "IRC Archive for channel #xwiki on 05 November 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has joined #xwiki  \n00:07\u00a0<sburjan`>\u00a0has quit  \n00:22\u00a0<abusenius>\u00a0has quit  \n00:34\u00a0<GuillaumeF>\u00a0has quit  \n01:47\u00a0<Denis>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n06:00\u00a0<Denis>\u00a0has quit  \n07:45\u00a0<sburjan`>\u00a0has joined #xwiki  \n08:06\u00a0<msmeria>\u00a0has joined #xwiki  \n08:10\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:16\u00a0<evalica>\u00a0has joined #xwiki  \n09:00\u00a0<mflorea>\u00a0has joined #xwiki  \n09:00\u00a0<sburjan>\u00a0has joined #xwiki  \n09:04\u00a0<j-simard>\u00a0has joined #xwiki  \n09:12\u00a0<cjd>\u00a0has joined #xwiki  \n09:17\u00a0<j-simard>\u00a0has left #xwiki  \n09:18\u00a0<j-simard>\u00a0has joined #xwiki  \n09:43\u00a0<Denis>\u00a0has joined #xwiki  \n09:46\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n10:14\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:18\u00a0<andrewmcveigh|wo>\u00a0has joined #xwiki  \n10:18\u00a0<lucaa>\u00a0has joined #xwiki  \n10:40\u00a0<lucaa>\u00a0has quit  \n10:47\u00a0<lucaa>\u00a0has joined #xwiki  \n10:58\u00a0<Slashman>\u00a0has joined #xwiki  \n10:59\u00a0<sburjan>\u00a0gdelhumeau: ping  \n10:59\u00a0<gdelhumeau>\u00a0sburjan: hello  \n11:00\u00a0<sburjan>\u00a0gdelhumeau: Hello. I have a question. In am on the latest 5.3-SNAPSHOT, and I want to create old style subwikis. I installed Wiki Manager Application, but I am unable to install a template for it, because the XemManager space is missing  \n11:00\u00a0<sburjan>\u00a0is this known ?  \n11:01\u00a0<gdelhumeau>\u00a0I don't know why you can't create a template for it  \n11:02\u00a0<sburjan>\u00a0because I have to install it first. Similar to workspaces. You need to install a template first  \n11:02\u00a0<sburjan>\u00a0but I don't know from where  \n11:02\u00a0<gdelhumeau>\u00a0When you create a regular subwiki through the WIkiManager, you can set a XAR as template  \n11:02\u00a0<gdelhumeau>\u00a0then you pick the xwiki-enterprise-ui-common-all xar, and it's done  \n11:03\u00a0<camil7>\u00a0has joined #xwiki  \n11:03\u00a0<sburjan>\u00a0pick it from where, I don't see it anywhere  \n11:03\u00a0<gdelhumeau>\u00a0that is a goo dpoint  \n11:03\u00a0<sburjan>\u00a0I only have the template for subwiki (workspaces)  \n11:03\u00a0<sburjan>\u00a0I knew we bundle the template for old subwikis along with Wiki Manager, but it seems we don't  \n11:04\u00a0<gdelhumeau>\u00a030secs  \n11:06\u00a0<gdelhumeau>\u00a0shit, we don't have a -all version for common  \n11:07\u00a0<sburjan>\u00a0I am just asking, I know that in 5.3 final they will be merge, but we must ensure users wil lbe able to create both types out of the box  \n11:07\u00a0<sburjan>\u00a0\\*merged  \n11:07\u00a0<gdelhumeau>\u00a0I guess we have the problem for 5.2 too  \n11:08\u00a0<gdelhumeau>\u00a0because you need a template XAR for WikiManager  \n11:08\u00a0<sburjan>\u00a0gdelhumeau: let me look  \n11:08\u00a0<gdelhumeau>\u00a0I used to pick the enterprise-all XAR, but it is not really a good choice  \n11:09\u00a0<gdelhumeau>\u00a0you can use http://nexus.xwiki.org/nexus/content/groups/public-snapshots/org/xwiki/enterprise/xwiki-enterprise-ui-mainwiki-all/5.3-SNAPSHOT/  \n11:09\u00a0<gdelhumeau>\u00a0but you will have the WorkspaceManager in your subwiki too  \n11:10\u00a0<sburjan>\u00a0gdelhumeau: yes, the same thing is on 5.2  \n11:10\u00a0<sburjan>\u00a0so this means you can't have an old style subwiki on a clean 5.2 or 5.3-SNAPSHOT  \n11:11\u00a0<gdelhumeau>\u00a0mainwiki should be the best candidate  \n11:11\u00a0<gdelhumeau>\u00a0what was the template for subwikis in 5.1 ?  \n11:11\u00a0<sburjan>\u00a0in XEM 5.1 as far as I remember yes  \n11:12\u00a0<gdelhumeau>\u00a0let me look  \n11:12\u00a0<sburjan>\u00a0gdelhumeau: basically I am looking for the template called templatexe  \n11:12\u00a0<sburjan>\u00a0which is the name of the template for old style subwikis  \n11:12\u00a0<gdelhumeau>\u00a0it was org.xwiki.enterprise:xwiki-enterprise-ui  \n11:13\u00a0<gdelhumeau>\u00a0which is mainwiki today, but it should be commons  \n11:14\u00a0<sburjan>\u00a0I don't know the technical details, just saying from a user's POV. I see vmassol \u00a0replied yesterday to somebody on the lists asking how can they get this feature back. But it seems installing Wiki Manager is not enough  \n11:14\u00a0<gdelhumeau>\u00a0yes you're right  \n11:14\u00a0<gdelhumeau>\u00a0it should not break upgraded wiki  \n11:15\u00a0<gdelhumeau>\u00a0because the template already exists  \n11:15\u00a0<sburjan>\u00a0if it's upgraded it doesn't break  \n11:15\u00a0<gdelhumeau>\u00a0but we have a problem on new instances  \n11:15\u00a0<sburjan>\u00a0exactly  \n11:15\u00a0<sburjan>\u00a0but for clean installs ....  \n11:15\u00a0<gdelhumeau>\u00a0we should have the commons-all XAR  \n11:15\u00a0<sburjan>\u00a0yes  \n11:16\u00a0<gdelhumeau>\u00a0the best I can do, right now, is to create that XAR, to publish it somewhere, and to write some documentation  \n11:16\u00a0<gdelhumeau>\u00a0for 5.2  \n11:16\u00a0<sburjan>\u00a0IMO, commons is not a good name. we need better names to diferentiate between the 2 types of subwikis  \n11:16\u00a0<gdelhumeau>\u00a0of course  \n11:16\u00a0<sburjan>\u00a0for example I am confused when I see commons :)  \n11:16\u00a0<gdelhumeau>\u00a0it is called commons for techical reasons  \n11:17\u00a0<gdelhumeau>\u00a0Then I can call this XAR with an other name  \n11:18\u00a0<sburjan>\u00a0I reported this to make sure it won't slip in 5.3 final  \n11:18\u00a0<sburjan>\u00a0should I create an issue for it ?  \n11:18\u00a0<gdelhumeau>\u00a0if my Pull request is accepted, then it won't be a problem anymore  \n11:19\u00a0<gdelhumeau>\u00a0but we have a problem for 5.2  \n11:30\u00a0<gdelhumeau>\u00a0sburjan: try with http://extensions.xwiki.org/xwiki/bin/download/Extension/Wiki+Manager+Application/xwiki%2Denterprise%2Dui%2Doldsubwiki%2Dall.xar  \n11:33\u00a0<sburjan>\u00a0gdelhumeau: I still don't see XemManager space, where the template was traditionally stored  \n11:33\u00a0<gdelhumeau>\u00a0yes, this page don't exists anymore  \n11:34\u00a0<gdelhumeau>\u00a0this XAR is to be attached to WikiManager/CreateNewWiki  \n11:46\u00a0<sburjan>\u00a0gdelhumeau: it worked. DW kicked in  \n11:47\u00a0<gdelhumeau>\u00a0what DW says?  \n11:47\u00a0<sburjan>\u00a0\u00a0XWiki Enterprise - UI - Wiki All  \n11:48\u00a0<sburjan>\u00a0this is what it wants to install  \n11:48\u00a0<gdelhumeau>\u00a0it should not :/  \n11:49\u00a0<gdelhumeau>\u00a0to men it proposes XWiki Enterprise - UI - Common which is good  \n11:50\u00a0<gdelhumeau>\u00a0\\*to me  \n11:50\u00a0<gdelhumeau>\u00a0but it should not kick all  \n11:50\u00a0<gdelhumeau>\u00a0tmortagne: hello, are you here?  \n11:52\u00a0<sburjan>\u00a0my steps are: 5.2, install wiki manager, attach your xar, create subwiki form XAR template, access the new subwiki, I get the DW  \n11:53\u00a0<gdelhumeau>\u00a0yes, taht is good  \n12:36\u00a0<mflorea>\u00a0has quit  \n12:46\u00a0<fcharton>\u00a0has joined #xwiki  \n13:27\u00a0<mflorea>\u00a0has joined #xwiki  \n15:04\u00a0<gdelhumeau>\u00a0tmortagne: why when I create a wiki from a XAR which is common-all, the DW is kicked on?  \n15:20\u00a0<j-simard>\u00a0has quit  \n15:21\u00a0<j-simard>\u00a0has joined #xwiki  \n15:46\u00a0<tmortagne>\u00a0gdelhumeau: what do you mean creating a wiki from a XAR ?  \n15:47\u00a0<tmortagne>\u00a0you mean selecting a XAR in wikimanager ui instead of a template ?  \n15:48\u00a0<tmortagne>\u00a0so you have snapshot repository in xwiki.properties ?  \n15:52\u00a0<gdelhumeau>\u00a0tmortagne: yes I have  \n15:53\u00a0<gdelhumeau>\u00a0I have my own repo to be precise  \n15:55\u00a0<tmortagne>\u00a0do you have the extension listed in installed extensions in your new wiki ?  \n15:55\u00a0<tmortagne>\u00a0gdelhumeau:  \n15:55\u00a0<gdelhumeau>\u00a0let me look  \n15:55\u00a0<tmortagne>\u00a0(cancel the DW)  \n15:56\u00a0<gdelhumeau>\u00a0There are no extensions installed.  \n15:56\u00a0<gdelhumeau>\u00a0let me details you what I have done  \n15:56\u00a0<tmortagne>\u00a0so this mean the imported did not find the extension in any repo  \n15:57\u00a0<gdelhumeau>\u00a0To create an old subwiki, the only way right now is to use WikiManager, and to create a wiki from a XAR  \n15:57\u00a0<tmortagne>\u00a0all I can suggest is to put a breakpoint in Package#registerExtension and see what is happening here  \n15:57\u00a0<gdelhumeau>\u00a0The good xar would be xwiki-enterprise-ui-common-all, but the -all did not exists  \n15:57\u00a0<gdelhumeau>\u00a0So, I have created a new module, common-all  \n15:58\u00a0<gdelhumeau>\u00a0I have created the XAR, and I have published it on e.x.o  \n15:58\u00a0<gdelhumeau>\u00a0but I have never \"deployed\" it properly  \n15:58\u00a0<tmortagne>\u00a0did you built it with maven ?  \n15:58\u00a0<gdelhumeau>\u00a0yes  \n15:59\u00a0<gdelhumeau>\u00a0(note that this new module only exists on my FS)  \n15:59\u00a0<tmortagne>\u00a0does the package.xml file have the right extension id and version ?  \n15:59\u00a0<tmortagne>\u00a0that's where the XAR importer get the information  \n15:59\u00a0<tmortagne>\u00a0and then it use that to try to find the extesion on listed repositories  \n15:59\u00a0<gdelhumeau>\u00a0<extensionId>org.xwiki.enterprise:xwiki-enterprise-ui-common-all</extensionId>  \n15:59\u00a0<tmortagne>\u00a0but if you can debug it you will probably quickly see what's wrong  \n16:00\u00a0<tmortagne>\u00a0what is the e.x.o. page ?  \n16:01\u00a0<gdelhumeau>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/Wiki+Manager+Application#Attachments  \n16:03\u00a0<lucaa>\u00a0has quit  \n16:03\u00a0<tmortagne>\u00a0gdelhumeau: I tough you had a real extension page  \n16:03\u00a0<tmortagne>\u00a0if your extension is nowhere then yes the importer does not find it  \n16:04\u00a0<tmortagne>\u00a0did you at least installed it in your local repository ?  \n16:04\u00a0<gdelhumeau>\u00a0I build with mvn clean install  \n16:05\u00a0<tmortagne>\u00a0then if you have your local repository listed it should find it  \n16:05\u00a0<tmortagne>\u00a0try to debug Package#registerExtension  \n16:18\u00a0<gdelhumeau>\u00a0I'll do it  \n16:18\u00a0<gdelhumeau>\u00a0but I guess I also should import the project in e.x.o  \n16:18\u00a0<gdelhumeau>\u00a0?  \n16:22\u00a0<tmortagne>\u00a0gdelhumeau: no need  \n16:22\u00a0<tmortagne>\u00a0you need to have it in a repository  \n16:22\u00a0<tmortagne>\u00a0your local maven repository is a repository  \n16:22\u00a0<gdelhumeau>\u00a0yes, but I mean, when the bug will be fixed  \n16:22\u00a0<tmortagne>\u00a0which bug ?  \n16:22\u00a0<gdelhumeau>\u00a0the fact that DW kicks  \n16:23\u00a0<tmortagne>\u00a0the issue you have is that the xar you imported is not registred as extension  \n16:23\u00a0<tmortagne>\u00a0nothing to do with DW  \n16:23\u00a0<tmortagne>\u00a0so what you need is to find why it hasn't been regsitered as extension  \n16:23\u00a0<tmortagne>\u00a0generally it's because it could not find it in any repository  \n16:24\u00a0<lucaa>\u00a0has joined #xwiki  \n16:38\u00a0<sburjan>\u00a0gdelhumeau: you're taling with tmortagne about the issue I reported today ?  \n16:38\u00a0<gdelhumeau>\u00a0sburjan: yes  \n16:40\u00a0<gdelhumeau>\u00a0tmortagne: localRepository.getLocalExtension(extensionId) returns null, indeed  \n16:40\u00a0<tmortagne>\u00a0as it should  \n16:40\u00a0<tmortagne>\u00a0it's not your maven repository  \n16:40\u00a0<tmortagne>\u00a0that's EM repository  \n16:41\u00a0<tmortagne>\u00a0your maven repository is a remote repository like the others  \n16:43\u00a0<tmortagne>\u00a0gdelhumeau: the line where the extension is really resolved is the 697  \n16:48\u00a0<gdelhumeau>\u00a0yep  \n16:48\u00a0<gdelhumeau>\u00a0it throws an exception  \n16:51\u00a0<tmortagne>\u00a0you can try to debug in resolve to get detail about why the maven repository did not found the extension  \n16:52\u00a0<tmortagne>\u00a0AETHER used to have some issue with fs repositories, maybe it still have some bugs remaining  \n16:52\u00a0<tmortagne>\u00a0try to clean the aether cache maybe  \n16:53\u00a0<tmortagne>\u00a0make real sure you it really try to search in your repository and that the extension id/version correspond to what you have installed in your repository  \n17:01\u00a0<gdelhumeau>\u00a0my debugger is lost when I step into \"return repository.resolve(extensionId);\"  \n17:02\u00a0<gdelhumeau>\u00a0DefaultExtensionRepositoryManager.java#166  \n17:04\u00a0<gdelhumeau>\u00a0tmortagne: how do I clean the AETHER cache?  \n17:05\u00a0<tmortagne>\u00a0the aether cache is a folder in xwiki temporary folder  \n17:06\u00a0<gdelhumeau>\u00a0anyway, If I want every user to be able to use my new XAR without having the DW, I need to make a proper extension, doesnt it?  \n17:06\u00a0<tmortagne>\u00a0as for the debugger I guess you just did not imported the maven reposiory module in your EDI  \n17:06\u00a0<tmortagne>\u00a0gdelhumeau: I don't understand what this extension is exactly  \n17:07\u00a0<gdelhumeau>\u00a0this the all in one XAR for xwiki-enterprise-ui-common  \n17:07\u00a0<gdelhumeau>\u00a0a.k.a the all in one XAR for old fashion subwikis  \n17:07\u00a0<tmortagne>\u00a0and why is it not part of standard XE with others \\*-all extensions ?  \n17:08\u00a0<gdelhumeau>\u00a0because I belived it was not necessary  \n17:08\u00a0<gdelhumeau>\u00a0and I was wrong  \n17:08\u00a0<gdelhumeau>\u00a0there is only mainwiki-all and wiki-all  \n17:08\u00a0<gdelhumeau>\u00a0not common-all  \n17:08\u00a0<tmortagne>\u00a0well I tough you were planning to use EM when creating wiki now and stop using all in one XAR attachments  \n17:09\u00a0<gdelhumeau>\u00a0So I have locally created common-all, but I guess I should deploy it on nexus  \n17:09\u00a0<gdelhumeau>\u00a0tmortagne: of course  \n17:09\u00a0<gdelhumeau>\u00a0but in 5.2 my API is not available  \n17:09\u00a0<gdelhumeau>\u00a0that means un 5.2, the user has to use WikiManager Application (the old one)  \n17:09\u00a0<gdelhumeau>\u00a0and to create a wiki from that WAR  \n17:09\u00a0<gdelhumeau>\u00a0\\*XAR  \n17:10\u00a0<tmortagne>\u00a0he can import the XAR in an empty wiki too  \n17:10\u00a0<gdelhumeau>\u00a0But in WikiManager Application, you can not create an empty wiki  \n17:10\u00a0<tmortagne>\u00a0of course you can  \n17:10\u00a0<tmortagne>\u00a0unless you changed it  \n17:11\u00a0<tmortagne>\u00a0empty wiki is even what you have by default  \n17:11\u00a0<tmortagne>\u00a0you have to choose a template or a xar if you want one  \n17:12\u00a0<tmortagne>\u00a0I create empty wiki all the time for tests  \n17:12\u00a0<gdelhumeau>\u00a0sorry, It tought it was not possible with the UI  \n17:12\u00a0<gdelhumeau>\u00a0but I tried just now, and it seems I was wrong  \n17:14\u00a0<tmortagne>\u00a0then you get DW but not sure what it propose you to install with your XE overwrite  \n17:14\u00a0<gdelhumeau>\u00a0then DW is kicked and I don't need the common-all xar  \n17:14\u00a0<tmortagne>\u00a0depends if DW propose to install subwiki or common  \n17:15\u00a0<tmortagne>\u00a0the default is common but not sure what is the rule in your XE module to decide when to popose subwiki  \n17:15\u00a0<gdelhumeau>\u00a0sburjan: I was wrong. If you want to create a regular subwiki in 5.2, you need to use WikiManager Application and to select no template  \n17:15\u00a0<gdelhumeau>\u00a0sburjan: then DW is kicked in and it should proposes Wiki - Common  \n17:16\u00a0<tmortagne>\u00a0then you can make this wiki a template if you want a template  \n17:17\u00a0<sburjan>\u00a0let me try it  \n17:18\u00a0<tmortagne>\u00a0gdelhumeau: that's if you did not configured your farm in all in one upgrade (which disable subwiki DW)  \n17:19\u00a0<tmortagne>\u00a0jira.xwiki.org/browse/XWIKI-9158  \n17:20\u00a0<sburjan>\u00a0gdelhumeau: indeed, If I chose no template DW proposes \u00a0XWiki Enterprise - UI - Common  \n17:21\u00a0<evalica>\u00a0has quit  \n17:22\u00a0<mflorea>\u00a0has quit  \n17:23\u00a0<camil7>\u00a0has quit  \n17:23\u00a0<sburjan>\u00a0has quit  \n17:25\u00a0<gdelhumeau>\u00a0tmortagne: thx for your help  \n17:25\u00a0<msmeria>\u00a0has quit  \n17:25\u00a0<msmeria>\u00a0has joined #xwiki  \n17:26\u00a0<msmeria>\u00a0has quit  \n17:35\u00a0<sdumitriu>\u00a0has joined #xwiki  \n18:15\u00a0<j-simard>\u00a0has quit  \n18:29\u00a0<cjd>\u00a0has quit  \n19:07\u00a0<KermitTheFragger>\u00a0has quit  \n19:19\u00a0<evalica>\u00a0has joined #xwiki  \n19:21\u00a0<evalica>\u00a0has quit  \n19:26\u00a0<lucaa>\u00a0has quit  \n19:27\u00a0<Slashman>\u00a0has quit  \n19:34\u00a0<gdelhumeau>\u00a0has quit  \n19:37\u00a0<abusenius>\u00a0has joined #xwiki  \n20:05\u00a0<tmortagne>\u00a0has quit  \n22:19\u00a0<vmassol>\u00a0has quit  \n22:37\u00a0<vmassol>\u00a0has joined #xwiki  \n23:10\u00a0<vmassol>\u00a0has quit  \n23:14\u00a0<sdumitriu>\u00a0has quit  \n23:26\u00a0<vmassol>\u00a0has joined #xwiki  \n23:29\u00a0<Denis>\u00a0has quit  \n23:30\u00a0<Denis>\u00a0has joined #xwiki  \n23:31\u00a0<vmassol>\u00a0has quit  \n23:41\u00a0<vmassol>\u00a0has joined #xwiki  \n23:43\u00a0<sdumitriu>\u00a0has joined #xwiki\n"}