{"id": "dev:IRC.xwikiArchive20120103", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120103", "title": "IRC Archive for channel #xwiki on 03 January 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:11\u00a0<rickross1>\u00a0has joined #xwiki  \n00:11\u00a0<rickross1>\u00a0has quit  \n00:11\u00a0<rickross1>\u00a0has joined #xwiki  \n00:20\u00a0<jvelociter>\u00a0has quit  \n00:33\u00a0<rickross>\u00a0has quit  \n00:37\u00a0<rickross1>\u00a0has quit  \n01:30\u00a0<sdumitriu>\u00a0has joined #xwiki  \n02:09\u00a0<tekzilla>\u00a0has quit  \n02:10\u00a0<tekzilla>\u00a0has joined #xwiki  \n07:12\u00a0<lucaa>\u00a0has quit  \n07:22\u00a0<npm\\_>\u00a0has joined #xwiki  \n07:22\u00a0<npm>\u00a0has quit  \n07:53\u00a0<vmassol>\u00a0has joined #xwiki  \n08:24\u00a0<mflorea>\u00a0has joined #xwiki  \n09:17\u00a0<vmassol>\u00a0good morning  \n09:17\u00a0<vmassol>\u00a0just noticed that the platform build is failing. I'm on it  \n09:21\u00a0<mflorea>\u00a0has quit  \n09:40\u00a0<jvdrean>\u00a0has quit  \n09:52\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:08\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:14\u00a0<vmassol>\u00a0sdumitriu: you here?  \n10:25\u00a0<gdelhumeau>\u00a0has quit  \n10:26\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:27\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:32\u00a0<gdelhumeau>\u00a0has quit  \n10:50\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:55\u00a0<evalica>\u00a0has joined #xwiki  \n10:56\u00a0<Denis>\u00a0has joined #xwiki  \n10:59\u00a0<lucaa>\u00a0has joined #xwiki  \n11:09\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* rf7d0c47\u000f \u000f/ xwiki-commons-core/xwiki-commons-component/xwiki-commons-component-default/src/main/java/org/xwiki/component/embed/EmbeddableComponentManager.java :\u000f [misc] Improve exceptionn catching and message to ease debugging - http://git.io/43kAsA  \n11:41\u00a0<fmancinelli>\u00a0has joined #xwiki  \n12:03\u00a0<tmortagne>\u00a0has joined #xwiki  \n12:11\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* r90fd25a\u000f \u000f/ (3 files in 3 dirs):\u000f XWIKI-7338: Add API to get extension versions ...  \n12:11\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* r5399614\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-script/src/main/java/org/xwiki/extension/script/internal/ExtensionManagerScriptService.java :\u000f XWIKI-7335: Add jobs to produce install and uninstall plans ...  \n12:21\u00a0<CIA-123>\u00a0tmortagne\u000f master\u000f \\* rb9e5d2d\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-api/src/main/java/org/xwiki/extension/repository/internal/DefaultExtensionRepositoryManager.java :\u000f XWIKI-7341: No detail in the error log when search on Searchable fail - http://git.io/Tu8FAA  \n12:21\u00a0<CIA-123>\u00a0tmortagne\u000f stable-3.3.x\u000f \\* r73ed1aa\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-api/src/main/java/org/xwiki/extension/repository/internal/DefaultExtensionRepositoryManager.java :\u000f XWIKI-7341: No detail in the error log when search on Searchable fail(cherry picked from commit b9e5d2d8f9d8f9a77594d9e61c46959fb0da6def) - http://git.io/R-ip9Q  \n12:31\u00a0<jvdrean1>\u00a0has joined #xwiki  \n12:33\u00a0<jvdrean>\u00a0has quit  \n12:41\u00a0<vmassol>\u00a0I'm having a hard time understanding why this fails: http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-linkchecker-test/1262/testReport/junit/org.xwiki.test.ui.linkchecker/LinkcheckerTest/org\\_xwiki\\_test\\_ui\\_linkchecker\\_LinkcheckerTest/  \n12:42\u00a0<vmassol>\u00a0the cause is \"java.lang.NoSuchMethodError: org.apache.commons.beanutils.ConvertUtilsBean.register(ZZI)V\" but I don't see why  \n12:42\u00a0<vmassol>\u00a0the version of beanutils used is 1.8.3 which is correct  \n12:42\u00a0<vmassol>\u00a0if you have any idea please shoot...  \n12:59\u00a0<vmassol>\u00a0the strange thing is that it works locally  \n13:04\u00a0<vmassol>\u00a0downloading locally the build result from agent3...  \n13:21\u00a0<vmassol>\u00a0hmm the same xwiki distribution starts fine locally....  \n13:24\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* r5854f98\u000f \u000f/ xwiki-commons-core/xwiki-commons-component/xwiki-commons-component-default/src/main/java/org/xwiki/component/annotation/ComponentAnnotationLoader.java :\u000f [misc] Fixed missing log parameter - http://git.io/6O93CA  \n13:59\u00a0<fmancinelli>\u00a0has quit  \n14:02\u00a0<+tmortagne>\u00a0vmassol: same issue on other agents ?  \n14:03\u00a0<vmassol>\u00a0don't know  \n14:03\u00a0<vmassol>\u00a0I'm fixing a bug I've found  \n14:04\u00a0<+tmortagne>\u00a0we could force it on agent1 to see if it makes a difference  \n14:04\u00a0<vmassol>\u00a0(it won't fix this issue but I've noticed I broke the backward support for component-overrides a bit a while ago)  \n14:47\u00a0<@sdumitriu>\u00a0vmassol: Sorry, forgot to quit IRC last night, I'm here now  \n14:47\u00a0<vmassol>\u00a0sdumitriu: hi, wanted to ask you about the release and about integration evalica's pull requests for that release  \n14:48\u00a0<vmassol>\u00a0s/integration/integrating  \n14:48\u00a0<vmassol>\u00a0so AFAIU the release is now for this Friday  \n14:48\u00a0<vmassol>\u00a0?  \n14:48\u00a0<@sdumitriu>\u00a0Yes, Friday  \n14:48\u00a0<vmassol>\u00a0would you or someone else have time to review/apply Caty's pull requests?  \n14:48\u00a0<@sdumitriu>\u00a0I should have time to apply her pull  \n14:49\u00a0<vmassol>\u00a0ok cool  \n14:49\u00a0<@sdumitriu>\u00a0Didn't Marta leave a comment on it?  \n14:49\u00a0<vmassol>\u00a0she did  \n14:49\u00a0<vmassol>\u00a0on one of the requests  \n14:49\u00a0<vmassol>\u00a0about code duplication I think  \n14:49\u00a0<vmassol>\u00a0evalica hasn't answered yet  \n14:49\u00a0<vmassol>\u00a0evalica: ping! :)  \n14:51\u00a0<vmassol>\u00a0gdelhumeau: looks nice, you shoudl mention that it's an improvement over the current wiki macro page. Would be great to rename it to \"Macro Manager Application\" too. Does it support all macros or only wiki macros?  \n14:52\u00a0<vmassol>\u00a0(if it supports only wiki macros you should say it I think)  \n14:52\u00a0<vmassol>\u00a0(in the doc)  \n14:52\u00a0<vmassol>\u00a0(and in the app)  \n14:56\u00a0<+evalica>\u00a0vmassol: wait :) let me read  \n14:57\u00a0<+evalica>\u00a0vmassol: yes I will fix Marta's suggestions (tomorrow if not today) - thanks  \n14:57\u00a0<vmassol>\u00a0ok great thanks, we need it asap so that sdumitriu can include your code for 34M1  \n14:57\u00a0<vmassol>\u00a0(which is Friday)  \n14:57\u00a0<vmassol>\u00a0thanks!  \n14:58\u00a0<+evalica>\u00a0k  \n15:25\u00a0<lucaa>\u00a0has quit  \n15:51\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* r7bc3bb1\u000f \u000f/ (4 files in 3 dirs):\u000f XCOMMONS-75: Superfluous warning for old-style component overrides with component-overrides.txt - http://git.io/6vwtIg  \n15:54\u00a0<vmassol>\u00a0tmortagne: is it just luck that platform seems to be always built on agent3?  \n15:59\u00a0<@sdumitriu>\u00a0vmassol: Jobs tend to stick to the same agent  \n15:59\u00a0<@sdumitriu>\u00a0If it's available  \n16:00\u00a0<vmassol>\u00a0ok didn't know  \n16:04\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* r1c9bff6\u000f \u000f/ (2 files):\u000f XWIKI-7323: Add a Maven \"functional-test\" custom lifecycle for functional tests ...  \n16:09\u00a0<+tmortagne>\u00a0vmassol: back, yep jenkins tend to keep jobs on same agent, you will have to indicate agent-1 in the job configuration to force it  \n16:09\u00a0<vmassol>\u00a0ok I'll try it because I have no clue why it fails  \n16:12\u00a0<vmassol>\u00a0tmortagne: do you remember where is the \"tie job to agent\" field?  \n16:13\u00a0<vmassol>\u00a0I'm trying to find it on http://ci.xwiki.org/job/xwiki-platform/configure  \n16:13\u00a0<+tmortagne>\u00a0vmassol: \"Restrict where this project can be run\"  \n16:13\u00a0<vmassol>\u00a0ah yes  \n16:13\u00a0<vmassol>\u00a0thanks  \n16:13\u00a0<+tmortagne>\u00a0you should have suggest for exaiting agents names  \n16:13\u00a0<+tmortagne>\u00a0existing  \n16:14\u00a0<vmassol>\u00a0yep  \n16:17\u00a0<+tmortagne>\u00a0there is something weird with https://github.com/xwiki/xwiki-enterprise/pull/13  \n16:17\u00a0<+tmortagne>\u00a0anyway will do a cherry pick from commits in https://github.com/xwiki/xwiki-enterprise/pull/12  \n16:18\u00a0<CIA-123>\u00a0Guillaume Fenollar\u000f master\u000f \\* rb07fb25\u000f \u000f/ xwiki-enterprise-installers/xwiki-enterprise-installer-debian/xwiki-enterprise-installer-debian-tomcat/xwiki-enterprise-installer-debian-tomcat-mysql/src/deb/control/postinst :\u000f Update xwiki-enterprise-installers/xwiki-enterprise-installer-debian/xwiki-enterprise-installer-debian-tomcat/xwiki-enterprise-installer-debian-tomcat-mysql/src/deb/control/postinst - http://git.io/mYXfmw  \n16:18\u00a0<CIA-123>\u00a0Guillaume Fenollar\u000f master\u000f \\* r4ea00cc\u000f \u000f/ xwiki-enterprise-installers/xwiki-enterprise-installer-debian/xwiki-enterprise-installer-debian-tomcat/xwiki-enterprise-installer-debian-tomcat-pgsql/src/deb/control/postinst :\u000f Update xwiki-enterprise-installers/xwiki-enterprise-installer-debian/xwiki-enterprise-installer-debian-tomcat/xwiki-enterprise-installer-debian-tomcat-pgsql/src/deb/control/postinst - http://git.io/cjKtmQ  \n16:18\u00a0<CIA-123>\u00a0Thomas Mortagne\u000f master\u000f \\* r719c8d2\u000f \u000f/ (2 files in 2 dirs):\u000f Merge pull request #12 from guillaumefenollar/master ...  \n16:31\u00a0<CIA-123>\u00a0Guillaume Fenollar\u000f stable-3.3.x\u000f \\* r6eee6d3\u000f \u000f/ xwiki-enterprise-installers/xwiki-enterprise-installer-debian/xwiki-enterprise-installer-debian-tomcat/xwiki-enterprise-installer-debian-tomcat-mysql/src/deb/control/postinst :\u000f Update ...  \n16:31\u00a0<CIA-123>\u00a0Guillaume Fenollar\u000f stable-3.3.x\u000f \\* r333a70b\u000f \u000f/ xwiki-enterprise-installers/xwiki-enterprise-installer-debian/xwiki-enterprise-installer-debian-tomcat/xwiki-enterprise-installer-debian-tomcat-pgsql/src/deb/control/postinst :\u000f Update ...  \n17:10\u00a0<vmassol>\u00a0the test has passed on agent-1 it seems  \n17:10\u00a0<vmassol>\u00a0even though there are errors in the logs  \n17:11\u00a0<vmassol>\u00a0but different erros than on agent3  \n17:11\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-linkchecker-test/1267/console  \n17:11\u00a0<vmassol>\u00a0Caused by: java.lang.NoSuchMethodError: org.apache.commons.codec.binary.Base64.encodeBase64URLSafeString([B)Ljava/lang/String;  \n17:11\u00a0<vmassol> at org.xwiki.csrf.internal.DefaultCSRFToken.getToken(DefaultCSRFToken.java:137)  \n17:47\u00a0<vmassol>\u00a0Caused by: java.lang.NoSuchMethodError: org.apache.commons.codec.binary.Base64.encodeBase64URLSafeString([B)Ljava/lang/String; shouldn't happen  \n17:47\u00a0<vmassol>\u00a0it's available since commons codec 1.4  \n17:47\u00a0<vmassol>\u00a0and we're using 1.5  \n17:48\u00a0<vmassol>\u00a0(I checked on the agent)  \n17:48\u00a0<vmassol>\u00a0I'm out of ideas  \n17:49\u00a0<@sdumitriu>\u00a0vmassol: I'll take a look  \n17:49\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-linkchecker-test/1267/console  \n17:53\u00a0<vmassol>\u00a0thanks  \n17:54\u00a0<@sdumitriu>\u00a0We didn't have a build manager for the past two weeks  \n17:54\u00a0<vmassol>\u00a0ideally we shouldn't need one  \n17:54\u00a0<@sdumitriu>\u00a0I tried to fix the platform when I had some free time  \n17:54\u00a0<vmassol>\u00a0it was supposed to be temporary till we got all tests passing again  \n17:54\u00a0<@sdumitriu>\u00a0But I don't understand why the linkchecker fails  \n17:54\u00a0<vmassol>\u00a0now it'll work only if committers play the game  \n17:54\u00a0<vmassol>\u00a0ie check regularly  \n17:55\u00a0<vmassol>\u00a0now our record in the past 2 weeks has not been very good but it was holiday time too  \n17:55\u00a0<vmassol>\u00a0sdumitriu: the java.lang.NoSuchMethodError?  \n17:55\u00a0<vmassol>\u00a0this one beats me  \n17:56\u00a0<vmassol>\u00a0works fine locally, works when I download the generated target/xwiki directory locally and execute it  \n17:56\u00a0<@sdumitriu>\u00a0No, this is new  \n17:56\u00a0<@sdumitriu>\u00a0Last time I checked it was a NPE at AbstractTest.shutdown()  \n17:56\u00a0<@sdumitriu>\u00a0Or something like that  \n17:56\u00a0<vmassol>\u00a0well just before, on agent3 it was also a NSME  \n17:56\u00a0<vmassol>\u00a0(albeit a different one)  \n17:57\u00a0<vmassol>\u00a0sdumitriu: can you reproduce locally?  \n17:57\u00a0<@sdumitriu>\u00a0Trying to run it on a3  \n17:57\u00a0<vmassol>\u00a0ok  \n18:00\u00a0<@sdumitriu>\u00a0vmassol: Happens when I run manually mvn install on a3  \n18:00\u00a0<@sdumitriu>\u00a0So it's not related to Hudson  \n18:01\u00a0<vmassol>\u00a0ok good  \n18:01\u00a0<vmassol>\u00a0does it works if you do this:  \n18:01\u00a0<vmassol>\u00a0go in target/xwiki/ and run sh start\\_xwiki.sh  \n18:02\u00a0<@sdumitriu>\u00a0Nope  \n18:02\u00a0<vmassol>\u00a0same error?  \n18:02\u00a0<@sdumitriu>\u00a0Yes  \n18:02\u00a0<vmassol>\u00a0hmm  \n18:02\u00a0<vmassol>\u00a0I scp-ed targte/xwiki locally earlier  \n18:03\u00a0<vmassol>\u00a0and it worked for me  \n18:03\u00a0<vmassol>\u00a0so the only difference is the JVM  \n18:03\u00a0<@sdumitriu>\u00a0Trying to build locally, downloading snapshots  \n18:03\u00a0<vmassol>\u00a0actually I haven't removed my file  \n18:04\u00a0<vmassol>\u00a0I put it in ~/tmp/vmassol/  \n18:04\u00a0<@sdumitriu>\u00a0Although it worked for me locally yesterday  \n18:04\u00a0<vmassol>\u00a0if you want to try downloading it locally  \n18:05\u00a0<@sdumitriu>\u00a0Any idea how to print the classpath?  \n18:05\u00a0<vmassol>\u00a0in the test  \n18:05\u00a0<vmassol>\u00a0you System.out.println(System.getProperty(\"java.class.path\"))  \n18:06\u00a0<vmassol>\u00a0that's the client side claspath though  \n18:07\u00a0<@sdumitriu>\u00a0Yes  \n18:07\u00a0<vmassol>\u00a0indeed we need to check if someone hasn't set the CLASSPATH env variable  \n18:08\u00a0<jvdrean>\u00a0has joined #xwiki  \n18:10\u00a0<@sdumitriu>\u00a0Locally the error is different, I don't get the one at startup about:  \n18:10\u00a0<@sdumitriu>\u00a0org.apache.commons.beanutils.ConvertUtilsBean.register(ZZI)V  \n18:10\u00a0<@sdumitriu>\u00a0But I get the one while running tests:  \n18:10\u00a0<@sdumitriu>\u00a0org.apache.commons.codec.binary.Base64.encodeBase64URLSafeString([B)Ljava/lang/String  \n18:10\u00a0<jvdrean1>\u00a0has quit  \n18:10\u00a0<+tmortagne>\u00a0vmassol: I see that xwiki-platform-linkchecker-test depends on commons-httpclient which depends on commons-code 1.2  \n18:10\u00a0<+tmortagne>\u00a0I think sometime 1.2 is taken and in some other condition the 1.5 is taken  \n18:11\u00a0<vmassol>\u00a0tmortagne: i checked the package  \n18:11\u00a0<vmassol>\u00a0and it contains 1.5  \n18:11\u00a0<vmassol>\u00a0(generated package)  \n18:11\u00a0<+tmortagne>\u00a0the package yes  \n18:11\u00a0<vmassol>\u00a0server-side  \n18:11\u00a0<+tmortagne>\u00a0you surre the error is sever side \u00a0and not in the test ?  \n18:12\u00a0<vmassol>\u00a0that's how I read the stack trace  \n18:12\u00a0<vmassol>\u00a0it has org.eclipse.jetty in it  \n18:13\u00a0<vmassol>\u00a0still that doesn't explain the \"org.apache.commons.beanutils.ConvertUtilsBean.register(ZZI)V\" issue  \n18:13\u00a0<vmassol>\u00a0s/doesn't/wouldn't/  \n18:14\u00a0<vmassol>\u00a0unless that one too was client side  \n18:14\u00a0<vmassol>\u00a0tmortagne: the stakc is here: http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-linkchecker-test/1267/console  \n18:14\u00a0<+tmortagne>\u00a0could  \n18:15\u00a0<+tmortagne>\u00a0could the server execution inherit some way from test classpath ?  \n18:15\u00a0<vmassol>\u00a0I don't see how that would be possible  \n18:15\u00a0<vmassol>\u00a0since we're calling start\\_xwiki.sh  \n18:16\u00a0<+tmortagne>\u00a0sure but it's the same system context so the same env variables since the test call start\\_xwiki.sh  \n18:16\u00a0<vmassol>\u00a0unless someone set the CP using $XWIKI\\_OPTS  \n18:18\u00a0<+tmortagne>\u00a0and yes the test does not trigger beanutils  \n18:18\u00a0<+tmortagne>\u00a0so for this one at least it's something else  \n18:18\u00a0<+tmortagne>\u00a0checking the plugin  \n18:19\u00a0<+tmortagne>\u00a0yep the plugin has some dependecies on beanutils 1.6  \n18:20\u00a0<+tmortagne>\u00a0but a the first one is on 1.8.3 so it's supposed to override the following dependencies versions but since it does not bahave the same everywhere maybe it's a maven bug  \n18:20\u00a0<vmassol>\u00a0what plugin?  \n18:20\u00a0<+tmortagne>\u00a0packager  \n18:20\u00a0<vmassol>\u00a0this one generates a packaging  \n18:21\u00a0<+tmortagne>\u00a0it does not start it ?  \n18:21\u00a0<vmassol>\u00a0and on the agent I've checked that beautils 1.8.3 is copied  \n18:21\u00a0<vmassol>\u00a0no it doesn't start anything  \n18:21\u00a0<vmassol>\u00a0the test is started by the surefire plugin  \n18:21\u00a0<vmassol>\u00a0which is defined in the test functional-test lifecycle  \n18:22\u00a0<+tmortagne>\u00a0where is functional-test defined ?  \n18:22\u00a0<+tmortagne>\u00a0found it  \n18:24\u00a0<vmassol>\u00a0hmm btw I saw that sdumitriu put back the explicit definition of the packager plugin in the linkchekcer test pom.xml  \n18:24\u00a0<vmassol>\u00a0sdumitriu: AFAIU this isn't necessary normally  \n18:24\u00a0<vmassol>\u00a0since it's part of the lifecycle  \n18:25\u00a0<vmassol>\u00a0I created the functional-test lifecycle so that we don't have to put any declaration in the pom.xml  \n18:25\u00a0<vmassol>\u00a0(thus avoiding lots of pom.xml duplication)  \n18:26\u00a0<vmassol>\u00a0it worked fine locally so I don't know why it would be necessary on jenkins  \n18:26\u00a0<vmassol>\u00a0(worked fine without the explicit declaration that is)  \n18:26\u00a0<+tmortagne>\u00a0vmassol: the packager use the same jetty resource used in the XE war ?  \n18:26\u00a0<vmassol>\u00a0yes  \n18:26\u00a0<vmassol>\u00a0it uses the platform jetty tool module  \n18:27\u00a0<+tmortagne>\u00a0ok so it's not a some jetty jar then  \n18:27\u00a0<vmassol>\u00a0sdumitriu: ?  \n18:28\u00a0<+tmortagne>\u00a0it's the version is right in the package then it can only be a classpath issue either in an env var or when executing start\\_xwiki.sh  \n18:28\u00a0<+tmortagne>\u00a0s:its/if/  \n18:28\u00a0<vmassol>\u00a0that's also my understanding  \n18:29\u00a0<+tmortagne>\u00a0and there is classptah issue in both agent1 and 3 bot not with the same dependency, right ?  \n18:30\u00a0<+tmortagne>\u00a0s/bot/agents/  \n18:30\u00a0<+tmortagne>\u00a0s/bot/but/ actually :)  \n18:30\u00a0<vmassol>\u00a0the error is not the same on both agents  \n18:32\u00a0<+tmortagne>\u00a0but in both case it's a method issue ?  \n18:33\u00a0<vmassol>\u00a0yes  \n18:48\u00a0<+tmortagne>\u00a0vmassol: \"good\" new, I get java.lang.NoSuchMethodError: org.apache.commons.beanutils.ConvertUtilsBean.register(ZZI)V locally  \n18:48\u00a0<+tmortagne>\u00a0trying to debug now  \n18:49\u00a0<vmassol>\u00a0ah cool, how did you get that?  \n18:49\u00a0<+tmortagne>\u00a0nothing specail  \n18:49\u00a0<+tmortagne>\u00a0specail  \n18:49\u00a0<vmassol>\u00a0weird  \n18:49\u00a0<evalica>\u00a0has quit  \n18:49\u00a0<+tmortagne>\u00a0just built the project  \n18:49\u00a0<vmassol>\u00a0you have the correct jar in WEB-INF/lib?  \n18:49\u00a0<+tmortagne>\u00a0checking  \n18:49\u00a0<vmassol>\u00a01.8.3?  \n18:50\u00a0<+tmortagne>\u00a0yep  \n18:50\u00a0<+tmortagne>\u00a0I have the right one  \n18:50\u00a0<vmassol>\u00a0ok  \n18:50\u00a0<vmassol>\u00a0same as what I saw on agent3  \n18:50\u00a0<+tmortagne>\u00a0but maybe the issue is not here but in some other jar which package beautils  \n18:50\u00a0<+tmortagne>\u00a0beanutils  \n18:50\u00a0<+tmortagne>\u00a0comparing jar in that package with the jar we have in a XE build  \n18:51\u00a0<+tmortagne>\u00a0s/jar/jars/  \n18:51\u00a0<vmassol>\u00a0yeah was thinking about this too  \n18:51\u00a0<vmassol>\u00a0but haven't checked yet  \n18:51\u00a0<vmassol>\u00a0the reason I didn't check was because when I downloaded the packaging done on agent3 it worked locally  \n18:52\u00a0<vmassol>\u00a0so I figured the jars in WEB-INF/lib were ok  \n18:52\u00a0<+tmortagne>\u00a0you sure you did the thing that is supposed to produce the error ?  \n18:55\u00a0<vmassol>\u00a0I just executed sh start\\_xwiki.sh  \n18:56\u00a0<vmassol>\u00a0the error is at startup  \n18:56\u00a0<vmassol>\u00a0(for the beanutils one)  \n18:56\u00a0<vmassol>\u00a0I didn't try to reproduce the error on agent3 itself though  \n18:56\u00a0<vmassol>\u00a0by calling directly sh start\\_xwiki.sh there  \n18:59\u00a0<@sdumitriu>\u00a0vmassol: I put it in order to specify the version  \n18:59\u00a0<@sdumitriu>\u00a0It failed before because it used version 3.3  \n18:59\u00a0<@sdumitriu>\u00a0Which didn't have the new goals  \n18:59\u00a0<vmassol>\u00a0why did it use version 3.3?  \n18:59\u00a0<vmassol>\u00a0version 3.3 of what?  \n19:00\u00a0<vmassol>\u00a0ah yes right I understand now  \n19:00\u00a0<vmassol>\u00a0I'll add a comment  \n19:00\u00a0<vmassol>\u00a0it's far from obvious  \n19:01\u00a0<@sdumitriu>\u00a0It could be removed after we release 3.4  \n19:01\u00a0<vmassol>\u00a0yes  \n19:01\u00a0<@sdumitriu>\u00a0By the way, where is the lifecylce declared, I couldn't find it in the poms  \n19:01\u00a0<+tmortagne>\u00a0so here are the differences:  \n19:01\u00a0<+tmortagne>\u00a0\\* not the same version of activation, 1.1 instead of 1.1.1  \n19:01\u00a0<+tmortagne>\u00a0\\* commons-lang 2.4 which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0\\* commons-logging-1.0.4 which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0\\* gwt-dev-2.4.0 which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0\\* gwt-user-2.4.0 which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0\\* not the same version of jta, 1.1 instead of 1.0.1B  \n19:01\u00a0<+tmortagne>\u00a0\\* servlet-api-2.4 which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0\\* smatgwt-3.0 which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0\\* validation-api which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0\\* xercesImpl which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0\\* xml-api which is not in XE  \n19:01\u00a0<+tmortagne>\u00a0checking if one of theses contains beanutils (my guess goes to gwt), note that all the jar not in XE are mistakes that should be fixed  \n19:02\u00a0<vmassol>\u00a0sdumitriu: it's here:https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-tools/xwiki-platform-tool-functional-test-lifecycle/src/main/resources/META-INF/plexus/components.xml  \n19:02\u00a0<@sdumitriu>\u00a0When we build the normal wars we explicitly exclude some of these dependencies  \n19:02\u00a0<@sdumitriu>\u00a0So the packager plugin should have the same list of excludes  \n19:02\u00a0<+tmortagne>\u00a0(the line about commons-lang was actually \"not the same version\")  \n19:02\u00a0<vmassol>\u00a0I put some excludes in the packager plugin  \n19:03\u00a0<@sdumitriu>\u00a0vmassol: Not that one, where do we enable it in maven  \n19:03\u00a0<vmassol>\u00a0sdumitriu: by using: <packaging>funcitonal-test  \n19:03\u00a0<vmassol>\u00a0<packaging>functional-test</packaging>  \n19:03\u00a0<@sdumitriu>\u00a0How does maven know where the functional-test is defined?  \n19:03\u00a0<@sdumitriu>\u00a0How does maven know where the functional-test lifecycle is defined?  \n19:03\u00a0<vmassol>\u00a0ah here:  \n19:04\u00a0<vmassol>\u00a0https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/pom.xml  \n19:04\u00a0<vmassol>\u00a0<!-- Needed to add support for the \"functional-test\" packaging -->  \n19:04\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<extension>  \n19:04\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<groupId>org.xwiki.platform</groupId>  \n19:04\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<artifactId>xwiki-platform-tool-functional-test-lifecycle</artifactId>  \n19:04\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<version>${project.version}</version>  \n19:04\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</extension>  \n19:04\u00a0<+tmortagne>\u00a0vmassol: gwt-dev  \n19:04\u00a0<+tmortagne>\u00a0here is your bad boy  \n19:05\u00a0<vmassol>\u00a0it repackages beanutils?  \n19:05\u00a0<+tmortagne>\u00a0it package all the things that the stuff he convert in js  \n19:05\u00a0<vmassol>\u00a0arf  \n19:05\u00a0<+tmortagne>\u00a0so the issue is actually probably the same in both agents  \n19:05\u00a0<+tmortagne>\u00a0the fact that it load one befoe is the other is just some random env related thing probably  \n19:06\u00a0<+tmortagne>\u00a0so the fix is better filtering  \n19:06\u00a0<+tmortagne>\u00a0in the case of gwt-dev the real issue is probably the fact that it has the wrong scope IMO  \n19:06\u00a0<+tmortagne>\u00a0should be a scope provided  \n19:07\u00a0<vmassol>\u00a0tmortagne: we need to check what we do in the XE build for gwt-dev  \n19:07\u00a0<vmassol>\u00a0and do the same  \n19:07\u00a0<+tmortagne>\u00a0gwt build it self produce a warning in the log about that  \n19:07\u00a0<vmassol>\u00a0I have to go to the doctor in 5 mn but I can check later unless someone beats me to it  \n19:07\u00a0<+tmortagne>\u00a0vmassol: we probably filter it in the wysiwyg war build  \n19:07\u00a0<+tmortagne>\u00a0will look  \n19:08\u00a0<vmassol>\u00a0thanks  \n19:08\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* r0eb5ba7\u000f \u000f/ xwiki-platform-core/xwiki-platform-linkchecker/xwiki-platform-linkchecker-test/pom.xml :\u000f XWIKI-7323: Add a Maven \"functional-test\" custom lifecycle for functional tests ...  \n19:12\u00a0<+tmortagne>\u00a0actually I will have to go in not too long, just looking at gwt-dev  \n19:13\u00a0<gdelhumeau>\u00a0has quit  \n19:26\u00a0<jvdrean>\u00a0has quit  \n19:29\u00a0<tmortagne>\u00a0has quit  \n20:23\u00a0<@sdumitriu>\u00a0Yay, platform build succeeded!  \n20:47\u00a0<vmassol>\u00a0sdumitriu: that's just luck according to what thomas has found  \n20:49\u00a0<Enygma`>\u00a0has quit  \n20:51\u00a0<@sdumitriu>\u00a0Ah, nobody fixed it?  \n20:51\u00a0<vmassol>\u00a0haven't seen any commit  \n20:51\u00a0<vmassol>\u00a0(I'm jsut back from the doctor)  \n21:01\u00a0<CIA-123>\u00a0Vincent Massol\u000f master\u000f \\* rb94b44f\u000f \u000f/ xwiki-platform-core/xwiki-platform-linkchecker/xwiki-platform-linkchecker-test/pom.xml :\u000f XWIKI-7323: Add a Maven \"functional-test\" custom lifecycle for functional tests ...  \n23:00\u00a0<vmassol>\u00a0has quit  \n23:16\u00a0<xwikibot>\u00a0has joined #xwiki  \n\n"}