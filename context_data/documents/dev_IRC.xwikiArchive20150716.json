{"id": "dev:IRC.xwikiArchive20150716", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150716", "title": "IRC Archive for channel #xwiki on 16 July 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Enygma`>\u00a0has quit  \n02:12\u00a0<abusenius>\u00a0has quit  \n03:21\u00a0<Pbas>\u00a0has quit  \n03:24\u00a0<Pbas>\u00a0has joined #xwiki  \n05:45\u00a0<benoitc>\u00a0has quit  \n06:02\u00a0<Denis1>\u00a0has quit  \n06:04\u00a0<Denis>\u00a0has joined #xwiki  \n06:09\u00a0<spawn57>\u00a0has quit  \n06:33\u00a0<benoitc>\u00a0has joined #xwiki  \n07:16\u00a0<sdumitriu>\u00a0has quit  \n07:17\u00a0<risherry>\u00a0has joined #xwiki  \n07:17\u00a0<sdumitriu>\u00a0has joined #xwiki  \n07:21\u00a0<Ramona>\u00a0has joined #xwiki  \n07:22\u00a0<spawn57\\_>\u00a0has joined #xwiki  \n07:23\u00a0<spawn57\\_>\u00a0I've installed a few extensions in a subwki. \u00a0where does xwiki keep the extensions?  \n07:23\u00a0<spawn57\\_>\u00a0on the file system..  \n08:04\u00a0<vmassol>\u00a0has joined #xwiki  \n08:08\u00a0<\\_cjd\\_>\u00a0has quit  \n08:42\u00a0<woshilapin>\u00a0has quit  \n08:43\u00a0<lucaa>\u00a0has joined #xwiki  \n09:02\u00a0<\\_cjd\\_>\u00a0has joined #xwiki  \n09:05\u00a0<risherry>\u00a0has joined #xwiki  \n09:25\u00a0<mflorea>\u00a0has joined #xwiki  \n09:28\u00a0<Slashman>\u00a0has joined #xwiki  \n09:28\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:29\u00a0<spawn57\\_>\u00a0has anyone gotten the Excelplugin ($xwiki.calc) extension to work?  \n09:31\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:37\u00a0<lucaa1>\u00a0has joined #xwiki  \n09:37\u00a0<lucaa>\u00a0has quit  \n09:44\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:54\u00a0<lucaa1>\u00a0has quit  \n09:59\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:05\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:07\u00a0<sdumitriu>\u00a0has quit  \n10:08\u00a0<sdumitriu>\u00a0has joined #xwiki  \n10:22\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:26\u00a0<lucaa>\u00a0has joined #xwiki  \n10:33\u00a0<spawn57\\_>\u00a0has anyone gotten the Excelplugin ($xwiki.calc) extension to work?  \n10:35\u00a0<lucaa>\u00a0has quit  \n10:41\u00a0<abusenius>\u00a0has joined #xwiki  \n11:59\u00a0<risherry>\u00a0has quit  \n12:31\u00a0<gsmeria>\u00a0has quit  \n12:51\u00a0<gsmeria>\u00a0has joined #xwiki  \n12:52\u00a0<gsmeria>\u00a0has quit  \n13:28\u00a0<Denis>\u00a0has quit  \n13:30\u00a0<lucaa>\u00a0has joined #xwiki  \n13:34\u00a0<Denis>\u00a0has joined #xwiki  \n13:35\u00a0<lucaa>\u00a0has quit  \n13:36\u00a0<lucaa>\u00a0has joined #xwiki  \n13:44\u00a0<lucaa>\u00a0has quit  \n13:44\u00a0<lucaa>\u00a0has joined #xwiki  \n13:45\u00a0<lucaa>\u00a0has quit  \n13:45\u00a0<lucaa1>\u00a0has joined #xwiki  \n14:02\u00a0<lucaa1>\u00a0has quit  \n14:03\u00a0<lucaa>\u00a0has joined #xwiki  \n14:07\u00a0<lucaa>\u00a0has quit  \n14:08\u00a0<lucaa>\u00a0has joined #xwiki  \n14:11\u00a0<risherry>\u00a0has joined #xwiki  \n14:13\u00a0<gsmeria>\u00a0has joined #xwiki  \n14:14\u00a0<lucaa>\u00a0has quit  \n14:24\u00a0<Ramona>\u00a0has quit  \n14:26\u00a0<OSIMasson>\u00a0has quit  \n14:33\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n14:34\u00a0<lucaa>\u00a0has joined #xwiki  \n14:36\u00a0<lucaa>\u00a0has quit  \n14:37\u00a0<lucaa1>\u00a0has joined #xwiki  \n14:42\u00a0<lucaa1>\u00a0has quit  \n14:46\u00a0<OSIMasson>\u00a0has joined #xwiki  \n14:50\u00a0<\\_cjd\\_>\u00a0has quit  \n14:53\u00a0<\\_cjd\\_>\u00a0has joined #xwiki  \n14:53\u00a0<lucaa>\u00a0has joined #xwiki  \n15:02\u00a0<lucaa>\u00a0has quit  \n15:02\u00a0<lucaa1>\u00a0has joined #xwiki  \n15:08\u00a0<lucaa1>\u00a0has quit  \n15:08\u00a0<lucaa>\u00a0has joined #xwiki  \n15:16\u00a0<Bugendolf>\u00a0has quit  \n15:26\u00a0<msmeria>\u00a0has quit  \n15:26\u00a0<Bugendolf>\u00a0has joined #xwiki  \n15:36\u00a0<risherry>\u00a0has quit  \n16:13\u00a0<OSIMasson>\u00a0has quit  \n16:22\u00a0<gsmeria>\u00a0has quit  \n16:29\u00a0<gsmeria>\u00a0has joined #xwiki  \n16:37\u00a0<gdelhumeau>\u00a0has quit  \n16:45\u00a0<Trefex>\u00a0has joined #xwiki  \n16:47\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n17:06\u00a0<tmortagne>\u00a0sdumitriu: Hi  \n17:06\u00a0<tmortagne>\u00a0would you happen to have the source of the schema on http://platform.xwiki.org/xwiki/bin/view/DevGuide/DatabaseSchema somewhere ? I see you did a modification to it  \n17:07\u00a0<\\_cjd\\_>\u00a0I don't think I shared the original of that with anyone so it's going to be on my machine .. somewhere  \n17:08\u00a0<\\_cjd\\_>\u00a0if I get ping to my laptop, I can grab my files.txt .. 2.5MB of names of all the files I have on my big machine, that will tell me whether/where I have it  \n17:09\u00a0<tmortagne>\u00a0ok  \n17:09\u00a0<\\_cjd\\_>\u00a0but I can't reach my laptop at the moment, it might have crashed or lost connection to freewifi  \n17:09\u00a0<tmortagne>\u00a0If you can't find it I guess I will try to search some tool to generate this kind of things  \n17:17\u00a0<\\_cjd\\_>\u00a0It would pay off better because that file is really a mess  \n17:31\u00a0<ClemensR>\u00a0has quit  \n17:38\u00a0<KermitTheFragger>\u00a0has quit  \n17:54\u00a0<vmassol>\u00a0cool the sonrar jobs on ci are all passing now :)  \n17:54\u00a0<vmassol>\u00a0the sonar jenkins job that is  \n18:04\u00a0<gsmeria>\u00a0has left #xwiki  \n18:09\u00a0<\\_cjd\\_>\u00a0has quit  \n18:12\u00a0<Trefex>\u00a0has quit  \n18:13\u00a0<sdumitriu>\u00a0tmortagne: Hi  \n18:13\u00a0<sdumitriu>\u00a0Nope, I just gimped it  \n18:13\u00a0<tmortagne>\u00a0ok  \n18:13\u00a0<vmassol>\u00a0Enygma`: \u00a0in http://jira.xwiki.org/browse/XWIKI-8320 you added a getdocuments.vm template  \n18:13\u00a0<tmortagne>\u00a0I'm not a big fan of using gimp to add a new table :)  \n18:14\u00a0<vmassol>\u00a0Enygma`: but it seems it's failing the escape test since it returns json and not XML. Does it mean it's been failing since 6.3M2?  \n18:14\u00a0<tmortagne>\u00a0I think I will just try to find some nice tool to generic this shema, something anyone can use ideally  \n18:14\u00a0<vmassol>\u00a0some xwiki macro would be nice :)  \n18:15\u00a0<vmassol>\u00a0(to generate the schema)  \n18:15\u00a0<tmortagne>\u00a0vmassol: ideally I would prefer something that generate it from hibernate hbm file or something like this  \n18:16\u00a0<vmassol>\u00a0well when you're in a xwiki page you have access to the DB  \n18:16\u00a0<vmassol>\u00a0so you could imagine a tool that generate it from inside xwiki  \n18:16\u00a0<vmassol>\u00a0should be easy  \n18:16\u00a0<vmassol>\u00a0if we find the fwk that generates the schema from a DB access  \n18:17\u00a0<tmortagne>\u00a0I would prefer something that exist instead of having to do it myself  \n18:17\u00a0<vmassol>\u00a0yes we should not do it ourselves  \n18:17\u00a0<vmassol>\u00a0that's why I said \"if we find the fwk that generates the schema from a DB access\"  \n18:18\u00a0<Enygma`>\u00a0vmassol: looks like it popped up out of the blue  \n18:18\u00a0<Enygma`>\u00a0looking better  \n18:18\u00a0<vmassol>\u00a0Enygma`: weird\u2026. there must have been \u00a0\u00a0a reason  \n18:18\u00a0<vmassol>\u00a0what looks better?  \n18:18\u00a0<vmassol>\u00a0oh you mean you're checking more?  \n18:19\u00a0<tmortagne>\u00a0vmassol: you still need to write a macro, handle temporary image, etc. with what you suggest  \n18:19\u00a0<vmassol>\u00a0I'll exclude it for now, ok? since I don't think we support JSON vericiation?  \n18:19\u00a0<vmassol>\u00a0tmortagne: the tool will generate the images  \n18:19\u00a0<vmassol>\u00a0on the FS  \n18:19\u00a0<vmassol>\u00a0anyway it's just an idea  \n18:19\u00a0<vmassol>\u00a0and I don't know if such a tool exists  \n18:20\u00a0<vmassol>\u00a0but I could see it existing since JDBC provides metadata  \n18:20\u00a0<tmortagne>\u00a0mysql workbench seems to generate nice diagram  \n18:21\u00a0<tmortagne>\u00a0at least it's working on all OSes  \n18:23\u00a0<woshilapin>\u00a0has quit  \n18:26\u00a0<risherry>\u00a0has joined #xwiki  \n18:28\u00a0<Enygma`>\u00a0vmassol: the problem is that somewhat valid, since request parameter values get in the executed query  \n18:29\u00a0<vmassol>\u00a0the XML validation isn't valid for sure  \n18:29\u00a0<vmassol>\u00a0since it's JSON and not XML  \n18:29\u00a0<vmassol>\u00a0we would need to improve our TemplateTest to support JSON validation  \n18:29\u00a0<vmassol>\u00a0(I guess)  \n18:29\u00a0<vmassol>\u00a0correct?  \n18:30\u00a0<Enygma`>\u00a0but they are things like order by column name, wiki ID and maybe something else  \n18:30\u00a0<vmassol>\u00a0(I don't know TemplateTest well)  \n18:30\u00a0<Enygma`>\u00a0right now, as far as I can see, the escaping test fails because the exception messages include the query values that made the query fail  \n18:30\u00a0<vmassol>\u00a0there are \u00a02 errors:  \n18:30\u00a0<vmassol>\u00a0the template itself fails with some inputs  \n18:30\u00a0<vmassol>\u00a0that's error 1  \n18:30\u00a0<vmassol>\u00a0and the XML vlaidation fails because it's not XML  \n18:31\u00a0<vmassol>\u00a0that's error 2  \n18:31\u00a0<Enygma`>\u00a0so if \"<>#@#\" makes the query fail to execute, it gets in the output and the escape test considers this a win... but it's actually not  \n18:31\u00a0<vmassol>\u00a0am I reading it correetly?  \n18:31\u00a0<vmassol>\u00a0I only fixed error 2 and not error 1  \n18:31\u00a0<Enygma`>\u00a0I was looking at this http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/1294/testReport/  \n18:31\u00a0<vmassol>\u00a0yes me too: http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/1294/org.xwiki.enterprise$xwiki-enterprise-test-escaping/testReport/org.xwiki.test.escaping/TemplateTest/templates\\_getdocuments\\_vm\\_\\_limit\\_\\_editor\\_\\_sort\\_\\_dir\\_\\_queryFilters\\_\\_language\\_\\_wiki\\_\\_offset\\_\\_space\\_\\_\\_testParameterEscaping/  \n18:32\u00a0<vmassol>\u00a0and TemplateTest.testParameterEscaping(TemplateTest.java:146) uses the XMLEscapingValidator ....  \n18:32\u00a0<Enygma`>\u00a0and the only escaping failure there is caused by the \"Exception while executing query.\"  \n18:33\u00a0<Enygma`>\u00a0but why does that matter?  \n18:33\u00a0<vmassol>\u00a0it' JSON and not XML so I don't see how using an XMLEscapingValidator would work  \n18:33\u00a0<Enygma`>\u00a0the escape test inputs \"<>ABC\" and if \"<>ABC\" is in the output, it thinks it wins and has detected and escaping issue, right?  \n18:34\u00a0<vmassol>\u00a0so you don't agree with my mesage above that there are 2 errors?  \n18:34\u00a0<vmassol>\u00a0and you don't agree that you cannot use an XML validator to validate JSON?  \n18:35\u00a0<Enygma`>\u00a0maybe I don`t understand the connection  \n18:35\u00a0<vmassol>\u00a0the connection between what?  \n18:36\u00a0<Enygma`>\u00a0ok, reading the test I understand what you mean  \n18:37\u00a0<Enygma`>\u00a0basically, the logic of the template is not to produce XML/HTML which would cause escaping issues with that input, but it`s just to produce a JSON.  \n18:37\u00a0<vmassol>\u00a0getdocuments.vm produces JSON  \n18:38\u00a0<vmassol>\u00a0TemplateTest validates the vm results with an XML validator  \n18:38\u00a0<Enygma`>\u00a0so there is no point in checking if the problematic string makes it in an XML environment where it can be dangerous, because the output environment is JSON, not XML  \n18:38\u00a0<mflorea>\u00a0has quit  \n18:38\u00a0<vmassol>\u00a0so TemplateTest cannot be used to validate getdocuments.vm  \n18:38\u00a0<vmassol>\u00a0this doesn't mean that there's no problem with getdocuments.vm  \n18:38\u00a0<vmassol>\u00a0there probabmly as shown by the excpetion at http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/1294/org.xwiki.enterprise$xwiki-enterprise-test-escaping/testReport/org.xwiki.test.escaping/TemplateTest/templates\\_getdocuments\\_vm\\_\\_limit\\_\\_editor\\_\\_sort\\_\\_dir\\_\\_queryFilters\\_\\_language\\_\\_wiki\\_\\_offset\\_\\_space\\_\\_\\_testParameterEscaping/  \n18:39\u00a0<vmassol>\u00a0so it needs ot be fixed and I'll leve that to you ;  \n18:39\u00a0<vmassol>\u00a0;)  \n18:39\u00a0<vmassol>\u00a0and in the future we should improve our TemplateTest to also vlaidate JSON  \n18:39\u00a0<vmassol>\u00a0and not just XML  \n18:39\u00a0<vmassol>\u00a0if you have the courage to do it, please go ahead :)  \n18:40\u00a0<vmassol>\u00a0(shouldn't be too hard , i'm sure there are some java json validator out there that we could use)  \n18:40\u00a0<Enygma`>\u00a0but what would it test, just that the output json is syntactically valid?  \n18:41\u00a0<vmassol>\u00a0it would do the sae asa jsonlint.org does  \n18:41\u00a0<vmassol>\u00a0\\*same  \n18:41\u00a0<vmassol>\u00a0so yes check that the json is correct  \n18:41\u00a0<vmassol>\u00a0proper escapes, valid tokens, etc  \n18:42\u00a0<Enygma`>\u00a0I see  \n18:43\u00a0<Enygma`>\u00a0I wonder though why is it starting to fail only now (the getdocuments.vm template)  \n18:44\u00a0<abusenius>\u00a0has quit  \n18:46\u00a0<tmortagne>\u00a0MySQL workbench work well but you need the commercial version to actually export your diagram...  \n18:46\u00a0<abusenius>\u00a0has joined #xwiki  \n18:47\u00a0<Enygma`>\u00a0created http://jira.xwiki.org/browse/XWIKI-12319  \n18:49\u00a0<vmassol>\u00a0ok cool  \n18:50\u00a0<vmassol>\u00a0Enygma`: if you check http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/  \n18:50\u00a0<vmassol>\u00a0you can see that it succeeded in #1291 for ex  \n18:50\u00a0<Enygma`>\u00a0wait, so now it is passing?  \n18:50\u00a0<vmassol>\u00a0seems there were unknown connection issue before  \n18:50\u00a0<vmassol>\u00a0I xcluded it  \n18:50\u00a0<Enygma`>\u00a0ah, ok  \n18:51\u00a0<Enygma`>\u00a0good thing I pasted the output in the jira issue :)  \n18:51\u00a0<vmassol>\u00a0I did that too  \n18:51\u00a0<vmassol>\u00a0in http://jira.xwiki.org/browse/XWIKI-8320  \n18:51\u00a0<vmassol>\u00a0but not the exception  \n18:51\u00a0<vmassol>\u00a0....  \n18:52\u00a0<vmassol>\u00a0would be interesting to build the xwiki-enterprise for tag 6.4 for example  \n18:52\u00a0<vmassol>\u00a0to see if it fails locally  \n18:52\u00a0<vmassol>\u00a0it should  \n18:52\u00a0<vmassol>\u00a0trying it  \n19:04\u00a0<gdelhumeau>\u00a0has quit  \n19:08\u00a0<risherry>\u00a0has quit  \n19:09\u00a0<vmassol>\u00a0tmortagne: nice diagram but how come there's no relationship between space table and xwikidoc tbale for ex?  \n19:09\u00a0<vmassol>\u00a0or between xwikidoc and xwikiobkects  \n19:09\u00a0<vmassol>\u00a0\\*xwikiobjects  \n19:10\u00a0<evalica>\u00a0has joined #xwiki  \n19:10\u00a0<tmortagne>\u00a0that's because there is none from database point of view  \n19:10\u00a0<tmortagne>\u00a0we make the relationship on XWiki side  \n19:10\u00a0<vmassol>\u00a0ok  \n19:11\u00a0<vmassol>\u00a0note: there's a XDD\\_DATE \u00a0popup on the image  \n19:11\u00a0<vmassol>\u00a0removed :)  \n19:12\u00a0<tmortagne>\u00a0vmassol: refresh  \n19:13\u00a0<tmortagne>\u00a0also made the version a bit more visible  \n19:14\u00a0<tmortagne>\u00a0should be a bit better now  \n19:14\u00a0<vmassol>\u00a0Enygma`: fyi success in building 6.4, checking why now ;)  \n19:15\u00a0<\\_cjd\\_>\u00a0has joined #xwiki  \n19:15\u00a0<Enygma`>\u00a0vmassol: :)  \n19:15\u00a0<vmassol>\u00a0hmm  \n19:15\u00a0<vmassol>\u00a0templates/getdocuments.vm [limit, editor, sort, dir, queryFilters, language, wiki, offset, space] \u00a0testParameterEscaping(org.xwiki.test.escaping.TemplateTest) \u00a0Time elapsed: 0.487 sec  \n19:15\u00a0<vmassol>\u00a0templates/getdocuments.vm [limit, editor, sort, dir, queryFilters, language, wiki, offset, space] \u00a0testSpaceEscaping(org.xwiki.test.escaping.TemplateTest) \u00a0Time elapsed: 0.049 sec  \n19:16\u00a0<Enygma`>\u00a0tmortagne: the image is a bit blurry on my machine  \n19:16\u00a0<vmassol>\u00a0I don't get it, I'll need to debug  \n19:17\u00a0<vmassol>\u00a0ok there are errors too but it's not failing the test  \n19:18\u00a0<vmassol>\u00a0Enygma`: see https://gist.githubusercontent.com/vmassol/187ea40432aeb448748d/raw/e338aa88f44bbceaa0c13eef310144e5e5add2d9/gistfile1.txt  \n19:19\u00a0<tmortagne>\u00a0has quit  \n19:19\u00a0<vmassol>\u00a0but still the test doesn't fail  \n19:19\u00a0<vmassol>\u00a0...  \n19:21\u00a0<ansuz>\u00a0has quit  \n19:21\u00a0<ansuz>\u00a0has joined #xwiki  \n19:22\u00a0<woshilapin>\u00a0has joined #xwiki  \n19:32\u00a0<lucaa>\u00a0has quit  \n19:38\u00a0<Enygma`>\u00a0has quit  \n19:41\u00a0<sdumitriu1>\u00a0has quit  \n19:57\u00a0<MasterPiece>\u00a0has joined #xwiki  \n20:04\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n20:31\u00a0<gdelhumeau>\u00a0has quit  \n21:30\u00a0<\\_cjd\\_>\u00a0has quit  \n21:34\u00a0<Slashman>\u00a0has quit  \n21:47\u00a0<lucaa>\u00a0has joined #xwiki  \n21:57\u00a0<\\_cjd\\_>\u00a0has joined #xwiki  \n22:05\u00a0<OSIMasson>\u00a0has joined #xwiki  \n22:40\u00a0<lucaa>\u00a0has quit  \n23:38\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n23:45\u00a0<evalica>\u00a0has quit\n"}