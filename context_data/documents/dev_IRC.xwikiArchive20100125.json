{"id": "dev:IRC.xwikiArchive20100125", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100125", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nbbc581 joined #xwiki at 02:31  \nnpm left at 02:45 (\"Leaving.\"  \nnpm joined #xwiki at 02:45  \nbbc581 left at 04:30 (Remote closed the connection  \nvmassol joined #xwiki at 07:34  \nCalebJamesDeLisl - (07:46): Good morning, The captcha should be enabled by default, I did however forget to add the configuration bit for disabling it. Should it be default enabled or disable in your opinion? (This means globally)  \nvmassol - (07:47): CalebJamesDeLisl: you should ask on the list probably. I'm not sure myself but I'd say enabled by default.  \nvmassol - (07:47): CalebJamesDeLisl: I don't see it on the reg page  \nCalebJamesDeLisl - (07:48): That's odd, I built it from a clean version of revision 26333 and I see it.  \nvmassol - (07:48): where does it appear normally?  \nCalebJamesDeLisl - (07:49): At the bottom of the registration page.  \nvmassol - (07:49): I have the standard registration form  \nvmassol - (07:49): do I need to import an app?  \nCalebJamesDeLisl - (07:50): No if you built post 26333 platform and xe then you should have it.  \nvmassol - (07:50): ok I'll rebuild  \nvmassol - (07:50): It's possible it was before you added the app  \nvmassol - (07:52): yes doing a svn up shows that the app was missing  \nCalebJamesDeLisl - (07:55): I have a small change I can make to the original registerinline.vm and then RegisterAction can be deprecated.  \nlucaa left #xwiki at 08:07  \nmflorea joined #xwiki at 08:17  \nkibaho1 joined #xwiki at 08:31  \nkibaho1 left at 08:38 (\"Leaving.\"  \nkibaho1 joined #xwiki at 08:39  \nkibaho2 joined #xwiki at 08:39  \nkibaho1 left at 08:39 (Client Quit  \nvmassol - (08:52): CalebJamesDeLisl: a nitpick: I'd rather we don't expose $captchaservice as much as possible right now  \nvmassol - (08:52): I'm thinking about xwiki.properties  \nvmassol - (08:52): I'd rather we don't mention it in there, wdyt?  \nCalebJamesDeLisl - (08:52): I suppose.  \nvmassol - (08:52): same for the name: +# captcha.internal.velocity.VelocityCaptchaService.enabled = true  \nvmassol - (08:53): I don't think it's following our naming convention  \nCalebJamesDeLisl - (08:53): What do you think it should be?  \nvmassol - (08:53): I'm not sure, let me check the other properties  \nvmassol - (08:53): why \"internal\" btw?  \nCalebJamesDeLisl - (08:53): the class name except for org.xwiki  \nvmassol - (08:55): another pb CalebJamesDeLisl is IS\\_CAPTCHA\\_ENABLED\\_CFG\\_KEY which is defined in CaptchaService  \nvmassol - (08:55): it should be in a configuration component  \nvmassol - (08:56): VelocityCaptchaService is for velocity only  \nCalebJamesDeLisl - (08:56): That means a component which implements configuration?  \nvmassol - (08:56): yes  \nvmassol - (08:56): ie move ConfigurationSource to the config component  \nCalebJamesDeLisl - (08:56): Then VelocityCaptchaService asks that?  \nvmassol - (08:57): yes possibly  \nCalebJamesDeLisl - (08:57): I'm about to add a hidden field to the registration app for template='XWiki.XWikiUserTemplate' as is done with registerinline.vm need another jira issue?  \nvmassol - (08:57): for the future we'll need to decide if it does that  \nvmassol - (08:57): or if we expose the config component in velocity binding  \nvmassol - (08:57): CalebJamesDeLisl: no need for a new issue  \nvmassol - (08:58): re the property I'd use: captcha.enabled=true|false  \nCalebJamesDeLisl - (08:58): So I'm implementing ConfigurationSource?  \nvmassol - (08:58): no  \nvmassol - (08:58): you do the same as we do in other modules  \nvmassol - (08:59): you can check the velocity module for ex  \nvmassol - (08:59): it's done like this:  \nvmassol - (08:59): - one interface (compoennt role)  \nvmassol - (08:59): - the impl which implements that interface  \nvmassol - (08:59): and uses ConfigurationSource by composition  \nCalebJamesDeLisl - (09:00): Ok I'll check.  \nvmassol - (09:00): XWIKI-4789 was required either  \nvmassol - (09:00): since you add an issue for rewriting the catpcha system   \nvmassol - (09:00): (could have been included in it)  \nvmassol - (09:00): not a big deal though (just more jira issues ;))  \nvmassol - (09:01): XAADMINISTRATION-77  \nvmassol - (09:01): in term of commt we use the format:  \nvmassol - (09:01): <issue id>: <issue title>  \nvmassol - (09:01): and then  \nvmassol - (09:01): <specific details>  \nCalebJamesDeLisl - (09:02): Ok, i'll use that.  \nvmassol - (09:03): re property would you agree?  \nvmassol - (09:03): (not sure why we'd need a property that maps to the impl class)  \nvmassol - (09:03): our property rule is <module>.<propertyName>  \nvmassol - (09:03): I don't recall what we said re subnames but they're probably allowed even though we haven't used them yet I think  \nvmassol - (09:04): (<module>.<sun\bbname>.<propertyName>)  \nCalebJamesDeLisl - (09:04): Oh this is in reference to captcha.internal.VelocityCaptchaService.enable ?  \nvmassol - (09:04): we do for event distribnution  \nvmassol - (09:04): yes  \nvmassol - (09:05): for event it's because there are 2 submodule  \nvmassol - (09:05): so it's:  \nvmassol - (09:05): <module>.<submodule>.<propertyName>  \nCalebJamesDeLisl - (09:05): I just changed it to captcha.enable, about to commit.  \nvmassol - (09:05): (submodules for obseration = local and remote)  \nvmassol - (09:05): ok  \nCalebJamesDeLisl - (09:05): I see.  \nvmassol - (09:10): hmm  \nvmassol - (09:10): I can't access XE any more  \nvmassol - (09:10): (after a rebuild)  \nvmassol - (09:11): actually it's the startup that seems to not finish  \nvmassol - (09:12): weird  \nCalebJamesDeLisl - (09:12): hmm. check your xwiki.cfg for the captcha plugin. That stopped me earlier.  \nvmassol - (09:13): it's not there  \nCalebJamesDeLisl - (09:13): I'll rebuild in a minute and take a look.  \nCalebJamesDeLisl - (09:14): Just changed the message on the commit because I pasted in a line with newline and it committed...  \nvmassol - (09:27): CalebJamesDeLisl: I don't understand why you cache captcha verifiers in a map  \nCalebJamesDeLisl - (09:27): Where?  \nvmassol - (09:27): wouldn't it be better to ask the CM for them when needed?  \nvmassol - (09:27): in VelocityCaptchaService  \nlucaa joined #xwiki at 09:28  \nvmassol - (09:28): also the service should be a component with an \u00a0interface IMO  \nCalebJamesDeLisl - (09:28): So I would pass the CM to the VelocityCaptchaService then?  \nvmassol - (09:29): nope  \nvmassol - (09:29): it would be injected  \nCalebJamesDeLisl - (09:29): Make VelocityCaptchaService a component?  \nvmassol - (09:29): hmm thinking more since we've not done it like this till now  \narkub joined #xwiki at 09:31  \nCalebJamesDeLisl - (09:31): I remember thinking if it's a component then there will be other methods which velocity will be able to get a hold of like initialize()  \nvmassol - (09:31): so?  \nvmassol - (09:31): that's true in java too  \nvmassol - (09:31): but you're not supposed to do this  \nvmassol - (09:32): you're supposed to only call methods in the interface  \nCalebJamesDeLisl - (09:32): That's right, the interface.  \nvmassol - (09:33): I'm wondering if we should do as we do in other places ie have a CaptchaManager component  \nvmassol - (09:33): (independent of Velocity)  \nCalebJamesDeLisl - (09:33): So make it a component which implements XWikiCaptchaService (a new interface) and also implements VelocityContextInitializer and injects itself?  \nvmassol - (09:34): it would only have getCaptchaNames and getCaptchaVerifier probably  \nvmassol - (09:35): re VCI no  \nvmassol - (09:35): that should be separate  \nCalebJamesDeLisl - (09:36): I'm just about done with fixing the configuration.  \nvmassol - (09:37): CalebJamesDeLisl: one thing is that we usually try to avoid caching component impls  \nCalebJamesDeLisl - (09:37): It's just the pointer right?  \nvmassol - (09:37): since this breaks the use case of being able to dynamically add new components at runtime  \nvmassol - (09:37): and it doesn't add any perf value  \nCalebJamesDeLisl - (09:37): Ok I see.  \nvmassol - (09:38): (since the CM impl is just a map too)  \nvmassol - (09:38): so it depends if we want to be able to dynamically add components or not  \nvmassol - (09:39): this is still new for us  \nvmassol - (09:39): and we definitely haven't done it everywhere  \nvmassol - (09:39): we've done it for macros for sure  \nvmassol - (09:39): (since we now have the wiki macro use case)  \nvmassol - (09:40): so it's not an established best practice yet even though it's good to think about it   \nvmassol - (09:40): it'll be an issue when we have the extension manager though  \nCalebJamesDeLisl - (09:40): So the way is to declare a @Requirement for the component manager and get the captchas as necessary?  \nvmassol - (09:40): yes  \nEnygma` joined #xwiki at 09:40  \nvmassol - (09:41): wherever we want components to be added dynamically  \nvmassol - (09:41): this might be such a case here  \nvmassol - (09:41): since you have allowed for multiple implementations  \nvmassol - (09:43): CalebJamesDeLisl: I've yet to try wiping out my db and do an import. I wanted to try it now but I cannot run XE for some reason  \ntmortagne joined #xwiki at 09:47  \nvmassol - (09:50): CalebJamesDeLisl: for now I think configuration component + make VelocityCaptchaService a component should be good enough  \nvmassol - (09:50): tmortagne: if you have any input, feel free to join in  \ntmortagne - (09:51): i'm looking  \nSvenDowiu joined #xwiki at 09:52  \nvmassol - (09:54): mflorea: do we have a wysiwyg pb with links in XE 2.1?  \nmflorea - (09:55): vmassol: no, what kind of problems?  \nvmassol - (09:55): well I can answer that   \nvmassol - (09:55): yes  \nvmassol - (09:55): try this: http://tinypaste.com/fe3c3  \nSvenDowideit left at 10:09 (Read error: 101 (Network is unreachable)  \nSvenDowiu is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nmflorea - (10:09): vmassol: that wiki fragment generates links inside links. For instance [[http://www.xwiki.org>>http://www.xwiki.org]] generates nested anchors which is invalid. The question is: how did the author and up with that wiki content?  \nvmassol - (10:10): mflorea: that's a good question. I'll ask him today since I have a call with him. My guess is through copy pasting web content  \nvmassol - (10:11): the pb is that he doesn't trust xwiki much already so this is not going to help... :)  \nvmassol - (10:12): hmm if you use the wysiwyg editor  \nvmassol - (10:12): and insert a link  \nvmassol - (10:12): and you past the url in the label  \nmflorea - (10:12): yes, the label is excaped  \nvmassol - (10:12): will you get this or will it be escaped?  \nmflorea - (10:12): it will be escaped  \nvmassol - (10:12): ok  \nmflorea - (10:13): you get  \nmflorea - (10:13): this is a [[http:~~/~~/www.xwiki.org>>http://www.xwiki.org]] link  \nvmassol - (10:13): ok  \nvmassol - (10:13): in any case  \nvmassol - (10:13): it's valid syntax  \nvmassol - (10:13): (since you can enter in wiki syntax)  \nvmassol - (10:13): so we should support it in the wysiwyg editor too  \nmflorea - (10:14): we can't, because nested anchor are invalid XHTML. Maybe the XHTML renderer should take care of it  \nvmassol - (10:15): so you're saying that the produced XHTML right now is invalid?  \nmflorea - (10:15): yes, it is for [[http://www.xwiki.org>>http://www.xwiki.org]]  \nKermitTheFragger joined #xwiki at 10:15  \nvmassol - (10:15): tmortagne: any input (I think we discussed this and found it to be valid but I don't recall the details)?  \nvmassol - (10:16): hmm actrually I think we're only supporting images inside links  \nvmassol - (10:16): tmortagne: ?  \ntmortagne - (10:16): vmassol: there is an issue to protect from anchor inanchor at xhtml renderer level  \nmflorea - (10:16): it generates http://pastebin.com/d3ef2a990  \ntmortagne - (10:16): a voted one  \ntmortagne - (10:17): did not had time to do it yet  \nvmassol - (10:17): ok, so we should escape it when we get it is that it?  \ntmortagne - (10:17): also note that according to sdumitriu it's valid in xhtml 2  \nvmassol - (10:17): (right that's what I remembered)  \ntmortagne - (10:17): that's why we did not put this as critical  \nvmassol - (10:17): apparently it's more important than we thoiught  \ntmortagne - (10:19): vmassol: re captcha you want VelocityCaptchaService to be a component because it's right that CaptchaVelocityContextInitializer has to take care of its dependencies, right ?  \nmflorea - (10:19): the problem is that the on the client side the HTML DOM tree is messed up because of this and the WYSIWYG editor misbehaves. If the browser would support XHTML 2 that wouldn't be a problem.  \ntmortagne - (10:20): http://jira.xwiki.org/jira/browse/XWIKI-3440  \nmflorea - (10:20): the link plugin might have to be adjusted also to support nested links I thinks.  \nvmassol - (10:21): tmortagne: yes  \nvmassol - (10:21): (re captcha)  \nvmassol - (10:21): especially since the config should be a component too  \nvmassol - (10:21): and since the captcha verifiers shouldn't be cached imo  \nvmassol - (10:21): (so you also need to pass the cm if it's not a component)  \nvmassol - (10:22): and in any case any API should have in interface IMO  \nvmassol - (10:22): s/in/an/  \ntmortagne - (10:22): for configuration indeed thare should be a specialized CaptchaConfiguration (i'm pretty sure you did talk about that to CalebJamesDeLisl before captcha was done)  \nlucaa - (10:28): vmassol: mflorea for links in links, as long as you use the wysiwyg editor to produce content and the correct XHTML generated by the wysiwyg goes through the XHTML parser, everything will be fine, the resulted wiki syntax \\_will be\\_ with escaped labels.  \nlucaa - (10:28): Moreover, there is a filter for the wysiwyg xhtml which removes links from links before sending it to the parser, since there is still a very crappy bug with IE. So whatever is sent through wysiwyg should \\_not\\_ endup generating links in links  \nmflorea - (10:30): lucaa, sure, but we're talking about wysiwyg input. The XHTML renderer can generated nested anchors  \nvmassol - (10:30): lucaa: and anyone can enter easily: [[http://xwiki.org>>http://xwiki.org]]  \nlucaa - (10:30): however, there are older versions where this bug still existed (the parser & renderer used to generate non escaped link labels). If the guy has an older version or has imported documents generated with an older version, that is how he got the links in links issue  \nvmassol - (10:30): people wouldn't know that they have to escape a label such as this one  \nvmassol - (10:30): lucaa: I don't think so  \nvmassol - (10:31): they're using XE 2.1 (it's on myxwiki.org)  \nlucaa - (10:31): ok  \nvmassol - (10:31): and they haven't imported anything  \nvmassol - (10:31): lucaa: could it be a web copy paste?  \nvmassol - (10:31): if you highlight a link to http://xwiki.org  \nvmassol - (10:31): and copy paste it  \nvmassol - (10:31): wouldn't you get that?  \nlucaa - (10:32): if you put it in the wysiwyg it will all be fine, that's what I'm trying to say  \nlucaa - (10:33): anything that goes through wysiwyg should be fine  \nmflorea - (10:33): vmassol: the (% class=\"Apple-style-span\" style=\"font-family: Arial; font-size: medium; line-height: normal; \" %) suggests that he's using a WebKit based browser which isn't fully supported  \nvmassol - (10:34): mflorea: how would he know this?  \nvmassol - (10:34): (he's probably using safari)  \nmflorea - (10:34): we officially support only FF and IE  \nvmassol - (10:34): how would he know this?  \nvmassol - (10:35): there's no dialog saying so  \nvmassol - (10:35): or preventing him to use safari  \nvmassol - (10:35): he's not installing the wiki himself  \nvmassol - (10:35): he's just using a hosted service  \nmflorea - (10:35): http://platform.xwiki.org/xwiki/bin/view/Features/WysiwygEditor the second notice  \nvmassol - (10:35): so there's no way he could know it's not supported  \nvmassol - (10:35): mflorea: why on earth would he go there?  \nvmassol - (10:35): :)  \nmflorea - (10:36): to learn how to use the editor  \nSvenDowiu joined #xwiki at 10:36  \nvmassol - (10:36): you don't learn to use a wysiwyg editor!  \nmflorea - (10:36): then why do I wrote a help?  \nvmassol - (10:36): I have no clue  \nmflorea - (10:36): /do/did  \nvmassol - (10:36): why did you?  \nvmassol - (10:37): I think it's because customers may ask for one  \nvmassol - (10:37): in any case  \nvmassol - (10:37): I don't recall reading word or openoffice help to learn how to insert a link  \nvmassol - (10:38): and if I 'd gtten this kind of problem with them I'd consider it a bug for sure  \nmflorea - (10:38): I do think you need to lean how to use it. some of the use cases are trivial and everybody know how to make text bold, but other features are more complex  \nvmassol - (10:38): that's my point  \nvmassol - (10:38): you cannot expect use to just guess that their browser is not supported  \nvmassol - (10:38): s/use/user/  \nvmassol - (10:39): everything not working will be considered a bug  \nmflorea - (10:39): no, you don't have to guess, you have to ask or search  \nvmassol - (10:39): so either we consider them supported and fix bugs as we encoutner them  \nvmassol - (10:39): mflorea: you don't understand  \nvmassol - (10:39): you need to put yourself in the shoe of a user  \nvmassol - (10:39): which you're not doign  \nvmassol - (10:39): it's about people not dumping xwiki in frustration  \nvmassol - (10:39): it's not about right technically or not  \nvmassol - (10:40): being right I mean  \nmflorea - (10:40): ok, let me do this: I'm visiting xwiki.org with my phone, and the page looks bad, is this a bug, where is it written that the xwiki.org page is not supported on phones?  \nvmassol - (10:40): yes it's a bug  \nvmassol - (10:41): we should detect use agents  \nvmassol - (10:41): and at the minimum display a message saying that it won't look good on this agent and ask if they want to continue or not  \nvmassol - (10:41): but we're not talking about exotic configuration here  \nmflorea - (10:41): ok, in that case I agree. we should display a notice when a user edits with an unsupported browser  \nvmassol - (10:42): we could display \u00a0a warning and in that warning incite them to report issues on jira.xwiki.org so that we can improve the support for that browser  \nmflorea - (10:43): ok  \nmflorea - (10:44): but, users should report issues for supported browsers too  \ntmortagne - (10:45): CalebJamesDeLisl: why are you creating a instance of SoundToWavHelper in AbstractSoundCaptchaAction ? since you only use a static method of SoundToWavHelper  \ntmortagne - (10:46): same for AbstractImageCaptchaAction and ImageToJpegHelper  \nCalebJamesDeLisl - (10:47): Thank you for pointing that out, I didn't notice it was static. Will fix.  \nkibaho2 left #xwiki at 10:47  \ntmortagne - (10:48): CalebJamesDeLisl: btw would be better to nicer to use new ArrayList<String>(captchas.keySet()) instead of new ArrayList(captchas.keySet()) in VelocityCaptchaService#listCaptchaNames  \nmflorea - (10:48): vmassol: http://jira.xwiki.org/jira/browse/XWIKI-4790  \ntmortagne - (10:48): s/better to nicer/nicer/  \nvmassol - (10:49): mflorea: ok cool  \ntmortagne - (10:50): mflorea: I think jvdrean have some code already to detect user agent but he could not finish (he's goal was to be able to point a different skin for each skin if i remember well)  \ntmortagne - (10:50): \\*for each agent  \nCalebJamesDeLisl - (10:50): I am reworking that to use the ComponentManager, I was doing it that way this time, I'm thinking if it throws an exception getting the list I will log a warning and return an empty list, sound right?  \nmflorea - (10:50): tmortagne: ok, thanks  \nkibahop joined #xwiki at 10:50  \ntmortagne - (10:52): CalebJamesDeLisl: error log sound better to be szince it means there is a big issue if you can't get the list of components without even use them  \ntmortagne - (10:52): s/be/me/  \nSvenDowideit left at 10:52 (Connection timed out  \nSvenDowiu is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nCalebJamesDeLisl - (10:52): Ok thanks.  \ntmortagne left at 10:56 (\"Leaving.\"  \nvmassol - (11:02): mflorea: ok got more info  \nvmassol - (11:02): he's copied links from evernote  \nvmassol - (11:02): directly in the wysiwyg  \nvmassol - (11:02): (what I was suspecting)  \nvmassol - (11:02): btw why don't we intercept copy paste to clean up when it's html?  \nvmassol - (11:03): (I doubt users will think about using the office importer button for that)  \nmflorea - (11:03): because it's not possible  \nvmassol - (11:04): we can't intercept copy/paste?  \nlucaa - (11:06): vmassol: 1/ I'm trying to debug now to see why links in links don't get cleaned  \nlucaa - (11:06): 2/ I'm using a DefaultStringEntityReferenceSerializer() for an extracted reference  \nmflorea - (11:06): the paste event is not standard and we can't access the pasted content (i.e. the clipboard) on FF without special rights. We could try to clean after the paste but if the HTML fragment pasted was invalid the resulted DOM can be messed up  \nlucaa - (11:06): and I get the full reference serialized, the one from which I extracted my ref. Is that normal? how do I get only the reference I extracted serialized?  \nvmassol - (11:08): lucaa: re 2/ I don't get it  \nmflorea - (11:08): vmassol: https://developer.mozilla.org/En/DOM/Element.onpaste \"There is currently no DOM-only way to obtain the text being pasted; you'll have to use an \u00a0nsIClipboard \u00a0to get that information. \"  \nvmassol - (11:08): mflorea: there's no js library or GWT stuff to help us to access the clipboard?  \nvmassol - (11:09): (uniformly across browsers that is)  \nlucaa - (11:09): I have an EntityReference of type object property, with all parents filled in. Say it came from wiki:Space.Page^className#property. Then I do docRef = ref.extractReference(DOCUMENT) and serializer.serialize(docRef). Instead of getting the document reference (wiki:Space.Page) serialization, I get the wiki:Space.Page^className#property. Is that normal?  \nmflorea - (11:10): I don't think there is, because of the FF limitation  \nmflorea - (11:10): let me search though  \nvmassol - (11:10): lucaa: no it's not normal  \nlucaa - (11:11): vmassol: I found this in the serializer:  \nlucaa - (11:11): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0while (currentReference != null) {  \nlucaa - (11:11): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0serializeEntityReference(currentReference, representation);  \nlucaa - (11:11): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0currentReference = currentReference.getChild() \u00a0  \nlucaa - (11:11): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}  \nlucaa - (11:12): I don't know what it's doiing, but I do see a getChild()  \nvmassol - (11:12): right it's a bug, it should stop at the passed type  \nvmassol - (11:13): can you fix it? (with a test)  \nvmassol - (11:13): (if not I'll do it later on)  \nlucaa - (11:13): I'll try  \nvmassol - (11:13): ok  \nvmassol - (11:13): !shutdown  \nvmassol - (11:15): brb  \nvmassol left at 11:15 (Client Quit  \nvmassol joined #xwiki at 11:17  \nmflorea left at 11:18 (\"Leaving.\"  \nmflorea1 joined #xwiki at 11:18  \nmflorea1 - (11:20): vmassol: re clipboard: http://groups.google.com/group/google-web-toolkit/msg/971d63b2765038ec and http://groups.google.com/group/google-web-toolkit/msg/3d26b12092ea3048  \nvmassol - (11:22): ok  \nvmassol - (11:22): I like the second link :)  \nvmassol - (11:22): that's too bad... wild idea: could we recognize a paste by how fast characters are entered?   \nvmassol - (11:23): is that what you were saying?  \nvmassol - (11:23): that we do it after they have been pasted?  \nlucaa - (11:24): 1/ re links in links cleaned by the filter: it seems I don't get links in links at the filter cleaner level. Something is happening in the mean time with that content so I endup only getting a stopwikilink comment, for some reason (when I do a test for [[http://www.xwiki.org>>http://www.xwiki.org]])  \nmflorea1 - (11:25): there is a paste event, so I can detect when some text was pasted but I access the DOM tree after the content was pasted and the browser usually adjusted the tree to make it HTML \u00a0valid. So if you paste invalid html the browser will change the DOM tree. This can have unexpected side effects  \nvmassol - (11:25): mflorea1: but if there's content pasted, can't you access the content a string and not a DOM?  \nvmassol - (11:25): will you know where it's been pasted in the string?  \nlucaa - (11:25): mflorea1: I think I'm missing things, but when I go to: http://localhost:8080/xwiki/bin/edit/Sandbox/SimpleTest?xpage=wysiwyginput&key=G0uM&render=true I get all the content in, when I open it in the wysiwyg for edt, I cannot see the link (and I have only the comment)  \nvmassol - (11:26): ah we cannot tell the browser no to render it....  \nvmassol - (11:26): but if the paste event is before the paste  \nvmassol - (11:26): then couldn't we do some magic to put the paste in some location that wouldn't be displayed?  \nmflorea1 - (11:26): vmassol: the browser inserts the content based on the type of element. if you use a plain text are it will paste plain text  \nmflorea1 - (11:27): afaik the paste event is after the paste  \nvmassol - (11:27): hmm too bad  \nvmassol - (11:27): well  \nvmassol - (11:27): at least it's better than what happens now  \nvmassol - (11:28): (even if not perfect)  \nvmassol - (11:28): CalebJamesDeLisl: any idea about the XE start pb I'm having  \nvmassol - (11:28): ?  \nvmassol - (11:29): can you reproduce it?  \nCalebJamesDeLisl - (11:29): Just a second and I will commit the changes and install the new build.  \nvmassol - (11:29): ok  \nmflorea1 - (11:30): https://developer.mozilla.org/En/DOM/Element.onpaste they say \"This event is sent when the user attempts to paste text. \" which is not explicit. I'd have to test but I think it is sent after the event. The problem with trying to clean the DOM after the paste is that XHTML annotations (comments) can be moved inside the DOM tree and thus link, macros, etc, can be messed up  \nvmassol - (11:31): yes I agree we'd need to find a better solution. This is one is not worse than what we currently do but probably not good enough  \nvmassol - (11:31): s/This is one/This one/  \nmflorea1 - (11:33): yes. other editors are catching specific shortcut keys like Ctrl+Ins, or Ctrl+P but that is not fixed since a user can paste content by other means  \nmflorea1 - (11:33): or even use a different shortcut  \nmflorea1 - (11:34): lucaa: yes, I think the browser is trying to make the DOM valid and the result is what you see in WYSIWYG  \nmflorea1 - (11:35): the input is invalid XHTML 1.0 and the browser adjust it to make it valid. It probably removes some links.  \nlucaa - (11:35): mflorea1: yes, sure. My curiosity was about the fact that when I display the content of the wysiwyg frame in a different tab I see it fine. When I display it in the wysiwyg it's missing stuff  \nlucaa - (11:36): mflorea1: I would have expected it to be the same (cleaned up or not)  \nmflorea1 - (11:37): one is in desing mode and the other isn't  \nlucaa - (11:37): ah, right  \nlucaa - (11:37): maybe that's why  \nmflorea1 - (11:39): Probably the editor is also responsible. But since it has to deal with a \"strange\" DOM the result is unexpected  \nlucaa - (11:39): yes, I agree we shouldn't expect much, I was only puzzled about the difference...  \nmflorea1 - (11:40): some of the metadata might be lost and this can cause the editor to misbehave  \nmflorea1 - (11:40): lost while the browser adjusts the DOM  \nmflorea1 - (11:40): or moved around  \ntmortagne joined #xwiki at 11:40  \nlucaa - (11:41): yes, it could be a combination of the 2: browser adjustment and editor  \nmflorea1 - (11:41): for instance the link plugin expects the link metadata to be in a specific place. same with the macro plugin  \nmflorea1 - (11:42): what you can do is disable all the plugins and features and see how the invalid XHTML looks without the editor touching it  \nlucaa - (11:42): well, the link plugin doesn't change the content if it doesn't find it where it should be (extract the metadata), iirc. it just assumes that that content is not of its business  \nCalebJamesDeLisl - (11:46): vmassol: I just installed the platform from this morning (forgot to svn up XE though) It works fine, next I will wipe the db and try again.  \nCalebJamesDeLisl - (11:49): Just tested with fresh db, works. Next I will up XE and see if it still works (BTW: jetty-postgres version)  \nplunden joined #xwiki at 11:57  \ntmortagne - (11:57): CalebJamesDeLisl: in your last commit you use CaptchaVerifierNotFoundException in VelocityCaptchaService but your don't import it it seems (and you still use don't use generic in #listCaptchaNames), maybe you forgot to commit something ?  \nCalebJamesDeLisl - (11:57): Probably, let me check...  \ntmortagne - (11:58): also I can't find CaptchaConfiguration but several class are using it  \nlucaa - (12:09): vmassol: can we resolve multispace references right now? or it  \nlucaa - (12:09): it's just the constructor of DocumentReference that we can use to create such?  \nlucaa - (12:09): (I know I can search the code, but it's easier to ask)  \nvmassol - (12:10): lucaa: no we cannot  \nvmassol - (12:10): it's only Refrences that support them right now  \nlucaa - (12:10): kthnx  \nvmassol - (12:10): but not resolvers nor serializers  \nlucaa - (12:11): why would serializer have a pb with that?  \nlucaa - (12:11): because of separators escape?  \nlucaa - (12:13): wait, I see  \nbbc581 joined #xwiki at 12:13  \nlucaa - (12:13): how should a multi space look like, actually? do we know? it should be dot separated or : separated?  \nlucaa - (12:14): anyway, it doesn't matter, I'll just drop this part ftm  \nlucaa - (12:16): however, I was trying to fix the serializer and actually I don't like the idea of testing by type to know where to stop serializing, I would prefer by reference or equality (currentRef != reference or currentRef.equals(reference)) since nothing forbids to have the same type of reference multiple times in the hierarchy, that's how I got to multispace references  \nCalebJamesDeLisl - (12:19): I had forgotten an svn add and an svn rm, 26346 and 26347 will not build. Just fixed it.  \nvmassol - (12:21): lucaa: dot separated (although we haven't agreed on it yet)  \nlucaa - (12:22): anyway, I just wanted to write some tests for that case in order to specify that in case of multiple references of the same type on the hierarchy the serialization shouldn't stop at the first one, but I'll just skip them ftm  \nvmassol - (12:30): starting lescastcodeurs recording, bb in 2 hours  \nlucaa - (12:57): vmassol: commited XWIKI-4791, waiting for your green light to close the issue  \nmflorea1 - (13:12): lucaa: re link removal, it's the LinkMetaDataExtractor+EmptyLinkFilter that does it. The browser fixes the nested anchor issue by inserting the inner anchor after the outer. Thus the outer anchor remains empty. The LinkMetaDataExtractor detects the metadata as belonging to the first (empty) anchor and the second non-empty anchor is considered metadata. So after the LinkMetaDataExtractor passed the DOM only the empty anchor remains, which is then removed by  \nlucaa - (13:14): but still there are unpaired comments...  \nlucaa - (13:14): which is why save fails  \nmflorea1 - (13:15): yes, I was explaining why the links are removed  \nmflorea1 - (13:16): a stoplink comment remains in the DOM after the links are deleted and thus the save fails  \nbbc581 left at 13:17 (Read error: 110 (Connection timed out)  \nlucaa - (13:17): and the stop link remains because the comments are nested, basically?  \nlucaa - (13:17): start start stop stop   \nlucaa - (13:17): so the first start is paired with the first stop?  \nmflorea1 - (13:21): exactly  \nmflorea1 - (13:35): guys do you know how can I find out which of my pom dependencies brings a specific transitive dependency? I'm trying to find how xalan-2.5.1.jar ends up in the classpath.  \nsdumitriu - (13:36): mvn dependency:tree  \nvmassol - (13:37): mflorea1: or using m2eclipse or idea or netbeans  \nvmassol - (13:37): note that our war packaging breaks the dependency tree though  \nvmassol - (13:37): (AFAIR)  \nmflorea1 - (13:38): I have m2eclipse but I don't see how can I find the information I need  \nvmassol - (13:38): double clikc on a \u00a0pom file  \nvmassol - (13:38): then select the right tab  \nvmassol - (13:38): in the pom file view   \nmflorea1 - (13:39): you mean \"Desing\"?  \nvmassol - (13:39): (I don't have it running right now so I don't recall the name of the tab)  \nvmassol - (13:39): when you edit a pom.xml file  \nvmassol - (13:39): a special viewer is called  \nvmassol - (13:39): one tab is source  \nvmassol - (13:39): showing you the source of the pom file  \nvmassol - (13:39): but there are other tabs  \nvmassol - (13:39): one of them shows the deps graphically  \nmflorea1 - (13:40): ok, I don't have it, I think I didn't installed it  \nmflorea1 - (13:40): but mvn dependency:tree works fine  \nmflorea1 - (13:41): thanks all  \nvmassol - (13:41): http://www.sonatype.com/books/m2eclipse-book/reference/eclipse-sect-analyze-depend.html  \nvmassol - (13:41): the tab is \"Dependency graph\"  \nmflorea1 - (13:42): thanks  \nCalebJamesDeLisl - (14:03): vmassol: Did you get your installation working?  \nvmassol - (14:03): was recording a podcast  \nvmassol - (14:03): will try again now  \nvmassol - (14:03): rebuilding first  \nCalebJamesDeLisl - (14:04): I built 26348 (platform and XE) and it's working fine.  \nvmassol - (14:04): ok  \nvmassol - (14:05): it's possible hudson hadn't run for some time (since thomas had introduced an error I think over the week end) and thus I got a downloaded version from maven that didn't work  \nvmassol - (14:05): mflorea1: we need to find a way to speed up or not rebuild the web gwt module... takes 10 mn now here  \nvmassol - (14:05): (and whole machine is stuck during that time)  \nmflorea1 - (14:06): first of all, why do you build it?  \nvmassol - (14:06): how do I not build it?  \nmflorea1 - (14:06): maven should take it from hudson  \nvmassol - (14:06): by building each project indvidually  \nvmassol - (14:06): ?  \nmflorea1 - (14:07): there's no reason to build the wysiwyg module if you didn't change it  \nvmassol - (14:07): there's one reason  \nvmassol - (14:07): and that's why I build it  \nmflorea1 - (14:07): and that is? :)  \nvmassol - (14:08): to be able to not build each module individually  \nvmassol - (14:08): imagine I have a change in core, and in one application  \nvmassol - (14:08): (in addition I often make changes in core which impact the gwt build)  \nmflorea1 - (14:09): then I would build platform/core and platform/web/standard  \nvmassol - (14:09): and you'd miss the changes I did in applications  \nvmassol - (14:09): :)  \nvmassol - (14:09): so yes I guess I could do a svn status  \nvmassol - (14:09): then see what modules are modified  \nvmassol - (14:09): then compute in my head the deps required  \nvmassol - (14:09): f  \nvmassol - (14:09): for manual building  \nvmassol - (14:10): there's a small risk but it wins me several minutes  \nvmassol - (14:10): I guess I'm too worried in general  \nvmassol - (14:10): I'd   \nmflorea1 - (14:10): or add -Phosted  \nvmassol - (14:10): ahah  \nvmassol - (14:10): is that a profile for  \nvmassol - (14:10): \u00a0not building g  \nvmassol - (14:10): wt?  \nmflorea1 - (14:10): and the GWT will generate only the js for FF  \nmflorea1 - (14:10): it takes 50seconds  \nvmassol - (14:10): I also need to try the reactor plugin  \nvmassol - (14:11): mflorea1: will it be the exact same thing as in runtime?  \nvmassol - (14:11): (provided I use FF)  \nvmassol - (14:12): mflorea1: does gwt 2.0 improves build time a lot?  \nmflorea1 - (14:12): yes, \"hosted\" is not that a good name for the profile (I'm going to change it soon). In the normal build GWT generates JS files for each browser x each language. With -Phosted it generates only FF+en.  \nmflorea1 - (14:13): I'm trying it right, should be able to upgrade today or tomorrow. GWT 2.0 comes with a draft compile that is faster but is only for development mode  \nvmassol - (14:14): mflorea1: shouldn't we wait for XE 2.3M1?  \nvmassol - (14:15): (since today is supposed to be the 2.2M2 release)  \nmflorea1 - (14:16): no, they will probably release new versions by then. I think it's ok to upgrade before 2.2M2 provided the selenium tests pass  \nvmassol - (14:16): sounds like a big risk to me  \nvmassol - (14:17): why would we need it for XE 2.2?  \nvmassol - (14:17): (ie what does it bring for 2.2 for users)  \nvmassol - (14:18): lucaa: build fails for me in xwiki-core due to xwiki-model changes  \nvmassol - (14:18): (you haven't rebuilt it?)  \nvmassol - (14:19): (which would validate my paranoia of rebuilding everything all the time :))  \ntmortagne - (14:19): hudson fail too  \nmflorea1 - (14:20): well, the upgrade won't be visible to the end users. It will allow me to run some of the unit tests on hudson. Also the compiler has some options that can be used to reduce the code size. I don't see the danger, If we discover something wrong we can fix it in rc1  \nvmassol - (14:20): mflorea1: right now I'm -1 but if others think it's a good idea I'll move it to -0  \nsdumitriu - (14:21): Speaking of the release, could it be postponed a few days?  \nvmassol - (14:21): sdumitriu: what do you want to sneak in?  \nvmassol - (14:21): the color theme?  \nsdumitriu - (14:22): Yep, plus the panelless edit  \nvmassol - (14:22): sdumitriu: just note that we have a hard commitment for beginning of february for the release so we won't be able to change much the final date.  \nsdumitriu - (14:22): I need a few free hours to finalize it  \nsdumitriu - (14:22): It's almost done  \nvmassol - (14:22): sdumitriu: I really don't liek the paneleless edit  \nvmassol - (14:22): I've discussed it with JV on phone  \nsdumitriu - (14:22): Well, you're alone  \nvmassol - (14:22): it's a big regression for me  \nsdumitriu - (14:23): Why?  \nsdumitriu - (14:23): Hm, wai  \nsdumitriu - (14:23): y  \nsdumitriu - (14:23): wait  \nsdumitriu - (14:23): I really have to go  \nvmassol - (14:23): it's about clluttering the visual and not being scalable   \nsdumitriu - (14:23): I'll send a proposal mail when I have some time  \nvmassol - (14:23): ok  \nvmassol - (14:24): but we cannot delay by more than 2 days IMO  \nvmassol - (14:24): otherwise we have a risk for the finale  \nvmassol - (14:24): (it's already quite short)  \nvmassol - (14:25): lucaa: let me know when it's fixed. I need to rebuild to test stuff  \ntmortagne - (14:34): is xwiki-application-panels 1.20 branch really used ? it's built in hudson but it seems useless  \ntmortagne - (14:34): same for xwiki-plugin-invitationmanager 1.0 branch  \ntmortagne - (14:35): and xwiki-plugin-spacemanager 1.1 branch (I guess theses too are for some branch of workspaces but since we don't plan to maintain workspaces anytime soon...)  \ntmortagne - (14:36): i'm disabling them for now (especially since all workspaces jobs are disabled)  \nsdumitriu left at 14:41 (Read error: 110 (Connection timed out)  \nvmassol - (14:44): ok, no idea what they are  \ntmortagne - (14:44): lucaa: are you working on fixing core build ?  \nvmassol - (14:47): tmortagne: you want to fix it? I'll have a look otherwise  \ntmortagne - (14:52): vmassol: i'm currently working on test builds failing on hudson but if nobody is working on it i can look (would be better that lucaa look at it since she made the modification)  \ntmortagne - (14:54): a dependency of xem-test seems to use org.xwiki.platform:xwiki:pom:28-SNAPSHOT but i can't find which one  \nkibahop left #xwiki at 14:57  \nvmassol - (15:02): tmortagne: I wonder if I an extracted reference should break it's child link. Probably not but the name \"extract\" could imply it, wdyt?  \ntmortagne - (15:03): WDYM by \"break it's child link\" ?  \nvmassol - (15:06): right now when you extractReference()  \nvmassol - (15:06): you get a ref for which getChild() will return the child  \nvmassol - (15:06): for ex if you have an object ref and you extract the document  \nvmassol - (15:07): then on the extracted ref if you ask getchild() you'll get the object ref  \nvmassol - (15:07): we could keep it like this (which I think is \"correct\") or decide to set the child to null since we've asked for an extraction  \ntmortagne - (15:07): hmm, at first that seems wrong  \nvmassol - (15:07): I'm not sure  \nlucaa - (15:07): tmortagne, vmassol : sorry for breaking the build, i'll look now  \nvmassol - (15:08): hence why I ask  \ntmortagne - (15:08): lucaa: ok thanks  \nvmassol - (15:08): lucaa: I'm wondering if your change is correct or not, checking with tmortagne   \nvmassol - (15:09): tmortagne: what seems wrong at first?  \nlucaa - (15:09): tmortagne: vmassol yes, sorry my bad  \nlucaa - (15:09): I changed protected function  \nsdumitriu joined #xwiki at 15:09  \nlucaa - (15:09): and didn't check all implementing classes  \ntmortagne - (15:10): vmassol: what it does now: it should return what is asked without the children  \nvmassol - (15:10): yes I'm more and more tempted by this  \ntmortagne - (15:10): when you ask for a document reference it should no contains some object reference  \nvmassol - (15:10): lucaa: wdyt?  \nvmassol - (15:10): lucaa: if you agree you'll need to revert your change and fix the extract instead :)  \ntmortagne - (15:11): but \"set the child to null since we've asked for an extraction\" is wrong  \nlucaa - (15:11): vmassol: detail the semantic of children  \ntmortagne - (15:11): you can't modify the reference you have to give a new one  \nvmassol - (15:11): tmortagne: sure  \nvmassol - (15:11): would need a clone  \nlucaa - (15:11): however, even if we consider that we extract and 'kill' children, the serialization function is still wrong  \ntmortagne - (15:11): now it's not very good for perfs  \nvmassol - (15:12): lucaa: why?  \nlucaa - (15:12): I mean, if I do  \nlucaa - (15:12): serializer.serialize(ref.getParent)  \nlucaa - (15:12): I still want it serialized only ot the parent  \nlucaa - (15:12): not to ref  \nvmassol - (15:12): hmmm  \nvmassol - (15:13): why?  \nlucaa - (15:13): why what? why I want it only to the parent?  \nvmassol - (15:13): ah yes maybe  \nvmassol - (15:13): yes I agree  \nlucaa - (15:13): because that's what I passed to the serialized  \nlucaa - (15:13): r  \nlucaa - (15:13): that's just an impl detail that I go from root on children, it \\_must\\_ stop at reference no matter what  \nvmassol - (15:14): ok, let's leave it as you've done for now then wdyt tmortagne ?  \nlucaa - (15:14): as for 'killing' children... I don't know  \ntmortagne - (15:14): sure serializer.serialize(ref.getParent) has to serialize what is given  \nlucaa - (15:14): extract might seem like you want no children  \nlucaa - (15:14): I mean the name  \ntmortagne - (15:14): but it has nothing to do with extract method  \nlucaa - (15:15): tmortagne: no, it has nothing to do  \nvmassol - (15:15): lucaa: your test isn't valid though I think: testSerializeExtractedReference  \nvmassol - (15:15): it shouldn't be related to extract  \nvmassol - (15:15): you should just construct a ref  \nvmassol - (15:15): and do a getParent  \nlucaa - (15:15): vmassol: indeed. That's how I discovered it though so I was biased in testing it  \nlucaa - (15:15): yes  \nnuvolari - (15:16): hmm, question, is there a known issue when xwiki is being proxied?  \nsdumitriu - (15:17): nuvolari: Several  \nnuvolari - (15:17): ah ok.  \nsdumitriu - (15:17): But it generally can be solved by proper configuration  \nsdumitriu - (15:17): What's your problem?  \nnuvolari - (15:18): sdumitriu: well, what happens is that when I do not have a session and I need to log in,  \nsdumitriu - (15:18): CalebJamesDeLisl: XAADMINISTRATION-78 should not be a subtask, but a New Feature in Core  \nsdumitriu - (15:18): I'll move it  \nnuvolari - (15:19): then when I enter my details it gets redirected to localhost:8080/xwikihttp://rest-of-domain-with-xwiki-sessionparameter  \nnuvolari - (15:19): so when I remove the localhost:8080 it works fine  \nnuvolari - (15:19): but...  \nnuvolari - (15:20): (that is using Chromium) When I use Firefox I can't even get the url with the localhost part in it.  \nCalebJamesDeLisl - (15:20): sdumitriu: A new project name? XAREGISTER? :)  \nsdumitriu - (15:20): CalebJamesDeLisl: What? Why?  \nCalebJamesDeLisl - (15:21): never mind, mistead.  \nCalebJamesDeLisl - (15:21): misread.  \nsdumitriu - (15:21): \"New Feature\" = issue type  \nlucaa - (15:21): argh, I have some issues fixing the CompactSerializer  \nlucaa - (15:21): vmassol: help?  \nvmassol - (15:22): yes?  \nCalebJamesDeLisl - (15:23): sdumitriu: in reference to XAADMINISTRATION-77 how about Registration for a title since that's its name?  \nsdumitriu - (15:24): Q: Where does this title appear? Is it the document title?  \nlucaa - (15:24): trying to rewrite the   \nlucaa - (15:24): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (getContext() == null || getContext().getDoc() == null || currentReference.getChild() == null || representation.length() > 0)  \nlucaa - (15:24): to take into account the new \"isLast\" parameter  \nlucaa - (15:24): I think it's just a II isLast  \nvmassol - (15:25): lucaa: yes replacing \u0002currentReference.getChild() == null with isLastReference() should be fine\u000f  \nlucaa - (15:25): isLastReference should be a function?  \nsdumitriu - (15:26): CalebJamesDeLisl: Where does this title appear? Is it the document title?  \nlucaa - (15:26): it's just an extra param  \nvmassol - (15:26): it's the param you pass  \nvmassol - (15:26): I added extra () :)  \nlucaa - (15:26): :)  \nCalebJamesDeLisl - (15:26): sdumitriu: just a second, importing XE.....  \nplunden left #xwiki at 15:28  \nCalebJamesDeLisl - (15:29): sdumitriu: It's not shown, actually no title is shown, I will give the same heading as the macro.  \nsdumitriu - (15:30): So it only appears in the window title and in breadcrumbs?  \nCalebJamesDeLisl - (15:32): when you click on the register button /register/XWiki/Register there are no breadcrumbs and the title is XWiki.Register  \nCalebJamesDeLisl - (15:33): But registerinline.vm still renders XWiki.Registration even though the user is at /register/XWiki/Register  \nCalebJamesDeLisl - (15:33): Mistake?  \nsdumitriu - (15:34): No  \nnpm - (15:38): why is it that when i use xwiki search box to search for \"BlogPostSheet\", the \u00a0results don't include \"Blog.BlogPostSheet\" (same for other builtins in Blog/). Is there some \"blacklist\" of builtin files that prevents search from returning them?  \nvmassol - (15:39): npm: that's because it's a hidden doc  \nvmassol - (15:40): sergiu used hidden docs in the blog space. I think that's the only place where we've used them (not sure)  \nnpm - (15:40): is that \u00a0a right on the doc? (didn't notice it in rights mgr)  \nvmassol - (15:40): there's no ui for hidden docs AFAIK, it's set in the XML or using apis  \nvmassol - (15:41): no there's no right for that  \nnpm - (15:41): oh. magic explained!  \nnpm - (15:41): :-)  \nvmassol - (15:41): it's a bit badly implemented right now  \nvmassol - (15:41): basically this is because we currently lack nested spaces   \nnpm - (15:41): well actually i'll be looking up how to hide things for my own app actually  \nnpm - (15:42): sounds like a useful trick...  \nvmassol - (15:42): npm: just note that if you use this then no query will return the hidden docs  \nvmassol - (15:43): even if you have programming rights  \nvmassol - (15:43): (or admin rights)  \nnpm - (15:43): i did, which is why i was wondering what was going on w/ the docs i had been working w/ and referring to in code all along  \nnpm - (15:44): or is it uncopyable  \nvmassol - (15:44): good question, I guess the flag is copied  \nvmassol - (15:45): let me check  \nvmassol - (15:45): yep it's copied  \nvmassol - (15:47): got to go, bb in 15 mn  \nnpm - (15:47): maybe i should explain how i got here, incase i'm doing something stupid. i'm using the existing 2.1 Blog code to do annotations and wikicaptions on streaming media. i needed to modify BLOGPOSTTEMPLATE and BLOGPOSTSHEET for my new use.... and when trying to find them, they weren't there...  \nvmassol - (16:14): lucaa: any update?  \nlucaa - (16:14): building and building and building again and again and again  \nlucaa - (16:14): almost there  \ntmortagne - (16:26): current release plan: http://dev.xwiki.org/xwiki/bin/view/Community/ReleasePlans  \ntmortagne - (16:26): say it if there is anything missing  \nCalebJamesDeLisl - (16:33): Is there a way to detect when a document is loaded in WYSIWYG? The XSS blocker in the registration app is creating a redirect loop and besides there is no way to edit this in WYSIWYG.  \nlucaa - (16:38): vmassol: finally tests passing and all. commiting  \nvmassol - (16:38): CalebJamesDeLisl: yes this is a known issue  \nvmassol - (16:39): http://jira.xwiki.org/jira/browse/XWIKI-4211  \nCalebJamesDeLisl - (16:39): Should I just let it go? I was going to try to detect WYSIWYG and post a message that it wasn't supported.  \nvmassol - (16:40): CalebJamesDeLisl: you could discuss about fixing this issue with mflorea1   \nCalebJamesDeLisl - (16:41): Even with it fixed, the html is dynamically generated so WYSIWYG is useless with the registration app.  \nvmassol - (16:44): mflorea1: any hint for Caleb?  \nmflorea1 - (16:44): let me read  \nCalebJamesDeLisl - (16:45): Just need a way to detect WYSIWYG.  \nmflorea1 - (16:46): CalebJamesDeLisl: checking for edit action is the only way I think  \nCalebJamesDeLisl - (16:47): Oh of course because wiki edit won't execute the code. Thanks.  \nmflorea1 - (16:48): np :)  \nmflorea1 - (16:48): there is also the inline action, but I don't think it applies in your case  \nesdaniel joined #xwiki at 16:55  \nesdaniel left at 16:56 (Client Quit  \ntmortagne - (17:05): mflorea1: typing speed improvement on WYSIWYG is really great (first time i really test that) ! with general js speed issues on linux that makes it's a revolution ;)  \nmflorea1 - (17:06): yes, and it's more impressive on IE  \ntmortagne - (17:06): cool  \nsdumitriu - (17:09): Btw, I don't like the title in the release notes  \nsdumitriu - (17:09): \"Improved typing speed in WYSIWYG\"  \nsdumitriu - (17:09): \"typing speed\" is a user feature  \nsdumitriu - (17:09): You're not improving MY typing speed  \nmflorea1 - (17:09): but still, there are around 6000 method calls triggered by a key stroke (which take around 50 milliseconds). not immediately, but soon after. Most of the calls are GWT cast checking. GWT 2.0 compiler comes with a flat to disable this and thus to reduce the number of method calls  \nmflorea1 - (17:10): sdumitriu: yes, it's not really typing speed, but responsiveness.  \nsdumitriu - (17:10): How about \"Improved the speed and responsiveness of the WYSIWYG editor\"?  \nmflorea1 - (17:10): +1  \ntmortagne - (17:11): +1  \ntmortagne - (17:11): fixing it  \nsdumitriu - (17:11): Are both speed and responsiveness needed?  \ntmortagne - (17:11): maybe speed is enough, depends how impressive we want to make the title ;)  \nmflorea1 - (17:11): :)  \nsdumitriu - (17:12): \"Improved the speed, responsiveness, and overall coolness of the WYSIWYG editor\"  \nsdumitriu - (17:12): \"Improved the speed, responsiveness, and overall coolness of the fantastic WYSIWYG editor\"  \ntmortagne - (17:12): :)  \nsdumitriu - (17:13): By using our WYSIWYG editor, we guarantee an increase in your sex-appeal and self esteem  \nmflorea1 - (17:13): :D  \nsdumitriu - (17:14): Oh no, I hope you didn't put that in the release notes  \ntmortagne - (17:14): :)  \nmflorea1 - (17:14): tmortagne: when is the 2.2M2 release planned. I need to update the WYSIWYG translations and also to add the macro descriptor translations in the core  \ntmortagne - (17:15): mflorea1: tody but too late for today so tomorrow morning if everyone is ready i guess  \ntmortagne - (17:15): s/tody/today/  \nmflorea1 - (17:15): ok, I'll update the translations a bit later  \ntmortagne - (17:15): mflorea1: i will handle translations (that'smy job)  \ntmortagne - (17:16): just tell me again how we do it for WYSIWYG to be sure  \ntmortagne - (17:17): (but i still need you add translations keys, maybe you already did that)  \nmflorea1 - (17:17): first, I'm not sure the keys are updates on l10n. The last time JV updated the fr language he committed some deleted keys. Is this normal?  \ntmortagne - (17:18): mflorea1: yes dead keys are not automatically removed  \ntmortagne - (17:18): he just did not cleaned it  \nmflorea1 - (17:18): ok, so it's a known issue  \ntmortagne - (17:19): normally transltaions are updated now on l10n i fixed the script checked some time ago  \nmflorea1 - (17:19): ok  \ntmortagne - (17:20): CalebJamesDeLisl: do you have some \"strategic\" screenshots for the new registration page to put it in the release note ?  \nCalebJamesDeLisl - (17:21): Just a minute...  \nmflorea1 - (17:25): tmortagne: so for the wysiwyg you do as with any other module (commit the changed resource files). The only difference is that if there is a new language you have to add it to http://svn.xwiki.org/svnroot/xwiki/platform/web/trunk/wysiwyg/src/main/resources/com/xpn/xwiki/wysiwyg/Wysiwyg.gwt.xml and http://svn.xwiki.org/svnroot/xwiki/platform/web/trunk/xwiki-gwt-user/src/main/resources/org/xwiki/gwt/user/User.gwt.xml There is <extend-property name=\"locale\" v  \nmflorea1 - (17:26): s/all the supported languages/all the supported languages without en, which is the default  \ntmortagne - (17:26): mflorea1: ok thanks, i will add this doc in l10n WYSIWYG page  \nvmassol - (17:30): sdumitriu, tmortagne, everyone: we need to decide the new release date. I propose that we release Wednesday afternoon. Everything should be committed and tested before end of Wednesday morning, wdyt?  \nmflorea1 - (17:30): ok, thanks. looks like you have to add sv and sk langauges  \nmflorea1 - (17:31): vmassol: fine with me  \nsdumitriu - (17:33): +1  \nvmassol - (17:33): ok sending mail  \nmflorea1 - (17:34): tmortagne: re macro descriptors. I'll commit the en \\_and\\_ fr translations in the core (I don't know if you can add multiple translations at once in l10n).  \nlucaa - (17:35): all: if we want http://jira.xwiki.org/jira/browse/XWIKI-4775 in 2.2M2 we should decide on some separators, I'll try to remember to close the object name vote tonight  \ntmortagne - (17:36): mflorea1: i'm not sure to understand, you need to add en keys/value to the default language file but why fr ?  \nmflorea1 - (17:37): tmortagne: because I have the fr translations from guillaume in a file. adding them one by one in l10n is a pain  \ntmortagne - (17:37): mflorea1: ok so yes commit them and i will load fr from svn in \u00a0l10n  \nvmassol - (17:38): lucaa: we don't absolutely need it in the core except for your nspecific need (annotations), you decide if it's required  \nmflorea1 - (17:38): ok, thanks  \ntmortagne - (17:38): mflorea1: you talked about new languages, is there a jira issue or something ?  \nlucaa - (17:39): well, if we don't put that in the core, until 2.2 final, then annotations will not work out of the box on 2.2  \nmflorea1 - (17:39): no  \ntmortagne - (17:39): so where are they ?  \nlucaa - (17:39): at least the EntityType new constants  \nlucaa - (17:39): (assuming that for all the rest I can provide the needed code with the annotations... although I need to check that I can really do it)  \ntmortagne - (17:40): mflorea1: or you mean just add empty language on l10n for people to fill them ?  \nmflorea1 - (17:40): I just looked on l10n. http://l10n.xwiki.org/xwiki/bin/view/Wysiwyg/Stringsproperties They are note reviewed though  \nmflorea1 - (17:41): sv has no empty translations and sk has only 1  \ntmortagne - (17:42): ho ok i did not looked at l10n  \ntmortagne - (17:42): warn me when you committed en and fr  \nmflorea1 - (17:43): they are not reviewed but since none of us knows sv nor sk I think we can trust them  \nmflorea1 - (17:43): ok  \nEnygma` left at 17:43 (Read error: 110 (Connection timed out)  \ntmortagne - (17:44): mflorea1: yes anyway even not reviewed it's better than nothing  \nmflorea1 - (17:44): exactly  \ntmortagne - (17:47): mflorea1: hmm wait macro translation are core not WYSIWYG translations, right ?  \nmflorea1 - (17:48): right, they go in core  \ntmortagne - (17:48): you will need to merge it  \nmflorea1 - (17:48): yes  \ntmortagne - (17:48): with any modification made on l10n  \nmflorea1 - (17:48): I'll just add the keys to ApplicationResources.properties, right?  \nmflorea1 - (17:49): the key=value pairs I mean  \ntmortagne - (17:49): for keys it's ok, it's fr that need to be merged  \nmflorea1 - (17:49): why?  \ntmortagne - (17:49): probleme is that what is on svn and what is on l10n is maybe not synchronised  \ntmortagne - (17:49): because main is l10n  \nmflorea1 - (17:49): ah  \ntmortagne - (17:49): not svn  \nmflorea1 - (17:49): right  \nmflorea1 - (17:50): so I have to take the latest fr version from l10n, add my key=value pairs and them commit  \ntmortagne - (17:50): so you need to export fr from l10n, put your keys in it committ and then import fr from svn in l10n  \nCalebJamesDeLisl - (17:50): tmortagne: I sent the pics and some notes on the registration app.  \ntmortagne - (17:51): CalebJamesDeLisl: ok thanks, you could have done it directly on the release note ;)  \nCalebJamesDeLisl - (17:52): Your right, but I'm bad at making things look good.  \ntmortagne - (17:53): CalebJamesDeLisl: i'm not very good either ;)  \ntmortagne - (17:56): CalebJamesDeLisl: one comment on registration page: when values are not valid you should disable \"Register\" button i think  \nCalebJamesDeLisl - (17:57): Yes. LiveValidation automatically does that, it's been a pain to debug :)  \ntmortagne - (17:57): well it doe snot work for me  \nCalebJamesDeLisl - (17:57): what browser?  \ntmortagne - (17:57): i can always click on Register  \ntmortagne - (17:57): FF 3.7  \ntmortagne - (17:58): trying with another  \nCalebJamesDeLisl - (17:58): Works with FF 3.0.1  \ntmortagne - (17:59): same issue with Opera 10.10  \ntmortagne - (17:59): the button is not even disabled when i load the page  \ntmortagne - (17:59): testing with a FF 3.5  \ntmortagne - (18:00): same with FF 3.6 (i don't have 3.5 but seems enough to say it does not seems to work anyway)  \nCalebJamesDeLisl - (18:01): This is odd. Opera 9.64 it works.  \ntmortagne - (18:01): did you committ thing to handle it very recently ?  \nCalebJamesDeLisl - (18:01): No, it's always been that way, I couldn't stop it without noscript.  \nCalebJamesDeLisl - (18:02): Are you seeing validation messages as you type?  \ntmortagne - (18:02): yes field are corerctly validated  \ntmortagne - (18:02): but button is always clickable  \ntmortagne - (18:02): (did not tryed to click)  \ntmortagne - (18:03): when i click it force validation for all fields and do nothing  \nCalebJamesDeLisl - (18:03): That's what it does for me, you mean it should be greyed out?  \ntmortagne - (18:03): yes  \ntmortagne - (18:04): if you can't register you chouls not be able to click on register  \nCalebJamesDeLisl - (18:05): Hmm, I think i'd have to edit LiveValidate, I'll take a look, maybe there is a value which changes when all fields are ok.  \ntmortagne - (18:06): why is there forbidden characters in first/last name ?  \nCalebJamesDeLisl - (18:07): XWIKI 4757  \ntmortagne - (18:07): it's just display information it should support anything, i think it's possible a name contains '  \nvmassol - (18:07): XWIKI-4757  \nvmassol - (18:07): doesn't exist :)  \nCalebJamesDeLisl - (18:08): How foolish of me.  \ntmortagne - (18:10): CalebJamesDeLisl: this issue is about UI that print things without properly taking care of escaping, forbid some things in names does not fix anything  \ntmortagne - (18:11): and in any case i dont see what ' \"\" and \\ has to do with that  \nvmassol - (18:12): tmortagne: I'm not so sure we should accept any char for a name  \ntmortagne - (18:12): why not ?  \nvmassol - (18:12): I'd agree to exclude the chars you mentioned  \ntmortagne - (18:12): i'm not speaking about user id but user first/last name  \nvmassol - (18:13): because I've never seen a name with those chars (it's probably not allowed btw by governements)  \nvmassol - (18:13): :)  \nvmassol - (18:13): I think we're safer without them too  \ntmortagne - (18:13): i doubt there is international rules for that...  \nCalebJamesDeLisl - (18:14): I agree.. \u00a0Oh you mean characters..  \nCalebJamesDeLisl - (18:14): I thought \"suppose admin writes a bad query with concatenation\" better filter more.  \nvmassol - (18:14): yes that's that the \"safer\" part   \nvmassol - (18:15): for a nickname I wouldn't say no  \ntmortagne - (18:16): i don't like this way of dealing with bad developers  \nvmassol - (18:16): something like: Vincent \"XWiki\" Massol  \ntmortagne - (18:16): it create limitation for wrong reasons  \nvmassol - (18:17): btw why do we need first and last name?  \nvmassol - (18:17): why not id and full name only?  \nCalebJamesDeLisl - (18:17): \" is troublesome when loaded into form fields as everyone likes to do.  \nvmassol - (18:18): ok we could imagine use cases for first name and last name I guess (though I can't see one right now). Like discover people with the same last name as you...   \nvmassol - (18:18): or to make greetins more friendly  \nvmassol - (18:18): \\* greetings  \nvmassol - (18:18): ok so let's forget what I said re full name  \nvmassol - (18:18): :)  \nCalebJamesDeLisl - (18:20): I'd be +1 for a single field. A lot of use cases don't involve even any need for a full name.  \nvmassol - (18:20): anyway we're not going to change that now I guess ;)  \nvmassol - (18:21): re special chars I'm almost convinced \u00a0to allow them in first.last name  \ntmortagne - (18:21): vmassol: i would prefer single full name too (especially since first/last name doe snot mean anything in some langauges i think) but it's a bug change for the general UI  \nCalebJamesDeLisl - (18:21): It's about 4 lines in the configuration so no big deal.  \nvmassol - (18:21): I think it needs a more general decision, ie through the list  \ntmortagne - (18:21): s/bug change/big change/  \nCalebJamesDeLisl - (18:22): And we'd have to delete a field from a class (the horror.)  \ntmortagne - (18:22): :)  \ntmortagne - (18:22): CalebJamesDeLisl: we would probably have to keep them for backward compatibility anyway  \nCalebJamesDeLisl - (18:23): Yes, but we need to do some work on deleting fields.  \ntmortagne - (18:23): sure  \nvmassol - (18:23): our oldest issue (or close)  \nlucaa - (18:23): team, is there any \"nice way\" of deleting an object from a document having only the object, not its parent document?  \nEnygma` joined #xwiki at 18:23  \nlucaa - (18:24): besides:  \nlucaa - (18:24): object.getDocument(context).removeObject(object)  \nCalebJamesDeLisl - (18:24): And allowing custom mapped classes to become non custom mapped (load and store every object.)  \nCalebJamesDeLisl - (18:24): And vice versa.  \nCalebJamesDeLisl - (18:24): It would be nice if comments were actually custom mapped.  \nvmassol - (18:25): yes I can see the captcha now :)  \nvmassol - (18:25): (was a bit slow to display, not sure why)  \nvmassol - (18:25): (maybe first time init)  \nvmassol - (18:25): CalebJamesDeLisl: hmmm there are still hard to read  \nvmassol - (18:25): the first 2 I got, I couldn't guess for sure  \nCalebJamesDeLisl - (18:26): Some of them are.  \nvmassol - (18:26): can we choose the type? clarity?  \nvmassol - (18:26): validation is cool  \nCalebJamesDeLisl - (18:26): They have a bunch of types, I saw a type called Hotmail, maybe Hotmail uses it.  \nvmassol - (18:27): hmm email is mandatory now?  \nCalebJamesDeLisl - (18:27): I'll try implementing some.  \nvmassol - (18:27): (it wasn't before)  \nCalebJamesDeLisl - (18:27): Nor was first/last name.  \nvmassol - (18:28): ok but that's obvious IMO  \nvmassol - (18:28): the wiki can work fine without email cannot it?  \nCalebJamesDeLisl - (18:28): I can turn any of these things off with a line of config each. Your call.  \nvmassol - (18:28): (just asking)  \ntmortagne - (18:28): yes it can  \ntmortagne - (18:28): the only thing mandatory are (should be) password and id  \nvmassol - (18:29): CalebJamesDeLisl: nothing happens if I click register and I haven't filled the captcha  \ntmortagne - (18:29): well password is not technically mandatory except that then you can't login with this user :)  \nvmassol - (18:29): (shouldn't it say it's mandatory? like the other fields)  \nCalebJamesDeLisl - (18:30): If it says mandatory then it says Ok when you fill in anything and Caty pointed out that it was misleading.  \nvmassol - (18:31): found a bug  \nCalebJamesDeLisl - (18:31): What did I do?  \nvmassol - (18:31): here: http://tinycoke.com/\\_6rGw1ILGaCKvY/screen\\_shot\\_2010-01-25\\_at\\_6.30.49\\_pm.png  \nvmassol - (18:31): how can the repeat be ok?  \nvmassol - (18:32): btw I used 6 chars, this should be enough by default BTW  \nvmassol - (18:32): s/BTW/IMO/  \nCalebJamesDeLisl - (18:32): Because it's the same password, another 2 lines to apply the length constraint to both.  \nvmassol - (18:32): I typed the same password  \nCalebJamesDeLisl - (18:33): Okay, length >= 6, Length applied to both passwords, \u00a0no more limitation of potentially bad characters, only fields mandatory are username and pass. Anything else?  \nvmassol - (18:34): CalebJamesDeLisl: if I'm an admin of a xwiki instance, how do I change these constraints?  \nvmassol - (18:34): can I just edit the page  \nvmassol - (18:34): t  \nvmassol - (18:34): rying  \nvmassol - (18:35): it's a template  \nvmassol - (18:35): but you said there's a page  \nvmassol - (18:35): let me find it  \nCalebJamesDeLisl - (18:35): \u00a0/XWiki/Registration  \nvmassol - (18:36): ok that's very cool  \nvmassol - (18:36): not very obvious to read but makes it cool to adapt to one's needs  \nCalebJamesDeLisl - (18:36): Thanks. In some ways it is, it's also huge.  \nvmassol - (18:36): could be improved  \nvmassol - (18:37): to make it more readable  \nvmassol - (18:37): by moving code stuff in other pages  \nvmassol - (18:37): and making important stuff you may want to overide stand out  \nvmassol - (18:37): \\* override  \nCalebJamesDeLisl - (18:37): I was thinking it could use objects instead of the 400 line config.  \nCalebJamesDeLisl - (18:38): But for a while I didn't know if it would be a template.  \nCalebJamesDeLisl - (18:39): Objects would be neat because there could be a visual field editor. Add a field, add a constraint etc.  \nvmassol - (18:39): CalebJamesDeLisl: so if XWiki.Registration is not there, then we get the previous form with no validation and no captcha right?  \nCalebJamesDeLisl - (18:39): Correct.  \nvmassol - (18:39): cool  \nvmassol - (18:40): note: remember to fix some doc on xwiki.org  \nvmassol - (18:40): s/fix/update/  \nCalebJamesDeLisl - (18:40): I would like to make a few small changes to the template so I can eliminate RegisterAction  \nCalebJamesDeLisl - (18:40): Yes, I can't wait to talk (brag) about my application.  \nCalebJamesDeLisl - (18:41): BTW: This can register users in view mode, RegisterAction isn't used at all.  \nvmassol - (18:41): CalebJamesDeLisl: there's still the question of on or off by default  \nCalebJamesDeLisl - (18:41): Captcha?  \nvmassol - (18:41): yes  \nCalebJamesDeLisl - (18:42): Send it to the list?  \nvmassol - (18:42): knowing that this is for enterprises and that most usages will install xwiki internally maybe off by default is best, wdyt?  \nvmassol - (18:42): yes list is a good idea  \ntmortagne - (18:42): mflorea1: did you created http://l10n.xwiki.org/xwiki/bin/view/Wysiwyg/WidgetResources ? is it normal all translation are empty ?  \nCalebJamesDeLisl - (18:43): Better be a [VOTE], anything this trivial is bound to inspire major disagreement ;)  \nKermitTheFragger left at 18:43 (\"Leaving\"  \nmflorea1 - (18:44): yes, I created. hmm, I don't know why it's empty. The fr translation has been committed by JV (I think) from l10n http://svn.xwiki.org/svnroot/xwiki/platform/web/trunk/xwiki-gwt-user/src/main/resources/org/xwiki/gwt/user/client/Strings\\_fr.properties  \ntmortagne - (18:45): ok, that's weird, the link seems right  \ntmortagne - (18:45): i'm trying to reload default keys  \nvmassol - (18:45): CalebJamesDeLisl: right trivial stuff are the hardest ;)  \nCalebJamesDeLisl - (18:47): Done. I'll comment out all of the limitations which you don't want so admins can still see them.  \nvmassol - (18:48): CalebJamesDeLisl: wiping my db now... to see if I can import  \nCalebJamesDeLisl - (18:49): It works, just some code isn't working to show how many docs were imported.  \nvmassol - (18:50): This is not a vote  \nvmassol - (18:50): it's a poll!  \nvmassol - (18:50): :)  \nvmassol - (18:50): CalebJamesDeLisl: \u00a0lots of problems indeed  \nvmassol - (18:51): ah wait  \nvmassol - (18:51): yes  \nvmassol - (18:51): create page should work  \nvmassol - (18:51): create page should be a template  \nvmassol - (18:51): not a page  \nvmassol - (18:51): sdumitriu: wdyt?  \nCalebJamesDeLisl - (18:52): Vote == consensus == -1 holds it up?  \nvmassol - (18:52): create page from office document shouldn't be there since OO isn't running  \nvmassol - (18:52): vote is yes/no in general  \nvmassol - (18:52): otherwise there can't be consensus  \nCalebJamesDeLisl - (18:52): I see.  \ntmortagne - (18:52): mflorea1: as far as i can see in http://svn.xwiki.org/svnroot/xwiki/platform/web/trunk/xwiki-gwt-user/src/main/resources/org/xwiki/gwt/user/client/Strings\\_fr.properties it does not comes from l10n (otherwise there would not be any empty line or empty translations)  \nsdumitriu - (18:53): vmassol: About \"Create is a template\"?  \nmflorea1 - (18:54): tmortagne: indee.. looks like it was committed by me  \nvmassol - (18:54): sdumitriu: Yes. I've just wiped my db and trying to use xwiki and it fails  \nvmassol - (18:54): for create page, create space  \nvmassol - (18:54): a  \nvmassol - (18:54): and create from office doc  \ntmortagne - (18:54): mflorea1: i will check and synch all  \nmflorea1 - (18:54): tmortagne: thanks!  \nsdumitriu - (18:55): +1 for create = template  \nvmassol - (18:55): sdumitriu: search too btw  \nvmassol - (18:55): it should be displayed if the search page isn't present probably  \nsdumitriu - (18:55): Search, I don't know  \nvmassol - (18:55): shouldn't  \nvmassol - (18:56): sdumitriu: it shouldn't be displayed MIO  \nvmassol - (18:56): \\* IMO  \nsdumitriu - (18:56): Search is not fundamental  \nvmassol - (18:56): yes exactly  \nvmassol - (18:56): that's why it \\*shouldn't\\* be displayed   \nsdumitriu - (18:56): A small public site instance might not need or want it  \nsdumitriu - (18:56): But yes, +1 for not displaying it  \nvmassol - (18:57): hmm I also get the default language displayed  \nvmassol - (18:57): \"default\"   \nvmassol - (18:58): hmm the import warning message should point to the download page  \nvmassol - (18:58): not to a snapshot link in maven.xwiki.org  \nvmassol - (19:00): seems like we have some work to make XE work again with no DB  \nvmassol - (19:00): s/work/\"work\"/  \nmflorea1 - (19:02): guys, is there any reason for #contenteditmenu to have z-index: 999 (colibri.css line 753)? it is rendered above the glass panel used by the wysiwyg editor.  \nvmassol - (19:02): CalebJamesDeLisl: indeed pb with the import reporting: http://tinycoke.com/\\_6rm4qKJ12k2o/screen\\_shot\\_2010-01-25\\_at\\_7.02.08\\_pm.png  \nvmassol - (19:03): tmortagne: \u00a0also got a NPE, after import  \nvmassol - (19:03): http://tinypaste.com/c4d0c  \nvmassol - (19:04): and several warnings that we should remove: http://tinypaste.com/380b5  \ntmortagne - (19:04): again null attachment... there is something wrong with attachments  \nsdumitriu - (19:04): It's not 1000 because there was something else that should have been above the menu (I think the lightbox, JumpToPage and ConfirmationBox)  \nvmassol - (19:04): tmortagne: some strange info from jbosscache too  \nsdumitriu - (19:04): It's not 0 because it has to be above the content of the page  \nvmassol - (19:04): (see previous paste)  \nmflorea1 - (19:05): sdumitriu: but why does it have a z-index. IMO only the submenu requires a z-index  \nsdumitriu - (19:05): z-index is not properly standardized in our skins  \nsdumitriu - (19:05): We're using random numbers  \nsdumitriu - (19:05): mflorea1: I don't think that it would work that way  \ntmortagne - (19:05): vmassol: yes this is a wrong log i need to fix it, it just mean that cache has been completely removed (fulshcache call generally)  \nsdumitriu - (19:05): z-index needs to be on the parent  \nmflorea1 - (19:06): let me try  \nmflorea1 - (19:08): I disabled the z-index on the #contenteditmenu, removed the hidden class from its submenu and added z-index: 999; to the submenu. It shows above my glass panel, which is fine, since as long as the contenteditmenu is below you can open the submenu  \nmflorea1 - (19:09): s/you can open/you can't open  \nsdumitriu - (19:10): K  \nsdumitriu - (19:10): So the submenu does stay above the rest of the page content?  \nmflorea1 - (19:10): yes  \nmflorea1 - (19:10): on the other hand I can change the z-index of my glass panel  \narkub left at 19:11 (Client Quit  \nmflorea1 - (19:11): I can set it to 1000. I don't know what's best  \nCalebJamesDeLisl - (19:11): I can get the captcha field to give a message if you enter nothing without saying \"ok\" when you enter anything (wrong answer), but I can't keep it from turning the box border green without hacking LiveValidation. What should I do.  \nmflorea1 - (19:16): sdumitriu: hmm, I'd have to change in multiple places. For instance when you drag a dialog box it goes below the #contenteditmenu. I think it's better to fix the skin, if it doesn't have side effects  \nsdumitriu - (19:17): CalebJamesDeLisl: IMO, there should be no validation for the captcha field  \nsdumitriu - (19:17): Nothing at all  \nsdumitriu - (19:17): That is not part of the user data  \nsdumitriu - (19:17): It's a security check  \nsdumitriu - (19:18): Validation is for user data  \nCalebJamesDeLisl - (19:18): Ok.  \nlucaa - (19:20): CalebJamesDeLisl: I didn't follow that much, but where will the captchas be used 'by default?' registering? adding comments?  \nCalebJamesDeLisl - (19:20): Right now it's only for registration, but that setting is global.  \nlucaa - (19:21): but iirc there is also a 'register' right of some sort, isn't it?  \nvmassol - (19:21): lucaa: sure  \nvmassol - (19:21): you still need to have the right to register  \nCalebJamesDeLisl - (19:22): Yes and if XWikiGuest doesn't have it then no registration.  \nlucaa - (19:22): so these captchas will be useful only in the case of XWikiGuest having register right  \nlucaa - (19:22): I mean, needed  \nlucaa - (19:22): so prevent random bots to register automatically  \nlucaa - (19:22): mhmh, I need to change my vote  \nvmassol - (19:23): lucaa: why?  \nlucaa - (19:23): I need to -1 A instead of +1 B :)  \nvmassol - (19:23): ah I see :)  \nCalebJamesDeLisl - (19:23): :)  \nvmassol - (19:23): got to go, brb  \nvmassol left at 19:24 (Client Quit  \nsdumitriu left at 19:25 (barjavel.freenode.net irc.freenode.net  \nsdumitriu joined #xwiki at 19:28  \nnuvolari - (19:29): greetings earthlings :>  \nlucaa - (19:32): greetings nuvolari  \nnuvolari - (19:35): meh :/ our sysadmin screwed up the wiki today  \nlucaa left at 19:48 (\"Leaving.\"  \ntmortagne left at 19:56 (\"Leaving.\"  \nvmassol joined #xwiki at 20:08  \nsdumitriu - (20:11): CalebJamesDeLisl: You broke lots of integration tests  \nsdumitriu - (20:11): http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/409/#showFailuresLink  \nsdumitriu - (20:11): ERROR: Element register\\_first\\_name not found  \nCalebJamesDeLisl - (20:11): How do I run those locally?  \nsdumitriu - (20:12): Either with:  \nsdumitriu - (20:12): mvn -Pci in trunks/eterprise  \nsdumitriu - (20:12): Or mvn install in enterprise/distribution-tests/selenium-tests  \nsdumitriu - (20:12): They take a whil  \nsdumitriu - (20:12): e  \nsdumitriu - (20:13): You can run just one testclass with:  \nsdumitriu - (20:13): mvn install -Dpattern=UsersGroupsRightsManagementTest  \nCalebJamesDeLisl - (20:14): hmm \u00a0register\\_first\\_name is definitely there, I didn't rename the fields.  \nCalebJamesDeLisl - (20:15): Where are these tests in the code?  \nsdumitriu - (20:20): Don't know, just look at the stack trace:  \nsdumitriu - (20:20): http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/409/testReport/com.xpn.xwiki.it.selenium/UsersGroupsRightsManagementTest/testCreateNonAsciiUser/?  \nsdumitriu - (20:20): com.xpn.xwiki.it.selenium.UsersGroupsRightsManagementTest.createUser(UsersGroupsRightsManagementTest.java:297)  \nCalebJamesDeLisl - (20:25): Found it. If I had to guess, I would say it was the XSS blocker which forbids any parameters unless the method is post and the referer is the same page. I'll keep looking.  \nvmassol - (20:27): CalebJamesDeLisl: there's some doc for running them at http://dev.xwiki.org/xwiki/bin/view/Community/Testing  \nCalebJamesDeLisl - (20:27): I didn't understand it when I read it.  \nvmassol - (20:28): feel free to improve http://dev.xwiki.org/xwiki/bin/view/Community/Testing#HGUItests  \nvmassol - (20:28): it was written quickly indeed  \nCalebJamesDeLisl - (20:32): The only difference between the original html and mine is a value=\"\" tag in my code...  \ntmortagne joined #xwiki at 20:33  \nlucaa joined #xwiki at 20:47  \nsdumitriu left at 21:19 (Read error: 110 (Connection timed out)  \nsdumitriu joined #xwiki at 21:20  \nvmassol - (21:35): fixing the build, I introduced some JDK 1.6 only stuff  \nvmassol - (21:36): (by error)  \nsdumitriu - (21:37): vmassol: Vote sent for editor improvements  \nvmassol - (21:38): ok  \ntmortagne - (21:38): vmassol: \u00a0IDEA does not check that ?  \ntmortagne - (21:38): i'm using JDF 5 on Eclipse to make sure it fail with this kind of things  \ntmortagne - (21:38): JDK  \nvmassol - (21:38): tmortagne: I think the idea maven importer has a bug (I have reported it some time back actually)  \nvmassol - (21:38): since it has set my jdk to be 1.6 and not 1.5  \nvmassol - (21:38): I'm manually changing that now  \ntmortagne - (21:38): ok  \nCalebJamesDeLisl - (21:41): Found the trouble with the selenium tests.  \nCalebJamesDeLisl - (21:42): It seems the AdminUserSheet.xml creates a lightbox for the registration page unless there is something saved as XWiki.Registration  \nCalebJamesDeLisl - (21:42): Otherwise it's a direct link.  \nCalebJamesDeLisl - (21:42): Selenium always expects a lightbox.  \nvmassol - (21:52): strange I have set idea to use JDK 1.5 but the code still compiles  \nvmassol - (21:52): looks like a bug in IDEA  \nlucaa - (21:57): sdumitriu: great great (re mail about edit UI)  \nCalebJamesDeLisl - (21:58): Looks like the only two options are:  \nCalebJamesDeLisl - (21:58): \u00a01. make the AdminUserSheet always display the lightbox  \nCalebJamesDeLisl - (21:58): 2. Change the test.  \nCalebJamesDeLisl - (21:59): I'm in favor of always using the lightbox because administrators shouldn't be bothered with mandatory fields and captchas. And also the link takes them away from the admin sheet where the lightbox doesn't.  \nvmassol - (22:01): tmortagne: hmmm what's strange is that the build worked fine with my change  \nvmassol - (22:01): I wonder how that's possible  \nvmassol - (22:02): since we set the source version for the compiler plugin  \nvmassol - (22:02): checking  \nvmassol - (22:03): yes it's specified   \nvmassol - (22:03): \u00a0<source>1.5</source>  \nvmassol - (22:03): \u00a0<target>1.5</target>  \nvmassol - (22:04): strange  \nsdumitriu left at 22:07 (Read error: 110 (Connection timed out)  \nsdumitriu joined #xwiki at 22:09  \nCalebJamesDeLisl - (22:16): Given the lack of input, I am going to comment out the if statement which swaps out the lightbox for the registration link and make a comment which references the test.  \nsdumitriu - (22:18): +1  \nsdumitriu - (22:18): -1 for the comment  \nsdumitriu - (22:18): The test is not a good motivation for the code  \nCalebJamesDeLisl - (22:19): Then just remove the code?  \nCalebJamesDeLisl - (22:19): There's nothing worse than code which is commented out with no explanation.  \nsdumitriu - (22:20): Yep, remove it  \nsdumitriu - (22:20): If it works fine without it  \nsdumitriu - (22:20): Did you notice any problems?  \nCalebJamesDeLisl - (22:20): All it does is redirect the administrator to the registration page to add a user.  \nsdumitriu - (22:21): Hm...  \nCalebJamesDeLisl - (22:21): And not even in a lightbox, it's just a link.  \nsdumitriu - (22:21): That's bad  \nCalebJamesDeLisl - (22:21): \"Mr Admin, you might be a bot, fill in this captcha\" :)  \nvmassol - (22:22): CalebJamesDeLisl: right I wonder if the captcha shouldn't be active only if 1) it's enabled and 2) the user is not logged in  \nCalebJamesDeLisl - (22:23): I don't believe in making registered user fill out captchas, but why would a registered user want to register?  \nvmassol - (22:23): to add a new user  \nvmassol - (22:23): I do that all the time  \nvmassol - (22:24): ah right I know, it's because I do that on old wikis  \nvmassol - (22:24): which don't have the new way to add users through the admin  \nvmassol - (22:24): but still  \nvmassol - (22:24): it's allowed  \nCalebJamesDeLisl - (22:24): Ok, I'll put an if not XWiki.Guest in the captcha logic on the registration app.  \nvmassol - (22:24): a registered user can register another user  \nCalebJamesDeLisl - (22:25): The entire registration app runs without programming rights :)  \nvmassol - (22:25): hmmm.... if we do this test then maybe setting the captcha to on by default is best...  \nvmassol - (22:25): not sure though  \nvmassol - (22:26): let's wait for the vote result....  \nnpm left at 22:30 (Read error: 104 (Connection reset by peer)  \nnpm joined #xwiki at 22:31  \nmflorea1 left at 22:41 (\"Leaving.\"  \nvmassol - (23:20): sdumitriu: how confident are you that existing skins continue to work after the colibri backport?  \nsdumitriu - (23:21): Tested  \nsdumitriu - (23:21): Works  \nvmassol - (23:21): (not just our skins but also skis\bns created by other people)  \nvmassol - (23:21): ok  \nsdumitriu - (23:22): There should be no rules for the extra div added  \nvmassol - (23:22): ok  \nvmassol - (23:22): cool  \ntmortagne left at 23:29 (\"Leaving.\"  \n\n"}