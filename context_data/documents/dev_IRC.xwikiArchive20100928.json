{"id": "dev:IRC.xwikiArchive20100928", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100928", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nlucaa left at 00:02 (Ping timeout: 265 seconds  \nrrodriguez left at 00:13 (Quit: rrodriguez  \nflorinciu left at 00:18 (Read error: Connection reset by peer  \ndegro joined #xwiki at 02:18  \nsdumitriu - (02:40): abusenius: Ping  \nabusenius - (02:40): pong  \nsdumitriu - (02:40): Are you sure CSRF is working?  \nabusenius - (02:41): when enabled, yes  \nsdumitriu - (02:41): Isn't it enabled by default?  \nabusenius - (02:41): no (for now), this would break too much  \nabusenius - (02:42): I'm quite sure there are bugs, most probably in apps  \nabusenius - (02:45): maybe we could enable it until the release to make failing tests visible and motivate everybody to help fixing them :)  \nsdumitriu - (02:46): +1  \ncjdelisle - (02:47): Would the nature of the failures make any sense? 300 tests fail and with no common message about why, it'd make other dev difficult.  \ncjdelisle - (02:48): And we'd have no idea if things were actually breaking.  \nsdumitriu - (02:49): +1 anyway  \nsdumitriu - (02:49): Those must be fixed one way or another  \nabusenius - (02:49): they'd fail with strange messages indeed  \nabusenius - (02:49): but there are only a few dozens  \nabusenius - (02:50): most of them should be fixed after adding the token to all requests  \nabusenius - (02:50): the rest will probably be csrf bugs  \ncjdelisle - (02:51): Adding a token to all requests? That sounds interesting.  \nabusenius - (02:51): I mean all manual, like the ones to create a page  \ncjdelisle - (02:53): It seems now like having a /save/ action was the wrong way and the applications should have each taken a post back to the application then manipulated the wiki through the api.  \nabusenius - (02:55): why wrong?  \ncjdelisle - (02:55): I like the bottle neck approach where there is an api function and various adaptors which allow you to use that function from different places.  \nabusenius - (02:55): wrt not forgetting to check csrf token save action is perfect :)  \ncjdelisle - (02:56): wrt?  \ncjdelisle - (02:56): I know you're not talking about a rally car.  \nabusenius - (02:56): with respect to  \ncjdelisle - (02:57): True if you want to break unsafe applications then /save/ is pretty awesome.  \ncjdelisle - (02:58): Consider Document.addAttachment. It allows code to programmatically add an attachment.  \ncjdelisle - (02:58): XML-RPC add attachment, just forwards the call to Document.addAttachment.  \ncjdelisle - (02:59): /upload/ does not, /upload/ digs down underneath the api and uses it's own method.  \ncjdelisle - (03:00): Document.addAttachment broke. We didn't know about it because Document.addAttachment and XML-RPC add attachment were not tested.  \ncjdelisle - (03:01): When I fixed Document.addAttachment, I switched /upload/ to use it as well. Now if it breaks again, we will have lots of tests telling us about it.  \nabusenius - (03:02): I agree, this is bad  \nabusenius - (03:02): but if the upload action would use the same public api, this wouldn'T happen  \ncjdelisle - (03:03): Suppose you want to add a way to prevent a user uploading an attachment, just change Document.addAttachment and add a permission check, done.  \ncjdelisle - (03:03): one of us is lagging.  \nabusenius - (03:03): might be me, my internet connection behaves strange lately  \ncjdelisle - (03:04): You got the <cjdelisle> When I fixed Document.addAttachment, I switched /upload/ to use it as well. Now if it breaks again, we will have lots of tests telling us about it.?  \nabusenius - (03:04): yes  \ncjdelisle - (03:04): I like the pattern of funneling everything through a small api.  \ncjdelisle - (03:06): I'm kind of in the fence about /save/ it is nice but it really duplicates api.  \ncjdelisle - (03:07): It feels like the only public face of the xwiki platform should be the api.  \ncjdelisle - (03:09): After all you can't call Document.save() unless you are allowed to have the Document, you can call /save/ on anything and it's up to the security code to stop you.  \ncjdelisle - (03:10): Granted we allow you to have the Document even if you are not allowed to write to it but I would consider proposing a ReadOnlyDocument for the \"new model\".  \nabusenius - (03:12): I don't think actions are soo bad, as long as they are implemented as convenience methods on top of the actual api  \ncjdelisle - (03:12): Again, I'm sort of on the fence about it.  \nabusenius - (03:12): btw, there is also REST & co  \ncjdelisle - (03:13): Should we implement things in script if permissions allow?  \ncjdelisle - (03:13): Should platform be recognizable as a wiki?  \ncjdelisle - (03:14): Or should platform be like a php engine, and everything that makes it XWiki be in the applications?  \nabusenius - (03:14): I personnally don't like when too much logic is put into scripts  \ncjdelisle - (03:15): It does get ugly but on the other hand, should the api expand ad infinitum?  \nabusenius - (03:16): velocity is great for displaying stuff, but there should be a reasonable borderline  \nabusenius - (03:16): core api or all of the api?  \ncjdelisle - (03:17): All of the api.  \nabusenius - (03:17): if you count new components, it can expand as much as you like  \nabusenius - (03:17): imagine a coffee-making component :)  \ncjdelisle - (03:18): imagine a 150Mb .war file  \ncjdelisle - (03:19): Do we expect our users to develop components when they build their own websites?  \nabusenius - (03:19): if it can make coffee, why not?  \nabusenius - (03:19): I guess not  \nabusenius - (03:19): unless they have very special needs  \ncjdelisle - (03:20): So they should usually be confined to developing applications.  \nabusenius - (03:21): probably most of the time just using existing ones  \ncjdelisle - (03:21): Think of it as being used as a cms.  \ncjdelisle - (03:21): (very common usage)  \ncjdelisle - (03:21): Everyone needs something a little different.  \ncjdelisle - (03:22): Do we want to say \"Applications are good enough for you but every time we need to make a change, we change the core.\"  \nabusenius - (03:22): my understanding is: apps for small/quick/less important things, components for more substantional changes  \ncjdelisle - (03:23): It's a bit of an open question IMO.  \nabusenius - (03:23): its a bit like application vs. system library imo  \nabusenius - (03:24): (or just library)  \nabusenius - (03:24): if it benefits everyone and should be easy to use from everywhere -> lib  \ncjdelisle - (03:24): Send the message that XWiki is not flexible because we make all of our changes in the core vs. big unholy mess in the applications section.  \ncjdelisle - (03:25): \"if it benefits everyone and should be easy to use from everywhere -> lib\" +1 that's an easy choice.  \nabusenius - (03:25): why all our changes? any extreme is bad  \ncjdelisle - (03:25): Something like captcha or crypto or rendering, no brainer.  \ncjdelisle - (03:26): Where would you put the comments and tags code?  \nabusenius - (03:26): it just depends on situation, how can you say where to implement an abstract not specified need?  \nabusenius - (03:27): hm, comments feel more like core feature than tags  \nabusenius - (03:28): but they can be both I guess  \ncjdelisle - (03:28): Parts of comments are inside of c.x.x.XWiki, c.x.x.XWiki creates a document called XWiki.XWikiComments  \ncjdelisle - (03:28): Static referencing of a document name from a java file.  \nabusenius - (03:28): well, core does everything, but it could in principle also be an optional component  \ncjdelisle - (03:31): IMO comments should be a application. Same with tags. there's nothing which needs to be in the core and as an application it's easy for the user to opt out.  \ncjdelisle - (03:32): Hmm. The extension manager will make this much easier, we can merge application code with .java files and package in a .xar  \nabusenius - (03:35): hm, yea, this would simplify such decisions - the answer would be \"extension\" in whatever language you like :)  \ncjdelisle - (03:37): Then we will need to force the extensions under a securityManager if they are not to have run of the house.  \ndegro\\_ joined #xwiki at 03:37  \ndegro\\_ left at 03:37 (Client Quit  \ndegro left at 03:39 (Ping timeout: 252 seconds  \nabusenius - (03:40): +1, the more the better  \nsdumitriu left at 03:42 (Quit: Leaving.  \ncjdelisle - (03:44): http://www.wired.com/threatlevel/2010/09/wikileaks-revolt/ Looks like wikileaks is falling apart.  \ncjdelisle - (03:44): I wonder if by subversion or just too much pressure causing a dissolution of the group.  \ncjdelisle - (03:45): Sounds like it was too centralized to begin with.  \nabusenius left at 05:25 (Ping timeout: 265 seconds  \nvenkatesh joined #xwiki at 05:50  \nvenkatesh left at 05:51 (Client Quit  \nvenkatesh joined #xwiki at 06:36  \nvenkatesh left at 06:36 (Client Quit  \nvenkatesh joined #xwiki at 06:37  \nmflorea joined #xwiki at 06:40  \nrrodriguez joined #xwiki at 07:00  \nDenis left at 07:04 (Ping timeout: 276 seconds  \nvmassol joined #xwiki at 07:07  \nDenis joined #xwiki at 07:09  \nvmassol left at 07:51 (Quit: Leaving.  \nvmassol joined #xwiki at 08:21  \nsburjan` - (08:38): hello vmassol  \nasrfel joined #xwiki at 08:39  \nsilviar joined #xwiki at 08:43  \nvmassol left at 08:50 (Quit: Leaving.  \ncjdelisle - (08:57): Attachment day. We'll see how badly I can butcher jrcs to get the memory footprint under 10x the side of the attachment.  \njvdrean joined #xwiki at 09:11  \narkub joined #xwiki at 09:16  \nrrodriguez left at 09:22 (Quit: rrodriguez  \nlpereira joined #xwiki at 09:24  \ncjdelisle - (09:25): Interesting, it seems that if AbstractStringBuilder had been written properly then all of these memory problems would not exist.  \ntmortagne joined #xwiki at 09:31  \nvenkatesh left at 09:34 (Ping timeout: 245 seconds  \nsilviar left at 09:46 (Quit: Leaving.  \njvdrean left at 09:48 (Quit: Leaving.  \nsilviar joined #xwiki at 09:51  \nsilviar1 joined #xwiki at 09:54  \nvenkatesh joined #xwiki at 09:55  \nlucaa joined #xwiki at 09:55  \nsilviar left at 09:58 (Ping timeout: 265 seconds  \nvmassol joined #xwiki at 10:18  \njvdrean joined #xwiki at 10:21  \nvmassol - (10:34): good morning guys and lads  \nvmassol - (10:34): just sent an email re interwiki support  \nvmassol - (10:34): I have it ready just waiting to commit  \nvmassol - (10:34): if I could have one or 2 replies to my mail I could commit right away  \nvmassol - (10:35): (I'll commit anyway in a few hours even if I don't get any answer but still better have some feedback ;))  \nvmassol - (10:37): thanks cjdelisle  \ncjdelisle - (10:38): No pb. It seems pretty strait forward.  \nvmassol - (10:38): yeah  \nvmassol - (10:40): btw it's XWIKI-3229  \nvmassol - (10:40): there's even 2 votes for it!  \nvmassol - (10:44): cjdelisle: that would be great indeed if we can fix it  \ncjdelisle - (10:46): The problem is that AbstractStringBuilder was written by Schlemiel the painter himself.  \njvdrean1 joined #xwiki at 10:46  \nvmassol - (10:46): I find it strange that this would be a pb of java  \nvmassol - (10:46): and not a problem in our logic  \nvmassol - (10:46): but I haven't studied the problem  \nvmassol - (10:46): so you know better than I do  \ncjdelisle - (10:46): No actually XWiki code is pretty good.  \njvdrean left at 10:47 (Read error: No route to host  \ncjdelisle - (10:47): Other than abusing jrcs by making it handle stuff much larger than it was designed to.  \ncjdelisle - (10:47): I've ran in to the same problem in other places.  \ncjdelisle - (10:48): heh google: \".AbstractStringBuilder.append(AbstractStringBuilder.java:\" \u00a0\u00a0all oom errors.  \njvdrean joined #xwiki at 10:49  \njvdrean1 left at 10:50 (Read error: No route to host  \nrrodriguez joined #xwiki at 10:55  \nvmassol left at 11:16 (Quit: Leaving.  \nrrodriguez left at 11:18 (Quit: rrodriguez  \nvmassol joined #xwiki at 11:18  \nvenkatesh left at 11:21 (Ping timeout: 264 seconds  \nsdumitriu joined #xwiki at 11:40  \njvdrean left at 11:41 (Read error: Connection reset by peer  \njvdrean joined #xwiki at 11:41  \njvdrean1 joined #xwiki at 11:45  \njvdrean left at 11:45 (Read error: Connection reset by peer  \nmflorea left at 11:50 (Quit: Leaving.  \nkwoot joined #xwiki at 12:00  \njvdrean1 left at 12:07 (Ping timeout: 264 seconds  \njvdrean joined #xwiki at 12:07  \nsilviar1 left at 12:12 (Quit: Leaving.  \nvmassol - (12:28): guys I'm planning to update maven plugin versions to latest versions. Hope it's ok with everybody. I'm doing a build to verify they work fine  \ncjdelisle - (12:28): +1  \nvmassol - (12:30): sdumitriu: cool the add button is ok now on chrome, thanks  \nvmassol - (12:30): (on my mac)  \nqwebirc51394 joined #xwiki at 12:30  \nsdumitriu - (12:40): vmassol: You're welcome  \nqwebirc51394 left at 12:45 (Ping timeout: 252 seconds  \nvenkatesh joined #xwiki at 12:52  \nflorinciu joined #xwiki at 12:55  \nmflorea joined #xwiki at 13:04  \nsdumitriu - (13:10): vmassol: You should rest your eyes  \nvmassol - (13:11): sdumitriu: I have a visit to the doctor tomorrow evening. I'll see what he says. He didn't say anything about resting my eyes so far though  \nvmassol - (13:11): thanks for taking care :)  \nsilviar joined #xwiki at 13:22  \nrrodriguez joined #xwiki at 13:27  \nsdumitriu - (13:32): vmassol: WDYT about javadoc links? javadoc:java.lang.String  \nsdumitriu - (13:32): As configuration, base path for package names  \nvmassol - (13:36): sdumitriu: isn't that an interwiki link?  \nvmassol - (13:36): javadoc doesn't mean much by itself  \nsdumitriu - (13:36): Kind of  \nvmassol - (13:36): what version of java?  \nvmassol - (13:36): base jdk classes or other classes (hibernate, etc)?  \nvmassol - (13:37): if we can make this fit as interwiki link it would be better IMO  \nsdumitriu - (13:37): As interwiki, you'd have to write the URL path to the class  \nsdumitriu - (13:37): But as javadoc you just pass the class name  \nvmassol - (13:38): sure but . or / is close  \nvmassol - (13:38): there's the ending which is a problem  \nvmassol - (13:38): but we could improve the interwiki support  \nvmassol - (13:38): and use %path% or something like this  \nvmassol - (13:38): so that we can have \u2026./%path%.html  \njvdrean left at 13:38 (Ping timeout: 245 seconds  \nsdumitriu - (13:39): version of java = configuration: rendering.links.javadoc.default=http://download.oracle.com/javase/1.5.0/docs/api/  \nvmassol - (13:40): IMO we should do this token replacement right now so that we don't break it later on  \nvmassol - (13:40): we just need to define the token  \nsdumitriu - (13:41): base or other = configuration as well:  \nsdumitriu - (13:41): rendering.links.javadoc.org.xwiki=http://nexus.xwiki.org/nexus/service/local/repositories/releases/archive/  \nsdumitriu - (13:41): rendering.links.javadoc.org.hibernate=http://...  \nvmassol - (13:41): sdumitriu: I still don't think it's something we need by default  \nvmassol - (13:41): but it could be an extension using the extension manager  \nsdumitriu - (13:41): Well, for xwiki/1.0 there was some javadoc support  \njvdrean joined #xwiki at 13:41  \nsdumitriu - (13:41): I might have removed it at some point  \nvmassol - (13:42): yes there was some radeox macro AFAIR  \nvmassol - (13:42): but it wasn't working or wasn't used I don't recall  \nsdumitriu - (13:43): But yes, you are right, that's not something needed by default  \nvmassol - (13:44): in any case it's very easy to add a new type  \nvmassol - (13:44): took me 3 minutes to add the path: support yesterday  \nsburjan` - (13:44): Thursday we will release M2 ?  \nsdumitriu - (13:44): sburjan`: If all goes well, yes  \nsdumitriu - (13:48): vmassol: \"BTW I find the new way less good than before because I feel it's harder to know how to change/see the parent field than before. I'd suggest that the parent be visible at least when it's set. Even the parent is visible in view mode and I thought we wanted the same look as in view mode.\"  \nsdumitriu - (13:48): Is this question still valid?  \nvmassol - (13:49): sdumitriu: no it's ok now that the breadcrumb is displayed in edit mode too  \nvmassol - (13:49): it's slightly \"magical\" but it's probably ok  \nvmassol - (13:50): let's see if we get user feedback about it  \nflaviusolaru joined #xwiki at 14:02  \nvenkatesh left at 14:06 (Remote host closed the connection  \njvdrean - (14:20): sdumitriu: thanks for the feedback, I've replied to the email but we can discuss about it here  \njvdrean - (14:22): WDYT about having the name field uncorrelated from the actual field storage, I think it makes sense  \njvdrean - (14:23): or do you think of \"String property\" as the actual name of the field in the User class ?  \nsdumitriu left at 14:25 (Ping timeout: 276 seconds  \nsdumitriu joined #xwiki at 14:27  \nsdumitriu - (14:27): jvdrean: Sorry, got disconnected  \nsdumitriu - (14:28): Well, I didn't suggest to replace setNameFilter  \nflaviusolaru left at 14:28 (Quit: Leaving.  \nsdumitriu - (14:29): The name is important, it should be there standalone, alongside setMacthing or addFilter or whatever it will be called  \nflaviusolaru joined #xwiki at 14:35  \njvdrean - (14:36): sdumitriu: oh right, I read too fast  \njvdrean - (14:37): so yes addFilter could be added in the future  \nlucaa left at 14:39 (Ping timeout: 240 seconds  \nlucaa joined #xwiki at 14:39  \nlucaa left at 14:44 (Ping timeout: 264 seconds  \nvenkatesh joined #xwiki at 15:00  \nvenkatna joined #xwiki at 15:00  \nabusenius joined #xwiki at 15:19  \ntmortagne - (15:45): abusenius: isn't XWIKI-5448 fixed ?  \ntmortagne - (15:45): (duplicate actually here)  \nabusenius - (15:46): mm, yes, should be  \nabusenius - (15:46): XWIKI-5244  \nabusenius - (15:47): hm, no, probably another one  \nrrodriguez left at 16:05 (Quit: rrodriguez  \nabusenius - (16:14): hm, seems that this problem is fixed in 2.5 but still not in 2.4.3  \nabusenius - (16:21): ok, found, it's because XWIKI-5387 was not merged into 2.4  \nabusenius - (16:22): (tmortagne)  \ntmortagne - (16:25): abusenius: are you doing it ?  \nabusenius - (16:25): yes, I'll do some more testing and merge the fix to 2.4  \ntmortagne - (16:25): ok  \nsilviar left at 16:25 (Quit: Leaving.  \nvenkatesh left at 16:47 (Ping timeout: 252 seconds  \nvenkatna left at 16:48 (Ping timeout: 264 seconds  \njvdrean - (16:54): sdumitriu , vmassol and others WDYT about http://dev.xwiki.org/xwiki/bin/view/Design/UsersModule#HAPIProposal3 ?  \nasrfel left at 17:15 (Quit: Leaving.  \ntmortagne - (17:16): sdumitriu: isn't XWIKI-4289 fixed in your refactoring of class editor ?  \nmflorea - (17:23): tmortagne: how do I specify the default value of a macro parameter? By initializing the class field?  \ntmortagne - (17:24): mflorea: yes  \nmflorea - (17:24): great, thanks!  \nrrodriguez joined #xwiki at 17:25  \ntmortagne - (17:25): mflorea: to be more precise bean manager instanciate the java bean and call the property getter to get the default value so you can also do a if in your getter or something, it depends of your use case  \nmflorea - (17:26): initializing the class field it enough. Now I remember you already told me this sometime ago :)  \ntmortagne - (17:27): checking if it's in the xwiki-properties module documentation  \nsdumitriu - (17:27): tmortagne: XWIKI-4289 should not be fixed  \nflaviusolaru left at 17:28 (Quit: Leaving.  \ntmortagne - (17:33): sdumitriu: ok  \ntmortagne - (17:33): should'nt it be a won't fix ?  \nsdumitriu - (17:42): I think it might be fixed  \nlucaa joined #xwiki at 17:43  \nkwoot left at 17:44 (Ping timeout: 252 seconds  \ntmortagne - (17:51): seems difficult to fix this issue in a not case sensitive MySQL database  \narkub left at 18:10 (Quit: Leaving  \nvenkatesh joined #xwiki at 18:44  \nvenkatesh left at 18:57 (Ping timeout: 265 seconds  \nvenkatesh joined #xwiki at 18:58  \njvdrean left at 19:09 (Quit: Leaving.  \nvenkatesh left at 19:10 (Ping timeout: 252 seconds  \nlucaa left at 19:12 (Ping timeout: 240 seconds  \nmflorea left at 19:18 (Quit: Leaving.  \nflorinciu left at 19:39 (Read error: Connection reset by peer  \nvmassol left at 19:50 (Ping timeout: 265 seconds  \nvmassol joined #xwiki at 19:52  \nlucaa joined #xwiki at 20:01  \nvmassol left at 20:04 (Ping timeout: 265 seconds  \nvmassol joined #xwiki at 20:04  \nabusenius left at 20:09 (Read error: Operation timed out  \nvmassol left at 20:13 (Quit: Leaving.  \nflorinciu joined #xwiki at 20:17  \nabusenius joined #xwiki at 20:33  \nlpereira left at 20:47 (Quit: Leaving.  \njvdrean joined #xwiki at 21:38  \nsilviar joined #xwiki at 21:45  \ntmortagne left #xwiki at 21:52  \nsilviar left at 22:11 (Quit: Leaving.  \nflorinciu left at 22:16 (Read error: Connection reset by peer  \njvdrean left at 22:42 (Quit: Leaving.  \n\n"}