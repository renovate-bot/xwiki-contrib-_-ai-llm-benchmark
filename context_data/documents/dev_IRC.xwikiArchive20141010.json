{"id": "dev:IRC.xwikiArchive20141010", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20141010", "title": "IRC Archive for channel #xwiki on 10 October 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<silverdr1p>\u00a0has quit  \n03:50\u00a0<Denis>\u00a0has joined #xwiki  \n04:05\u00a0<Denis>\u00a0has quit  \n06:37\u00a0<sburjan>\u00a0has quit  \n06:49\u00a0<msmeria>\u00a0has joined #xwiki  \n07:17\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n07:19\u00a0<DarkKnightCZ>\u00a0has quit  \n07:19\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n07:19\u00a0<DarkKnightCZ>\u00a0has left #xwiki  \n07:24\u00a0<silverdrop>\u00a0has joined #xwiki  \n07:26\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n08:20\u00a0<vmassol>\u00a0has joined #xwiki  \n08:29\u00a0<Denis1>\u00a0has joined #xwiki  \n08:45\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:49\u00a0<DarkKnightCZ>\u00a0what bundle contains translations platform.wiki.\\* ? it seems missing for my wiki  \n08:50\u00a0<DarkKnightCZ>\u00a0(or maybe translations are not loaded properly)  \n08:57\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:05\u00a0<cjd>\u00a0has joined #xwiki  \n09:10\u00a0<DarkKnightCZ>\u00a0found the issue, just not sure why is this happening... what code handles obtaining pages with XWiki.TranslationDocumentClass and setting them as translation sources? (although it's working on clean 6.2.1, it's not working on other 6.2.1 instance)  \n09:10\u00a0<vmassol>\u00a0DarkKnightCZ: somewhere in the localization module  \n09:10\u00a0<cjd>\u00a0has quit  \n09:15\u00a0<tmortagne>\u00a0DarkKnightCZ: https://github.com/xwiki/xwiki-platform/tree/master/xwiki-platform-core/xwiki-platform-localization/xwiki-platform-localization-sources/xwiki-platform-localization-source-wiki  \n09:16\u00a0<tmortagne>\u00a0maybeyour issue is the right of the author of this document  \n09:17\u00a0<tmortagne>\u00a0it works pretty much like wiki macro, for theses translations to be available for the whole wiki the author must have admin right  \n09:18\u00a0<DarkKnightCZ>\u00a0thanks... author is me (not Admin user, with admin permissions), if i save the document, it works... also the WikiManager.Translations is saved by Administrator (the original file) and it's not loaded  \n09:20\u00a0<Lyes>\u00a0has joined #xwiki  \n09:20\u00a0<DarkKnightCZ>\u00a0hmm, md5 sum of xwiki-platform-localization-source-wiki-6.2.1.jar is same on both instances (one, clean 6.2.1 is working, the other is not)  \n09:22\u00a0<tmortagne>\u00a0DarkKnightCZ: by \"is not loaded\" you mean what exactly ?  \n09:22\u00a0<tmortagne>\u00a0i.e. what do you see that makes you think it's not loaded  \n09:22\u00a0<DarkKnightCZ>\u00a0keys are not translated  \n09:24\u00a0<tmortagne>\u00a0does it work if you restart ?  \n09:24\u00a0<tmortagne>\u00a0to see if it's some caching bug  \n09:26\u00a0<DarkKnightCZ>\u00a0nope, no error in logs (as it was before 6.2) and restart doesn't help... only thing i can think of is that wiki is firstly accessed by user who doesn't have any rights (but since the translation loading is done by component, it shouldn't matter)  \n09:29\u00a0<tmortagne>\u00a0this could not change anything  \n09:29\u00a0<tmortagne>\u00a0what count is the document author  \n09:29\u00a0<tmortagne>\u00a0same as wiki macros  \n09:30\u00a0<tmortagne>\u00a0without debugging I don't have much idea  \n09:30\u00a0<tmortagne>\u00a0I can tell you were to put a breakpoint if you want  \n09:30\u00a0<DarkKnightCZ>\u00a0yes, same as wiki macros... just tried that xwql loads all translation documents if executed, so maybe on WikIReadyEvent it could return different data... going to debug it  \n09:31\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:31\u00a0<tmortagne>\u00a0DarkKnightCZ: you have the issue only for subwikis ?  \n09:32\u00a0<DarkKnightCZ>\u00a0subwikis and main wikis  \n09:32\u00a0<DarkKnightCZ>\u00a0\\*main wiki  \n09:32\u00a0<tmortagne>\u00a0ok so it's not realted to WikiReadyEvent then  \n09:32\u00a0<DarkKnightCZ>\u00a0hmm, let me try something  \n09:32\u00a0<tmortagne>\u00a0you don't receive this event for main wiki  \n09:33\u00a0<DarkKnightCZ>\u00a0yep, you're right, it's related to main wiki only  \n09:33\u00a0<tmortagne>\u00a0you mean subwikis only ?  \n09:34\u00a0<DarkKnightCZ>\u00a0nope, only to main wiki... i guess database connection isn't quite ready when DocumentTranslationBundleFactory is initialized  \n09:34\u00a0<DarkKnightCZ>\u00a0for example - solr translations are translated properly on subwikis, on main wiki they're not  \n09:35\u00a0<tmortagne>\u00a0DocumentTranslationBundleFactory is supposed to be initialized when receiving ApplicationReadyEvent  \n09:36\u00a0<tmortagne>\u00a0I guess the best is to check when https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-localization/xwiki-platform-localization-sources/xwiki-platform-localization-source-wiki/src/main/java/org/xwiki/localization/wiki/internal/DocumentTranslationBundleFactory.java#L193 is called  \n09:36\u00a0<tmortagne>\u00a0but if the database was not ready when it's called you would get errors in the log  \n09:36\u00a0<DarkKnightCZ>\u00a0yup, i'm going to debug it  \n09:36\u00a0<tmortagne>\u00a0the query could fail fail, or some nullpointer  \n09:36\u00a0<tmortagne>\u00a0s/could/should/  \n09:41\u00a0<ClemensR>\u00a0has joined #xwiki  \n09:45\u00a0<cjd>\u00a0has joined #xwiki  \n10:08\u00a0<mflorea>\u00a0has joined #xwiki  \n10:10\u00a0<lucaa>\u00a0has joined #xwiki  \n10:15\u00a0<lucaa>\u00a0has quit  \n10:16\u00a0<DarkKnightCZ>\u00a0tmortagne: got it, https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-localization/xwiki-platform-localization-sources/xwiki-platform-localization-source-wiki/src/main/java/org/xwiki/localization/wiki/internal/DocumentTranslationBundleFactory.java#L232 should be in extra try/catch (missed that exception earlier), if some document with this class has bad user (i.e. with bad permissions), all consecutive translations  \n10:17\u00a0<tmortagne>\u00a0DarkKnightCZ: IRC cut too long lines so I don't think I have all your expected to send (stop at \" all consecutive translations\"), but I think I understand what you mean  \n10:17\u00a0<tmortagne>\u00a0let me see  \n10:19\u00a0<tmortagne>\u00a0indeed, should I fix it or do you want to provide a pull request ?  \n10:20\u00a0<tmortagne>\u00a0(I find it better if you appear as author of the bugfix on github but I can understand if you don't have the time ro take care of this)  \n10:22\u00a0<DarkKnightCZ>\u00a0\"won't be loaded\" was the end of that sentence :) i can create the pull request  \n10:22\u00a0<tmortagne>\u00a0great, thanks :)  \n10:26\u00a0<vmassol>\u00a0guys, today we need to stabilize the build so that we can release on Monday  \n10:27\u00a0<vmassol>\u00a0so please spend some time today to look at the build on ci.  \n10:27\u00a0<lucaa>\u00a0has joined #xwiki  \n10:27\u00a0<vmassol>\u00a0checking platform now  \n10:28\u00a0<vmassol>\u00a0aspectj failure  \n10:28\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-platform/196/console  \n10:28\u00a0<vmassol>\u00a0[ERROR] The method serializeReference(DocumentReference, EntityReferenceSerializer<String>, DocumentReference) is undefined for the type XWikiDocument  \n10:29\u00a0<vmassol>\u00a0seems to be caused by http://ci.xwiki.org/job/xwiki-platform/187/  \n10:29\u00a0<vmassol>\u00a0(fails this that time at least)  \n10:29\u00a0<vmassol>\u00a0I don't see the relationship with the commit though...  \n10:31\u00a0<vmassol>\u00a0ah tmortagne have you updtaed the aspectj plugin?  \n10:31\u00a0<vmassol>\u00a0if so then I believe this is the cause  \n10:32\u00a0<tmortagne>\u00a0vmassol: yes but it was building well after the upgrade  \n10:32\u00a0<tmortagne>\u00a0was 3 weeks ago  \n10:34\u00a0<tmortagne>\u00a0vmassol: I don't think this is an aspectj issue  \n10:35\u00a0<tmortagne>\u00a0checking but I think this is a private method I deleted recently  \n10:35\u00a0<vmassol>\u00a0ok  \n10:35\u00a0<vmassol>\u00a0bbiab  \n10:37\u00a0<tmortagne>\u00a0a pity there is no version of AJDT for Eclipse 4.4  \n10:42\u00a0<silverdrop>\u00a0has quit  \n10:57\u00a0<AFKGeek>\u00a0has joined #xwiki  \n11:04\u00a0<DarkKnightCZ>\u00a0has quit  \n11:04\u00a0<evalica>\u00a0has joined #xwiki  \n11:04\u00a0<Guest46382>\u00a0has joined #xwiki  \n11:13\u00a0<tmortagne>\u00a0it's quite crappy that aspectj make public all the private methods it's using...  \n11:13\u00a0<tmortagne>\u00a0ending up with:  \n11:13\u00a0<tmortagne>\u00a07002: com.xpn.xwiki.doc.XWikiDocument: Method 'public java.lang.String ajc$privMethod$com\\_xpn\\_xwiki\\_doc\\_XWikiDocumentCompatibilityAspect$com\\_xpn\\_xwiki\\_doc\\_XWikiDocument$serializeReference(org.xwiki.model.reference.DocumentReference, org.xwiki.model.reference.EntityReferenceSerializer, org.xwiki.model.reference.DocumentReference)' has been removed  \n11:25\u00a0<Slashman>\u00a0has joined #xwiki  \n11:52\u00a0<Enygma`>\u00a0I just got this in the console while failing to start the lates snapshot (xwiki-enterprise-jetty-hsqldb-6.3-20141009.174017-98) : http://hastebin.com/ivoqenimij.avrasm  \n11:52\u00a0<Enygma`>\u00a0first, it`s a \"[org.xwiki.configuration.internal.AbstractDocumentConfigurationSource$1] listener\" issue that probably tmortagne knows more about  \n11:53\u00a0<Enygma`>\u00a0then a lot of errors like this: Failed to render title for document [xwiki:XWiki.Mail()]  \n11:53\u00a0<Enygma`>\u00a0in the solr indexing process  \n11:53\u00a0<tmortagne>\u00a0Enygma`: I just fixed the listener issue, see XWIKI-11204  \n11:53\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n11:54\u00a0<Enygma`>\u00a0this is interesting: Failed to render title for document [xwiki:Crypto.PrivateKeyClass()] , did Denis1 commit some of his signing code?  \n11:54\u00a0<tmortagne>\u00a0some  \n11:55\u00a0<Enygma`>\u00a0and then this is weird:  \n11:55\u00a0<Enygma`>\u00a0Exception in thread \"Lucene Index Rebuilder\" java.lang.NoSuchMethodError: com.xpn.xwiki.doc.XWikiDocument.getXObject(Lorg/xwiki/model/reference/EntityReference;Ljava/lang/String;Ljava/lang/String;Z)Lcom/xpn/xwiki/objects/BaseObject;  \n11:55\u00a0<tmortagne>\u00a0this is because legacy-oldcore was not building  \n11:55\u00a0<tmortagne>\u00a0will have to wait another not failing build  \n11:55\u00a0<Enygma`>\u00a0ok, so I just need to wait for a recent build to finish  \n11:55\u00a0<Enygma`>\u00a0right  \n11:56\u00a0<Enygma`>\u00a0coo, thx  \n12:00\u00a0<lucaa>\u00a0has quit  \n12:08\u00a0<DarkKnightCZ>\u00a0has left #xwiki  \n12:08\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n12:18\u00a0<tmortagne>\u00a0DarkKnightCZ: applied, thanks !  \n12:19\u00a0<DarkKnightCZ>\u00a0you're welcome  \n12:52\u00a0<Inge-\\_>\u00a0is now known as <Inge->  \n13:01\u00a0<mflorea>\u00a0sdumitriu: ping  \n13:05\u00a0<mflorea>\u00a0nvm  \n13:12\u00a0<Denis1>\u00a0has quit  \n13:35\u00a0<Denis1>\u00a0has joined #xwiki  \n13:47\u00a0<Denis1>\u00a0is now known as <Denis>  \n13:48\u00a0<Denis>\u00a0Enygma`: Code for cryptography, including storage in objects is distributed since a while now :)  \n14:15\u00a0<lucaa>\u00a0has joined #xwiki  \n14:28\u00a0<DarkKnightCZ>\u00a0has quit  \n14:44\u00a0<vmassol>\u00a0tmortagne: I think we may be having some duplicate component issue  \n14:44\u00a0<vmassol>\u00a0I got this yesterday in my console:  \n14:44\u00a0<vmassol>\u00a02014-10-09 19:00:00,083 [DefaultQuartzScheduler\\_Worker-1] WARN \u00a0.o.i.DefaultObservationManager - The [org.xwiki.configuration.internal.AbstractDocumentConfigurationSource$1] listener is overwritting a previously registered listener [org.xwiki.configuration.internal.AbstractDocumentConfigurationSource$1] since they both are registered under the same id [configuration.document.annotation]. In the future consider removing a Listener first i  \n14:45\u00a0<vmassol>\u00a0and on http://ci.xwiki.org/job/xwiki-enterprise-test-jmeter/org.xwiki.enterprise$xwiki-enterprise-test-jmeter/216/testReport/junit/org.apache.maven.surefire.junit4/JUnit4Provider/org\\_xwiki\\_test\\_jmeter\\_AllTests/ I see some issues that could be similar  \n14:45\u00a0<vmassol>\u00a0actually it's probably different for the jmeter job:  \n14:45\u00a0<vmassol>\u00a0class java.lang.NoSuchMethodError: com.xpn.xwiki.doc.XWikiDocument.getXObject(Lorg/xwiki/model/reference/EntityReference;Ljava/lang/String;Ljava/lang/String;Z)Lcom/xpn/xwiki/objects/BaseObject;  \n14:46\u00a0<vmassol>\u00a0last time the jmeter job worked was on the 17th of September :(  \n14:46\u00a0<vmassol>\u00a0should we turn it off?  \n14:47\u00a0<vmassol>\u00a0hmm some strange error also in all ui tests: http://ci.xwiki.org/job/xwiki-enterprise-test-ui/lastBuild/org.xwiki.enterprise$xwiki-enterprise-test-ui/testReport/org.xwiki.test.ui.appwithinminutes/DateClassFieldTest/testDateFormat/  \n14:47\u00a0<vmassol>\u00a0java.lang.IllegalStateException: Cache 'xwiki.store.pageexistcache' is in 'TERMINATED' state and so it does not accept new invocations. Either restart it or recreate the cache container.  \n14:57\u00a0<tmortagne>\u00a0vmassol: as I said to Enygma`I fixed the listener warining  \n14:57\u00a0<tmortagne>\u00a0that was XWIKI-11204  \n14:58\u00a0<vmassol>\u00a0ok cool  \n14:58\u00a0<vmassol>\u00a0(sorry was away for a while and didn't notice)  \n14:58\u00a0<vmassol>\u00a0our build is currently failing a lot  \n14:58\u00a0<tmortagne>\u00a0jmeter job was working well before the jenkins move  \n14:58\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n14:59\u00a0<vmassol>\u00a0if it's not working because of the jenkins version chage then we should disable it till you find a way to make it work  \n14:59\u00a0<vmassol>\u00a0but the error seems to be on our side  \n14:59\u00a0<tmortagne>\u00a0the project itself did not changed a bit  \n15:00\u00a0<vmassol>\u00a0let's see with your annotation listener change  \n15:00\u00a0<tmortagne>\u00a0maybe it's caused by your refactoring in XE startup script  \n15:00\u00a0<tmortagne>\u00a0I don't see how the listener would change anything  \n15:00\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-test-jmeter/org.xwiki.enterprise$xwiki-enterprise-test-jmeter/216/testReport/junit/org.apache.maven.surefire.junit4/JUnit4Provider/org\\_xwiki\\_test\\_jmeter\\_AllTests/  \n15:00\u00a0<tmortagne>\u00a0the listener warning is very recent  \n15:00\u00a0<vmassol>\u00a0this is strange too:  \n15:00\u00a0<vmassol>\u00a0class java.lang.NoSuchMethodError: com.xpn.xwiki.doc.XWikiDocument.getXObject(Lorg/xwiki/model/reference/EntityReference;Ljava/lang/String;Ljava/lang/String;Z)Lcom/xpn/xwiki/objects/BaseObject  \n15:01\u00a0<tmortagne>\u00a0we looked at it too, legacy oldcore that was failing to build  \n15:01\u00a0<tmortagne>\u00a0just need a new one  \n15:01\u00a0<vmassol>\u00a0ok so can I trigger a jmeter build now?  \n15:01\u00a0<tmortagne>\u00a0it was not in sync with oldcore especially for this new method  \n15:02\u00a0<tmortagne>\u00a0sure  \n15:02\u00a0<tmortagne>\u00a0hope there has been a build of XE but should be  \n15:02\u00a0<vmassol>\u00a01h48 ago XE was built  \n15:04\u00a0<vmassol>\u00a0seems better  \n15:04\u00a0<vmassol>\u00a0XE has started now  \n15:05\u00a0<tmortagne>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/org.xwiki.enterprise$xwiki-enterprise-test-escaping/135/testReport/junit/org.xwiki.test.escaping/TemplateTest/skins\\_flamingo\\_menus\\_create\\_vm\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_testSpaceEscaping/ looks like a false alarm \u00a0but this is not a new template so something changed  \n15:05\u00a0<vmassol>\u00a0GD has changed the menus recently  \n15:05\u00a0<tmortagne>\u00a0seems to be \"Unexpected empty response\" check is pretty useless  \n15:06\u00a0<vmassol>\u00a0(yesterday)  \n15:06\u00a0<tmortagne>\u00a0I don't see what this had to do with escaping  \n15:06\u00a0<tmortagne>\u00a0s/be/me/  \n15:06\u00a0<tmortagne>\u00a0we should probably always ignore empty result  \n15:06\u00a0<vmassol>\u00a0because escaping does a HTTP call  \n15:06\u00a0<vmassol>\u00a0and we don't get any result  \n15:06\u00a0<vmassol>\u00a0this is why we exclude the templates that don't send any result  \n15:06\u00a0<vmassol>\u00a0if we exclude autoamtically then we don't know if it's realy or not  \n15:07\u00a0<vmassol>\u00a0\\*real  \n15:07\u00a0<tmortagne>\u00a0I know how it's working but getting an empty result is notthing wrong  \n15:07\u00a0<vmassol>\u00a0I guess  \n15:07\u00a0<tmortagne>\u00a0even from HTTP point off view  \n15:08\u00a0<tmortagne>\u00a0we have an explicit if (!errors.isEmpty()) { in escaping tests  \n15:08\u00a0<tmortagne>\u00a0I really don't see the point  \n15:08\u00a0<tmortagne>\u00a0all we want to know if we end up with what we put in the URL as parameter  \n15:08\u00a0<vmassol>\u00a0I don't know, I didn't take part of this code  \n15:08\u00a0<vmassol>\u00a0I'm not familiar with it  \n15:08\u00a0<vmassol>\u00a0JV wrote it right?  \n15:08\u00a0<tmortagne>\u00a0I know but the one who is familiar with it is not here anymore  \n15:08\u00a0<tmortagne>\u00a0no  \n15:09\u00a0<tmortagne>\u00a0was Alex  \n15:09\u00a0<vmassol>\u00a0busenius?  \n15:10\u00a0<tmortagne>\u00a0yes  \n15:11\u00a0<vmassol>\u00a0well if this template is not new  \n15:11\u00a0<tmortagne>\u00a0what JV wrote is the first html validator  \n15:11\u00a0<vmassol>\u00a0then does it mean it was returning something before and no longer does?  \n15:11\u00a0<tmortagne>\u00a0should be yes  \n15:11\u00a0<vmassol>\u00a0checking change of GD quickly  \n15:11\u00a0<vmassol>\u00a0indeed  \n15:11\u00a0<vmassol>\u00a0he added the top level #if  \n15:12\u00a0<tmortagne>\u00a0but I still don't see how empty result is an issue  \n15:12\u00a0<vmassol>\u00a0so makes sense  \n15:12\u00a0<vmassol>\u00a0well look at it  \n15:12\u00a0<vmassol>\u00a0imagine that someone removes the top level #if in this template  \n15:12\u00a0<vmassol>\u00a0actually that works  \n15:12\u00a0<vmassol>\u00a0;)  \n15:13\u00a0<vmassol>\u00a0the only potential problem is if a template is supposed to return somerhing and doesn't  \n15:13\u00a0<vmassol>\u00a0but maybe it never happens  \n15:13\u00a0<vmassol>\u00a0or very seldom  \n15:13\u00a0<tmortagne>\u00a0maybe but that has nothing to do with escaping issue  \n15:13\u00a0<vmassol>\u00a0and it maye not be worth it  \n15:13\u00a0<vmassol>\u00a0sure sure  \n15:13\u00a0<tmortagne>\u00a0it's not this test's job  \n15:13\u00a0<vmassol>\u00a0but we don't test only escaping  \n15:13\u00a0<vmassol>\u00a0those escaping tests help us a lot  \n15:13\u00a0<vmassol>\u00a0by checking the output  \n15:13\u00a0<vmassol>\u00a0log output  \n15:14\u00a0<tmortagne>\u00a0we already get that in html validator  \n15:14\u00a0<vmassol>\u00a0maybe I'm mixing with the html validator  \n15:14\u00a0<vmassol>\u00a0the role of the html validator is also not to check the console but it's good it detects warning in our velocity calls  \n15:14\u00a0<tmortagne>\u00a0the only job of this project is to make sure we escape probably everuthing that we pass in URLs  \n15:14\u00a0<vmassol>\u00a0anyway I think I agree with you  \n15:14\u00a0<vmassol>\u00a0for the escape tests  \n15:16\u00a0<tmortagne>\u00a0when I see how many templates we declare in XE pom it really looks like this check is useless, maybe we used to have mostly template with output but we do have lots of utility templates now  \n15:16\u00a0<vmassol>\u00a0actually it even depends on the context  \n15:17\u00a0<vmassol>\u00a0some templates coudl return a result if some http parameter are passed  \n15:17\u00a0<vmassol>\u00a0so it might even be better to not always exclude them  \n15:17\u00a0<vmassol>\u00a0is there a way to set velocity variables before a template is executed too?  \n15:18\u00a0<tmortagne>\u00a0in any case there is no value in this automated test since it never reveal a bug, all the one I saw since a long time where fixed by excluding the template  \n15:18\u00a0<vmassol>\u00a0(for ex for menus\\_create.vm it would require setting $displayCreateMenu to test it )  \n15:18\u00a0<tmortagne>\u00a0templates have access to velocity variable yes  \n15:18\u00a0<tmortagne>\u00a0juste think of $hasAdmin  \n15:18\u00a0<vmassol>\u00a0I mean the test  \n15:18\u00a0<vmassol>\u00a0how do tell the test to set a velocity variable  \n15:18\u00a0<tmortagne>\u00a0this test us HTTP based  \n15:19\u00a0<vmassol>\u00a0so it doesn't support setting velocity variables  \n15:19\u00a0<tmortagne>\u00a0it does not execute directly the template as velocity  \n15:19\u00a0<tmortagne>\u00a0it use xpage=  \n15:19\u00a0<tmortagne>\u00a0this test check validate escaping of URL parameters  \n15:20\u00a0<tmortagne>\u00a0s/check//  \n15:20\u00a0<vmassol>\u00a0it doesn't do any assert on the returned result?  \n15:21\u00a0<tmortagne>\u00a0it look in the returned result if it find something it passed as URL parameter  \n15:21\u00a0<vmassol>\u00a0yes so that's what I'm saying  \n15:21\u00a0<vmassol>\u00a0in menu\\_create.v  \n15:21\u00a0<vmassol>\u00a0vm  \n15:21\u00a0<vmassol>\u00a0maybe that vm uses some param  \n15:21\u00a0<vmassol>\u00a0but since there's a velocity #if  \n15:21\u00a0<vmassol>\u00a0we won't know  \n15:22\u00a0<vmassol>\u00a0since the test will not return anything  \n15:22\u00a0<vmassol>\u00a0I guess we need a manual test for this  \n15:22\u00a0<vmassol>\u00a0I see ManualTemplateTest  \n15:22\u00a0<tmortagne>\u00a0xwiki-enterprise-test-escaping cannot really support this kind of things  \n15:23\u00a0<tmortagne>\u00a0not the automated part at least  \n15:23\u00a0<tmortagne>\u00a0ManualTemplateTest is still HTTP based  \n15:24\u00a0<vmassol>\u00a0yeah ok what it means is that we shouldn't rely on these escpaing tests to be sure that we are properly escaping stuff  \n15:24\u00a0<tmortagne>\u00a0well you can do whatever you want in there but the only tool you have are HTTP based  \n15:24\u00a0<vmassol>\u00a0it's just a safeguard that works sometimes...  \n15:24\u00a0<tmortagne>\u00a0it works for many URL parameters  \n15:24\u00a0<tmortagne>\u00a0we often fix related thing  \n15:24\u00a0<tmortagne>\u00a0s/thing/things/  \n15:24\u00a0<tmortagne>\u00a0so it is definitely usefull, but not the empty content part  \n15:25\u00a0<vmassol>\u00a0mflorea: does your new livetable work without JS?  \n15:26\u00a0<vmassol>\u00a0work = degrades and is still usable somenow  \n15:26\u00a0<mflorea>\u00a0nothing in angular works without js :), the term \"live\" implies you need js to work  \n15:26\u00a0<vmassol>\u00a0\\*somehow  \n15:27\u00a0<mflorea>\u00a0it can be made, but it wasn't my target  \n15:27\u00a0<vmassol>\u00a0because you were with sergiu giving a -1 to drop support for js  \n15:27\u00a0<mflorea>\u00a0i.e. it can be made to degrade nicely  \n15:28\u00a0<mflorea>\u00a0yes, but for basic features. livetable is not a basic feature for me, as I said, \"live\" implies it's dynamic so it needs js  \n15:28\u00a0<vmassol>\u00a0navigatiion is a basic features for me  \n15:28\u00a0<mflorea>\u00a0by basic operations I mean CRUD on XWiki model  \n15:28\u00a0<vmassol>\u00a0Alldocs uses LT  \n15:28\u00a0<mflorea>\u00a0you can do navigation without a live table  \n15:28\u00a0<mflorea>\u00a0it doesn't block the navigation  \n15:28\u00a0<vmassol>\u00a0so we'll need to define preciselt what we mean by basic  \n15:28\u00a0<vmassol>\u00a0how do you navigate ?  \n15:28\u00a0<mflorea>\u00a0yes, we need to do that  \n15:28\u00a0<mflorea>\u00a0with links  \n15:29\u00a0<vmassol>\u00a0that's not navigation  \n15:29\u00a0<mflorea>\u00a0using the menu  \n15:29\u00a0<vmassol>\u00a0that's going idrectly to a place  \n15:29\u00a0<mflorea>\u00a0the panels  \n15:29\u00a0<mflorea>\u00a0yes, that is navigation from page to page  \n15:29\u00a0<vmassol>\u00a0there's no nav panel for navigation  \n15:29\u00a0<vmassol>\u00a0:)  \n15:29\u00a0<vmassol>\u00a0any panel that scales will use JS  \n15:30\u00a0<mflorea>\u00a0I think you're mixing navigation with search and filtering  \n15:30\u00a0<vmassol>\u00a0in any case we need to revote on this  \n15:30\u00a0<vmassol>\u00a0and have a clear agreement  \n15:30\u00a0<vmassol>\u00a0because I don't thin it makes sense  \n15:30\u00a0<vmassol>\u00a0to support not having JS  \n15:30\u00a0<vmassol>\u00a0espcailly with the bootstrap diection  \n15:30\u00a0<vmassol>\u00a0\\*direction  \n15:32\u00a0<AFKGeek>\u00a0has quit  \n15:33\u00a0<vmassol>\u00a0tmortagne: can I let you handle the change for the escaping tests?  \n15:33\u00a0<vmassol>\u00a0I mean is that something you wish to fix?  \n15:33\u00a0<tmortagne>\u00a0I will look at it  \n15:33\u00a0<vmassol>\u00a0ok  \n15:35\u00a0<vmassol>\u00a0hmm new build error in enterprise: http://ci.xwiki.org/job/xwiki-enterprise/109/console  \n15:35\u00a0<vmassol>\u00a0Caused by: java.lang.NullPointerException  \n15:35\u00a0<vmassol> at org.xwiki.extension.repository.internal.core.DefaultCoreExtensionRepository.exists(DefaultCoreExtensionRepository.java:181)  \n15:36\u00a0<vmassol>\u00a0hmm and also  \n15:36\u00a0<vmassol>\u00a0java.lang.NullPointerException: null  \n15:36\u00a0<vmassol> at java.util.zip.ZipFile.getZipEntry(ZipFile.java:531) ~[na:1.7.0\\_67]  \n15:36\u00a0<vmassol>\u00a0corrupted zip somewhere?  \n15:36\u00a0<tmortagne>\u00a0java.lang.NullPointerException: null  \n15:36\u00a0<tmortagne>\u00a0either that or a bug in the JVM zip support  \n15:37\u00a0<vmassol>\u00a0btw jmeter job is ok now  \n15:37\u00a0<tmortagne>\u00a0look like it yes  \n15:43\u00a0<ClemensR>\u00a0some problem similar to http://stackoverflow.com/questions/14993621/how-to-debug-nullpointerexception-occurred-in-library-code \u00a0?  \n15:47\u00a0<tmortagne>\u00a0yep sounds like it  \n15:49\u00a0<tmortagne>\u00a0but no idea why jar it is  \n15:49\u00a0<tmortagne>\u00a0reflections does not expect any error so it does not catch anything to tell us where it failed  \n15:54\u00a0<tmortagne>\u00a0I could protect the call to reflection to not kill the init but not finding any core extension is not great when you install extension that depend on one  \n15:57\u00a0<tmortagne>\u00a0(I have to go, back in 1h)  \n16:14\u00a0<Denis>\u00a0has quit  \n16:35\u00a0<msmeria>\u00a0has quit  \n16:48\u00a0<ClemensR>\u00a0has quit  \n16:59\u00a0<vmassol>\u00a0I have some git issue, maybe someone has experienced this...  \n16:59\u00a0<vmassol>\u00a0so I checkedout a tag  \n16:59\u00a0<vmassol>\u00a0and I did a stash pop  \n16:59\u00a0<vmassol>\u00a0there was some conflict which I fixed  \n17:00\u00a0<vmassol>\u00a0now when I do a git diff to get the patch I don't see the full diff between what was there before my git pop and now  \n17:00\u00a0<vmassol>\u00a0it seels I only get a diff corresponding to the changes I made to fix the conflict  \n17:00\u00a0<vmassol>\u00a0\\*seems  \n17:00\u00a0<vmassol>\u00a0any idea how to get the full diff?  \n17:01\u00a0<vmassol>\u00a0note that the stash was created on another branch (master)  \n17:02\u00a0<vmassol>\u00a0found it  \n17:02\u00a0<vmassol>\u00a0git diff \u2014cached  \n17:02\u00a0<vmassol>\u00a0:)  \n17:12\u00a0<tmortagne>\u00a0mflorea, Enygma`: are you ok to remove the test for empty result in xwiki-enterprise-test-escaping ?  \n17:13\u00a0<tmortagne>\u00a0it does not bring and only generate false positives  \n17:13\u00a0<tmortagne>\u00a0s/bring/bring any value/  \n17:13\u00a0<mflorea>\u00a0+1  \n17:18\u00a0<Enygma`>\u00a0tmortagne: not sure of what its initial intent was  \n17:19\u00a0<Enygma`>\u00a0you might consider that a \"common\" behavior for code that fails escaping tests (i.e. manages to inject code due to insufficient escaping) is to sometimes end up displaying nothing, since it was not designed to go along the path it ended up going with the injected code  \n17:20\u00a0<Enygma`>\u00a0though I agree about the false positives annoying issue...  \n17:21\u00a0<Enygma`>\u00a0with people forgetting to update the list of ignores  \n17:22\u00a0<Enygma`>\u00a0and you might be right about it not bringing any value, since an injected code could execute in both cases, whether it displays something or whether it doesn`t  \n17:22\u00a0<Enygma`>\u00a0so +0.5 from me too  \n17:24\u00a0<Enygma`>\u00a0the only usecase I can think of related to tests is that the escaping infrastructure looks for the mallicious text inside the rendered output. If the mallicious text causes the code to render \\*no output\\*, then the test will \\*pass\\*, since the mallicious text is not found in the output (because there is no output! not because it was nicely escaped)  \n17:24\u00a0<Enygma`>\u00a0so maybe the risk is higher than the inconvenience?  \n17:24\u00a0<Enygma`>\u00a0wdyt?  \n17:26\u00a0<tmortagne>\u00a0Enygma`: anything ca cause the code to not display anything, I don't see how this is related to escaping issue  \n17:27\u00a0<Enygma`>\u00a0tmortagne: the idea is that in our current setup, we have code that is expected to produce content in normal situations. We give it abnormal inputs and if it does not output content, then we have a problem that needs fixing.  \n17:28\u00a0<Enygma`>\u00a0so the only \"vulnerability\" left would be when testing code that produces no output... in the way that we can`t really test it with this default escaping infrastructure.  \n17:29\u00a0<Enygma`>\u00a0so don`t you consider my usecase detailed above as valid?  \n17:31\u00a0<tmortagne>\u00a0I understand your use case but frankly it does not worth it IMO  \n17:32\u00a0<cjd>\u00a0not the cheapest attack vector  \n17:33\u00a0<tmortagne>\u00a0yes empty content is not a big security risk and this project is about security  \n17:35\u00a0<KermitTheFragger>\u00a0has quit  \n17:41\u00a0<DarkKnightCZ>\u00a0has quit  \n17:50\u00a0<lucaa>\u00a0has quit  \n18:00\u00a0<cjd>\u00a0has quit  \n18:05\u00a0<Lyes>\u00a0has quit  \n18:09\u00a0<mflorea>\u00a0has quit  \n18:16\u00a0<vmassol>\u00a0still 7 test failures at http://ci.xwiki.org/job/xwiki-enterprise-test-ui/129/#showFailuresLink  \n18:18\u00a0<vmassol>\u00a0btw just seen https://gist.githubusercontent.com/vmassol/2998fdd80b0928f45c95/raw/cc5aa9d1d4603f694b100c07facee7742c26df32/gistfile1.txt not sure what's the proble  \n18:26\u00a0<evalica>\u00a0has quit  \n18:28\u00a0<momomomomo>\u00a0has joined #xwiki  \n18:30\u00a0<woshilapin>\u00a0has quit  \n18:31\u00a0<Enygma`>\u00a0has quit  \n18:31\u00a0<Enygma`>\u00a0has joined #xwiki  \n18:44\u00a0<Enygma`>\u00a0has quit  \n18:59\u00a0<lucaa>\u00a0has joined #xwiki  \n19:05\u00a0<Denis>\u00a0has joined #xwiki  \n19:09\u00a0<tmortagne>\u00a0has quit  \n19:12\u00a0<momomomomo>\u00a0has quit  \n19:21\u00a0<lucaa>\u00a0has quit  \n19:24\u00a0<Pbas>\u00a0has quit  \n19:26\u00a0<momomomomo>\u00a0has joined #xwiki  \n19:32\u00a0<Slashman>\u00a0has quit  \n19:36\u00a0<Denis>\u00a0has quit  \n20:00\u00a0<Denis>\u00a0has joined #xwiki  \n21:18\u00a0<Denis>\u00a0has quit  \n21:28\u00a0<Emenems>\u00a0has quit  \n22:04\u00a0<momomomomo>\u00a0has quit  \n22:09\u00a0<vmassol>\u00a0has quit  \n22:27\u00a0<Denis>\u00a0has joined #xwiki  \n22:55\u00a0<Denis>\u00a0has quit  \n23:49\u00a0<Guest46382>\u00a0has quit\n"}