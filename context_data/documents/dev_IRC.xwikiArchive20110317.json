{"id": "dev:IRC.xwikiArchive20110317", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110317", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:09\u00a0<Enygma`>\u00a0has quit  \n01:10\u00a0<SvenDowideit\\_>\u00a0has joined #xwiki  \n01:40\u00a0<SvenDowi->\u00a0has joined #xwiki  \n01:51\u00a0<jvdrean>\u00a0has quit  \n02:17\u00a0<abusenius>\u00a0has quit  \n02:17\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n02:17\u00a0<abusenius\\_>\u00a0is now known as <abusenius>  \n02:29\u00a0<DrLou>\u00a0has quit  \n02:47\u00a0<SvenDowi->\u00a0has quit  \n02:50\u00a0<SvenDowi->\u00a0has joined #xwiki  \n02:50\u00a0<SvenDowideit\\_>\u00a0has quit  \n02:54\u00a0<SvenDowideit\\_>\u00a0has joined #xwiki  \n03:12\u00a0<xwikibot>\u00a0has joined #xwiki  \n03:18\u00a0<SvenDowideit>\u00a0has quit  \n03:18\u00a0<SvenDowideit\\_>\u00a0has quit  \n03:20\u00a0<SvenDowi->\u00a0is now known as <SvenDowieit>  \n03:20\u00a0<SvenDowieit>\u00a0is now known as <SvenDowideit>  \n03:20\u00a0<SvenDowideit>\u00a0has quit  \n03:20\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n03:40\u00a0<venkatesh>\u00a0has joined #xwiki  \n03:42\u00a0<venkatesh>\u00a0has quit  \n04:48\u00a0<abusenius>\u00a0has quit  \n07:02\u00a0<vmassol>\u00a0has joined #xwiki  \n08:37\u00a0<Denis>\u00a0has joined #xwiki  \n08:45\u00a0<vmassol>\u00a0good morning  \n08:47\u00a0<+cjdelisle>\u00a0Good morning. Debugging package import. Fool I was to think it would use the same attachment save api as everything else :/  \n08:47\u00a0<vmassol>\u00a0cjdelisle: so importing a XAR with attachment fails currently?  \n08:47\u00a0<+cjdelisle>\u00a0Yes.  \n08:48\u00a0<vmassol>\u00a0ok  \n08:49\u00a0<+cjdelisle>\u00a0The problem you were talking about yesterday was because attachments are not automatically moved. I Started on that road but it became difficult to detect all deleted attachments and I realized that storage + automagic is bad.  \n08:50\u00a0<vmassol>\u00a0well right now it makes it almost impossible to use the new storage  \n08:50\u00a0<vmassol>\u00a0it's just too hard  \n08:51\u00a0<vmassol>\u00a0all the config changes + xwikiproperties change + that  \n08:51\u00a0<vmassol>\u00a0we need to streamline this  \n08:53\u00a0<+cjdelisle>\u00a0Oh re XWikiPreferences. The trunk does not work now because xwikipreferences overflows the class xml table size.  \n08:53\u00a0<+cjdelisle>\u00a0I started working on this and built and deployed trunk and noticed that.  \n08:54\u00a0<+cjdelisle>\u00a0Attachments could be moved using a groovy script. I wasn't thinking about the jetty setup where the attachments are preloaded into the db. Perhaps a small component would do it for that case.  \n08:54\u00a0<vmassol>\u00a0I tested yesterday and it was working so it means someone added something to it since then  \n08:55\u00a0<vmassol>\u00a0cjdelisle: why do we need to move attachments over if the user is ok to keep the old ones in the db?  \n08:55\u00a0<vmassol>\u00a0also I asked some questions yesterday  \n08:55\u00a0<vmassol>\u00a0for ex:  \n08:55\u00a0<vmassol>\u00a0what happens if I ask for an attachment not on the FS but present inthe DB, does it find it?  \n08:56\u00a0<vmassol>\u00a0(is the storage a chaining one to the DB)  \n08:56\u00a0<+cjdelisle>\u00a0It did bit I removed that.  \n08:57\u00a0<+cjdelisle>\u00a0It is relitively easy to look for an attachment in the db but more complicated to look for an attachment archive and more complicated still to look for a deleted attachment.  \n08:57\u00a0<+cjdelisle>\u00a0Not to mention it is gouge your eyes out ugly.  \n08:57\u00a0<vmassol>\u00a0ok so indeed we need to provide a script to move stuff over  \n08:58\u00a0<vmassol>\u00a0could be done as a migration  \n08:58\u00a0<+cjdelisle>\u00a0I was planning on writing up a script.  \n08:58\u00a0<sburjan>\u00a0has joined #xwiki  \n08:58\u00a0<vmassol>\u00a0the migration would check if the config is set to file system for ex  \n09:00\u00a0<vmassol>\u00a0by migration I mean DB migration in xwiki-core  \n09:00\u00a0<+cjdelisle>\u00a0cyclic dependecy  \n09:01\u00a0<+cjdelisle>\u00a0or actually no it would work.  \n09:01\u00a0<+cjdelisle>\u00a0So what do you see it doing? Copying everything to the filesystem and leaving it in the db?  \n09:02\u00a0<vmassol>\u00a0well you just said that we cannot leace stuff in the db anyway!  \n09:02\u00a0<vmassol>\u00a0this is what was happening to me  \n09:03\u00a0<vmassol>\u00a0I would remove from the DB (after verifying that what's on the filesystem is ok) since you may need to run this script several times in a row  \n09:03\u00a0<vmassol>\u00a0hmm  \n09:03\u00a0<+cjdelisle>\u00a0If you copy things to the filesystem and remove them from the db, then something goes wrong, perhaps the admin had the work directory set to /dev/null then you have just automatically deleted every attachment from the db.  \n09:03\u00a0<vmassol>\u00a0I need your explanation first  \n09:03\u00a0<vmassol>\u00a0as to why it doesn't work when some attachments are left in the db  \n09:04\u00a0<vmassol>\u00a0again this is the problem I had yesterday  \n09:04\u00a0<+cjdelisle>\u00a0Did I say that?  \n09:04\u00a0<vmassol>\u00a0you asked if we should leave stuff in the db  \n09:04\u00a0<vmassol>\u00a0stuff = attachment  \n09:04\u00a0<vmassol>\u00a0ok let me ask the question again  \n09:05\u00a0<vmassol>\u00a0I don't think it's correct to ask users to move attachments out of the db when they switch their config to use the filesystem and they don't care about the attachments already in the db  \n09:05\u00a0<vmassol>\u00a0why couldn't we make this work?  \n09:05\u00a0<vmassol>\u00a0this is the part I don't understand  \n09:05\u00a0<vmassol>\u00a0and the problem I reported yesterday  \n09:06\u00a0<+cjdelisle>\u00a0\"they don't care about the attachments already in the db\" <-- hehe well if they really didn't care....  \n09:06\u00a0<vmassol>\u00a0the attachments in the db should simply not get accessed  \n09:06\u00a0<vmassol>\u00a0but instead I got this error log I pasted  \n09:06\u00a0<vmassol>\u00a0that wasn't stopping btw  \n09:06\u00a0<vmassol>\u00a0it kept fillng up all the logs  \n09:07\u00a0<+cjdelisle>\u00a0Ahh, I see. You want the attachment metadata to disappear if the content is unavailable.  \n09:07\u00a0<vmassol>\u00a0if I switch to FS then why would XWiki try to access the attachments in the DB  \n09:07\u00a0<vmassol>\u00a0?  \n09:07\u00a0<vmassol>\u00a0(unless it was for fallback which you said you removed)  \n09:07\u00a0<+cjdelisle>\u00a0The metadata has to be stored in the db otherwise it would be horribly slow.  \n09:08\u00a0<vmassol>\u00a0not sure what metadata is  \n09:08\u00a0<vmassol>\u00a0but still  \n09:08\u00a0<vmassol>\u00a0what do these metadata contain?  \n09:08\u00a0<+cjdelisle>\u00a0Name, size, document it's attached to.  \n09:08\u00a0<+cjdelisle>\u00a0user who saved it.  \n09:08\u00a0<+cjdelisle>\u00a0when  \n09:08\u00a0<+cjdelisle>\u00a0These things are needed when you load the document.  \n09:09\u00a0<vmassol>\u00a0ok so we're reusing the same metadata both storages is that it?  \n09:09\u00a0<vmassol>\u00a0s/both/for both/  \n09:09\u00a0<+cjdelisle>\u00a0Correct.  \n09:09\u00a0<vmassol>\u00a0I see the problem now  \n09:10\u00a0<+cjdelisle>\u00a0If you had to poll the filesystem on each document load the server disk would thrash itself to pieces.  \n09:10\u00a0<vmassol>\u00a0and metadata and attachment content are separate tables in the DB. Didn't know that  \n09:10\u00a0<+cjdelisle>\u00a0That is correct.  \n09:10\u00a0<vmassol>\u00a0hmm so one soltuion  \n09:11\u00a0<vmassol>\u00a0would be to have a field in the DB in the attachment metadata table that specifies which storage is used for that metadata  \n09:11\u00a0<+cjdelisle>\u00a0And they are handled quite seperately. The meta is loaded in XWikiHibernateStore.  \n09:11\u00a0<vmassol>\u00a0that way we could use both  \n09:11\u00a0<vmassol>\u00a0;)  \n09:11\u00a0<vmassol>\u00a0we could even do things like: for large attachmetns use FS and for small use DB  \n09:12\u00a0<vmassol>\u00a0;)  \n09:12\u00a0<+cjdelisle>\u00a0Small attachments ought to be memory cached. todo todo todo  \n09:12\u00a0<+cjdelisle>\u00a0Knowing something's size allows one to use very clever eviction polocies.  \n09:13\u00a0<vmassol>\u00a0wdyt about this idea of deciding where an attachment is stored per attachmentmetadata? sounds quite fancy to me  \n09:13\u00a0<vmassol>\u00a0comes a bit late as an idea for now though....  \n09:14\u00a0<vmassol>\u00a0a pity since it would have solved the migration issue  \n09:14\u00a0<vmassol>\u00a0well first, is it a good idea or not?  \n09:14\u00a0<+cjdelisle>\u00a0I'm not sure I can prove that it would allow us to make all attachments disappear if their storage engine is unavailable.  \n09:14\u00a0<evalica>\u00a0has joined #xwiki  \n09:15\u00a0<vmassol>\u00a0that's easy no?  \n09:15\u00a0<vmassol>\u00a0like get the storage hint from the db  \n09:15\u00a0<vmassol>\u00a0lookup impl  \n09:15\u00a0<vmassol>\u00a0if not there return not found attachment  \n09:15\u00a0<+cjdelisle>\u00a0That fixes XHS.loadAttachment but what if attachments are looked up with a search query?  \n09:16\u00a0<vmassol>\u00a0search will return all metadata  \n09:16\u00a0<vmassol>\u00a0then when accessed you'll get an atachment not there  \n09:16\u00a0<+cjdelisle>\u00a0And it will tell users implementing such search that there are attachments which they cannot access so they are `not there'  \n09:16\u00a0<vmassol>\u00a0sure but that'll be the reality  \n09:17\u00a0<vmassol>\u00a0then we cna have an admin script if we want to remove stale attachments (but honeslty a storage should't disappear). You have the same issue today if some removes the FS directory  \n09:17\u00a0<vmassol>\u00a0s/some/someone/  \n09:17\u00a0<+cjdelisle>\u00a0To me it makes more sense for an administrator who understands the idea of moving attachments to run a script once which moves all attachments over and then after that there are no more surprises.  \n09:18\u00a0<vmassol>\u00a0errr?  \n09:18\u00a0<vmassol>\u00a0you're talking about disappearing storage  \n09:18\u00a0<+cjdelisle>\u00a0s/move/copy/ It's safer that way.  \n09:18\u00a0<vmassol>\u00a0so if someone removes the FS dir you'll get the exact same problem  \n09:18\u00a0<vmassol>\u00a0so to summarize  \n09:19\u00a0<vmassol>\u00a0it's possible ot have attachment metadtaa for which there's no stored attachment  \n09:19\u00a0<vmassol>\u00a0and IMO we just need to handle this case with a not found attachment error bubbling up  \n09:19\u00a0<vmassol>\u00a0then code can decide to ignore it  \n09:19\u00a0<vmassol>\u00a0or not  \n09:20\u00a0<vmassol>\u00a0for ex a list listing all attachments would catch this error to display all present attachmets  \n09:20\u00a0<vmassol>\u00a0and an admin script to remove stale attachments would remove the meatdata  \n09:20\u00a0<kwoot>\u00a0has joined #xwiki  \n09:20\u00a0<+cjdelisle>\u00a0Agreed. about the \"not found\" error. Unfortunately since loading the page should not require polling the filesystem, the error will present itself when people click on the attachment.  \n09:21\u00a0<vmassol>\u00a0yes but that's ok  \n09:21\u00a0<vmassol>\u00a0a storage doesn't just \"disappear\"  \n09:21\u00a0<vmassol>\u00a0and again you have the exact same problem right now  \n09:21\u00a0<vmassol>\u00a0if someone deletes the FS directory  \n09:21\u00a0<vmassol>\u00a0so it's norma that they get an error message  \n09:21\u00a0<vmassol>\u00a0saying that the attachment could not be found  \n09:21\u00a0<+cjdelisle>\u00a0Well, we kind of have to accept that things go wrong when people start deleting things.  \n09:22\u00a0<kwoot>\u00a0Sorry for the intrusion. Just showing a college how to use IRC when asking xwiki questions. Please ignore this line.  \n09:22\u00a0<+cjdelisle>\u00a0(on the server filesystem)  \n09:22\u00a0<vmassol>\u00a0we're talking about disappearing storage here  \n09:22\u00a0<vmassol>\u00a0and yes I'm talking about  \n09:22\u00a0<vmassol>\u00a0accepting that an attachment may not be there  \n09:22\u00a0<vmassol>\u00a0while its metadata is still there  \n09:22\u00a0<lucaa>\u00a0has joined #xwiki  \n09:23\u00a0<vmassol>\u00a0for users I'd do what I mentioned above and for admins I'd have a page in the admin  \n09:23\u00a0<vmassol>\u00a0listing all attachmetns with mismatch  \n09:23\u00a0<vmassol>\u00a0with option to remove \"invalid\" metadata  \n09:23\u00a0<+cjdelisle>\u00a0Or a script which crawls attachments looking for ones which are unsynchronized.  \n09:23\u00a0<vmassol>\u00a0well IMO you don't always want to remove them automatically  \n09:24\u00a0<vmassol>\u00a0it should be an adminaction  \n09:24\u00a0<vmassol>\u00a0like for ex someone moved the instance  \n09:24\u00a0<vmassol>\u00a0and forgot to move the FS directory  \n09:24\u00a0<+cjdelisle>\u00a0No, not remove, just allert the admin.  \n09:24\u00a0<vmassol>\u00a0you don't want to remove the metadata  \n09:24\u00a0<vmassol>\u00a0just copy the FS dir over  \n09:25\u00a0<+cjdelisle>\u00a0Yes, I agree on all points there. Never delete anything, make the 'dangerous' opperations require admin intervention so that he understands what is going on.  \n09:25\u00a0<vmassol>\u00a0yep  \n09:26\u00a0<vmassol>\u00a0so I find this idea of having a per attacment storage interesting  \n09:26\u00a0<+cjdelisle>\u00a0max\\_packet\\_size has caused so much FUD since attachments (were) being cached and people were thinking it was losing things. Just stopping caching of attachments on save was a big win there.  \n09:27\u00a0<vmassol>\u00a0yes  \n09:28\u00a0<+cjdelisle>\u00a0I don't think we can safely implement a dual system. We can fix everything (and there will be a lot) that relies on metadata but in the end there will be something which escapes us and it will lead to an attachment which \"is there but is not there\"  \n09:28\u00a0<+cjdelisle>\u00a0a ghost  \n09:28\u00a0<vmassol>\u00a0I don't understand the issue  \n09:28\u00a0<vmassol>\u00a0it's the opposite to me  \n09:29\u00a0<vmassol>\u00a0since we don't move anything around  \n09:29\u00a0<vmassol>\u00a0we don't have this problem  \n09:29\u00a0<vmassol>\u00a0can you provide a use case?  \n09:29\u00a0<vmassol>\u00a0I can't see one that wouldn't happen alreayd now  \n09:30\u00a0<+cjdelisle>\u00a0This was regarding the suggestion to ignore (don't load) metadata if it's content is stored in a different type of store.  \n09:30\u00a0<vmassol>\u00a0I don't understand what this means and why we would do this  \n09:30\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:30\u00a0<vmassol>\u00a0(with the per attachment storage dea)  \n09:30\u00a0<vmassol>\u00a0s/dea/idea/  \n09:31\u00a0<+cjdelisle>\u00a0I assumed that was what you meant about adding a column to metadata which tells is where it is stored.  \n09:31\u00a0<+cjdelisle>\u00a0Ahh, you mean to tell us where it is stored so that the loader will use the correct attachment sotre.  \n09:31\u00a0<jvdrean>\u00a0has joined #xwiki  \n09:31\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:32\u00a0<+cjdelisle>\u00a0I didn't think of that although it sounds like it will introduce complexity.  \n09:33\u00a0<Denis>\u00a0has quit  \n09:33\u00a0<Denis>\u00a0has joined #xwiki  \n09:33\u00a0<+cjdelisle>\u00a0If I were to delete an attachment which was stored in the DB then create a new one with the same name, it would presumably be stored on the filesystem.  \n09:34\u00a0<+cjdelisle>\u00a0And rollback would be extremely complex. Although it should work, should is a dangerous word.  \n09:34\u00a0<vmassol>\u00a0\"Ahh, you mean to tell us where it is stored so that the loader will use the correct attachment sotre.\": yes exactly  \n09:35\u00a0<vmassol>\u00a0the ability to have several stores is really nice IMO  \n09:35\u00a0<vmassol>\u00a0it solves not only migration issues  \n09:35\u00a0<vmassol>\u00a0but also opens up possibiities  \n09:36\u00a0<lucaa>\u00a0has quit  \n09:36\u00a0<vmassol>\u00a0it doesn't feel hard to do  \n09:36\u00a0<vmassol>\u00a0from a bird's eye view  \n09:37\u00a0<vmassol>\u00a0you'd implemnt it with a composite store impl (hint = composite) ;)  \n09:37\u00a0<+cjdelisle>\u00a0My long term thinking right now is that we will start storing more and more on the filesystem. For example when a document is saved in the DB, it would be saved in the FS aswell. This way we have a running backup which is independent of the DB and eventually when everything is on the FS, we will be able to drop the db and resync from the FS.  \n09:38\u00a0<vmassol>\u00a0I don't think it's right to do backup inside xwiki  \n09:38\u00a0<vmassol>\u00a0it's completley unbalanced  \n09:38\u00a0<vmassol>\u00a0why would you do this only for attachments, not for doc cotent, why would you backup with several systems at once  \n09:39\u00a0<vmassol>\u00a0from an archietcture POV it's not right IMO  \n09:39\u00a0<vmassol>\u00a0(and slow)  \n09:39\u00a0<vmassol>\u00a0and I don't agree about having everything int he db at all  \n09:39\u00a0<+cjdelisle>\u00a0Well it has the advantage that it allows us to switch DB schemas when it is all finished.  \n09:39\u00a0<vmassol>\u00a0(if by everything you mean everything)  \n09:39\u00a0<vmassol>\u00a0and IMO we should do the opposite  \n09:39\u00a0<vmassol>\u00a0ie move everything in the DB  \n09:40\u00a0<vmassol>\u00a0it's just a tmp limitation of some DB impl at the moment  \n09:40\u00a0<vmassol>\u00a0so IMO FS will disappear in due time  \n09:40\u00a0<vmassol>\u00a0having 2 stores is a pain  \n09:40\u00a0<vmassol>\u00a0it's a pain for setup  \n09:40\u00a0<vmassol>\u00a0it's a pain for maintenanc/upgrades/backups  \n09:40\u00a0<+cjdelisle>\u00a0hmm store everything in the db?  \n09:40\u00a0<vmassol>\u00a0it's a pain for documentation  \n09:41\u00a0<+cjdelisle>\u00a0It sounds nice but it does not scail.  \n09:41\u00a0<vmassol>\u00a0we only do it right now because we have no other way  \n09:41\u00a0<vmassol>\u00a0dbs don't scale?  \n09:41\u00a0<kwoot>\u00a0has quit  \n09:41\u00a0<vmassol>\u00a0dbs store on the FS in the end  \n09:41\u00a0<vmassol>\u00a0so it's the same  \n09:41\u00a0<+cjdelisle>\u00a0DBs don't store large entries well.  \n09:42\u00a0<vmassol>\u00a0I'm not an expert in this domain but I'd be interested to verify this assertion  \n09:42\u00a0<vmassol>\u00a0as I don't understand the limitating factor  \n09:43\u00a0<+jvelociter>\u00a0hehe Sergiu is cheating he started the bug fixing day yesterday at midnight :)  \n09:43\u00a0<+cjdelisle>\u00a0You can put large entries into a db using BLOB types but these are different for each db vender.  \n09:43\u00a0<vmassol>\u00a0jvelociter: he also does  \n09:43\u00a0<vmassol>\u00a0(cheating)  \n09:43\u00a0<+sburjan>\u00a0vmassol: I am testing Extension Manager. Could you give me an example for an extension ? I need to fill the \"Extension identifier\" field  \n09:43\u00a0<vmassol>\u00a0tmortagne: good monring  \n09:43\u00a0<+tmortagne>\u00a0good morning  \n09:43\u00a0<vmassol>\u00a0would the calendar app work now?  \n09:43\u00a0<vmassol>\u00a0(except for the restart)  \n09:44\u00a0<+tmortagne>\u00a0yes you can install it now  \n09:44\u00a0<vmassol>\u00a0tmortagne: can you recommend an extension to sburjan. But sburjan you should pick the one you want  \n09:44\u00a0<+sburjan>\u00a0from where ? :)  \n09:44\u00a0<vmassol>\u00a0(as otherwise the test isn't fully valid since tmortagne will give you he tested I'm sure)  \n09:44\u00a0<vmassol>\u00a0sburjan: the id must be of the form  \n09:44\u00a0<vmassol>\u00a0groupid:artifactid  \n09:44\u00a0<vmassol>\u00a0from = http://maven.xwiki.org/  \n09:44\u00a0<+sburjan>\u00a0ok.  \n09:45\u00a0<+tmortagne>\u00a0sburjan: anything from maven xwiki maven or central maven repository  \n09:45\u00a0<+tmortagne>\u00a0xwiki release repository  \n09:45\u00a0<vmassol>\u00a0sburjan: you could test 3 things  \n09:45\u00a0<+tmortagne>\u00a0or any repository you add in the xwiki.properties  \n09:45\u00a0<vmassol>\u00a01) install a jar and try using it from a groovy script for ex  \n09:45\u00a0<vmassol>\u00a02) install a XAR  \n09:45\u00a0<vmassol>\u00a03) install some artifavt with transitive deps and ensure they're installed too  \n09:46\u00a0<vmassol>\u00a04) stop XWiki and retsrat and verify they're still installed  \n09:46\u00a0<+tmortagne>\u00a0you should have a bug on uninstall extension you installed on a particular wiki, I need to work on that this morning  \n09:46\u00a0<vmassol>\u00a05) uninstall them  \n09:46\u00a0<vmassol>\u00a06) try upgrading a XAR app  \n09:46\u00a0<vmassol>\u00a07) test on one wiki and on a XEM since you can install on a given wiki  \n09:46\u00a0<+jvelociter>\u00a0nice article on refactoring : http://pragprog.com/magazines/2010-06/the-mikado-method  \n09:47\u00a0<vmassol>\u00a0jvelociter: seen it already :)  \n09:47\u00a0<+jvelociter>\u00a0I bet you did :)  \n09:48\u00a0<+sburjan>\u00a0vmassol, tmortagne : so Extension manager is \\_not\\_ related to extensions.xwiki.org ?  \n09:48\u00a0<vmassol>\u00a0sburjan: it's not  \n09:48\u00a0<vmassol>\u00a0but  \n09:48\u00a0<+tmortagne>\u00a0sburjan: no  \n09:48\u00a0<+tmortagne>\u00a0at some point extension.xwiki.org could be one of the repositories  \n09:48\u00a0<vmassol>\u00a0in the future we could imagine an implementation that considers extensions.xwiki.org as a repo  \n09:49\u00a0<vmassol>\u00a0:)  \n09:49\u00a0<+sburjan>\u00a0ok. I'm still unable to find something to install from maven repo. I am looking in http://maven.xwiki.org/releases/org/xwiki/  \n09:49\u00a0<+tmortagne>\u00a0vmassol: \u00a0for now we should use the <url> property in maven project and put the extension page (extension manager reads it now since I had to parse the pom file finally)  \n09:50\u00a0<+tmortagne>\u00a0sburjan: look in extebsion.xwiki.org to find ideas  \n09:50\u00a0<+tmortagne>\u00a0lots of extension are also in maven repository  \n09:50\u00a0<vmassol>\u00a0tmortagne: is the plan to display that info in the UI?  \n09:50\u00a0<+tmortagne>\u00a0there is no detailed plan on this but it's a usefull information  \n09:50\u00a0<vmassol>\u00a0sburjan: check my 7 points above  \n09:51\u00a0<vmassol>\u00a0for 1) you can pick any jar from the central repo  \n09:51\u00a0<vmassol>\u00a0tmortagne: sure we need to fill it anyway  \n09:51\u00a0<+sburjan>\u00a0vmassol: I don't know where is the central repo. I'm to so familiar with our maven repo structure  \n09:51\u00a0<vmassol>\u00a0(the url info in the pom)  \n09:51\u00a0<vmassol>\u00a0repo1.maven.org/maven2/  \n09:51\u00a0<+sburjan>\u00a0ok  \n09:51\u00a0<vmassol>\u00a0it's not our infra  \n09:52\u00a0<vmassol>\u00a0it's maven's  \n09:52\u00a0<+sburjan>\u00a0I knew that :)  \n09:52\u00a0<+sburjan>\u00a0so basically every directory that has a pom file is considered a possible extension >?  \n09:52\u00a0<vmassol>\u00a0no  \n09:52\u00a0<vmassol>\u00a0every dir that has a jar or xar  \n09:53\u00a0<+tmortagne>\u00a0well with a pom for now  \n09:53\u00a0<+tmortagne>\u00a0extension manager only support extension with proper pom.xml  \n09:53\u00a0<vmassol>\u00a0you can find artifacts with just a pom that are not jars or xars  \n09:53\u00a0<+sburjan>\u00a0ok. I'm gonna give a try to install the IrcBot  \n09:53\u00a0<+tmortagne>\u00a0because it needs to find the packaging  \n09:53\u00a0<vmassol>\u00a0yes good one  \n09:53\u00a0<vmassol>\u00a0it's 2)  \n09:53\u00a0<+sburjan>\u00a0yes  \n09:53\u00a0<vmassol>\u00a0doesn't have deps  \n09:54\u00a0<vmassol>\u00a0for 3) you'll need to find a more complex one with deps  \n09:54\u00a0<+tmortagne>\u00a0sburjan: calendar is a good one as vincent suggested since it's a xar with jar deps but you need to change something in xwiki.cfg to make it work unfortunately  \n09:54\u00a0<vmassol>\u00a0tmortagne: do you check the compat when installing?  \n09:55\u00a0<vmassol>\u00a0(or not yet)  \n09:55\u00a0<+tmortagne>\u00a0vmassol: if by compat you mean looking at core extensions version against extension dependency yes  \n09:56\u00a0<vmassol>\u00a0I mean for ex installing a dpe that requires xwiki-core 2.6 and the installed xwiki-core is 2.3  \n09:56\u00a0<+tmortagne>\u00a0you will get a warning before applying the install indicating that you would have issues because of that  \n09:56\u00a0<vmassol>\u00a0ah that's cool  \n09:56\u00a0<vmassol>\u00a0sburjan: that's 8)  \n09:56\u00a0<vmassol>\u00a08 )  \n09:56\u00a0<vmassol>\u00a0(for your test plan)  \n09:57\u00a0<+tmortagne>\u00a0but this wil be hard to test on a trunk :)  \n09:57\u00a0<+sburjan>\u00a0I don't think I will be able to make all these testes on Extension Manager  \n09:57\u00a0<vmassol>\u00a0you can cheat  \n09:57\u00a0<vmassol>\u00a0repackage an artifact with a different version  \n09:58\u00a0<vmassol>\u00a0but it needs to be published to a repo....  \n09:58\u00a0<+tmortagne>\u00a0yep  \n09:58\u00a0<vmassol>\u00a0is there a FS repo?  \n09:58\u00a0<+tmortagne>\u00a0you can do a local repo  \n09:58\u00a0<vmassol>\u00a0ok  \n09:58\u00a0<+tmortagne>\u00a0and put it in the xwiki.properties  \n09:58\u00a0<+sburjan>\u00a0vmassol: I am trying to install : org.xwiki.platform.applications:xwiki-application-ircbot .. but it seems it can't be resolved  \n09:58\u00a0<+tmortagne>\u00a0not sure i added it in the generated xwiki.properties, nee to check  \n09:59\u00a0<vmassol>\u00a0sburjan: give me the url  \n09:59\u00a0<+tmortagne>\u00a0sburjan: you need to provide the version, you should get an error about that  \n09:59\u00a0<+tmortagne>\u00a0what do you get ?  \n09:59\u00a0<+sburjan>\u00a0URL : http://maven.xwiki.org/releases/org/xwiki/platform/applications/xwiki-application-ircbot/1.0/  \n10:00\u00a0<vmassol>\u00a0ok so the id is correct  \n10:00\u00a0<+sburjan>\u00a0works  \n10:00\u00a0<+sburjan>\u00a0I've put 1 instead of 1.0 at version  \n10:00\u00a0<+tmortagne>\u00a0ok  \n10:00\u00a0<+tmortagne>\u00a0version is a string for now, it's not really able to guess the exact version, maybe later  \n10:01\u00a0<+tmortagne>\u00a0plus providing the version will not be always required when i can implement searching for the last one  \n10:03\u00a0<+tmortagne>\u00a0but i would like to have some repository cache first like apt-get update does to speed up resolution  \n10:03\u00a0<+tmortagne>\u00a0(and being able to do search etc...)  \n10:07\u00a0<+tmortagne>\u00a0hmm found bug with backward dependencies resolution it seems, working on it  \n10:07\u00a0<+sburjan>\u00a0tmortagne: what's the difference between install and apply button ?  \n10:08\u00a0<+sburjan>\u00a0because after resolving, Install button doesn't do anything (at least not visible)  \n10:08\u00a0<+tmortagne>\u00a0sburjan: apply means apply install  \n10:08\u00a0<vmassol>\u00a0tmortagne: we need to change the terminology? too hard for a user... :)  \n10:08\u00a0<+sburjan>\u00a0ok  \n10:08\u00a0<+tmortagne>\u00a0when you click install it's indicating you what it will doing first  \n10:08\u00a0<+sburjan>\u00a0I see :)  \n10:08\u00a0<+tmortagne>\u00a0resolve is something else  \n10:08\u00a0<+tmortagne>\u00a0nothing to do with install  \n10:09\u00a0<+sburjan>\u00a0I know  \n10:09\u00a0<+tmortagne>\u00a0when you click on install it does happen something since it list you what it will do  \n10:09\u00a0<+tmortagne>\u00a0so i don't understand why you say there is nothing visible  \n10:10\u00a0<+tmortagne>\u00a0but anyway no need to report that kind of things  \n10:10\u00a0<+tmortagne>\u00a0that's not THE UI that something test test the framework, the real UI will have anything to do with that  \n10:10\u00a0<lucaa>\u00a0has joined #xwiki  \n10:10\u00a0<+tmortagne>\u00a0s/have/not have/  \n10:14\u00a0<+sburjan>\u00a0ok. I've installed IrcBot, but even after page refresh It's not listed anywhere on that page  \n10:15\u00a0<+sburjan>\u00a0seems that only jars are listed  \n10:15\u00a0<jvdrean>\u00a0has quit  \n10:15\u00a0<+tmortagne>\u00a0sburjan: works well for me  \n10:15\u00a0<+tmortagne>\u00a0what are you testing ?  \n10:16\u00a0<+tmortagne>\u00a0i did a fix yesterday maybe XE has not be built or something  \n10:16\u00a0<arkub>\u00a0has joined #xwiki  \n10:16\u00a0<+sburjan>\u00a0I instaleld ircbot. but I am not able to uninstall because it's not listed nowhere at installed extensions  \n10:16\u00a0<+tmortagne>\u00a0i mean what XE are you using  \n10:16\u00a0<+tmortagne>\u00a0again that has been fixed yesterday  \n10:16\u00a0<mflorea>\u00a0has joined #xwiki  \n10:17\u00a0<+jvelociter>\u00a0mflorea: nice WYSIWYG admin section !  \n10:17\u00a0<+sburjan>\u00a0XWiki Enterprise 3.0-SNAPSHOT.35657  \n10:17\u00a0<+jvelociter>\u00a0XWiki.ListBox is way cool  \n10:17\u00a0<+sburjan>\u00a0this is from today  \n10:17\u00a0<+jvelociter>\u00a0it could be externalized as a generic widget in uicomponents/  \n10:18\u00a0<+mflorea>\u00a0jvelociter: thanks, and yes  \n10:19\u00a0<+mflorea>\u00a0now, the backend has an issue right now, the problem is that I look only for the config object in the main wiki. I might have to write a component that looks for a property in the current space, then current wiki and fifnally fallsback on XWiki space from main wiki  \n10:19\u00a0<+jvelociter>\u00a0mflorea: I'd like to do a name/value pair box in that spirit  \n10:20\u00a0<+jvelociter>\u00a0yes that would be nice  \n10:20\u00a0<+tmortagne>\u00a0sburjan: could you go to XWiki/ExtensionManager page and edit it  \n10:21\u00a0<+tmortagne>\u00a0try to find \"{{info}}Extension with id\"  \n10:21\u00a0<+mflorea>\u00a0the problems is though that currently it's not clear when a prop is set and when it's not. For instance you might overwrite only some config props at space/wiki lavel and leave the rest.  \n10:22\u00a0<+mflorea>\u00a0s/might overwrite/might want to overwrite  \n10:22\u00a0<+tmortagne>\u00a0sburjan: did you specified a wiki ?  \n10:22\u00a0<+sburjan>\u00a0tmortagne: nop. I am on XE  \n10:22\u00a0<+sburjan>\u00a0I left the 3rd input field blank  \n10:23\u00a0<+sburjan>\u00a0I found the string you're looking after  \n10:23\u00a0<+sburjan>\u00a0:)  \n10:23\u00a0<+tmortagne>\u00a0ok  \n10:24\u00a0<+tmortagne>\u00a0trying to find why installing xar works for me  \n10:24\u00a0<+tmortagne>\u00a0make me thing i should hide the wiki field by the way for non visrtual wiki  \n10:24\u00a0<+tmortagne>\u00a0I always test on XE  \n10:24\u00a0<+tmortagne>\u00a0XEM  \n10:24\u00a0<+tmortagne>\u00a0definitely work well for me for the same extension  \n10:24\u00a0<+tmortagne>\u00a0hmm  \n10:24\u00a0<+tmortagne>\u00a0what system are you on ? windows ?  \n10:25\u00a0<+sburjan>\u00a0Ubuntu all the way to 32 bit  \n10:25\u00a0<+tmortagne>\u00a0cool  \n10:25\u00a0<+tmortagne>\u00a0makes things easier  \n10:25\u00a0<+tmortagne>\u00a0go to ~/.xwiki/  \n10:25\u00a0<+tmortagne>\u00a0~/.xwiki/extensions/repository  \n10:25\u00a0<+tmortagne>\u00a0if your extension here ?  \n10:26\u00a0<+tmortagne>\u00a0s/if/is/  \n10:26\u00a0<+sburjan>\u00a0no  \n10:26\u00a0<+tmortagne>\u00a0and you did not get any error ?  \n10:27\u00a0<+tmortagne>\u00a0you got \"Extension with id org.xwiki.platform.applications:xwiki-application-ircbot and version 1.0 has been installed.\u00a0\" ?  \n10:27\u00a0<+sburjan>\u00a0it seems to be in just a sec  \n10:27\u00a0<+sburjan>\u00a0yes  \n10:27\u00a0<+sburjan>\u00a0found it  \n10:27\u00a0<+sburjan>\u00a0let me give you the path  \n10:27\u00a0<+jvelociter>\u00a0which bug can I fix this morning ? Ideas ?  \n10:28\u00a0<+tmortagne>\u00a0jvelociter: maybe take a look at issue with patches to see if there is some contributor we can make happy ;)  \n10:28\u00a0<+sburjan>\u00a0tmortagne: ~/.xwiki/extensions/aether-repository/org/xwiki/platform/applications/xwiki-application-ircbot/1.0$  \n10:28\u00a0<+tmortagne>\u00a0that's something else actually  \n10:29\u00a0<+tmortagne>\u00a0you should have only the pom in here  \n10:29\u00a0<+sburjan>\u00a0yes, only the pom  \n10:29\u00a0<+sburjan>\u00a0let me search for the xar  \n10:29\u00a0<+tmortagne>\u00a0if you don't have it in ~/.xwiki/extensions/repository there is no other place  \n10:29\u00a0<+tmortagne>\u00a0that really looks like yesterday bug  \n10:30\u00a0<+tmortagne>\u00a0let me try to disable vistual mode on my side  \n10:31\u00a0<+sburjan>\u00a0tmortagne: no, no xar. I am using this snapshot : xwiki-enterprise-jetty-hsqldb-3.0-20110317.021751-333.zip \u00a0\u00a0\u00a0\u00a0\u00a017-Mar-2011 03:22 \u00a0109M  \n10:43\u00a0<arunreddy>\u00a0has joined #xwiki  \n10:43\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:47\u00a0<+sburjan>\u00a0ok. I will resume testing later, I have an urgent issue ATM  \n10:49\u00a0<+tmortagne>\u00a0sburjan: ok fiwing some bugs anyway  \n10:49\u00a0<+sburjan>\u00a0tmortagne: also as a UI suggestion, the 3 input fields should be properly aligned.  \n10:49\u00a0<arunreddy>\u00a0has quit  \n10:54\u00a0<lucaa1>\u00a0has joined #xwiki  \n10:54\u00a0<lucaa>\u00a0has quit  \n11:02\u00a0<+tmortagne>\u00a0sburjan: definitely working well even in non virtual mode for me, there is something wrong with the build. Will try with the same build you used  \n11:02\u00a0<+sburjan>\u00a0okay.  \n11:03\u00a0<+tmortagne>\u00a0but before that i need to improve multiwiki support in backward dependencies  \n11:03\u00a0<+cjdelisle>\u00a0If the attachment content is not dirty and the metadata is not dirty should saveAttachment skip saving the content?  \n11:04\u00a0<+cjdelisle>\u00a0My thinking is yes and I tend to think that saving the content in this case is a bug but it is a bug which the package plugin seems to rely on.  \n11:07\u00a0<+cjdelisle>\u00a0So since I am not touching Package.java with a 10 foot pole, I can either remove the check and save anyway so old behavior will be carried over to the new api ( getAttachmentSaveRunnable() ) or I can make the content dirty in the old api before it calls the new api so that we have backward compatability but it is fixed (the way that makes sense to me) going forward.  \n11:09\u00a0<+sburjan>\u00a0tmortagne: when you're gonna test on XE, please tell me if you confirm  \n11:10\u00a0<+tmortagne>\u00a0sure  \n11:21\u00a0<mflorea1>\u00a0has joined #xwiki  \n11:21\u00a0<esdaniel>\u00a0has joined #xwiki  \n11:22\u00a0<mflorea>\u00a0has quit  \n11:22\u00a0<esdaniel>\u00a0hai :-) i'm trying to verify correct synax for loops (while,for etc) in a velocity macro - anyone know the link to this info?  \n11:23\u00a0<vmassol>\u00a0esdaniel: you can check the velocity user guide maybe  \n11:23\u00a0<esdaniel>\u00a0link?  \n11:23\u00a0<vmassol>\u00a0http://velocity.apache.org/engine/releases/velocity-1.7/user-guide.html  \n11:23\u00a0<esdaniel>\u00a0thanks!  \n11:23\u00a0<esdaniel>\u00a0aha  \n11:24\u00a0<vmassol>\u00a0here's a better one: http://tinyurl.com/5rtcsy6  \n11:24\u00a0<vmassol>\u00a0(esdaniel)  \n11:24\u00a0<esdaniel>\u00a0being a velocity virgin i had no idea it was an apache project - are there links from xwiki dev guide to these resources?  \n11:24\u00a0<vmassol>\u00a0:)  \n11:24\u00a0<vmassol>\u00a0yes  \n11:25\u00a0<vmassol>\u00a0http://platform.xwiki.org/xwiki/bin/view/DevGuide/Scripting  \n11:25\u00a0<vmassol>\u00a0\"For more information about programming in the Velocity language, you can refer to the http://velocity.apache.org/engine/releases/velocity-1.6.2/user-guide.html.\"  \n11:25\u00a0<esdaniel>\u00a0ironic, i was just at that page :-(  \n11:26\u00a0<esdaniel>\u00a0thanks vmassol  \n11:26\u00a0<vmassol>\u00a0np  \n11:29\u00a0<esdaniel>\u00a0vmassol: for-each seems to be the only looping construct :-(  \n11:29\u00a0<+cjdelisle>\u00a0That's kind of a security thing.  \n11:29\u00a0<vmassol>\u00a0esdaniel: and?  \n11:29\u00a0<vmassol>\u00a0this is velocity....  \n11:30\u00a0<esdaniel>\u00a0k, problem - someone had the infinite wisdom to hardcode years in a calendar drop down selection box...  \n11:30\u00a0<+cjdelisle>\u00a0Object[] o = null; for(;;) { o = {o}; } \u00a0\u00a0<-- segfaults the jvm  \n11:31\u00a0<esdaniel>\u00a0ouch  \n11:31\u00a0<esdaniel>\u00a0reminds me of perlbombs  \n11:31\u00a0<+cjdelisle>\u00a0stack overflow in the garbage collector  \n11:32\u00a0<+cjdelisle>\u00a0there's one for firefox js too but you'll have to find that one on your own ;)  \n11:33\u00a0<mflorea1>\u00a0has quit  \n11:33\u00a0<+cjdelisle>\u00a0Re discusson earlier: When I was deciding how to fix attachment storage, I talked to the hibernate people about storing large entries in the db. IIRC it was Steve Ebersole who told me it was a bad idea specifically using VARBINARY which is what we have been doing.  \n11:34\u00a0<mflorea>\u00a0has joined #xwiki  \n11:34\u00a0<vmassol>\u00a0cjdelisle: pointers, pointers  \n11:34\u00a0<+cjdelisle>\u00a0Pointers?  \n11:34\u00a0<vmassol>\u00a0someone who explains why DBs can't cope with blobs  \n11:35\u00a0<vmassol>\u00a0and why it's a fatality  \n11:35\u00a0<+cjdelisle>\u00a0Oh they can cope with blobs. They just all do it differently.  \n11:35\u00a0<vmassol>\u00a0that some don't work rigth now I'm fine  \n11:35\u00a0<vmassol>\u00a0this is why we're implementing the FS  \n11:36\u00a0<vmassol>\u00a0but my comment was: when they fix their stuff I see us going back to db for everything  \n11:36\u00a0<vmassol>\u00a0and not the other way around  \n11:36\u00a0<+cjdelisle>\u00a0So we would need a different db driver for each db. The hibernate people were unwilling to try and support blobs because dbs were so different.  \n11:36\u00a0<vmassol>\u00a0we have a different driver for each db :)  \n11:37\u00a0<+cjdelisle>\u00a0And mysql and mssql (IIRC) have no worthwhile support at all.  \n11:37\u00a0<vmassol>\u00a0yep, seems they don't stream AFAIR  \n11:38\u00a0<+cjdelisle>\u00a0Since that sounded like an unscalable mountain, I started thinking about filesystem storage being the unified location and the db being a glorified searchable cache.  \n11:39\u00a0<+cjdelisle>\u00a0Another advantage of that approach is import/export are done for us. We simply zip the filesystem storage location.  \n11:39\u00a0<vmassol>\u00a0it's complex  \n11:39\u00a0<vmassol>\u00a0both need to be in sync  \n11:39\u00a0<vmassol>\u00a0you need 2 phase commit impl  \n11:39\u00a0<vmassol>\u00a0for transactions  \n11:39\u00a0<vmassol>\u00a0(or you'll have no guarantee of atomicity)  \n11:40\u00a0<+cjdelisle>\u00a0Yes, saving is more complex. 2 phase commit is not necessary though.  \n11:40\u00a0<vmassol>\u00a0if not 2pc then you need to impleent it manually which is hard  \n11:40\u00a0<+cjdelisle>\u00a0That is to say, I have already implemented 2 phase commit on the filesystem end and it need not be implemented in the db.  \n11:42\u00a0<+cjdelisle>\u00a0Save operations would indeed be slower and more complex. OTOH import/export would be trivial, switching from one db to another or changing schema would be aswell.  \n11:44\u00a0<vmassol>\u00a0jvelociter: a good thing to fix today would be the build not workong on mac  \n11:44\u00a0<+jvelociter>\u00a0yes... was thinking about it  \n11:44\u00a0<+jvelociter>\u00a0it's not even build  \n11:45\u00a0<+jvelociter>\u00a0it's runtime  \n11:45\u00a0<+jvelociter>\u00a0(compressions of JS done at runtime)  \n11:45\u00a0<vmassol>\u00a0k  \n11:45\u00a0<Denis>\u00a0has quit  \n11:45\u00a0<+jvelociter>\u00a0but I don't really know where to start  \n11:45\u00a0<+cjdelisle>\u00a0Anyway, it's just one approach, and I made sure not to close the door on it when writing attachment storage.  \n11:45\u00a0<+jvelociter>\u00a0Sergiu mentionned rhino lib change  \n11:55\u00a0<mflorea>\u00a0has quit  \n11:56\u00a0<DrLou>\u00a0has joined #xwiki  \n11:57\u00a0<+jvelociter>\u00a0will try YUI compressor upgrade  \n11:57\u00a0<vmassol>\u00a0k  \n12:12\u00a0<+jvelociter>\u00a0not enough :(  \n12:18\u00a0<mflorea>\u00a0has joined #xwiki  \n12:18\u00a0<vmassol>\u00a0mflorea: hi  \n12:18\u00a0<vmassol>\u00a0any idea why http://lescastcodeurs.myxwiki.org/xwiki/bin/edit/Notes+des+episodes/37?editor=wiki works while  \n12:18\u00a0<vmassol>\u00a0hmm  \n12:19\u00a0<vmassol>\u00a0just a few seconds ago http://lescastcodeurs.myxwiki.org/xwiki/bin/edit/Notes+des+episodes/37 was displaying a white page  \n12:19\u00a0<vmassol>\u00a0hmmm  \n12:19\u00a0<vmassol>\u00a0spinning wheel  \n12:20\u00a0<+mflorea>\u00a0vmassol: I don't have user/pass and I have to go to lunch. I can take a look when I'm back  \n12:20\u00a0<vmassol>\u00a0ok looking into it fr now  \n12:23\u00a0<+jvelociter>\u00a0tmortagne: I'm trying to install rhino.jar via the EM but it does not seem to work as I want  \n12:24\u00a0<+tmortagne>\u00a0what version ?  \n12:24\u00a0<+tmortagne>\u00a0of core  \n12:24\u00a0<+jvelociter>\u00a0I enter : rhino:rhino:jar and 1.5R4.1 as version  \n12:24\u00a0<+jvelociter>\u00a0recent build  \n12:24\u00a0<vmassol>\u00a0mflorea: found 2 bugs creating jira  \n12:25\u00a0<+tmortagne>\u00a0well sburjan had issue too looks like the last build does not include last modification for some reason  \n12:25\u00a0<+jvelociter>\u00a0ok  \n12:25\u00a0<+jvelociter>\u00a0will do it manually for now I guess  \n12:26\u00a0<+tmortagne>\u00a0jvelociter: it sais it installed it but you don't have it in the list of installed extensions right ?  \n12:26\u00a0<+jvelociter>\u00a0yes  \n12:27\u00a0<+jvelociter>\u00a0and no jar in .xwiki/aether-repository  \n12:27\u00a0<+jvelociter>\u00a0though all the metadata is there  \n12:27\u00a0<+tmortagne>\u00a0so yes looks exactly like what I fixed yesterday  \n12:28\u00a0<+tmortagne>\u00a0i'm finishing improving backward dependencies support and I'm looking at it  \n12:30\u00a0<vmassol>\u00a0mflorea: XWIKI-6121 and XWIKI-6122  \n12:30\u00a0<vmassol>\u00a0XWIKI-6122  \n12:32\u00a0<vmassol>\u00a0and I asked guillaume laforge to create a jira issue too: XWIKI-6123  \n12:37\u00a0<vmassol>\u00a0going to upggrade myxwiki.org to 3.0M3  \n12:47\u00a0<Denis1>\u00a0has joined #xwiki  \n12:47\u00a0<Denis1>\u00a0is now known as <Denis>  \n12:52\u00a0<vmassol>\u00a0stopppig myxwiki.org  \n12:56\u00a0<abusenius>\u00a0has joined #xwiki  \n13:00\u00a0<vmassol>\u00a0myxwiki.org is back now going to import XARs  \n13:05\u00a0<vmassol>\u00a0it's taking forever to import a XAR? :(  \n13:05\u00a0<vmassol>\u00a0something is wrong  \n13:07\u00a0<vmassol>\u00a0it's just globally slow  \n13:07\u00a0<vmassol>\u00a0hmmm admin ui is all messed up  \n13:08\u00a0<vmassol>\u00a0ok flush my cache worked  \n13:09\u00a0<+cjdelisle>\u00a0front page loaded very slow, enabled js and comments loaded reasonably fast.  \n13:09\u00a0<+cjdelisle>\u00a0Perhaps it was bogging out because lucine was trying to index everything on start?  \n13:09\u00a0<vmassol>\u00a0template wiki updated, updating playgournd now  \n13:14\u00a0<vmassol>\u00a0still awfully slow  \n13:14\u00a0<vmassol>\u00a0takes about 5 minutes to import  \n13:15\u00a0<+cjdelisle>\u00a0top -n 1  \n13:15\u00a0<+cjdelisle>\u00a0?  \n13:16\u00a0<+cjdelisle>\u00a0It sounds like disk thrashing.  \n13:16\u00a0<vmassol>\u00a0tomcat is using 100% cpu right now, was using less for the first import  \n13:17\u00a0<vmassol>\u00a0I fear it's going to restart during my import.....  \n13:17\u00a0<+cjdelisle>\u00a0How much free memory? Enough?  \n13:17\u00a0<vmassol>\u00a0Mem: \u00a0\u00a02051192k total, \u00a01898304k used, \u00a0\u00a0152888k free, \u00a0\u00a0\u00a0\u00a09360k buffers  \n13:17\u00a0<vmassol>\u00a0Swap: \u00a02097120k total, \u00a0\u00a0381748k used, \u00a01715372k free, \u00a0\u00a0698796k cached  \n13:18\u00a0<+cjdelisle>\u00a0seems ok there.  \n13:18\u00a0<vmassol>\u00a010 minutes now that the import is running  \n13:19\u00a0<+cjdelisle>\u00a0Strange, I don't think anything was changed between packaging and storage.  \n13:19\u00a0<+cjdelisle>\u00a0Usually I'm the only one stupid enough to try changing something there.  \n13:20\u00a0<+cjdelisle>\u00a0What was the last version?  \n13:20\u00a0<+cjdelisle>\u00a02.7?  \n13:20\u00a0<+cjdelisle>\u00a03.0M1  \n13:21\u00a0<vmassol>\u00a03.0M1  \n13:22\u00a0<+cjdelisle>\u00a0If it's proc then it sounds like what happens when one thread infiniloops.  \n13:23\u00a0<vmassol>\u00a0I think it could be interesting to log requests that take longer than N seconds to execute to find pages that could be using all threads/cpu  \n13:24\u00a0<+cjdelisle>\u00a0Lucine used to be very expensive on start but it apparently was fixed, I wonder if it is misbehaving now?  \n13:25\u00a0<vmassol>\u00a0ouch kill quite was sent  \n13:25\u00a0<vmassol>\u00a0restarting  \n13:27\u00a0<vmassol>\u00a0most threads locked on jboss cache  \n13:29\u00a0<+cjdelisle>\u00a0hmm. Re why I rewrite everything, at least then my bugs are my own.  \n13:30\u00a0<vmassol>\u00a0that's a very bad reason  \n13:30\u00a0<vmassol>\u00a0so you don't buy any stuff either, you build everything from raw material  \n13:30\u00a0<vmassol>\u00a0you built your computer from atoms?  \n13:30\u00a0<vmassol>\u00a0:)  \n13:31\u00a0<vmassol>\u00a0you have to trust others at some point to progress  \n13:33\u00a0<vmassol>\u00a0we've had this discussion already though :)  \n13:33\u00a0<+cjdelisle>\u00a0heh. still it's a pain to run into a problem and not even know what code to look at. At least we aren't stuck with closed source libraries.  \n13:33\u00a0<vmassol>\u00a0I understand what you say  \n13:33\u00a0<vmassol>\u00a0but we have to live with this  \n13:33\u00a0<vmassol>\u00a0ahah found somerthing  \n13:33\u00a0<vmassol>\u00a0this page is being hit again and again http://www.myxwiki.org/xwiki/bin/view/XWiki/Vladimir?viewer=comments  \n13:33\u00a0<vmassol>\u00a0and is full of spam comments  \n13:35\u00a0<+cjdelisle>\u00a0Is it too much load if I look at it?  \n13:35\u00a0<vmassol>\u00a0you can try  \n13:36\u00a0<vmassol>\u00a0I'm going to remove comment rights for now  \n13:36\u00a0<vmassol>\u00a0If I can  \n13:36\u00a0<elecharny>\u00a0has joined #xwiki  \n13:36\u00a0<elecharny>\u00a0hi guys  \n13:36\u00a0<vmassol>\u00a0hey hi elecharny  \n13:36\u00a0<elecharny>\u00a0a stupid question : how do I create a new page under an existing one ?  \n13:37\u00a0<vmassol>\u00a0cjdelisle: we need to paginate comments  \n13:38\u00a0<mflorea>\u00a0has quit  \n13:38\u00a0<vmassol>\u00a0java.lang.OutOfMemoryError: Java heap space  \n13:38\u00a0<vmassol>\u00a0stopping it  \n13:39\u00a0<+cjdelisle>\u00a0comment rendering is pretty bad in general.  \n13:39\u00a0<vmassol>\u00a0elecharny: you create a wanted link  \n13:39\u00a0<vmassol>\u00a0then click on it  \n13:39\u00a0<vmassol>\u00a0this is the wiki way as it creates navigation at the same time as the new page  \n13:39\u00a0<vmassol>\u00a0[[mynewpage]]  \n13:40\u00a0<vmassol>\u00a0(in xwiki syntax 2.0)  \n13:40\u00a0<vmassol>\u00a0you can do that in wysiwyg too  \n13:40\u00a0<elecharny>\u00a0yes, right  \n13:40\u00a0<elecharny>\u00a0I'm used to the confluence way  \n13:40\u00a0<vmassol>\u00a0add page doesn't work?  \n13:40\u00a0<elecharny>\u00a0which is slightly better  \n13:40\u00a0<vmassol>\u00a0how do you do it in confluence?  \n13:42\u00a0<vmassol>\u00a0we have 2 ways in xwiki:  \n13:42\u00a0<vmassol>\u00a0the wiki way  \n13:42\u00a0<vmassol>\u00a0the add button  \n13:42\u00a0<vmassol>\u00a0I need to check if the add button creates new pages under hte current page or under the current space only  \n13:42\u00a0<elecharny>\u00a0in confluence, you have a Add button which opens a new page immediately  \n13:42\u00a0<elecharny>\u00a0with the editor  \n13:42\u00a0<elecharny>\u00a0the title will be the page's name  \n13:42\u00a0<vmassol>\u00a0well we have that button too  \n13:43\u00a0<elecharny>\u00a0it's slightly more comfy  \n13:43\u00a0<vmassol>\u00a0it's big and green you should see it :)  \n13:43\u00a0<elecharny>\u00a0yes, but it asks you about the space you want to create the page in  \n13:43\u00a0<vmassol>\u00a0it's not filled by default?  \n13:43\u00a0<elecharny>\u00a0which is a bit annoying, because usually you are creating a page in the space you are in  \n13:44\u00a0<vmassol>\u00a0I fixed that I think  \n13:44\u00a0<vmassol>\u00a0if not it's easy to fix  \n13:44\u00a0<elecharny>\u00a0it's Main in my case  \n13:44\u00a0<elecharny>\u00a0hmmm  \n13:44\u00a0<vmassol>\u00a0even if you're not in the main space?  \n13:44\u00a0<elecharny>\u00a0the wiki is LDAP API, and the space is Main  \n13:44\u00a0<elecharny>\u00a0so it's right  \n13:44\u00a0<vmassol>\u00a0I can check  \n13:44\u00a0<elecharny>\u00a0confusng ...  \n13:44\u00a0<vmassol>\u00a0well how do you cretae a new page not in the current space?  \n13:45\u00a0<elecharny>\u00a0no, it's ok  \n13:45\u00a0<elecharny>\u00a0the big difference is that in Confluence, the added page appears to be 'under' the page you were coming from  \n13:45\u00a0<vmassol>\u00a0wdym by 'under'?  \n13:46\u00a0<elecharny>\u00a0as a child  \n13:46\u00a0<vmassol>\u00a0yes but where? in wht view?  \n13:46\u00a0<vmassol>\u00a0we also do this  \n13:46\u00a0<elecharny>\u00a0if I'm editing a page named, say, \"Tutorial\"  \n13:46\u00a0<vmassol>\u00a0if you look at the information tab  \n13:46\u00a0<elecharny>\u00a0and if I ask a new page to be created, say 'sample'  \n13:46\u00a0<vmassol>\u00a0(or in the breadcrumb)  \n13:46\u00a0<elecharny>\u00a0it will be seen as tutorial/sample  \n13:47\u00a0<vmassol>\u00a0I think I understand  \n13:48\u00a0<vmassol>\u00a0we're under attack  \n13:48\u00a0<elecharny>\u00a0in XWiki, I'm afraid that you have to create a physical relation as a link in two pages to create a father/child relation between them  \n13:48\u00a0<elecharny>\u00a0yeah, it's slow  \n13:48\u00a0<elecharny>\u00a0ok, I let you deal with the ennemy :)  \n13:48\u00a0<elecharny>\u00a0thanks !  \n13:48\u00a0<vmassol>\u00a0I see in the log that we're being continuously hit  \n13:48\u00a0<vmassol>\u00a0on the same page  \n13:48\u00a0<vmassol>\u00a0several times per second  \n13:49\u00a0<mflorea>\u00a0has joined #xwiki  \n13:49\u00a0<+cjdelisle>\u00a0What is hitting that page? Spam bots doing comment submissions? Search engines? Lucine?  \n13:50\u00a0<vmassol>\u00a02011-03-17 12:51:04,663 [http://www.myxwiki.org/xwiki/bin/view/XWiki/Vladimir?viewer=comments] WARN \u00a0doc.XWikiDocument \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- com.xpn.xwiki.XWikiException: Error number 0 in 4: Failed to convert document to syntax [xhtml 1.0]  \n13:50\u00a0<vmassol>\u00a0Wrapped Exception: null  \n13:50\u00a0<vmassol>\u00a02011-03-17 12:51:04,840 [http://www.myxwiki.org/xwiki/bin/view/XWiki/Vladimir?viewer=comments] WARN \u00a0doc.XWikiDocument \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- com.xpn.xwiki.XWikiException: Error number 0 in 4: Failed to convert document to syntax [xhtml 1.0]  \n13:50\u00a0<vmassol>\u00a0I'm going to start by removing all comments from that page  \n13:51\u00a0<+cjdelisle>\u00a0or edit comments.vm and add #stop to the first line. That will get the server back up.  \n13:51\u00a0<+cjdelisle>\u00a0If that is the problem  \n13:52\u00a0<vmassol>\u00a0it's not continuous  \n13:52\u00a0<vmassol>\u00a0the page is no longer hot  \n13:52\u00a0<vmassol>\u00a0hit  \n13:54\u00a0<+cjdelisle>\u00a0the js comments could be much faster by doing sorting in the db and on the client box.  \n13:54\u00a0<vmassol>\u00a0we really need that XObject pagination you wanted to code....  \n13:55\u00a0<+cjdelisle>\u00a0pagination I wanted to code?  \n13:55\u00a0<vmassol>\u00a0didn't you want to load xobject by chunk?  \n13:55\u00a0<+cjdelisle>\u00a0No that was loading many objects in a single query.  \n14:00\u00a0<+cjdelisle>\u00a0Are comments custom mapped on that box?  \n14:03\u00a0<vmassol>\u00a0stopping myxwiki.org  \n14:04\u00a0<+cjdelisle>\u00a0It'd be nice if we required js because then we could basically throw XMLized db query results at the user and let the browser build the page.  \n14:12\u00a0<fmancinelli>\u00a0has joined #xwiki  \n14:30\u00a0<vmassol>\u00a0seems like our commentadd action doesn't check rights....  \n14:30\u00a0<vmassol>\u00a0(nor the objectadd one)  \n14:30\u00a0<vmassol>\u00a0testing for real (have just looked at code)  \n14:32\u00a0<+cjdelisle>\u00a0That burned me before. The check is buried in XWikiAction.java  \n14:32\u00a0<vmassol>\u00a0ah ok? checking  \n14:33\u00a0<vmassol>\u00a0hmm don't see any check before the call to action()  \n14:33\u00a0<+cjdelisle>\u00a0nope, I was wrong.  \n14:33\u00a0<+cjdelisle>\u00a0public boolean prepareDocuments(XWikiRequest request, XWikiContext context, VelocityContext vcontext)  \n14:33\u00a0<+cjdelisle>\u00a0XWiki.java  \n14:33\u00a0<+cjdelisle>\u00a0^that is why it got me.  \n14:34\u00a0<vmassol>\u00a0rights are different for different actions  \n14:34\u00a0<vmassol>\u00a0so I don't see how it would be done in XWikiAction  \n14:34\u00a0<vmassol>\u00a0(easily I mean)  \n14:34\u00a0<+cjdelisle>\u00a0if (checkAccess(context.getAction(), doc, context) == false) {  \n14:34\u00a0<+cjdelisle>\u00a0XWiki.java:5288  \n14:34\u00a0<vmassol>\u00a0hmmm  \n14:35\u00a0<vmassol>\u00a0checking  \n14:35\u00a0<vmassol>\u00a0ok found it  \n14:35\u00a0<vmassol>\u00a0thanks  \n14:36\u00a0<+cjdelisle>\u00a0I know that line well because I wrote a \"perfect clone\" of RegisterAction in XWiki.Registration but I didn't add a permissions check because there wasn't one there so there was a vuln if Registration had PR.  \n14:41\u00a0<vmassol>\u00a0I'm with jerome on this  \n14:41\u00a0<vmassol>\u00a0we know what the problem is  \n14:41\u00a0<vmassol>\u00a0create a user and give all perm to unreg user....  \n14:43\u00a0<+cjdelisle>\u00a0On the one hand it is kind of their page but on the other hand there is a clear memory exhaustion DoS attack.  \n14:44\u00a0<+cjdelisle>\u00a0The thought of some kind of memory storage limit comes to mind but that would be very complicated.  \n14:45\u00a0<+cjdelisle>\u00a0Is comment captcha turned on for the main wiki?  \n14:46\u00a0<vmassol>\u00a0just added it  \n14:46\u00a0<vmassol>\u00a0it wasn't set  \n14:46\u00a0<vmassol>\u00a0but  \n14:46\u00a0<vmassol>\u00a0comments were only allowed for registered users  \n14:46\u00a0<+cjdelisle>\u00a0Someone can modify that for their page, captcha cannot be overridden on a page level.  \n14:47\u00a0<vmassol>\u00a0ah ok  \n14:48\u00a0<+cjdelisle>\u00a0Might be a good idea to purge all comments from user documents.  \n14:48\u00a0<+cjdelisle>\u00a0Or purge all comments with http:// in them ;)  \n15:15\u00a0<vmassol>\u00a0anyone knows why this is not working:  \n15:15\u00a0<vmassol>\u00a0#foreach ($page in $xwiki.searchDocuments(\", BaseObject as obj, DBStringListProperty as prop join prop.list list where obj.name=doc.fullName and obj.className='XWiki.XWikiRights' and obj.id=prop.id.id and prop.id.name='users' \u00a0and list='XWiki.XWikiGuest' order by doc.creationDate desc\"))  \n15:16\u00a0<vmassol>\u00a0I'm trying to find all pages having an XWikiRights object with a user property containing XWikiGuest  \n15:19\u00a0<vmassol>\u00a0ok jerome found the solution  \n15:19\u00a0<vmassol>\u00a0#foreach ($page in $xwiki.searchDocuments(\", BaseObject as obj, LargeStringProperty as prop where obj.name=doc.fullName and obj.className='XWiki.XWikiRights' and obj.id=prop.id.id and prop.id.name='users' \u00a0and prop.value='XWiki.XWikiGuest' order by doc.creationDate desc\"))  \n15:23\u00a0<+mflorea>\u00a0vmassol: I can't run wysiwyg selenium tests. I get  \n15:23\u00a0<+mflorea>\u00a0The project org.xwiki.enterprise:xwiki-enterprise-test-wysiwyg:3.0-SNAPSHOT (/home/marius/work/eclipse/enterprise/distribution-test/wysiwyg-tests/pom.xml) has 1 error  \n15:23\u00a0<+mflorea>\u00a0[ERROR] \u00a0\u00a0\u00a0\u00a0'dependencies.dependency.version' for junit:junit:jar is missing. @ org.xwiki.enterprise:xwiki-enterprise-test:3.0-SNAPSHOT, /home/marius/work/eclipse/enterprise/distribution-test/pom.xml, line 60, column 17  \n15:23\u00a0<+mflorea>\u00a0Any hints?  \n15:24\u00a0<vmassol>\u00a0yes  \n15:24\u00a0<vmassol>\u00a0indeed frogot those  \n15:24\u00a0<vmassol>\u00a0I ran enterprise but not with -Pci  \n15:24\u00a0<vmassol>\u00a0sorry about that  \n15:24\u00a0<+mflorea>\u00a0ah, ok  \n15:24\u00a0<+mflorea>\u00a0np  \n15:24\u00a0<vmassol>\u00a0in practice  \n15:24\u00a0<vmassol>\u00a0we need to make sure we use junit-dep  \n15:24\u00a0<vmassol>\u00a0and not junit  \n15:24\u00a0<vmassol>\u00a0so I've put a check  \n15:24\u00a0<+mflorea>\u00a0what's the difference?  \n15:25\u00a0<vmassol>\u00a0let me find you the issue where it's plexianed  \n15:25\u00a0<vmassol>\u00a0http://jira.xwiki.org/jira/browse/XPOM-5  \n15:25\u00a0<vmassol>\u00a0in short: junit artifact includes hamcrest  \n15:25\u00a0<+mflorea>\u00a0I get it  \n15:26\u00a0<vmassol>\u00a0this is a nasty thing  \n15:26\u00a0<vmassol>\u00a0that they should never have done  \n15:26\u00a0<+mflorea>\u00a0yep  \n15:26\u00a0<vmassol>\u00a0it leads to jar classloader hell  \n15:26\u00a0<vmassol>\u00a0junt-dep is the clean one  \n15:26\u00a0<vmassol>\u00a0finishnig on myxwiki.org \u00a0FTM  \n15:26\u00a0<+mflorea>\u00a0ok  \n15:26\u00a0<vmassol>\u00a0still need a few minutes  \n15:26\u00a0<vmassol>\u00a0(maybe hour)  \n15:27\u00a0<+mflorea>\u00a0I'll look at the reported wysiwyg bugs in the mean time  \n15:29\u00a0<vmassol>\u00a0cjdelisle: any idea on how to delete a page with lots of objects?  \n15:29\u00a0<vmassol>\u00a0(without doing it in the db)  \n15:29\u00a0<vmassol>\u00a0I get a Wrapped Exception: Java heap space  \n15:30\u00a0<vmassol>\u00a0from at com.xpn.xwiki.store.XWikiHibernateVersioningStore$4.doInHibernate(XWikiHibernateVersioningStore.java:309)  \n15:32\u00a0<+tmortagne>\u00a0without doing it in the db will be hard I think since you need to load a page to delete it currently  \n15:33\u00a0<+tmortagne>\u00a0currently=with XWiki API  \n15:34\u00a0<+tmortagne>\u00a0hmm XWikiHibernateVersioningStore so it's maybe not related to document loading actually  \n15:35\u00a0<+tmortagne>\u00a0did you tried with totrash to false ?  \n15:36\u00a0<vmassol>\u00a0tmortagne: I tried http://localhost:8080/xwiki/bin/delete/XWiki/Vladimir?confirm=1&totrash=false  \n15:36\u00a0<vmassol>\u00a0no luck  \n15:36\u00a0<+tmortagne>\u00a0is totrash=false really supported in the standard action ?  \n15:37\u00a0<vmassol>\u00a0maybe not  \n15:37\u00a0<vmassol>\u00a0you're talking abotu using the api?  \n15:37\u00a0<+tmortagne>\u00a0i can't find any request.getParameter trying to get \"totrash\"  \n15:37\u00a0<+tmortagne>\u00a0yep  \n15:38\u00a0<+tmortagne>\u00a0but the protected one since it does \u00a0not seems supported in the public API  \n15:38\u00a0<+tmortagne>\u00a0s/protected/programming/  \n15:39\u00a0<vmassol>\u00a0tmortagne: you know what api it is?  \n15:39\u00a0<vmassol>\u00a0I don't see any delete() nor remove()  \n15:39\u00a0<vmassol>\u00a0oh the XWiki one  \n15:39\u00a0<+tmortagne>\u00a0yes  \n15:40\u00a0<vmassol>\u00a0found it  \n15:43\u00a0<vmassol>\u00a0worked!  \n15:44\u00a0<vmassol>\u00a0thanks tmortagne for the idea  \n15:45\u00a0<+sburjan>\u00a0tmortagne: were you able to find the issue in the build ?  \n15:51\u00a0<+cjdelisle>\u00a0You know what would be really cool. If we could make it so a page appeared for only the person who made it.  \n15:52\u00a0<vmassol>\u00a0cjdelisle: that looks very anti wiki ;)  \n15:52\u00a0<vmassol>\u00a0not nice for collaboration  \n15:52\u00a0<+cjdelisle>\u00a0\\*spambots  \n15:52\u00a0<+cjdelisle>\u00a0kind of a honeypot  \n15:53\u00a0<+cjdelisle>\u00a0instead of wiki it would be wallki sinde it's like talking at a wall  \n15:53\u00a0<+jvelociter>\u00a0we could render its page static html  \n15:55\u00a0<+tmortagne>\u00a0sburjan: i'm waiting for the last build  \n15:55\u00a0<+tmortagne>\u00a0since a lots off modification has been made by several peoples  \n15:56\u00a0<+sburjan>\u00a0ok. I will test tomorrow then  \n16:18\u00a0<+tmortagne>\u00a0sburjan: just found what is the real issue  \n16:18\u00a0<+tmortagne>\u00a0try directly on Wiki/ExtensionManager page  \n16:18\u00a0<+sburjan>\u00a0tell me. I'm curious if it's a jetkins issue  \n16:18\u00a0<+tmortagne>\u00a0looks like programming right is broken by admin... again  \n16:18\u00a0<+tmortagne>\u00a0cjdelisle: any idea why ?  \n16:20\u00a0<+sburjan>\u00a0tmortagne: yepp, when installing from xwiki/extensionManager it works  \n16:20\u00a0<+sburjan>\u00a0it appears in the list  \n16:20\u00a0<+tmortagne>\u00a0ok cool  \n16:21\u00a0<+tmortagne>\u00a0not sure you can uninstall it since i fixed that this morning  \n16:21\u00a0<+sburjan>\u00a0Uninstalling it doesn;t work :P  \n16:21\u00a0<+sburjan>\u00a0nop, doesn't  \n16:21\u00a0<+sburjan>\u00a0I'm gonna test tomorrow  \n16:21\u00a0<+tmortagne>\u00a0should be ok with the build from 17-Mar-2011 11:00  \n16:21\u00a0<+tmortagne>\u00a0but better test tomorrow yes  \n16:21\u00a0<+sburjan>\u00a0vmassol: sorry I hadn't time to test too much today, I has some critical issues  \n16:22\u00a0<+sburjan>\u00a0tomorrow I will focus mostly on Platform  \n16:35\u00a0<+tmortagne>\u00a0cjdelisle: could you look at XAADMINISTRATION-258 ?  \n16:38\u00a0<evalica>\u00a0has quit  \n16:38\u00a0<+cjdelisle>\u00a0Was dropPermissions called?  \n16:38\u00a0<+tmortagne>\u00a0not in the application  \n16:39\u00a0<+tmortagne>\u00a0the page works well ouside of admin UI  \n16:39\u00a0<+tmortagne>\u00a0what's weird is that $hasProgramming is true when DocumentAccessBridge.hasProgrammingRights() return false  \n16:39\u00a0<sburjan>\u00a0has quit  \n16:39\u00a0<+tmortagne>\u00a0so the velocity think it has programming right and it gets error when calling the API  \n16:40\u00a0<+cjdelisle>\u00a0Sounds like dropPermissions  \n16:41\u00a0<+cjdelisle>\u00a0Variable set, permissions dropped, variable becomes wrong.  \n16:41\u00a0<+tmortagne>\u00a0ok but in admin UI then not in extension manager UI which is why I'm saying it to you ;)  \n16:42\u00a0<+tmortagne>\u00a0btw if that's dropPermission would be good to take care of $hasProgramming  \n16:43\u00a0<+cjdelisle>\u00a0It can't. $hasProgramming is a variable.  \n16:43\u00a0<+tmortagne>\u00a0you can in the VelocityContext  \n16:44\u00a0<+tmortagne>\u00a0at least i think all variables are in VelocityContext  \n16:44\u00a0<+tmortagne>\u00a0a hack for a hack...  \n16:44\u00a0<+cjdelisle>\u00a0Why not use $xcontext.hasProgrammingRights() instead of hardcoding velocity variables into the java code?  \n16:45\u00a0<+tmortagne>\u00a0problem is that \u00a0$hasProgramming exists and is used by lots of applications  \n16:45\u00a0<+tmortagne>\u00a0i'm not saying \u00a0$hasProgramming is better  \n16:46\u00a0<+tmortagne>\u00a0anyway it does not fix the issue  \n16:47\u00a0<+cjdelisle>\u00a0Here's the problem. I can create a document and in that document add a configurableClass object and in that object put {{groovy}}new Random().unsafe.putAddress(0,0);{{/groovy}}  \n16:47\u00a0<+tmortagne>\u00a0and ?  \n16:48\u00a0<+cjdelisle>\u00a0or actually not that since we patched the nested macros but I can put any kind of horror and it will be run in the context of XWikiPreferences.  \n16:48\u00a0<+cjdelisle>\u00a0Which almost always gets PR.  \n16:48\u00a0<+tmortagne>\u00a0you used to fix that issue by using configurable object document author  \n16:48\u00a0<+tmortagne>\u00a0and \u00a0now it's broken again...  \n16:49\u00a0<+cjdelisle>\u00a0It was probably `fixed' because of XWIKI-6034  \n16:49\u00a0<+cjdelisle>\u00a0Which was a terrible embarassment  \n16:49\u00a0<+tmortagne>\u00a0no  \n16:49\u00a0<+tmortagne>\u00a0since it was not working like now  \n16:49\u00a0<+tmortagne>\u00a0and you fixed it  \n16:50\u00a0<+cjdelisle>\u00a0I can't remember off the top of my head, I'll have to look at commit logs to remember what I did.  \n16:52\u00a0<+cjdelisle>\u00a0XWIKI-5601 ?  \n16:53\u00a0<+cjdelisle>\u00a0XAADMINISTRATION-185  \n16:54\u00a0<+tmortagne>\u00a0i found this one too but that's something else it seems  \n16:54\u00a0<+cjdelisle>\u00a0Is that what you were thinking of? That was another bad idea.  \n16:54\u00a0<+tmortagne>\u00a0the problem of XAADMINISTRATION-185 was that you were modifying XWikiDocument from the cache  \n16:55\u00a0<+tmortagne>\u00a0not that you were modifying current document author  \n16:55\u00a0<+cjdelisle>\u00a0yea. I thought it was a clone but not.  \n16:55\u00a0<+tmortagne>\u00a0let me see whaat i'm doing in wiki macro for pretty much the same reasons  \n16:56\u00a0<+tmortagne>\u00a0you could do the same for admin  \n16:56\u00a0<Denis>\u00a0has quit  \n16:56\u00a0<+tmortagne>\u00a0but it's a bit more complex in velocity  \n16:56\u00a0<+cjdelisle>\u00a0If you could that would be great.  \n16:56\u00a0<mflorea>\u00a0has quit  \n16:57\u00a0<+cjdelisle>\u00a0PR in the default documents should be avoided so it's hard to justify making it easier especially when there is a real security risk involved.  \n16:57\u00a0<vmassol>\u00a0lucaa1: I can't move gadgets around  \n16:58\u00a0<vmassol>\u00a0shit  \n16:58\u00a0<lucaa1>\u00a0but you don't have gadgets :)  \n16:58\u00a0<lucaa1>\u00a0( vmassol )  \n16:58\u00a0<lucaa1>\u00a0or do you?  \n16:58\u00a0<lucaa1>\u00a0and don't say shit on the irc, it's not nice  \n16:58\u00a0<vmassol>\u00a0:)  \n16:59\u00a0<lucaa1>\u00a0can you paste the source of that page?  \n16:59\u00a0<vmassol>\u00a0hold on  \n16:59\u00a0<lucaa1>\u00a0sure  \n17:00\u00a0<+tmortagne>\u00a0cjdelisle: problem is that I don't have a choice, extension manager cannot fully work without PR  \n17:00\u00a0<lucaa1>\u00a0vmassol: \u00a0as for the misplaced icon I have no clue why is that  \n17:00\u00a0<+tmortagne>\u00a0we will not all anyone to install a jar  \n17:01\u00a0<+tmortagne>\u00a0cjdelisle: found it https://svn.xwiki.org/svnroot/xwiki/platform/core/trunk/xwiki-core/src/main/java/com/xpn/xwiki/internal/macro/WikiMacroExecutionEventListener.java  \n17:01\u00a0<+cjdelisle>\u00a0I understand but if there is any trick you can do to make it work, it will keep us from removing an important security measure and making it very easy for others to use PR when they don't need it.  \n17:02\u00a0<+tmortagne>\u00a0cjdelisle: there is none  \n17:02\u00a0<+tmortagne>\u00a0what can I do if I dont' have PR from the start ?  \n17:02\u00a0<+tmortagne>\u00a0and i don't see the security risk  \n17:03\u00a0<+tmortagne>\u00a0you execute content written by some author with its own rights  \n17:03\u00a0<+tmortagne>\u00a0it's exactly the same thing than wiki macros  \n17:03\u00a0<+cjdelisle>\u00a0No actually it allows you to run content as the author of XWikiPreferences IIRC.  \n17:03\u00a0<+tmortagne>\u00a0no it does not if you do what i just suggested  \n17:04\u00a0<+tmortagne>\u00a0i never said you should just remove the dropPermission  \n17:04\u00a0<+tmortagne>\u00a0all i'm saying is that if we do it for wiki macro why not for admin  \n17:05\u00a0<vmassol>\u00a0lucaa1: back, sorry had something urgent, reading  \n17:05\u00a0<+cjdelisle>\u00a0I don't actually know how macros work.  \n17:05\u00a0<+cjdelisle>\u00a0They spawn a new context?  \n17:05\u00a0<vmassol>\u00a0lucaa1: source is {{dashboard source=\"Main.Dashboard\" /}}  \n17:05\u00a0<+tmortagne>\u00a0cjdelisle: (05:01:39 PM) tmortagne: cjdelisle: found it https://svn.xwiki.org/svnroot/xwiki/platform/core/trunk/xwiki-core/src/main/java/com/xpn/xwiki/internal/macro/WikiMacroExecutionEventListener.java  \n17:06\u00a0<lucaa1>\u00a0vmassol: interesting  \n17:06\u00a0<lucaa1>\u00a0what browser is that?  \n17:06\u00a0<vmassol>\u00a0lucaa1: fyi I upgraded the whole wiki  \n17:06\u00a0<vmassol>\u00a0except  \n17:06\u00a0<lucaa1>\u00a0lucaa1: ok  \n17:06\u00a0<vmassol>\u00a0for XWiki.ADmin, groups, prefs  \n17:06\u00a0<vmassol>\u00a0however  \n17:06\u00a0<vmassol>\u00a0it works fine on playground.myxwiki.org  \n17:06\u00a0<vmassol>\u00a0I don't understand why  \n17:06\u00a0<vmassol>\u00a0and I've refreshed my cache  \n17:07\u00a0<lucaa1>\u00a0what browser?  \n17:07\u00a0<vmassol>\u00a0ah  \n17:07\u00a0<vmassol>\u00a0one idea  \n17:07\u00a0<vmassol>\u00a0the wiki is in French  \n17:07\u00a0<vmassol>\u00a0chrome  \n17:07\u00a0<vmassol>\u00a0but it works on playground as I said  \n17:07\u00a0<lucaa1>\u00a0ah  \n17:07\u00a0<lucaa1>\u00a0why would french be a problem?  \n17:07\u00a0<vmassol>\u00a0don't know  \n17:07\u00a0<vmassol>\u00a0trying to list the differences  \n17:08\u00a0<lucaa1>\u00a0it \u00a0seems there is no dashboard.js  \n17:08\u00a0<lucaa1>\u00a0can you look if dashboard.js is loaded?  \n17:08\u00a0<lucaa1>\u00a0is it public, btw?  \n17:08\u00a0<lucaa1>\u00a0I could look  \n17:08\u00a0<lucaa1>\u00a0can I have an account please?  \n17:08\u00a0<vmassol>\u00a0not publi  \n17:08\u00a0<vmassol>\u00a0public  \n17:09\u00a0<lucaa1>\u00a0actually I do, it's myxwikki  \n17:10\u00a0<esdaniel>\u00a0why would French be a problem, lol, how polite ;-)  \n17:10\u00a0<esdaniel>\u00a0forgive my teasing vmassol, couldn't resist  \n17:10\u00a0<vmassol>\u00a0esdaniel: np have fun  \n17:10\u00a0<vmassol>\u00a0:)  \n17:10\u00a0<lucaa1>\u00a0vmassol: found it  \n17:10\u00a0<lucaa1>\u00a0yes, it has smth to do with translations  \n17:10\u00a0<lucaa1>\u00a0it's a js error  \n17:10\u00a0<lucaa1>\u00a0see, see  \n17:11\u00a0<lucaa1>\u00a0if you would have had firefox & firebug you could have told me that :)  \n17:11\u00a0<vmassol>\u00a0errr?  \n17:11\u00a0<vmassol>\u00a0oh I see: you don't know about the chrome console  \n17:11\u00a0<esdaniel>\u00a0ps. +1 to raluca's support today - he hacked a nice script in velocity to iterate the years, thanks!  \n17:11\u00a0<lucaa1>\u00a0syntax error in the js, because of unescaped translation  \n17:11\u00a0<lucaa1>\u00a0I know  \n17:11\u00a0<lucaa1>\u00a0but you didn't look  \n17:11\u00a0<lucaa1>\u00a0or you didn't tell me  \n17:11\u00a0<lucaa1>\u00a0or...  \n17:11\u00a0<vmassol>\u00a0yes because I preferred you to look  \n17:11\u00a0<vmassol>\u00a0:)  \n17:12\u00a0<lucaa1>\u00a0my fb is just there, screaming if smth happens :)  \n17:12\u00a0<lucaa1>\u00a0anyway, no time for a flamewar  \n17:12\u00a0<lucaa1>\u00a0lemme fix it  \n17:12\u00a0<vmassol>\u00a0thanks so it's a bug in 3.0M3?  \n17:12\u00a0<lucaa1>\u00a0yes :(  \n17:12\u00a0<vmassol>\u00a0ok  \n17:12\u00a0<lucaa1>\u00a0it's not \\_a\\_ bug in M3, it's \\_another\\_ bug in M3 L(  \n17:12\u00a0<vmassol>\u00a0sburjan`: you missed it! :)  \n17:12\u00a0<lucaa1>\u00a0:)  \n17:13\u00a0<lucaa1>\u00a0yes, you should test in french as well sburjan`:)  \n17:13\u00a0<lucaa1>\u00a0can I fix it later, vmassol?  \n17:13\u00a0<lucaa1>\u00a0I need to find files  \n17:13\u00a0<vmassol>\u00a0sure if you fix it in 1 hour it's still fine  \n17:13\u00a0<vmassol>\u00a0just kidding....  \n17:13\u00a0<vmassol>\u00a0:)  \n17:13\u00a0<lucaa1>\u00a0no, I'll fix it now  \n17:13\u00a0<+cjdelisle>\u00a0are there macros which require PR?  \n17:14\u00a0<vmassol>\u00a0I like it when myxwiki.org is fast....  \n17:14\u00a0<vmassol>\u00a0it's almost fast now  \n17:14\u00a0<vmassol>\u00a0hope it'll stay like this...  \n17:14\u00a0<+tmortagne>\u00a0cjdelisle: wiki macros  \n17:14\u00a0<+cjdelisle>\u00a0Which ones?  \n17:14\u00a0<+cjdelisle>\u00a0(I want to make sure I didn't break anything)  \n17:15\u00a0<+tmortagne>\u00a0any macro that wants to use groovy for example  \n17:15\u00a0<+tmortagne>\u00a0but in standard XE none i guess  \n17:15\u00a0<+tmortagne>\u00a0but why would you have broke wiki macros ?  \n17:16\u00a0<+cjdelisle>\u00a0I look at that code and it appears to me that it will not escape the dropPermissions dragnet.  \n17:16\u00a0<+tmortagne>\u00a0ha you means if someone call fropPermission before some wiki macro in the content of the document ?  \n17:16\u00a0<+tmortagne>\u00a0\\*dropPermission  \n17:17\u00a0<+cjdelisle>\u00a0That's what I wanted to test.  \n17:17\u00a0<+tmortagne>\u00a0ineed that could probably be an issue depending of how it's working  \n17:18\u00a0<+cjdelisle>\u00a0It inserts a key:value into XWikiContext and XWikiRightService#hasProgrammingRights() looks for it. Pretty heavy handed.  \n17:18\u00a0<+cjdelisle>\u00a0But I did not want to be made a fool of twice.  \n17:19\u00a0<+tmortagne>\u00a0now i'm not sure it's critical, could be seen as a feature  \n17:19\u00a0<+tmortagne>\u00a0the fact that yes even wiki macro don't have programming right when you drop permission, i don't know  \n17:19\u00a0<+tmortagne>\u00a0depends of the POV i guess  \n17:19\u00a0<+cjdelisle>\u00a0When/if signature macro ever appears this will all be moot.  \n17:20\u00a0<+tmortagne>\u00a0yea I can't wait to seen it ;)  \n17:20\u00a0<+cjdelisle>\u00a0We can proudly drop permissions on the first line of the first template and make the code prove it is authorized.  \n17:20\u00a0<+tmortagne>\u00a0PR is a pain...  \n17:22\u00a0<lucaa1>\u00a0vmassol: I'll send you a file to upload on myxwiki  \n17:22\u00a0<+cjdelisle>\u00a0I think I'm going to hit the hay, I'll read the backscroll when I get up so if any brushfires crop up just let mention them.  \n17:30\u00a0<esdaniel>\u00a0has left #xwiki  \n17:43\u00a0<vmassol>\u00a0cjdelisle: do you recall if the captch for unreg users on comments is on by default?  \n17:49\u00a0<vmassol>\u00a0tmortagne: groovy 1.7.10 released ;)  \n17:50\u00a0<+tmortagne>\u00a0yep seen guillaum's twit, we should wait for 3.1 branch i guess  \n17:50\u00a0<vmassol>\u00a0yeah was wondering  \n17:50\u00a0<vmassol>\u00a0but yes I agree safer  \n17:50\u00a0<+tmortagne>\u00a0adding that to my list  \n17:50\u00a0<+tmortagne>\u00a0starting to be long :)  \n17:50\u00a0<vmassol>\u00a0;)  \n17:57\u00a0<vmassol>\u00a0I do'nt get something  \n17:57\u00a0<vmassol>\u00a0why does misc-tests doesn't inherit from its parent deps  \n18:13\u00a0<vmassol>\u00a0tmortagne: if you have any idea....  \n18:14\u00a0<+tmortagne>\u00a0vmassol: looking  \n18:14\u00a0<elecharny>\u00a0has quit  \n18:14\u00a0<vmassol>\u00a0I changed the distribution-tests pom locally to only have 1 dep:  \n18:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0<dependency>  \n18:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<groupId>org.xwiki.commons</groupId>  \n18:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<artifactId>xwiki-commons-tests</artifactId>  \n18:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<version>${commons.core.version}</version>  \n18:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<scope>test</scope>  \n18:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0</dependency>  \n18:15\u00a0<vmassol>\u00a0but it doesn't get inherited by misc-tests/pom.xml  \n18:15\u00a0<vmassol>\u00a0when i do mvn dependency:test it's not there  \n18:15\u00a0<vmassol>\u00a0and I don't understand why  \n18:15\u00a0<vmassol>\u00a0must be something obvious I'm missing....  \n18:20\u00a0<+tmortagne>\u00a0at least i reproduce all the \"cannot find symbol\" which is probably your issue too  \n18:20\u00a0<vmassol>\u00a0it it's missing junit  \n18:20\u00a0<+tmortagne>\u00a0trying to find why now  \n18:20\u00a0<vmassol>\u00a0but that should be brought by commons-test  \n18:20\u00a0<+tmortagne>\u00a0depends  \n18:20\u00a0<vmassol>\u00a0but when you type mvn dependency:test you can see it's not listed  \n18:20\u00a0<+tmortagne>\u00a0hmm checking something  \n18:20\u00a0<vmassol>\u00a0ah  \n18:20\u00a0<vmassol>\u00a0I know  \n18:20\u00a0<vmassol>\u00a0I see at the top:  \n18:21\u00a0<vmassol>\u00a0[WARNING] Invalid POM for org.xwiki.commons:xwiki-commons-tests:jar:3.0-SNAPSHOT, transitive dependencies (if any) will not be available, enable debug logging for more details  \n18:21\u00a0<vmassol>\u00a0checking why  \n18:22\u00a0<+tmortagne>\u00a0indeed i have the same  \n18:22\u00a0<vmassol>\u00a0\u00a0'dependencies.dependency.version' for junit:junit:jar is missing. @ line 37, column 17  \n18:22\u00a0<vmassol>\u00a0\u00a0for project org.xwiki.commons:xwiki-commons-tests:3.0-SNAPSHOT  \n18:22\u00a0<vmassol>\u00a0ah I know  \n18:22\u00a0<vmassol>\u00a0it's probably using a version on maven.xwiki.org  \n18:22\u00a0<vmassol>\u00a0not my local one  \n18:22\u00a0<vmassol>\u00a0cehcking  \n18:23\u00a0<+tmortagne>\u00a0vmassol: why so we have several time the same dependency in commons-test ?  \n18:23\u00a0<+tmortagne>\u00a0kind of  \n18:23\u00a0<+tmortagne>\u00a0org.jmock:jmock and jmock:jmock  \n18:23\u00a0<vmassol>\u00a0we don't have the same one  \n18:23\u00a0<+tmortagne>\u00a0seems weird  \n18:23\u00a0<vmassol>\u00a0I don't understand  \n18:24\u00a0<+tmortagne>\u00a0<dependency>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<groupId>org.jmock</groupId>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<artifactId>jmock</artifactId>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0</dependency>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0<!-- To be removed as soon as we get rid of AbstractXWikiComponentTestCase -->  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0<dependency>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<groupId>jmock</groupId>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<artifactId>jmock</artifactId>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<version>1.2.0</version>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<exclusions>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<!-- Exclude JUnit since JMock draws an oldish version of JUnit and we wish to use a newer one -->  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<exclusion>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<groupId>junit</groupId>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<artifactId>junit</artifactId>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</exclusion>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</exclusions>  \n18:24\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0</dependency>  \n18:24\u00a0<vmassol>\u00a0they're not the same  \n18:24\u00a0<vmassol>\u00a0one is old jmock  \n18:24\u00a0<vmassol>\u00a0groupid=jmock  \n18:24\u00a0<vmassol>\u00a0one is new jmock  \n18:24\u00a0<vmassol>\u00a0groupid=org.jmock  \n18:24\u00a0<+tmortagne>\u00a0i know the group id is not the same  \n18:24\u00a0<+tmortagne>\u00a0but are they compatible ?  \n18:24\u00a0<vmassol>\u00a0yes  \n18:24\u00a0<vmassol>\u00a0the reason is that some tests haven't been migrated to newer jmock  \n18:25\u00a0<vmassol>\u00a0I've added the comment:  \n18:25\u00a0<vmassol>\u00a0\u00a0 <!-- To be removed as soon as we get rid of AbstractXWikiComponentTestCase -->  \n18:25\u00a0<+tmortagne>\u00a0and the new one is not retro-compatible ?  \n18:25\u00a0<vmassol>\u00a0no  \n18:25\u00a0<vmassol>\u00a0they're exclusive  \n18:26\u00a0<+tmortagne>\u00a0nice they changed group id then... would have be complex otherwise  \n18:26\u00a0<vmassol>\u00a0they did this on purpose, indeed  \n18:26\u00a0<vmassol>\u00a0oh I know  \n18:26\u00a0<vmassol>\u00a0the problem is that the artifactid should be  \n18:26\u00a0<vmassol>\u00a0common-test  \n18:26\u00a0<vmassol>\u00a0and NOT  \n18:26\u00a0<vmassol>\u00a0common-tests  \n18:26\u00a0<vmassol>\u00a0:)  \n18:26\u00a0<vmassol>\u00a0fixing  \n18:27\u00a0<+tmortagne>\u00a0indeed, we should cleanup the snapshot repository  \n18:27\u00a0<+tmortagne>\u00a0to not reproduce this kind of issue  \n18:28\u00a0<+tmortagne>\u00a0doing than with nexus  \n18:29\u00a0<+tmortagne>\u00a0done  \n18:30\u00a0<vmassol>\u00a0thanks  \n18:32\u00a0<Denis>\u00a0has joined #xwiki  \n18:47\u00a0<arkub>\u00a0has quit  \n19:31\u00a0<Denis>\u00a0has quit  \n19:31\u00a0<jvdrean>\u00a0has quit  \n19:34\u00a0<lucaa1>\u00a0has quit  \n19:47\u00a0<fmancinelli>\u00a0has quit  \n19:49\u00a0<tmortagne>\u00a0has quit  \n20:04\u00a0<lucaa>\u00a0has joined #xwiki  \n20:34\u00a0<Denis>\u00a0has joined #xwiki  \n20:44\u00a0<vmassol>\u00a0has quit  \n21:18\u00a0<vmassol>\u00a0has joined #xwiki  \n22:16\u00a0<vmassol>\u00a0has quit  \n23:36\u00a0<lucaa>\u00a0has quit  \n23:54\u00a0<Enygma`>\u00a0has quit  \n\n"}