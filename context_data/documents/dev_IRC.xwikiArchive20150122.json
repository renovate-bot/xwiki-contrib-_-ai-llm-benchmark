{"id": "dev:IRC.xwikiArchive20150122", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150122", "title": "IRC Archive for channel #xwiki on 22 January 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<fmancinelli>\u00a0has quit  \n00:46\u00a0<vmassol>\u00a0has quit  \n02:27\u00a0<kyndel>\u00a0has joined #xwiki  \n03:06\u00a0<xwikibot>\u00a0has joined #xwiki  \n05:04\u00a0<kyndel>\u00a0has quit  \n05:14\u00a0<spawn57>\u00a0has left #xwiki  \n06:01\u00a0<Denis1>\u00a0has joined #xwiki  \n06:03\u00a0<Denis>\u00a0has quit  \n06:26\u00a0<kyndel>\u00a0has joined #xwiki  \n06:41\u00a0<mflorea>\u00a0has joined #xwiki  \n06:48\u00a0<msmeria>\u00a0has joined #xwiki  \n06:53\u00a0<Bugendol1>\u00a0has quit  \n06:53\u00a0<Bugendolf>\u00a0has joined #xwiki  \n07:03\u00a0<mflorea>\u00a0has quit  \n07:54\u00a0<sburjan>\u00a0has joined #xwiki  \n08:25\u00a0<lyes>\u00a0has joined #xwiki  \n08:35\u00a0<vmassol>\u00a0has joined #xwiki  \n08:40\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:43\u00a0<vmassol>\u00a0good morning  \n08:55\u00a0<vmassol>\u00a0going to send the roadmap mail for 7.0 now  \n09:08\u00a0<gsmeria>\u00a0has joined #xwiki  \n09:12\u00a0<ClemensR>\u00a0has joined #xwiki  \n09:14\u00a0<mflorea>\u00a0has joined #xwiki  \n09:14\u00a0<helge>\u00a0has joined #xwiki  \n09:15\u00a0<helge>\u00a0Good morning. I have read in the 6.4 release notes about the oracle issue. I run Postgres - does the same apply here?  \n09:17\u00a0<vmassol>\u00a0helge: hi  \n09:17\u00a0<vmassol>\u00a0no  \n09:17\u00a0<vmassol>\u00a0it's only for Oracle  \n09:17\u00a0<vmassol>\u00a0have you checked your web.xml?  \n09:17\u00a0<vmassol>\u00a0for the missing listener  \n09:17\u00a0<vmassol>\u00a0I've tried to reproduce your problem and couldn't  \n09:17\u00a0<vmassol>\u00a0your problem doesn't seem related to the DB BTW  \n09:17\u00a0<vmassol>\u00a0it's a container startup issue  \n09:22\u00a0<helge>\u00a0I checked the web.xml and the listener is there  \n09:24\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:27\u00a0<vmassol>\u00a0helge: and you always get this error whenever you start tomcat?  \n09:27\u00a0<cjd>\u00a0has joined #xwiki  \n09:27\u00a0<vmassol>\u00a0(ie it's reproducible every time)  \n09:28\u00a0<helge>\u00a0only with 6.4.  \n09:28\u00a0<Inge->\u00a0helge: for fun, whois me  \n09:28\u00a0<helge>\u00a0every time  \n09:29\u00a0<vmassol>\u00a0helge: it's a clean install or an upgrade?  \n09:30\u00a0<helge>\u00a0Inge: ;)  \n09:30\u00a0<helge>\u00a0vmassol: it' an upgrade from 6.3  \n09:30\u00a0<helge>\u00a0what I do is delete the 6.3 webapp folder  \n09:31\u00a0<helge>\u00a0create wiki wepapp folder  \n09:31\u00a0<helge>\u00a0copy war file into new folder and expand it  \n09:32\u00a0<helge>\u00a0adjust hibernate, xwiki.cfg and xwiki.properties  \n09:32\u00a0<helge>\u00a0start tomcat (was shut down before deleting webapp folder)  \n09:32\u00a0<helge>\u00a0fails  \n09:33\u00a0<helge>\u00a0it does not fail when I go all the way back and deploy 6.3 in the same way  \n09:33\u00a0<vmassol>\u00a0hmm that should work and is what I did  \n09:33\u00a0<vmassol>\u00a0maybe remove tomcat temporary / work data  \n09:33\u00a0<vmassol>\u00a0ok so forge this last line then  \n09:33\u00a0<vmassol>\u00a0\\*forget  \n09:34\u00a0<vmassol>\u00a0from what I saw yesterday it happened at startup  \n09:34\u00a0<vmassol>\u00a0even before the first request,  \n09:34\u00a0<vmassol>\u00a0(first HTTP request that is)  \n09:34\u00a0<vmassol>\u00a0so it should be independent from the DB  \n09:34\u00a0<vmassol>\u00a0what version of tomcat?  \n09:34\u00a0<vmassol>\u00a0(I've tested on 7.0.x)  \n09:35\u00a0<helge>\u00a07.0.42  \n09:35\u00a0<vmassol>\u00a0java 7 right?  \n09:35\u00a0<helge>\u00a0yes  \n09:36\u00a0<vmassol>\u00a0so the only difference from what I have is your config files  \n09:36\u00a0<vmassol>\u00a0and  \n09:36\u00a0<vmassol>\u00a0extensions you may have installed  \n09:36\u00a0<vmassol>\u00a0it could be an extension that fails at srtaup  \n09:36\u00a0<helge>\u00a0ok  \n09:37\u00a0<vmassol>\u00a0actually could you paste again the stack trace?  \n09:38\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:39\u00a0<helge>\u00a0http://pastebin.com/w9rtXFXi  \n09:41\u00a0<vmassol>\u00a0helge: did you make a http request before this stack trace is printed out?  \n09:42\u00a0<vmassol>\u00a0it seems so since it's calling the action servlet  \n09:42\u00a0<helge>\u00a0yes, I even restartet tomcat just before  \n09:42\u00a0<vmassol>\u00a0could you paste the full log from tomcat from the beginning?  \n09:43\u00a0<vmassol>\u00a0we might need to turn on debugging too to get more info  \n09:44\u00a0<helge>\u00a0it is just repeating all the time, however here is the full log from today http://pastebin.com/8CcD95e1  \n09:44\u00a0<vmassol>\u00a0I'd like to see the start of xwiki  \n09:44\u00a0<vmassol>\u00a0it's not in your log  \n09:45\u00a0<vmassol>\u00a0you could activate logs too, see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationTomcat#HSEVERE:ErrorlistenerStart  \n09:50\u00a0<helge>\u00a0vmassol: ok here ist today's catalina.out http://pastebin.com/KZh2Xn7x  \n09:50\u00a0<helge>\u00a0now I see something...  \n09:55\u00a0<fmancinelli>\u00a0has joined #xwiki  \n09:56\u00a0<gdelhumeau>\u00a0vmassol: I can release 6.2.5 today or monday. I think monday is better because we may fix bugs today during the BFD that concerns the 6.2.x branch  \n09:57\u00a0<vmassol>\u00a0gdelhumeau: sounds good  \n09:57\u00a0<vmassol>\u00a0helge: indeed  \n09:57\u00a0<vmassol>\u00a0this looks like 6.3!  \n09:58\u00a0<vmassol>\u00a0INFO: Deploying web application archive /srv/tomcat/webapps/xwiki-enterprise-web-6.3.war  \n10:02\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:08\u00a0<helge>\u00a0vmassol: still don't get it. Why is tomcat still trying to deploy 6.3? From some archive? I deployed 6.4 as described  \n10:08\u00a0<vmassol>\u00a0nothing in your webapp directory?  \n10:08\u00a0<vmassol>\u00a0in /srv/tomcat/webapps/  \n10:09\u00a0<vmassol>\u00a0no WAR file?  \n10:09\u00a0<helge>\u00a0no, deleted them all. there is just the ROOT and wiki folder, inside wiki is 6.4  \n10:09\u00a0<vmassol>\u00a0as I said earlier you could also clean your work/ and temp/ directories under your tomcat/ dir  \n10:10\u00a0<evalica>\u00a0has joined #xwiki  \n10:10\u00a0<helge>\u00a0Ok, I try it  \n10:10\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:10\u00a0<vmassol>\u00a0maybe you use the Tomcat Manager in the past to deploy 6.3  \n10:10\u00a0<vmassol>\u00a0see http://tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html  \n10:20\u00a0<ClemensR>\u00a0cleaning the \" work/ \" dir is only ok if the enviroment.permanentDir in xwiki.properties is set (which it should, anyway) ...  \n10:25\u00a0<tmortagne>\u00a0vmassol: Hi  \n10:26\u00a0<tmortagne>\u00a0any specific reason to not \"update extensions on http://extensions.xwiki.org using the Batch importer scheduler\" during the release ?  \n10:28\u00a0<vmassol>\u00a0tmortagne: no reason, I think we should remove the \"optional\" message, for this one and for debian too  \n10:29\u00a0<ClemensR>\u00a0helge: maybe there is an extra context in some conf/Catalina/localhost/\\*.xml, which tries to install \u00a0something different as \u00a0/wiki ?  \n10:29\u00a0<tmortagne>\u00a0vmassol: so you think it should already be done but you did not do it ?  \n10:29\u00a0<vmassol>\u00a0I think it would be good to do it yes  \n10:29\u00a0<vmassol>\u00a0but again it was marked as optional  \n10:29\u00a0<vmassol>\u00a0optional means optional  \n10:29\u00a0<vmassol>\u00a0:)  \n10:30\u00a0<tmortagne>\u00a0that's because they are, those 2 really makes sense only for final release and both are also automated tasked every night  \n10:30\u00a0<tmortagne>\u00a0s/tasked/tasks/  \n10:31\u00a0<vmassol>\u00a0then why is it a problem?  \n10:31\u00a0<vmassol>\u00a0for me the debian one is a problem  \n10:31\u00a0<vmassol>\u00a0and the other one too  \n10:31\u00a0<vmassol>\u00a0because as soon as we announce the release  \n10:31\u00a0<vmassol>\u00a0users are going to try them out  \n10:31\u00a0<vmassol>\u00a0and it'll fail for them  \n10:31\u00a0<vmassol>\u00a0(hence the debian issue reported by thomas S yesterday)  \n10:35\u00a0<tmortagne>\u00a0vmassol: either you think they should be done or you don't, you are the one who added those task to the plan so I was wondering why you did not do it since IMO it's not a big deal and we could wait for the script that are run automatically  \n10:35\u00a0<vmassol>\u00a0are you sure I am the one who put \"optional\"? I dbout that  \n10:36\u00a0<vmassol>\u00a0checking :)  \n10:38\u00a0<kyndel>\u00a0has quit  \n10:39\u00a0<vmassol>\u00a0hmm seems it's me in rev 4.1 even though the diff doesn't work.. Ok fixing and removing optional  \n10:39\u00a0<vmassol>\u00a0and adding explanations in the help  \n10:51\u00a0<Wartechs>\u00a0has joined #xwiki  \n10:52\u00a0<Wartechs>\u00a0hello guys, could anyone explain me how to totally set xwiki to installed java 8 on debian?  \n10:53\u00a0<ClemensR>\u00a0which servlet container are you using ?  \n10:53\u00a0<Wartechs>\u00a0tomcat  \n10:55\u00a0<Wartechs>\u00a0we installed it on a cubietruck and it works, but it feasts 190% CPU. so we read, that Java 8 shall lower that.  \n10:58\u00a0<ClemensR>\u00a0it is normal that XWiki eats quite a bit of CPU in the first run, as it creates the Solr Search index.  \n10:59\u00a0<ClemensR>\u00a0aside of that I guess this is a tomcat config issue  \n10:59\u00a0<Wartechs>\u00a0in the beginning i would understand, but its running since 2 weeks  \n10:59\u00a0<ClemensR>\u00a0so you edit /etc/default/tomcat8 and set JAVA\\_HOME to point to the java8 installation, and that should be fine  \n11:00\u00a0<Wartechs>\u00a0tomcat8? we have 7  \n11:00\u00a0<ClemensR>\u00a0ah, ok, 2 weeks is not \"on first startup\"  \n11:00\u00a0<Wartechs>\u00a0does it ONLY use java7?  \n11:00\u00a0<ClemensR>\u00a0ah, yes, use /etc/default/tomcat7  \n11:01\u00a0<cjd>\u00a0so we read, that Java 8 shall lower that <-- caution: java8 is not well tested yet, if you want to have an easy and enjoyable life, you want to use what most people use :)  \n11:01\u00a0<Wartechs>\u00a0do i have to delete the hash?  \n11:01\u00a0<ClemensR>\u00a0yes, otheriwse it is commented  \n11:01\u00a0<cjd>\u00a0that applies not just to XWiki but to tomcat/groovy/velocity/all of the other things which are part of XWiki  \n11:02\u00a0<ClemensR>\u00a0if wiki gets stuck with 100% CPU, maybe sending the process a kill -3 \u00a0might reveal what it is doing \u00a0(or use jstack)  \n11:02\u00a0<Wartechs>\u00a0yeah, thats why i privately dont use J8. But to wait 5 minutes for openening a site makes us desperate  \n11:03\u00a0<Wartechs>\u00a0?  \n11:03\u00a0<Wartechs>\u00a0sry, am new to this  \n11:03\u00a0<ClemensR>\u00a0I do not think java8 should make that much of a difference ... but it might be worth a try  \n11:04\u00a0<Wartechs>\u00a0restarting tomcat  \n11:05\u00a0<Wartechs>\u00a0okay, uses J8 now  \n11:06\u00a0<Wartechs>\u00a0testing  \n11:06\u00a0<ClemensR>\u00a0if you know the PID of the tomcat process, you can use $JAVA\\_HOME/bin/jstack <PID> \u00a0\u00a0and get back information about what the heck the tomcat/XWiki/whatever is doing  \n11:06\u00a0<Inge->\u00a0has quit  \n11:06\u00a0<ClemensR>\u00a0the thread with the looooong stack traces are possibly the ones which consume the CPU  \n11:06\u00a0<Wartechs>\u00a0i will try  \n11:07\u00a0<Wartechs>\u00a0apt-get install jstack?  \n11:07\u00a0<ClemensR>\u00a0it is not preionstalled with java ?  \n11:07\u00a0<cjd>\u00a0if you have a full thread dump, you can paste it here: http://jthreader.xwiki.com/  \n11:07\u00a0<Wartechs>\u00a0nope  \n11:07\u00a0<cjd>\u00a0oh not with java8 though, they changed the format :(  \n11:08\u00a0<ClemensR>\u00a0it is not in /usr/bin/jstack ?  \n11:08\u00a0<ClemensR>\u00a0ah, they did ? duh :(  \n11:08\u00a0<Wartechs>\u00a0okay? testing  \n11:08\u00a0<cjd>\u00a0ClemensR: it's fine for reading but it broke my parser badly  \n11:09\u00a0<ClemensR>\u00a0cjd: too bad. but I did not know about jthreader.xwiki.com , thanks for the pointer :)  \n11:09\u00a0<Wartechs>\u00a04011: Unable to open socket file: target process not responding or HotSpot VM not loaded The -F option can be used when the target process is not responding  \n11:10\u00a0<cjd>\u00a0it does eventually load though?  \n11:11\u00a0<ClemensR>\u00a0Wartechs: this usually means the pid id no the process id of a java process  \n11:11\u00a0<cjd>\u00a0or it's in an infinite loop?  \n11:11\u00a0<Wartechs>\u00a0xwiki totally runs  \n11:12\u00a0<Inge->\u00a0has joined #xwiki  \n11:12\u00a0<cjd>\u00a0tail -f /wherever/is/your/catalina.out  \n11:12\u00a0<cjd>\u00a0kill -3 pidof java  \n11:12\u00a0<cjd>\u00a0kill -3 `pidof java`  \n11:12\u00a0<martin-h>\u00a0has joined #xwiki  \n11:12\u00a0<cjd>\u00a0that's another way to collect the thread dump  \n11:13\u00a0<ClemensR>\u00a0ah, I see I can reproduce the fail of jstack on some Debian server - even if the pid is correct. Works only locally on my home box :(  \n11:14\u00a0<Slashman>\u00a0has joined #xwiki  \n11:14\u00a0<cjd>\u00a0yeah, most profiling tools fail when the jvm is under stress  \n11:14\u00a0<Wartechs>\u00a0sry, 10 mins break, boss is here  \n11:14\u00a0<ClemensR>\u00a0so better get stack trace like cjd says, that seems to work actually. On debian log file should be in \u00a0/var/log/tomcat7/catalina.out  \n11:15\u00a0<cjd>\u00a0kill -3 $jvm\\_pid always works  \n11:15\u00a0<ClemensR>\u00a0well, and if the server is running nicely now, then no need to profile, of course ...  \n11:16\u00a0<cjd>\u00a0can't repair the roof when it's raining and when it's sunny, it doesn't leak :)  \n11:16\u00a0<Wartechs>\u00a0loading a site needs 5 mins  \n11:16\u00a0<Wartechs>\u00a0caused by 190% CPU  \n11:16\u00a0<cjd>\u00a0Wartechs: this is almost certainly an easy-to-resolve bug  \n11:16\u00a0<cjd>\u00a0(that doesn't happen on our infra)  \n11:17\u00a0<Wartechs>\u00a05 mins even trough local network  \n11:18\u00a0<cjd>\u00a0how much ram did you give the jvm?  \n11:19\u00a0<Wartechs>\u00a01024  \n11:19\u00a0<Wartechs>\u00a0its the Xmx-value, correct?  \n11:19\u00a0<cjd>\u00a0yes  \n11:19\u00a0<cjd>\u00a0and permgen?  \n11:19\u00a0<Wartechs>\u00a0permgen 192  \n11:20\u00a0<cjd>\u00a0do a kill -3 and put it in ezcrypt.it  \n11:20\u00a0<Wartechs>\u00a0i do in 5 min  \n11:20\u00a0<Wartechs>\u00a0talking with the boss  \n11:26\u00a0<vmassol>\u00a0tmortagne: having a strange upgrade issue  \n11:26\u00a0<vmassol>\u00a0here's what I did:  \n11:26\u00a0<vmassol>\u00a0- installed 6.2.4  \n11:27\u00a0<vmassol>\u00a0(the jetty zipped distribution)  \n11:27\u00a0<vmassol>\u00a0- instllaed 6.4 (jetty zip)  \n11:27\u00a0<vmassol>\u00a0removed the 6.2.4 webapps/xwiki dir and copied the one from 6.4 to simulate an upgrade  \n11:27\u00a0<vmassol>\u00a0so I kept the perm dir  \n11:28\u00a0<vmassol>\u00a0and when I start XE I get this: http://pastebin.com/4m6maC7v  \n11:28\u00a0<vmassol>\u00a0helge: you'll see that I get the same exception you had at the end of my paste!  \n11:29\u00a0<vmassol>\u00a0tmortagne: I don't get the DW  \n11:29\u00a0<vmassol>\u00a0line 221 appeared when I issued the first http request  \n11:30\u00a0<helge>\u00a0vmassol: busy, few minutes, please  \n11:31\u00a0<tmortagne>\u00a0vmassol: you get something ? I don't see how XWiki coul work with not componentmanager in Utils  \n11:32\u00a0<vmassol>\u00a0I get the stacktrace  \n11:32\u00a0<vmassol>\u00a0in the browser  \n11:32\u00a0<ClemensR>\u00a0I can reproduce same thing  \n11:33\u00a0<tmortagne>\u00a0vmassol: this is probably why you don't get the DW, you crash before even calling it so nothing to with it  \n11:33\u00a0<ClemensR>\u00a0unpack xwiki-enterprise-jetty-hsqldb-6.4.zip, remove \"data\" dir and copy over \"data\" dir from a 6.2.3 (in my case). try to start and look at the error  \n11:33\u00a0<tmortagne>\u00a0you don't have any error at init ?  \n11:33\u00a0<tmortagne>\u00a0before tomcat is ready I mean  \n11:33\u00a0<vmassol>\u00a0I'm using jetty  \n11:34\u00a0<tmortagne>\u00a0right  \n11:34\u00a0<tmortagne>\u00a0so no log ?  \n11:34\u00a0<vmassol>\u00a0I pasted the full log  \n11:34\u00a0<vmassol>\u00a0http://pastebin.com/4m6maC7v  \n11:34\u00a0<ClemensR>\u00a0strange that there is no log with tomcat ... \u00a0but with hjetty I basically get the same thin as vmassol  \n11:34\u00a0<tmortagne>\u00a0\"Error loading class 'org.xwiki.search.solr.internal.XWikiDismaxQParserPlugin' \" is weird  \n11:35\u00a0<tmortagne>\u00a0since jetty/hsqldb 6.4 i working well we should probably search what are the difference between what you get in your update and the standard 6.4 distribution  \n11:35\u00a0<ClemensR>\u00a0removing \u00a0data/solr \u00a0helps  \n11:35\u00a0<ClemensR>\u00a0so sure something in the config there mentions that class  \n11:36\u00a0<tmortagne>\u00a0maybe it's just because of SOLR index but I don't see why SOLR index would crash the whole wiki  \n11:37\u00a0<tmortagne>\u00a0ClemensR: by \"helps\" you mean it fix the issue or there is something else ?  \n11:37\u00a0<ClemensR>\u00a0\"helps\" means the error happens no longer on startup. of course solr needs to rebuild the index  \n11:37\u00a0<vmassol>\u00a0so no more NPE?  \n11:37\u00a0<ClemensR>\u00a0ok, and I get the DW, seems all is \"fine\"  \n11:38\u00a0<vmassol>\u00a0ok so we upgraded SOLR or we changed the config  \n11:38\u00a0<vmassol>\u00a0(or both)  \n11:38\u00a0<vmassol>\u00a0and it's incompatible now  \n11:38\u00a0<vmassol>\u00a0with previous versions  \n11:38\u00a0<tmortagne>\u00a0I think I know why it does not find the class, the class used to be in the WAR and is now part of the index folder  \n11:38\u00a0<vmassol>\u00a0not very nice for a stabilization release  \n11:38\u00a0<tmortagne>\u00a0you can probably reproduce the same issue between 6.3 and 6.4  \n11:38\u00a0<tmortagne>\u00a0so the index need to be removed  \n11:39\u00a0<vmassol>\u00a0not very nice for a stabilization release  \n11:39\u00a0<tmortagne>\u00a0it's not really a bug in 6.4, it's more the usual we don't have anything that check if the index should be resetted  \n11:39\u00a0<vmassol>\u00a0can we do something about it?  \n11:39\u00a0<ClemensR>\u00a0it somewhat makes sense that nothing works \u00a0if the component manager fails to initialize some components ... but why does tomcat swallow the logs :(  \n11:39\u00a0<tmortagne>\u00a0it's not the first time we have changes in the index, in previous cases we just indicated in the release note that the index should be removed  \n11:39\u00a0<vmassol>\u00a0ClemensR: not really  \n11:40\u00a0<vmassol>\u00a0the listener shouldn't fail because SOLr fails  \n11:40\u00a0<vmassol>\u00a0IMO  \n11:40\u00a0<tmortagne>\u00a0but still it's not normal that SOLR crash the whole XWiki init  \n11:40\u00a0<vmassol>\u00a0yep  \n11:40\u00a0<tmortagne>\u00a0it should probably log an issue plus some message saying that a workaround may be to reset the SOLR index  \n11:43\u00a0<tmortagne>\u00a0added a note in the release note for now  \n11:43\u00a0<tmortagne>\u00a0(as usual)  \n11:44\u00a0<tmortagne>\u00a0but we realy need to work on that SOLR index validity check if not automatic upgrade for embedded SOLR server  \n11:45\u00a0<tmortagne>\u00a0I think there is a jira issue about that already  \n11:59\u00a0<gsmeria>\u00a0has quit  \n12:05\u00a0<helge>\u00a0vmassol: deleting /solr did it for me!  \n12:05\u00a0<vmassol>\u00a0yep  \n12:06\u00a0<helge>\u00a0great, thanks for your help  \n12:07\u00a0<vmassol>\u00a0lots of users are going to have this problem  \n12:07\u00a0<vmassol>\u00a0actually anyone that upgrades  \n12:08\u00a0<vmassol>\u00a0added to http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki64 but it's not going to be good enough  \n12:18\u00a0<tmortagne>\u00a0we could put the plugin in both the index and the classpath to make embedded solr based instances upgrade easier, it's not super clean but it's not a big deal either  \n12:18\u00a0<tmortagne>\u00a0(that's the quick solution, the right solution is a system that check if the index is right)  \n12:18\u00a0<ClemensR>\u00a0the strange thing is that the solrconfig.xml has not changed. \u00a0it is just that some extra solr/lib dirs get created  \n12:19\u00a0<tmortagne>\u00a0ClemensR: the plugin moved  \n12:19\u00a0<tmortagne>\u00a0it's now part of the index and used to be in the classpath  \n12:19\u00a0<tmortagne>\u00a0that's what has changed  \n12:19\u00a0<ClemensR>\u00a0ah, ok, that is what moved means, got it (I hope) \u00a0;)  \n12:20\u00a0<vmassol>\u00a0\"we could put the plugin in both the index and the classpath to make embedded solr based instances upgrade easier, it's not super clean but it's not a big deal either\"  \n12:20\u00a0<vmassol>\u00a0+1 for 6.4  \n12:20\u00a0<vmassol>\u00a0I care less for 7.0  \n12:20\u00a0<tmortagne>\u00a0that was to produce and reuse a fully ready to use xwiki solr index configuration that you just put in your standalone solr instance  \n12:20\u00a0<tmortagne>\u00a0s/6.4/6.4.1/  \n12:20\u00a0<vmassol>\u00a0yes 6.4.1  \n12:20\u00a0<tmortagne>\u00a0so you mean doing it only in 6.  \n12:20\u00a0<tmortagne>\u00a0\u00a0branch ?  \n12:20\u00a0<vmassol>\u00a0yes  \n12:20\u00a0<tmortagne>\u00a0s/6./6.4/  \n12:21\u00a0<vmassol>\u00a0wdyt?  \n12:21\u00a0<tmortagne>\u00a0same issue when upgrading to 7.0 unless we put as priority to work on a SOLR index migrator/validator  \n12:22\u00a0<tmortagne>\u00a0unless we take it as \"7.0 is a major version it's ok to have some stuff to do at upgrade\"  \n12:23\u00a0<tmortagne>\u00a0doing it for 6.4 branch for now  \n12:23\u00a0<vmassol>\u00a0yes that's was my idea  \n12:23\u00a0<vmassol>\u00a07.0 is a new cycle and it's easier to accept that we're breaking things  \n12:24\u00a0<vmassol>\u00a0ok  \n12:24\u00a0<carlez>\u00a0has joined #xwiki  \n12:24\u00a0<tmortagne>\u00a0it's not really a breakage (one can put the plugin in the right place in the index, deleting is just simpler for something that is generated anyway) but ok  \n12:25\u00a0<vmassol>\u00a0yes  \n12:26\u00a0<Wartechs>\u00a0@cjd: sry, takes much longer then expected ...  \n12:28\u00a0<Wartechs>\u00a0i did the kill -3, bute where do i find the dump?  \n12:28\u00a0<cjd>\u00a0catalina.out  \n12:29\u00a0<gsmeria>\u00a0has joined #xwiki  \n12:30\u00a0<carlez>\u00a0Hello! Stupid question from a newbie: is it possible to create spaces and pages from a component in java?  \n12:31\u00a0<Wartechs>\u00a0where do i find it?  \n12:32\u00a0<ClemensR>\u00a0Wartechs: \u00a0in /var/log/tomcat7/catalina.out  \n12:33\u00a0<ClemensR>\u00a0carlez: yes, if you can get hold on the xwiki context or xwiki object or whatever, which you can  \n12:34\u00a0<ClemensR>\u00a0you do an \u00a0\u00a0\u00a0\u00a0\u00a0@Inject \u00a0\u00a0Provider<XWikiContext> contextProvider; \u00a0\u00a0(where com.xpn.xwiki.XWikiContext)  \n12:35\u00a0<ClemensR>\u00a0and then in the code of some method of the component XWikiContext context = contextProvider.get();  \n12:37\u00a0<ClemensR>\u00a0from this you can e.g. access the \"XWiki\" object context.getXWiki() , which then can be used to do all kind of stuff  \n12:38\u00a0<ClemensR>\u00a0actually, to create a page, you just get it ( doc = xwiki.getDocument(....) ) \u00a0- this is not null even if the doc does not exist. but in that case you have doc.isNew()  \n12:40\u00a0<ClemensR>\u00a0you can just do doc.setContent(\" ... some string with xwiki syntax ...\") and xwiki.saveDocument( doc, \"update comment\", context) -> new document created programtically  \n12:47\u00a0<ClemensR>\u00a0has left #xwiki  \n12:53\u00a0<helge>\u00a0has quit  \n12:59\u00a0<Wartechs>\u00a0@cjd: here is the catalina.out: http://pastebin.com/U23DVAhC  \n13:13\u00a0<tmortagne>\u00a0Wartechs: java.lang.OutOfMemoryError  \n13:13\u00a0<tmortagne>\u00a0that's probably the cause of all your issues  \n13:13\u00a0<tmortagne>\u00a0looks like something is happening that takes a lot of memory for some reason  \n13:14\u00a0<tmortagne>\u00a0what database are you using ? MySQL ?  \n13:14\u00a0<Wartechs>\u00a0integraded mysl  \n13:14\u00a0<tmortagne>\u00a0not sure what \"integraded\" mysl means :)  \n13:14\u00a0<tmortagne>\u00a0in memory ?  \n13:15\u00a0<Wartechs>\u00a0in database  \n13:15\u00a0<Wartechs>\u00a0tomcat integraded mysql  \n13:15\u00a0<tmortagne>\u00a0so you don't have a separated mysql server running in its own process ?  \n13:15\u00a0<vmassol>\u00a0the problem with tomcat  \n13:15\u00a0<vmassol>\u00a0is that the default memory values are not enough for XWiki  \n13:15\u00a0<vmassol>\u00a0you'll get an OOM very quickly  \n13:16\u00a0<tmortagne>\u00a0vmassol: he have more than the default values AFAIR  \n13:16\u00a0<vmassol>\u00a0ok sorry just jumping in the conversation :)  \n13:16\u00a0<Wartechs>\u00a0i've setted Xmx800m  \n13:16\u00a0<Wartechs>\u00a0no  \n13:16\u00a0<Wartechs>\u00a01024  \n13:16\u00a0<vmassol>\u00a0are you sure it's used btw?  \n13:16\u00a0<vmassol>\u00a0I made several times the mistake  \n13:16\u00a0<vmassol>\u00a0with tomcat  \n13:16\u00a0<tmortagne>\u00a01024 is well enough for XWiki but if it share it with MySQL I can't tell  \n13:17\u00a0<Wartechs>\u00a0htop says yes, its used  \n13:17\u00a0<vmassol>\u00a0ok  \n13:18\u00a0<tmortagne>\u00a0you could maybe take a memory dump to see what's in there  \n13:18\u00a0<tmortagne>\u00a0in the meantime if you have some memory left you could try to increase it a bit  \n13:19\u00a0<Wartechs>\u00a0strangely, now it says 512MB used  \n13:20\u00a0<Wartechs>\u00a0and it became slightly faster  \n13:20\u00a0<Wartechs>\u00a0after renaming the catalina.out xD  \n13:20\u00a0<tmortagne>\u00a0I doubt tomcat store the log file in memory, not by default at least  \n13:21\u00a0<Wartechs>\u00a0okay ... was random  \n13:21\u00a0<Wartechs>\u00a0CPU usage low ... loading time: 1 minute  \n13:23\u00a0<Wartechs>\u00a0okay, seem to work now :)  \n13:27\u00a0<carlez>\u00a0has quit  \n13:27\u00a0<Wartechs>\u00a0thanks to everyone :)  \n13:27\u00a0<Wartechs>\u00a0bye  \n13:28\u00a0<Wartechs>\u00a0has quit  \n13:35\u00a0<silverdrop>\u00a0has joined #xwiki  \n13:36\u00a0<vmassol>\u00a0silverdrop: just commented on http://jira.xwiki.org/browse/XCOMMONS-708  \n13:36\u00a0<vmassol>\u00a0(just updated with more info now)  \n13:37\u00a0<vmassol>\u00a0you've put N/A but it's not correct I think  \n13:37\u00a0<vmassol>\u00a0and I didn't see any modification in the RN  \n13:42\u00a0<msmeria>\u00a0has quit  \n13:47\u00a0<silverdrop>\u00a0@vmassol in the RN I did not see anything that resembled to code so that is why I did not put the actual fields that I added to the REST API.  \n13:48\u00a0<silverdrop>\u00a0as you suggested in the comment I will add them to the developer section  \n13:49\u00a0<vmassol>\u00a0silverdrop: yes because there are 2 parts in the RN, one for users and one for devs  \n13:50\u00a0<vmassol>\u00a0the 6.4 RN being the aggregation of all the RNs leading to the final release make sure you merge it in there too  \n13:50\u00a0<silverdrop>\u00a0as for the REST API, this is what it could find http://platform.xwiki.org/xwiki/bin/view/Features/XWikiRESTfulAPI  \n13:50\u00a0<vmassol>\u00a0yes this is the model REST APIs  \n13:50\u00a0<vmassol>\u00a0but the REST api for extensions is probably somewhere else  \n13:50\u00a0<silverdrop>\u00a0but I can't see anything related to the extension repository rest  \n13:50\u00a0<vmassol>\u00a0tmortagne: any idea?  \n13:51\u00a0<vmassol>\u00a0silverdrop: if it's not documented you can blame tmortagne and ask him to add it or add it yourself ;)  \n13:51\u00a0<vmassol>\u00a0(and curse him under your breath while doing so)  \n13:51\u00a0<vmassol>\u00a0:)  \n13:52\u00a0<silverdrop>\u00a0I don;t have the time right now to document the whole REST api for the extension repo app as I'm quite busy with something else  \n13:52\u00a0<silverdrop>\u00a0but hopefuly it is documented somewhere  \n13:52\u00a0<vmassol>\u00a0silverdrop: no, you need to finisht his  \n13:52\u00a0<vmassol>\u00a0you said the same thing earlier  \n13:53\u00a0<vmassol>\u00a0and this doc was skipped already for over a month  \n13:53\u00a0<vmassol>\u00a0which is bad  \n13:53\u00a0<vmassol>\u00a0this is not our practice  \n13:53\u00a0<vmassol>\u00a0so you need to find the time  \n13:54\u00a0<vmassol>\u00a0for us, tests and doc are as important as the code  \n13:55\u00a0<silverdrop>\u00a0ok, I'll start with the RN and after that try to track down the doc for estention repo rest  \n13:55\u00a0<vmassol>\u00a0is the module imported on e.x.o?  \n13:56\u00a0<vmassol>\u00a0do you remember in which module the REST code is?  \n13:56\u00a0<vmassol>\u00a0ah common probably, was looking in platform  \n13:57\u00a0<vmassol>\u00a0hmm no  \n13:57\u00a0<vmassol>\u00a0ok it's in the repo app  \n13:57\u00a0<silverdrop>\u00a0it's in xwiki-commons-core/xwiki-commons-repository/xwiki-commons-repository-model/src/main/resources/xwiki.rest.extension.model.xsd  \n13:58\u00a0<vmassol>\u00a0repository-model  \n13:58\u00a0<vmassol>\u00a0so the place for the doc should be http://extensions.xwiki.org/xwiki/bin/view/Extension/Repository+Module  \n13:59\u00a0<vmassol>\u00a0putting an example of the REST URL and some resulting JSON or XML would go a long way  \n13:59\u00a0<vmassol>\u00a0shouldn't be long  \n13:59\u00a0<silverdrop>\u00a0I had already visited that page and I did not see anything about REST, just it being mentioned  \n13:59\u00a0<silverdrop>\u00a0that's why I skipped it  \n14:00\u00a0<silverdrop>\u00a0ok, I'll update the doc  \n14:00\u00a0<vmassol>\u00a0ok but we need to fix this  \n14:00\u00a0<vmassol>\u00a0it's the job of us all to keep improving the doc as we progress. Don't write a thesis, just a sample showing the input and output is enough IMO  \n14:25\u00a0<lyes>\u00a0has quit  \n14:43\u00a0<[d\\_\\_d]>\u00a0has quit  \n14:45\u00a0<[d\\_\\_d]>\u00a0has joined #xwiki  \n14:47\u00a0<lyes>\u00a0has joined #xwiki  \n14:56\u00a0<msmeria>\u00a0has joined #xwiki  \n14:57\u00a0<msmeria>\u00a0has quit  \n15:01\u00a0<vmassol>\u00a0silverdrop: in http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki64M3#HREST it should be above or under \"Rendering\"  \n15:02\u00a0<vmassol>\u00a0same for http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki64 actually  \n15:03\u00a0<silverdrop>\u00a0I noticed that and fixed it  \n15:04\u00a0<silverdrop>\u00a0should be ok now  \n15:04\u00a0<vmassol>\u00a0thx  \n15:04\u00a0<vmassol>\u00a0still \u00a0bit low  \n15:04\u00a0<vmassol>\u00a0:)  \n15:04\u00a0<silverdrop>\u00a0want me to move it again? :)  \n15:04\u00a0<vmassol>\u00a0misc and upgrades should be last i  \n15:04\u00a0<vmassol>\u00a0s/i//  \n15:05\u00a0<silverdrop>\u00a0so I'll put it just after rendering  \n15:05\u00a0<vmassol>\u00a0yep  \n15:07\u00a0<silverdrop>\u00a0done  \n15:08\u00a0<silverdrop>\u00a0is now known as <vrachieru>  \n15:26\u00a0<sdumitriu>\u00a0has quit  \n15:45\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:50\u00a0<gsmeria>\u00a0has left #xwiki  \n15:51\u00a0<lucaa>\u00a0has joined #xwiki  \n16:15\u00a0<vmassol>\u00a0very interesting: the takari maven lifecycle: http://takari.io/book/40-lifecycle.html  \n16:16\u00a0<vmassol>\u00a0note that I've quickly tried it and ATM it's failing on our annotation processor  \n16:16\u00a0<vmassol>\u00a0(I didn't find a way to specify our source paths for anno processing)  \n16:26\u00a0<Bugen\\_do>\u00a0has joined #xwiki  \n17:06\u00a0<evalica>\u00a0has quit  \n17:07\u00a0<lucaa>\u00a0has quit  \n17:09\u00a0<Enygma`>\u00a0has quit  \n17:11\u00a0<lucaa>\u00a0has joined #xwiki  \n17:25\u00a0<lucaa>\u00a0has quit  \n17:35\u00a0<tmortagne>\u00a0has quit  \n17:49\u00a0<lyes>\u00a0has quit  \n17:55\u00a0<KermitTheFragger>\u00a0has quit  \n18:02\u00a0<cjd>\u00a0has quit  \n18:10\u00a0<gdelhumeau>\u00a0has quit  \n18:15\u00a0<fmancinelli>\u00a0has quit  \n18:32\u00a0<kyndel>\u00a0has joined #xwiki  \n18:44\u00a0<woshilapin>\u00a0has quit  \n19:09\u00a0<kyndel>\u00a0has quit  \n19:12\u00a0<kyndel>\u00a0has joined #xwiki  \n19:13\u00a0<mflorea>\u00a0has quit  \n19:23\u00a0<lucaa>\u00a0has joined #xwiki  \n19:26\u00a0<vmassol>\u00a0didn't realize we could use %regex for clirr ignores: https://svn.forgerock.org/opendj/trunk/opendj/opendj-core/clirr-ignored-api-changes.xml  \n19:30\u00a0<lucaa>\u00a0has quit  \n19:30\u00a0<Slashman>\u00a0has quit  \n19:41\u00a0<Bugen\\_do>\u00a0has quit  \n19:55\u00a0<fmancinelli>\u00a0has joined #xwiki  \n20:03\u00a0<kyndel>\u00a0has quit  \n20:04\u00a0<kyndel>\u00a0has joined #xwiki  \n20:12\u00a0<kyndel>\u00a0has quit  \n20:13\u00a0<kyndel>\u00a0has joined #xwiki  \n20:15\u00a0<lyes>\u00a0has joined #xwiki  \n20:21\u00a0<kyndel>\u00a0has quit  \n20:49\u00a0<lyes>\u00a0has quit  \n22:01\u00a0<momomomomo>\u00a0has joined #xwiki  \n22:13\u00a0<sburjan>\u00a0has quit  \n22:29\u00a0<momomomomo>\u00a0has quit  \n22:51\u00a0<momomomomo>\u00a0has joined #xwiki  \n23:02\u00a0<momomomomo\\_>\u00a0has joined #xwiki  \n23:03\u00a0<momomomomo>\u00a0has quit  \n23:05\u00a0<Denis1>\u00a0is now known as <Denis>  \n23:07\u00a0<Denis>\u00a0has quit  \n23:19\u00a0<Denis>\u00a0has joined #xwiki\n"}