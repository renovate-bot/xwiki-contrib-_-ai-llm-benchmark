{"id": "dev:IRC.xwikiArchive20101107", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20101107", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nflorinciu joined #xwiki at 00:11  \nflorinciu left at 00:11 (Client Quit  \nspliffy\\_ joined #xwiki at 00:15  \nspliffy left at 00:18 (Ping timeout: 265 seconds  \nsdumitriu left at 00:28 (Quit: Leaving.  \nsdumitriu joined #xwiki at 00:42  \nsdumitriu - (00:42): jvelociter: Ping  \nvmassol joined #xwiki at 00:49  \nlucaa - (00:50): guys, I am trying to fix XE-727  \nlucaa - (00:50): I added an import action listener  \nlucaa - (00:50): which calls register macros  \nlucaa - (00:51): and it seems that  \nlucaa - (00:51): xcontext.getWiki().getRightService().hasAccessLevel(right, xcontext.getUser(), documentReference, xcontext);  \nlucaa - (00:51): returns false during this listener  \nlucaa - (00:52): right is \"edit\", xcontext.getUser() is \"XWiki.Admin\" and document reference is \"xwiki:Main.RecentActivity\"  \nlucaa - (00:52): I don't understand  \nvmassol left at 00:53 (Client Quit  \ncjdelisle - (00:53): xcontext.getWiki().getRightService().hasAccessLevel(right, xcontext.getUser(), documentReference, xcontext); <-- Does that execute?  \nlucaa - (00:54): wdym if it executes? what else could it do?  \nlucaa - (00:54): it returns false  \nlucaa - (00:54): wait lemme look at the logs  \nlucaa - (00:54): something interesting might be in there  \ncjdelisle - (00:55): I didn't know there was a hasAccessLevel which took a documentReference.  \nlucaa - (00:55): ah I don't have them, they're debug level and I didn't enable  \nlucaa - (00:55): it's a string  \nlucaa - (00:55): it's not a real DocumentReference  \ncjdelisle - (00:55): And I'm pretty sure there is no hasAccessLevel which takes an api.Context rather than an XWikiContext.  \ncjdelisle - (00:56): I'd use xwiki.hasAccessLevel(right, xcontext.getUser(), documentReference)  \nlucaa - (00:56): \u00a0you're making assumptions on the parameters, they are the right ones, it compiles  \nlucaa - (00:56): it  \ncjdelisle - (00:56): But I think xcontext.getXWiki().getRightService().hasAccessLevel(right, xcontext.getUser(), documentReference, xcontext.getContext()); will work.  \nlucaa - (00:56): it's not even my code, it's code that works perfectly well when I restart the wiki  \ncjdelisle - (00:57): hmm  \nSvenDowideit left at 00:57 (Read error: Connection reset by peer  \nlucaa - (00:57): I think. lemme double check that  \nlucaa - (00:57): (because that would be a little regression)  \ncjdelisle - (00:59): hmm here it is http://maven.xwiki.org/site/xwiki-core-parent/xwiki-core/apidocs/com/xpn/xwiki/user/api/XWikiRightService.html  \ncjdelisle - (00:59): hasAccessLevel(java.lang.String right, java.lang.String username, java.lang.String docname, XWikiContext context)  \ncjdelisle - (01:00): But I would use this one instead.  \ncjdelisle - (01:00): http://maven.xwiki.org/site/xwiki-core-parent/xwiki-core/apidocs/com/xpn/xwiki/api/XWiki.html#hasAccessLevel%28java.lang.String,%20java.lang.String,%20java.lang.String%29  \nSvenDowideit joined #xwiki at 01:00  \nlucaa - (01:00): yes, it works fine when I start the wiki  \ncjdelisle - (01:00): hasAccessLevel(java.lang.String level, java.lang.String user, java.lang.String docname)  \ncjdelisle - (01:01): that is very strange, I think that call is not being used.  \ncjdelisle - (01:02): http://maven.xwiki.org/site/xwiki-core-parent/xwiki-core/apidocs/com/xpn/xwiki/api/Context.html <-- notice there is no xcontext.getWiki() only getXWiki()  \ncjdelisle - (01:03): Perhaps for the c.x.x.api.Context c.x.x.XWikiContext mismatch groovy is doing some sort of strange cast but I don't think so.  \ncjdelisle - (01:06): This is in a groovy macro?  \nsdumitriu - (01:06): No, in Java  \ncjdelisle - (01:07): I am confused then.  \ncjdelisle - (01:08): ``groovy.lang.MissingMethodException: No signature of method: com.xpn.xwiki.api.Context.getWiki() is applicable for argument types: () values: []''  \ncjdelisle - (01:08): Oh haha xcontext is the XWikiContext.  \nsdumitriu left at 01:12 (Quit: Leaving.  \nabusenius\\_ joined #xwiki at 01:19  \nsdumitriu joined #xwiki at 01:22  \nabusenius left at 01:22 (Ping timeout: 265 seconds  \nabusenius\\_ is now known as abusenius ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nlucaa - (01:25): i'm giving up for tonight  \nlucaa - (01:25): see you guys tomorrow  \nspliffy\\_ - (02:14): oops. looks like l10n.wiki.org is gone.  \nsdumitriu - (02:16): Works  \nsdumitriu - (02:16): Try again  \nsdumitriu - (02:16): jvelociter: Still up?  \nspliffy\\_ - (02:17): i get 503's  \nsdumitriu - (02:17): spliffy\\_: What URL?  \nspliffy\\_ - (02:17): http://l10n.xwiki.org/xwiki/bin/view/XE/  \nsdumitriu - (02:17): http://l10n.xwiki.org/xwiki/bin/view/XE/ works for me  \nspliffy\\_ - (02:17): now it works  \nspliffy\\_ - (02:18): try this one http://l10n.xwiki.org/xwiki/bin/view/XE/XWikiCoreResources  \nsdumitriu - (02:18): That one takes a while to generate  \nspliffy\\_ - (02:18): it went faster before my submission xD  \nsdumitriu - (02:19): OK, can't commit anymore, no space left on the server... Going to sleep  \nspliffy\\_ - (02:19): good night  \nsdumitriu left at 02:23 (Ping timeout: 265 seconds  \njbrBridge left at 02:29 (Ping timeout: 255 seconds  \nlucaa left at 02:29 (Ping timeout: 255 seconds  \njbrBridge joined #xwiki at 02:30  \nlucaa joined #xwiki at 02:34  \nsburjan` joined #xwiki at 03:32  \nabusenius left at 04:42 (Quit: Konversation terminated!  \nlucaa left at 05:28 (Ping timeout: 245 seconds  \nnpm left at 05:36 (Read error: Connection reset by peer  \nnpm joined #xwiki at 05:39  \nspliffy joined #xwiki at 06:57  \nspliffy\\_ left at 07:01 (Ping timeout: 252 seconds  \nspliffy\\_ joined #xwiki at 07:24  \nspliffy left at 07:27 (Ping timeout: 265 seconds  \nvmassol joined #xwiki at 08:23  \nvmassol left at 08:29 (Quit: Leaving.  \nvmassol joined #xwiki at 08:59  \nmflorea joined #xwiki at 09:10  \nmarta\\_ joined #xwiki at 09:11  \nvmassol left at 09:33 (Quit: Leaving.  \nmarta\\_ left at 09:54 (Ping timeout: 240 seconds  \nmarta\\_ joined #xwiki at 10:07  \nlucaa joined #xwiki at 10:26  \nsdumitriu joined #xwiki at 10:42  \nsdumitriu - (10:44): mflorea: Ping  \nmflorea - (10:45): sdumitriu: Hi  \nsdumitriu - (10:45): Hi  \nsdumitriu - (10:45): About XWIKI-5560  \nmflorea - (10:45): I read your comment  \nmflorea - (10:45): sounds good  \nsdumitriu - (10:45): Getting the content from the rich editor into the textarea is done asynchroniously, right?  \nmflorea - (10:45): but needs to be done from outside wysiwyg code  \nmflorea - (10:45): well  \nmflorea - (10:46): it depends what content you need  \nmflorea - (10:46): html or source  \nsdumitriu - (10:46): Yep, from outside, it shouldn't have code listening to XWiki custom events  \nsdumitriu - (10:46): Source  \nsdumitriu - (10:46): Or wait  \nsdumitriu - (10:46): I can use the HTML and send the request through a filter  \nsdumitriu - (10:47): How do I activate your conversion filter?  \nmflorea - (10:47): yes, you need source because when the source tab is active the rich text area is \"disabled\", meaning that if you submit the form the ConversionFilter won't be applied  \nmflorea - (10:47): well, the ConversionFilter is activated by two hidden inputs  \nsdumitriu - (10:48): OK, I have to go eat something  \nsdumitriu - (10:48): We'll continue tomorrow f2f  \nmflorea - (10:48): ok  \nlucaa left at 11:25 (Ping timeout: 245 seconds  \nlucaa joined #xwiki at 11:30  \nsdumitriu - (11:45): jvelociter: Ping  \nmflorea left at 12:05 (Quit: Leaving.  \nsdumitriu left at 12:47 (Ping timeout: 252 seconds  \nmarta\\_ left at 12:48 (Ping timeout: 260 seconds  \nlucaa left at 12:56 (Ping timeout: 265 seconds  \nabusenius joined #xwiki at 13:46  \nvmassol joined #xwiki at 13:53  \nabusenius left at 14:03 (Ping timeout: 260 seconds  \nabusenius joined #xwiki at 14:03  \nflorinciu joined #xwiki at 14:43  \nmflorea joined #xwiki at 14:48  \nmflorea left at 15:20 (Quit: Leaving.  \nabusenius left at 15:43 (Remote host closed the connection  \nabusenius joined #xwiki at 15:44  \nDenis left at 16:45 (Quit: Leaving.  \nspliffy\\_ - (17:20): anyone there?  \nspliffy\\_ - (17:21): is this the way to go, to translate application titles? trunk/panels/src/main/resources/Panels/PanelWizard.xml: <title>$msg.get(\"panelwizard.panelwizard\")</title>  \nspliffy\\_ - (17:21): because many apps have hard coded titles  \nspliffy\\_ - (17:21): if this is the right way i'd do create some patches.  \nsdumitriu joined #xwiki at 17:23  \nspliffy\\_ - (17:23): hi sdumitriu!  \nspliffy\\_ is now known as spliff ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nspliff is now known as splffy ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nsplffy - (17:24): arg  \nsplffy is now known as spliffy ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nsdumitriu - (17:24): Hi  \nspliffy - (17:24): ( 17:20:48 \u00a0\u00a0spliffy\\_ ) is this the way to go, to translate application titles? trunk/panels/src/main/resources/Panels/PanelWizard.xml: \u00a0<title>$msg.get(\"panelwizard.panelwizard\")</title>  \nsdumitriu - (17:25): Yes  \nspliffy - (17:25): i see many apps have untranslated properties  \nsdumitriu - (17:25): Then you can use panelwizard.panelwizard=translation in ApplicationResources  \nspliffy - (17:26): yes, is see. but this is the only application file where i found a translated title  \nspliffy - (17:27): should i translate all properties? or just the title?  \nspliffy - (17:27): mhhh  \nsdumitriu - (17:27): Anything you want  \nspliffy - (17:27): i want to do it right :)  \nspliffy - (17:40): sdumitriu: i translated some message on l10n.xwiki.org tonight. what't the procedure now before they get into the trunk?  \nspliffy - (17:41): is there a number of reviews needed?  \nsdumitriu - (17:47): Usually the translations are pushed before releases  \nsdumitriu - (17:48): The next release is next week  \nsdumitriu - (17:48): 11th  \nmflorea joined #xwiki at 17:51  \nspliffy - (17:58): Any german users/devs here? i'm looking for a good translation for advanced and \"simple\" user type  \nsdumitriu - (18:02): spliffy: XWiki already is partly translated in German  \nsdumitriu - (18:02): Isn't that included?  \njbrBridge - (18:03): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] advanced user -- Experte, simple user -- Anf\u00e4nger (Novice) or Anwender (User)  \njbrBridge - (18:03): [[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)] User Preferences are not translated  \nspliffy - (18:05): sdumitriu: partly, yes. but i'm aiming higher ;)  \nspliffy - (18:05): for example only one application title in the wiki administration (PanelWizard) is translated  \nspliffy - (18:06): and Avanced|Simple strings for user types are hard coded in XWiki.java  \nspliffy - (18:07): or did i checkout the wrong code maybe  \nspliffy - (18:08): svn co http://svn.xwiki.org/svnroot/xwiki/platform/core/trunk  \nspliffy - (18:09): dirk are you there or is this a citation? :)  \nspliffy - (18:12): How can we translate the Simple/Adavanced strings in XWiki.java? The resource bundle is setup in this class, but it's not a class member, so it's not visible to the function where strings are harcoded.  \nspliffy - (18:12): i'd propose to make the bundle a class member  \nsdumitriu - (18:18): !who  \njbrBridge - (18:18): \\* members: CalebJamesDeLisle, dirk, [[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nsdumitriu - (18:21): spliffy: Try:  \nsdumitriu - (18:21): XWiki.XWikiUsers\\_usertype\\_Simple=  \nsdumitriu - (18:21): XWiki.XWikiUsers\\_usertype\\_Advanced=  \nspliffy - (18:21): in the l10n app?  \nsdumitriu - (18:22): Locally  \nsdumitriu - (18:22): I don't think this key is present yet  \nspliffy - (18:23): the source code looks like this: needsUpdate |= bclass.addStaticListField(\"usertype\", \"User type\", \"Simple|Advanced\");  \nsdumitriu - (18:23): Object properties are automatically translated  \nspliffy - (18:24): oh i see  \nsdumitriu - (18:24): You don't need to insert the key somewhere, it's automatically looked up if it exists  \nspliffy - (18:25): doesn't this work with the applications properties like title also?  \njvelociter - (18:26): sdumitriu: Hey. I'm going to do that fullscreenEdit rename. What do you think about uicomponents/widgets/fullscreen.js ?  \nsdumitriu - (18:26): spliffy: No, only object properties  \nsdumitriu - (18:26): jvelociter: +1  \njvelociter - (18:27): great  \nspliffy - (18:27): sdumitriu: k  \nsdumitriu - (18:27): jvelociter: Are you also implementing the skinx compatibility mapping?  \njvelociter - (18:27): yep, i wrote it earlier today  \njvelociter - (18:27): right now the mapping is hardcoded in the aspect  \njvelociter - (18:28): I think that's fine for now  \nsdumitriu - (18:32): By the way, the suggest has a JS bug when pressing down or up at the end/start of the list  \njvelociter - (18:34): ah ok. will check that  \nspliffy - (18:35): sdumitriu: tried properties you mentioned. they work, but they don't seem to be in the l10n app  \nsdumitriu - (18:36): spliffy: You can add them to ApplicationResources.properties (in English), make a patch, and post it on jira.xwiki.org  \nspliffy - (18:37): ok, will append it to my xwiki todos  \nspliffy - (18:40): dirk, any suggestions for german word for watchlist? i tried 'Beobachtungsliste' but it's too long and overflows  \nsdumitriu - (18:47): spliffy: The workflow is the following:  \nsdumitriu - (18:47): - localization keys are added to ApplicationResources.properties, along with their English values  \nsdumitriu - (18:47): - this is committed to the SVN  \nsdumitriu - (18:47): - l10n.xwiki.org refreshes the keys from the SVN every midnight  \nsdumitriu - (18:47): - contributors translate the new entries in the meantime  \nspliffy\\_ joined #xwiki at 18:48  \nsdumitriu - (18:48): - before releasing, the release manager downloads the updated pack from l10n.xwiki.org and commits all the translations to SVN  \nsdumitriu - (18:48): So ApplicationResources.properties from SVN is the master file  \nsdumitriu - (18:49): spliffy\\_: Not sure you received all that, see here the logs: http://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20101107?xpage=plain  \nspliffy left at 18:50 (Ping timeout: 276 seconds  \nsdumitriu - (18:51): jvelociter: Not sure you've seen these: https://projects.xwikisas.com/xwiki/bin/view/DevelopmentPractices/BestPractices#Attachments  \njvelociter - (18:52): nope, not seen it yet  \njvelociter - (18:52): cool  \njvelociter - (18:52): maybe some of it should be on dev.xwiki.org  \nsdumitriu - (18:53): Yes, but I'd like it to be in a wiki presentation, a.k.a. the PresentationApplication  \nsdumitriu - (18:53): Since I'm not a big fan of binary blobs  \nsdumitriu - (18:55): Hm, in 3.0 we should move to a new Velocity version  \nsdumitriu - (18:55): They have some nice goodies in it  \nsdumitriu - (18:55): But it's not compatible with our macros  \nsdumitriu - (18:55): So we'll have to do some app migration first  \nspliffy\\_ - (18:58): sdumitriu: ty, very helpful  \nspliffy\\_ is now known as spliffy ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nvmassol left at 19:00 (Quit: Leaving.  \nsdumitriu - (19:00): spliffy: The idea is that if something doesn't exist on l10n.xwiki.org yet, you can submit a patch for ApplicationResources.properties on jira.xwiki.org  \nqwebirc41248 joined #xwiki at 19:38  \nqwebirc41248 left at 19:40 (Client Quit  \nrrodriguez joined #xwiki at 19:49  \nspliffy - (19:50): which version should i select in the affected versions field in jira when i checked out the trunk?  \nrrodriguez left at 19:50 (Read error: Connection reset by peer  \nrrodriguez joined #xwiki at 19:50  \nspliffy - (19:51): all?  \nsdumitriu - (19:55): spliffy: The most recently released  \nsdumitriu - (19:55): 2.6RC1  \nspliffy - (19:57): ok  \nspliffy - (19:58): http://jira.xwiki.org/jira/browse/XWIKI-5661  \nsdumitriu - (19:58): spliffy: Perfect patch, applying it now  \nspliffy - (19:58): nice  \nlpereira joined #xwiki at 20:03  \nvmassol joined #xwiki at 20:04  \nvmassol left at 20:08 (Client Quit  \nspliffy left at 20:17 (Ping timeout: 265 seconds  \nspliffy joined #xwiki at 20:18  \nDenis joined #xwiki at 20:20  \nsdumitriu - (20:22): jvelociter: Ping  \njvelociter - (20:23): pong !  \nsdumitriu - (20:23): When do you want to close XWIKI-5649?  \nsdumitriu - (20:23): XWIKI-5648  \nsdumitriu - (20:23): XWIKI-3655  \nsdumitriu - (20:24): Actually XWIKI-3655 should have been closed a long time ago by me  \njvelociter - (20:24): thought I closed XWIKI-5649 already, apparently not  \njvelociter - (20:24): doing it now  \nmflorea left at 20:25 (Quit: Leaving.  \njvelociter - (20:26): for XWIKI-5648 I wanted to test in IE before closing. Looks good in IE7, haven't tried IE6  \njvelociter - (20:26): I'll close it anyway  \njvelociter - (20:26): XWIKI-3655 agreed we can close it  \nsdumitriu - (20:29): Actually for XWIKI-5648 I'd like to give it to Caty for a review  \nsdumitriu - (20:29): So leave it open  \nsdumitriu - (20:31): 'div.maximizable' -> Why not .maximizable, to support other elements as well?  \njvelociter - (20:31): too late :) but we can reopen  \njvelociter - (20:32): well I prefered to let div.maximizable because that's the only one I've tested. but indeed we can have .maximizable  \nsdumitriu - (20:32): Also, you used some tabs:  \nsdumitriu - (20:32): + \u00a0// a div element with class maximazable  \nsdumitriu - (20:32): + \u00a0this.addElementButton(item);  \njvelociter - (20:33): arf. will fix that  \nsdumitriu - (20:33): And here:  \nsdumitriu - (20:33): + Element.insert(element, {before: this.createOpenLink(element)});  \nvmassol joined #xwiki at 20:34  \njvelociter - (20:35): yep  \njvelociter - (20:35): converted  \nsdumitriu - (20:36): I need a clone  \njvelociter - (20:38): of you ? take several not just one, that would help a lot :)  \nrrodriguez left at 20:43 (Quit: rrodriguez  \nrrodriguez joined #xwiki at 20:55  \nvmassol left at 20:56 (Quit: Leaving.  \nvmassol joined #xwiki at 21:26  \nlpereira left at 21:46 (Quit: Leaving.  \nvmassol left at 22:00 (Quit: Leaving.  \nabusenius left at 22:43 (Remote host closed the connection  \nsdumitriu - (23:45): jvelociter: It would be nice to combine behaviors  \nsdumitriu - (23:45): If an input has both suggestGroups and suggestUsers, the suggest should list both  \njvelociter - (23:46): yes that would be pretty cool. I was thinking about mixing both in the admin section  \njvelociter - (23:46): now the generic implementation with classes is not so simple  \nsdumitriu - (23:46): I know  \nsdumitriu - (23:47): Just an idea for the future  \njvelociter - (23:47): yep  \nspliffy - (23:52): are this velocity comments on top of the code section here? https://svn.xwiki.org/svnroot/xwiki/platform/xwiki-applications/trunk/blog/src/main/resources/Blog/BlogScripts.xml  \nspliffy - (23:52): i'd like to translate the message \"This blog post is hidden\"  \nsdumitriu - (23:52): Yes  \nspliffy - (23:53): ok, so i can use $msg.get(\"..\")  \nspliffy - (23:53): right:  \nspliffy - (23:53): ?  \nsdumitriu - (23:53): Yes  \nsdumitriu - (23:53): It has:  \nsdumitriu - (23:53): <parse>1</parse>  \nsdumitriu - (23:53): Which means that the content is parsed by Velocity  \nspliffy - (23:54): okay. thank you  \nsdumitriu - (23:54): Thank you  \nsdumitriu - (23:54): :)  \n\n"}