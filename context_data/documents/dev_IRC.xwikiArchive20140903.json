{"id": "dev:IRC.xwikiArchive20140903", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140903", "title": "IRC Archive for channel #xwiki on 03 September 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n00:02\u00a0<sdjebloun>\u00a0has quit  \n00:08\u00a0<DarkKnightCZ>\u00a0has quit  \n00:09\u00a0<momomomomo>\u00a0has joined #xwiki  \n00:11\u00a0<lucaa>\u00a0has quit  \n00:20\u00a0<momomomomo>\u00a0has quit  \n03:50\u00a0<Denis>\u00a0has joined #xwiki  \n03:51\u00a0<Denis>\u00a0has quit  \n06:11\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n06:25\u00a0<DarkKnightCZ>\u00a0has quit  \n07:04\u00a0<vmassol>\u00a0has joined #xwiki  \n07:08\u00a0<msmeria>\u00a0has joined #xwiki  \n07:50\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n07:55\u00a0<vmassol>\u00a0has quit  \n08:20\u00a0<DarkKnightCZ>\u00a0has quit  \n08:28\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n08:34\u00a0<sdjebloun>\u00a0has joined #xwiki  \n08:39\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n08:39\u00a0<cjd>\u00a0has joined #xwiki  \n08:48\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:00\u00a0<vmassol>\u00a0has joined #xwiki  \n09:01\u00a0<Denis>\u00a0has joined #xwiki  \n09:01\u00a0<vmassol1>\u00a0has joined #xwiki  \n09:05\u00a0<vmassol>\u00a0has quit  \n09:06\u00a0<vmassol1>\u00a0tmortagne: good morning, fyi there are some broken links here: http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki52#HExportLargeWikisasXARs  \n09:07\u00a0<tmortagne>\u00a0yes the module address changed  \n09:07\u00a0<vmassol1>\u00a0is now known as <vmassol>  \n09:07\u00a0<vmassol>\u00a0also I was trying when we added large export by default  \n09:07\u00a0<vmassol>\u00a0but I couldn't find it in the release notes  \n09:07\u00a0<vmassol>\u00a0in 5.2 it was the beginning apparently but still experimental  \n09:07\u00a0<vmassol>\u00a0do you remember from what version it's considered stable?  \n09:10\u00a0<tmortagne>\u00a0vmassol: XWIKI-9608  \n09:10\u00a0<tmortagne>\u00a0so 5.3, I guess I forgot to indicate it in the release note  \n09:10\u00a0<DarkKnightCZ>\u00a0has quit  \n09:14\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n09:18\u00a0<mflorea>\u00a0has joined #xwiki  \n09:19\u00a0<tmortagne>\u00a0vmassol: http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki53#HAllowexportingLargeWikisbydefault  \n09:20\u00a0<vmassol>\u00a0thanks  \n09:23\u00a0<vmassol>\u00a0tmortagne: hmm should it be  \n09:23\u00a0<vmassol>\u00a0xwiki.action.export.xar.usewikistream=0 ?  \n09:23\u00a0<vmassol>\u00a0I don't understand how it'll work if the user puts a comment at the end of the file  \n09:24\u00a0<tmortagne>\u00a0wrong copy/paste actually I did not wanted to copy the =  \n09:24\u00a0<vmassol>\u00a0setting it to what?  \n09:25\u00a0<vmassol>\u00a0why not say to use xwiki.action.export.xar.usewikistream=0 ?  \n09:25\u00a0<tmortagne>\u00a0vmassol: there is documentation at the end of xwiki.cfg  \n09:26\u00a0<sdumitriu>\u00a0has quit  \n09:28\u00a0<sdumitriu>\u00a0has joined #xwiki  \n09:33\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:36\u00a0<DarkKnightCZ>\u00a0has quit  \n09:56\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n10:03\u00a0<DarkKnightCZ>\u00a0has quit  \n10:13\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:18\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n10:19\u00a0<lucaa>\u00a0has joined #xwiki  \n10:21\u00a0<DarkKnightCZ>\u00a0has quit  \n10:21\u00a0<vmassol>\u00a0has quit  \n10:42\u00a0<vmassol>\u00a0has joined #xwiki  \n11:20\u00a0<vmassol>\u00a0has quit  \n11:23\u00a0<cjd>\u00a0Denis: WDYT of adding a configuration parameter for specifying the secure random implementation?  \n11:23\u00a0<cjd>\u00a0and then we'll try to use that rand everywhere where we actually do secrand  \n11:24\u00a0<cjd>\u00a0the reasoning is because java's default secrand uses /dev/random which has a bad habit of blocking the entire machine  \n11:24\u00a0<tmortagne>\u00a0cjd: isn't there a standard system property for that ?  \n11:25\u00a0<cjd>\u00a0in java's System class?  \n11:26\u00a0<tmortagne>\u00a0talking about -Djava.security.egd=file:/dev/urandom  \n11:26\u00a0<tmortagne>\u00a0for example  \n11:27\u00a0<cjd>\u00a0aha cool  \n11:27\u00a0<tmortagne>\u00a0saw it on stackoverflow some time ago, trying to find some reference doc  \n11:27\u00a0<cjd>\u00a0if I were an admin, I would just do \u00a0\u00a0\u00a0\u00a0mv /dev/random /dev/\\_random && ln /dev/urandom /dev/random  \n11:29\u00a0<cjd>\u00a0meh, I'll just use SecureRandom always  \n11:30\u00a0<tmortagne>\u00a0there is also a property in securerandom.source  \n11:30\u00a0<tmortagne>\u00a0file  \n11:31\u00a0<tmortagne>\u00a0tech.top21.de/techblog/20100317-why-java-s-random-number-generation-might-block-my-application-under-linux.html  \n11:31\u00a0<tmortagne>\u00a0meant securerandom.source property in \u00a0java.security file  \n11:31\u00a0<tmortagne>\u00a0http://tech.top21.de/techblog/20100317-why-java-s-random-number-generation-might-block-my-application-under-linux.html  \n11:32\u00a0<cjd>\u00a0Are we able to do \u00a0\u00a0\u00a0@Inject \u00a0\u00a0private Provider<SomeClass> provider; \u00a0\u00a0?  \n11:33\u00a0<cjd>\u00a0I don't remember if that landed in the ECM or not...  \n11:33\u00a0<cjd>\u00a0then implement SomeClassProvider implements Provider<SomeClass>  \n11:33\u00a0<vmassol>\u00a0has joined #xwiki  \n11:33\u00a0<tmortagne>\u00a0yes you just need to implements Provider<SomeClass> in a component  \n11:34\u00a0<cjd>\u00a0perfect, thanks  \n11:34\u00a0<tmortagne>\u00a0a good example is XWikiContextProvider  \n11:34\u00a0<tmortagne>\u00a0in oldcore  \n11:34\u00a0<tmortagne>\u00a0com.xpn.xwiki.internal.XWikiContextProvider  \n11:35\u00a0<cjd>\u00a0thanks  \n11:37\u00a0<cjd>\u00a0no @Component annotation?  \n11:39\u00a0<tmortagne>\u00a0actually there should be one  \n11:39\u00a0<tmortagne>\u00a0it just happen to work without in this case but all component are supposed to have it  \n11:39\u00a0<tmortagne>\u00a0fixing XWikiContextProvider  \n11:40\u00a0<cjd>\u00a0ok  \n11:40\u00a0<tmortagne>\u00a0so it's a not that good example :)  \n11:41\u00a0<cjd>\u00a0actually getting rid of @Component might be nice  \n11:41\u00a0<cjd>\u00a0alternatively, parsing the source and looking for @Component then generating components.txt would be nicer  \n11:41\u00a0<tmortagne>\u00a0makes thing more clear IMO  \n11:41\u00a0<Denis>\u00a0cjd: please take note that the Crypto API provides an implementation of Provider<SecureRandom>  \n11:41\u00a0<tmortagne>\u00a0and yes I would like to go in generation direction  \n11:41\u00a0<cjd>\u00a0ahh ok  \n11:43\u00a0<cjd>\u00a0You might consider renaming \u00a0FixedSecureRandomProvider \u00a0to \u00a0\u00a0InsecureSecureRandomProvider  \n11:43\u00a0<Denis>\u00a0this is in test  \n11:43\u00a0<cjd>\u00a0or EvilSecureRandomProvider  \n11:43\u00a0<Denis>\u00a0not in production  \n11:44\u00a0<cjd>\u00a0yeah, I do the same  \n11:44\u00a0<Denis>\u00a0this is the reason to use a provider, the ability to create predictable tests  \n11:44\u00a0<Denis>\u00a0and faster one, in that precise case  \n11:44\u00a0<cjd>\u00a0./crypto/random/test/DeterminentRandomSeed.c  \n11:44\u00a0<cjd>\u00a0hmm no  \n11:45\u00a0<cjd>\u00a0I used to have something called EvilRandom.c which was as the name described :)  \n11:45\u00a0<Denis>\u00a0another feature of the provider is to create only one secureRandom, and take all data from it  \n11:45\u00a0<cjd>\u00a0+1  \n11:46\u00a0<Denis>\u00a0which is faster and also a better usage  \n11:46\u00a0<cjd>\u00a0mhm  \n11:46\u00a0<Denis>\u00a0so if you need a random source, simply inject that provider in your class  \n11:47\u00a0<cjd>\u00a0ahh Fixed.. is in the /test/ dir  \n11:47\u00a0<cjd>\u00a0I have a string inside of my Determinent random which I can grep for in the resulting binary just to make sure it didn't leak in...  \n11:47\u00a0<Denis>\u00a0yes Fixed is juste for testing purposes  \n11:48\u00a0<cjd>\u00a0yup, the problem with those things is that a bug can be fatel  \n11:48\u00a0<Denis>\u00a0it could not leak  \n11:48\u00a0<cjd>\u00a0/nod  \n11:49\u00a0<Denis>\u00a0and on the other side, you may override the default provider at anytime to provide a better implementation  \n11:50\u00a0<cjd>\u00a0yeah, it's annoying that libraries probably won't use it  \n11:50\u00a0<cjd>\u00a0/allow specifying the secrand  \n11:51\u00a0<Denis>\u00a0BC does  \n11:52\u00a0<cjd>\u00a0cool  \n11:53\u00a0<cjd>\u00a0I decided that it would be easier for the admin to use OpenSSL PEM files instead of your infrastructure  \n11:53\u00a0<cjd>\u00a0it turns out to be quite easy to parse them  \n11:53\u00a0<cjd>\u00a0the problem is in the certificate since it can't be stored on-disk  \n11:54\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n11:55\u00a0<Denis>\u00a0cjd: I have not implemented the PEM parser compatible with SSL (lack of time and need), but it could be added quite easily  \n11:56\u00a0<Denis>\u00a0BC provide a good PEMreader that we could wrap  \n11:56\u00a0<cjd>\u00a0https://ezcrypt.it/oy9n#Io59gDJvDDZTwn38l16Bv1Vk  \n11:56\u00a0<cjd>\u00a0this is what I've done  \n11:57\u00a0<cjd>\u00a0still has not gotten far enough in the build to trigger tests so it's untested...  \n12:01\u00a0<DarkKnightCZ>\u00a0has quit  \n12:23\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n12:31\u00a0<woshilapin>\u00a0has quit  \n12:33\u00a0<vmassol1>\u00a0has joined #xwiki  \n12:33\u00a0<vmassol>\u00a0has quit  \n12:33\u00a0<woshilapin>\u00a0has joined #xwiki  \n12:44\u00a0<cjd>\u00a0Does anyone remember if there's a way to check permission for a user/document from a component (without pulling oldcore) ?  \n12:46\u00a0<vmassol1>\u00a0yes  \n12:46\u00a0<vmassol1>\u00a0new security module  \n12:46\u00a0<vmassol1>\u00a0check it on e.x.o  \n12:49\u00a0<cjd>\u00a0thanks  \n12:52\u00a0<Denis>\u00a0cjd: you should use org.xwiki.security.authorization.ContextualAuthorizationManager  \n12:53\u00a0<cjd>\u00a0I looked at both of them and I like boolean hasAccess(Right right, DocumentReference userReference, EntityReference entityReference);  \n12:53\u00a0<cjd>\u00a0which is in the older AuthorizationManager  \n12:53\u00a0<Denis>\u00a0not older  \n12:53\u00a0<Denis>\u00a0not contextual  \n12:53\u00a0<Denis>\u00a0depends on your need  \n12:54\u00a0<tmortagne>\u00a0yes if you have all information use AuthorizationManager  \n12:55\u00a0<tmortagne>\u00a0ContextualAuthorizationManager is a higher abstraction level  \n12:55\u00a0<Denis>\u00a0no, if this is not the current user and the current document, use AuthorizationManager  \n12:55\u00a0<Denis>\u00a0but do not pass over the current to AuthorizationManager, you will not receive the same answer  \n12:56\u00a0<cjd>\u00a0oh?  \n12:56\u00a0<tmortagne>\u00a0I kow it's a bit more complex that that but it's based on the context  \n12:56\u00a0<cjd>\u00a0passing the current user/doc to the AuthorizationManager is different from using the Contextual ?  \n12:56\u00a0<tmortagne>\u00a0so if you don't care about the context (i.e. you already know exactly what you want to test) then don't use it  \n12:56\u00a0<Denis>\u00a0the context will take care of dropped permissions, and other contextual stuffs  \n12:56\u00a0<cjd>\u00a0ahh ok  \n12:57\u00a0<Denis>\u00a0it will also care about rendering context restriction  \n12:57\u00a0<cjd>\u00a0I'll pretend not to care about dropped permissions because I do care about being able to get it for other documents  \n12:58\u00a0<Denis>\u00a0while, basically, the AuthorizationManager check the access right, while the contextual one, care about real access in the current context  \n12:58\u00a0<vmassol>\u00a0has joined #xwiki  \n13:01\u00a0<vmassol1>\u00a0has quit  \n13:03\u00a0<sdjebloun>\u00a0has quit  \n13:24\u00a0<Denis>\u00a0has quit  \n14:00\u00a0<woshilapin>\u00a0has quit  \n14:02\u00a0<woshilapin>\u00a0has joined #xwiki  \n14:06\u00a0<D-Spair>\u00a0has joined #xwiki  \n14:06\u00a0<D-Spair>\u00a0has quit  \n14:08\u00a0<D-Spair>\u00a0has quit  \n14:20\u00a0<D-Spair>\u00a0has joined #xwiki  \n14:30\u00a0<plaugg>\u00a0has joined #xwiki  \n14:36\u00a0<Lyes1>\u00a0has joined #xwiki  \n14:53\u00a0<andreeapopescu>\u00a0has quit  \n14:55\u00a0<gdelhumeau>\u00a0I'm reducing the test case for the IE9 pb  \n14:55\u00a0<gdelhumeau>\u00a0see: http://temp-xwiki.ddns.net:8080/xwiki/bin/view/Main/?xpage=keph  \n14:56\u00a0<msmeria>\u00a0has quit  \n15:04\u00a0<sdjebloun>\u00a0has joined #xwiki  \n15:05\u00a0<gdelhumeau>\u00a0this bug is going to make me crazy  \n15:06\u00a0<gdelhumeau>\u00a0suddently wyswiyg does not work  \n15:08\u00a0<gdelhumeau>\u00a0aaah you have to be logged-in  \n15:08\u00a0<gdelhumeau>\u00a0TestUser/TestUser  \n15:13\u00a0<gdelhumeau>\u00a0http://temp-xwiki.ddns.net:8080/xwiki/bin/edit/Sandbox/WebHome?xpage=keph  \n15:38\u00a0<gdelhumeau>\u00a0it seems the wysiwyg javascript code is a cause too  \n15:38\u00a0<gdelhumeau>\u00a0which is very complicated to debug seems it is a GWT code  \n15:39\u00a0<gdelhumeau>\u00a0\\*since  \n15:39\u00a0<gdelhumeau>\u00a0http://jira.xwiki.org/browse/XWIKI-10661  \n15:41\u00a0<gdelhumeau>\u00a0the Bootstrap guys cannot reproduce without our XWiki environnement  \n15:47\u00a0<gdelhumeau>\u00a0mflorea: I'm blocked  \n15:47\u00a0<gdelhumeau>\u00a0mflorea: to test (on IE9): http://temp-xwiki.ddns.net:8080/xwiki/bin/edit/Sandbox/WebHome?xpage=keph  \n15:48\u00a0<gdelhumeau>\u00a0User: TestUser, Pass: TestUser  \n15:48\u00a0<mflorea>\u00a0gdelhumeau: I don't have time to investigate right now, sorry :(  \n15:51\u00a0<cjd>\u00a0gdelhumeau: setup a proxy server which copies all of the files which it proxies, if there are no out-of-box solutions then write one in node  \n15:52\u00a0<gdelhumeau>\u00a0I don't work on it anymore  \n15:52\u00a0<cjd>\u00a0then use it to reach the wiki and you'll have a full html snapshot  \n15:53\u00a0<gdelhumeau>\u00a0I have a reduced version of the problem running in XWiki  \n15:53\u00a0<gdelhumeau>\u00a0maybe it's not the perfect solution  \n15:53\u00a0<gdelhumeau>\u00a0but it works  \n15:54\u00a0<gdelhumeau>\u00a0I can upload the xwiki instance somewhere  \n15:54\u00a0<gdelhumeau>\u00a0if you are interested it  \n15:54\u00a0<cjd>\u00a0html snapshot is best  \n15:54\u00a0<cjd>\u00a0then need a way to spawn IE9  \n15:56\u00a0<cjd>\u00a0checkIeCrash.js :)  \n16:01\u00a0<Lyes1>\u00a0has quit  \n16:20\u00a0<DarkKnightCZ>\u00a0has quit  \n16:28\u00a0<Lyes1>\u00a0has joined #xwiki  \n16:38\u00a0<momomomomo>\u00a0has joined #xwiki  \n16:58\u00a0<woshilapin>\u00a0has quit  \n17:00\u00a0<woshilapin>\u00a0has joined #xwiki  \n17:12\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n17:14\u00a0<mkolenda>\u00a0has joined #xwiki  \n17:25\u00a0<momomomomo>\u00a0has quit  \n17:26\u00a0<momomomomo>\u00a0has joined #xwiki  \n17:29\u00a0<vmassol>\u00a0guys  \n17:30\u00a0<vmassol>\u00a0is there any reason to pass \"true\" in this call (located in macros.vm):  \n17:30\u00a0<vmassol>\u00a0#set ($url = $xwiki.getSkinFile('icons/xwiki/noavatar.png', true))  \n17:30\u00a0<vmassol>\u00a0ah yes  \n17:30\u00a0<vmassol>\u00a0sorry  \n17:30\u00a0<vmassol>\u00a0it's because we want it overridable in a skin I guess  \n17:31\u00a0<vmassol>\u00a0correct?  \n17:31\u00a0<vmassol>\u00a0the parameter is forceSkinAction ie we force it to be rendered through the xwiki skin action  \n17:32\u00a0<vmassol>\u00a0hmm  \n17:32\u00a0<vmassol>\u00a0initially I thought it just meant whether we wanted velocity to execute on the resource or not  \n17:34\u00a0<vmassol>\u00a0actually this is not needed for it to be overridable or not  \n17:35\u00a0<vmassol>\u00a0so is this just a bug?  \n17:40\u00a0<vmassol>\u00a0same thing in the Activity macro which calls: &lt;img class=\"activityActionAvatar\" src=\"$xwiki.getSkinFile($activityActionsMap.get($eventType), true)\" alt=\"$services.localization.render(\"xe.activity.action.${eventType}\", [$relatedEventsNo])\" title=\"$services.localization.render(\"xe.activity.action.${eventType}\", [$relatedEventsNo])\" /&gt;  \n17:40\u00a0<vmassol>\u00a0ie $xwiki.getSkinFile($activityActionsMap.get($eventType), true)  \n17:40\u00a0<vmassol>\u00a0this leads for ex to icons/silk/page\\_white\\_add.png being loaded not as a static resource but through the skins action  \n17:41\u00a0<vmassol>\u00a0(and a lot of others)  \n17:41\u00a0<KermitTheFragger>\u00a0has quit  \n17:45\u00a0<vmassol>\u00a0funnily we also call effects.js through he skins action\u2026.  \n17:45\u00a0<vmassol>\u00a0$xwiki.jsfx.use('js/scriptaculous/effects.js', true)##  \n17:46\u00a0<vmassol>\u00a0in javascript.vm  \n17:49\u00a0<vmassol>\u00a0sdumitriu: any idea? I see you introduced a few of them here: https://github.com/xwiki/xwiki-platform/commit/af5709a#diff-6d4a4ebc1f6831faef3ccf5e751710a0L12  \n17:50\u00a0<vmassol>\u00a0gtg, bb in 1 hour, I'm interested by the answer! :)  \n17:50\u00a0<vmassol>\u00a0has quit  \n17:50\u00a0<woshilapin>\u00a0has quit  \n17:51\u00a0<woshilapin>\u00a0has joined #xwiki  \n17:51\u00a0<cjd>\u00a0has quit  \n17:51\u00a0<cjd>\u00a0has joined #xwiki  \n17:53\u00a0<mflorea>\u00a0has quit  \n18:04\u00a0<gdelhumeau\\_>\u00a0has joined #xwiki  \n18:08\u00a0<plaugg>\u00a0has quit  \n18:08\u00a0<gdelhumeau>\u00a0has quit  \n18:15\u00a0<Lyes1>\u00a0has quit  \n18:15\u00a0<Lyes1>\u00a0has joined #xwiki  \n18:15\u00a0<Lyes1>\u00a0has quit  \n18:16\u00a0<cjd>\u00a0has quit  \n18:20\u00a0<sdjebloun>\u00a0has quit  \n18:35\u00a0<tmortagne>\u00a0has quit  \n18:47\u00a0<woshilapin>\u00a0has quit  \n18:57\u00a0<momomomomo\\_>\u00a0has joined #xwiki  \n18:59\u00a0<momomomomo>\u00a0has quit  \n18:59\u00a0<momomomomo\\_>\u00a0is now known as <momomomomo>  \n19:04\u00a0<DarkKnightCZ>\u00a0has quit  \n19:11\u00a0<vmassol>\u00a0has joined #xwiki  \n19:13\u00a0<abusenius>\u00a0has joined #xwiki  \n19:19\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n19:33\u00a0<gdelhumeau\\_>\u00a0has quit  \n19:56\u00a0<momomomomo>\u00a0has quit  \n21:06\u00a0<lucaa>\u00a0has quit  \n21:12\u00a0<lucaa>\u00a0has joined #xwiki  \n21:20\u00a0<lucaa>\u00a0has quit  \n21:37\u00a0<DarkKnightCZ>\u00a0has quit  \n21:58\u00a0<momomomomo>\u00a0has joined #xwiki  \n22:09\u00a0<momomomomo\\_>\u00a0has joined #xwiki  \n22:10\u00a0<momomomomo>\u00a0has quit  \n22:10\u00a0<momomomomo\\_>\u00a0is now known as <momomomomo>  \n22:42\u00a0<mkolenda>\u00a0has quit  \n23:04\u00a0<momomomomo>\u00a0has quit  \n23:27\u00a0<vmassol>\u00a0has quit  \n23:40\u00a0<vmassol>\u00a0has joined #xwiki  \n23:51\u00a0<abusenius>\u00a0has quit\n"}