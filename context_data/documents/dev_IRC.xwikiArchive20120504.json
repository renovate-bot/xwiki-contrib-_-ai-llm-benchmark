{"id": "dev:IRC.xwikiArchive20120504", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120504", "title": "IRC Archive for channel #xwiki on 04 May 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:54\u00a0<jamie\\_\\_wiki>\u00a0has joined #xwiki  \n01:00\u00a0<polx>\u00a0has quit  \n01:09\u00a0<jvdrean1>\u00a0has quit  \n01:37\u00a0<jvelo>\u00a0has quit  \n04:23\u00a0<sdumitriu>\u00a0has joined #xwiki  \n06:19\u00a0<vmassol>\u00a0has joined #xwiki  \n06:24\u00a0<vmassol>\u00a0has quit  \n06:53\u00a0<SvenDowideit>\u00a0has quit  \n06:57\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n07:11\u00a0<polx>\u00a0has joined #xwiki  \n09:04\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:11\u00a0<sburjan`>\u00a0has quit  \n09:54\u00a0<tmortagne>\u00a0has quit  \n09:58\u00a0<sburjan>\u00a0has joined #xwiki  \n10:00\u00a0<evalica>\u00a0has joined #xwiki  \n10:00\u00a0<mflorea>\u00a0has joined #xwiki  \n10:03\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:15\u00a0<Denis>\u00a0has joined #xwiki  \n10:21\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:49\u00a0<tmortagne>\u00a0has joined #xwiki  \n12:22\u00a0<jvelo>\u00a0has joined #xwiki  \n12:36\u00a0<evalica>\u00a0has quit  \n12:37\u00a0<mflorea>\u00a0has quit  \n12:41\u00a0<evalica>\u00a0has joined #xwiki  \n12:42\u00a0<evalica1>\u00a0has joined #xwiki  \n12:42\u00a0<evalica>\u00a0has quit  \n12:42\u00a0<evalica1>\u00a0is now known as <evalica>  \n13:10\u00a0<evalica>\u00a0has quit  \n13:16\u00a0<Enygma`>\u00a0has quit  \n13:40\u00a0<rrodriguez>\u00a0has joined #xwiki  \n13:56\u00a0<mflorea>\u00a0has joined #xwiki  \n14:00\u00a0<lucaa>\u00a0has joined #xwiki  \n14:32\u00a0<+sburjan>\u00a0Denis: any idea if XWIKI-7309 is still valid ?  \n14:34\u00a0<+Denis>\u00a0sburjan: from what I know of the recent changes, there is no reason for this to have been fixed  \n14:36\u00a0<+Denis>\u00a0this is issue is caused by some \"live\" migration of properties during document save, in place of using the \"normal\" migration mecanism  \n14:37\u00a0<+Denis>\u00a0the reason is probably to allow such import, but it fails to really fix it  \n14:40\u00a0<sburjan>\u00a0has quit  \n14:40\u00a0<+Denis>\u00a0As I explain, we should fix 2 differents problems: do not migrate object properties of all documents while saving another, and properly migrate them when xclass evolved.  \n14:40\u00a0<sburjan>\u00a0has joined #xwiki  \n15:16\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* r828bb14\u000f https://github.com/xwiki/xwiki-rendering/commit/828bb147721e026caaf855d33dcb767ecc5f2c33 \u000f/ (9 files in 7 dirs):\u000f XRENDERING-192: Reduce xdom+xml/current markup size ...  \n15:16\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* r4e250af\u000f https://github.com/xwiki/xwiki-rendering/commit/4e250afb2090d74d52bcaab4627552e6b82230be \u000f/ xwiki-rendering-test/pom.xml :\u000f Fix dependency - http://git.io/mj5iIg  \n15:17\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* r6004da5\u000f https://github.com/xwiki/xwiki-commons/commit/6004da5ea4fd549bfb25f9e0d16421492377ed55 \u000f/ pom.xml :\u000f Change previous version after release - http://git.io/h\\_2DhA  \n15:18\u00a0<Enygma`>\u00a0has joined #xwiki  \n15:19\u00a0<evalica>\u00a0has joined #xwiki  \n15:35\u00a0<sburjan>\u00a0has quit  \n15:54\u00a0<CIA-74>\u00a0Marius Dumitru Florea\u000f master\u000f \\* r90dac94\u000f https://github.com/xwiki/xwiki-enterprise/commit/90dac942accc715b593b653ff16fc9cb7ba55b4e \u000f/ (4 files in 3 dirs):\u000f Fix ui-tests in Firefox 3.6.x: it seems that if you call Driver#getCurrentURL() ...  \n15:57\u00a0<jvelo>\u00a0hi mflorea  \n15:58\u00a0<jvelo>\u00a0do you have a couple of minutes ?  \n15:58\u00a0<+mflorea>\u00a0Hi jvelo, sure  \n15:58\u00a0<jvelo>\u00a0I'm playing around with the client module of the wysiwyg, splitting it in 1) a standalone wysiwyg module and 2) the XWiki wysiwyg module  \n15:59\u00a0<+mflorea>\u00a0ok, cool  \n15:59\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* r152f896\u000f https://github.com/xwiki/xwiki-rendering/commit/152f8965057f786b54dfa200b61a28af0a56f57a \u000f/ (2 files in 2 dirs):\u000f [cleanup] Apply codestyle - http://git.io/Kd2nGg  \n15:59\u00a0<jvelo>\u00a0so I want them to have each their own \"editor factory\"  \n15:59\u00a0<jvelo>\u00a0(for instance with their own list of plugin factories available, since some of them don't make sense in the standalone module, like the link, image, macros plugins)  \n16:00\u00a0<+mflorea>\u00a0yep  \n16:00\u00a0<jvelo>\u00a0but I'm not sure what's the best way to approach this, considering that I still want the \"publish\" method be generic for bothj  \n16:01\u00a0<jvelo>\u00a0could there be a GWT configuration mecansim that would allow to declare which editor factory to use in the gwt.xml file, and retrieve it from the code ?  \n16:02\u00a0<+mflorea>\u00a0wait, by \"editor factory\" you're not referring just to WysiwygEditorFactory.java?  \n16:03\u00a0<jvelo>\u00a0yes actually I do  \n16:03\u00a0<+mflorea>\u00a0are you referring also to WysiwygEditorApi.java ?  \n16:03\u00a0<+mflorea>\u00a0ok, I think I understand the problem  \n16:03\u00a0<jvelo>\u00a0well at first I tried to make an AbstractWyswygEditorApi but in the end I don't know how to handle the native publish code doing that  \n16:03\u00a0<jvelo>\u00a0so I reverted that  \n16:04\u00a0<+mflorea>\u00a0you want WysiwygEditorApi to create either the standalone or the XWiki editor  \n16:04\u00a0<jvelo>\u00a0yes exactly  \n16:04\u00a0<+mflorea>\u00a0let me think a bit  \n16:04\u00a0<jvelo>\u00a0with a \"pluggable\" factory let say  \n16:07\u00a0<+mflorea>\u00a0I'm not sure you need to do this. The first question is: do we need both editor to co-exists? i.e. should you be able to create both from JS or should the XWiki overwrite the standalone one? I think overwriting is fine  \n16:08\u00a0<+mflorea>\u00a0I don't think you need the standalone if you're in XWiki, i.e. if you include the JS for the XWiki editor  \n16:09\u00a0<+mflorea>\u00a0so I think it's enough to replace the editor instantiation in WysiwygEditorApi:  \n16:09\u00a0<+mflorea>\u00a0editor = WysiwygEditorFactory.getInstance().newEditor(config);  \n16:09\u00a0<+mflorea>\u00a0with a call to a protected method that can be overwritten by XWikiWysiwygEditorApi, which will use XWikiWysiwygEditorFactory.  \n16:09\u00a0<+mflorea>\u00a0then  \n16:10\u00a0<jvelo>\u00a0no I don't think editors need to co-exist, that's for sure  \n16:10\u00a0<+mflorea>\u00a0in the standalone Wysiwyg.java, you will call publish only for WysiwygEditorApi and CommandManagerApi  \n16:10\u00a0<jvelo>\u00a0mflorea, I see, but still have to duplicate all the publishing code, right ?  \n16:10\u00a0<+mflorea>\u00a0and in the XWikiWysiwyg.java (the entry point for the new module)  \n16:11\u00a0<+mflorea>\u00a0no  \n16:11\u00a0<+mflorea>\u00a0the publish code is inherited  \n16:11\u00a0<jvelo>\u00a0ok  \n16:11\u00a0<jvelo>\u00a0I wasn't sure this would work  \n16:11\u00a0<+mflorea>\u00a0ah  \n16:11\u00a0<+mflorea>\u00a0wait  \n16:11\u00a0<+mflorea>\u00a0it's static  \n16:11\u00a0<+mflorea>\u00a0right, let me think  \n16:12\u00a0<+mflorea>\u00a0but the idea is to call publish for GadgetWizardApi and XWikiWysiwygEditorApi only for XWikiWysiwyg.java  \n16:12\u00a0<+mflorea>\u00a0ok  \n16:13\u00a0<+mflorea>\u00a0simple  \n16:13\u00a0<+mflorea>\u00a0I mean, the only issue is to make XWikiWysiwygEditorApi#publish reuse the code from WysiwygEditorApi#publish  \n16:14\u00a0<jvelo>\u00a0mflorea, yes agreed  \n16:14\u00a0<jvelo>\u00a0I don't really know how to do that though  \n16:14\u00a0<+mflorea>\u00a0but since the code is static, so doesn't depend on \"this\", you can simply call WysiwygEditorApi#publish from WikiWysiwygEditorApi#publish  \n16:14\u00a0<jvelo>\u00a0I see  \n16:15\u00a0<jvelo>\u00a0ok I will play around  \n16:15\u00a0<jvelo>\u00a0let see how this goes  \n16:15\u00a0<+mflorea>\u00a0now, we have to decide is API published in WysiwygEditorApi#publish is XWiki specific  \n16:15\u00a0<+mflorea>\u00a0i.e. if it needs to be moved to XWikiWysiwygEditorApi#publish  \n16:15\u00a0<jvelo>\u00a0not it should not be I think  \n16:15\u00a0<jvelo>\u00a0but is is not right now AFAIK  \n16:16\u00a0<jvelo>\u00a0getPlainText / getRichText / getSourceText  \n16:16\u00a0<jvelo>\u00a0all this is generic, no ?  \n16:16\u00a0<+mflorea>\u00a0well, getSourceText will work only if you have a service to converter the HTML to source (wiki syntax in our case)  \n16:17\u00a0<+mflorea>\u00a0source could also mean \"clean HTML\"  \n16:17\u00a0<+mflorea>\u00a0but we can leave them there for the moment  \n16:18\u00a0<+mflorea>\u00a0what's important is that we can move them later in XWikiWysiwygEditorApi#publish, which can call WysiwygEditorApi#publish and then add new methods to $wnd.WysiwygEditor.prototype  \n16:18\u00a0<+mflorea>\u00a0or overwrite existing ones  \n16:18\u00a0<jvelo>\u00a0yes that's the challenge  \n16:18\u00a0<jvelo>\u00a0BTW shouldn't those APIs be namespaced ?  \n16:19\u00a0<jvelo>\u00a0I see there are 3  \n16:19\u00a0<jvelo>\u00a0WysiwygEditor, CommandManager  \n16:19\u00a0<+mflorea>\u00a0indeed, they should  \n16:19\u00a0<jvelo>\u00a0gadget wizard is namespaced  \n16:19\u00a0<rrodriguez>\u00a0has quit  \n16:19\u00a0<+mflorea>\u00a0I see, with XWiki  \n16:20\u00a0<jvelo>\u00a0we need to decide if we want to namespace them in XWiki  \n16:20\u00a0<jvelo>\u00a0I'm not sure  \n16:20\u00a0<+mflorea>\u00a0me neither  \n16:20\u00a0<jvelo>\u00a0it could be \"xwe\"  \n16:20\u00a0<jvelo>\u00a0I see it is used in some places already  \n16:20\u00a0<+mflorea>\u00a0yes, anyway, we need to take care of backward compatibility  \n16:20\u00a0<jvelo>\u00a0yes  \n16:20\u00a0<jvelo>\u00a0there is compatibility.js for that  \n16:21\u00a0<+mflorea>\u00a0yep  \n16:21\u00a0<jvelo>\u00a0that's shouldn;t be too hard  \n16:29\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* rfb50f1a\u000f https://github.com/xwiki/xwiki-enterprise/commit/fb50f1ad44851a3ba34eeff696d8dbd955b565c4 \u000f/ xwiki-enterprise-ui/src/main/resources/XWiki/ClassSheet.xml :\u000f XE-1162: Should always use relative URL with sendRedirect - http://git.io/WJ4iWg  \n17:10\u00a0<polx>\u00a0has quit  \n18:04\u00a0<evalica>\u00a0has quit  \n18:07\u00a0<Enygma`>\u00a0has quit  \n18:13\u00a0<tmortagne>\u00a0has quit  \n18:54\u00a0<abusenius>\u00a0has joined #xwiki  \n19:08\u00a0<mflorea>\u00a0has quit  \n19:16\u00a0<jvdrean>\u00a0has quit  \n20:33\u00a0<cjd>\u00a0has quit  \n20:40\u00a0<cjd>\u00a0has joined #xwiki  \n21:03\u00a0<cjd>\u00a0has quit  \n21:05\u00a0<cjd>\u00a0has joined #xwiki  \n21:11\u00a0<cjd\\_>\u00a0has joined #xwiki  \n21:11\u00a0<cjd>\u00a0has quit  \n21:13\u00a0<lucaa>\u00a0has quit  \n22:16\u00a0<jvelo>\u00a0has quit  \n22:23\u00a0<polx>\u00a0has joined #xwiki  \n22:55\u00a0<abusenius>\u00a0has quit  \n23:00\u00a0<lucaa>\u00a0has joined #xwiki  \n23:06\u00a0<lucaa>\u00a0has quit  \n23:13\u00a0<mgariepy>\u00a0has quit  \n23:14\u00a0<jamie\\_\\_wiki>\u00a0has quit  \n23:25\u00a0<rrodriguez>\u00a0has joined #xwiki  \n\n"}