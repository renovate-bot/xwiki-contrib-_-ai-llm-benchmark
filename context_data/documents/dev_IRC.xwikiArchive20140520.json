{"id": "dev:IRC.xwikiArchive20140520", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140520", "title": "IRC Archive for channel #xwiki on 20 May 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n00:45\u00a0<vmassol>\u00a0has joined #xwiki  \n00:50\u00a0<vmassol>\u00a0has quit  \n00:54\u00a0<OSIMasson>\u00a0has joined #xwiki  \n01:46\u00a0<vmassol>\u00a0has joined #xwiki  \n01:51\u00a0<vmassol>\u00a0has quit  \n02:47\u00a0<vmassol>\u00a0has joined #xwiki  \n02:51\u00a0<vmassol>\u00a0has quit  \n02:58\u00a0<OSIMasson>\u00a0has quit  \n03:48\u00a0<vmassol>\u00a0has joined #xwiki  \n03:52\u00a0<vmassol>\u00a0has quit  \n03:52\u00a0<spawn57\\_>\u00a0has left #xwiki  \n04:10\u00a0<tekzilla>\u00a0has joined #xwiki  \n04:13\u00a0<tekzilla>\u00a0hi, my xwiki enterprise is shot, default pages/extensions seem to have gone missing, and i can't use the normal way to export  \n04:14\u00a0<tekzilla>\u00a0is there a way to have xwiki repopulate with the default pages and extensions without touching spaces/pages created by users ?  \n04:46\u00a0<OSIMasson>\u00a0has joined #xwiki  \n04:47\u00a0<OSIMasson>\u00a0has quit  \n04:49\u00a0<vmassol>\u00a0has joined #xwiki  \n04:53\u00a0<vmassol>\u00a0has quit  \n05:49\u00a0<vmassol>\u00a0has joined #xwiki  \n05:54\u00a0<vmassol>\u00a0has quit  \n06:02\u00a0<Denis>\u00a0has quit  \n06:28\u00a0<Denis>\u00a0has joined #xwiki  \n06:50\u00a0<vmassol>\u00a0has joined #xwiki  \n06:54\u00a0<vmassol>\u00a0has quit  \n07:05\u00a0<mflorea>\u00a0has joined #xwiki  \n07:43\u00a0<Inge-\\_>\u00a0is now known as <Inge->  \n07:51\u00a0<vmassol>\u00a0has joined #xwiki  \n08:21\u00a0<msmeria>\u00a0has joined #xwiki  \n08:28\u00a0<mflorea>\u00a0has quit  \n08:30\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:37\u00a0<mflorea>\u00a0has joined #xwiki  \n08:44\u00a0<polx>\u00a0has joined #xwiki  \n08:49\u00a0<polx>\u00a0has quit  \n09:02\u00a0<cjd>\u00a0has joined #xwiki  \n09:08\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:12\u00a0<polx>\u00a0has joined #xwiki  \n09:16\u00a0<polx>\u00a0has quit  \n09:19\u00a0<evalica>\u00a0has joined #xwiki  \n09:22\u00a0<mflorea>\u00a0has quit  \n09:32\u00a0<tmortagne1>\u00a0has joined #xwiki  \n09:36\u00a0<vmassol>\u00a0has quit  \n09:37\u00a0<tmortagne>\u00a0has quit  \n09:37\u00a0<tekzilla>\u00a0has quit  \n09:38\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:39\u00a0<vmassol>\u00a0has joined #xwiki  \n09:43\u00a0<tekzilla>\u00a0has joined #xwiki  \n09:44\u00a0<mflorea>\u00a0has joined #xwiki  \n09:47\u00a0<polx>\u00a0has joined #xwiki  \n09:52\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:56\u00a0<tmortagne1>\u00a0guys I would like to plan a 6.0.1 release as soon as mflorea is done with 6.1M1, any known remaining blocker or things you absolutely want to see in this version ?  \n09:56\u00a0<tmortagne1>\u00a0has quit  \n09:56\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:57\u00a0<mflorea>\u00a0tmortagne: I didn't have time to look at Solr memory usage, otherwise I don't have anything blocker for 6.0.1  \n09:57\u00a0<tmortagne>\u00a0XWIKI-10334 was not the real issue on myxwiki.org so it's not a blocker IMO  \n09:57\u00a0<mflorea>\u00a0ok  \n09:57\u00a0<tmortagne>\u00a0almost an improvement  \n09:58\u00a0<tmortagne>\u00a0removing 5.4.4 and 6.0.x fix for, you can backport if you feel it's necessary when you have something  \n10:00\u00a0<gdelhumeau>\u00a0I do not have blocker neither  \n10:04\u00a0<vmassol>\u00a0tmortagne: nothing from my side  \n10:08\u00a0<vmassol>\u00a0for the fun progression of the XE distribution sizes: http://playground.xwiki.org/xwiki/bin/view/Main/VMA  \n10:20\u00a0<polx>\u00a0has quit  \n10:29\u00a0<polx>\u00a0has joined #xwiki  \n10:30\u00a0<polx>\u00a0has quit  \n10:37\u00a0<lucaa>\u00a0has joined #xwiki  \n10:43\u00a0<Slashman>\u00a0has joined #xwiki  \n10:44\u00a0<Denis>\u00a0has quit  \n10:48\u00a0<Denis>\u00a0has joined #xwiki  \n10:53\u00a0<vmassol>\u00a0does anyone know if we have any doc about creating a page from a form, using a template page? I can't believe we don't have any tutorial just for that  \n10:58\u00a0<polx>\u00a0has joined #xwiki  \n11:00\u00a0<tmortagne>\u00a0mflorea: there is a UI test failing that seems related to your User directory change (in 6.0 et 5.4 branches on jenkins)  \n11:01\u00a0<mflorea>\u00a0I'll take a look, thanks  \n11:01\u00a0<tmortagne>\u00a0mflorea: \u00a0in org.xwiki.platform:xwiki-platform-user-directory-test-tests  \n11:03\u00a0<mflorea>\u00a0tmortagne: how do you get the CM for a namespace?  \n11:03\u00a0<tmortagne>\u00a0ComponentManagerManager (yes twice :))  \n11:03\u00a0<mflorea>\u00a0ok :)  \n11:14\u00a0<Denis>\u00a0vmassol: are your looking for http://platform.xwiki.org/xwiki/bin/view/DevGuide/FAQTutorialManual#HCustomcreationform ?  \n11:15\u00a0<vmassol>\u00a0yes somrething like this. I'll start a new tutorial focused just on that: creating a form to create a new page with a given template  \n11:15\u00a0<vmassol>\u00a0thanks  \n11:16\u00a0<Denis>\u00a0if you start over, maybe you can do it based on AWM way to create new items, wdyt ?  \n11:16\u00a0<vmassol>\u00a0AWM is to create apps  \n11:16\u00a0<vmassol>\u00a0there's already a tutorial on it  \n11:16\u00a0<vmassol>\u00a0for the FAQ app  \n11:17\u00a0<vmassol>\u00a0here: http://platform.xwiki.org/xwiki/bin/view/DevGuide/FAQTutorial  \n11:17\u00a0<Denis>\u00a0I means now using AWM, but its implementation as a base for your tuto  \n11:17\u00a0<Denis>\u00a0s/now/not  \n11:17\u00a0<vmassol>\u00a0actually what I'll do just now (because I don't have much time) is create a FAQ entry and link it to http://platform.xwiki.org/xwiki/bin/view/DevGuide/FAQTutorialManual#HCustomcreationform  \n11:17\u00a0<Denis>\u00a0ok  \n11:25\u00a0<mflorea>\u00a0has quit  \n11:26\u00a0<mflorea>\u00a0has joined #xwiki  \n12:50\u00a0<gdelhumeau>\u00a0Guys, I have this stacktrace on a compiled xwiki-enterprise: http://hastebin.com/miworaweqe.vbs  \n12:51\u00a0<gdelhumeau>\u00a0mflorea vmassol tmortagne  \n12:56\u00a0<mflorea>\u00a0gdelhumeau: I got the same stacktrace this morning on the latest 6.1 snapshot build from CI. XWiki initialization job got stucked. I had to restart the wiki to make it work  \n12:56\u00a0<gdelhumeau>\u00a0ok  \n12:59\u00a0<vmassol>\u00a0gdelhumeau: did you check what document matches this?  \n12:59\u00a0<vmassol>\u00a0ie doc with id = 6152552094868048244  \n13:02\u00a0<vmassol>\u00a0ah stupid me  \n13:02\u00a0<vmassol>\u00a0\"Exception while saving document xwiki:XWiki.XWikiPreferences\"  \n13:03\u00a0<vmassol>\u00a0hmm  \n13:03\u00a0<vmassol>\u00a0serveral threads trying to save the XWikiPreferences concurrently  \n13:03\u00a0<vmassol>\u00a0@thomas: I think you've modified the startup to have more threads  \n13:04\u00a0<vmassol>\u00a0maybe it could be a consequence and we have several threads concurrently saving that doc  \n13:05\u00a0<vmassol>\u00a0should we have a notion of save queue? or implement retry till it succeeds or reaches a timeout?  \n13:09\u00a0<cjd>\u00a0imo yes, it's how databases work  \n13:11\u00a0<vmassol>\u00a0cjd: yes to which one?  \n13:11\u00a0<vmassol>\u00a0:)  \n13:12\u00a0<cjd>\u00a0IMO save queue  \n13:12\u00a0<vmassol>\u00a0the only problem with save queue  \n13:12\u00a0<cjd>\u00a0but then I would handle the db stuff asynchronously.. like... everything :)  \n13:12\u00a0<vmassol>\u00a0is that it's less performant than retries  \n13:12\u00a0<vmassol>\u00a0(unless you put a lot of threads to handle it)  \n13:13\u00a0<vmassol>\u00a0because with retries you have all the servlet container threads working concurrently  \n13:13\u00a0<vmassol>\u00a0ie 300 or so  \n13:13\u00a0<vmassol>\u00a0so that's a lot of power  \n13:13\u00a0<vmassol>\u00a0:)  \n13:13\u00a0<cjd>\u00a0for what we're doing, fewer threads == higher perf (assuming mysql)  \n13:13\u00a0<cjd>\u00a0well actually it's weird  \n13:13\u00a0<vmassol>\u00a0then we can play with the database isolation level too  \n13:14\u00a0<vmassol>\u00a0(that's what isolation level is for)  \n13:15\u00a0<cjd>\u00a0with jdbc it's tricky, too many threads == massive contension, too few threads == everybody is waiting for something  \n13:16\u00a0<cjd>\u00a0https://code.google.com/p/async-mysql-connector/ <-- this == 1 thread can bring mysql to a standstill  \n13:17\u00a0<cjd>\u00a0(aka the bottleneck is not in the app)  \n13:25\u00a0<polx\\_>\u00a0has joined #xwiki  \n13:26\u00a0<polx>\u00a0has quit  \n13:26\u00a0<polx\\_>\u00a0is now known as <polx>  \n13:27\u00a0<polx>\u00a0has quit  \n13:34\u00a0<polx>\u00a0has joined #xwiki  \n13:34\u00a0<polx>\u00a0has quit  \n13:37\u00a0<tmortagne>\u00a0vmassol: yes there is several threads but only one doing something, all the others are supposed to be either stuck or return initialization page right away without doing anything  \n13:38\u00a0<tmortagne>\u00a0one from HTTP requests point of view, there is also daemon threads but that's not new  \n13:46\u00a0<lucaa>\u00a0has quit  \n13:47\u00a0<tmortagne>\u00a0gdelhumeau: you loaded only one page to get http://hastebin.com/miworaweqe.vbs ?  \n13:48\u00a0<lucaa>\u00a0has joined #xwiki  \n13:48\u00a0<tmortagne>\u00a0what is weird is that there is no reason anything is accessing the database before initializeMandatoryClasses is executed  \n13:49\u00a0<mflorea>\u00a0tmortagne: in my case I just loaded Main.WebHome  \n13:49\u00a0<tmortagne>\u00a0ApplicationReady is not executed and plugin init hasn't been executed so I don't understand why any other thread would touch the database, except the SOLR indexer thread that is not new  \n13:50\u00a0<tmortagne>\u00a0but SOLR does not save any document  \n13:50\u00a0<tmortagne>\u00a0so it does not make much sense  \n13:50\u00a0<tmortagne>\u00a0lets see what calls saveDocument when during XWiki init  \n13:54\u00a0<gdelhumeau\\_>\u00a0has joined #xwiki  \n13:57\u00a0<gdelhumeau>\u00a0has quit  \n14:02\u00a0<polx>\u00a0has joined #xwiki  \n14:02\u00a0<polx>\u00a0has quit  \n14:12\u00a0<tmortagne>\u00a0hmm actually plugins seems to be initialized before the call to initializeMandatoryClasses...  \n14:12\u00a0<tmortagne>\u00a0so that's because of scheduler plugin async initialization  \n14:12\u00a0<tmortagne>\u00a0let put things in right order...  \n14:16\u00a0<polx>\u00a0has joined #xwiki  \n14:16\u00a0<polx>\u00a0has quit  \n14:19\u00a0<mflorea>\u00a0has quit  \n14:21\u00a0<gdelhumeau\\_>\u00a0tmortagne: yes, I just try to load the home page (just once)  \n14:22\u00a0<tmortagne>\u00a0gdelhumeau\\_: should be ok now  \n14:22\u00a0<tmortagne>\u00a0plugin initialized were started before the database was initialized  \n14:23\u00a0<mflorea>\u00a0has joined #xwiki  \n14:24\u00a0<gdelhumeau\\_>\u00a0tmortagne: thanks  \n14:24\u00a0<gdelhumeau\\_>\u00a0mflorea: do you release today?  \n14:25\u00a0<mflorea>\u00a0gdelhumeau\\_: yes, I'd like to  \n14:26\u00a0<gdelhumeau\\_>\u00a0ok  \n14:44\u00a0<polx>\u00a0has joined #xwiki  \n14:50\u00a0<evalica>\u00a0has quit  \n14:50\u00a0<evalica>\u00a0has joined #xwiki  \n15:17\u00a0<mosulica>\u00a0has joined #xwiki  \n15:17\u00a0<mosulica>\u00a0Hi I have a problem when I try to build xwiki  \n15:17\u00a0<mosulica>\u00a0Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.16:test (default-test) on project xwiki-platform-wikistream-stream-xar: There are test failures.  \n15:17\u00a0<mosulica>\u00a0branch master  \n15:18\u00a0<mosulica>\u00a0I've also tried to build branch \u00a0feature-alfresco-link but it does not work  \n15:18\u00a0<mosulica>\u00a0Has anyone developed this feature on alfresco 6 ?  \n15:18\u00a0<mosulica>\u00a0on xwiki 6  \n15:21\u00a0<vmassol>\u00a0mflorea: seems we have perf issues on ci.xwiki.org again  \n15:21\u00a0<vmassol>\u00a0does it load fast for you?  \n15:22\u00a0<vmassol>\u00a0do we need to do what you did in the past and clean up stuff?  \n15:24\u00a0<mflorea>\u00a0vmassol: sometimes it's fast, sometimes no  \n15:27\u00a0<mflorea>\u00a0but I could try to clean it up again  \n15:49\u00a0<OSIMasson>\u00a0has joined #xwiki  \n16:09\u00a0<msmeria>\u00a0has quit  \n16:10\u00a0<D-Spair>\u00a0has joined #xwiki  \n16:14\u00a0<vmassol1>\u00a0has joined #xwiki  \n16:16\u00a0<vmassol>\u00a0has quit  \n16:57\u00a0<Slashman>\u00a0has quit  \n17:31\u00a0<evalica>\u00a0has quit  \n17:52\u00a0<polx>\u00a0has quit  \n18:07\u00a0<woshilapin>\u00a0has quit  \n18:10\u00a0<cjd>\u00a0has quit  \n18:14\u00a0<mflorea>\u00a0has quit  \n18:17\u00a0<abusenius>\u00a0has joined #xwiki  \n18:23\u00a0<mosulica>\u00a0has quit  \n18:25\u00a0<Slashman>\u00a0has joined #xwiki  \n18:28\u00a0<tmortagne>\u00a0has quit  \n18:36\u00a0<gdelhumeau\\_>\u00a0has quit  \n18:49\u00a0<abusenius>\u00a0has quit  \n18:49\u00a0<KermitTheFragger>\u00a0has quit  \n18:56\u00a0<OSIMasson>\u00a0has quit  \n19:15\u00a0<OSIMasson>\u00a0has joined #xwiki  \n19:30\u00a0<Slashman>\u00a0has quit  \n19:42\u00a0<lucaa>\u00a0has quit  \n19:48\u00a0<lucaa>\u00a0has joined #xwiki  \n19:52\u00a0<lucaa>\u00a0has quit  \n19:59\u00a0<abusenius>\u00a0has joined #xwiki  \n23:27\u00a0<vmassol1>\u00a0has quit  \n23:54\u00a0<lucaa>\u00a0has joined #xwiki\n"}