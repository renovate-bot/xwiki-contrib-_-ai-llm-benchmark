{"id": "dev:IRC.xwikiArchive20110606", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110606", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n01:11\u00a0<sdumitriu>\u00a0has quit  \n01:44\u00a0<SvenDowideit>\u00a0has quit  \n01:44\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n02:19\u00a0<abusenius>\u00a0has quit  \n06:07\u00a0<Chami1>\u00a0has joined #xwiki  \n07:12\u00a0<DrLou>\u00a0has quit  \n07:28\u00a0<vmassol>\u00a0has joined #xwiki  \n07:30\u00a0<mflorea>\u00a0has joined #xwiki  \n07:42\u00a0<vmassol>\u00a0cjdelisle: good morning  \n07:42\u00a0<@cjdelisle>\u00a0good morning  \n07:42\u00a0<vmassol>\u00a0just realized I didn't finish the myxwiki.org uggrade to 3.1M2. Was wondering when RC1 was going to be released  \n07:43\u00a0<@cjdelisle>\u00a0I am happy to do it today, that said I would have done it a week ago if you had not stopped me.  \n07:43\u00a0<vmassol>\u00a0I never stopped anyone :)  \n07:43\u00a0<vmassol>\u00a0I just said that each fialing test needs to be reviewed  \n07:44\u00a0<vmassol>\u00a0to ensure whether it's a real issue or just a test issue  \n07:44\u00a0<vmassol>\u00a0anyway let's release today if you're ok  \n07:45\u00a0<@cjdelisle>\u00a0IMO we need someone to work on stability full time since this: work on tests a every week following \"release day\" \u00a0is :(  \n07:45\u00a0<vmassol>\u00a0we need all of us to work on stability IMO  \n07:45\u00a0<vmassol>\u00a0I agree  \n07:45\u00a0<vmassol>\u00a0hence the proposal but sergiu hasn't answered yet AFAIK  \n07:45\u00a0<@cjdelisle>\u00a0Unfortunately I have no time available since I have to do the cloud stuff 100% this month.  \n07:45\u00a0<vmassol>\u00a0we just need him to agree and then enforce the strategy  \n07:46\u00a0<vmassol>\u00a0has mflorea answered?  \n07:46\u00a0<vmassol>\u00a0checking  \n07:46\u00a0<vmassol>\u00a0yes he did with a +0  \n07:46\u00a0<@cjdelisle>\u00a0\"we need all of us\" IMO that doesn't really work. Put someone in charge and give them responsability and power to revert, that's how stuff gets done.  \n07:47\u00a0<vmassol>\u00a0yes I agree too  \n07:47\u00a0<vmassol>\u00a0ideally we would have a github hook  \n07:47\u00a0<vmassol>\u00a0that refuses the push by checking the hudson status  \n07:48\u00a0<@cjdelisle>\u00a0I thought of something, you will never again have a problem finding a release manager, just threaten to nominate me ;)  \n07:48\u00a0<vmassol>\u00a0:)  \n07:49\u00a0<venkatesh>\u00a0has joined #xwiki  \n07:54\u00a0<@cjdelisle>\u00a0https://github.com/cjdelisle/cjdns/blob/master/dht/cjdns\\_flowchart.png  \n07:54\u00a0<@cjdelisle>\u00a0my weekend project  \n08:07\u00a0<vmassol>\u00a0you've been busy  \n08:08\u00a0<@cjdelisle>\u00a0it's been a back burner project over the past few months  \n08:22\u00a0<sburjan`>\u00a0has joined #xwiki  \n08:28\u00a0<evalica1>\u00a0has joined #xwiki  \n08:38\u00a0<venkatesh>\u00a0has quit  \n08:39\u00a0<venkatesh>\u00a0has joined #xwiki  \n09:04\u00a0<vmassol>\u00a0back  \n09:04\u00a0<vmassol>\u00a0cjdelisle: btw did you know that filesystem storage doesn't work with our cluster mode?  \n09:04\u00a0<vmassol>\u00a0(which is a bit of a problem)  \n09:05\u00a0<@cjdelisle>\u00a0It is documented that you can't just turn it on and have it work.  \n09:05\u00a0<vmassol>\u00a0actually there are 3 things that don't work with cluster right now: scheduler, filesystem storage for attachments and extension manager  \n09:06\u00a0<@cjdelisle>\u00a0The problem is that you have multiple computers with multiple harddrives, the solution is to use NTP or another method of synchronizing the storage archive.  \n09:06\u00a0<@cjdelisle>\u00a0err not NTP  \n09:06\u00a0<@cjdelisle>\u00a0NFS  \n09:06\u00a0<vmassol>\u00a0sure you can have shared driver or things like this  \n09:06\u00a0<vmassol>\u00a0but they have drawbacks too  \n09:06\u00a0<vmassol>\u00a0s/driver/drive/  \n09:06\u00a0<vmassol>\u00a0and  \n09:06\u00a0<vmassol>\u00a0more importzntly  \n09:07\u00a0<vmassol>\u00a0users would use filesystem storage because they need large attachments  \n09:07\u00a0<vmassol>\u00a0and synchornizing large attachments is always going to take lots of time  \n09:07\u00a0<vmassol>\u00a0the only real solution is no sync  \n09:07\u00a0<vmassol>\u00a0which means a common storage that supports concurrency  \n09:07\u00a0<vmassol>\u00a0(which is the definition of a databse btw ;))  \n09:08\u00a0<vmassol>\u00a0(almost)  \n09:08\u00a0<@cjdelisle>\u00a0NFS  \n09:08\u00a0<@cjdelisle>\u00a0You do the same thing with mysql, there's one mysql box and every node in the cluster calls back to it.  \n09:09\u00a0<vmassol>\u00a0does NFS support concurrency nicely?  \n09:09\u00a0<@cjdelisle>\u00a0It should  \n09:10\u00a0<vmassol>\u00a0http://en.wikipedia.org/wiki/Distributed\\_file\\_system#Concurrent\\_file\\_updates  \n09:10\u00a0<vmassol>\u00a0they don't say much though  \n09:10\u00a0<@cjdelisle>\u00a0It's used in large applications where multiple workstations will be practicly guaranteed to be reading the same file on the same server.  \n09:10\u00a0<vmassol>\u00a0wait I used the wrong link  \n09:11\u00a0<vmassol>\u00a0reading http://en.wikipedia.org/wiki/Network\\_File\\_System\\_(protocol)  \n09:12\u00a0<vmassol>\u00a0anyway good that we have this solution at least  \n09:12\u00a0<vmassol>\u00a0we shoudl document it in the cluster section  \n09:12\u00a0<vmassol>\u00a0that would solve the extension manager issue as well  \n09:12\u00a0<@cjdelisle>\u00a0http://www.time-travellers.org/shane/papers/NFS\\_considered\\_harmful.html  \n09:12\u00a0<vmassol>\u00a0only remainng issue is the shceduler  \n09:13\u00a0<@cjdelisle>\u00a0I documented it under attachments as: \"use NFS or some equivilent network data storage\"  \n09:13\u00a0<@cjdelisle>\u00a0I don't know how NAS boxen work but I know they have solved all of these problems quite well.  \n09:14\u00a0<Denis>\u00a0has joined #xwiki  \n09:15\u00a0<sburjan>\u00a0has joined #xwiki  \n09:15\u00a0<@cjdelisle>\u00a0Another possibly better solution is for us to embark on writing our own load balancer which makes sure that certain types of requests always go to certain nodes.  \n09:16\u00a0<vmassol>\u00a0that doesn't provide failover  \n09:16\u00a0<@cjdelisle>\u00a0hmm  \n09:17\u00a0<@cjdelisle>\u00a0run everything over cassandra and store attachments in cassandra... done  \n09:17\u00a0<vmassol>\u00a0yes I agree that the best solution is to use a DB  \n09:17\u00a0<@cjdelisle>\u00a0s/done/todo...  \n09:17\u00a0<@cjdelisle>\u00a0Cassandra can handle large data pretty well.  \n09:18\u00a0<@cjdelisle>\u00a0I talked about the (old) way we store attachments and was called all sorts of mean names over in #hibernate  \n09:18\u00a0<+Denis>\u00a0Salut  \n09:18\u00a0<@cjdelisle>\u00a0good morning  \n09:19\u00a0<vmassol>\u00a0cjdelisle: can pgsql stream blobs?  \n09:19\u00a0<vmassol>\u00a0cjdelisle: ah cool and what did they say?  \n09:19\u00a0<vmassol>\u00a0Denis: good morning  \n09:19\u00a0<@cjdelisle>\u00a0They said that our method of using VARBINARY is a horrible idea, databases are not optimized for it and it will hurt performance.  \n09:19\u00a0<vmassol>\u00a0cjdelisle: what do they recommend?  \n09:20\u00a0<@cjdelisle>\u00a0Storing the data in a file and pointing to the location of that file from the database.  \n09:20\u00a0<@cjdelisle>\u00a0Basicly what I implemented.  \n09:20\u00a0<vmassol>\u00a0hmmm  \n09:20\u00a0<vmassol>\u00a0so basically they're saying that no RDBMS can handle blobs well?  \n09:21\u00a0<vmassol>\u00a0(I don't see why that couldn't be done)  \n09:21\u00a0<@cjdelisle>\u00a0Well, #1 we are not using blobs.  \n09:21\u00a0<vmassol>\u00a0yes but we could  \n09:21\u00a0<jvdrean>\u00a0has joined #xwiki  \n09:21\u00a0<vmassol>\u00a0if that's all it takes it's probably not that hard to do for us  \n09:22\u00a0<@cjdelisle>\u00a0The problem with blobs is mysql and mssql load them all to ram, postgres and oracle are better, each db has it's own api for storing them.  \n09:22\u00a0<@cjdelisle>\u00a0It is bad enough that the hibernate people do not want to fool around with blob apis if that gives you a hint.  \n09:22\u00a0<vmassol>\u00a0hmm I was pretty sure hibernate had blob support  \n09:22\u00a0<vmassol>\u00a0(re a common api)  \n09:23\u00a0<@cjdelisle>\u00a0I asked and they said it was a bad idea.  \n09:23\u00a0<vmassol>\u00a0re mysql I have no clue, we could ask them if they have plans to support blob streaming  \n09:24\u00a0<vmassol>\u00a0ok so basically we need 3 store  \n09:24\u00a0<vmassol>\u00a0s/3/2  \n09:24\u00a0<@cjdelisle>\u00a0The hibernate people said that blobs were a quicksand hole that I did not want to step in.  \n09:24\u00a0<vmassol>\u00a0I mean 2 DB stores  \n09:24\u00a0<arkub>\u00a0has joined #xwiki  \n09:24\u00a0<vmassol>\u00a0one DB optimized for doc content  \n09:24\u00a0<vmassol>\u00a0and one optimized for large blob content  \n09:24\u00a0<vmassol>\u00a0FS being a simple DB store lacking a few things  \n09:25\u00a0<vmassol>\u00a0(distributed access)  \n09:25\u00a0<vmassol>\u00a0NFS being a bit better  \n09:25\u00a0<vmassol>\u00a0and according to you cassandra being a good DB store for attachments  \n09:25\u00a0<vmassol>\u00a0(maybe there's a better DB store if we consider the only use case of attachments)  \n09:26\u00a0<@cjdelisle>\u00a0Also you could use amazon s3 store for attachments, I'm not entirely sure about it's concurrency but it's worth investigation.  \n09:26\u00a0<vmassol>\u00a0that won't work in lots of setup  \n09:26\u00a0<vmassol>\u00a0it could be an option but not going to work in the majority of cases  \n09:26\u00a0<vmassol>\u00a0(it's also going to be extra slow)  \n09:27\u00a0<@cjdelisle>\u00a0hmm true re internal networks  \n09:28\u00a0<@cjdelisle>\u00a0I think most users will just want to mount an NFS volume from their network storage engines and use that.  \n09:29\u00a0<vmassol>\u00a0yes soemthing that we'll need to try out for real, myxwiki would be a good test bed  \n09:29\u00a0<vmassol>\u00a0I'd like to enable FS storage on it  \n09:29\u00a0<vmassol>\u00a0(after the migration)  \n09:30\u00a0<vmassol>\u00a0s/migration/upgrade/  \n09:30\u00a0<@cjdelisle>\u00a0One thing I like about fs store is the kernel tends to cache files which are loaded a lot so we get free in ram storage which is pretty smart.  \n09:31\u00a0<jvdrean1>\u00a0has joined #xwiki  \n09:31\u00a0<jvdrean>\u00a0has quit  \n09:33\u00a0<@cjdelisle>\u00a0hmm ui-tests frozen up  \n09:33\u00a0<@cjdelisle>\u00a0our testing system would make Rube Goldberg proud  \n09:34\u00a0<vmassol>\u00a0or Moore  \n09:35\u00a0<vmassol>\u00a0ok going to upgrade myxwiki.org to the latest 3.1 snapshot  \n09:50\u00a0<@cjdelisle>\u00a0Something that came to mind (ofc I don't have the time now) was we could very easily add smart card verification to the login/registration code.  \n09:51\u00a0<@cjdelisle>\u00a0All of the underlying PKCS#7 code is in the crypto module.  \n09:52\u00a0<@cjdelisle>\u00a0It might be good to be able to brag about being the only enterprise wiki that supports smart cards out of box.  \n09:59\u00a0<sdumitriu>\u00a0has joined #xwiki  \n09:59\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:01\u00a0<vmassol>\u00a0tmortagne: fyi I'm upgrading myxwiki.org to the latest 3.1 snapshot  \n10:14\u00a0<vmassol>\u00a0sdumitriu: hi. I'm finishing the myxwiki.org upgrade  \n10:14\u00a0<vmassol>\u00a0I seem to remember we had to exclude some plugin or lib to make it start, do you recall which one?  \n10:15\u00a0<vmassol>\u00a0collection plugin?  \n10:15\u00a0<vmassol>\u00a0forget it, since I'm copying the config from before it should be ok  \n10:19\u00a0<+tmortagne>\u00a0vmassol: just read IRC log about clustering, it's a problem for extension manager only in its current state, support for it is already planned  \n10:19\u00a0<+tmortagne>\u00a0and NFS would not fix anything anyway  \n10:19\u00a0<+tmortagne>\u00a0NFS will not register components  \n10:20\u00a0<vmassol>\u00a0yep it would work only after a restart  \n10:28\u00a0<vmassol>\u00a0node1 updated  \n10:29\u00a0<vmassol>\u00a0I'm wondering if I should update the XARs now from node1 or not....  \n10:29\u00a0<@cjdelisle>\u00a0is there documentation on what translation packs go where in the source tree?  \n10:30\u00a0<vmassol>\u00a0if not now then I'll upgrade node2, bring both nodes up and then only perform the xar upgrades  \n10:30\u00a0<+tmortagne>\u00a0cjdelisle: on l10n you see where the file is  \n10:30\u00a0<+tmortagne>\u00a0the default language file  \n10:30\u00a0<vmassol>\u00a0actually if not, I'd switch the main node to be node1, upgrade node2 and then make both nodes avail before upgrading the xar  \n10:30\u00a0<vmassol>\u00a0tmortagne: any idea?  \n10:31\u00a0<+tmortagne>\u00a0vmassol: well in theory both way are supposed to work  \n10:31\u00a0<vmassol>\u00a0well we've never tested newer XARs with old core  \n10:32\u00a0<+tmortagne>\u00a0now if you take care of node1 before is saves a lot of events and cache sync  \n10:32\u00a0<vmassol>\u00a0yes but there's the potential issue of newer xar with older core  \n10:32\u00a0<vmassol>\u00a0unless I stop both nodes  \n10:32\u00a0<vmassol>\u00a0which maybe is the best in the end  \n10:32\u00a0<arkub>\u00a0has quit  \n10:32\u00a0<+tmortagne>\u00a0you should stop the node not yet upgraded  \n10:33\u00a0<vmassol>\u00a0ok so make node1 avail and stop node2, upgrade xar and then upgrade node2  \n10:33\u00a0<+tmortagne>\u00a0cjdelisle: for example when you look at http://l10n.xwiki.org/xwiki/bin/view/XE/ \u00a0you have the location of each translation file in URL column  \n10:34\u00a0<vmassol>\u00a0so the xar upgrade would be live if we don't want downtime  \n10:34\u00a0<vmassol>\u00a0should be ok though  \n10:34\u00a0<@cjdelisle>\u00a0yup, I see them now. Thanks.  \n10:35\u00a0<+tmortagne>\u00a0cjdelisle: take extra care of WYSIWYG if you have new translations because you have to modify some reference file  \n10:35\u00a0<+tmortagne>\u00a0it's documented on http://l10n.xwiki.org/xwiki/bin/view/Wysiwyg/  \n10:36\u00a0<+tmortagne>\u00a0vmassol: yea downtime is not that critical on myxwiki.org I think ;)  \n10:36\u00a0<vmassol>\u00a0sure sure but it's good to have a strategy in general  \n10:36\u00a0<+tmortagne>\u00a0sure  \n10:37\u00a0<vmassol>\u00a0we need to consider myxwiki.org as a real service  \n10:37\u00a0<vmassol>\u00a0and operate it similarly  \n10:37\u00a0<vmassol>\u00a0to practice and improve stuff  \n10:37\u00a0<vmassol>\u00a0that way we can see limitations and work on making XE even more production ready  \n10:37\u00a0<+tmortagne>\u00a0to not have downtime I guess you would have to upgrade both node server side and then restart one by one before upgrading the xar  \n10:38\u00a0<vmassol>\u00a0tmortagne: wdyt of:  \n10:38\u00a0<vmassol>\u00a0The general strategy to use is the following:  \n10:38\u00a0<vmassol>\u00a0\\* modify the load balancer configuration so that it only uses one node (node2)  \n10:38\u00a0<vmassol>\u00a0\\* upgrade node1 and verify it works locally (using a ssh tunnel)  \n10:38\u00a0<vmassol>\u00a0\\* modify the load balancer configuration to make node1 available and take node2 offline  \n10:38\u00a0<vmassol>\u00a0\\* upgrade the applications (XARs)  \n10:38\u00a0<vmassol>\u00a0\\* upgrade node2  \n10:38\u00a0<vmassol>\u00a0\\* bring both nodes up  \n10:39\u00a0<vmassol>\u00a0this will fail only if we have some pages that are not backward compat, ie that would fail with a newer core  \n10:39\u00a0<vmassol>\u00a0should be ok in most cases I think  \n10:40\u00a0<+tmortagne>\u00a0vmassol: anyway we don't upgrade sub wikis  \n10:40\u00a0<vmassol>\u00a0right  \n10:40\u00a0<+tmortagne>\u00a0so whatever the upgrade protocol...  \n10:40\u00a0<+tmortagne>\u00a0in any case sounds good  \n10:41\u00a0<vmassol>\u00a0ok  \n10:41\u00a0<vmassol>\u00a0doing it  \n10:42\u00a0<vmassol>\u00a0we should really script all this\u2026.  \n10:43\u00a0<vmassol>\u00a0note that node2 upgrade is going to be fast since I'll copy node1's files....  \n10:43\u00a0<vmassol>\u00a0(except for tcp2.xml)  \n10:44\u00a0<+tmortagne>\u00a0yes probably safer than redoing the normal upgrade on node2  \n10:45\u00a0<@cjdelisle>\u00a0wget --user=meeeeee --password=:P --auth-no-challenge http://l10n.xwiki.org/xwiki/bin/view/L10NCode/GetTranslationFile?name=XE.XWikiCoreResources&app=XE&basicauth=1  \n10:46\u00a0<vmassol>\u00a0ok myxwiki.org now running on node1 (ie 3.1 snap)  \n10:47\u00a0<vmassol>\u00a0I need to add to the doc the update of the version.properties file  \n10:48\u00a0<evalica1>\u00a0has quit  \n10:53\u00a0<yourGuest>\u00a0has joined #xwiki  \n10:53\u00a0<yourGuest>\u00a0hello :)  \n10:54\u00a0<yourGuest>\u00a0I have a question.  \n10:54\u00a0<yourGuest>\u00a0Is there a possibility via script/tool/etc to migrate from a very old moinmoin wiki to xwiki  \n10:56\u00a0<@sdumitriu>\u00a0Hi yourGuest  \n10:56\u00a0<@sdumitriu>\u00a0Well, it would be possible  \n10:56\u00a0<@sdumitriu>\u00a0But I'm not sure the tool exists yet  \n10:57\u00a0<yourGuest>\u00a0my first investigations lead to a perl script to migrate moinmoin to mediawiki, so I assumed there is something similar for xwiki  \n10:57\u00a0<+tmortagne>\u00a0at worst you can do moinmoin -> mediawiki -> xwiki  \n10:58\u00a0<+tmortagne>\u00a0since there is several tools to import mediawiki into xwiki  \n10:58\u00a0<yourGuest>\u00a0or one of my students will recursively retype the wiki ^^.  \n10:58\u00a0<+tmortagne>\u00a0that would work too :)  \n10:58\u00a0<yourGuest>\u00a0mhh I will have a look at this...thank you.  \n11:06\u00a0<vmassol>\u00a0sdumitriu:  \n11:06\u00a0<vmassol>\u00a0please reply to the mail proposal/vote about the testing strategy to stabilize  \n11:08\u00a0<@sdumitriu>\u00a0vmassol: K, doing now  \n11:11\u00a0<@sdumitriu>\u00a0vmassol: To not go thorugh another mail, does:  \n11:11\u00a0<@sdumitriu>\u00a01) It's forbidden to commit anything till all tests are passing (unit AND functional tests), unless what is committed is about fixing tests. On the exceptional case when a committer absolutely needs to commit even though tests are failing he needs to ask the permission explicitly.  \n11:11\u00a0<@sdumitriu>\u00a0apply all the time, or only when preparing for a release?  \n11:11\u00a0<vmassol>\u00a0at all times  \n11:11\u00a0<vmassol>\u00a0(till we get to a better state)  \n11:11\u00a0<+tmortagne>\u00a0the point is do apply it all the time to not have to do it for each release like now  \n11:12\u00a0<vmassol>\u00a0and not to always put the burden of fixing the tests on the same persons and on the RM  \n11:20\u00a0<vmassol>\u00a0going to remove GoodMacro from myxwiki.org  \n11:20\u00a0<evalica>\u00a0has joined #xwiki  \n11:20\u00a0<vmassol>\u00a0mflorea: btw there 2 files that could't be imported when I upgrade the main wiki:  \n11:21\u00a0<vmassol> ? http://myxwiki.org/xwiki/bin/view/XWiki/WysiwygEditorConfig  \n11:21\u00a0<vmassol> ? http://myxwiki.org/xwiki/bin/view/XWiki/WysiwygEditorConfigTemplate  \n11:21\u00a0<+mflorea>\u00a0what was the reason?  \n11:21\u00a0<yourGuest>\u00a0has quit  \n11:22\u00a0<+mflorea>\u00a0did you upgrade the WysiwygEditorConfigClass ?  \n11:23\u00a0<+mflorea>\u00a0I remember I tested the xar after I modified the WysiwygEditorConfig, WysiwygEditorConfigClass and WysiwygEditorConfigTemplate  \n11:24\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:24\u00a0<vmassol>\u00a0http://pastebin.com/RkXrMyEA  \n11:24\u00a0<vmassol>\u00a0mflorea: I imported the XE XAR  \n11:26\u00a0<+mflorea>\u00a0can you try to import the WysiwygEditorConfigClass first and then the WysiwygEditorConfig and WysiwygEditorConfigTemplate. I think it tries to import the WysiwygEditorConfig with the previous class definition.  \n11:28\u00a0<jvelociter>\u00a0has joined #xwiki  \n11:28\u00a0<+mflorea>\u00a0if that's the case then we have a generic problem: when you modify the xclass and the wiki page containing the xobjects the importer needs to first import the new class definition and then the wiki pages containing the objects.  \n11:28\u00a0<@sdumitriu>\u00a0Import always imports the documents with classes first  \n11:29\u00a0<+mflorea>\u00a0I see, then it's not this problem.  \n11:29\u00a0<+mflorea>\u00a0sdumitriu: what does the log say to you?  \n11:30\u00a0<@sdumitriu>\u00a0Bad document  \n11:30\u00a0<+mflorea>\u00a0basically I changed the type of a prop from String to TextArea (i.e. LargegStringProperty)  \n11:30\u00a0<@sdumitriu>\u00a0Did the class change between the 2 versions?  \n11:30\u00a0<@sdumitriu>\u00a0Right  \n11:30\u00a0<@sdumitriu>\u00a0That's the problem  \n11:30\u00a0<+mflorea>\u00a0what?  \n11:31\u00a0<vmassol>\u00a0sdumitriu: we need to stabilize the tests right now  \n11:31\u00a0<vmassol>\u00a0not continue adding problems to it  \n11:31\u00a0<@sdumitriu>\u00a0Hibernate has a problem with objects changing their type  \n11:31\u00a0<vmassol>\u00a0right now tests are not passing consistently  \n11:31\u00a0<vmassol>\u00a0we \\*ALL\\* need to work on fixing this  \n11:31\u00a0<@sdumitriu>\u00a0The problem is that you load an object of type StringProperty with an ID, then you try to save another object of type LargeStringProperty, but with the same ID  \n11:31\u00a0<+mflorea>\u00a0so this is on upgrade-only problem  \n11:32\u00a0<@sdumitriu>\u00a0Hibernate considers the two objects to be the same, since they have the same ID  \n11:32\u00a0<+mflorea>\u00a0when do you load the object with StringProperty?  \n11:32\u00a0<@sdumitriu>\u00a0vmassol: WDYM?  \n11:32\u00a0<+mflorea>\u00a0before importing?  \n11:32\u00a0<vmassol>\u00a0sdumitriu: what part is not clear?  \n11:32\u00a0<@sdumitriu>\u00a0mflorea: Yes  \n11:33\u00a0<@sdumitriu>\u00a0vmassol: It sounds like I'm doing something wrong, although I'm not doing anything at all at the moment  \n11:33\u00a0<@sdumitriu>\u00a0(except answering questions)  \n11:36\u00a0<vmassol>\u00a0sdumitriu: it's because you didn't agree (yet)  \n11:36\u00a0<vmassol>\u00a0so I don't know what you're going to do next  \n11:36\u00a0<vmassol>\u00a0ie continue committing stuff  \n11:36\u00a0<vmassol>\u00a0or help stabilizing the tests  \n11:36\u00a0<+mflorea>\u00a0sdumitriu: so these steps http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWikiEnterprise31M2#HWYSIWYGEditorConfiguration should work right?  \n11:36\u00a0<@sdumitriu>\u00a0Help on tests  \n11:36\u00a0<vmassol>\u00a0according to your stategy in your teply  \n11:36\u00a0<vmassol>\u00a0you could continue committing  \n11:36\u00a0<vmassol>\u00a0s/teply/reply/  \n11:36\u00a0<vmassol>\u00a0ok cool thanks  \n11:36\u00a0<@sdumitriu>\u00a0The -0 was for an all-the-time strategy, since that's what you said it was  \n11:36\u00a0<@sdumitriu>\u00a0But I agree that for a release everyone should give a hand  \n11:36\u00a0<vmassol>\u00a0release is too late  \n11:36\u00a0<vmassol>\u00a0we need to have test passing as the norm  \n11:36\u00a0<@sdumitriu>\u00a0mflorea: Fixing that problem is hard  \n11:36\u00a0<@sdumitriu>\u00a0Now the StringProperty is a ghost that prevents the document from working  \n11:36\u00a0<vmassol>\u00a0finishgin the myxwiki.org upgrade then I'll go back to the tests  \n11:36\u00a0<+mflorea>\u00a0sdumitriu: I mean, the solution without importing the WysiwygEditorConfig  \n11:36\u00a0<@sdumitriu>\u00a0There should be some code that takes care of this automatically, but I don't know why it's not working anymore  \n11:36\u00a0<vmassol>\u00a0cjdelisle: when you do start the release?  \n11:36\u00a0<@cjdelisle>\u00a0when I'm done copying over the translations and I commit that  \n11:37\u00a0<vmassol>\u00a0ok great  \n11:37\u00a0<@cjdelisle>\u00a0It's going slow because I'm recording the commands  \n11:37\u00a0<+mflorea>\u00a0sdumitriu: would deleting the WysiwygEditorConfig and importing from xar work?  \n11:37\u00a0<@sdumitriu>\u00a0mflorea: Yes, it should work if you import the class, remove deprecated properties, then import the config  \n11:37\u00a0<@cjdelisle>\u00a0and wget is weird and only downloads half the file  \n11:37\u00a0<@sdumitriu>\u00a0Importing both at the same time will create the ghost  \n11:37\u00a0<@sdumitriu>\u00a0cjdelisle: I commit translations from my machine  \n11:38\u00a0<@sdumitriu>\u00a0Not from the agent  \n11:38\u00a0<@sdumitriu>\u00a0Since it's easier  \n11:38\u00a0<vmassol>\u00a0mflorea: missed your message above  \n11:38\u00a0<vmassol>\u00a0trying to import WysiwygEditorConfigClass only  \n11:38\u00a0<@sdumitriu>\u00a0vmassol: All tests we passing Saturday  \n11:38\u00a0<@sdumitriu>\u00a0What happened?  \n11:38\u00a0<sburjan>\u00a0has quit  \n11:38\u00a0<vmassol>\u00a0sdumitriu: depends which branch you're talkig about but flickering I guess  \n11:39\u00a0<vmassol>\u00a0(haven't analyzed)  \n11:39\u00a0<@cjdelisle>\u00a0everything flickers, it's depressing  \n11:39\u00a0<@sdumitriu>\u00a0This happes quite often: http://ci.xwiki.org/job/xwiki-enterprise-tests-3.1/org.xwiki.enterprise$xwiki-enterprise-test-webstandards/54/testReport/org.xwiki.test.webstandards.framework/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_space\\_XWiki\\_\\_page\\_LiveTableResults\\_executed\\_with\\_credentials\\_Admin\\_admin/  \n11:39\u00a0<@sdumitriu>\u00a0It's a false negative  \n11:39\u00a0<@sdumitriu>\u00a0Maybe the timeout is too short, 10 seconds  \n11:39\u00a0<@cjdelisle>\u00a0those ought to try twice more before failing.  \n11:40\u00a0<@sdumitriu>\u00a0Since the server is trying to write the response when the next document is requested  \n11:40\u00a0<@sdumitriu>\u00a0cjdelisle: Are you looking at the webstandards tests now?  \n11:40\u00a0<@cjdelisle>\u00a0the storage tests fail because the server isn't shutting down when it should, we need to ask it to shutdown and then kill it after  \n11:40\u00a0<@cjdelisle>\u00a0No I'm releasing  \n11:40\u00a0<@sdumitriu>\u00a0Can you try increasing the timeout, or do you want me to do it?  \n11:41\u00a0<@sdumitriu>\u00a0OK, I'll look at that  \n11:41\u00a0<@cjdelisle>\u00a0Go ahead  \n11:41\u00a0<vmassol>\u00a0mflorea: fyi I imported the whole XAR for template.myxwik.org and I didn't get the error  \n11:42\u00a0<+mflorea>\u00a0that xar might not be up to date  \n11:42\u00a0<vmassol>\u00a0what war?  \n11:43\u00a0<vmassol>\u00a0xar  \n11:43\u00a0<vmassol>\u00a0I sued the same one  \n11:43\u00a0<+mflorea>\u00a0ah  \n11:43\u00a0<vmassol>\u00a0I updated both the main wiki and the template wiki with the same xar  \n11:43\u00a0<vmassol>\u00a0now doing playground  \n11:43\u00a0<@sdumitriu>\u00a0Maybe the template wasn't updated to 3.0rc1 before  \n11:43\u00a0<+mflorea>\u00a0try to edit a page in WYSIWYG editor mode and see if the Image menu has two entries  \n11:43\u00a0<@sdumitriu>\u00a0Meaning that it didn't have the wysiwyg config classes at all  \n11:44\u00a0<+mflorea>\u00a0\"Attached image\" and \"External image\"  \n11:47\u00a0<vmassol>\u00a0mflorea: works for template and playground  \n11:47\u00a0<vmassol>\u00a0there's no menu for main wiki  \n11:47\u00a0<vmassol>\u00a0http://myxwiki.org/xwiki/bin/edit/Main/WebHome?&editor=wysiwyg  \n11:47\u00a0<vmassol>\u00a0going to reimport those 2 files now on main wiki  \n11:48\u00a0<+mflorea>\u00a0I think it works for template and playground because they didn't had the WYSIWYG editor config pages before.  \n11:48\u00a0<vmassol>\u00a0yes probably  \n11:48\u00a0<vmassol>\u00a0so we have a real issue?  \n11:49\u00a0<+mflorea>\u00a0yes, but it's a generic issue, when you modify a xclass  \n11:49\u00a0<vmassol>\u00a0I tried to import only http://myxwiki.org/xwiki/bin/view/XWiki/WysiwygEditorConfig  \n11:49\u00a0<vmassol>\u00a0and it failed  \n11:49\u00a0<@sdumitriu>\u00a0Yes, that's the one with problems  \n11:50\u00a0<+mflorea>\u00a0the problem appears when you import both the modified xclass and the pages with the modified xobjects  \n11:50\u00a0<+mflorea>\u00a0so is there any solution? like delete the page and import it from xar?  \n11:50\u00a0<@sdumitriu>\u00a0Yes  \n11:50\u00a0<vmassol>\u00a0mflorea: do we need to add something to the RN of RC1? is that a blocker for the RC1 release? Is it a blocker for the 3.1 final?  \n11:50\u00a0<@sdumitriu>\u00a01. Change the class back to what it was before  \n11:50\u00a0<sburjan>\u00a0has joined #xwiki  \n11:50\u00a0<@sdumitriu>\u00a02. Delete the object  \n11:51\u00a0<@sdumitriu>\u00a03. Change the class back to the new value  \n11:51\u00a0<@sdumitriu>\u00a04. Import the config document  \n11:51\u00a0<@sdumitriu>\u00a0vmassol: I'd say it's a blocker for the final  \n11:51\u00a0<+mflorea>\u00a0ok, I'll document it on the release notes  \n11:51\u00a0<@sdumitriu>\u00a0I'll work on it  \n11:51\u00a0<vmassol>\u00a0mflorea: ok let me know when you're done so that I can follow the process  \n11:52\u00a0<@sdumitriu>\u00a0mflorea: Just deleting won't work, since the bad property is a ghost  \n11:52\u00a0<@sdumitriu>\u00a0You have to change the class first  \n11:53\u00a0<+mflorea>\u00a0ok  \n11:53\u00a0<+mflorea>\u00a0sdumitriu: is there an open issue for the ghost problem?  \n11:53\u00a0<+mflorea>\u00a0so that I can point it in the release notes  \n11:54\u00a0<@sdumitriu>\u00a0Nope  \n11:55\u00a0<+mflorea>\u00a0ok, I'll just describe the problem  \n12:06\u00a0<+mflorea>\u00a0vmassol: try http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWikiEnterprise31M2 see the second part, if import fails  \n12:06\u00a0<vmassol>\u00a0ok testing  \n12:09\u00a0<@sdumitriu>\u00a0mflorea: Did you fix myxwiki?  \n12:09\u00a0<+mflorea>\u00a0no  \n12:09\u00a0<vmassol>\u00a0mflorea: fails  \n12:09\u00a0<vmassol>\u00a0last step fails  \n12:09\u00a0<vmassol>\u00a0the 2 docs cannot be imported  \n12:10\u00a0<+mflorea>\u00a0hmm, although they have been deleted. sdumitriu: do we have to delete the objects explicitly or deleting the page is enough?  \n12:10\u00a0<@sdumitriu>\u00a0Don't know, it's not exact science  \n12:10\u00a0<+mflorea>\u00a0:)  \n12:11\u00a0<@sdumitriu>\u00a0i can try to fix it myself, stand clear  \n12:11\u00a0<vmassol>\u00a0ok not touching myxwiki.org main wiki  \n12:12\u00a0<vmassol>\u00a0sdumitriu: make sure to record what you did to update the RN after  \n12:12\u00a0<vmassol>\u00a0;)  \n12:12\u00a0<vmassol>\u00a0s/did/do/  \n12:18\u00a0<Enygma`1>\u00a0has joined #xwiki  \n12:18\u00a0<Enygma`>\u00a0has quit  \n12:21\u00a0<@sdumitriu>\u00a0Working now  \n12:22\u00a0<@sdumitriu>\u00a0The steps from the m2 release notes should have worked, unless the revert wasn't done to the correct version  \n12:22\u00a0<@sdumitriu>\u00a0Anyway, I'll put what I did instead  \n12:22\u00a0<vmassol>\u00a0I removed the version instead of rollbacking  \n12:22\u00a0<vmassol>\u00a0but that should do the same right?  \n12:23\u00a0<vmassol>\u00a0lunch time, bbl  \n12:28\u00a0<@sdumitriu>\u00a0Going back to tests  \n12:33\u00a0<abusenius>\u00a0has joined #xwiki  \n12:36\u00a0<sburjan>\u00a0has quit  \n12:37\u00a0<evalica>\u00a0has quit  \n12:38\u00a0<sburjan>\u00a0has joined #xwiki  \n12:47\u00a0<+sburjan>\u00a0sdumitriu: hello. are we gonna have panels in 2.0 syntax soon ?  \n12:47\u00a0<@sdumitriu>\u00a0sburjan: Yes  \n12:49\u00a0<mflorea>\u00a0has quit  \n12:49\u00a0<Enygma`1>\u00a0has quit  \n12:49\u00a0<evalica>\u00a0has joined #xwiki  \n12:50\u00a0<@sdumitriu>\u00a0git tip: use -x when cherry-picking  \n12:50\u00a0<@sdumitriu>\u00a0git cp -x master  \n12:53\u00a0<sburjan>\u00a0has quit  \n12:54\u00a0<abusenius>\u00a0has quit  \n12:55\u00a0<abusenius>\u00a0has joined #xwiki  \n12:56\u00a0<abusenius>\u00a0has quit  \n12:57\u00a0<abusenius>\u00a0has joined #xwiki  \n12:59\u00a0<@cjdelisle>\u00a0bringing node1 offline to do release  \n13:08\u00a0<sburjan>\u00a0has joined #xwiki  \n13:14\u00a0<DrLou>\u00a0has joined #xwiki  \n13:15\u00a0<Chami1>\u00a0tmortagne: hi  \n13:21\u00a0<vmassol>\u00a0restarting node1  \n13:21\u00a0<vmassol>\u00a0it didn't have the cluster config enabled  \n13:21\u00a0<vmassol>\u00a0hmmm is node1 going to start if node2 is offline tmortagne?  \n13:26\u00a0<@cjdelisle>\u00a0<version>3.1-RC1</version>  \n13:26\u00a0<@cjdelisle>\u00a0correct?  \n13:26\u00a0<arkub>\u00a0has joined #xwiki  \n13:26\u00a0<abusenius>\u00a0has quit  \n13:27\u00a0<abusenius>\u00a0has joined #xwiki  \n13:28\u00a0<@cjdelisle>\u00a0vmassol: before I get too far I just want to confirm that I'm not using the wrong version name  \n13:28\u00a0<abusenius>\u00a0has quit  \n13:29\u00a0<vmassol>\u00a03.1-rc-1  \n13:29\u00a0<@cjdelisle>\u00a0ahh  \n13:29\u00a0<@cjdelisle>\u00a0Is this documented?  \n13:29\u00a0<abusenius>\u00a0has joined #xwiki  \n13:29\u00a0<vmassol>\u00a0maybe  \n13:29\u00a0<vmassol>\u00a0checking  \n13:29\u00a0<@cjdelisle>\u00a0already released commons :/  \n13:30\u00a0<vmassol>\u00a0yes it's documented  \n13:30\u00a0<abusenius>\u00a0has quit  \n13:30\u00a0<vmassol>\u00a0http://dev.xwiki.org/xwiki/bin/view/Community/VersioningAndReleasePractices  \n13:30\u00a0<vmassol>\u00a0I told you when you did the 3.0 release already but my message must have slipped through ;)  \n13:30\u00a0<abusenius>\u00a0has joined #xwiki  \n13:31\u00a0<abusenius>\u00a0has quit  \n13:32\u00a0<vmassol>\u00a0tmortagne: ping  \n13:32\u00a0<vmassol>\u00a0ok going to restart node1 and hope it'll start  \n13:32\u00a0<abusenius>\u00a0has joined #xwiki  \n13:32\u00a0<+sburjan>\u00a0quick question. The OO server is used \\_only\\_ for importing stuff, right ? Do we use OO server for \\_exporting\\_ ?  \n13:33\u00a0<@sdumitriu>\u00a0Not quite  \n13:33\u00a0<@sdumitriu>\u00a0It's used now for exporting a document to .doc or .odt  \n13:34\u00a0<@sdumitriu>\u00a0Also for previewing attachments, but that's somewhere between importing and exporting  \n13:34\u00a0<+sburjan>\u00a0It seems we have an issue with RTF export. RalucaM is trying to export a page in RTF, and if gets messy content. If she starts the OO server, the RTF export looks better  \n13:35\u00a0<@sdumitriu>\u00a0Right  \n13:35\u00a0<@sdumitriu>\u00a0OO is used for rtf export when it's available  \n13:36\u00a0<@sdumitriu>\u00a0Otherwise it falls back to FOP, which doesn't quite maintain rtf export anymore  \n13:36\u00a0<mflorea>\u00a0has joined #xwiki  \n13:36\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:36\u00a0<+sburjan>\u00a0would it be a suggestion to make RTF strictly dependant of OO ?  \n13:36\u00a0<@sdumitriu>\u00a0Nope  \n13:37\u00a0<vmassol>\u00a0RTF is going to be dropped  \n13:37\u00a0<@sdumitriu>\u00a0Actually...  \n13:37\u00a0<vmassol>\u00a0since it has never worked  \n13:37\u00a0<@sdumitriu>\u00a0I don't like RTF export that much, so yes, maybe it should be a feature enabled only when OO is available  \n13:37\u00a0<vmassol>\u00a0in the future all exports will go through OO  \n13:37\u00a0<@sdumitriu>\u00a0And actually it should be completely replaced with .odt export  \n13:37\u00a0<vmassol>\u00a0(then all formats supported by OO can be made avail)  \n13:37\u00a0<+sburjan>\u00a0because it is confusing for people because they don't know that when OO is not started, FOP is used.. and getting different results might be confusing  \n13:38\u00a0<vmassol>\u00a0we still need to dsicuss this sburjan  \n13:38\u00a0<vmassol>\u00a0on thelist  \n13:38\u00a0<vmassol>\u00a0that's my opinion  \n13:38\u00a0<+sburjan>\u00a0of course.. I was just asking if you consider this option :P  \n13:38\u00a0<@cjdelisle>\u00a0Do I need to manually rm the commons stuff I accidently pushed to the maven repo under the wrong name?  \n13:39\u00a0<vmassol>\u00a0cjdelisle: hmmm I guess normally this should be done with nexus  \n13:39\u00a0<vmassol>\u00a0since there are some index files  \n13:39\u00a0<+sburjan>\u00a0thanks vmassol and sdumitriu  \n13:40\u00a0<vmassol>\u00a0ok node1 is back with clustering enabled  \n13:40\u00a0<@cjdelisle>\u00a0ok so there's no way to \"fix\" a bunk release then. It's down to blasting files.  \n13:40\u00a0<vmassol>\u00a0correct  \n13:40\u00a0<vmassol>\u00a0normally  \n13:41\u00a0<vmassol>\u00a0we should use nexus staging  \n13:41\u00a0<@cjdelisle>\u00a0hmm. Wish I asked earlier but glad I didn't get any further.  \n13:41\u00a0<vmassol>\u00a0so rolling back would simply means blasting the temporary staging repo  \n13:45\u00a0<evalica>\u00a0has quit  \n13:50\u00a0<abusenius>\u00a0has quit  \n13:55\u00a0<@cjdelisle>\u00a0hmm I think I'm going to leave that alone, I don't want to start messing around with editing maven-metadata files.  \n13:55\u00a0<vmassol>\u00a0cjdelisle: we need to fix this  \n13:55\u00a0<@cjdelisle>\u00a0I broke it enough already  \n13:55\u00a0<vmassol>\u00a0we have 4 years of version alignment  \n13:55\u00a0<vmassol>\u00a0would be a pity to break it  \n13:55\u00a0<vmassol>\u00a0(+ break all docs)  \n13:56\u00a0<vmassol>\u00a0(all docs referring to versions)  \n13:56\u00a0<vmassol>\u00a0finishing something and then I can help you  \n13:56\u00a0<vmassol>\u00a0in the meantime  \n13:56\u00a0<vmassol>\u00a0you can remove the tag and re-release on the remote repo with the correct version  \n13:56\u00a0<@cjdelisle>\u00a0What I meant was release 3.1-rc-1 and but not editing the maven-metadata files to make 3.1-RC1 disappear  \n13:56\u00a0<vmassol>\u00a0yep  \n13:57\u00a0<vmassol>\u00a0I'll look at that just after if you want  \n13:57\u00a0<@cjdelisle>\u00a0mm actually that will make it easier to edit the files.  \n13:57\u00a0<@cjdelisle>\u00a0I don't know what they looked like before and I'm frankly afraid of breaking maven.  \n13:57\u00a0<vmassol>\u00a0it's easy to fix  \n13:57\u00a0<@cjdelisle>\u00a0+ we have to recalculate the md5 sums  \n13:57\u00a0<vmassol>\u00a0we have a script on nexus to recompute all metadata  \n13:58\u00a0<@cjdelisle>\u00a0ok  \n13:58\u00a0<vmassol>\u00a0leave that to me  \n13:58\u00a0<@cjdelisle>\u00a0all releases take a day :(  \n13:58\u00a0<vmassol>\u00a0just handle the git tag + re-releae  \n13:59\u00a0<vmassol>\u00a0ok node1 and node2 are up now (I hope they sync fine)  \n13:59\u00a0<vmassol>\u00a0tmortagne: any idea how to verify if they sync fine? Would be good to have a way to address a specific node  \n14:00\u00a0<vmassol>\u00a0(ah we just need the descriptor  \n14:00\u00a0<vmassol>\u00a0)  \n14:00\u00a0<vmassol>\u00a0cjdelisle: takes all day to upgrade myxwik.org too ;)  \n14:02\u00a0<@sdumitriu>\u00a0I've got guts: I removed the RC1 from maven.xwiki.org  \n14:02\u00a0<@sdumitriu>\u00a0Now you have to re-release xwiki-commons  \n14:03\u00a0<venkatesh>\u00a0has quit  \n14:03\u00a0<@cjdelisle>\u00a0Thank you.  \n14:04\u00a0<@cjdelisle>\u00a0sdumitriu: cat ~/public\\_html/releases/org/xwiki/commons/xwiki-commons-pom/maven-metadata.xml  \n14:04\u00a0<vmassol>\u00a0cjdelisle: we really need to use staging: http://nexus.xwiki.org/nexus/index.html#staging  \n14:04\u00a0<vmassol>\u00a0next time  \n14:04\u00a0<vmassol>\u00a0for the final  \n14:04\u00a0<@sdumitriu>\u00a0cjdelisle: Don't worry, the file should be fixed when you release again  \n14:04\u00a0<vmassol>\u00a0cjdelisle: sees you don't have any user  \n14:04\u00a0<vmassol>\u00a0adding one for you  \n14:04\u00a0<@cjdelisle>\u00a0I don't know anything about it. I didn't use it because I have not seen anyone else using it and I figured they knew something I didn't.  \n14:06\u00a0<evalica>\u00a0has joined #xwiki  \n14:13\u00a0<vmassol>\u00a0ok all steps done from http://myxwiki.org/xwiki/bin/view/XWiki/Upgrading  \n14:13\u00a0<vmassol>\u00a0it's now up to date too  \n14:14\u00a0<vmassol>\u00a033 steps to upgrade myxwiki.org\u2026. pfeww.....  \n14:14\u00a0<vmassol>\u00a0we need to work on upgradability....  \n14:15\u00a0<@cjdelisle>\u00a0indeed since that's something that affects the users too.  \n14:15\u00a0<vmassol>\u00a0yep  \n14:15\u00a0<vmassol>\u00a0now I need to verify clustering is working  \n14:15\u00a0<vmassol>\u00a0ahah easy with the new jmx stuff  \n14:16\u00a0<@cjdelisle>\u00a0hmm <version>3.1-RC1</version> still in the metadata files but it's only listed as an \"older version\"  \n14:17\u00a0<@cjdelisle>\u00a0<release>3.1-rc-1</release> <-- done  \n14:17\u00a0<vmassol>\u00a0we need to regenerate the metadata I guess since sergiu didn't remove it with nexus  \n14:18\u00a0<vmassol>\u00a0fyi to check the cluster status: http://myxwiki.org/xwiki/bin/view/Admin/ClusterAdmin  \n14:18\u00a0<Chami1>\u00a0has left #xwiki  \n14:18\u00a0<vmassol>\u00a0Members: [myxwiki-10333, vmyxwikiorg2-43803]  \n14:18\u00a0<vmassol>\u00a0so the 2 nodes see each other  \n14:20\u00a0<evalica>\u00a0has quit  \n14:24\u00a0<+tmortagne>\u00a0vmassol: I already configured descriptor for myxwiki.org so you can access the node you want with node1.myxwiki.org and node2.myxwiki.org  \n14:24\u00a0<vmassol>\u00a0ah great  \n14:25\u00a0<vmassol>\u00a0hmm node2 doesn't work  \n14:25\u00a0<vmassol>\u00a0require creds  \n14:25\u00a0<vmassol>\u00a0(tmortagne)  \n14:25\u00a0<+tmortagne>\u00a0that has nothing tto do with XWiki  \n14:25\u00a0<+tmortagne>\u00a0it's appache2 asking for cred  \n14:26\u00a0<+tmortagne>\u00a0maybe something wrong when modifying the configuration for upgrading  \n14:26\u00a0<vmassol>\u00a0tmortagne: : btw could you move Admin/WEbHome content to some other page in the Admin space?  \n14:26\u00a0<vmassol>\u00a0I'd like to keep the webHome as a dashboard page for all admins tools  \n14:26\u00a0<vmassol>\u00a0once you've move them I'll add the dashboard include  \n14:27\u00a0<+tmortagne>\u00a0Admin/WebHome only list what's in admin space so if you put a dashboard it's useless  \n14:27\u00a0<vmassol>\u00a0yes that's the goal  \n14:27\u00a0<vmassol>\u00a0to put all admin tools int he admin space  \n14:27\u00a0<vmassol>\u00a0that's where they are now  \n14:27\u00a0<+tmortagne>\u00a0i.e. it's a real webhome not some script  \n14:27\u00a0<+tmortagne>\u00a0so feel free to modify it as you want  \n14:28\u00a0<vmassol>\u00a0you've hijacked the admin space home page to put some scripts  \n14:28\u00a0<+tmortagne>\u00a0no i did not  \n14:28\u00a0<vmassol>\u00a0this script is not useful any more?  \n14:28\u00a0<+tmortagne>\u00a0the script is somewhere else  \n14:28\u00a0<+tmortagne>\u00a0again webhome only have a link  \n14:28\u00a0<+tmortagne>\u00a0to this script  \n14:28\u00a0<vmassol>\u00a0ok didn't check the contnet  \n14:29\u00a0<vmassol>\u00a0hmmm I wonder why the space dashboard doesn't wotrk anymore  \n14:29\u00a0<vmassol>\u00a0maybe anca moved it  \n14:29\u00a0<vmassol>\u00a0checking on my local install  \n14:33\u00a0<vmassol>\u00a0ok upgrade done, back to test stabilization  \n14:38\u00a0<+Denis>\u00a0sdumitriu: or anyone ? do you know why xwikivars.vm \u00a0is parsed twices on view, once by startpage.vm and once in hierarchy.vm ?  \n14:38\u00a0<@sdumitriu>\u00a0Yep  \n14:38\u00a0<@sdumitriu>\u00a0hierarchy.vm is also used standalone  \n14:39\u00a0<@sdumitriu>\u00a0So it needs to parse xwikivars  \n14:39\u00a0<@sdumitriu>\u00a0There are two solutions for this  \n14:39\u00a0<@sdumitriu>\u00a0(three actually)  \n14:39\u00a0<+Denis>\u00a0standalone ?  \n14:39\u00a0<@sdumitriu>\u00a01. Replace the parse with explicit duplication of the required variables, since only a few are needed  \n14:40\u00a0<@sdumitriu>\u00a02. Replace parse with a custom XWiki macro or directive which parses only once  \n14:40\u00a0<@sdumitriu>\u00a03. Do what C does with #ifnded #define for handling duplicate .h inclusion  \n14:40\u00a0<@sdumitriu>\u00a02 is the nicest solution long-term  \n14:40\u00a0<@sdumitriu>\u00a0But requires some extra work  \n14:42\u00a0<+Denis>\u00a0just felt on this while I am trying to add more spaces to $blacklistedSpaces by putting them in layoutExtraVars  \n14:42\u00a0<+Denis>\u00a0is there another way to proceed ?  \n14:44\u00a0<+Denis>\u00a03. is very easy, why not put it in until a better solution ?  \n14:45\u00a0<@sdumitriu>\u00a0Ah, yes, seen the blacklistedSpaces problem myself a few days ago  \n14:45\u00a0<@sdumitriu>\u00a0Yep, 3 is good as a temporary solution  \n14:46\u00a0<vmassol>\u00a0tmortagne: fixed http://myxwiki.org/xwiki/bin/view/Admin/WebHome  \n14:48\u00a0<vmassol>\u00a0guys any reason why agent1 is offline?  \n14:48\u00a0<evalica>\u00a0has joined #xwiki  \n14:48\u00a0<vmassol>\u00a0http://ci.xwiki.org/  \n14:48\u00a0<vmassol>\u00a0can I restart it?  \n14:49\u00a0<vmassol>\u00a0ah it's for the release cjdelisle right?  \n14:49\u00a0<vmassol>\u00a0should have checked the message: \"Disconnected by CalebJamesDeLisle : releasing xwiki-rc1\"  \n14:51\u00a0<@sdumitriu>\u00a0vmassol: cjdelisle announced it earlier  \n14:51\u00a0<vmassol>\u00a0ok missed it  \n14:51\u00a0<vmassol>\u00a0thanks  \n14:52\u00a0<@sdumitriu>\u00a0He had a typo in the announcement, though:  \n14:52\u00a0<@sdumitriu>\u00a0(12:58:53 PM) cjdelisle: bringing node1 offline to do release  \n14:53\u00a0<vmassol>\u00a0fyi I'm trying to fix BreadcrumbsTest  \n15:01\u00a0<@sdumitriu>\u00a0mflorea: Any idea about http://ci.xwiki.org/job/xwiki-enterprise-tests-3.1/org.xwiki.enterprise$xwiki-enterprise-test-wysiwyg/55/testReport/junit/org.xwiki.test.wysiwyg/TabsTest/testSwitchToSourceWithoutHTMLChanges/ ?  \n15:02\u00a0<+mflorea>\u00a0flickers, I don't have time to investigate now  \n15:02\u00a0<@sdumitriu>\u00a0Could be a missing \"wait\"  \n15:06\u00a0<@cjdelisle>\u00a0XWIKI-6086  \n15:06\u00a0<@cjdelisle>\u00a0XWIKI-6648  \n15:08\u00a0<+jvelociter>\u00a0cjdelisle: closed XWIKI-6648,thanks for the reminder  \n15:08\u00a0<@cjdelisle>\u00a0cool  \n15:09\u00a0<@cjdelisle>\u00a0Removing fix-for version from 6086 since nobody has claimed it, nobody is working on it, it's not listed in the roadmap and it is possible that it is intentional.  \n15:10\u00a0<vmassol>\u00a0it's not intentional and it's an important bug  \n15:10\u00a0<vmassol>\u00a0but ok  \n15:11\u00a0<@cjdelisle>\u00a0I talked with sdumitriu about this. The code which causes it is quite explicit about doing that, it doesn't look like it was put there by mistake.  \n15:11\u00a0<vmassol>\u00a0cjdelisle: I talked to the author of that code  \n15:11\u00a0<vmassol>\u00a0fabio  \n15:11\u00a0<vmassol>\u00a0it's just bad hardcoding  \n15:12\u00a0<@cjdelisle>\u00a0I see.  \n15:13\u00a0<@cjdelisle>\u00a0yay \\o/ we have no more issues dragging along being kicked to each release!  \n15:27\u00a0<+sburjan>\u00a0guys. I found an odd issue. When exporting a pages as RTF from Chrome, OpenOffice Viewer crashes. When exporting the same page as RTF from Firefox, it works. How can you explain this ?  \n15:27\u00a0<@sdumitriu>\u00a0What OpenOffice viewer?  \n15:28\u00a0<+sburjan>\u00a0OpenOffice.org Writer, my mistake  \n15:29\u00a0<@sdumitriu>\u00a0Did you try it several times?  \n15:29\u00a0<vmassol>\u00a0sburjan: RTF export don't work....  \n15:29\u00a0<vmassol>\u00a0reliably  \n15:29\u00a0<+sburjan>\u00a0sdumitriu: yepp, several times  \n15:29\u00a0<@sdumitriu>\u00a0Denis: Are you planning on working on XWIKI-6680?  \n15:29\u00a0<vmassol>\u00a0we really need to remove that option  \n15:29\u00a0<@cjdelisle>\u00a0compare file sizes?  \n15:29\u00a0<+sburjan>\u00a0let me try compare  \n15:29\u00a0<@sdumitriu>\u00a0vmassol: What's weird is that the browser used matters, it should be completely irrelevant  \n15:30\u00a0<vmassol>\u00a0indeed but it may just be that it'll crash if you open the same file severzal times  \n15:30\u00a0<vmassol>\u00a0I'veseen the viewer crash int he past  \n15:30\u00a0<vmassol>\u00a0depends with what reader you open  \n15:30\u00a0<@cjdelisle>\u00a0I just noticed that trying to download translations with wget I only get about 1/4 of the file which is o\\_O  \n15:30\u00a0<@sdumitriu>\u00a0sburjan: Are you using the same user? Maybe one is admin, the other isn't, so the content is different  \n15:31\u00a0<+sburjan>\u00a0both admin  \n15:31\u00a0<+sburjan>\u00a0this issue is not the exorted content, the issue is that OO Writer crashes.. which is odd, because the transformation is made on the server side  \n15:32\u00a0<+Denis>\u00a0sdumitriu: not right now, I am too busy and in hurry, we have fixed hard coded on our side for now, note that there is also XWIKI-6540  \n15:32\u00a0<@sdumitriu>\u00a0OK, I'll add them to my TODO queue  \n15:34\u00a0<+sburjan>\u00a0so does it work this creating an issue ?  \n15:34\u00a0<+Denis>\u00a0sdumitriu: by the way, some time ago, I have made a version of the Blog app that do not share categories, and some Blog pages between spaces. Would you be interested ? I will need to port it to latest code obviously, this mainly why I have not yet proposed it.  \n15:38\u00a0<+sburjan>\u00a0cjdelisle: 9 bytes difference between Chrome and FF  \n15:40\u00a0<vmassol>\u00a0the CSS isn't the same with both I guess  \n15:40\u00a0<@cjdelisle>\u00a0that's not the kind of difference I was seeing  \n15:40\u00a0<vmassol>\u00a0(CSS or JS)  \n15:40\u00a0<vmassol>\u00a0maybe that's why?  \n15:40\u00a0<@cjdelisle>\u00a0maybe run diff on them and see what's different  \n15:41\u00a0<+sburjan>\u00a0isn't RTF binary ?  \n15:41\u00a0<@cjdelisle>\u00a0you can force diff to treat it as text then | less  \n15:42\u00a0<@cjdelisle>\u00a0less will sort of show you binary data  \n15:42\u00a0<@cjdelisle>\u00a0at least it won't break your terminal  \n15:42\u00a0<+sburjan>\u00a0ok, I will pastebin the diff  \n15:42\u00a0<+sburjan>\u00a02 secs  \n15:43\u00a0<@sdumitriu>\u00a0Denis: If it's usable yes; otherwise, if you could point some difficulties you encountered...  \n15:43\u00a0<+sburjan>\u00a0http://pastebin.com/JmnLApvJ  \n15:43\u00a0<+sburjan>\u00a0here is the diff output  \n15:44\u00a0<+sburjan>\u00a0and yes, the page has a table, I know FOP doesn't not support tables, I know.. but IMO still odd why crashes on Chrome export  \n15:45\u00a0<@cjdelisle>\u00a0interesting since there doesn't seem to be any functional difference, just id numbers  \n15:46\u00a0<+sburjan>\u00a0does Filename make a diference ?  \n15:46\u00a0<+sburjan>\u00a02 chars in the filename (FF).. could that count 9 bytes ?  \n15:48\u00a0<@cjdelisle>\u00a0nope and nope  \n15:48\u00a0<+sburjan>\u00a0I also get this in console when exporting.. NO matter on which browser  \n15:48\u00a0<+sburjan>\u00a02011-06-06 16:31:55,524 [https://192.168.2.50:8443/xwiki/bin/export/Main/RTFTest?format=rtf] ERROR datatypes.LengthBase \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- getBaseLength called without context  \n15:48\u00a0<+sburjan>\u00a02011-06-06 16:31:55,525 [https://192.168.2.50:8443/xwiki/bin/export/Main/RTFTest?format=rtf] ERROR datatypes.LengthBase \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- getBaseLength called without context  \n15:48\u00a0<+sburjan>\u00a0but I guess this is irrelevant  \n15:50\u00a0<+sburjan>\u00a0ok. should I create an issue for this ? or TRF is no longer maintained and it won't be fixed  \n15:52\u00a0<@sdumitriu>\u00a0Hard to fix  \n15:52\u00a0<@sdumitriu>\u00a0If it's in FOP, then we can't really do much about it  \n15:53\u00a0<@sdumitriu>\u00a0Other than patch FOP, which isn't worth for RTF  \n15:53\u00a0<mpaun>\u00a0has joined #xwiki  \n15:53\u00a0<flavius\\_>\u00a0has joined #xwiki  \n15:53\u00a0<flavius\\_>\u00a0hi guys, is the a way to enable captcha on login action?  \n15:54\u00a0<+sburjan>\u00a0ok, so I will skin the FOP RTF issues I'm gonna start OO and test it with OO  \n15:55\u00a0<jvelociter\\_>\u00a0has joined #xwiki  \n15:57\u00a0<@cjdelisle>\u00a0flavius\\_: Technically the answer is no. There are ways to make it appear that it is enabled but that is paper tiger security.  \n15:57\u00a0<jvelociter>\u00a0has quit  \n15:57\u00a0<jvelociter\\_>\u00a0is now known as <jvelociter>  \n15:57\u00a0<@cjdelisle>\u00a0Ofc it could be done by modifying the login action but tthat's recompiling fun and so on.  \n15:59\u00a0<flavius\\_>\u00a0cjdelisle: thanks, i thought so too  \n16:00\u00a0<abusenius>\u00a0has joined #xwiki  \n16:08\u00a0<abusenius>\u00a0has quit  \n16:08\u00a0<abusenius>\u00a0has joined #xwiki  \n16:13\u00a0<@sdumitriu>\u00a0cjdelisle: Why are you releasing from the stable branch, and not from a special release branch?  \n16:14\u00a0<@cjdelisle>\u00a0I guess because it's how it has been done before me.  \n16:14\u00a0<@cjdelisle>\u00a0I didn't think that much about it, just that there was already a branch so I didn't need to make one.  \n16:15\u00a0<@sdumitriu>\u00a0WDYM? you did use release branches before  \n16:15\u00a0<@cjdelisle>\u00a0Yes but then it was because the alternative would be locking the trunk during the release and there was a good chance someone would want to commit against the trunk.  \n16:16\u00a0<@cjdelisle>\u00a0It's really no difference to branch or not so if you have one compelling reason why I should then I will make note in my release scrapbook.  \n16:17\u00a0<@sdumitriu>\u00a01. Leave the stable branch free for commits, same as with the master  \n16:17\u00a0<@sdumitriu>\u00a02. Not pollute the branch with release commits  \n16:19\u00a0<@cjdelisle>\u00a0ok I'm sold  \n16:19\u00a0<@sdumitriu>\u00a0Ah, sorry for sending mails with the wrong name, I was testing some encoding issues and forgot to change it back  \n16:21\u00a0<@cjdelisle>\u00a0git reset --hard HEAD && git co master && git reset --hard HEAD && git clean -dxf && git pull && (git co -b $BRANCH --track origin/$BRANCH || git co $BRANCH) git co -b $VERSION && git push origin $VERSION  \n16:21\u00a0<@cjdelisle>\u00a0that should do it  \n16:26\u00a0<abusenius>\u00a0has quit  \n16:27\u00a0<abusenius>\u00a0has joined #xwiki  \n16:32\u00a0<vmassol>\u00a0guys I need some help with livetable, maybe jvelociter or sdumitriu  \n16:32\u00a0<vmassol>\u00a0more specifically the livetable used on the page rights  \n16:32\u00a0<vmassol>\u00a0for some reason it seems it doesn't send the \"ready\" event  \n16:33\u00a0<vmassol>\u00a0could it be because it's a special LT and overrides stuff?  \n16:33\u00a0<+jvelociter>\u00a0vmassol: displayed in a lightbox ?  \n16:34\u00a0<vmassol>\u00a0jvelociter: no, no lightbo  \n16:34\u00a0<+jvelociter>\u00a0k  \n16:34\u00a0<vmassol>\u00a0I'm talking about the edit rights for a page  \n16:34\u00a0<Chami1>\u00a0has joined #xwiki  \n16:34\u00a0<vmassol>\u00a0I'm doign a wait for livetable to be ready in a test  \n16:34\u00a0<vmassol>\u00a0but  \n16:34\u00a0<vmassol>\u00a0I never get the inserted element from  \n16:34\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0executeJavascript(\"document.observe('xwiki:livetable:\" + this.livetableId + \":displayComplete', function() {\"  \n16:34\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+ \"document.body.insert(new Element('div', {'id' : 'uitest-livetable-status' }).update('complete'));});\");  \n16:35\u00a0<vmassol>\u00a0which seems to indicate the event is never sent  \n16:35\u00a0<@sdumitriu>\u00a0It does use a custom function for building the UI  \n16:37\u00a0<vmassol>\u00a0sdumitriu: but displayRows from livetable.js should be called right?  \n16:37\u00a0<vmassol>\u00a0(it does \u00a0\u00a0\u00a0\u00a0document.fire(\"xwiki:livetable:\" + this.domNodeName + \":displayComplete\") )  \n16:38\u00a0<@sdumitriu>\u00a0No, why should it?  \n16:39\u00a0<vmassol>\u00a0hmm you mean livetable.js is not used?  \n16:39\u00a0<vmassol>\u00a0chcking rightsUI.vm  \n16:40\u00a0<vmassol>\u00a0(trying at least I'm a newbie here)  \n16:40\u00a0<mflorea>\u00a0has quit  \n16:40\u00a0<mflorea>\u00a0has joined #xwiki  \n16:41\u00a0<vmassol>\u00a0hmm I see \u00a0\u00a0\u00a0\u00a0var ta = new XWiki.widgets.LiveTable(\"$url\", \"usersandgroupstable\", callback, {\"filtersNode\": $('usersandgroupstable')});  \n16:41\u00a0<@sdumitriu>\u00a0cjdelisle: https://github.com/xwiki/xwiki-enterprise/commit/21452932361d283af9e07937e74b51ef6e861edd#commitcomment-416518  \n16:42\u00a0<vmassol>\u00a0should'nt that automatically call livetable.js#displayRows automatically to display the rows? (sdumitriu)  \n16:42\u00a0<@sdumitriu>\u00a0Don't know  \n16:42\u00a0<vmassol>\u00a0ah maybe not  \n16:42\u00a0<@sdumitriu>\u00a0I don't remember what function replaces the callback  \n16:42\u00a0<vmassol>\u00a0the callback  \n16:42\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0var callback = function(row, i, table, idx) { return displayUsersAndGroups(row, i, table, idx, \"$!{services.csrf.getToken()}\") };  \n16:43\u00a0<vmassol>\u00a0so callback replaces displayRows?  \n16:43\u00a0<@cjdelisle>\u00a0sdumitriu: thanks, I must have broken something in my copy/paste script :(  \n16:43\u00a0<@sdumitriu>\u00a0cjdelisle: You have to redo the enterprise release  \n16:43\u00a0<@sdumitriu>\u00a0Checking platform as well  \n16:44\u00a0<vmassol>\u00a0no seems the callback is called by displayRows  \n16:44\u00a0<vmassol>\u00a0it's not replacing it  \n16:44\u00a0<@sdumitriu>\u00a0Hm...  \n16:44\u00a0<@sdumitriu>\u00a0cjdelisle: I'm not sure actually the whole commit is good  \n16:45\u00a0<@cjdelisle>\u00a0I think I know what happened. maven was 'smart' and it said \"you don't want 3.1-rc-1, you really want 3.1-RC1 because that's the next version\"  \n16:46\u00a0<vmassol>\u00a0jvelociter: is there a way for me to check the events sent by JS with chrome dev tool ?  \n16:46\u00a0<+jvelociter>\u00a0vmassol: not that I know of  \n16:47\u00a0<+jvelociter>\u00a0(nor chrome console, nor FB, ..)  \n16:48\u00a0<+jvelociter>\u00a0(you could patch prototype.js for that :) )  \n16:49\u00a0<abusenius>\u00a0has quit  \n16:49\u00a0<abusenius>\u00a0has joined #xwiki  \n16:50\u00a0<@sdumitriu>\u00a0cjdelisle: Now the poms are full of hardcoded -rc-1  \n16:50\u00a0<@cjdelisle>\u00a0are they?  \n16:50\u00a0<@sdumitriu>\u00a0Yep  \n16:50\u00a0<@sdumitriu>\u00a0All the dependency changes done in https://github.com/xwiki/xwiki-enterprise/commit/21452932361d283af9e07937e74b51ef6e861edd  \n16:51\u00a0<@cjdelisle>\u00a0ahh yea, it's very much setup to release off of a release branch as you can see  \n16:51\u00a0<@cjdelisle>\u00a0so much for automation  \n16:51\u00a0<@sdumitriu>\u00a0Yes, which you didn't create first :)  \n16:53\u00a0<@sdumitriu>\u00a0This also doesn't look right to me: https://github.com/xwiki/xwiki-manager/commit/06f172ecf21cb72eb55a0c7fb27ad9ce4bf16629#L6L184  \n16:53\u00a0<@sdumitriu>\u00a0So commits like \"[release] changed version numbers to 3.1-rc-1\" \u00a0are baaad  \n16:55\u00a0<@sdumitriu>\u00a0You should only change the root pom, and in it:  \n16:55\u00a0<@sdumitriu>\u00a0- the parent version  \n16:55\u00a0<@sdumitriu>\u00a0- the properties defining dependency projects versions, like <product.enterprise.version>3.1-rc-1</product.enterprise.version>  \n16:55\u00a0<@sdumitriu>\u00a0All the others should be left in place, since they will be updated by the maven-release-plugin, if needed  \n16:58\u00a0<+tmortagne>\u00a0yep the only think a RM is supposed to touch is the root pom and nothing else  \n16:59\u00a0<@cjdelisle>\u00a0I tried that and it doesn't work  \n16:59\u00a0<@sdumitriu>\u00a0Why not?  \n16:59\u00a0<abusenius>\u00a0has quit  \n16:59\u00a0<@sdumitriu>\u00a0It always works for me  \n16:59\u00a0<@cjdelisle>\u00a0You set it to ${project.version} and maven uses the old version instead of the new one.  \n16:59\u00a0<vmassol>\u00a0ok I've confirmed that the event is sent\u2026 continuing my debugging  \n16:59\u00a0<abusenius>\u00a0has joined #xwiki  \n17:00\u00a0<@sdumitriu>\u00a0cjdelisle: No, you set it to the released version  \n17:00\u00a0<@sdumitriu>\u00a0But only in there  \n17:00\u00a0<@sdumitriu>\u00a0The commit is correct for the top pom, but you shouldn't touch the other files  \n17:04\u00a0<@cjdelisle>\u00a0so you're saying I should not modify ${project.version} in any of the pom files?  \n17:10\u00a0<@sdumitriu>\u00a0Only in the top one  \n17:10\u00a0<@cjdelisle>\u00a0only the top one meaning only <version></version>?  \n17:12\u00a0<abusenius>\u00a0has quit  \n17:13\u00a0<@cjdelisle>\u00a0That's what I thought too but maven doesn't like that idea.  \n17:13\u00a0<@sdumitriu>\u00a0No, only the top pom  \n17:13\u00a0<@sdumitriu>\u00a0And in it the parent and the related project properties  \n17:14\u00a0<evalica>\u00a0has quit  \n17:19\u00a0<sburjan>\u00a0has quit  \n17:20\u00a0<@cjdelisle>\u00a0I don't know what to tell you, I promise I tried that at m1 and it didn't work. I'm probably just doing it wrong.  \n17:20\u00a0<Enygma`>\u00a0has quit  \n17:31\u00a0<vmassol>\u00a0hmmm  \n17:32\u00a0<vmassol>\u00a0I wonder what can go wrong. I've confirmed this is called:  \n17:32\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0executeJavascript(\"document.observe('xwiki:livetable:\" + this.livetableId + \":displayComplete', function() {\"  \n17:32\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+ \"alert('hello'); document.body.insert(new Element('div', {'id' : 'uitest-livetable-status' }).update('complete'));});\");  \n17:32\u00a0<vmassol>\u00a0I've also confirmed that the LT on the rights page does send the event  \n17:32\u00a0<vmassol>\u00a0but I don't get the alert...  \n17:32\u00a0<abusenius>\u00a0has joined #xwiki  \n17:33\u00a0<mflorea>\u00a0has quit  \n17:35\u00a0<vmassol>\u00a0hmmm maybe the event is sent before the observation is set!  \n17:35\u00a0<vmassol>\u00a0checking see  \n17:35\u00a0<vmassol>\u00a0s/see/this/  \n17:37\u00a0<@cjdelisle>\u00a0mvn versions:update-parent -DgenerateBackupPoms=false -DparentVersion=$VERSION  \n17:37\u00a0<@cjdelisle>\u00a0that was the line that broke the release  \n17:39\u00a0<@cjdelisle>\u00a0the versions plugin tries doesn't always honer the version that you tell it to update to. I don't quite understand it but I remember it happening when I was doing the m1 release  \n17:39\u00a0<+tmortagne>\u00a0that's weird it always used to work, look like a recent bug then  \n17:39\u00a0<+tmortagne>\u00a0since we upgraded lots of maven plugin if i remember well  \n17:40\u00a0<@sdumitriu>\u00a0Hm, I never used that plugin  \n17:40\u00a0<@sdumitriu>\u00a0Do you call it manually?  \n17:40\u00a0<@cjdelisle>\u00a0You may have never seen it because it only showed up because I started off releasing a garbage version of commons.  \n17:40\u00a0<@cjdelisle>\u00a0yes, I paste that line to update the parent versions  \n17:41\u00a0<@cjdelisle>\u00a0http://dev.xwiki.org/xwiki/bin/view/Community/ReleaseProcess#HCommandstoperformarelease  \n17:41\u00a0<@cjdelisle>\u00a0that's how I have been releasing  \n17:41\u00a0<@cjdelisle>\u00a0it promises to be very fast but it is still pretty new and fragile as you have seen from my butchering of this release.  \n17:42\u00a0<+tmortagne>\u00a0sdumitriu: I did not mean the plugin directly but that's the plugin used by the release AFAIK  \n17:42\u00a0<@sdumitriu>\u00a0Maybe, but then it uses different arguments  \n17:42\u00a0<+tmortagne>\u00a0but anyway this plugin should never been used directly for releasing  \n17:42\u00a0<@sdumitriu>\u00a0cjdelisle: Try with -N  \n17:43\u00a0<@sdumitriu>\u00a0So that it doesn't descend into submodules  \n17:43\u00a0<@cjdelisle>\u00a0it doesn't decend into submodules anyway I don't think.  \n17:43\u00a0<+tmortagne>\u00a0ho did not undertood you wanted to use it only for parent  \n17:45\u00a0<@sdumitriu>\u00a0cjdelisle: It does descend into submodules  \n17:45\u00a0<flavius\\_>\u00a0has quit  \n17:45\u00a0<+tmortagne>\u00a0yes according to the documentation  \n17:47\u00a0<@sdumitriu>\u00a0But I think the sed line is the one that broke things  \n17:47\u00a0<@sdumitriu>\u00a0Don't \"find\", just \"cat pom.xml\"  \n17:47\u00a0<@cjdelisle>\u00a0http://www.pastebay.com/125298  \n17:48\u00a0<@sdumitriu>\u00a0Could still be fragile, no idea at the moment  \n17:49\u00a0<@cjdelisle>\u00a0as you can see from the paste it does not decend into submodules nor does it honer the specified version  \n17:51\u00a0<@sdumitriu>\u00a0It does descend, but it doesn't update them:  \n17:51\u00a0<@sdumitriu>\u00a0[INFO] Reactor Build Order:  \n17:51\u00a0<@sdumitriu>\u00a0[INFO]  \n17:51\u00a0<@sdumitriu>\u00a0[INFO] XWiki Rendering - Parent POM  \n17:51\u00a0<@sdumitriu>\u00a0[INFO] XWiki Rendering - Api  \n17:51\u00a0<@sdumitriu>\u00a0[INFO] XWiki Rendering - Syntaxes - Parent POM  \n17:51\u00a0<@sdumitriu>\u00a0[INFO] XWiki Rendering - Bridge - Doxia  \n17:51\u00a0<@sdumitriu>\u00a0...  \n17:51\u00a0<@sdumitriu>\u00a0\"Project's parent is part of the reactor\"  \n17:52\u00a0<@cjdelisle>\u00a0hmm -N speeds it up but then it gets the wrong answer faster.  \n17:53\u00a0<@cjdelisle>\u00a0oh well, using vi for now until I can find a solution that does what you tell it to.  \n17:53\u00a0<@cjdelisle>\u00a0which, unfortunately, will probably end up being sed.  \n17:54\u00a0<@cjdelisle>\u00a0now is there anything else that I need to update other than the parent version?  \n17:54\u00a0<@cjdelisle>\u00a0I'm asking because you claim the find-sed command is not necessary.  \n17:54\u00a0<@sdumitriu>\u00a0Yes, the dependency properties  \n17:55\u00a0<@sdumitriu>\u00a0\u00a0\u00a0<properties>  \n17:55\u00a0<@sdumitriu>\u00a0\u00a0\u00a0\u00a0\u00a0<commons.version>${project.version}</commons.version>  \n17:55\u00a0<@sdumitriu>\u00a0\u00a0\u00a0\u00a0\u00a0<rendering.version>${project.version}</rendering.version>  \n17:55\u00a0<@sdumitriu>\u00a0\u00a0\u00a0\u00a0\u00a0<platform.version>${project.version}</platform.version>  \n17:55\u00a0<@cjdelisle>\u00a0those can't be project.version?  \n17:58\u00a0<+tmortagne>\u00a0no, because maven release plugin will fail since it SNAPSHOT version when you start release-prepare  \n17:58\u00a0<+tmortagne>\u00a0sorry read project.version  \n17:58\u00a0<+tmortagne>\u00a0so it's still no but for another reason :)  \n17:58\u00a0<+tmortagne>\u00a0maven resolve property when used  \n17:59\u00a0<+tmortagne>\u00a0so ${commons.version} would always the current pom parent  \n17:59\u00a0<+tmortagne>\u00a0and not root pom parent  \n17:59\u00a0<@cjdelisle>\u00a0ok so the root pom file cannot have ${project.version} but any submodule pom file can, correct?  \n18:00\u00a0<@cjdelisle>\u00a0ok so I can convert that find-sed to a ls-sed  \n18:00\u00a0<+tmortagne>\u00a0cjdelisle: you can use ${project.version} when it's true  \n18:01\u00a0<+tmortagne>\u00a0and it's not true if that's the version of commons used in platform  \n18:01\u00a0<+tmortagne>\u00a0so you should put explicit version in properties  \n18:02\u00a0<+tmortagne>\u00a0said another way what we have in SNAPSHOT is wrong but it happen to work but we should have proper pom in releases  \n18:03\u00a0<@cjdelisle>\u00a0changing all instances of ${project.version} in only the root pom file has allowed release.prepare to run so it seems to fix the problem I was having.  \n18:07\u00a0<@sdumitriu>\u00a0Heh, Jenkins caught the RC1 bad version: http://ci.xwiki.org/job/xwiki-manager-3.1/26/console  \n18:10\u00a0<Chami1>\u00a0has left #xwiki  \n18:11\u00a0<@cjdelisle>\u00a0oh this is aggrivating, I create a new branch then somehow end up releasing from the stable beanch again  \n18:14\u00a0<@sdumitriu>\u00a0And I think you broke the release name as well:  \n18:14\u00a0<@sdumitriu>\u00a0\"[maven-release-plugin] prepare release ] \"  \n18:15\u00a0<@sdumitriu>\u00a0And the next version on the branch is also wrong: <version>3.1-rc-2-SNAPSHOT</version>  \n18:16\u00a0<@cjdelisle>\u00a0And the next version on the branch is also wrong <-- I thought I was putting it into a junk branch so I just hit enter.  \n18:17\u00a0<@sdumitriu>\u00a0You can specify that on the command line as well  \n18:17\u00a0<@sdumitriu>\u00a0-DdevelopmentVersion=3.1-SNAPSHOT  \n18:17\u00a0<@cjdelisle>\u00a0\"[maven-release-plugin] prepare release ] \" <-- I have no idea where that came from, looks like I hit it after the enter key and maven accepted it.  \n18:17\u00a0<@cjdelisle>\u00a0This is horrible, I should go back to bed  \n18:22\u00a0<@cjdelisle>\u00a0Yup, I hit the ] key when I hit enter and I guess maven just passed that along to git when it made the release, oddly maven seems to have used the right name itself so all it seems to have done was given me a ridiculous looking tag on the build engine git repo.  \n18:28\u00a0<@cjdelisle>\u00a0I think I should start over again, I hate working on something when it starts to become a mess  \n18:37\u00a0<+sburjan`>\u00a0vmassol: one of the issues I found on oracle was actually another issue.. so we have 2 more remainig. From the 2 remaining issues, one of them is surely an oracle bug which I think I'll report tomorrow. And the last is about indexing which I don't know if it's am issue or it's just and indexing issue.  \n18:38\u00a0<vmassol>\u00a0sburjan`: ok  \n18:40\u00a0<+sburjan`>\u00a0vmassol: and in order to get things moving, I'll report the indexing issue.. and if it's not an actual bug it can be closed. No harm IMO  \n18:40\u00a0<vmassol>\u00a0ok  \n18:40\u00a0<+sburjan`>\u00a0ok  \n18:55\u00a0<+tmortagne>\u00a0vmassol: did you see my last proposal about class properties references ?  \n18:55\u00a0<vmassol>\u00a0tmortagne: I saw the mail but haven't read it yet  \n18:57\u00a0<+tmortagne>\u00a0ok  \n18:57\u00a0<vmassol>\u00a0is it urgent?  \n18:59\u00a0<+tmortagne>\u00a0it's blocking a big chain of modifications but I'm supposed to work on something else anyway the following days  \n18:59\u00a0<arkub>\u00a0has quit  \n19:00\u00a0<vmassol>\u00a0tmortagne: I have to go soon, is it ok if I answer tomorrow morning?  \n19:03\u00a0<+tmortagne>\u00a0vmassol: sure, anyway even if you answer right now I would I could not work in it before 1 or two days  \n19:05\u00a0<vmassol>\u00a0k  \n19:17\u00a0<mpaun>\u00a0has quit  \n19:17\u00a0<tmortagne>\u00a0has quit  \n19:23\u00a0<pulasthi>\u00a0has joined #xwiki  \n19:28\u00a0<pulasthi>\u00a0cjdelisle : hi  \n19:30\u00a0<pulasthi1>\u00a0has joined #xwiki  \n19:32\u00a0<@cjdelisle>\u00a0howdy  \n19:32\u00a0<@cjdelisle>\u00a0you'll never guess what I'm doing today  \n19:32\u00a0<pulasthi1>\u00a0release  \n19:32\u00a0<pulasthi1>\u00a0:)  \n19:32\u00a0<@cjdelisle>\u00a0hehe  \n19:33\u00a0<pulasthi1>\u00a0cjdelisle: i knw how it is its kind of the same story at WSO2 these days  \n19:33\u00a0<pulasthi1>\u00a0cjdelisle : anyway im looked into the cassandra-jdo a bit  \n19:33\u00a0<pulasthi>\u00a0has quit  \n19:33\u00a0<@cjdelisle>\u00a0anything interesting?  \n19:33\u00a0<@cjdelisle>\u00a0^find  \n19:33\u00a0<pulasthi1>\u00a0its kind of a maze  \n19:34\u00a0<pulasthi1>\u00a0:)  \n19:34\u00a0<@cjdelisle>\u00a0yea  \n19:34\u00a0<@cjdelisle>\u00a0lots of reflection  \n19:34\u00a0<+sburjan`>\u00a0http://enterprise.xwiki.org/xwiki/bin/view/Main/ -<< we have a broken link on the Quick Links tab  \n19:34\u00a0<pulasthi1>\u00a0it took me quit some time to find where it atchually writes to cassendrs  \n19:35\u00a0<@cjdelisle>\u00a0ahh over in pelops  \n19:35\u00a0<pulasthi1>\u00a0yeah  \n19:36\u00a0<+sburjan`>\u00a0vmassol: I'm also not being able to find the release calendar from xwiki.org  \n19:36\u00a0<@cjdelisle>\u00a0pelops is supposed t make cassandra easier to run from java so we can probably use that as a black box api.  \n19:36\u00a0<pulasthi1>\u00a0anyway i hoping to add a fix to the nonindex thing in hopefull i 1week  \n19:36\u00a0<@cjdelisle>\u00a0nice  \n19:37\u00a0<pulasthi1>\u00a0ill try my best to do it before next monday  \n19:37\u00a0<pulasthi1>\u00a0btw should i post a mail to devs list abt what im doing  \n19:37\u00a0<pulasthi1>\u00a0:)  \n19:38\u00a0<@cjdelisle>\u00a0did you happen to see the spot where it says: \u00a0if (the query contains an orderby clause) { send query and results to DN for postprocessing }  \n19:38\u00a0<@cjdelisle>\u00a0?  \n19:38\u00a0<pulasthi1>\u00a0no  \n19:38\u00a0<pulasthi1>\u00a0i think i missed it  \n19:38\u00a0<pulasthi1>\u00a0:/  \n19:38\u00a0<@cjdelisle>\u00a0well, easy to do...  \n19:39\u00a0<pulasthi1>\u00a0:)  \n19:40\u00a0<pulasthi1>\u00a0anyway just wanted to tell u where i am  \n19:41\u00a0<@cjdelisle>\u00a0that line is interesting since what you basicly want to do is detect that the query cannot be handled by cassandra and return everything and then enter that if statement to filter out the returned data  \n19:41\u00a0<@sdumitriu>\u00a0sburjan`: Cache issue, Main.Features is back now  \n19:42\u00a0<pulasthi1>\u00a0hmm i was also planing on smthing like that  \n19:42\u00a0<@cjdelisle>\u00a0yes it'a already in the code (because it needs that function in order to sort the results)  \n19:43\u00a0<pulasthi1>\u00a0but it seems a bit ineffective since you will be bringing alot of unwanted data  \n19:43\u00a0<pulasthi1>\u00a0are u sure theres no other way  \n19:43\u00a0<@cjdelisle>\u00a0indeed inefficient  \n19:43\u00a0<pulasthi1>\u00a0i was planning to give a try on smthing better  \n19:44\u00a0<@cjdelisle>\u00a0s/u/you  \n19:44\u00a0<@cjdelisle>\u00a0s/smthing/something/  \n19:44\u00a0<pulasthi1>\u00a0oops ahh still happens some times  \n19:44\u00a0<pulasthi1>\u00a0:)  \n19:44\u00a0<@cjdelisle>\u00a0It's inneficient but it should not happen often.  \n19:45\u00a0<@sdumitriu>\u00a0cjdelisle: Still releasing?  \n19:45\u00a0<@cjdelisle>\u00a0yea  \n19:45\u00a0<pulasthi1>\u00a0hmm we have to design the cassandra data schema with the most used queries in mind right  \n19:46\u00a0<@cjdelisle>\u00a0hopefully for the last time  \n19:46\u00a0<@cjdelisle>\u00a0yes we can  \n19:46\u00a0<@cjdelisle>\u00a0we can put indexes on data which is queried often.  \n19:47\u00a0<@cjdelisle>\u00a0\\*fields which are queried against often  \n19:47\u00a0<pulasthi1>\u00a0yeah  \n19:47\u00a0<@cjdelisle>\u00a0but people will always want to do something weird every once in a while and rather than index everything, IMO the thing to do is just provide something that will perform horribly  \n19:48\u00a0<pulasthi1>\u00a0hmm yeah it will preform horribly considering if only nonindexed attributes are used  \n19:49\u00a0<pulasthi1>\u00a0when filtering  \n19:51\u00a0<pulasthi1>\u00a0k then ill get back to work lets hope this will be the last release :)  \n19:51\u00a0<@cjdelisle>\u00a0Sure but if for example the query is just for testing, the user really wants an answer but doesn['t mind waiting a few secomds  \n19:51\u00a0<@cjdelisle>\u00a0\\*seconds  \n19:52\u00a0<pulasthi1>\u00a0hmm  \n19:53\u00a0<pulasthi1>\u00a0ill let you know about the progress  \n19:53\u00a0<pulasthi1>\u00a0about the mail question whats your opinion i was wondering since this part is not actually xwiki should i post to the devs list  \n19:53\u00a0<pulasthi1>\u00a0:)  \n19:54\u00a0<pulasthi>\u00a0has joined #xwiki  \n19:57\u00a0<@cjdelisle>\u00a0It isn't important that you do, if you feel like it then it's fine IMO.  \n19:58\u00a0<pulasthi1>\u00a0has quit  \n19:58\u00a0<pulasthi>\u00a0cjdelisle: k thanks :)  \n20:00\u00a0<abusenius>\u00a0has quit  \n20:00\u00a0<@cjdelisle>\u00a0The problem with TCP jokes is that people keep retelling them slower until you get them.  \n20:09\u00a0<pulasthi>\u00a0has quit  \n20:42\u00a0<@sdumitriu>\u00a0sburjan`: Busy tomorrow?  \n20:42\u00a0<@sdumitriu>\u00a0I'd like you to try a 3.2 snapshot on Oracle, to see if it works  \n20:54\u00a0<@sdumitriu>\u00a0FYI, moving https://github.com/xwiki/xwiki-platform/commit/f76495b3641111bf5a85611041c36ce2d98736c1 to github/xwiki-contrib  \n22:18\u00a0<jvelociter>\u00a0has quit  \n22:19\u00a0<jvelociter>\u00a0has joined #xwiki  \n23:11\u00a0<jvelociter\\_>\u00a0has joined #xwiki  \n23:12\u00a0<rrodriguez>\u00a0has joined #xwiki  \n23:15\u00a0<jvelociter>\u00a0has quit  \n23:16\u00a0<jvelociter\\_>\u00a0has quit  \n23:21\u00a0<abusenius>\u00a0has joined #xwiki  \n23:28\u00a0<rrodriguez>\u00a0has quit  \n23:28\u00a0<vmassol>\u00a0has quit  \n\n"}