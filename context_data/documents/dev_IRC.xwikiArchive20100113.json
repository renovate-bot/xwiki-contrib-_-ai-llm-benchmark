{"id": "dev:IRC.xwikiArchive20100113", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100113", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nxwiki-bridge - (04:10): \\* sdumitriu has set the subject to: XWiki Chat - http://www.xwiki.org/  \nkibahop joined #xwiki at 07:56  \nkibaho1 joined #xwiki at 08:05  \nEnygma` joined #xwiki at 09:18  \nlucaa joined #xwiki at 09:33  \nlucaa left #xwiki at 09:33  \nxwiki-bridge - (09:34): [Vincent Massol] good morning  \nxwiki-bridge - (09:34): [lucaa] good morning Vincent  \nxwiki-bridge - (09:34): [Vincent Massol] evalica: could I ask you to look at something?  \nxwiki-bridge - (09:34): [evalica] Vincent Massol: k  \nxwiki-bridge - (09:35): [Vincent Massol] on http://localhost:8080/xwiki/bin/view/Main/AllDocs?view=index there's a horizontal scrollbar that appears and that should not be there  \nxwiki-bridge - (09:35): [evalica] k  \nxwiki-bridge - (09:39): [Vincent Massol] committed some model reference changes  \nxwiki-bridge - (09:40): [Vincent Massol] btw the build is broken by jerome's changes of yesterday  \nxwiki-bridge - (09:40): [Vincent Massol] one test is failing  \nxwiki-bridge - (10:01): [Vincent Massol] does anyone know why we only store the wiki in the document's id if it's different from the current wiki?  \nxwiki-bridge - (10:01): [Vincent Massol] my guess is that it's wrong but we keep it for backward compat  \nxwiki-bridge - (10:01): [Vincent Massol] is that so?  \nxwiki-bridge - (10:02): [Vincent Massol] or maybe for migrations too  \nxwiki-bridge - (10:02): [Vincent Massol] forget what I said. I was wrong. We never store the wiki in the document's id  \nxwiki-bridge - (10:02): [Vincent Massol] ah no  \nxwiki-bridge - (10:03): [Vincent Massol] ok checking more  \nxwiki-bridge - (10:03): [Vincent Massol] :)  \nxwiki-bridge - (10:03): [Vincent Massol] yes it's never used  \nLukemon\\_ left at 10:25 (Read error: 60 (Operation timed out)  \nLukemon\\_ joined #xwiki at 10:25  \nxwiki-bridge - (10:28): [mflorea] Vincent Massol: re macro descriptor internationalization, since the translation is made on a ajax request I don't have the language pre-filled in the context. I see there are three methods to fill language: XWiki#getInterfaceLanguagePreference() , XWiki#getLanguagePreference() and XWiki#getDocLanguagePreferenceNew() Do you know which one is the best?  \nxwiki-bridge - (10:28): [Vincent Massol] hi marius.... hmmmm  \nxwiki-bridge - (10:29): [Vincent Massol] no idea, would need to read the code  \nxwiki-bridge - (10:29): [Vincent Massol] checking quickly to see if I can understand it  \nkibaho1 left #xwiki at 10:30  \nxwiki-bridge - (10:30): [mflorea] ok, thanks, I think Sergiu knows more  \nxwiki-bridge - (10:31): [Vincent Massol] yes probably  \nxwiki-bridge - (10:31): [Vincent Massol] I don't see much diff between the first 2 methods you mentioned  \nxwiki-bridge - (10:31): [mflorea] yes, me neither  \nxwiki-bridge - (10:33): [mflorea] I'll ping Sergiu when he logs in  \nxwiki-bridge - (10:33): [Vincent Massol] this code looks wrong:  \nxwiki-bridge - (10:33): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0public String getParentURL(XWikiContext context) throws XWikiException  \nxwiki-bridge - (10:33): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0{  \nxwiki-bridge - (10:33): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0XWikiDocument doc = new XWikiDocument();  \nxwiki-bridge - (10:33): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc.setFullName(getParent(), context);  \nxwiki-bridge - (10:33): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0URL url =  \nxwiki-bridge - (10:34): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0context.getURLFactory().createURL(doc.getSpace(), doc.getName(), \"view\", null, null, getDatabase(), context);  \nxwiki-bridge - (10:34): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return context.getURLFactory().getURL(url, context);  \nxwiki-bridge - (10:34): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0}  \nxwiki-bridge - (10:34): [Vincent Massol] if the parent is not defined it'll return the default page URL\u2026. I think it was returning XWiki.WebHome before and now Main.Webhome with my change  \nLukemon\\_ left at 10:42 (Read error: 60 (Operation timed out)  \nLukemon\\_ joined #xwiki at 10:43  \nxwiki-bridge - (10:45): [lucaa] Vincent Massol: do you think you can find the thread where we discussed briefly about the syntax for referring properties of objects in pages?  \nxwiki-bridge - (10:46): [Vincent Massol] hmm no I don't recall where we discussed it. It was probably on jabber  \nxwiki-bridge - (10:46): [Vincent Massol] I remember [] for object number  \nxwiki-bridge - (10:46): [lucaa] me too, i thought it was a mail...  \nxwiki-bridge - (10:46): [lucaa] I mean you mentioned it in a mail  \nxwiki-bridge - (10:47): [Vincent Massol] no I don't recall a mail  \nxwiki-bridge - (10:47): [lucaa] it could be jabber  \nxwiki-bridge - (10:50): [Vincent Massol] hmmm I wonder if it's correct to store a class reference in a DocumentReference object  \nkibahop left #xwiki at 10:51  \nKermitTheFragger joined #xwiki at 10:53  \nxwiki-bridge - (11:02): [Vincent Massol] tmortagne: I've commented getId() with what I understood. If you could check if that's your understanding too that would be cool :)  \nxwiki-bridge - (11:03): [Vincent Massol] as you can see I've almost only modified XWikiDocument and I'm not even finished  \nxwiki-bridge - (11:03): [Vincent Massol] there's still a lot to go to modify all places to use references  \nxwiki-bridge - (11:03): [Vincent Massol] and thus to support special chars in doc naes  \nxwiki-bridge - (11:03): [Vincent Massol] names  \nxwiki-bridge - (11:04): [Vincent Massol] tmortagne, jerome: re the hib problem of yesterday  \nxwiki-bridge - (11:04): [Vincent Massol] it was something really stupoid  \nxwiki-bridge - (11:04): [Vincent Massol] I had introduced a setXClass() method  \nxwiki-bridge - (11:04): [Vincent Massol] but I coded it like this:  \nxwiki-bridge - (11:04): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0public void setXClass(BaseClass xwikiClass)  \nxwiki-bridge - (11:04): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0{  \nxwiki-bridge - (11:04): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.xClass = xClass;  \nxwiki-bridge - (11:04): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0}  \nxwiki-bridge - (11:04): [tmortagne] :)  \nxwiki-bridge - (11:05): [Vincent Massol] so the bclass used was wrong  \nxwiki-bridge - (11:05): [Vincent Massol] I still don't fully understand why but maybe it has an id and hibernate was finding it with the id  \nxwiki-bridge - (11:05): [Vincent Massol] the load call has no relationship with the bclass object  \nxwiki-bridge - (11:05): [Vincent Massol] so I assume it was finding it somehow  \nxwiki-bridge - (11:06): [Vincent Massol] with tne name probably  \nxwiki-bridge - (11:06): [Vincent Massol] bclass.getName()  \nxwiki-bridge - (11:06): [Vincent Massol] somehow  \nxwiki-bridge - (11:08): [Vincent Massol] tmortagne: hmmm fun in XwikiDocument.equals, we don't use the database in the comparison  \nxwiki-bridge - (11:08): [tmortagne] nice...  \nxwiki-bridge - (11:09): [Vincent Massol] btw this will fail if getName() is null for ex:  \nxwiki-bridge - (11:09): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (!getName().equals(doc.getName())) {  \nxwiki-bridge - (11:09): [Vincent Massol] ok name is not supposed to be null but the parent can be null:  \nxwiki-bridge - (11:09): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (!getParent().equals(doc.getParent())) {  \nxwiki-bridge - (11:10): [Vincent Massol] ah no it returns \"\" if not set  \nxwiki-bridge - (11:10): [Vincent Massol] (for parent)  \nxwiki-bridge - (11:11): [Vincent Massol] bb in 10mn  \nxwiki-bridge - (11:11): [tmortagne] yes there is plenty of \"\" instead of null for wrong resons  \nCalebJamesDeLisl - (11:29): I'm off to bed, see ya folks later.  \nCalebJamesDeLisl left at 11:30 (  \nxwiki-bridge - (11:35): [tmortagne] Vincent Massol: ok for getId() comment, it's what i understood too  \nxwiki-bridge - (11:35): [Vincent Massol] ok   \nxwiki-bridge - (11:35): [Vincent Massol] thx  \nxwiki-bridge - (11:35): [tmortagne] IMO getId should be used only by hibernate store and nothing else  \nxwiki-bridge - (11:35): [Vincent Massol] right  \nxwiki-bridge - (11:36): [Vincent Massol] there's still the open question of whether language is part of a reference or not....  \nxwiki-bridge - (11:36): [tmortagne] and should be a database increment instead of a hash but that's another story  \nxwiki-bridge - (11:36): [Vincent Massol] yep  \nxwiki-bridge - (11:36): [Vincent Massol] I'm going to disconnect and reconnect in 1 minute (moving to my office)  \nxwiki-bridge - (11:37): [tmortagne] about language, each language has its own document in database but some part of the document are supposed to be shared between different language so it's not easy, we will have to redifine it clearly in the new model  \nxwiki-bridge - (11:40): [tmortagne] Vincent Massol: (11:37:24) tmortagne: about language, each language has its own document in database but some part of the document are supposed to be shared between different language so it's not easy, we will have to redifine it clearly in the new model  \nxwiki-bridge - (11:41): [tmortagne] wouldn't be better to store XWikiDocument#wiki,space,name in a DocumentReference directly ? instead or creating a new DocumentReference each time getDocumentReference is called  \nxwiki-bridge - (11:42): [tmortagne] especially when since you deprecated getSpace(), getName()...  \nxwiki-bridge - (11:42): [Vincent Massol] tmortagne: yes I'd like to do that  \nxwiki-bridge - (11:42): [Vincent Massol] but I don't know how yet  \nxwiki-bridge - (11:44): [tmortagne] by having set\\* and get\\* in DocumentReference ?  \nxwiki-bridge - (11:44): [Vincent Massol] I mean I don't know enough yet about hib mapping but I'm sure it's possible indeed  \nxwiki-bridge - (11:45): [tmortagne] i don't underatsnd what it has to do with hibernate ?  \nxwiki-bridge - (11:45): [Vincent Massol] tmortagne: could you verify the perf too? I having a feeling that it's slower than before now  \nxwiki-bridge - (11:45): [tmortagne] hibernate ise using the getters and setters  \nxwiki-bridge - (11:45): [tmortagne] not the private variables  \nxwiki-bridge - (11:46): [Vincent Massol] well first it's using both  \nxwiki-bridge - (11:46): [Vincent Massol] but I don't know the exact rules  \nxwiki-bridge - (11:46): [Vincent Massol] setter first?  \nxwiki-bridge - (11:46): [tmortagne] for example with web it does not expect to find a web variable  \nxwiki-bridge - (11:46): [tmortagne] so it would work with others too  \nxwiki-bridge - (11:47): [tmortagne] i guess its setter/getter first yes  \nxwiki-bridge - (11:47): [tmortagne] which would make sense  \nxwiki-bridge - (11:47): [Vincent Massol] so we would need to keep get/setSpace/web/name/database  \nxwiki-bridge - (11:47): [tmortagne] yes we would  \nxwiki-bridge - (11:47): [Vincent Massol] (we need to keep them anyway)  \nxwiki-bridge - (11:47): [tmortagne] like we keep geWSeb/setWeb btw  \nxwiki-bridge - (11:47): [lucaa] Vincent, I'm thinking about proposing a syntax for object field references  \nxwiki-bridge - (11:48): [lucaa] now, will a syntax like  \nxwiki-bridge - (11:48): [lucaa] Page^ClassName[objindex]#property  \nxwiki-bridge - (11:48): [lucaa] need special handling when parsing or serializing? because of the brackets which are paired and not a simple separator?  \nxwiki-bridge - (11:48): [Vincent Massol] yes the brackets is not supported yet in the generic algo  \nxwiki-bridge - (11:48): [Vincent Massol] you'd need to add it  \nxwiki-bridge - (11:48): [tmortagne] brackets make difficult to have generic algo  \nxwiki-bridge - (11:48): [Vincent Massol] it's still doable   \nxwiki-bridge - (11:49): [Vincent Massol] you can define for each type  \nxwiki-bridge - (11:49): [Vincent Massol] if it's multivalued or not  \nxwiki-bridge - (11:49): [tmortagne] everything is :)  \nxwiki-bridge - (11:49): [Vincent Massol] personally I think it's not bad to have it since JCR supports it  \nxwiki-bridge - (11:49): [Vincent Massol] in its refs  \nxwiki-bridge - (11:50): [tmortagne] what would be objindex ? not the GUID i guess ?  \nxwiki-bridge - (11:50): [Vincent Massol] actually acna it's not classname  \nxwiki-bridge - (11:50): [Vincent Massol] it's object name  \nxwiki-bridge - (11:50): [tmortagne] I dont like making crapy numbering in object that important  \nxwiki-bridge - (11:51): [Vincent Massol] tmortagne: the only alternative is to name objects  \nxwiki-bridge - (11:51): [Vincent Massol] which isn't perfect iether  \nxwiki-bridge - (11:51): [Vincent Massol] anca: indeed classname and objectnale are the same since there are no object name  \nxwiki-bridge - (11:52): [Vincent Massol] tmortagne: the number is the object # in the document for a given classname  \nxwiki-bridge - (11:52): [Vincent Massol] (starts at 0 for each classname right now)  \nxwiki-bridge - (11:52): [tmortagne] Vincent Massol: only in java, it's not stored in the database  \nxwiki-bridge - (11:52): [tmortagne] when you restard you could have a different number  \nxwiki-bridge - (11:53): [tmortagne] which would make your reference broken  \nxwiki-bridge - (11:53): [Vincent Massol] it's stored  \nxwiki-bridge - (11:53): [Vincent Massol] it's stored  \nxwiki-bridge - (11:53): [Vincent Massol] I checked yesterday  \nxwiki-bridge - (11:53): [Vincent Massol] it's in the xwikiobjects table  \nxwiki-bridge - (11:53): [tmortagne] you sure, you don't mix with the technical id ?  \nxwiki-bridge - (11:53): [Vincent Massol] nope  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0<class name=\"com.xpn.xwiki.objects.BaseObject\" table=\"xwikiobjects\">  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<id name=\"id\" type=\"integer\" unsaved-value=\"undefined\">  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<column name=\"XWO\\_ID\" not-null=\"true\" />  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<generator class=\"assigned\" />  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</id>  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<property name=\"number\" type=\"integer\">  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<column name=\"XWO\\_NUMBER\" not-null=\"false\" />  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</property>  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<property name=\"name\" type=\"string\">  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<column name=\"XWO\\_NAME\" not-null=\"true\" length=\"255\"/>  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</property>  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<property name=\"className\" type=\"string\">  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<column name=\"XWO\\_CLASSNAME\" not-null=\"true\" length=\"255\"/>  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</property>  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<property name=\"guid\" type=\"string\">  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<column name=\"XWO\\_GUID\" not-null=\"false\" length=\"255\"/>  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</property>  \nxwiki-bridge - (11:54): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0</class>  \nxwiki-bridge - (11:54): [tmortagne] ok XWO\\_NUMBER  \nxwiki-bridge - (11:54): [Vincent Massol] yes  \nxwiki-bridge - (11:55): [tmortagne] did not know that  \nxwiki-bridge - (12:08): [tmortagne] hmm  \nxwiki-bridge - (12:08): [Vincent Massol] not sure what name is  \nxwiki-bridge - (12:08): [Vincent Massol] I thought it was the class name  \nxwiki-bridge - (12:08): [Vincent Massol] but there's a class name field too apparently  \nxwiki-bridge - (12:08): [tmortagne] name is the document name in fact  \nxwiki-bridge - (12:08): [Vincent Massol] ah yes  \nxwiki-bridge - (12:08): [tmortagne] some good naming :)  \nxwiki-bridge - (12:08): [Vincent Massol] :)  \nxwiki-bridge - (12:08): [tmortagne] we should change the way objects are stored by classname in the document and have a map<number, object> instead of the list i think  \nxwiki-bridge - (12:08): [tmortagne] to get an object when you have the number  \nxwiki-bridge - (12:08): [tmortagne] that would remove all the issue we have between list index and object number mix  \nxwiki-bridge - (12:08): [jerome.velociter] Hello  \nxwiki-bridge - (12:08): [Vincent Massol] jerome.velociter: one comment on import  \nxwiki-bridge - (12:08): [Vincent Massol] if I don't select any doc to upload and click on import it fails with a big stack trace  \nxwiki-bridge - (12:08): [Vincent Massol] and cancel don't do anything  \nxwiki-bridge - (12:08): [Vincent Massol] actually even worse  \nxwiki-bridge - (12:08): [Vincent Massol] the import fails even if I select a doc to upload :)  \nxwiki-bridge - (12:08): [jerome.velociter] Vincent Massol: I don't understand  \nxwiki-bridge - (12:08): [jerome.velociter] import does not work ?  \nxwiki-bridge - (12:08): [Vincent Massol] no  \nxwiki-bridge - (12:08): [Vincent Massol] it doesn't even upload the file  \nxwiki-bridge - (12:08): [Vincent Massol] it breaks immediatly  \nxwiki-bridge - (12:08): [Vincent Massol] try it you'll see  \nxwiki-bridge - (12:08): [jerome.velociter] I will try  \nxwiki-bridge - (12:08): [Vincent Massol] NPE in UploadAction  \nxwiki-bridge - (12:08): [jerome.velociter] that's strange  \nxwiki-bridge - (12:08): [jerome.velociter] it worked for me the whole time  \nxwiki-bridge - (12:08): [Vincent Massol] I hope we have some functional tests for import, do we?  \nxwiki-bridge - (12:08): [jerome.velociter] no we don't  \nxwiki-bridge - (12:08): [jerome.velociter] they were never commited  \nxwiki-bridge - (12:08): [jerome.velociter] they exist  \nxwiki-bridge - (12:08): [jerome.velociter] but they need to be in a separate suite  \nxwiki-bridge - (12:08): [jerome.velociter] since they require greater priveileges  \nxwiki-bridge - (12:08): [jerome.velociter] they need to be launched with the chrome profile  \nxwiki-bridge - (12:08): [jerome.velociter] instead of firefox  \nxwiki-bridge - (12:08): [jerome.velociter] I wanted to do that for some time but did not took the time to do it yet  \nxwiki-bridge - (12:12): [jerome.velociter] Vincent Massol: you can't even upload ?  \nxwiki-bridge - (12:13): [Vincent Massol] correct  \nxwiki-bridge - (12:13): [jerome.velociter] for me it works fine  \nxwiki-bridge - (12:13): [jerome.velociter] import works fine too  \nxwiki-bridge - (12:13): [Vincent Massol] are you sure you've rebuilt it compltely?  \nxwiki-bridge - (12:13): [Vincent Massol] and without other lcoal changes?  \nxwiki-bridge - (12:13): [jerome.velociter] I downloaded an artifact from hudson, let me try with that  \nxwiki-bridge - (12:14): [Vincent Massol] I'm on chrome, will test on FF  \nxwiki-bridge - (12:15): [jerome.velociter] jerome@eloise:~/sources$ svn status trunks/core/ trunks/web/ enterprise/  \nxwiki-bridge - (12:15): [jerome.velociter] jerome@eloise:~/sources$   \nxwiki-bridge - (12:15): [jerome.velociter] built core/xwiki-core web/standard and enterprise  \nxwiki-bridge - (12:17): [Vincent Massol] ouch I get this too on the admin screen: http://tinycoke.com/\\_6rfxsWMGAO8uI/screen\\_shot\\_2010-01-13\\_at\\_12.16.22\\_pm.png  \nxwiki-bridge - (12:18): [jerome.velociter] ah that's weird  \nxwiki-bridge - (12:18): [Vincent Massol] jerome.velociter: even worse in FF, if I close browse to select the file  \nxwiki-bridge - (12:18): [jerome.velociter] I have somethign different  \nxwiki-bridge - (12:18): [Vincent Massol] then the file is not selected  \nxwiki-bridge - (12:18): [jerome.velociter] all icons are left aligned  \nxwiki-bridge - (12:18): [Vincent Massol] but if click in the field itself, the brwosing dialog opens and then it's selected  \nxwiki-bridge - (12:18): [jerome.velociter] vincent: it's a build from you ?.  \nxwiki-bridge - (12:19): [Vincent Massol] it's from svn trunk  \nxwiki-bridge - (12:19): [Vincent Massol] without no local changes  \nxwiki-bridge - (12:19): [Vincent Massol] ok the upload works in FF  \nxwiki-bridge - (12:19): [Vincent Massol] retrying in chrome  \nxwiki-bridge - (12:20): [Vincent Massol] jerome.velociter: what's strange is that the icon alignment work fine in chrome  \nxwiki-bridge - (12:20): [Vincent Massol] it's only in FF that it doesn't  \nxwiki-bridge - (12:20): [jerome.velociter] I don't understand your file selection issue  \nxwiki-bridge - (12:20): [Vincent Massol] I'm on FF 3.5.6  \nxwiki-bridge - (12:20): [Vincent Massol] hmm works now in chrome too  \nxwiki-bridge - (12:21): [Vincent Massol] jerome: how do you remove a XAR you have uploaded?  \nxwiki-bridge - (12:21): [Vincent Massol] I don't see a ui button for that  \nxwiki-bridge - (12:22): [Vincent Massol] this is what I see: http://tinycoke.com/\\_6rlzU8X6lQyBw/screen\\_shot\\_2010-01-13\\_at\\_12.21.43\\_pm.png  \nxwiki-bridge - (12:22): [jerome.velociter] on chrome ?  \nxwiki-bridge - (12:22): [Vincent Massol] ah it seems hidden  \nxwiki-bridge - (12:22): [jerome.velociter] there might be a display issue for the button on chrome  \nxwiki-bridge - (12:22): [Vincent Massol] ah right it's on chrome only  \nxwiki-bridge - (12:23): [jerome.velociter] ok  \nxwiki-bridge - (12:23): [jerome.velociter] so you confirm you can upload / import on both chrome and FF ?  \nxwiki-bridge - (12:24): [Vincent Massol] yes  \nxwiki-bridge - (12:24): [Vincent Massol] maybe it was a cache issue?  \nxwiki-bridge - (12:25): [jerome.velociter] pfew:)  \nxwiki-bridge - (12:25): [jerome.velociter] you scared me  \nxwiki-bridge - (12:25): [Vincent Massol] (even though I thought I had refreshed my cache on chrome)  \nxwiki-bridge - (12:25): [jerome.velociter] yes strange  \nxwiki-bridge - (12:25): [jerome.velociter] not sure what it could be  \nxwiki-bridge - (12:26): [Vincent Massol] the UI is much nicer than before, especially in term of what to do when an document alreadye xists  \nxwiki-bridge - (12:26): [Vincent Massol] :)  \nxwiki-bridge - (12:27): [Vincent Massol] the left/right separation is a bit strange to me though  \nxwiki-bridge - (12:27): [Vincent Massol] but it's ok for now  \nxwiki-bridge - (12:28): [Vincent Massol] cool we can now import without erasing! yeah :)  \nxwiki-bridge - (12:28): [Vincent Massol] you should close that issue in jira  \nxwiki-bridge - (12:28): [Vincent Massol] can someone check the admin page on latest FF too  \nxwiki-bridge - (12:29): [Vincent Massol] to see if you get: http://tinycoke.com/\\_6rfxsWMGAO8uI/screen\\_shot\\_2010-01-13\\_at\\_12.16.22\\_pm.png  \nxwiki-bridge - (12:29): [Vincent Massol] installing 3.5.7  \nxwiki-bridge - (12:29): [jerome.velociter] I have to go for some time  \nxwiki-bridge - (12:29): [jerome.velociter] be back later  \nxwiki-bridge - (12:29): [Vincent Massol] ok  \nxwiki-bridge - (12:30): [Vincent Massol] still the same with FF 3.5.7  \nxwiki-bridge - (12:32): [Vincent Massol] tmortagne: fyi I got this in the logs: http://pastebin.com/m3a522798  \nxwiki-bridge - (12:33): [Vincent Massol] I guess that's when I tried to upload an empty attachment in the improt but I don't see why lucene should/would fail  \nxwiki-bridge - (12:34): [tmortagne] never seen this, you don't how how to reproduce for sure ?  \nxwiki-bridge - (12:34): [Vincent Massol] let me try again  \nxwiki-bridge - (12:36): [Vincent Massol] yep was able to reprodcue  \nxwiki-bridge - (12:36): [Vincent Massol] you want a jira?  \nxwiki-bridge - (12:37): [tmortagne] yes  \nxwiki-bridge - (12:37): [Vincent Massol] http://jira.xwiki.org/jira/browse/XPLUCENE-49  \nxwiki-bridge - (12:39): [Vincent Massol] I really find XE very sluggish even when ran locally on trunk  \nxwiki-bridge - (12:39): [Vincent Massol] takes 1-2 seconds to go to a profile and 2-3 seconds to go to the blog page on the first time  \nxwiki-bridge - (12:39): [Vincent Massol] (for ex)  \nxwiki-bridge - (12:40): [Vincent Massol] sdumitriu: fyi edit in full screen doesn't work on chrome  \nxwiki-bridge - (12:40): [Vincent Massol] (it doesn't take the full screen)  \nxwiki-bridge - (12:41): [sdumitriu] WYSIWYG?  \nxwiki-bridge - (12:41): [Vincent Massol] yes  \nxwiki-bridge - (12:41): [sdumitriu] Yes, I know  \nxwiki-bridge - (12:41): [sdumitriu] It's reported  \nxwiki-bridge - (12:41): [Vincent Massol] ok  \nxwiki-bridge - (12:41): [sdumitriu] But hard to fix  \nxwiki-bridge - (12:42): [Vincent Massol] I love chrome's ability to resize input fields  \nxwiki-bridge - (12:42): [Vincent Massol] ah we have a {/pre} displayed when editing a panel  \nxwiki-bridge - (12:43): [Vincent Massol] btw there's no panel styling when it's in the main page, for ex: http://localhost:8080/xwiki/bin/view/Panels/QuickLinks  \nxwiki-bridge - (12:43): [Vincent Massol] is that wanted?  \nxwiki-bridge - (12:45): [Vincent Massol] sdumitriu: if I add the following javadoc in XWikiDocument is it correct:  \nxwiki-bridge - (12:45): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0/\\*\\*  \nxwiki-bridge - (12:45): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\\* The reference to the document that is the template for the current document.  \nxwiki-bridge - (12:45): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \nxwiki-bridge - (12:45): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0private String template;  \nxwiki-bridge - (12:45): [Vincent Massol] ?  \nxwiki-bridge - (12:48): [sdumitriu] Well, the template property is not quite functional  \nxwiki-bridge - (12:49): [sdumitriu] But yes, ideally that should be the correct description  \nxwiki-bridge - (12:49): [Vincent Massol] ok I'm replacing String with DocReference for get/setTemplate  \nxwiki-bridge - (12:49): [sdumitriu] Not funtional = the value is not stored in the database, it will be lost in a few minutes  \nxwiki-bridge - (12:49): [Vincent Massol] ah ok  \nxwiki-bridge - (12:51): [Vincent Massol] sdumitriu: what's the idea? To remember what's the template so that if it's changed the change is reflected automatically in the doc?  \nxwiki-bridge - (12:51): [Vincent Massol] ie pointer by reference instead of a copy?  \nxwiki-bridge - (12:51): [Vincent Massol] (for some use cases)  \nxwiki-bridge - (13:04): [sdumitriu] A use case would be to link documents to applications  \nxwiki-bridge - (13:04): [sdumitriu] Useful for the application manager, for example  \nxwiki-bridge - (13:24): [Vincent Massol] ok  \nxwiki-bridge - (13:25): [Vincent Massol] tmortagne: ping. What do we do for the release?  \nplunden joined #xwiki at 13:53  \nxwiki-bridge - (13:56): [tmortagne] Vincent Massol: i'm checking hudson  \nxwiki-bridge - (13:56): [Vincent Massol] ok  \nxwiki-bridge - (14:35): [Vincent Massol] found some bugs in my commit. Fixing  \nxwiki-bridge - (14:53): [Vincent Massol] 2 bugs  \nxwiki-bridge - (14:53): [Vincent Massol] hmm maybe 3  \nxwiki-bridge - (14:54): [Vincent Massol] question  \nxwiki-bridge - (14:54): [Vincent Massol] in setFullName we're doing setContentDirty(true)  \nxwiki-bridge - (14:54): [Vincent Massol] shouldn't it be setMetDataDirty(true)?  \nxwiki-bridge - (14:54): [Vincent Massol] (in setParent it's setMetaDataDirty(true) for ex)  \nxwiki-bridge - (14:55): [Vincent Massol] checking where isContentDirty() used  \nxwiki-bridge - (14:55): [Vincent Massol] apparently only one place:  \nxwiki-bridge - (14:55): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (doc.isContentDirty()) {  \nxwiki-bridge - (14:55): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc.setContentUpdateDate(ndate);  \nxwiki-bridge - (14:55): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0doc.setContentAuthor(doc.getAuthor());  \nxwiki-bridge - (14:55): [Vincent Massol] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}  \nxwiki-bridge - (14:56): [tmortagne] looks more like a isContentModified()  \nxwiki-bridge - (14:57): [tmortagne] btw i have the same admin UI issue you add (http://tinycoke.com/\\_6rfxsWMGAO8uI/screen\\_shot\\_2010-01-13\\_at\\_12.16.22\\_pm.png) with FF 3.7  \nxwiki-bridge - (14:57): [tmortagne] had  \nxwiki-bridge - (14:58): [Vincent Massol] so I'm modifying setFullName and setDocumentRefernce to use setMetaDataDirty(true)  \nxwiki-bridge - (14:58): [Vincent Massol] instead of setContentDirty  \nxwiki-bridge - (15:00): [tmortagne] I also get \"java.lang.IllegalArgumentException: Adding text to an XML document must not be null\" when trying to upload something in import UI (with cleaned browser cache)  \nEnygma` left at 15:00 (\"Leaving.\"  \nxwiki-bridge - (15:02): [tmortagne] smae thing with a fresh opera i never started (so with no cache)  \nxwiki-bridge - (15:03): [tmortagne] http://pastebin.com/m1b847f34  \nxwiki-bridge - (15:03): [tmortagne] seems to crash when parsing a document xml file  \nxwiki-bridge - (15:04): [tmortagne] ha no the other way around  \nxwiki-bridge - (15:04): [tmortagne] anyway upload does not work here with last builded XE  \nxwiki-bridge - (15:05): [tmortagne] http://maven.xwiki.org/snapshots/com/xpn/xwiki/products/xwiki-enterprise-jetty-hsqldb/2.2-SNAPSHOT/xwiki-enterprise-jetty-hsqldb-2.2-20100113.133101-141.zip  \nxwiki-bridge - (15:06): [tmortagne] Vincent Massol: btw it does not seems very slow (not more than usual)  \nxwiki-bridge - (15:06): [Vincent Massol] ok that's good news  \nxwiki-bridge - (15:07): [jerome.velociter] tmortagne: and what about attachment uploads on other pages ?  \nxwiki-bridge - (15:07): [tmortagne] it's maybe obvious on a slower computer  \nxwiki-bridge - (15:07): [tmortagne] jerome.velociter: trying  \nxwiki-bridge - (15:08): [tmortagne] jerome.velociter: same  \nxwiki-bridge - (15:08): [tmortagne] upload is broken for me in general  \nxwiki-bridge - (15:09): [tmortagne] trying to find what is the exact issue  \nxwiki-bridge - (15:09): [jerome.velociter] ok  \nxwiki-bridge - (15:09): [jerome.velociter] strange  \nxwiki-bridge - (15:09): [jerome.velociter] sounds like what Vincent experienced this morning  \nxwiki-bridge - (15:09): [tmortagne] looks like a bug in XWikiDocument#toXML  \nxwiki-bridge - (15:10): [tmortagne] something that should not be nul is  \nxwiki-bridge - (15:10): [tmortagne] and is given to the XML writer  \nxwiki-bridge - (15:11): [Vincent Massol] tmortagne: could it be my latest change?  \nxwiki-bridge - (15:11): [tmortagne] seems to be el.addText(getDocumentArchive(context).getArchive(context));  \nxwiki-bridge - (15:11): [tmortagne] so the archive is null  \nxwiki-bridge - (15:11): [tmortagne] but i don't know why  \nxwiki-bridge - (15:12): [Vincent Massol] I didn't change that one  \nxwiki-bridge - (15:12): [Vincent Massol] but maybe your source code doesn't match what was built  \nxwiki-bridge - (15:13): [tmortagne] it doe snot but it was the only addText around at the line targeted by the stack trace  \nxwiki-bridge - (15:14): [tmortagne] that's the same thing that make Lucene fail, the null archive  \nxwiki-bridge - (15:14): [tmortagne] btw  \nxwiki-bridge - (15:24): [tmortagne] i'm trying in debug mode  \nxwiki-bridge - (15:24): [Vincent Massol] ok I've fixed my pbs I think. I'm rebuilding teh whole thing to retest  \nxwiki-bridge - (15:24): [tmortagne] Vincent Massol: when in debug mode with last sources it's very slow but maybe it's soemthing else  \nxwiki-bridge - (15:24): [Vincent Massol] ah I was running debug mode too  \nxwiki-bridge - (15:24): [Vincent Massol] when I said it was slow  \nxwiki-bridge - (15:25): [Vincent Massol] so maybe that was why  \nxwiki-bridge - (15:25): [tmortagne] maybe but weird  \nxwiki-bridge - (15:25): [Vincent Massol] well debug is always slower for sure  \nxwiki-bridge - (15:25): [Vincent Massol] it needs to save all calls hierarchy  \nxwiki-bridge - (15:25): [tmortagne] sure but it's a lot slower than before  \nxwiki-bridge - (15:25): [Vincent Massol] (I guess)  \nxwiki-bridge - (15:26): [Vincent Massol] don't know for sure why  \nxwiki-bridge - (15:27): [tmortagne] I don't have upload issue when debugging in Eclipse  \nxwiki-bridge - (15:27): [tmortagne] with same browser  \nxwiki-bridge - (15:27): [Vincent Massol] tmortagne: strange, same for me the issue solved itself  \nxwiki-bridge - (15:27): [Vincent Massol] (earlier today)  \nxwiki-bridge - (15:28): [tmortagne] <ell the issue did not solved itslef, it doe snot work in a XE distribution but it works in my Eclipse setup  \nxwiki-bridge - (15:28): [tmortagne] the main difference is that i don't have WYSIWYG js  \nxwiki-bridge - (15:30): [tmortagne] hmm wait i have isue in my Eclipse setup  \nxwiki-bridge - (15:30): [tmortagne] forget resources/ folder  \nxwiki-bridge - (15:30): [tmortagne] btw even without resource/ folder it's not totaly unusable ;)  \nxwiki-bridge - (15:33): [tmortagne] ok so even with the resource folder it's working well in debug mode  \nxwiki-bridge - (15:33): [tmortagne] retesting in the XE distribution  \nxwiki-bridge - (15:35): [tmortagne] not better  \nxwiki-bridge - (15:35): [tmortagne] will wait for a build with your last fixes  \nxwiki-bridge - (15:36): [Vincent Massol] I have several unit tests failing in xwiki-core  \nxwiki-bridge - (15:36): [Vincent Massol] looking at them  \nxwiki-bridge - (15:36): [Vincent Massol] (for my local changes)  \nxwiki-bridge - (15:37): [tmortagne] there is also on hudson it seems  \nplunden left #xwiki at 15:49  \nxwiki-bridge - (18:56): [Vincent Massol] jerome.velociter, tmortagne: are you progressing on the import problems?  \nxwiki-bridge - (18:56): [Vincent Massol] (on my side I need about 2 hours more to finish my stuff I think)  \nxwiki-bridge - (18:56): [tmortagne] waiting the real last build from hudson to test  \nxwiki-bridge - (18:56): [Vincent Massol] ah so I'm the blocker for that?  \nxwiki-bridge - (18:56): [tmortagne] (can't because of core failure)  \nxwiki-bridge - (18:57): [tmortagne] but since it's working in trunk i guess it something wrong with older core for some reason  \nxwiki-bridge - (18:57): [Vincent Massol] you could use a build before my breaking change  \nxwiki-bridge - (18:57): [tmortagne] that's the one i used  \nxwiki-bridge - (18:58): [jerome.velociter] Vincent Massol: tmortagne could not really work on XE toda, got caught on other things  \nxwiki-bridge - (18:58): [jerome.velociter] but if you need me please ping me  \nxwiki-bridge - (18:58): [jerome.velociter] (on skype, I don't have good notifications on jabber for the moment on this computer)  \nxwiki-bridge - (19:03): [tmortagne] I have to go now, i will retest tomorrow morning  \nxwiki-bridge - (19:03): [Vincent Massol] ok  \nKermitTheFragger left at 19:31 (\"Leaving\"  \narkub joined #xwiki at 20:58  \nCalebJamesDeLisl joined #xwiki at 21:06  \nlucaa joined #xwiki at 21:33  \nlucaa left #xwiki at 21:36  \nxwiki-bridge - (22:29): [Vincent Massol] fixed the build  \nxwiki-bridge - (22:29): [Vincent Massol] btw I still have new import upload issues  \nxwiki-bridge - (22:29): [Vincent Massol] (exception raised when I click on upload)  \nxwiki-bridge - (22:35): [Vincent Massol] sdumitriu: hmm just tried deleting a doc and it doesn't appear in the alldocs  \nxwiki-bridge - (22:35): [Vincent Massol] ah no  \nxwiki-bridge - (22:35): [Vincent Massol] wait  \nxwiki-bridge - (22:35): [Vincent Massol] there are 2 tabs  \nxwiki-bridge - (22:36): [Vincent Massol] I clicked on deleted attachments  \nxwiki-bridge - (22:36): [Vincent Massol] hmm no it's worse actually  \nxwiki-bridge - (22:36): [sdumitriu] So it works?  \nxwiki-bridge - (22:36): [Vincent Massol] on delete docs I don't even see a livetable  \nxwiki-bridge - (22:36): [Vincent Massol] ah works now  \nxwiki-bridge - (22:36): [Vincent Massol] with a refresh  \nxwiki-bridge - (22:36): [Vincent Massol] :)  \nxwiki-bridge - (22:36): [Vincent Massol] (cache refresh)  \nxwiki-bridge - (22:39): [Vincent Massol] sdumitriu: theres' no restore for deleted attachments?  \nxwiki-bridge - (22:39): [sdumitriu] Not yet  \nxwiki-bridge - (22:39): [Vincent Massol] ok  \nxwiki-bridge - (22:39): [sdumitriu] The java code is missing  \nxwiki-bridge - (22:39): [Vincent Massol] :)  \nxwiki-bridge - (22:40): [sdumitriu] The UI is almost ready for it  \nxwiki-bridge - (22:40): [Vincent Massol] actually I wasn't even aware that an attachment wasn't really dleeted when you delete it  \nxwiki-bridge - (22:43): [Vincent Massol] sdumitriu: I wouldn't mind some code reviews on the commits I've been doing for the past 2 days ....  \nxwiki-bridge - (22:45): [sdumitriu] I know  \nxwiki-bridge - (22:45): [sdumitriu] I want to do it  \nxwiki-bridge - (22:45): [Vincent Massol] ok great provided it's done before end of M2 it's still good  \n\n"}