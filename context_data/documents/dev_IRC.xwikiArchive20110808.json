{"id": "dev:IRC.xwikiArchive20110808", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110808", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:19\u00a0<esdaniel>\u00a0has joined #xwiki  \n00:19\u00a0<sdumitriu>\u00a0has quit  \n00:20\u00a0<esdaniel>\u00a0has left #xwiki  \n00:21\u00a0<sdumitriu>\u00a0has joined #xwiki  \n01:11\u00a0<rrodriguez>\u00a0has quit  \n04:09\u00a0<DrLou>\u00a0has quit  \n05:52\u00a0<JuanDaugherty>\u00a0has quit  \n05:54\u00a0<JuanDaugherty>\u00a0has joined #xwiki  \n07:08\u00a0<finbrein>\u00a0has joined #xwiki  \n07:22\u00a0<lucaa>\u00a0has joined #xwiki  \n07:28\u00a0<lucaa>\u00a0has quit  \n07:43\u00a0<lucaa>\u00a0has joined #xwiki  \n07:43\u00a0<sdumitriu>\u00a0has quit  \n07:44\u00a0<sdumitriu>\u00a0has joined #xwiki  \n08:02\u00a0<lucaa>\u00a0has quit  \n08:39\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:52\u00a0<vmassol>\u00a0has joined #xwiki  \n08:52\u00a0<vmassol1>\u00a0has joined #xwiki  \n08:56\u00a0<vmassol>\u00a0has quit  \n09:22\u00a0<finbrein>\u00a0Has anyone worked on the Mobile Client for XWiki?  \n09:23\u00a0<vmassol1>\u00a0hi finbrein. What I know is that there's someone (chamika) currently working on adding xwiki support in Android  \n09:24\u00a0<finbrein>\u00a0sounds like the sam thing, OK  \n09:24\u00a0<finbrein>\u00a0same  \n09:24\u00a0<+tmortagne>\u00a0finbrein: if you are talking about the proposal made for GSOC yes Chamika is working on it  \n09:25\u00a0<+tmortagne>\u00a0you can test the work in progress on http://maven.xwiki.org/snapshots/org/xwiki/android/xwiki-android-client/1.0-SNAPSHOT/  \n09:25\u00a0<+tmortagne>\u00a0this is automatically built based on https://github.com/xwiki-contrib/android-client  \n09:26\u00a0<finbrein>\u00a0Ok, thanks  \n09:26\u00a0<finbrein>\u00a0I'll check it out  \n09:29\u00a0<sburjan>\u00a0has joined #xwiki  \n09:47\u00a0<sdumitriu>\u00a0has quit  \n09:47\u00a0<evalica>\u00a0has joined #xwiki  \n09:48\u00a0<vmassol1>\u00a0had forgotten to attach the xar yesterday\u2026.  \n09:48\u00a0<sdumitriu>\u00a0has joined #xwiki  \n09:48\u00a0<rrodriguez>\u00a0has joined #xwiki  \n09:52\u00a0<tmortagne>\u00a0has quit  \n09:52\u00a0<sdumitriu>\u00a0has quit  \n09:54\u00a0<sdumitriu>\u00a0has joined #xwiki  \n09:58\u00a0<finbrein>\u00a0has quit  \n09:59\u00a0<finbrein>\u00a0has joined #xwiki  \n09:59\u00a0<vmassol1>\u00a0is someone enabling agent4 here?  \n09:59\u00a0<vmassol1>\u00a0I've disabled it but I can see it's been enabled again  \n10:00\u00a0<@cjdelisle>\u00a0good morning btw  \n10:00\u00a0<vmassol1>\u00a0good morning caleb  \n10:02\u00a0<@cjdelisle>\u00a0Indeed I didn't realize that I was doing the -DperferIPv4Stack on the wrong side. Apparently JavaMail and/or agent3 has a bug which causes it to not connect to ipv6 addresses correctly  \n10:02\u00a0<@cjdelisle>\u00a0\\*-DpreferIPv4Stack  \n10:03\u00a0<vmassol1>\u00a0serendipity! :)  \n10:05\u00a0<@cjdelisle>\u00a0ping 127.0.0.1 and ping6 ::1 both work  \n10:09\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:10\u00a0<rrodriguez>\u00a0has quit  \n10:10\u00a0<vmassol1>\u00a0has anyone modified /etc/hosts on agent3?  \n10:10\u00a0<vmassol1>\u00a0(alex is asking)  \n10:11\u00a0<@cjdelisle>\u00a0not I said the fox  \n10:11\u00a0<vmassol1>\u00a0tmortagne: ?  \n10:11\u00a0<+tmortagne>\u00a0not me no  \n10:11\u00a0<vmassol1>\u00a0ok  \n10:12\u00a0<+tmortagne>\u00a0hmm  \n10:12\u00a0<+tmortagne>\u00a0what is the modification ?  \n10:12\u00a0<vmassol1>\u00a0I sent it to you on skype  \n10:12\u00a0<@cjdelisle>\u00a0mm my box has this line:  \n10:12\u00a0<@cjdelisle>\u00a0::1 localhost ip6-localhost ip6-loopback  \n10:12\u00a0<@cjdelisle>\u00a0(desktop)  \n10:13\u00a0<vmassol1>\u00a0strange agent4 is enabled again  \n10:13\u00a0<vmassol1>\u00a0apparently it becomes enabled again by default after some time  \n10:37\u00a0<rrodriguez>\u00a0has joined #xwiki  \n10:42\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:48\u00a0<vmassol1>\u00a0tmortagne: I think we need a documentation page on xwiki.org listing all the events we send, maybe in Observation Manager module on extensions.xwiki.org  \n10:48\u00a0<vmassol1>\u00a0with links to tutorial about how to write a listener  \n10:49\u00a0<vmassol1>\u00a0(see last question on users list)  \n10:49\u00a0<+tmortagne>\u00a0vmassol1: yes would be nice  \n10:49\u00a0<+tmortagne>\u00a0it's hard to know what you can listen right now  \n10:53\u00a0<+sburjan>\u00a0good morning vmassol1 :)  \n10:54\u00a0<+sburjan>\u00a0quick question: if I want to add a comment, can I use the // or I have to make multi-line comment in order to follow the standard >?  \n10:54\u00a0<evalica>\u00a0has quit  \n10:56\u00a0<vmassol1>\u00a0sburjan: good morning. // is ok that's what we use eveyrwhere  \n10:56\u00a0<vmassol1>\u00a0(it's our standard)  \n10:56\u00a0<+sburjan>\u00a0vmassol1: because I saw a lot of comments in multi-line comments syntax  \n10:56\u00a0<vmassol1>\u00a0where?  \n10:56\u00a0<+sburjan>\u00a0thanks for the tip, I'm alsmot done with the patch  \n10:57\u00a0<+sburjan>\u00a0just want to run it multiple times  \n10:59\u00a0<@cjdelisle>\u00a0Sometimes I have been known to use /\\* for multiline comments (which are not javadoc comments) \\*/  \n10:59\u00a0<@cjdelisle>\u00a0I try to make it look nice  \n11:00\u00a0<+sburjan>\u00a0thanks  \n11:01\u00a0<@cjdelisle>\u00a0When it starts with /\\*\\* (2 \\*'s) it's a javadoc comment and they are needed in certain places and they have to be like that.  \n11:40\u00a0<+sburjan>\u00a0vmassol1: I'm almost done on the Annotations, but I'm unhappy on the speed of one test, and I want to make it faster  \n12:08\u00a0<vmassol1>\u00a0ok guys, I'm enabling agent4 now since it seems to work ok locally  \n12:08\u00a0<sdumitriu>\u00a0has quit  \n12:10\u00a0<sdumitriu>\u00a0has joined #xwiki  \n12:13\u00a0<rrodriguez>\u00a0has quit  \n12:16\u00a0<+sburjan>\u00a0vmassol1: successfully ran all test 50 times with tempus-fugit .. staging my commit and pushing it  \n12:16\u00a0<sdumitriu>\u00a0has quit  \n12:16\u00a0<vmassol1>\u00a0cool  \n12:18\u00a0<sdumitriu>\u00a0has joined #xwiki  \n12:20\u00a0<sdumitriu>\u00a0has quit  \n12:23\u00a0<sdumitriu>\u00a0has joined #xwiki  \n13:06\u00a0<vmassol1>\u00a0has quit  \n13:06\u00a0<vmassol>\u00a0has joined #xwiki  \n13:47\u00a0<vmassol>\u00a0tmortagne: seems there's a compilation error: http://ci.xwiki.org/job/xwiki-enterprise-test-cluster/27/console  \n13:47\u00a0<sdumitriu>\u00a0has quit  \n13:48\u00a0<+tmortagne>\u00a0vmassol: that's weird I added this method to the test framework  \n13:48\u00a0<sdumitriu>\u00a0has joined #xwiki  \n13:51\u00a0<+tmortagne>\u00a0vmassol: I can see the method on https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-test/src/main/java/org/xwiki/test/integration/XWikiExecutor.java  \n13:51\u00a0<sdumitriu>\u00a0has quit  \n13:51\u00a0<+tmortagne>\u00a0maye platform has not been built for some reason  \n13:51\u00a0<DrLou>\u00a0has joined #xwiki  \n13:51\u00a0<+tmortagne>\u00a0but I pushed that last week...  \n13:52\u00a0<vmassol>\u00a0maybe  \n13:52\u00a0<+tmortagne>\u00a0I can see there is a LDAP test failing on platform but that's all, test framework has been deployed it seems  \n13:53\u00a0<vmassol>\u00a0hmm we have again validation errors in tests: http://ci.xwiki.org/job/xwiki-enterprise-test-webstandards/org.xwiki.enterprise$xwiki-enterprise-test-webstandards/22/testReport/  \n13:53\u00a0<asyd>\u00a0has left #xwiki  \n13:53\u00a0<vmassol>\u00a0I wonder if that was caused by Anca  \n13:55\u00a0<vmassol>\u00a0indeed  \n13:55\u00a0<vmassol>\u00a0that's the cause  \n13:59\u00a0<vmassol>\u00a0cjdelisle: would be good to talk to tmortagne to find a solution for XWIKI-6822  \n14:00\u00a0<vmassol>\u00a0btw I also have encountered an issue when using a Panel wihich requires PR  \n14:00\u00a0<vmassol>\u00a0I couldn't use it :(  \n14:00\u00a0<vmassol>\u00a0it's a common use case  \n14:00\u00a0<vmassol>\u00a0we need a solution for that  \n14:01\u00a0<vmassol>\u00a0tmortagne: anca sent a mail entitled \" [Security] Exception for nested scripts verification for dashboard\". I tried the user dashboard this morning and all was working for me. Does it mean she found a solution?  \n14:02\u00a0<+tmortagne>\u00a0vmassol: I sent an answer, you did not received it ?  \n14:02\u00a0<vmassol>\u00a0yes I did  \n14:02\u00a0<jvdrean>\u00a0has joined #xwiki  \n14:02\u00a0<vmassol>\u00a0but I don't know what anca did thereafter  \n14:02\u00a0<evalica>\u00a0has joined #xwiki  \n14:02\u00a0<+tmortagne>\u00a0me neither  \n14:04\u00a0<vmassol>\u00a0hmmm I cannot reproduce http://ci.xwiki.org/job/xwiki-enterprise-test-webstandards/org.xwiki.enterprise$xwiki-enterprise-test-webstandards/22/testReport/org.xwiki.test.webstandards.framework/DefaultValidationTest/Validating\\_XHTML\\_validity\\_for\\_\\_space\\_Main\\_u002C\\_page\\_WebHome\\_executed\\_with\\_credentials\\_Admin\\_admin/ locally  \n14:04\u00a0<+tmortagne>\u00a0vmassol: did you created a jira issue for the panel ? so that I link it to XWIKI-6822  \n14:04\u00a0<+tmortagne>\u00a0(as related to)  \n14:04\u00a0<vmassol>\u00a0tmortagne: no, let me create it now  \n14:04\u00a0<+tmortagne>\u00a0ok  \n14:07\u00a0<@cjdelisle>\u00a0Does {{include}} not work after dropPermissions has been called?  \n14:08\u00a0<@cjdelisle>\u00a0s/work/confer permissions/  \n14:08\u00a0<+tmortagne>\u00a0cjdelisle: \"It used to be fixed by using include macro with context=new but even that does not work anymore.\"  \n14:09\u00a0<vmassol>\u00a0tmortagne: XWIKI-6823  \n14:09\u00a0<@cjdelisle>\u00a0You could before?  \n14:09\u00a0<sdumitriu>\u00a0has joined #xwiki  \n14:11\u00a0<@cjdelisle>\u00a0\"We used to be able to use APIs requiring PR in Panels but that's no longer working and can be considered a regression.\"  \n14:11\u00a0<sdumitriu>\u00a0has quit  \n14:11\u00a0<+tmortagne>\u00a0cjdelisle: yes I could before you modify the way it's done, we already talked about that many times  \n14:11\u00a0<@cjdelisle>\u00a0what are we talking about? panels or configuration?  \n14:11\u00a0<vmassol>\u00a0both :)  \n14:12\u00a0<vmassol>\u00a0tmortagne:is talking about config and i'm talking about panels  \n14:12\u00a0<@cjdelisle>\u00a0You could use PR in panels?  \n14:12\u00a0<vmassol>\u00a0I'm pretty sure it was working yes  \n14:12\u00a0<+tmortagne>\u00a0cjdelisle: we talked many time about the fact that admin UI prevent to use programming right  \n14:13\u00a0<sdumitriu>\u00a0has joined #xwiki  \n14:13\u00a0<@cjdelisle>\u00a0Which should we talk about first? Panels or Configutable?  \n14:13\u00a0<+tmortagne>\u00a0each time you broke it basically...  \n14:13\u00a0<+tmortagne>\u00a0it's the same general issue  \n14:13\u00a0<+tmortagne>\u00a0and more or less the same way to fic it probably  \n14:13\u00a0<@cjdelisle>\u00a0comment out the dropPermissions() lines?  \n14:14\u00a0<+tmortagne>\u00a0-> execute it with the proper right instead of using dropPermission  \n14:14\u00a0<bbc581>\u00a0has joined #xwiki  \n14:14\u00a0<+tmortagne>\u00a0like we do with wiki macros  \n14:16\u00a0<@cjdelisle>\u00a0re Panels used to have pr XWIKI-1002  \n14:16\u00a0<@cjdelisle>\u00a0http://jira.xwiki.org/jira/browse/XWIKI-1002  \n14:19\u00a0<+tmortagne>\u00a0cjdelisle: I know why you used dropPermission but as I keep telling you it's not the right way IMO because it's breaking lots of use case  \n14:19\u00a0<sdumitriu>\u00a0has quit  \n14:21\u00a0<@cjdelisle>\u00a0I thought we didn't want to ship stuff which required PR, I thought that was generally considered bad because it can't be used on wiki farms etc.  \n14:21\u00a0<sdumitriu>\u00a0has joined #xwiki  \n14:21\u00a0<vmassol>\u00a0cjdelisle: yes we had security issues and dropPermissions fixed them but at the same time it removed several valid use cases which are not working anymore and for which we need solutions  \n14:21\u00a0<vmassol>\u00a0there's a big difference between trying not to ship stuff which require PR by default  \n14:21\u00a0<vmassol>\u00a0and removing the PR notion at all  \n14:21\u00a0<vmassol>\u00a0(ie not making it usable by users)  \n14:21\u00a0<+tmortagne>\u00a0cjdelisle: in general yes but there is some use case for which we don't have much choices, we are not going to allow anyone to install a jar...  \n14:22\u00a0<+tmortagne>\u00a0what's very bad is to require programming right for something that should not require PR  \n14:22\u00a0<@cjdelisle>\u00a0So what do you want to do?  \n14:23\u00a0<+tmortagne>\u00a0also I don't see what's in XE have to do with the way admin UI is working, the fact that the XWiki team avoid distributing stuff containing PR does not make it useless  \n14:23\u00a0<Dan18>\u00a0has joined #xwiki  \n14:24\u00a0<Dan18>\u00a0Hello  \n14:24\u00a0<@cjdelisle>\u00a0If the end user wants to get rid of security measures then they have every right but they have to accept the consequences.  \n14:24\u00a0<@cjdelisle>\u00a0howdy dan  \n14:24\u00a0<Dan18>\u00a0Is there a format in which i could import/export objects defined in xwiki  \n14:24\u00a0<vmassol>\u00a0cjdelisle: well we can make it easy  \n14:24\u00a0<Dan18>\u00a0perhaps some xml  \n14:24\u00a0<vmassol>\u00a0it's only if there's no other solution that what you say would be correct  \n14:27\u00a0<@cjdelisle>\u00a0I wrote ConfigurableClass and when I did, I never intended for it to allow a configurable to run PR code.  \n14:27\u00a0<sdumitriu>\u00a0has quit  \n14:27\u00a0<+tmortagne>\u00a0cjdelisle: who said the solution was to make something unsafe ? I indicated many times a solution and every time you just don't even look at it and keep saying that not using dropPermission is unsafe...  \n14:27\u00a0<abusenius>\u00a0has joined #xwiki  \n14:27\u00a0<@cjdelisle>\u00a0tmortagne: can you refresh my memory? Was your solution to execute each configurable in it's own context?  \n14:28\u00a0<+tmortagne>\u00a0the solution is that the programming right has to be tested on the section author, for that there is several ways  \n14:28\u00a0<+tmortagne>\u00a0either use it's own context fully  \n14:29\u00a0<+tmortagne>\u00a0or do the same as wiki macros  \n14:29\u00a0<+tmortagne>\u00a0if we can do it with wiki macros why not with panels ?  \n14:29\u00a0<+tmortagne>\u00a0or configuration  \n14:29\u00a0<+tmortagne>\u00a0it's exactly the same logic  \n14:29\u00a0<@cjdelisle>\u00a0I have to read macro code  \n14:30\u00a0<+tmortagne>\u00a0in any case I don't actually thing we need something as complex as wiki macro in admin UI  \n14:31\u00a0<+tmortagne>\u00a0just executing each section in its own context should do it  \n14:31\u00a0<+tmortagne>\u00a0I don't really see why any configuration would need to have Main.WebHome or XWikiPreference I don't remember as current doc  \n14:32\u00a0<+tmortagne>\u00a0for panels th same things than macro should be used since it's pretty much a macro without parameters  \n14:33\u00a0<@cjdelisle>\u00a0I guess the thing that makes the most sense here is to just swap users when code has a signature on it.  \n14:34\u00a0<@cjdelisle>\u00a0that way you can have PR in panels, configuration, .vm scripts, objects, even comments if you want  \n14:34\u00a0<+tmortagne>\u00a0comment it's different  \n14:34\u00a0<+tmortagne>\u00a0anyone could put any author to a comment  \n14:35\u00a0<@cjdelisle>\u00a0I have resisted that idea because I think there will be a general creap in that direction until everything needs root  \n14:39\u00a0<+tmortagne>\u00a0bad developer can do bad things, that does not make an arguments to break valid use cases  \n14:42\u00a0<@cjdelisle>\u00a0IMO it's kind of like checkstyle. Sometimes it's a pain but I still like it because without it the standard of quality would probably start degrading.  \n14:44\u00a0<sdumitriu>\u00a0has joined #xwiki  \n14:46\u00a0<+tmortagne>\u00a0cjdelisle: yes and checkstyle is not integrated to java builder and you configure yourself what rule you want to have  \n14:48\u00a0<@cjdelisle>\u00a0It looks like if I just stop using the XWikiContext and switch to the ExecutionContext then it will be removed when the {{include}} macro is invoked.  \n14:49\u00a0<@cjdelisle>\u00a0is that what you are looking for?  \n14:49\u00a0<sdumitriu>\u00a0has quit  \n14:50\u00a0<+tmortagne>\u00a0cjdelisle: no, you should not have to use include macro based hack in your configuration or panels  \n14:51\u00a0<sdumitriu>\u00a0has joined #xwiki  \n14:52\u00a0<@cjdelisle>\u00a0How would you make panels work then?  \n14:52\u00a0<Dan18>\u00a0has left #xwiki  \n14:53\u00a0<sdumitriu>\u00a0has quit  \n14:54\u00a0<+tmortagne>\u00a0cjdelisle: be executing them with the proper context setup where programming right is actually tested on the panel author by default and not when you do some hack in your own panels to workaround dropPermission limitation  \n14:55\u00a0<@cjdelisle>\u00a0So you would break the panel API?  \n14:55\u00a0<+tmortagne>\u00a0why ?  \n14:56\u00a0<@cjdelisle>\u00a0At the moment, panels execute with the context document being the document that is being displayed.  \n14:56\u00a0<+tmortagne>\u00a0where did I say we should change current document ?  \n14:56\u00a0<+tmortagne>\u00a0wiki macro execute with the caller document as current document  \n14:57\u00a0<@cjdelisle>\u00a0Ahh so you would change hasProgrammingRights to use the panel document while context.getDoc() still returns the current document.  \n14:57\u00a0<+tmortagne>\u00a0I only talked about the user on which programming right is tested  \n14:58\u00a0<+tmortagne>\u00a0that's the general logic, but directly modifying hasProgrammingRights to take panel as special case is not very clean  \n14:59\u00a0<@cjdelisle>\u00a0I can't see a clean way around it.  \n14:59\u00a0<+tmortagne>\u00a0another solution is to set the proper sdoc in the context in a panel related java API  \n15:00\u00a0<+tmortagne>\u00a0sdoc is the document on which programming right is tested and then fallback on current document if it's not provided  \n15:01\u00a0<+tmortagne>\u00a0what wiki macro do is to change for the current context the content author of the current document in context  \n15:01\u00a0<+tmortagne>\u00a0(it's doing a clone so it's not actually modifying it)  \n15:02\u00a0<+tmortagne>\u00a0or maybe a wrapper I don't remember  \n15:03\u00a0<+sburjan>\u00a0vmassol: ping  \n15:03\u00a0<vmassol>\u00a0sburjan: yes?  \n15:03\u00a0<@cjdelisle>\u00a0$!doc.display('content', 'view', $pobj)  \n15:03\u00a0<@cjdelisle>\u00a0that's what is called  \n15:03\u00a0<vmassol>\u00a0hmm seems http://ci.xwiki.org/job/xwiki-enterprise-test-ui/26/console is stuck....  \n15:03\u00a0<vmassol>\u00a0(started 2 hours 31 mn ago)  \n15:04\u00a0<+sburjan>\u00a0ready to make pull request  \n15:04\u00a0<vmassol>\u00a0tmortagne: you're fixing the cluster build right?  \n15:04\u00a0<+tmortagne>\u00a0vmassol: I don't know why it's failing, the method is there  \n15:04\u00a0<vmassol>\u00a0fyi, I'm looking at the webstandards one right now  \n15:04\u00a0<@cjdelisle>\u00a0So in order for that to work we would need to add another api function just for panels (and perhaps other similar things which are in one page but need to think they are in another)  \n15:05\u00a0<vmassol>\u00a0tmortagne: does it build locally?  \n15:05\u00a0<vmassol>\u00a0hmm webstandards built fine locally  \n15:05\u00a0<+tmortagne>\u00a0cjdelisle: panels need a complex context like wiki macro with special current document but for configuration it's not even needed, we can simply use #includeTopic (If I remember well)  \n15:06\u00a0<+tmortagne>\u00a0vmassol: well I built it before committing  \n15:06\u00a0<+tmortagne>\u00a0cjdelisle: ha no it's not a template so you can even use include macro with context=new which is nicer  \n15:07\u00a0<@cjdelisle>\u00a0yes but it's custom content  \n15:08\u00a0<@cjdelisle>\u00a0imean it's inside of an object  \n15:08\u00a0<+tmortagne>\u00a0indeed you can't use include because it does not support object content  \n15:08\u00a0<@cjdelisle>\u00a0you could use getRenderedContent(String) ;)  \n15:09\u00a0<+tmortagne>\u00a0be we could add support for it in include macro since it's a nice feature anyway  \n15:09\u00a0<@cjdelisle>\u00a0bad road IMO  \n15:10\u00a0<@cjdelisle>\u00a0{{include document=\"PRdocument\" object=\"lolComment\"/}}  \n15:10\u00a0<+tmortagne>\u00a0actually we should add support for generic reference in include macro  \n15:10\u00a0<vmassol>\u00a0yes it would be nice to be able to include object content using {{include reference=\"\u2026\"/}}  \n15:10\u00a0<vmassol>\u00a0(independentely of your discussion)  \n15:11\u00a0<@cjdelisle>\u00a0then under what permissions would the object content be eval'd?  \n15:11\u00a0<vmassol>\u00a0cjdelisle: what's the difference between getting doc content or object content?  \n15:11\u00a0<+tmortagne>\u00a0depends of the context parameters  \n15:11\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:11\u00a0<+tmortagne>\u00a0I don't see what is the difference between document content or object  \n15:12\u00a0<@cjdelisle>\u00a0If I make a comment with a groovy script in it then it does.  \n15:12\u00a0<sdumitriu>\u00a0has quit  \n15:13\u00a0<+tmortagne>\u00a0cjdelisle: you can do the same with document content  \n15:13\u00a0<+tmortagne>\u00a0you are not doing a random target in you include macro  \n15:13\u00a0<+tmortagne>\u00a0you explicitly choose what you are including  \n15:14\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:14\u00a0<@cjdelisle>\u00a0mm checking XWikiDocument.java, I don't think you necessarily become the contentAuthor just by editing an object.  \n15:14\u00a0<+tmortagne>\u00a0cjdelisle: no you don't  \n15:15\u00a0<+tmortagne>\u00a0that's on pupose  \n15:15\u00a0<+tmortagne>\u00a0otherwise you would break PR each rime you comment  \n15:16\u00a0<+tmortagne>\u00a0hmm  \n15:16\u00a0<@cjdelisle>\u00a0bb  \n15:16\u00a0<+tmortagne>\u00a0indeed someone could do a include context=new on a comment he did on a PR document  \n15:17\u00a0<+tmortagne>\u00a0but i'm not sure it's the same for any object actually  \n15:17\u00a0<+tmortagne>\u00a0pretty sure it's only when you use comment API  \n15:18\u00a0<+tmortagne>\u00a0XWikiDocument does not set the contentAuthor anyway  \n15:18\u00a0<+tmortagne>\u00a0it's generally done at API and action level  \n15:19\u00a0<+tmortagne>\u00a0same for tags  \n15:20\u00a0<@cjdelisle>\u00a0right so I'll just do a #set($myDoc = getDocument('PR.DocWithObj')) $myDoc.getObjects('objectClass').get(0).set('code', 'youLose') $myDoc.save() and I don't break the PR  \n15:21\u00a0<@cjdelisle>\u00a0so even if you already pointed to it with the include macro I can still take advantage of an existing {{include}}  \n15:22\u00a0<+tmortagne>\u00a0cjdelisle: that's if you can edit this document  \n15:22\u00a0<+tmortagne>\u00a0you could do the same thing with a document anyway  \n15:23\u00a0<+tmortagne>\u00a0no need to support objects for that  \n15:23\u00a0<@cjdelisle>\u00a0yes but it looses it's PR when you edit the content  \n15:23\u00a0<+tmortagne>\u00a0the only issue is with object and tags which are special objects with hack around contentAuthor  \n15:23\u00a0<+tmortagne>\u00a0cjdelisle: sure but breaking PR is not really a security issue  \n15:24\u00a0<+tmortagne>\u00a0cjdelisle: when you modify a normal object i'm pretty sure it also change the content author  \n15:24\u00a0<@cjdelisle>\u00a0No it doesn't  \n15:24\u00a0<@cjdelisle>\u00a0I just looked at the code and AFAICT it doesn't  \n15:24\u00a0<+tmortagne>\u00a0then it's a bug IMO, it should be only for comments and tags  \n15:25\u00a0<@cjdelisle>\u00a0Even if it did, you would be relying on thousands of lines of really old badly understood code to keep the system secure, that is generally not a good idea.  \n15:28\u00a0<+tmortagne>\u00a0cjdelisle: I just tested and modifying object modify the content author at least using the UI  \n15:28\u00a0<+tmortagne>\u00a0if it's not the case using the API it's a bug  \n15:29\u00a0<sdumitriu>\u00a0has quit  \n15:29\u00a0<@cjdelisle>\u00a0Well bug or not, right now it's not going to get you rooted.  \n15:30\u00a0<+tmortagne>\u00a0cjdelisle: did you actually tested ?  \n15:30\u00a0<@cjdelisle>\u00a0There are a lot of ways to sneak changes into an object without the document noticing, there are quite a number of APIs.  \n15:31\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:31\u00a0<+tmortagne>\u00a0cjdelisle: if you can change the content of any object without modifying the document content it's already a security issue, no need to touch include macro for that  \n15:31\u00a0<+tmortagne>\u00a0s/document content /document content author/  \n15:31\u00a0<@cjdelisle>\u00a0Well then what is the difference between \"author\" and \"contentAurthor\"?  \n15:31\u00a0<+tmortagne>\u00a0if you can reproduce then it should be fixed  \n15:32\u00a0<+tmortagne>\u00a0contentAuthor has been added only for comments and tags  \n15:32\u00a0<+tmortagne>\u00a0for which you want people without even edit right to add objects  \n15:32\u00a0<+tmortagne>\u00a0(it's a nasty hack if you ask me)  \n15:33\u00a0<+tmortagne>\u00a0we would not have the issue anymore if comments and tags were in separated documents  \n15:33\u00a0<vmassol>\u00a0sburjan: I've added some comments on your patch. Just easy things I could find quickly just by looking in diff mode  \n15:33\u00a0<@cjdelisle>\u00a0yup  \n15:33\u00a0<+tmortagne>\u00a0but it's not going to happen soon and then you have others issue like lots of documents  \n15:33\u00a0<@cjdelisle>\u00a0comments and tags could be in your own user document so there's only one place to delete.  \n15:34\u00a0<+tmortagne>\u00a0well then you loose all comments if the user is removed  \n15:34\u00a0<+tmortagne>\u00a0not sure it's good  \n15:34\u00a0<@cjdelisle>\u00a0perhaps  \n15:35\u00a0<vmassol>\u00a0sburjan: now I need to find a way to apply your patch locally  \n15:35\u00a0<@cjdelisle>\u00a0You are suggesting though that we should allow kids to root the server if there is anything amiss in the XWikiDocument, BaseObject/api.Object code  \n15:35\u00a0<vmassol>\u00a0(but please fix it in the meantime)  \n15:36\u00a0<@cjdelisle>\u00a0I don't know about you but that is not code that I would be willing to bet my life on.  \n15:37\u00a0<+sburjan>\u00a0vmassol: ok, then cancel the pull request  \n15:37\u00a0<+sburjan>\u00a0(so I can fix those things and I will make another pull request)  \n15:37\u00a0<vmassol>\u00a0sburjan: my comments are cosmetic only  \n15:37\u00a0<vmassol>\u00a0I need to apply your patch to really review it  \n15:38\u00a0<vmassol>\u00a0we can work in //  \n15:38\u00a0<+sburjan>\u00a0mayibe I could create a patch file locally and send it to you  \n15:38\u00a0<vmassol>\u00a0sburjan: I'm sure there's a more gitty way...  \n15:38\u00a0<+tmortagne>\u00a0cjdelisle: I just tested and whatever you modify as long as you call Document.save() the contentAuthor is changed  \n15:40\u00a0<+tmortagne>\u00a0so unless you have another public way to save a document you can't modify an object without modifying contentAuthor  \n15:40\u00a0<+tmortagne>\u00a0except for comments and tags of course  \n15:41\u00a0<sdumitriu>\u00a0has quit  \n15:41\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:44\u00a0<@cjdelisle>\u00a0If you want to add that then don't let me stand in your way. I can't bear the thought of being the guy who wrote a line of code that got somebody rooted. To me the burdon of proof is to prove it's safe, not to prove it's dangerous.  \n15:46\u00a0<sdumitriu>\u00a0has quit  \n15:48\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:49\u00a0<vmassol>\u00a0sburjan: ok I have your patch locally now  \n15:49\u00a0<sdumitriu>\u00a0has quit  \n15:49\u00a0<vmassol>\u00a0looking at it  \n15:50\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:50\u00a0<vmassol>\u00a0hmm I spoke too fast  \n15:51\u00a0<vmassol>\u00a0it saif http://pastebin.com/YKX3XdaD but I don't have the changes locally  \n15:52\u00a0<vmassol>\u00a0cjdelisle: we need to find a solution to have a safe XE but also to allow using PR, that's the challenge. right now I can tell you the current solution is not good enough from a user POV (even if it's safe) since it forbids lots of use cases  \n15:53\u00a0<vmassol>\u00a0(the use case I have in mind is a Panel requiring the usage of a privileged API since there's no other way of doing it)  \n15:54\u00a0<@cjdelisle>\u00a0This is a new feature though, it is not fixing a regression.  \n15:54\u00a0<vmassol>\u00a0what new feature?  \n15:54\u00a0<vmassol>\u00a0I have been using panels with PR for a long time AFAIR  \n15:54\u00a0<@cjdelisle>\u00a0http://jira.xwiki.org/jira/browse/XWIKI-1002  \n15:54\u00a0<vmassol>\u00a0AFAIR we even have existing panels requiring it  \n15:54\u00a0<@cjdelisle>\u00a0only when the current page did  \n15:54\u00a0<vmassol>\u00a01002 is a seucrity issue  \n15:55\u00a0<sdumitriu>\u00a0has quit  \n15:55\u00a0<@cjdelisle>\u00a0well it's PR in panels  \n15:55\u00a0<vmassol>\u00a0it has nothing to do with the fact that PR weren't working in panels before  \n15:55\u00a0<vmassol>\u00a0(AFAICS)  \n15:56\u00a0<@cjdelisle>\u00a0PR was working in panels, but it only worked when you were viewing a PR page at the time.  \n15:56\u00a0<@cjdelisle>\u00a0The security issue was that the panel itself didn't need to have PR.  \n15:56\u00a0<+tmortagne>\u00a0vmassol: what cjdelisle is saying is that it was actually working just because of a security bug  \n15:56\u00a0<@cjdelisle>\u00a0And that it didn't work all of the time.  \n15:56\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:56\u00a0<vmassol>\u00a0ok fine, actually I don't care too much if it's a regression or a new feature. IMO we need it  \n15:56\u00a0<+tmortagne>\u00a0now the issue is that even with that it still used to be a \"feature\" since a very long time  \n15:56\u00a0<+tmortagne>\u00a0and it's not broken  \n15:57\u00a0<vmassol>\u00a0s/not/now/  \n15:57\u00a0<+tmortagne>\u00a0we could have seen it the other way around: i.e. fixing the fact that it was not working all the time  \n15:57\u00a0<+tmortagne>\u00a0s/not/now/  \n15:57\u00a0<@cjdelisle>\u00a0sure but at least the issue should say new feature and not regression/bug  \n15:57\u00a0<vmassol>\u00a0cjdelisle: I can change the wording :)  \n15:58\u00a0<vmassol>\u00a0from a user POV it's a regression  \n15:58\u00a0<+tmortagne>\u00a0you say that something used since years by users is a new feature...  \n15:58\u00a0<vmassol>\u00a0from a tech guys POV it's a feature  \n15:58\u00a0<@cjdelisle>\u00a0no, the user never really had the feature because it only worked once in a while  \n15:58\u00a0<@cjdelisle>\u00a0IE when he viewed a PR page  \n15:58\u00a0<vmassol>\u00a0guys it doesn't really matter how we call it  \n15:58\u00a0<@cjdelisle>\u00a0a flickering feature isn't really a feature  \n15:59\u00a0<vmassol>\u00a0what matters is that we fix it  \n15:59\u00a0<+tmortagne>\u00a0cjdelisle: on a defaut XE all the page have PR right  \n15:59\u00a0<+tmortagne>\u00a0so yes a user can definitely thing it was working  \n15:59\u00a0<+tmortagne>\u00a0\\*think  \n15:59\u00a0<vmassol>\u00a0hmm ldap test failing again on ci...  \n16:00\u00a0<@cjdelisle>\u00a0I feel like the consensus is that it should be \u00a0\u00a0hasProgrammingRights() { return true; } \u00a0\u00a0:(  \n16:01\u00a0<+tmortagne>\u00a0you are overreacting a little bit...  \n16:01\u00a0<sdumitriu>\u00a0has quit  \n16:01\u00a0<@cjdelisle>\u00a0maybe so  \n16:02\u00a0<@cjdelisle>\u00a0How strong is the guarantee that an attacker won't get shell on a user's computer?  \n16:02\u00a0<@cjdelisle>\u00a0PR = shell  \n16:03\u00a0<vmassol>\u00a0hehe found instructions on applying pull request locally  \n16:03\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:03\u00a0<vmassol>\u00a0just need to click on the (i) icon left to the button that says \"merge this pull reuqest\"  \n16:04\u00a0<+sburjan>\u00a0cool :D  \n16:05\u00a0<vmassol>\u00a0adding some more comments as I discover them  \n16:05\u00a0<vmassol>\u00a0(sburjan)  \n16:05\u00a0<+sburjan>\u00a0ok  \n16:06\u00a0<vmassol>\u00a0ouch  \n16:06\u00a0<@cjdelisle>\u00a0The solution of allowing {{include}} to bypass dropPermissions() makes sense since it's a different page which is being included. It leads to good practice in incapsulating PR code and it applies to both panels and configuration but it doesn't break API for either.  \n16:06\u00a0<vmassol>\u00a0sburjan: you've put Assert in PO  \n16:08\u00a0<sdumitriu>\u00a0has quit  \n16:08\u00a0<vmassol>\u00a0asserts are for tests only  \n16:10\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:12\u00a0<vmassol>\u00a0sburjan: ok I'm done with comments for now  \n16:12\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n16:14\u00a0<vmassol>\u00a0sburjan: I've executed the test locally twice and it worked fine so that's cool. Just need to clean it according to the comments  \n16:15\u00a0<+tmortagne>\u00a0cjdelisle: right now all I want is to see XWIKI-6822 fixed so do whatever you want  \n16:15\u00a0<sdumitriu>\u00a0has quit  \n16:15\u00a0<@cjdelisle>\u00a0It seems like the cleanest solution to me.  \n16:15\u00a0<sburjan`>\u00a0has quit  \n16:15\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n16:16\u00a0<@cjdelisle>\u00a0I hope in the end nothing at all has permissions except for the document content itself.  \n16:16\u00a0<+tmortagne>\u00a0it seems like just providing a workaround to me  \n16:16\u00a0<vmassol>\u00a0(and it'll need to be explained to everyone requiring PR...)  \n16:16\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:16\u00a0<@cjdelisle>\u00a0I would like to see drop() be called first thing then anything that legitimently needed permissions had to have a signature.  \n16:17\u00a0<+tmortagne>\u00a0sure but we don't have signature system right now and we already do the drop() part...  \n16:18\u00a0<@cjdelisle>\u00a0sure but the interface for a signature is going to be basicly like the intergace for {{include}} in fact, most of the code can even be recycled.  \n16:19\u00a0<@cjdelisle>\u00a0What you are doing with {{include}} you will have to do with {{signed}}  \n16:19\u00a0<+sburjan>\u00a0vmassol: ok. I will fix it according to your comments and make another pull request ?  \n16:19\u00a0<vmassol>\u00a0sburjan: ok  \n16:19\u00a0<vmassol>\u00a0you have to do a new one or can you update the current one?  \n16:19\u00a0<+tmortagne>\u00a0cjdelisle: it's not the same thing because with include you are forced to be in a specific context  \n16:19\u00a0<vmassol>\u00a0(I have never used pull requests on github)  \n16:20\u00a0<+sburjan>\u00a0vmassol: I can make another commit that will be committed as one in origin. but IMP you should cancel it  \n16:20\u00a0<+sburjan>\u00a0\\*IMO. you should cancel it so we have only one commit  \n16:20\u00a0<@cjdelisle>\u00a0hmm so they wouldn't be quite the same  \n16:20\u00a0<vmassol>\u00a0that doesn't look like a good workflow to me  \n16:20\u00a0<vmassol>\u00a0(sburjan)  \n16:20\u00a0<+tmortagne>\u00a0and you need two document instead of just one  \n16:21\u00a0<vmassol>\u00a0would need some git/github expert to help us  \n16:21\u00a0<@cjdelisle>\u00a0yes but keeping your security code seperated from your UI code is just good practice IMO.  \n16:21\u00a0<+tmortagne>\u00a0(but that part is ok since i'm never against seperating stuff ;))  \n16:22\u00a0<@cjdelisle>\u00a0When I go looking to prove that nothing can get me owned, I want to read as little as possible.  \n16:22\u00a0<vmassol>\u00a0sburjan: reading http://help.github.com/send-pull-requests/  \n16:23\u00a0<+tmortagne>\u00a0anyone has a good way to display an exception in velocity ?  \n16:23\u00a0<vmassol>\u00a0sburjan: I'm pretty sure you shouldn't create a new pull request  \n16:23\u00a0<+tmortagne>\u00a0(with the stack strace and stuff)  \n16:23\u00a0<vmassol>\u00a0sburjan: and instead refine it according to the discussion till it's ready to be applied  \n16:24\u00a0<+sburjan>\u00a0vmassol: okay  \n16:24\u00a0<+sburjan>\u00a0vmassol: so no asserts in PO  \n16:24\u00a0<+sburjan>\u00a0I will fix that too  \n16:24\u00a0<vmassol>\u00a0yep, PO are not tests  \n16:25\u00a0<vmassol>\u00a0cjdelisle: hmm seems we still have http://ci.xwiki.org/job/xwiki-enterprise-test-ui/org.xwiki.enterprise$xwiki-enterprise-test-ui/28/testReport/org.xwiki.test.ui.watchlist/WatchThisPageAndWholeSpaceTest/testWatchThisPageAndWholeSpace/  \n16:26\u00a0<vmassol>\u00a0I thought it would have been fixed by your fix with ipv4  \n16:26\u00a0<vmassol>\u00a0s/with/on/  \n16:26\u00a0<vmassol>\u00a0if you have any idea on how to fix it that would be great  \n16:26\u00a0<sdumitriu>\u00a0has quit  \n16:26\u00a0<@cjdelisle>\u00a0yea, that one has flickered on systems even where invitation was fine.  \n16:27\u00a0<@cjdelisle>\u00a0It has been a horrific test which sent frown men away in tears.  \n16:27\u00a0<vmassol>\u00a0:)  \n16:27\u00a0<vmassol>\u00a0so who's a real man here?  \n16:27\u00a0<vmassol>\u00a0cjdelisle: don't tell me a log cutter like yourself isn't a real man! :)  \n16:28\u00a0<vmassol>\u00a0tmortagne: could you look at http://ci.xwiki.org/job/xwiki-enterprise-test-ldap/org.xwiki.enterprise$xwiki-enterprise-test-ldap/31/testReport/org.xwiki.test.ldap/LDAPAuthTest/testLogAsLDAPUser/ ?  \n16:29\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:29\u00a0<+tmortagne>\u00a0vmassol: checked already but no idea why it's failing yet, finishing something and I will look at it more closely  \n16:30\u00a0<vmassol>\u00a0ok thanks, I do need some help to fix the tests\u2026. so many things are going wrong\u2026.  \n16:30\u00a0<vmassol>\u00a0we still have the attachment deletion/rollback one to fix....  \n16:30\u00a0<vmassol>\u00a0that one is for real men  \n16:31\u00a0<cjdelisle>\u00a0has quit  \n16:32\u00a0<cjdelisle>\u00a0has joined #xwiki  \n16:39\u00a0<sdumitriu>\u00a0has quit  \n16:40\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:44\u00a0<sdumitriu>\u00a0has quit  \n16:46\u00a0<finbrein>\u00a0has quit  \n16:47\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:57\u00a0<evalica>\u00a0has quit  \n17:01\u00a0<Enygma`>\u00a0has quit  \n17:01\u00a0<sdumitriu>\u00a0has quit  \n17:02\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:14\u00a0<finbrein>\u00a0has joined #xwiki  \n17:23\u00a0<sdumitriu>\u00a0has quit  \n17:26\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:31\u00a0<jamesxu>\u00a0has joined #xwiki  \n17:32\u00a0<jamesxu>\u00a0has quit  \n17:48\u00a0<bbc581>\u00a0has quit  \n18:13\u00a0<finbrein>\u00a0has quit  \n18:13\u00a0<sdumitriu>\u00a0has quit  \n18:16\u00a0<sdumitriu>\u00a0has joined #xwiki  \n18:43\u00a0<finbrein>\u00a0has joined #xwiki  \n18:43\u00a0<sdumitriu>\u00a0has quit  \n18:45\u00a0<sdumitriu>\u00a0has joined #xwiki  \n18:47\u00a0<tmortagne>\u00a0has left #xwiki  \n19:32\u00a0<sburjan>\u00a0has quit  \n19:40\u00a0<abusenius>\u00a0has quit  \n21:00\u00a0<rrodriguez>\u00a0has joined #xwiki  \n22:05\u00a0<lucaa>\u00a0has joined #xwiki  \n22:18\u00a0<finbrein>\u00a0has quit  \n23:04\u00a0<sdumitriu>\u00a0has quit  \n23:06\u00a0<sdumitriu>\u00a0has joined #xwiki  \n23:08\u00a0<finbrein>\u00a0has joined #xwiki  \n23:08\u00a0<sdumitriu>\u00a0has quit  \n23:10\u00a0<sdumitriu>\u00a0has joined #xwiki  \n23:14\u00a0<sdumitriu>\u00a0has quit  \n23:16\u00a0<sdumitriu>\u00a0has joined #xwiki  \n23:18\u00a0<JuanDaugherty>\u00a0I'n new to the project. The wiki says that svn and git were being kept in sync. Am I OK just using the svn stuff to start?  \n23:19\u00a0<vmassol>\u00a0JuanDaugherty: we're not longer using svn  \n23:19\u00a0<vmassol>\u00a0where does it say they're kept in sync so that I can fix it?  \n23:19\u00a0<vmassol>\u00a0you should use github  \n23:20\u00a0<JuanDaugherty>\u00a0http://dev.xwiki.org/xwiki/bin/view/Community/SourceRepository  \n23:20\u00a0<vmassol>\u00a0yes but where does it say they're kept in sync?  \n23:22\u00a0<JuanDaugherty>\u00a0sorry, it doesn't, I misread that into the note that was specific to those contrib and currwiki  \n23:22\u00a0<vmassol>\u00a0btw we need to remove the old sources from svn  \n23:22\u00a0<vmassol>\u00a0JuanDaugherty: if you're used to svn did you know that github offers an svn view?  \n23:23\u00a0<vmassol>\u00a0https://github.com/blog/626-announcing-svn-support  \n23:23\u00a0<JuanDaugherty>\u00a0no I didn't, thx,  \n23:24\u00a0<JuanDaugherty>\u00a0s/,//  \n23:28\u00a0<JuanDaugherty>\u00a0will mvn stuff fail if no SCM is used at all in the working directories?  \n23:32\u00a0<JuanDaugherty>\u00a0http://dev.xwiki.org/xwiki/bin/view/Community/SourceRepository#HCheckingoutsources sort of lead me to believe svn on xwiki was still being mainained  \n23:32\u00a0<vmassol>\u00a0fixed  \n23:34\u00a0<JuanDaugherty>\u00a0great, thx  \n23:46\u00a0<sdumitriu>\u00a0has quit  \n23:47\u00a0<sdumitriu>\u00a0has joined #xwiki  \n\n"}