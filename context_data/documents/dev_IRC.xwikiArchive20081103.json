{"id": "dev:IRC.xwikiArchive20081103", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20081103", "title": "IRC Archive for channel #xwiki on 03 November 2008 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nxwikibot - (03/11/2008 07:07): XWiki.pppp was modified by XWiki.pppp (Created user) - http://www.xwiki.org/xwiki/bin/view/XWiki/pppp  \nasiri - (03/11/2008 07:59): vmassol : does inporting xwiki-core-rendering into eclipse take a lot of time ? :)  \nasiri - (03/11/2008 07:59): importing\\*  \nvmassol - (03/11/2008 08:00): asiri: no  \nasiri - (03/11/2008 08:01): oh .. i had to kill eclipse because it got stuck .. hmmmm ... may be my personal setup ..  \nasiri - (03/11/2008 08:04): vmassol: ok, it seems like the nexus index download was delaying the project import. Now it works fine :)  \nvmassol - (03/11/2008 08:05): cool  \nasiri - (03/11/2008 08:36): vmassol : when a xhtml document is converted to xwiki 1.0 syntax, should the <html> tags be ripped off ?  \nvmassol - (03/11/2008 08:36): yes  \nvmassol - (03/11/2008 08:36): <html> is not wiki syntax!  \nvmassol - (03/11/2008 08:37): btw<  \nvmassol - (03/11/2008 08:37): btw  \nasiri - (03/11/2008 08:37): XMLUtils.stripHTMLEnvelope(document) , should do it right ? i noticed that is is not doing so ..  \nvmassol - (03/11/2008 08:37): there's no conversion to xwiki 1.0 syntax  \nvmassol - (03/11/2008 08:37): there's no neeed to do any of that  \nvmassol - (03/11/2008 08:37): you should use the html cleaner + the xhtml parser  \nvmassol - (03/11/2008 08:37): just try it  \nasyd - (03/11/2008 08:37): hello there  \nvmassol - (03/11/2008 08:37): you'll see you won't have any html tag in the resulting document  \nvmassol - (03/11/2008 08:38): hi asyd   \nasiri - (03/11/2008 08:38): yes yes, this is xhtml 1.0 + cleaning unwanted stuff ..  \nvmassol - (03/11/2008 08:38): asiri: you're saying different things that don't match  \nvmassol - (03/11/2008 08:38): 1) <html> is not xwiki syntax  \nvmassol - (03/11/2008 08:38): 2) there's no conversion to xwiki 1.0 syntax  \nasiri - (03/11/2008 08:39): vmassol : html cleaner itself produces xhtml documents, what is the xhtml parser ?  \nvmassol - (03/11/2008 08:39): 3) the xhtml parser knows how to convert from xhtml to wiki syntax  \nasiri - (03/11/2008 08:39): aha, got it ..  \nvmassol - (03/11/2008 08:39): asiri: you need to look at the rendering mlodukle  \nvmassol - (03/11/2008 08:39): module  \nasiri - (03/11/2008 08:39): ok  \nvmassol - (03/11/2008 08:39): this is how it works:  \nvmassol - (03/11/2008 08:39): a) you parse the input using the correct parser  \nasiri - (03/11/2008 08:40): but as i saw : xhtml need to be cleaned a bit before putting it into a wiki page .. (xhtml 1.0 wiki page) am i correct ?  \nasiri - (03/11/2008 08:40): ok,  \nvmassol - (03/11/2008 08:40): Parser parser = (Parser) lookup(Parser.ROLE, \"xhtml\");  \nvmassol - (03/11/2008 08:40): asiri: as I said try it first!  \nvmassol - (03/11/2008 08:40): you cannot know what to do if you don't know what you get!  \nvmassol - (03/11/2008 08:40): :)  \nvmassol - (03/11/2008 08:40): I'm surprised you haven't tried it already  \nasiri - (03/11/2008 08:41): well, i don't get it, i'm already doing what you say ..  \nasiri - (03/11/2008 08:41): :)  \nvmassol - (03/11/2008 08:41): b)  \nvmassol - (03/11/2008 08:41): use the renderer you need  \nvmassol - (03/11/2008 08:41): in this case the XWikiSyntaxRenderer  \nvmassol - (03/11/2008 08:41): WikiPrinter printer = ...  \nvmassol - (03/11/2008 08:41): new XWikiSyntaxRenderer(printer);  \nvmassol - (03/11/2008 08:42): XDOM xdom = parser.parse(...);  \nvmassol - (03/11/2008 08:42): xdom.traverse(renderer);  \nasiri - (03/11/2008 08:42): yes yes, i'm doing all that ..  \nasiri - (03/11/2008 08:42): that is for xwiki 2.0 conversion ..  \nvmassol - (03/11/2008 08:42): then you cannot have a <html> tag in output  \nasiri - (03/11/2008 08:42): very true ..  \nvmassol - (03/11/2008 08:42): again there's no xwiki 1.0 syntax conversion  \nvmassol - (03/11/2008 08:43): it doesn't exist  \nasiri - (03/11/2008 08:43): but we have a xhtml 1.0 option too ..  \nasiri - (03/11/2008 08:43): i'm asking about that :)  \nvmassol - (03/11/2008 08:43): but you said xwiki syntax 1.0  \nvmassol - (03/11/2008 08:43): this is not XHTML 1.0  \nvmassol - (03/11/2008 08:43): \"vmassol : when a xhtml document is converted to xwiki 1.0 syntax, should the <html> tags be ripped off ?\"  \nvmassol - (03/11/2008 08:43): I'm not dreaming! :)  \nvmassol - (03/11/2008 08:44): so I you meant XHTML 1.0 and not xwiki 1.0 syntax right?  \nasiri - (03/11/2008 08:44): yes yes, my failt :)  \nasiri - (03/11/2008 08:44): fault\\*  \nvmassol - (03/11/2008 08:44): fine  \nvmassol - (03/11/2008 08:44): but then we don't care about this  \nvmassol - (03/11/2008 08:44): as I told you already  \nvmassol - (03/11/2008 08:44): what we want is wiki syntax  \nvmassol - (03/11/2008 08:44): not XHTML  \nvmassol - (03/11/2008 08:44): so don't work on this, we don't want it  \nvmassol - (03/11/2008 08:44): and it's not required anyway  \nvmassol - (03/11/2008 08:45): (since we can paste HTML in wiki pages already)  \nasiri - (03/11/2008 08:45): got it, i couldn't just leave it with html tags lying \u00a0around .. i will get it off my head.  \nvmassol - (03/11/2008 08:45): there won't be html tag  \nvmassol - (03/11/2008 08:45): if you use the HTML parser  \nvmassol - (03/11/2008 08:45): btw you don't need to call the HTML Cleaner  \nvmassol - (03/11/2008 08:46): (and you shouldn't)  \nvmassol - (03/11/2008 08:46): you should instead use the HTML parser (instead of the XHTML parser)  \nvmassol - (03/11/2008 08:46): the HTML parser calls the HMTL cleaner automaitcally before calling th XHTML parser  \nvmassol - (03/11/2008 08:46): so to summarize  \nvmassol - (03/11/2008 08:46): if all you want is XHTML in output  \nvmassol - (03/11/2008 08:46): you do the same but use the XHTMLREnderer  \nvmassol - (03/11/2008 08:46): instead of the XWikiSyntaxRenderer  \nvmassol - (03/11/2008 08:46): and you're set  \nasiri - (03/11/2008 08:47): aha .. this is not the way it is currently done in office importer .. i didn't see a XHTMLRenderer ..  \nvmassol - (03/11/2008 08:47): sure  \nvmassol - (03/11/2008 08:47): because it's probably not done right  \nvmassol - (03/11/2008 08:47): :)  \nasiri - (03/11/2008 08:48): i will fix it asap, 10 mins max .. :)  \nasiri - (03/11/2008 08:48): btw, how can i learn about different renderers available ?  \nasiri - (03/11/2008 08:48): (look at the code) ? :)  \nvmassol - (03/11/2008 08:48): check the renderer package  \nasiri - (03/11/2008 08:48): ok, thanks.  \nvmassol - (03/11/2008 08:49): they are all there  \nvmassol - (03/11/2008 08:49): but right now we have only 2 main ones: xwiki syntax and XHTML  \nvmassol - (03/11/2008 08:50): we also have adapters to use wikimodel renderers and doxia renderers  \nvmassol - (03/11/2008 08:50): (although they are not fully complete yet)  \nasiri - (03/11/2008 08:51): Got it. This is begining to make sense to me now :P  \nasiri - (03/11/2008 08:59): vmassol: i was bit mislead earlier about xhtml 1.0 and xwiki 1.0, i have to make a small modification to code so that this ambiguity is removed, won't take more than a hour. Thanks for the explanation. :)  \nvmassol - (03/11/2008 09:13): asiri: np, thanks to you  \njvelociter\\_ - (03/11/2008 10:00): Hi vmassol , good morning. There is a problem with special symbols inside CDATA  \njvelociter\\_ - (03/11/2008 10:00): check the test http://rafb.net/p/Osiql460.html  \nvmassol - (03/11/2008 10:00): jvelociter\\_: hi  \njvelociter\\_ - (03/11/2008 10:00): It fails with http://rafb.net/p/T0KYkA56.html  \nvmassol - (03/11/2008 10:01): jvelociter\\_: I don't see the pb in your first paste  \njvelociter\\_ - (03/11/2008 10:01): This is just a failing test :)  \nvmassol - (03/11/2008 10:01): ah right  \nvmassol - (03/11/2008 10:01): it was just the test  \njvelociter\\_ - (03/11/2008 10:01): the failure is in the second paste  \nvmassol - (03/11/2008 10:01): the second is the exectun  \nvmassol - (03/11/2008 10:01): :)  \nvmassol - (03/11/2008 10:02): execution  \nvmassol - (03/11/2008 10:02): ok I'll fix this thanks  \njvelociter\\_ - (03/11/2008 10:03): Thank you  \nvmassol - (03/11/2008 10:04): ok it's just the XHTML renderer  \nxwikibot - (03/11/2008 10:07): XWiki.XWikiAllGroup was modified by xwiki:XWiki.RaffaelloPelagalli - http://www.xwiki.org/xwiki/bin/view/XWiki/XWikiAllGroup  \nxwikibot - (03/11/2008 10:07): XWiki.pppp was modified by XWiki.VincentMassol (deleted document) - http://www.xwiki.org/xwiki/bin/view/XWiki/pppp  \nxwikibot - (03/11/2008 10:10): Plugins.DocumentTreePlugin was modified by xwiki:XWiki.VincentMassol (Rollback to version 8.7) - http://code.xwiki.org/xwiki/bin/view/Plugins/DocumentTreePlugin  \nxwikibot - (03/11/2008 10:26): Applications.AdministrationApplication was modified by xwiki:XWiki.jvdrean (Added a warning about pages not to import on an existing installation) - http://code.xwiki.org/xwiki/bin/view/Applications/AdministrationApplication  \nxwikibot - (03/11/2008 10:26): Applications.AdministrationApplicationDownload was modified by xwiki:XWiki.jvdrean - http://code.xwiki.org/xwiki/bin/view/Applications/AdministrationApplicationDownload  \nasiri - (03/11/2008 11:18): vmassol : i need a small help, consider the following xhtml line,  \nasiri - (03/11/2008 11:18): <p class=\"western\">Text in a <sup><span style=\"color:;font-family=;font-size=2pt;\">superscript</span></sup>  \nasiri - (03/11/2008 11:18): format</p>  \nasiri - (03/11/2008 11:18): (notice the new line)  \nasiri - (03/11/2008 11:18): this is rendered into xwiki 2.0 as :  \nasiri - (03/11/2008 11:18): (% class=\"western\" %)  \nasiri - (03/11/2008 11:18): Text in a ,,(% style=\"color:;font-family=;font-size=2pt;\" %)subscript,,(%%)  \nasiri - (03/11/2008 11:18): format  \nasiri - (03/11/2008 11:18): (again the newline)  \nvmassol - (03/11/2008 11:19): ok  \nvmassol - (03/11/2008 11:19): what's the question?  \nasiri - (03/11/2008 11:19): sorry, the xwiki 2.0 one is :  \nasiri - (03/11/2008 11:20): (% class=\"western\" %)  \nasiri - (03/11/2008 11:20): Text in a ^^(% style=\"color:;font-family=;font-size=2pt;\" %)superscript^^(%%)  \nasiri - (03/11/2008 11:20): format  \nasiri - (03/11/2008 11:20): the problem is the newline ..  \nasiri - (03/11/2008 11:20): the xwiki 2.0 should not have a new line isn't it ?  \nasiri - (03/11/2008 11:20): or should it not be present to the xwiki 2.0 renderer in the first place ?   \nvmassol - (03/11/2008 11:21): if there's no BR in the html content there shouldn't be a newline  \nasiri - (03/11/2008 11:22): aha, can you tell me the procedure i should follow when i see something like this ? is it \\* create a jira issue and attach a patch ?  \nasiri - (03/11/2008 11:22): and a small help on where should i start looking in the code ? :)  \nvmassol - (03/11/2008 11:23): wait I'm testing it  \nvmassol - (03/11/2008 11:24): asiri: yes there seems to be a problem so yes can you create a jira issue for it (component = rendering)?  \nasiri - (03/11/2008 11:25): ok, and any help on where i should start looking into ? :)  \nvmassol - (03/11/2008 11:25): fyi I have created the following test: http://rafb.net/p/RV3zO037.html  \nvmassol - (03/11/2008 11:25): I can fix it  \nvmassol - (03/11/2008 11:25): would be simpler  \nasiri - (03/11/2008 11:25): oh, thanks :)  \nvmassol - (03/11/2008 11:25): in general I can fix anything related to rendering  \nvmassol - (03/11/2008 11:25): since this is what I'm working on  \nasiri - (03/11/2008 11:25): cooool :)  \nvmassol - (03/11/2008 11:26): however I need to fix jerome's problem first  \nvmassol - (03/11/2008 11:26): so I probably won't be able to fix it before tonight  \nvmassol - (03/11/2008 11:26): is that ok?  \nasiri - (03/11/2008 11:26): oki doki, i can wait, i'll keep on testing / working on other issues :)  \nvmassol - (03/11/2008 11:26): re the office import  \njvelociter\\_ - (03/11/2008 11:26): vmassol: the issue I raised is not very urgent. I'm not waiting for it  \nvmassol - (03/11/2008 11:26): we need to decide if we want to remove the fonts, etc  \nvmassol - (03/11/2008 11:27): jvelociter\\_: ok cool. I have it almost fixed though  \njvelociter\\_ - (03/11/2008 11:27): If you want, we can just commit the test that is failing  \njvelociter\\_ - (03/11/2008 11:27): vmassol: ah ok :)  \nvmassol - (03/11/2008 11:28): asiri: I'd send an email if I were you  \nvmassol - (03/11/2008 11:28): with a proposal  \nvmassol - (03/11/2008 11:28): maybe it should be an option of the importer?  \nasiri - (03/11/2008 11:28): you mean ?  \nvmassol - (03/11/2008 11:28): see above  \nasiri - (03/11/2008 11:28): about new lines ?  \nvmassol - (03/11/2008 11:29): no  \nvmassol - (03/11/2008 11:29): \"we need to decide if we want to remove the fonts, etc\"  \njvelociter\\_ - (03/11/2008 11:30): vmassol: there is one thing I'm looking forward, it's a decision on where do we store new 2.0 macros :) I can start a thread on the topic actually  \nvmassol - (03/11/2008 11:30): jvelociter\\_: I'm not sure  \nvmassol - (03/11/2008 11:31): we have several options  \nvmassol - (03/11/2008 11:31): yes you can start a thread  \nasiri - (03/11/2008 11:31): vmassol : got it, will send a mail (proposal)  \nvmassol - (03/11/2008 11:31): jvelociter: we could move all macros in the same place  \njvelociter\\_ - (03/11/2008 11:31): the discussion we had with thomasmortagne \u00a0is that some of such macros are alike applications (xar + jar)  \njvelociter\\_ - (03/11/2008 11:32): and should be distributed as such  \nvmassol - (03/11/2008 11:32): everything is an application in XE  \nvmassol - (03/11/2008 11:32): (although we're not yet packaging it as one for different reasons)  \nvmassol - (03/11/2008 11:32): s/it/them/  \nvmassol - (03/11/2008 11:33): now re the front part I still haven't found the time to think about it  \nvmassol - (03/11/2008 11:33): (the js, etc)  \nvmassol - (03/11/2008 11:33): problem is that I won't have the time for some time  \nvmassol - (03/11/2008 11:34): since I really want to finisht eh rendering   \nvmassol - (03/11/2008 11:34): for 1.7  \nvmassol - (03/11/2008 11:34): and I need 1 day for thinking about this  \nvmassol - (03/11/2008 11:34): so let's hope you and tohers can make proposals  \nvmassol - (03/11/2008 11:35): actually I need to take one day off and help you on this  \nvmassol - (03/11/2008 11:35): that would be best  \njvelociter\\_ - (03/11/2008 11:35): vmassol: I understand :)   \nvmassol - (03/11/2008 11:37): maybe we can schedule to talk about it tomorrow afternoon  \nvmassol - (03/11/2008 11:37): I'd like to finish fixing the 2 bugs + the error handling part I'm currently on before  \njvelociter\\_ - (03/11/2008 11:38): vmassol: sounds good to me, if you can make it  \njvelociter\\_ - (03/11/2008 11:39): thomasmortagne: is it possible for you ?  \njvelociter\\_ - (03/11/2008 11:40): i will start the thread anyway, so that we have something to base the talk on, and maybe we'll get some inputs until then  \nvmassol - (03/11/2008 11:40): thomasmortagne: btw what's your status on the code macro and the groovy module/macro?  \nthomasmortagne - (03/11/2008 11:43): jvelociter\\_ : i don't think I have time since I did not started groovy macro yet :( i hope to be able to finish the glassfish/XE distribution this morning then i will start  \nthomasmortagne - (03/11/2008 11:44): the code macros works well but i wanted to do the groovy macro first to think about jython component/macro at same time (for now code macro use jython directly)  \nthomasmortagne - (03/11/2008 11:44): vmassol:  \nthomasmortagne - (03/11/2008 11:45): but anyway i'm here tomorrow so except for that i don't have timed plan  \nlucaa - (03/11/2008 12:37): hi xwikiers, hi vmassol\\_  \nlucaa - (03/11/2008 12:37): I have a new question about syntaxes and rendering  \nlucaa - (03/11/2008 12:40): the xhtml syntax is represented, for the moment, by the rendered xwiki/2.0 syntax, right? For example, the XHTML that I receive when editing with Wysiwyg a document will be the rendered xwiki/2.0  \nasiri - (03/11/2008 12:43): vmassol: just wanted to ask you what is the reasn behind removing fonts / style information when importing office documents ? i mean shouldn't we try to import them as they are ?  \nasiri - (03/11/2008 12:43): i was going to send a mail, but wanted to make myself sure first.  \nvmassol\\_ - (03/11/2008 12:43): lucaa: no  \nvmassol\\_ - (03/11/2008 12:44): well  \nvmassol\\_ - (03/11/2008 12:44): right now we only have a xwiki syntax renderer  \nvmassol\\_ - (03/11/2008 12:44): but it shouldn't be hardcoded  \nlucaa - (03/11/2008 12:44): vmassol\\_: \u00a0yes, I know it should not be like that (i.e. the semantic is different) but for the moment \\_it is\\_ like that, right?  \nvmassol\\_ - (03/11/2008 12:45): yes  \nvmassol\\_ - (03/11/2008 12:45): let me check, we have a class for creating renderers that you should use  \nvmassol\\_ - (03/11/2008 12:46): DefaultPrintRendererFactory  \nlucaa - (03/11/2008 12:46): the problem is with adding links to new pages. I think this kind of action should be seemless in the syntax, and for the moment, the way the XHTML syntax is right now, it is not  \nvmassol\\_ - (03/11/2008 12:46): (it's a component)  \nlucaa - (03/11/2008 12:46): vmassol\\_: I looked at it  \nvmassol\\_ - (03/11/2008 12:46): I don't understand what you mean  \nvmassol\\_ - (03/11/2008 12:46): it's seamless  \nvmassol\\_ - (03/11/2008 12:46): in the syntax  \nlucaa - (03/11/2008 12:47): wait I'll pastebin an example  \nvmassol\\_ - (03/11/2008 12:48): asiri: because in lots of cases what we are interested in is the content, not the style. Also if you start importing the styles your document won't be editable in wiki mode since there'll be tons of (% %) everywhere  \nvmassol\\_ - (03/11/2008 12:48): but some users will want to import the styles  \nvmassol\\_ - (03/11/2008 12:48): (although it'll never be the same as the original doc anywya)  \nasiri - (03/11/2008 12:49): vmassol: ok.  \nvmassol\\_ - (03/11/2008 12:49): lucaa: got to go for lunch, will look when I'm back  \nlucaa - (03/11/2008 12:51): vmassol\\_: ok, I got to go to school, tty from there  \nasiri - (03/11/2008 12:54): sdumitriu: heard you are busy with the thesis :) hope you'll be able to review hte webdav patch afterwards .. :)  \nsdumitriu - (03/11/2008 12:55): asiri: Yes, tonight is the deadline  \nasiri - (03/11/2008 12:55): oh, good luck :)  \nsdumitriu - (03/11/2008 12:55): Thanks  \njvelociter - (03/11/2008 12:58): The list of macros declaration from templates/macros.vm, for the one interested http://rafb.net/p/0y6ohe35.html  \njvelociter - (03/11/2008 12:58): (I know thomasmortagne is ;))  \nxwikibot - (03/11/2008 13:39): XWiki.ramongb was modified by XWiki.ramongb (Created user) - http://www.xwiki.org/xwiki/bin/view/XWiki/ramongb  \njvelociter\\_ - (03/11/2008 14:01): would be interesting to port the footnote macro to 2.0 syntax  \nvmassol\\_ - (03/11/2008 14:04): jvelociter\\_: what would be the syntax for inserting a footnote?  \njvelociter\\_ - (03/11/2008 14:04): I don't know. {{footnote}}He is my footnote{{/footnote}} ?  \nvmassol\\_ - (03/11/2008 14:05): I don't think so  \nvmassol\\_ - (03/11/2008 14:05): we have 2 options  \nvmassol\\_ - (03/11/2008 14:05): 1) use a macro. But that macro won't have content since it's just an anchor  \nvmassol\\_ - (03/11/2008 14:05): 2) use a transformation. In which case we can invent a syntax  \nvmassol\\_ - (03/11/2008 14:06): oh  \nvmassol\\_ - (03/11/2008 14:06): wait  \nvmassol\\_ - (03/11/2008 14:06): I'm mixing with references  \nvmassol\\_ - (03/11/2008 14:06): I think  \nvmassol\\_ - (03/11/2008 14:06): wdym by a footnote?  \nvmassol\\_ - (03/11/2008 14:06): isn't it about including a small subscript 1, 2, etc?  \njvelociter\\_ - (03/11/2008 14:07): footnote is something[1] and you have at the bottom of the document [1]: the note for 1  \nvmassol\\_ - (03/11/2008 14:07): s/subscript/superscript/  \njvelociter\\_ - (03/11/2008 14:07): I think  \nvmassol\\_ - (03/11/2008 14:07): ok so it's an anchor  \nvmassol\\_ - (03/11/2008 14:07): and doesn't have a content  \njvelociter\\_ - (03/11/2008 14:07): yes, but you still need to define the content for it  \njvelociter\\_ - (03/11/2008 14:07): define of mark somehow  \nvmassol\\_ - (03/11/2008 14:07): right so 2 syntaxes  \nvmassol\\_ - (03/11/2008 14:08): one for defining footnote contents and one for footnote anchors  \njvelociter\\_ - (03/11/2008 14:08): currently it's done like this : something #footnote(\"My note on something\")  \nvmassol\\_ - (03/11/2008 14:08): ?  \nvmassol\\_ - (03/11/2008 14:08): so you don't reuse footnotes?  \nvmassol\\_ - (03/11/2008 14:09): answer is no right now: http://code.xwiki.org/xwiki/bin/view/Macros/FootnoteMacro  \nvmassol\\_ - (03/11/2008 14:09): ah no  \nvmassol\\_ - (03/11/2008 14:09): I'm wrong  \nvmassol\\_ - (03/11/2008 14:09): we have http://code.xwiki.org/xwiki/bin/view/Macros/PutFootnotesMacro  \njvelociter\\_ - (03/11/2008 14:09): I don't think they are intended to be reused, as references are  \njvelociter\\_ - (03/11/2008 14:09): it's very contextual  \njvelociter\\_ - (03/11/2008 14:09): think of it like notes in a book  \nvmassol\\_ - (03/11/2008 14:09): they are  \nvmassol\\_ - (03/11/2008 14:09): see the way it's currently done  \nvmassol\\_ - (03/11/2008 14:10): which makes sense  \nvmassol\\_ - (03/11/2008 14:10): so you have 2 macros  \nvmassol\\_ - (03/11/2008 14:10): anyway that's not what I wanted to discuss above  \njvelociter\\_ - (03/11/2008 14:10): :)  \nvmassol\\_ - (03/11/2008 14:11): it's the other option of having 2)  \njvelociter\\_ - (03/11/2008 14:11): most of the times, you want them at the bottom of the doc  \nvmassol\\_ - (03/11/2008 14:11): ie define a syntax for inserting a footnote  \njvelociter\\_ - (03/11/2008 14:11): yes maybe it make sense  \nvmassol\\_ - (03/11/2008 14:11): which means it could be done like this: [1]  \njvelociter\\_ - (03/11/2008 14:11): the syntax  \nvmassol\\_ - (03/11/2008 14:12): or rather [footnote1]  \nvmassol\\_ - (03/11/2008 14:12): but it's porbably ambiguous  \nvmassol\\_ - (03/11/2008 14:12): and not very performant  \nvmassol\\_ - (03/11/2008 14:14): anyway I don't think it's an important macro to have for 1.7  \nvmassol\\_ - (03/11/2008 14:14): since we can use the velocity macros for now  \nvmassol\\_ - (03/11/2008 14:14): the only interesting thing is that there are some shared inter macro variables  \nvmassol\\_ - (03/11/2008 14:15): which is currently lacking in our MacroTransformationContext  \nvmassol\\_ - (03/11/2008 14:15): thomasmortagne: I think we need to have a way to set any type of context property in there  \njvelociter\\_ - (03/11/2008 14:16): :) so not completely useless. Anyway it was just an idea  \njvelociter\\_ - (03/11/2008 14:17): Something that is important for 1.7 I think, is the ability to mark parameters as optional or not. This for the wysiwyg to be able to treat mandatory/optional parameters differentlu  \njvelociter\\_ - (03/11/2008 14:17): (through an \"advanced options\" UI or something in that spirit)  \nthomasmortagne - (03/11/2008 14:18): vmassol: yes sure  \nvmassol\\_ - (03/11/2008 14:18): re parametersI thought it was already there  \nvmassol\\_ - (03/11/2008 14:19): thomasmortagne: isn't that already present?  \nthomasmortagne - (03/11/2008 14:20): it was but i don't think BeanUtils support this no we don't have the mandatory thing anymore  \nthomasmortagne - (03/11/2008 14:21): vmassol:  \nvmassol\\_ - (03/11/2008 14:21): thomasmortagne: so our descirptor doesn't have this informaiton anymore?  \nvmassol\\_ - (03/11/2008 14:21): if so that's an important regression  \nthomasmortagne - (03/11/2008 14:22): it's not really a regression as we never had this in a released version of XWiki AFAIK  \nvmassol\\_ - (03/11/2008 14:22): sure sure  \nvmassol\\_ - (03/11/2008 14:22): I'm not interested in semantics ;)  \nvmassol\\_ - (03/11/2008 14:22): we had it in the code because it was useful  \nvmassol\\_ - (03/11/2008 14:22): and then it was removed  \nvmassol\\_ - (03/11/2008 14:23): if that's what you're telling me  \nvmassol\\_ - (03/11/2008 14:23): that's I call a regression but I don't mind how we call it, just that we absolutely need this  \nvmassol\\_ - (03/11/2008 14:23): otherwise I don't see how we can handle our macros  \nvmassol\\_ - (03/11/2008 14:23): and wysiwyg editor  \nvmassol\\_ - (03/11/2008 14:23): since someone may not pass a mandatory parameter  \nvmassol\\_ - (03/11/2008 14:24): and we can introspect whether it's mandatory or not  \nvmassol\\_ - (03/11/2008 14:24): s/can/can't  \nxwikibot - (03/11/2008 14:24): XWiki.BrenoVilela was modified by XWiki.BrenoVilela (Created user) - http://www.xwiki.org/xwiki/bin/view/XWiki/BrenoVilela  \nvmassol\\_ - (03/11/2008 14:24): thomasmortagne: could you put it back somehow?  \nthomasmortagne - (03/11/2008 14:24): currently macro will throw axception  \nvmassol\\_ - (03/11/2008 14:24): we need it at least in the descriptor  \nvmassol\\_ - (03/11/2008 14:24): that's the minimum  \nthomasmortagne - (03/11/2008 14:25): yes I'm thinking it was not a so good idea to use BeaUtils after all...  \nvmassol\\_ - (03/11/2008 14:25): I don't see the relationship  \nvmassol\\_ - (03/11/2008 14:25): between beanutils and this  \nvmassol\\_ - (03/11/2008 14:25): this = descripotor  \nvmassol\\_ - (03/11/2008 14:25): descriptor  \nvmassol\\_ - (03/11/2008 14:26): (and BeanUtils can be extended I'm sure)  \nvmassol\\_ - (03/11/2008 14:26): btw on a related topic I don't think we should expose beanutils  \nthomasmortagne - (03/11/2008 14:26): we used beautils because it use directly the class as descriptor but if a macro need to create a list of parameters descriptor \u00a0it exactly what we had before...  \nvmassol\\_ - (03/11/2008 14:26): thomasmortagne: so we can still say that a parameter is mandatory?  \nvmassol\\_ - (03/11/2008 14:26): (that's all I was asking)  \nthomasmortagne - (03/11/2008 14:27): yes we need to have a Converter component  \nthomasmortagne - (03/11/2008 14:27): vmassol: I need to find a way to implement it  \nthomasmortagne - (03/11/2008 14:27): there is ways  \nvmassol\\_ - (03/11/2008 14:27): thomasmortagne: can we still say that a parameter is mandatory in the macro descriptor?  \nthomasmortagne - (03/11/2008 14:28): no we can't  \nvmassol\\_ - (03/11/2008 14:28): ah that's bad  \nthomasmortagne - (03/11/2008 14:28): because we don't have parameters descriptor anymore  \nvmassol\\_ - (03/11/2008 14:28): oh  \nvmassol\\_ - (03/11/2008 14:28): didn't realize this  \nvmassol\\_ - (03/11/2008 14:28): ouch  \nvmassol\\_ - (03/11/2008 14:29): that's a very important bug since it makes it impossible for the wysiwyg to implement macros  \nvmassol\\_ - (03/11/2008 14:29): since it needs to know:  \nvmassol\\_ - (03/11/2008 14:29): - parameter namle  \nvmassol\\_ - (03/11/2008 14:29): - parameter desription  \nvmassol\\_ - (03/11/2008 14:29): - whether the param is mandatory or not  \nvmassol\\_ - (03/11/2008 14:29): - default value  \nvmassol\\_ - (03/11/2008 14:30): (the last one is maybe not necessary I don't know)  \nthomasmortagne - (03/11/2008 14:30): maybe we could use annotations for this  \nvmassol\\_ - (03/11/2008 14:30): I really don't understand why we dropped this  \nvmassol\\_ - (03/11/2008 14:30): since this was the reason we created the notion of MAcro Descriptor  \nthomasmortagne - (03/11/2008 14:31): yes whe we did not used BeanUtils because we needed to describe a list of parameters  \nthomasmortagne - (03/11/2008 14:32): but you said it was too difficult to create a new macro and we removed it to use BeanUtils  \nlucaa - (03/11/2008 14:35): hi devs, hi vmassol\\_, again.  \nvmassol\\_ - (03/11/2008 14:35): the dicciulty had nothing to do with descriptors  \nvmassol\\_ - (03/11/2008 14:35): difficulty  \nvmassol\\_ - (03/11/2008 14:35): we need that anyway  \nlucaa - (03/11/2008 14:36): my problem with the xhtml syntax is that I would like to generate links to new pages from the wysiwyg just the way I am generating links to existing pages  \nvmassol\\_ - (03/11/2008 14:36): lucaa: and that doesn't work?  \nlucaa - (03/11/2008 14:37): yes, it does, because it's translated to the same xwiki2 syntax  \nlucaa - (03/11/2008 14:37): it does not work properly the other way around, when I want to edit a document, because what I get is the rendered xwiki2.0, and not a xhtml syntax version of it  \nvmassol\\_ - (03/11/2008 14:38): lucaa: I don't undestand  \nvmassol\\_ - (03/11/2008 14:39): edit a document in wysiwyg = you get XHTML markup  \nlucaa - (03/11/2008 14:40): so, I generate and send this: <!--startwikilink:Space.UnknownPage--><span class=\"wikilink\"><a href=\"/xwiki/bin/view/Space/UnknownPage\">label</a></span><!--stopwikilink--> which gets correctly translated to [label>>Space.UnknownPage]] in xwiki 2.0  \nlucaa - (03/11/2008 14:40): and, if I do save & continue, for example, all that gets transformed into <!--startwikilink:Space.UnknownPage--><span class=\"wikicreatelink\"><a href=\"/xwiki/bin/view/Space/UnknownPage\"><span class=\"wikicreatelinktext\">label</span><span class=\"wikicreatelinkqm\">?</span></a></span><!--stopwikilink-->  \nvmassol\\_ - (03/11/2008 14:41): (btw lucaa I wanted to remove this ? and only have CSS but I asked Laurent and he said he didn't like it)  \nvmassol\\_ - (03/11/2008 14:41): lucaa: sure, what's wrong?  \nlucaa - (03/11/2008 14:42): first it's inconsistent. It's multiple syntax for the same thing. But let's skip this  \nlucaa - (03/11/2008 14:43): second, it's the fact that the existance of a page is not the responsibility of the editor of the link, in any syntax. It's like I'd state, in the syntax I'm using to edit, that this is a link to a new page or an old page. What if I'm wrong or lying?  \nlucaa - (03/11/2008 14:44): in wiki syntax I say: [[label>>Page]], without caring which kind of page that is  \nlucaa - (03/11/2008 14:44): why would I need to care for xhtml  \nlucaa - (03/11/2008 14:44): ?  \nvmassol\\_ - (03/11/2008 14:44): yes XHTML is both a syntax and a rendering  \nvmassol\\_ - (03/11/2008 14:44): that's what is causing that ambiguity  \nlucaa - (03/11/2008 14:45): but it should not be the same  \nlucaa - (03/11/2008 14:45): rendering should not be inversable or equivalent to xhtml syntax  \nvmassol\\_ - (03/11/2008 14:45): let me think  \nlucaa - (03/11/2008 14:45): I think I'll need to leave for the other class in like 15 minutes. Should we talk tonight when I get back to the office?  \nlucaa - (03/11/2008 14:45): (17 fr time)  \nvmassol\\_ - (03/11/2008 14:46): lucaa: feel free to propose something if you have already thought about this  \nlucaa - (03/11/2008 14:46): well, the only thing is the definition / specification of the xhtml syntax  \nvmassol\\_ - (03/11/2008 14:46): I'll have to go run some errands but I'll be here later anyway  \nvmassol\\_ - (03/11/2008 14:50): lucaa: the only pb I think is simply because we're making the missing page a semantic information instead of a style information  \nvmassol\\_ - (03/11/2008 14:50): ah no  \nvmassol\\_ - (03/11/2008 14:50): that's not correct, even if it was style only we'd still have a specific class  \nvmassol\\_ - (03/11/2008 14:51): the question is more of translating from one syntax to another  \nvmassol\\_ - (03/11/2008 14:52): but the answer is the sale  \nvmassol\\_ - (03/11/2008 14:52): same  \nvmassol\\_ - (03/11/2008 14:53): if I had to translate from xwiki syntax to confluence synatx for ex  \nvmassol\\_ - (03/11/2008 14:53): I'd use a xwiki parser  \nvmassol\\_ - (03/11/2008 14:53): that would generae a XDOM  \nvmassol\\_ - (03/11/2008 14:53): then I'd use a Confluence syntax renderer  \nvmassol\\_ - (03/11/2008 14:53): exactly as I'm using a XHTML syntax renderer  \nvmassol\\_ - (03/11/2008 14:53): so at least that part is good  \nvmassol\\_ - (03/11/2008 14:55): I think it's just that some syntaxes are more expressive than others  \nvmassol\\_ - (03/11/2008 14:55): or rather that we're not using the xwiki syntax for final output  \nvmassol\\_ - (03/11/2008 14:55): so it doesn't need to know  \nvmassol\\_ - (03/11/2008 14:56): no that's wrong  \nvmassol\\_ - (03/11/2008 14:56): we're displaying the xwiki syntax to the user too  \nvmassol\\_ - (03/11/2008 14:56): so yes it's just that some syntaxes are more expressive than others  \nvmassol\\_ - (03/11/2008 14:56): it's a lack in the xwiki syntax  \nvmassol\\_ - (03/11/2008 14:56): the user cannot know if the link exists or not  \nvmassol\\_ - (03/11/2008 14:56): just by looking at the xwiki syntax  \nvmassol\\_ - (03/11/2008 14:56): that's a limitation of our xwiki syntax  \nvmassol\\_ - (03/11/2008 14:57): but our XHTML syntax doens't have this liack  \nvmassol\\_ - (03/11/2008 14:57): lack  \nvmassol\\_ - (03/11/2008 14:57): I don't see what's wrong  \nvmassol\\_ - (03/11/2008 14:57): all looks fine and normal to me  \nvmassol\\_ - (03/11/2008 14:58): or rather I can't find any other way of doing this right now  \nvmassol\\_ - (03/11/2008 14:58): I'll keep thinking about it  \nvmassol\\_ - (03/11/2008 14:59): yes the only other option I can think of  \nvmassol\\_ - (03/11/2008 14:59): is to have 2 XHTML parsers and 2 XHTML renderers  \nvmassol\\_ - (03/11/2008 15:00): which is maybe the way to go  \nvmassol\\_ - (03/11/2008 15:00): of course they'd all share 90% of the code  \nvmassol\\_ - (03/11/2008 15:02): we'd need to list all the differences between them  \nvmassol\\_ - (03/11/2008 15:02): got to go, bbiab  \nxwikibot - (03/11/2008 15:10): Design.NewCommentsImplementation was modified by xwiki:XWiki.jvelociter (Added a TOC to have a better view of the structure of the document) - http://dev.xwiki.org/xwiki/bin/view/Design/NewCommentsImplementation  \nxwikibot - (03/11/2008 18:08): Plugins.TreePlugin was modified by xwiki:XWiki.BrianJones (Added comment) - http://code.xwiki.org/xwiki/bin/view/Plugins/TreePlugin  \nasiri - (03/11/2008 20:04): vmassol: when removing style information from html content, is it ok to filter out elements with signatures like <span style=\"\"></span> ? will this cause any harm ?  \nvmassol - (03/11/2008 20:04): asiri: you mean empty spans?  \nasiri - (03/11/2008 20:05): no no, spans with style information ..  \nasiri - (03/11/2008 20:05): will it rip off required info ?  \nvmassol - (03/11/2008 20:05): yes it can  \nvmassol - (03/11/2008 20:06): hmm  \nasiri - (03/11/2008 20:06): hummm ... what should i look for then ? got any hints ?   \nvmassol - (03/11/2008 20:06): you're talking only of the use case where we remove style information right?  \nasiri - (03/11/2008 20:06): yes.  \nasiri - (03/11/2008 20:06): i'm wondering what would be the best approach ..  \nvmassol - (03/11/2008 20:06): let me check the XHMTL renderer  \nvmassol - (03/11/2008 20:07): the approach is easy  \nvmassol - (03/11/2008 20:07): take a complex word document  \nvmassol - (03/11/2008 20:07): and make it work  \nasiri - (03/11/2008 20:07): i meant about ripping off style info ..  \nvmassol - (03/11/2008 20:07): well you can remove style information!  \nasiri - (03/11/2008 20:08): i'm following that approach already, but i have a set of documents with complex formattings, i'm trying ech of them, finding errors and then fixing them ..  \nvmassol - (03/11/2008 20:08): i.e. all style=\"\" attributes  \nasiri - (03/11/2008 20:08): gooooood :)  \nasiri - (03/11/2008 20:08): that's a relief :)  \nvmassol - (03/11/2008 20:08): some span are used for links and they can contain potentially useful class information  \nvmassol - (03/11/2008 20:09): so I'm not sure that you can remove spans blindly  \nasiri - (03/11/2008 20:09): i see, so only the style=\"\" attributes whould be removed .. i see  \nasiri - (03/11/2008 20:09): should\\*  \nvmassol - (03/11/2008 20:09): spans are also used for formatting  \nvmassol - (03/11/2008 20:09): such as bold, etc  \nasiri - (03/11/2008 20:10): hmm, 1. remove style=\"\" attributes, if the resulting <span> is empty, remove it as well ?  \nvmassol - (03/11/2008 20:10): err \u00a0no that's not correct  \nvmassol - (03/11/2008 20:10): they're not used for bold  \nvmassol - (03/11/2008 20:10): yes  \nasiri - (03/11/2008 20:10): ok  \nvmassol - (03/11/2008 20:10): remove empty elements when importing  \nvmassol - (03/11/2008 20:10): (I think)  \nvmassol - (03/11/2008 20:10): again you're asking me these questions  \nvmassol - (03/11/2008 20:10): but I have no clue  \nvmassol - (03/11/2008 20:11): you're the expert :)  \nvmassol - (03/11/2008 20:11): I'm just rtying to imagine but I don't know  \nvmassol - (03/11/2008 20:11): I'm just guessing  \nvmassol - (03/11/2008 20:11): the only good way  \nvmassol - (03/11/2008 20:11): is to use complex word documents  \nvmassol - (03/11/2008 20:11): and try to convert them  \nasiri - (03/11/2008 20:12): yes yes, i'm doing it, and when i see something wrong, i try to fix it. I was thinking how to fix this style issue :)  \nasiri - (03/11/2008 20:12): i think i know now.  \nasiri - (03/11/2008 20:12): will fix it somehow.  \nasiri - (03/11/2008 20:12): thanks :)  \nvmassol - (03/11/2008 20:12): not sure what issue you're talking about but glad I could help  \nasiri - (03/11/2008 20:12): he he, ok :)  \nxwikibot - (03/11/2008 20:45): Design.RatingSystem was modified by xwiki:XWiki.jvelociter - http://dev.xwiki.org/xwiki/bin/view/Design/RatingSystem  \n\n"}