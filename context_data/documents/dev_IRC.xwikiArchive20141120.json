{"id": "dev:IRC.xwikiArchive20141120", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20141120", "title": "IRC Archive for channel #xwiki on 20 November 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<silverdrop>\u00a0has quit  \n01:56\u00a0<momomomomo>\u00a0has quit  \n02:15\u00a0<sburjan>\u00a0has quit  \n05:34\u00a0<silverdrop>\u00a0has joined #xwiki  \n05:38\u00a0<silverdrop>\u00a0has quit  \n06:00\u00a0<Denis>\u00a0has joined #xwiki  \n06:02\u00a0<Denis1>\u00a0has quit  \n06:49\u00a0<mflorea>\u00a0has joined #xwiki  \n06:56\u00a0<mflorea>\u00a0has quit  \n06:59\u00a0<mflorea>\u00a0has joined #xwiki  \n07:23\u00a0<silverdrop>\u00a0has joined #xwiki  \n07:28\u00a0<silverdrop>\u00a0has quit  \n07:39\u00a0<silverdrop>\u00a0has joined #xwiki  \n07:42\u00a0<sburjan>\u00a0has joined #xwiki  \n07:48\u00a0<mflorea>\u00a0has quit  \n08:05\u00a0<Lyes>\u00a0has joined #xwiki  \n08:07\u00a0<msmeria>\u00a0has joined #xwiki  \n08:13\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:39\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:07\u00a0<vmassol>\u00a0has joined #xwiki  \n09:08\u00a0<vmassol>\u00a0good morning  \n09:08\u00a0<AFKGeek>\u00a0has joined #xwiki  \n09:08\u00a0<vmassol>\u00a0today is BFD :)  \n09:10\u00a0<Lyes>\u00a0has quit  \n09:10\u00a0<Lyes1>\u00a0has joined #xwiki  \n09:17\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n09:39\u00a0<cjd>\u00a0has joined #xwiki  \n09:44\u00a0<vmassol>\u00a0we're starting to get quite a nice page of testimonials here: http://www.xwiki.org/xwiki/bin/view/References/Testimonials :)  \n09:45\u00a0<woshilapin>\u00a0has quit  \n09:47\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:49\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:51\u00a0<mflorea>\u00a0has joined #xwiki  \n09:56\u00a0<Slashman>\u00a0has joined #xwiki  \n10:11\u00a0<lucaa>\u00a0has joined #xwiki  \n10:39\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:49\u00a0<AFKGeek>\u00a0has quit  \n10:53\u00a0<AFKGeek>\u00a0has joined #xwiki  \n10:57\u00a0<AFKGeek>\u00a0has quit  \n11:00\u00a0<Denis>\u00a0has quit  \n11:02\u00a0<AFKGeek>\u00a0has joined #xwiki  \n11:10\u00a0<AFKGeek>\u00a0has quit  \n11:12\u00a0<AFKGeek>\u00a0has joined #xwiki  \n11:12\u00a0<AFKGeek>\u00a0has quit  \n11:12\u00a0<DarkKnightCZ>\u00a0has quit  \n11:25\u00a0<AFKGeek>\u00a0has joined #xwiki  \n11:28\u00a0<evalica>\u00a0has joined #xwiki  \n11:30\u00a0<Denis>\u00a0has joined #xwiki  \n11:33\u00a0<ClemensR>\u00a0has joined #xwiki  \n12:54\u00a0<ClemensR>\u00a0Lyes1: ah, I forgot its bfd, sorry. thanks for fixing up after me :)  \n12:56\u00a0<Lyes1>\u00a0@ClemensR np :)  \n12:58\u00a0<ClemensR>\u00a0the issue with the positioning in the date picker \u00a0( MOCCACAL-32 ) - I am afraid this needs fixes/chnages in xwiki-platform. (unless you or someone else finds a way to mark the calendar edit dialog as \"special\")  \n13:19\u00a0<ClemensR>\u00a0(ah I am lagging behind, or github notificatiosn are slow ...)  \n13:33\u00a0<AFKGeek>\u00a0has quit  \n14:03\u00a0<Slashman>\u00a0has quit  \n14:04\u00a0<Slashman>\u00a0has joined #xwiki  \n14:10\u00a0<tmortagne>\u00a0cjd: do you remember were is the droppermission for panels ?  \n14:13\u00a0<cjd>\u00a0it's in the content page and panels are executed later  \n14:14\u00a0<tmortagne>\u00a0cjd: I meant where the droppermission is exactly called, in which template  \n14:15\u00a0<tmortagne>\u00a0found it I think  \n14:15\u00a0<cjd>\u00a0contentview ?  \n14:16\u00a0<tmortagne>\u00a0yep  \n14:17\u00a0<lucaa>\u00a0has quit  \n14:31\u00a0<lucaa>\u00a0has joined #xwiki  \n14:41\u00a0<gsmeria>\u00a0has quit  \n14:42\u00a0<vmassol>\u00a0woshilapin: hi  \n14:43\u00a0<vmassol>\u00a0woshilapin: FYI I'm fixing http://jira.xwiki.org/browse/XWIKI-11472# which is a bug you introduced ;)  \n14:43\u00a0<vmassol>\u00a0would you know by any chance the JIRA issue related to this (since your commit has not jira issue id)?  \n14:46\u00a0<vmassol>\u00a0I still don't get it why you want to resolved based on the current user....  \n14:47\u00a0<woshilapin>\u00a0vmassol: Hi  \n14:48\u00a0<woshilapin>\u00a0Not sure there was a Jira, I'm searching  \n14:49\u00a0<woshilapin>\u00a0vmassol: I confirm, no Jira about this commit  \n14:50\u00a0<vmassol>\u00a0:(  \n14:50\u00a0<vmassol>\u00a0I wonder who did the merge  \n14:50\u00a0<vmassol>\u00a0and didn't check that!  \n14:50\u00a0<vmassol>\u00a0:)  \n14:50\u00a0<tmortagne>\u00a0vmassol: should see that in the next commit I think  \n14:52\u00a0<lucaa>\u00a0has quit  \n14:52\u00a0<lucaa>\u00a0has joined #xwiki  \n14:52\u00a0<woshilapin>\u00a0Don't loose to much time on finding guilty people ;-)  \n14:53\u00a0<vmassol>\u00a0it's ioirtant  \n14:53\u00a0<vmassol>\u00a0important  \n14:53\u00a0<vmassol>\u00a0so that this person learns and doesn't do it again next time  \n14:53\u00a0<vmassol>\u00a0(it could even be me! )  \n14:53\u00a0<lucaa>\u00a0has quit  \n14:54\u00a0<vmassol>\u00a0I really don't understand your code woshilapin  \n14:55\u00a0<woshilapin>\u00a0If I recall well what is this modification...  \n14:56\u00a0<vmassol>\u00a0why this for example: #set ($userReference = $user.extractReference('DOCUMENT'))  \n14:56\u00a0<woshilapin>\u00a0At the origin, the code was in displayer\\_user.vm and displayer\\_group.vm  \n14:57\u00a0<woshilapin>\u00a0And I extract it to do a usable macro  \n14:57\u00a0<woshilapin>\u00a0But indeed, I made some modifications  \n14:58\u00a0<woshilapin>\u00a0I'm trying to find the pull request, maybe there was some comments  \n14:59\u00a0<vmassol>\u00a0AFICS $user is NOT a reference  \n14:59\u00a0<vmassol>\u00a0in display\\_users.vm it's called like this:  \n14:59\u00a0<vmassol>\u00a0#displayUser($selectedUsers)  \n14:59\u00a0<vmassol>\u00a0and $seectedUsers are strings AFAIK  \n15:00\u00a0<vmassol>\u00a0since #set ($discard = $selectedUsers.add($value))  \n15:00\u00a0<vmassol>\u00a0and #set ($values = $value.split('\\s\\*,\\s\\*'))  \n15:00\u00a0<vmassol>\u00a0so $user.extractReference is never going to work  \n15:00\u00a0<woshilapin>\u00a0If I recall well, the function I provide accepted different kind of parameter (map or string)  \n15:00\u00a0<vmassol>\u00a0since it's a String  \n15:00\u00a0<vmassol>\u00a0ah indeed it's documented  \n15:00\u00a0<vmassol>\u00a0what an ugly hack  \n15:00\u00a0<vmassol>\u00a0:(  \n15:00\u00a0<vmassol>\u00a0### @param arg Could be either a string, a reference or a list of them  \n15:01\u00a0<mflorea>\u00a0vmassol: that is a test to see if it;s a ref  \n15:01\u00a0<mflorea>\u00a0ugly but effective  \n15:01\u00a0<vmassol>\u00a0mflorea: nice test....  \n15:01\u00a0<vmassol>\u00a0(joking)  \n15:01\u00a0<vmassol>\u00a0with nice comments  \n15:01\u00a0<vmassol>\u00a0at least I understand that line now  \n15:02\u00a0<woshilapin>\u00a0https://github.com/xwiki/xwiki-platform/pull/306  \n15:02\u00a0<woshilapin>\u00a0I think Marius documented it somewhere on the wiki too  \n15:03\u00a0<vmassol>\u00a0mflorea: next time, would be nice to check that there's a jira issue before merging :)  \n15:03\u00a0<vmassol>\u00a0(I'm adding comments)  \n15:04\u00a0<mflorea>\u00a0vmassol: wdym?  \n15:04\u00a0<vmassol>\u00a0next line  \n15:04\u00a0<vmassol>\u00a0#set ($userReference = $services.model.resolveDocument($user, 'explicit', $xcontext.userReference))  \n15:04\u00a0<vmassol>\u00a0why would we want to resolve the list of user ref against the currnet user?  \n15:04\u00a0<vmassol>\u00a0mflorea: you applied the PR but there was not jira  \n15:04\u00a0<vmassol>\u00a0s/not/no  \n15:04\u00a0<mflorea>\u00a0there is  \n15:04\u00a0<vmassol>\u00a0not in the commits  \n15:05\u00a0<vmassol>\u00a0and I still don't know the jira issue BTW  \n15:05\u00a0<mflorea>\u00a0yeah, woshilapin should have put it in the commit log  \n15:05\u00a0<woshilapin>\u00a0vmassol: Against the current user is just to have a 'user' reference in general (meaning, XWiki space on the subwiki where the users are)  \n15:05\u00a0<vmassol>\u00a0dp you have it?  \n15:05\u00a0<woshilapin>\u00a0Don't know if it's the right way to do  \n15:05\u00a0<mflorea>\u00a0re current user, yes, to get the current wiki and the XWiki space  \n15:06\u00a0<mflorea>\u00a0we didn't want to hard code the XWiki space  \n15:06\u00a0<mflorea>\u00a0i.e. the space where the users are stored  \n15:06\u00a0<vmassol>\u00a0so if you have a local user or a global one then it's not going to be resolved against the same wiki....  \n15:07\u00a0<woshilapin>\u00a0Finally found it XWIKI-11039  \n15:07\u00a0<vmassol>\u00a0(for teh wiki part)  \n15:07\u00a0<woshilapin>\u00a0\\o/  \n15:07\u00a0<woshilapin>\u00a0So sorry, I didn't put it in the commit  \n15:07\u00a0<woshilapin>\u00a0Not mflorea's fault  \n15:07\u00a0<mflorea>\u00a0if the current user is from the different wiki then the passed string ref has the wik part  \n15:08\u00a0<mflorea>\u00a0at least in the case of the user displayer  \n15:08\u00a0<vmassol>\u00a0it depends who calls it  \n15:08\u00a0<vmassol>\u00a0yes in that case maybe  \n15:08\u00a0<mflorea>\u00a0I agree it's not the best option  \n15:08\u00a0<vmassol>\u00a0but not in general  \n15:08\u00a0<vmassol>\u00a0ok I'll fix that  \n15:08\u00a0<mflorea>\u00a0note that Victor pinged me about this issue, I think he's working on it  \n15:08\u00a0<vmassol>\u00a0I understand now  \n15:08\u00a0<vmassol>\u00a0I assigned myself  \n15:08\u00a0<vmassol>\u00a0it's a pity victor didn't say anything  \n15:09\u00a0<vmassol>\u00a0before I started working on it...  \n15:10\u00a0<mflorea>\u00a0ok  \n15:15\u00a0<vmassol>\u00a0Does anyone know why we have this in DefaultWikiDescriptorManager  \n15:15\u00a0<vmassol>\u00a0public String getCurrentWikiId()  \n15:16\u00a0<vmassol>\u00a0it's really bad  \n15:16\u00a0<vmassol>\u00a0since all it does is the same as $xcontext.wikiId  \n15:16\u00a0<vmassol>\u00a0so it's bad to have 2 public API ways of doing the same thing, it's confusing  \n15:16\u00a0<lucaa>\u00a0has joined #xwiki  \n15:16\u00a0<vmassol>\u00a0and I don't see what it has to do with wiki descrutors  \n15:16\u00a0<vmassol>\u00a0\\*descriptors  \n15:18\u00a0<mflorea>\u00a0I'd love to have $services.wiki.currentWiki (to be able to write $services.wiki.currentWiki.reference)  \n15:18\u00a0<vmassol>\u00a0IMO it would stil be bad  \n15:19\u00a0<vmassol>\u00a0there's one place where the current user current entity are put and should be retried from  \n15:19\u00a0<woshilapin>\u00a0has quit  \n15:19\u00a0<mflorea>\u00a0why, it returns the descriptor for the current wiki  \n15:19\u00a0<vmassol>\u00a0it's the context  \n15:19\u00a0<mflorea>\u00a0I see  \n15:19\u00a0<vmassol>\u00a0\\*retrieved  \n15:20\u00a0<tmortagne>\u00a0vmassol: we are trying to get rid of old $xwiki/$xcontext APIs  \n15:20\u00a0<vmassol>\u00a0sure execution context would be better  \n15:20\u00a0<tmortagne>\u00a0there is no such thing in velocity  \n15:20\u00a0<vmassol>\u00a0but using the descirptor api to get the current wiki is very wrong IMO  \n15:21\u00a0<vmassol>\u00a0and in any case it cannot know this  \n15:21\u00a0<vmassol>\u00a0:)  \n15:21\u00a0<vmassol>\u00a0it'll have to get it from teh context  \n15:21\u00a0<vmassol>\u00a0....  \n15:21\u00a0<tmortagne>\u00a0this is not script concern where the current wiki id is stored in some version of XWiki  \n15:21\u00a0<tmortagne>\u00a0all it knows is the API it's using  \n15:21\u00a0<vmassol>\u00a0yes and again  \n15:22\u00a0<vmassol>\u00a0using the descirptor api to get the current wiki is very bad  \n15:22\u00a0<tmortagne>\u00a0so it's better to get the XWikiContext and trigger a dependency on oldcore ?  \n15:23\u00a0<vmassol>\u00a0descriptor api is about maniulating the descriptors, it should know anything about the context  \n15:23\u00a0<vmassol>\u00a0\\*shouldn't  \n15:37\u00a0<msmeria>\u00a0has quit  \n15:44\u00a0<vmassol>\u00a0found a much nicer solution I think  \n15:44\u00a0<vmassol>\u00a0#set ($userReference = $services.model.resolveDocument($user, 'user/current'))  \n15:44\u00a0<vmassol>\u00a0:)  \n15:45\u00a0<vmassol>\u00a0no need to hardcode the 'XWiki' space nor find the current wiki  \n15:53\u00a0<tmortagne>\u00a0vmassol: did not followed all but sounded like $user could be a reference from a previous message  \n15:53\u00a0<tmortagne>\u00a0or maybe you test if it's a String before  \n15:53\u00a0<vmassol>\u00a0it's only resolved if it's a string  \n15:53\u00a0<tmortagne>\u00a0ok  \n15:54\u00a0<tmortagne>\u00a0testing the class name would have probably made more sense  \n15:55\u00a0<vmassol>\u00a0I agree  \n15:55\u00a0<vmassol>\u00a0I didn't change that code  \n15:55\u00a0<tmortagne>\u00a0that the extractReference hack  \n15:55\u00a0<vmassol>\u00a0I don't like this hack either  \n15:56\u00a0<tmortagne>\u00a0something like $user.class.name == \"java.lang.String\" should work  \n15:57\u00a0<tmortagne>\u00a0or $user.class.isAssignableFrom('org.xwiki.model.reference.EntityReference')  \n15:58\u00a0<tmortagne>\u00a0ha no no isAssignableFrom it's the opposite  \n16:00\u00a0<sburjan>\u00a0has quit  \n16:03\u00a0<woshilapin>\u00a0has joined #xwiki  \n16:49\u00a0<lucaa>\u00a0has quit  \n16:50\u00a0<lucaa>\u00a0has joined #xwiki  \n16:58\u00a0<lucaa>\u00a0has quit  \n17:02\u00a0<momomomomo>\u00a0has joined #xwiki  \n17:03\u00a0<tmortagne>\u00a0has quit  \n17:05\u00a0<momomomomo>\u00a0has quit  \n17:08\u00a0<momomomomo>\u00a0has joined #xwiki  \n17:10\u00a0<lucaa>\u00a0has joined #xwiki  \n17:11\u00a0<momomomomo>\u00a0has quit  \n17:26\u00a0<Lyes1>\u00a0has quit  \n17:45\u00a0<momomomomo>\u00a0has joined #xwiki  \n18:00\u00a0<cjd>\u00a0has quit  \n18:16\u00a0<lucaa>\u00a0has quit  \n18:27\u00a0<sburjan>\u00a0has joined #xwiki  \n18:31\u00a0<lucaa>\u00a0has joined #xwiki  \n18:48\u00a0<ClemensR>\u00a0has quit  \n18:51\u00a0<mflorea>\u00a0has quit  \n18:55\u00a0<woshilapin>\u00a0has quit  \n19:17\u00a0<evalica>\u00a0has quit  \n19:38\u00a0<momomomomo>\u00a0has quit  \n19:39\u00a0<Lyes>\u00a0has joined #xwiki  \n20:11\u00a0<cjd>\u00a0has joined #xwiki  \n20:13\u00a0<Slashman>\u00a0has quit  \n20:19\u00a0<vmassol>\u00a0has quit  \n20:28\u00a0<lucaa>\u00a0has quit  \n20:53\u00a0<momomomomo>\u00a0has joined #xwiki  \n20:59\u00a0<momomomomo\\_>\u00a0has joined #xwiki  \n21:02\u00a0<momomomomo>\u00a0has quit  \n21:02\u00a0<momomomomo\\_>\u00a0is now known as <momomomomo>  \n21:10\u00a0<lucaa>\u00a0has joined #xwiki  \n21:45\u00a0<Lyes>\u00a0has quit  \n22:25\u00a0<Enygma`>\u00a0has quit  \n22:32\u00a0<momomomomo\\_>\u00a0has joined #xwiki  \n22:35\u00a0<momomomomo>\u00a0has quit  \n22:35\u00a0<momomomomo\\_>\u00a0is now known as <momomomomo>  \n22:40\u00a0<momomomomo>\u00a0has quit  \n23:02\u00a0<momomomomo>\u00a0has joined #xwiki  \n23:09\u00a0<Lyes>\u00a0has joined #xwiki  \n23:10\u00a0<wowme>\u00a0has joined #xwiki  \n23:11\u00a0<wowme>\u00a0Hello gentleman, I am in a bit of a sticky point. I tried to install OpenOffice and broke xwiki in the process. The machine is running debian and up to an hour ago xwiki was running fine  \n23:11\u00a0<wowme>\u00a0I revered the installed openoffice packages in the hopes of bring it back to a working state  \n23:11\u00a0<wowme>\u00a0in order to debug the issue I've enabled some logging options in tomcat  \n23:11\u00a0<wowme>\u00a0here is what I get  \n23:12\u00a0<wowme>\u00a0INFO: Starting Servlet Engine: Apache Tomcat/7.0.28  \n23:12\u00a0<wowme>\u00a0INFO: Deploying configuration descriptor /etc/tomcat7/Catalina/localhost/xwiki.xml  \n23:12\u00a0<wowme>\u00a0SEVERE: Error configuring application listener of class org.xwiki.container.servlet.XWikiServletContextListener  \n23:12\u00a0<wowme>\u00a0java.lang.UnsupportedClassVersionError: org/xwiki/container/servlet/XWikiServletContextListener : Unsupported major.minor version 51.0 (unable to load class org.xwiki.container.servlet.XWikiServlet ContextListener)  \n23:13\u00a0<wowme>\u00a0it appears that it is looking for Java 7 and I believe this is what I have but I may be mistaken, Any help is greatly appreaciated  \n23:40\u00a0<wowme>\u00a0ok, narrowed it down that due to my initial attempt to install openoffice it had installed java6 and that was being started\n"}