{"id": "dev:IRC.xwikiArchive20120712", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120712", "title": "IRC Archive for channel #xwiki on 12 July 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:05\u00a0<vmassol>\u00a0has quit  \n00:59\u00a0<polx>\u00a0has quit  \n01:17\u00a0<jvdrean>\u00a0has quit  \n02:25\u00a0<sburjan`>\u00a0has quit  \n04:47\u00a0<SvenDowideit>\u00a0has quit  \n04:55\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n05:08\u00a0<sdumitriu>\u00a0has quit  \n05:17\u00a0<SvenDowideit>\u00a0has quit  \n05:17\u00a0<SvenDowideit>\u00a0has joined #xwiki  \n05:43\u00a0<polx>\u00a0has joined #xwiki  \n05:48\u00a0<polx>\u00a0has quit  \n06:47\u00a0<cjd>\u00a0has joined #xwiki  \n06:52\u00a0<polx>\u00a0has joined #xwiki  \n07:00\u00a0<polx>\u00a0has quit  \n07:03\u00a0<evalica>\u00a0has joined #xwiki  \n07:11\u00a0<polx>\u00a0has joined #xwiki  \n07:45\u00a0<mflorea>\u00a0has joined #xwiki  \n07:48\u00a0<cjd>\u00a0has quit  \n08:01\u00a0<Enygma`>\u00a0has joined #xwiki  \n08:12\u00a0<sburjan`>\u00a0has joined #xwiki  \n08:35\u00a0<vmassol>\u00a0has joined #xwiki  \n08:39\u00a0<vmassol>\u00a0mflorea: good morning  \n08:39\u00a0<+mflorea>\u00a0good morning vmassol  \n08:39\u00a0<vmassol>\u00a0do I need to import some new pages to make the EM work?  \n08:41\u00a0<+mflorea>\u00a0we made changes both to the UI (xwiki-platform-extension-ui) and to the backend  \n08:41\u00a0<+mflorea>\u00a0so you need to import the latest EM XAR  \n08:41\u00a0<vmassol>\u00a0ok do you know what pages?  \n08:41\u00a0<+mflorea>\u00a0and have the latest jars (from stable-4.1.x branch)  \n08:41\u00a0<+mflorea>\u00a0sure, it's just one page  \n08:41\u00a0<vmassol>\u00a0I hve the latest jars  \n08:41\u00a0<+mflorea>\u00a0XWiki.ExtensionManagerMacros  \n08:45\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:14\u00a0<vmassol>\u00a0success! :)  \n09:21\u00a0<vmassol>\u00a0so I'm going to start the 4.1.3 release process  \n09:26\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:37\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.1.x\u000f \\* rac8b5a4\u000f https://github.com/xwiki/xwiki-platform/commit/ac8b5a46e1fd6fdb118065d62c10de29ce43fd59 \u000f/ (2 files in 2 dirs):\u000f Improve log - http://git.io/NWfF2g  \n09:40\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r76f4baf\u000f https://github.com/xwiki/xwiki-platform/commit/76f4baf19dfef8ecd6cb77158eececb6177d1a42 \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-handlers/xwiki-platform-extension-handler-xar/src/main/java/org/xwiki/extension/xar/internal/handler/packager/xml/DocumentImporterHandler.java :\u000f XWIKI-8044: Logs should mention the language when installing documents using the Extension Manager - http://git.io/8xLoUQ  \n09:40\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.1.x\u000f \\* r1b99f7d\u000f https://github.com/xwiki/xwiki-platform/commit/1b99f7dc8ed013c49985056000659b346638f193 \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-handlers/xwiki-platform-extension-handler-xar/src/main/java/org/xwiki/extension/xar/internal/handler/packager/xml/DocumentImporterHandler.java :\u000f XWIKI-8044: Logs should mention the language when installing documents using the Extension Manager - http://git.io/FosYAQ  \n09:47\u00a0<polx>\u00a0has quit  \n09:49\u00a0<polx>\u00a0has joined #xwiki  \n09:50\u00a0<polx>\u00a0has quit  \n10:02\u00a0<mflorea>\u00a0has quit  \n10:19\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:36\u00a0<polx>\u00a0has joined #xwiki  \n10:43\u00a0<vmassol>\u00a0jvdrean: seems MessageSenderMacro is not hidden, wdyt?  \n10:44\u00a0<vmassol>\u00a0I'm looking at http://template.myxwiki.org/xwiki/bin/view/Main/WebHome without being logged in  \n10:44\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* re6a599b\u000f https://github.com/xwiki/xwiki-commons/commit/e6a599bf21656cd58e7de991b3c8fd3efe684542 \u000f/ (2 files in 2 dirs):\u000f XCOMMONS-224: Make easier to parse log message - http://git.io/Rz7\\_pA  \n10:46\u00a0<vmassol>\u00a0Enygma`: good morning, is it normal that we still see the annotations tab on http://myxwiki.org/xwiki/bin/view/Main/WebHome ?  \n10:48\u00a0<sburjan>\u00a0has joined #xwiki  \n10:50\u00a0<polx>\u00a0has quit  \n10:57\u00a0<+jvdrean>\u00a0vmassol: good question, the other macros are not hidden  \n10:57\u00a0<vmassol>\u00a0ah ok I thought all macros were hidden  \n10:58\u00a0<+jvdrean>\u00a0they're not but may be they should  \n10:58\u00a0<vmassol>\u00a0We need to be careful that the WikiMacros page still work though  \n10:59\u00a0<vmassol>\u00a0and ATM we often use the macro page as a self description of how to use the macro...  \n11:12\u00a0<+sburjan>\u00a0Hello. Can someone tell me if the latest 4.2 snapshot is the one from yesterday ? 11-Jul-2012 20:15  \n11:12\u00a0<+sburjan>\u00a0actually I'll wait for the CI to finish building .. so I can be sure  \n11:37\u00a0<mflorea>\u00a0has joined #xwiki  \n11:45\u00a0<evalica>\u00a0has quit  \n11:47\u00a0<evalica>\u00a0has joined #xwiki  \n11:55\u00a0<vmassol>\u00a0mflorea: can you document http://jira.xwiki.org/browse/XWIKI-8042 and close it (I need it closed to release 4.1.3)  \n11:55\u00a0<vmassol>\u00a0?  \n12:00\u00a0<vmassol>\u00a0tmortagne: can you add missing documentation for your 4.1.3 issues please?  \n12:00\u00a0<vmassol>\u00a0http://jira.xwiki.org/secure/IssueNavigator.jspa?reset=true&jqlQuery=Project+in+%28%22XWiki+Commons%22%2C+%22XWiki+Rendering%22%2C+%22XWiki+Platform%22%2C+%22XWiki+Enterprise%22%2C+%22XWiki+Enterprise+Manager%22%29+and+fixVersion+in+%28%224.1.3%22%29+and+resolution+in+%28%22Fixed%22%29+and+%28%28Documentation+is+EMPTY%29+or+%28%22Documentation+in+Release+Notes%22+is+EMPTY%29%29  \n12:00\u00a0<vmassol>\u00a0Enygma`: you also have one  \n12:01\u00a0<vmassol>\u00a0tmortagne: XCOMMONS-218 needs a line in the RN (same with several others) - they should go in a EM Improvement section in the RN  \n12:02\u00a0<+tmortagne>\u00a0vmassol: aren't we putting all velocity issues in point release RN ?  \n12:02\u00a0<vmassol>\u00a0well not quite  \n12:02\u00a0<vmassol>\u00a0this is true when it's bug fixes  \n12:02\u00a0<vmassol>\u00a0but not for improvements/new features  \n12:02\u00a0<vmassol>\u00a0they need ot be highlighted  \n12:02\u00a0<+tmortagne>\u00a0XCOMMONS-218 is bugfix  \n12:03\u00a0<vmassol>\u00a0for ex check http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWikiEnterprise412  \n12:03\u00a0<vmassol>\u00a0for mflorea support for installing on a single wiki or on the farm should be documented properyl in 4.1.3 RN  \n12:04\u00a0<vmassol>\u00a0s/for/for example  \n12:04\u00a0<vmassol>\u00a0\"Logs should mention the language when installing documents using the Extension Manager\" this too is an improvement  \n12:04\u00a0<vmassol>\u00a0(although this one is smaller)  \n12:05\u00a0<vmassol>\u00a0indeed 218 is bugfix  \n12:10\u00a0<gui\\_>\u00a0has joined #xwiki  \n12:12\u00a0<gui\\_>\u00a0Hi  \n12:12\u00a0<gui\\_>\u00a0does anyone know why none of the next requests doesn't work on my wiki? (using python code block)  \n12:14\u00a0<gui\\_>\u00a0has quit  \n12:16\u00a0<gui\\_>\u00a0has joined #xwiki  \n12:16\u00a0<mflorea>\u00a0has quit  \n12:16\u00a0<gui\\_>\u00a0documents=services.query.xwql(\"doc.creationDate > '2008-01-01'\").execute()  \n12:16\u00a0<gui\\_>\u00a0or  \n12:16\u00a0<gui\\_>\u00a0documents=xwiki.searchDocuments(\"doc.creationDate > '2008-01-01'\")  \n12:17\u00a0<mflorea>\u00a0has joined #xwiki  \n12:18\u00a0<+mflorea>\u00a0vmassol: sure, I can't close the issue otherwise ;)  \n12:18\u00a0<+tmortagne>\u00a0gui\\_: will need more details, what error do you get ?  \n12:20\u00a0<vmassol>\u00a0mflorea: :)  \n12:35\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r3b0f6c5\u000f https://github.com/xwiki/xwiki-enterprise/commit/3b0f6c53bfa85b557cfd630d94ee2a1e85f03ad2 \u000f/ xwiki-enterprise-test/xwiki-enterprise-test-extension/src/test/it/org/xwiki/test/ui/repository/RepositoryTest.java :\u000f Fix tests - http://git.io/dlYLkg  \n12:37\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* rab71212\u000f https://github.com/xwiki/xwiki-enterprise/commit/ab712128c808dcbd988d29f21f9524380f7c0553 \u000f/ xwiki-enterprise-test/xwiki-enterprise-test-extension/src/test/it/org/xwiki/test/ui/repository/RepositoryTest.java :\u000f Improve tests - http://git.io/hS6OVA  \n12:53\u00a0<gui\\_>\u00a0@thomas: sorry, I was afk. Here the error in the stacktrace  \n12:53\u00a0<gui\\_>\u00a0AttributeError: 'org.xwiki.script.internal.service.DefaultScriptSer' object has no attribute 'query'  \n12:54\u00a0<gui\\_>\u00a0(for the query documents=xwiki.searchDocuments(\"doc.creationDate > '2008-01-01'\") )  \n12:55\u00a0<gui\\_>\u00a0Caused by: java.sql.SQLDataException: data exception: invalid datetime format  \n12:55\u00a0<gui\\_>\u00a0for the other one (searchDocument)  \n12:58\u00a0<gui\\_>\u00a0is now known as <gfenollar>  \n13:09\u00a0<mflorea>\u00a0has quit  \n13:27\u00a0<polx>\u00a0has joined #xwiki  \n13:38\u00a0<polx>\u00a0has quit  \n13:39\u00a0<sdumitriu>\u00a0has joined #xwiki  \n13:46\u00a0<jvdrean1>\u00a0has joined #xwiki  \n13:48\u00a0<jvdrean>\u00a0has quit  \n13:48\u00a0<jvdrean>\u00a0has joined #xwiki  \n13:51\u00a0<gfenollar>\u00a0has quit  \n13:52\u00a0<jvdrean1>\u00a0has quit  \n14:15\u00a0<gfenollar>\u00a0has joined #xwiki  \n14:17\u00a0<+Enygma`>\u00a0vmassol: For the annotations tab thing, you need to \"migrate\" the configuration as well, using the new values for the \"annotation class\" (AnnotationCode.AnnotationConfig) and the \"show annotations\" (XWiki.XWikiPreferences) options  \n14:17\u00a0<vmassol>\u00a0ok thanks, is that written in some RN?  \n14:18\u00a0<+Enygma`>\u00a0I believe I failed to mention that...  \n14:18\u00a0<+Enygma`>\u00a0fixing it now  \n14:22\u00a0<gfenollar>\u00a0has quit  \n14:35\u00a0<gfenollar>\u00a0has joined #xwiki  \n14:44\u00a0<vmassol>\u00a0sdumitriu: I'm about to run maven-release.sh in a few minutes. Anything not working and that I should know about?  \n14:46\u00a0<mflorea>\u00a0has joined #xwiki  \n14:53\u00a0<gfenollar>\u00a0has quit  \n14:54\u00a0<@sdumitriu>\u00a0vmassol: It should work, unless the last RM commented out things  \n14:54\u00a0<+tmortagne>\u00a0worked well last time  \n14:59\u00a0<vmassol>\u00a0tmortagne mentioned clirr that may not be working  \n15:12\u00a0<cjd>\u00a0has joined #xwiki  \n15:13\u00a0<vmassol>\u00a0Enygma`: so it means that by default comments and annotations are still separarted even after the DB upgrade right?  \n15:16\u00a0<vmassol>\u00a0mflorea: could you close http://jira.xwiki.org/browse/XWIKI-8042 ? :)  \n15:18\u00a0<+Enygma`>\u00a0vmassol: yes... sort of... I mean the migration will run if you were using (before the upgrade) the standard annotation class and all your annotations will be migrated, but when the update is complete and your wiki starts, you will have to manually switch to the new annotation class to see your old annotations and start using the new annotations-merged-with-comments way...  \n15:19\u00a0<+sburjan>\u00a0did something changed in the past days wit the JDBC URL/ xwiki.cfg ? I am unable to setup a new XEM with a 4.2 latest snapshot. It's like the xwiki.db.prefix value is not take into account by xwiki  \n15:19\u00a0<+Enygma`>\u00a0maybe it would have been smarter to automatically force the annotation class to be the new default one (if the old default was used) after the migration is complete  \n15:19\u00a0<vmassol>\u00a0Enygma`: right\u2026 because right now you can be sure that migrated wikis will not understand why they don't have their annotations visible  \n15:20\u00a0<+Enygma`>\u00a0yes...  \n15:20\u00a0<vmassol>\u00a0we also need to discuss removing the annotation tab  \n15:20\u00a0<+Enygma`>\u00a0wdym?  \n15:20\u00a0<vmassol>\u00a0since it's not useful anymore AFAIU  \n15:21\u00a0<vmassol>\u00a0it's not used anymore right?  \n15:21\u00a0<+Enygma`>\u00a0it is useful for custom annotations (a feature of the annotations app)  \n15:21\u00a0<vmassol>\u00a0I don't understand  \n15:21\u00a0<+Enygma`>\u00a0the annotations app allows you to specify the annotation class you want to use  \n15:21\u00a0<vmassol>\u00a0hmm I think I do  \n15:21\u00a0<vmassol>\u00a0is this feature documented?  \n15:21\u00a0<+Enygma`>\u00a0you can use the default one, or you can have your custom one that adds bells and whistles  \n15:22\u00a0<+Enygma`>\u00a0I think so  \n15:22\u00a0<+Enygma`>\u00a0not sure  \n15:22\u00a0<vmassol>\u00a0but it should certainly not be on by default  \n15:22\u00a0<+Enygma`>\u00a0but it's pretty obvious since you have that option pretty clear in the settings  \n15:22\u00a0<+Enygma`>\u00a0yes, the annotations tab issue is the same tab as the annotation class, after a migration  \n15:22\u00a0<+Enygma`>\u00a0on a new wiki we don`t have this issue  \n15:23\u00a0<+Enygma`>\u00a0since the XAR is updated completely  \n15:23\u00a0<+Enygma`>\u00a0but after a migration, people usually skip configuration pages... to avoid overriding their settings  \n15:23\u00a0<vmassol>\u00a0you mean that the config is to have annotation tab off by default?  \n15:23\u00a0<vmassol>\u00a0ok I see  \n15:23\u00a0<+Enygma`>\u00a0even if in this case, it should override their settings  \n15:23\u00a0<+Enygma`>\u00a0yes  \n15:23\u00a0<vmassol>\u00a0also  \n15:23\u00a0<+sburjan>\u00a0can somenoe take a look ? this might be a blocker  \n15:23\u00a0<+Enygma`>\u00a0so, I am guessing you did not do the xar update  \n15:24\u00a0<vmassol>\u00a0I did  \n15:24\u00a0<vmassol>\u00a0but excluding the usual files  \n15:24\u00a0<vmassol>\u00a0ie XWikiPreferences  \n15:24\u00a0<+Enygma`>\u00a0right  \n15:24\u00a0<vmassol>\u00a0and other \\*Config pages  \n15:24\u00a0<+Enygma`>\u00a0technically, you should have merged them... but anyway  \n15:24\u00a0<vmassol>\u00a0yes that may becoime possible with the EM  \n15:25\u00a0<+Enygma`>\u00a0so you could say that, ATM, this is a limitation of XWiki when doing updates (skipping configs instead of merging them)  \n15:25\u00a0<+Enygma`>\u00a0so it's fixable ATM by following the upgrade steps manually, or forcing it automatically in the migration  \n15:25\u00a0<vmassol>\u00a0anyway we need to have jvdrean's uiextension mechanism and have the extra tab area have an extension point and move the annotation tab as an UIExtension part of the annotations app ;)  \n15:26\u00a0<vmassol>\u00a0(enabled when custom anno are enabled)  \n15:26\u00a0<+Enygma`>\u00a0ofc, we need to do lots of that :)  \n15:26\u00a0<+Enygma`>\u00a0for lots of places  \n15:26\u00a0<vmassol>\u00a0it's coming closer!  \n15:26\u00a0<+Enygma`>\u00a0some of which I have committed to already :)  \n15:27\u00a0<+sburjan>\u00a0ok, it seems we have a blocker. reporting it  \n15:27\u00a0<+tmortagne>\u00a0sburjan: checking  \n15:28\u00a0<+tmortagne>\u00a0I should try to set xwiki.db.prefix, right ?  \n15:28\u00a0<+sburjan>\u00a0tmortagne: seems that wiki.db.prefix is not taken in consideration  \n15:28\u00a0<+sburjan>\u00a0tes  \n15:28\u00a0<+sburjan>\u00a0yes  \n15:29\u00a0<+sburjan>\u00a0I have setup a lot of XEM's in my life, I could do it with my closed eyes.. I triple checked, still don't know why isn't working  \n15:29\u00a0<+sburjan>\u00a0and it seems that the JDBC url from hibernate is NOT taken into account also  \n15:30\u00a0<+tmortagne>\u00a0sburjan: what do you mean by not taken into account for the URL ?  \n15:30\u00a0<cjd>\u00a0has quit  \n15:30\u00a0<+tmortagne>\u00a0where is it trying to connect ?  \n15:32\u00a0<+tmortagne>\u00a0sburjan: noth xwiki.db and xwiki.db.prefix works well for me  \n15:33\u00a0<+sburjan>\u00a0on the latest 4.2 snapshot ?  \n15:33\u00a0<+tmortagne>\u00a0yep  \n15:33\u00a0<+sburjan>\u00a0hmm. ok. going to re-check  \n15:33\u00a0<+tmortagne>\u00a0not the build from jenkins  \n15:33\u00a0<+tmortagne>\u00a0working directly whith last version of the sources  \n15:33\u00a0<+sburjan>\u00a0I am using the build from maven  \n15:34\u00a0<+tmortagne>\u00a0I'm pretty sure there hasn't been any modification of xwiki.db.prefix related code since a while  \n15:35\u00a0<+tmortagne>\u00a0as for the JDBC url I'm not suer what you mean, if it was not taken into account nothing would work, including tests on jenkins for example  \n15:36\u00a0<+tmortagne>\u00a0you sure you modifying the last file ? O:-)  \n15:36\u00a0<+tmortagne>\u00a0s/lastright/  \n15:36\u00a0<+sburjan>\u00a0yes. downloading latest snapshot  \n15:37\u00a0<+tmortagne>\u00a0xwiki.virtual is set ?  \n15:37\u00a0<+sburjan>\u00a0I didn't touched that  \n15:37\u00a0<+tmortagne>\u00a0right you downloaded XEM  \n15:37\u00a0<+sburjan>\u00a0I onlyh modified the JDBC url from hibernate, and prefix and dbname from xwiki.cfg  \n15:38\u00a0<+tmortagne>\u00a0you don't have anything in the log ?  \n15:39\u00a0<+sburjan>\u00a0I do... let me test with the latest snapshot and see  \n15:43\u00a0<gdelhumeau>\u00a0Hi  \n15:44\u00a0<gdelhumeau>\u00a0I have made a patch for xwiki-platform-3.5.1  \n15:44\u00a0<gdelhumeau>\u00a0should I make a similar with the current \"trunk\" version in order to do a pull request ?  \n15:45\u00a0<sasinda>\u00a0has joined #xwiki  \n15:48\u00a0<+sburjan>\u00a0tmortagne: another odd think. After I unpack the jetty-manager-mysql, I have start\\_xwiki.sh without +x (not runnable) .. and I have to chmod +x so I can run it  \n15:48\u00a0<+sburjan>\u00a0stop\\_xwiki.sh is fine (showing in green when I ls)  \n15:49\u00a0<+tmortagne>\u00a0sburjan: XE used to have the same issue cause by vmassol refactoring and it has been fixed, maybe he forgot to do the same thing on XEM  \n15:53\u00a0<+sburjan>\u00a0tmortagne: ok, it works. I think I was leaving a blank space after db.prefix =  \n15:53\u00a0<+sburjan>\u00a0so the only thing is t hat start\\_xwiki.sh doesn't come with +x out of the box  \n15:56\u00a0<+mflorea>\u00a0vmassol: closed  \n15:57\u00a0<vmassol>\u00a0mflorea: thanks  \n16:05\u00a0<+sburjan>\u00a0mflorea: allow me 3 minutes to edit the RN so I can update the DB and Browsers  \n16:05\u00a0<+mflorea>\u00a0I'm not editing, go ahead  \n16:07\u00a0<+sburjan>\u00a0done, thanks  \n16:14\u00a0<sasinda>\u00a0has quit  \n16:21\u00a0<vmassol>\u00a0got to go, bb in 1 to 1.5 hours  \n16:37\u00a0<r4is3>\u00a0has joined #xwiki  \n16:37\u00a0<r4is3>\u00a0yop \\*  \n16:38\u00a0<r4is3>\u00a0Could anybody help me on migration issue?  \n16:39\u00a0<r4is3>\u00a0from 3.1 to 4.1.2  \n16:39\u00a0<r4is3>\u00a0with tomcat6 and entreprise version  \n16:39\u00a0<r4is3>\u00a0this is the error :  \n16:39\u00a0<r4is3>\u00a0ERROR o.h.u.JDBCExceptionReporter \u00a0\u00a0\u00a0- Duplicate entry '-5772955715567859860' for key 'PRIMARY'  \n16:40\u00a0<r4is3>\u00a0and tht failed :/  \n16:48\u00a0<+tmortagne>\u00a0r4is3: that's a bug in 4.1.2 fixed in 4.1.3 which is currently being released  \n16:56\u00a0<r4is3>\u00a0oh right  \n16:56\u00a0<r4is3>\u00a0thx for answering  \n16:57\u00a0<r4is3>\u00a0I don't read anythind about this but now I known i have to wait  \n16:57\u00a0<r4is3>\u00a0waht about the date for the new release?  \n17:22\u00a0<gdelhumeau>\u00a0is there a doc online with all the script services available ? with their javadoc ?  \n17:22\u00a0<gdelhumeau>\u00a0r4is3> ASAP  \n17:23\u00a0<evalica>\u00a0has quit  \n17:24\u00a0<Enygma`>\u00a0has quit  \n17:35\u00a0<sburjan>\u00a0has quit  \n18:00\u00a0<mflorea>\u00a0has quit  \n18:00\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* rff1c441\u000f https://github.com/xwiki/xwiki-platform/commit/ff1c441275c5ce64157313fb48d20f103c1ba95b \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-script/src/main/java/org/xwiki/extension/script/internal/safe/ExtensionRepositoryScriptSafeProvider.java :\u000f XWIKI-8045: SafeLocalExtensionRepository return wrong wrapper for InstalledExtensionRepository and LocalExtensionRepository - http://git.io/x2j18w  \n18:00\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.1.x\u000f \\* r0faf45c\u000f https://github.com/xwiki/xwiki-platform/commit/0faf45c505b4ccce989548a6385384029a31ac71 \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-script/src/main/java/org/xwiki/extension/script/internal/safe/ExtensionRepositoryScriptSafeProvider.java :\u000f XWIKI-8045: SafeLocalExtensionRepository return wrong wrapper for InstalledExtensionRepository and LocalExtensionRepository - http://git.io/d58tbA  \n18:00\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.0.x\u000f \\* rbeb6d38\u000f https://github.com/xwiki/xwiki-platform/commit/beb6d3841f58153b18faeb978522f43d1c48751e \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-script/src/main/java/org/xwiki/extension/script/internal/safe/ExtensionRepositoryScriptSafeProvider.java :\u000f XWIKI-8045: SafeLocalExtensionRepository return wrong wrapper for InstalledExtensionRepository and LocalExtensionRepository - http://git.io/TvsdNw  \n18:04\u00a0<gdelhumeau>\u00a0has quit  \n18:27\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-commons-4.1.3\u000f \\* rf993251\u000f https://github.com/xwiki/xwiki-commons/commit/f993251904a87c2b1ce4f3174837444600c5c79b \u000f/ pom.xml :\u000f [release] Preparing release xwiki-commons-4.1.3 - http://git.io/lUssWg  \n18:27\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-commons-4.1.3\u000f \\* r390e2dc\u000f https://github.com/xwiki/xwiki-commons/commit/390e2dc9ddfd1ca76a6290b57188b1d6714cf424 \u000f/ (62 files in 62 dirs):\u000f [maven-release-plugin] prepare release xwiki-commons-4.1.3 - http://git.io/uY-Fcg  \n18:30\u00a0<vmassol>\u00a0next step is going to uprgade xwiki.org to 4.1.3....  \n18:30\u00a0<vmassol>\u00a0we should probably wait 2-3 more days to see how myxwiki.org behaves  \n18:35\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-rendering-4.1.3\u000f \\* r0b9dd19\u000f https://github.com/xwiki/xwiki-rendering/commit/0b9dd1952255cb4e5f85a79b0f252b24ce907b3a \u000f/ pom.xml :\u000f [release] Preparing release xwiki-rendering-4.1.3 - http://git.io/87R1UA  \n18:35\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-rendering-4.1.3\u000f \\* r1d5ac53\u000f https://github.com/xwiki/xwiki-rendering/commit/1d5ac531882adaaafd35eaf500273a1efec7c6ef \u000f/ (44 files in 44 dirs):\u000f [maven-release-plugin] prepare release xwiki-rendering-4.1.3 - http://git.io/mB9E6w  \n18:39\u00a0<@sdumitriu>\u00a0Although it's weird... I don't see them at https://github.com/xwiki/xwiki-rendering/tags  \n18:39\u00a0<@sdumitriu>\u00a0But it's not signed  \n18:40\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r4fbf166\u000f https://github.com/xwiki/xwiki-platform/commit/4fbf1662c9a70be30700f07747f27db2302edab9 \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-script/src/main/java/org/xwiki/extension/script/internal/safe/ExtensionRepositoryScriptSafeProvider.java :\u000f XWIKI-8045: SafeLocalExtensionRepository return wrong wrapper for InstalledExtensionRepository and LocalExtensionRepository - http://git.io/YYFVCA  \n18:40\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.1.x\u000f \\* r8d23515\u000f https://github.com/xwiki/xwiki-platform/commit/8d23515e480a58257ace4af6f275290b2257eb84 \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-script/src/main/java/org/xwiki/extension/script/internal/safe/ExtensionRepositoryScriptSafeProvider.java :\u000f XWIKI-8045: SafeLocalExtensionRepository return wrong wrapper for InstalledExtensionRepository and LocalExtensionRepository - http://git.io/kPZdTg  \n18:49\u00a0<abusenius>\u00a0has joined #xwiki  \n18:57\u00a0<vmassol>\u00a0grrr build failure in platform 4.1.3  \n18:59\u00a0<vmassol>\u00a0ah no wait, looking at wrong window :)  \n18:59\u00a0<vmassol>\u00a0that was for 4.1.2 build to central\u2026. not better though...  \n18:59\u00a0<vmassol>\u00a0anyway I know how to trick it  \n18:59\u00a0<vmassol>\u00a0arf build failure for 4.1.3 too  \n18:59\u00a0<vmassol>\u00a0I'm damned....  \n19:00\u00a0<vmassol>\u00a0tmortagne: can you please stop playing on 4.1.3 branch while I'm releasing!  \n19:00\u00a0<vmassol>\u00a0you caused the build failure and maybe the whole release is not going to work  \n19:01\u00a0<vmassol>\u00a0:(  \n19:01\u00a0<+tmortagne>\u00a0vmassol: I actually just fixed a commit I did 3h ago  \n19:01\u00a0<vmassol>\u00a0yes but I staretd the release earlier than that  \n19:01\u00a0<vmassol>\u00a0I cannot release if you're still comimtting stuff  \n19:02\u00a0<+tmortagne>\u00a0again my last commit was to fix the failing build  \n19:02\u00a0<@sdumitriu>\u00a0vmassol: You should edit the release script and comment out commons and rendering  \n19:02\u00a0<vmassol>\u00a0tmortagne: don't make it fail in the first place  \n19:02\u00a0<vmassol>\u00a0I'm going to let you finish the release tmortagne  \n19:02\u00a0<vmassol>\u00a0it's already painful enough  \n19:04\u00a0<vmassol>\u00a0right now I can't guarantee that the release is going to work at all  \n19:04\u00a0<vmassol>\u00a0which is pretty bad for a RM  \n19:04\u00a0<vmassol>\u00a0if it fails I'll let you do a 4.1.4 tomorrow :)  \n19:05\u00a0<+tmortagne>\u00a0if what fail ?  \n19:05\u00a0<vmassol>\u00a0you're committing stuff after I started the release  \n19:05\u00a0<vmassol>\u00a0so I might have bits missing in what is already released  \n19:05\u00a0<vmassol>\u00a0and I'm not going to track what you did  \n19:06\u00a0<+tmortagne>\u00a0it's a minor bugfix which only touch one file in platform  \n19:06\u00a0<vmassol>\u00a0no  \n19:06\u00a0<vmassol>\u00a0befoer that you also committed what you have now fixed  \n19:06\u00a0<+tmortagne>\u00a0yes and thats what it was  \n19:06\u00a0<vmassol>\u00a0ok  \n19:06\u00a0<+tmortagne>\u00a0my last commit is \u00a0checkstyle fix  \n19:06\u00a0<vmassol>\u00a0still  \n19:06\u00a0<vmassol>\u00a0I haven't tested that stuff  \n19:07\u00a0<vmassol>\u00a0so I hope it doesn't break anything  \n19:07\u00a0<+tmortagne>\u00a0it actually fix something  \n19:07\u00a0<vmassol>\u00a0everyone: 4.1 branch is locked now, please don't commit anymore till I'm done  \n19:08\u00a0<vmassol>\u00a0just lost 30 mn\u2026.  \n19:08\u00a0<vmassol>\u00a0(the time to build platform)  \n19:08\u00a0<vmassol>\u00a0sdumitriu: so I just need to comment in release\\_all function() right?  \n19:08\u00a0<@sdumitriu>\u00a0Yes  \n19:09\u00a0<@sdumitriu>\u00a0Don't forget to uncomment after the release, so that the next RM will have a working script  \n19:09\u00a0<vmassol>\u00a0yeah  \n19:10\u00a0<vmassol>\u00a0actually the script should do a git reset on the release scripts  \n19:10\u00a0<vmassol>\u00a0or we need to put that in the release steps  \n19:16\u00a0<vmassol>\u00a0sdumitriu: I didn't check, but the script does a git pull right?  \n19:17\u00a0<@sdumitriu>\u00a0Yes  \n19:17\u00a0<vmassol>\u00a0does this ensure we have the latest:  \n19:17\u00a0<vmassol>\u00a0\u00a0\u00a0git reset --hard -q  \n19:17\u00a0<vmassol>\u00a0\u00a0\u00a0git co master -q  \n19:17\u00a0<vmassol>\u00a0\u00a0\u00a0git reset --hard -q  \n19:17\u00a0<vmassol>\u00a0\u00a0\u00a0git clean -dxfq  \n19:17\u00a0<vmassol>\u00a0?  \n19:17\u00a0<@sdumitriu>\u00a0There should be a pull before  \n19:18\u00a0<vmassol>\u00a0I don't see any pull  \n19:18\u00a0<@sdumitriu>\u00a0This just cleans up the source trees  \n19:18\u00a0<vmassol>\u00a0found it  \n19:18\u00a0<vmassol>\u00a0git up  \n19:18\u00a0<vmassol>\u00a0I don't even know this command  \n19:18\u00a0<@sdumitriu>\u00a0It's in update\\_sources  \n19:19\u00a0<@sdumitriu>\u00a0It's an alias  \n19:19\u00a0<vmassol>\u00a0ok so if I don't have it in my gitconfig it's not going to work  \n19:19\u00a0<vmassol>\u00a0I copied mine from thomas'  \n19:19\u00a0<vmassol>\u00a0;)  \n19:19\u00a0<@sdumitriu>\u00a0You have it  \n19:20\u00a0<vmassol>\u00a0why don't you do git pull which doesnt require alias?  \n19:20\u00a0<vmassol>\u00a0seems safer  \n19:20\u00a0<@sdumitriu>\u00a0Yes, we should use that  \n19:20\u00a0<@sdumitriu>\u00a0Patches welcome :)  \n19:21\u00a0<@sdumitriu>\u00a0Ah, silly me, the 4.1.3 tag is on github, but it comes after 4.1-milestone-1 (alphabetical order)  \n19:22\u00a0<vmassol>\u00a0ok I'll patch this one, I've alreayd applied one patch today btw ;)  \n19:25\u00a0<jvdrean>\u00a0has quit  \n19:31\u00a0<vmassol>\u00a0hmm do we run functional tests in the release process?  \n19:32\u00a0<@sdumitriu>\u00a0Yes for c,r,p, no for xe, xem  \n19:32\u00a0<vmassol>\u00a0ok, if we don't run them for xe why run them for p?  \n19:33\u00a0<vmassol>\u00a0(we're going to have more and more functional tests in p as we progress)  \n19:33\u00a0<@sdumitriu>\u00a0The initial decision was that XE tests randomly fail  \n19:33\u00a0<@sdumitriu>\u00a0Flickers  \n19:33\u00a0<vmassol>\u00a0hmm that shouldn't be true anymore  \n19:33\u00a0<vmassol>\u00a0but the main reason for me is time  \n19:33\u00a0<@sdumitriu>\u00a0So to avoid retrying the same release again and again until it works, we skipped those  \n19:33\u00a0<vmassol>\u00a0since jenkins has already executed them  \n19:34\u00a0<vmassol>\u00a0we don't need to rerun them (we need to make sure there has been no commit after we start the release plan though)  \n19:34\u00a0<@sdumitriu>\u00a0Now, if there's a guarantee that XE/XEM tests always pass, we could enable them in the release process  \n19:34\u00a0<vmassol>\u00a0(which is why I wasn't happy about thomas commit)  \n19:34\u00a0<@sdumitriu>\u00a0The only problem is time  \n19:34\u00a0<vmassol>\u00a0ideally we would just push from CI  \n19:35\u00a0<vmassol>\u00a0so IMO not building tests is ok  \n19:35\u00a0<vmassol>\u00a0since in the Release plan we check jenkins before starting the release  \n19:35\u00a0<vmassol>\u00a0the only condition being that nobody commits after the release plan steps are started  \n19:36\u00a0<vmassol>\u00a0IMO we don't even need to run unit tests  \n19:37\u00a0<vmassol>\u00a0not running any tests will win us 10-20mn more from what we do now  \n19:37\u00a0<vmassol>\u00a0which is a lot in the overall release process  \n19:41\u00a0<@sdumitriu>\u00a0OK, if you're confident of this choice, feel free to propose it on the mailing list, or just commit the change  \n19:42\u00a0<@sdumitriu>\u00a0I for one prefer the extra safety  \n19:43\u00a0<vmassol>\u00a0the best safety is to not build again  \n19:43\u00a0<vmassol>\u00a0ie take the built artifacts from jenkins  \n19:43\u00a0<vmassol>\u00a0and change the version  \n19:44\u00a0<vmassol>\u00a0that would speed up a lot our release  \n19:52\u00a0<tmortagne>\u00a0has quit  \n19:53\u00a0<vmassol>\u00a0sdumitriu: btw the clirr script doesn't seem to work  \n19:53\u00a0<vmassol>\u00a0\\* Generating clirr report  \n19:53\u00a0<vmassol>\u00a0warning: failed to load external entity \"/home/hudsonagent/clirr-excludes.xslt\"  \n19:53\u00a0<vmassol>\u00a0cannot parse /home/hudsonagent/clirr-excludes.xslt  \n19:53\u00a0<vmassol>\u00a0warning: failed to load external entity \"/home/hudsonagent/clirr-excludes.xslt\"  \n19:53\u00a0<vmassol>\u00a0cannot parse /home/hudsonagent/clirr-excludes.xslt  \n19:54\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-platform-4.1.3\u000f \\* r964b37c\u000f https://github.com/xwiki/xwiki-platform/commit/964b37c8f283a8eff7dfb6247c1f91fc1fd969c5 \u000f/ pom.xml :\u000f [release] Preparing release xwiki-platform-4.1.3 - http://git.io/3HJ8pQ  \n19:54\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-platform-4.1.3\u000f \\* r83ae87e\u000f https://github.com/xwiki/xwiki-platform/commit/83ae87ec88d489c45b52fdc1bfd241ef01fa7fdc \u000f/ (211 files in 211 dirs):\u000f [maven-release-plugin] prepare release xwiki-platform-4.1.3 - http://git.io/ZBiIcg  \n19:56\u00a0<jvdrean>\u00a0has joined #xwiki  \n20:01\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r8ce719a\u000f https://github.com/xwiki/xwiki-platform/commit/8ce719a72f89dda37ed99d3db61ce7cd872e8697 \u000f/ (6 files in 4 dirs):\u000f XWIKI-8047: Filesize field is not set with attachment installed with Extension Manager - http://git.io/0318kw  \n20:02\u00a0<vmassol>\u00a04.1.2 pushed to central!  \n20:05\u00a0<vmassol>\u00a0sdumitriu: XE tests are being executed  \n20:05\u00a0<@sdumitriu>\u00a0Hm...  \n20:06\u00a0<@sdumitriu>\u00a0vmassol: Are you sure they are executed?  \n20:06\u00a0<vmassol>\u00a0yes  \n20:07\u00a0<@sdumitriu>\u00a0The modules should be included in the build, but we define -DskipTests  \n20:07\u00a0<vmassol>\u00a0well at least some  \n20:07\u00a0<vmassol>\u00a0\u00a0Tests run: 106, Failures: 0, Errors: 0, Skipped: 0  \n20:07\u00a0<vmassol>\u00a0(this is the xmlrpc test module)  \n20:07\u00a0<@sdumitriu>\u00a0So, if some modules don't respect -DskipTests, then it's the module's fault  \n20:07\u00a0<@sdumitriu>\u00a0Going to lunch  \n20:07\u00a0<vmassol>\u00a0now executing UI tests  \n20:07\u00a0<@sdumitriu>\u00a0bbl  \n20:08\u00a0<@sdumitriu>\u00a0vmassol: During prepare or perform?  \n20:08\u00a0<vmassol>\u00a0no idea  \n20:09\u00a0<vmassol>\u00a0going to take several hours, I hope none fail  \n21:15\u00a0<vmassol>\u00a0it's loooooonnnggg.....  \n21:16\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n21:17\u00a0<sburjan`>\u00a0has quit  \n21:17\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n21:17\u00a0<sburjan`>\u00a0has quit  \n21:18\u00a0<sburjan`>\u00a0has joined #xwiki  \n21:20\u00a0<mflorea>\u00a0has joined #xwiki  \n21:32\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-enterprise-4.1.3\u000f \\* r77b3ca9\u000f https://github.com/xwiki/xwiki-enterprise/commit/77b3ca9e2d27300d9f765e1977d25a082a2a1c0e \u000f/ pom.xml :\u000f [release] Preparing release xwiki-enterprise-4.1.3 - http://git.io/oDBOWQ  \n21:32\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-enterprise-4.1.3\u000f \\* r2c8238c\u000f https://github.com/xwiki/xwiki-enterprise/commit/2c8238c64ed55d8f78d1390bbe467c5b5e5b4ea2 \u000f/ (47 files in 47 dirs):\u000f [maven-release-plugin] prepare release xwiki-enterprise-4.1.3 - http://git.io/A\\_6vFQ  \n21:49\u00a0<abusenius>\u00a0has quit  \n21:49\u00a0<abusenius>\u00a0has joined #xwiki  \n22:08\u00a0<jvdrean>\u00a0has quit  \n22:31\u00a0<polx>\u00a0has joined #xwiki  \n23:02\u00a0<abusenius>\u00a0has quit  \n23:08\u00a0<abusenius>\u00a0has joined #xwiki  \n23:11\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-manager-4.1.3\u000f \\* r9acde82\u000f https://github.com/xwiki/xwiki-manager/commit/9acde8205bb013ef0773e4d726629fee86857cb2 \u000f/ pom.xml :\u000f [release] Preparing release xwiki-manager-4.1.3 - http://git.io/eSo7qQ  \n23:11\u00a0<CIA-114>\u00a0Vincent Massol\u000f xwiki-manager-4.1.3\u000f \\* r87e2896\u000f https://github.com/xwiki/xwiki-manager/commit/87e2896ef8f26fc250b9cc4765974be6484677e9 \u000f/ (16 files in 16 dirs):\u000f [maven-release-plugin] prepare release xwiki-manager-4.1.3 - http://git.io/h433SQ  \n23:18\u00a0<polx>\u00a0has quit  \n23:26\u00a0<polx>\u00a0has joined #xwiki  \n23:33\u00a0<vmassol>\u00a0sdumitriu: clirr generation fails on some modules, for example: https://gist.github.com/31a8bb1cc295eb17f3e6  \n23:42\u00a0<vmassol>\u00a0sdumitriu: ping  \n23:44\u00a0<@sdumitriu>\u00a0PPong  \n23:44\u00a0<vmassol>\u00a0is it normal that ~/releases/xwiki-trunks/xwiki-commons/pom.xml shows 4.2-SNASPHOT  \n23:45\u00a0<@sdumitriu>\u00a0Yes  \n23:45\u00a0<@sdumitriu>\u00a0post-cleanup goes back to master  \n23:45\u00a0<vmassol>\u00a0ah\u2026 so my post clirr runs are all wrong  \n23:47\u00a0<vmassol>\u00a0sdumitriu: do you think I should run again the release since gpg signing might have failed?  \n23:48\u00a0<@sdumitriu>\u00a0No  \n23:48\u00a0<@sdumitriu>\u00a0Wait  \n23:48\u00a0<@sdumitriu>\u00a0Signing of the artifacts or of the git tags?  \n23:48\u00a0<vmassol>\u00a0artifacts  \n23:48\u00a0<vmassol>\u00a0let me check first  \n23:49\u00a0<vmassol>\u00a0yes they're not signed, see http://maven.xwiki.org/releases/org/xwiki/commons/xwiki-commons-component-api/4.1.3/  \n23:49\u00a0<vmassol>\u00a0but I have now fixed the release script which I had broken  \n23:49\u00a0<vmassol>\u00a0I could re-run if it's possible  \n23:50\u00a0<vmassol>\u00a0now what still doesn't work is this but I don't know why:  \n23:50\u00a0<vmassol>\u00a0\u00a0\u00a0echo -e \"\\033[0;32m\\* Creating GPG-signed tag\\033[0m\"  \n23:50\u00a0<vmassol>\u00a0\u00a0\u00a0git co ${TAG\\_NAME} -q  \n23:50\u00a0<vmassol>\u00a0\u00a0\u00a0git tag -s -f -m \"Tagging ${TAG\\_NAME}\" ${TAG\\_NAME}  \n23:53\u00a0<vmassol>\u00a0ok found some info: http://openpgpblog.tumblr.com/post/288011255/using-gpg-to-sign-git-tags  \n23:53\u00a0<vmassol>\u00a0my gitconfig must not be ok  \n23:54\u00a0<vmassol>\u00a0hmm your gitconfig doesn't have anything about signing though  \n23:58\u00a0<vmassol>\u00a0ok more info here: http://365git.tumblr.com/post/2796779828/signing-a-git-tag  \n23:58\u00a0<vmassol>\u00a0so if user.email is the same it should be automatic  \n23:59\u00a0<vmassol>\u00a0however I didn't get a prompt to enter my passphrase  \n\n"}