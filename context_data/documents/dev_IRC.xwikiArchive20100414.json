{"id": "dev:IRC.xwikiArchive20100414", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100414", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nnickless left at 03:55 (Ping timeout: 276 seconds  \nsdumitriu left at 04:02 (Ping timeout: 276 seconds  \nmflorea joined #xwiki at 06:40  \nnuvolari left at 07:30 (Excess Flood  \nnuvolari joined #xwiki at 07:32  \nplunden left #xwiki at 07:32  \nplunden joined #xwiki at 08:10  \nvmassol joined #xwiki at 08:19  \nlucaa left at 08:19 (Quit: Leaving.  \nKermitTheFragger joined #xwiki at 08:36  \nflorinciu joined #xwiki at 08:43  \ngvallarelli joined #xwiki at 08:46  \ngvallarelli - (08:47): Hi XWikiers  \nannacondan joined #xwiki at 08:59  \nlucaa joined #xwiki at 09:04  \nevalica joined #xwiki at 09:17  \njvdrean joined #xwiki at 09:21  \njvdrean left at 09:22 (Client Quit  \nnuvolari left at 09:37 (Changing host  \nnuvolari joined #xwiki at 09:37  \nsilviar joined #xwiki at 09:42  \njvdrean joined #xwiki at 09:47  \nlucaa1 joined #xwiki at 10:05  \nlucaa left at 10:05 (Read error: Connection reset by peer  \njvdrean left at 10:06 (Quit: Leaving.  \nvmassol - (10:19): guys someone is asking me when will we release XE 2.2.5 (they need http://jira.xwiki.org/jira/browse/XWIKI-5087 )  \nvmassol - (10:19): this is a pretty important regression  \nvmassol - (10:19): wdyt?  \nglerouge joined #xwiki at 10:32  \nflorinciu left at 10:37 (Read error: Connection reset by peer  \nflorinciu joined #xwiki at 10:37  \njvdrean joined #xwiki at 10:39  \nmflorea left at 10:39 (Quit: Leaving.  \ntmortagne joined #xwiki at 10:47  \nsdumitriu joined #xwiki at 10:47  \nEnygma` joined #xwiki at 11:01  \nvmassol - (11:06): tmortagne, jvdrean: hello. heres a question I asked earlier this morning:  \nvmassol - (11:06): \"guys someone is asking me when will we release XE 2.2.5 (they need http://jira.xwiki.org/jira/browse/XWIKI-5087\u00a0)\"  \nvmassol - (11:07): \"this is a pretty important regression\"  \nvmassol - (11:07): \"wdyt?\"  \nnickless joined #xwiki at 11:17  \nmflorea joined #xwiki at 11:22  \noanat joined #xwiki at 11:30  \nvmassol - (11:37): tmortagne: ping  \ntmortagne - (11:40): vmassol: yes this is fixed and yes we talked about that with jvdrean and i plan to send vote after 2.3RC1 is released  \nvmassol - (11:41): ok so we can say 'this week\"?  \ntmortagne - (11:41): probably yes  \nvmassol - (11:41): ok  \ntmortagne - (11:41): it has to be released before 2.3 final anyway  \nvmassol - (11:41): (I don't think it's a hard requirement but the soonest the better)  \nmflorea - (12:08): tmortagne, vmassol: URL in link label is not escaped if link meta data is missing. This:  \nmflorea - (12:08): <p><a href=\"http://www.xwiki.org\">http://www.xwiki.org</a></p>  \nmflorea - (12:08): is converted to:  \nmflorea - (12:08): [[http://www.xwiki.org>>http://www.xwiki.org]]  \nmflorea - (12:08): so no escaping. Is it possible to handle this kind of links as external links and escape the URL as it's done for external links? Such links result if you copy the URL-labeled link from a web page and paste it inside the wysiwyg editor. Link meta data is added only if the link is inserted through the link menu.  \nannacondan left at 12:09 (Quit: annacondan  \nvmassol - (12:09): so the bug is in the HTML parser that doesn't escape links correctly, right?  \nvmassol - (12:10): tmortagne: do we have an issue for this one? It's become a critical \u00a0bug  \nmflorea - (12:11): yes, if the link meta data is not present  \nvmassol - (12:11): critical because it prevents lots of users from editing pages in wysiwyg after they've copied-pasted some link from the web (lots of them do this apprently)  \ntmortagne - (12:11): no it's not in html parser it's in xwiki/2.0 renderer  \ntmortagne - (12:11): which is supposed to escape that  \nvmassol - (12:11): ok  \nvmassol - (12:11): do we have an issue?  \ntmortagne - (12:12): i doubt we have an issue, i di not even know we have this bug  \nmflorea - (12:12): it does, when the meta data is present. Maybe the XDOM is different when the link comments are missing from the HTML input  \ntmortagne - (12:13): mflorea: the meta is a hack that contains xwiki/2.0 syntax  \ntmortagne - (12:13): what is sure is that it's not html parser to handle xwiki/2.0 syntax escaping... it doe snot make sense  \ntmortagne - (12:14): could you create an issue describing what you have an i will look at that  \nmflorea - (12:14): sure  \nvmassol left at 12:25 (Quit: Leaving.  \nflorinciu left at 12:37 (Read error: Connection reset by peer  \nvmassol joined #xwiki at 12:45  \nflorinciu joined #xwiki at 13:08  \nannacondan joined #xwiki at 13:19  \nxenon75 joined #xwiki at 13:49  \nCiprian joined #xwiki at 14:13  \nmariusbutuc joined #xwiki at 14:37  \nflorinciu left at 14:38 (Read error: Connection reset by peer  \nflorinciu joined #xwiki at 14:39  \nanamarias joined #xwiki at 15:00  \nanamarias - (15:05): hi  \nanamarias - (15:05): I call in velocity a method that throws an Exception, and I see in the page \\*\\*part\\*\\* of the stack trace  \nanamarias - (15:05): \u00a0Where can I see the whole stack trace?  \nanamarias - (15:05): I'm on apache  \nlucaa1 - (15:09): you should also be on a tomcat (or some servlet container) in which case you should checkout the servlet container logs  \nsdumitriu left at 15:13 (Ping timeout: 245 seconds  \nanamarias - (15:14): so I found it:  \nanamarias - (15:14): Caused by: com.xpn.xwiki.XWikiException: Error number 3201 in 3: Exception while saving document mismo2.Time  \nanamarias - (15:14): Wrapped Exception: Could not execute JDBC batch update  \nanamarias - (15:14): at com.xpn.xwiki.store.XWikiHibernateStore.saveXWikiDoc(XWikiHibernateStore.java:601)  \nanamarias - (15:15): ...  \nanamarias - (15:15): Caused by: java.sql.BatchUpdateException: Incorrect string value: '\\xE2\\x88\\x92 UT...' for column 'XWR\\_PATCH' at row 1  \nplunden left #xwiki at 15:15  \nanamarias - (15:15): What I do, is create an object and set it's properties and save the doc  \nanamarias - (15:15): http://ana-s-private-labs.pastebin.com/38VpXAiN  \nanamarias - (15:15): What could be wrong with the string value?  \nlucaa1 - (15:15): we've seen this recently  \nlucaa1 - (15:15): it's not the string value, it's the encoding  \nlucaa1 - (15:16): I think  \nlucaa1 - (15:16): we've seen this recently with you or somebody else, and somebody said it's an encoding issue, and it sure looks like it  \nlucaa1 - (15:16): namely, make sure db is in utf8  \nlucaa1 - (15:16): if wiki is in utf8  \nlucaa1 - (15:16): (which it is by default since a few versions ago)  \ntmortagne - (15:18): yes looks like utf8 data saved in latin1 database  \nanamarias - (15:18): I read these string value from an Excel file, so I have no idea what the string's encoding is  \nlucaa1 - (15:20): I don't think it matters. what matters is when xwiki functions try to write it (as utf8) in the (latin1) database  \nlucaa1 - (15:20): so checkout the encoding of the db  \nlucaa1 - (15:20): which means, even if you didn't read it from an excel you  \ntmortagne - (15:20): anamarias: the probleme is not really your data but the fact that xwiki is configured in utf8 so if you have anything not ASCII it's UTF8  \nlucaa1 - (15:20): you could have the same problem  \nanamarias - (15:23): is it safe for the data to convert the db type to utf8 now?  \nlucaa1 - (15:24): more or les  \nlucaa1 - (15:24): less  \ntmortagne - (15:25): anamarias: sefest is to export you wiki in a xar and then reimport it in a proper empty database  \nlucaa1 - (15:31): we should document it here: http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Encoding in some troubleshooting section  \nlucaa1 - (15:32): I just talked to Alex because I remembered we did that a while ago on a wiki which we couldn't export since it was too big  \nlucaa1 - (15:32): and it seems there is a little script that does the same  \ntmortagne - (15:32): lucaa1: yes standard export is not very good, unusable with big wiki (it export evrything in memory before sanding it)  \ntmortagne - (15:33): i wrote some big export/import scipt on code.xwiki.org  \nanamarias - (15:33): lucaa1: we're already using smth custom for export  \nanamarias - (15:33): as the xar is gotten very big  \nanamarias - (15:33): so this won't be a problem  \ntmortagne - (15:33): http://code.xwiki.org/xwiki/bin/view/Snippets/LargeWikiExportSnippet  \ntmortagne - (15:33): http://code.xwiki.org/xwiki/bin/view/Snippets/LargeXARImportScriptSnippet  \nlucaa1 - (15:33): tmortagne: yes, I know about those too  \ntmortagne - (15:34): lucaa1: was for anamarias  \nlucaa1 - (15:34): ok  \nanamarias - (15:34): tmortagne: already using them :P  \ntmortagne - (15:34): ok  \nanamarias - (15:34): or smth better, I can't remember exactly  \nlucaa1 - (15:34): who's volunteering to write the documentation?  \ntmortagne - (15:34): anamarias: better is impossible :P  \nlucaa1 - (15:35): :)  \nanamarias - (15:37): there were several (2) snippets  \nanamarias - (15:37): one better than the other  \nanamarias - (15:38): so maybe this is the one (very likely :p)  \nsdumitriu joined #xwiki at 15:38  \ngvallarelli left at 15:44 (Ping timeout: 252 seconds  \nflorinciu left at 15:52 (Quit: Leaving.  \noanat left at 15:54 (Quit: Leaving.  \nvmassol - (15:55): mflorea: have you been able to restest after thomas' commit (re the url escaping)?  \nvmassol - (15:55): \\*retest  \ntmortagne - (15:56): mflorea: link escaping bug fixed if you want to re-test  \ntmortagne - (15:56): ok did not seen vmassol message :)  \nmflorea - (15:56): vmassol: great, not yet, I'll take the latest build from Hudson after I'm done with a IE bug I'm currently debugging  \nvmassol - (16:00): ok  \ngvallarelli joined #xwiki at 17:00  \ngvallarelli - (17:00): Hi XWikiers  \nevalica left at 17:02 (Read error: Connection reset by peer  \nvmassol - (17:02): tmortagne: reminder, when you release 2.2.5, there's an issue I would need in it from the colibri skin: XSCOLIBRI-207  \nvmassol - (17:02): s/reminder/notice/  \ntmortagne - (17:02): vmassol: it doe snot seems committe in 1.2 branch...  \nvmassol - (17:03): it's a skin  \nvmassol - (17:03): change  \ntmortagne - (17:03): current colibrio is not compartible with 2.2 branch  \ntmortagne - (17:03): i sent mails about that...  \nvmassol - (17:03): ah  \nvmassol - (17:03): didn't know that  \ntmortagne - (17:03): s/colibrio/colibri/  \nvmassol - (17:03): yeah I forgot  \nvmassol - (17:04): tmortagne: so this right: http://svn.xwiki.org/svnroot/xwiki/platform/skins/branches/xwiki-skin-colibri-1.12-web-2.2/ ?  \ntmortagne - (17:04): yes  \nanamarias - (17:11): XWiki uses Apache poi library 3.0, if I update the jar to 3.5-FINAL will it break code? (how can I make sure the update works)  \ntmortagne - (17:12): anamarias: i think there is APIs broken in poi 3.5  \ntmortagne - (17:13): to make shure it's working i guess you just have to attach something supported by POI and see if there is an error in the log  \nvmassol - (17:13): where do we use poi? in the platform? (I thought it was used only by a contrib plugin \u00a0- the excel plugin)  \ntmortagne - (17:14): lucene plugin to parse attachments  \nvmassol - (17:16): ah yes  \ntmortagne - (17:18): ( see http://jira.xwiki.org/jira/browse/XPLUCENE-47 on this subject)  \nbougie left at 17:25 (Quit: leaving  \ngvallarelli left at 17:25 (Ping timeout: 258 seconds  \nmflorea - (17:29): tmortagne: re XSCOLIBRI-207 I think Caty just forgot to merge because she was in a hurry to leave for school.  \ntmortagne - (17:31): mflorea: reopening it then  \nvmassol - (17:32): she knows about it actually  \ngvallarelli joined #xwiki at 17:32  \nvmassol - (17:32): since she asked me on skype how to merge on a branch  \nvmassol - (17:32): but she had to go to shool  \nvmassol - (17:32): anyway it shouldn't have been closed in order not to forget  \nvmassol - (17:32): so yes you can reopen  \nmflorea - (17:32): right  \nmariusbutuc left at 17:34 (Quit: Leaving.  \nxenon75 left at 17:38 (Quit: Leaving.  \nDenis joined #xwiki at 17:41  \njvdrean left at 18:01 (Quit: Leaving.  \nEnygma` left at 18:07 (Quit: Leaving.  \nKermitTheFragger left at 18:08 (Quit: Leaving  \ngvallarelli left at 18:08 (Read error: No route to host  \nCiprian left #xwiki at 18:26  \nlucaa1 - (18:28): guys, is there a known issue with the {pre} macros around #includeForm's? When including a 2.0 page from a 1.0 one? or something like that...  \nlucaa1 - (18:28): (and of course a known workaround...)  \nsdumitriu - (18:28): {pre} is very bad  \nlucaa1 - (18:28): sdumitriu: let's assume the situation where I can't help it  \nsdumitriu - (18:28): WDYM, the fact that #includeForm generates {pre} and how to get rid of it?  \nlucaa1 - (18:29): the fact that if I have 2 includes, I get random pre's in the page  \nsdumitriu - (18:29): Yes  \nlucaa1 - (18:29): wait, I write a pastebin with my example  \nsdumitriu - (18:29): Can you replace #includeForm with something else, or is it \"forced\" on you?  \nlucaa1 - (18:31): well, I have the annotations tab, which is in AnnotationCode.Tab. It includes the AnnotationCode.Macros, to get the annos macros. Now, I need to include this tab in a page built with 1.0  \nlucaa1 - (18:32): I tried the #includeForm(AnnotationCode.Tab) and, besides the fact that I get a {/pre} at the end of the page, some [stuff] in my annotations tab gets linkified  \nlucaa1 - (18:32): I isolated it in a small test  \nlucaa1 - (18:32): ( sdumitriu: of course I can get rid of everything, I just duplicate code )  \nsdumitriu - (18:32): $xwiki.includeForm(\"Doc.Name\", false)  \nlucaa1 - (18:35): here's my experiment with the three pages: http://pastebin.com/mAs7epnQ  \nlucaa1 - (18:38): so rule is? includeForm always puts pre's when includer document is 1.0 syntax?  \nlucaa1 - (18:38): (at least that's what includeForm javadoc says)  \nsdumitriu - (18:38): Yes  \nsdumitriu - (18:39): But there's the includeForm which takes a boolean  \nlucaa1 - (18:39): now, isn't it a bug that for the second #include (from the 2.0 page including 2.0 page) {pres} are also added automatically?  \nlucaa1 - (18:39): way  \nlucaa1 - (18:39): wait  \nlucaa1 - (18:39): let me think  \nlucaa1 - (18:39): yes, done thinking  \nannacondan left at 18:39 (Quit: annacondan  \nlucaa1 - (18:40): in my little example, it seems {pre}s are added around the #includeForm(Test3Page) too, so that it breaks the imbrication of the existing pres generated for #includeForm(\"Test2Page\")  \nlucaa1 - (18:40): isn't this a bug?  \nlucaa1 - (18:40): because the including document of Test3Page is Test2Page, which is syntax xwiki2  \nanamarias left at 18:41 (Quit: anamarias  \nlucaa1 - (18:41): this means, basically, that when I include a 2.0 doc in a 1.0 doc, I have to be aware of how many inclusions the 2.0 doc has  \nlucaa1 - (18:41): which is bad  \nsdumitriu - (18:42): Yes, that's the problem  \nsdumitriu - (18:42): We can't properly track who includes who  \nsdumitriu - (18:42): The inclusion model is broken  \nlucaa1 - (18:43): ok, but at least now we know it  \nlucaa1 - (18:43): is it reported someplace?  \nsdumitriu - (18:44): Yep, my left front side of the brain  \nlucaa1 - (18:45): hmm...  \nlucaa1 - (18:45): http://incubator.myxwiki.org/xwiki/bin/view/Sandbox/Test1Page  \nlucaa1 - (18:45): it seems somewhere in the mean time it was fixed  \nlucaa1 - (18:45): (I was doing all this mess on a 2.1.1)  \nlucaa1 - (18:45): well almost fixed, the problem with html remains (I wouldn't really expect to see <p>s there...)  \nxenon75 joined #xwiki at 18:46  \nsilviar left at 18:48 (Quit: Leaving.  \nvmassol left at 18:50 (Quit: Leaving.  \ntmortagne left at 18:52 (Quit: Leaving.  \nglerouge left at 18:53 (Quit: Leaving.  \nannacondan joined #xwiki at 18:57  \ngvallarelli joined #xwiki at 19:03  \nlucaa1 left at 19:12 (Quit: Leaving.  \nmflorea left at 19:28 (Quit: Leaving.  \nxenon75 left at 20:55 (Quit: Leaving.  \nnpm left at 21:22 (Ping timeout: 276 seconds  \nnpm joined #xwiki at 21:32  \nmflorea joined #xwiki at 21:52  \nxenon75 joined #xwiki at 22:12  \nvmassol joined #xwiki at 22:23  \nannacondan left at 22:24 (Quit: annacondan  \nxenon75 left at 22:27 (Quit: Leaving.  \ngmpff joined #xwiki at 22:56  \nlucaa joined #xwiki at 23:01  \nmflorea left at 23:01 (Quit: Leaving.  \ngmpff left at 23:12 (Quit: Leaving  \ngvallarelli - (23:45): got to go  \ngvallarelli - (23:45): goodbye && goodnight  \ngvallarelli left at 23:45 (Quit: Sto andando via  \nvmassol left at 23:51 (Quit: Leaving.  \n\n"}