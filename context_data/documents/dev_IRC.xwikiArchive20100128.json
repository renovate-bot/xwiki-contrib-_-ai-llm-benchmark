{"id": "dev:IRC.xwikiArchive20100128", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100128", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nlucaa left #xwiki at 00:01  \nmflorea left at 00:12 (\"Leaving.\"  \narkub left at 01:22 (Read error: 60 (Operation timed out)  \nSvenDowiu joined #xwiki at 01:54  \nSvenDowideit left at 02:10 (Read error: 110 (Connection timed out)  \nSvenDowiu is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nCalebJamesDeLis\\_ joined #xwiki at 05:06  \nCalebJamesDeLis\\_ is now known as CalebJamesDeLisl ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nCalebJamesDeLisl - (05:49): !who  \nxwiki-bridge - (05:49): \\* members:   \nsdumitriu - (05:52): The bridge is broken  \nnuvolari joined #xwiki at 06:19  \nvmassol joined #xwiki at 07:48  \nmflorea joined #xwiki at 07:54  \nkibahop joined #xwiki at 08:23  \nkibahop left #xwiki at 08:34  \nEnygma` joined #xwiki at 09:06  \nmflorea1 joined #xwiki at 09:22  \nmflorea left at 09:24 (Read error: 60 (Operation timed out)  \narkub joined #xwiki at 09:54  \nxenon75 joined #xwiki at 10:00  \ntmortagne joined #xwiki at 10:18  \nlucaa joined #xwiki at 10:25  \nKermitTheFragger joined #xwiki at 10:31  \ntmortagne - (10:37): guys i need some SQL help (again)  \ntmortagne - (10:37): i try to query two objects properties value in a select but the problem is that one of them is sometimes null (i.e. not set) so when i do  \ntmortagne - (10:37): select propkey.value, propvalue.value, propvalid.value from BaseObject as obj, StringProperty as propname, StringProperty as proplang, StringProperty as propkey, LargeStringProperty as propvalue, LargeStringProperty as propvalid where obj.className='L10NCode.TranslationClass' and obj.id=propname.id.id and propname.id.name='name' and propname.value='$name' and obj.id=proplang.id.id and proplang.id.name='language' and proplang.value='$  \ntmortagne - (10:37): i only get propvalue.value (which is never null) if propvalid.value is set so i can loose lot's of propvalue.value but i want all even if propvalid.value is not set  \ntmortagne - (10:37): i don't know how to deal with propvalid property to get a null in the result for example when it's not set  \ntmortagne - (10:38): i guess i have to use some kind of JOIN but i never used join syntax  \nlucaa - (10:41): hi tmortagne  \ntmortagne - (10:41): lucaa: hi  \ntmortagne - (10:45): note: propkey and propvalue are always set only propvalid can be not set  \nlucaa - (10:46): normally since you have no relation set between propvalue and propvalid in your query, you should get each paired with each   \nlucaa - (10:46): nor any relation between obj and propvalid so propvalid should be paired with all records resulting from the rest of the query  \nlucaa - (10:46): but if you have no propvalid set for any obj, then...  \ntmortagne - (10:48): i have relation through the object  \nlucaa - (10:48): I don't see the condition  \nCalebJamesDeLisl - (10:48): You can do it with 2 queries.  \nCalebJamesDeLisl - (10:48): select propvalid.value from LargeStringProperty propvalid where propvalid.id in [ids of your objects...]  \ntmortagne - (10:49): CalebJamesDeLisl: yes that's what i'm doing now but i would prefer one  \ntmortagne - (10:49): lucaa: according to the qery each object has to be linked to a propvalid and a propvalue  \nCalebJamesDeLisl - (10:49): inner join.  \ntmortagne - (10:49): so when you don't have propvalid set then you don't get the object  \nlucaa - (10:50): tmortagne: I only got this  \nlucaa - (10:50): where   \nlucaa - (10:50): obj.className='L10NCode.TranslationClass' and   \nlucaa - (10:50): obj.id=propname.id.id and   \nlucaa - (10:50): propname.id.name='name' and   \nlucaa - (10:50): propname.value='$name' and   \nlucaa - (10:50): obj.id=proplang.id.id and   \nlucaa - (10:50): proplang.id.name='language' and   \nlucaa - (10:50): proplang.value='$  \ntmortagne - (10:51): lucaa: well i see it all in the jabber history  \ntmortagne - (10:51): what you have ends with what ?  \ntmortagne - (10:51): \"and\" ?  \nlucaa - (10:52): no, it ends with a $  \ntmortagne - (10:52): ok so there is a bug  \nlucaa - (10:52): :)  \ntmortagne - (10:52): CalebJamesDeLisl: do you see the whole query ?  \ntmortagne - (10:53): lucaa: here is the ends you did not received:  \ntmortagne - (10:53): proplang.value='$language' and obj.id=propvalue.id.id and propvalue.id.name='translatedtext' and obj.id=propvalid.id.id and propvalid.id.name='validatedtranslatedtext' and obj.id=propkey.id.id and propkey.id.name='key' order by propkey.value  \nCalebJamesDeLisl - (10:53): What I see ends with and proplang.value='  \ntmortagne - (10:53): so nobody has the same thing :)  \nlucaa - (10:56): well, you can't actually get nulls for the propvalid, since you're also putting a condition on the property  \nlucaa - (10:56): so, try with an \"or\"  \ntmortagne - (10:56): here some colored one http://pastebin.com/m358f6ff  \nlucaa - (10:56): (obj.id=propvalid.id.id and   \nlucaa - (10:56): propvalid.id.name='validatedtranslatedtext' or propvalid is null)  \nlucaa - (10:56): I'm not 100% about the is null syntax  \nlucaa - (10:56): though  \nlucaa - (10:57): since I'm also not sure about how to do a left outer join  \ntmortagne - (10:57): well \"propvalid is null\" will never be true since it's a table  \nlucaa - (10:57): .id then?  \nlucaa - (10:58): but that's a table too?  \ntmortagne - (10:58): don't know  \ntmortagne - (10:58): but even if it's not a table it will not work either  \ntmortagne - (10:59): since in this case it doe snot exist  \ntmortagne - (10:59): so it's not null or not null it's nothing  \ntmortagne - (10:59): it's more either there is a propvalid liked to the object of there is none  \ntmortagne - (11:00): so it can't be done with a = or is null or anything like that  \ntmortagne - (11:00): i think join support things like that but i don't know how to use it  \nlucaa - (11:01): it should be a left outer join  \nlucaa - (11:01): from BaseObject as obj, StringProperty as propname, StringProperty as proplang, StringProperty as propkey, LargeStringProperty as propvalue left outer join LargeStringProperty as propvalid   \nlucaa - (11:01): it says here: https://www.hibernate.org/hib\\_docs/nhibernate/html/queryhql.html  \ntmortagne - (11:02): lucaa: ok thanks i' m trying that  \nlucaa - (11:06): ok, they also say there , is a cross join, cartesian product so indeed when trying to put an is null you'd have nothing to put the condition on since the records to filter would be the existing records at that point  \njvelo joined #xwiki at 11:12  \nflorinciu joined #xwiki at 11:29  \nplunden1 joined #xwiki at 11:33  \nvmassol - (11:35): tmortagne: could you remove this log \" \u00a0- The node /xwiki should not has been removed \" before end of 2.2RC1?  \ntmortagne - (11:36): vmassol: sure but this is not supposed to happen very often  \nvmassol - (11:36): everytime you import  \ntmortagne - (11:36): then it mean that import is calling flushCache...  \ntmortagne - (11:37): which does not seems very clean to me  \ntmortagne - (11:37): i did not happen wil old import  \nflavius joined #xwiki at 11:38  \nvmassol - (11:38): yes we need to check why it's happening  \nvmassol - (11:41): I need to understand why plugins's init() are called on import  \nvmassol - (11:42): I thought it was XWikiPreferences but they're also called when this doc isn't modified  \nvmassol - (11:42): debugging  \ntmortagne - (11:42): vmassol: i think it's because XWikiPreference is modified  \ntmortagne - (11:42): to be more precise it's because \"plugins\" peoperty of XWikiPreferences is modified  \ntmortagne - (11:43): which make XWiki to reload plugins  \ntmortagne - (11:43): are you sure it's not modified ?  \ntmortagne - (11:43): it's the only thing that make plugin to reload  \ntmortagne - (11:43): i created an issue about that  \nflavius left at 11:47 (Read error: 104 (Connection reset by peer)  \nvmassol - (11:48): ah no  \nvmassol - (11:48): stupid me  \nxenon75 left at 11:48 (Client Quit  \nvmassol - (11:48): I was importing a xar different from the XE xar  \nvmassol - (11:48): but that xar was the admin app xar  \nvmassol - (11:48): so it has the xwikipreferences doc  \nvmassol - (11:48): :)  \nvmassol - (11:49): tmortagne: do you have your issue? Since I also created one, I can link them  \nvmassol - (11:50): http://jira.xwiki.org/jira/browse/XWIKI-4277 ?  \ntmortagne - (11:50): yes that's it i think  \ntmortagne - (11:50): that's it  \nflorinciu1 joined #xwiki at 11:53  \nflavius joined #xwiki at 11:56  \nvmassol - (11:57): tmortagne: I wonder if what I'm doing is correct or not....  \nflavius left at 11:57 (Client Quit  \nvmassol - (11:58): right now I'm modifying init() so that plugins test if their listener is already registered  \nvmassol - (11:58): this is good if we allow init() to be called several times  \nvmassol - (11:58): this is less good if we don't want to allow this  \nvmassol - (11:58): I'm hesitating  \nvmassol - (11:58): any idea?  \nflaviusolaru joined #xwiki at 11:58  \nvmassol - (12:00): is there a reason where re-adding a listener would fix a pb? I don't see any  \nvmassol - (12:00): hmm there could be   \nvmassol - (12:00): but in our case we're readding the same instance I think  \nvmassol - (12:01): (for rights manager this is sure)  \ntmortagne - (12:01): re-adding the listener here is just not nice, it's not realy a blocker  \nvmassol - (12:01): ok so I'll continue doing this  \nvmassol - (12:01): th  \ntmortagne - (12:01): currently we want to call init() several time, that's why we have XWIKI-4277  \nvmassol - (12:02): yes I know we want, but in some near future we could do what I suggested:  \nvmassol - (12:02): / TODO: Fix the plugins, they should implement Observation listeners if they want to be aware of a  \nvmassol - (12:02): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// change in the XWikiPreferences document but we should definitely not reinitialize all plugins like  \nvmassol - (12:02): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// this.  \ntmortagne - (12:03): vmassol: it's not about knowing something changed in XWikiPreference  \ntmortagne - (12:03): plugin already handle that using event manager  \nvmassol - (12:03): why not?  \nvmassol - (12:03): the ones I've looked at don't  \ntmortagne - (12:03): this feature is about adding plugins  \nvmassol - (12:03): (lucene indexer and rights manager)  \nvmassol - (12:03): ok yes there's also that  \ntmortagne - (12:03): lucene don't care XWikiPreference changed  \nvmassol - (12:04): but you can do that easily  \nvmassol - (12:04): by checking the plugins field I guess  \nvmassol - (12:04): and only add plugins that don't eist  \nvmassol - (12:04): and remove plugins removed  \ntmortagne - (12:04): vmassol: that's what it's doing except taht it's not optimized  \njvelo left at 12:04 (Remote closed the connection  \nvmassol - (12:04): ok  \ntmortagne - (12:05): but it does listen only to plugins property  \ntmortagne - (12:05): it's not released each time you modify preferences  \ntmortagne - (12:05): released=reloaded  \nxenon75 joined #xwiki at 12:06  \nvmassol - (12:07): btw tmortagne could that be a cause of the lucene plugin failing after some time?  \nvmassol - (12:07): (does it support well it's init() method called several times?)  \ntmortagne - (12:07): yes  \ntmortagne - (12:08): actually calling init is a way to fiw the issue  \ntmortagne - (12:08): fix  \ntmortagne - (12:09): lucene has been made especially to use init several time, init is called when you call flushCache for example  \nglerouge joined #xwiki at 12:10  \nvmassol - (12:10): ok  \nflorinciu left at 12:11 (Read error: 110 (Connection timed out)  \nCalebJamesDeLisl - (12:20): Adding a captcha to commentinline.vm for anonymous users would make the captcha be loaded on every page by every viewer, bringing the server to it's knees.  \nCalebJamesDeLisl - (12:21): One solution is to direct the user to a captcha after they press post comment.  \nCalebJamesDeLisl - (12:22): Another is to hide the post comment section until the user clicks a \"add a comment\" link.  \nCalebJamesDeLisl - (12:23): I'm not really in favor of #1 because it's misleading \"Oh yea, and one more thing you have to do...\"  \nCalebJamesDeLisl - (12:23): Any thoughts?  \nglerouge - (12:24): not really  \nglerouge - (12:24): I guess there's not much of an option to cache captchas  \nCalebJamesDeLisl - (12:24): :)  \nglerouge - (12:24): how does recaptcha do?  \nCalebJamesDeLisl - (12:25): meaning how do they solve that problem?  \nglerouge - (12:25): yes  \nCalebJamesDeLisl - (12:25): My guess, giant servers and they recycle a captcha to different users until it's solved, just a guess.  \nglerouge - (12:25): could we load the captcha only once the user starts typing in the comment form ?  \nglerouge - (12:26): second option: let guests only click on preview and display the captcha on the post preview page  \nCalebJamesDeLisl - (12:26): A lot like #1.  \nglerouge - (12:26): since we now have the comment previewing feature  \nglerouge - (12:27): yes  \nglerouge - (12:27): plenty of sites do the \"preview comment first if you're a guest\" thing  \nglerouge - (12:27): thus it doesn't shock me (even though it's maybe not the optimal option in a perfect world)  \nCalebJamesDeLisl - (12:28): It sounds easy enough to implement.  \nglerouge - (12:29): however the preview might be handled through AJAX (no page reload) thus you'll have to do the same thing for the captcha  \nglerouge - (12:29): (I don't know how hard that is)  \nglerouge - (12:29): nice job on the registation form btw ;)  \nCalebJamesDeLisl - (12:29): Thanks, I probably spent too much time on it but I get carried away...  \nglerouge - (12:30): from what I saw it was worth it :)  \nCalebJamesDeLisl - (12:30): You know it bypasses RegisterAction?  \nCalebJamesDeLisl - (12:31): A little more work on the velocity macro and another class in the old core can be deprecated :)  \nglerouge - (12:31): you still need to have the register right to use it, right?  \nCalebJamesDeLisl - (12:32): I think so, I copied the code from RegisterAction and it didn't do any rights check that I remember.  \nglerouge - (12:32): ok  \nCalebJamesDeLisl - (12:33): Nope, just double checked, that's done in xwiki.createUser.  \nglerouge - (12:33): one thing: the live JS validation isn't available for the add user form on http://localhost:8080/xwiki/bin/admin/XWiki/XWikiPreferences?editor=globaladmin&section=Users#  \nglerouge - (12:33): would that be hard to add ?  \nCalebJamesDeLisl - (12:34): Yes and no.  \nglerouge - (12:34): :)  \nCalebJamesDeLisl - (12:35): The problem is the XSS blocker.  \nglerouge - (12:35): that form is supposedly available only for wiki admins in the first place  \nCalebJamesDeLisl - (12:35): The registration form saves what you fill in to the fields and passes it back if you get one wrong.  \ntmortagne - (12:35): re join: i'm trying to execute \"select propkey.value from BaseObject as obj inner join StringProperty as propkey on (obj.id=propkey.id.id and propkey.id.name='key') where obj.className='L10NCode.TranslationClass'\"  \ntmortagne - (12:35): but it doe snot work  \ntmortagne - (12:36): lucaa, CalebJamesDeLisl: any idea ? the error says the syntax is not good it seems but i can't find what's wrong  \ntmortagne - (12:37): http://pastebin.com/m42b02c54  \ntmortagne - (12:38): (that's not the query i'm trying to do but since it did not work i'm trying with a simple one first)  \nglerouge - (12:38): CalebJamesDeLisle -> yes but the form would be available to wiki admins only in the first place when used on the page I mentioned thus if the user is a wiki admin already we don't really care that he can XSS the site  \nCalebJamesDeLisl - (12:39): glerouge: I think I can solve it by only applying the XSS blocker to known form fields.  \nCalebJamesDeLisl - (12:39): The admin is most at risk.  \nglerouge - (12:39): I'm not sure I understand why but I trust you on this :)  \nCalebJamesDeLisl - (12:40): Suppose he clicks on a link which says XWiki/Registration?first\\_name=\"/><script>I\\_Eat\\_Your\\_Cookies</script>  \nglerouge - (12:41): ok  \nCalebJamesDeLisl - (12:41): The form will dutifully say he messed up and insert what it thinks he entered into the user name, causing his cookies (and admin rights) to be stolen.  \nCalebJamesDeLisl - (12:42): I'm thinking about proposing a component for signing urls so we don't have to worry about this.  \nglerouge - (12:42): please do :)  \nCalebJamesDeLisl - (12:42): There are a lot of use cases.  \nCalebJamesDeLisl - (12:43): Every page with a hidden field which holds the redirect is a potential target.  \nglerouge - (12:44): I do that a lot when writing applications  \nvmassol - (12:44): tmortagne: btw there's a typo in \"The node /xwiki should not has been removed\" :)  \nvmassol - (12:44): tmortagne: Ihttp://jira.xwiki.org/jira/browse/XWIKI-4800 is all yours  \ntmortagne - (12:45): vmassol: ok  \nbbc581 joined #xwiki at 12:49  \nvmassol - (12:59): trying to fix the avatar issue on the dashboard  \nxenon75 left at 13:00 (Client Quit  \nbbc581 left at 13:01 (Read error: 60 (Operation timed out)  \nxenon75 joined #xwiki at 13:05  \nvmassol - (13:15): hmmm..... found a potential issue  \nvmassol - (13:15): if you do $doc.getObject(\"XWikiUsers\") and if $doc is in the main space  \nvmassol - (13:16): then you're trying to retrieve Main.XWikiUsers  \nvmassol - (13:16): that's after my refactoring  \nvmassol - (13:16): however before the default space was \"XWiki\" apparently  \nvmassol - (13:16): (that's why the avatar isn't displayed btw on the dashboard)  \nvmassol - (13:16): while I think that the new behavior is correct, I wonder if we have other places that need to be fixed too....  \nvmassol - (13:21): found 3 other places...  \nvmassol - (13:27): tmortagne: any idea? We should probably put it in the release notes if we agree with the new behavior  \nvmassol - (13:28): seems like someone is maintaing is own XWiki issue list: http://wiki.noiv.nl/xwiki/bin/view/NOiV/Issues :)  \nvmassol - (13:32): english version: http://translate.google.com/translate?u=http%3A%2F%2Fwiki.noiv.nl%2Fxwiki%2Fbin%2Fview%2FNOiV%2FIssues&sl=nl&tl=en&hl=&ie=UTF-8  \nvmassol - (13:33): actually I've already answered to them on most issues  \nvmassol - (13:56): thanks marta  \nsdumitriu - (13:58): (01:57:34 PM) Marta Girdea: :)  \nxenon75 left at 14:02 (Client Quit  \nxenon75 joined #xwiki at 14:03  \nvmassol - (14:06): atlassian also have an irc bot: http://confluence.atlassian.com/display/DEVNET/atlassiandev\\_log-2010-01-28  \ntmortagne - (14:07): vmassol: i think it's XWiki because XWiki is traditionally the space where classes used to be  \ntmortagne - (14:07): i guess it will be difficult to get rid of that  \nvmassol - (14:07): in setFullName()  \nvmassol - (14:07): the default wiki was \"XWiki\" before  \nvmassol - (14:07): (AFAIR)  \nvmassol - (14:07): it's now \"Main\"  \nvmassol - (14:07): (or the current wiki)  \nvmassol - (14:08): s/wiki/space/  \ntmortagne - (14:08): yes the default space was XWiki if you did not had context document  \ntmortagne - (14:09): if there was context document, document space was taken as the default space I think  \nEnygma` - (14:10): Hi guys... I`m trying to render a document's content from to plaintext (using a renderer written by Anca for the Annotations feature).  \ntmortagne - (14:10): vmassol: \u00a0setFullName doe snot use current resolver .  \nEnygma` - (14:10): I am using the following code http://enygma.pastebin.com/m13eafb8a which works fine when the syntax is \"xwiki/2.0\", but when it's \"xwiki/1.0\" (like in the link on pastebin) \u00a0an endless loop occurs at line 14 (the transformation).  \ntmortagne - (14:10): ?  \nEnygma` - (14:10): It seems that HTMLMacro.renderWikiSyntax(...) is calling MacroTransformation.transform(...) which, in turn, calls HTMLMacro again. This goes on recursively.  \nvmassol - (14:10): looks like their bot is recent: http://confluence.atlassian.com/display/DEVNET/atlassiandev\\_log-2010-01-18  \nEnygma` - (14:10): using 2.1.1 code  \nvmassol - (14:11): tmortagne: \u00a0it uses \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setDocumentReference(this.currentMixedDocumentReferenceResolver.resolve(fullName));  \nvmassol - (14:11): so the space is the current one if not specified  \nEnygma` - (14:12): does anybody know anything about this?  \nvmassol - (14:12): Enygma`: hmmm  \ntmortagne - (14:12): vmassol: ok, so it's not \"Main\" as you said  \nvmassol - (14:12): tmortagne: yes it's the current one  \ntmortagne - (14:13): AFIK it used to be the current space before too  \nvmassol - (14:13): I'll put this in the release notes  \ntmortagne - (14:13): so it should be the same thing  \nvmassol - (14:13): since it's an important change from before  \nvmassol - (14:13): hmmm  \nvmassol - (14:13): actually I had changed setFullName a long time ago already  \nvmassol - (14:13): let me check the chistory  \nvmassol - (14:14): \\*history  \ntmortagne - (14:14): are you sure the class name was resolved using setFullName previously (and not something specific to the class in getObject) ?  \nvmassol - (14:16): tmortagne: ok got it  \nvmassol - (14:16): the default document name factory of before was using \"XWiki\" as the default space  \nvmassol - (14:16): \u00a0private static final String DEFAULT\\_SPACE = \"XWiki\";  \nvmassol - (14:16): so that's why  \ntmortagne - (14:16): if (classname.indexOf(\".\") == -1) {  \ntmortagne - (14:16): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0classname = \"XWiki.\" + classname;  \ntmortagne - (14:16): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}  \ntmortagne - (14:16): in XWikiDocument#getObject  \ntmortagne - (14:16): in 2.1  \nvmassol - (14:17): ok so both  \ntmortagne - (14:17): so it's not about setFullName  \nvmassol - (14:17): yep  \ntmortagne - (14:17): \"XWiki\" was used only if you did not had current space  \nvmassol - (14:17): now we need to decide what we do, we could keep the same behavior in the depercated api   \ntmortagne - (14:18): IMO change the bahavior mean breaking the api and we should not  \ntmortagne - (14:22): all old apis should work the way it used to be as much as possible  \nvmassol - (14:23): yes, I'll try to put this back  \nvmassol - (14:23): there might be lots of places though  \nvmassol - (14:29): Enygma`: sorry I'm a bit busy fixing stuff for the XE 2.2 final release. Maybe thomas has an idea  \nxwiki-bridge left at 14:39 (Read error: 110 (Connection timed out)  \nCalebJamesDeLisl - (14:42): lightbox.js evaluates scripts in the page it gets, but if a script tag says <script src=\".... \u00a0\u00a0It doesn't get the source and evaluate it.  \nCalebJamesDeLisl - (14:42): Should I hack my registration page to get the LiveValidation js with ajax if it's in the lightbox or fix the lightbox?  \nCalebJamesDeLisl - (14:44): I just realized the lightbox button on older XWiki versions will not be updated even if my registration page is installed so I'll fix the lightbox.  \nEnygma` - (14:47): vmassol: I`ll use a workaround for now, since I know the content is in \"html/4.01\" syntax and will pass that to the transformationManager  \nglerouge - (14:48): CalebJamesDeLisl: fixing the underlying problem is usually better indeed ;)  \nCalebJamesDeLisl - (14:48): I was just thinking about backward compatibility then I realized...  \ntmortagne - (14:48): Enygma`: i don't understand why you want to parse it in xwiki/1.0 syntax if it's html content  \nEnygma` - (14:49): well, because, in my case, it's the value for an object in a document which is in xwiki/1.0 syntax  \nEnygma` - (14:49): so I was trying to parse by the syntax of the document  \ntmortagne - (14:49): only note that by using \"xwiki/1.0\" you are using 1.0->2.0 syntax converter which is not perfect, if you really want to render xwiki/1.0 syntax you should use old apis  \nEnygma` - (14:50): in any case, it should have done something more relevant, like throw an exception or something  \ntmortagne - (14:50): in most of the code we handle xwiki/1.0 has a special case  \ntmortagne - (14:51): Enygma`: well it throw an exception if there is an error, an infinite loop is never done on purpose...  \nEnygma` - (14:52): yes, you are right... I was thinking about the fact that it should detect a syntax mismatch, but that is not the case  \ntmortagne - (14:53): Enygma`: according to what you said the convertion is done completely without any issue  \nEnygma` - (14:53): no, the conversion never ends  \ntmortagne - (14:53): HTMLMacro.renderWikiSyntax is called during 2.0 syntax execution  \ntmortagne - (14:53): yes it ends  \nEnygma` - (14:53): oh, 2.0 one  \ntmortagne - (14:53): but the 2.0 rendering never ends  \nEnygma` - (14:53): I see  \ntmortagne - (14:54): could you put your content in a xwiki/1.0 page  \ntmortagne - (14:54): and ask converter to give you 2.0  \ntmortagne - (14:54): to see what it generates  \ntmortagne - (14:54): we will be able to see what makes 2.0 rendering never ends maybe  \nEnygma` - (14:55): I will have to try that tomorrow... right now I have to run.  \ntmortagne - (14:55): ok  \nEnygma` - (14:55): thanks  \nEnygma` left at 14:56 (\"Leaving.\"  \nflaviusolaru left at 15:02 (\"Leaving.\"  \njvelo joined #xwiki at 15:06  \nflaviusolaru joined #xwiki at 15:09  \nEnygma` joined #xwiki at 15:10  \nEnygma` left at 15:10 (Client Quit  \nvmassol - (15:17): guys what should we do for the XAR export for an individual page?  \nvmassol - (15:17): right now it requires admin rights  \nvmassol - (15:17): not sure why  \nvmassol - (15:17): do you know why?  \nvmassol - (15:17): I can easily remove the menu entry if the user doesn't have the admin rights  \nvmassol - (15:17): wdyt?  \ntmortagne - (15:18): vmassol: it's export plugin which require admin right  \ntmortagne - (15:18): package plugin  \nvmassol - (15:18): ok then I'll hide the menu entry if the user doesn't have the rights  \ntmortagne - (15:18): and so does anything that use it  \nvmassol - (15:18): ok?  \ntmortagne - (15:18): (which is wrong IMO but we will not change the plugin now)  \ntmortagne - (15:19): anyway ok, better hide it that having it fail  \ntmortagne - (15:19): but we should have an issue for that  \ntmortagne - (15:19): since it's not really normal that you can't export a page on each you have all rights  \nflorinciu1 left at 15:29 (\"Leaving.\"  \nxwiki-bridge joined #xwiki at 16:06  \nxenon75 left at 17:44 (Client Quit  \nxenon75 joined #xwiki at 17:44  \nxenon751 joined #xwiki at 17:45  \nxenon751 left at 17:47 (Client Quit  \nxenon751 joined #xwiki at 17:52  \nxenon751 left at 17:53 (Client Quit  \nmflorea joined #xwiki at 18:02  \nxenon75 left at 18:02 (Read error: 113 (No route to host)  \nvmassol - (18:04): tmortagne: since I don't want to create a regression do you think you could check the commit i've just done quickly?  \nvmassol - (18:04): (just a visual check for ensure I've not done any error)  \ntmortagne - (18:04): sure  \nvmassol - (18:05): it's related to the XWiki space as default when not specified  \ntmortagne - (18:05): did not received the mail yet  \nbnokna joined #xwiki at 18:05  \nvmassol - (18:05): I'll revert my change for #useravatar locally to see if it works again  \nbnokna - (18:06): How can I reset my password in the database? I can't find a user table or so.  \nbnokna - (18:06): And everything begins with a xwiki prefix.  \nbnokna - (18:06): If you put xwiki before everything, then there is no value in such a prefix.  \ntmortagne - (18:07): bnokna: can't you access the user profile to change the password ? it would be way easier  \ntmortagne - (18:08): xwiki database structure is complex  \ntmortagne - (18:08): bnokna: if the issue is that you don't have any user able to login you can use superadmin user (you have to enable it in xwiki.cfg)  \nbnokna - (18:10): SELECT \\* FROM xwiki.xwikiobjects WHERE xwo\\_classname = 'XWiki.XWikiUsers'  \nvmassol - (18:13): tmortagne: hmmm two tests are failing in core. I'm checking  \nmflorea1 left at 18:19 (Read error: 110 (Connection timed out)  \nbnokna left #xwiki at 18:23  \ntmortagne - (18:28): vmassol: in testResolveReferenceWithSpecificSpace should should use something else than \"XWiki\" i think to be absolutely sure \"XWiki\" does not comes from somewhere else, something like \"CurrentSpace\"  \nvmassol - (18:28): I don't understand  \nvmassol - (18:28): I do test that  \ntmortagne - (18:28): i mean in the first test  \nlucaa left at 18:29 (\"Leaving.\"  \nlucaa joined #xwiki at 18:29  \nvmassol - (18:29): it has to be XWiki  \nvmassol - (18:29): since that's what we expect  \nvmassol - (18:29): let me checl  \nvmassol - (18:29): maybe I don't remember  \ntmortagne - (18:29): i mean change the expect also obviously  \narkub\\_ joined #xwiki at 18:29  \ntmortagne - (18:29): just don't test using \"XWiki\"  \nvmassol - (18:30): ah I see what you mean  \nvmassol - (18:30): except that the default is Main not XWiki  \nvmassol - (18:30): b  \nvmassol - (18:30): but ok I agree  \nvmassol - (18:30): thanks!  \ntmortagne - (18:30): sure but it used to be the default one and maybe some day we will want to put ot back for some reason  \ntmortagne - (18:31): anyway i don't see anything wrong in your committ  \ntmortagne - (18:31): if resolveReferenceWithSpecificSp works well it should be ok  \nvmassol - (18:31): now I need to find why XWikiServletURLFactoryTest fails  \ntmortagne left at 18:42 (\"Leaving.\"  \narkub left at 18:42 (Read error: 110 (Connection timed out)  \nflorinciu joined #xwiki at 19:09  \nkibahop joined #xwiki at 19:15  \nkibahop left at 19:16 (Client Quit  \narkub\\_ left at 19:21 (Read error: 113 (No route to host)  \ntmortagne joined #xwiki at 19:29  \ntmortagne left at 19:30 (Client Quit  \nlucaa left at 19:34 (\"Leaving.\"  \nlucaa1 joined #xwiki at 19:34  \nkibahop joined #xwiki at 20:07  \nbnokna joined #xwiki at 20:10  \nbnokna - (20:10): Hello.  \nglerouge - (20:10): hi bnokna  \nbnokna - (20:13): What about umlauts in page names? They are working in the title. But if I create a page which contains German umlauts, then the page name is wrongly (UTF-8 decoded as ISO-8859-1). And the link doesn't work.  \nglerouge - (20:13): Do you really need to create a page name with an umlaut? as long as the title can handle it?  \nbnokna - (20:13): No. But the users do it all the time.  \nglerouge - (20:14): right now I guess that if you're hitting an issue, it doesn't work well  \nglerouge - (20:14): are they creating new pages using the Create Page menu ?  \nbnokna - (20:14): I tested it that way.  \nglerouge - (20:15): there's a way to fix it then  \nglerouge - (20:15): let me find it  \nglerouge - (20:19): in http://localhost:8080/xwiki/templates/create.vm  \nglerouge - (20:19): replace #set($docname=$title.replaceAll(\"/\", \".\"))  \nglerouge - (20:19): with #set($docname=$util.clearName($title))  \nbnokna - (20:20): Will this be in an upcoming release?  \nglerouge - (20:21): you can also copy the contents from http://localhost:8080/xwiki/templates/create.vm , go to the XWiki.XWikiSkins page, use the class editor to add a create.vm textarea property to the class, go to XWiki.DefaultSkin , edit it in object mode , paste the content from create.vm , make the modification I explained and save the page  \nglerouge - (20:21): bnokna -> I don't really know, sdumitriu would know better  \nsdumitriu - (20:22): bnokna: What version of XWiki are you using?  \nsdumitriu - (20:22): And what container? Is it Tomcat?  \nbnokna - (20:23): I am using XWiki 2.1.1 and Tomcat 6.0.20.  \nsdumitriu - (20:24): K then  \nbnokna - (20:24): I updated from 2.0.2 to 2.1.1. I have a page with umlauts in it name and title. With 2.0.2 the link is working. With 2.1.1 the link results in an \"The requested document could not be found\" error. Can I rename the page name in the database? (Links to this page will then be broken. But that's ok.)  \nglerouge left at 20:24 (\"Leaving.\"  \nsdumitriu - (20:24): It should be fixed in the next version  \nsdumitriu - (20:25): But for your version you have to change a Tomcat setting  \nsdumitriu - (20:25): http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Encoding#HTomcat  \nsdumitriu - (20:25): In order to enable UTF-8 in tomcat, you have to add URIEncoding=\"UTF-8\"  \nbnokna - (20:29): How can I rename a page on the database?  \nbnokna - (20:31): I found the page with the umlauts in xwikidoc. And the XWD\\_CONTENT is still there. But if I click the link to this page in XWiki I get \"The requested document could not be found\". The URIEncoding doesn't fixed this.  \nflorinciu left at 20:31 (Read error: 110 (Connection timed out)  \nlucaa1 left at 20:31 (Read error: 104 (Connection reset by peer)  \nlucaa joined #xwiki at 20:31  \nbnokna - (20:31): The link in XWiki is not marked by a [?].  \nbnokna - (20:34): I think I will rename all umlaut pages with XWiki 2.0.2 before I upgrade the production environment to XWiki 2.1.1.  \nbnokna - (20:36): What does chine people do?  \nbnokna - (20:37): It's 2010. And encoding problems are still popping up everywhere. :-/  \nbnokna - (20:40): Changing xwikidoc.xwd\\_name doesn't work. The renamed page isn't found by XWiki anymore. Maybe a Hibernate caching problem?  \nvmassol - (20:41): bnokna: have you seen what sdumitriu said?  \nvmassol - (20:42): if you mess with the database we won't be able to you BTW  \nvmassol - (20:42): (since it's going to be hard to know what you've done)  \nvmassol - (20:42): (and then there's no warrantee xwiki will work at all)  \nbbc581 joined #xwiki at 20:43  \nbnokna - (20:44): I am doing this on a test system.  \nbnokna left #xwiki at 20:52  \nKermitTheFragger left at 21:11 (\"Leaving\"  \nCalebJamesDeLisl left at 21:21 (\"barjavel.freenode.net irc.freenode.net\"  \nnpm left at 21:53 (\"Leaving.\"  \nnpm joined #xwiki at 21:56  \njvelo left at 22:22 (Read error: 104 (Connection reset by peer)  \nlucaa left at 22:22 (\"Leaving.\"  \nflorinciu joined #xwiki at 22:36  \nlucaa joined #xwiki at 22:45  \nmflorea left at 23:28 (\"Leaving.\"  \n\n"}