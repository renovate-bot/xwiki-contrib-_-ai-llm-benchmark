{"id": "dev:IRC.xwikiArchive20100630", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100630", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\njvdrean joined #xwiki at 00:03  \nlucaa left at 00:13 (Ping timeout: 240 seconds  \nabusenius left at 00:54 (Ping timeout: 252 seconds  \njvdrean left #xwiki at 01:04  \nsdumitriu left at 02:26 (Ping timeout: 260 seconds  \nlucaa joined #xwiki at 07:04  \nmflorea joined #xwiki at 07:33  \nlucaa left at 07:35 (Ping timeout: 265 seconds  \ntmortagne joined #xwiki at 08:13  \ntmortagne left #xwiki at 08:13  \nplunden joined #xwiki at 08:24  \nsdumitriu joined #xwiki at 08:26  \nlucaa joined #xwiki at 08:29  \nsilviar joined #xwiki at 08:34  \nflorinciu joined #xwiki at 08:34  \nmariusbutuc joined #xwiki at 08:41  \nvmassol joined #xwiki at 08:47  \ntmortagne joined #xwiki at 09:44  \nvmassol1 joined #xwiki at 09:45  \nlucaa left at 09:47 (Ping timeout: 265 seconds  \nvmassol left at 09:48 (Ping timeout: 276 seconds  \narkub joined #xwiki at 09:52  \nsburjan joined #xwiki at 09:57  \nvmassol joined #xwiki at 09:59  \nvmassol1 left at 09:59 (Read error: Connection reset by peer  \ntmortagne - (10:00): [release] Starting 2.4M2 release in about 10 minutes  \nflorinciu left at 10:02 (Quit: Leaving.  \nnpm left at 10:03 (Quit: Leaving.  \njvdrean joined #xwiki at 10:03  \nvmassol - (10:07): cool  \nvmassol - (10:07): at last  \nvmassol - (10:07): :)  \nEnygma` joined #xwiki at 10:08  \nvmassol left at 10:18 (Ping timeout: 265 seconds  \nabusenius joined #xwiki at 10:20  \nvmassol joined #xwiki at 10:23  \nvmassol - (10:23): tmortagne: can I commit a test in ui-tests?  \ntmortagne - (10:23): vmassol: sure  \nvmassol - (10:26): tmortagne: give me 15 seconds  \nvmassol - (10:26): to commit the new events in livetable.js  \nvmassol - (10:26): creating jira  \ntmortagne - (10:26): ok starting with core  \ntmortagne - (10:27): so you have some time  \nevalica joined #xwiki at 10:27  \nvmassol - (10:28): done  \nvmassol - (10:29): just committed the start of a ui-tests too for testing livetables to share it with others  \nvmassol - (10:29): it's not doing much yet but it works for me  \nvmassol - (10:29): it's using the new js event I have introduced too  \nvmassol - (10:29): that should remove all flickering normally  \ntmortagne - (10:30): ok cool  \nlucaa joined #xwiki at 10:31  \nvmassol - (10:32): ouch made a mistake  \nvmassol - (10:32): in livetable.js  \nvmassol - (10:32): fixing  \nvmassol - (10:34): done  \njvdrean - (10:36): vmassol: what do we do about the velocity execution problem on the 2.3 branch ? I confirm I can't reproduce by hand  \nvmassol - (10:46): jvdrean: for 2.4M2 it's not important but for 2.3.2 it is\u2026.  \nvmassol - (10:46): it would be good to try to get to the bottom of it before the 2.3.2 release if we can....  \nvmassol - (10:47): any idea on how diagnose this?  \nvmassol - (10:48): I saw it twice during ui-tests execution on the recent changes area  \nvmassol - (10:48): when running EditObjectsTest  \nvmassol - (10:48): trying again now  \njvdrean - (10:50): did you see that on trunk ?  \nvmassol - (10:52): yes  \njvdrean - (10:53): then it's weird that tests always reproduce it in blog tests on 2.3 and not on 2.4  \nnpm joined #xwiki at 11:01  \nvmassol - (11:12): jvdrean: you can reproduce it?  \nCalebJamesDeLisl - (11:13): I have a hudson setup on an old computer, anyone know how to get it to auto install maven from apache? It doesn't like whatever I put in for the version number.  \njvdrean - (11:21): vmassol: yes I have the tests failing on hudson also fail on my computer  \njvdrean - (11:21): s/I have//  \ntmortagne left at 11:22 (Ping timeout: 276 seconds  \nnpm left at 11:22 (Ping timeout: 260 seconds  \nvmassol - (11:27): jvdrean: ok great then it should be easy to fix. I'll rebuild 2.3 branch and try running the tests. What test should I run?  \ntmortagne joined #xwiki at 11:30  \nsburjan - (11:33): do you need the iasi hudson server operational ?  \nvmassol - (11:33): who?  \nvmassol - (11:34): we do need the hudson agent to be 24/24 and 7/7 online yes  \nvmassol - (11:34): we \u00a0= the xwiki project  \nsburjan - (11:34): okay.. i'll start it  \nvmassol - (11:34): with an availability of greater than 99.99%  \nvmassol - (11:34): it should never evert be stopped  \nvmassol - (11:34): it's a server  \nvmassol - (11:34): ....  \nvmassol - (11:34): :)  \nsburjan - (11:34): yeah :)  \nsburjan - (11:34): it will be fixed  \nCalebJamesDeLisl - (11:35): only four 9's ? ;)  \nsburjan - (11:35): :)  \nsburjan - (11:35): 99.(9)  \nCalebJamesDeLisl - (11:36): I think backbone router stuff is 5. That means downtime of about 1 minute per year.  \njvdrean - (11:38): vmassol: BlogCategoriesTest  \nvmassol - (11:38): ok  \nvmassol - (11:57): jvelociter: sniff the livetable event mechanism doesn't seem to be reliable....  \nvmassol - (11:58): (maybe not the event mechanism per see but how I've coded it)  \nvmassol - (11:58): I'm getting timeouts from time to time  \nvmassol - (11:58): if you have any idea it would be most welcome  \njvelociter - (11:59): something must be wrong somewhere:)  \nvmassol - (11:59): http://svn.xwiki.org/svnroot/xwiki/enterprise/trunk/distribution-test/ui-tests/src/test/it/org/xwiki/it/ui/framework/elements/LiveTableElement.java  \njvelociter - (11:59): could it be a race condition between the registration of the listener and the firing of the event ?  \nvmassol - (11:59): sometimes the waitUntilReady  \nvmassol - (11:59): waits till the timeout even though I can see visually that the livetable has finished loading  \nvmassol - (12:00): is the registration asynchronous? (I doubt it would make sense)  \njvelociter - (12:04): no it's not  \njvelociter - (12:04): and indeed it would make no sense..  \njvelociter - (12:04): it's pretty odd  \njvelociter - (12:05): their is one thing that we need to know  \njvelociter - (12:05): it's when exactly is the executeJavascript method that registers the listener happens  \njvelociter - (12:05): (when is the test object constructed)  \nvmassol - (12:06): the test is here:  \njvelociter - (12:06): and is that deterministic versus the moment the livetable is loaded  \nvmassol - (12:06): http://svn.xwiki.org/svnroot/xwiki/enterprise/trunk/distribution-test/ui-tests/src/test/it/org/xwiki/it/ui/xe/AllDocsTest.java  \nvmassol - (12:06): so we click on the Index tab in the AllDcos page  \nvmassol - (12:07): it does this:  \nvmassol - (12:07): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.indexTab.click();  \nvmassol - (12:07): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0LiveTableElement lt = new LiveTableElement(\"alldocs\");  \nvmassol - (12:07): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lt.waitUntilReady();  \nvmassol - (12:07): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return lt;  \nvmassol - (12:08): hmmm  \nvmassol - (12:08): indeed the lt could load before it's registered  \nvmassol - (12:08): I'll change the order  \nvmassol - (12:08): ie do the new before the click  \nmflorea left at 12:09 (Quit: Leaving.  \nvmassol - (12:10): I'll let you know if I see the problem again  \njvelociter - (12:10): vmassol: humm but then you have the opposite problem  \nvmassol - (12:10): why?  \njvelociter - (12:10): you register the event before you change page, no ?  \nvmassol - (12:10): it's on the same page  \nvmassol - (12:10): no?  \nvmassol - (12:10): veriyfingh  \njvelociter - (12:11): I think it's 2 separate pages  \nvmassol - (12:11): the test works so it must be on the same page  \nvmassol - (12:11): yes it is  \nvmassol - (12:11): if it were on a differnet page we wouldn't have the pb :)  \nvmassol - (12:12): (I think)  \nvmassol - (12:13): hmmm  \njvelociter - (12:14): yes, probably not  \nvmassol - (12:14): I just got the warning message \"the environment doesn't allow displaying the livetable\" message  \nvmassol - (12:14): (not sure about the exact message)  \njvelociter - (12:14): and the message remains ?  \nvmassol - (12:15): yes  \nvmassol - (12:15): I restarted the test and it was ok  \nvmassol - (12:15): I'll see if I get it again  \nvmassol - (12:15): jvelociter: another question for you  \nvmassol - (12:15): I tried this to remove the status:  \nvmassol - (12:15): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0executeJavascript(\"document.body.remove(document.getElementById('uitest-livetable-status'));\");  \njvelociter - (12:15): maybe it was a cache issue  \nvmassol - (12:15): yes possibly  \nvmassol - (12:16): but this js removes all content of the page apparently  \njvelociter - (12:16): $('uitest-livetable-status').remove()  \nvmassol - (12:16): I tried this too  \njvelociter - (12:16): should do it  \nvmassol - (12:16): but it says $('uitest-livetable-status') is null  \nvmassol - (12:16): I'll try again  \njvelociter - (12:16): $ is your document.getElementById  \nflorinciu joined #xwiki at 12:17  \nvmassol - (12:17): yep I get:  \nvmassol - (12:17): org.openqa.selenium.WebDriverException: TypeError: $(\"uitest-livetable-status\") is null  \nvmassol - (12:18): when i execute:  \nvmassol - (12:18): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0executeJavascript(\"$('uitest-livetable-status').remove();\");  \njvelociter - (12:18): ok. the ID is correct ?  \nvmassol - (12:18): yes  \njvelociter - (12:18): hmm. could be the dollar method rewritten by something else  \njvelociter - (12:18): that sound strange however  \njvelociter - (12:19): document.getElementById(\"uitest-livetable-status\") is also null ?  \nvmassol - (12:19): the registration is:  \nvmassol - (12:19): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0executeJavascript(\"document.observe('xwiki:livetable:\" + this.livetableId + \":displayComplete', function() {\"  \nvmassol - (12:19): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+ \"document.body.insert(new Element('div', {'id' : 'uitest-livetable-status' }).update('complete'));});\");  \nkibahop joined #xwiki at 12:21  \njvelociter - (12:21): yes that looks correct. With firebug you are able to verify the element is there with the expected ID ?  \nvmassol - (12:21): hmm seems so  \nvmassol - (12:21): checking more  \njvelociter - (12:22): and possibly run $('uitest-livetable-status') in the console ?  \nvmassol - (12:22): yes but I don't get firebug in sleenium....  \nvmassol - (12:22): since FF is started without plugins during selenium execution  \njvelociter - (12:22): there's a solution to that  \nvmassol - (12:22): executeJavascript(\"alert(document.getElementById('uitest-livetable-status'))\") gives null  \njvelociter - (12:22): you have to install FB as a global extension or something like this  \njvelociter - (12:22): let me find a link  \njvelociter - (12:23): http://dev.xwiki.org/xwiki/bin/view/Community/Debugging#HUsingFirebugwhendebuggingaseleniumtest  \njvelociter - (12:23): :)  \nvmassol - (12:23): I remember I looked at that in the past  \njvelociter - (12:23): now I don't know for WebDriver  \nvmassol - (12:23): checking again  \njvelociter - (12:23): but I remember it worked fine for me for selenium 1  \nvmassol - (12:27): just tried the ChromeDriver() of webdriver for fun  \nvmassol - (12:27): but it fails  \nvmassol - (12:27): maybe executeJS doesn't work for it  \nvmassol - (12:27): back to FF  \nmariusbutuc left at 12:30 (Ping timeout: 265 seconds  \nvmassol - (12:30): ok lunch time, I'll try to install the global extension thingie after  \nflorinciu1 joined #xwiki at 13:09  \nflorinciu left at 13:10 (Ping timeout: 265 seconds  \nvmassol - (13:12): http://kb.mozillazine.org/Installing\\_extensions#Global\\_installation doesn't work on mac  \nCalebJamesDeLisl - (13:15): looking at nsKeygenHandler.cpp, xwiki-core is starting to look pretty good.  \nCalebJamesDeLisl - (13:23): it was a stroke of genius when they removed goto from java.  \nvmassol - (13:26): any of you ever installed a FF extension globally on mac. I cannot figure how to make it work....  \nvmassol - (13:33): jvelociter: that was why I hadn't done that before\u2026 it just doesn't work  \nvmassol - (13:33): I've tried all the methods and none worked for me  \nvmassol - (13:35): trying to debug without firebuig  \nmflorea joined #xwiki at 13:35  \nmariusbutuc joined #xwiki at 13:37  \nvmassol - (13:39): oh I know what the pb is  \nvmassol - (13:47): CalebJamesDeLisl: any idea why sendKeys() called on a livetable filter field doesn't trigger the livetable filtering?  \nvmassol - (13:47): you think it's sendKeys vs typeKeys?  \nvmassol - (13:47): (ie no native events)  \nCalebJamesDeLisl - (13:49): No, but I did notice that in selenium1, type didn't work.  \nCalebJamesDeLisl - (13:49): you had to use typeKeys instead.  \nvmassol - (13:50): ok got it tow ork  \nvmassol - (13:50): :)  \nvmassol - (13:50): you must call clear() before  \nvmassol - (13:50): hmm \u00a0flickering  \nvmassol - (13:53): hmmm  \nvmassol - (13:53): clear() + click() + sendKeys() seem to work  \nvmassol - (13:54): but that's starting to be voodoo  \nvmassol - (13:54): :)  \nvmassol - (13:54): ahah was able to make it fail too after 6 tries  \njvdrean - (13:55): vmassol: side note, I'm not able to use -Dtest= with 2.3  \nvmassol - (13:55): jvdrean: oops I had forgotten about this pb, was still on the livetable stuff.....  \nCalebJamesDeLisl - (13:56): Do you know what fires the livetable? Is is an onchange event?  \nvmassol - (13:57): they suggest clear + sendKeys + click here: http://groups.google.com/group/webdriver/browse\\_thread/thread/457003a0d60a540c  \nvmassol - (14:02): jvdrean: -Dtest is only for ui-tests AFAIK  \nvmassol - (14:02): ok BlogCategoriesTest is ui-tests  \nvmassol - (14:02): building 2.3  \nvmassol - (14:10): jvdrean: btw you're right  \nvmassol - (14:10): I remember now that I have seen the macro pb while I was working on BlogCategoriesTest  \nvmassol - (14:10): (and not the other test as I mentioned earlier)  \nvmassol - (14:11): so indeed it seems it's a blog-related issue  \nvmassol - (14:11): not 100% sure but it seems to be  \nCalebJamesDeLisl - (14:11): Is that in the release notes?  \nvmassol - (14:12): what?  \nCalebJamesDeLisl - (14:12): macros defined in #includeForm's will break.  \nvmassol - (14:12): ah?  \nCalebJamesDeLisl - (14:12): Isn't that what you changed in the velocity macro code?  \nvmassol - (14:13): no  \nvmassol - (14:13): I haven't broken anything that I know of  \nCalebJamesDeLisl - (14:13): I should read the code so I know exactly when the macros go away.  \nvmassol - (14:14): they go away at the end of getRenderedContent()  \nvmassol - (14:14): the top level call to getRenderedContent to be precise  \nvmassol - (14:14): ie after the doc has been rendered  \nCalebJamesDeLisl - (14:14): Top level call? so if velocity calls getRenderedContent, they don't go away when that ends?  \nvmassol - (14:15): right  \nvmassol - (14:15): by velocity  \nvmassol - (14:15): I assume you mean velocity code in a page  \nvmassol - (14:15): as opopised as velocity code in a template  \nvmassol - (14:15): \\*opposed  \nCalebJamesDeLisl - (14:16): Looking for the specific revision. There were a lot of changes...  \nvmassol - (14:18): 29550  \nCalebJamesDeLisl - (14:20): I had thought it was a change to DefaultVelocityEngine and there isn't really any change in 29550, looking more carefully...  \nvmassol - (14:20): jvdrean: I'm also getting a test execution error  \nvmassol - (14:20): org.openqa.selenium.support.ui.TimeoutException: Failed to find the following locators: [  \nvmassol - (14:20): By.xpath: //span[@class='blog-category']//a[contains(@href, 'The+%22Do%22s+%26+Don%27ts')]  \nvmassol - (14:20): on 2.4 snap  \nvmassol - (14:26): jvdrean: and in the console i have:  \nvmassol - (14:26): 2010-06-30 14:21:11,923 [http://localhost:8080/xwiki/bin/view/Blog/ManageCategories?xpage=plain&display=list&root=Blog.Categories] ERROR hql.PARSER \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- <AST>:1:505: unexpected AST node: and  \nvmassol - (14:26): 2010-06-30 14:21:11,924 [http://localhost:8080/xwiki/bin/view/Blog/ManageCategories?xpage=plain&display=list&root=Blog.Categories] ERROR internal.DefaultVelocityEngine \u00a0- Exception in macro #getEntriesForCategory at xwiki:Blog.ManageCategories[line 220, column 1]  \nvmassol - (14:26): 2010-06-30 14:21:11,924 [http://localhost:8080/xwiki/bin/view/Blog/ManageCategories?xpage=plain&display=list&root=Blog.Categories] ERROR internal.DefaultVelocityEngine \u00a0- Exception in macro #displayEditableCategory at xwiki:Blog.ManageCategories[line 153, column 1]  \nvmassol - (14:26): 2010-06-30 14:21:11,924 [http://localhost:8080/xwiki/bin/view/Blog/ManageCategories?xpage=plain&display=list&root=Blog.Categories] ERROR internal.DefaultVelocityEngine \u00a0- Exception in macro #displayCategory at xwiki:Blog.ManageCategories[line 123, column 1]  \nvmassol - (14:26): 2010-06-30 14:21:11,924 [http://localhost:8080/xwiki/bin/view/Blog/ManageCategories?xpage=plain&display=list&root=Blog.Categories] ERROR internal.DefaultVelocityEngine \u00a0- Exception in macro #displayCategoriesHierarchyRecursive at xwiki:Blog.ManageCategories[line 90, column 1]  \nvmassol - (14:26): 2010-06-30 14:21:11,924 [http://localhost:8080/xwiki/bin/view/Blog/ManageCategories?xpage=plain&display=list&root=Blog.Categories] ERROR internal.DefaultVelocityEngine \u00a0- Exception in macro #displayCategoriesHierarchy at xwiki:Blog.ManageCategories[line 339, column 1]  \nvmassol - (14:26): 2010-06-30 14:21:11,998 [http://localhost:8080/xwiki/bin/view/Blog/ManageCategories?xpage=plain&display=list&root=Blog.Categories] ERROR internal.DefaultVelocityEngine \u00a0- Exception in macro #displayCategoryManagementTree at xwiki:Blog.ManageCategories[line 58, column 3]  \njvdrean - (14:27): vmassol: I get those errors too but I'm not able to reproduce it easily by hand  \njvdrean - (14:27): I've been able to reproduce it twice on smthg like 20 tries  \nCalebJamesDeLisl - (14:28): vmassol: c.x.x.XWiki.include( bypasses XWikiDocument.getRenderedContent for syntax 1.0 content.  \nvmassol - (14:28): CalebJamesDeLisl: yes  \nCalebJamesDeLisl - (14:29): I guess that only matters if a template #include's a syntax 1.0 document.  \nvmassol - (14:29): correct, which we don't do  \nCalebJamesDeLisl - (14:31): lucaa was talking about a problem with annotations which appeared suddenly and was fixed by changing to {{include}}  \nvmassol - (14:31): hmmm  \nvmassol - (14:31): yes that was a bug on her side  \nCalebJamesDeLisl - (14:31): :)  \nCalebJamesDeLisl - (14:31): It's a feature.  \nvmassol - (14:31): she was using an include that includes in a new context instead of an include that includes in the current context  \nvmassol - (14:31): it worked because of a bug in macro isolation in 2.0 syntax  \nvmassol - (14:32): just checked and we do have #include\\* calls in templates  \nvmassol - (14:32): ah actually no  \nCalebJamesDeLisl - (14:32): Well if user code relies on that bug, I don't imagine they are going to be happy that their bug was shown.  \nCalebJamesDeLisl - (14:33): --> release notes.  \nvmassol - (14:33): yes it needs to be in the release notes  \nCalebJamesDeLisl - (14:33): Yes, an #include is used in registerinline.vm but it includes a 2.0 document.  \narkub left at 14:41 (Ping timeout: 240 seconds  \ntmortagne - (14:42): CalebJamesDeLisl: it's only about #includeTopic not any #include\\*  \nvmassol - (14:43): jvdrean: it's really strange. When i get the \"failed to execute macro [velocity]\" I cannot click on it to expand it  \nCalebJamesDeLisl - (14:43): I see. I was looking at include( and I don't see it changing the context so it \\_seems\\_ like it should be ok.  \nCalebJamesDeLisl - (14:44): vmassol: You can right click it and use firebug, or you can shut off css and it will display.  \nCalebJamesDeLisl - (14:44): view->page style->no style  \nvmassol - (14:45): cool  \nvmassol - (14:45): Caused by: com.xpn.xwiki.XWikiException: Error number 3223 in 3: Exception while searching documents with sql select count(distinct doc.fullName), doc.name and obj.id = categories.id.id and categories.id.name='category' and category in (?) from XWikiDocument as doc , DBStringListProperty as categories join categories.list as category, BaseObject obj where (doc.hidden <> true or doc.hidden is null) and obj.name = doc.fullName and obj.clas  \nvmassol - (14:45): Wrapped Exception: unexpected AST node: and near line 1, column 505 [select count(distinct doc.fullName), doc.name and obj.id = categories.id.id and categories.id.name='category' and category in (?) from com.xpn.xwiki.doc.XWikiDocument as doc , com.xpn.xwiki.objects.DBStringListProperty as categories join categories.list as category, com.xpn.xwiki.objects.BaseObject obj where (doc.hidden <> true or doc.hidden is null) and obj.name = doc.  \nKermitTheFragger joined #xwiki at 14:46  \nCalebJamesDeLisl - (14:47): looks like a query tried to get parsed as velocity. too many \" marks?  \nvmassol - (14:47): why velocity?  \nvmassol - (14:47): this is coming from a db query  \nvmassol - (14:47): here: at com.xpn.xwiki.store.XWikiHibernateStore.search(XWikiHibernateStore.java:2295)  \nCalebJamesDeLisl - (14:47): Oops nevermind, forgot hql uses ast too.  \nCalebJamesDeLisl - (14:48): column 505, looks like there must be more query.  \nvmassol - (14:49): hmm  \nvmassol - (14:49): is it allowed to have where conditions  \nvmassol - (14:49): after a order by  \nvmassol - (14:49): ?  \nvmassol - (14:49): sdumitriu: is this query correct?  \nvmassol - (14:53): this query is created by countDocuments()  \narkub joined #xwiki at 14:55  \nvmassol - (14:55): checking where countDocument is called in the blog app  \nvmassol - (14:56): \u00a0#set($totalEntries = $xwiki.countDocuments(${query}, ${categories})) in CategoriesCode.xml  \nvmassol - (14:57): \u00a0\u00a0#set($query = \", DBStringListProperty as categories join categories.list as category${query} and obj.id = categories.id.id and categories.id.name='category' and category in (${parameters})\")  \nCalebJamesDeLisl - (14:57): If you're doing a select count, why do you need an order by clause?  \nvmassol - (14:59): and the nested $query is #getBlogEntriesBaseQuery  \nCalebJamesDeLisl - (15:07): Reading over bblfish's code, funny exceptions: \"How can this happen? Serious! An IOEXception on a StringReader?\"  \nvmassol - (15:08): maybe the single quotes from the cateogy name are not escaped properly in the query  \nvmassol - (15:11): no that should be ok since the cateogry name is passed as param  \nplunden left #xwiki at 15:52  \nkibahop left #xwiki at 16:05  \nevalica1 joined #xwiki at 16:07  \nevalica left at 16:10 (Ping timeout: 248 seconds  \nEnygma` left at 16:10 (Ping timeout: 248 seconds  \nvmassol - (16:28): jvelociter: I think the displayComplete vent should also be sent at the end of \u00a0refreshContent in LivetableFilter, wdyt?  \njvelociter - (16:28): (otp)  \nvmassol - (16:28): CalebJamesDeLisl: it seems the filtering is done by catching 3 events: keyUp, click and change  \nvmassol - (16:29): for text, it's \"keyup\"  \nvmassol - (16:29): and I guess sendKeys doens't send that  \nvmassol - (16:29): checking forums  \nmariusbutuc left at 16:36 (Ping timeout: 265 seconds  \nCalebJamesDeLisl - (16:39): hmm. I would have thought sendKeys simulated every key event since it's pretty slow.  \nvmassol - (16:39): it's fast hee  \nvmassol - (16:39): here  \nvmassol - (16:39): I've tried this:  \nvmassol - (16:39): sendKeys(text + Keys.UP);  \nvmassol - (16:39): but it's not working better (sometimes work , sometimes doesn't)  \nCalebJamesDeLisl - (16:40): (just met some Jehovah's witnesses and hopefully gave them what was hopefully an interesting discussion)  \nCalebJamesDeLisl - (16:40): s/hopefully//  \nCalebJamesDeLisl - (16:40): I see so sendKeys is sending key events. They must all be keyDown events unless otherwise specified.  \nEnygma` joined #xwiki at 16:41  \nvmassol - (16:41): I don't know  \nvmassol - (16:41): trying to find the source  \nCalebJamesDeLisl - (16:41): I think I might be able to get bblfish's code to sign text if I set the client cert to have the CA bit set and then reimport it as a CA.  \nabusenius - (16:48): CalebJamesDeLisl, you mean a self signed CA certificate?  \nCalebJamesDeLisl - (16:49): I'm looking through nsKeygenHandler.cpp and it appears that you can decide what bits are set on the client key.  \nCalebJamesDeLisl - (16:50): Client makes key pair, pushes public key to server, server gives key back offering it as CA, win.  \nabusenius - (16:51): the client can set those bits when creating the certificate  \nabusenius - (16:52): it can basically pretend being a CA, if FF doesn't check if the CA is trusted, its might be a security bug :)  \nabusenius - (16:53): (if there is no user interaction needed to transfer the cert to server)  \nCalebJamesDeLisl - (16:53): No it will check.  \nCalebJamesDeLisl - (16:53): I'm trying to see if the client can really set those bits.  \nabusenius - (16:54): when creating the cert definitely  \nabusenius - (16:54): afterwards no, it would change the cert  \nabusenius - (16:54): look, a cert I generated yesterday:  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Extensions:  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Basic Constraints (critical):  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Certificate Authority (CA): TRUE  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Path Length Constraint: 3  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Key Purpose (not critical):  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Code signing.  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Key Usage (critical):  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Certificate signing.  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0CRL signing.  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Subject Key Identifier (not critical):  \nabusenius - (16:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a097c78e35eb43d5dfa8f4deaed0498ff394557b3a  \nCalebJamesDeLisl - (16:55): You generated thst in firefox?  \nabusenius - (16:55): no  \nabusenius - (16:56): but we can do it on the server  \nCalebJamesDeLisl - (16:56): I want to know if firefox can generate a client cert with the CA bit set.  \nabusenius - (16:56): ah, ok  \nabusenius - (16:56): so that the secret key doesnt leave the client's browser  \nCalebJamesDeLisl - (16:56): If the server makes a CA key then everybody has to trust the server to authenticate all websites.  \nCalebJamesDeLisl - (16:57): (server gets hacked = everyone pwnd.)  \nabusenius - (16:57): thats only an issue for foaf+sll :)  \nCalebJamesDeLisl - (16:57): Each client generates their won ca key, then everybody only has to trust themselves.  \nabusenius - (16:58): well, the admin will need to trust everyone  \nabusenius - (16:59): in any case  \nCalebJamesDeLisl - (16:59): nope, on the server side the keys are used just like pgp keys.  \nabusenius - (17:00): and what is the difference to the client side?  \nCalebJamesDeLisl - (17:01): i import my own key, thus I trust myself and can then sign text.  \nsilviar left at 17:09 (Quit: Leaving.  \nCalebJamesDeLisl - (17:10): I wonder what ff does if it gets an unsigned cs cert.  \nCalebJamesDeLisl - (17:10): s/cs/sa  \nCalebJamesDeLisl - (17:10): s/sa/CA  \nnpm joined #xwiki at 17:14  \nCalebJamesDeLisl - (17:17): Here's my thinking. Client creates a client key, sends it to the server. Instead of singing it, the server yanks the self signature off of it and then modify the CA bit to be true and passes it back. Either ff blows up, or begins trusting itself.  \nlucaa left at 17:18 (Quit: Leaving.  \nEnygma` left at 17:18 (Ping timeout: 248 seconds  \nabusenius - (17:19): a cert cannot be not signed afaik  \nCalebJamesDeLisl - (17:20): My foafssl cert has a signature on it, I can't figure out who's but nowhere in the foafssl code is it signing anything.  \nabusenius - (17:20): an unsigned cert is just some public key  \nabusenius - (17:20): self signed?  \nCalebJamesDeLisl - (17:21): I think so.  \nabusenius - (17:21): well its still signed then :)  \nabusenius - (17:21): can you generate a certificate request in ff?  \nabusenius - (17:22): it is not yet signed, but you can make a certificate out of it  \nabusenius - (17:22): (by signing)  \nCalebJamesDeLisl - (17:23): yea, go to webid.myxwiki.org and you can see it in action.  \nCalebJamesDeLisl - (17:24): It's really nice. It uses stuff in ff that's been \"kicking around\" since the netscape days.  \nvmassol1 joined #xwiki at 17:25  \nvmassol left at 17:27 (Ping timeout: 260 seconds  \nvmassol1 is now known as vmassol ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nvmassol - (17:56): it's really strange because functional tests are supposed to be black box tests but in practice you need intricate knowledge of the code to write selenium tests\u2026. something is wrong....  \nvmassol - (17:57): almost spent the full day on the livetable tests and I'm still nowhere finished  \nvmassol - (17:57): despair is settling in\u2026.. :)  \nsdumitriu - (18:02): vmassol: Keys.UP is not a keyup event  \nsdumitriu - (18:03): It's the Up arrow key  \nvmassol - (18:03): ahah good point  \nsdumitriu - (18:03): Are you sure you want to send that?  \nvmassol - (18:04): since the LT listens to the keyup event  \nsdumitriu - (18:04): Re is that uery valid, probably  \nvmassol - (18:04): we need to send it somehow i  \nsdumitriu - (18:04): probably notn  \nsdumitriu - (18:04): Looks damn invalid to me  \nsdumitriu - (18:04): select stuff and conditions from places where conditions  \nsdumitriu - (18:05): So something gets duplicated  \nsdumitriu - (18:05): But it's strange since that part of the query is computed in Java  \nsdumitriu - (18:06): And it shouldn't fail just from time to time  \nvmassol1 joined #xwiki at 18:19  \nvmassol left at 18:22 (Ping timeout: 240 seconds  \ntmortagne left at 18:33 (Quit: Leaving.  \nflorinciu1 left at 18:57 (Read error: Connection reset by peer  \nflorinciu joined #xwiki at 18:57  \nvmassol1 left at 19:00 (Quit: Leaving.  \nabusenius left at 19:04 (Ping timeout: 240 seconds  \nsburjan left at 19:06 (Ping timeout: 265 seconds  \nevalica1 left #xwiki at 19:10  \njvdrean left at 19:11 (Quit: Leaving.  \nmflorea left at 19:13 (Quit: Leaving.  \ntmortagne joined #xwiki at 19:13  \ntmortagne left #xwiki at 19:13  \nabusenius joined #xwiki at 19:25  \ntc\\_ left at 19:25 (Ping timeout: 252 seconds  \nKermitTheFragger left at 19:33 (Remote host closed the connection  \nlucaa joined #xwiki at 19:44  \ntc\\_ joined #xwiki at 19:49  \narkub left at 19:55 (Quit: Leaving  \nflorinciu left at 20:00 (Quit: Leaving.  \nCalebJamesDeLisl left at 20:01 (Quit: relocating  \nvmassol joined #xwiki at 20:30  \nflorinciu joined #xwiki at 20:34  \nvmassol left at 20:37 (Quit: Leaving.  \nnickless joined #xwiki at 21:57  \nabusenius left at 21:58 (Ping timeout: 264 seconds  \nCalebJamesDeLisl joined #xwiki at 22:03  \nflorinciu left at 22:11 (Read error: Connection reset by peer  \nmflorea joined #xwiki at 22:38  \nmflorea left at 23:30 (Quit: Leaving.  \nlucaa left at 23:32 (Read error: Connection reset by peer  \njfx joined #xwiki at 23:39  \nsdumitriu left at 23:52 (Ping timeout: 276 seconds  \njfx left #xwiki at 23:53  \n\n"}