{"id": "dev:IRC.xwikiArchive20160105", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160105", "title": "IRC Archive for channel #xwiki on 05 January 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n03:37\u00a0<OSIMasson>\u00a0has joined #xwiki  \n05:36\u00a0<mflorea>\u00a0has joined #xwiki  \n06:02\u00a0<Denis1>\u00a0has joined #xwiki  \n06:05\u00a0<Denis>\u00a0has quit  \n07:02\u00a0<msmeria>\u00a0has joined #xwiki  \n07:20\u00a0<mflorea>\u00a0has quit  \n07:41\u00a0<vmassol>\u00a0has joined #xwiki  \n08:15\u00a0<cjd>\u00a0has joined #xwiki  \n08:16\u00a0<msmeria>\u00a0has quit  \n08:33\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:47\u00a0<martinus\\_\\_>\u00a0has joined #xwiki  \n09:08\u00a0<mflorea>\u00a0has joined #xwiki  \n09:26\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:27\u00a0<abusenius>\u00a0has joined #xwiki  \n09:27\u00a0<amack2>\u00a0has joined #xwiki  \n09:27\u00a0<abusenius>\u00a0has quit  \n09:29\u00a0<amack2>\u00a0Hi, we want to customize the theme quite a bit, and we're doing this by changing the LESS and then clearing the cache. This works quite well. Debugging is a bit hard though, is there a way to change the LESS compiler to output sourcemaps for the CSS?  \n09:43\u00a0<Pbas>\u00a0Hi (happy new year first) and second FYI on myxwiki.org searching doesn't work anymore because \u00a0default lucene search engine still there in subwiki setting and plugin missing in xwiki.cfg now. Anyway I select solr engine now and searching working well :-)  \n09:46\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:49\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:51\u00a0<evalica>\u00a0has joined #xwiki  \n09:55\u00a0<Slashman>\u00a0has joined #xwiki  \n10:04\u00a0<amack2>\u00a0gdelhumeau: we want to customize the theme quite a bit, and we're doing this by changing the LESS and then clearing the cache. This works quite well. Debugging is a bit hard though, is there a way to change the LESS compiler to output sourcemaps for the CSS?  \n10:05\u00a0<gdelhumeau>\u00a0Hi amack2  \n10:06\u00a0<gdelhumeau>\u00a0Out of the box, no  \n10:06\u00a0<gdelhumeau>\u00a0If you are willing to change the inner code, maybe  \n10:06\u00a0<gdelhumeau>\u00a0since 7.0, we are using less4j  \n10:06\u00a0<gdelhumeau>\u00a0it handles source maps: https://github.com/SomMeri/less4j/wiki/Source-Maps  \n10:07\u00a0<gdelhumeau>\u00a0But I don't know how much work is needed to use it correctly in XWiki  \n10:08\u00a0<amack2>\u00a0gdelhumeau: thanks! How do the xwiki developers do the LESS debugging?  \n10:09\u00a0<gdelhumeau>\u00a0you may need to modify our LESS Source: https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-lesscss/xwiki-platform-lesscss-default/src/main/java/org/xwiki/lesscss/internal/compiler/less4j/AbstractLESSSource.java#L34-34  \n10:10\u00a0<lucaa>\u00a0has joined #xwiki  \n10:13\u00a0<amack2>\u00a0gdelhumeau: thanks for the pointer, I will look at it  \n10:19\u00a0<msmeria>\u00a0has joined #xwiki  \n11:52\u00a0<amack2>\u00a0gdelhumeau: I think it's easy, I will change org.xwiki.lesscss.internal.compiler.less4j.Less4jCompiler to generate inline sourcemaps. I will submit a pull request, ok?  \n11:52\u00a0<gdelhumeau>\u00a0Nice :)  \n11:52\u00a0<gdelhumeau>\u00a0But please add an option for this  \n11:52\u00a0<gdelhumeau>\u00a0so it could disabled on demand  \n11:56\u00a0<amack2>\u00a0gdelhumeau: yes, but I probably need some help with this, I don't know where to make it configurable, and how to get the variable down to that level  \n11:58\u00a0<gdelhumeau>\u00a0I would probably create a LESSConfiguration interface in xwiki-platform-lesscss-api  \n11:58\u00a0<amack2>\u00a0ok, I'll try  \n11:59\u00a0<gdelhumeau>\u00a0a bit like https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-wiki/xwiki-platform-wiki-api/src/main/java/org/xwiki/wiki/configuration/WikiConfiguration.java#L31-31  \n11:59\u00a0<gdelhumeau>\u00a0and https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-wiki/xwiki-platform-wiki-default/src/main/java/org/xwiki/wiki/internal/configuration/DefaultWikiConfiguration.java#L38-38 for the implementation  \n11:59\u00a0<amack2>\u00a0hmm. platform tests do not complete, GWT-DOM Unit Tests :\\_( Source level must be one of [auto, 1.6, 1.7]  \n11:59\u00a0<gdelhumeau>\u00a0then you add a property in xwiki.properties  \n11:59\u00a0<amack2>\u00a0ok, got it  \n12:02\u00a0<gdelhumeau>\u00a0maybe don't use @Named(\"xwikiproperties\")  \n12:02\u00a0<gdelhumeau>\u00a0but the default one, so we would be able to modify the option in XWikiPreferences  \n12:03\u00a0<gdelhumeau>\u00a0I'll look at your PR to help you :)  \n12:26\u00a0<KermitTheFragger>\u00a0has quit  \n12:28\u00a0<lucaa>\u00a0has quit  \n12:29\u00a0<lucaa>\u00a0has joined #xwiki  \n12:29\u00a0<tmortagne>\u00a0amack2: depends which test, for unit test I usually use -DskipTests  \n12:33\u00a0<amack2>\u00a0tmortagne: \u00a0WYSIWYG Editor - Client Side ...... FAILURE  \n12:33\u00a0<amack2>\u00a0despute \"-DskipTests\"  \n12:33\u00a0<tmortagne>\u00a0maybe there is something special about WYSIWYG editor tests, mflorea any idea ?  \n12:33\u00a0<amack2>\u00a0ERROR] Failed to execute goal org.codehaus.mojo:clirr-maven-plugin:2.7:check (clirr-check) on project xwiki-platform-wysiwyg-client: Execution clirr-check of goal org.codehaus.mojo:clirr-maven-plugin:2.7:check failed: Invalid byte tag in constant pool: 18 -> [Help 1]  \n12:34\u00a0<amack2>\u00a0building with openjdk 1.8.0\\_64 on linux  \n12:34\u00a0<tmortagne>\u00a0ha that has nothing to do with tests, that's clirr plugin  \n12:34\u00a0<tmortagne>\u00a0but not sure why it's failing  \n12:34\u00a0<amack2>\u00a0err ok, what can I do?  \n12:35\u00a0<tmortagne>\u00a0could you build with -e and paste the whole error somewhere like pastebin  \n12:35\u00a0<tmortagne>\u00a0does it build when you don't try to skin tests ?  \n12:35\u00a0<tmortagne>\u00a0\\*skip  \n12:37\u00a0<amack2>\u00a0tmortagne: If I don't skip the tests, GWT-DOM Unit Tests : fails  \n12:37\u00a0<tmortagne>\u00a0and what error do you get ? it builds well on ci.xwiki.org  \n12:39\u00a0<amack2>\u00a0tmortagne: let me re-run it  \n12:40\u00a0<tmortagne>\u00a0are you on Windows ?  \n12:40\u00a0<amack2>\u00a0no, linux  \n12:40\u00a0<tmortagne>\u00a0should work well then  \n12:40\u00a0<tmortagne>\u00a0what version of Maven ?  \n12:41\u00a0<tmortagne>\u00a0right now the reference version used by our jenkins jobs is Maven 3.0.5  \n12:43\u00a0<amack2>\u00a0gwt test: http://pastebin.com/7EmqFbey  \n12:43\u00a0<amack2>\u00a0Apache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06; 2015-04-22T13:57:37+02:00)  \n12:43\u00a0<amack2>\u00a0Maven home: /opt/maven  \n12:43\u00a0<amack2>\u00a0Java version: 1.8.0\\_65, vendor: Oracle Corporation  \n12:43\u00a0<amack2>\u00a0Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.65-3.b17.fc22.x86\\_64/jre  \n12:43\u00a0<amack2>\u00a0Default locale: en\\_US, platform encoding: UTF-8  \n12:43\u00a0<amack2>\u00a0OS name: \"linux\", version: \"4.2.8-200.fc22.x86\\_64\", arch: \"amd64\", family: \"unix\"  \n12:44\u00a0<tmortagne>\u00a0what version of XWiki are you building ?  \n12:44\u00a0<mflorea>\u00a0amack2: are you on master (8.0-SNAPSOT) or on a branch  \n12:44\u00a0<amack2>\u00a0master  \n12:44\u00a0<mflorea>\u00a0did you do any modifications to the wysiwyg/gwt modules?  \n12:45\u00a0<amack2>\u00a0no, none. forked today  \n12:47\u00a0<amack2>\u00a0if I skip tests: http://pastebin.com/JveuShhu  \n12:47\u00a0<amack2>\u00a0It looks like openjdk is a problem?  \n12:49\u00a0<tmortagne>\u00a0maybe, we indeed only build with Oracle jdk  \n12:50\u00a0<mflorea>\u00a0I use  \n12:50\u00a0<mflorea>\u00a0java version \"1.7.0\\_91\"  \n12:50\u00a0<mflorea>\u00a0OpenJDK Runtime Environment (IcedTea 2.6.3) (7u91-2.6.3-0ubuntu0.14.04.1)  \n12:50\u00a0<amack2>\u00a0building with oracle 1.7.0\\_75 now  \n12:50\u00a0<tmortagne>\u00a0mflorea: ok  \n12:50\u00a0<mflorea>\u00a0xwiki-platform-gwt build works  \n12:50\u00a0<tmortagne>\u00a0(was refering to ci jobs)  \n12:50\u00a0<mflorea>\u00a0checking wysiwyg  \n12:50\u00a0<mflorea>\u00a0ah, right  \n12:51\u00a0<tmortagne>\u00a0but good to know it's working on open jdk for you anyway :)  \n12:51\u00a0<tmortagne>\u00a0(I always use Oracle jdk on my side)  \n12:51\u00a0<mflorea>\u00a0I have maven 3.0.4  \n12:52\u00a0<tmortagne>\u00a0you should probably use 3.0.5 to be in sync with jenkins, just in case :)  \n12:52\u00a0<tmortagne>\u00a0(and we really need to validate some more recent Maven version...)  \n12:53\u00a0<mflorea>\u00a0I'll take 3.0.5  \n13:04\u00a0<mflorea>\u00a0xwiki-platform-wysiwyg build is fine for me  \n13:38\u00a0<amack2>\u00a0yeah build success with oracle 1.7  \n14:48\u00a0<amack2>\u00a0has quit  \n15:34\u00a0<OSIMasson>\u00a0has quit  \n15:53\u00a0<Enygma`>\u00a0has quit  \n16:37\u00a0<tmortagne>\u00a0vmassol: http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-vfs-test-tests/2361/testReport/junit/org.xwiki.vfs.test.ui/VfsTest/testVfsMacro/ is failing since a long time, maybe you have an idea of what could be the issue, looks like the macro does not display anything  \n16:38\u00a0<vmassol>\u00a0checking thanks, did not notice  \n16:40\u00a0<Enygma`>\u00a0has joined #xwiki  \n16:48\u00a0<vmassol>\u00a0tmortagne: I can reproduce locally, debugging  \n16:48\u00a0<tmortagne>\u00a0ok  \n17:01\u00a0<msmeria>\u00a0has quit  \n17:36\u00a0<vmassol>\u00a0ok I think I have found the problem, fixing  \n18:01\u00a0<vmassol>\u00a0tmortagne: fixed  \n18:01\u00a0<vmassol>\u00a0was a bug...  \n18:08\u00a0<cjd>\u00a0has quit  \n18:22\u00a0<lucaa>\u00a0has quit  \n18:22\u00a0<lucaa>\u00a0has joined #xwiki  \n18:28\u00a0<evalica>\u00a0has quit  \n18:28\u00a0<Enygma`>\u00a0has quit  \n18:46\u00a0<mflorea>\u00a0has quit  \n18:47\u00a0<lucaa>\u00a0has quit  \n18:54\u00a0<cjd>\u00a0has joined #xwiki  \n19:47\u00a0<woshilapin>\u00a0has quit  \n20:15\u00a0<abusenius>\u00a0has joined #xwiki  \n20:21\u00a0<Slashman>\u00a0has quit  \n20:34\u00a0<tmortagne>\u00a0has quit  \n20:59\u00a0<mflorea>\u00a0has joined #xwiki  \n21:05\u00a0<gdelhumeau>\u00a0has quit  \n22:32\u00a0<mflorea>\u00a0has quit\n"}