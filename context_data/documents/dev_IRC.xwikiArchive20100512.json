{"id": "dev:IRC.xwikiArchive20100512", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100512", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nabusenius left at 00:22 (Ping timeout: 246 seconds  \njvdrean left at 01:28 (Ping timeout: 246 seconds  \njvdrean joined #xwiki at 01:34  \nSorinello left at 02:18 (Quit: Peace and Protection 4.22  \nCalebJamesDeLisl - (02:54): Those who talk don't know.  \nCalebJamesDeLisl - (02:54): (away message containing a \\n)  \nsdumitriu - (02:54): ?  \nCalebJamesDeLisl - (02:55): can't put newlines in an away message.  \nmflorea joined #xwiki at 06:53  \nDenis left at 07:03 (Ping timeout: 276 seconds  \nDenis joined #xwiki at 07:08  \nmariusbutuc joined #xwiki at 08:35  \nEnygma` joined #xwiki at 08:38  \nvmassol joined #xwiki at 08:42  \nplunden joined #xwiki at 08:52  \nkibahop joined #xwiki at 09:10  \nkibahop left at 09:11 (Client Quit  \nevalica joined #xwiki at 09:30  \nSorinello joined #xwiki at 09:40  \nSvenDowideit left at 09:46 (Ping timeout: 240 seconds  \narkub joined #xwiki at 09:46  \nSvenDowideit joined #xwiki at 09:47  \nSvenDowideit\\_ joined #xwiki at 09:50  \nSvenDowideit left at 09:53 (Ping timeout: 252 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nsilviar joined #xwiki at 09:54  \ntmortagne joined #xwiki at 10:04  \nvmassol1 joined #xwiki at 10:05  \nvmassol left at 10:08 (Ping timeout: 245 seconds  \nlucaa joined #xwiki at 10:15  \nabusenius joined #xwiki at 10:16  \nSvenDowideit\\_ joined #xwiki at 10:19  \nSvenDowideit left at 10:20 (Ping timeout: 252 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nldubost joined #xwiki at 10:25  \nSvenDowideit left at 10:27 (Ping timeout: 252 seconds  \nSvenDowideit joined #xwiki at 10:28  \nSvenDowideit left at 10:33 (Ping timeout: 252 seconds  \nkibahop joined #xwiki at 10:33  \nSvenDowideit joined #xwiki at 10:35  \nSvenDowideit left at 10:45 (Ping timeout: 252 seconds  \nSvenDowideit joined #xwiki at 10:48  \nSvenDowideit\\_ joined #xwiki at 10:51  \nSvenDowideit left at 10:53 (Ping timeout: 248 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nSvenDowideit left at 10:58 (Ping timeout: 248 seconds  \nSvenDowideit\\_ joined #xwiki at 11:00  \nSvenDowideit joined #xwiki at 11:05  \nSvenDowideit\\_ left at 11:06 (Ping timeout: 248 seconds  \ntmortagne left at 11:23 (Ping timeout: 264 seconds  \ntmortagne joined #xwiki at 11:40  \nmflorea left at 11:57 (Quit: Leaving.  \nlucaa - (12:17): hi team  \nlucaa - (12:17): vmassol1:  \nlucaa - (12:18): I have a generic q about testing strategy  \nvmassol1 is now known as vmassol ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nldubost left at 12:18 (Quit: ldubost  \nlucaa - (12:19): are there any situations when it makes sense to mock the class under test?  \nlucaa - (12:19): more like anonymous extend, provide a fake implementation for the function you want to mock  \nlucaa - (12:19): and then test an instance of this anonymous extension  \nlucaa - (12:19): \u00a0in my view that means the class is doing too much  \nvmassol - (12:20): when you're testing something you want to well verify it works\u2026 so if you mock you won't do that. Now you could \"mock\" some parts of the class but not the part you want to test obviously  \nvmassol - (12:20): you usually do this when the class is badly designed  \nvmassol - (12:20): usually I prefix them with \"Testable\"  \nlucaa - (12:20): ok  \nvmassol - (12:21): Ex: BadlyDesignedClass \u2014> TestableBadlyDesignedClass  \nvmassol - (12:21): and I override some methods  \nlucaa - (12:21): yes  \nvmassol - (12:21): to return what I need for testing other parts of the class  \nlucaa - (12:21): yep  \nvmassol - (12:21): normally the class should be designed with IOC in lind  \nvmassol - (12:21): mind  \nlucaa - (12:21): IOC?  \nvmassol - (12:21): and you should be able to pass to it a mock rather than extend it  \nvmassol - (12:22): inversion of control  \nlucaa - (12:22): yes  \nvmassol - (12:22): it's in my book btw ;)  \nvmassol - (12:22): (junit in action)  \nvmassol - (12:22): you should have a copy at the office :)  \nlucaa - (12:22): so, this would be a standard RTFM?  \nlucaa - (12:22): we do  \nlucaa - (12:23): ok, I will take the book and read it  \nvmassol - (12:24): p249 I see a usage of this  \nvmassol - (12:25): but there isn't more to what I mentioned above  \nvmassol - (12:25): actually it's probably better described in JUnit Recipes from JB Rainsberger  \nvmassol - (12:25): anyway  \nvmassol - (12:25): :)  \nvmassol - (12:26): (fwiw junit in action, second edition will be out in a few weeks - not updated by me)  \nvmassol - (12:26): (the first version is quite old now, written in 2002-2003)  \nmariusbutuc left at 12:48 (Quit: Leaving.  \njvelociter joined #xwiki at 12:57  \narkub left at 13:02 (Read error: Operation timed out  \nlucaa left at 13:24 (Ping timeout: 276 seconds  \nmflorea joined #xwiki at 13:51  \nxwikibot joined #xwiki at 13:55  \nldubost joined #xwiki at 14:09  \nldubost2 joined #xwiki at 14:10  \nldubost left at 14:10 (Read error: Connection reset by peer  \nmflorea - (14:23): vmassol, tmortagne: I have two problem regarding escaping special characters in page name. (1) entity reference serializer doesn't escape properly relative references. For instance, I have this document reference [xwiki, Main, one:two.three] and I serialize it relative to [xwiki, Main, WebHome]. The result I get is one:two\\.three so only the dot is escaped, which is good for absolute string references. For relative references the : should be   \nmflorea - (14:23): (2) My second problem is that, even if both . and : are escaped, <!--startwikilink:one\\:two\\.three-->, the result of converting this to wiki syntax is one:two.three so the \\ is ignored..  \nsdumitriu - (14:40): Hi team, I made some changes to the way virtual wikis work, could you guys test if it still works well?  \nsdumitriu - (14:44): tmortagne: I get tika exceptions in the logs now  \nsdumitriu - (14:44): org.apache.tika.sax.WriteOutContentHandler$WriteLimitReachedException  \ntmortagne - (14:45): sdumitriu: with what content ? it's working well with content i have in unit tests  \nsdumitriu - (14:46): For example I noticed it when uploading the XE xar  \ntmortagne - (14:46): sdumitriu: hmm indeed i did not tested what it does with content it doe snot support  \ntmortagne - (14:46): i will look at that  \nsdumitriu - (14:47): error getting content of attachment [xwiki-enterprise-wiki.xar] for document [xwiki:XWiki.Import]  \ntmortagne - (14:47): is it a warning or an error at log4j level ?  \nvmassol - (14:48): btw might be good to have a functional tests of importing a XE XAR into an empty (or not) wiki and verify no error happen in the console + verify pages have been imported fine  \nvmassol - (14:48): the new import tests could be modified to do this  \nsdumitriu - (14:49): WARN  \ntmortagne - (14:52): sdumitriu: i need to do something nicer that just puting in a warning whatever wrong happen in tika and separate unsupported format and invalid format if possible  \nsdumitriu - (14:52): I don't think it's not supported  \nsdumitriu - (14:52): I think there's something else wrong  \nsdumitriu - (14:53): WriteLimitReachedException  \ntmortagne - (14:53): hmm i will try that  \ntmortagne - (14:53): you reproduced with fresh XE ?  \nsdumitriu - (14:54): WDYM fresh?  \ntmortagne - (14:54): standard XE with no modifications  \nsdumitriu - (14:55): Yes  \ntmortagne - (14:55): ok  \nsdumitriu - (14:56): Fresh download, just changed it to use mysql  \nsdumitriu - (14:56): and virtual wiki  \ntmortagne - (15:00): ok found it, by default tika has a limit for the extracted content and default XE contains too much for the default limit, it can be put infinite but i doubt we want that  \ntmortagne - (15:00): not sure what is the best  \ntmortagne - (15:00): sdumitriu: WDYT ?  \nsdumitriu - (15:03): What happens after the limit is reached?  \ntmortagne - (15:03): it prodiuce the exception you got  \nsdumitriu - (15:03): Is everything dropped, or just what was read so far is indexed and the rest discarded?  \ntmortagne - (15:04): currently everything is dropped  \nsdumitriu - (15:04): If it's the former, we can just increase the limit a bit more and swallow the exception  \ntmortagne - (15:05): we need to take what has been writtebn already before the exception for sure but what i'm not sure is for the size of the limit  \ntmortagne - (15:05): we can use the tika default and make it configurable mabe  \ntmortagne - (15:21): actually i found a higher level Tika api which handle that itself, just need to decide if we want to make limit configurable  \ntmortagne - (15:30): sdumitriu: fixed issue with too big attachments, thanks for the catch. We'll see later if we want to make limit configurable (the tika default is 100K which is pretty big already for pure plain text content i think)  \ntmortagne - (15:37): mflorea: (1) looks wrong indeed  \ntmortagne - (15:37): need vmassol POV too but i think you should create a jira issue for it  \nvmassol - (15:39): tmortagne, mflorea: I don't understand why \":\" should be escaped in a page name  \ntmortagne - (15:40): hmm wait actually you are right, the resolver will take all that as the document name  \nmflorea - (15:40): vmassol: because if the reference is relative, you have [[label>>This:isAPage]]  \ntmortagne - (15:40): teh important thing is the dot  \ntmortagne - (15:40): since there is no dot then all that is a document name  \ntmortagne - (15:40): mflorea: This:isAPage is onlt a page name because there is not .  \ntmortagne - (15:40): the resolver is parsing from the end  \nmflorea - (15:41): ok, then this leaves me with the second problem  \nmflorea - (15:41): <!--startwikilink:one:two\\.three--> is converted in one:two.three  \ntmortagne - (15:42): for (2) i think you forget the escaping syntax we written together to be able to put anything in markers which is based on \\  \ntmortagne - (15:42): so you would have to double the \\  \nmflorea - (15:42): that was for macro  \nmflorea - (15:42): is it the same for link?  \ntmortagne - (15:42): it's tha exact same thing for any marker  \nvmassol - (15:42): mflorea: check links25.test  \ntmortagne - (15:42): other wise you can't have -- in a document name  \nmflorea - (15:44): ok, it's clear now, thanks tmortagne and vmassol  \ntmortagne - (15:44): mflorea: np  \nkibahop left #xwiki at 15:51  \nplunden left #xwiki at 15:54  \nsdumitriu - (16:01): Q: Anybody against \"save&continue\" saves as minor version?  \nvmassol - (16:02): I don't really see the relationship  \nvmassol - (16:03): for me save&continue shouldn't even exist. IMO it's there because changing editor looses your changes  \nvmassol - (16:03): and if you have draft support you don't need save&continue  \nvmassol - (16:03): s/draft/autosave/  \nsdumitriu - (16:04): Yes I do  \nsdumitriu - (16:04): When working on an application, I save often and look at the result  \nvmassol - (16:04): that's save&view if you want to look...  \nsdumitriu - (16:05): But then I'll have to search again for the place where I was editing  \nsdumitriu - (16:05): If it's a long document, I don't want to have to scroll each time I go back to the coe  \nsdumitriu - (16:05): code  \nsdumitriu - (16:05): And if it's a Macros document, which is included, I don't have any use for viewing that document  \nsdumitriu - (16:05): It's another one that I want to see  \nevalica - (16:05): maybe it should be just \"Save\" (without closing action) and \"Close&View\"  \nsdumitriu - (16:06): And I have the code edit in one tab, and the document view in another  \nvmassol - (16:06): sdumitriu: seems like this use case would need some special treatment  \nsdumitriu - (16:06): What special treatment?  \nevalica - (16:06): in gdoc :) you have \"Save\" and \"Save and Close\"  \nsdumitriu - (16:06): I'm happy with the way it works now  \nvmassol - (16:06): I mean consider this a real use case  \nvmassol - (16:06): and see how best to implement it  \nsdumitriu - (16:06): It's implemented  \nsdumitriu - (16:07): I'm happy  \nvmassol - (16:07): having to open 2 tabs is defienitely not convenient  \nsdumitriu - (16:07): I don't want to remove s&c  \nsdumitriu - (16:07): I have 200 tabs open, that's good  \nvmassol - (16:07): sure I'm talking about xwiki only  \nsdumitriu - (16:07): That's what tab browsing is a loved feature  \nsdumitriu - (16:08): We're not in IE6 anymore, having to work with as little windows as possible  \nvmassol - (16:08): are you kidding?  \nvmassol - (16:08): so why don't you have one tab for left panels  \nevalica - (16:08): vmassol: about search UI - so your sure that we want the rights to be extensible, k? cause this means I need to rethink all the UI  \nvmassol - (16:08): one tab for main content  \nvmassol - (16:08): and one tab for right panels  \nvmassol - (16:08): ?  \nvmassol - (16:08): I can answer that question  \nvmassol - (16:08): because you want \"context\"  \nvmassol - (16:08): you want to see stuff in context  \nvmassol - (16:09): same for your IDE which has several panes  \nsdumitriu - (16:09): So you want in-place editing?  \nvmassol - (16:09): I like in place editing  \nsdumitriu - (16:09): Really?  \nvmassol - (16:09): sure I've always liked it  \nvmassol - (16:09): what I don't like is cluttered interfaces  \nsdumitriu - (16:09): Then what about all the clutter that's going to be around the editor?  \nsdumitriu - (16:10): In place editing means a lot of stuff  \nvmassol - (16:10): in place editing with a right panel was my preferred choice  \nsdumitriu - (16:10): That's not in place editing  \nsdumitriu - (16:10): That's editing in another UI  \nvmassol - (16:10): for me in place means not reloading  \nvmassol - (16:10): and not changing the main view  \nsdumitriu - (16:10): Save&Continue is not reloading  \nvmassol - (16:11): yes but you don't see the result  \nvmassol - (16:11): which is what you want with your use case  \nvmassol - (16:11): you want to have both  \nvmassol - (16:11): keep the edit + see what it'll look like  \nsdumitriu - (16:11): No, that's totally different  \nsdumitriu - (16:11): I'm a developer, I write code someplace and look at the results applied someplace else  \nvmassol - (16:11): in some wiki I've seen this beeing done with the rendering happening below the editor  \nvmassol - (16:12): ok  \nsdumitriu - (16:12): When you write Java, you don't have WYSIWYG results  \nvmassol - (16:12): well that would be great to have  \nvmassol - (16:12): :)  \nsdumitriu - (16:12): I'f I'd write content, as most users do, I'd either use Preview, or I'd just keep typing in the WYSIWYG  \nsdumitriu - (16:13): But you must know that there are lots of saveaholics  \nvmassol - (16:13): I agree with you for stuff that modify other pages  \nvmassol - (16:13): but I still don't see the relationship between s&c and minor edits  \nvmassol - (16:13): why would something that affetc another page be a minor edit?  \nvmassol - (16:13): (for ex)  \nvmassol - (16:14): I agree that it could be a minor edit  \nvmassol - (16:14): but I'm not sure it's always a minor edit  \nvmassol - (16:14): (well I'm sure it's not)  \nvmassol - (16:15): (not always that is)  \nvmassol - (16:15): I guess the reason is that you find that in most cases they are minor edits because you're doing dev  \nvmassol - (16:15): (which is a special use case btw)  \nvmassol - (16:16): the pb for me is that having a different behavior for s&c and s&v might be confusing  \nvmassol - (16:16): since the user need to know this behavior and remember to tick or untick the minor edit field accordingly  \nvmassol - (16:16): depending on whether he's going to click s&c or s&v  \nsdumitriu - (16:16): I'm asking because a client requested it  \nvmassol - (16:16): I know and I replied with another idea  \nSorinello left at 16:17 (Ping timeout: 240 seconds  \nvmassol - (16:17): (in the jira)  \nsdumitriu - (16:17): And if I make this configurable, then I'll either have to add another method to $xwiki, or write a configuration component  \nvmassol - (16:18): to summarize: I'm not against at all  \nsdumitriu - (16:18): Save&Continue = Work in progress  \nvmassol - (16:19): hmmm maybe s&c could be renamed to something more explicit  \nsdumitriu - (16:20): I think we had the naming debate already  \nsdumitriu - (16:20): evalica: Yes, rights will be extensible  \nsdumitriu - (16:20): And inheritable  \nvmassol - (16:20): I can't find anything better than s&c right now  \nsdumitriu - (16:20): (among themselves)  \nsdumitriu - (16:21): evalica: Like edit granted -> view also granted unless explicitly forbidden  \nvmassol - (16:21): sdumitriu: maybe it's a ui thing then \u2026 where the ui would group the save&view with the minor edit checkbox to show it doesn't apply to s&c ?  \nvmassol - (16:22): or 2 check boxes, one for s&c and one for s&v with a different default for each (might be a bit heavy ;))  \nvmassol - (16:22): anyway I'm +0  \ntmortagne - (16:31): does someone knows a way to force mysql to respect case when comparing values in a request when the db is configured (by default) to not respect the case ?  \nglerouge joined #xwiki at 16:34  \nglerouge - (16:35): Hi sdumitriu  \nglerouge - (16:35): made it here at last  \nglerouge - (16:35): with a weird icon it seems  \ntapaya joined #xwiki at 16:44  \nglerouge - (16:54): for the record, I'm also +1 to make save & continue use minor edits  \nvmassol - (16:55): glerouge: come on you're partial ! :)  \nvmassol - (16:55): and you even committed to it before we agree here, that's bad ;)  \nglerouge - (16:56): nope  \nglerouge - (16:56): I actually thought it was a nice idea before being asked about it  \narkub joined #xwiki at 16:57  \nevalica left at 16:57 (Quit: Leaving.  \nEnygma` left at 16:58 (Quit: Leaving.  \nsdumitriu - (16:59): vmassol: http://www.phdcomics.com/comics/archive.php?comicid=638  \nvmassol - (17:00): sdumitriu: yep I knew this one\u2026. but the OS is windows so no wonder\u2026 :)  \nsdumitriu - (17:00): Probably Linux, since they're PhD students  \ndegro joined #xwiki at 17:01  \nCiprian joined #xwiki at 17:01  \nsilviar left at 17:13 (Quit: Leaving.  \nCiprian left #xwiki at 17:23  \nvmassol left at 17:39 (Read error: No route to host  \nvmassol joined #xwiki at 17:39  \ntapaya left at 17:41 (Quit: Page closed  \njvdrean left #xwiki at 17:49  \nvmassol1 joined #xwiki at 17:54  \nvmassol left at 17:55 (Ping timeout: 268 seconds  \nSorinello joined #xwiki at 18:13  \ndegro left at 18:29 (Quit: Leaving  \nmflorea left at 18:53 (Quit: Leaving.  \narkub left at 19:06 (Ping timeout: 258 seconds  \nabusenius left at 19:25 (Ping timeout: 245 seconds  \ntmortagne left at 20:12 (Quit: Leaving.  \nglerouge left at 20:48 (Quit: Leaving.  \nabusenius joined #xwiki at 20:50  \nldubost2 left at 20:56 (Quit: ldubost2  \nldubost joined #xwiki at 21:36  \nldubost2 joined #xwiki at 21:37  \nldubost left at 21:37 (Read error: Connection reset by peer  \nabusenius - (21:56): sdumitriu, (since nobody else seems to care about applying my patches :) )  \nabusenius - (21:56): I'm gonna fix several similar escaping issues, do you prefer one big patch or many smaller ones?  \nabusenius - (21:56): :)  \nnpm left at 21:56 (Quit: Leaving.  \nvmassol1 - (21:57): many small ones  \nabusenius - (21:57): with a bug for each one?  \nvmassol1 - (21:57): yes  \nvmassol1 - (21:57): they don't have to be one-liner each though ;)  \nabusenius - (21:57): ok  \nvmassol1 - (21:58): smaller are easier to apply + easier to review  \nnpm joined #xwiki at 22:03  \nsdumitriu - (22:05): abusenius: +1, smaller  \nmflorea joined #xwiki at 22:17  \nSorinello - (22:57): hello  \nsdumitriu - (23:00): Hi  \nmflorea - (23:55): sdumitriu: how come XWiki.XWikiAllGroup was modified by XWiki.mflorea on xwiki.org and I'm not event logged in?..  \nsdumitriu - (23:56): Ah, I did this change  \nsdumitriu - (23:56): It's a bug  \nmflorea - (23:56): ok :)  \nsdumitriu - (23:57): When deleting users from groups, it keeps the last author  \n\n"}