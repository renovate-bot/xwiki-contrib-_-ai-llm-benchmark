{"id": "dev:IRC.xwikiArchive20160912", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160912", "title": "IRC Archive for channel #xwiki on 12 September 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<woshilapin>\u00a0has joined #xwiki  \n05:55\u00a0<mflorea>\u00a0has joined #xwiki  \n06:46\u00a0<mflorea>\u00a0has quit  \n07:06\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n07:21\u00a0<msmeria>\u00a0has joined #xwiki  \n07:36\u00a0<mflorea>\u00a0has joined #xwiki  \n08:07\u00a0<vmassol>\u00a0has joined #xwiki  \n08:54\u00a0<acotiuga>\u00a0has joined #xwiki  \n09:15\u00a0<Pbas>\u00a0has joined #xwiki  \n09:18\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:04\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:08\u00a0<DarkKnightCZ>\u00a0has quit  \n10:13\u00a0<Denis>\u00a0has joined #xwiki  \n10:16\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:20\u00a0<evalica>\u00a0has joined #xwiki  \n10:32\u00a0<Slashman>\u00a0has joined #xwiki  \n10:48\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n12:02\u00a0<DarkKnightCZ>\u00a0has quit  \n12:20\u00a0<iskorptix>\u00a0has joined #xwiki  \n12:20\u00a0<iskorptix>\u00a0hello  \n12:24\u00a0<iskorptix>\u00a0is there a way to make iframe work with html macro extension ?  \n12:29\u00a0<vmassol>\u00a0clean=false?  \n12:29\u00a0<vmassol>\u00a0(iskorptix)  \n12:29\u00a0<iskorptix>\u00a0nevermind , I used iframe extension :D  \n12:30\u00a0<vmassol>\u00a0(maybe iframe is stripped when cleaning, I don't know)  \n12:30\u00a0<vmassol>\u00a0k  \n12:30\u00a0<iskorptix>\u00a0all ok, thanks vmassol  \n12:34\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n14:05\u00a0<vmassol1>\u00a0has joined #xwiki  \n14:05\u00a0<vmassol>\u00a0has quit  \n14:05\u00a0<DarkKnightCZ>\u00a0has quit  \n14:59\u00a0<msmeria>\u00a0has quit  \n15:14\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n15:50\u00a0<Slashman>\u00a0has quit  \n15:50\u00a0<Slashman>\u00a0has joined #xwiki  \n16:18\u00a0<Chris[m]>\u00a0has quit  \n16:18\u00a0<M-yflory>\u00a0has quit  \n16:18\u00a0<M-vmassol>\u00a0has quit  \n16:18\u00a0<M-jsimard>\u00a0has quit  \n16:18\u00a0<jihad[m]>\u00a0has quit  \n16:18\u00a0<Craeckie[m]>\u00a0has quit  \n16:18\u00a0<M-mouhb>\u00a0has quit  \n16:18\u00a0<blabla2[m]>\u00a0has quit  \n16:55\u00a0<iskorptix>\u00a0is there a way to rename a group ?  \n16:58\u00a0<acotiuga>\u00a0has quit  \n17:06\u00a0<vmassol1>\u00a0@Enygma` I've put the template improvement in its own section since we don't have much to show in the RN for 8.3M2, looks nicer this way :)  \n17:06\u00a0<vmassol1>\u00a0is now known as <vmassol>  \n17:07\u00a0<iskorptix>\u00a0vmassol: is there a way to rename a group through admin panel somehow ? Don't want to do sql queries to db  \n17:08\u00a0<vmassol>\u00a0don't know  \n17:08\u00a0<vmassol>\u00a0I would have tried to rename the page but not sure it works  \n17:08\u00a0<vmassol>\u00a0(group page that is)  \n17:11\u00a0<iskorptix>\u00a0yes, that worked  \n17:11\u00a0<iskorptix>\u00a0thanks vmassol  \n17:14\u00a0<Enygma`>\u00a0vmassol: :)  \n17:16\u00a0<mflorea>\u00a0has quit  \n17:21\u00a0<Craeckie[m]>\u00a0has joined #xwiki  \n17:34\u00a0<Slashman>\u00a0has quit  \n17:35\u00a0<Slashman>\u00a0has joined #xwiki  \n17:46\u00a0<DarkKnightCZ>\u00a0has quit  \n17:59\u00a0<vmassol>\u00a0hmm I don't XAR export anymore in xwiki instance build by the func test fwk  \n17:59\u00a0<vmassol>\u00a0cehcking why...  \n17:59\u00a0<vmassol>\u00a0(if someone knows\u2026.)  \n18:01\u00a0<vmassol>\u00a0gdelhumeau: any idea ? asking you since you modified the export dialog not long ago  \n18:03\u00a0<vmassol>\u00a0found it  \n18:03\u00a0<vmassol>\u00a0this is a regression  \n18:05\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n18:12\u00a0<Pbas>\u00a0has quit  \n18:19\u00a0<jihad[m]>\u00a0has joined #xwiki  \n18:20\u00a0<M-cjd>\u00a0has joined #xwiki  \n18:20\u00a0<M-jsimard>\u00a0has joined #xwiki  \n18:20\u00a0<Pbas>\u00a0has joined #xwiki  \n18:20\u00a0<M-yflory>\u00a0has joined #xwiki  \n18:20\u00a0<M-mouhb>\u00a0has joined #xwiki  \n18:20\u00a0<Chris[m]>\u00a0has joined #xwiki  \n18:20\u00a0<blabla2[m]>\u00a0has joined #xwiki  \n18:20\u00a0<M-vmassol>\u00a0has joined #xwiki  \n18:26\u00a0<vmassol>\u00a0it's not a regression  \n18:26\u00a0<vmassol>\u00a0apparently a lot of func tests bring the packager plugin in their confg in pom.xml (but not all)  \n18:26\u00a0<vmassol>\u00a0checking if I can improve this  \n18:31\u00a0<vmassol>\u00a0tmortagne:  \n18:31\u00a0<vmassol>\u00a0#-# Indicate if WikiStream should be used when exporting a XAR in the export action.  \n18:31\u00a0<vmassol>\u00a0#-# This property will be removed as soon as WikiStream is old/stable enough.  \n18:31\u00a0<vmassol>\u00a0:)  \n18:32\u00a0<vmassol>\u00a0I loling the \"as soon as\" ;)  \n18:32\u00a0<vmassol>\u00a03 years old now  \n18:33\u00a0<vmassol>\u00a0hmm I don't this property used in the code (I searched for \"usewikistream\" in platform). Any idea?  \n18:34\u00a0<tmortagne>\u00a0should change this with \"when the import UI is rewritten to directly use Filter API\" instead  \n18:34\u00a0<tmortagne>\u00a0which one are you talking about ? there is two of those  \n18:35\u00a0<vmassol>\u00a0the export one  \n18:35\u00a0<vmassol>\u00a0but I can't find any usage of any of the 2 properties  \n18:36\u00a0<tmortagne>\u00a0also you don't find it because xwiki.cfg is actually wrong, wasn't updated when WikiStream became Filter  \n18:36\u00a0<tmortagne>\u00a0updating it  \n18:40\u00a0<vmassol>\u00a0k thanks  \n18:41\u00a0<tmortagne>\u00a0I'm starting to have a lot of commits to push :)  \n18:41\u00a0<vmassol>\u00a0tmortagne: is there an API to know if an extension is installed in XWiki (without knowing if it's a core one or an installed one)  \n18:41\u00a0<vmassol>\u00a0?  \n18:41\u00a0<vmassol>\u00a0:)  \n18:41\u00a0<tmortagne>\u00a0no you have to check for installed and for core  \n18:42\u00a0<vmassol>\u00a0ok would be nice to have one  \n18:43\u00a0<tmortagne>\u00a0XE itself did not had the need so I did not added but sure  \n18:43\u00a0<vmassol>\u00a0the following is a bit longish to know if XAR export can be done:  \n18:43\u00a0<vmassol>\u00a0#if ($!services.extension.core.getCoreExtension('org.xwiki.platform:xwiki-platform-filter-instance-oldcore') != '' || $!services.extension.core.getCoreExtension('org.xwiki.platform:xwiki-platform-filter-instance-oldcore' != '')  \n18:43\u00a0<vmassol>\u00a0\u00a0\u00a0## The XAR Export feature is there!  \n18:43\u00a0<vmassol>\u00a0#end  \n18:44\u00a0<vmassol>\u00a0I could test only core for now but the day we move export out of the core it won't work anymore  \n18:44\u00a0<tmortagne>\u00a0you are only checking for core extensions here  \n18:44\u00a0<vmassol>\u00a0ah sorry  \n18:44\u00a0<vmassol>\u00a0I copy pasted  \n18:44\u00a0<vmassol>\u00a0but forgot to change ;)  \n18:44\u00a0<vmassol>\u00a0hmm it's even more complex  \n18:44\u00a0<tmortagne>\u00a0having org.xwiki.platform:xwiki-platform-filter-instance-oldcore as installed extension sounds like a very weird use case  \n18:45\u00a0<vmassol>\u00a0since I need to specify the namespaces  \n18:45\u00a0<tmortagne>\u00a0it's usually a core extension  \n18:45\u00a0<vmassol>\u00a0so I guess ideally that's main wiki + current wiki  \n18:46\u00a0<tmortagne>\u00a0main wiki is main wiki, current wiki does not inherit form it but from root namespace and testing for current wiki includes root namespace  \n18:46\u00a0<tmortagne>\u00a0but again I you really sure this is an installed extension ?  \n18:46\u00a0<tmortagne>\u00a0s/I/are/  \n18:47\u00a0<vmassol>\u00a0it's not right now  \n18:47\u00a0<vmassol>\u00a0but could become one in the future  \n18:47\u00a0<vmassol>\u00a0whoi knows  \n18:47\u00a0<tmortagne>\u00a0I doubt we will ever publish a WAR without this extension in it  \n18:47\u00a0<vmassol>\u00a0\\*who  \n18:47\u00a0<vmassol>\u00a0someone can create his own WAR  \n18:48\u00a0<tmortagne>\u00a0vmassol: you could say the same of everything, in this case we should have this kind of if in pretty much everywhere in our vm files  \n18:48\u00a0<vmassol>\u00a0we do  \n18:48\u00a0<vmassol>\u00a0we have #if everywhere in our vms  \n18:48\u00a0<vmassol>\u00a0to not display entries when the feature is not there  \n18:49\u00a0<vmassol>\u00a0except we don't do it based on extensions present or not present  \n18:49\u00a0<vmassol>\u00a0we usually test existence of a wiki page  \n18:49\u00a0<tmortagne>\u00a0no we have a few test that look for wiki pages  \n18:49\u00a0<tmortagne>\u00a0if we apply what your logic about org.xwiki.platform:xwiki-platform-filter-instance-oldcore we will have tons of them everywhere  \n18:49\u00a0<vmassol>\u00a0but extension id seems better than check for names of wiki pages  \n18:50\u00a0<vmassol>\u00a0export is not used eveyrywhere thomas  \n18:50\u00a0<vmassol>\u00a0just in a few places  \n18:50\u00a0<tmortagne>\u00a0you don't understand what I mean  \n18:50\u00a0<tmortagne>\u00a0I'm not talking about export  \n18:50\u00a0<tmortagne>\u00a0I'm talking about any extension used in vm files  \n18:51\u00a0<vmassol>\u00a0right now I just want to test if XAR export feature is there  \n18:51\u00a0<vmassol>\u00a0and I find that having to know that it's a core extension is not something I should need to know  \n18:51\u00a0<vmassol>\u00a0(in the vm file where I'm going to do the check)  \n18:51\u00a0<tmortagne>\u00a0then check only for core extension because installed one is really not a use case  \n18:51\u00a0<vmassol>\u00a0to give you context, I'm replacing the following:  \n18:51\u00a0<vmassol>\u00a0#if($hasAdmin && \"$!xwiki.getPlugin('package')\" != '')  \n18:52\u00a0<vmassol>\u00a0since it's wrong  \n18:52\u00a0<vmassol>\u00a0you don't need the package \u00a0plugin to perform a page export (if xwiki.action.export.xar.usewikistream is true or whatever the new name)  \n18:53\u00a0<vmassol>\u00a0yes I'll check only for core but I was rasiing it as something that we could improve  \n18:53\u00a0<vmassol>\u00a0could you give me the new property name so that I can check it?  \n18:56\u00a0<tmortagne>\u00a0you can't check read xwiki.cfg properties without PR, you need an API to access it as for the name \"usewikistream\" became \"usefilter\"  \n18:57\u00a0<vmassol>\u00a0:(  \n18:59\u00a0<vmassol>\u00a0I could add a new default method API in CoreConfiguration since Export code is in core ATM\u2026 Ideally export code would need its own module....  \n18:59\u00a0<vmassol>\u00a0starting to be complex....  \n18:59\u00a0<tmortagne>\u00a0now the current test on the plugin is not fully wrong, the issue is that the UI is always using the plugin API, just not doing the actual import with it  \n19:00\u00a0<gdelhumeau>\u00a0has quit  \n19:00\u00a0<vmassol>\u00a0the page export doesn't seem to use the packager plugin  \n19:00\u00a0<vmassol>\u00a0I tested that  \n19:00\u00a0<tmortagne>\u00a0it's using the API for example to get a report about the import  \n19:00\u00a0<tmortagne>\u00a0export no  \n19:00\u00a0<vmassol>\u00a0tlaking about export here  \n19:00\u00a0<vmassol>\u00a0\\*talking  \n19:00\u00a0<tmortagne>\u00a0I was talking about import, forgot you it was aout export  \n19:01\u00a0<tmortagne>\u00a0since there is no export UI it should be ok for export indeed, it's only calling the action  \n19:01\u00a0<tmortagne>\u00a0anyway impossible to check read xwiki.cfg with PR  \n19:02\u00a0<vmassol>\u00a0ok I think I'll put a comment and check only for the org.xwiki.platform:xwiki-platform-filter-instance-oldcore extension  \n19:02\u00a0<vmassol>\u00a0ok?  \n19:02\u00a0<tmortagne>\u00a0so if you introduce an API about this you could put everything in this API including checking if the filter component with the component manager which is probably more accurate  \n19:02\u00a0<evalica>\u00a0has quit  \n19:03\u00a0<tmortagne>\u00a0anyway I doubt anyone ever come back to old export implementation theses days so you should be safe testing only filter extension  \n19:04\u00a0<vmassol>\u00a0designing such an api seems a bit too much for me now and adding a isExportAvailable() in CoreConfiguration seems a hack and would need a lot more thinking since we could generalize this for other things  \n19:04\u00a0<tmortagne>\u00a0but if you go this road you also need to check for XAR filter extension to be complete  \n19:04\u00a0<vmassol>\u00a0it would be too much a hurry and I'l make some design mostake  \n19:04\u00a0<tmortagne>\u00a0xwiki-platform-filter-instance-oldcore is not enough to export a XAR  \n19:04\u00a0<vmassol>\u00a0it's not drawing the XAR one?  \n19:04\u00a0<vmassol>\u00a0it used to  \n19:04\u00a0<tmortagne>\u00a0there is no reason it does  \n19:05\u00a0<tmortagne>\u00a0it never did  \n19:05\u00a0<vmassol>\u00a0since this is what I had to add in PackageMojo to get the export working  \n19:05\u00a0<mflorea>\u00a0has joined #xwiki  \n19:05\u00a0<tmortagne>\u00a0xwiki-platform-filter-instance-oldcore is related to the DB  \n19:05\u00a0<vmassol>\u00a0see https://github.com/xwiki/xwiki-platform/blob/f70c18544967eb7c92759965d694ff12701c5938/xwiki-platform-tools/xwiki-platform-tool-packager-plugin/src/main/java/org/xwiki/tool/packager/PackageMojo.java#L716-L716  \n19:05\u00a0<vmassol>\u00a0without htis line it wasn't working  \n19:05\u00a0<vmassol>\u00a0and with this line it was working  \n19:05\u00a0<tmortagne>\u00a0maybe you have something else that get the XAR module  \n19:05\u00a0<vmassol>\u00a0maybe  \n19:06\u00a0<tmortagne>\u00a0but I can assure you xwiki-platform-filter-instance-oldcore has nothing to do with XAR  \n19:06\u00a0<vmassol>\u00a0k  \n19:06\u00a0<tmortagne>\u00a0it's the DB \"parser\"  \n19:06\u00a0<tmortagne>\u00a0then you need to indicate an output, in your case it's XAR but could be anything  \n19:06\u00a0<vmassol>\u00a0right now all I want is to be able to export from fucntional tests without having to include the package plugin in the build  \n19:06\u00a0<vmassol>\u00a0by \"from functional test\"I mean the following:  \n19:07\u00a0<vmassol>\u00a0- create some empty func test skeleton  \n19:07\u00a0<vmassol>\u00a0- build it to generate a minimal distribution  \n19:07\u00a0<vmassol>\u00a0- start target/xwiki and work on wiki pages  \n19:07\u00a0<vmassol>\u00a0- export them to commit them  \n19:07\u00a0<Enygma`>\u00a0has quit  \n19:08\u00a0<vmassol>\u00a0I don't know about others but this is how I'm always doing it  \n19:09\u00a0<tmortagne>\u00a0I'm working on a special XE embedded in Eclipse on my side, I think most of the other use or build a jetty/hsqldb distribution  \n19:11\u00a0<vmassol>\u00a0ok I'm dropping this, taking too long  \n19:11\u00a0<vmassol>\u00a0I've created a jira issue: http://jira.xwiki.org/browse/XWIKI-13695  \n19:26\u00a0<tmortagne>\u00a0has quit  \n20:38\u00a0<Slashman>\u00a0has quit  \n20:58\u00a0<vmassol>\u00a0has quit  \n21:08\u00a0<mflorea>\u00a0has quit  \n21:49\u00a0<iskorptix>\u00a0how I could restrict users cr  \n21:49\u00a0<iskorptix>\u00a0how I could restrict users creating pages under Main page ?  \n23:38\u00a0<iskorptix>\u00a0has quit\n"}