{"id": "dev:IRC.xwikiArchive20111116", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20111116", "title": "IRC Archive for channel #xwiki on 16 November 2011 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n01:02\u00a0<CIA-102>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r2a7601f\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-api/src/main/java/org/xwiki/extension/AbstractExtension.java :\u000f XWIKI-7150: The name, licenses and summary of a local extension isn't copied over from the remote descriptor ...  \n06:01\u00a0<Denis1>\u00a0has joined #xwiki  \n06:04\u00a0<Denis>\u00a0has quit  \n06:56\u00a0<Enygma`>\u00a0has joined #xwiki  \n07:14\u00a0<tekzilla>\u00a0has quit  \n07:15\u00a0<tekzilla>\u00a0has joined #xwiki  \n07:30\u00a0<DrLou>\u00a0has quit  \n08:12\u00a0<vmassol>\u00a0has joined #xwiki  \n08:17\u00a0<CIA-102>\u00a0Eduard Moraru\u000f master\u000f \\* r5541789\u000f \u000f/ (17 files in 9 dirs):\u000f XWIKI-7152: Use script service everywhere for accessing the wiki manager and application manager plugins - http://git.io/qy-ZGw  \n08:18\u00a0<CIA-102>\u00a0Eduard Moraru\u000f master\u000f \\* r695e140\u000f \u000f/ (8 files in 2 dirs):\u000f XEM-201 : Use of the wiki manager plugin as a script service - http://git.io/bb4-\\_w  \n08:21\u00a0<Enygma`>\u00a0has quit  \n08:24\u00a0<vmassol>\u00a0has quit  \n08:31\u00a0<sburjan`>\u00a0has quit  \n08:36\u00a0<sburjan`>\u00a0has joined #xwiki  \n08:59\u00a0<mflorea>\u00a0has joined #xwiki  \n09:04\u00a0<CIA-102>\u00a0Sergiu Dumitriu\u000f feature-applicationWithinMinutes\u000f \\* ra3b2226\u000f \u000f/ xwiki-platform-core/xwiki-platform-web/src/main/webapp/templates/macros.vm :\u000f Merge pull request #26 from sorzu/master ...  \n09:04\u00a0<CIA-102>\u00a0Sergiu Dumitriu\u000f feature-applicationWithinMinutes\u000f \\* r2a7601f\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-api/src/main/java/org/xwiki/extension/AbstractExtension.java :\u000f XWIKI-7150: The name, licenses and summary of a local extension isn't copied over from the remote descriptor ...  \n09:04\u00a0<CIA-102>\u00a0Eduard Moraru\u000f feature-applicationWithinMinutes\u000f \\* r5541789\u000f \u000f/ (17 files in 9 dirs):\u000f XWIKI-7152: Use script service everywhere for accessing the wiki manager and application manager plugins - http://git.io/qy-ZGw  \n09:19\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:27\u00a0<Denis1>\u00a0is now known as <Denis>  \n09:30\u00a0<CIA-102>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r7725791\u000f \u000f/ xwiki-platform-core/xwiki-platform-web/src/main/webapp/templates/saverights.vm :\u000f XWIKI-7149: Forbidding delete right transforms undelete right in \"un\" right ...  \n09:30\u00a0<CIA-102>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r4c2da47\u000f \u000f/ xwiki-platform-core/xwiki-platform-web/src/main/webapp/resources/js/xwiki/usersandgroups/usersandgroups.js :\u000f XWIKI-7148: Delete right shown in the UI when delete right is not present but undelete right is present ...  \n09:32\u00a0<sburjan>\u00a0has joined #xwiki  \n09:34\u00a0<CIA-102>\u00a0Sergiu Dumitriu\u000f master\u000f \\* rf2cd5e8\u000f \u000f/ pom.xml :\u000f XCOMMONS-59: Upgrade to commons-lang 3.1 ...  \n09:47\u00a0<vmassol>\u00a0has joined #xwiki  \n10:47\u00a0<vmassol>\u00a0sdumitriu: how can I change the filter used by http://jira.xwiki.org/secure/Dashboard.jspa?selectPageId=10590 to use the new filter I've shared: http://jira.xwiki.org/secure/IssueNavigator.jspa?mode=hide&requestId=11192 ?  \n11:13\u00a0<lucaa>\u00a0has joined #xwiki  \n11:22\u00a0<lucaa>\u00a0has quit  \n11:22\u00a0<+mflorea>\u00a0sdumitriu: you there?  \n11:23\u00a0<vmassol>\u00a0Denis: I'm in a meeting right now but we need to talk about your collision id work. We need to know how safe this and Ludovic would like us to have a flag so that this is turned off by default  \n11:23\u00a0<vmassol>\u00a0basicallt it's a very risk feature  \n11:24\u00a0<vmassol>\u00a0and we need to guarantee that users are not going to have problems  \n11:24\u00a0<vmassol>\u00a0since it could leave the whole DB unusable  \n11:24\u00a0<+Denis>\u00a0this is why the migration work has to be in before  \n11:24\u00a0<vmassol>\u00a0it should have been in M1  \n11:24\u00a0<vmassol>\u00a0we have 2 options IMO  \n11:25\u00a0<+Denis>\u00a0I have started in 3.2  \n11:25\u00a0<vmassol>\u00a0either we commit it in 3.4M1 (which is in 2 weeks from now)  \n11:25\u00a0<vmassol>\u00a0or we have fag off by default  \n11:25\u00a0<vmassol>\u00a0flag  \n11:25\u00a0<vmassol>\u00a0so that people can try it and report how it works  \n11:25\u00a0<vmassol>\u00a0(the problem is not when it was started Denis but when it's first made available)  \n11:26\u00a0<lucaa>\u00a0has joined #xwiki  \n11:28\u00a0<@cjdelisle>\u00a0What are the failure modes to think about?  \n11:29\u00a0<@cjdelisle>\u00a0I guess we don't really have to worry about it forgetting a table and leaving deleted attachments all broken or anything since that would have been clear early on.  \n11:29\u00a0<@cjdelisle>\u00a0Which leaves upgrading, finding the upgrade has problems, downgrading, being broken.  \n11:29\u00a0<vmassol>\u00a0yes  \n11:30\u00a0<vmassol>\u00a0that's the use case to take into account  \n11:30\u00a0<+Denis>\u00a0but before upgrading, you have to backup your DB  \n11:31\u00a0<@cjdelisle>\u00a0s/have to/should/ but indeed yes.  \n11:31\u00a0<+Denis>\u00a0yes you must  \n11:31\u00a0<@cjdelisle>\u00a0I think the way most users work is they do db backups daily and they assume that's enough.  \n11:32\u00a0<@cjdelisle>\u00a0they have a backup routine and they have an upgrade routine and they don't think about backups when they upgrade.  \n11:32\u00a0<vmassol>\u00a0Denis: Ludovic doesn't agree with this because he says users will upgrade without doing backups and then we'll have to fix their mess....  \n11:32\u00a0<+Denis>\u00a0this should be a hot warning on the release that will contains my migration  \n11:33\u00a0<vmassol>\u00a0not enough  \n11:33\u00a0<@cjdelisle>\u00a0Can we turn it on optimistically? thus if it gets migrated (magicly) then it reads the db version and starts using the new ids?  \n11:33\u00a0<+Denis>\u00a0since MySQL ISAM has not rollback, there is no way to go back cleanly  \n11:33\u00a0<lucaa>\u00a0has quit  \n11:33\u00a0<vmassol>\u00a0Denis: yes which is why Ludovic is suggesting the flag  \n11:34\u00a0<vmassol>\u00a0cjdelisle's idea sounds good too  \n11:34\u00a0<vmassol>\u00a0(which is the same but with an \"internal\" flag: the dB version)  \n11:34\u00a0<lucaa>\u00a0has joined #xwiki  \n11:34\u00a0<vmassol>\u00a0personally  \n11:34\u00a0<vmassol>\u00a0I prefer to defer this to 3.4M1  \n11:34\u00a0<vmassol>\u00a0so that we get ample time for testing  \n11:35\u00a0<+Denis>\u00a0this is not enought, Id migration is not transactional on MySQL  \n11:35\u00a0<@cjdelisle>\u00a0The benefit of optimistic is that a few more versions down the road, we force it on them and if the wiki doesn't work right for whatever reason, they downgrade 1 version and it still works with the modified id numbers.  \n11:35\u00a0<@cjdelisle>\u00a0I suspect >90% of the upgrade/downgrade problems will quietly vanish with that.  \n11:36\u00a0<+Denis>\u00a0but half upgraded DB will be broken  \n11:37\u00a0<@cjdelisle>\u00a0you're concerned that it will upgrade half way and croak?  \n11:37\u00a0<+Denis>\u00a0my migration code can start again from a half upgraded DB  \n11:37\u00a0<+Denis>\u00a0but it cannot roll back them  \n11:38\u00a0<+Denis>\u00a0since ids are hashes, it could be possible to create collision, but it very unlikely  \n11:38\u00a0<vmassol>\u00a0which is why either we're 100% sure it works or we have a flag turned off by default for some time to let people experiment with this  \n11:38\u00a0<+Denis>\u00a0on the other hand, there could be network or db issue, or what else  \n11:38\u00a0<+Denis>\u00a0we will never be 100% sure it works  \n11:39\u00a0<vmassol>\u00a0again since this is coming very late for 3.3 I don't think we have any other option than the flag  \n11:39\u00a0<vmassol>\u00a0sure  \n11:39\u00a0<vmassol>\u00a099.999%  \n11:39\u00a0<vmassol>\u00a0:)  \n11:39\u00a0<@cjdelisle>\u00a0The main concern for me is that people will upgrade and it will work perfect and all that, then they will find some unrelated UI thing is broken and they downgrade while they work on figuring it out, then everything fails.  \n11:39\u00a0<vmassol>\u00a0yep  \n11:39\u00a0<vmassol>\u00a0that too  \n11:40\u00a0<+Denis>\u00a0so you are saying that we need a rollback procedure ?  \n11:40\u00a0<vmassol>\u00a0no  \n11:40\u00a0<vmassol>\u00a0I'm saying that people who want to try it out can and they should backup  \n11:40\u00a0<+Denis>\u00a0that we should introduce the rollback procedure in 3.3, and upgrade in 3.4  \n11:40\u00a0<vmassol>\u00a0but till we get enough feedback that it's working we shouldn't have it on by default  \n11:40\u00a0<CIA-102>\u00a0tmortagne\u000f master\u000f \\* r9d06f96\u000f \u000f/ (10 files in 5 dirs):\u000f XWIKI-7151: Installed extension licenses are lost after server restart - http://git.io/BmAzlw  \n11:41\u00a0<vmassol>\u00a0and again my opinion is that we commit this in 3.4M1  \n11:41\u00a0<vmassol>\u00a0so that people will try 3.4M1  \n11:41\u00a0<@cjdelisle>\u00a0I don't like the rollback idea that much, I would rather it detect the modified db and be able to work with it. then a couple versions down the road, force the migration, then my concern is solved.  \n11:42\u00a0<+Denis>\u00a0ok, lets way 3.4 to commit it on master, but I really need an agreement on the target ids and the fact it will be applied before  \n11:42\u00a0<+Denis>\u00a0s/way/wait/  \n11:42\u00a0<+Denis>\u00a0I means, I should be able to apply this on my side with assurance that I will be 3.4 compatible later  \n11:43\u00a0<vmassol>\u00a0I understand  \n11:43\u00a0<@cjdelisle>\u00a0IMO the quicker you can get optimistic stuff in place the better, then the longer you are willing to wait before forcing the change with the migrator, the better, it all means there's a wider buffer.  \n11:44\u00a0<+Denis>\u00a0cjdelisle: with the migration procedure updated (separate patch), I have the garantee that a given wiki version will not use an incompatible database with its core version  \n11:45\u00a0<@cjdelisle>\u00a0I don't follow? can you elaborate?  \n11:45\u00a0<+Denis>\u00a0I have never envision a situation where a core support 2 different database version  \n11:45\u00a0<@cjdelisle>\u00a0ahh I see  \n11:45\u00a0<+Denis>\u00a0Currently, if a migration fails, the wiki starts  \n11:46\u00a0<+Denis>\u00a0and with this Ids stuff, it really corrupt your data  \n11:46\u00a0<+Denis>\u00a0creating missing classes for example because their id has not been migrated  \n11:46\u00a0<@cjdelisle>\u00a0indeed  \n11:47\u00a0<+Denis>\u00a0So I have improved the migration stuff, and I prevent any access to a database that has not the correct version number for a given core  \n11:48\u00a0<@cjdelisle>\u00a0Ahh is that already in place?  \n11:48\u00a0<+Denis>\u00a0If migration are activated, I upgrade the database as before, and this is transparent, else I just tell that the database needs migration  \n11:48\u00a0<@cjdelisle>\u00a0I suppose it has to be..  \n11:48\u00a0<+Denis>\u00a0it is a separate patch, not master right now  \n11:49\u00a0<+Denis>\u00a0maybe this could be in for 3.3  \n11:49\u00a0<@cjdelisle>\u00a0I don't think we are likely to end up with a db which is half migraded and all broken.  \n11:50\u00a0<@cjdelisle>\u00a0But ending up with a core<->db mismatch, that is very likely.  \n11:51\u00a0<+Denis>\u00a0the migration stuff improve many things, like not upgrading schema at many \u00a0places on the fly, and note that shema upgrade was containing some row upgrades that has nothing to do there  \n11:51\u00a0<+Denis>\u00a0do not apply migration on an empty database  \n11:51\u00a0<+Denis>\u00a0do not apply migration on newly created wikis  \n11:52\u00a0<@cjdelisle>\u00a0/nod  \n11:52\u00a0<@cjdelisle>\u00a0is it in a branch?  \n11:52\u00a0<+Denis> http://jira.xwiki.org/browse/XWIKI-7006  \n11:52\u00a0<jvdrean>\u00a0has joined #xwiki  \n11:55\u00a0<+Denis>\u00a0it is in my own fork: https://github.com/dgervalle/xwiki-platform/compare/04ca2c9937b7f1f22d5cff8858acd75edff6fbfd...f1fa1b1357d17c1ee4ed65eb2cc7f2867ddb3762  \n11:57\u00a0<@cjdelisle>\u00a0+@Named(\"hibernate\") <-- Why Thankyou :)  \n11:58\u00a0<+Denis>\u00a0because the migration systems see stores as a whole and is compatible with only on kind of store  \n11:58\u00a0<+Denis>\u00a0this should be improved, but it is not so easy  \n11:58\u00a0<+Denis>\u00a0having hibernate unqualified, means you do not know the kind of store you get  \n11:59\u00a0<+Denis>\u00a0this has been a initial mistake IMO  \n12:00\u00a0<+Denis>\u00a0so I have hinted hibernate stores and use \"hibernate\" as a default hint  \n12:00\u00a0<@cjdelisle>\u00a0checkHibernate gets called a lot  \n12:00\u00a0<+Denis>\u00a0this is unchanged  \n12:00\u00a0<+Denis>\u00a0before it also trigger schema updates !  \n12:00\u00a0<@cjdelisle>\u00a0https://github.com/dgervalle/xwiki-platform/compare/04ca2c9937b7f1f22d5cff8858acd75edff6fbfd...f1fa1b1357d17c1ee4ed65eb2cc7f2867ddb3762#L4L567  \n12:02\u00a0<+Denis>\u00a0yes, what is your question ?  \n12:03\u00a0<+Denis>\u00a0I means, checkHibernate has always been called often  \n12:04\u00a0<@cjdelisle>\u00a0I think the reason for that dirty double lock is because checkHibernate gets called a lot and it was trying to avoid overhead.. now initHibernate will be called every time.  \n12:04\u00a0<+Denis>\u00a0only when getSessionFactory() is null  \n12:05\u00a0<+Denis>\u00a0which is not so often  \n12:06\u00a0<@cjdelisle>\u00a0look in XHS  \n12:06\u00a0<@cjdelisle>\u00a0it's called everywhere  \n12:07\u00a0<+Denis>\u00a0yes  \n12:07\u00a0<+Denis>\u00a0but the goal of initHibernate is to set the factory  \n12:07\u00a0<+Denis>\u00a0so it will be called on once  \n12:08\u00a0<+Denis>\u00a0only once  \n12:09\u00a0<@cjdelisle>\u00a0ok I see  \n12:09\u00a0<@cjdelisle>\u00a0the double checking danger is still there although less obvious  \n12:10\u00a0<+Denis>\u00a0I do not think this matter a lot therefore, and double check is bad  \n12:10\u00a0<@cjdelisle>\u00a0but I think sun and most of the other major jvm implementations realized a while back that they basicly had to support it.  \n12:17\u00a0<+Denis>\u00a0if you really prefer, I can leave it there  \n12:17\u00a0<@cjdelisle>\u00a0There seem to be a number of different concerns being addressed there, it looks to me like a patch set.  \n12:18\u00a0<@cjdelisle>\u00a0The naming to \"hibernate\" is one concern  \n12:18\u00a0<@cjdelisle>\u00a0then the beefing up the migrator  \n12:19\u00a0<@cjdelisle>\u00a0The changes to XHBS is the part which I'm least comfortable with.  \n12:21\u00a0<+Denis>\u00a0all this was require to better integrate the migration stuff  \n12:21\u00a0<+Denis>\u00a0I do not plan it upfront  \n12:21\u00a0<@cjdelisle>\u00a0yea  \n12:24\u00a0<+Denis>\u00a0but compare to before, the risk of corrupting your database has been lowered by many  \n12:25\u00a0<+Denis>\u00a0before, you have some component accessing subwiki databases before migration occurs  \n12:25\u00a0<+Denis>\u00a0and absolutely no guard against the database version before access  \n12:40\u00a0<@cjdelisle>\u00a0I see your fork still seems to use hashCode() for getting a document id.  \n12:42\u00a0<lucaa>\u00a0has quit  \n12:47\u00a0<lucaa>\u00a0has joined #xwiki  \n12:49\u00a0<+Denis>\u00a0cjdelisle: yes changing that will be really harder, I am reducing the likelyhood not suppressing it fully, but with MD5 hash, it is really better  \n12:49\u00a0<CIA-102>\u00a0tmortagne\u000f master\u000f \\* r6152024\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-api/src/main/java/org/xwiki/extension/AbstractExtension.java :\u000f XWIKI-7151: Installed extension licenses are lost after server restart ...  \n13:02\u00a0<lucaa>\u00a0has quit  \n13:17\u00a0<lucaa>\u00a0has joined #xwiki  \n13:20\u00a0<Denis1>\u00a0has joined #xwiki  \n13:21\u00a0<Denis>\u00a0has quit  \n13:28\u00a0<mflorea>\u00a0has quit  \n13:30\u00a0<Denis1>\u00a0is now known as <Denis>  \n13:33\u00a0<evalica>\u00a0has joined #xwiki  \n13:40\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:50\u00a0<DrLou>\u00a0has joined #xwiki  \n14:22\u00a0<mflorea>\u00a0has joined #xwiki  \n14:32\u00a0<evalica>\u00a0has quit  \n14:32\u00a0<evalica>\u00a0has joined #xwiki  \n14:36\u00a0<evalica>\u00a0has quit  \n14:42\u00a0<JuanDaugherty>\u00a0has left #xwiki  \n14:43\u00a0<lucaa>\u00a0has quit  \n14:43\u00a0<tmortagne>\u00a0has quit  \n14:43\u00a0<sburjan`>\u00a0has quit  \n14:47\u00a0<vmassol>\u00a0guys please add your stuff to http://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWikiEnterprise33M2  \n14:47\u00a0<vmassol>\u00a0sdumitriu: when do we release?  \n14:48\u00a0<lucaa>\u00a0has joined #xwiki  \n14:48\u00a0<tmortagne>\u00a0has joined #xwiki  \n14:48\u00a0<sburjan`>\u00a0has joined #xwiki  \n14:48\u00a0<vmassol>\u00a0sburjan: let me prepare the Dashboard application extension for you  \n15:00\u00a0<vmassol>\u00a0tmortagne: how do I say that the extension is developed by the xwiki dev team, http://extensions.xwiki.org/xwiki/bin/inline/Extension/Dashboard+Application?  \n15:00\u00a0<vmassol>\u00a0I don't see the field anymore  \n15:01\u00a0<tmortagne>\u00a0vmassol: you put it as author  \n15:01\u00a0<vmassol>\u00a0ah yes  \n15:02\u00a0<vmassol>\u00a0hmm so for the license there's no way to say: \"the license of the xwiki project\"?  \n15:02\u00a0<tmortagne>\u00a0no but that's the default license  \n15:02\u00a0<vmassol>\u00a0(before when you said it was done by the xwiki dev team the right license was used)  \n15:02\u00a0<tmortagne>\u00a0if you do nothing you will have LGPL 2.1  \n15:02\u00a0<vmassol>\u00a0yes but it means someone can make a mistake  \n15:03\u00a0<vmassol>\u00a0if I choose ASL for ex  \n15:03\u00a0<vmassol>\u00a0and developed by the xiwki dev team  \n15:03\u00a0<vmassol>\u00a0what happens?  \n15:03\u00a0<tmortagne>\u00a0well if he change the license he should know what he is doing I would say  \n15:03\u00a0<vmassol>\u00a0(btw this would come useful if one day we decide to have several licneses for several parts of xwiki ;))  \n15:04\u00a0<vmassol>\u00a0tmortagne: also  \n15:04\u00a0<vmassol>\u00a0imagine we change from LGPL 2.1 to LGPL 3  \n15:04\u00a0<vmassol>\u00a0we have to change all extensions  \n15:04\u00a0<vmassol>\u00a0(xwiki dev team extensions)  \n15:04\u00a0<tmortagne>\u00a0yes  \n15:04\u00a0<tmortagne>\u00a0but when you change a license it changed to new versions the old license stay true for the old versions  \n15:05\u00a0<tmortagne>\u00a0also mean that the licnse probably need to be at version level  \n15:05\u00a0<vmassol>\u00a0btw is the license now attached to a version?  \n15:06\u00a0<vmassol>\u00a0yep  \n15:07\u00a0<tmortagne>\u00a0technically everything could be associated to the version as we discussed last time but it's a matter of how much information you need to duplicate and what really need to be separated  \n15:07\u00a0<vmassol>\u00a0sburjan: the page is ready for you to document: http://extensions.xwiki.org/xwiki/bin/view/Extension/Dashboard+Application :)  \n15:08\u00a0<vmassol>\u00a0tmortagne: I don't remember what you said about the instructions listed for bundled apps, for ex: http://extensions.xwiki.org/xwiki/bin/view/Extension/Dashboard+Application  \n15:08\u00a0<vmassol>\u00a0it always seems strange to me to have instructions if nothing can be downloade  \n15:08\u00a0<vmassol>\u00a0cannot you only display instructions if there 's a download?  \n15:09\u00a0<vmassol>\u00a0s/cannot/couldn't/  \n15:10\u00a0<tmortagne>\u00a0the fact that an extension of type xar does not have anything to download sounds like temporary or a mistake to me  \n15:10\u00a0<vmassol>\u00a0yes but users see it now  \n15:10\u00a0<vmassol>\u00a0so it seems a good rule  \n15:11\u00a0<vmassol>\u00a0to not have install instructions if there's no download  \n15:11\u00a0<vmassol>\u00a0what's wrong with that?  \n15:11\u00a0<vmassol>\u00a0tmortagne: btw just noticed a bug on http://enterprise.xwiki.org/xwiki/bin/view/Main/Features  \n15:11\u00a0<vmassol>\u00a0it also lists other things than apps now  \n15:12\u00a0<vmassol>\u00a0like macros  \n15:12\u00a0<tmortagne>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/Tag+Cloud+Macro  \n15:12\u00a0<tmortagne>\u00a0as far as i can see it's an application, a xar  \n15:12\u00a0<vmassol>\u00a0ah wiki macros  \n15:12\u00a0<vmassol>\u00a0hmmm  \n15:13\u00a0<vmassol>\u00a0we have a problem  \n15:13\u00a0<vmassol>\u00a0because there's no reason we list wiki macros and not other macros  \n15:13\u00a0<vmassol>\u00a0and if we want to list all bundled macros we would need to list them in a separate section  \n15:13\u00a0<vmassol>\u00a0(not in the Bundled Applications section)  \n15:14\u00a0<tmortagne>\u00a0probably since it's a lot of things  \n15:22\u00a0<Enygma`>\u00a0has quit  \n15:22\u00a0<vmassol>\u00a0tmortagne: hmm macros are now components  \n15:22\u00a0<vmassol>\u00a0(java macros)  \n15:22\u00a0<vmassol>\u00a0so basically we currently have no way of identifying macros  \n15:22\u00a0<tmortagne>\u00a0they are jar  \n15:22\u00a0<vmassol>\u00a0(whether they are wiki macros or java macros)  \n15:23\u00a0<vmassol>\u00a0what can we do?  \n15:23\u00a0<vmassol>\u00a0tags?  \n15:23\u00a0<vmassol>\u00a0anything better than tags?  \n15:23\u00a0<vmassol>\u00a0what if users want to see all macros?  \n15:23\u00a0<vmassol>\u00a0(in the extension LT)  \n15:23\u00a0<+sburjan>\u00a0vmassol: ok, I think I'll have time only next week got it  \n15:23\u00a0<+sburjan>\u00a0\\*for it  \n15:23\u00a0<+sburjan>\u00a0but thanks !  \n15:23\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n15:33\u00a0<lucaa>\u00a0has quit  \n15:33\u00a0<tmortagne>\u00a0has quit  \n15:33\u00a0<sburjan`>\u00a0has quit  \n15:33\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n15:36\u00a0<vmassol>\u00a0thanks \u2122   \n15:37\u00a0<vmassol>\u00a0:)  \n15:41\u00a0<tmortagne>\u00a0has joined #xwiki  \n15:41\u00a0<lucaa>\u00a0has joined #xwiki  \n16:07\u00a0<+lucaa>\u00a0guys, when I include page A in page B and page A uses some protected API, who has to have the rights, included page or including page (A or B)  \n16:07\u00a0<+lucaa>\u00a0?  \n16:07\u00a0<+lucaa>\u00a0\"the rights\" == be saved with programming rights  \n16:35\u00a0<+tmortagne>\u00a0lucaa: depends what include you use  \n16:35\u00a0<+tmortagne>\u00a0what context parameter I \u00a0mean  \n16:36\u00a0<+tmortagne>\u00a0by default all include do is to insert included content as it was part of your document already (except for the reference resolution)  \n17:02\u00a0<vmassol>\u00a0tmortagne: there's a problem with the breadcrumb  \n17:02\u00a0<vmassol>\u00a0for ex: http://extensions.xwiki.org/xwiki/bin/view/Extension/Dashboard+Application  \n17:03\u00a0<vmassol>\u00a0Extensions is listed twice  \n17:03\u00a0<+tmortagne>\u00a0vmassol: not exactly  \n17:03\u00a0<vmassol>\u00a0yes I know  \n17:03\u00a0<vmassol>\u00a0but still it's not correct  \n17:04\u00a0<+tmortagne>\u00a0all I can see to fix it is a redirect  \n17:04\u00a0<vmassol>\u00a0why not change the extensions?  \n17:04\u00a0<vmassol>\u00a0isn't this what we had before  \n17:05\u00a0<vmassol>\u00a0parent being set a Main.Webhome  \n17:05\u00a0<vmassol>\u00a0s/a/as/  \n17:05\u00a0<vmassol>\u00a0?  \n17:05\u00a0<vmassol>\u00a0and when a new extension is created set its parent as Main.WebHome  \n17:05\u00a0<Enygma`>\u00a0has joined #xwiki  \n17:05\u00a0<vmassol>\u00a0what redirect do you have in mind?  \n17:05\u00a0<+tmortagne>\u00a0I try to have code commons to XR and extensions.xwiki.org annd XR home page is Extension.WebHome since it's an extension itseelf  \n17:06\u00a0<vmassol>\u00a0or  \n17:06\u00a0<vmassol>\u00a0we change the home page name  \n17:06\u00a0<+tmortagne>\u00a0yes we can do that  \n17:07\u00a0<vmassol>\u00a0but since both pages are the same...  \n17:07\u00a0<+tmortagne>\u00a0nor exactly actually  \n17:07\u00a0<+tmortagne>\u00a0\"Extensions are ways to extend XWiki \u00a0Enterprise. Select the Extension you wish to install from the list below \u00a0and then follow the instructions on the extension page to install it in \u00a0your wiki.\"  \n17:08\u00a0<+tmortagne>\u00a0because of \"XWiki Enterprise mostly\"  \n17:08\u00a0<vmassol>\u00a0I don't undertand wym  \n17:08\u00a0<+tmortagne>\u00a0and there could be much more difference that that  \n17:08\u00a0<+tmortagne>\u00a0things specific to extensions.xwiki.org home page, I don't know  \n17:09\u00a0<+tmortagne>\u00a0like links to xwiki.org etc  \n17:09\u00a0<+tmortagne>\u00a0or explaining that you can find extension and documentation for example which does not mak much sense for XR  \n17:09\u00a0<vmassol>\u00a0well right now they're the same and I don't plan to change it  \n17:09\u00a0<+lucaa>\u00a0tmortagne: re includes: so context=existing uses the rights of including document, context=new uses the rights of included  \n17:10\u00a0<vmassol>\u00a0even if you add a few links it'sn ot going to make a big visual difference  \n17:11\u00a0<+tmortagne>\u00a0lucaa: context=current behave exactly has if the content you ionclude was part of your document (except for the links) and context=new behave has if you where viewing the included content from its own page  \n17:11\u00a0<+lucaa>\u00a0tmortagne: ok, merci  \n17:14\u00a0<vmassol>\u00a0tmortagne: how do you plan to handle categories for the EM UI?  \n17:14\u00a0<vmassol>\u00a0(we have the same need for the feature page of XE for ex)  \n17:14\u00a0<vmassol>\u00a0(and macros could be handled like this)  \n17:15\u00a0<+tmortagne>\u00a0vmassol: not much plan since it's not in the model yet but I was thinking of reusing tags as I suggested when we talked about features page  \n17:15\u00a0<vmassol>\u00a0but tags are not in maven  \n17:16\u00a0<vmassol>\u00a0so we would also need some custom props for maven right?  \n17:16\u00a0<+tmortagne>\u00a0there is no concept of category in maven anyway  \n17:16\u00a0<+tmortagne>\u00a0custom props is easy yes  \n17:16\u00a0<+tmortagne>\u00a0I'm already using them for some EM things not supported by maven  \n17:17\u00a0<+tmortagne>\u00a0and plan to add more  \n17:19\u00a0<+tmortagne>\u00a0(I understood \"XR UI\" instead of \"EM UI\" at first)  \n17:19\u00a0<+tmortagne>\u00a0I don't remember if evalica did a proposal about category in her design already  \n17:20\u00a0<+tmortagne>\u00a0but from EM point it's only informationnal so it's just a lits of string to display somewhere  \n17:22\u00a0<vmassol>\u00a0I don't think she's taken that into account\u2026 http://incubator.myxwiki.org/xwiki/bin/view/Improvements/ExtensionManagerProposalI3  \n17:22\u00a0<vmassol>\u00a0however \u00a0she has different categories in the left menu  \n17:22\u00a0<vmassol>\u00a0like macros, skins, etc  \n17:22\u00a0<+tmortagne>\u00a0I see \"tags\" in her proposal  \n17:22\u00a0<+tmortagne>\u00a0sounds like the same thing to me  \n17:23\u00a0<+tmortagne>\u00a0under \"ratings\"  \n17:23\u00a0<+tmortagne>\u00a0on the left of the extension description  \n17:23\u00a0<vmassol>\u00a0yes I see them  \n17:23\u00a0<vmassol>\u00a0they could finer-grained cateogires indeed  \n17:24\u00a0<vmassol>\u00a0s/could/could be/  \n17:24\u00a0<vmassol>\u00a0we probably still need top level categories such as macros, skins, themes, etc  \n17:25\u00a0<+tmortagne>\u00a0not sure  \n17:25\u00a0<+tmortagne>\u00a0it make sense to have multiple catagories  \n17:25\u00a0<+tmortagne>\u00a0a xar extension is often several things, we don't have much wiki macro alone  \n17:26\u00a0<vmassol>\u00a0in any case the only category she's taken into account so far in her UI are the ones in the left menu  \n17:27\u00a0<vmassol>\u00a0there's no UI mockup for filtering extensions on other things that I can see  \n17:27\u00a0<+tmortagne>\u00a0yes the the one on the left are kind of random, they were supposed to be types and she just took what she found on extensions.xwiki.org  \n17:27\u00a0<vmassol>\u00a0they're not random!  \n17:27\u00a0<vmassol>\u00a0they 're the ones we had defined  \n17:27\u00a0<vmassol>\u00a0in any case we need to ask her to work on this I think  \n17:28\u00a0<vmassol>\u00a0and on our side we need to take it into accoutn too  \n17:28\u00a0<+tmortagne>\u00a0also mostly depends on what sdumitriu did already  \n17:30\u00a0<vmassol>\u00a0who knows\u2026. we'll discover that a few days after the release ;)  \n17:31\u00a0<vmassol>\u00a0(unless sergiu wants to share what he's working on with us before ofc...)  \n17:33\u00a0<vmassol>\u00a0tmortagne: old extensions have correct breadcrumbs: http://extensions.xwiki.org/xwiki/bin/view/Extension/Sheet+Module Maybe customizing the Extension Template is ok?  \n17:34\u00a0<vmassol>\u00a0since template is a bit usage-specific  \n17:34\u00a0<+tmortagne>\u00a0vmassol: I did not modified old extensions parents  \n17:34\u00a0<vmassol>\u00a0(yes I guessed so)  \n17:34\u00a0<+tmortagne>\u00a0problem is that template or not it's a page in XR xar so something you have to skip when importing a new version  \n17:35\u00a0<+tmortagne>\u00a0unless I don't provide any template in XR  \n17:35\u00a0<vmassol>\u00a0or you provide a default one  \n17:35\u00a0<vmassol>\u00a0but the XR config has a field to list the template to use  \n17:36\u00a0<vmassol>\u00a0if not defined the default one is used  \n17:36\u00a0<+tmortagne>\u00a0hmm  \n17:36\u00a0<vmassol>\u00a0is that overkill? :)  \n17:36\u00a0<+tmortagne>\u00a0would need mflorea input on that probably \u00a0since XR is using old template/sheet system which is not good anyway  \n17:37\u00a0<vmassol>\u00a0I agree that if we can find a simpler solution it's better  \n17:37\u00a0<+tmortagne>\u00a0never use the new system yet  \n17:37\u00a0<+tmortagne>\u00a0with the debate about naming convention etc I'm not sure what is it's current best practice  \n17:38\u00a0<+tmortagne>\u00a0but as far as I understood either way there is no page based template anymore  \n17:38\u00a0<+mflorea>\u00a0tmortagne: I haven't followed the discussion. What is the relation between the template you are talking about and the new sheet system?  \n17:38\u00a0<+tmortagne>\u00a0vmassol: having a configuration is ok, I already created a configuration system for XR so it's just a field to add  \n17:39\u00a0<vmassol>\u00a0tmortagne: yes but if we can have a XR that fits exactly our need for xwiki.org it's even better  \n17:39\u00a0<+tmortagne>\u00a0mflorea: mostly the fact that XR should not use template page anyway if it fowwon the new syste, right ?  \n17:40\u00a0<+tmortagne>\u00a0in fact I don't really know what's the current best practice around tmeplate/sheet when creating a new application  \n17:41\u00a0<+mflorea>\u00a0no, the new sheet system doesn't eliminate the usage of template, on the contrary, it uses templates. For instance, when you create a new page of a specific type (Blog.BlogPostClass) you need a template specified in the URL in order for the edit action to work properly (i.e. the Inline form to be triggered)  \n17:41\u00a0<+tmortagne>\u00a0and the issue here is that the defautl extension parent for XR and extensions.xwiki.org are not the same  \n17:42\u00a0<+tmortagne>\u00a0mflorea: don't you mean sheet ?  \n17:42\u00a0<+mflorea>\u00a0no, I mean template  \n17:42\u00a0<+mflorea>\u00a0let me explain  \n17:43\u00a0<+mflorea>\u00a0the sheet is automatically applied only if there is an object of type T added to the page. But when you create a new page you don't have this object. By specifying the template in the URL, the edit action copies the object from the template to the new page and thus the sheet is applied  \n17:43\u00a0<+tmortagne>\u00a0ok so it's the same as before  \n17:44\u00a0<+mflorea>\u00a0wrt templates yes  \n17:44\u00a0<+mflorea>\u00a0i.e. they serve the same role  \n17:44\u00a0<+tmortagne>\u00a0ok so sorry for the noise :)  \n17:44\u00a0<+mflorea>\u00a0np :)  \n17:45\u00a0<+tmortagne>\u00a0vmassol: issue is that it's not right IMO to have a Main.WebHome page in the XR xar  \n17:46\u00a0<vmassol>\u00a0yep I agree  \n17:46\u00a0<+tmortagne>\u00a0i'm ok with the configuration id, it's not very hard to do  \n17:47\u00a0<vmassol>\u00a0another option is to have a config option for the parent of extensions, defaulting to Extension.WebHome  \n17:47\u00a0<+tmortagne>\u00a0and there probably a lot more things I could make configurable  \n17:47\u00a0<+tmortagne>\u00a0vmassol: that's harder  \n17:47\u00a0<vmassol>\u00a0that allows to reuse the template  \n17:47\u00a0<+tmortagne>\u00a0because th parent field is not a velocity field  \n17:47\u00a0<+tmortagne>\u00a0so you can't have a dynamic parent in the template  \n17:47\u00a0<vmassol>\u00a0the parent is passed in the URL  \n17:47\u00a0<vmassol>\u00a0when you create a new extension  \n17:48\u00a0<+tmortagne>\u00a0or this mean you override the template after the creation  \n17:48\u00a0<vmassol>\u00a0AFAIR  \n17:48\u00a0<+tmortagne>\u00a0I don't think so, you can maybe override the parent but you put the template in the URL and it's copied as it is AFAIK  \n17:48\u00a0<vmassol>\u00a0yep  \n17:48\u00a0<vmassol>\u00a0http://extensions.xwiki.org/xwiki/bin/inline/Extension/sss?parent=Extension.WebHome&template=ExtensionCode.ExtensionTemplate&createExtension=true&name=sss  \n17:49\u00a0<vmassol>\u00a0(for ex)  \n17:49\u00a0<+tmortagne>\u00a0but it's not hard to override what's in the template anyway  \n17:49\u00a0<vmassol>\u00a0so easy to do  \n17:50\u00a0<+tmortagne>\u00a0yes should be  \n17:51\u00a0<+tmortagne>\u00a0if it's really taken into account :)  \n17:51\u00a0<vmassol>\u00a0it is I'm pretty sure  \n17:51\u00a0<@sdumitriu>\u00a0Hey guys, what's the status for the release? Still waiting for code to stabilize?  \n17:52\u00a0<@sdumitriu>\u00a0I see lots of problems on ci.xwiki.org  \n17:52\u00a0<+tmortagne>\u00a0don't think so, I'm working on a bugfix but i can go after the release  \n17:52\u00a0<vmassol>\u00a0Denis: you're the BM right? :)  \n17:52\u00a0<vmassol>\u00a0I asked devs here about their status this morning  \n17:52\u00a0<vmassol>\u00a0but didn't got much answers  \n17:52\u00a0<+Denis>\u00a0right  \n17:53\u00a0<+Denis>\u00a0I try to be  \n17:53\u00a0<vmassol>\u00a0Denis: can we release?  \n17:53\u00a0<vmassol>\u00a0mflorea: I think you're ok right?  \n17:53\u00a0<+tmortagne>\u00a0vmassol: did you fixed the test about dashboard refactoring  \n17:53\u00a0<vmassol>\u00a0hmm what tests tmortagne?  \n17:53\u00a0<+tmortagne>\u00a0reported by Enygma`IIRW  \n17:53\u00a0<+tmortagne>\u00a0some page moved or has been renamed and some test count on it  \n17:53\u00a0<vmassol>\u00a0maybe I missed that because it doesn't ring a bell  \n17:53\u00a0<+tmortagne>\u00a0or maybe it was mflorea  \n17:54\u00a0<+Denis>\u00a0not yet, I has to commit my own stuff, and there is some failling tests  \n17:54\u00a0<+Denis>\u00a0(not mine)  \n17:54\u00a0<+Denis>\u00a0but I do not know if this is major or not  \n17:55\u00a0<vmassol>\u00a0hmm btw console output here isn't good re logback :http://ci.xwiki.org/job/xwiki-enterprise-test-ui/org.xwiki.enterprise$xwiki-enterprise-test-ui/595/testReport/org.xwiki.test.ui/AttachmentTest/testUploadDownloadTwoAttachments/  \n17:55\u00a0<+mflorea>\u00a0vmassol: on the AppWithinMinutes yes. I have some bugs on my list (unrelated to AppWithinMinutes) that I'd like to fix, but they shouldn't postpone the release (i.e. they can make it to 3.3RC1)  \n17:56\u00a0<+mflorea>\u00a0tmortagne: I can take care of the WYSIWYG tests  \n17:57\u00a0<+tmortagne>\u00a0mflorea: ok  \n18:07\u00a0<abusenius>\u00a0has joined #xwiki  \n18:10\u00a0<tmortagne>\u00a0has quit  \n18:20\u00a0<vmassol>\u00a0has quit  \n18:23\u00a0<CIA-102>\u00a0Denis Gervalle\u000f feature-immutable-refs\u000f \\* r459c2c3\u000f \u000f/ xwiki-platform-core/xwiki-platform-model/src/main/java/org/xwiki/model/reference/EntityReference.java :\u000f XWIKI-7097 Make EntityReference immutables, adding parameters to EntityReference and allowing Locale and Version in DocumentReference ...  \n18:23\u00a0<CIA-102>\u00a0Denis Gervalle\u000f master\u000f \\* r459c2c3\u000f \u000f/ xwiki-platform-core/xwiki-platform-model/src/main/java/org/xwiki/model/reference/EntityReference.java :\u000f XWIKI-7097 Make EntityReference immutables, adding parameters to EntityReference and allowing Locale and Version in DocumentReference ...  \n18:23\u00a0<CIA-102>\u00a0Denis Gervalle\u000f master\u000f \\* r0edbb5d\u000f \u000f/ (45 files in 19 dirs):\u000f XWIKI-7097 Make EntityReference immutables, and add Locale in DocumentReference ...  \n18:32\u00a0<CIA-102>\u00a0Denis Gervalle\u000f master\u000f \\* r1751411\u000f \u000f/ xwiki-platform-core/xwiki-platform-model/src/main/java/org/xwiki/model/reference/EntityReference.java :\u000f XWIKI-7097 Make EntityReference immutables, and add Locale in DocumentReference ...  \n18:38\u00a0<sburjan>\u00a0has quit  \n18:44\u00a0<mflorea>\u00a0has quit  \n18:50\u00a0<CIA-102>\u00a0Eduard Moraru\u000f master\u000f \\* rd8c64da\u000f \u000f/ (4 files in 2 dirs):\u000f XWIKI-7153 : Don`t use translation keys from dependencies - http://git.io/rSoneQ  \n19:44\u00a0<@sdumitriu>\u00a0Broken attachment: http://extensions.xwiki.org/xwiki/bin/view/Extension/XSLT+Macro#Attachments  \n19:45\u00a0<@sdumitriu>\u00a0I wonder what happened  \n20:14\u00a0<lucaa>\u00a0has quit  \n20:16\u00a0<vmassol>\u00a0has joined #xwiki  \n20:29\u00a0<vmassol>\u00a0guys I've analyzed all failing UI tests  \n20:29\u00a0<vmassol>\u00a0one I've just fixed and the others are caused by thomas' changes  \n20:29\u00a0<vmassol>\u00a0I've reported them to thomas on skype  \n20:29\u00a0<vmassol>\u00a0(but he's offline right now, he'll see them tomorrow)  \n20:30\u00a0<CIA-102>\u00a0Vincent Massol\u000f master\u000f \\* r0f66061\u000f \u000f/ (2 files):\u000f Fix test (was having an extra new line) - http://git.io/C1fJQg  \n20:33\u00a0<vmassol>\u00a0webstandards issues are caused by marius, sending him on skype  \n20:33\u00a0<+Denis>\u00a0vmassol: hey, you are doing my job, I had plane to do that this evening...  \n20:33\u00a0<+Denis>\u00a0thanks :)  \n20:33\u00a0<vmassol>\u00a0ok all reviewed :)  \n20:34\u00a0<vmassol>\u00a0ah no  \n20:34\u00a0<vmassol>\u00a0still need to reviex escaping  \n20:34\u00a0<+Denis>\u00a0I think marius is aware  \n20:34\u00a0<vmassol>\u00a0same issue it's for marius  \n20:34\u00a0<vmassol>\u00a0bbl  \n20:51\u00a0<jvdrean>\u00a0has quit  \n21:47\u00a0<rrodriguez>\u00a0has joined #xwiki  \n21:56\u00a0<jvdrean>\u00a0has joined #xwiki  \n22:16\u00a0<vmassol>\u00a0has quit  \n22:29\u00a0<abusenius>\u00a0has quit  \n23:19\u00a0<Enygma`>\u00a0has quit  \n\n"}