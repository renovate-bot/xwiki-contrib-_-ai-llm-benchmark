{"id": "dev:IRC.xwikiArchive20141022", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20141022", "title": "IRC Archive for channel #xwiki on 22 October 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<xwikibot>\u00a0has joined #xwiki  \n12:21\u00a0<vmassol>\u00a0guys, one thing I noticed yesterday on dev.xwiki.org when I upgraded  \n12:21\u00a0<vmassol>\u00a0I had to modify the home page  \n12:21\u00a0<vmassol>\u00a0it was using:  \n12:21\u00a0<vmassol>\u00a0#includeInContext(\"Community.WebHome\")  \n12:21\u00a0<vmassol>\u00a0and the icons were broken  \n12:22\u00a0<vmassol>\u00a0the page was in syntax 1.0  \n12:22\u00a0<vmassol>\u00a0so it seems we have some regression somewhere  \n12:22\u00a0<tmortagne>\u00a0evalica: ok with you if I release idea application ? I would like to update my wiki with the fix you did but asking in case there is other things you want to fix before  \n12:22\u00a0<vmassol>\u00a0between 5.4.3 and 6.2.2  \n12:22\u00a0<vmassol>\u00a0I moved the page to syntax 2.1 and used {{display reference=\"Community.WebHome\"/}}  \n12:22\u00a0<vmassol>\u00a0will try to reproduce later on  \n12:36\u00a0<Lyes>\u00a0has quit  \n13:09\u00a0<DarkKnightCZ>\u00a0has quit  \n13:10\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n13:14\u00a0<gdelhumeau>\u00a0Enygma`: I have fixed the failing test (http://jira.xwiki.org/browse/XWIKI-11306)  \n13:21\u00a0<evalica>\u00a0has quit  \n13:25\u00a0<evalica>\u00a0has joined #xwiki  \n13:25\u00a0<evalica>\u00a0tmortagne: you can release it, I don't know if there are multiple issues on Flamingo, let me look 3 secons  \n13:29\u00a0<evalica>\u00a0tmortagne: give 30 min pls for idea  \n13:35\u00a0<vmassol1>\u00a0has joined #xwiki  \n13:38\u00a0<vmassol>\u00a0has quit  \n13:40\u00a0<Lyes>\u00a0has joined #xwiki  \n13:49\u00a0<vmassol1>\u00a0restarting xwiki.org  \n13:54\u00a0<vmassol>\u00a0wiki.org is back  \n13:58\u00a0<Lyes>\u00a0has quit  \n14:12\u00a0<tmortagne>\u00a0evalica: ok  \n14:35\u00a0<woshilapin>\u00a0has quit  \n14:36\u00a0<Enygma`>\u00a0gdelhumeau: cool. Would be interesting if we could extend the dom to add a deprecation console.log message to devs depending on the meta tags :)  \n14:37\u00a0<woshilapin>\u00a0has joined #xwiki  \n14:43\u00a0<andreeapopescu>\u00a0has quit  \n14:49\u00a0<Lyes>\u00a0has joined #xwiki  \n15:18\u00a0<DarkKnightCZ>\u00a0has quit  \n15:33\u00a0<OSIMasson>\u00a0has joined #xwiki  \n15:37\u00a0<Lyes>\u00a0has quit  \n15:38\u00a0<Lyes>\u00a0has joined #xwiki  \n15:42\u00a0<msmeria1>\u00a0has quit  \n15:48\u00a0<Lyes>\u00a0has quit  \n15:54\u00a0<Lyes>\u00a0has joined #xwiki  \n15:59\u00a0<Lyes>\u00a0has quit  \n16:01\u00a0<Lyes>\u00a0has joined #xwiki  \n16:07\u00a0<Lyes>\u00a0has quit  \n16:09\u00a0<Lyes>\u00a0has joined #xwiki  \n16:09\u00a0<gdelhumeau>\u00a0mflorea: tmortagne: Enygma`: I am wondering if I can change thet way xwiki.getSkinFile generates an URL  \n16:09\u00a0<gdelhumeau>\u00a0all the details are there: http://jira.xwiki.org/browse/XWIKI-11300?focusedCommentId=83263&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-83263  \n16:09\u00a0<gdelhumeau>\u00a0do you have an opinion?  \n16:11\u00a0<tmortagne>\u00a0I did not knew skin action was supporting http://extensions.xwiki.org/xwiki/bin/skin/xwiki/XWikiOrgCode/Skin/style.css syntax  \n16:11\u00a0<vmassol>\u00a0it doesn't  \n16:11\u00a0<tmortagne>\u00a0so it's not only about getSkinFile then  \n16:11\u00a0<vmassol>\u00a0that's what gdelhumeau is proposing AFAIK  \n16:11\u00a0<vmassol>\u00a0(in option 4)  \n16:12\u00a0<tmortagne>\u00a0gdelhumeau: what is the proposal exactly ?  \n16:12\u00a0<Slashman>\u00a0has joined #xwiki  \n16:13\u00a0<gdelhumeau>\u00a0add the wiki in the URL, just before the space  \n16:13\u00a0<gdelhumeau>\u00a0like this: /skin/wiki/space/page  \n16:13\u00a0<tmortagne>\u00a0so modify skin action behavior and url factory ?  \n16:13\u00a0<gdelhumeau>\u00a0instead of /skin/space/page  \n16:13\u00a0<gdelhumeau>\u00a0yes  \n16:13\u00a0<gdelhumeau>\u00a0could be \u00a0dangerous thought  \n16:13\u00a0<tmortagne>\u00a0yes it could  \n16:13\u00a0<vmassol>\u00a0personally I don't like it too much since we're supposed to find the wiki either in the domain or in the /wiki/<wiki>/ path  \n16:14\u00a0<tmortagne>\u00a0hwo would you make the difference between http://extensions.xwiki.org/xwiki/bin/skin/xwiki/XWikiOrgCode/Skin/style.css and http://extensions.xwiki.org/xwiki/bin/skin/XWikiOrgCode/Skin/style.css  \n16:14\u00a0<gdelhumeau>\u00a0I won't  \n16:14\u00a0<tmortagne>\u00a0or do you propose to always have he wiki part in the URL ?  \n16:14\u00a0<gdelhumeau>\u00a0yes  \n16:15\u00a0<tmortagne>\u00a0so breaking any existing URL that did not go trough URL factory (but I guess we can justify it)  \n16:15\u00a0<gdelhumeau>\u00a0exactly  \n16:16\u00a0<gdelhumeau>\u00a0it has sense only when path-based mode is disabled BTW  \n16:16\u00a0<tmortagne>\u00a0now without talking about browser security and stuff like this I don't like too much the logic of a URL like http://extensions.xwiki.org/xwiki/bin/skin/extensions/XWikiOrgCode/Skin/style.css  \n16:16\u00a0<gdelhumeau>\u00a0with path-based, we would have the wiki twice  \n16:16\u00a0<vmassol>\u00a0even in domain base the wiki is also twie  \n16:16\u00a0<vmassol>\u00a0twice  \n16:17\u00a0<tmortagne>\u00a0gdelhumeau: do you mean that in your proposal skin action does not behave the same if path based is enabled ?  \n16:17\u00a0<gdelhumeau>\u00a0actually I don't like the logic of an url doing: \u00a0http://www.xwiki.org/xwiki/bin/skin/XWikiOrgCode/Skin/style.css?colorTheme=extension:ColorThemes.MyColorTheme  \n16:17\u00a0<gdelhumeau>\u00a0no no, I don't mean that  \n16:17\u00a0<gdelhumeau>\u00a0I only mean that it would look less good in path-based  \n16:18\u00a0<tmortagne>\u00a0it's not really worst  \n16:18\u00a0<tmortagne>\u00a0you have the wiki twice in both cases  \n16:18\u00a0<tmortagne>\u00a0which is the thing I don't like too much  \n16:18\u00a0<gdelhumeau>\u00a0but do you think the URL I have pasted just before is good?  \n16:18\u00a0<tmortagne>\u00a0so all that is just for fonts, right ?  \n16:19\u00a0<gdelhumeau>\u00a0yes tmortagne...  \n16:19\u00a0<tmortagne>\u00a0any idea why browsers have this security about fonts only ?  \n16:20\u00a0<gdelhumeau>\u00a0and AJAX calls too  \n16:20\u00a0<gdelhumeau>\u00a0for AJAX it make sense  \n16:20\u00a0<tmortagne>\u00a0yes for AJAX I can understand  \n16:20\u00a0<gdelhumeau>\u00a0but for fonts... I don't know  \n16:21\u00a0<gdelhumeau>\u00a0http://schock.net/articles/2013/07/03/hosting-web-fonts-on-a-cdn-youre-going-to-need-some-cors/  \n16:22\u00a0<tmortagne>\u00a0gdelhumeau: I don't have anything against http://www.xwiki.org/xwiki/bin/skin/XWikiOrgCode/Skin/style.css?colorTheme=extension:ColorThemes.MyColorTheme  \n16:22\u00a0<gdelhumeau>\u00a0ok  \n16:23\u00a0<tmortagne>\u00a0the URL is pretty clear  \n16:23\u00a0<tmortagne>\u00a0you want the skin located on main wiki with a custom color theme  \n16:23\u00a0<tmortagne>\u00a0and that's the URL for the main wiki  \n16:23\u00a0<gdelhumeau>\u00a0so the other fix is 2) via the webjar action or via a servlet filter  \n16:24\u00a0<tmortagne>\u00a0not sure I see what http://www.xwiki.org/xwiki/bin/skin/XWikiOrgCode/Skin/style.css?colorTheme=extension:ColorThemes.MyColorTheme has to do with a webjar  \n16:28\u00a0<Enygma`>\u00a0gdelhumeau: so in the previous skin, we were able to use in a subwiki a skin defined in the main wiki, because we were not using fonts? And now with flamingo, we need fonts to display icons and hence the problem?  \n16:29\u00a0<OSIMasson>\u00a0has quit  \n16:33\u00a0<vmassol>\u00a0yes  \n16:33\u00a0<vmassol>\u00a0(Enygma`)  \n16:33\u00a0<vmassol>\u00a0fonts have cross-domain protection apparently  \n16:33\u00a0<mflorea>\u00a0gdelhumeau: you could load the font from the \"target\" wiki, so you need to pass the target wiki in the URL  \n16:34\u00a0<mflorea>\u00a0i.e. in the css you have in the main wiki, compute the font URL dynamically, based on a request parameter that specified the target wiki  \n16:35\u00a0<mflorea>\u00a0this way you load the css from the main wiki but the font is loaded through the subwiki that is specified in the URL  \n16:36\u00a0<gdelhumeau>\u00a0the font is loaded by a bootstrap class  \n16:36\u00a0<gdelhumeau>\u00a0but I can override it  \n16:36\u00a0<mflorea>\u00a0you specify the font URL don't you?  \n16:36\u00a0<gdelhumeau>\u00a0in a variable  \n16:37\u00a0<gdelhumeau>\u00a0in a LESS variable  \n16:37\u00a0<gdelhumeau>\u00a0and then the skin is cached  \n16:39\u00a0<Lyes>\u00a0has quit  \n16:40\u00a0<mflorea>\u00a0ok, but if you can overwrite it then you just need a (1) a way to pass the \"target\" wiki on the URL and (2) build the font URL using the specified wiki. One issue I see is that the font is loaded from webjar and you cannot specify the wiki when you get the webjar URL  \n16:41\u00a0<Lyes>\u00a0has joined #xwiki  \n16:41\u00a0<mflorea>\u00a0now, the CSS that loads the font is in the main wiki skin document or is it in the file system?  \n16:43\u00a0<mflorea>\u00a0I mean, is the font loaded directly by XWikiOrgCode.Skin or does it load another css which then loads the font. In other words, the @font-face rule is in XWikiOrgCode.Skin or in the file system?  \n16:43\u00a0<mflorea>\u00a0if it is in the file system then you may be able to load that css from the file system through the subwiki  \n16:44\u00a0<mflorea>\u00a0i.e. the subwiki loads the skin from the main wiki (xwiki:XWikiOrgCode.Skin) but the skin from the main wiki loads the fiile system resources by going through the subwiki (which is specified on the URL)  \n16:52\u00a0<Lyes>\u00a0has quit  \n16:54\u00a0<Lyes>\u00a0has joined #xwiki  \n16:59\u00a0<gdelhumeau>\u00a0mflorea: it is from style.css of XWikiOrgCode.Skin  \n16:59\u00a0<gdelhumeau>\u00a0because it is customized  \n17:02\u00a0<silverdrop>\u00a0has quit  \n17:18\u00a0<vmassol>\u00a0hmmm searchsuggest is not displaying correctly on the main wiki: http://www.xwiki.org/xwiki/bin/view/Main/WebHome  \n17:18\u00a0<vmassol>\u00a0see https://www.evernote.com/shard/s119/sh/1097ded6-c00c-4637-ae27-041175d06c1c/1f025a4e73b156c038db0a9235cee38c  \n17:18\u00a0<OSIMasson>\u00a0has joined #xwiki  \n17:18\u00a0<silverdrop>\u00a0has joined #xwiki  \n17:18\u00a0<vmassol>\u00a0I wonder why  \n17:23\u00a0<gdelhumeau>\u00a0mflorea: I think your solution is complicated, and we will have to do it at each bootstrap upgrade, or for any font loaded this way  \n17:24\u00a0<mflorea>\u00a0gdelhumeau: do you have to overwrite the font-face in XWikiOrgCode.Skin?  \n17:24\u00a0<gdelhumeau>\u00a0I don't understand  \n17:24\u00a0<mflorea>\u00a0why do you load the font directly in XWikiOrgCode.Skin?  \n17:25\u00a0<gdelhumeau>\u00a0it does not. It does: $services.lesscss.compileSkinFile('style.less.vm')  \n17:25\u00a0<gdelhumeau>\u00a0which load the font  \n17:26\u00a0<gdelhumeau>\u00a0it returns a CSS code, and that CSS code loads the font  \n17:26\u00a0<gdelhumeau>\u00a0so for the browser, it is \u00a0XWikiOrgCode.Skin which loads the font  \n17:32\u00a0<vmassol>\u00a0mflorea: would you know how to debug the problem of searchsuggest on http://extensions.xwiki.org/xwiki/bin/view/Main/WebHome ?  \n17:32\u00a0<mflorea>\u00a0what problem?  \n17:32\u00a0<vmassol>\u00a0try it  \n17:32\u00a0<vmassol>\u00a0it doesn't open for me  \n17:32\u00a0<vmassol>\u00a0just some white horizontal bar  \n17:33\u00a0<mflorea>\u00a0yes, it never worked since we have the search code on the main wiki  \n17:33\u00a0<vmassol>\u00a0it does work for test.xwiki.org though  \n17:33\u00a0<vmassol>\u00a0the searhc code is on e.x.o too  \n17:33\u00a0<vmassol>\u00a0there are 2 subwikis which have the search code: exo and test  \n17:39\u00a0<xwikibot>\u00a0has joined #xwiki  \n17:43\u00a0<mflorea>\u00a0vmassol: check if there are any search suggest sources configured. I cannot checked right now because xwiki.org is unresponsive  \n17:44\u00a0<vmassol>\u00a0yeah ok, I'll check once it restarts or becomes responsive , thanks  \n17:45\u00a0<vmassol>\u00a0mflorea: looks ok: http://extensions.xwiki.org/xwiki/bin/edit/XWiki/SearchSuggestConfig?editor=object  \n17:45\u00a0<vmassol>\u00a014 sources  \n17:46\u00a0<vmassol>\u00a0btw  \n17:46\u00a0<vmassol>\u00a0objects 14 and 15 looks the same  \n17:46\u00a0<vmassol>\u00a0platform.search.suggestSourceWikis  \n17:46\u00a0<vmassol>\u00a0ah no  \n17:46\u00a0<vmassol>\u00a0one is for lucene and the other for solr  \n17:46\u00a0<vmassol>\u00a0they just have the same name  \n17:59\u00a0<tmortagne>\u00a0has quit  \n18:00\u00a0<mflorea>\u00a0vmassol: http://extensions.xwiki.org/xwiki/bin/skin/resources/uicomponents/search/searchSuggest.js?minify=false  \n18:00\u00a0<mflorea>\u00a0var sources = [];  \n18:00\u00a0<mflorea>\u00a0no sources for some reason  \n18:00\u00a0<cjd>\u00a0has quit  \n18:01\u00a0<mflorea>\u00a0the real version http://extensions.xwiki.org/xwiki/resources/uicomponents/search/searchSuggest.js  \n18:01\u00a0<mflorea>\u00a0#set ($searchSuggestConfig = $xwiki.getDocument('XWiki.SearchSuggestConfig'))  \n18:01\u00a0<mflorea>\u00a0#foreach ($source in $searchSuggestConfig.getObjects('XWiki.SearchSuggestSourceClass'))  \n18:04\u00a0<mflorea>\u00a0vmassol: http://extensions.xwiki.org/xwiki/bin/admin/XWiki/XWikiPreferences?editor=globaladmin&section=Search  \n18:04\u00a0<mflorea>\u00a0database search is selected  \n18:04\u00a0<mflorea>\u00a0and it's the only option  \n18:04\u00a0<mflorea>\u00a0so something is missing  \n18:04\u00a0<vmassol>\u00a0indeed  \n18:05\u00a0<mflorea>\u00a0well, search application is installed, but not the solr/lucene apps  \n18:05\u00a0<Lyes>\u00a0has quit  \n18:06\u00a0<vmassol>\u00a0ok thanks I'll add them and create a jira issue  \n18:07\u00a0<vmassol>\u00a0hmm  \n18:07\u00a0<vmassol>\u00a0Solr searh app is installed  \n18:08\u00a0<vmassol>\u00a0hmhm no  \n18:08\u00a0<vmassol>\u00a0something is strange  \n18:08\u00a0<vmassol>\u00a0checking something  \n18:09\u00a0<mflorea>\u00a0I don't see it  \n18:09\u00a0<vmassol>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/Solr+Search+Application  \n18:09\u00a0<mflorea>\u00a0and afaik, we decided to use the search from the main wiki so it's kind of normal that solr is not installed on subwikis  \n18:09\u00a0<vmassol>\u00a0latest version is 6.1  \n18:09\u00a0<vmassol>\u00a0strange  \n18:09\u00a0<vmassol>\u00a0mflorea: no  \n18:09\u00a0<vmassol>\u00a0that's true except for 3 wikis:  \n18:09\u00a0<vmassol>\u00a0exo, test and design  \n18:10\u00a0<mflorea>\u00a0ok  \n18:10\u00a0<mflorea>\u00a0indeed, solr search app extension page is not up to date  \n18:10\u00a0<vmassol>\u00a0checking id  \n18:11\u00a0<vmassol>\u00a0id is ok  \n18:11\u00a0<vmassol>\u00a0now it's ok, very strange  \n18:11\u00a0<vmassol>\u00a0I don't understand why the scheduler job didn't update it  \n18:13\u00a0<vmassol>\u00a0works now, thanks for your help mflorea  \n18:13\u00a0<mflorea>\u00a0np  \n18:15\u00a0<vmassol>\u00a0created http://jira.xwiki.org/browse/XWIKI-11312  \n18:20\u00a0<woshilapin>\u00a0has quit  \n18:20\u00a0<vmassol>\u00a0has quit  \n18:24\u00a0<evalica>\u00a0has quit  \n18:26\u00a0<Enygma`>\u00a0has quit  \n18:29\u00a0<gdelhumeau>\u00a0has quit  \n18:44\u00a0<KermitTheFragger>\u00a0has quit  \n19:02\u00a0<lucaa>\u00a0has quit  \n19:03\u00a0<Slashman>\u00a0has quit  \n19:10\u00a0<OSIMasson>\u00a0has quit  \n19:12\u00a0<mflorea>\u00a0has quit  \n19:31\u00a0<vmassol>\u00a0has joined #xwiki  \n19:37\u00a0<OSIMasson>\u00a0has joined #xwiki  \n20:09\u00a0<OSIMasson>\u00a0has quit  \n20:09\u00a0<OSIMasson>\u00a0has joined #xwiki  \n20:15\u00a0<OSIMasson>\u00a0has quit  \n20:22\u00a0<abusenius>\u00a0has joined #xwiki  \n21:14\u00a0<lucaa>\u00a0has joined #xwiki  \n21:27\u00a0<silverdrop>\u00a0has quit  \n21:37\u00a0<vmassol>\u00a0has quit  \n22:52\u00a0<lucaa>\u00a0has quit  \n23:59\u00a0<lucaa>\u00a0has joined #xwiki\n"}