{"id": "dev:IRC.xwikiArchive20131122", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20131122", "title": "IRC Archive for channel #xwiki on 22 November 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<vmassol>\u00a0has joined #xwiki  \n00:10\u00a0<vmassol>\u00a0has quit  \n00:36\u00a0<vmassol>\u00a0has joined #xwiki  \n00:40\u00a0<vmassol>\u00a0has quit  \n01:06\u00a0<vmassol>\u00a0has joined #xwiki  \n01:09\u00a0<sdumitriu1>\u00a0has quit  \n01:17\u00a0<mflorea>\u00a0has quit  \n02:13\u00a0<vmassol>\u00a0has quit  \n03:07\u00a0<vmassol>\u00a0has joined #xwiki  \n03:12\u00a0<vmassol>\u00a0has quit  \n04:08\u00a0<vmassol>\u00a0has joined #xwiki  \n04:12\u00a0<vmassol>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n05:09\u00a0<vmassol>\u00a0has joined #xwiki  \n05:14\u00a0<vmassol>\u00a0has quit  \n06:03\u00a0<Denis>\u00a0has quit  \n06:10\u00a0<vmassol>\u00a0has joined #xwiki  \n06:14\u00a0<vmassol>\u00a0has quit  \n06:35\u00a0<xwikibot>\u00a0has joined #xwiki  \n07:10\u00a0<vmassol>\u00a0has joined #xwiki  \n07:15\u00a0<vmassol>\u00a0has quit  \n07:53\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:06\u00a0<vmassol>\u00a0has joined #xwiki  \n08:11\u00a0<Kaisen>\u00a0has joined #xwiki  \n08:25\u00a0<Denis>\u00a0has joined #xwiki  \n08:47\u00a0<mflorea>\u00a0has joined #xwiki  \n09:00\u00a0<cjd>\u00a0has joined #xwiki  \n09:05\u00a0<evalica>\u00a0has joined #xwiki  \n09:22\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:39\u00a0<lucaa>\u00a0has joined #xwiki  \n09:51\u00a0<sburjan>\u00a0has joined #xwiki  \n10:06\u00a0<mflorea1>\u00a0has joined #xwiki  \n10:06\u00a0<mflorea>\u00a0has quit  \n10:23\u00a0<msmeria>\u00a0has joined #xwiki  \n10:29\u00a0<j-simard>\u00a0has joined #xwiki  \n10:37\u00a0<sburjan`>\u00a0has quit  \n10:37\u00a0<sburjan`>\u00a0has joined #xwiki  \n10:40\u00a0<lucaa>\u00a0has quit  \n10:42\u00a0<camil7>\u00a0has joined #xwiki  \n10:54\u00a0<lucaa>\u00a0has joined #xwiki  \n11:01\u00a0<Slashman>\u00a0has joined #xwiki  \n11:12\u00a0<sburjan>\u00a0has quit  \n11:26\u00a0<sburjan>\u00a0has joined #xwiki  \n11:38\u00a0<Kaisen>\u00a0has quit  \n11:41\u00a0<cjd>\u00a0Does anyone know if the extension manager triggers special events when installing an extension rather than the ordenary DocumentCreateEvent ?  \n11:43\u00a0<mflorea1>\u00a0guys, I just replied to \"[Proposal] Move xwiki-platform-wiki-manager and xwiki-platform-workspaces in contrib\" on devs. We have a serious issue. vmassol, tmortagne we need to fix this for RC1  \n11:43\u00a0<Kaisen>\u00a0has joined #xwiki  \n11:44\u00a0<tmortagne>\u00a0mflorea1: the main issue is that when extension has a dependency it should declare it, if search was declaring a dependency on wikimanager it would end up in XE  \n11:44\u00a0<vmassol>\u00a0in meeting  \n11:45\u00a0<Kaisen>\u00a0Hello, I have a short question regarding customizing the xwiki. I want to have a bigger logo on the top. I think the standard hight of the header is ~80px. I want to increase it to 160px.  \n11:45\u00a0<Kaisen>\u00a0I looked to the colibri.css but doesn't find the point  \n11:45\u00a0<tmortagne>\u00a0mflorea1: as I said in the thread wikimanager is still in platform because it's not fully covered so all you have to do is declare the proper dependency but it's not XE job anymore  \n11:47\u00a0<mflorea1>\u00a0I'm fine with that, but I think this should have been done before removing the dependency (i.e. search for where the API is used in the platform). There are lots of places where we don't declare all dependencies correctly. We cannot remove a jar from XE and say it was their fault they didn't declare the dependency.  \n11:47\u00a0<tmortagne>\u00a0there is no need to deprecate anything here IMO, if an extension need that service it's supposed to declare it as dependency so it will be installed with it  \n11:48\u00a0<mflorea1>\u00a0deprecating would trigger warning logs and would help moving to the new API  \n11:48\u00a0<tmortagne>\u00a0mflorea1: Guillaume removed the dependency because he tough it was not used  \n11:51\u00a0<tmortagne>\u00a0I did not know you were using it either, since wikimanager used to not be part of XE, I would add that to properly test an extensions in platform you usually have to set the right dependencies, wikimanager is not part of mandatory extensions in packager maven plugin  \n11:53\u00a0<mflorea1>\u00a0I started using it after we moved to virtual=on by default, in order to display the wiki pretty name. We don't have extension functional tests for multiwiki so that wasn't an issue.  \n11:55\u00a0<mflorea1>\u00a0it is used in platform-web, in extension.vm and menuview.vm, and we don't add dependencies to platform-web, all deps are on enterprise-web, so the dep on wikimanager API needs to stay or those places where it is used have to be updated  \n11:55\u00a0<tmortagne>\u00a0keeping a whole useless module in XE forever were all the extension have to do is properly declare it as dependency is a huge pain especially since not declaring it as dependency only work in 5.2  \n11:56\u00a0<tmortagne>\u00a0Guillaume should have modified those  \n11:57\u00a0<cjd>\u00a0hmm maybe he did and I'm out of date  \n11:57\u00a0<tmortagne>\u00a0mflorea1: the fact that platform-web use wikimanager API is wrong and I'm sure Guillaume just forgot  \n11:59\u00a0<tmortagne>\u00a0btw the thread where you sent your mail does not have anything to do with removing wikimager from XE, this was already supposed to be a fact, the thread prerequisite is that wikimanager is useless  \n12:07\u00a0<Kaisen>\u00a0has quit  \n12:17\u00a0<cjd>\u00a0tmortagne: is a special event fired when an extension is installed? I'm listening for DocumentUpdatedEvent, DocumentCreatedEvent, DocumentDeletedEvent, and XARImportedEvent and I'm missing the addition of an extension via the EM  \n12:18\u00a0<tmortagne>\u00a0cjd: ExtensionInstalledEvent  \n12:18\u00a0<cjd>\u00a0thanks  \n12:18\u00a0<tmortagne>\u00a0why do you need to listen to this ?  \n12:18\u00a0<tmortagne>\u00a0it's a pretty rare need  \n12:19\u00a0<tmortagne>\u00a0(cjd: )  \n12:20\u00a0<cjd>\u00a0because I need to rescan for objects of Viewer.ViewerClass type and build a list  \n12:20\u00a0<Kaisen>\u00a0has joined #xwiki  \n12:20\u00a0<cjd>\u00a0and when a document is added/removed/altered, I need to check that there are no changed  \n12:20\u00a0<tmortagne>\u00a0cjd: listening to document event should be enough  \n12:20\u00a0<cjd>\u00a0hmm  \n12:20\u00a0<cjd>\u00a0I'm listening to it and not getting the event  \n12:21\u00a0<cjd>\u00a0but when I resave the document, my list is updated  \n12:21\u00a0<tmortagne>\u00a0I can assure you that installing an extension or importing a XAR properly generate document events  \n12:21\u00a0<tmortagne>\u00a0otherwise pretty much nothing would work  \n12:21\u00a0<cjd>\u00a0ok  \n12:21\u00a0<cjd>\u00a0I'll add some debugging to my script  \n12:21\u00a0<cjd>\u00a0probably my fault  \n12:21\u00a0<tmortagne>\u00a0all wiki components like wiki macro, ui extension etc are only listening to document events  \n12:22\u00a0<tmortagne>\u00a0the only thing that loose detailed event is deleting a wiki  \n12:22\u00a0<tmortagne>\u00a0(because we just delete the DB)  \n12:34\u00a0<cjd>\u00a0apparently there's a sort of race condition, when you install documents using the EM, you get the event before the document is queryable in the database  \n12:35\u00a0<cjd>\u00a0whereas in the case of a xar import, it seems to be queryable right away  \n12:35\u00a0<cjd>\u00a0also this is kind of a strange bit of log:  \n12:35\u00a0<cjd>\u00a0Event for document Viewers.pdf\\_js which has no Viewers.ViewersClass obj  \n12:35\u00a0<cjd>\u00a0Event for document Viewers.pdf\\_js which has Viewers.ViewersClass obj  \n12:36\u00a0<cjd>\u00a0I shoudl have logged the event type, perhaps it begins with a DocumentCreatedEvent and then issues a DocumentUpdatedEvent?  \n12:45\u00a0<camil7>\u00a0Kaisen: I think you can just upload a logo big enough and the header should make room - at least in xwiki 5.x  \n12:54\u00a0<cjd>\u00a0Event for document Viewers.pdf\\_js which has no Viewers.ViewersClass objorg.xwiki.bridge.event.DocumentCreatedEvent  \n12:54\u00a0<cjd>\u00a0Event for document Viewers.pdf\\_js which has Viewers.ViewersClass obj org.xwiki.bridge.event.DocumentUpdatedEvent  \n12:54\u00a0<cjd>\u00a0not entirely sure how EM works but that seems to explain it a little  \n13:02\u00a0<tmortagne>\u00a0cjd: this is not possible, you get the event after the document is saved in database  \n13:02\u00a0<tmortagne>\u00a0EM use the exact same API than anything else  \n13:02\u00a0<tmortagne>\u00a0and your listener get called in the same thread than the one that saved the document so I don't see how you could have a race condition  \n13:03\u00a0<tmortagne>\u00a0as I said all wiki document based component work well with EM  \n13:04\u00a0<tmortagne>\u00a0btw you get the document as event parameter so I really don't see why you would request it anyway  \n13:31\u00a0<evalica1>\u00a0has joined #xwiki  \n13:31\u00a0<evalica>\u00a0has quit  \n13:42\u00a0<evalica1>\u00a0is now known as <evalica>  \n13:44\u00a0<mflorea1>\u00a0has quit  \n14:11\u00a0<tmortagne>\u00a0sburjan: you attached diff of current vs new in http://jira.xwiki.org/browse/XE-1347  \n14:11\u00a0<tmortagne>\u00a0what I suggested you was to indicate the diff between previous and current  \n14:11\u00a0<sburjan>\u00a0ok, redoing, sorry  \n14:12\u00a0<tmortagne>\u00a0sburjan: the whole point is to understand what changed locally  \n14:12\u00a0<tmortagne>\u00a0so bwteen the standard version (previous) and the database version (current)  \n14:13\u00a0<j-simard>\u00a0has quit  \n14:13\u00a0<tmortagne>\u00a0still StatsConflict9.png is weird  \n14:14\u00a0<tmortagne>\u00a0sburjan: any idea if all those pages have attachments ?  \n14:14\u00a0<sburjan>\u00a0I don't know  \n14:15\u00a0<sburjan>\u00a0I could check. Do you want me to check bofore migrating, right ?  \n14:15\u00a0<tmortagne>\u00a0was just in case you know, just searching what is special about the pages of this space  \n14:16\u00a0<sburjan>\u00a0I am reporting another issue now, and after I wil lredo the creens and attach them  \n14:16\u00a0<tmortagne>\u00a0what is weird is that gd tried that ugrade and did not had it  \n14:16\u00a0<tmortagne>\u00a0sburjan: no need to do 10 screenshot  \n14:16\u00a0<tmortagne>\u00a0a few is enough  \n14:17\u00a0<sburjan>\u00a0I'll go 5 then  \n14:17\u00a0<tmortagne>\u00a0sburjan: important thing is to get the different use case, if they all fail for the same reason no need to have information for all of them  \n14:18\u00a0<tmortagne>\u00a0and given the fact that it's specific to that space there is probably one main reason  \n14:18\u00a0<sburjan>\u00a0I agree  \n14:34\u00a0<mflorea>\u00a0has joined #xwiki  \n14:52\u00a0<sburjan>\u00a0tmortagne: funny stuff. I don't have \"Previous\". All I have is \"Current\" and \"New\"  \n14:53\u00a0<tmortagne>\u00a0sburjan: that's the first thing you should have said  \n14:53\u00a0<tmortagne>\u00a0that mean EM could not find those pages in previously installed extensions  \n14:53\u00a0<sburjan>\u00a0I see  \n14:53\u00a0<tmortagne>\u00a0so that's probably the issue for all of them  \n14:53\u00a0<sburjan>\u00a0so no moew screenshots then :)  \n14:53\u00a0<sburjan>\u00a0\\*more  \n14:54\u00a0<tmortagne>\u00a0showing a diff when there is no merge is useless  \n14:54\u00a0<tmortagne>\u00a0sounds like another packaging issue but this one does not make much sense  \n14:55\u00a0<tmortagne>\u00a0it's not like stats was not part of XE before  \n14:57\u00a0<sburjan>\u00a0yes, it's odd  \n14:57\u00a0<sburjan>\u00a0well I was on XEM 4.1.4, but XEM includes XE  \n14:57\u00a0<sburjan>\u00a0so same thing  \n15:16\u00a0<tmortagne>\u00a0sburjan: don't forget to clearly indicate in the issue that the reason for the conflict is that there is no previous version  \n15:29\u00a0<evalica>\u00a0has quit  \n15:31\u00a0<sburjan>\u00a0tmortagne: done  \n15:41\u00a0<xwikibot>\u00a0has quit  \n15:42\u00a0<xwikibot>\u00a0has joined #xwiki  \n15:46\u00a0<xwikibot>\u00a0has joined #xwiki  \n15:55\u00a0<cjd>\u00a0tmortagne: I found the source of my troubles: http://jira.xwiki.org/browse/XWIKI-9718  \n15:55\u00a0<cjd>\u00a0same behavior for import or traditional attachment upload  \n15:56\u00a0<cjd>\u00a0or EM import  \n15:59\u00a0<tmortagne>\u00a0I'm really surprised, they are supposed to use XWiki#saveDocument that is supposed to save the attachment before sending any event  \n16:00\u00a0<cjd>\u00a0I took a quick look at it and I'm going to take a wild guess and think it's probably something todo with multiple hibernate sessions / db connections  \n16:01\u00a0<cjd>\u00a0I repeated it a few times and wiped the wiki between tries so I'm fairly certain this one is for real  \n16:15\u00a0<GuillaumeF>\u00a0has joined #xwiki  \n16:15\u00a0<msmeria>\u00a0has quit  \n16:22\u00a0<GuillaumeF>\u00a0has quit  \n16:46\u00a0<vmassol>\u00a0cjd: you also created orphans, fixing  \n16:48\u00a0<vmassol>\u00a0cjd: it would be nice to list all available wbeviewers extensions from http://extensions.xwiki.org/xwiki/bin/view/Extension/WebViewers  \n16:48\u00a0<vmassol>\u00a0and add screenshots a bit everywhere :)  \n16:48\u00a0<vmassol>\u00a0I'm eager to see those in action  \n16:57\u00a0<sburjan>\u00a0has quit  \n16:58\u00a0<Denis>\u00a0has quit  \n17:03\u00a0<cjd>\u00a0vmassol: thanks, I'll add the webviewer page as a parent  \n17:03\u00a0<Kaisen>\u00a0has quit  \n17:03\u00a0<cjd>\u00a0yeah, I think these are going to be really cool when they mature properly  \n17:04\u00a0<cjd>\u00a0it's all a little ducttapey at the moment :)  \n17:10\u00a0<vrachieru>\u00a0has joined #xwiki  \n17:22\u00a0<cjd>\u00a0has quit  \n17:33\u00a0<camil7>\u00a0has quit  \n18:27\u00a0<tmortagne>\u00a0has quit  \n18:30\u00a0<lucaa>\u00a0has quit  \n18:33\u00a0<KermitTheFragger>\u00a0has quit  \n18:39\u00a0<vrachieru>\u00a0has quit  \n18:57\u00a0<mflorea>\u00a0has quit  \n19:02\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n19:03\u00a0<Slashman\\_>\u00a0has joined #xwiki  \n19:06\u00a0<Slashman>\u00a0has quit  \n19:25\u00a0<lucaa>\u00a0has joined #xwiki  \n19:27\u00a0<Slashman\\_>\u00a0has quit  \n19:39\u00a0<lucaa>\u00a0has quit  \n19:42\u00a0<lucaa>\u00a0has joined #xwiki  \n20:37\u00a0<abusenius>\u00a0has joined #xwiki  \n20:46\u00a0<lucaa>\u00a0has quit  \n21:36\u00a0<vrachieru>\u00a0has joined #xwiki  \n21:48\u00a0<vrachieru>\u00a0has quit  \n22:01\u00a0<j-simard>\u00a0has joined #xwiki  \n22:04\u00a0<vmassol>\u00a0has quit  \n22:07\u00a0<cjd>\u00a0has joined #xwiki  \n22:08\u00a0<vmassol>\u00a0has joined #xwiki  \n22:15\u00a0<cjd>\u00a0has quit  \n22:29\u00a0<j-simard>\u00a0has quit  \n22:34\u00a0<cjd>\u00a0has joined #xwiki  \n23:33\u00a0<cjd>\u00a0has quit\n"}