{"id": "dev:IRC.xwikiArchive20101026", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20101026", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nrrodriguez left at 00:09 (Quit: rrodriguez  \njvelociter left at 00:31 (Quit: jvelociter  \nlucaa joined #xwiki at 00:36  \njvdrean left at 00:54 (Quit: Leaving.  \nlucaa left at 01:00 (Ping timeout: 250 seconds  \nlucaa joined #xwiki at 01:01  \nsdumitriu left at 01:01 (Quit: Leaving.  \nlucaa1 joined #xwiki at 01:06  \nlucaa left at 01:06 (Quit: Leaving.  \nlucaa1 left at 01:11 (Ping timeout: 252 seconds  \nabusenius left at 02:38 (Read error: Operation timed out  \nvenkatesh joined #xwiki at 04:28  \nvenkatesh left at 04:29 (Remote host closed the connection  \nvenkatesh joined #xwiki at 04:31  \nvenkatesh left at 05:05 (Ping timeout: 240 seconds  \nvenkatesh joined #xwiki at 05:46  \nmflorea joined #xwiki at 07:04  \nDenis left at 07:04 (Ping timeout: 276 seconds  \nDenis joined #xwiki at 07:09  \nasrfel joined #xwiki at 07:33  \nrrodriguez joined #xwiki at 07:37  \nsdumitriu joined #xwiki at 07:44  \nStulle joined #xwiki at 08:25  \nsdumitriu left at 08:38 (Ping timeout: 240 seconds  \nrrodriguez left at 08:44 (Quit: rrodriguez  \nvmassol joined #xwiki at 08:56  \njvdrean joined #xwiki at 08:59  \nvmassol - (09:03): mflorea: good morning  \nsilviar joined #xwiki at 09:09  \njvdrean left at 09:11 (Quit: Leaving.  \nmflorea - (09:11): vmassol: good morning  \nvmassol - (09:12): mflorea: I'm proposing to only execute the macro transformation in the wysiwyg  \nvmassol - (09:12): for the moment  \nvmassol - (09:12): (so that other transformations will work in view mode and won't be modified by the wysiwyg)  \nvmassol - (09:12): are you ok with this?  \nmflorea - (09:13): yes, because right now only macro transformations are protected in WYSIWYG mode  \nvmassol - (09:13): yes  \nvmassol - (09:13): that's till we have generic markers  \nvmassol - (09:13): the only place to modify is DefaultHTMLConverter right?  \nmflorea - (09:13): yep  \nsilviar left at 09:13 (Client Quit  \nmflorea - (09:13): and AnnodatedXHTMLRenderer I think  \nmflorea - (09:14): wait a sec  \narkub joined #xwiki at 09:16  \nmflorea - (09:18): so, the WYSIWYG editor gets annotated XHTML in two ways:  \nmflorea - (09:18): (1) $tdoc.getRenderedContent($request.source, $tdoc.getSyntax().toIdString(), 'annotatedxhtml/1.0'))  \nmflorea - (09:18): (2) $services.wysiwyg.parseAndRender($request.html, $tdoc.getSyntax().toIdString()))  \nmflorea - (09:18): For (1) the AnnotatedXHTMLRenderer must be updated I think, and for (2) DefaultHTMLConverter (both toHTML and parserAndRender methods)  \nvmassol - (09:19): I don't understand about (1)  \nvmassol - (09:19): a renderer doesn't modify the XDOM  \nsilviar joined #xwiki at 09:19  \nmflorea - (09:20): ok, but you have to meke sure that getRenderedContent doesn't execute transformations for hint 'annotatedxhtml/1.0'  \nmflorea - (09:21): I mean, execute only macro transformations  \nvmassol - (09:21): hmmm  \nvmassol - (09:21): ok I'll check  \nmflorea - (09:25): I see that XWikiDocument#performSyntaxConversion(XDOM content, Syntax targetSyntax, TransformationContext txContext) executes transformations. You might have to check the targetSyntax, but it's a bit ugly..  \nmflorea - (09:29): vmassol: I think it's better to replace the call to getRenderedContent with a call to DefaultHTMLConverter#toHTML in wysiwyginput.vm  \nvmassol - (09:29): mflorea: maybe I could let you do all this if you have some time this mornig? :) Otherwise I'll do it  \nmflorea - (09:29): this way you have to change only DefaultHTMLConverter, which is used only by the editor  \nmflorea - (09:29): I can do it, but how do I execute only macro transfromations?  \nvmassol - (09:29): mflorea: you just lookup the Macro tx  \nvmassol - (09:30): @requirement(\"macro\")  \nvmassol - (09:30): private Transformation macroTransformation  \nvmassol - (09:30): and then macroTransformation.perform....  \nmflorea - (09:30): ok, and drop TransformationContext and transformation manager?  \nvmassol - (09:30): yes  \nvmassol - (09:31): just the manager I think  \nvmassol - (09:31): you'll still need the context  \nmflorea - (09:31): indeed  \nvmassol - (09:31): the manager was not doing anything  \nvmassol - (09:31): just looping over tx  \nmflorea - (09:31): ok, good  \nmflorea - (09:31): I'll handle the change  \nvmassol - (09:31): ok cool thanks  \nmflorea - (09:31): np ;)  \nvmassol - (09:31): jira issue is http://jira.xwiki.org/jira/browse/XWIKI-5616  \nevalica joined #xwiki at 09:35  \njvelociter joined #xwiki at 09:42  \nflorinciu joined #xwiki at 09:44  \nvmassol - (09:47): cjdelisle: good morning. On http://code.xwiki.org/xwiki/bin/view/Modules/CaptchaModule is the following correct:  \nvmassol - (09:47): \"The captcha images are served from yourwiki.com/xwiki/bin/imagecaptcha//\u00a0\"  \nvmassol - (09:48): I'm referring to the double slash at the end  \ncjdelisle - (09:48): That is correct. It's because of the url interpreter.  \ncjdelisle - (09:49): It demands a Space and Document name even uf they are '' and ''  \ncjdelisle - (09:50): For a captcha there is no reason I can think of to include the space and document name so they are just an added difficulty.  \nvmassol - (09:50): I don't understand but don't worry, I was just checking if the doc was correct :)  \nvmassol - (09:50): (not planning to understand it now)  \ncjdelisle - (09:51): It's just that XWikiAction and friends choke if there are not the right number of //  \nvmassol - (09:54): ok I understand now  \nvmassol - (09:55): thanks  \nsilviar left at 09:56 (Quit: Leaving.  \nsilviar joined #xwiki at 10:00  \njvdrean joined #xwiki at 10:25  \nbaur joined #xwiki at 10:25  \nbaur - (10:26): cjdelisle hi  \nbaur - (10:26): if I create my own xwikiUsers document, will it override the existing xwikiUsers document?  \ncjdelisle - (10:27): Do you mean create a document in the XWiki space and add an XWikiUsers object to it?  \nbaur - (10:28): no, i did not do it yet  \narkub left at 10:28 (Ping timeout: 265 seconds  \nbaur - (10:29): you gave me this code yesturday: \u00a0\u00a0\u00a0\u00a0<+cjdelisle> #set($myUser = $xwiki.getDocument(\"XWiki.$myUserName\")) [15:48] <+cjdelisle> #set($myUserObj = $myUser.getObject('XWiki.XWikiUsers')) [15:48] <+cjdelisle> $myUserObject.set('firstName', 'John') [15:48] <+cjdelisle> etc.  \ncjdelisle - (10:30): Yup, it would look something like that, you'll have to read the api and work out the detales.  \nbaur - (10:30): the API does not give the source code for the createUser() method  \nbaur - (10:31): it just says that this method creates the user  \nEnygma` joined #xwiki at 10:31  \ncjdelisle - (10:31): vmassol, the links to the bindings from here are broken (I think this happened when you uploaded the clirr reports) http://platform.xwiki.org/xwiki/bin/view/DevGuide/Scripting  \ncjdelisle - (10:31): Do you mind if I run the hudson site job again?  \nmarta\\_ joined #xwiki at 10:34  \nlucaa joined #xwiki at 10:43  \nvmassol - (10:43): cjdelisle: I tihnk we should point them to the javadoc which is part of the API page  \nvmassol - (10:44): (till we have that site job running)  \nvmassol - (10:44): yes you can try to run the site mojo  \nvmassol - (10:44): I actually remove the site generation files on the server  \nvmassol - (10:44): since they were old and I didn't remember we had a link to them  \ncjdelisle - (10:44): I got it running. It took so long to run that I usually ran manually it at each release.  \nvmassol - (10:44): s/remove/removed/  \nvmassol - (10:44): make sure you don't delete the clover directory  \ncjdelisle - (10:45): I don't know what the site plugin will do, probably will replace the entire /site/ directory, that's why I asked you.  \nvmassol - (10:46): make a backup of the clover dir on the server first  \ncjdelisle - (10:46): I'll need ssh access I think.  \nvmassol - (10:46): oh I thought you had it  \nvmassol - (10:46): I can do the backup quickly  \ncjdelisle - (10:47): Ok, if you can do that, I'll run the site plugin (1 button release ;) )  \ncjdelisle - (10:48): What does it run clover? is it something we can easily make a hudson job for?  \nvmassol - (10:48): cjdelisle: re clover I wanted to do it but haven't done it yet (it's not that easy to do)  \nvmassol - (10:48): ok clover backup done  \nvmassol - (10:48): you can press the red button!  \nvmassol - (10:49): (you might not have the right anyway)  \ncjdelisle - (10:49): hehe. I wish all releases were like that :)  \nvmassol - (10:49): s/right/rights/  \nvmassol - (10:49): if you cannot ssh then you probably don't have the rights  \ncjdelisle - (10:49): You gave me powers on hudson, just no ssh.  \nvmassol - (10:50): ah yes maybe hudson has the rights  \nvmassol - (10:50): I thoguth you wanted to deploy from your machine  \nvmassol - (10:50): (and yes we can give you access to maven.xwiki.org if you need it)  \ncjdelisle - (10:52): hmm this will tie up agent2 for 4 hours. maybe I should wait until tonight.  \nsdumitriu joined #xwiki at 10:52  \ncjdelisle - (10:54): I'll try it locally instead.  \nvmassol - (10:54): 4 hours!  \nvmassol - (10:54): are you running clover reports too?  \ncjdelisle - (10:55): That's javadoc for the core.  \ncjdelisle - (10:57): It does seem a bit long thinking about it. If it starts i/o thrashing I'll know about it and if it's much faster here then I'll know something's wrong.  \nvmassol - (11:02): guys I've just added a basic reference guide for the configuration modue here: http://code.xwiki.org/xwiki/bin/view/Modules/ConfigurationModule  \nvmassol - (11:02): would be great if you could have a cursory look and tell me 1) if it's understandable and 2) if it's missing anything  \nvmassol - (11:02): thanks  \ncjdelisle - (11:08): ``ArtifactNotFoundException: The skin does not exist: Failure to find org.apache.maven.skins:maven-default-skin:jar:1.1-SNAPSHOT in https://repository.jboss.org/nexus/content/groups/public/ ''  \nvmassol - (11:10): ah yes it's missing interpolation and list/properties definitions  \nmflorea left at 11:11 (Quit: Leaving.  \nasrfel left at 11:11 (Quit: Leaving.  \nflaviusolaru joined #xwiki at 11:15  \nabusenius joined #xwiki at 11:16  \nflaviusolaru left at 11:19 (Client Quit  \njvelociter left at 11:22 (Read error: Connection reset by peer  \nabusenius left at 11:22 (Ping timeout: 265 seconds  \njvelociter joined #xwiki at 11:23  \nsilviar1 joined #xwiki at 11:25  \nEnygma` left at 11:26 (Ping timeout: 252 seconds  \nsilviar left at 11:26 (Ping timeout: 252 seconds  \nEnygma` joined #xwiki at 11:27  \nvmassol - (11:27): jvelociter: you got it! :)  \nvmassol - (11:27): took longer than you planned I'm sure\u2026.  \njvelociter - (11:29): hehe  \njvelociter - (11:31): but now I can promote ALL projects out of sandbox  \njvelociter - (11:31): :D  \nvmassol - (11:31): hehe  \ncjdelisle - (11:33): lol  \nflaviusolaru joined #xwiki at 11:34  \nlucaa - (11:40): jvelociter: isn't that a slightly illegally closed vote? (http://dev.xwiki.org/xwiki/bin/view/Community/Committership#HVoting ) :)  \njvelociter - (11:43): damn it  \njvelociter - (11:43): :)  \nlucaa - (11:44): shame shame shame on you! :)  \narkub joined #xwiki at 11:47  \ncjdelisle - (11:49): hmm Total time: 8 minutes 12 seconds  \ncjdelisle - (11:49): a far cry from hudson's 4 hour number.  \ncjdelisle - (11:53): I ran mvn2 site:stage \u00a0\u00a0hudson runs site:deploy  \ncjdelisle - (11:54): I don't think scp is taking too much time, IIRC generating each javadoc page took ~5 seconds.  \nmflorea joined #xwiki at 12:05  \nbaur left at 12:16 (Quit: Page closed  \nflaviusolaru left at 12:21 (Read error: Connection reset by peer  \nasrfel joined #xwiki at 12:21  \nflaviusolaru joined #xwiki at 12:22  \nasrfel left at 12:24 (Client Quit  \nasrfel joined #xwiki at 12:24  \nsdumitriu left at 12:25 (Read error: Connection reset by peer  \nflorinciu1 joined #xwiki at 12:25  \nsilviar joined #xwiki at 12:26  \nsilviar1 left at 12:27 (Ping timeout: 255 seconds  \nflorinciu left at 12:28 (Ping timeout: 264 seconds  \nflaviusolaru left at 12:28 (Ping timeout: 272 seconds  \nsilviar left at 12:30 (Client Quit  \nmarta\\_ left at 12:30 (Ping timeout: 265 seconds  \nflaviusolaru joined #xwiki at 12:30  \nmflorea1 joined #xwiki at 12:31  \nflorinciu joined #xwiki at 12:32  \nmflorea1 left at 12:32 (Client Quit  \nmflorea1 joined #xwiki at 12:32  \nflaviusolaru1 joined #xwiki at 12:33  \nflorinciu1 left at 12:33 (Ping timeout: 240 seconds  \nvenkatesh left at 12:34 (Read error: Operation timed out  \nmflorea left at 12:34 (Ping timeout: 276 seconds  \nmflorea1 left at 12:34 (Client Quit  \nmflorea joined #xwiki at 12:35  \nflaviusolaru left at 12:35 (Ping timeout: 264 seconds  \nmarta\\_ joined #xwiki at 12:37  \nvenkatesh joined #xwiki at 12:39  \nasrfel left at 12:50 (Quit: Leaving.  \nsdumitriu joined #xwiki at 12:53  \nasrfel joined #xwiki at 12:53  \nsilviar joined #xwiki at 12:59  \nabusenius joined #xwiki at 13:17  \nrrodriguez joined #xwiki at 13:21  \nflaviusolaru1 left at 13:37 (Read error: Connection reset by peer  \nflaviusolaru joined #xwiki at 13:37  \nflaviusolaru left at 13:42 (Ping timeout: 240 seconds  \nsdumitriu - (13:42): jvelociter: You should update the javadoc for userevents  \njvelociter - (13:42): right  \nsdumitriu - (13:50): jvelociter: Won't listeners get two events?  \nsdumitriu - (13:50): Since UserCreationEvent extends DocumentUpdateEvent, all listeners for DUE will also get the UCE  \nxwikibot joined #xwiki at 15:02  \nStulle - (15:02): XWIKI-5617  \nStulle - (15:02): now it works again ;)  \nvmassol - (15:07): Stulle: it works or it's broekn?  \nvmassol - (15:08): (oh the bot works again)  \nStulle - (15:08): yep  \nvmassol - (15:08): so the issue is real  \nsdumitriu - (15:08): Yeah, I restarted it  \nStulle - (15:08): i was referring to the bot  \nStulle - (15:08): the issue is real ;)  \nvmassol - (15:08): :(  \nvmassol - (15:08): ok  \nStulle - (15:08): yep, sorry to tell you  \nvmassol - (15:08): we really need more tests for the office importer  \nStulle - (15:08): unfortunately there was another bug in RC1 so i couldn't even tell you before the final  \nStulle - (15:09): well, i'll try to do a lot around that thing because my boss wants this feature very badly  \nvmassol - (15:09): I'll try to find the cause quickly (after I make some cookies for my son ;))  \nStulle - (15:09): but like i said, it was severely broken in RC1 so i could not test if the images worked there... it failed before i got that far  \nStulle - (15:10): cookies... neat!  \nStulle - (15:10): ;)  \nStulle - (15:10): i'll just add a few more tickets for improvements i'd like to see  \nvmassol - (15:14): mflorea: if you want to take a look go for it  \nmflorea - (15:15): vmassol: ok  \nvmassol - (15:15): (I was feeling responsible since this is probably caused by a change I made somewhere but if you have some time now then please go for it)  \nStulle - (15:22): okay, so i want to make a ticket that addresses an error that prevents the vertical-align style to be applied to a complete table and to cells with multiple lines  \nStulle - (15:22): should i make it one ticket or two?  \nStulle - (15:23): i figure the error is somehow related so prolly one would be appropriate but you tell me  \nmflorea - (15:24): Stulle: one issue is enough IMO  \nStulle - (15:24): ok  \ncjdelisle - (15:26): <cjdelisle> Can anyone explain why configuration doesn't work more like:  \ncjdelisle - (15:26): <cjdelisle> @Requirement(\"mymodule.param\")  \ncjdelisle - (15:26): <cjdelisle> private Configuration.String configured;  \ncjdelisle - (15:26): <cjdelisle> and using it is like:  \ncjdelisle - (15:26): <cjdelisle> configured.get();  \ncjdelisle - (15:26): <cjdelisle> ?  \ncjdelisle - (15:26): no one knows?  \nvmassol - (15:27): why should it?  \nvmassol - (15:27): what's the issue to solve?  \ncjdelisle - (15:27): <cjdelisle> Create MyModuleConfiguration, then create MyModuleConfigurationImplementation then have my module load MyModuleConfiguration from the componentManager seems like major duplication of code, there must have been a reason for this pattern and I was wondering what it was.  \nsdumitriu - (15:28): Yeah, I'm not very fond of the way configuration currently works  \nvmassol - (15:28): I really like it  \nvmassol - (15:28): it's so simple and powerful  \ncjdelisle - (15:28): There isn't any particular issue, I just feel like I'm running in circles every time I do configuration for something.  \nvmassol - (15:28): I haven't found a single use case that doesn't work or would not work right now  \nvmassol - (15:29): btw there was a mail and \u00a0a design done at the time  \ncjdelisle - (15:29): It's not that anything is impossible, it just requires ~3 times the code.  \nvmassol - (15:29): with the various use cases  \nvmassol - (15:30): I'd need to understand your example first\u2026 seems lik eit requires a component too  \nvmassol - (15:30): mymodule.param looks like a hint  \nvmassol - (15:30): which means you need to have a component for it  \nsdumitriu - (15:30): I for one don't see the need for components  \nvmassol - (15:30): but anyway  \nvmassol - (15:30): I don't really want to discuss this now  \nsdumitriu - (15:31): What's the need for a new component type that's just supposed to configure another component  \nvmassol - (15:31): cjdelisle or sdumitriu: if you have better ideas please send a full proposal  \nStulle - (15:31): XWIKI-5618  \ncjdelisle - (15:32): Well I can send mail, I thought there was some simple explanation that would make me go \"oh yea I see why that's the way it is\"  \nsdumitriu - (15:33): cjdelisle: The reason is to \"accomodate any need\"  \nsdumitriu - (15:33): any possible need  \ncjdelisle - (15:34): The only need I can imagine which my little mock proposal wouldn't meet is the need to swap out implementations of MyModuleConfiguration and to my knowledge this has never been used.  \nStulle - (15:34): XWIKI-5619  \nsdumitriu - (15:35): We should have a simple way to inject configuration values for any component, without writing a new component + implementation each time  \nvmassol - (15:35): otp  \nStulle - (15:38): XWIKI-5620  \nStulle - (15:38): okay, i think that's the last one for now ;)  \nStulle - (15:39): oh no, another one just came into my mind  \ncjdelisle - (15:39): I usually have trouble finding anything old on the lists, it seems in this case google is no better. https://encrypted.google.com/search?q=configuration+site%3Axwiki.markmail.org  \nsdumitriu - (15:42): markmail is not that google-accessible  \ncjdelisle - (15:42): yes, having better luck with: https://encrypted.google.com/search?q=configuration+site%3Alists.xwiki.org%2Fpipermail%2Fdevs%2F  \nStulle - (16:03): XWIKI-5621  \narkub left at 16:03 (Ping timeout: 265 seconds  \nmarta\\_1 joined #xwiki at 16:08  \nmflorea1 joined #xwiki at 16:08  \nmarta\\_ left at 16:08 (Ping timeout: 240 seconds  \nflorinciu1 joined #xwiki at 16:08  \nasrfel1 joined #xwiki at 16:08  \nmflorea left at 16:08 (Ping timeout: 240 seconds  \nasrfel left at 16:09 (Ping timeout: 265 seconds  \nflorinciu left at 16:09 (Ping timeout: 240 seconds  \nsdumitriu left at 16:09 (Ping timeout: 272 seconds  \nsilviar left at 16:09 (Ping timeout: 264 seconds  \nmflorea1 left at 16:10 (Client Quit  \nsilviar1 joined #xwiki at 16:10  \nmflorea joined #xwiki at 16:10  \nabusenius left at 16:11 (Ping timeout: 255 seconds  \nmarta\\_1 left at 16:11 (Client Quit  \nmarta\\_ joined #xwiki at 16:11  \nsdumitriu joined #xwiki at 16:23  \nlucaa1 joined #xwiki at 16:36  \nlucaa left at 16:37 (Ping timeout: 240 seconds  \nsilviar1 left at 16:45 (Read error: Connection reset by peer  \nlucaa joined #xwiki at 16:56  \nlucaa1 left at 16:59 (Ping timeout: 240 seconds  \nabusenius joined #xwiki at 17:19  \narkub joined #xwiki at 17:30  \nmflorea left at 17:31 (Quit: Leaving.  \nasrfel1 left at 17:56 (Quit: Leaving.  \nStulle - (18:03): reopened XWIKI-5618  \nStulle - (18:03): the proposed solution does not fix the problem for me  \ncjdelisle - (18:04): (% style=\"vertical-align: bottom\" %)(((  \ncjdelisle - (18:04): |cell1|cell2  \ncjdelisle - (18:04): |cell3|cell4  \ncjdelisle - (18:04): )))  \nStulle - (18:07): does not work either  \nStulle - (18:07): tried this the first time when i noticed the problem  \nStulle - (18:07): and did so again earlier  \nStulle - (18:07): to no avail  \nStulle - (18:09): anything else?  \ncjdelisle - (18:09): I'm out  \nStulle - (18:09): i was gonna propose the same for myself just now ;)  \nStulle - (18:09): well, have a good night, i'll be back tomorrow, i reckon  \nrrodriguez left at 18:10 (Quit: rrodriguez  \nStulle - (18:21): out, cu  \ncjdelisle - (18:22): see ya  \nStulle left at 18:26 (Ping timeout: 265 seconds  \narkub left at 18:29 (Quit: Leaving  \nflorinciu1 left at 18:30 (Quit: Leaving.  \nmarta\\_ left at 18:46 (Ping timeout: 265 seconds  \nlucaa left at 18:47 (Ping timeout: 252 seconds  \njvelociter - (18:53): stupid question... how do you do monospace in a velocity block in syntax 2.0  \njvelociter - (18:53): I can't figure it out... though I think I did it already in the paste  \njvelociter - (18:53): past  \nsdumitriu - (18:53): Does #\\# work?  \njvelociter - (18:54): nope. displays #\\#text#\\#  \njvelociter - (18:54): vmassol: any idea ?  \njvelociter - (19:04): bbl  \ncjdelisle - (19:10): #$escapetool.H should work  \nsdumitriu - (19:10): Right  \nrrodriguez joined #xwiki at 19:15  \njvdrean left at 19:22 (Quit: Leaving.  \nsdumitriu left at 19:24 (Ping timeout: 265 seconds  \nrrodriguez\\_ joined #xwiki at 19:27  \nrrodriguez left at 19:27 (Read error: Connection reset by peer  \nrrodriguez\\_ is now known as rrodriguez ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \ncjdelisle - (19:31): vmassol, Thanks for the email about configuration, I didn't see that one looking. One question is what do you think about putting the Configuration interface in the /internal/ dir? Do we expect anyone else to implement it or need it?  \nvmassol - (19:33): cjdelisle: not sure, we already implement some of the with several impls  \nvmassol - (19:34): it also allows user to override configurations for some parts of xwiki  \nvmassol - (19:35): jvelociter: hmm\u2026 velocity runs first and wiki syntax parser after so there's probably no way....  \nrrodriguez left at 19:35 (Read error: Connection reset by peer  \nrrodriguez\\_ joined #xwiki at 19:35  \ncjdelisle - (19:35): So you think external is better for future-proofing?  \nvmassol - (19:35): cjdelisle: wait  \nvmassol - (19:35): it has to be exposed  \nvmassol - (19:35): since that's the main point of having that interface  \nvmassol - (19:35): s/main/one of the main/  \ncjdelisle - (19:36): and to make the component manager happy ;)  \nvmassol - (19:36): ie to allow other modules to access config fdata  \nvmassol - (19:36): s/fdata/data/  \nvmassol - (19:36): (from other modules)  \nvmassol - (19:36): ok it's not a common use case but was part of the use cases I had listed initially  \ncjdelisle - (19:38): I see that there was discussion of an idea very similar to the one I suggested so I'm happy. Just trying to get my head around how it works.  \ncjdelisle - (20:46): I have to get storage items and I'd really like their fields like File and UUID to be final so I'm thinking about adding Provider<StorageItem> with StorageItem get(final UUID key);  \ncjdelisle - (20:46): Is this evil and horrible?  \ncjdelisle - (20:47): Alternatively I'd be getting per-lookup StorageItems and calling setKey(final UUID key) \u00a0A method which I really don't want to add.  \nevalica - (20:48): http://maven.xwiki.org/snapshots/com/xpn/xwiki/products/xwiki-enterprise-jetty-hsqldb/2.6-SNAPSHOT/ why the last zip has the date 16 Oct? can someone fix that?  \nvmassol - (20:55): evalica: what's wrong?  \nvmassol - (20:56): is it the date or is it that there's been no enterprise build since then?  \ncjdelisle - (20:56): http://maven.xwiki.org/snapshots/org/xwiki/enterprise/xwiki-enterprise-jetty-hsqldb/2.6-SNAPSHOT/ looks like it moved.  \nvmassol - (20:56): ah yes  \nvmassol - (20:56): evalica: we have a new groupid  \nvmassol - (20:56): evalica: here: http://maven.xwiki.org/snapshots//org/xwiki/enterprise/xwiki-enterprise-jetty-hsqldb/2.6-SNAPSHOT/  \nvmassol - (20:57): oops that's what you said cjdelisle....  \nvmassol - (20:57): :)  \nevalica - (20:57): thanks anyway :P  \nvmassol - (20:58): that said some files have been modified on the 26th in http://maven.xwiki.org/snapshots/com/xpn/xwiki/products/xwiki-enterprise-jetty-hsqldb/2.6-SNAPSHOT/  \nvmassol - (20:58): that's strange  \nvmassol - (20:58): hmm might simply be our nexus instance rebuilding metadata  \ncjdelisle - (20:59): I noticed that, assumed hudson was still pushing something but on second thought that makes no sense.  \nvmassol - (20:59): cjdelisle: it mus be nexus  \nvmassol - (20:59): cehcking  \nvmassol - (21:03): hmm rebuild maven metadata files is a manual task  \nvmassol - (21:03): so it shouldn't be executed automatically  \nevalica left at 21:10 (Quit: Leaving.  \nsdumitriu joined #xwiki at 21:12  \nsdumitriu - (21:21): cjdelisle: I don't fully understand your email, \"comments and tags can be handled perfectly well in applications \"  \nsdumitriu - (21:22): What is a good thing?  \ncjdelisle - (21:22): I see no reason why we need java code to handle something like comments.  \nsdumitriu - (21:23): I too don't like at all that tags and comments are so tied to the core  \ncjdelisle - (21:23): If every time an XObject is commonly used it becomes part of the core, eventually everything would be in the core.  \nsdumitriu - (21:23): IMO tags and comments should be completely separate modules  \nsdumitriu - (21:24): But I do think that some Java code would be better for those  \ncjdelisle - (21:24): It does make more sense when modules can be packaged and distributed in .xar files.  \nsdumitriu - (21:24): Just that all the code responsible for comments/tags should be in a distinct, independent module  \nsdumitriu - (21:25): In the future a .xar will be able to contain jars  \ncjdelisle - (21:25): What I'm most worried about is a hidden cyclic dependency. eg: XWiki.java needs XWiki.XWikiUsers to function, XWiki.XWikiUsers needs XWiki.java to function.  \nsdumitriu - (21:25): Actually it almost can, using attachments marked as libraries for groovy macro  \nsdumitriu - (21:25): s  \ncjdelisle - (21:26): So what we need then is a strict security manager, otherwise applications will only be able to be added with PR.  \nsdumitriu - (21:27): Yep  \nsdumitriu - (21:27): When do you think you can progress on signed macros?  \ncjdelisle - (21:28): As soon as I get generic large object storage done and have an attachment store implemented, I can start looking at it.  \ncjdelisle - (21:29): big PITA == moving attachment history from jrcs to something else.  \nsdumitriu - (21:29): Hehe  \nsdumitriu - (21:29): Legacy sux  \ncjdelisle - (21:30): I like it for the challenge though.  \ncjdelisle - (21:30): which is why I do stupid things like optimize the cache.  \ncjdelisle - (21:32): Maybe that code could use a little comment that it should be moved when extensions are mature.  \ncjdelisle - (21:32): WDYT?  \nsdumitriu - (21:32): Which one?  \ncjdelisle - (21:33): Probably in the class \"commentUpdateEvent\".  \nsdumitriu - (21:33): K  \ncjdelisle - (21:34): err CommentUpdateEvent. and the other Comment\\* classes.  \nsdumitriu - (21:34): Do you have a 5 minute idea for fixing the elseif mess?  \nsdumitriu - (21:34): vmassol: Do you have a 5 minute idea for fixing the elseif mess?  \ncjdelisle - (21:34): is the class going to be extended?  \ncjdelisle - (21:35): aka can } else if (event instanceof AnnotationAddEvent){ \u00a0be replaced with } else if (event.getClass() == AnnotationAddEvent.class){ \u00a0?  \nsdumitriu - (21:35): class extend, or extend with even more elseifs?  \nlpereira joined #xwiki at 21:35  \nsdumitriu - (21:36): Oh, the event classes should be final  \njvdrean joined #xwiki at 21:36  \ncjdelisle - (21:36): ha. switch statement  \nsdumitriu - (21:36): Switch or elseif is almost the same  \nsdumitriu - (21:37): You still have to list all known values  \ncjdelisle - (21:37): true.  \nsdumitriu - (21:37): A better idea would be to listen to AbstractDocumentEvent and have the event type in the observation event  \ncjdelisle - (21:37): CommentAddEvent implements CommentEvent?  \nsdumitriu - (21:37): And have full references to point to the target  \nsdumitriu - (21:38): But we don't have object references either  \nsdumitriu - (21:38): (or do we? were they introduced?)  \ncjdelisle - (21:38): I think they are somewhat there but nonfunctional but I'm not the one to ask.  \nsdumitriu - (21:39): lucaa was working on them, but she's not here  \nsdumitriu - (21:39): vmassol: Ping  \nsdumitriu - (21:39): Anyway, time over, going back to the bug I'm fighting with  \ncjdelisle - (21:41): \u00a0ActivityEventType.DELETE\\_ANNOTATION; \u00a0<-- that one makes it hard. Would need to add a matrix to ActivityEventType.  \nsdumitriu - (21:41): No  \nsdumitriu - (21:41): ActivityEventType can be removed completely  \ncjdelisle - (21:42): If you can remove that line then you can use 6 ifs. if I'm not mistaken.  \ncjdelisle - (21:43): AnnotationDeleteEvent implements AnnotationEvent, DeleteEvent  \ncjdelisle - (21:43): DeleteEvent is generic so should be in the core IMO.  \ncjdelisle - (21:43): s/core/observation/  \ncjdelisle - (21:43): then you still use if instanceof but fewer of them.  \ncjdelisle - (21:44): if (event instanceof AnnotationEvent){  \ncjdelisle - (21:44): \u00a0\u00a0additionalIdentifier = ((AnnotationEvent) event).getIdentifier();  \ncjdelisle - (21:46): Is this in every entry?  \ncjdelisle - (21:46): displayTitle = currentDoc.getDisplayTitle(context);  \ncjdelisle - (21:48): This would be hard:  \ncjdelisle - (21:48): eventType = ActivityEventType.DELETE\\_ANNOTATION;  \ncjdelisle - (21:48): but you said that wasn't necessary.  \nSvenDowideit left at 21:53 (Excess Flood  \nSvenDowideit joined #xwiki at 21:54  \nsdumitriu - (22:08): displayTitle = previousDoc.getDisplayTitle for DocumentDeleteEvent  \nsdumitriu - (22:08): Since the currentDoc is a new document  \nlucaa joined #xwiki at 22:16  \nabusenius left at 22:17 (Remote host closed the connection  \nabusenius joined #xwiki at 22:18  \ncjdelisle - (22:29): <sdumitriu> displayTitle = previousDoc.getDisplayTitle for DocumentDeleteEvent  \ncjdelisle - (22:29): I see.  \ncjdelisle - (22:29): Can you set it twice?  \nsdumitriu - (22:29): Yes, I could  \nlpereira left at 22:34 (Quit: Leaving.  \nlucaa left at 22:35 (Read error: No route to host  \nlucaa joined #xwiki at 22:35  \nlucaa left at 22:42 (Read error: No route to host  \nlucaa joined #xwiki at 22:43  \nlucaa left at 22:49 (Quit: Leaving.  \nlucaa joined #xwiki at 22:49  \nsdumitriu - (22:49): lucaa: Ping  \nabusenius left at 22:54 (Ping timeout: 252 seconds  \nsdumitriu - (22:57): Hm, mflorea is the guilty one  \njvelociter - (22:58): vmassol: ping. I wonder, what are you using as replacement for jar inspector on OSX snow leopard ?  \nlucaa left at 22:58 (Ping timeout: 276 seconds  \nlucaa joined #xwiki at 23:01  \nsdumitriu left at 23:02 (Ping timeout: 240 seconds  \nlucaa left at 23:08 (Read error: Connection reset by peer  \nlucaa joined #xwiki at 23:08  \nlucaa left at 23:15 (Ping timeout: 240 seconds  \njvdrean left at 23:18 (Quit: Leaving.  \nlucaa joined #xwiki at 23:18  \njvdrean joined #xwiki at 23:32  \nlucaa left at 23:47 (Ping timeout: 240 seconds  \n\n"}