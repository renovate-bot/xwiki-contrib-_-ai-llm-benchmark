{
  "id": "xwiki:Documentation.AdminGuide.Attachments",
  "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments",
  "title": "Attachments",
  "collection": "Eval_de",
  "mimetype": "text/markdown",
  "language": "de",
  "content": "**Inhalt**\n\n* [Größenlimit](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HSizeLimit)\n* [Mimetype-Einschränkung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HMimetypeRestriction)\n* [Versionen](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HVersions)\n* [Löschung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HDeletion)\n* [Anhangspeicherung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HAttachmentStorage)\n\t+ [Dateisystem-Anhangspeicherung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HFilesystemAttachmentStore)\n\t\t- [Speicherort des Dateisystem-Anhangspeichers](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HFilesystemattachmentstorelocation)\n\t\t- [Weitere Überlegungen](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HOtherconsiderations)\n\t\t\t* [Verzeichnisbereinigung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HDirectorycleanup)\n\t+ [Datenbank-Anhangspeicherung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HDatabaseAttachmentStore)\n\t\t- [Wechsel zum Datenbank-Anhangspeicher](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HSwitchtodatabaseattachmentstore)\n* [Anhangsanzeige oder -download](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HAttachmentdisplayordownload)\n* [Upload-Zusammenfassung](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HUploadsummary)\n* [Sicherheit](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HSecurity)\n\nAnhänge können entweder über die reguläre [Upload-Aktion](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/Attachments), [WebDAV](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/WebDAV), [XML-RPC](https://extensions.xwiki.org/xwiki/bin/view/Extension/XML-RPC%20Integration) oder [Rest](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/XWikiRESTfulAPI) hochgeladen werden.  \nAls Administrator können Sie Grenzen für die maximale Größe eines Anhangs und den Speicherort der Anhänge festlegen.\n\n# Größenlimit\n\nDie maximale Größe eines Anhangs wird durch einen Konfigurationsparameter im Dokument *XWikiPreferences* begrenzt. Standardmäßig ist sie auf 100GB festgelegt (32MB für XWiki < 10.9RC1).  \nUm dies zu ändern, folgen Sie diesen Schritten:\n\n1. Gehen Sie zu *http://<yourwiki>/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object*\n2. Klicken Sie auf die Zeile, die XWikiPreferences 0 sagt (direkt unter der Zeile, die Objekte des Typs XWiki.XWikiPreferences (1) sagt)\n3. Scrollen Sie nach unten zum Feld, das Maximale Upload-Größe sagt, und ändern Sie die Zahl auf die gewünschte Größe (sie ist in Bytes angegeben)\n4. Scrollen Sie nach unten und klicken Sie auf \"Speichern\"\n5. Wiederholen Sie dies für jedes (Unter-)Wiki, für das Sie die Größe erhöhen müssen, da diese Konfiguration derzeit pro Wiki festgelegt werden muss\n\nBeachten Sie, dass Sie möglicherweise den Cache Ihres Browsers leeren müssen, damit die neue Größeneinstellung berücksichtigt wird, wenn Sie bereits versucht haben, eine Datei anzuhängen und dies fehlgeschlagen ist.\n\n# Mimetype-Einschränkung\n\nSiehe [Attachent Validation Application](https://extensions.xwiki.org/xwiki/bin/view/Extension/Attachment/Validation/UI/).\n\n# Versionen\n\nWenn ein Benutzer einen Anhang hochlädt und dann einen weiteren Anhang mit genau demselben Namen hochlädt, können Sie entscheiden, ob Sie eine Versionshistorie der Anhänge wie bei Dokumenten beibehalten möchten.  \nXWiki speichert standardmäßig alle Dokumentanhangsversionen, was mehr Speicherplatz kostet. Wenn Sie nur die neuesten Versionen von Anhängen benötigen, können Sie die Versionskontrolle für Anhänge deaktivieren, indem Sie Ihre [xwiki.cfg](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/) bearbeiten und hinzufügen:\n\nxwiki.store.attachment.versioning=0\n\n# Löschung\n\nGelöschte Anhänge werden in einem Papierkorb gespeichert, sodass sie zusammen mit dem Dokument wiederhergestellt werden können, wenn eine frühere Version, in der der Anhang sichtbar sein sollte, zurückgesetzt oder angezeigt wird. Um diese Funktion zu deaktivieren, bearbeiten Sie [xwiki.cfg](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Configuration/) und fügen Sie hinzu:\n\nstorage.attachment.recyclebin=0\n\nSie können die Liste der gelöschten Anhänge in Ihrem Wiki anzeigen und sie dauerhaft löschen, indem Sie zu XWiki.DeletedAttachments in Ihrem Wiki gehen.\n\n# Anhangspeicherung\n\nXWiki bietet Plugin-Anhangspeichermethoden, sodass Sie Ihre Anhänge in der Datenbank oder direkt im Dateisystem speichern können.\n\nGenerell bleiben Metadaten für Anhänge und gelöschte Anhänge in der Datenbank, unabhängig davon, welcher Speicher für den Inhalt verwendet wird. Die Metadaten enthalten den Typ des verwendeten Speichers für den Inhalt, sodass jeder Anhang einen anderen Speicher wählen kann. Die Konsequenz ist, dass das, was Sie konfigurieren, der **Standard**-Speicher für einen neuen Anhang ist und nicht der Speicher, der für alle Anhänge verwendet wird.\n\n## Dateisystem-Anhangspeicherung\n\nDer Standard seit 10.5\n\nDer Dateisystem-Anhangspeicher speichert Ihre Anhänge in Dateien in einer Verzeichnisstruktur. Dies bedeutet, dass Sie eine weitere Aufgabe haben, wenn Sie Ihre Daten sichern, aber es bedeutet auch, dass Sie größere Dateien (über ein Gigabyte) speichern können. Der Dateisystem-Anhangspeicher implementiert einen zweistufigen Commit-Mechanismus, um die Integrität zu gewährleisten, selbst wenn die Datenbank das Anhängen von Metadaten nicht committen kann.\n\n### Speicherort des Dateisystem-Anhangspeichers\n\nStandardmäßig befindet sich der Dateispeicher in einem Unterordner (store/file seit XWiki 11.0 und storage davor) des permanenten Verzeichnisses (definiert mit dem Parameter environment.permanentDirectory in der Datei xwiki.properties). Standardmäßig ist es auf data festgelegt, was ein Verzeichnis relativ zu dem Ort ist, an dem der Java Servlet Container gestartet wurde. Es wird empfohlen, diesen Wert zu ändern, um sicherzustellen, dass Sie den Servlet Container von jedem Verzeichnis aus starten können und XWiki die Anhänge in diesem Arbeitsverzeichnis weiterhin findet.\n\nZum Beispiel:\n\nenvironment.permanentDirectory=/opt/tomcat6/data\n\nSeit 11.4 ist es möglich, den Speicherort des Dateisystem-Speichers zu setzen, ohne das allgemeine permanente Verzeichnis zu ändern, indem Sie die Eigenschaft store.file.directory in der Datei xwiki.properties verwenden.\n\nstore.file.directory=/my/custom/location\n\n### Weitere Überlegungen\n\nWenn Sie einen [Cluster](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Clustering/) betreiben, müssen Sie ein synchronisiertes Speicherverzeichnis für jeden Knoten haben. Sie können NFS oder andere Mittel verwenden, um das Laufwerk auf jedem Knoten im Cluster zu mounten.\n\n#### Verzeichnisbereinigung\n\nSeit [XWiki 6.0M2](https://www.xwiki.org/xwiki/bin/view/ReleaseNotes/ReleaseNotesXWiki61M2) ist es möglich, Zeit beim Start zu sparen, indem verhindert wird, dass XWiki leere Verzeichnisse im Dateisystem-Anhangspeicher bereinigt. Um dies zu tun, bearbeiten Sie xwiki.properties und setzen **store.fsattach.cleanOnStartup** auf false. Wenn Sie dies tun, sind Sie selbst für die Bereinigung leerer Verzeichnisse verantwortlich.\n\n## Datenbank-Anhangspeicherung\n\nDer Standard vor 10.5.\n\nDieser Anhangspeichermechanismus speichert Ihre Anhänge in Datenbankeinträgen in den Tabellen [xwikiattachment\\_content](https://www.xwiki.org/xwiki/bin/view/Documentation/DevGuide/DsXWikiAttachmentContent), [xwikiattachment\\_archive](https://www.xwiki.org/xwiki/bin/view/Documentation/DevGuide/XWikiAttachmentArchive) und [xwikiattrecyclebin](https://www.xwiki.org/xwiki/bin/view/Documentation/DevGuide/DsXwikiRecycleBin). Dieses System ermöglicht eine einfache Sicherung Ihrer Anhänge durch das Dumpen der Datenbank und das Zusammenhalten aller Ihrer Daten, aber die Anhangsgröße ist speicherbeschränkt, da der Anhangsinhalt und das Archiv vollständig im Speicher gehalten werden müssen. Als allgemeine Regel sind Anhänge größer als 30MB nicht möglich.\n\n### Wechsel zum Datenbank-Anhangspeicher\n\nDiese Einstellungen sollten wie folgt lauten:\n\nxwiki.store.attachment.hint = hibernate  \nxwiki.store.attachment.versioning.hint = hibernate  \nxwiki.store.attachment.recyclebin.content.hint=hibernate  \n  \n# Wenn Sie den Datenbankspeicher für den Anhang verwenden müssen, gilt dies wahrscheinlich auch für gelöschte Anhänge  \nxwiki.store.recyclebin.content.hint = hibernate\n\nStellen Sie außerdem sicher, dass sie nicht auskommentiert sind.\n\nWenn Sie diesen Anhangspeicher mit einer MySQL-Datenbank verwenden, müssen Sie das max\\_allowed\\_packet auf etwa das Dreifache der Größe Ihres größten Anhangs setzen, da der Anhang und seine Versionshistorie gespeichert werden müssen. Weitere Informationen finden Sie im [MySQL-Installationshandbuch](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/InstallationMySQL).\n\n# Anhangsanzeige oder -download\n\nWenn möglich (siehe [Sicherheitsabschnitt](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Attachments#HSecurity) unten), werden Anhänge direkt im Browser angezeigt, wenn darauf zugegriffen wird.  \nEs ist für Entwickler möglich, das Herunterladen eines Anhangs zu erzwingen, indem sie den Parameter ?force-download=1 in die Anhangs-URL einfügen.\n\nSeit XWiki 12.10+ ist es möglich, eine dedizierte Eigenschaft in xwiki.properties zu verwenden, um immer einige Anhangs-Mime-Typen zum Herunterladen zu zwingen:\n\n#-# [Seit 12.10]  \n#-# Definieren Sie die Art von Anhang, die immer heruntergeladen und niemals inline angezeigt werden soll.  \n#-# Standardmäßig ist diese Liste leer, aber Sie können eine Liste von Mime-Typen (kommagetrennte Liste von Werten) angeben, die  \n#-# immer heruntergeladen werden sollen, unabhängig davon, wer sie angehängt hat oder wie die Whitelist/Blacklist-Konfiguration aussieht.  \n#-#  \n#-# Der Unterschied zur Blacklist-Konfiguration oben besteht darin, dass die Blacklist keine Dateien betrifft, die von einem Benutzer mit Programmierrechten angehängt wurden, während diese Konfiguration jeden Anhang betrifft.  \n# attachment.download.forceDownload=\n\n# Upload-Zusammenfassung\n\nSeit XWiki 16.3.0+ können Sie in xwiki.properties Upload-Zusammenfassungen aktivieren, um Benutzern das Hinzufügen von Beschreibungen während des Anhang-Uploads zu ermöglichen.\n\n#-# [Seit 16.3.0RC1]  \n#-# Geben Sie an, ob Kommentare für Anhang-Uploads aus der Benutzeroberfläche gesetzt und angezeigt werden sollen, wann immer die  \n#-# Anhangsversionen aufgelistet werden. Standardmäßig ist dies false.  \n# attachment.upload.enableComments=false\n\n# Sicherheit\n\nUm Angriffe durch Anhänge zu verhindern, ist es möglich zu kontrollieren, welche Anhänge basierend auf ihren Mime-Typen direkt im Browser geöffnet werden können.  \nZwei Eigenschaften in xwiki.properties ermöglichen es, dies unabhängig zu steuern:\n\n#-# [Seit 5.2M2]  \n#-# Definieren Sie die Art von Anhang, die inline angezeigt werden kann. Sie können dies entweder über eine Whitelist tun  \n#-# (nur die in dieser Liste definierten Mime-Typen würden inline angezeigt) oder eine Blacklist (jeder Mime-Typ, der nicht in  \n#-# dieser Liste enthalten ist, würde, wenn möglich, inline angezeigt).  \n#-# Beachten Sie, dass nur eine Konfiguration zwischen der Whitelist und der Blacklist verwendet wird, und die Whitelist hat immer  \n#-# Vorrang vor der Blacklist. Beachten Sie auch, dass diese Konfigurationen aus Sicherheitsgründen existieren, sodass sie nur  \n#-# Anhänge betreffen, die von Benutzern ohne Programmierrechte hinzugefügt wurden.  \n#-# Wenn Sie das Herunterladen einiger Anhangstypen erzwingen möchten, überprüfen Sie bitte die folgende Konfiguration.  \n#-#  \n#-# Standardmäßig verwenden wir die folgende Whitelist (kommagetrennte Liste von Werten).  \n# attachment.download.whitelist=audio/basic,audio/L24,audio/mp4,audio/mpeg,audio/ogg,audio/vorbis,audio/vnd.rn-realaudio,audio/vnd.wave,audio/webm,image/gif,image/jpeg,image/pjpeg,image/png,image/tiff,text/csv,text/plain,text/xml,text/rtf,video/mpeg,video/ogg,video/quicktime,video/webm,video/x-matroska,video/x-ms-wmv,video/x-flv  \n#-#  \n#-# Wenn Sie stattdessen eine Blacklist verwenden möchten, können Sie hier die verbotenen Typen als kommagetrennte Liste von  \n#-# Werten definieren. Wir raten Ihnen, mindestens die folgenden Mime-Typen zu verbieten: text/html, text/javascript  \n# attachment.download.blacklist=text/html,text/javascript"
}