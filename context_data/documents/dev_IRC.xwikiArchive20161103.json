{"id": "dev:IRC.xwikiArchive20161103", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20161103", "title": "IRC Archive for channel #xwiki on 03 November 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<jonesmeier>\u00a0has quit  \n02:30\u00a0<jonesmeier>\u00a0has joined #xwiki  \n04:05\u00a0<sagarhani>\u00a0has quit  \n04:10\u00a0<sagarhani>\u00a0has joined #xwiki  \n06:17\u00a0<mflorea>\u00a0has joined #xwiki  \n06:42\u00a0<Aranjedeath>\u00a0has quit  \n08:25\u00a0<msmeria>\u00a0has joined #xwiki  \n08:49\u00a0<vmassol>\u00a0has joined #xwiki  \n08:53\u00a0<mflorea>\u00a0has quit  \n08:54\u00a0<martinus\\_\\_>\u00a0has joined #xwiki  \n08:54\u00a0<Pbas>\u00a0has joined #xwiki  \n09:03\u00a0<sorinello\\_\\_>\u00a0has joined #xwiki  \n09:06\u00a0<sorinello>\u00a0has quit  \n09:22\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:23\u00a0<mflorea>\u00a0has joined #xwiki  \n09:42\u00a0<acotiuga>\u00a0has joined #xwiki  \n09:54\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:13\u00a0<edvorg>\u00a0has quit  \n11:38\u00a0<Pbas>\u00a0Hello with xwiki8.3, my page loading are very slow: 26s! When i relaunch tomcat it is ok but after one day, the problem come back.  \n11:38\u00a0<Pbas>\u00a0I add -XX:+HeapDumpOnOutOfMemoryError in catalina.sh and dumpfile size is ... 2,3 Go :/  \n11:39\u00a0<Pbas>\u00a0no one have this problem?  \n11:41\u00a0<Pbas>\u00a0I use this: JAVA\\_OPTS=\"-server -Xms1024m -Xmx2048m -Dfile.encoding=utf-8 -Djava.awt.headless=true -XX:+UseParallelGC -XX:MaxGCPauseMillis=100 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/opt/apache-tomcat-8.0.33/logs/HeapDump.log -Dhttp.proxyHost=proxyxxx -Dhttp.proxyPort=xxxx -Dhttps.proxyHost=xxx2 -Dhttps.proxyPort=xxx\"  \n11:45\u00a0<Pbas>\u00a0It is \"Render template\" fault: view.vm, endpage.vm,etc and \"execute panel: recentmodif\"  \n11:50\u00a0<tmortagne>\u00a0Pbas: not sure what you mean, you looked with ?debug=true ?  \n11:50\u00a0<Pbas>\u00a0yes and firebug too  \n11:50\u00a0<tmortagne>\u00a0executing view.vm template means executing pretty much everything  \n11:51\u00a0<tmortagne>\u00a0it does not means the issue is in view.vm itself  \n11:51\u00a0<tmortagne>\u00a0you need to look at lower branches in the tree  \n11:51\u00a0<Pbas>\u00a0ho yes it is upside  \n11:51\u00a0<Pbas>\u00a0it is panels.MyRecentModifications  \n11:53\u00a0<circ-user-1wcHf>\u00a0has joined #xwiki  \n11:53\u00a0<Pbas>\u00a0but I use the standard one (inchanged)  \n11:55\u00a0<tmortagne>\u00a0maybe this panel is doing something which is slow in your environment  \n11:55\u00a0<tmortagne>\u00a0you don't have more details under MyRecentModifications in the tree ?  \n11:56\u00a0<tmortagne>\u00a0you might want to check on mysql side how long the request to get recent modifications took  \n11:56\u00a0<tmortagne>\u00a0s/mysql/database/  \n11:56\u00a0<Pbas>\u00a0no nothing  \n11:56\u00a0<tmortagne>\u00a0I added queries in the tree recently but it's only in 8.4.x  \n11:57\u00a0<Pbas>\u00a0but it is not panels.MyRecentModifications everytime fault, it depends  \n11:57\u00a0<Pbas>\u00a0cool i will give a try because, 30 s per page :-/  \n11:58\u00a0<circ-user-1wcHf>\u00a0xwiki can add users into groups based on their memberOF in AD?  \n11:58\u00a0<Pbas>\u00a0About my database I must find a way to check time access then  \n11:59\u00a0<tmortagne>\u00a0circ-user-1wcHf: yes, see http://extensions.xwiki.org/xwiki/bin/view/Extension/LDAP/Authenticator/UseCases/#HIwanttobeabletoreuseLDAPusersmembershipinXWiki  \n11:59\u00a0<tmortagne>\u00a0Pbas: for Mysql you can use mytop  \n11:59\u00a0<Pbas>\u00a0client side?  \n12:00\u00a0<tmortagne>\u00a0work like top but with MySQL request so you see what's running  \n12:00\u00a0<tmortagne>\u00a0I usually use it on server side  \n12:00\u00a0<tmortagne>\u00a0but I guess it can work remotely  \n12:01\u00a0<Pbas>\u00a0ok, I will test this way. thxs  \n12:01\u00a0<tmortagne>\u00a0I guess there is also way to enable some monitoring to get a log with how long each request takes in MySQL but never tried  \n12:02\u00a0<Pbas>\u00a0I didn't forget to update ldap page (I will after lunch) :-)  \n12:02\u00a0<Pbas>\u00a0ty see U  \n12:03\u00a0<tmortagne>\u00a0Pbas: cool :)  \n12:10\u00a0<vmassol>\u00a0Pbas: you can also install javamelody  \n12:10\u00a0<vmassol>\u00a0it's quite useulf to debug  \n12:10\u00a0<vmassol>\u00a0and it gives you DB query times  \n12:10\u00a0<vmassol>\u00a0http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Monitoring#HJavaMelody  \n12:10\u00a0<vmassol>\u00a0hmm image is broken...  \n12:10\u00a0<vmassol>\u00a0fixing  \n12:13\u00a0<vmassol>\u00a0you can see screenshots here Pbas: https://github.com/javamelody/javamelody/wiki/Screenshots#charts  \n12:55\u00a0<circ-user-1wcHf>\u00a0has quit  \n13:04\u00a0<Pbas>\u00a0vmassol: right i will use 8.4rc1 and add javamelody  \n13:05\u00a0<Pbas>\u00a0Bythe way, any chance to commit my PR for 8.4 version?  \n13:05\u00a0<Pbas>\u00a0https://github.com/xwiki/xwiki-platform/pull/544  \n13:14\u00a0<vmassol>\u00a0Pbas: I'll check it even though I'm really not the one with the most knowlegde on this area  \n13:15\u00a0<Pbas>\u00a0:-) thxs  \n13:26\u00a0<vmassol>\u00a0gdelhumeau: how do we get the URL for an icon set icon?  \n13:28\u00a0<vmassol>\u00a0I guess the answer is that it's not always represented as a URL  \n13:28\u00a0<vmassol>\u00a0and thus it's not possible  \n13:29\u00a0<vmassol>\u00a0and that's why the SS only offers to render  \n13:29\u00a0<vmassol>\u00a0the consequence is that we cannot use it in CSS anymore  \n13:33\u00a0<vmassol>\u00a0gdelhumeau: could you review https://github.com/xwiki/xwiki-platform/pull/544/files (you have a lot more knowledge than me on this topic since you coded it)? :)  \n14:00\u00a0<gdelhumeau>\u00a0I'm doing it  \n14:06\u00a0<gdelhumeau>\u00a0Pbas: hope it helps you  \n14:07\u00a0<gdelhumeau>\u00a0the only blocking point for me is the use of $services.icon.render instead of $services.icon.renderHTML  \n14:09\u00a0<Signum>\u00a0Hi. I seem to have problems with the \"app within minutes\" wizard. In Step-3 all the translations are suddenly missing. I just see strings like platform.appwithinminutes.wizardStep1Name or platform.appwithinminutes.wizardStepFinishButtonLabel  \n14:09\u00a0<Signum>\u00a0And by \"suddenly\" I mean\u2026 some time since the update from 7.x to 8.x.  \n14:10\u00a0<Signum>\u00a0The catalina.out reads: .o.i.DefaultObservationManager - The [org.xwiki.localization.wiki.internal.ComponentDocumentTranslationBundle] listener is overwritting a previously registered listener [org.xwiki.localization.wiki.internal.ComponentDocumentTranslationBundle] since they both are registered under the same id [localization.bundle.document:it:Server inventory.Code.Server inventoryTranslations  \n14:10\u00a0<Signum>\u00a0Localisation is off. I just have \"en\" as language.  \n14:17\u00a0<Pbas>\u00a0gdelhumeau: I used $services.icon.render instead HTML because sometime HTML code was displayed instead rendering.  \n14:17\u00a0<gdelhumeau>\u00a0inside an HTML macro?  \n14:17\u00a0<Pbas>\u00a0(in velocity macro)  \n14:17\u00a0<Pbas>\u00a0I will fix it  \n14:18\u00a0<gdelhumeau>\u00a0if a velocity macro displays some HTML, it means it is designed to be used inside an HTML macro  \n14:18\u00a0<Pbas>\u00a0About xar timestamp  \n14:18\u00a0<Pbas>\u00a0hwo can I avoid them?  \n14:18\u00a0<Pbas>\u00a0I must edit file manualy?  \n14:20\u00a0<Signum>\u00a0The funny thing is then when I reload the page (F5) the correct english strings suddenly appear.  \n14:20\u00a0<Signum>\u00a0Reinstalling the app didn't help.  \n14:26\u00a0<gdelhumeau>\u00a0Pbas: I use a git diff editor  \n14:26\u00a0<gdelhumeau>\u00a0Pbas: so that I can revert some part of the file  \n14:27\u00a0<gdelhumeau>\u00a0Pbas: I use Intellij for that but there must be alternatives  \n14:27\u00a0<Pbas>\u00a0k ty  \n14:33\u00a0<tmortagne>\u00a0Pbas: you can use git add -p  \n14:33\u00a0<tmortagne>\u00a0which let you choose exactly what you want to add  \n14:34\u00a0<Pbas>\u00a0cool (I prefer command line since I'm working on a server)  \n14:34\u00a0<tmortagne>\u00a0(i.e. \"git add\" is file by file and \"git add -p\" us change by change)  \n14:34\u00a0<gdelhumeau>\u00a0good to know  \n14:37\u00a0<vmassol>\u00a0gdelhumeau: I'm curious to know why renderHTML is better than render()  \n14:37\u00a0<vmassol>\u00a0I'd have said the opposite  \n14:37\u00a0<vmassol>\u00a0(checking PR comments now)  \n14:38\u00a0<gdelhumeau>\u00a0if you are in an HTML macro, you need to render HTML  \n14:38\u00a0<gdelhumeau>\u00a0render() render XWiki Syntax  \n14:43\u00a0<vmassol>\u00a0ok I understand, thanks. Indeed seems that the whole blog macros are outputting directly html  \n15:07\u00a0<Pbas>\u00a0tmortagne: bad news ldapS authentication doesn't work on 8.4rc1 version :-(  \n15:07\u00a0<Pbas>\u00a0certificat problem  \n15:07\u00a0<tmortagne>\u00a0Pbas: well there is nothing new related to that in 8.4rc1  \n15:07\u00a0<Pbas>\u00a0Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target  \n15:08\u00a0<tmortagne>\u00a0there is no reason you have differences between 8.3 and 8.4  \n15:08\u00a0<tmortagne>\u00a0(plus in both cases you are using the exact same version of LDAP authenticator)  \n15:08\u00a0<Pbas>\u00a0On same tomcat & server my authentication failed with 8.4rc1 but I will recheck  \n15:09\u00a0<Pbas>\u00a0Ok must I must checking again  \n15:10\u00a0<Pbas>\u00a0by the way another bug: on xwiki logging page we can not change loging level  \n15:11\u00a0<Pbas>\u00a0/bin/admin/XWiki/XWikiPreferences?editor=globaladmin&section=Logging  \n15:16\u00a0<msmeria>\u00a0has quit  \n15:19\u00a0<tmortagne>\u00a0Pbas: that's weird I changed it recently, what you means exactly by \"can not change\" ?  \n15:19\u00a0<tmortagne>\u00a0you don't have set button anymore ?  \n15:20\u00a0<tmortagne>\u00a0I changed it=I used the UI  \n15:20\u00a0<Pbas>\u00a0I click on \"apply\" without effect  \n15:20\u00a0<lynxt>\u00a0has quit  \n15:21\u00a0<tmortagne>\u00a0nothing in the log ?  \n15:21\u00a0<tmortagne>\u00a0and you refresh it's not set ?  \n15:21\u00a0<tillo>\u00a0has quit  \n15:21\u00a0<Pbas>\u00a0ie in the LT: I wanted to change level logging for org.xwiki.contrib.ldap  \n15:21\u00a0<Pbas>\u00a0I select a level login and click on apply without effect  \n15:22\u00a0<Pbas>\u00a0yes, I refresh LT without effect  \n15:23\u00a0<Pbas>\u00a0Don't worry I will check on jetty package later  \n15:23\u00a0<tmortagne>\u00a0downloading 8.4rc1 now  \n15:25\u00a0<tmortagne>\u00a0Pbas: indeed I can reproduce, the page is reloaded but the level is back to TRACE  \n15:25\u00a0<tmortagne>\u00a0debugging  \n15:25\u00a0<tmortagne>\u00a0Pbas: was working well in 8.3 ?  \n15:26\u00a0<Pbas>\u00a0heu I think so (I will recheck because I want to debug my ldap problem to update your ldap page)  \n15:26\u00a0<Pbas>\u00a0and use 8.4 version)  \n15:27\u00a0<tmortagne>\u00a0anyway debugging master right now  \n15:31\u00a0<Pbas>\u00a0Right on xwiki 8.3, ldapS authentication working well  \n15:32\u00a0<Pbas>\u00a0I must chek ldap extension version (I think it is 8.3 version still on 8.4)  \n15:32\u00a0<tmortagne>\u00a0Pbas: works from http://127.0.0.1:8080/xwiki/bin/view/XWiki/LoggingAdmin page  \n15:33\u00a0<Pbas>\u00a0What ? logging?  \n15:33\u00a0<tmortagne>\u00a0looks like something changed in admin UI that makes it loose the URL parameters, debugging  \n15:33\u00a0<tmortagne>\u00a0setting logging level  \n15:33\u00a0<tmortagne>\u00a0admin UI actually includes this page  \n15:33\u00a0<Pbas>\u00a0on 8.3 there are same problem  \n15:34\u00a0<Pbas>\u00a0(it seem because I downgrade xwiki version without updating extension: report)  \n15:34\u00a0<edvorg>\u00a0has joined #xwiki  \n15:38\u00a0<Pbas>\u00a0In fact now I use xwiki 8.3 version with 8.4rc1 extension, then logging doesn't work of course  \n15:38\u00a0<tmortagne>\u00a0what do you mean by \"8.4rc1 extension\" ?  \n15:38\u00a0<tmortagne>\u00a08.4rc1 war ?  \n15:39\u00a0<Pbas>\u00a0no sorry I wanted to recheck 8.3 version but I did the mess  \n15:39\u00a0<Pbas>\u00a0but I think that logging page working well on 8.3  \n15:42\u00a0<tmortagne>\u00a0no idea what it used to work but does not anymore but I found a fix  \n15:42\u00a0<tmortagne>\u00a0(for logging admin UI)  \n15:45\u00a0<Pbas>\u00a0\u00a0nope, ldapS doesn't work on 8.4 version :-(  \n15:46\u00a0<Pbas>\u00a0Here ldap extension version: LDAP Authenticator \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a09.1  \n15:46\u00a0<Pbas>\u00a0I think it is the same  \n15:46\u00a0<Pbas>\u00a0than xwiki 8.3  \n15:46\u00a0<lynxt>\u00a0has joined #xwiki  \n15:47\u00a0<tmortagne>\u00a0Pbas: the version of the LDAP extension has nothing to do with the version of XWiki so yes it should be the same  \n15:47\u00a0<tillo>\u00a0has joined #xwiki  \n15:48\u00a0<sorinello\\_\\_>\u00a0has quit  \n15:48\u00a0<sorinello>\u00a0has joined #xwiki  \n16:04\u00a0<acotiuga>\u00a0has quit  \n16:06\u00a0<Pbas>\u00a0tmortagne: \u00a0ok but xwiki 8.4 can not find certificate anymore  \n16:06\u00a0<tmortagne>\u00a0Pbas: this should not have much to do with XWiki  \n16:07\u00a0<Pbas>\u00a0but I use same tomcat/java / machine  \n16:07\u00a0<Pbas>\u00a0I only change xwiki .war  \n16:08\u00a0<Pbas>\u00a0In webapps, I replace xwiki 8. 3 by 8.4 version  \n16:17\u00a0<tmortagne>\u00a0Pbas: XWiki don't have any certificate store and it did not changed in 8.4 so I don't really have any idea why you can't find it anymore  \n16:18\u00a0<Pbas>\u00a0yes I know my certificate is here: /opt/jdk1.8.0\\_101/jre/lib/security/jssecacerts but java must found it alone (with previous xwiki version, it's working well)  \n16:19\u00a0<Pbas>\u00a0I test with -Djavax.net.ssl.trustStore= now  \n16:20\u00a0<tmortagne>\u00a0Pbas: what things that could be related is that by default XWiki add a certificate in the store at runtime  \n16:20\u00a0<tmortagne>\u00a0in letsencrypt jar  \n16:22\u00a0<tmortagne>\u00a0Pbas: how do you indicate the store when it does not work ?  \n16:23\u00a0<tmortagne>\u00a0looks like letsencrypt always overwrite whatever is the current store with the default one (plus letsencrypt root certificate)  \n16:23\u00a0<Pbas>\u00a0-Djavax.net.ssl.trustStore= doesn't work  \n16:23\u00a0<tmortagne>\u00a0Pbas: try removing letsencrypt jar  \n16:23\u00a0<tmortagne>\u00a0just to see if it comes from it  \n16:23\u00a0<Pbas>\u00a0k time to restart  \n16:27\u00a0<Pbas>\u00a0yes! You are too strong!  \n16:27\u00a0<Pbas>\u00a0I delete ./WEB-INF/lib/letsencrypt-1.0.4.jar  \n16:27\u00a0<tmortagne>\u00a0given the fact that I introduced the letsencrupt jar I would not really say that :)  \n16:27\u00a0<tmortagne>\u00a0need to try to improve it  \n16:28\u00a0<Pbas>\u00a0It's like anti virus developper?  \n16:28\u00a0<Pbas>\u00a0the same ;-)  \n16:29\u00a0<Pbas>\u00a0Ok what I must do then? I can use xwiki without letsencrypt then?  \n16:41\u00a0<tmortagne>\u00a0letsencrypt module is only usefull if you have Java version older than 1.8.0\\_101  \n16:41\u00a0<tmortagne>\u00a0Oracle added letsencrypt b default in 101  \n16:41\u00a0<tmortagne>\u00a0so you can remove it, no problem  \n16:41\u00a0<tmortagne>\u00a0I will try to improve it to take into account javax.net.ssl.trustStore  \n16:48\u00a0<Pbas>\u00a0ok thxs I will check my java version then :)  \n16:48\u00a0<tmortagne>\u00a0Pbas: what is the format of javax.net.ssl.trustStore ?  \n16:48\u00a0<tmortagne>\u00a0a path ? a URL ?  \n16:49\u00a0<Pbas>\u00a0heu I don't know.  \n16:49\u00a0<Pbas>\u00a0truststore is in a file  \n16:51\u00a0<Pbas>\u00a0The search order for the locating the trust store is: \u00a0\u00a0\u00a0\u00a0\u00a01) <java-home>/lib/security/jssecacerts, then  \n16:51\u00a0<Pbas>\u00a0here: http://jira.xwiki.org/browse/XWIKI-865  \n16:52\u00a0<Pbas>\u00a0\"So in order to make it work you have to create a trust store named \u00a0jssecacerts with the following command and place it in the suitable \u00a0directory of the JRE or JDK used by your container:\" \u00a0I'm not an expert  \n18:01\u00a0<tmortagne>\u00a0has quit  \n18:07\u00a0<gdelhumeau>\u00a0has quit  \n18:11\u00a0<mflorea>\u00a0has quit  \n19:09\u00a0<edvorg>\u00a0has quit  \n20:19\u00a0<systemd>\u00a0has joined #xwiki  \n20:25\u00a0<systemd>\u00a0has quit  \n20:27\u00a0<systemd>\u00a0has joined #xwiki  \n20:40\u00a0<systemd>\u00a0has quit  \n20:47\u00a0<systemd>\u00a0has joined #xwiki  \n21:20\u00a0<mflorea>\u00a0has joined #xwiki  \n22:47\u00a0<mflorea>\u00a0has quit  \n23:57\u00a0<vmassol>\u00a0has quit\n"}