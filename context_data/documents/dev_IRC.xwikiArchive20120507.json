{"id": "dev:IRC.xwikiArchive20120507", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120507", "title": "IRC Archive for channel #xwiki on 07 May 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:16\u00a0<abusenius>\u00a0has quit  \n00:48\u00a0<jvelo>\u00a0has joined #xwiki  \n03:43\u00a0<mmercer>\u00a0has quit  \n04:30\u00a0<jvelo>\u00a0has quit  \n07:02\u00a0<Denis>\u00a0has joined #xwiki  \n07:04\u00a0<Denis1>\u00a0has quit  \n07:38\u00a0<rrodriguez>\u00a0has quit  \n07:57\u00a0<Guest34964>\u00a0has quit  \n08:14\u00a0<mflorea>\u00a0has joined #xwiki  \n08:31\u00a0<cjd>\u00a0has joined #xwiki  \n09:17\u00a0<jvipa5g>\u00a0has joined #xwiki  \n09:18\u00a0<jvipa5g>\u00a0The, file: [ \u00a0\u00a0] xwiki-enterprise-installer-generic-4.0-standard.jar \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a002-May-2012 13:14 \u00a0\u00a054M \u00a0\u00a0is CORRUPT!  \n09:19\u00a0<jvipa5g>\u00a0You can upload the file again?  \n09:19\u00a0<jvipa5g>\u00a0thanks  \n09:34\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:14\u00a0<rrodriguez>\u00a0has joined #xwiki  \n10:18\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:38\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:38\u00a0<evalica>\u00a0has joined #xwiki  \n11:06\u00a0<polx>\u00a0has joined #xwiki  \n11:19\u00a0<jvelo>\u00a0has joined #xwiki  \n11:24\u00a0<jvelociter>\u00a0has joined #xwiki  \n11:28\u00a0<jvelo>\u00a0has quit  \n11:34\u00a0<jvipa5g>\u00a0where I can download the. jar version 4.0, which is not corrupt.  \n11:40\u00a0<@cjd>\u00a0try this http://nexus.xwiki.org/nexus/service/local/repositories/releases/content/org/xwiki/enterprise/xwiki-enterprise-installer-generic/4.0/xwiki-enterprise-installer-generic-4.0-standard.jar  \n11:40\u00a0<@cjd>\u00a0working on replacing the copy in ow2, thanks for letting us know  \n11:47\u00a0<sburjan>\u00a0i tested it, it worked  \n11:47\u00a0<sburjan>\u00a0143M  \n11:51\u00a0<rrodriguez>\u00a0has quit  \n11:51\u00a0<jvipa5g>\u00a0You're welcome. ;-)  \n12:10\u00a0<jvelociter>\u00a0has quit  \n12:39\u00a0<mflorea>\u00a0has quit  \n13:17\u00a0<polx>\u00a0has quit  \n13:26\u00a0<mflorea>\u00a0has joined #xwiki  \n13:49\u00a0<gdelhumeau>\u00a0has quit  \n13:54\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n13:54\u00a0<omidp>\u00a0has joined #xwiki  \n13:58\u00a0<omidp>\u00a0has quit  \n14:03\u00a0<gdelhumeau>\u00a0has quit  \n14:38\u00a0<cjd>\u00a0has quit  \n14:38\u00a0<cjd>\u00a0has joined #xwiki  \n14:43\u00a0<sdumitriu>\u00a0has quit  \n15:34\u00a0<jvipa5g>\u00a0has quit  \n15:57\u00a0<jcater>\u00a0has joined #xwiki  \n16:02\u00a0<polx>\u00a0has joined #xwiki  \n16:06\u00a0<LoneRanger>\u00a0has left #xwiki  \n16:08\u00a0<jcater>\u00a0Are there known migration issues with the prepackaged .deb's at \"deb http://maven.xwiki.org stable/\" ?  \n16:08\u00a0<jcater>\u00a0I have a pretty vanilla install of 3.5 that was upgraded to 4.0:  \n16:08\u00a0<jcater>\u00a0\u00a0\u00a0\u00a0\u00a0ii \u00a0xwiki-enterprise-common \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a04.0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0XWiki enterprise common package  \n16:08\u00a0<jcater>\u00a0\u00a0\u00a0\u00a0\u00a0ii \u00a0xwiki-enterprise-pgsql-common \u00a0\u00a0\u00a0\u00a0\u00a04.0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0XWiki enterprise Tomcat common package  \n16:08\u00a0<jcater>\u00a0\u00a0\u00a0\u00a0\u00a0ii \u00a0xwiki-enterprise-tomcat-common \u00a0\u00a0\u00a0\u00a04.0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0XWiki enterprise Tomcat common package  \n16:08\u00a0<jcater>\u00a0\u00a0\u00a0\u00a0\u00a0ii \u00a0xwiki-enterprise-tomcat6-pgsql \u00a0\u00a0\u00a0\u00a04.0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0XWiki enterprise Tomcat/PostgreSQL  \n16:08\u00a0<jcater>\u00a0It is run against a postgresql 9.1 database.  \n16:08\u00a0<jcater>\u00a0The migration fails with \"com.xpn.xwiki.store.migration.DataMigrationException: Unable to update schema of database xwiki\".  \n16:08\u00a0<jcater>\u00a0(A more complete traceback is at http://pastebin.com/R4PEZCMj).  \n16:08\u00a0<jcater>\u00a0I saw that there was a migration issue against PostgreSQL databases (http://jira.xwiki.org/browse/XWIKI-7771), but that fix appears to be in the version I'm running.  \n16:09\u00a0<jcater>\u00a0and/or, is there a way to increase the logging so I can see what SQL statements are actually failing? Maybe I can massage the process along. (I'm only moderately java literate)  \n16:16\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* rcb06b78\u000f https://github.com/xwiki/xwiki-commons/commit/cb06b78adcc3292a0126fc829fe714d0e2b81e2a \u000f/ (20 files in 11 dirs):\u000f XCOMMONS-166: Add extension upgrade plan job - http://git.io/z9RHWA  \n16:17\u00a0<pgmjsd>\u00a0has joined #xwiki  \n16:26\u00a0<+tmortagne>\u00a0jcater: I don't think it has anything to do with the .deb  \n16:27\u00a0<+tmortagne>\u00a0could you create an issue on http://jira.xwiki.org and post all information you have as well as the hibernate configuration file  \n16:28\u00a0<+tmortagne>\u00a0but according the the error it's able to connect to the database anyway so I guess the hibernate configuration is ok  \n16:28\u00a0<+tmortagne>\u00a0but better be safe  \n16:29\u00a0<pgmjsd>\u00a0has quit  \n16:31\u00a0<jcater>\u00a0ok, thanks  \n16:31\u00a0<jcater>\u00a0I will do that  \n16:31\u00a0<+tmortagne>\u00a0thanks  \n16:31\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* rbc34cbf\u000f https://github.com/xwiki/xwiki-platform/commit/bc34cbf45f6d84a6e405228fe4ed667c950651ed \u000f/ (10 files in 2 dirs):\u000f XWIKI-7789: Add script API to upgrade installed extensions - http://git.io/VTfvsQ  \n16:37\u00a0<pgmjsd>\u00a0has joined #xwiki  \n16:38\u00a0<+Denis>\u00a0jcater: are you really sure you are starting from fresh 3.5 database ? according to your pastebin, it seems that the database has already partly started a 4.x migration with an older version than 4.0 final  \n16:40\u00a0<jcater>\u00a0hmm  \n16:40\u00a0<jcater>\u00a0did any RC-versions of 4.0 make it as .debs in that repository  \n16:41\u00a0<jcater>\u00a0it very well could be that an earlier version was grabbed and attempted/interrupted without me realizing it  \n16:42\u00a0<+Denis>\u00a0tmortagne: is it possible ?  \n16:43\u00a0<+tmortagne>\u00a0not in that repository (stable) no  \n16:43\u00a0<+tmortagne>\u00a0the milestone and RC are in the releases repository  \n16:43\u00a0<+Denis>\u00a0jcater: are you using stable ?  \n16:43\u00a0<+tmortagne>\u00a0Denis: yes from his first question  \n16:44\u00a0<jcater>\u00a0if tomcat was restarted while it was attempting the migration its first time, could that also cause what you're seeing?  \n16:45\u00a0<+Denis>\u00a0tmortagne: this is curious, since what it get says that some schema migration has been revised and was previously applied to its database in an older form  \n16:45\u00a0<jcater>\u00a0I had monit set up on that machine and I think it might've restarted tomcat at some point, but I'm not 100% sure  \n16:46\u00a0<+tmortagne>\u00a0Denis: you can look at http://maven.xwiki.org/stable/Packages.gz  \n16:47\u00a0<+tmortagne>\u00a0I can only find final versions in there  \n16:47\u00a0<+Denis>\u00a0jcater: the easiest solution for your issue is to use a backup version of your 3.5.1 database, before having been touched by any 4.x version, and use it with the latest 4.x. Do you have this backup ? could you confirm it works this way ?  \n16:47\u00a0<+tmortagne>\u00a0jcater: you sure you never changed the repository ?  \n16:48\u00a0<pgmjsd>\u00a0has quit  \n16:50\u00a0<pgmjsd>\u00a0has joined #xwiki  \n16:52\u00a0<jcater>\u00a0Denis: I'll check  \n16:53\u00a0<+Denis>\u00a0jcater: such backup should not contain databasechangelog tables  \n16:53\u00a0<jcater>\u00a0tmortagne: yeah. I installed xwiki some time last year, and it has just worked\u2026 no need to ever touch anything  \n16:54\u00a0<+tmortagne>\u00a0jcater: ok  \n17:10\u00a0<tmortagne>\u00a0has quit  \n17:16\u00a0<jcater>\u00a0has left #xwiki  \n17:18\u00a0<polx\\_>\u00a0has joined #xwiki  \n17:20\u00a0<polx>\u00a0has quit  \n17:20\u00a0<polx\\_>\u00a0is now known as <polx>  \n17:22\u00a0<evalica>\u00a0has quit  \n17:23\u00a0<jvelociter>\u00a0has joined #xwiki  \n17:23\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:26\u00a0<Enygma`>\u00a0has quit  \n17:26\u00a0<jcater>\u00a0has joined #xwiki  \n17:26\u00a0<jcater>\u00a0fwiw, that seems to be working. The migration has gotten further along this time.  \n17:26\u00a0<jcater>\u00a0I do get the occasional \"History for document with ID [-1795802201] cannot be recovered\" \u2026 I''m assuming that's not overly critical?  \n17:30\u00a0<@sdumitriu>\u00a0jcater: No, that's something that is already broken  \n17:30\u00a0<@sdumitriu>\u00a0So there's nothing that can be done  \n17:30\u00a0<@sdumitriu>\u00a0You can ignore that  \n17:33\u00a0<jcater>\u00a0btw, I've never been in here. \u00a0But complements to xwiki\u2026 my employees love it  \n17:33\u00a0<jcater>\u00a0they've grown quite dependent on it  \n17:36\u00a0<@sdumitriu>\u00a0That's good to hear  \n17:38\u00a0<jvelociter>\u00a0has quit  \n17:40\u00a0<jcater>\u00a0has quit  \n18:08\u00a0<jvelociter>\u00a0has joined #xwiki  \n18:34\u00a0<jvelociter>\u00a0has quit  \n18:49\u00a0<jvelociter>\u00a0has joined #xwiki  \n19:44\u00a0<abusenius>\u00a0has joined #xwiki  \n20:25\u00a0<CIA-74>\u00a0Marius Dumitru Florea\u000f master\u000f \\* rb9d797b\u000f https://github.com/xwiki/xwiki-platform/commit/b9d797b55ac8841684d26100528aff42c9598ce2 \u000f/ (8 files in 4 dirs):\u000f XWIKI-7790: Refactor the JavaScript code that handles the edit lock ...  \n20:27\u00a0<mflorea>\u00a0has quit  \n20:31\u00a0<polx\\_>\u00a0has joined #xwiki  \n20:34\u00a0<polx>\u00a0has quit  \n20:34\u00a0<polx\\_>\u00a0is now known as <polx>  \n20:47\u00a0<jstoldt>\u00a0has quit  \n20:47\u00a0<jamie\\_\\_wiki>\u00a0has quit  \n21:06\u00a0<rrodriguez>\u00a0has joined #xwiki  \n21:50\u00a0<jvdrean1>\u00a0has quit  \n23:52\u00a0<jvdrean1>\u00a0has joined #xwiki  \n23:53\u00a0<abusenius>\u00a0has quit  \n\n"}