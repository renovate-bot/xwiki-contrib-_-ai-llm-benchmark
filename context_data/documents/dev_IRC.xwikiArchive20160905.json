{"id": "dev:IRC.xwikiArchive20160905", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160905", "title": "IRC Archive for channel #xwiki on 05 September 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<DarkKnightCZ>\u00a0has quit  \n04:39\u00a0<sdumitriu1>\u00a0has quit  \n05:06\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n06:59\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n07:18\u00a0<DarkKnightCZ>\u00a0has quit  \n07:19\u00a0<msmeria>\u00a0has joined #xwiki  \n08:06\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n08:07\u00a0<vmassol>\u00a0has joined #xwiki  \n08:10\u00a0<vmassol>\u00a0has quit  \n08:43\u00a0<acotiuga>\u00a0has joined #xwiki  \n09:03\u00a0<vmassol>\u00a0has joined #xwiki  \n09:16\u00a0<vmassol>\u00a0good morning  \n09:21\u00a0<mflorea>\u00a0has joined #xwiki  \n09:39\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:42\u00a0<acotiuga>\u00a0Hello  \n09:43\u00a0<acotiuga>\u00a0Is this know \u00a0to anybody: [ERROR] Failed to execute goal org.sonatype.plugins:nexus-staging-maven-plugin:1.6.7:deploy (injected-nexus-deploy) on project xwikisas-parent-platform: Execution injected-nexus-deploy of goal org.sonatype.plugins:nexus-staging-maven-plugin:1.6.7:deploy failed: Nexus instance at base URL https://nexus.xwikisas.com:443/nexus/ does not support staging v2; reported status: NexusStatus [appName=Nexus Repository Manager, version=2.12.0-01, e  \n09:43\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:45\u00a0<vmassol>\u00a0acotiuga: looks like a version incompatibility between the maven plugin version and the nexus version  \n09:46\u00a0<vmassol>\u00a0you probably need to have the nexus server updated to a newer version  \n09:46\u00a0<vmassol>\u00a0s/updated/upgraded  \n10:20\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:47\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:49\u00a0<evalica>\u00a0has joined #xwiki  \n10:58\u00a0<mflorea>\u00a0vmassol: do we have info on xwiki.org about the required java version? i.e a table with xwiki version and the requried java version, at least for the XWiki versions where we changed the required java version  \n11:00\u00a0<vmassol>\u00a0yes  \n11:00\u00a0<vmassol>\u00a0mflorea: here: http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Installation#HHardwareandSoftwarerequirements  \n11:01\u00a0<mflorea>\u00a0great, thsnks  \n11:29\u00a0<Aranjedeath>\u00a0has quit  \n12:05\u00a0<evalica>\u00a0has quit  \n12:39\u00a0<xwikibot>\u00a0has joined #xwiki  \n13:11\u00a0<evalica>\u00a0has joined #xwiki  \n14:55\u00a0<Pbas>\u00a02016-09-05 11:14:47,397 [XWiki initialization] ERROR c.x.x.s.DBCPConnectionProvider - Could not create a DBCP pool. There is an error in the Hibernate configuration file, please review it.  \n14:55\u00a0<Pbas>\u00a0java.lang.NullPointerException: null \u00a0at java.util.Hashtable.put(Hashtable.java:459)  \n14:55\u00a0<Pbas>\u00a0If I put database setting directly in hibernate.xml without jndi, it works well. Any idea what is the problem?  \n14:56\u00a0<vmassol>\u00a0Pbas: do you have the full stack trace? (pastebin)  \n14:57\u00a0<DarkKnightCZ>\u00a0Hi, I'm currently facing issue with 8.2.1 when global users assigned to global group don't have access in subwiki... $xwiki.hasAccessLevel(\"view\", \"XWiki.someusername\", \"Some page\") \u00a0returns true, while xwiki:XWiki.someusername returns false (and it's cause of why users don't have access there)... if user is assigned manually in subwiki (as user, not user permissions), it works  \n14:57\u00a0<DarkKnightCZ>\u00a0any ideas what could cause this issue?  \n14:59\u00a0<gdelhumeau>\u00a0DarkKnightCZ: could you try after having saved (without any modification) the XWikiPreferences of the main wiki?  \n15:00\u00a0<DarkKnightCZ>\u00a0gdelhumeau: no luck (at least with the hasAccess), i will try with the user  \n15:02\u00a0<DarkKnightCZ>\u00a0ok, so no luck with the user either  \n15:03\u00a0<DarkKnightCZ>\u00a0but apparently it happens only for certain wikis  \n15:03\u00a0<DarkKnightCZ>\u00a0some work, some don't  \n15:04\u00a0<Pbas>\u00a0Here you are my stack trace: http://pastebin.com/UJfqYBAZ  \n15:05\u00a0<DarkKnightCZ>\u00a0Pbas: try to diff your current hibernate.cfg.xml file with distribution one from 8.2.1, i guess some variable have different naming  \n15:06\u00a0<Pbas>\u00a0Ok I will  \n15:07\u00a0<msmeria>\u00a0has quit  \n15:08\u00a0<gdelhumeau>\u00a0DarkKnightCZ: you might experience an issue we have with groups in the security cache  \n15:11\u00a0<Pbas>\u00a0nope it seem it is not \u00a0wrong variable naming in hibernate.cfg.xml. Anyway with my hibernate.cfg.xml, if I overwrite database setting with jndi parameters (with correct web.xml), xwiki could not connect anymore at my DB  \n15:11\u00a0<DarkKnightCZ>\u00a0gdelhumeau: any things to check if its the same issue? Apparently hasAccessLevel with just XWiki.somerandomstring also returns true, so xwiki:XWiki.username is the proper one, but it's only valid if user is assigned into users...  \n15:13\u00a0<DarkKnightCZ>\u00a0if i could guess (and the issue is indeed with security cache), maybe the limits (or handling or something) have changed between 7.1 (where it worked) and 8.2.1... so maybe it works only for some users / wikis, because we have quite a lot of users and wikis (13k users, 61 wikis)  \n15:38\u00a0<vmassol>\u00a0Pbas: dbcpProperties.put(\"driverClassName\", jdbcDriverClass);  \n15:38\u00a0<vmassol>\u00a0(that's line 120)  \n15:38\u00a0<vmassol>\u00a0in DBCPConnectionProvider  \n15:39\u00a0<Pbas>\u00a0in my server.xml?  \n15:39\u00a0<DarkKnightCZ>\u00a0gdelhumeau: when i set trace on org.xwiki.security.authorization, after adding user into group only thing i can see is bunch of Remove child \u00a0and Remove entry about that user and when the page is opened no entries in log regarding the user / page ... any ideas what to check / debug?  \n15:39\u00a0<vmassol>\u00a0this corresponds to the hibernate.connection.driver\\_class property from hibernate.cfg.xml  \n15:39\u00a0<vmassol>\u00a0Pbas: no, this is the stacktrace you get, the NPE  \n15:40\u00a0<vmassol>\u00a0btw  \n15:40\u00a0<vmassol>\u00a0Caused by: org.infinispan.jmx.JmxDomainConflictException: ISPN000034: There's already a JMX MBean instance type=CacheManager,name=\"xwiki\" already registered under 'org.xwiki.infinispan' JMX domain. If you want to allow multiple instances configured with same JMX domain enable 'allowDuplicateDomains' attribute in 'globalJmxStatistics' config element  \n15:40\u00a0<DarkKnightCZ>\u00a0hmm, okay so interesting fact... user has access to the wiki, but not to some spaces (some)  \n15:40\u00a0<vmassol>\u00a0means that you have 2 xwiki instances running in the same servlet container  \n15:40\u00a0<Pbas>\u00a0yes I know I diidn't manage to fix this  \n15:40\u00a0<vmassol>\u00a0(or that you didn't stop the container before restarting it)  \n15:40\u00a0<vmassol>\u00a0\\*it = xwiki  \n15:41\u00a0<vmassol>\u00a0basically you need to restart tomcat to restart xwiki  \n15:41\u00a0<vmassol>\u00a0and not just restarted the webapp  \n15:41\u00a0<vmassol>\u00a0\\*restart  \n15:43\u00a0<Pbas>\u00a0yes I do a shutdown + ps \u00a0to watch java down + rm cache + temp and finaly a startup.sh again  \n15:44\u00a0<Pbas>\u00a0About DB, strange becasue my server.xml contains: driverClassName=\"org.postgresql.Driver\"  \n15:45\u00a0<tmortagne>\u00a0Pbas: did you setup XWiki as root app  \n15:45\u00a0<tmortagne>\u00a0?  \n15:46\u00a0<Pbas>\u00a0yes  \n15:46\u00a0<tmortagne>\u00a0maybe the way you did it the same XWiki instance is registere both as root and as \"xwiki\" ending up as two different instances from tomcat point of view  \n15:46\u00a0<gdelhumeau>\u00a0DarkKnightCZ: apparently it's not http://jira.xwiki.org/browse/XWIKI-12570 ?  \n15:48\u00a0<Pbas>\u00a0I don't know, i must resolve my jndi connector first and I will check this ty :-)  \n15:48\u00a0<DarkKnightCZ>\u00a0gdelhumeau: no no, no subgroups there... also it doesn't matter if the user in group is identified with \"username\", \"XWiki.username\" or \"xwiki:XWiki.username\"... user can access the wiki but not certain spaces  \n15:50\u00a0<DarkKnightCZ>\u00a0also if the space contains spaces doesn't matter (i'm trying maximum length now)  \n15:53\u00a0<DarkKnightCZ>\u00a0ok, it's not anything with length of the page name, resaving the page didn't help either  \n16:02\u00a0<Pbas>\u00a0vmassol: I didn't understand what I must check about \"dbcpProperties.put(\"driverClassName\", jdbcDriverClass);\"  \n16:03\u00a0<DarkKnightCZ>\u00a0gdelhumeau: the symptoms look like the one fixed in XWIKI-12016, not a clue what is in XWIKI-11877 though since i don't have access there  \n16:03\u00a0<gdelhumeau>\u00a0DarkKnightCZ: it seems to be a new issue  \n16:03\u00a0<gdelhumeau>\u00a0you should report it on jira  \n16:05\u00a0<DarkKnightCZ>\u00a0gdelhumeau: okay... i will try to disable rights caching mechanism to see if it helps, after that i will create the issue  \n16:05\u00a0<vmassol>\u00a0Pbas: since there was a NPE, I suggested checking the property name, maybe you had some typo  \n16:06\u00a0<Pbas>\u00a0NPE ?  \n16:06\u00a0<vmassol>\u00a0NUllPointerException  \n16:07\u00a0<Pbas>\u00a0ha :)  \n16:08\u00a0<DarkKnightCZ>\u00a0Oh, and apparently extensions.xwiki.org throws 500 when accessed from my xwiki servers :) curl -vvv 'http://extensions.xwiki.org/xwiki/rest/repository/extensions/org.xwiki.enterprise%3Axwiki-enterprise-ui-wiki/versions?requireTotalHits=true&start=0&number=-1' returns internal server error  \n16:23\u00a0<tmortagne>\u00a0that's weird http://extensions.xwiki.org/xwiki/rest/repository/extensions/org.xwiki.enterprise%3Axwiki-enterprise-ui-wiki/versions?requireTotalHits=true&start=0&number=-1 works well from FF for me  \n16:29\u00a0<DarkKnightCZ>\u00a0tmortagne: it works also without any issues from my laptop, but when issued from server, server returns 500  \n16:30\u00a0<mflorea>\u00a0has quit  \n16:31\u00a0<DarkKnightCZ>\u00a0gdelhumeau: found the \"issue\"... locally set rights for WebHome, although i swear I've checked that  \n16:31\u00a0<tmortagne>\u00a0DarkKnightCZ: could you the request now, looking at the log  \n16:31\u00a0<acotiuga>\u00a0has quit  \n16:31\u00a0<DarkKnightCZ>\u00a0tmortagne: done, the ip address should be 131.207.242.6  \n16:32\u00a0<tmortagne>\u00a0hmm actually I think I know  \n16:32\u00a0<tmortagne>\u00a0it's probably cloudflare  \n16:32\u00a0<tmortagne>\u00a0useragent is mandatory for request trough cloudflare  \n16:33\u00a0<DarkKnightCZ>\u00a0that shouldn't be the cause  \n16:33\u00a0<DarkKnightCZ>\u00a0i will ping that via extension updater which sends useragent  \n16:33\u00a0<DarkKnightCZ>\u00a0done  \n16:33\u00a0<tmortagne>\u00a0if you don't provide a useragent cloudflare will ditch you for sure  \n16:35\u00a0<DarkKnightCZ>\u00a0yup... same issue if i try useragent 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36' or 'XWikiExtensionManager'  \n16:39\u00a0<DarkKnightCZ>\u00a0tmortagne: works now  \n17:03\u00a0<DarkKnightCZ>\u00a0has quit  \n17:15\u00a0<Pbas>\u00a0About my JNDI problem, to test: I overwrite my xwiki 8.2.1 hibernate.xml file with \u00a0my old one (xwiki 7.0.1) and ... tadaaaaaa my xwiki start well.  \n17:16\u00a0<Pbas>\u00a0I must found now which line was gulty  \n17:16\u00a0<Pbas>\u00a0ty :)  \n17:24\u00a0<evalica>\u00a0has quit  \n17:25\u00a0<yann\\_>\u00a0has joined #xwiki  \n17:32\u00a0<yann\\_>\u00a0Hi, search engine Solr (Xwiki-8.2.1) does not return all the good results when I write 2 words in the box. Of course I have done a reindex but it doesn't change anything.  \n17:38\u00a0<yann\\_m>\u00a0has joined #xwiki  \n17:38\u00a0<yannick>\u00a0has joined #xwiki  \n17:38\u00a0<yannick>\u00a0has quit  \n17:45\u00a0<vmassol>\u00a0has quit  \n17:47\u00a0<Trefex\\_>\u00a0has joined #xwiki  \n17:48\u00a0<vmassol>\u00a0has joined #xwiki  \n17:48\u00a0<gdelhumeau\\_>\u00a0has joined #xwiki  \n17:48\u00a0<M-cjd>\u00a0has quit  \n17:48\u00a0<sorinello>\u00a0has quit  \n17:49\u00a0<Trefex>\u00a0has quit  \n17:49\u00a0<dcht00>\u00a0has quit  \n17:49\u00a0<Pbas>\u00a0has quit  \n17:49\u00a0<gdelhumeau>\u00a0has quit  \n17:49\u00a0<mflorea>\u00a0has joined #xwiki  \n17:49\u00a0<dcht00>\u00a0has joined #xwiki  \n17:49\u00a0<sorinello>\u00a0has quit  \n17:50\u00a0<Pbas>\u00a0has joined #xwiki  \n17:51\u00a0<M-cjd>\u00a0has joined #xwiki  \n17:54\u00a0<tmortagne>\u00a0has quit  \n17:56\u00a0<Pbas>\u00a0About JNDI my hibernate.xml contains this line: \"<property name=\"connection.provider\\_class\">com.xpn.xwiki.store.DBCPConnectionProvider</property>\" :-(  \n17:57\u00a0<Pbas>\u00a0I removed dbcp.\\* properies then  \n17:58\u00a0<Pbas>\u00a0NTF (ntf): my wrong jmx multi instances ;-)  \n17:58\u00a0<Pbas>\u00a0(next to fix)  \n18:47\u00a0<mflorea>\u00a0has quit  \n18:53\u00a0<gdelhumeau\\_>\u00a0has quit  \n19:06\u00a0<yann\\_m>\u00a0has quit  \n19:10\u00a0<yann\\_>\u00a0has quit  \n19:43\u00a0<ClemensR>\u00a0has quit  \n20:19\u00a0<Enygma`>\u00a0has quit  \n21:55\u00a0<evalica>\u00a0has joined #xwiki  \n21:56\u00a0<mflorea>\u00a0has joined #xwiki  \n22:02\u00a0<M-yflory1>\u00a0has joined #xwiki  \n22:10\u00a0<sagarhani>\u00a0has quit  \n22:10\u00a0<M-yflory>\u00a0has quit  \n22:11\u00a0<sagarhani>\u00a0has joined #xwiki  \n22:13\u00a0<vmassol>\u00a0has quit  \n22:41\u00a0<evalica>\u00a0has quit  \n23:06\u00a0<mflorea>\u00a0has quit  \n23:57\u00a0<sdumitriu2>\u00a0has joined #xwiki  \n23:57\u00a0<sdumitriu2>\u00a0has quit\n"}