{"id": "dev:IRC.xwikiArchive20121014", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20121014", "title": "IRC Archive for channel #xwiki on 14 October 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n17:04\u00a0<xwikibot>\u00a0has joined #xwiki  \n17:11\u00a0<vmassol>\u00a0has quit  \n17:37\u00a0<vmassol>\u00a0has joined #xwiki  \n17:47\u00a0<vmassol>\u00a0has quit  \n17:52\u00a0<vmassol>\u00a0has joined #xwiki  \n18:07\u00a0<vmassol>\u00a0has quit  \n18:09\u00a0<vmassol>\u00a0has joined #xwiki  \n18:13\u00a0<Denis>\u00a0has quit  \n18:38\u00a0<vmassol>\u00a0has quit  \n18:57\u00a0<vmassol>\u00a0has joined #xwiki  \n18:58\u00a0<dirk\\_schmitt>\u00a0has joined #xwiki  \n19:00\u00a0<dirk\\_schmitt>\u00a0Problem migration from XWiki 3.1 to 4.2:  \n19:00\u00a0<dirk\\_schmitt>\u00a0After accessing new XWiki the following exception is thrown:  \n19:00\u00a0<dirk\\_schmitt>\u00a0com.xpn.xwiki.store.migration.MigrationRequiredException: Database xwiki needs migration(s), it could not be safely used!  \n19:00\u00a0<dirk\\_schmitt>\u00a0Any hints ?  \n19:00\u00a0<vmassol>\u00a0dirk\\_schmitt: you need to run migrations  \n19:01\u00a0<@sdumitriu>\u00a0Look at the server logs  \n19:01\u00a0<vmassol>\u00a0they're on by default but you may have changed the default settings  \n19:01\u00a0<@sdumitriu>\u00a0The actual error should be at the top of the logs  \n19:01\u00a0<@sdumitriu>\u00a0And it's not printed in the browser  \n19:03\u00a0<dirk\\_schmitt>\u00a0I'm converting 2 instances. The Xwiki configuration files are equivalent. The 1st (smaller) runs the migration, the big one shows this problem.  \n19:06\u00a0<dirk\\_schmitt>\u00a0\u00a0grep -v ^# xwiki.cfg \u00a0|grep -i migr  \n19:06\u00a0<dirk\\_schmitt>\u00a0xwiki.store.migration=1  \n19:12\u00a0<dirk\\_schmitt>\u00a0SEVERE: Servlet.service() for servlet [action] in context with path [/xwiki] threw exception [com.xpn.xwiki.XWikiException: Error number 3 in 0: Could not initialize main XWiki context  \n19:12\u00a0<dirk\\_schmitt>\u00a0Wrapped Exception: Error number 3202 in 3: Exception while reading document [xwiki:XWiki.XWikiPreferences]  \n19:12\u00a0<dirk\\_schmitt>\u00a0Wrapped Exception: Error number 3301 in 3: Exception while switching to database xwiki  \n19:12\u00a0<dirk\\_schmitt>\u00a0Wrapped Exception: Database xwiki needs migration(s), it could not be safely used!] with root cause  \n19:12\u00a0<dirk\\_schmitt>\u00a0com.xpn.xwiki.store.migration.MigrationRequiredException: Database xwiki needs migration(s), it could not be safely used!  \n19:13\u00a0<@sdumitriu>\u00a0Should be even before that  \n19:13\u00a0<@sdumitriu>\u00a0Right at the start  \n19:14\u00a0<@sdumitriu>\u00a0Logs starting with:  \n19:14\u00a0<@sdumitriu>\u00a0Running storage schema updates and migrations  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:22:50 odie local5.info Oct [] -- \u00a014, 2012 7:22:50 PM org.apache.catalina.startup.Catalina start\\INFO: Server startup in 10071 ms\\  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:22:58 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.hibernate.HibernateDataMigrationManager Running storage schema updates and migrations  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:22:58 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.hibernate.HibernateDataMigrationManager Current storage version = [35100]  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:22:58 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.hibernate.HibernateDataMigrationManager List of migrations that will be executed:  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:22:58 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.hibernate.HibernateDataMigrationManager \u00a0\u00a0R35102XWIKI7771 - See http://jira.xwiki.org/browse/XWIKI-7771  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:22:58 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.hibernate.HibernateDataMigrationManager \u00a0\u00a0R40000XWIKI6990 - Convert document IDs to use the new improved hash algorithm.  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:22:58 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.hibernate.HibernateDataMigrationManager \u00a0\u00a0R40001XWIKI7540 - See http://jira.xwiki.org/browse/XWIKI-7540  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:23:01 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.hibernate.R40000XWIKI6990DataMigration [R40000XWIKI6990] - 41 schema updates required.  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:23:02 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.liquibase Successfully acquired change log lock  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:23:02 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.liquibase Reading from databasechangelog  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:23:02 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.liquibase Reading from databasechangelog  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:23:03 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.liquibase Successfully released change log lock  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:23:03 odie local5.info [xwiki-c42] [] -- \u00a0[http://odie.server.computer42.org:42180/xwiki/bin/view/Main/] com.xpn.xwiki.store.migration.hibernate.HibernateDataMigrationManager Failed to migrate database [xwiki]...  \n19:25\u00a0<dirk\\_schmitt>\u00a0Oct 14 19:23:03 odie local5.info #011at [] -- \u00a0com.xpn.xwiki.store.migration.hibernate.HibernateDataMigrationManager.updateSchema(HibernateDataMigrationManager.java:179)  \n20:00\u00a0<dirk\\_schmitt>\u00a0???  \n20:08\u00a0<vmassol>\u00a0you need to use a paste tool such as pastebin  \n20:26\u00a0<dirk\\_schmitt>\u00a0better: http://www.computer42.org/~dirk/tmp/xwiki-migration-log.t ?  \n20:27\u00a0<cjd>\u00a0has quit  \n20:28\u00a0<vmassol>\u00a0pastebin would have been better  \n20:29\u00a0<vmassol>\u00a0dirk\\_schmitt: are you sure that's all there's in the console?  \n20:29\u00a0<vmassol>\u00a0there's no error in there....  \n20:30\u00a0<vmassol>\u00a0I'm not sure I can help you on this since I don't know the migration system very well. You might want to come here again on Monday when Denis is connected  \n20:48\u00a0<dirk\\_schmitt>\u00a0o.k. i will come for this tomorrow again.  \n20:49\u00a0<vmassol>\u00a0ok  \n20:49\u00a0<vmassol>\u00a0actually  \n20:49\u00a0<vmassol>\u00a0it's probably even better to send a mail to the list  \n20:56\u00a0<jvdrean>\u00a0has joined #xwiki  \n21:20\u00a0<mrvanes>\u00a0has quit  \n21:22\u00a0<dirk\\_schmitt>\u00a0I have a rendering issue after migration to 4.2:  \n21:22\u00a0<dirk\\_schmitt>\u00a0old: http://www.pfarreiengemeinschaft-westum-loehndorf.de/xwiki2/bin/view/ColorThemes/Vatican  \n21:22\u00a0<dirk\\_schmitt>\u00a0new: http://www.pfarreiengemeinschaft-westum-loehndorf.de/xwiki/bin/view/ColorThemes/Vatican  \n21:22\u00a0<dirk\\_schmitt>\u00a0The letters are now \"blurred\"  \n21:24\u00a0<vmassol>\u00a0I don't see anything blurred  \n21:24\u00a0<vmassol>\u00a0what letters?  \n21:24\u00a0<vmassol>\u00a0try clearing your browser cache maybe  \n21:26\u00a0<vmassol>\u00a0what you can do is check with firebug or chrome dev tool to see the change of style if you notice something amiss  \n21:28\u00a0<dirk\\_schmitt>\u00a0Is in firefox and chromium. See http://www.computer42.org/~dirk/tmp/www.pfarreiengemeinschaft-westum-loehndorf.de%20screen%20capture%202012-10-14-21-25-49.jpg for an example.  \n21:30\u00a0<dirk\\_schmitt>\u00a0The blurred text is in the menu bar parts. The font in the content are is fine.  \n21:30\u00a0<vmassol>\u00a0I see the blurring too now that you've pointed it out  \n21:30\u00a0<vmassol>\u00a0probably some css style change  \n21:30\u00a0<vmassol>\u00a0you can check that out with firebug or chrome dev tool  \n21:31\u00a0<+sburjan`>\u00a0it's a known issue. AFAIK you'll have to manually modigy the CSS  \n21:31\u00a0<vmassol>\u00a0is it?  \n21:31\u00a0<+sburjan`>\u00a0yes.  \n21:31\u00a0<vmassol>\u00a0we've introduced a regression?  \n21:31\u00a0<polx>\u00a0has joined #xwiki  \n21:31\u00a0<vmassol>\u00a0do you have a link?  \n21:31\u00a0<+sburjan`>\u00a0if I remember correctly, Caty know this.  \n21:31\u00a0<vmassol>\u00a0that's serious if it is  \n21:31\u00a0<vmassol>\u00a0it should be a blocker  \n21:32\u00a0<vmassol>\u00a0since it's a regression  \n21:32\u00a0<+sburjan`>\u00a0This is old, when we improved our Colour Theme application. This is a migration issue which has to be manually fixed  \n21:32\u00a0<vmassol>\u00a0is it in the release notes at least?  \n21:32\u00a0<+sburjan`>\u00a0Caty told me this can't be fixed. something about the skin, css, etc  \n21:32\u00a0<+sburjan`>\u00a0this is quite old actually.  \n21:33\u00a0<vmassol>\u00a0it's not that old  \n21:33\u00a0<vmassol>\u00a0a lot of people are migrating from 3.0 or 3.1 to 4.2  \n21:33\u00a0<vmassol>\u00a0(ie upgrading a 1 year old version)  \n21:34\u00a0<+sburjan`>\u00a0can't find when we introduced this. I think that with the new skin change  \n21:37\u00a0<+sburjan`>\u00a0it seems since 3.  \n21:37\u00a0<+sburjan`>\u00a03.4  \n21:38\u00a0<+sburjan`>\u00a0dirk\\_schmitt: did you import the 4.2 xar ?  \n21:39\u00a0<dirk\\_schmitt>\u00a0o.k. I found the workaround. The \"Menu gradient color\" was not set. I set it now to the same value as the \"Menu background color\".  \n21:39\u00a0<jvdrean>\u00a0has quit  \n21:39\u00a0<jvdrean>\u00a0has joined #xwiki  \n21:47\u00a0<vmassol>\u00a0has quit  \n21:47\u00a0<dirk\\_schmitt>\u00a0The 4.2 xar was imported. The color schema used was \u00a0created in September 2010.  \n21:48\u00a0<dirk\\_schmitt>\u00a0The diff for the \"workaround\" is:  \n21:48\u00a0<dirk\\_schmitt>\u00a0Objekt Nummer 0 vom Typ ColorThemes.ColorThemeClass ge\u00e4ndert  \n21:49\u00a0<dirk\\_schmitt>\u00a0Content menu text color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#FFFFCC  \n21:49\u00a0<dirk\\_schmitt>\u00a0Content submenu background color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#613018  \n21:49\u00a0<dirk\\_schmitt>\u00a0Content menu gradient color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#613018  \n21:49\u00a0<dirk\\_schmitt>\u00a0Menu gradient color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#613018  \n21:49\u00a0<dirk\\_schmitt>\u00a0Secondary action button gradient color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#FFCC99  \n21:49\u00a0<dirk\\_schmitt>\u00a0Content menu background color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#613018  \n21:49\u00a0<dirk\\_schmitt>\u00a0Add menu entry background color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#4D9244  \n21:49\u00a0<dirk\\_schmitt>\u00a0Panel header gradient color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#FBD79D  \n21:49\u00a0<dirk\\_schmitt>\u00a0Add menu entry link color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#FFFFFF  \n21:49\u00a0<dirk\\_schmitt>\u00a0Primary action button gradient color  \n21:49\u00a0<dirk\\_schmitt>\u00a0\u00a0\u00a0\u00a0\u00a0#CC6633  \n21:51\u00a0<coud5>\u00a0has quit  \n22:17\u00a0<vmassol>\u00a0has joined #xwiki  \n22:26\u00a0<vmassol>\u00a0has quit  \n22:35\u00a0<vmassol>\u00a0has joined #xwiki  \n22:35\u00a0<abusenius>\u00a0has joined #xwiki  \n22:52\u00a0<abusenius>\u00a0has quit  \n23:31\u00a0<cjd>\u00a0has joined #xwiki  \n23:36\u00a0<polx>\u00a0has quit  \n23:49\u00a0<vmassol>\u00a0has quit  \n23:59\u00a0<cjd>\u00a0has quit  \n\n"}