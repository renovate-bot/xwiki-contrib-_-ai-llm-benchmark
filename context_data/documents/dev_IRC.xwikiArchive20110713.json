{"id": "dev:IRC.xwikiArchive20110713", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110713", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:04\u00a0<cmarcoin>\u00a0has quit  \n00:09\u00a0<vmassol>\u00a0has quit  \n00:48\u00a0<sdumitriu>\u00a0has quit  \n00:48\u00a0<sdumitriu>\u00a0has joined #xwiki  \n03:27\u00a0<abusenius>\u00a0has quit  \n03:28\u00a0<abusenius>\u00a0has joined #xwiki  \n04:06\u00a0<abusenius>\u00a0has quit  \n04:46\u00a0<DrLou>\u00a0has quit  \n07:41\u00a0<mflorea>\u00a0has joined #xwiki  \n08:03\u00a0<vmassol>\u00a0has joined #xwiki  \n08:03\u00a0<vmassol>\u00a0has quit  \n08:34\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:21\u00a0<vmassol>\u00a0has joined #xwiki  \n09:32\u00a0<vmassol>\u00a0good morning  \n09:32\u00a0<vmassol>\u00a0question: should we turn stats on on myxwiki.org?  \n09:33\u00a0<vmassol>\u00a0(someone is asking to get the \"recently viewed\" panel on their subwiki)  \n09:33\u00a0<vmassol>\u00a0do we still have perf issues with them?  \n09:35\u00a0<pulasthi>\u00a0has joined #xwiki  \n09:36\u00a0<pulasthi>\u00a0cjdelisle: hi  \n09:36\u00a0<vmassol>\u00a0stats are off too on xwiki.org  \n09:37\u00a0<@cjdelisle>\u00a0howdy  \n09:39\u00a0<+tmortagne>\u00a0vmassol: there should not be speed issue with stats since a long time but there could quickly be size issue given the activity on myxwiki.org since statistics are not consolidated and don't stop growing AFAIK  \n09:40\u00a0<+tmortagne>\u00a0mostly specking about visit statistics  \n09:40\u00a0<+tmortagne>\u00a0speaking  \n09:40\u00a0<+tmortagne>\u00a0should be ok for simple stats like view/edit  \n09:41\u00a0<vmassol>\u00a0view is the most problematci I think  \n09:41\u00a0<vmassol>\u00a0on a public wiki  \n09:41\u00a0<vmassol>\u00a0no?  \n09:41\u00a0<+tmortagne>\u00a0could be big but it's finite depending on the number of pages and users  \n09:41\u00a0<+tmortagne>\u00a0not like visit stats which add entry for each new visit and never clean old ones  \n09:41\u00a0<vmassol>\u00a0indeed  \n09:42\u00a0<vmassol>\u00a0but table size is not an issue  \n09:42\u00a0<vmassol>\u00a0if it has the proper indexes  \n09:42\u00a0<vmassol>\u00a0I think the issue we have currently is more in accessing the stats page than in recording the stats  \n09:42\u00a0<+tmortagne>\u00a0my concern was just size itself on the disk actually  \n09:42\u00a0<vmassol>\u00a0hwoever I'm sure that recording the stats affectt he perf  \n09:42\u00a0<+tmortagne>\u00a0not really speak when reading the table  \n09:42\u00a0<vmassol>\u00a0I just don't know how much  \n09:42\u00a0<+tmortagne>\u00a0spead  \n09:43\u00a0<+tmortagne>\u00a0that should not affect them much  \n09:43\u00a0<+tmortagne>\u00a0it's done in another thread and merged  \n09:43\u00a0<vmassol>\u00a0yes that's an issue  \n09:43\u00a0<pulasthi>\u00a0cjdelisle: can i pm you  \n09:43\u00a0<@cjdelisle>\u00a0sure  \n09:44\u00a0<+tmortagne>\u00a0merged=all the same type of stats since last stat save are merge into one entry before being saved  \n09:45\u00a0<+tmortagne>\u00a0vmassol: now for the size thing I think we already have the exact same issue with activity stream, don't we ?  \n09:45\u00a0<vmassol>\u00a0almost  \n09:45\u00a0<vmassol>\u00a0the AS supports clean up  \n09:46\u00a0<+tmortagne>\u00a0by hand ?  \n09:46\u00a0<vmassol>\u00a0we need to configure it for myxwiki.org and xwiki.org  \n09:46\u00a0<vmassol>\u00a0no automatically  \n09:46\u00a0<+tmortagne>\u00a0ok  \n09:46\u00a0<sburjan>\u00a0has joined #xwiki  \n09:46\u00a0<vmassol>\u00a0we should check the size of the table  \n09:47\u00a0<+tmortagne>\u00a0maybe it's a false problem, visit stats are infinite but it's not storing much data either  \n09:47\u00a0<vmassol>\u00a0#-# Number of days the events should be kept (0 or any negative value: infinite duration)  \n09:47\u00a0<vmassol>\u00a0#-# Note: if this value is greater than 0 a scheduler job will be created, this job will then be fired every week to  \n09:47\u00a0<vmassol>\u00a0#-# delete events older than the configured value.  \n09:47\u00a0<vmassol>\u00a0#-# Default: 0  \n09:47\u00a0<vmassol>\u00a0# xwiki.plugin.activitystream.daystokeepevents=0  \n09:47\u00a0<+tmortagne>\u00a0should not be too hard to to the same for statistics table  \n09:49\u00a0<pulasthi>\u00a0has left #xwiki  \n09:52\u00a0<vmassol>\u00a0126888 rows on myxwiki.org for as events  \n09:53\u00a0<vmassol>\u00a0data lenght 37488316  \n09:53\u00a0<vmassol>\u00a0(bytes)  \n09:53\u00a0<vmassol>\u00a037MB  \n09:53\u00a0<vmassol>\u00a0attachments take 32MB  \n09:53\u00a0<+tmortagne>\u00a0so pretty small if we never clean them  \n09:54\u00a0<vmassol>\u00a0(archived)  \n09:54\u00a0<vmassol>\u00a0and 26MB for current attachments  \n09:54\u00a0<+tmortagne>\u00a0(events)  \n09:54\u00a0<vmassol>\u00a0the biggest is xwikircs  \n09:54\u00a0<+tmortagne>\u00a0weird we don't have more attachment on myxwiki.org  \n09:54\u00a0<vmassol>\u00a04933775924 bytes  \n09:54\u00a0<vmassol>\u00a05GB if i read correctly  \n09:55\u00a0<vmassol>\u00a0btw we alreayd have some stats in the db  \n09:55\u00a0<vmassol>\u00a0for xwikistatsvisit it's taking 31549948  \n09:55\u00a0<+tmortagne>\u00a0yep probably old ones  \n09:55\u00a0<vmassol>\u00a031MB  \n09:55\u00a0<vmassol>\u00a0for 142695 rows  \n09:56\u00a0<vmassol>\u00a0avg row length is 221 bytes  \n09:56\u00a0<vmassol>\u00a0for an event it's 295 bytes fyi  \n09:58\u00a0<+tmortagne>\u00a0most of the size is probably taken by the document and user names  \n09:58\u00a0<+tmortagne>\u00a0would be reduced a lot if we had real unique number id for documents I guess  \n09:59\u00a0<+tmortagne>\u00a0would not be good actually  \n09:59\u00a0<+tmortagne>\u00a0since we would lost deleted document related stats  \n10:11\u00a0<+tmortagne>\u00a0s/lost/loose/  \n10:16\u00a0<evalica>\u00a0has joined #xwiki  \n10:23\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:15\u00a0<\\_melvin\\_>\u00a0has quit  \n12:12\u00a0<jvelociter>\u00a0has joined #xwiki  \n12:13\u00a0<+jvelociter>\u00a0hello friends  \n12:13\u00a0<+jvelociter>\u00a0anyone would know what this kind of build failure would mean : http://ci.xwiki.org/job/xwiki-platform/338/org.xwiki.platform$xwiki-platform-search-lucene/console  \n12:13\u00a0<+jvelociter>\u00a0it looks like it fails abruptly  \n12:14\u00a0<+jvelociter>\u00a0although there is nothing to compile  \n12:24\u00a0<vmassol>\u00a0jvelociter: cehcking  \n12:24\u00a0<vmassol>\u00a0I don't see any failure  \n12:24\u00a0<+tmortagne>\u00a0jvelociter: \"[ERROR] com.xpn.xwiki.plugin.lucene.IndexRebuilder: Method 'protected int addTranslationsOfDocument(com.xpn.xwiki.doc.XWikiDocument, com.xpn.xwiki.XWikiContext)' has been removed\"  \n12:24\u00a0<+tmortagne>\u00a0you need to look in the main build log  \n12:25\u00a0<+jvelociter>\u00a0WDYM ?  \n12:25\u00a0<+tmortagne>\u00a0looks like clirr does not appear in the project log  \n12:25\u00a0<+tmortagne>\u00a0log at the whole build log  \n12:25\u00a0<+tmortagne>\u00a0not the log isolated by jenkins  \n12:25\u00a0<+tmortagne>\u00a0looks like it forget some thing like the clirr log  \n12:26\u00a0<+tmortagne>\u00a0what I don't understand is that I fixed that yesterday  \n12:26\u00a0<+tmortagne>\u00a0the error not the jenkins bug ;)  \n12:26\u00a0<+tmortagne>\u00a0I added an exclude for this class at least  \n12:27\u00a0<+tmortagne>\u00a0ho you are looking at en old build  \n12:27\u00a0<+tmortagne>\u00a0so that's fixed  \n12:27\u00a0<+tmortagne>\u00a0s/en/an/  \n12:28\u00a0<+jvelociter>\u00a0ok  \n12:28\u00a0<+tmortagne>\u00a0jvelociter: look at http://ci.xwiki.org/job/xwiki-platform/338/console  \n12:28\u00a0<+tmortagne>\u00a0you will see the error in red  \n12:35\u00a0<+jvelociter>\u00a0there are some clustering and web standard tests failing in XE  \n12:36\u00a0<+jvelociter>\u00a0for XHMTL validity looks like some panels are failing  \n12:36\u00a0<+jvelociter>\u00a0could it be due to the move to syntax 2.0 ?  \n12:36\u00a0<+tmortagne>\u00a0jvelociter: fixed the clustering one yesterday  \n12:36\u00a0<+jvelociter>\u00a0ok  \n12:36\u00a0<+tmortagne>\u00a0and yes the web standard are caused by syntax 2.0 move  \n12:36\u00a0<+jvelociter>\u00a0it didn't run yet I think  \n12:37\u00a0<+jvelociter>\u00a0ah it is currently running actually  \n12:37\u00a0<+tmortagne>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-tests/825/ is almost finished  \n12:37\u00a0<+jvelociter>\u00a0yep  \n12:41\u00a0<abusenius>\u00a0has joined #xwiki  \n13:00\u00a0<mflorea>\u00a0has quit  \n13:50\u00a0<mflorea>\u00a0has joined #xwiki  \n14:15\u00a0<DrLou>\u00a0has joined #xwiki  \n14:21\u00a0<+sburjan>\u00a0isn't it stuck ? running for 19 hours ?  \n14:26\u00a0<vmassol>\u00a0re the web standards one we need to decide what to do  \n14:26\u00a0<vmassol>\u00a0either rollback the panels change, fix the issue in the rendering or disbale the test  \n14:43\u00a0<vmassol>\u00a0tmortagne: build of commons is failing for me  \n14:43\u00a0<vmassol>\u00a0(after your last commit)  \n14:43\u00a0<+tmortagne>\u00a0vmassol: will check  \n14:43\u00a0<vmassol>\u00a0Running org.xwiki.logging.logback.internal.LogbackEventGeneratorTest  \n14:43\u00a0<vmassol>\u00a014:34:46.952 [main] ERROR o.x.l.l.i.LogbackEventGeneratorTest - error message  \n14:43\u00a0<vmassol>\u00a0Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.419 sec <<< FAILURE!  \n14:48\u00a0<vmassol>\u00a0jvelociter: is it normal that our spotlight search does multiwiki searches when you're on a subwiki?  \n14:48\u00a0<+tmortagne>\u00a0hmm that's weird what I committed should not have impacted this, will check  \n14:49\u00a0<+jvelociter>\u00a0vmassol: no that's a bug  \n14:49\u00a0<vmassol>\u00a0a known one?  \n14:49\u00a0<+jvelociter>\u00a0let me search JIRA  \n14:51\u00a0<cjdelisle>\u00a0has quit  \n14:51\u00a0<+jvelociter>\u00a0not found  \n14:51\u00a0<+jvelociter>\u00a0can you create it ?  \n14:52\u00a0<vmassol>\u00a0jvelociter: XWIKI-6788  \n14:53\u00a0<vmassol>\u00a0(even assigned it to you! ;))  \n14:55\u00a0<arkub>\u00a0has joined #xwiki  \n14:56\u00a0<+tmortagne>\u00a0vmassol: @Named mistake  \n14:56\u00a0<vmassol>\u00a0ok  \n15:05\u00a0<mflorea>\u00a0has quit  \n15:07\u00a0<mflorea>\u00a0has joined #xwiki  \n15:19\u00a0<+sburjan>\u00a0vmassol: I saw that we have a release on Monday (18th of july). Any idea if the staging will start tomorrow ?  \n15:19\u00a0<vmassol>\u00a0sdumitriu is the RM  \n15:20\u00a0<vmassol>\u00a0note that tomorrow is off in France  \n15:20\u00a0<jamesxu\\_\\_>\u00a0has joined #xwiki  \n15:20\u00a0<vmassol>\u00a0(and lots of people are not working this Friday)  \n15:20\u00a0<vmassol>\u00a0sdumitriu: ?  \n15:20\u00a0<jamesxu>\u00a0has joined #xwiki  \n15:21\u00a0<+sburjan>\u00a0so most chances are that it will be delayed ?  \n15:22\u00a0<vmassol>\u00a0It can be released  \n15:22\u00a0<vmassol>\u00a0nothing is blocking AFAIK  \n15:22\u00a0<+sburjan>\u00a0I will start testing tomorrow then  \n15:22\u00a0<+sburjan>\u00a0so I'll be done by friday  \n15:22\u00a0<vmassol>\u00a0I think sdumitriu wanted to commit some lucene fixes today  \n15:23\u00a0<+sburjan>\u00a0only problem is that if staging won't be available tomorrow, I will test a snapshot from maven  \n15:24\u00a0<jamesxu>\u00a0has quit  \n15:25\u00a0<jamesxu\\_\\_>\u00a0has quit  \n15:26\u00a0<vmassol>\u00a0sburjan: let's wait for sdumitriu to update us  \n15:27\u00a0<+sburjan>\u00a0okay.  \n15:28\u00a0<@sdumitriu>\u00a0up  \n15:29\u00a0<vmassol>\u00a0tmortagne: biuld still not workng for me  \n15:29\u00a0<@sdumitriu>\u00a0sburjan: Yep, probably tomorrow  \n15:29\u00a0<+tmortagne>\u00a0vmassol: what error do you get ?  \n15:30\u00a0<+sburjan>\u00a0ok sdumitriu . then we'll talk tomorrow to get synched  \n15:31\u00a0<cjdelisle>\u00a0has joined #xwiki  \n15:32\u00a0<jamesxu\\_>\u00a0has joined #xwiki  \n15:33\u00a0<jamesxu>\u00a0has joined #xwiki  \n15:33\u00a0<+tmortagne>\u00a0ha I know  \n15:33\u00a0<+tmortagne>\u00a0it's a pain having a component which also need to listen events  \n15:33\u00a0<vmassol>\u00a0Running org.xwiki.observation.DefaultObservationContextTest  \n15:33\u00a0<vmassol>\u00a0Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.335 sec <<< FAILURE!  \n15:34\u00a0<+tmortagne>\u00a0yes Iknow  \n15:39\u00a0<+tmortagne>\u00a0vmassol: should be ok now  \n15:39\u00a0<vmassol>\u00a0testing  \n15:42\u00a0<+tmortagne>\u00a0actually no  \n15:42\u00a0<+tmortagne>\u00a0@Named again  \n15:42\u00a0<+tmortagne>\u00a0(but should still work anyway)  \n15:46\u00a0<abusenius>\u00a0has quit  \n16:00\u00a0<vmassol>\u00a0tmortagne: build works thanks  \n16:00\u00a0<+tmortagne>\u00a0sorry about that, too much in a rush today  \n16:01\u00a0<@sdumitriu>\u00a0Stupid squirrel  \n16:08\u00a0<@sdumitriu>\u00a0mflorea: Don't forget to do the GSoC evaluation  \n16:08\u00a0<sdumitriu>\u00a0has quit  \n16:08\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:13\u00a0<+mflorea>\u00a0sdumitriu: ok  \n16:24\u00a0<abusenius>\u00a0has joined #xwiki  \n16:26\u00a0<jamesxu>\u00a0has quit  \n16:27\u00a0<jamesxu\\_>\u00a0has quit  \n16:31\u00a0<jamesxu\\_\\_>\u00a0has joined #xwiki  \n16:32\u00a0<jamesxu\\_\\_>\u00a0has quit  \n16:32\u00a0<jamesxu\\_\\_>\u00a0has joined #xwiki  \n16:34\u00a0<jamesxu\\_>\u00a0has joined #xwiki  \n16:35\u00a0<jamesxu\\_\\_>\u00a0has quit  \n16:35\u00a0<jamesxu\\_>\u00a0has quit  \n16:36\u00a0<jamesxu\\_\\_>\u00a0has joined #xwiki  \n16:36\u00a0<jamesxu\\_>\u00a0has joined #xwiki  \n16:36\u00a0<jamesxu\\_\\_>\u00a0has quit  \n16:36\u00a0<jamesxu\\_>\u00a0has quit  \n16:37\u00a0<jamesxu>\u00a0has joined #xwiki  \n16:52\u00a0<tmortagne>\u00a0has quit  \n16:53\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:04\u00a0<sburjan>\u00a0has quit  \n17:28\u00a0<+tmortagne>\u00a0jvelociter: I broke the build, fixing it  \n17:28\u00a0<+jvelociter>\u00a0ok  \n17:29\u00a0<+tmortagne>\u00a0crap Fan-out complexity... wiill take some time  \n17:42\u00a0<abusenius>\u00a0has quit  \n17:55\u00a0<tmortagne>\u00a0has quit  \n17:56\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:02\u00a0<vmassol>\u00a0has quit  \n18:07\u00a0<jamesxu>\u00a0has quit  \n18:08\u00a0<Enygma`>\u00a0has quit  \n18:10\u00a0<Enygma`>\u00a0has joined #xwiki  \n18:13\u00a0<Enygma`>\u00a0has quit  \n18:19\u00a0<evalica>\u00a0has quit  \n18:43\u00a0<abusenius>\u00a0has joined #xwiki  \n18:44\u00a0<sdumitriu>\u00a0has quit  \n18:44\u00a0<sdumitriu>\u00a0has joined #xwiki  \n19:13\u00a0<arkub>\u00a0has quit  \n19:27\u00a0<vmassol>\u00a0has joined #xwiki  \n19:45\u00a0<tmortagne>\u00a0has quit  \n19:46\u00a0<sburjan`>\u00a0has quit  \n19:49\u00a0<vmassol>\u00a0has quit  \n19:53\u00a0<sburjan`>\u00a0has joined #xwiki  \n20:06\u00a0<mflorea>\u00a0has quit  \n21:03\u00a0<mflorea>\u00a0has joined #xwiki  \n21:34\u00a0<DrLou>\u00a0has quit  \n22:05\u00a0<jvelociter>\u00a0has quit  \n22:29\u00a0<DrLou>\u00a0has joined #xwiki  \n23:17\u00a0<mflorea>\u00a0has quit  \n23:24\u00a0<vmassol>\u00a0has joined #xwiki  \n23:59\u00a0<vmassol>\u00a0has quit  \n\n"}