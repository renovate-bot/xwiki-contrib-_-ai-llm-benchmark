{"id": "dev:IRC.xwikiArchive20120426", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120426", "title": "IRC Archive for channel #xwiki on 26 April 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n18:55\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:55\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:56\u00a0<+tmortagne>\u00a0cjd: looks like you change broken commons build  \n18:56\u00a0<+tmortagne>\u00a0not sure how  \n18:56\u00a0<+tmortagne>\u00a0http://ci.xwiki.org/job/xwiki-commons/446/console  \n18:57\u00a0<+tmortagne>\u00a0did not diged much  \n18:57\u00a0<+tmortagne>\u00a0no  \n18:57\u00a0<+tmortagne>\u00a0not you actually  \n18:57\u00a0<+tmortagne>\u00a0vmassol  \n18:58\u00a0<+tmortagne>\u00a0cjd: checkstyle violation in api.Context  \n18:58\u00a0<@cjd>\u00a0Yeap, that's patched  \n18:59\u00a0<+tmortagne>\u00a0ok  \n18:59\u00a0<@cjd>\u00a0unless there's another one  \n18:59\u00a0<@cjd>\u00a0the unused import I got  \n18:59\u00a0<+tmortagne>\u00a0I see only one on jenkins  \n18:59\u00a0<+tmortagne>\u00a0yep  \n18:59\u00a0<vmassol>\u00a0checking jenkins  \n19:00\u00a0<vmassol>\u00a0ah yes I know why  \n19:01\u00a0<vmassol>\u00a0fixing  \n19:01\u00a0<vmassol>\u00a0tmortagne: btw that's why I hadn't put a \"provided\" scope  \n19:01\u00a0<gdelhumeau>\u00a0has quit  \n19:01\u00a0<+tmortagne>\u00a0what's the issue ?  \n19:01\u00a0<vmassol>\u00a0it forces the legacy module to redefine all deps  \n19:01\u00a0<vmassol>\u00a0the deps that the \"provided\" deps has in its pom  \n19:02\u00a0<+tmortagne>\u00a0but nobody is supposed to depends on the legacy module  \n19:02\u00a0<vmassol>\u00a0sure, it's just a pain to have to dup that  \n19:02\u00a0<+tmortagne>\u00a0vmassol: what you can do is use scope import to get all dependencies  \n19:03\u00a0<vmassol>\u00a0checking doc,have never used that one  \n19:03\u00a0<vmassol>\u00a0was introduced not very long ago  \n19:03\u00a0<+tmortagne>\u00a0it behave as if it was you that had theses dependencies in you pom  \n19:03\u00a0<+tmortagne>\u00a0i'm using it in xwiki-debug-eclipse  \n19:03\u00a0<+tmortagne>\u00a0to get XE/XEM war dependencies  \n19:04\u00a0<+tmortagne>\u00a0very nice  \n19:04\u00a0<vmassol>\u00a0hmm  \n19:04\u00a0<vmassol>\u00a0I'll try  \n19:05\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* r34680fe\u000f https://github.com/xwiki/xwiki-platform/commit/34680fe194b9156b7dc638e361bf5070a6aebb08 \u000f/ (2 files in 2 dirs):\u000f [legacy] Move XWikiDocument#setObjects(String className, Vector<BaseObject> objects) to legacy - http://git.io/dVnCLw  \n19:06\u00a0<vmassol>\u00a0tmortagne: doesn't work  \n19:06\u00a0<+tmortagne>\u00a0what do you mean ?  \n19:07\u00a0<vmassol>\u00a0https://gist.github.com/2501020  \n19:07\u00a0<+tmortagne>\u00a0i'm using it in https://github.com/xwiki/xwiki-debug-eclipse/blob/master/pom.xml for example  \n19:07\u00a0<vmassol>\u00a0the problem is that we need the classes from that dep  \n19:07\u00a0<vmassol>\u00a0not just its deps  \n19:07\u00a0<+tmortagne>\u00a0vmassol: that's normal  \n19:07\u00a0<+tmortagne>\u00a0of course  \n19:07\u00a0<+tmortagne>\u00a0I did not say you should use import instead of \u00a0provided  \n19:07\u00a0<+tmortagne>\u00a0you need both  \n19:08\u00a0<+tmortagne>\u00a0i.e. two dependencis on oldcore  \n19:08\u00a0<vmassol>\u00a0hmm that's slightly weird :)  \n19:08\u00a0<vmassol>\u00a0I'll do the easy way for now  \n19:08\u00a0<vmassol>\u00a0I'm not fully ocnvinced it's hte best yet  \n19:10\u00a0<+tmortagne>\u00a0triggering xwik-olcore as transitive dependency is bad for sure  \n19:11\u00a0<@cjd>\u00a0hmm can't find a nice script to generate a report of all method calls in the project.  \n19:12\u00a0<@cjd>\u00a0I know eclipse can do this but I want an easy report so I can see where there is unused code and where deprecation will have the most effect  \n19:14\u00a0<vmassol>\u00a0tmortagne: you cannot include the same dep twice  \n19:15\u00a0<+tmortagne>\u00a0vmassol: you sure ?  \n19:15\u00a0<vmassol>\u00a0yup  \n19:15\u00a0<vmassol>\u00a0the error is explicit  \n19:15\u00a0<vmassol>\u00a0[WARNING] Some problems were encountered while building the effective model for org.xwiki.commons:xwiki-commons-legacy-component-api:jar:4.1-SNAPSHOT  \n19:15\u00a0<vmassol>\u00a0[WARNING] 'dependencies.dependency.type' for org.xwiki.commons:xwiki-commons-component-api:jar must be 'pom' to import the managed dependencies. @ line 46, column 17  \n19:15\u00a0<vmassol>\u00a0[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.xwiki.commons:xwiki-commons-component-api:jar -> duplicate declaration of version ${project.version} @ line 46, column 17  \n19:15\u00a0<+tmortagne>\u00a0that's a pity since import does not really include the dependency  \n19:16\u00a0<vmassol>\u00a0and the package must be pom  \n19:17\u00a0<CIA-74>\u00a0tmortagne\u000f master\u000f \\* r86fb0fc\u000f https://github.com/xwiki/xwiki-platform/commit/86fb0fc25a333a822eca9b0329fa13c4831a516e \u000f/ (4 files in 4 dirs):\u000f [legacy] Move XWikiDocument#extractTitle() to legacy - http://git.io/df2M5w  \n19:18\u00a0<vmassol>\u00a0putting back what I had before...  \n19:18\u00a0<vmassol>\u00a0cound't find another solution so far  \n19:19\u00a0<+tmortagne>\u00a0vmassol: I still don't see why you need the transitive depencies in the legacy package since it's not supposed to be used except in distributions  \n19:19\u00a0<+tmortagne>\u00a0we use provided for oldcore  \n19:20\u00a0<CIA-74>\u00a0Vincent Massol\u000f master\u000f \\* r341d02d\u000f https://github.com/xwiki/xwiki-commons/commit/341d02df56ddfac84a831a728547e8f612bc712f \u000f/ (2 files in 2 dirs):\u000f Revert \"[Misc] All legacy modules wrapping other modules should use the \"provided\" scope\" since it's failing the build. Need to analyze this better. - http://git.io/zh458Q  \n19:20\u00a0<vmassol>\u00a0I do'nt fully understand ATM but I want to fix the build asap  \n19:21\u00a0<vmassol>\u00a0tmortagne: it's proabby because  \n19:21\u00a0<vmassol>\u00a0I have one legacy module depending on another  \n19:22\u00a0<+tmortagne>\u00a0do you really need to ?  \n19:22\u00a0<vmassol>\u00a0it's nicer  \n19:22\u00a0<vmassol>\u00a0one legacy per module is a better rule  \n19:23\u00a0<vmassol>\u00a0if you have one legacy wrapping several it's harder for the user to know the modules  \n19:23\u00a0<vmassol>\u00a0(the modules it's replacing)  \n19:23\u00a0<+tmortagne>\u00a0ok for that but i was wondering why you have a legacy depending on another  \n19:24\u00a0<+tmortagne>\u00a0anyway was could could do is use import in that legacy module that use another one  \n19:24\u00a0<+tmortagne>\u00a0import the non legacy one  \n19:24\u00a0<+tmortagne>\u00a0to get its transitive dependencies  \n19:25\u00a0<vmassol>\u00a0I need more than import  \n19:25\u00a0<vmassol>\u00a0I need the module itself  \n19:26\u00a0<+tmortagne>\u00a0it's not what I mean  \n19:26\u00a0<+tmortagne>\u00a0you depend on the legacy module  \n19:26\u00a0<+tmortagne>\u00a0and you import the non legacy one  \n19:26\u00a0<+tmortagne>\u00a0that way you have the legacy module you need and all the dependencies of the non legacy module  \n19:29\u00a0<vmassol>\u00a0I can try that  \n19:29\u00a0<vmassol>\u00a0restarting idea...  \n19:43\u00a0<mflorea>\u00a0has quit  \n19:45\u00a0<CIA-74>\u00a0Caleb James DeLisle\u000f master\u000f \\* r5d2c024\u000f https://github.com/xwiki/xwiki-platform/commit/5d2c024e82ea2702fff62ff08560b802845255fc \u000f/ (3 files in 3 dirs):\u000f Moved a couple of functions out of XWikiContext and fixed use of a deprecated function in XWikiDocument. - http://git.io/Dh33Og  \n19:55\u00a0<tmortagne>\u00a0has quit  \n20:02\u00a0<lucaa>\u00a0has quit  \n20:15\u00a0<jamie\\_\\_xwiki>\u00a0has joined #xwiki  \n20:18\u00a0<CIA-74>\u00a0Caleb James DeLisle\u000f master\u000f \\* r50461f2\u000f https://github.com/xwiki/xwiki-platform/commit/50461f26441ea907816614cc2636c07ba9964247 \u000f/ (3 files in 3 dirs):\u000f Hopefully fix the legacy-oldcore build. - http://git.io/jl7gNQ  \n20:23\u00a0<jamie\\_\\_xwiki>\u00a0Hello, I'm just wondering how to implement a custom file to download. \u00a0Eg to Dynamically generate and send a file based on a specific download url..  \n20:23\u00a0<jamie\\_\\_xwiki>\u00a0What interface would I look at implementing for a new component to do something like that?  \n20:23\u00a0<@cjd>\u00a0take a look at XWikiServletRequest, which is $request in your script  \n20:24\u00a0<@cjd>\u00a0you can send any raw data to it so you can just make your wiki page act like a file download  \n20:27\u00a0<jamie\\_\\_xwiki>\u00a0Thanks cjd, I'll take a look at that.. \u00a0I wasn't sure if serving it from a script might not work but I guess that's how some of the macros work as well.  \n20:27\u00a0<@cjd>\u00a0I like it because you have all the wiki (versioning etc) benefits for your code  \n20:33\u00a0<abusenius>\u00a0has joined #xwiki  \n20:51\u00a0<polx>\u00a0has joined #xwiki  \n20:56\u00a0<CIA-74>\u00a0Caleb James DeLisle\u000f master\u000f \\* r169b015\u000f https://github.com/xwiki/xwiki-platform/commit/169b0153634eb22f68b35b3e525278f992247cdb \u000f/ xwiki-platform-core/xwiki-platform-webdav/xwiki-platform-webdav-server/src/main/java/com/xpn/xwiki/plugin/webdav/utils/XWikiDavContext.java :\u000f Fixed use of deprecated method - http://git.io/2q00Iw  \n21:18\u00a0<@cjd>\u00a0http://ci.xwiki.org/job/xwiki-platform/1865/console <-- this is what was failing for me locally the other day  \n21:19\u00a0<vmassol>\u00a0do you know what /home/hudsonagent/hudson\\_root/workspace/xwiki-platform/xwiki-platform-tools/xwiki-platform-tool-packager-plugin/target/it/basic-import-export/build.log  \n21:19\u00a0<vmassol>\u00a0\u00a0says.  \n21:19\u00a0<vmassol>\u00a0?  \n21:19\u00a0<@cjd>\u00a0logging in...  \n21:21\u00a0<polx>\u00a0has quit  \n21:22\u00a0<polx>\u00a0has joined #xwiki  \n21:22\u00a0<@cjd>\u00a0https://ezcrypt.it/9V4n#NlLdIlmzZjI77dbGEgPwV9py  \n21:22\u00a0<@cjd>\u00a0ahh, this is an error that makes sense \"Could not find a getter for xWikiClassXML in class com.xpn.xwiki.doc.XWikiDocument\"  \n21:23\u00a0<vmassol>\u00a0someone removed it?  \n21:23\u00a0<vmassol>\u00a0(the getter)  \n21:23\u00a0<@cjd>\u00a0looks as though..  \n21:24\u00a0<vmassol>\u00a0been removed today  \n21:24\u00a0<vmassol>\u00a0I haven't pulled platform  \n21:24\u00a0<vmassol>\u00a0and I have:  \n21:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0/\\*\\*  \n21:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\* @deprecated since 2.2M1 use {@link #getXClassXML()} instead  \n21:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\\*/  \n21:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0@Deprecated  \n21:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0public String getxWikiClassXML()  \n21:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0{  \n21:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return getXClassXML();  \n21:24\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0}  \n21:24\u00a0<vmassol>\u00a0so whoever moved it needs to put it back :)  \n21:24\u00a0<vmassol>\u00a0and add a comment that it's needed for hibernate  \n21:24\u00a0<@cjd>\u00a0https://github.com/xwiki/xwiki-platform/commit/0ea8ea86c65e8b3fdff4cf835020c95cf90fa49c  \n21:25\u00a0<vmassol>\u00a0I have addedt his comment in several places already  \n21:25\u00a0<vmassol>\u00a0but not here apparently  \n21:25\u00a0<@cjd>\u00a0if getXClassXML() is a clone of it, perhaps we can alter the hibernate config file instead  \n21:25\u00a0<vmassol>\u00a0well we need to fix the biuld  \n21:25\u00a0<@cjd>\u00a0/nod  \n21:25\u00a0<vmassol>\u00a0so IMO we should revert this change for now  \n21:26\u00a0<vmassol>\u00a0you doing it?  \n21:26\u00a0<jacktrick>\u00a0has joined #xwiki  \n21:26\u00a0<@cjd>\u00a0sure  \n21:26\u00a0<vmassol>\u00a0cool :)  \n21:26\u00a0<vmassol>\u00a0still fighting with my aspect test  \n21:30\u00a0<jamie\\_\\_xwiki>\u00a0How do you stop all wiki output from being written to the output stream? \u00a0I'm trying to setup a custom download in a groovy script on a page and I just want to write to the output stream myself.  \n21:31\u00a0<vmassol>\u00a0!search logging  \n21:31\u00a0<vmassol>\u00a0http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Logging  \n21:31\u00a0<vmassol>\u00a0?  \n21:31\u00a0<vmassol>\u00a0ah no  \n21:31\u00a0<vmassol>\u00a0misunderstood :)  \n21:31\u00a0<CIA-74>\u00a0Caleb James DeLisle\u000f master\u000f \\* r8bbc6d2\u000f https://github.com/xwiki/xwiki-platform/commit/8bbc6d2508e0339060251497bccd68edae9c0702 \u000f/ (2 files in 2 dirs):\u000f Revert \"[legacy] Move XWikiDocument#setxWikiClassXML(String xClassXML) to legacy\" ...  \n21:32\u00a0<CIA-74>\u00a0Caleb James DeLisle\u000f master\u000f \\* r33029ca\u000f https://github.com/xwiki/xwiki-platform/commit/33029ca76b2e15de94b6639478df42ea90103b91 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/doc/XWikiDocument.java :\u000f Reverted 54bfcf67d3e7f2085f186254bd5d9f692261b70d [legacy] Move XWikiDocument#setxWikiClassXML(String xClassXML) to legacy ...  \n21:32\u00a0<@cjd>\u00a0oops, that should have been one commit  \n21:34\u00a0<jamie\\_\\_xwiki>\u00a0vmassol: no I'd like to set the content type to application/x-download etc then just write out the download to the outputstream.. right now the download it's being wrapped in all the html of XWiki  \n21:34\u00a0<vmassol>\u00a0jacktrick: check the DownloadAction.java code  \n21:34\u00a0<vmassol>\u00a0(maybe that'll help you)  \n21:34\u00a0<jacktrick>\u00a0jamie\\_\\_xwiki\\*  \n21:34\u00a0<jacktrick>\u00a0crafty tab-complete  \n21:35\u00a0<vmassol>\u00a0you can create your own action  \n21:35\u00a0<vmassol>\u00a0and register it  \n21:36\u00a0<CIA-74>\u00a0Caleb James DeLisle\u000f master\u000f \\* ra603b86\u000f https://github.com/xwiki/xwiki-platform/commit/a603b86cfcc3717dbd0784ea1cfca49378085d04 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/doc/XWikiDocument.java :\u000f Concluded an ugly series of commits which awkwardly reverted 0ea8ea86c65e8b3fdff4cf835020c95cf90fa49c and 54bfcf67d3e7f2085f186254bd5d9f692261b70d - http://git.io/8JWgTQ  \n21:36\u00a0<jamie\\_\\_xwiki>\u00a0ok.. will do. \u00a0The old code actually is migrating from a struts website so maybe it won't be too hard  \n22:07\u00a0<CIA-74>\u00a0Vincent Massol\u000f master\u000f \\* r3f6c13f\u000f https://github.com/xwiki/xwiki-commons/commit/3f6c13f62c87526eba7599049e512c0517354ddf \u000f/ (pom.xml xwiki-commons-core/xwiki-commons-legacy/pom.xml):\u000f XCOMMONS-156: Ugrade to Maven AspectJ Plugin 1.4 - http://git.io/s7SH2g  \n22:08\u00a0<CIA-74>\u00a0Vincent Massol\u000f master\u000f \\* rf78c034\u000f https://github.com/xwiki/xwiki-rendering/commit/f78c0341cc9c8cd9acd3c194a4a88f17e994410e \u000f/ xwiki-rendering-legacy/pom.xml :\u000f XCOMMONS-156: Ugrade to Maven AspectJ Plugin 1.4 - http://git.io/jIydgw  \n22:08\u00a0<CIA-74>\u00a0Vincent Massol\u000f master\u000f \\* rd59adaf\u000f https://github.com/xwiki/xwiki-rendering/commit/d59adaff93d3eb1cb63314768e82356ed4e5eadc \u000f/ (6 files in 4 dirs):\u000f [Misc] Moved Block.getPreviousBlockByType() method to legacy - http://git.io/cTTc2g  \n22:09\u00a0<CIA-74>\u00a0Vincent Massol\u000f master\u000f \\* rd91fb22\u000f https://github.com/xwiki/xwiki-platform/commit/d91fb225ac7f99c1f9c7e67f7ad1cb603a3d4ab6 \u000f/ (2 files in 2 dirs):\u000f XCOMMONS-156: Ugrade to Maven AspectJ Plugin 1.4 - http://git.io/ybbqeA  \n22:10\u00a0<vmassol>\u00a0my test is now working :)  \n22:10\u00a0<vmassol>\u00a0all it needed was upgrading aspectj  \n22:10\u00a0<vmassol>\u00a0apparently the version we had was buggy  \n22:33\u00a0<vmassol>\u00a0guys how have you been creating feature branches in git so far?  \n22:34\u00a0<vmassol>\u00a0like this: git checkout -b < new\\_branch > origin/< new\\_branch >  \n22:34\u00a0<vmassol>\u00a0?  \n22:34\u00a0<vmassol>\u00a0just found it on http://www.wetware.co.nz/2009/07/pull-a-git-branch-from-remote/  \n22:34\u00a0<vmassol>\u00a0so far I've been doing what they say to not do...  \n22:35\u00a0<@cjd>\u00a0https://forum.hibernate.org/viewtopic.php?t=937664  \n22:36\u00a0<@cjd>\u00a0dunno what's worse  \n22:36\u00a0<@cjd>\u00a0Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2) [2002]  \n22:36\u00a0<@cjd>\u00a0or  \n22:36\u00a0<vmassol>\u00a0nice error  \n22:36\u00a0<@cjd>\u00a0Powered by phpBB \u00a9 2000, 2002, 2005, 2007  \n22:36\u00a0<vmassol>\u00a0:)  \n22:59\u00a0<+sburjan`>\u00a0this one is a classic :)  \n23:11\u00a0<CIA-74>\u00a0Vincent Massol\u000f cts\u000f \\* r80a8e34\u000f https://github.com/xwiki/xwiki-rendering/commit/80a8e34e9ff46368eb2e40b9a4bae82b6ab912be \u000f/ (3 files in 3 dirs):\u000f Revert \"XRENDERING-187: Implement a Rendering Compatibility Test Suite\" ...  \n23:11\u00a0<vmassol>\u00a0argh  \n23:12\u00a0<vmassol>\u00a0that's a mistake  \n23:13\u00a0<CIA-74>\u00a0Vincent Massol\u000f cts\u000f \\* rdf72a91\u000f https://github.com/xwiki/xwiki-rendering/commit/df72a91f506dbdfff8851dc9a036aabc317812bf \u000f/ (3 files in 3 dirs):\u000f XRENDERING-187: Implement a Rendering Compatibility Test Suite ...  \n23:20\u00a0<jamie\\_\\_xwiki>\u00a0vmassol: Thanks for the heads up, I registered a new struts action in struts-config.xml and implemented that 'type' class and included it in the web-inf/lib folder.  \n23:21\u00a0<vmassol>\u00a0cool, hope that works fine for your need  \n23:22\u00a0<vmassol>\u00a0btw you can set the response type from a wiki page too  \n23:22\u00a0<vmassol>\u00a0we do this on the RSS generation page for ex  \n23:22\u00a0<jamie\\_\\_xwiki>\u00a0Yea it works pretty good. \u00a0I'll check out the RSS page to compare though :)  \n23:27\u00a0<polx>\u00a0has quit  \n23:33\u00a0<jvdrean>\u00a0has joined #xwiki  \n23:35\u00a0<jamie\\_\\_xwiki>\u00a0Humm.. I guess the magic that makes it only send out the content in the script is: xpage=plain&outputSyntax=plain ??  \n23:45\u00a0<vmassol>\u00a0has quit  \n23:56\u00a0<abusenius>\u00a0has quit  \n\n"}