{"id": "dev:IRC.xwikiArchive20141023", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20141023", "title": "IRC Archive for channel #xwiki on 23 October 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<lucaa>\u00a0has quit  \n01:29\u00a0<abusenius>\u00a0has quit  \n06:59\u00a0<silverdrop>\u00a0has joined #xwiki  \n07:00\u00a0<msmeria>\u00a0has joined #xwiki  \n08:09\u00a0<octo\\_>\u00a0has joined #xwiki  \n08:10\u00a0<FUF\\_>\u00a0has joined #xwiki  \n08:10\u00a0<octo>\u00a0has quit  \n08:11\u00a0<FUF>\u00a0has quit  \n08:12\u00a0<vmassol>\u00a0has joined #xwiki  \n09:02\u00a0<mflorea1>\u00a0has joined #xwiki  \n09:05\u00a0<D-Spair>\u00a0has quit  \n09:12\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:12\u00a0<vmassol>\u00a0good morning  \n09:18\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n09:25\u00a0<spawn57\\_>\u00a0has joined #xwiki  \n09:25\u00a0<spawn57\\_>\u00a0hi, how do I export all the pages in space in a subwiki?  \n09:27\u00a0<vmassol>\u00a0spawn57\\_: hi, hold on, I'm preparing an answer for you ;)  \n09:27\u00a0<spawn57\\_>\u00a0vmassol: thanks  \n09:32\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:33\u00a0<vmassol>\u00a0spawn57\\_:  \n09:33\u00a0<vmassol>\u00a0see http://www.xwiki.org/xwiki/bin/view/FAQ/How+do+I+export+all+pages+of+a+space  \n09:34\u00a0<spawn57\\_>\u00a0thanks  \n09:34\u00a0<spawn57\\_>\u00a0it doesn't have anything useful..  \n09:35\u00a0<vmassol>\u00a0wdym?  \n09:35\u00a0<vmassol>\u00a0ah wait  \n09:35\u00a0<vmassol>\u00a0bad link  \n09:35\u00a0<vmassol>\u00a0:)  \n09:35\u00a0<vmassol>\u00a0fixing  \n09:37\u00a0<vmassol>\u00a0spawn57\\_: should be better now, please refresh page  \n09:38\u00a0<spawn57\\_>\u00a0trying it, thanks  \n09:38\u00a0<vmassol>\u00a0going to add more info  \n09:39\u00a0<vmassol>\u00a0refresh again  \n09:39\u00a0<spawn57\\_>\u00a0i like the import export extension that's part of the Admin Tools, but I can't get it working in a subwiki  \n09:39\u00a0<vmassol>\u00a0then you need to create a jirra issue about the problem  \n09:40\u00a0<vmassol>\u00a0here: http://jira.xwiki.org/browse/ADMINTOOL  \n09:40\u00a0<vmassol>\u00a0(if not already done)  \n09:40\u00a0<vmassol>\u00a0(maybe http://jira.xwiki.org/browse/ADMINTOOL-10 )  \n09:44\u00a0<Lyes>\u00a0has joined #xwiki  \n09:45\u00a0<spawn57\\_>\u00a0can't access the large export tool in my subwiki either  \n09:49\u00a0<vmassol>\u00a0spawn57\\_: wdym by \"access\"?  \n09:50\u00a0<spawn57\\_>\u00a0going to the url/page gives an error...  \n09:50\u00a0<vmassol>\u00a0what error?  \n09:50\u00a0<spawn57\\_>\u00a0large export by space seems to work  \n09:50\u00a0<spawn57\\_>\u00a0i'll just use that  \n09:51\u00a0<vmassol>\u00a0guys, we need to deicde when we release 6.2.3  \n09:51\u00a0<vmassol>\u00a0do we wait for the 30th as planned  \n09:51\u00a0<vmassol>\u00a0or do we bring is forward seen the recent issues found?  \n09:51\u00a0<vmassol>\u00a0especially http://jira.xwiki.org/browse/XWIKI-11285  \n09:51\u00a0<vmassol>\u00a0(among others)  \n09:52\u00a0<vmassol>\u00a0we have 26 issues fixed ATM: http://jira.xwiki.org/issues/?filter=13390&jql=category%20in%20(%22Top%20Level%20Projects%22)%20AND%20fixVersion%20in%20(%226.2.3%22)%20AND%20resolution%20in%20(Fixed)  \n09:53\u00a0<vmassol>\u00a0personally I'd propose that we release it on Monday before or after the 6.3M2 release, wdyt?  \n09:53\u00a0<vmassol>\u00a0we need evalica to be here  \n09:53\u00a0<vmassol>\u00a0since she's the RM  \n09:55\u00a0<spawn57\\_>\u00a0hey vmassol, the large space export tool is giving me a permission denied error.  \n09:55\u00a0<spawn57\\_>\u00a0http://pastebin.com/p7ZCD2M7  \n09:56\u00a0<vmassol>\u00a0ofc you need to have permission on the xar file on the FS ;)  \n09:56\u00a0<vmassol>\u00a0check that the user with which you've started your servlet container has permission to read it  \n09:56\u00a0<vmassol>\u00a0or use another extension  \n09:57\u00a0<vmassol>\u00a0for which you don't need the FS  \n09:58\u00a0<evalica>\u00a0has joined #xwiki  \n10:00\u00a0<Enygma`>\u00a0has joined #xwiki  \n10:01\u00a0<spawn57\\_>\u00a0the hql query one worked great  \n10:01\u00a0<vmassol>\u00a0ok cool, we really need to inclde this feature by default  \n10:01\u00a0<vmassol>\u00a0been postponing it for too long now ;)  \n10:01\u00a0<spawn57\\_>\u00a0yeah please do  \n10:02\u00a0<spawn57\\_>\u00a0I use it to move the app within minutes apps we make to all the subwikis  \n10:03\u00a0<spawn57\\_>\u00a0btw, do you know which dir the large space export tool will be writing to?  \n10:03\u00a0<vmassol>\u00a0FYI we even had some nice design for it: http://design.xwiki.org/xwiki/bin/view/Improvements/MultiExport3Prototype  \n10:04\u00a0<vmassol>\u00a0no idea if it's not written in the doc  \n10:04\u00a0<vmassol>\u00a0the right page is http://design.xwiki.org/xwiki/bin/view/Improvements/MultiExport  \n10:04\u00a0<spawn57\\_>\u00a0it's going to be tough to find out :/  \n10:06\u00a0<cjd>\u00a0has joined #xwiki  \n10:07\u00a0<Slashman>\u00a0has joined #xwiki  \n10:36\u00a0<Lyes>\u00a0has quit  \n10:38\u00a0<Lyes>\u00a0has joined #xwiki  \n10:44\u00a0<Slashman>\u00a0has quit  \n10:54\u00a0<Enygma`>\u00a0gdelhumeau: here's an easy to fix bug that probably affects the 6.2.x branch as well: http://jira.xwiki.org/browse/XWIKI-11314  \n10:54\u00a0<Enygma`>\u00a0BFD material ;)  \n11:00\u00a0<Slashman>\u00a0has joined #xwiki  \n11:03\u00a0<vmassol>\u00a0hmmm just rebuilt enterprise and it still fails to start  \n11:03\u00a0<vmassol>\u00a0and thomas is off today and tomorrow  \n11:04\u00a0<vmassol>\u00a0Enygma`: same problem a you got yesterday  \n11:05\u00a0<vmassol>\u00a0thomas seemed to say it was fixed but I don't think so  \n11:05\u00a0<vmassol>\u00a0http://ci.xwiki.org/view/All/job/xwiki-platform/ built fine yesterday  \n11:05\u00a0<vmassol>\u00a0Enygma`: were you able to run XE properly?  \n11:06\u00a0<vmassol>\u00a0actually wait  \n11:06\u00a0<vmassol>\u00a0I rebuilt oldcore locally but probabyl forgot to gitp ull  \n11:06\u00a0<vmassol>\u00a0redoing  \n11:08\u00a0<Enygma`>\u00a0CI looks ok, so I am assuming it is building well.  \n11:09\u00a0<Enygma`>\u00a0did we re-enable xwiki-enterprise-test-webstandards ?  \n11:09\u00a0<ClemensR>\u00a0has joined #xwiki  \n11:13\u00a0<ClemensR>\u00a0There was an empty Panels object on the AdminGuide page, making it look like a panel ... not sure where that came from  \n11:13\u00a0<lucaa>\u00a0has joined #xwiki  \n11:16\u00a0<gdelhumeau>\u00a0thanks Enygma`  \n11:16\u00a0<vmassol>\u00a0FTR XE starts fine  \n11:16\u00a0<Enygma`>\u00a0cool  \n11:22\u00a0<ClemensR>\u00a0has left #xwiki  \n11:36\u00a0<Slashman>\u00a0has quit  \n11:37\u00a0<vmassol>\u00a0gdelhumeau:  \n11:38\u00a0<vmassol>\u00a0do we need XWIKI-10776 for 6.2.3?  \n11:38\u00a0<vmassol>\u00a0Caty seems to consider it a blocker  \n11:38\u00a0<vmassol>\u00a0(see XWIKI-11313)  \n11:39\u00a0<spawn57\\_>\u00a0has quit  \n11:41\u00a0<gdelhumeau>\u00a0I just have put it as blocker  \n11:41\u00a0<gdelhumeau>\u00a0and I am working on it  \n11:41\u00a0<gdelhumeau>\u00a0implementing the tests actually  \n11:42\u00a0<vmassol>\u00a0ok it's missing the fix version  \n11:42\u00a0<vmassol>\u00a0setting it  \n11:43\u00a0<vmassol>\u00a0done  \n11:56\u00a0<cjd>\u00a0http://xkcd.com/1172/ \u00a0backward compat  \n12:01\u00a0<gdelhumeau>\u00a0I love the fact taht emacs is involved here  \n12:21\u00a0<Slashman>\u00a0has joined #xwiki  \n12:31\u00a0<vmassol>\u00a0nice  \n12:41\u00a0<vmassol>\u00a0gdelhumeau: question for you, when I create a new color theme I get the old editeur  \n12:41\u00a0<vmassol>\u00a0doesn't look normal  \n12:41\u00a0<gdelhumeau>\u00a0how do you create it?  \n12:41\u00a0<vmassol>\u00a0I click manage themes  \n12:41\u00a0<vmassol>\u00a0and then click on create new theme  \n12:42\u00a0<vmassol>\u00a0I don't see any other way to create a theme btw ;)  \n12:42\u00a0<vmassol>\u00a0(from a user pov)  \n12:43\u00a0<gdelhumeau>\u00a0you are hitting http://jira.xwiki.org/browse/XWIKI-10845  \n12:44\u00a0<gdelhumeau>\u00a0and http://jira.xwiki.org/browse/XWIKI-10844 actually  \n12:45\u00a0<gdelhumeau>\u00a0has quit  \n12:46\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n12:49\u00a0<vmassol>\u00a0ah yes htat's the one  \n12:49\u00a0<vmassol>\u00a0seems pretty important  \n12:49\u00a0<vmassol>\u00a0I'd say 6.2.3  \n12:49\u00a0<vmassol>\u00a0shouldn't be hard to link to the new theme editor  \n12:53\u00a0<vmassol>\u00a0I've commented on it  \n12:56\u00a0<vmassol>\u00a0gdelhumeau: slating for XWIKI-10844 let me know if you don't agree  \n12:56\u00a0<gdelhumeau>\u00a0there is no  \n13:08\u00a0<Enygma`>\u00a0vmassol: any idea what is going on with http://ci.xwiki.org/job/xwiki-enterprise-test-cluster/ ? Seems to be having startup issues and the logs look odd.  \n13:10\u00a0<vmassol>\u00a0checking  \n13:11\u00a0<vmassol>\u00a0it seems that for some reason  \n13:11\u00a0<vmassol>\u00a0hmm on  \n13:11\u00a0<vmassol>\u00a0wait looking closer  \n13:11\u00a0<vmassol>\u00a0s/on/no  \n13:14\u00a0<vmassol>\u00a0the only idea i have  \n13:14\u00a0<vmassol>\u00a0is that since I upgraded jetty to a new version  \n13:14\u00a0<vmassol>\u00a0they have some new port  \n13:14\u00a0<vmassol>\u00a0that we're not configuring  \n13:14\u00a0<vmassol>\u00a0and that is clashing between the 2 instances from the cluster  \n13:15\u00a0<vmassol>\u00a0I have to go drive my kids to the train and when I'm back I'll try to reproduce locally  \n13:19\u00a0<Enygma`>\u00a0ok...  \n13:20\u00a0<Enygma`>\u00a0another thing I`m noticing is that I get \"Unknown macro: template.\" in Administration: Add extensions  \n13:20\u00a0<Enygma`>\u00a0I understood from Thomas that it was fixed in the new builds  \n13:20\u00a0<Enygma`>\u00a0but I still get this on the latest build :/  \n13:21\u00a0<Enygma`>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-test-extension/ws/xwiki-enterprise-test/xwiki-enterprise-test-extension/target/screenshots/ExtensionTest-testPagination.png  \n13:49\u00a0<gdelhumeau>\u00a0bback in 1h  \n13:54\u00a0<vmassol>\u00a0back  \n13:59\u00a0<vmassol>\u00a0Enygma`: \u00a0I can reproduce, debugging now  \n14:01\u00a0<Slashman\\_>\u00a0has joined #xwiki  \n14:02\u00a0<Enygma`>\u00a0not 100% sure if it`s the same problem, but it is definitely related: http://ci.xwiki.org/job/xwiki-enterprise-test-misc/lastBuild/org.xwiki.enterprise$xwiki-enterprise-test-misc/testReport/org.xwiki.test.misc/SuggestTest/testSuggestWithNonexistingContextDocument/  \n14:02\u00a0<vmassol>\u00a0k  \n14:03\u00a0<Enygma`>\u00a0in this case, DefaultBeanManager has an instance of a private inner class (FilesystemTemplateContent - defined inside TemplateManager) that has a public setter metod that the BeanManager tries to access  \n14:03\u00a0<Enygma`>\u00a0but somehow java consideres that as an invalid access  \n14:04\u00a0<Enygma`>\u00a0because DefaultBeanManager and FilesystemTemplateContent.isPriviledged are not in the same package  \n14:04\u00a0<Slashman>\u00a0has quit  \n14:04\u00a0<Enygma`>\u00a0I don`t understand why it behaves like that  \n14:05\u00a0<Enygma`>\u00a0probably a quick solution would be to make the inner class public, to please the gods of Java :)  \n14:05\u00a0<vmassol>\u00a0ok I think know the problem for jetty, fixing  \n14:05\u00a0<Enygma`>\u00a0yeah, too many issues at the same time :)  \n14:06\u00a0<Enygma`>\u00a0the the java access issue, this is more or less the case here: http://stackoverflow.com/questions/6264657/why-make-private-inner-class-member-public-in-java  \n14:21\u00a0<Enygma`>\u00a0another option for the java access issue is to use in DefaultBeanManager: propertyDescriptor.getWriteMethod().setAccessible(true); before calling invoke()  \n14:22\u00a0<Enygma`>\u00a0however, I feel that the culprit here is actually TemplateManager#FilesystemTemplateContent that is not respecting the java reflections requirements of being public.  \n14:27\u00a0<Enygma`>\u00a0yeah... this is a java limitation/bug: http://bugs.java.com/bugdatabase/view\\_bug.do?bug\\_id=4533479  \n14:27\u00a0<Enygma`>\u00a0nice  \n14:27\u00a0<cjd>\u00a0/feature  \n14:27\u00a0<Enygma`>\u00a0so we have the 2 before mentioned solutions:  \n14:27\u00a0<Enygma`>\u00a02) Fix the problem locally and make the inner classes public  \n14:28\u00a0<Enygma`>\u00a0seeing that it is a general problem, I am now opting for 1)  \n14:28\u00a0<Enygma`>\u00a0vmassol, cjd?  \n14:28\u00a0<vmassol>\u00a0Enygma`: sorry need to finish my stuff first, will check after  \n14:28\u00a0<Enygma`>\u00a0sure  \n14:51\u00a0<Enygma`>\u00a0tested 1) locally and it works.  \n15:04\u00a0<Panther\\_1>\u00a0has joined #xwiki  \n15:06\u00a0<msmeria>\u00a0has quit  \n15:09\u00a0<Panther\\_1>\u00a0hi I have a problem upgrade my xwiki instance (3.2) to the neweset version os centos 6, database postgres, tomcat  \n15:10\u00a0<Panther\\_1>\u00a0The migration starts but stops with:  \n15:10\u00a0<Panther\\_1>\u00a0Checking Hibernate mapping and updating schema if needed for wiki [xwiki]  \n15:10\u00a0<Panther\\_1>\u00a0Starting data migration [R40001XWIKI7540] with version [40001] on database [xwiki]  \n15:10\u00a0<Panther\\_1>\u00a0SQL Error: 0, SQLState: 22003  \n15:10\u00a0<Panther\\_1>\u00a0Bad value for type long : <?xml version=\"1.0\" encodi  \n15:12\u00a0<msmeria>\u00a0has joined #xwiki  \n15:17\u00a0<Enygma`>\u00a0I will probably push XCOMMONS-671 in 6.2.x if master builds well and tests are ok.  \n15:17\u00a0<Enygma`>\u00a0if somebody disagrees with the fix i`ve pushed, it can of course be reverted  \n15:20\u00a0<Panther\\_1>\u00a0What can \u00a0I do if upgrade failed with \"Bad value for type long\" ?  \n15:23\u00a0<vmassol>\u00a0Enygma`: cluster tests should work fine now  \n15:24\u00a0<vmassol>\u00a0actually I have large stack traces when they execute but the problem is no longer the start/stop of xwiki  \n15:25\u00a0<vmassol>\u00a0all the exceptions are related to SOLR  \n15:25\u00a0<vmassol>\u00a0this will need to be checked  \n15:25\u00a0<vmassol>\u00a0would be good if mflorea1 could check the next build of cluster  \n15:26\u00a0<vmassol>\u00a0(at http://ci.xwiki.org/job/xwiki-enterprise-test-cluster/ , after platform has finished bilding)  \n15:26\u00a0<mflorea1>\u00a0vmassol: ok  \n15:29\u00a0<Enygma`>\u00a0thank you vmassol  \n15:34\u00a0<Panther\\_1>\u00a0has quit  \n16:02\u00a0<msmeria>\u00a0has quit  \n16:06\u00a0<vmassol>\u00a0going to reboot my mac...bb in 2mn  \n16:07\u00a0<vmassol>\u00a0has quit  \n16:08\u00a0<vmassol>\u00a0has joined #xwiki  \n16:08\u00a0<vmassol>\u00a0back  \n16:19\u00a0<Enygma`>\u00a0odd failure while building xwiki-plaform http://ci.xwiki.org/job/xwiki-platform/ws/xwiki-platform-tools/xwiki-platform-tool-packager-plugin/target/it/package-simple/build.log  \n16:19\u00a0<Enygma`>\u00a0does not seem related to the change (mine) that triggered the build  \n16:51\u00a0<Lyes>\u00a0has quit  \n16:52\u00a0<Lyes>\u00a0has joined #xwiki  \n16:53\u00a0<DarkKnightCZ>\u00a0has quit  \n17:02\u00a0<vmassol>\u00a0so the cluster build passed, lots of track traces though.  \n17:02\u00a0<vmassol>\u00a0http://ci.xwiki.org/view/Last%20Builds/job/xwiki-enterprise-test-cluster/225/consoleFull  \n17:04\u00a0<silverdrop>\u00a0has quit  \n17:11\u00a0<mflorea1>\u00a0vmassol: they seem to be related to lucene, I don't see any mention on solr  \n17:12\u00a0<vmassol>\u00a0yes indeed  \n17:12\u00a0<vmassol>\u00a0does it mean lucene in enable in search by default and not solr?  \n17:12\u00a0<vmassol>\u00a0\\*is enabled  \n17:13\u00a0<vmassol>\u00a0would need to check the cluster test code  \n17:13\u00a0<vmassol>\u00a0to see if it forces lucene  \n17:14\u00a0<mflorea1>\u00a0both are enabled by default  \n17:15\u00a0<mflorea1>\u00a0the configuration from administration controls which one is used when you search, but both are indexing the wiki at the same time. We don't have a way to disable one of them from the UI.  \n17:15\u00a0<vmassol>\u00a0ouch that's costly  \n17:15\u00a0<mflorea1>\u00a0most probably  \n17:16\u00a0<Enygma`>\u00a0vmassol: \u00a0did you change something in the startup script that might stop the XWiki instance even if I`ve just started tests from my IDE?  \n17:16\u00a0<Enygma`>\u00a0I remember that from the IDE my local instance was not closed, only when starting from maven  \n17:16\u00a0<vmassol>\u00a0no  \n17:16\u00a0<vmassol>\u00a0this is is not in the startup scripts anyway  \n17:16\u00a0<Enygma`>\u00a0I`ve just started from the IDE and my local instance got killed  \n17:17\u00a0<Enygma`>\u00a0right, not from the script  \n17:17\u00a0<vmassol>\u00a0if you want to debug this, it's in XWikiExecutor  \n17:17\u00a0<mflorea1>\u00a0afaik there is some param you need to pass to the tests  \n17:17\u00a0<Enygma`>\u00a0OK, will have to see more tomorrow, since I need to go  \n17:17\u00a0<vmassol>\u00a0there's a system property to decide this  \n17:17\u00a0<Enygma`>\u00a0yes, know it  \n17:17\u00a0<vmassol>\u00a0by default it doesn't do anything  \n17:17\u00a0<vmassol>\u00a0ie uses any running XE  \n17:17\u00a0<Enygma`>\u00a0gtg  \n17:18\u00a0<vmassol>\u00a0bye  \n17:18\u00a0<Enygma`>\u00a0has quit  \n17:19\u00a0<evalica>\u00a0has quit  \n17:34\u00a0<mflorea1>\u00a0has quit  \n17:42\u00a0<lucaa>\u00a0hello devs  \n17:43\u00a0<lucaa>\u00a03 of them just left. damn  \n17:43\u00a0<lucaa>\u00a0I need to fix http://jira.xwiki.org/browse/XWIKI-11322  \n17:43\u00a0<lucaa>\u00a0and for that, I would need to remove the particle language=en from a query string...  \n17:44\u00a0<lucaa>\u00a0a query string = the value returned by request.getQueryString()  \n17:45\u00a0<lucaa>\u00a0do you have another idea besides a regex ?  \n17:48\u00a0<vmassol>\u00a0having to remove something doesn't seem right  \n17:48\u00a0<vmassol>\u00a0why is it there in the first place?  \n17:49\u00a0<lucaa>\u00a0vmassol: read the issue  \n17:49\u00a0<lucaa>\u00a0(and the comment of the issue)  \n17:49\u00a0<vmassol>\u00a0sorry I'm on something else  \n17:59\u00a0<vmassol>\u00a0ok I've read it now  \n17:59\u00a0<vmassol>\u00a0so we want to preserve eveyrthing in the query string except the \"language\" parameter if set  \n18:00\u00a0<vmassol>\u00a0so actually  \n18:00\u00a0<vmassol>\u00a0what we want is more a way to replace a query string parameter  \n18:00\u00a0<gdelhumeau>\u00a0I('m working on it !  \n18:00\u00a0<gdelhumeau>\u00a0Actually, on http://jira.xwiki.org/browse/XWIKI-11314  \n18:01\u00a0<vmassol>\u00a0note that URLEncodedUtils is quite nice  \n18:01\u00a0<vmassol>\u00a0it doesn't have any replace method though  \n18:03\u00a0<vmassol>\u00a0indeed  \n18:04\u00a0<vmassol>\u00a0spagghetti code though  \n18:05\u00a0<vmassol>\u00a0and duplicates  \n18:05\u00a0<vmassol>\u00a0yuck  \n18:05\u00a0<vmassol>\u00a0gdelhumeau: you're increasing the debt :)  \n18:06\u00a0<vmassol>\u00a0why don't you create a velocity macro to do this?  \n18:06\u00a0<vmassol>\u00a0or  \n18:06\u00a0<vmassol>\u00a0a velocity tool  \n18:06\u00a0<vmassol>\u00a0we have URLTool already  \n18:07\u00a0<cjd>\u00a0has quit  \n18:07\u00a0<vmassol>\u00a0oh btw it's buggy  \n18:07\u00a0<vmassol>\u00a0:)  \n18:07\u00a0<vmassol>\u00a0that's why you need it in java and have proper unit tests for it  \n18:08\u00a0<vmassol>\u00a0you just lost a lot of parameters....  \n18:09\u00a0<gdelhumeau>\u00a0those that are not in getParameterMap?  \n18:10\u00a0<vmassol>\u00a0I've commented in github  \n18:19\u00a0<gdelhumeau>\u00a0I did not create a macro because the code is dupplicate between colibri & flamingo  \n18:19\u00a0<gdelhumeau>\u00a0that does not have a macro file in common  \n18:19\u00a0<vmassol>\u00a0it's not the only question  \n18:19\u00a0<vmassol>\u00a0the main issue is spaggheti code  \n18:20\u00a0<gdelhumeau>\u00a0yes I know  \n18:20\u00a0<vmassol>\u00a0that means this page shouldn't bother  \n18:20\u00a0<vmassol>\u00a0about knowing how to manipulate query stirngs  \n18:20\u00a0<vmassol>\u00a0it's not its job  \n18:20\u00a0<vmassol>\u00a0ok  \n18:22\u00a0<gdelhumeau>\u00a0then actually all menus\\_language.vm is a joke  \n18:22\u00a0<lucaa>\u00a0vmassol: you say \"but you've just lost all parameters that appear more than once in the query string... \" on github. Are you sure?  \n18:22\u00a0<vmassol>\u00a0possibly  \n18:22\u00a0<gdelhumeau>\u00a0it deals with the main wiki configuration, the current $tdoc document, etc  \n18:22\u00a0<lucaa>\u00a0becayse getParameterMap normally returns pairs of string and string array  \n18:22\u00a0<lucaa>\u00a0so he gets them and puts them back  \n18:23\u00a0<gdelhumeau>\u00a0we should have a service that list every available languages  \n18:23\u00a0<lucaa>\u00a0as string array\\  \n18:23\u00a0<gdelhumeau>\u00a0+ a service about query string (and value replacement)  \n18:23\u00a0<vmassol>\u00a0thre are lots of jokes in the xwiki code base guillaume :)  \n18:23\u00a0<woshilapin>\u00a0has quit  \n18:23\u00a0<gdelhumeau>\u00a0I see  \n18:24\u00a0<gdelhumeau>\u00a0\"not make the technical debt grows\" policy then  \n18:24\u00a0<vmassol>\u00a0yes  \n18:24\u00a0<vmassol>\u00a0lucaa: if he gets them and puts them back then he's not done aynthign  \n18:24\u00a0<gdelhumeau>\u00a0anyway I have to go now  \n18:24\u00a0<vmassol>\u00a0so why have the code?  \n18:25\u00a0<gdelhumeau>\u00a0so either we revert it, or you fix it, or I introduce a better fix after 6.3m2 is released  \n18:25\u00a0<lucaa>\u00a0he does do something: he overwrites the language one  \n18:25\u00a0<vmassol>\u00a0let me check the siganture  \n18:25\u00a0<vmassol>\u00a0I jsut reviexed visually  \n18:25\u00a0<vmassol>\u00a0\\*reviewed  \n18:26\u00a0<lucaa>\u00a0and why does he do a copy? Because it's not very cool to overwrite in the actual map of the request  \n18:26\u00a0<gdelhumeau>\u00a0lucaa: no  \n18:26\u00a0<lucaa>\u00a0unless the request returns a copy (I guess it does)  \n18:26\u00a0<vmassol>\u00a0indeed my bad the values of the map are string arrays  \n18:26\u00a0<gdelhumeau>\u00a0lucaa: it returns an unmodifiable map: http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableMap(java.util.Map)  \n18:26\u00a0<lucaa>\u00a0vmassol: ;)  \n18:26\u00a0<gdelhumeau>\u00a0tadaa  \n18:27\u00a0<vmassol>\u00a0ahah  \n18:27\u00a0<lucaa>\u00a0gdelhumeau: exactly, because you're not supposed to modify them. the api acutally enforces that  \n18:27\u00a0<vmassol>\u00a0good point re imutbale  \n18:27\u00a0<vmassol>\u00a0immutable  \n18:27\u00a0<lucaa>\u00a0so vmassol: any other remark about this technique?  \n18:27\u00a0<vmassol>\u00a0yes  \n18:27\u00a0<lucaa>\u00a0besides the duplication?  \n18:27\u00a0<vmassol>\u00a0this should be in a utiliy method  \n18:27\u00a0<lucaa>\u00a0besides the duplication  \n18:27\u00a0<gdelhumeau>\u00a0lucaa: I don't modify them, I just generate a new query string on language links  \n18:27\u00a0<vmassol>\u00a0or use an exsiting framework  \n18:28\u00a0<vmassol>\u00a0like commons http  \n18:28\u00a0<vmassol>\u00a0of URL utils from common lang or something  \n18:28\u00a0<vmassol>\u00a0but I don't know if they have something for this  \n18:28\u00a0<lucaa>\u00a0gdelhumeau: yes, I see what you do. makes perfect sense to me  \n18:29\u00a0<lucaa>\u00a0gdelhumeau: it should not be that bad, the copying. Because that copy would die quite fast  \n18:29\u00a0<lucaa>\u00a0actually, no  \n18:29\u00a0<lucaa>\u00a0it won't  \n18:29\u00a0<gdelhumeau>\u00a0yes, but we do unnecessay stuff like that everytwhere in xwiki  \n18:29\u00a0<lucaa>\u00a0unless you manually put the var to null after using it  \n18:29\u00a0<gdelhumeau>\u00a0end at the end, it is slow  \n18:30\u00a0<lucaa>\u00a0because the velocity context of the vms is HUGE  \n18:30\u00a0<gdelhumeau>\u00a0\\*and  \n18:30\u00a0<Lyes>\u00a0has quit  \n18:30\u00a0<gdelhumeau>\u00a0lucaa: the tool will encapsulate that copy, so you will do each time you call it  \n18:30\u00a0<lucaa>\u00a0well, the only issue is that if you put a copy like that in a velocity variable in a skin vm, knowing that there is no scope in velocity, that variable will live until the rendering of the page is done  \n18:31\u00a0<lucaa>\u00a0gdelhumeau: yes. But the tool could actually return a string  \n18:31\u00a0<lucaa>\u00a0we could make that  \n18:31\u00a0<gdelhumeau>\u00a0it would be a tool like : $tool.getQueryStringWithValue(newValueKey, newValueValue)  \n18:31\u00a0<lucaa>\u00a0something like that  \n18:31\u00a0<lucaa>\u00a0it could  \n18:31\u00a0<lucaa>\u00a0if it would help not having copies all over the place  \n18:31\u00a0<gdelhumeau>\u00a0lucaa: tmortagne is working on it BTW, maybe the templates.vm will have their own context in the future  \n18:31\u00a0<lucaa>\u00a0but, as soon as you store that string in a variable, you use the same amount of memory  \n18:32\u00a0<lucaa>\u00a0gdelhumeau: I know, but this does not fix the issue :)  \n18:32\u00a0<gdelhumeau>\u00a0anyway, I have to go  \n18:32\u00a0<lucaa>\u00a0I mean, it will only make it less bad :D  \n18:32\u00a0<lucaa>\u00a0have fun gdelhumeau  \n18:32\u00a0<gdelhumeau>\u00a0thanks  \n18:32\u00a0<gdelhumeau>\u00a0you too  \n18:32\u00a0<gdelhumeau>\u00a0has quit  \n18:32\u00a0<vmassol>\u00a0see you on Monday  \n18:33\u00a0<lucaa>\u00a0vmassol: so, any news from the available tools? any tool that knows how to do that?  \n18:33\u00a0<vmassol>\u00a0ATM the only one I know is =  \n18:33\u00a0<vmassol>\u00a0the one we us in URLTool  \n18:33\u00a0<vmassol>\u00a0ie URLEncodedUtils  \n18:33\u00a0<lucaa>\u00a0what module is URLTool in?  \n18:33\u00a0<vmassol>\u00a0another solution is your regex solution encapsulated in a tool  \n18:33\u00a0<vmassol>\u00a0velocity  \n18:34\u00a0<vmassol>\u00a0commons-velocity  \n18:34\u00a0<vmassol>\u00a0but I don't like regex too much, always wary of them  \n18:34\u00a0<lucaa>\u00a0which is why I asked the question :P  \n18:34\u00a0<lucaa>\u00a0neither do I  \n18:34\u00a0<vmassol>\u00a0so URLEncodedUtils would work  \n18:35\u00a0<vmassol>\u00a0it's just a pity to use that if awhat you need in output is a String  \n18:35\u00a0<vmassol>\u00a0s/awhat/what  \n18:35\u00a0<vmassol>\u00a0there's a format method but still  \n18:35\u00a0<vmassol>\u00a0(in URLEncodedUtils)  \n18:35\u00a0<lucaa>\u00a0I also need to go, but I will be back later  \n18:35\u00a0<lucaa>\u00a0and will look at this  \n18:35\u00a0<vmassol>\u00a0ok not sure on my side though  \n18:35\u00a0<vmassol>\u00a0I'm on holidays for 3 days  \n18:36\u00a0<lucaa>\u00a0well, if all you need is put it in a string and it's a pity to use a sophisticated tool, then regex is \\_the\\_ tool  \n18:36\u00a0<lucaa>\u00a0for strings  \n18:36\u00a0<lucaa>\u00a0because that's what regex is, a tool for strings  \n18:36\u00a0<mflorea>\u00a0has joined #xwiki  \n18:36\u00a0<vmassol>\u00a0what do you have input?  \n18:36\u00a0<vmassol>\u00a0string  \n18:36\u00a0<vmassol>\u00a0request  \n18:36\u00a0<vmassol>\u00a0?  \n18:36\u00a0<vmassol>\u00a0s/input/as input  \n18:36\u00a0<lucaa>\u00a0so either it's ok to make a whole scaffolding with maps and format and stuff, or regex is ok  \n18:37\u00a0<lucaa>\u00a0you have request, so you can have both: map and string  \n18:37\u00a0<lucaa>\u00a0it has both functions  \n18:37\u00a0<vmassol>\u00a0if you have request  \n18:37\u00a0<vmassol>\u00a0you need a string as output right?  \n18:37\u00a0<lucaa>\u00a0most often yes  \n18:37\u00a0<vmassol>\u00a0in your case at hand I mean  \n18:37\u00a0<vmassol>\u00a0for the pdf export stuff  \n18:38\u00a0<lucaa>\u00a0yes, string  \n18:38\u00a0<vmassol>\u00a0with regex you'd need to be careful to take into accoutn the fact that there can be several \"language\" parameters  \n18:38\u00a0<vmassol>\u00a0BTW I also used a regex...  \n18:38\u00a0<vmassol>\u00a0(shame on me)  \n18:38\u00a0<vmassol>\u00a0for removing the jsessionid  \n18:38\u00a0<vmassol>\u00a0from URLs  \n18:39\u00a0<lucaa>\u00a0this evening gets better and better  \n18:39\u00a0<vmassol>\u00a0couldn't find anything better....  \n18:39\u00a0<vmassol>\u00a0hehe  \n18:39\u00a0<lucaa>\u00a0come on, adtmit  \n18:39\u00a0<lucaa>\u00a0what else did you do?  \n18:39\u00a0<lucaa>\u00a0maybe you forgot to indent a line, once?  \n18:39\u00a0<vmassol>\u00a0oh you woudln't want to know!  \n18:39\u00a0<lucaa>\u00a0so regex at will/  \n18:39\u00a0<lucaa>\u00a0?  \n18:40\u00a0<vmassol>\u00a0regex doesn't bother me that much if it's encapsulated in a metho  \n18:40\u00a0<vmassol>\u00a0method  \n18:40\u00a0<vmassol>\u00a0you don't think we should add a method in URLTool for this?  \n18:40\u00a0<lucaa>\u00a0I need to go, I will figure out something. And in the worse case I will just duplicate the same code from gdelhumeau  \n18:40\u00a0<lucaa>\u00a0yes, we could  \n18:40\u00a0<vmassol>\u00a0in your case you're in velocity or un java?  \n18:40\u00a0<vmassol>\u00a0\\*in  \n18:40\u00a0<lucaa>\u00a0but in my case it would be a bit of a pain  \n18:40\u00a0<lucaa>\u00a0I would prefer only patching a vm in the skin  \n18:40\u00a0<lucaa>\u00a0not also a jar in the lib...  \n18:40\u00a0<lucaa>\u00a0:D  \n18:40\u00a0<vmassol>\u00a0ah that's different  \n18:40\u00a0<lucaa>\u00a0to deploy this fix as a patch  \n18:41\u00a0<vmassol>\u00a0you need to change hat here  \n18:41\u00a0<vmassol>\u00a0:)  \n18:41\u00a0<lucaa>\u00a0yes, I need to  \n18:41\u00a0<lucaa>\u00a0but this is really collateral  \n18:41\u00a0<lucaa>\u00a0as I can hack my fix  \n18:41\u00a0<vmassol>\u00a0you could still use your hack on your instance  \n18:41\u00a0<vmassol>\u00a0yep  \n18:41\u00a0<lucaa>\u00a0so let's say I don't care that much  \n18:41\u00a0<lucaa>\u00a0I need to go, ppl are yelling at me for not going  \n18:41\u00a0<lucaa>\u00a0really sorry  \n18:41\u00a0<vmassol>\u00a0if we think that this is a use case that happens in several places  \n18:41\u00a0<lucaa>\u00a0this was fun  \n18:42\u00a0<vmassol>\u00a0then  \n18:42\u00a0<vmassol>\u00a0ok  \n18:42\u00a0<vmassol>\u00a0have fun  \n18:42\u00a0<lucaa>\u00a0the case is: make a URL that preserves all existing params except 1 which will be overwritten by a form in this page  \n18:42\u00a0<lucaa>\u00a0what we usually do, when we know the params  \n18:43\u00a0<lucaa>\u00a0is that we re-put the params in the form, as hidden  \n18:43\u00a0<lucaa>\u00a0this way, we preserve  \n18:43\u00a0<lucaa>\u00a0but there are cases when we don't know the params to preserve  \n18:43\u00a0<lucaa>\u00a0like this one with the language  \n18:44\u00a0<lucaa>\u00a0actually, the case is like:  \n18:44\u00a0<lucaa>\u00a0now I really need to go  \n18:44\u00a0<lucaa>\u00a0ta-daa, have nice holidays  \n19:10\u00a0<Slashman\\_>\u00a0has quit  \n19:10\u00a0<silverdrop>\u00a0has joined #xwiki  \n19:17\u00a0<silverdrop>\u00a0has quit  \n19:38\u00a0<sdumitriu1>\u00a0has quit  \n19:49\u00a0<mflorea>\u00a0has quit  \n19:56\u00a0<abusenius>\u00a0has joined #xwiki  \n20:07\u00a0<sdumitriu>\u00a0has joined #xwiki  \n20:15\u00a0<mflorea>\u00a0has joined #xwiki  \n20:34\u00a0<Lyes>\u00a0has joined #xwiki  \n21:14\u00a0<mflorea>\u00a0has quit  \n21:15\u00a0<lucaa>\u00a0has joined #xwiki  \n21:19\u00a0<lucaa>\u00a0has quit  \n21:37\u00a0<Lyes>\u00a0has quit  \n21:46\u00a0<Lyes>\u00a0has joined #xwiki  \n22:24\u00a0<lucaa>\u00a0has joined #xwiki  \n22:25\u00a0<Lyes>\u00a0has quit  \n22:34\u00a0<lucaa>\u00a0has quit  \n23:03\u00a0<sdumitriu>\u00a0has quit  \n23:15\u00a0<abusenius>\u00a0has quit  \n23:45\u00a0<vmassol>\u00a0has quit\n"}