{"id": "dev:IRC.xwikiArchive20130627", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20130627", "title": "IRC Archive for channel #xwiki on 27 June 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Denis1>\u00a0is now known as <Denis>  \n03:03\u00a0<Denis>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n04:48\u00a0<sdumitriu>\u00a0has quit  \n05:14\u00a0<sdumitriu>\u00a0has joined #xwiki  \n05:29\u00a0<sdumitriu>\u00a0has quit  \n05:31\u00a0<sdumitriu>\u00a0has joined #xwiki  \n05:43\u00a0<npm>\u00a0has quit  \n05:43\u00a0<npm\\_>\u00a0has joined #xwiki  \n05:51\u00a0<Denis>\u00a0has quit  \n06:06\u00a0<Buddhi\\_>\u00a0has joined #xwiki  \n06:10\u00a0<vmassol>\u00a0has joined #xwiki  \n06:24\u00a0<vmassol>\u00a0has quit  \n06:40\u00a0<Buddhi\\_>\u00a0has quit  \n07:37\u00a0<mflorea>\u00a0has joined #xwiki  \n07:53\u00a0<vmassol>\u00a0has joined #xwiki  \n07:57\u00a0<vmassol>\u00a0has quit  \n07:59\u00a0<vmassol>\u00a0has joined #xwiki  \n08:07\u00a0<vmassol>\u00a0has quit  \n08:09\u00a0<msmeria>\u00a0has joined #xwiki  \n08:28\u00a0<sburjan>\u00a0has joined #xwiki  \n08:36\u00a0<evalica>\u00a0has joined #xwiki  \n08:37\u00a0<Denis1>\u00a0has joined #xwiki  \n08:51\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:59\u00a0<vmassol>\u00a0has joined #xwiki  \n09:05\u00a0<vmassol>\u00a0has quit  \n09:07\u00a0<mflorea>\u00a0vmassol: platform was not branched yet..  \n09:15\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:34\u00a0<evalica>\u00a0has quit  \n09:34\u00a0<msmeria>\u00a0has quit  \n09:37\u00a0<evalica>\u00a0has joined #xwiki  \n09:37\u00a0<msmeria>\u00a0has joined #xwiki  \n09:51\u00a0<tmortagne>\u00a0mflorea: in case your you forgot and you are not doing it right now: the parent versions are still 5.1-SNAPSHOT on master  \n09:51\u00a0<mflorea>\u00a0tmortagne: release is not done  \n09:51\u00a0<mflorea>\u00a0platform release is in progress  \n09:52\u00a0<tmortagne>\u00a0ok I tough you created the branches before releasing  \n09:52\u00a0<mflorea>\u00a0no, I just followed the release steps :)  \n09:53\u00a0<tmortagne>\u00a0I can take care of updating master versions if you like  \n09:54\u00a0<tmortagne>\u00a0right now rendering and platform master branches are a bit in the middle of two versions  \n09:54\u00a0<mflorea>\u00a0if it blocks you then go ahead, otherwise I was planning to do it after the maven release is done  \n09:55\u00a0<tmortagne>\u00a0will take care of master (for XE and XEM too when ready), you have enough other things to do  \n09:56\u00a0<mflorea>\u00a0thanks  \n09:58\u00a0<vmassol>\u00a0has joined #xwiki  \n10:03\u00a0<Denis1>\u00a0is now known as <Denis>  \n10:25\u00a0<tdelafosse>\u00a0has joined #xwiki  \n10:30\u00a0<vmassol>\u00a0has quit  \n10:32\u00a0<tmortagne>\u00a0jenkins is slower than ever...  \n10:33\u00a0<tmortagne>\u00a0it's barely usable these days  \n10:34\u00a0<sburjan>\u00a0tmortagne: I confirm that the translation issue I reported yesterday is fixed on today's snapshot  \n10:35\u00a0<tmortagne>\u00a0sburjan: ok cool  \n10:36\u00a0<sburjan>\u00a0mflorea: I think you forgot to close this one http://jira.xwiki.org/browse/XWIKI-8940  \n10:38\u00a0<mflorea>\u00a0sburjan?  \n10:38\u00a0<mflorea>\u00a0do you see any commits?  \n10:38\u00a0<sburjan>\u00a0ah it's 5.2, sorry  \n10:38\u00a0<mflorea>\u00a0np  \n10:39\u00a0<vmassol>\u00a0has joined #xwiki  \n10:53\u00a0<vmassol>\u00a0has quit  \n11:02\u00a0<vmassol>\u00a0has joined #xwiki  \n11:07\u00a0<vmassol>\u00a0has quit  \n11:40\u00a0<vmassol>\u00a0has joined #xwiki  \n11:41\u00a0<vmassol>\u00a0hi guys, just back from luxembourg  \n11:41\u00a0<vmassol>\u00a0(I committed in the train this morning ;))  \n12:23\u00a0<mflorea>\u00a0has quit  \n12:53\u00a0<alex\\_D>\u00a0has joined #xwiki  \n12:55\u00a0<alex\\_D>\u00a0has left #xwiki  \n13:41\u00a0<mflorea>\u00a0has joined #xwiki  \n14:16\u00a0<tdelafosse>\u00a0has quit  \n14:19\u00a0<tdelafosse>\u00a0has joined #xwiki  \n15:58\u00a0<Denis>\u00a0tdelafosse: I think I pushed the idea to have it right, I post on the list in a moment, I hope you will appreciate !  \n16:02\u00a0<msmeria>\u00a0has quit  \n16:07\u00a0<tdelafosse>\u00a0Denis : I'm reading it, I will give you my thoughts on it in one moment :)  \n16:08\u00a0<Denis>\u00a0tdelafosse: I really think it works nicely taking all in consideration, I am looking forward reading your comments :)  \n16:21\u00a0<tdelafosse>\u00a0Denis : Yes, it looks great to me too :)  \n16:23\u00a0<Denis>\u00a0tdelafosse: I am glad you appreciate, and the discussion really helps to reach that point :)  \n16:29\u00a0<tdelafosse>\u00a0Denis : Yes that's great we succeeded to find a solution that suits both of us :) I will reply to your mail to make it clear I agree with your new solution, and to discuss some implementation details. Thanks !  \n16:40\u00a0<tdelafosse>\u00a0Denis : Actually I realized that there was a little issue with \"Never ask anything about that mechanism to the end user, doing so mostly transparently, signing all scripts\". A malicious user could trick PR users to sign scripts he hide in a page. So I guess that on the save, we should display a little interface to ask the privileged user which scripts he wants to sign.  \n16:42\u00a0<Denis>\u00a0tdelafosse: well, if a admin does not care about what he save, it is his responsability, wdyt ?  \n16:43\u00a0<Denis>\u00a0We should push the idea as much as possible, so I think we should think about more, but target the goal that we transparently prevent that from happening  \n16:43\u00a0<Denis>\u00a0note that since each script are signed on their initial save, you may prevent it to be resigned by an admin, event if the admin edit the page  \n16:44\u00a0<Denis>\u00a0so, unless the admin edit the script in some way, he could not be tricked to sign it  \n16:45\u00a0<Denis>\u00a0at least, this is my target idea  \n16:47\u00a0<tdelafosse>\u00a0Denis : Ok, but that would mean we should have a way to easily identify scripts, so every script would need to be given (by the user ?) an unique id. Else it would be a mess to know which signature refers to which object  \n16:48\u00a0<tdelafosse>\u00a0By the way, to make it clear : we choose to store the signature in objects attached to the page, right ?  \n16:49\u00a0<tdelafosse>\u00a0replace \"object\" by \"script\" in my first reply  \n16:56\u00a0<Denis>\u00a0tdelafosse: currently, this is implementation detail we should discuss later to avoid mixing all the problem  \n16:56\u00a0<Denis>\u00a0IMO, it would be more difficult and potentially risky to use objects  \n16:56\u00a0<tmortagne>\u00a0sburjan: even if I don't fully understand it it's possible my last commit on solr may improve a bit the speed for you, looks like it was sending less documents at the same time than it was supposed to to the Solr server  \n16:57\u00a0<tmortagne>\u00a0sburjan: you can play with it a big in xwiki.properties  \n16:57\u00a0<tmortagne>\u00a0you have several properties to increase or decrease the size of the batch  \n16:57\u00a0<tmortagne>\u00a0try with that maybe  \n16:57\u00a0<sburjan>\u00a0tmortagne: ok, I'll play tomorrow. Maybe it's the same, I'll open my localhost wiki so you can debug it  \n16:57\u00a0<sburjan>\u00a0ok, will do  \n16:58\u00a0<tmortagne>\u00a0s/big/bit/  \n16:58\u00a0<Denis>\u00a0tdelafosse: using object will impose some sync between the document content and the objects  \n16:58\u00a0<sburjan>\u00a0basically my issues is about indexing. The initial number right after startup increases pretty fast. Then, the actual indexing begins .. which is slow  \n16:58\u00a0<sburjan>\u00a0but I will try  \n16:59\u00a0<Denis>\u00a0tdelafosse: what afraid me is the potential consequences of de-sync  \n16:59\u00a0<Denis>\u00a0tdelafosse: I have to leave for a while  \n16:59\u00a0<tdelafosse>\u00a0Denis : Ok. We would resume this conversation later then.  \n17:00\u00a0<tdelafosse>\u00a0I will mention this issue in a mail so we can have other points of view.  \n17:00\u00a0<tdelafosse>\u00a0See you later :)  \n17:02\u00a0<vmassol>\u00a0has quit  \n17:03\u00a0<vmassol>\u00a0has joined #xwiki  \n17:11\u00a0<sburjan>\u00a0has quit  \n17:19\u00a0<vmassol>\u00a0sburjan`: do you have access to an instance  \n17:19\u00a0<vmassol>\u00a0where you'd have migrated from an old version of xwiki to a new version?  \n17:20\u00a0<vmassol>\u00a0(using the DW)  \n17:20\u00a0<vmassol>\u00a0and where you'd have modified a page in the old page that had conflicts when upgrading  \n17:20\u00a0<vmassol>\u00a0...  \n17:21\u00a0<tmortagne>\u00a0no need to modify the page, in your case you simply upgraded from a version older than DW  \n17:21\u00a0<vmassol>\u00a0yes but you need to have a few revs  \n17:22\u00a0<vmassol>\u00a0if you only hve a 1.1 then you won't see much  \n17:22\u00a0<tmortagne>\u00a0you will see that you still have only 1.1 no ?  \n17:22\u00a0<vmassol>\u00a0that's not what I saw on myxwiki.org  \n17:22\u00a0<vmassol>\u00a0I had both 1.1 and the latest one as in 49.1  \n17:23\u00a0<tmortagne>\u00a0ok I tough the 49.1 was a revert you tried  \n17:23\u00a0<vmassol>\u00a0so if I get 1.1 and 2.1 it won't prove much  \n17:23\u00a0<vmassol>\u00a0nope  \n17:24\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n18:19\u00a0<gdelhumeau>\u00a0has quit  \n18:26\u00a0<evalica>\u00a0has quit  \n18:44\u00a0<tdelafosse>\u00a0has quit  \n18:51\u00a0<sdumitriu1>\u00a0Does the component manager inject static fields?  \n18:51\u00a0<vmassol>\u00a0I don't think so  \n18:51\u00a0<sdumitriu1>\u00a0@Inject private static SomeComponent c?  \n18:52\u00a0<sdumitriu1>\u00a0K  \n18:52\u00a0<vmassol>\u00a0if it works it's by pure luck...  \n18:52\u00a0<tmortagne>\u00a0I doubt it inject static field  \n18:52\u00a0<sdumitriu1>\u00a0But I guess I can do this in an initialize() { staticField = injectedInstanceField; }  \n18:53\u00a0<vmassol>\u00a0it's kind of against the component based approach  \n18:53\u00a0<sdumitriu1>\u00a0Well, there are components, and there are beans  \n18:53\u00a0<vmassol>\u00a0we only inject in components  \n18:53\u00a0<tmortagne>\u00a0sdumitriu: why not a singleton component ?  \n18:53\u00a0<sdumitriu1>\u00a0And since there's no way for beans to touch components, I have to be creative  \n18:53\u00a0<sdumitriu1>\u00a0tmortagne: WDYM?  \n18:54\u00a0<tmortagne>\u00a0my default a component is a singleton, which mean if you as CM ou will always get the same instance  \n18:54\u00a0<tmortagne>\u00a0so I don't really see the point in injecting static  \n18:54\u00a0<tmortagne>\u00a0s/my/by/  \n18:54\u00a0<sdumitriu1>\u00a0vmassol: The injection JSR doesn't make the distinction between components and the rest, any kind of object can use @Inject  \n18:54\u00a0<tmortagne>\u00a0s/as/ask/  \n18:54\u00a0<sdumitriu1>\u00a0It's our CM that's limited to components only  \n18:55\u00a0<sdumitriu1>\u00a0tmortagne: I agree, but I need a way to access the component manager from something that's not a component  \n18:55\u00a0<sdumitriu1>\u00a0And I don't want to pass it around in a constructor  \n18:56\u00a0<sdumitriu1>\u00a0So I'd like to set up a ComponentManagerRegistry, which has a @Named(\"context\") Provider<ComponentManager> and exposes it through a static getContextComponentManager() method  \n18:56\u00a0<tmortagne>\u00a0here is what the CM does: ask all the field of an object and the fields that has inject annotation get injected, no idea if static will be matched or not but you can try  \n18:57\u00a0<vmassol>\u00a0gtg, bb in 1 hour  \n18:57\u00a0<tmortagne>\u00a0if not then either you send a proposal mail (I'm ok with it) or you set it ourself in an initialize  \n18:57\u00a0<tmortagne>\u00a0s/ourself/yourself/  \n19:00\u00a0<tmortagne>\u00a0the fields come from Class#getDeclaredFields but the javadoc is not clear if it indludes static fields or not  \n19:00\u00a0<tmortagne>\u00a0since there is no getStaticFields I guess it could work  \n19:01\u00a0<tmortagne>\u00a0at least we don't prevent on purpose to inject static field in any way  \n19:03\u00a0<tmortagne>\u00a0has quit  \n19:09\u00a0<abusenius>\u00a0has joined #xwiki  \n19:30\u00a0<tdelafosse>\u00a0has joined #xwiki  \n19:52\u00a0<Buddhi>\u00a0has joined #xwiki  \n20:00\u00a0<mflorea>\u00a0has quit  \n20:26\u00a0<Buddhi>\u00a0has quit  \n20:27\u00a0<Buddhi>\u00a0has joined #xwiki  \n20:30\u00a0<tdelafosse>\u00a0has quit  \n20:54\u00a0<Buddhi>\u00a0has quit  \n21:04\u00a0<Denis>\u00a0has quit  \n21:47\u00a0<evalica>\u00a0has joined #xwiki  \n23:01\u00a0<evalica>\u00a0has quit  \n23:40\u00a0<sdumitriu1>\u00a0vmassol: FYI, injection works with static members  \n23:41\u00a0<vmassol>\u00a0sdumitriu1: then I guess we'll need to fix this at some point :)  \n23:41\u00a0<vmassol>\u00a0sorry I had to leave earlier on so I didn't follow your use case  \n23:41\u00a0<vmassol>\u00a0and I need to go to bed in a few seconds/minute  \n23:42\u00a0<sdumitriu1>\u00a0No problem  \n23:42\u00a0<sdumitriu1>\u00a0But I still think that we should allow access to components from non-components  \n23:43\u00a0<vmassol>\u00a0it's a good question  \n23:43\u00a0<vmassol>\u00a0we do have a need for sure (and a solution)  \n23:43\u00a0<sdumitriu1>\u00a0What's the solution?  \n23:43\u00a0<vmassol>\u00a0at least in ServletContextInitializaer  \n23:43\u00a0<vmassol>\u00a0I mean XWikiServletContextListener  \n23:44\u00a0<vmassol>\u00a0normally that should be the only need  \n23:44\u00a0<vmassol>\u00a0but in a transition period there's the need to access  \n23:45\u00a0<vmassol>\u00a0and the solution is to create some helper class that takes the CM from the servlet context  \n23:45\u00a0<vmassol>\u00a0(sevletContext.getAttribute())  \n23:45\u00a0<vmassol>\u00a0same as we do in Utils.xxx  \n23:45\u00a0<vmassol>\u00a0s/we/what/  \n23:48\u00a0<vmassol>\u00a0got to go  \n23:48\u00a0<vmassol>\u00a0nn  \n23:48\u00a0<sdumitriu1>\u00a0Bye  \n23:48\u00a0<vmassol>\u00a0has quit  \n23:50\u00a0<abusenius>\u00a0has quit\n"}