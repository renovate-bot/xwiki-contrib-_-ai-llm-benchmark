{"id": "dev:IRC.xwikiArchive20120411", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120411", "title": "IRC Archive for channel #xwiki on 11 April 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:19\u00a0<abusenius>\u00a0has quit  \n01:03\u00a0<polx>\u00a0has quit  \n02:03\u00a0<foss\\_student\\_q12>\u00a0has joined #xwiki  \n02:24\u00a0<sburjan`>\u00a0has quit  \n03:32\u00a0<foss\\_student\\_q12>\u00a0has quit  \n07:05\u00a0<mflorea>\u00a0has joined #xwiki  \n07:49\u00a0<CIA-120>\u00a0Marius Dumitru Florea\u000f master\u000f \\* r7353285\u000f https://github.com/xwiki/xwiki-platform/commit/73532852e6caea2434459c1656e22efcc4b05acc \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-ui/src/main/resources/XWiki/ExtensionManagerMacros.xml :\u000f XWIKI-7705: Extension details are badly requested when extensions are viewed within the administration section - http://git.io/3aN0SA  \n07:49\u00a0<CIA-120>\u00a0Marius Dumitru Florea\u000f stable-4.0.x\u000f \\* r588109c\u000f https://github.com/xwiki/xwiki-platform/commit/588109c77e11cc8598d4b851b39ab71b62c4cda1 \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-ui/src/main/resources/XWiki/ExtensionManagerMacros.xml :\u000f XWIKI-7705: Extension details are badly requested when extensions are viewed within the administration section ...  \n07:51\u00a0<foss\\_student>\u00a0has joined #xwiki  \n07:52\u00a0<foss\\_student>\u00a0has quit  \n08:05\u00a0<vmassol>\u00a0has quit  \n09:06\u00a0<qwebirc14233>\u00a0has joined #xwiki  \n09:29\u00a0<vmassol>\u00a0has joined #xwiki  \n09:33\u00a0<CIA-120>\u00a0Marius Dumitru Florea\u000f master\u000f \\* rf8710b6\u000f https://github.com/xwiki/xwiki-platform/commit/f8710b6d48f22559dd5e6d2b0d834c1145864d31 \u000f/ (2 files):\u000f Improve code style. ...  \n09:44\u00a0<polx>\u00a0has joined #xwiki  \n09:51\u00a0<qwebirc14233>\u00a0has quit  \n09:51\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r0fdcf63\u000f https://github.com/xwiki/xwiki-commons/commit/0fdcf63cac3705a5422d72293e8e225344dcca3b \u000f/ (20 files in 13 dirs):\u000f [Misc] Removed deprecated lookup() calls in favor of getInstance() - http://git.io/CUtzzw  \n09:51\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* re381031\u000f https://github.com/xwiki/xwiki-rendering/commit/e381031ecfddb1f213859494e78cddc0e1397819 \u000f/ (21 files in 15 dirs):\u000f [Misc] Removed deprecated lookup() calls in favor of getInstance() - http://git.io/tDg00A  \n09:52\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* rcb2030d\u000f https://github.com/xwiki/xwiki-platform/commit/cb2030d0342ff6dad58d323a7cfed2aa5bbf7a0a \u000f/ (63 files in 53 dirs):\u000f [Misc] Removed deprecated lookup() calls in favor of getInstance() - http://git.io/51e9og  \n09:59\u00a0<CIA-120>\u00a0Marius Dumitru Florea\u000f master\u000f \\* r5d90aa5\u000f https://github.com/xwiki/xwiki-commons/commit/5d90aa54b0ccabf92bc2c6ef2260fccdab9f1a67 \u000f/ (3 files in 3 dirs):\u000f Update version of commons legacy modules after release (the version wasn't updated automatically because the commons legacy modules haven't been released). - http://git.io/swwT7g  \n10:06\u00a0<foss\\_student>\u00a0has joined #xwiki  \n10:09\u00a0<CIA-120>\u00a0Marius Dumitru Florea\u000f master\u000f \\* rda60d9c\u000f https://github.com/xwiki/xwiki-platform/commit/da60d9c735f5728598618212ed018d718f7bd651 \u000f/ (14 files in 14 dirs):\u000f Update versions after release for modules that haven't been released (test and legacy modules). - http://git.io/cPGeUQ  \n10:12\u00a0<CIA-120>\u00a0Marius Dumitru Florea\u000f master\u000f \\* re8f1cef\u000f https://github.com/xwiki/xwiki-manager/commit/e8f1cef95c72516fdf863e1b6e1dc6663aaa13f5 \u000f/ (3 files in 3 dirs):\u000f Update versions after release for test modules. - http://git.io/SLYzew  \n10:14\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* re0ae448\u000f https://github.com/xwiki/xwiki-commons/commit/e0ae448985f9c7fd7fe37ad99e42df4cab9fd58a \u000f/ (8 files in 6 dirs):\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/Zs9c3Q  \n10:14\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* re69038e\u000f https://github.com/xwiki/xwiki-rendering/commit/e69038e18418bdaa2c9fe580fa0729ee3bde7c40 \u000f/ (34 files in 27 dirs):\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/uKQkLQ  \n10:15\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r18df151\u000f https://github.com/xwiki/xwiki-platform/commit/18df1518e2380d46113955fcf24b72857ff3f56e \u000f/ (60 files in 53 dirs):\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/L-ntaw  \n10:16\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:21\u00a0<CIA-120>\u00a0Marius Dumitru Florea\u000f master\u000f \\* r5ccaf57\u000f https://github.com/xwiki/xwiki-enterprise/commit/5ccaf57ae683d60ca0efa1bd637f10e2b7319bd0 \u000f/ (16 files in 16 dirs):\u000f Update versions after release for enterprise test modules. - http://git.io/POb-cQ  \n10:21\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r0f42536\u000f https://github.com/xwiki/xwiki-rendering/commit/0f4253665f2d5d4d90329ffbe6dc7f71f7b42fce \u000f/ (2 files in 2 dirs):\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/1PaoFA  \n10:21\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* rb36da87\u000f https://github.com/xwiki/xwiki-commons/commit/b36da8732f39e77717c6b54e08a3ab61797cad4c \u000f/ (5 files in 5 dirs):\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/-LC2Ew  \n10:21\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r9b277f5\u000f https://github.com/xwiki/xwiki-platform/commit/9b277f58d5dd68402dc74335904c6be08468144e \u000f/ (4 files in 3 dirs):\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/53ZhTw  \n10:22\u00a0<vmassol>\u00a0hmmm  \n10:23\u00a0<vmassol>\u00a0I guess we need to deprecate ComponentLookupException and introduce a new exception too  \n10:23\u00a0<vmassol>\u00a0or maybe not....  \n10:26\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:26\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r3cc15e7\u000f https://github.com/xwiki/xwiki-platform/commit/3cc15e7769cea06a9c89d2dd5beaee4bb5bc5795 \u000f/ xwiki-platform-core/xwiki-platform-model/src/main/java/org/xwiki/model/internal/scripting/ModelScriptService.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/nv5pwg  \n10:28\u00a0<+mflorea>\u00a0vmassol: you have a compilation error on xwiki-rendering-api  \n10:28\u00a0<+mflorea>\u00a0after your last commit on rendering  \n10:29\u00a0<vmassol>\u00a0mflorea: thanks, I've noticed. I'm on it  \n10:29\u00a0<vmassol>\u00a0my IDE is just a bit slow....  \n10:29\u00a0<+mflorea>\u00a0ok :)  \n10:30\u00a0<vmassol>\u00a0that's one cons of the new API introduced by thomas  \n10:30\u00a0<vmassol>\u00a0the replacement of Class<T> by Type  \n10:30\u00a0<vmassol>\u00a0we now need to cast the result in several places  \n10:30\u00a0<vmassol>\u00a0I've tried to be careful but I missed a few places  \n10:31\u00a0<+mflorea>\u00a0I think you can avoid the cast by doing the assignment separately  \n10:31\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r1d6e850\u000f https://github.com/xwiki/xwiki-rendering/commit/1d6e8500cf95f90a5cc70d0f40c158a1a884ede7 \u000f/ xwiki-rendering-api/src/main/java/org/xwiki/rendering/internal/transformation/DefaultTransformationManager.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/xocwZw  \n10:31\u00a0<vmassol>\u00a0that's what I've been doing  \n10:31\u00a0<+mflorea>\u00a0ok  \n10:31\u00a0<vmassol>\u00a0(except for this last commit ;))  \n10:41\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r2551bdd\u000f https://github.com/xwiki/xwiki-platform/commit/2551bddb641ab42ec881e5a19b9dd26d519bb701 \u000f/ xwiki-platform-core/xwiki-platform-rendering/xwiki-platform-rendering-xwiki/src/main/java/org/xwiki/rendering/internal/scripting/RenderingScriptService.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/fl\\_i-Q  \n10:41\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r58fe7a3\u000f https://github.com/xwiki/xwiki-platform/commit/58fe7a3cb02bd6aab8d98c58366c528a7ac3077a \u000f/ xwiki-platform-core/xwiki-platform-rendering/xwiki-platform-rendering-xwiki/src/main/java/org/xwiki/rendering/internal/scripting/RenderingScriptService.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/82t57A  \n10:43\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r9ff35ab\u000f https://github.com/xwiki/xwiki-rendering/commit/9ff35ab74f9e49749d2c8411c6f16ebea2585e0a \u000f/ xwiki-rendering-api/src/main/java/org/xwiki/rendering/internal/parser/reference/GenericLinkReferenceParser.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/zeBx4w  \n10:43\u00a0<vmassol>\u00a0sorry for the mess guys  \n10:43\u00a0<vmassol>\u00a0I didn't realize I made so many mistakes ;)  \n11:07\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r92addc8\u000f https://github.com/xwiki/xwiki-platform/commit/92addc82d3df25018f2a981ce9cfe1c39453b691 \u000f/ xwiki-platform-core/xwiki-platform-rendering/xwiki-platform-rendering-macros/xwiki-platform-rendering-macro-velocity/src/test/java/org/xwiki/rendering/macro/velocity/VelocityMacroIsolationTest.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/t\\_5pmQ  \n11:07\u00a0<vmassol>\u00a0guys we need someone to release 3.5.1, any volunteer?  \n11:15\u00a0<vmassol>\u00a0rendering is still failing but I don't understand why: http://ci.xwiki.org/job/xwiki-rendering/665/console  \n11:15\u00a0<foss\\_student>\u00a0has quit  \n11:15\u00a0<vmassol>\u00a0trying locally  \n11:16\u00a0<vmassol>\u00a0actually I 've already tried it and it works locally  \n11:21\u00a0<vmassol>\u00a0I've tried again and it worked locally  \n11:30\u00a0<polx>\u00a0has quit  \n11:39\u00a0<foss\\_student>\u00a0has joined #xwiki  \n11:40\u00a0<foss\\_student>\u00a0Hi all. I'm not quite sure if IRC is the right forum for this. I find XWiki to be a deeply interesting project. I would like to contribute to the community. I would like to start with translation. I was wondering if there was an etiquette for getting started - do I just I have to notify anyone before adding to the Translation file?  \n11:44\u00a0<vmassol>\u00a0foss\\_student: hi  \n11:44\u00a0<vmassol>\u00a0foss\\_student: you're referring to http://l10n.xwiki.org right?  \n11:44\u00a0<foss\\_student>\u00a0hi vmassol. yes i am.  \n11:44\u00a0<vmassol>\u00a0cool  \n11:44\u00a0<vmassol>\u00a0well nothing is required. If you wish you can introduce yourself on the users list and explain what you' d like to do  \n11:45\u00a0<vmassol>\u00a0foss\\_student: what language would you like to contribute to?  \n11:45\u00a0<foss\\_student>\u00a0I'll do that. I'd like to contribute to the translation to Vietnamese.  \n11:45\u00a0<vmassol>\u00a0great  \n11:47\u00a0<foss\\_student>\u00a0I'm a student at the ANU. The course project is to contribute to an open source project. Since, I'm quite new to this, I thought I'd contribute via translation, that way at the very least, I'd be useful =)  \n11:47\u00a0<vmassol>\u00a0yep  \n11:47\u00a0<vmassol>\u00a0good idea to get started  \n11:47\u00a0<vmassol>\u00a0thanks for picking xwiki! ;)  \n11:47\u00a0<vmassol>\u00a0I guess you've seen http://dev.xwiki.org/xwiki/bin/view/Community/Contributing ?  \n11:48\u00a0<foss\\_student>\u00a0Yep. I've read that quite thoroughly. I'm very impressed with the organisation of this project.  \n11:48\u00a0<vmassol>\u00a0hmmm devs, we need to update http://dev.xwiki.org/xwiki/bin/view/Community/Contributing#HCreatingandsubmittingapatch which is no longer valid\u2026.  \n11:48\u00a0<vmassol>\u00a0(since we're now using Git pull requests)  \n11:48\u00a0<vmassol>\u00a0foss\\_student: thanks  \n11:53\u00a0<vmassol>\u00a0mflorea: I think something is wrong on agent5.  \n11:53\u00a0<vmassol>\u00a0I don't understand how it cannot find \"Could not find artifact org.xwiki.commons:xwiki-commons-pom:pom:4.1-SNAPSHOT\"  \n11:53\u00a0<+mflorea>\u00a0hmm  \n11:54\u00a0<vmassol>\u00a0and it succeeds in building the rest of rendering  \n11:54\u00a0<vmassol>\u00a0so that's strange  \n11:58\u00a0<+mflorea>\u00a0I see that maven shade plugin fails, maybe there's something special  \n11:58\u00a0<vmassol>\u00a0yes that's what I'm saying  \n11:58\u00a0<vmassol>\u00a0the error is:  \n11:58\u00a0<evalica>\u00a0has joined #xwiki  \n11:58\u00a0<vmassol>\u00a0Could not find artifact org.xwiki.commons:xwiki-commons-pom:pom:4.1-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ org.xwiki.rendering:xwiki-rendering:4.1-SNAPSHOT, /home/hudsonagent/hudson\\_root/workspace/xwiki-rendering/pom.xml, line 27, column 11  \n11:59\u00a0<+mflorea>\u00a0yes, but it fails when executing the shade goal  \n12:00\u00a0<vmassol>\u00a0sure  \n12:05\u00a0<+mflorea>\u00a0note that I have the same problem locally  \n12:05\u00a0<+mflorea>\u00a0so the agent is fine  \n12:11\u00a0<foss\\_student>\u00a0has quit  \n12:12\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:16\u00a0<+mflorea>\u00a0vmassol: http://jira.codehaus.org/browse/MSHADE-103  \n12:17\u00a0<+mflorea>\u00a0so the agent needs to build commons locally..  \n12:58\u00a0<mflorea>\u00a0has quit  \n12:58\u00a0<polx>\u00a0has joined #xwiki  \n13:08\u00a0<polx>\u00a0has quit  \n13:25\u00a0<polx>\u00a0has joined #xwiki  \n13:30\u00a0<vmassol>\u00a0good catch marius\u2026 so it means our snapshot standalone jars are al not correct.....  \n13:36\u00a0<abusenius>\u00a0has joined #xwiki  \n13:38\u00a0<polx>\u00a0has quit  \n13:39\u00a0<polx>\u00a0has joined #xwiki  \n13:39\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* rc68d99c\u000f https://github.com/xwiki/xwiki-commons/commit/c68d99c20c407fa3ed134a6d52d60ec410232efa \u000f/ pom.xml :\u000f XCOMMONS-148: Upgrade Maven Shade plugin to version 1.6 - http://git.io/SaYB7A  \n13:41\u00a0<polx>\u00a0has quit  \n13:42\u00a0<polx>\u00a0has joined #xwiki  \n13:42\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* re582b70\u000f https://github.com/xwiki/xwiki-rendering/commit/e582b70992c49eb11858c678fb676a47eb574316 \u000f/ xwiki-rendering-standalone/pom.xml :\u000f [Misc] Added comment - http://git.io/jFpkPQ  \n13:46\u00a0<polx>\u00a0has quit  \n13:59\u00a0<polx>\u00a0has joined #xwiki  \n14:02\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n14:03\u00a0<polx>\u00a0has quit  \n14:03\u00a0<mflorea>\u00a0has joined #xwiki  \n14:05\u00a0<abusenius>\u00a0has quit  \n14:20\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r8483e47\u000f https://github.com/xwiki/xwiki-platform/commit/8483e471e6af37f801084a9350dbdab1b1a96b87 \u000f/ xwiki-platform-core/xwiki-platform-rendering/xwiki-platform-rendering-wikimacro/xwiki-platform-rendering-wikimacro-api/src/test/java/org/xwiki/rendering/internal/macro/wikibridge/DefaultWikiMacroTest.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/ygCgfQ  \n14:20\u00a0<polx>\u00a0has joined #xwiki  \n14:23\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* rd5e4568\u000f https://github.com/xwiki/xwiki-platform/commit/d5e4568d6fd21562e44b8b20e73bf99d2befe96b \u000f/ xwiki-platform-core/xwiki-platform-query/xwiki-platform-query-manager/src/main/java/org/xwiki/query/internal/ScriptQuery.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/EHin6w  \n14:36\u00a0<vmassol>\u00a0mflorea: I'm on agent5 now  \n14:36\u00a0<vmassol>\u00a0I can see there's the artifact in the local repository  \n14:36\u00a0<vmassol>\u00a0ls /home/hudsonagent/.m2/repository/org/xwiki/commons/xwiki-commons-pom/4.1-SNAPSHOT/xwiki-commons-pom-4.1-SNAPSHOT.pom  \n14:36\u00a0<vmassol>\u00a0/home/hudsonagent/.m2/repository/org/xwiki/commons/xwiki-commons-pom/4.1-SNAPSHOT/xwiki-commons-pom-4.1-SNAPSHOT.pom  \n14:37\u00a0<+mflorea>\u00a0sure, I have the same locally  \n14:37\u00a0<vmassol>\u00a0but when I build offline:  \n14:37\u00a0<vmassol>\u00a0The repository system is offline but the artifact org.xwiki.commons:xwiki-commons-pom:pom:4.1-SNAPSHOT is not available in the local repository.  \n14:37\u00a0<+mflorea>\u00a0did you see the link to the shade issue I gave?  \n14:37\u00a0<vmassol>\u00a0that link says it's not honoring remote repos from settings.xml  \n14:38\u00a0<vmassol>\u00a0but here we're talking about the local repo  \n14:38\u00a0<vmassol>\u00a0it should find it in the local repo  \n14:38\u00a0<+mflorea>\u00a0yes, but did you build it, or was it taken from the remote repo?  \n14:38\u00a0<vmassol>\u00a0as I said it's in the local repo  \n14:38\u00a0<vmassol>\u00a0ls /home/hudsonagent/.m2/repository/org/xwiki/commons/xwiki-commons-pom/4.1-SNAPSHOT/xwiki-commons-pom-4.1-SNAPSHOT.pom  \n14:38\u00a0<vmassol>\u00a0/home/hudsonagent/.m2/repository/org/xwiki/commons/xwiki-commons-pom/4.1-SNAPSHOT/xwiki-commons-pom-4.1-SNAPSHOT.pom  \n14:39\u00a0<+mflorea>\u00a0sure, but is it there because it was build locally or because it was downloaded from the maven.xwiki.org repo?  \n14:39\u00a0<vmassol>\u00a0no idea  \n14:39\u00a0<vmassol>\u00a0I built it but I don't know if it was already there  \n14:39\u00a0<+mflorea>\u00a0again, I have the same problem locally  \n14:39\u00a0<vmassol>\u00a0but that's not the problem  \n14:39\u00a0<vmassol>\u00a0even when it's here locally  \n14:39\u00a0<vmassol>\u00a0the build still doesn't pass  \n14:39\u00a0<vmassol>\u00a0funnily I don't reproduce locally  \n14:40\u00a0<vmassol>\u00a0can you make it pass locally on your machine?  \n14:40\u00a0<+mflorea>\u00a0let me check  \n14:40\u00a0<vmassol>\u00a0I don't understand what this has to do with http://jira.codehaus.org/browse/MSHADE-103 since it's available in the lcoal repo  \n14:42\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r564b168\u000f https://github.com/xwiki/xwiki-platform/commit/564b16842c4bf0e7c574b9ed4f92ed2ec8287b6b \u000f/ xwiki-platform-core/xwiki-platform-display/xwiki-platform-display-macro/src/test/java/org/xwiki/rendering/internal/macro/DisplayMacroTest.java :\u000f [Misc] Removed more deprecated lookup() calls in favor of getInstance() - http://git.io/SKvtOg  \n14:43\u00a0<+mflorea>\u00a0xwiki-rendering-standalone> mvn -U clean install ---> fails  \n14:43\u00a0<+mflorea>\u00a0xwiki-commons> mvn clean install -N  \n14:43\u00a0<+mflorea>\u00a0xwiki-commons-pom> mvn clean install -N  \n14:43\u00a0<+mflorea>\u00a0xwiki-rendering> mvn clean install -N  \n14:43\u00a0<+mflorea>\u00a0xwiki-rendering-standalone> mvn -U clean install ---> passes  \n14:44\u00a0<vmassol>\u00a0ok trying  \n14:44\u00a0<vmassol>\u00a0I still don't get it though :)  \n14:44\u00a0<+mflorea>\u00a0try to remove the commons artifacts from local repo and see if xwiki-rendering-standalone fails  \n14:45\u00a0<+mflorea>\u00a0locally  \n14:45\u00a0<vmassol>\u00a0yep will do  \n14:47\u00a0<vmassol>\u00a0mflorea: did the same as you on agent5 and still fails  \n14:47\u00a0<+mflorea>\u00a0strange, which maven version do we have on agent-5?  \n14:47\u00a0<+mflorea>\u00a0I have 3.0.4  \n14:48\u00a0<vmassol>\u00a03.0.3  \n14:48\u00a0<vmassol>\u00a0I have 3.0.3 locally too btw  \n14:50\u00a0<vmassol>\u00a0what's strange is that if I look in target/ I see the generated jar  \n14:51\u00a0<+mflorea>\u00a0yep, I used -X locally and the build fails after the xwiki-rendering-standalone-4.1-SNAPSHOT.jar is replaced with xwiki-rendering-standalone-4.1-SNAPSHOT-shaded.jar  \n15:13\u00a0<CIA-120>\u00a0Vincent Massol\u000f master\u000f \\* r6268d55\u000f https://github.com/xwiki/xwiki-commons/commit/6268d55d5873e69718e035c7924600f5e432dd50 \u000f/ pom.xml :\u000f XWIKI-5713: Failure to upload attachments using REST - http://git.io/aTtqTQ  \n15:15\u00a0<CIA-120>\u00a0Vincent Massol\u000f stable-4.0.x\u000f \\* r1aa79ae\u000f https://github.com/xwiki/xwiki-commons/commit/1aa79ae8fac8671914086a73321193cd07c95afa \u000f/ pom.xml :\u000f XWIKI-5713: Failure to upload attachments using REST - http://git.io/JYG2gA  \n15:20\u00a0<abusenius\\_>\u00a0has quit  \n15:26\u00a0<CIA-120>\u00a0Vincent Massol\u000f stable-3.5.x\u000f \\* rc552ef0\u000f https://github.com/xwiki/xwiki-platform/commit/c552ef040769911fe079fe2324c7f93c14da1a3f \u000f/ xwiki-platform-core/pom.xml :\u000f XWIKI-7513: Failure to upload attachments using REST - http://git.io/B1FLKg  \n16:03\u00a0<jvdrean1>\u00a0has joined #xwiki  \n16:03\u00a0<jvdrean>\u00a0has quit  \n16:05\u00a0<jvdrean>\u00a0has joined #xwiki  \n16:05\u00a0<jvdrean1>\u00a0has quit  \n16:08\u00a0<vmassol>\u00a0has quit  \n16:09\u00a0<gdelhumeau>\u00a0has quit  \n16:09\u00a0<jvdrean>\u00a0has quit  \n16:10\u00a0<vmassol>\u00a0has joined #xwiki  \n16:10\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n16:12\u00a0<jvdrean>\u00a0has joined #xwiki  \n16:16\u00a0<vmassol>\u00a0has quit  \n16:18\u00a0<jvdrean>\u00a0has quit  \n16:30\u00a0<vmassol>\u00a0has joined #xwiki  \n16:39\u00a0<jvdrean>\u00a0has joined #xwiki  \n17:43\u00a0<mflorea>\u00a0has quit  \n17:53\u00a0<vmassol>\u00a0has quit  \n17:54\u00a0<evalica>\u00a0has quit  \n17:57\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n17:59\u00a0<Enygma`>\u00a0has quit  \n18:37\u00a0<jvdrean>\u00a0has quit  \n18:44\u00a0<@sdumitriu>\u00a0Denis: Ping  \n18:44\u00a0<+Denis>\u00a0sdumitriu: pong  \n18:44\u00a0<@sdumitriu>\u00a0There's an issue with the ID migration on postgresql  \n18:44\u00a0<@sdumitriu>\u00a0ERROR: insert or update on table \"xwikidates\" violates foreign key constraint \"fkdeaeab5d3433fd87\"  \n18:44\u00a0<@sdumitriu>\u00a0\u00a0\u00a0Detail: Key (xws\\_id, xws\\_name)=(-7004067891692704630, last\\_fire\\_time) is not present in table \"xwikiproperties\".  \n18:45\u00a0<@sdumitriu>\u00a0The problem is that when you're changing IDs, the foreign keys get broken  \n18:45\u00a0<@sdumitriu>\u00a0Since you can't use a value that doesn't exist in the referenced table  \n18:47\u00a0<gdelhumeau>\u00a0has quit  \n18:49\u00a0<vmassol>\u00a0has joined #xwiki  \n18:50\u00a0<@sdumitriu>\u00a0But that looks like a hibernate bug  \n18:51\u00a0<+Denis>\u00a0sdumitriu: is your original database clean ? have you passed the sanitychecks ?  \n18:51\u00a0<@sdumitriu>\u00a0Yes, it's clean  \n18:51\u00a0<@sdumitriu>\u00a0I just created it on a 2.7.1 to test migrations  \n18:53\u00a0<+Denis>\u00a0not sure this is hibernate related, I am not using hibernate at its higher level  \n18:53\u00a0<vmassol>\u00a0has quit  \n18:56\u00a0<@sdumitriu>\u00a0FYI this is the SQL query that gets executed: update xwikidates set XWS\\_ID=? where (XWS\\_ID, XWS\\_NAME) IN (select XWS\\_ID, XWS\\_NAME from HT\\_xwikidates)  \n18:57\u00a0<@sdumitriu>\u00a0And above that:  \n18:57\u00a0<@sdumitriu>\u00a0insert into HT\\_xwikidates select dateproper0\\_.XWS\\_ID as XWS\\_ID, dateproper0\\_.XWS\\_NAME as XWS\\_NAME from xwikidates dateproper0\\_ inner join xwikiproperties dateproper0\\_1\\_ on dateproper0\\_.XWS\\_ID=dateproper0\\_1\\_.XWP\\_ID and dateproper0\\_.XWS\\_NAME=dateproper0\\_1\\_.XWP\\_NAME where XWS\\_ID=?  \n19:00\u00a0<+Denis>\u00a0well, this is what I fear, I update the date property table before the base property one  \n19:01\u00a0<vmassol>\u00a0has joined #xwiki  \n19:02\u00a0<+Denis>\u00a0does it means that postgresql would be able to cascade updates and that it would not require the detailed updates I am doing ?  \n19:03\u00a0<+Denis>\u00a0or maybe, I should do it the other way, update the base table first ?  \n19:04\u00a0<+Denis>\u00a0sdumitriu: would you be able to build a core to check this ?  \n19:04\u00a0<@sdumitriu>\u00a0Yes  \n19:05\u00a0<@sdumitriu>\u00a0But I don't see that it's you who's doing this  \n19:05\u00a0<@sdumitriu>\u00a0As far as I can see, you execute a HQL  \n19:06\u00a0<+Denis>\u00a0it is very simple to check, at the top of R40000XWIKI6990DataMigration, you have a PROPERTY\\_CLASS static array, simply, put the BaseProperty.class at the top of it, in place of the bottom  \n19:06\u00a0<@sdumitriu>\u00a0Ah, right  \n19:06\u00a0<@sdumitriu>\u00a0Got it  \n19:06\u00a0<@sdumitriu>\u00a0Recompiling  \n19:09\u00a0<vmassol>\u00a0has quit  \n19:10\u00a0<@sdumitriu>\u00a0Denis: Nope, same thing happened  \n19:10\u00a0<@sdumitriu>\u00a0PostgreSQL is smart enough to check foreign keys in reverse as well...  \n19:10\u00a0<@sdumitriu>\u00a0ERROR: update or delete on table \"xwikiproperties\" violates foreign key constraint \"fkdeaeab5d3433fd87\" on table \"xwikidates\"  \n19:10\u00a0<@sdumitriu>\u00a0\u00a0\u00a0Detail: Key (xwp\\_id, xwp\\_name)=(1613719101, last\\_fire\\_time) is still referenced from table \"xwikidates\".  \n19:11\u00a0<+Denis>\u00a0ok, well, how are we suppose to do such update ?  \n19:11\u00a0<@sdumitriu>\u00a0I wonder if instead of UPDATE we should use a kind of copy + delete  \n19:11\u00a0<@sdumitriu>\u00a0So that at a time both the old and new IDs will be present  \n19:12\u00a0<@sdumitriu>\u00a0Or I'll look if there's a CASCADE UPDATE command or something  \n19:12\u00a0<+Denis>\u00a0a cascade should be better  \n19:12\u00a0<+Denis>\u00a0I am bit puzzle it is not automatic  \n19:13\u00a0<+Denis>\u00a0since this seems to be the only way to update that field  \n19:14\u00a0<+Denis>\u00a0duplicating everything for a migration would be really bad, since most DB allocate disk space and never release it  \n19:18\u00a0<@sdumitriu>\u00a0OK, I looked and there is a way to define foreign keys with ON UPDATE CASCADE  \n19:19\u00a0<+Denis>\u00a0yes just see it as well  \n19:19\u00a0<+Denis>\u00a0and hibernate seems to not apply it  \n19:20\u00a0<@sdumitriu>\u00a0We could do a custom migrator for PostgreSQL  \n19:21\u00a0<@sdumitriu>\u00a0which drops the foreign key and recreates it with cascade update  \n19:21\u00a0<@sdumitriu>\u00a0WDYT?  \n19:21\u00a0<@sdumitriu>\u00a0The problem is that it would have to be executed before R40000  \n19:21\u00a0<+Denis>\u00a0I am looking in that direction using liquibase  \n19:22\u00a0<+Denis>\u00a0this would be nicest way to do it, since it will be before the sql update, and it could be conditioned to be executed on postgres only  \n19:24\u00a0<@sdumitriu>\u00a0Yep, looks possible  \n19:24\u00a0<@sdumitriu>\u00a0http://www.liquibase.org/manual/add\\_foreign\\_key\\_constraint  \n19:24\u00a0<@sdumitriu>\u00a0onUpdate=\"CASCADE\"  \n19:25\u00a0<jacktrick>\u00a0has joined #xwiki  \n19:25\u00a0<@sdumitriu>\u00a0But are you sure Liquibase is executed before the migrator?  \n19:26\u00a0<+Denis>\u00a0of course  \n19:26\u00a0<@sdumitriu>\u00a0OK  \n19:26\u00a0<@sdumitriu>\u00a0Can you take care of it?  \n19:26\u00a0<+Denis>\u00a0since I change the size of the keys  \n19:27\u00a0<@sdumitriu>\u00a0Right, I was looking at a different error  \n19:28\u00a0<+Denis>\u00a0I have absolutely no postgresql setup at hand, and absolutely no experience with it, but I may look at what could be done with liquibase  \n19:28\u00a0<@sdumitriu>\u00a0I guess in this case BaseProperty should be removed from the list of properties to migrate  \n19:28\u00a0<@sdumitriu>\u00a0Denis: I could try it as well if you'd like  \n19:29\u00a0<@sdumitriu>\u00a0It would take less time  \n19:29\u00a0<@sdumitriu>\u00a0OK, I'll give it a try  \n19:29\u00a0<+Denis>\u00a0in fact, it would be the reverse, only BaseProperty should be kept  \n19:29\u00a0<+Denis>\u00a0and cascade on others  \n19:30\u00a0<@sdumitriu>\u00a0I wonder if it would work this way...  \n19:30\u00a0<@sdumitriu>\u00a0Checking  \n19:30\u00a0<+Denis>\u00a0mmm  \n19:31\u00a0<+Denis>\u00a0feel puzzle, it seems to work the other way  \n19:31\u00a0<+Denis>\u00a0so you are right, we would drop baseprops  \n19:32\u00a0<+Denis>\u00a0since you do not know the name of the constrains, you may use http://www.liquibase.org/manual/drop\\_all\\_foreign\\_key\\_constraints  \n19:32\u00a0<@sdumitriu>\u00a0Yes  \n19:33\u00a0<+Denis>\u00a0but do we really need to recreate it ?  \n19:33\u00a0<+Denis>\u00a0it should work with http://www.liquibase.org/manual/add\\_foreign\\_key\\_constraint  \n19:34\u00a0<+Denis>\u00a0we use a later version than 1.8, and therefore support onUpdate  \n19:36\u00a0<+Denis>\u00a0you, may simply inject these changes in getLiquibaseChangeLog(), using a precondition to detect postgresql  \n19:37\u00a0<+Denis>\u00a0maybe oracle will need it too, and it would be really easy to add it  \n19:38\u00a0<+Denis>\u00a0removing the base properties from the updates is not essential  \n19:38\u00a0<+Denis>\u00a0since it will do nothing  \n19:39\u00a0<@sdumitriu>\u00a0Denis: Just checked, and the cascade works backwards  \n19:39\u00a0<+Denis>\u00a0wdym?  \n19:39\u00a0<@sdumitriu>\u00a0If I update xwikiproperties the changes will propagate to all the other tables  \n19:40\u00a0<@sdumitriu>\u00a0If I try to update xwikidates it will still fail with a foreign key violation  \n19:40\u00a0<+Denis>\u00a0ok, but if you leave as is, just adding the constrains, it will works  \n19:40\u00a0<+Denis>\u00a0ho  \n19:40\u00a0<+Denis>\u00a0oh  \n19:40\u00a0<+Denis>\u00a0so no, it will not  \n19:40\u00a0<@sdumitriu>\u00a0So we just have to update BaseProperty  \n19:41\u00a0<@sdumitriu>\u00a0But we still have to change all the foreign keys  \n19:44\u00a0<+Denis>\u00a0this will require check the database product and change the array content  \n19:46\u00a0<+Denis>\u00a0the good news it that you have XWikiHibernateBaseStore#getDatabaseProductName()  \n19:48\u00a0<+Denis>\u00a0sdumitriu: \u00a0do you want my help to implement this or is it ok for you ?  \n19:49\u00a0<@sdumitriu>\u00a0I think I can manage  \n19:49\u00a0<@sdumitriu>\u00a0I'll let you review afterwards  \n19:49\u00a0<+Denis>\u00a0ok, you are welcome :)  \n19:52\u00a0<@sdumitriu>\u00a0Thanks  \n20:40\u00a0<vmassol>\u00a0has joined #xwiki  \n20:43\u00a0<vmassol>\u00a0has quit  \n20:52\u00a0<vmassol>\u00a0has joined #xwiki  \n20:59\u00a0<vmassol>\u00a0has quit  \n21:26\u00a0<Shaddox>\u00a0has joined #xwiki  \n21:56\u00a0<vmassol>\u00a0has joined #xwiki  \n21:59\u00a0<vmassol>\u00a0has quit  \n22:08\u00a0<mflorea>\u00a0has joined #xwiki  \n22:09\u00a0<mflorea>\u00a0has quit  \n23:38\u00a0<jvdrean>\u00a0has joined #xwiki  \n23:44\u00a0<jvdrean>\u00a0has quit  \n23:59\u00a0<jvdrean>\u00a0has joined #xwiki  \n\n"}