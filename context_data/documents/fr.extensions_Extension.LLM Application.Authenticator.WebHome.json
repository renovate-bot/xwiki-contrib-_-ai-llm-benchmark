{
  "id": "extensions:Extension.LLM Application.Authenticator.WebHome",
  "url": "https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/",
  "title": "Token-based authentication for the LLM Application (BETA)",
  "collection": "Eval_fr",
  "mimetype": "text/markdown",
  "language": "fr",
  "content": "| cog | **Authentification basée sur les jetons pour l'application LLM.** |\n| --- | --- |\n\n\n\n| Type | XAR |\n| --- | --- |\n| Catégorie | Authentificateur |\n| Développé par | Inconnu |\n| Évaluation | *  * [1](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/ \"Mauvais\") * [2](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/ \"Satisfaisant\") * [3](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/ \"Bon\") * [4](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/ \"Très bon\") * [5](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/ \"Excellent\")    0 Votes |\n| Licence | GNU Lesser General Public License 2.1 |\n\n\n\n| Compatibilité | 16.2.0 et plus |\n| --- | --- |\n\n[Sources](https://github.com/xwiki-contrib/ai-llm/tree/main/application-ai-llm-authentication/application-ai-llm-authentication-ui)[Problèmes](https://jira.xwiki.org/browse/LLMAI)\n\nTable des matières\n\n* [Description](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/#HDescription)\n\t+ [Configuration](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/#HConfiguration)\n\t\t- [Configuration des applications autorisées](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/#HAuthorizedApplicationsConfiguration)\n\t+ [Génération de jetons](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/Authenticator/#HTokenGeneration)\n# Description\n\nCette extension fournit un moyen pour les applications externes qui, par exemple, intègrent le chat fourni par l'[application LLM (BETA)](https://extensions.xwiki.org/xwiki/bin/view/Extension/LLM%20Application/) d'authentifier les utilisateurs avec des [JSON Web Tokens](https://en.wikipedia.org/wiki/JSON_Web_Token) (JWT) signés. Les utilisateurs sont directement créés ou mis à jour en fonction des informations fournies dans le jeton. Il n'y a actuellement aucun support pour utiliser un jeton comme authentification pour un utilisateur existant qui n'a pas été créé via cet authentificateur. L'authentificateur prend en charge l'authentification des utilisateurs de plusieurs applications qui sont mappées à des comptes d'utilisateurs distincts. Lorsqu'aucun jeton n'est présent dans la requête, l'authentificateur revient à un authentificateur configurable et il devrait donc être capable de combiner cet authentificateur de jetons avec tout autre authentificateur.\n\n## Configuration\n\nVous pouvez activer cet authentificateur de jetons en définissant la propriété xwiki.authentication.authclass dans le fichier xwiki.properties à org.xwiki.contrib.llm.authentication.JWTTokenAuth. Alternativement, vous pouvez sélectionner \"JWT Token Authenticator for the LLM AI Application\" dans la [configuration de l'authentification](https://xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Authentication/#HChoosetheauthenticator).\n\nLorsqu'il n'y a pas de jeton dans la requête (voir ci-dessous), l'authentificateur revient à l'authentificateur par défaut. Vous pouvez définir la propriété llm.authentication.jwt.authenticator dans le fichier xwiki.properties à l'authentificateur qui doit être utilisé comme solution de repli au lieu de l'authentificateur par défaut.\n\n### Configuration des applications autorisées\n\nL'extension ajoute une nouvelle entrée \"Applications autorisées\" à la liste des \"Applications\" (voir en haut à gauche de la capture d'écran suivante). Elle permet de gérer quelles applications sont autorisées à générer des jetons pour l'utilisation avec cet authentificateur.\n\n![Capture d'écran de l'écran principal de l'application Applications autorisées, montrant la liste des entrées avec une entrée](https://extensions.xwiki.org/xwiki/bin/download/Extension/LLM%20Application/Authenticator/WebHome/AuthorizedApplications.png?width=960&height=375&rev=1.1)\n\nEn cliquant sur \"Ajouter une nouvelle entrée\", vous pouvez ajouter une nouvelle application autorisée. Vous pouvez configurer les propriétés suivantes :\n\n* Titre - le titre de l'application, c'est juste à des fins d'affichage\n* URL - l'URL de l'application. C'est l'identifiant de l'application et doit correspondre au champ \"issuer\" dans les jetons générés (voir ci-dessous)\n* La clé publique - cela doit être une clé publique Ed25519 au format PEM qui correspond à la clé privée utilisée pour signer les jetons (voir ci-dessous)\n* Format de groupe - le format pour les groupes. Pour éviter que des applications externes créent des utilisateurs avec des groupes comme XWikiAdminGroup qui accorderaient des droits d'administrateur sur le wiki, il est fortement recommandé de configurer un préfixe unique et éventuellement aussi un suffixe, par exemple en utilisant \"Example${group}Group\" où ${group} sera remplacé par le nom du groupe fourni dans le jeton.\n\n![Capture d'écran d'une entrée d'application autorisée](https://extensions.xwiki.org/xwiki/bin/download/Extension/LLM%20Application/Authenticator/WebHome/ExampleApplication.png?width=650&height=435&rev=1.1)\n\n## Génération de jetons\n\nCet authentificateur attend un jeton JWT signé avec une clé Ed25519. Une clé de signature appropriée peut, par exemple, être générée en utilisant l'utilitaire de ligne de commande [OpenSSL](https://www.openssl.org/) et les deux commandes suivantes :\n\nopenssl genpkey -algorithm ed25519 -outform PEM -out private.pem  \nopenssl pkey -in private.pem -pubout -outform PEM -out public.pemLes fichiers \"private.pem\" et \"public.pem\" contiennent alors respectivement la clé privée et la clé publique au format PEM.\n\nLe jeton JWT doit contenir les revendications suivantes :\n\n* \"exp\" : le temps d'expiration, doit être dans le futur mais pas plus de 24 heures dans le futur\n* \"iss\" : l'émetteur, correspondant à la propriété URL configurée dans les applications autorisées\n* \"sub\" : le sujet, utilisé pour dériver le nom d'utilisateur\n* \"aud\" : le public, doit contenir l'URL de l'installation XWiki sous la forme https://www.example.com/ sans chemin. Une chaîne unique et un tableau de chaînes sont pris en charge. Si l'URL attendue n'est pas passée, une erreur est enregistrée avec l'URL attendue.\n\nOptionnel :\n\n* \"given\\_name\" : utilisé pour définir le champ prénom du profil utilisateur\n* \"family\\_name\" : utilisé pour définir le champ nom de famille du profil utilisateur\n* \"email\" : utilisé pour définir le champ email du profil utilisateur\n* \"groups\" : une liste de groupes (sous forme de liste de chaînes). Utilisé pour définir les groupes de l'utilisateur.\n* \"iat\" : émis à, le moment où le jeton a été émis. Les jetons de plus de 24 heures et les jetons émis dans le futur ne sont pas acceptés.\n* \"nbf\" : pas avant, le jeton est rejeté si ce temps est dans le futur.\n\nLe jeton doit être présent dans l'en-tête \"Authorization\" sous la forme \"Bearer TOKEN\" où TOKEN est le jeton JWT signé comme décrit ci-dessus."
}