{
  "id": "xwiki:Documentation.UserGuide.Features.ContentOrganization.NestedPagesMigration.WebHome",
  "url": "https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/",
  "title": "Migration Guide to Nested Pages",
  "collection": "Eval_de",
  "mimetype": "text/markdown",
  "language": "de",
  "content": "**Inhalt**\n\n* [Geschichte](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HHistory)\n  + [Zusammenfassung](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HExecutiveSummary)\n  + [Detaillierte Erklärungen](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HDetailedExplanations)\n    - [Eltern/Kind Beziehung](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HParent2FChildrelationship)\n    - [Die Einführung des verschachtelten Seitenkonzepts](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HTheintroductionoftheNestedPagesconcept)\n    - [Problem mit der Eltern/Kind Beziehung](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HIssuewiththeParent2FChildrelationship)\n* [Migration](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HMigration)\n  + [Die Hierarchie korrigieren](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HFixthehierarchy)\n  + [Verschachtelte Seiten Migrator Anwendung](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HNestedPagesMigratorApplication)\n    - [Optionen](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HOptions)\n    - [Plan](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HPlan)\n      * [Einstellungen](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HPreferences)\n      * [Rechte](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HRights)\n    - [Den Plan ausführen](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HExecutetheplan)\n  + [Was noch?](https://www.xwiki.org/xwiki/bin/view/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/#HWhatelse3F)\n\n# Geschichte\n\n## Zusammenfassung\n\nBis XWiki 7.1 gab es zwei Möglichkeiten, Inhalte in XWiki zu organisieren:\n\n* Wiki > Bereich > Seite (einschließlich Rechtevererbung und Verwaltungsfunktionen)\n* Seite > Kindseite > Kindseite der Kindseite > ... (wird für hierarchische Navigationszwecke verwendet)\n\nBeachten Sie, dass beide unabhängig sind: Eine Seite kann eine übergeordnete Seite in einem anderen Bereich/Wiki als ihrem eigenen haben.\n\nWährend dies funktionierte, haben wir festgestellt, dass es zu Verwirrung bei den Benutzern führen kann, was zu Fragen wie:\n\n* Sollte ich ein Unter-Wiki oder einen Bereich für mein Team erstellen?\n* Welche Navigation sollte ich auf meiner Startseite einfügen: Liste der Bereiche oder Baumansicht der Seiten?\n* Kann ich Rechte auf einer Seite festlegen, die sich unter einem Bereich befindet?\n\nGleichzeitig gab es lange Diskussionen über das zukünftige \"neue Modell\" von XWiki, das idealerweise verschachtelte Bereiche umfassen würde, die folgende Funktionen bieten:\n\n* Einheitliche Handhabung der hierarchischen Navigation (Seite > Unterseite > Unter-Unterseite > ...)\n* Navigation, die sich in URLs widerspiegelt (.../SeiteA/SeiteB/SeiteC)\n* Vererbung von Zugriffsrechten (Rechte auf SeiteA gelten für SeiteB und SeiteC, es sei denn, anders definiert. Rechte auf SeiteB überschreiben die auf SeiteA und gelten auch für SeiteC usw.)\n\nLetztendlich haben wir die Gelegenheit genutzt, von der bisherigen Art der Seitenorganisation in XWiki 7.2 zu dieser neuen Art zu wechseln.\n\nIn einer idealen Welt würde der Übergang vom alten zum neuen Modell eine vollständige Neuschreibung des Modells erfordern. Um jedoch die Rückwärtskompatibilität mit vielen bestehenden Funktionen und Anwendungen nicht zu brechen, mussten wir die Konzepte von \"Seite\" und \"Bereich\" in XWiki beibehalten, während wir sie anpassten, um die Funktion der verschachtelten Seiten zu emulieren. Hier ist, was wir standardmäßig getan haben:\n\n* Wir haben die Eltern-Kind-Funktion versteckt. Auch wenn sie versteckt ist, können Sie sie wieder aktivieren, wenn Sie sie benötigen, während Sie Ihre Inhalte auf verschachtelte Bereiche migrieren: Setzen Sie die Eigenschaft core.hierarchyMode in der Konfigurationsdatei xwiki.properties auf parentchild.\n* Beim Erstellen einer neuen Seite erstellt das System automatisch Page.WebHome, was einen Bereich erstellt, der jedoch in der URL verborgen ist (Sie sehen nur .../Page/)\n* Für fortgeschrittene Benutzer haben wir die Möglichkeit hinzugefügt, \"Terminalseiten\" zu erstellen, die keine Bereiche sind (wie zuvor). Dies ist hauptsächlich für Anwendungsentwickler gedacht.\n\n## Detaillierte Erklärungen\n\nVor der Einführung des verschachtelten Seitenkonzepts (in 7.2) war der Inhalt in einem Wiki wie folgt organisiert:\n\n* Wir hatten einige **Bereiche**, die Sie konzeptionell wie Dateisystem-Ordner betrachten können.\n* Innerhalb dieser Bereiche hatten wir **Seiten**, auf denen Sie Inhalte schreiben oder Anwendungseinträge speichern konnten.\n\nZu dieser Zeit konnten wir keine Bereiche innerhalb von Bereichen haben, sodass alle Seiten in einem obersten Bereich platziert waren. Die Seiten wurden so identifiziert: NameDesBereichs.NameDerSeite.\n\nEinige Seiten waren etwas Besonderes. Sie waren die \"Startseiten\" eines Bereichs. Jedes Mal, wenn ein Benutzer einen Bereich erreichen wollte, ohne einen genauen Seitennamen anzugeben, wurde er zur Startseite dieses Bereichs weitergeleitet. Diese Seiten wurden \"WebHome\" genannt (weil zu Beginn von XWiki \"Bereiche\" \"Web\" genannt wurden).\n\n### Eltern/Kind Beziehung\n\nDer Benutzer konnte eine **Eltern**-Seite für jede erstellte Seite angeben. Diese Elternseite konnte jede Seite sein, zum Beispiel konnte die Seite Movies.ItsAWonderfulLife Directors.FrankCapra als Elternseite haben. Dann wurde ItsAWonderfulLife als Kind von FrankCapra aufgeführt. Diese Beziehung wurde im *Breadcrumb* oben auf jeder Seite angezeigt. Der Benutzer konnte durch diese *Hierarchie* navigieren.\n\nEinige Anwendungen nutzten diese Eltern/Kind-Beziehung zur Organisation ihrer Daten. Für sie ist diese Beziehung entscheidend.\n\n### Die Einführung des verschachtelten Seitenkonzepts\n\nIn XWiki 7.2 haben wir aufgrund häufiger Benutzeranfragen die Möglichkeit eingeführt, Bereiche unter anderen Bereichen zu erstellen. Es ist das **Verschachtelte Bereiche**-Konzept. Plötzlich hatten wir die Möglichkeit, eine Hierarchie von Bereichen zur Organisation von Inhalten zu erstellen.\n\nAber wir haben auch einige Probleme festgestellt. Was ist, wenn ein Bereich denselben Namen wie eine Seite hat? Welchen Eintrag sollten wir dem Benutzer anzeigen, wenn er eine URL erreicht, bei der zwei Entitäten übereinstimmen? Außerdem, macht es Sinn, einen Unterschied zwischen einem Bereich und einer Seite zu haben? Warum sollten Seiten keine Unterseiten haben können?\n\nWir haben uns dann entschieden, zum **Verschachtelten Seiten**-Konzept zu wechseln. Theoretisch sollte eine Seite jetzt in der Lage sein, einige Unterseiten zu haben, da wir keinen Unterschied zwischen einer Seite und einem Bereich wie zwischen einer Datei und einem Ordner benötigen.\n\nAber diese Änderung war auf API-Ebene nicht möglich, da sie zu viel Arbeit erfordert hätte, die wir uns zu diesem Zeitpunkt nicht leisten konnten (und rückwärtskompatibel brechen würde, da sie eine vollständige Modelländerung erfordert hätte). Daher wurde die Entscheidung getroffen, bei der **Verschachtelten Bereiche**-Implementierung auf API-Ebene zu bleiben (vorerst), aber **Verschachtelte Seiten** auf UI-Ebene vorzuschlagen.\n\nWie funktioniert es?\n\nJedes Mal, wenn ein Benutzer eine Seite aus der XWiki-UI erstellt, erstellt er tatsächlich einen Bereich (ohne es zu wissen ![emoticon_wink](https://www.xwiki.org/xwiki/resources/icons/silk/emoticon_wink.png?cache-version=1711538036000)) mit seiner WebHome-Seite. Es bedeutet, dass alle vom Benutzer erstellten Seiten WebHome genannt werden.\n\nWenn der Benutzer dann eine Unterseite erstellen möchte, zum Beispiel FrankCapra innerhalb der Seite Directors.WebHome, erstellt er tatsächlich einen neuen Bereich innerhalb des Bereichs Directors mit seiner WebHome-Seite: Directors.FrankCapra.WebHome. So emulieren wir es.\n\nDer Begriff Bereich wurde aus der UI entfernt. Es wird nirgendwo mehr erwähnt. Alles scheint so zu funktionieren, als ob wir wirklich Unterseiten erstellen würden, auch wenn wir unter der Haube Unterbereiche erstellen.\n\nDiese Emulation sollte vorübergehend sein. Irgendwann möchten wir das Kernmodell von XWiki umstrukturieren und das Konzept der Bereiche verwerfen, um nur Seiten zu behalten. Halten Sie jedoch nicht den Atem an, dies könnte mehrere Jahre dauern ![emoticon_wink](https://www.xwiki.org/xwiki/resources/icons/silk/emoticon_wink.png?cache-version=1711538036000).\n\nBeachten Sie, dass Benutzer weiterhin Seiten erstellen können, die nicht WebHome heißen. Folglich können solche Seiten (die nicht das \"WebHome\" ihres Bereichs sind) keine Unterseiten haben. Sie werden **Terminalseiten** genannt.\n\n### Problem mit der Eltern/Kind Beziehung\n\nJetzt ist klar, dass wir zwei verschiedene Hierarchien im Wiki haben. Eine besteht aus Unterseiten (in Wirklichkeit Unterbereiche) und eine aus der alten Eltern/Kind-Beziehung. Dann wird es für den Benutzer eindeutig verwirrend. Welche Hierarchie sollte im Breadcrumb angezeigt werden? Was ist die Elternseite einer Seite, die \"Container\"-Seite oder die im Feld festgelegte Elternseite?\n\nDie Entscheidung wurde getroffen, den Begriff der Eltern/Kind-Beziehung fallen zu lassen, da wir jetzt wirklich Kinderseiten haben können, die als Unterseiten implementiert sind (mit vererbten Rechten, Einstellungen usw.).\n\nDas bedeutet, dass der Benutzer, wenn er die Elternseite einer Seite ändern möchte, diese Seite tatsächlich **unter die neue Elternseite verschieben** muss.\n\nDieses Konzept ist in der Theorie gut. Aber wie können Sie vorhandene Inhalte migrieren, wenn Sie auf XWiki 7.2+ aktualisieren?\n\n# Migration\n\nDie Idee ist, Ihre vorhandenen Seiten (die meisten davon sind Terminalseiten) in WebHome-Seiten unter ihrem eigenen Bereich zu konvertieren. Wir nennen dies \"Terminalseiten in verschachtelte Seiten konvertieren\". Dies ermöglicht es Ihnen dann, Unterseiten unter allen konvertierten Seiten zu erstellen, was unmöglich ist, solange sie Terminalseiten sind.\n\nAber es wäre schade, die Eltern/Kind-Beziehungen zu verlieren, die die Benutzer zwischen ihren Seiten erstellt haben. Die Benutzer möchten möglicherweise ihre sorgfältig erstellten Hierarchien beibehalten. Sie möchten möglicherweise immer noch FrankCapra als Elternteil von ItsAWonderfulLife haben.\n\nUm diese Informationen zu behalten, besteht das Prinzip darin, **alle Seiten unter ihre Eltern zu verschieben**, sodass die Eltern/Kind-Verknüpfungen **eine echte Hierarchie zwischen den Seiten** werden.\n\n[![example.svg](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/WebHome/example.svg?width=600&rev=1.1)](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/WebHome/example.svg?rev=1.1)\n\nUm diese Konvertierung durchzuführen, haben wir eine Anwendung namens [Verschachtelte Seiten Migrator Anwendung](https://extensions.xwiki.org/xwiki/bin/view/Extension/Nested%20Pages%20Migrator%20Application) entwickelt.\n\n## Die Hierarchie korrigieren\n\nIhre aktuelle Seitenhierarchie kann jedoch unordentlich sein. Zum Beispiel könnten einige Seiten innerhalb des Bereichs Proposal Main.WebHome als Elternseite haben, anstatt Proposal.WebHome, was logischer wäre. Dies passiert, wenn der Benutzer eingeladen wird, Seiten im Bereich Proposal direkt von der Hauptseite aus zu erstellen.\n\nEs ist wichtig, solche Fälle zu identifizieren, bevor Sie das Migrationstool anwenden, da das Tool diese Art von unerwünschten Hierarchien nicht erkennen kann.\n\nIm vorherigen Beispiel bestand die Lösung darin, manuell den Elternteil aller Seiten des Bereichs Proposal, die Main.WebHome als Elternteil hatten, auf Proposal.WebHome zu setzen. Das folgende Skript ist ein Beispiel, das zur Migration verwendet werden kann (Sie müssen es an Ihre eigenen Bedürfnisse anpassen):\n\n#set ($xwql = \"where doc.space in ('Proposal', 'Design', 'Improvements') and doc.parent = 'Main.WebHome'\")\n#foreach($r in $services.query.xwql($xwql).execute())\n  #set ($d = $xwiki.getDocument($r))\n  #set ($discard = $d.setParent('Proposal.WebHome'))\n  #set ($discard = $d.save())\n  \\* $r updated\n#end\n\n## Verschachtelte Seiten Migrator Anwendung\n\nUm die Migrator-Anwendung zu verwenden, müssen Sie zuerst Ihre XWiki-Instanz auf eine aktuelle Version (7.4.2+) aktualisieren. Tatsächlich kann der Migrator keine verschachtelten Seiten in einer alten XWiki-Instanz erstellen, in der dieses Konzept nicht existierte!\n\n* Wir empfehlen dringend, eine [Sicherung Ihrer Instanz und Ihrer Datenbanken](https://www.xwiki.org/xwiki/bin/view/Documentation/AdminGuide/Backup) zu erstellen. Der Migrator wird viele vorhandene Seiten ändern, und diese Änderungen können nicht rückgängig gemacht werden. Wenn etwas schief geht, ist die einzige Lösung, Ihre Sicherung neu zu installieren.\n* Benutzer sollten eingeladen werden, den Wiki-Inhalt während der Verwendung des Migrators nicht zu ändern.\n* Nichts hindert einen anderen Administrator daran, den Migrator gleichzeitig mit Ihnen auszuführen, was zu schlechten Konsequenzen führen könnte (Kollisionen von Aktionen usw.). Sie sollten sicherstellen, dass Sie die einzige Person sind, die dieses Tool während des gesamten Prozesses verwendet.\nGehen Sie zum [Erweiterungsmanager in Ihrem Wiki](https://extensions.xwiki.org/xwiki/bin/view/Extension/Extension%20Manager%20Application) und installieren Sie die [Verschachtelte Seiten Migrator Anwendung](https://extensions.xwiki.org/xwiki/bin/view/Extension/Nested%20Pages%20Migrator%20Application). Gehen Sie dann zur Seite NestedPagesMigration.WebHome.\n\nSie finden die folgende Seite:\n\n![Migrator1.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/WebHome/Migrator1.png?rev=1.1)\n\nEs gibt 3 Aktionen:\n\n* **einen Plan berechnen**: Die Migration generiert zuerst einen Plan der auszuführenden Aktionen. Sie können sehen, was der Migrator vorschlägt, und einige Aktionen deaktivieren oder die Optionen ändern, zum Beispiel.\n* **den Plan ausführen**: Wenn ein Plan berechnet wurde und Sie mit seinem Inhalt einverstanden sind, können Sie den Plan ausführen: Die Seiten werden wie vorgeschlagen verschoben.\n* **Brüche erkennen** (seit 0.7): Erkennen Sie die Hierarchien, die gebrochen sind, wenn Sie den Migrator nicht ausführen. [Lesen Sie die Migrator-Seite, um weitere Informationen zu erhalten](https://extensions.xwiki.org/xwiki/bin/view/Extension/Nested%20Pages%20Migrator%20Application#HBreakagesDetection).\n\n### Optionen\n\nAber zuerst, lassen Sie uns über die Optionen sprechen.\n\n| Option | Beschreibung | Standardwert (empfohlen) |\n| --- | --- | --- |\n| **Versteckte Seiten ausschließen** | Aktivieren Sie diese Option, wenn Sie versteckte Seiten, die normalerweise technische Daten enthalten, von der Migration ausschließen möchten. | **true** |\n| **Seiten mit einer Klasse ausschließen** | Aktivieren Sie diese Option, um Seiten, die eine xclass enthalten, nicht zu konvertieren, da dies Anwendungen, die auf diesen xclasses basieren, beschädigen kann. | **true** |\n| **Kinder nicht verschieben** | Konvertieren Sie Seiten in verschachtelte Seiten (damit sie Kinder haben können), ohne sie unter ihre Eltern zu verschieben. Die alte Hierarchie wird nicht beibehalten, aber die Rechte und die Einstellungen bleiben gleich. | **false** |\n| **Umleitung hinzufügen** | Fügen Sie an der alten Position eine Umleitung hinzu. Wenn ein Benutzer zur alten URL geht, wird er automatisch zur neuen weitergeleitet. Es ist gut, wenn Sie keine Lesezeichen brechen möchten. | **true** |\n| **Einstellungen konvertieren** | Durch das Verschieben von Seiten unter ihre Eltern können sich die geerbten Einstellungen ändern. Wenn diese Option aktiviert ist, kopiert der Migrator die alten geerbten Einstellungen an den neuen Standort. | **true** |\n| **Rechte konvertieren** | Durch das Verschieben von Seiten unter ihre Eltern können sich die geerbten Rechte ändern. Wenn diese Option aktiviert ist, versucht der Migrator, dieselben Rechte am neuen Standort festzulegen. Leider ist dieser Vorgang komplex, und der aktuelle Algorithmus ist im Moment etwas fehlerhaft. Diese Option sollte aus Debug-Gründen verwendet werden. Sie können immer noch einen Plan mit dieser Option berechnen, ohne ihn auszuführen: Der Plan listet die Orte auf, an denen einige Rechte geändert werden, und dann sollten Sie in der Lage sein, eine Lösung für sie manuell zu finden. | **false** |\n| **Klassen ausschließen** | Schließen Sie Seiten aus, die einige Objekte enthalten. | Eine Liste von Klassen, die wir als auszuschließen identifiziert haben. Es ist nicht vollständig, Sie sollten die xclasses Ihrer eigenen Anwendungen hinzufügen! |\n| **Seiten ausschließen** | Schließen Sie eine Liste von Seiten aus. | Eine Liste von Seiten, die wir als auszuschließen identifiziert haben. |\n| **Bereiche ausschließen** | Schließen Sie eine Liste von Bereichen aus. | Eine Liste von Bereichen, die wir als auszuschließen identifiziert haben. |\n| **Eingeschlossene Bereiche** | Nur Seiten, die in dieser Liste von Bereichen enthalten sind, werden konvertiert. | leer |\n\nHinweis: Sie können die auszuschließenden Klassen auswählen, indem Sie auf das Feld \"ausgeschlossene Klassen\" klicken:\n\n![excludedClasses.png](https://www.xwiki.org/xwiki/bin/download/Documentation/UserGuide/Features/ContentOrganization/NestedPagesMigration/WebHome/excludedClasses.png?rev=1.1)\n\n### Plan\n\nSobald die Optionen sorgfältig festgelegt wurden, können Sie mit der Berechnung eines Plans beginnen. Dieser Vorgang dauert normalerweise etwa 10 Sekunden, kann jedoch je nach Anzahl der Seiten und Komplexität der Einstellungen, Rechte und Hierarchien länger dauern. Die Pro"
}