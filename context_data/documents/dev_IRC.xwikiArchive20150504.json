{"id": "dev:IRC.xwikiArchive20150504", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150504", "title": "IRC Archive for channel #xwiki on 04 May 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Slashman>\u00a0has quit  \n03:22\u00a0<cjd>\u00a0has quit  \n03:49\u00a0<Denis>\u00a0has joined #xwiki  \n03:52\u00a0<Denis>\u00a0has quit  \n06:42\u00a0<silverdrop>\u00a0has joined #xwiki  \n07:03\u00a0<msmeria>\u00a0has joined #xwiki  \n07:40\u00a0<cjd>\u00a0has joined #xwiki  \n08:21\u00a0<cjd>\u00a0has quit  \n08:24\u00a0<woshilapin>\u00a0has joined #xwiki  \n08:26\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n08:28\u00a0<mflorea>\u00a0has joined #xwiki  \n08:31\u00a0<silverdrop>\u00a0has quit  \n08:38\u00a0<silverdrop>\u00a0has joined #xwiki  \n08:50\u00a0<mflorea>\u00a0Good morning. 7.1M1 is planned for today so please don't commit any new stuff unless it fixes the build or it cannot be postponed to M2. Thanks.  \n09:14\u00a0<cjd>\u00a0has joined #xwiki  \n09:20\u00a0<vmassol>\u00a0has joined #xwiki  \n09:20\u00a0<vmassol>\u00a0mflorea: i have the code for http://jira.xwiki.org/browse/XWIKI-12060 should i wait?  \n09:20\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:23\u00a0<evalica>\u00a0has joined #xwiki  \n09:29\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:32\u00a0<mflorea>\u00a0vmassol: go ahead if it's not dangerous  \n09:32\u00a0<mflorea>\u00a0has quit  \n09:34\u00a0<vmassol>\u00a0ok thanks  \n09:38\u00a0<gsmeria>\u00a0has joined #xwiki  \n09:39\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:40\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:48\u00a0<Denis>\u00a0has joined #xwiki  \n09:48\u00a0<vmassol>\u00a0tmortagne: \"Jython 2.7.0 final released! \u00a0\" :)  \n09:48\u00a0<vmassol>\u00a0http://t.co/7qEfWse9z2  \n09:48\u00a0<tmortagne>\u00a0vmassol: yes I saw it  \n09:48\u00a0<vmassol>\u00a0ah yes i saw it through your retweet :)  \n09:49\u00a0<tmortagne>\u00a0artifact listener is pretty nice to know about all our dependencies releases ;) (even if in this particular case I follow Jython mailing list)  \n09:49\u00a0<vmassol>\u00a0yep  \n09:50\u00a0<Slashman>\u00a0has joined #xwiki  \n10:08\u00a0<silverdrop>\u00a0has quit  \n10:19\u00a0<Pbas>\u00a0has joined #xwiki  \n10:23\u00a0<tmortagne>\u00a0Enygma`: in case you did not saw it: https://github.com/xwiki/xwiki-platform/commit/225fc5088c6b1a2637d5ccbcc796014242cbd075#diff-7ac17f25f7cb09bb691688928f11f311R133  \n10:24\u00a0<Enygma`>\u00a0tmortagne: thx, will fix it.  \n10:25\u00a0<mflorea>\u00a0has joined #xwiki  \n10:39\u00a0<silverdrop>\u00a0has joined #xwiki  \n10:47\u00a0<DarkKnightCZ>\u00a0Hi, any ideas why CDI Injection doesn't handle singleton as singletons? I've created new component (Event listener) here https://github.com/xwiki-contrib/xwiki-contrib-websocket/tree/master/src/main/java/org.xwiki.contrib.websocket/internal , Injected named component WebSocketService (named \"netty\") and it injects new instance (System.identityHashCode() is different)  \n10:48\u00a0<Pbas>\u00a0has left #xwiki  \n10:54\u00a0<gsmeria>\u00a0has quit  \n10:55\u00a0<gsmeria>\u00a0has joined #xwiki  \n11:03\u00a0<vmassol>\u00a0Enygma`: fyi found a bug in the mail api when using setRecipients(), will fix later in the week  \n11:03\u00a0<vmassol>\u00a0creating jira  \n11:06\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-12061  \n11:06\u00a0<Enygma`>\u00a0vmassol: I`m only using addRecipient in watchlist right now, since watchlist only sends to individual users  \n11:07\u00a0<vmassol>\u00a0yes add is not impacted  \n11:07\u00a0<Enygma`>\u00a0been thinking though if we could instead just send 1 mail to all interested parties (with less customization in the email content though)  \n11:07\u00a0<vmassol>\u00a0actually this sig is: public void addRecipients(Message.RecipientType type, String addresses)  \n11:08\u00a0<vmassol>\u00a0Enygma`: using bcc?  \n11:08\u00a0<Enygma`>\u00a0probably  \n11:08\u00a0<Enygma`>\u00a0would still look odd to the users  \n11:08\u00a0<vmassol>\u00a0it would certainly help a lot scalability  \n11:08\u00a0<vmassol>\u00a0but  \n11:08\u00a0<Enygma`>\u00a0yes, but trust issues :/  \n11:08\u00a0<vmassol>\u00a0we need to find the max size of the bcc header :)  \n11:09\u00a0<vmassol>\u00a0yes spam is an issue  \n11:09\u00a0<vmassol>\u00a0unless you control the mail server  \n11:09\u00a0<vmassol>\u00a0but we cannot do that generically  \n11:09\u00a0<vmassol>\u00a0could be an option possibly  \n11:10\u00a0<Enygma`>\u00a0maybe for some setups... but, for me, the trust issue alone introduced by bcc is a dealbreaker for being a general solution  \n11:10\u00a0<vmassol>\u00a0exactly  \n11:10\u00a0<vmassol>\u00a0but as I said it could be an option  \n11:10\u00a0<vmassol>\u00a0but we would need to handle max header size  \n11:11\u00a0<vmassol>\u00a0(no idea about the limit)  \n11:30\u00a0<Pbas>\u00a0has joined #xwiki  \n11:44\u00a0<evalica1>\u00a0has joined #xwiki  \n11:44\u00a0<evalica>\u00a0has quit  \n12:00\u00a0<Trefex>\u00a0has joined #xwiki  \n12:11\u00a0<gsmeria>\u00a0has quit  \n12:13\u00a0<gsmeria>\u00a0has joined #xwiki  \n12:36\u00a0<gsmeria>\u00a0has quit  \n12:37\u00a0<gsmeria>\u00a0has joined #xwiki  \n13:01\u00a0<gsmeria>\u00a0has quit  \n13:02\u00a0<gsmeria>\u00a0has joined #xwiki  \n13:52\u00a0<gsmeria>\u00a0has quit  \n13:55\u00a0<gsmeria>\u00a0has joined #xwiki  \n14:40\u00a0<gsmeria1>\u00a0has joined #xwiki  \n14:43\u00a0<gsmeria>\u00a0has quit  \n14:51\u00a0<DarkKnightCZ>\u00a0tmortagne: hi, got a second? I think i've found bug in dependency injection mechanism  \n15:28\u00a0<vmassol>\u00a0tmortagne: skype ping in case you read here :)  \n15:34\u00a0<cjd>\u00a0has quit  \n15:35\u00a0<gsmeria1>\u00a0has quit  \n15:58\u00a0<msmeria>\u00a0has quit  \n15:58\u00a0<silverdrop>\u00a0has quit  \n16:00\u00a0<cjd>\u00a0has joined #xwiki  \n16:02\u00a0<Bugen\\_do>\u00a0has quit  \n16:02\u00a0<Bugen\\_do>\u00a0has joined #xwiki  \n16:05\u00a0<silverdrop>\u00a0has joined #xwiki  \n16:08\u00a0<OSIMasson>\u00a0has quit  \n16:09\u00a0<DarkKnightCZ>\u00a0vmassol: Hi, got a minute? I have some question about contributing as a company... I would like to publish some fixes developed for a company project that uses xwiki, but company policy is that there should be visible that is was fixed by an employee of this company... I know that XWiki code style doesn't allow @author tag, so i was thinking about extra comment in commit  \n16:10\u00a0<DarkKnightCZ>\u00a0or do you have some practices about this?  \n16:12\u00a0<tmortagne>\u00a0DarkKnightCZ: it's visible in git  \n16:12\u00a0<tmortagne>\u00a0even through a pull request the author stay  \n16:12\u00a0<tmortagne>\u00a0so you know when looking in the history who actually did the modification  \n16:13\u00a0<tmortagne>\u00a0when doing a pull request there is the author commit and then another commit to indicate who applied th ePR  \n16:14\u00a0<tmortagne>\u00a0and what was this dependency injection issue you talked about ?  \n16:14\u00a0<DarkKnightCZ>\u00a0great... i will think about it, thanks  \n16:14\u00a0<DarkKnightCZ>\u00a0https://github.com/DarkKnightCZ/xwiki-contrib-websocket/tree/cdi-test, especially this commit - https://github.com/DarkKnightCZ/xwiki-contrib-websocket/commit/b662f24d70c0438c96cf7039edf5599bc8fb6394  \n16:15\u00a0<DarkKnightCZ>\u00a0the @Inject results in different instance (checked by System.identityHashCode())  \n16:15\u00a0<silverdrop>\u00a0has quit  \n16:15\u00a0<DarkKnightCZ>\u00a0even though the component is annotated with singleton (and doesn't matter if i annotate the Role as Singleton, or the Injection as Singleton)  \n16:19\u00a0<tmortagne>\u00a0DarkKnightCZ: not sure I understand exactly what you did, I don't see how you could have this behavior with XWiki component manager  \n16:19\u00a0<tmortagne>\u00a0you are tring to use those component in cdi instead of XWiki CM ?  \n16:19\u00a0<tmortagne>\u00a0s/tring/trying/  \n16:20\u00a0<tmortagne>\u00a0(@Singleton is by default in XWiki, lets call that rero-compatibility but its not the case in other system AFAIK)  \n16:21\u00a0<tmortagne>\u00a0I don't really know anything about WebSocket module, maybe there is something specific in it regarding components for some reason  \n16:21\u00a0<DarkKnightCZ>\u00a0well, i use CDI as abbreviation for dependency injection, i rely on the XWiki CM, so i just created component that acts as event listener and injected different component (which is injected in this script service - https://github.com/DarkKnightCZ/xwiki-contrib-websocket/blob/master/src/main/java/org.xwiki.contrib.websocket/script/XWikiWebSocketScriptService.java )  \n16:22\u00a0<DarkKnightCZ>\u00a0that injected named component has Component, Named and Singleton annotations (javax.named), so i'm wondering why am i getting two different instances  \n16:22\u00a0<tmortagne>\u00a0DarkKnightCZ: the component you expect to be dingleton is WebSocketService ?  \n16:22\u00a0<DarkKnightCZ>\u00a0NettyWebSocketService  \n16:22\u00a0<tmortagne>\u00a0s/dingleton/singleton/  \n16:23\u00a0<tmortagne>\u00a0NettyWebSocketService is indeed a singleton as far as I can see  \n16:25\u00a0<tmortagne>\u00a0only way to have a singleton component having two instances is by having its module installed in two different wiki instead of being installed on root since the role itself is in the module so the role from module 1 is not equals to role from module 2  \n16:25\u00a0<DarkKnightCZ>\u00a0hmm, that could be the issue  \n16:25\u00a0<DarkKnightCZ>\u00a0which makes that module unusable i guess  \n16:26\u00a0<DarkKnightCZ>\u00a0since you cannot bind the same port twice  \n16:34\u00a0<tmortagne>\u00a0I think I remeber cjd saying that this module need to be installed on root namespace (\"on farm\")  \n16:35\u00a0<tmortagne>\u00a0one of the reason for http://jira.xwiki.org/browse/XCOMMONS-735  \n16:37\u00a0<DarkKnightCZ>\u00a0okay, great :) i guess that explains it :)  \n17:01\u00a0<OSIMasson>\u00a0has joined #xwiki  \n17:06\u00a0<tmortagne>\u00a0has quit  \n17:35\u00a0<mflorea>\u00a0has quit  \n17:35\u00a0<mflorea>\u00a0has joined #xwiki  \n17:37\u00a0<evalica1>\u00a0has quit  \n17:38\u00a0<Enygma`>\u00a0has quit  \n17:41\u00a0<KermitTheFragger>\u00a0has quit  \n17:43\u00a0<tmortagne>\u00a0has joined #xwiki  \n17:57\u00a0<cjd>\u00a0tmortagne: registering the WebSocket module in a subwiki is bad, and it uses a hack to become accessable from all subwikis when it is registered in the main wiki  \n17:58\u00a0<tmortagne>\u00a0cjd: yep this is was I was remembering, I need to find time to work on XCOMMONS-735  \n18:16\u00a0<DarkKnightCZ>\u00a0has quit  \n18:20\u00a0<cjd>\u00a0has quit  \n18:23\u00a0<Trefex>\u00a0has quit  \n18:37\u00a0<tmortagne>\u00a0has quit  \n18:38\u00a0<gsmeria>\u00a0has joined #xwiki  \n18:49\u00a0<gdelhumeau>\u00a0has quit  \n19:06\u00a0<sdumitriu>\u00a0has quit  \n19:07\u00a0<sdumitriu>\u00a0has joined #xwiki  \n19:26\u00a0<mflorea>\u00a0has quit  \n19:46\u00a0<gsmeria>\u00a0has quit  \n21:05\u00a0<vmassol>\u00a0has quit  \n22:48\u00a0<OSIMasson>\u00a0has quit  \n23:09\u00a0<Slashman>\u00a0has quit  \n23:17\u00a0<martin-h>\u00a0has quit\n"}