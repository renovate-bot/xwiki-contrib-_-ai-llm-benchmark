{"id": "dev:IRC.xwikiArchive20140709", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140709", "title": "IRC Archive for channel #xwiki on 09 July 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<OSIMasson>\u00a0has quit  \n00:44\u00a0<OSIMasson>\u00a0has joined #xwiki  \n00:45\u00a0<OSIMasson>\u00a0has joined #xwiki  \n00:45\u00a0<OSIMasson>\u00a0has quit  \n00:58\u00a0<abusenius>\u00a0has quit  \n01:21\u00a0<lucaa>\u00a0has quit  \n01:52\u00a0<lucaa>\u00a0has joined #xwiki  \n01:57\u00a0<lucaa>\u00a0has quit  \n02:11\u00a0<mflorea>\u00a0has quit  \n03:13\u00a0<exekewtable>\u00a0has quit  \n06:40\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n07:20\u00a0<msmeria>\u00a0has joined #xwiki  \n08:11\u00a0<grimeton>\u00a0has quit  \n08:11\u00a0<grimeton>\u00a0has joined #xwiki  \n08:43\u00a0<cjd>\u00a0has joined #xwiki  \n08:54\u00a0<lucaa>\u00a0has joined #xwiki  \n09:02\u00a0<evalica>\u00a0has joined #xwiki  \n09:02\u00a0<evalica>\u00a0has quit  \n09:03\u00a0<evalica>\u00a0has joined #xwiki  \n09:05\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:07\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:14\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:22\u00a0<mflorea>\u00a0has joined #xwiki  \n09:24\u00a0<mflorea>\u00a0has quit  \n09:26\u00a0<mflorea>\u00a0has joined #xwiki  \n10:10\u00a0<Lyes1>\u00a0has joined #xwiki  \n10:11\u00a0<gdelhumeau>\u00a0has quit  \n10:17\u00a0<woshilapin>\u00a0has quit  \n10:21\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:21\u00a0<tmortagne>\u00a0has quit  \n10:22\u00a0<woshilapin>\u00a0has joined #xwiki  \n10:22\u00a0<cjd>\u00a0has quit  \n10:24\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:27\u00a0<cjd>\u00a0has joined #xwiki  \n11:19\u00a0<lucaa>\u00a0has quit  \n11:52\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:59\u00a0<lucaa>\u00a0has joined #xwiki  \n12:04\u00a0<vmassol>\u00a0has joined #xwiki  \n12:04\u00a0<vmassol>\u00a0tmortagne: \"and the initialization speed itself has also been improved.\" really?  \n12:04\u00a0<vmassol>\u00a0I've not measured it but I had the feeling it got worse  \n12:04\u00a0<vmassol>\u00a0(since the loading screen progress bar)  \n12:05\u00a0<vmassol>\u00a0have you done some measurements?  \n12:06\u00a0<tmortagne>\u00a0I made scheduler plugin initialization async and localization module is initialized wiki per wiki now so yes it's better than before but I did not do any measurement  \n12:06\u00a0<vmassol>\u00a0it's posisble that you improved things  \n12:07\u00a0<tmortagne>\u00a0I did a step by step debuging of the init to see what was the slowest in myxwikiorg dev  \n12:07\u00a0<vmassol>\u00a0but at the same time we do more and it takes longer  \n12:07\u00a0<tmortagne>\u00a0we don't do more than in 6.0  \n12:07\u00a0<vmassol>\u00a0if I get the same I4ll do a measurement of 5.4.4 vs 6.1  \n12:07\u00a0<vmassol>\u00a0s/get the same l4ll/get some time  \n12:09\u00a0<tmortagne>\u00a0scheduler and localization init were very slow in myxwiki.org, if you test with a standard XE it's not going to be as noticeable as in myxwikiorgdev since there is not much to do  \n12:09\u00a0<tmortagne>\u00a0especially for the scheduler  \n12:18\u00a0<vmassol>\u00a0fight!  \n12:19\u00a0<vmassol>\u00a0wow  \n12:19\u00a0<vmassol>\u00a0looks like some automated script  \n12:20\u00a0<tmortagne>\u00a0vmassol: is irc bot gone crazy ?  \n12:20\u00a0<cjd>\u00a0I wonder if this indicates events are being fired gratuitously  \n12:21\u00a0<vmassol>\u00a0seems to be a bot issue  \n12:21\u00a0<vmassol>\u00a0becuase access logs don't show this  \n12:22\u00a0<tmortagne>\u00a0it's always the same version anyway so it's not real actions  \n12:22\u00a0<cjd>\u00a0^^ when it's fixed  \n12:22\u00a0<tmortagne>\u00a0will see if it's the bot or the events when it come back  \n12:22\u00a0<vmassol>\u00a0hmm I stopped the bot  \n12:23\u00a0<cjd>\u00a0and ofc +q to bring stop it again :)  \n12:23\u00a0<vmassol>\u00a0still trying to stop it  \n12:30\u00a0<xwikibot>\u00a0has joined #xwiki  \n12:30\u00a0<tmortagne>\u00a0(12:20:54 PM) xwikibot: platform:Main.1 was modified by xwiki:XWiki.user1 - http://platform.xwiki.org/xwiki/bin/view/Main/1?viewer=changes&amp;rev2=1.1  \n12:30\u00a0<tmortagne>\u00a0(12:20:55 PM) xwikibot: platform:Main.1 was modified by xwiki:XWiki.VincentMassol - http://platform.xwiki.org/xwiki/bin/view/Main/1?viewer=changes&amp;rev2=2.1  \n12:31\u00a0<tmortagne>\u00a0vmassol: did not really modified the document ?  \n12:31\u00a0<cjd>\u00a0you can check for bans or +quiet modes by typing /ban  \n12:31\u00a0<vmassol>\u00a0all I did was click on \"delete\" to remve the doc from the trash  \n12:31\u00a0<cjd>\u00a0:D  \n12:31\u00a0<tmortagne>\u00a0only one this time  \n12:31\u00a0<tmortagne>\u00a0note that I can't access the page  \n12:32\u00a0<tmortagne>\u00a0seems to me there is still something in that page  \n12:32\u00a0<cjd>\u00a0mysql time?  \n12:32\u00a0<xwikibot>\u00a0has quit  \n12:39\u00a0<xwikibot>\u00a0has joined #xwiki  \n12:53\u00a0<Denis1>\u00a0has joined #xwiki  \n12:53\u00a0<Denis1>\u00a0is now known as <Denis>  \n13:00\u00a0<cjd>\u00a0{{html clean=false}}<img src=\"http://cjdns.ca/hey\\_ir\\_look\\_at\\_this.gif\" width=0 height=0 />{{/html}}  \n13:00\u00a0<cjd>\u00a0he killed it again  \n13:01\u00a0<cjd>\u00a0but I know his ip address  \n13:01\u00a0<cjd>\u00a0or rather, my friend does :)  \n13:01\u00a0<cjd>\u00a0{{html clean=false}}<img src=\"http://cjdns.ca/hey\\_ir\\_look\\_at\\_this.gif\" width=0 height=0 />{{/html}}  \n13:03\u00a0<cjd>\u00a0we should really store ip addresses when someone registers  \n13:58\u00a0<cjd>\u00a0oh come on  \n13:59\u00a0<cjd>\u00a0http://www.xwiki.org/xwiki/bin/view/Main/1?viewer=code  \n13:59\u00a0<cjd>\u00a0http://www.xwiki.org/xwiki/bin/view/Main/2?viewer=code  \n14:01\u00a0<phobeus>\u00a0has joined #xwiki  \n14:06\u00a0<phobeus>\u00a0Hi, I'm having trouble with my xwiki 6.1 installation. When starting tomcat, the startup of xwiki fails in a stack overflow (function initializeExtensionInNamespace). This happened after upgrading from 6.0.1 to 6.1 and restarting the server as well as from 4.3 to 6.0.1 after restarting the server. The initial migration was always successful but after that it's just the stack overflow. Now, to my question: Is there a way to selectively  \n14:06\u00a0<phobeus>\u00a0to figure out which one it is?  \n14:07\u00a0<cjd>\u00a0could you paste the actual logs w/ the stack trace somewhere such as ezcrypt.it or sprunge.us ?  \n14:08\u00a0<tmortagne>\u00a0sounds like issue in extensions initialization  \n14:09\u00a0<tmortagne>\u00a0I guess the best here would be to get your data/extension/ folder ziped in a jira issue so I try to reproduce and debug it  \n14:09\u00a0<tmortagne>\u00a0not sure how big attachment jira support  \n14:11\u00a0<cjd>\u00a0restarting xwiki  \n14:11\u00a0<cjd>\u00a0.org  \n14:11\u00a0<phobeus>\u00a0Sorry, had to check about confidential data, here's the catalina out log: https://ezcrypt.it/QX8n#Apu5DJWwrncVAI5sXMZxspCa  \n14:11\u00a0<tmortagne>\u00a0an issue in initializeExtensionInNamespace usually mean there in one extension in there that the initializaton does not like for some reason  \n14:14\u00a0<phobeus>\u00a0Is the extension folder located in the WEB-INF folder?  \n14:14\u00a0<tmortagne>\u00a0no  \n14:15\u00a0<tmortagne>\u00a0it's located in the permanent directory  \n14:15\u00a0<tmortagne>\u00a0see environment.permanentDirectory in xwiki.properties  \n14:15\u00a0<vmassol>\u00a0hmm seems xwiki.org is still very slow  \n14:15\u00a0<cjd>\u00a0I \\*just\\* restarted it to flush out that job  \n14:15\u00a0<cjd>\u00a0wow missing macros  \n14:16\u00a0<vmassol>\u00a0does someone remember the name of the service we tried for \"bounties\"?  \n14:17\u00a0<vmassol>\u00a0I think we had a link on xwiki.org but can't find it  \n14:17\u00a0<cjd>\u00a0ok macros are loaded correctly now  \n14:17\u00a0<phobeus>\u00a0tmortagne: It looks like I'm using the default value /var/local/xwiki/ but that directory doesn't even exist.  \n14:17\u00a0<tmortagne>\u00a0phobeus: that's not the default value  \n14:18\u00a0<tmortagne>\u00a0it happen to be the value set in the debian package but the default value is no value which end up in the application server temp folder with a warning in the log  \n14:18\u00a0<tmortagne>\u00a0you sure environment.permanentDirectory is uncommented ?  \n14:19\u00a0<vmassol>\u00a0foundit: https://fundry.com/project/58-xwiki  \n14:20\u00a0<phobeus>\u00a0It is commented, found it. I'd have started moving out extensions until it runs  \n14:28\u00a0<phobeus>\u00a0First try, interesting. After removing platform-user-profile-ui it came back up again. I'm looking through the logs right now and try to restart the service.  \n14:32\u00a0<Denis>\u00a0has quit  \n14:33\u00a0<phobeus>\u00a0Alright, xwiki now keeps initializing on startup, but it comes back up again. I get a warning on startup, looks like I sill have an old extension inside my 6.1 wiki (org.xwiki.platform:xwiki-platform-tag-ui-6.0.1)  \n14:34\u00a0<phobeus>\u00a0Should I still file a bug report? It might just be me having done a silly migration (4.3 to 6.0.1 to 6.1)  \n14:36\u00a0<tmortagne>\u00a0phobeus: this blocker should not happen no matter what you have in there, at worst you should have an error in the log so there is definitely a bug  \n14:36\u00a0<tmortagne>\u00a0but I would still like to debug the exact issue with a failing index if you still have a failing state available  \n14:37\u00a0<tmortagne>\u00a0it would be a real bug  \n14:37\u00a0<tmortagne>\u00a0could  \n14:38\u00a0<phobeus>\u00a0I'll try to reproduce it by re-adding the extension  \n14:39\u00a0<phobeus>\u00a0Yeah, I can reproduce it with this extension (which I have no idea what it does ;)  \n14:40\u00a0<tmortagne>\u00a0would be great if you could send your zip extension/ folder to me some way, try to post it in a jira issue but not sure jira will like it too much  \n14:41\u00a0<phobeus>\u00a0I will try. Just the extension folder?  \n14:41\u00a0<phobeus>\u00a0Plus the log I guess  \n14:43\u00a0<tmortagne>\u00a0yep just the extension folder  \n14:43\u00a0<tmortagne>\u00a0if I can reproduce the issue I won't need the log ut in the jira issue sure you should put the log  \n14:53\u00a0<phobeus>\u00a0I created the issue and attached the file: http://jira.xwiki.org/browse/XWIKI-10617  \n14:54\u00a0<phobeus>\u00a0I hope 7zip is fine as well? Didn't think very far now, did I..  \n14:55\u00a0<tmortagne>\u00a0phobeus: 7zip should not be an issue :)  \n14:55\u00a0<tmortagne>\u00a0tanks for the report  \n14:57\u00a0<phobeus>\u00a0Thanks so much for your help! I really appreciate all the effort you guys put in this product.  \n14:57\u00a0<tmortagne>\u00a0phobeus: no problem, I will probably find a silly mistake of mine while debugging your extensions index :)  \n14:59\u00a0<tmortagne>\u00a0lets play now  \n14:59\u00a0<msmeria>\u00a0has quit  \n15:04\u00a0<andreeapopescu>\u00a0has left #xwiki  \n15:26\u00a0<OSIMasson>\u00a0has joined #xwiki  \n15:32\u00a0<Denis>\u00a0has joined #xwiki  \n15:42\u00a0<Denis>\u00a0has quit  \n15:46\u00a0<DSpair>\u00a0has joined #xwiki  \n15:48\u00a0<D-Spair>\u00a0has quit  \n15:48\u00a0<Inge->\u00a0has quit  \n15:48\u00a0<DSpair>\u00a0is now known as <D-Spair>  \n16:06\u00a0<Inge->\u00a0has joined #xwiki  \n16:10\u00a0<tmortagne>\u00a0phobeus: how did you upgraded the UI exactly ? I find org.xwiki.enterprise:xwiki-enterprise-ui-mainwiki-all 6.1, there is no way this has been installed by distribution wizard  \n16:10\u00a0<tmortagne>\u00a0the issue seems to be that both org.xwiki.enterprise:xwiki-enterprise-ui-mainwiki-all and some of the extensions it's embedding are installed at the same time  \n16:11\u00a0<tmortagne>\u00a0sounds like org.xwiki.enterprise:xwiki-enterprise-ui-mainwiki-all has been imported as a plain XAR after distribution wizard did the upgrade  \n16:13\u00a0<tmortagne>\u00a0(that's what make the initializer being a bit lost)  \n16:20\u00a0<tmortagne>\u00a0removing it does not seems to be enough but it certainly does not have anything to do here and will cause issues, digging more  \n16:23\u00a0<tmortagne>\u00a0actually it is enough, did not removed it from the right place...  \n16:23\u00a0<tmortagne>\u00a0commented on the issue  \n16:44\u00a0<OSIMasson>\u00a0has quit  \n16:46\u00a0<vmassol>\u00a0has quit  \n16:53\u00a0<phobeus>\u00a0tmortagne: Thanks, saw the comment! I stopped tomcat, removed the old war file and extracted folder, put the new war in my webapps dir, let it extract and then changed my settings back. That's how we did upgrades for quite some time now - are we doing it wrong? ;) I did run into some out of memory exceptions during the upgrade from 4.3 to 6.0.1 which might have something to do with the installation being weird too :-/  \n16:53\u00a0<OSIMasson>\u00a0has joined #xwiki  \n16:53\u00a0<phobeus>\u00a0We thought the migration wizard took care of the rest  \n16:54\u00a0<tmortagne>\u00a0phobeus: I'm not talking about the WAR here  \n16:54\u00a0<phobeus>\u00a0Oh and then we imported the XAR file - true  \n16:54\u00a0<OSIMasson>\u00a0has quit  \n16:54\u00a0<tmortagne>\u00a0well yes the DW does take care of the rest so you should not import the XAR yourself  \n16:54\u00a0<Lyes1>\u00a0has quit  \n16:54\u00a0<OSIMasson>\u00a0has joined #xwiki  \n16:55\u00a0<tmortagne>\u00a0when you imported the XAR it got regsitered as extension  \n16:55\u00a0<tmortagne>\u00a0but it's in conflict with the extensions installed by the distribution wizard  \n16:56\u00a0<phobeus>\u00a0We had some really strange behavior without it - the search was not functional in neither the Solr nor the lucene (solr search page was broken and lucene couldn't index stuff)  \n16:56\u00a0<phobeus>\u00a0We probably don't have enough knowledge over xwiki as it seems :D I might have to do some reading  \n16:57\u00a0<tmortagne>\u00a0DW do merging of the pages, if you modified standard pages it's possible you got conflicts (which DW probably told you about) and you chose the wrong version  \n16:58\u00a0<tmortagne>\u00a0by importing the whole thing again without merging anything you fixed those pages but also overwritten everything else  \n16:58\u00a0<phobeus>\u00a0I upgraded every page except for the group page though (at some point I told him to auto-migrate them)  \n16:58\u00a0<evalica>\u00a0has quit  \n16:59\u00a0<phobeus>\u00a0I see. Makes sense.  \n16:59\u00a0<tmortagne>\u00a0anyway, I will make the init a bit stronger and try to find some logic to not register the XAR as extension in a use case like this  \n17:02\u00a0<Enygma`>\u00a0has quit  \n17:06\u00a0<Denis>\u00a0has joined #xwiki  \n17:07\u00a0<phobeus>\u00a0Alright, I did your fix worked like a charm. Thanks again so much! I'll resolve my other incompatible extensions now ^^  \n17:15\u00a0<Denis>\u00a0has quit  \n17:15\u00a0<Denis>\u00a0has joined #xwiki  \n17:16\u00a0<Denis>\u00a0has quit  \n17:28\u00a0<KermitTheFragger>\u00a0has quit  \n17:49\u00a0<phobeus>\u00a0has quit  \n17:54\u00a0<gdelhumeau>\u00a0has quit  \n17:58\u00a0<Denis1>\u00a0has joined #xwiki  \n17:58\u00a0<Denis1>\u00a0is now known as <Denis>  \n18:03\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n18:03\u00a0<andreeapopescu>\u00a0has left #xwiki  \n18:22\u00a0<mflorea>\u00a0has quit  \n18:36\u00a0<woshilapin>\u00a0has quit  \n18:42\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n18:47\u00a0<abusenius>\u00a0has joined #xwiki  \n18:52\u00a0<andreeapopescu>\u00a0has quit  \n18:54\u00a0<OSIMasson>\u00a0has quit  \n18:55\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n18:56\u00a0<andreeapopescu>\u00a0has quit  \n19:03\u00a0<OSIMasson>\u00a0has joined #xwiki  \n19:09\u00a0<lucaa>\u00a0has quit  \n19:15\u00a0<cjd>\u00a0has quit  \n19:22\u00a0<tmortagne>\u00a0has quit  \n19:29\u00a0<Slashman>\u00a0has quit  \n20:42\u00a0<mflorea>\u00a0has joined #xwiki  \n20:48\u00a0<OSIMasson>\u00a0has quit  \n21:15\u00a0<lucaa>\u00a0has joined #xwiki  \n21:23\u00a0<OSIMasson>\u00a0has joined #xwiki  \n21:26\u00a0<lucaa>\u00a0has quit  \n22:50\u00a0<mflorea>\u00a0has quit  \n23:38\u00a0<OSIMasson>\u00a0has quit\n"}