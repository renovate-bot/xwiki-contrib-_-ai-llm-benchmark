{"id": "dev:IRC.xwikiArchive20110921", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110921", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:11\u00a0<jvdrean>\u00a0has joined #xwiki  \n00:36\u00a0<abusenius>\u00a0has quit  \n02:01\u00a0<jvdrean>\u00a0has quit  \n02:28\u00a0<jvdrean>\u00a0has joined #xwiki  \n02:28\u00a0<jvdrean>\u00a0has quit  \n03:25\u00a0<sdumitriu>\u00a0has quit  \n03:25\u00a0<sdumitriu>\u00a0has joined #xwiki  \n04:33\u00a0<DrLou>\u00a0has quit  \n06:04\u00a0<cjdelisle>\u00a0has quit  \n06:04\u00a0<xipe>\u00a0has quit  \n06:04\u00a0<Denis>\u00a0has quit  \n08:01\u00a0<mflorea>\u00a0has joined #xwiki  \n09:04\u00a0<jvdrean>\u00a0has joined #xwiki  \n09:49\u00a0<Denis>\u00a0has joined #xwiki  \n09:51\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:51\u00a0<xipe>\u00a0has joined #xwiki  \n09:52\u00a0<cjdelisle>\u00a0has joined #xwiki  \n09:54\u00a0<sburjan>\u00a0has joined #xwiki  \n10:09\u00a0<jvdrean>\u00a0has quit  \n10:12\u00a0<silviar>\u00a0has joined #xwiki  \n10:50\u00a0<Enygma`>\u00a0Hi guys  \n10:50\u00a0<Enygma`>\u00a0it seems that the registration is broken on master  \n10:51\u00a0<Enygma`>\u00a0instead of the registration form, I get the Registration class displayed just like a normal class is displayed in view mode  \n10:51\u00a0<evalica>\u00a0has joined #xwiki  \n10:52\u00a0<@sdumitriu>\u00a0mflorea: This looks like something for you  \n10:52\u00a0<@sdumitriu>\u00a0(what Enygma`reported)  \n10:52\u00a0<Enygma`>\u00a0also, the object editor is displaying escaped html for the first property's value of each object. (this is because document.display(...) does not explicitly get 'view' as display mode, so the current edit mode is used)  \n10:53\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:54\u00a0<Enygma`>\u00a0re the object editor... even though the editobject.vm was not touched recently, I wonder why it was working before (3.2M2)  \n10:57\u00a0<+mflorea>\u00a0I'll check  \n10:57\u00a0<Enygma`>\u00a0thanks mflorea  \n11:05\u00a0<sdumitriu>\u00a0has quit  \n11:25\u00a0<+mflorea>\u00a0Enygma`: the registration page should work after http://ci.xwiki.org/job/xwiki-platform/ builds fine. Right now there is a test in wikinamager that fails and tmortagne is not online to take care of it  \n12:13\u00a0<+sburjan>\u00a0hello guys. Is there something wrong with the blog ? I am running on the latest snapshotand when I create a blog I don't get any WYSIWYG editors, nothing.  \n12:13\u00a0<+sburjan>\u00a0\\*when I create a post  \n12:15\u00a0<+sburjan>\u00a0but if I click on save and View, then edit again, I get everything  \n12:26\u00a0<silviar>\u00a0has quit  \n12:28\u00a0<+sburjan>\u00a0ok, there is something clearly wrong. If I leavt the Post Title blank and I press Create post, i get a velocity error  \n12:30\u00a0<+mflorea>\u00a0how can you leave it blank? it is automatically filled with \"Post title\" when it looses focus if it's empty  \n12:31\u00a0<+mflorea>\u00a0anyway, you should not test XE now because the build is unstable  \n12:31\u00a0<+sburjan>\u00a0I am reffering to the small form (input field + button) from the Blog homepage  \n12:31\u00a0<+sburjan>\u00a0okay  \n12:31\u00a0<+mflorea>\u00a0yes, the input of that form has \"Post title\" filled by default  \n12:32\u00a0<+sburjan>\u00a0well, not in my latest snapshot. I will wait till the build is stable  \n12:32\u00a0<+mflorea>\u00a0I have the latest snapshot  \n12:32\u00a0<+mflorea>\u00a0and the \"Post title\" test is there  \n12:32\u00a0<+mflorea>\u00a0s/test/text  \n12:38\u00a0<+sburjan>\u00a0very odd. I don't get this in 3.1  \n12:39\u00a0<+sburjan>\u00a0the \"Post title\" text is there in the filed, true, but when I press the \"Create\" button i get en exception  \n12:42\u00a0<+sburjan>\u00a0xwiki-enterprise-jetty-hsqldb-3.2-20110920.193654-454.zip  \n12:51\u00a0<JuanDaugherty>\u00a0why do you say it's 3.1 when the zip is marked 3.2?  \n12:52\u00a0<+sburjan>\u00a0because I tested this also in 3.1, and it works  \n12:52\u00a0<JuanDaugherty>\u00a0ah, misread your meaning  \n13:11\u00a0<Enygma`>\u00a0has quit  \n13:11\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:30\u00a0<DrLou>\u00a0has joined #xwiki  \n13:39\u00a0<JuanDaugherty>\u00a0people are aware that ActivityStream is broken in the \"Playground\" test wiki?  \n13:41\u00a0<JuanDaugherty>\u00a0ah, see it's 2.6.2 so guess it's a don't care situation  \n13:41\u00a0<JuanDaugherty>\u00a0maybe should go to myXwiki oder  \n13:52\u00a0<silviar>\u00a0has joined #xwiki  \n14:00\u00a0<evalica>\u00a0has quit  \n14:07\u00a0<evalica>\u00a0has joined #xwiki  \n14:12\u00a0<qwebirc43626>\u00a0has joined #xwiki  \n14:12\u00a0<qwebirc43626>\u00a0has quit  \n14:13\u00a0<jabberprob>\u00a0has joined #xwiki  \n14:13\u00a0<jabberprob>\u00a0any one done MUC in ejabberd  \n14:13\u00a0<jabberprob>\u00a0has quit  \n14:33\u00a0<Enygma`>\u00a0has quit  \n14:35\u00a0<silviar>\u00a0has left #xwiki  \n14:46\u00a0<vmassol>\u00a0has joined #xwiki  \n14:49\u00a0<pturcotte>\u00a0has joined #xwiki  \n14:56\u00a0<Enygma`>\u00a0has joined #xwiki  \n15:16\u00a0<sdumitriu>\u00a0has joined #xwiki  \n16:36\u00a0<vmassol>\u00a0has quit  \n16:39\u00a0<sburjan>\u00a0has quit  \n17:44\u00a0<JuanDaugherty>\u00a0the Skin Editor page should be updated, bespin no longer exists  \n18:05\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:48\u00a0<tmortagne>\u00a0has quit  \n18:50\u00a0<Enygma`>\u00a0has quit  \n18:50\u00a0<jvdrean>\u00a0has quit  \n19:01\u00a0<vmassol>\u00a0has joined #xwiki  \n19:07\u00a0<+mflorea>\u00a0sdumitriu: I see that when an xobject is removed, it isn't actually removed from the list but it is replaced with null. As a consequence, doc.getXObjects(\"class name\") can return an array of nulls. Am I right? This means I have to check for null even if getXObjects gives me a non-empty list.  \n19:08\u00a0<@sdumitriu>\u00a0Yes  \n19:08\u00a0<+mflorea>\u00a0ok, thanks  \n19:09\u00a0<@sdumitriu>\u00a0It's a very old design flaw  \n19:09\u00a0<+mflorea>\u00a0yes, unfortunatelly  \n19:10\u00a0<@sdumitriu>\u00a0vmassol: I thought some more about the unique document versioning and git, and I have some ideas  \n19:10\u00a0<vmassol>\u00a0sdumitriu: cool, send them in reply to the email maybe  \n19:10\u00a0<@sdumitriu>\u00a0I'll write an email after the release  \n19:10\u00a0<vmassol>\u00a0ok  \n19:10\u00a0<@sdumitriu>\u00a0Who's taking care of the failing tests?  \n19:10\u00a0<vmassol>\u00a0mflorea  \n19:10\u00a0<+mflorea>\u00a0yep  \n19:11\u00a0<@sdumitriu>\u00a0vmassol: I thought slf4j had varargs methods, but I can't see them  \n19:12\u00a0<vmassol>\u00a0not quite  \n19:12\u00a0<@sdumitriu>\u00a0We can only give at most 2 parameters?  \n19:12\u00a0<vmassol>\u00a0no  \n19:12\u00a0<@sdumitriu>\u00a0Or pass a vector?  \n19:12\u00a0<vmassol>\u00a0wait  \n19:13\u00a0<vmassol>\u00a0first there's this: http://www.slf4j.org/faq.html#paramException  \n19:13\u00a0<vmassol>\u00a0to pass more than 2 params you use the Object[] signature  \n19:14\u00a0<vmassol>\u00a0for ex: http://www.slf4j.org/apidocs/org/slf4j/Logger.html#debug(java.lang.String, java.lang.Object[])  \n19:15\u00a0<@sdumitriu>\u00a0Thanks  \n19:19\u00a0<+mflorea>\u00a0vmassol: the default entity reference serializer ignores the second parameter so it always generates absolute string references. Is there a serializer that does this directly? i.e. serialize(ref, relativeTo) -> relativeStringRef  \n19:25\u00a0<vmassol>\u00a0has quit  \n19:37\u00a0<abusenius>\u00a0has joined #xwiki  \n19:48\u00a0<+mflorea>\u00a0sdumitriu: do you have a minute, to talk about inline and edit actions?  \n19:48\u00a0<@sdumitriu>\u00a0Yes  \n19:51\u00a0<+mflorea>\u00a0so, the problem I have is that inline action copies the template in cdoc while edit action copies the template in tdoc. Do you know the reason? what means \"cdoc\"?  \n19:51\u00a0<@sdumitriu>\u00a0content document  \n19:51\u00a0<@sdumitriu>\u00a0The one that is supposed to hold the current document data  \n19:51\u00a0<@sdumitriu>\u00a0But I don't think the distinction is relevant, tdoc should be used  \n19:51\u00a0<@sdumitriu>\u00a0cdoc is not really used  \n19:51\u00a0<+mflorea>\u00a0well, it is  \n19:52\u00a0<+mflorea>\u00a0the problem is that I deprecated the inline action and apps using the new sheet system are using only the edit action.  \n19:53\u00a0<+mflorea>\u00a0it works fine, except when you want to create a new page based on a template  \n19:54\u00a0<+mflorea>\u00a0the template is copied in tdoc, but the velocity templates and the application code (e.g. Blog code) uses \u00a0cdoc  \n19:55\u00a0<+mflorea>\u00a0for instance in the BlogPostSheet there is a test that checks if cdoc has an object of type BlogPostClass which fails because the object is on tdoc :)  \n19:57\u00a0<@sdumitriu>\u00a0Well, I guess that's my fault..  \n19:57\u00a0<+mflorea>\u00a0going through the code of each application is difficult  \n19:57\u00a0<+mflorea>\u00a0so the best option for me is to update the edit action  \n19:58\u00a0<+mflorea>\u00a0the issue is that some parts of the code from EditAction doesn't make sense to me :)  \n19:59\u00a0<@sdumitriu>\u00a0Can't you just put both tdoc and cdoc in the context, pointing to the same entity?  \n19:59\u00a0<@sdumitriu>\u00a0EditAction is a hairy ugly beast  \n19:59\u00a0<+mflorea>\u00a0yes, that's the quick fix  \n19:59\u00a0<+mflorea>\u00a0exactly :) really ugly  \n20:02\u00a0<+mflorea>\u00a0for instance I don't understand why is the synchronization block needed and how it can work if it locks on an object that is know only by that thread (i.e. it's not shared)  \n20:04\u00a0<+mflorea>\u00a0then documents are cloned multiple times. it should be enough to clone just once  \n20:06\u00a0<+mflorea>\u00a0anyway, I'll put tdoc on the content also as cdoc  \n20:16\u00a0<vmassol>\u00a0has joined #xwiki  \n20:24\u00a0<sburjan`>\u00a0has quit  \n20:25\u00a0<sburjan`>\u00a0has joined #xwiki  \n20:27\u00a0<+mflorea>\u00a0vmassol: you may have missed my question: the default entity reference serializer ignores the second parameter so it always generates absolute string references. Is there a serializer that does this directly? i.e. serialize(ref, relativeTo) -> relativeStringRef  \n20:27\u00a0<vmassol>\u00a0I don't know out of my head, would need to read code a bit  \n20:28\u00a0<vmassol>\u00a0thomas might remember better than me too  \n20:28\u00a0<@sdumitriu>\u00a0mflorea: I think there's an explicit serializer  \n20:28\u00a0<+mflorea>\u00a0let me check, I've seen an explicit resolver, but not serializer  \n20:31\u00a0<+mflorea>\u00a0I see only DefaultStringEntityReferenceSerializer, LocalRef.. and LocalString.. in platform-model  \n20:31\u00a0<sburjan`>\u00a0has quit  \n20:31\u00a0<vmassol>\u00a0mf  \n20:31\u00a0<vmassol>\u00a0mflorea: there are 4 impls but I can't see one that does what you say  \n20:31\u00a0<vmassol>\u00a0s/4/6/  \n20:32\u00a0<vmassol>\u00a0what's your use case?  \n20:33\u00a0<vmassol>\u00a0actually wait  \n20:33\u00a0<vmassol>\u00a0checking unit tests  \n20:33\u00a0<vmassol>\u00a0indeed param isn't used in DefaultStringEntityReferenceSerializer  \n20:34\u00a0<vmassol>\u00a0I'd need to ask thomas since he's the one who added this param AFAIR  \n20:34\u00a0<vmassol>\u00a0I don't know where he's used it  \n20:35\u00a0<+mflorea>\u00a0I have bind(document, sheetReference) and the object used for binding has a \"sheet\" string property. I want to save the sheet reference as a relative string reference to avoid problems when the app space is renamed or move to another wiki, for instance  \n20:35\u00a0<vmassol>\u00a0if all you need is to remove teh wiki part we have this  \n20:36\u00a0<+mflorea>\u00a0of course, I don't know the doc and the sheet are in the same space/wiki  \n20:36\u00a0<vmassol>\u00a0of course what?  \n20:36\u00a0<+mflorea>\u00a0but if they are, I'd like to save a relative ref  \n20:36\u00a0<+mflorea>\u00a0\"of course\" without comma after :)  \n20:36\u00a0<vmassol>\u00a0ah  \n20:36\u00a0<vmassol>\u00a0:)  \n20:37\u00a0<vmassol>\u00a0so is it ok to use a serializer that only removes the wik part if it' the same wiki?  \n20:37\u00a0<+mflorea>\u00a0no, I want to remove the space too, if the doc and the sheet are in the same space  \n20:38\u00a0<vmassol>\u00a0ok I don't think we've ever done this anywhere else which means something isn't right  \n20:38\u00a0<+mflorea>\u00a0what I can do it to remove parts from the entity ref before serializing it  \n20:38\u00a0<vmassol>\u00a0but  \n20:38\u00a0<+mflorea>\u00a0this seems like a common use case to me  \n20:38\u00a0<vmassol>\u00a0best is really to ask thomas if he remember  \n20:38\u00a0<vmassol>\u00a0yes  \n20:38\u00a0<vmassol>\u00a0which is why I find it strange  \n20:38\u00a0<+mflorea>\u00a0when you know for sure you're working with doc refs  \n20:39\u00a0<+mflorea>\u00a0ok, I'll ping Thomas  \n20:39\u00a0<vmassol>\u00a0ah wait  \n20:39\u00a0<vmassol>\u00a0found it  \n20:39\u00a0<vmassol>\u00a0CompactStringEntityReferenceSerializer  \n20:39\u00a0<vmassol>\u00a0checking where it's used  \n20:40\u00a0<vmassol>\u00a0it seems to obey the second parameter  \n20:40\u00a0<vmassol>\u00a0@Named(\"compact\")  \n20:40\u00a0<+mflorea>\u00a0aha, I ignored it because of the class javadoc, I thought it uses only the current context doc  \n20:41\u00a0<vmassol>\u00a0ok found a usage  \n20:41\u00a0<vmassol>\u00a0in XWikiDocument  \n20:43\u00a0<vmassol>\u00a0actually you also use it already ;)  \n20:43\u00a0<vmassol>\u00a0in DefaultLinkService  \n20:43\u00a0<vmassol>\u00a0org.xwiki.wysiwyg.server.internal.wiki.DefaultLinkService  \n20:43\u00a0<+mflorea>\u00a0:) let me check, I had a feeling  \n20:43\u00a0<vmassol>\u00a0those are the only 2 locations where it's used  \n20:45\u00a0<+mflorea>\u00a0indeed, thanks, should have found it myself..  \n20:45\u00a0<vmassol>\u00a0np  \n21:18\u00a0<evalica>\u00a0has quit  \n21:32\u00a0<JuanDaugherty>\u00a0the only social login is jvelociter's pkg?  \n21:32\u00a0<JuanDaugherty>\u00a0(vs: http://dev.xwiki.org/xwiki/bin/view/Design/ExtensionManagerSocial )  \n21:44\u00a0<vmassol>\u00a0JuanDaugherty: ATM yes that's the only one I know of: http://extensions.xwiki.org/xwiki/bin/view/Extension/Social+Login  \n21:49\u00a0<sburjan`>\u00a0has joined #xwiki  \n21:51\u00a0<JuanDaugherty>\u00a0thx, it seems to be more or less working, just wanted to check for conflict with main line of xwiki  \n21:52\u00a0<vmassol>\u00a0we'll need to integrate this properly in the platform at some point  \n21:55\u00a0<lpereira>\u00a0has joined #xwiki  \n21:56\u00a0<pturcotte>\u00a0has quit  \n22:20\u00a0<+mflorea>\u00a0sdumitriu: why exactly do we clone the document object in EditAction, the comment:  \n22:20\u00a0<+mflorea>\u00a0// we need to clone so that nothing happens in memory  \n22:20\u00a0<+mflorea>\u00a0is not very useful..  \n22:21\u00a0<@sdumitriu>\u00a0Because the context document is the same object as the one found in the XWikiCacheStore  \n22:21\u00a0<@sdumitriu>\u00a0So if we change it without saving it, the cache will become dirty  \n22:21\u00a0<+mflorea>\u00a0right  \n22:21\u00a0<+mflorea>\u00a0makes sense  \n22:21\u00a0<+mflorea>\u00a0thanks  \n22:21\u00a0<vmassol>\u00a0could be good to update the javadoc...  \n22:22\u00a0<vmassol>\u00a0has quit  \n22:42\u00a0<lpereira>\u00a0has quit  \n23:17\u00a0<abusenius>\u00a0has quit  \n23:38\u00a0<cjdelisle>\u00a0has quit  \n\n"}