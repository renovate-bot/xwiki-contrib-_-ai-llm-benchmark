{"id": "dev:IRC.xwikiArchive20150806", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150806", "title": "IRC Archive for channel #xwiki on 06 August 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n03:58\u00a0<Bugendolf>\u00a0has quit  \n03:58\u00a0<Bugendolf>\u00a0has joined #xwiki  \n04:11\u00a0<Ramona1>\u00a0has joined #xwiki  \n04:59\u00a0<Ramona1>\u00a0has quit  \n06:07\u00a0<Ramona1>\u00a0has joined #xwiki  \n06:32\u00a0<Ramona1>\u00a0has quit  \n06:43\u00a0<mflorea>\u00a0has joined #xwiki  \n06:45\u00a0<woshilapin>\u00a0has joined #xwiki  \n06:53\u00a0<woshilapin>\u00a0has quit  \n07:31\u00a0<woshilapin>\u00a0has joined #xwiki  \n08:14\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:38\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:03\u00a0<mflorea>\u00a0has quit  \n09:06\u00a0<gsmeria>\u00a0has joined #xwiki  \n09:13\u00a0<Ramona2>\u00a0has joined #xwiki  \n09:25\u00a0<mflorea>\u00a0has joined #xwiki  \n09:51\u00a0<vmassol>\u00a0has joined #xwiki  \n09:51\u00a0<vmassol>\u00a0good morning  \n09:51\u00a0<vmassol>\u00a0ah the smell of a release\u2026  \n09:51\u00a0<woshilap1n>\u00a0has joined #xwiki  \n09:51\u00a0<vmassol>\u00a0if we succeed in fixing the build...  \n09:51\u00a0<vmassol>\u00a0we still have the 6 failing crypto tests to fix to start with  \n09:52\u00a0<woshilapin>\u00a0has quit  \n09:53\u00a0<vmassol>\u00a0checking ci to see what else we need to fix  \n09:53\u00a0<vmassol>\u00a0tmortagne: do you think you could check http://ci.xwiki.org/job/xwiki-enterprise-test-extension/lastCompletedBuild/testReport/ ?  \n09:53\u00a0<vmassol>\u00a0(and good morning!)  \n09:53\u00a0<vmassol>\u00a0to see if they're real or not and what to do about them  \n09:54\u00a0<tmortagne>\u00a0finishing something first  \n09:54\u00a0<vmassol>\u00a0fixing http://ci.xwiki.org/job/xwiki-enterprise-test-ui/1287/console  \n09:54\u00a0<vmassol>\u00a0caused by a change I did yesterday  \n09:54\u00a0<tmortagne>\u00a0Age 1 might mean it's flickering  \n09:55\u00a0<tmortagne>\u00a0reexecuting them first and will look at the result later  \n09:56\u00a0<vmassol>\u00a0ok thx  \n10:06\u00a0<woshilap1n>\u00a0has quit  \n10:18\u00a0<Trefex>\u00a0has joined #xwiki  \n10:24\u00a0<woshilapin>\u00a0has joined #xwiki  \n10:27\u00a0<vmassol>\u00a0FYI I'm modifying the create page/space behavior so that superadmin gets the terminal option. Should if you don't agree  \n10:28\u00a0<vmassol>\u00a0actually I even think that $xwiki.getUserPreference('usertype') == 'Advanced' should always be true for superadmin  \n10:29\u00a0<vmassol>\u00a0but I won't do that now, too risky  \n10:38\u00a0<evalica>\u00a0has joined #xwiki  \n10:42\u00a0<evalica>\u00a0has quit  \n10:52\u00a0<vmassol>\u00a0ok should build now  \n11:13\u00a0<tmortagne>\u00a0vmassol: only one in http://ci.xwiki.org/job/xwiki-enterprise-test-extension/lastCompletedBuild/testReport/ seems to be a real one (or a very stable flickering test), I have to move and I will look at it  \n11:13\u00a0<vmassol>\u00a0ok thanks  \n11:14\u00a0<vmassol>\u00a0waiting for the platform build + ui-test to fix more tests there on my side  \n11:17\u00a0<tmortagne>\u00a0has quit  \n11:25\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:26\u00a0<Ramona2>\u00a0has quit  \n11:32\u00a0<evalica>\u00a0has joined #xwiki  \n11:36\u00a0<vmassol>\u00a010 tests still failing in ui-tests: http://ci.xwiki.org/job/xwiki-enterprise-test-ui/lastCompletedBuild/testReport/  \n11:37\u00a0<vmassol>\u00a0big age\u2026  \n11:39\u00a0<Ramona2>\u00a0has joined #xwiki  \n11:44\u00a0<mflorea>\u00a0I'm checking EditWYSIWYGTest.testUndoRepeatedPaste in platform  \n11:45\u00a0<tmortagne>\u00a0has joined #xwiki  \n12:12\u00a0<woshilapin>\u00a0has quit  \n12:22\u00a0<Slashman>\u00a0has joined #xwiki  \n12:29\u00a0<ClemensR>\u00a0has joined #xwiki  \n12:57\u00a0<Ramona2>\u00a0has quit  \n13:01\u00a0<woshilapin>\u00a0has joined #xwiki  \n13:31\u00a0<Ramona2>\u00a0has joined #xwiki  \n13:49\u00a0<tmortagne>\u00a0vmassol: all xwiki-enterprise-test-extension test are passing locally, so it's all flickering tests  \n13:49\u00a0<tmortagne>\u00a0jenkins does not seems to be in a very good shape  \n13:56\u00a0<OSIMasson>\u00a0has joined #xwiki  \n14:10\u00a0<vmassol>\u00a0hmm indeed http://ci.xwiki.org/job/xwiki-enterprise-test-ui/1291/console is strange  \n14:10\u00a0<vmassol>\u00a0it's not finished but the job is stopped  \n14:11\u00a0<vmassol>\u00a0apart from the tests are we ready to release otherwise?  \n14:11\u00a0<vmassol>\u00a0mflorea: are you done on your side?  \n14:11\u00a0<tmortagne>\u00a0vmassol: \"it's not finished but the job is stopped\" look at Skype  \n14:12\u00a0<vmassol>\u00a0you forced a restart?  \n14:12\u00a0<mflorea>\u00a0vmassol: done on the dev side, but there are tests to fix  \n14:12\u00a0<tmortagne>\u00a0I had to, jenkins was impossible to access and it would not stop  \n14:12\u00a0<vmassol>\u00a0ok so that explains the not finished logs  \n14:12\u00a0<tmortagne>\u00a0I don't think we can release with commons still failing  \n14:13\u00a0<vmassol>\u00a0that + lots of tests are failing  \n14:13\u00a0<vmassol>\u00a0with an \"old age\"  \n14:13\u00a0<vmassol>\u00a033+  \n14:13\u00a0<tmortagne>\u00a0but we'll need Denis, I have no idea what this test is supposed to do  \n14:13\u00a0<vmassol>\u00a0I've pinged Denis this morning  \n14:13\u00a0<vmassol>\u00a0but AFAIK he's on holidays  \n14:13\u00a0<vmassol>\u00a0I'll have a look at the test but I doubt that I can figure out anything  \n14:13\u00a0<vmassol>\u00a0still 10 failing tests on test-ui  \n14:13\u00a0<vmassol>\u00a0we need more people to look at those  \n14:14\u00a0<tmortagne>\u00a0it's not like it was some missing component or anything, it's just not get the result it's supposed to get and I don't even understand what the result is about...  \n14:15\u00a0<tmortagne>\u00a0what is weird is that it cannot be related to the commit done when it started to fail  \n14:15\u00a0<tmortagne>\u00a0the modification were done on job module and xwiki-commons-crypto-pkix does not depend on it  \n14:15\u00a0<vmassol>\u00a0yes it'es strange that age is 2 but maybe it's not been rebuilt for a long time  \n14:15\u00a0<vmassol>\u00a0Denis upgraded BC on the 15th of April 2015  \n14:15\u00a0<vmassol>\u00a0I wonder if it could have been caused at that time  \n14:16\u00a0<tmortagne>\u00a0I don't understand what you means  \n14:16\u00a0<tmortagne>\u00a0it was working well on Aug 5  \n14:16\u00a0<tmortagne>\u00a0and started to fail on Aug 5  \n14:16\u00a0<tmortagne>\u00a0see http://ci.xwiki.org/job/xwiki-commons/changes  \n14:16\u00a0<vmassol>\u00a0not true  \n14:17\u00a0<vmassol>\u00a0crypto was not built on Aug 5  \n14:17\u00a0<tmortagne>\u00a0\"#3\u200b55 Aug 5, 2015 1:35 PM\" is blue  \n14:17\u00a0<vmassol>\u00a0sure but cyprot was not built then  \n14:17\u00a0<vmassol>\u00a0ok it was built here: http://ci.xwiki.org/job/xwiki-commons/349/consoleFull  \n14:18\u00a0<vmassol>\u00a0that's 17th of July 2015  \n14:18\u00a0<vmassol>\u00a0so it's something else  \n14:18\u00a0<tmortagne>\u00a0Jul 28 then  \n14:18\u00a0<tmortagne>\u00a0it was build in http://ci.xwiki.org/job/xwiki-commons/354/  \n14:18\u00a0<vmassol>\u00a0yes  \n14:18\u00a0<tmortagne>\u00a0so it's not old  \n14:19\u00a0<tmortagne>\u00a0and since 354 there is only change in job module  \n14:20\u00a0<vmassol>\u00a0it failed on July 31th for the sonar build: http://ci.xwiki.org/job/xwiki-commons\\_Sonar/359/  \n14:20\u00a0<vmassol>\u00a0that's the first time we saw a failure  \n14:20\u00a0<vmassol>\u00a0(AFAIK)  \n14:20\u00a0<tmortagne>\u00a0we can't say it's an environment change since it's not only failing on jenkins  \n14:20\u00a0<vmassol>\u00a0so sometihng happened around that time  \n14:20\u00a0<tmortagne>\u00a0so I don't understand what could have changed  \n14:20\u00a0<vmassol>\u00a0maybe some crypto thing that fails starting at some date  \n14:20\u00a0<vmassol>\u00a0:)  \n14:21\u00a0<tmortagne>\u00a0unless this test is requesting something online  \n14:21\u00a0<vmassol>\u00a0like some certificate that has an end date  \n14:21\u00a0<vmassol>\u00a0:)  \n14:21\u00a0<vmassol>\u00a0validity date  \n14:21\u00a0<vmassol>\u00a0checking in that direction  \n14:21\u00a0<tmortagne>\u00a0hmm could be but there the test need better error reporting...  \n14:22\u00a0<tmortagne>\u00a0teh last modification in this test class was exactly 1y ago  \n14:23\u00a0<tmortagne>\u00a0s/teh/the/  \n14:23\u00a0<vmassol>\u00a0and in crypto it was denis's upgrade to BC  \n14:23\u00a0<vmassol>\u00a015 Apr 2015  \n14:23\u00a0<tmortagne>\u00a0the last modification to the test class was 2014-07-24, and it started failing right after the 2015-07-24  \n14:24\u00a0<tmortagne>\u00a0but the modification made is nothing  \n14:29\u00a0<vmassol>\u00a0debugging test  \n14:29\u00a0<woshilap1n>\u00a0has joined #xwiki  \n14:30\u00a0<vmassol>\u00a0found sometihng...  \n14:30\u00a0<vmassol>\u00a0(potentially)  \n14:32\u00a0<woshilapin>\u00a0has quit  \n14:34\u00a0<woshilapin>\u00a0has joined #xwiki  \n14:35\u00a0<woshilap1n>\u00a0has quit  \n14:36\u00a0<vmassol>\u00a0I think I'm right now\u2026 checking more  \n14:36\u00a0<vmassol>\u00a0\u00a0s/now//  \n14:36\u00a0<vmassol>\u00a0regarding the date issue  \n14:37\u00a0<tmortagne>\u00a0vmassol: \"org.bouncycastle.cms.CMSVerifierCertificateNotValidException: verifier not valid at signingTime\" when looking at the actual validation error  \n14:37\u00a0<vmassol>\u00a0yes  \n14:37\u00a0<tmortagne>\u00a0so seems to be a date issue  \n14:37\u00a0<vmassol>\u00a0and if you check the code  \n14:37\u00a0<vmassol>\u00a0it's:  \n14:37\u00a0<vmassol>\u00a0it extract the signing date  \n14:37\u00a0<tmortagne>\u00a0but will probaly need to regenerate the certificate in AbstractPKIXTest  \n14:38\u00a0<vmassol>\u00a0so now I'm trying to find out how to get the date from the certifcate  \n14:38\u00a0<vmassol>\u00a0which I probably can't  \n14:38\u00a0<tmortagne>\u00a0maybe you can but it won't fix the test, ideally we need a certificate without final date or something like this if it exist  \n14:40\u00a0<vmassol>\u00a0too bad didn't comment how he generated these certificates  \n14:40\u00a0<Ramona2>\u00a0has quit  \n14:40\u00a0<vmassol>\u00a0what I propose is:  \n14:40\u00a0<vmassol>\u00a01) add an @ignore to this test  \n14:40\u00a0<vmassol>\u00a02) create a jira issue and assign denis to it  \n14:41\u00a0<vmassol>\u00a03) release with this problem since it shouldn't affect the runtime  \n14:41\u00a0<vmassol>\u00a0(it's only a test issue)  \n14:41\u00a0<vmassol>\u00a0ok?  \n14:42\u00a0<tmortagne>\u00a0+1 but we need to put a fix for to not forget  \n14:42\u00a0<vmassol>\u00a0sure  \n14:42\u00a0<vmassol>\u00a0ok doing it  \n14:45\u00a0<tmortagne>\u00a0about http://ci.xwiki.org/job/xwiki-enterprise-test-ui/lastBuild/testReport/ user test, the issue seems to be that the suggest on userlist fields is broken  \n14:45\u00a0<tmortagne>\u00a0s/test/tests/  \n14:47\u00a0<vmassol>\u00a0mflorea: could that be caused by your changes to SOLR?  \n14:47\u00a0<vmassol>\u00a0(what thomas is mentioning)  \n14:48\u00a0<tmortagne>\u00a0it's not supposed to go trough Solr  \n14:48\u00a0<mflorea>\u00a0the user picker is not using Solr AFAIK  \n14:49\u00a0<vmassol>\u00a0(ok misread thought about the search suggest)  \n14:49\u00a0<woshilap1n>\u00a0has joined #xwiki  \n14:51\u00a0<tmortagne>\u00a0not the easiest thing to test when you can't create an object from the UI...  \n14:53\u00a0<woshilapin>\u00a0has quit  \n14:54\u00a0<vmassol>\u00a0mflorea: what about http://jira.xwiki.org/browse/XWIKI-12176 ? M3?  \n14:55\u00a0<mflorea>\u00a0yes  \n14:55\u00a0<tmortagne>\u00a0user list suggest seems ok locally  \n14:55\u00a0<tmortagne>\u00a0group list too  \n14:56\u00a0<vmassol>\u00a0hmm would have been to fix http://jira.xwiki.org/browse/XWIKI-12360  \n14:57\u00a0<vmassol>\u00a0I also noticed a new bug locally on the breadcrumb's home icon  \n14:57\u00a0<vmassol>\u00a0reporting  \n14:58\u00a0<woshilapin>\u00a0has joined #xwiki  \n15:00\u00a0<woshilap1n>\u00a0has quit  \n15:02\u00a0<tmortagne>\u00a0vmassol: it's not very clear in XWIKI-12360 if you have XWiki as root application, because it really looks like the other issue we had with XWiki as root that you fixed  \n15:03\u00a0<tmortagne>\u00a0(I don't have the issue with a standard jetty/hsqldb)  \n15:03\u00a0<vmassol>\u00a0no I've used the standard jetty/hsqldb  \n15:03\u00a0<tmortagne>\u00a0the URL you have definitely looks like the application name was empty producing //  \n15:04\u00a0<tmortagne>\u00a0it works very well otherwise from what I see  \n15:04\u00a0<vmassol>\u00a0maybe I had a configued root when I tested  \n15:04\u00a0<vmassol>\u00a0from a previous test I did to verify some user beahvior  \n15:05\u00a0<tmortagne>\u00a0saying that because it's very possible you already fixed it when you fixed the URL factory  \n15:07\u00a0<vmassol>\u00a0trying as root  \n15:08\u00a0<tmortagne>\u00a0still failing but only as root  \n15:09\u00a0<vmassol>\u00a0ok need to update issue  \n15:09\u00a0<tmortagne>\u00a0but I think rest has a special URL generator even for the beginning  \n15:09\u00a0<tmortagne>\u00a0which probably did the same mistake that was done in URL factory (probably a copy/paste)  \n15:09\u00a0<vmassol>\u00a0done, updated issue  \n15:10\u00a0<vmassol>\u00a0looking at http://jira.xwiki.org/browse/XWIKI-12390  \n15:22\u00a0<vmassol>\u00a0btw let me know if you agree wit'h http://jira.xwiki.org/browse/XWIKI-12390?focusedCommentId=87337&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-87337  \n15:22\u00a0<vmassol>\u00a0(I'm starting to work on it now)  \n15:30\u00a0<vmassol>\u00a0done, committing  \n15:39\u00a0<vmassol>\u00a0time is flying and we still have 10 failing tests at http://ci.xwiki.org/job/xwiki-enterprise-test-ui/lastCompletedBuild/testReport/ that we need to fix before we can release  \n15:39\u00a0<vmassol>\u00a0note that I'm on holidays starting tomorrow night  \n15:48\u00a0<mflorea>\u00a0vmassol: now that the top menu uses the refactoring API I need to modify the packager plugin to bundle it. Do you see an other option?  \n15:49\u00a0<vmassol>\u00a0why?  \n15:49\u00a0<mflorea>\u00a0why what? :)  \n15:49\u00a0<vmassol>\u00a0it' s for us to decide if we want the copy/rename/delete actions to be optional or not  \n15:49\u00a0<vmassol>\u00a0they could be  \n15:50\u00a0<vmassol>\u00a0in which case you'd need to declare the refzftoring api as a dep  \n15:50\u00a0<vmassol>\u00a0only in the func test that require it  \n15:50\u00a0<vmassol>\u00a0(and have some #if in the existing menu vm for now till it's made a UIX)  \n15:50\u00a0<mflorea>\u00a0atm there are failing tests in platform because they try to delete wiki pages using the menu  \n15:51\u00a0<vmassol>\u00a0sure but as I say  \n15:51\u00a0<vmassol>\u00a0you can fix this in 2 ways  \n15:51\u00a0<vmassol>\u00a01) what you say  \n15:51\u00a0<mflorea>\u00a0actually the delete action, it doesn't matter if you use th menu or not  \n15:51\u00a0<vmassol>\u00a02) or simply add the refactoring api as a dep of those modules being tested by the failing func tests  \n15:52\u00a0<tmortagne>\u00a0if delete template require refactoring module, refactoring module should be a mandatory module  \n15:52\u00a0<vmassol>\u00a0I definitely don't agree with this  \n15:52\u00a0<vmassol>\u00a0it's not because a template is wrong that we need to continue making it wrong  \n15:52\u00a0<tmortagne>\u00a0you don't agree that delete is a base action ?  \n15:53\u00a0<mflorea>\u00a0there's no delete template  \n15:53\u00a0<tmortagne>\u00a0what is sure is that delete must work with the minimum package  \n15:53\u00a0<mflorea>\u00a0delete is done through the DeleteAction. There is a copy/rename template though  \n15:53\u00a0<vmassol>\u00a0tmortagne: personally I'd put nothing as mandatory  \n15:54\u00a0<tmortagne>\u00a0vmassol: sure let not put any jar in the minimum package  \n15:54\u00a0<mflorea>\u00a0the question is: how should the UI know if the delete feature is present?  \n15:54\u00a0<vmassol>\u00a0packagher plugin should have 0 deps  \n15:54\u00a0<vmassol>\u00a0tmortagne: you're confusing things  \n15:54\u00a0<vmassol>\u00a0packager plugin knows how to bundle deps of hte module being tested  \n15:54\u00a0<vmassol>\u00a0you don't need to hardcode deps for that to work  \n15:56\u00a0<tmortagne>\u00a0vmassol: delete is not optional in the skin so it has to either always work or being modified to be optional, either way 2) is not enough  \n15:56\u00a0<vmassol>\u00a0delete can be optional in the skin in 1 line with an #if  \n15:57\u00a0<vmassol>\u00a0so that's not really rhe issue  \n15:57\u00a0<vmassol>\u00a0it's more what we want to have  \n15:57\u00a0<vmassol>\u00a0in general \"refactoring\" is somrthing that's logical to be optional  \n15:58\u00a0<tmortagne>\u00a0but deleting a page should not be optional if creating one is not  \n15:58\u00a0<mflorea>\u00a0that IF is not that simple, because testing for the presence of the refactoring script service is not enough, you also need to check that there is an implementation present  \n15:58\u00a0<vmassol>\u00a0maybe but then its wrong to be loated in refacotring  \n15:58\u00a0<vmassol>\u00a0\\*located  \n15:59\u00a0<vmassol>\u00a0mflorea: normally script service + impl go together and we consider that if one is present the other is but the SS should never throw exceptions so it should handle that already  \n15:59\u00a0<tmortagne>\u00a0right refactoring module only contains quite low level stuff right now, all things that are low level action in a filesystem  \n16:00\u00a0<tmortagne>\u00a0s/right/right now/  \n16:00\u00a0<vmassol>\u00a0we could also separate create/delete from copy/rename  \n16:01\u00a0<mflorea>\u00a0vmassol: you can have a SS that uses a component that has various implementations. The SS uses the available impl, whatever that is  \n16:01\u00a0<vmassol>\u00a0yes and?  \n16:01\u00a0<vmassol>\u00a0provided there'es an impl it should work  \n16:01\u00a0<mflorea>\u00a0the imple can be in a different module  \n16:01\u00a0<vmassol>\u00a0sure and if it's not found the SS will fail which is ok  \n16:02\u00a0<mflorea>\u00a0it will fail when you try to perform the action, but how do you check that the action can be performed?  \n16:02\u00a0<vmassol>\u00a0bundling a SS without bundling an imp is a bundling error  \n16:02\u00a0<mflorea>\u00a0in order to hide/show the menu entry  \n16:02\u00a0<vmassol>\u00a0provided the scripting api is there it's enough IMO  \n16:03\u00a0<vmassol>\u00a0if whoever prepares the packaging and bundles the SS but doesn't bundle an impl then it's his dault  \n16:03\u00a0<vmassol>\u00a0\\*fault  \n16:03\u00a0<vmassol>\u00a0and in this case I wouldn't mind that the menu entry is there but fails  \n16:03\u00a0<vmassol>\u00a0(with some nice error message ;))  \n16:04\u00a0<mflorea>\u00a0the packager plugin is the one preparing the pacakge  \n16:05\u00a0<vmassol>\u00a0packager plugin currently has some ahrdcoded deps which is bad, we need to remove them  \n16:05\u00a0<vmassol>\u00a0apart from this it looks at the deps from the pom where it's used  \n16:05\u00a0<vmassol>\u00a0and bundles them  \n16:05\u00a0<vmassol>\u00a0(which is what we need to work on getting right)  \n16:06\u00a0<vmassol>\u00a0anyway this is theory, in your case at hand I don't know the dep hierarchy so can't help ATM.  \n16:06\u00a0<mflorea>\u00a0a module X can depend on the refactoring-api, but it doesn't want to enforce an implementation. That is decided when the flavor (XE) is packaged  \n16:06\u00a0<vmassol>\u00a0yes indeed, for apps we put that in the XAR  \n16:06\u00a0<tmortagne>\u00a0mflorea: but you can indicate in the test project that you want the implementation  \n16:06\u00a0<vmassol>\u00a0yeo we also do that in the pom.xml for the func test indeed  \n16:07\u00a0<tmortagne>\u00a0packager plugin will get the test project dependencies  \n16:07\u00a0<vmassol>\u00a0for ex you czn check  \n16:07\u00a0<vmassol>\u00a0we do that for logback  \n16:07\u00a0<mflorea>\u00a0@tmortagne: yes, for scope=test, but should we do this in each module that needs to delete a page  \n16:07\u00a0<mflorea>\u00a0?  \n16:07\u00a0<mflorea>\u00a0deleting a page in functional tests is pretty common  \n16:07\u00a0<vmassol>\u00a0the problem with delete indeed is that the delete action is used a lot in our func test fwk  \n16:08\u00a0<vmassol>\u00a0getUtil().deletePage()  \n16:08\u00a0<mflorea>\u00a0yes  \n16:08\u00a0<tmortagne>\u00a0mflorea: I was toldking about feature in general, for the specific delete use case as I said already it's a base feature and it should work since DeleteAction is not optional  \n16:08\u00a0<vmassol>\u00a0but that can be drawn by the func test fwk  \n16:08\u00a0<vmassol>\u00a0in the modeule where Util is located  \n16:08\u00a0<vmassol>\u00a0s/Util/getUtil()  \n16:08\u00a0<mflorea>\u00a0ok, so we could add the refactoring-default as dep of platform-test for scope=test  \n16:08\u00a0<vmassol>\u00a0it would be normal that this modue has deps on what it requires to wor  \n16:09\u00a0<vmassol>\u00a0\\*work  \n16:09\u00a0<vmassol>\u00a0s/has/had  \n16:09\u00a0<tmortagne>\u00a0it won't work if you put scope=test, scope test if for things used during platform-test project tests  \n16:09\u00a0<mflorea>\u00a0yes, and that is what I want  \n16:10\u00a0<mflorea>\u00a0refactoring-default is otherwise bundled by the XE web pom  \n16:10\u00a0<mflorea>\u00a0ah  \n16:10\u00a0<vmassol>\u00a0you would put compile scope thomas  \n16:10\u00a0<tmortagne>\u00a0right now there is only two ways: the packager plugin itself or as dependency of the test project that use the packager  \n16:11\u00a0<mflorea>\u00a0right  \n16:11\u00a0<mflorea>\u00a0scope=compile  \n16:11\u00a0<tmortagne>\u00a0vmassol: then you need to use scope compile for platform-test too  \n16:11\u00a0<tmortagne>\u00a0and you will end up with platform-test and all its dependencies in the war  \n16:11\u00a0<tmortagne>\u00a0which is not what your want  \n16:12\u00a0<mflorea>\u00a0why would you need scope=compile for platform-test?  \n16:12\u00a0<vmassol>\u00a0yes indeed we need to separate server side needs from client side needs  \n16:12\u00a0<tmortagne>\u00a0it can't come as a dependency of platform-test  \n16:12\u00a0<vmassol>\u00a0client side needs = what is required by the test fwk to work where it executes  \n16:12\u00a0<vmassol>\u00a0server side needs = what gets bundled in xwiki  \n16:12\u00a0<mflorea>\u00a0I see  \n16:12\u00a0<tmortagne>\u00a0whatever the way package work and unless it's hadcode some filter on platform-test there is no way for it to know that platform-test should not go in the package but some of its dependencies should  \n16:13\u00a0<vmassol>\u00a0right  \n16:14\u00a0<vmassol>\u00a0anyway the simplest fro you right now since we're in a hurry is to add your refactoring module as a dep inside the Packager plugin  \n16:14\u00a0<vmassol>\u00a0but we really need to have a serious discussion about that  \n16:14\u00a0<tmortagne>\u00a0IMO as long as DeleteAction which is mandatory trough oldcore require something that something should be mandatory too, we can improve that later  \n16:14\u00a0<vmassol>\u00a0and agree on what is optional or not  \n16:14\u00a0<vmassol>\u00a0I had the same issue with the Wiki modules just a few minutes ago  \n16:14\u00a0<vmassol>\u00a0it's not bundled in packager right now (and that's good IMO) but some VM are using it  \n16:15\u00a0<tmortagne>\u00a0VMs expect many things  \n16:15\u00a0<vmassol>\u00a0(which made it fail in func tests \u00a0- I fixed one VM but there are more)  \n16:15\u00a0<vmassol>\u00a0yes too much IMO  \n16:15\u00a0<tmortagne>\u00a0depends how you see those VM  \n16:15\u00a0<vmassol>\u00a0unless those are optional vms  \n16:15\u00a0<vmassol>\u00a0(which should be brought by extensions)  \n16:16\u00a0<mflorea>\u00a0oldcore cannot depend on refactoring-default because refactoring-default uses oldcore APIs. So that's why I needed refactoring-api (to break the cycle). But this also means that when you depend on oldcore you don't bring the impl for the refactoring  \n16:17\u00a0<vmassol>\u00a0what this shows is that you tried to make delete/copy/renae optional but right now it's a bit hardcoded in oldcore  \n16:17\u00a0<vmassol>\u00a0so the solution is either to extract it from oldcore  \n16:17\u00a0<vmassol>\u00a0or to have those SS inside oldocre  \n16:19\u00a0<vmassol>\u00a0hardcoded in oldcore == the Action and Script APIs are in oldcore and could be taken out if we wanted (we need to want it)  \n16:19\u00a0<vmassol>\u00a0hmm not the script apis actually  \n16:20\u00a0<vmassol>\u00a0BTW I think there's a difference between  \n16:20\u00a0<vmassol>\u00a0A) Deleting a single page without doing any refactoring  \n16:20\u00a0<vmassol>\u00a0B) deleting a page and doing refactoring on all other pages related to it  \n16:20\u00a0<vmassol>\u00a0(same for rename/copy)  \n16:20\u00a0<vmassol>\u00a0A) is probably a model action  \n16:20\u00a0<vmassol>\u00a0while B) is probably a refactoring action  \n16:20\u00a0<vmassol>\u00a0(ie optional)  \n16:21\u00a0<vmassol>\u00a0deleting is possibly a bad example since we don't do anything to other pages (except children)  \n16:21\u00a0<mflorea>\u00a0yes, sure, the refactoring module (B) uses the low level APIs from oldcore (A)  \n16:21\u00a0<vmassol>\u00a0so maybe there's no refactoring for delete  \n16:21\u00a0<vmassol>\u00a0but for copy/rename there is  \n16:23\u00a0<vmassol>\u00a0deleting children could possibly be considered a refacotring though  \n16:28\u00a0<mflorea>\u00a0do you know who starts /home/hudsonagent/.vnc/xstartup on the CI agents? I'd like to restart it to see if it fixes the copy&paste issue on the WYSIWYG test  \n16:29\u00a0<mflorea>\u00a0forget about it  \n16:29\u00a0<vmassol>\u00a0forgotten!  \n16:29\u00a0<woshilapin>\u00a0has quit  \n16:30\u00a0<Guest94410>\u00a0is now known as <cjd>  \n16:31\u00a0<OSIMasson>\u00a0has quit  \n16:35\u00a0<tmortagne>\u00a0mflorea: xvnc is supposed to be started and stopped by each jenkins job when needed  \n16:35\u00a0<mflorea>\u00a0yes  \n16:35\u00a0<OSIMasson>\u00a0has joined #xwiki  \n16:36\u00a0<tmortagne>\u00a0I guess you can look at platform build log to see how it's started  \n16:37\u00a0<tmortagne>\u00a0Starting xvnc [xwiki-enterprise-test-extension] $ vncserver :70 -nolisten tcp -geometry 1280x800 -depth 24 -fp catalogue:/etc/X11/fontpath.d \u00a0New 'X' desktop is vagent-2-1-dev:70 \u00a0Starting applications specified in /home/hudsonagent/.vnc/xstartup Log file is /home/hudsonagent/.vnc/vagent-2-1-dev:70.log  \n16:37\u00a0<tmortagne>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-test-extension/1421/consoleFull  \n16:37\u00a0<tmortagne>\u00a0seems to be \"vncserver :70 -nolisten tcp -geometry 1280x800 -depth 24 -fp catalogue:/etc/X11/fontpath.d \"  \n17:04\u00a0<OSIMasson>\u00a0has quit  \n17:06\u00a0<gsmeria>\u00a0has quit  \n17:09\u00a0<Bugendolf>\u00a0has quit  \n17:12\u00a0<OSIMasson>\u00a0has joined #xwiki  \n17:32\u00a0<OSIMasson>\u00a0has quit  \n17:44\u00a0<OSIMasson>\u00a0has joined #xwiki  \n18:02\u00a0<vmassol>\u00a0ok no more issues scheduled for 7.2M2 ATM  \n18:03\u00a0<vmassol>\u00a0still a lot of issues missing documentation  \n18:03\u00a0<vmassol>\u00a0is someone fixing the ui tests ?  \n18:03\u00a0<vmassol>\u00a0like the UserClassFieldTest?  \n18:04\u00a0<vmassol>\u00a0CompareVersions?  \n18:04\u00a0<vmassol>\u00a0checking http://ci.xwiki.org/job/xwiki-enterprise-test-ui/lastCompletedBuild/org.xwiki.enterprise$xwiki-enterprise-test-ui/testReport/org.xwiki.test.ui/CompareVersionsTest/testUnifiedDiffShowsInlineChanges/  \n18:05\u00a0<vmassol>\u00a0for this test it's ismply that we've removed the parent field in edit mode  \n18:05\u00a0<vmassol>\u00a0fixing  \n18:06\u00a0<vmassol>\u00a0lucky guillaume D\u2026.  \n18:19\u00a0<vmassol>\u00a0hmm I was trying to move CompareVersionsTest to platform (in the skin tests) and noticed that it uses the tag module\u2026  \n18:24\u00a0<KermitTheFragger>\u00a0has quit  \n18:25\u00a0<mflorea>\u00a0has quit  \n18:26\u00a0<ClemensR>\u00a0has quit  \n18:28\u00a0<tmortagne>\u00a0has quit  \n18:30\u00a0<vmassol>\u00a0seems this is done in diff\\_macros.vm..  \n18:36\u00a0<OSIMasson>\u00a0has quit  \n18:40\u00a0<vmassol>\u00a0actually I've found \u00a0solution  \n18:44\u00a0<Trefex>\u00a0has quit  \n19:16\u00a0<abusenius>\u00a0has joined #xwiki  \n19:22\u00a0<Bugendolf>\u00a0has joined #xwiki  \n19:50\u00a0<evalica>\u00a0has quit  \n19:51\u00a0<Enygma`>\u00a0has quit  \n20:41\u00a0<Ramona1>\u00a0has joined #xwiki  \n21:01\u00a0<Ramona1>\u00a0has quit  \n22:01\u00a0<Trefex>\u00a0has joined #xwiki  \n22:34\u00a0<abusenius>\u00a0has quit  \n22:35\u00a0<Trefex>\u00a0has quit  \n23:07\u00a0<xwikiorg\\_guest\\_0>\u00a0has joined #xwiki  \n23:08\u00a0<xwikiorg\\_guest\\_0>\u00a0Hi when I do a forgot password action, the emails are not sent to the respective user it says send\\_error no route to host  \n23:09\u00a0<xwikiorg\\_guest\\_0>\u00a0and NoRouteToHostException  \n23:29\u00a0<woshilapin>\u00a0has joined #xwiki  \n23:34\u00a0<Slashman>\u00a0has quit  \n23:38\u00a0<xwikiorg\\_guest\\_0>\u00a0has quit  \n23:43\u00a0<woshilapin>\u00a0has quit\n"}