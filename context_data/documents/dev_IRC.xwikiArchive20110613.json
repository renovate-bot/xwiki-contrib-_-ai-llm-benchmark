{"id": "dev:IRC.xwikiArchive20110613", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110613", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n01:22\u00a0<asyd>\u00a0grrr, why I can't add edit/classes, as form when I'm not logged as admin while my user belong to group XWikiAdmin  \n01:34\u00a0<sburjan`>\u00a0has joined #xwiki  \n01:38\u00a0<asyd>\u00a0hmm, while I can see com.xpn.xwiki.platform.plugins:xwiki-plugin-watchlist in the list of plugins  \n01:38\u00a0<asyd>\u00a0I can't see the button Watch this space, do I miss something?  \n02:17\u00a0<@sdumitriu>\u00a0asyd: The class editor appears if you switch to Advanced user in your profile  \n02:17\u00a0<@sdumitriu>\u00a0Watch space should be in the top menu, in the space submenu  \n02:31\u00a0<DrLou>\u00a0has quit  \n04:46\u00a0<DrLou>\u00a0has joined #xwiki  \n04:49\u00a0<sdumitriu>\u00a0has quit  \n04:52\u00a0<DrLou>\u00a0has quit  \n07:08\u00a0<vmassol>\u00a0has joined #xwiki  \n07:48\u00a0<vmassol>\u00a0has quit  \n08:39\u00a0<mflorea>\u00a0has joined #xwiki  \n10:02\u00a0<sburjan`>\u00a0has quit  \n10:03\u00a0<sburjan`>\u00a0has joined #xwiki  \n10:04\u00a0<sburjan`>\u00a0has quit  \n10:04\u00a0<sburjan`>\u00a0has joined #xwiki  \n11:53\u00a0<j-saturne>\u00a0has joined #xwiki  \n12:15\u00a0<abusenius>\u00a0has joined #xwiki  \n12:30\u00a0<vmassol>\u00a0has joined #xwiki  \n12:43\u00a0<j-saturne>\u00a0has quit  \n12:48\u00a0<j-saturne>\u00a0has joined #xwiki  \n13:30\u00a0<sdumitriu>\u00a0has joined #xwiki  \n14:01\u00a0<DrLou>\u00a0has joined #xwiki  \n15:12\u00a0<+mflorea>\u00a0sdumitriu: can you check if we have the latest 3.x (3.6.17 according to http://www.mozilla.com/en-US/firefox/all-older.html ) version of FF installed on CI. Thanks.  \n15:14\u00a0<@sdumitriu>\u00a0mflorea: Looking  \n15:15\u00a0<@sdumitriu>\u00a0Yes on a3  \n15:15\u00a0<@sdumitriu>\u00a0Yes on a2  \n15:15\u00a0<@sdumitriu>\u00a0Yes on a1  \n15:15\u00a0<asyd>\u00a0hello there  \n15:16\u00a0<@sdumitriu>\u00a0Hi asyd  \n15:16\u00a0<+mflorea>\u00a0sdumitriu: ok, thanks. It looks FF won't start http://ci.xwiki.org/job/xwiki-enterprise-tests-3.1/org.xwiki.enterprise$xwiki-enterprise-test-wysiwyg/119/testReport/org.xwiki.test.selenium.framework/XWikiSeleniumTestSetup/WYSIWYG\\_Selenium\\_Tests/  \n15:17\u00a0<@sdumitriu>\u00a0/home/hudsonagent/firefox/firefox-bin: error while loading shared libraries: libgtk-x11-2.0.so.0: cannot open shared object file: No such file or directory  \n15:17\u00a0<@sdumitriu>\u00a0On agent3  \n15:17\u00a0<+mflorea>\u00a0yes http://ci.xwiki.org/job/xwiki-enterprise-tests-3.1/org.xwiki.enterprise$xwiki-enterprise-test-ui/119/testReport/org.xwiki.test.ui/AllTests/org\\_xwiki\\_test\\_ui\\_AllTests/ is more explicit  \n15:17\u00a0<@sdumitriu>\u00a0Checking, maybe agent3 doesn't have the required libs  \n15:21\u00a0<@sdumitriu>\u00a0Indeed, agent3 doesn't have libgtk installed  \n15:21\u00a0<@sdumitriu>\u00a0I don't have root access, reporting to sysadmins  \n15:22\u00a0<+mflorea>\u00a0thanks  \n15:25\u00a0<+mflorea>\u00a0sdumitriu: also, right now xwiki-enterprise-tests is in the build queue and agent3 is idle.  \n15:25\u00a0<@sdumitriu>\u00a0mflorea: That one was bound to agent1  \n15:25\u00a0<@sdumitriu>\u00a0Since you wanted to have agent2 free  \n15:25\u00a0<@sdumitriu>\u00a0(your request)  \n15:26\u00a0<+mflorea>\u00a0yes, but both agent2 and 3 are free  \n15:26\u00a0<@sdumitriu>\u00a0Now that we have 3 machines, we can either let it run on agent1 or agent2, or on all agent  \n15:26\u00a0<cjdelisle>\u00a0is agent3 more powerful?  \n15:27\u00a0<cjdelisle>\u00a0ie able to run multiple executirs  \n15:27\u00a0<+mflorea>\u00a0ok, so now agent 3 run any build that is not bound to other agents right?  \n15:27\u00a0<@sdumitriu>\u00a0The rule isn't \"anywhere but on agent 2\", it's \"only on agent 1\"  \n15:27\u00a0<@sdumitriu>\u00a0Yes, agent3 runs faster  \n15:27\u00a0<@sdumitriu>\u00a0The whole platform build took 44 minutes  \n15:27\u00a0<+mflorea>\u00a0then we should make agent 3 run tests  \n15:27\u00a0<@sdumitriu>\u00a0While on the other agents it takes more than an hour, IIRC  \n15:28\u00a0<@sdumitriu>\u00a0We can't let it run tests yet, since firefox doesn't start  \n15:28\u00a0<+mflorea>\u00a0right  \n15:28\u00a0<cjdelisle>\u00a0It makes sense to me that agent3 ought to run multiple executors.  \n15:29\u00a0<cjdelisle>\u00a0In which case we couldn't allow integration tests since we would end up with port number collisions  \n15:31\u00a0<+mflorea>\u00a0IMO the main goal of adding a new agent was to reduce the time spent on running tests. If we keep running tests on agent 1 then we don't gain anything. Test will still be 2h+ behind our commits. I don't feel we have a problem with the time spent building XE or platform. The issue is with the time spent running functional tests, selenium especially.  \n15:32\u00a0<+mflorea>\u00a0IMO we should have the most powerful agent allocated to selenium tests.  \n15:34\u00a0<cjdelisle>\u00a0It's too bad selenium is not better at taking advantage of parallelism  \n15:35\u00a0<+mflorea>\u00a0there is http://selenium-grid.seleniumhq.org/  \n15:36\u00a0<cjdelisle>\u00a0Just spawning multiple browsers on one machine would be much better.  \n15:37\u00a0<cjdelisle>\u00a0I know when my box runs the it's at near idle (it uses about 1 and 1/2 cores) while it runs  \n15:37\u00a0<+mflorea>\u00a0I think selenium-grid allows you run test in parallel on the same machine.  \n15:39\u00a0<cjdelisle>\u00a0Something on my longish term todo list is to start using commons http-client for some of the background tasks (eg delete page) because it's about an order of magnitude faster than waiting for the browser to render a page.  \n15:40\u00a0<+mflorea>\u00a0now, as a side note, I tried to do a trick on the WYSIWYG tests and run tests alternatively on two windows to skip the time the tests wait for the editor to load (at least one second) and I was surprised the total time spent was worse. I suspect that once you do multiple request to XWiki the response time decreases..  \n15:40\u00a0<cjdelisle>\u00a0firefox is single threaded no matter what  \n15:40\u00a0<+mflorea>\u00a0wdym?  \n15:41\u00a0<cjdelisle>\u00a0AFAIK firefox only uses one thread so if it's the bottleneck then multiple windows won't help.  \n15:41\u00a0<+mflorea>\u00a0I expect each window to be controlled by a separate process  \n15:41\u00a0<+mflorea>\u00a0really?  \n15:41\u00a0<+mflorea>\u00a0I'm suprised  \n15:42\u00a0<cjdelisle>\u00a0Not entirely sure on that but at least I don't think it can take advantage of SMP (based on my own experience)  \n15:42\u00a0<cjdelisle>\u00a0Also the storage tests are blisteringly fast in comparison.  \n15:42\u00a0<+mflorea>\u00a0I think you're right. I doubt openWindow from JS creates a new process  \n15:43\u00a0<cjdelisle>\u00a0things that would take 10 seconds in selenium take about 1 second in selenium  \n15:43\u00a0<cjdelisle>\u00a0err storage tests  \n15:43\u00a0<cjdelisle>\u00a0complex things too, rollback, get revision, preview code snippets...  \n15:44\u00a0<cjdelisle>\u00a0selenium-grid is definitely an interesting line of enquiry. I'm not sure how they do multiple browser processes but I think you need to run them as multiple users.  \n15:45\u00a0<+mflorea>\u00a0the part that I think takes the most time is rendering the page in the browser, plus the time spent waiting. Note that the default wait interval is 500ms, so if the condition is true on 501 ms, you wait 1s :)  \n15:45\u00a0<cjdelisle>\u00a0yes, we have a few of those, a few 10 second waiters too  \n15:46\u00a0<+mflorea>\u00a0on the other hand, reducing the wait interval increasing the number of selenium command executed, which is not good either  \n15:46\u00a0<+mflorea>\u00a0s/increasing/increases  \n15:47\u00a0<cjdelisle>\u00a0Rendering is expensive, lots of little http requests, lots of js that runs, lots of CSS, not to mention it's just driving a browser harder than it was ever designed to run.  \n15:47\u00a0<+mflorea>\u00a0yep  \n15:48\u00a0<cjdelisle>\u00a0A wild idea I had was to start one wiki and run xmlrpc, rest, ui all at once.  \n15:48\u00a0<cjdelisle>\u00a0complexity++ though  \n15:49\u00a0<+mflorea>\u00a0indeed  \n15:51\u00a0<+mflorea>\u00a0I'll try to open two FF windows as separate processes and retry the experiment with the WYSIWYG tests.  \n15:52\u00a0<cjdelisle>\u00a0make sure they really are seperate processes, I know when I execute firefox it checks for a pid file and then instructs the running one to open another window.  \n15:52\u00a0<+mflorea>\u00a0I'll check  \n15:53\u00a0<@sdumitriu>\u00a0There's a parameter that does that  \n15:53\u00a0<@sdumitriu>\u00a0firefox -no-remote  \n15:55\u00a0<cjdelisle>\u00a0http://selenium-grid.seleniumhq.org/how\\_it\\_works.html  \n15:56\u00a0<cjdelisle>\u00a0kind of a thread pool for browsers and selenium engines.  \n15:59\u00a0<j-saturne>\u00a0has quit  \n16:01\u00a0<cjdelisle>\u00a0http://testng.org/doc/documentation-main.html#parallel-running  \n16:02\u00a0<j-saturne>\u00a0has joined #xwiki  \n16:13\u00a0<venkatesh>\u00a0has joined #xwiki  \n16:14\u00a0<abusenius>\u00a0has quit  \n16:19\u00a0<pgmjsd>\u00a0has joined #xwiki  \n16:21\u00a0<venkatesh>\u00a0has quit  \n16:25\u00a0<sdumitriu>\u00a0has quit  \n16:30\u00a0<Chami>\u00a0has joined #xwiki  \n16:48\u00a0<vmassol>\u00a0has quit  \n16:52\u00a0<Chami>\u00a0has quit  \n16:52\u00a0<Chami1>\u00a0has joined #xwiki  \n17:00\u00a0<sdumitriu>\u00a0has joined #xwiki  \n17:18\u00a0<Chami1>\u00a0has left #xwiki  \n17:24\u00a0<mflorea>\u00a0has quit  \n18:15\u00a0<npm>\u00a0has quit  \n18:16\u00a0<npm>\u00a0has joined #xwiki  \n18:22\u00a0<pulasthi>\u00a0has joined #xwiki  \n18:22\u00a0<pulasthi>\u00a0has left #xwiki  \n18:51\u00a0<vmassol>\u00a0has joined #xwiki  \n19:32\u00a0<pulasthi>\u00a0has joined #xwiki  \n19:32\u00a0<pulasthi>\u00a0has left #xwiki  \n20:27\u00a0<Enygma`>\u00a0has joined #xwiki  \n20:58\u00a0<abusenius>\u00a0has joined #xwiki  \n21:06\u00a0<Enygma`>\u00a0has quit  \n21:15\u00a0<j-saturne>\u00a0has quit  \n21:27\u00a0<j-saturne>\u00a0has joined #xwiki  \n21:48\u00a0<DrLou>\u00a0has quit  \n21:57\u00a0<mflorea>\u00a0has joined #xwiki  \n22:24\u00a0<Enygma`>\u00a0has joined #xwiki  \n22:59\u00a0<mflorea>\u00a0has quit  \n\n"}