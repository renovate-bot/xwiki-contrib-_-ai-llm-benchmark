{"id": "dev:IRC.xwikiArchive20140306", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140306", "title": "IRC Archive for channel #xwiki on 06 March 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<kdasft>\u00a0has quit  \n00:42\u00a0<vmassol>\u00a0has joined #xwiki  \n00:46\u00a0<vmassol>\u00a0has quit  \n00:49\u00a0<sbaloul2>\u00a0is now known as <sbaloul>  \n00:49\u00a0<sbaloul>\u00a0has quit  \n01:42\u00a0<vmassol>\u00a0has joined #xwiki  \n01:46\u00a0<vmassol>\u00a0has quit  \n02:03\u00a0<xwikibot>\u00a0has joined #xwiki  \n02:42\u00a0<vmassol>\u00a0has joined #xwiki  \n02:46\u00a0<vmassol>\u00a0has quit  \n03:00\u00a0<tekzilla\\_>\u00a0has quit  \n03:07\u00a0<tekzilla>\u00a0has joined #xwiki  \n03:39\u00a0<sdumitriu>\u00a0is now known as <sdumitriu\\_[Away]>  \n03:42\u00a0<vmassol>\u00a0has joined #xwiki  \n03:46\u00a0<vmassol>\u00a0has quit  \n04:42\u00a0<vmassol>\u00a0has joined #xwiki  \n04:46\u00a0<vmassol>\u00a0has quit  \n05:42\u00a0<vmassol>\u00a0has joined #xwiki  \n05:46\u00a0<vmassol>\u00a0has quit  \n06:37\u00a0<vmassol>\u00a0has joined #xwiki  \n06:39\u00a0<vmassol1>\u00a0has joined #xwiki  \n06:39\u00a0<vmassol>\u00a0has quit  \n06:42\u00a0<vmassol1>\u00a0has quit  \n06:42\u00a0<vmassol>\u00a0has joined #xwiki  \n06:46\u00a0<vmassol>\u00a0has quit  \n07:10\u00a0<UCC>\u00a0has joined #xwiki  \n07:15\u00a0<UCC>\u00a0has quit  \n07:17\u00a0<evalica>\u00a0has joined #xwiki  \n07:29\u00a0<msmeria>\u00a0has joined #xwiki  \n07:42\u00a0<vmassol>\u00a0has joined #xwiki  \n07:42\u00a0<sbaloul>\u00a0has joined #xwiki  \n07:46\u00a0<vmassol>\u00a0has quit  \n08:00\u00a0<andreeapopescu>\u00a0has joined #xwiki  \n08:05\u00a0<vmassol>\u00a0has joined #xwiki  \n08:24\u00a0<msmeria>\u00a0has quit  \n08:25\u00a0<msmeria>\u00a0has joined #xwiki  \n08:29\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:35\u00a0<vmassol>\u00a0good morning  \n08:35\u00a0<vmassol>\u00a0oops forgot to send mail about the XWiki Day of today  \n08:36\u00a0<vmassol>\u00a0sending in a few minutes  \n08:36\u00a0<vmassol>\u00a0:)  \n08:36\u00a0<sbaloul>\u00a0good morning vmassol  \n08:42\u00a0<vmassol>\u00a0sent!  \n08:43\u00a0<vmassol>\u00a0sbaloul: see http://dev.xwiki.org/xwiki/bin/view/Community/XWikiDays  \n08:43\u00a0<vmassol>\u00a0(I forgot to explain to you our XWiki Days)  \n08:43\u00a0<sbaloul>\u00a0ok  \n08:57\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:09\u00a0<woshilapin>\u00a0has quit  \n09:14\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n09:15\u00a0<cjd>\u00a0has joined #xwiki  \n09:25\u00a0<vmassol>\u00a0guys I'm going to upgrade xwiki.org to 5.4.2 this morning  \n09:25\u00a0<vmassol>\u00a0I'll put it in readonly mode in a few minutes  \n18:18\u00a0<xwikibot>\u00a0has joined #xwiki  \n18:18\u00a0<fmancinelli>\u00a0has quit  \n18:25\u00a0<sdumitriu\\_[Away]>\u00a0is now known as <sdumitriu>  \n18:33\u00a0<woshilapin>\u00a0has quit  \n18:52\u00a0<sdumitriu>\u00a0is now known as <sdumitriu\\_[Away]>  \n19:11\u00a0<evalica>\u00a0has quit  \n19:28\u00a0<sburjan>\u00a0has joined #xwiki  \n19:46\u00a0<mflorea>\u00a0has quit  \n20:08\u00a0<sdumitriu\\_[Away]>\u00a0is now known as <sdumitriu>  \n20:21\u00a0<sdumitriu>\u00a0has quit  \n20:27\u00a0<sdumitriu>\u00a0has joined #xwiki  \n20:46\u00a0<mogytyr>\u00a0has joined #xwiki  \n21:02\u00a0<sburjan`>\u00a0has joined #xwiki  \n21:03\u00a0<sburjan>\u00a0has quit  \n21:03\u00a0<sburjan`>\u00a0is now known as <sburjan>  \n21:04\u00a0<mogytyr>\u00a0has quit  \n21:51\u00a0<sdumitriu>\u00a0vmassol: Do you have a bit of time to help me with something?  \n21:51\u00a0<sdumitriu>\u00a0When running tests, the behavior of this.mocker.getInstance(ComponentManager.class) changed  \n21:52\u00a0<sdumitriu>\u00a0It used to return a mock, now it returns the MockitoComponentMockingRule itself  \n21:52\u00a0<sdumitriu>\u00a0How do I mock the component manager?  \n21:53\u00a0<vmassol>\u00a0sdumitriu: hi  \n21:53\u00a0<vmassol>\u00a0AFAIR thomas changed the behacvior indeed  \n21:53\u00a0<Denis>\u00a0has quit  \n21:54\u00a0<vmassol>\u00a0so you mean that you have an @Inject CM in your code under test  \n21:54\u00a0<vmassol>\u00a0and that it doesn't return a mock?  \n21:54\u00a0<sdumitriu>\u00a0Yes  \n21:55\u00a0<vmassol>\u00a0we probably have several unit tests doing this  \n21:56\u00a0<vmassol>\u00a0(I don't know the answer, trying to find some existing code)  \n21:57\u00a0<sdumitriu>\u00a0By the way, what's the current favorite, jmock or mockito?  \n21:57\u00a0<vmassol>\u00a0mockito  \n21:57\u00a0<vmassol>\u00a0otehrwise there's an easy solution  \n21:58\u00a0<vmassol>\u00a0which is to register mocks in the returned CM  \n21:59\u00a0<vmassol>\u00a0found one test  \n21:59\u00a0<vmassol>\u00a0DefaultActionManagerTest  \n21:59\u00a0<vmassol>\u00a0from what I see it returns a mock  \n21:59\u00a0<vmassol>\u00a0sine it does this:  \n22:00\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Arrays.asList(viewAction, beforeViewAction));  \n22:00\u00a0<vmassol>\u00a0\\*since  \n22:00\u00a0<vmassol>\u00a0ah mabye it works because it asks for a CM with a hint  \n22:01\u00a0<sdumitriu>\u00a0Right  \n22:01\u00a0<vmassol>\u00a0maybe the problem was introduced in XCOMMONS-455  \n22:01\u00a0<vmassol>\u00a0I'm checking the history of MockitoComponentMockingRule  \n22:02\u00a0<sdumitriu>\u00a0Doing the same :)  \n22:02\u00a0<vmassol>\u00a0ah XCOMMONS-399  \n22:02\u00a0<vmassol>\u00a0that's the one I had in mind  \n22:02\u00a0<vmassol>\u00a0I didn't agree with thomas  \n22:02\u00a0<vmassol>\u00a0at the time  \n22:03\u00a0<vmassol>\u00a0wait  \n22:03\u00a0<vmassol>\u00a0I actually ocnvinced him  \n22:03\u00a0<vmassol>\u00a0:)  \n22:03\u00a0<vmassol>\u00a0and he reverted  \n22:03\u00a0<sdumitriu>\u00a0That's a wontfix  \n22:04\u00a0<vmassol>\u00a0XCOMMONS-455 might be it  \n22:04\u00a0<vmassol>\u00a0sorry I don't have the time to dig more right now  \n22:04\u00a0<vmassol>\u00a0(watching movie)  \n22:04\u00a0<sdumitriu>\u00a0No problem  \n22:05\u00a0<sdumitriu>\u00a0Just wanted a starting point  \n22:05\u00a0<sdumitriu>\u00a0Thank you  \n22:18\u00a0<sdumitriu>\u00a0vmassol: FYI, I \"fixed\" it with this:  \n22:22\u00a0<vmassol>\u00a0you could also not mock the CM and instead mock what you put in it  \n22:23\u00a0<vmassol>\u00a0but anyway we need to look at it since these are just hacks  \n22:23\u00a0<vmassol>\u00a0(sdumitriu)  \n22:24\u00a0<sdumitriu>\u00a0Yeah, but I'm testing different things that the CM does: throw exceptions, return no components, return the components that I have...  \n22:24\u00a0<sdumitriu>\u00a0And I already had it working, it would take me more time to create a mock component that throws exception when being initialized  \n22:25\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n22:25\u00a0<vmassol>\u00a0you could try reverting XCOMMONS-455 and see if it helps  \n22:25\u00a0<vmassol>\u00a0if you don't have the time create a jira issue or send an email so that we don't forget to debug it  \n22:26\u00a0<sdumitriu>\u00a0Fortunately only one test class was actually playing with the CM  \n22:29\u00a0<sdumitriu1>\u00a0has quit  \n22:29\u00a0<vmassol>\u00a0gtg nn  \n22:29\u00a0<vmassol>\u00a0has quit  \n22:30\u00a0<UCC>\u00a0has joined #xwiki  \n22:31\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n23:07\u00a0<sbaloul>\u00a0has quit  \n23:14\u00a0<vmassol>\u00a0has joined #xwiki  \n23:27\u00a0<sdumitriu2>\u00a0has joined #xwiki  \n23:28\u00a0<sdumitriu1>\u00a0has quit  \n23:30\u00a0<UCC>\u00a0has quit  \n23:33\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n23:34\u00a0<sdumitriu2>\u00a0has quit  \n23:37\u00a0<sdumitriu1>\u00a0has quit  \n23:52\u00a0<sdumitriu1>\u00a0has joined #xwiki\n"}