{"id": "dev:IRC.xwikiArchive20100218", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100218", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nmflorea left at 00:07 (Quit: Leaving.  \nbblfish joined #xwiki at 00:31  \nlucaa1 joined #xwiki at 01:09  \nlucaa left at 01:12 (Ping timeout: 240 seconds  \nbblfish left at 01:17 (Ping timeout: 260 seconds  \nLukemon\\_ joined #xwiki at 01:18  \nLukemon left at 01:19 (Ping timeout: 240 seconds  \nLukemon\\_ left at 01:41 (Ping timeout: 240 seconds  \nLukemon\\_ joined #xwiki at 01:42  \nLukemon\\_ left at 01:51 (Quit: Relax, its only ONES and ZEROS!  \nsdumitriu left at 05:12 (Read error: Operation timed out  \nbbc581 left at 06:23 (Remote host closed the connection  \nSvenDowideit left at 07:00 (Ping timeout: 256 seconds  \nhcross1 left at 07:34 (Ping timeout: 240 seconds  \nsilviar left at 07:42 (Quit: ChatZilla 0.9.85 [Firefox 3.5.7/20091221164558]  \nSvenDowiu joined #xwiki at 07:46  \nkibahop joined #xwiki at 07:52  \nhcross1 joined #xwiki at 07:53  \nkibahop left #xwiki at 08:06  \nmflorea joined #xwiki at 08:23  \nvmassol joined #xwiki at 09:10  \nanamarias joined #xwiki at 09:11  \nvmassol - (09:27): mflorea: good morning. One wysiwyg test failing on 2.2 branch: http://hudson.xwiki.org/job/xwiki-product-enterprise-tests-2.2/com.xpn.xwiki.products$xwiki-enterprise-test-wysiwyg/42/testReport/com.xpn.xwiki.it.selenium/TabsTest/testCancelSwitchToWysiwyg/  \nmflorea - (09:27): vmassol: good morning. yes, I know, it's flickering  \nvmassol - (09:28): I think I broke a lot of tests myself on trunk, fixing  \nmflorea - (09:28): I'm handling the two wysiwyg tests failing on trunk  \nvmassol - (09:31): we also have 5 ui tests failing: http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/532/testReport/  \nvmassol - (09:31): CalebJamesDeLisl: hi  \nCalebJamesDeLisl - (09:31): Good morning.  \nvmassol - (09:31): do you think the 3 related to rights could be related to the lightbox changes you did?  \nvmassol - (09:32): the 3 on this page: http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/532/testReport/  \nvmassol - (09:32): (the 3 at the bottom)  \nCalebJamesDeLisl - (09:32): Yes and I have a fix.  \nvmassol - (09:32): ok great  \nvmassol - (09:32): that's the patch you attached yesterday?  \nCalebJamesDeLisl - (09:32): Yes, not really a patch though.  \nCalebJamesDeLisl - (09:33): Sergiu said he'd take a look at it yesterday (I'm new to javascript) But I can commit and let him look at it later.  \nvmassol - (09:33): ko  \nvmassol - (09:33): ok  \nCalebJamesDeLisl - (09:33): I'll do that.  \nanamarias left at 09:37 (Quit: anamarias  \nflorinciu joined #xwiki at 09:38  \nbblfish joined #xwiki at 09:53  \nKermitTheFragger joined #xwiki at 10:02  \nanamarias joined #xwiki at 10:06  \nxenon75 joined #xwiki at 10:09  \nCalebJamesDeLisl - (10:12): I'd like to sandbox Configurable if it has programming rights because it evaluated code which may not, would it be okay to set editor to XWikiGuest then save?  \nCalebJamesDeLisl - (10:12): s/evaluated/evaluates  \ntmortagne joined #xwiki at 10:17  \nsilviar joined #xwiki at 10:19  \narkub joined #xwiki at 10:22  \nEnygma` joined #xwiki at 10:24  \nvmassol - (10:35): tmortagne: there's an Admin space for admin scripts I think on xwiki.org  \ntmortagne - (10:35): vmassol: ok, looking  \nlucaa1 left at 10:40 (Quit: Leaving.  \nvmassol - (10:55): anyone knows how to evaluate a String containing groovy script from within a groovy script?  \nvmassol - (10:55): (I've found evaluate() but it doesn't evaluate in the current context AFAICS)  \ntmortagne - (10:55): vmassol: you could use jsr223 from groovy  \nvmassol - (10:56): maybe the \"${\" + script + \"}\" would work (haven't tried it)  \ntmortagne - (10:56): ha no same thing  \nvmassol - (11:03): I tried this but it doesn't work  \nvmassol - (11:03): def script = \"return x==1\"  \nvmassol - (11:03): def x = 1  \nvmassol - (11:03): if (evaluate(\"${script}\"))  \nvmassol - (11:03): {  \nvmassol - (11:03): \u00a0\u00a0println \"Works...\"  \nvmassol - (11:03): }  \njvdrean joined #xwiki at 11:18  \nrstavro joined #xwiki at 11:20  \nCalebJamesDeLisl - (11:20): Is there a way to pause selenium so I can use xpather to get more elements to assert exist?  \njvdrean left #xwiki at 11:21  \njvdrean joined #xwiki at 11:21  \nCalebJamesDeLisl - (11:21): waitUntilEnterKey or something?  \ntmortagne left at 11:21 (Quit: Leaving.  \nrstavro - (11:22): hello, is there a way to check the number of views for documents? I use $xwiki.statsService.getDocumentStatistics(\"view\",$scope,$period,$interval) but stats keeps documents that have been removed, and I want to list only existing documents  \nrstavro - (11:22): ?  \nmflorea - (11:24): CalebJamesDeLisl: you can try to decrease the speed of the test with getSelenium().setSpeed(\"3000\"); // 3 seconds. and the pause from the selenium remote control (the first browser window that opens). But the best way is to debug the selenium test. Although you have to do some tricks to have firebug enabled for the FF profile used to run the tests.  \ntmortagne joined #xwiki at 11:25  \nCalebJamesDeLisl - (11:25): Thanks, that sounds like what I need.  \nvmassol - (11:25): no  \nvmassol - (11:25): please  \nvmassol - (11:25): no pause  \nvmassol - (11:25): that's bad  \nvmassol - (11:25): jsut do a wait for element  \nmflorea - (11:25): vmassol: he's debugging  \nlucaa joined #xwiki at 11:26  \nmflorea - (11:26): I hope  \nmflorea - (11:26): :)  \nvmassol - (11:26): ah ok then he can run seleinum step by step  \nvmassol - (11:26): (I think)  \nmflorea - (11:26): otherwise yes, he should wait for an element  \nmflorea - (11:27): rstavro: can you check if the document exists before retrieving the stats. AFAIK stats for a document are not deleted when a document is deleted  \ntmortagne left at 11:29 (Client Quit  \ntmortagne joined #xwiki at 11:31  \nmflorea - (11:31): tmortagne: how can I find if a macro is standalone or not? I looked in the macro descriptor and content descriptor but couldn't find anything useful. I think we talked sometime ago about this and I told you that I don't need to know this information. Now I need it. How can I get it?  \ntmortagne - (11:32): mflorea: it has nothing to do with the Macro or MacroDescriptor since most of the macro can work in sandalone or not, what you have in Macro is if the macro support inline  \nrstavro - (11:33): mflorea: well, I need to create the scope at space level, so the solution would be to check if each doc exists after I retreive the stats for all the pages in that space ... this is not quite nice, since I use a livetable to display the results and if I use this solution, my code will be \u00a0\u00a0costly  \nCalebJamesDeLisl - (11:34): \"no please no pause\" haha, yes just debugging, I want to go through with xpather and assert that just about every element on the page must exist :)  \nmflorea - (11:34): tmortagne: found it. thanks! I can use \"supportsInlineMode\"  \narkub left at 11:40 (Quit: Leaving  \nmflorea - (11:41): rstavro: true. This can be considered as a bug. I think we should either delete the stats for the deleted documents or retrieve only the stats for exiting documents. I don't know other solution in you case other than doing the query yourself on the xwiki stats table, but that can be tricky..  \njvelociter joined #xwiki at 11:55  \narkub joined #xwiki at 11:55  \njvelociter - (11:55): hello guys  \nvmassol - (11:56): bb in 20mn  \njvelociter - (11:56): someone knows where the redirection to the login form happens when one has not the needed rights for say edit a doc ?  \nsdumitriu joined #xwiki at 11:56  \nvmassol - (12:01): 3 failign tests left on trunk: http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/533/testReport/  \ntmortagne - (12:05): jvelociter: seen this recently, let me recheck (it's somewhere in MyFormAuthenticator i think)  \ntmortagne - (12:06): jvelociter: \u00a0the redirect itself is done in MyFormAuthenticator#showLogin  \njvelociter - (12:07): tmortagne: ok  \ntmortagne left at 12:07 (Quit: Leaving.  \ntmortagne joined #xwiki at 12:15  \nCalebJamesDeLisl - (12:21): glerouge: re captchas and anonymous commenting; I can do that right after I finish application configurable. I'm going to try not to rewrite anything this time :)  \nglerouge - (12:25): :)  \nglerouge - (12:25): I know you'll have to fight the urge  \njvelociter left at 12:27 (Read error: Connection reset by peer  \njvelociter joined #xwiki at 12:31  \nanamarias left at 12:41 (Quit: anamarias  \nmflorea left at 12:48 (Quit: Leaving.  \nmflorea joined #xwiki at 13:30  \nSvenDowiu is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nanamarias joined #xwiki at 13:51  \nsdumitriu - (14:16): florinciu: Nice, good idea  \nanamarias - (15:15): hi  \nanamarias - (15:15): when importing a XAR, what's the reason some of the pages fail to be imported?  \nanamarias - (15:15): I did an import with history and got these stats:  \nanamarias - (15:15): Import With history  \nanamarias - (15:15): Importing glossaryapplication.xar: Error while importing  \nanamarias - (15:15): 447 Document(s) installed  \nanamarias - (15:15): 0 Document(s) skipped  \nanamarias - (15:15): 14 Document(s) with error  \njvelociter left at 15:16 (Ping timeout: 272 seconds  \nanamarias - (15:17): Actually not all the time, another time only 3 of them failed to get imported  \nvmassol - (15:18): no idea, we'd need the console logs to see what was wrong  \nsdumitriu - (15:19): You should see something in the log  \nvmassol - (15:19): can you tinypaste them?  \nanamarias - (15:19): tomcat log?  \nsdumitriu - (15:19): xwiki log  \nvmassol - (15:19): the xwiki logs  \nvmassol - (15:19): xwiki.log file  \njvelociter joined #xwiki at 15:22  \nflorinciu left at 15:22 (Read error: Connection reset by peer  \nflorinciu joined #xwiki at 15:23  \nanamarias - (15:24): I see one in apache\\_dir/bin/xwiki.log, but doesn't have anything recent in it  \nanamarias - (15:26): is this the one?  \njvelociter left at 15:32 (Ping timeout: 240 seconds  \njvelociter joined #xwiki at 15:38  \nglerouge1 joined #xwiki at 15:57  \nglerouge left at 15:58 (Ping timeout: 264 seconds  \nglerouge1 left #xwiki at 15:59  \nglerouge1 joined #xwiki at 15:59  \nanamarias - (16:04): vmassol: the log's too big (for this import alone, not the whole xwiki.log)  \nanamarias - (16:04): but there are messages like this:  \nanamarias - (16:04): 2010-02-18 16:46:34,141 [http://localhost:8080/glossary/bin/import/XWiki/Import?editor=globaladmin&section=Import] [http://localhost:8080/glossary/bin/import/XWiki/Import?editor=globaladmin&section=Import] WARN \u00a0web.XWikiMessageTool \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- The document [Cockpit2.Translations] is listed as an internationalization document bundle but it does not exist.  \nanamarias - (16:05): this being one of the pages that failed to be imported  \nanamarias - (16:05): however, if I look in the unzipped .xar, there it exists a Cockpit2/Translations.xml file  \nsdumitriu - (16:07): Try importing just the problematic docs  \nsdumitriu - (16:07): And look at the logs  \nanamarias - (16:11): here's a snippet surrounding \u00a0\\*Meaning and Representation Vocabulary.Definition\\* document http://tinypaste.com/179b2/fullscreen.php?hash=c7b1b65a5231cac6ea1b2075adea1cf2&toolbar=true&linenum=true  \nanamarias - (16:11): OK, let me try that too  \nsdumitriu - (16:12): Why did you enable DEBUG logs?  \nanamarias - (16:13): thought it would give out more info. was it more informative on warn ?  \nsdumitriu - (16:13): The error is:  \nsdumitriu - (16:13): ERROR .AbstractFlushingEventListener \u00a0- Could not synchronize database state with session \u00a0org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.xpn.xwiki.objects.LargeStringProperty#<?xml version=\"1.0\" encoding=\"UTF-8\"?>  \nanamarias - (16:14): hmm, and what does it actually mean?  \nsdumitriu - (16:14): Did the document exist before?  \nanamarias - (16:16): I'm not sure  \nanamarias - (16:16): this is the import only for 2 of the docs : \\*Cockpit2.Translations\\* and \\*Meaning and Representation Vocabulary.Definition\\* : http://tinypaste.com/44169/fullscreen.php?hash=2b8730b8d3a2d21f133c05df95e72f9f&toolbar=true&linenum=false  \nanamarias - (16:18): I don't think that it existed, because if I go to : http://localhost:8080/glossary/bin/view/Cockpit2/Translations right now, it says that it doesn't exist: \\*\\*The requested document could not be found. You can edit this page to create it.\\*\\*  \nanamarias - (16:18): however this one \\*Meaning and Representation Vocabulary.Definition\\* exists now  \nanamarias - (16:20): But shouldn't it work even if the documents exist already in the wiki?  \nsdumitriu - (16:25): mflorea: Can you reply to http://dev.xwiki.org/xwiki/bin/view/DesignArchive/NewWysiwygEditorBasedOnGwt?  \nmflorea - (16:26): sdumitriu: let me see  \nsdumitriu - (16:30): anamarias: There's also this:  \nsdumitriu - (16:30): Caused by: java.sql.BatchUpdateException: Incorrect string value: '\\xEF\\xBF\\xBDvoo...' for column 'XWD\\_CONTENT' at row 1  \nsdumitriu - (16:30): This means that the database does not have the right encoding  \nmflorea - (16:48): sdumitriu: I answered, but it's better if he posts questions on the mailing list  \njvelociter left at 16:49 (Ping timeout: 268 seconds  \njvelociter joined #xwiki at 16:55  \nrstavro left at 16:57 (  \njvelociter left at 17:12 (Ping timeout: 268 seconds  \njvelociter joined #xwiki at 17:18  \nanamarias left at 17:30 (Quit: anamarias  \nglerouge1 left at 17:35 (Remote host closed the connection  \nEnygma` left at 17:45 (Quit: Leaving.  \nflorinciu left at 17:47 (Read error: Connection reset by peer  \njvelociter left at 17:48 (Ping timeout: 260 seconds  \njvelociter joined #xwiki at 17:54  \nmariusbutuc joined #xwiki at 18:00  \nmariusbutuc - (18:01): Hi all!  \nmariusbutuc - (18:02): How can I add a specific class to an input generated by $doc.displayEdit()  \nanamarias joined #xwiki at 18:04  \nsdumitriu - (18:04): mariusbutuc: You can't  \nsdumitriu - (18:05): You can either put a span with that class around it, and work your way from there  \nsdumitriu - (18:05): Or manually display the field  \nmariusbutuc - (18:05): ok, thanks :)  \nsilviar left #xwiki at 18:15  \nxenon75 left at 18:18 (Quit: Leaving.  \narkub left at 18:25 (Quit: Leaving  \njvelociter left at 18:33 (Read error: Connection reset by peer  \nmariusbutuc left #xwiki at 18:43  \nmflorea - (19:05): vmassol: I have seconds thoughts about http://jira.xwiki.org/jira/browse/XWIKI-4884 . The WYSIWYG editor shouldn't know about the normal form of a specific wiki syntax. Even if {{macroName}}\\ncontent\\n{{/macroName}} is the normal form for xwiki/2.0 syntax, this might not be the same for other syntaxes that support macros. Also, the XHTML annotations are syntax independent. The WYSIWYG editor expects the following format: <!--startmacro:MacroN  \nvmassol - (19:07): it's the same for all syntaxes  \nvmassol - (19:07): since it's done in MacroTransformation  \nvmassol - (19:08): what we could do I guess is give you the tools though  \nmflorea - (19:08): still, I think these new lines should be ignored when parsing and generated when rendering, if we agree to enforce the normal form  \nvmassol - (19:08): (if that's the pb)  \nvmassol - (19:09): what's not normal is 1) that when you edit a macro you get empty lines and 2) you generate syntax that is not canonical  \nmflorea - (19:09): I have the tools, I just don't feel it's right to filter the macro content on the client  \nvmassol - (19:09): yes that's why I was saying we could give you the tools  \nvmassol - (19:10): (I haven't thought about it though)  \nvmassol - (19:10): I'd like to have tmortagne's opinion  \nmflorea - (19:10): vmassol: I'm not generating syntax. I'm just sending you the content entered by the user  \nvmassol - (19:11): btw that content should be normalized automatically  \nvmassol - (19:11): since the xwiki syntax renderer will be called  \nvmassol - (19:12): hmm actually we probably don't change anything in the renderer  \nvmassol - (19:12): but maybe we could  \nvmassol - (19:12): but that'll still leave the issue of editing existing macros  \nvmassol - (19:12): (and the empty lines)  \nlucaa - (19:13): +1, wysiwyg should not have special rules for canonical form of some syntax or another. its job is to handle XHTML, which is what it does, it shouldn't be aware of other syntax than this...  \nvmassol - (19:13): -1 for the having empty lines in the wysiwyg  \nlucaa - (19:13): vmassol: don't send them :)  \nmflorea - (19:13): vmassol: sure  \nvmassol - (19:13): I don't care who does it  \nvmassol - (19:14): or rather I care  \nmflorea - (19:14): but the question is where is the right place to do it  \nKermitTheFragger left at 19:14 (Quit: Leaving  \nvmassol - (19:14): but we need to find where it's best  \nlucaa left at 19:14 (Quit: Leaving.  \nvmassol - (19:14): that's why we need to talk to tmortagne  \nvmassol - (19:15): to see if the parser could remove extra lines  \ntmortagne - (19:15): (otp)  \nvmassol - (19:15): ah yes with jv ;)  \nvmassol - (19:15): let's wait for when tmortagne is avail  \nmflorea - (19:15): IMO this is something for the rendering. When I write {[m}}\\nfoo\\n{{/m}} I expect the xwiki/2.0 parser to detect a macro m with \"foo\" as content, not \"\\nfoo\\n\"  \nvmassol - (19:15): yes I agree  \nmflorea - (19:16): it's the same as with = Foo = the title is \"Foo\" not \" Foo \"  \ntmortagne - (19:23): readinf  \ntmortagne - (19:23): reading  \ntmortagne - (19:27): IMO we should move the newline in macro handling from macro transformations to xwiki/2.0 parser/renderer, even without talking about the WYSIWYG it's not right to do it the way it is now the content in a MacroBlock should not be modified before giving it to the Macro  \ntmortagne - (19:27): it's parser job to decide what is meaningful and what is not  \ntmortagne - (19:27): so yes it should be changed  \ntmortagne - (19:28): (vmassol, mflorea)  \nmflorea - (19:29): ok, so should we move http://jira.xwiki.org/jira/browse/XWIKI-4884 to the rendering module?  \ntmortagne - (19:29): mflorea: yes  \nmflorea - (19:30): ok, I'll do it  \ntmortagne - (19:30): i will assign it to me, it's not very difficult to do  \nmflorea - (19:30): cool  \nmflorea - (19:31): done  \nmflorea - (19:33): ok, thanks tmortagne, I have to leave now  \nmflorea left at 19:33 (Quit: Leaving.  \nhcross1 left at 19:35 (Ping timeout: 245 seconds  \nhcross1 joined #xwiki at 19:53  \nglerouge joined #xwiki at 19:59  \nglerouge - (19:59): hi there  \nglerouge - (20:00): anyone knows whether the tag right is linked to the edit right ?  \nglerouge - (20:01): I guess it is since people can't tag articles when they have the comment right but they can when they have the edit right...  \nsdumitriu - (20:01): Yes it is  \nglerouge - (20:01): is there a rationale for coupling it with edit rather than comment right ?  \nsdumitriu - (20:02): What's commenting got to do with tags?  \nglerouge - (20:03): what's editing got to do with tags ?  \nsdumitriu - (20:05): You change the document  \nglerouge - (20:05): so do you with a comment  \nglerouge - (20:06): is there a way to change that easily ?  \nglerouge - (20:06): ie, by modifying a vm ?  \nsdumitriu - (20:06): Nope  \nglerouge - (20:06): ok  \nsdumitriu - (20:07): You can comment if you have edit right  \nglerouge - (20:07): ok, thx for the answer  \nglerouge - (20:07): I'm off for today, bye  \nglerouge left at 20:07 (Quit: Leaving.  \nsilviar joined #xwiki at 20:09  \nanamarias left at 20:20 (Quit: anamarias  \ntmortagne - (20:21): sdumitriu: what glerouge mean is that you can comment if you don't have edit right  \nCalebJamesDeLisl - (20:28): The trouble as I see it is editing tags means editing objects whereas commenting is just adding an object (of a specific type) which is a bit safer to allow.  \ntmortagne - (20:31): CalebJamesDeLisl: i agree when you comment you can't break someone else comment  \nCalebJamesDeLisl - (20:33): Maybe make tags discreet objects then it would make it safer. I'd also be for making comments and tags get added to the user page and have a field pointing to the document they should show up on, but that's a big change.  \nCalebJamesDeLisl - (20:36): On that note I'm going to call it a day. See ya tomorrow.  \nanamarias joined #xwiki at 20:38  \nanamarias left at 20:38 (Client Quit  \nanamarias joined #xwiki at 20:39  \nsilviar left at 21:04 (Read error: Connection reset by peer  \nsilviar joined #xwiki at 21:04  \nanamarias left at 21:06 (Remote host closed the connection  \nanamarias joined #xwiki at 21:06  \nxenon75 joined #xwiki at 21:25  \nflorinciu joined #xwiki at 21:31  \nflorinciu left at 21:35 (Quit: ChatZilla 0.9.86-rdmsoft [XULRunner 1.9.0.15/2009101909]  \nflorinciu joined #xwiki at 21:35  \nanamarias left at 21:49 (Quit: anamarias  \nsdumitriu - (21:54): tmortagne: XWIKI-4910  \nsdumitriu - (21:54): pasted or parsed?  \nmflorea joined #xwiki at 21:54  \nbblfish left at 21:54 (Quit: bblfish  \nvmassol - (21:54): pasta?  \ntmortagne - (21:55): sdumitriu: yes, fixing it  \ntmortagne left at 21:56 (Quit: Leaving.  \njvdrean left at 22:04 (Quit: Leaving.  \nbbc581 joined #xwiki at 22:27  \nvmassol left at 22:40 (Quit: Leaving.  \nvmassol joined #xwiki at 22:41  \nvmassol left at 22:45 (Client Quit  \nxenon75 left at 23:04 (Quit: Leaving.  \njvdrean joined #xwiki at 23:05  \nflorinciu left at 23:11 (Quit: ChatZilla 0.9.86-rdmsoft [XULRunner 1.9.0.15/2009101909]  \nmflorea left at 23:23 (Quit: Leaving.  \nvmassol joined #xwiki at 23:35  \nvmassol left at 23:42 (Quit: Leaving.  \nbblfish joined #xwiki at 23:59  \n\n"}