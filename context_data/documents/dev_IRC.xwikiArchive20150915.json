{"id": "dev:IRC.xwikiArchive20150915", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150915", "title": "IRC Archive for channel #xwiki on 15 September 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<gsmeria>\u00a0has joined #xwiki  \n00:48\u00a0<gsmeria>\u00a0has quit  \n03:49\u00a0<Denis1>\u00a0has joined #xwiki  \n04:12\u00a0<Denis1>\u00a0has quit  \n05:02\u00a0<cpe>\u00a0has quit  \n05:03\u00a0<cpe>\u00a0has joined #xwiki  \n05:03\u00a0<cpe>\u00a0has quit  \n05:33\u00a0<[d\\_\\_d]>\u00a0has quit  \n05:33\u00a0<mflorea>\u00a0has joined #xwiki  \n05:37\u00a0<[d\\_\\_d]>\u00a0has joined #xwiki  \n06:24\u00a0<Ramona1>\u00a0has joined #xwiki  \n07:41\u00a0<Ramona1>\u00a0has quit  \n07:42\u00a0<Ramona1>\u00a0has joined #xwiki  \n08:02\u00a0<vmassol>\u00a0has joined #xwiki  \n08:33\u00a0<silverdr1p>\u00a0has quit  \n08:34\u00a0<silverdrop>\u00a0has joined #xwiki  \n08:52\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n09:06\u00a0<mflorea>\u00a0has quit  \n09:10\u00a0<gsmeria>\u00a0has joined #xwiki  \n09:16\u00a0<woshilapin>\u00a0has quit  \n09:33\u00a0<mflorea>\u00a0has joined #xwiki  \n09:39\u00a0<msmeria>\u00a0has joined #xwiki  \n09:44\u00a0<cjd>\u00a0has joined #xwiki  \n09:48\u00a0<Denis>\u00a0has joined #xwiki  \n09:49\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:00\u00a0<woshilapin>\u00a0has joined #xwiki  \n10:13\u00a0<vmassol>\u00a0good morning everyone  \n10:13\u00a0<cjd>\u00a0gm  \n10:13\u00a0<vmassol>\u00a0warming up for the release...  \n10:13\u00a0<vmassol>\u00a0mflorea: any ETA on your side?  \n10:13\u00a0<cjd>\u00a0seem to have lost this channel somehow  \n10:14\u00a0<vmassol>\u00a02 issues left!  \n10:14\u00a0<vmassol>\u00a0checking ci  \n10:14\u00a0<vmassol>\u00a0hmm not nice, got some new failures from yesterday  \n10:14\u00a0<vmassol>\u00a0wow a lot  \n10:15\u00a0<vmassol>\u00a0had only 1 flicker in platform yesterday and now got 7 failures: http://ci.xwiki.org/job/xwiki-platform/lastCompletedBuild/testReport/  \n10:15\u00a0<vmassol>\u00a0$item  \n10:15\u00a0<vmassol>\u00a0see http://ci.xwiki.org/job/xwiki-platform/lastCompletedBuild/org.xwiki.platform$xwiki-platform-flamingo-skin-test-tests/testReport/org.xwiki.flamingo.test.ui/CreatePageAndSpaceTest/testCreateUIInteraction/  \n10:15\u00a0<vmassol>\u00a0Found [$item.label/Test Area/], was expecting [/Test Area/]  \n10:15\u00a0<vmassol>\u00a0so my guess is that a recent commit caused this  \n10:15\u00a0<vmassol>\u00a0(in the breadcrumb area)  \n10:16\u00a0<vmassol>\u00a0mflorea: \u00a0I guess this is one of your commits since you're the only one to have committed so far this morning :)  \n10:16\u00a0<vmassol>\u00a0hehe  \n10:19\u00a0<mflorea>\u00a0yes, I'm on it  \n10:19\u00a0<vmassol>\u00a0k  \n10:20\u00a0<vmassol>\u00a0you should claim them :)  \n10:20\u00a0<vmassol>\u00a0you can claim a full build here for ex: http://ci.xwiki.org/job/xwiki-platform/lastCompletedBuild/  \n10:23\u00a0<Slashman>\u00a0has joined #xwiki  \n10:25\u00a0<vmassol>\u00a0gsmeria: good morning, you may be interested in taking http://jira.xwiki.org/browse/XWIKI-12565 for 7.3  \n10:28\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:30\u00a0<gsmeria>\u00a0vmassol: hello. yes, doing it right now  \n10:30\u00a0<vmassol>\u00a0gsmeria: please check my comments too :)  \n10:30\u00a0<vmassol>\u00a0thanks!  \n10:30\u00a0<vmassol>\u00a0cool  \n10:39\u00a0<mflorea>\u00a0vmassol: I'm hesitating about one thing. In order to make the breadcrumb reusable (whenever you want to display the location of a document) I've modified it to use the icon theme for the Home icon instead of the hardcoded GlyphIcon font (this way it works in Colibri too)  \n10:40\u00a0<vmassol>\u00a0ok  \n10:40\u00a0<mflorea>\u00a0now, obviously $services.icon is not mandatory so I fallback on the pretty name of the wiki then the serice is not available  \n10:40\u00a0<vmassol>\u00a0ok  \n10:40\u00a0<vmassol>\u00a0sounds good so far :)  \n10:41\u00a0<mflorea>\u00a0so in platform tests you get xwiki / A / B / C / D  \n10:41\u00a0<mflorea>\u00a0(\"xwiki\" because there's no descriptor to specify a pretty name)  \n10:41\u00a0<vmassol>\u00a0hmm couldn't we fallback on an icon from resources/icons?  \n10:42\u00a0<mflorea>\u00a0I guess I can, but let me check if there is one  \n10:42\u00a0<vmassol>\u00a0(we could add one if we want that)  \n10:43\u00a0<vmassol>\u00a0(even if there's none now, haven't checked)  \n10:43\u00a0<mflorea>\u00a0otherwise I'd have to modify the tests to assert \"xwiki / A / B / ...\" instead of \"/ A / B / ...\" which is not nice (and the reason I hesitated)  \n10:43\u00a0<mflorea>\u00a0let me check what icons we have  \n10:43\u00a0<vmassol>\u00a0yes \"xwiki\" is not very nice  \n10:43\u00a0<vmassol>\u00a0which is why I was suggesting a default icon instead  \n10:47\u00a0<mflorea>\u00a0there is a favicon (X logo) in resources/icons/xwiki and the house icon in resources/icons/silk. I guess I'll just use the silk icon as a fallback for now, but I'm not sure how long we will keep bundling silk in default war  \n10:48\u00a0<mflorea>\u00a0once we drop colibri we may decide to drop silk too  \n10:48\u00a0<vmassol>\u00a0everything in resources is supposed to be public level (ie same as APIs) I guess  \n10:48\u00a0<vmassol>\u00a0so we'll need to be careful about removing any of them probabmy  \n10:48\u00a0<vmassol>\u00a0\\*probably  \n10:48\u00a0<vmassol>\u00a0we could make silk optional one day though  \n10:49\u00a0<mflorea>\u00a0yes, anyway, I'll just use it for now as a fallback  \n10:49\u00a0<vmassol>\u00a0we probably need a better api  \n10:49\u00a0<vmassol>\u00a0to isolate us from the location  \n10:49\u00a0<mflorea>\u00a0yes, that would be nice  \n10:49\u00a0<mflorea>\u00a0but that is the icon theme  \n10:49\u00a0<mflorea>\u00a0only the icon name is an API  \n10:50\u00a0<vmassol>\u00a0I mean for getSkinFile()  \n10:50\u00a0<mflorea>\u00a0ah  \n10:50\u00a0<vmassol>\u00a0(and the like)  \n10:50\u00a0<mflorea>\u00a0yes  \n10:56\u00a0<evalica>\u00a0has joined #xwiki  \n11:03\u00a0<Ramona1>\u00a0has quit  \n11:03\u00a0<Ramona3>\u00a0has joined #xwiki  \n11:05\u00a0<silverdrop>\u00a0has quit  \n11:05\u00a0<martinus\\_\\_>\u00a0has joined #xwiki  \n11:06\u00a0<silverdrop>\u00a0has joined #xwiki  \n11:06\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:09\u00a0<martinus\\_\\_>\u00a0hi vmassol , is it possible to alter xwiki.store.cache.capacity without restarting xwiki ?  \n11:09\u00a0<vmassol>\u00a0yes should work  \n11:10\u00a0<vmassol>\u00a0by calling explicitly initCache() on the cache store  \n11:10\u00a0<vmassol>\u00a0a bit complex though  \n11:10\u00a0<martinus\\_\\_>\u00a0ok. I'll do this by restarting the wiki then :)  \n11:10\u00a0<martinus\\_\\_>\u00a0thanks !  \n11:10\u00a0<vmassol>\u00a0yes much simpler  \n11:51\u00a0<cjd>\u00a0vmassol: We have a proposal for a video authoring extension, is design.xwiki.org the appropriate place to put the proposal wiki page  \n11:51\u00a0<cjd>\u00a0?  \n11:52\u00a0<vmassol>\u00a0cjd: sure  \n11:52\u00a0<cjd>\u00a0ok  \n11:52\u00a0<vmassol>\u00a0then you can have a mail referencing that page to propose it on the list  \n11:52\u00a0<vmassol>\u00a0to generate discussions, ideas, feedbacks, etc  \n11:52\u00a0<cjd>\u00a0right, it's a little \"different\" since it's not exactly proposing a patch to XWiki but rather an (optional) extension  \n11:53\u00a0<vmassol>\u00a0that's ok, design is for everyone, provided it has some relationship to xwiki :)  \n11:53\u00a0<cjd>\u00a0ok thanks  \n11:56\u00a0<tmortagne>\u00a0video authoring extension, nice  \n11:59\u00a0<Ramona3>\u00a0has quit  \n12:06\u00a0<Ramona1>\u00a0has joined #xwiki  \n13:08\u00a0<vmassol>\u00a0very interesting  \n13:08\u00a0<vmassol>\u00a0I'm running my code for http://jira.xwiki.org/browse/XWIKI-12558 on Administration Tests  \n13:09\u00a0<vmassol>\u00a0and the first long findElement I get is this one:  \n13:09\u00a0<vmassol>\u00a0https://gist.githubusercontent.com/vmassol/7dfeeeef242b1125ebe2/raw/27bf7abd4c9b36fc159ecbf98a8f3b7b586c1bdb/gistfile1.txt  \n13:09\u00a0<vmassol>\u00a0so apparently it's clickSaveAndView() that took long in this case  \n13:10\u00a0<vmassol>\u00a0and probably the @FindBy:  \n13:10\u00a0<vmassol>\u00a0@FindBy(name = \"action\\_save\")  \n13:10\u00a0<vmassol>\u00a0now need to find out why  \n13:12\u00a0<vmassol>\u00a0mflorea: re https://github.com/xwiki/xwiki-platform/commit/211f7e5c266a910c6ea0fea39ec1f7000f5c5aaa  \n13:12\u00a0<vmassol>\u00a0you may want to review the BreadcrumbTest that I have modified yetserday  \n13:12\u00a0<vmassol>\u00a0it may not work anymore  \n13:12\u00a0<vmassol>\u00a0re active class  \n13:12\u00a0<vmassol>\u00a0I had to fix some PO to take into account the new active class  \n13:13\u00a0<mflorea>\u00a0ok, I'll check  \n13:15\u00a0<Denis>\u00a0has quit  \n13:16\u00a0<vmassol>\u00a0thx  \n13:16\u00a0<vmassol>\u00a0I can find what I modified  \n13:17\u00a0<vmassol>\u00a0here mflorea: https://github.com/xwiki/xwiki-platform/commit/4b11e4b4c0ff8a834f2bc50373e43377285f89e2  \n13:17\u00a0<vmassol>\u00a0the second file  \n13:17\u00a0<vmassol>\u00a0BreadcrumbElement.java  \n13:17\u00a0<mflorea>\u00a0ok, thanks  \n13:17\u00a0<vmassol>\u00a0hmm it should still work actually  \n13:17\u00a0<vmassol>\u00a0maybe not the <A> I don't know  \n13:19\u00a0<mflorea>\u00a0yes, the A may not be present, better check . = 'text'  \n13:19\u00a0<vmassol>\u00a0it didn't work after the change of yesterdsay  \n13:19\u00a0<vmassol>\u00a0for some reason I couldn't fathom  \n13:19\u00a0<vmassol>\u00a0so I had to add the /a to make it work  \n13:19\u00a0<woshilapin>\u00a0has quit  \n13:20\u00a0<vmassol>\u00a0\\*change of yesterdy = the change you did before yesterday and that made me fix the test  \n13:20\u00a0<vmassol>\u00a0maybe it was a mac thing, I don't know  \n13:20\u00a0<vmassol>\u00a0but text() spanning several elements didn't work for me  \n13:21\u00a0<mflorea>\u00a0it should work  \n13:21\u00a0<mflorea>\u00a0I've used it in several places  \n13:21\u00a0<vmassol>\u00a0I tried hard to make it work :)  \n13:21\u00a0<vmassol>\u00a0but I couldn't get to the bottom of it  \n13:22\u00a0<mflorea>\u00a0I'll check  \n13:22\u00a0<vmassol>\u00a0k  \n13:25\u00a0<Ramona1>\u00a0has quit  \n13:25\u00a0<Ramona1>\u00a0has joined #xwiki  \n13:33\u00a0<vmassol>\u00a0hmm what's interesintg is that I've ran it again and this time I didn't get the long timeout...  \n13:35\u00a0<mflorea>\u00a0is $services.security core or not? If it's not, then it's a pain to use $xwiki.hasAccess in templates and $services.security in wiki pages or to always do the fallback  \n13:36\u00a0<mflorea>\u00a0the issue I'm having is that $services.security is not available in Flamingo Skin functional tests  \n13:37\u00a0<vmassol>\u00a0yes that's why I asked the same question for other modules in the past weeks :)  \n13:37\u00a0<vmassol>\u00a0we need to decide what's core or not indeed  \n13:37\u00a0<vmassol>\u00a0I'd say that $services.security should be core  \n13:37\u00a0<mflorea>\u00a0a skin needs security/authorization. I'm sure we check for use rights in various places of the UI  \n13:38\u00a0<vmassol>\u00a0since $xwiki.hasAccess is core and $services.security is a replacement for it  \n13:38\u00a0<mflorea>\u00a0now the question is whether $xwiki.hasAccessLevel is core and $services.security is optional  \n13:38\u00a0<mflorea>\u00a0I agree it's a replacement, so it should be core  \n13:38\u00a0<vmassol>\u00a0yes  \n13:39\u00a0<vmassol>\u00a0you should ask on the list probably and then add it to PaclaheMojo with some comment explaining that it's core  \n13:39\u00a0<vmassol>\u00a0PackageMojo  \n13:40\u00a0<vmassol>\u00a0so it means there are no other core modules depending on it ATM  \n13:40\u00a0<vmassol>\u00a0which is a bit strange  \n13:40\u00a0<vmassol>\u00a0actually not strange  \n13:40\u00a0<vmassol>\u00a0since this is used in VM or wiki pages only  \n13:40\u00a0<vmassol>\u00a0and all wiki pages are not core  \n13:40\u00a0<vmassol>\u00a0we probabmy just haven't used in templates yet  \n13:41\u00a0<vmassol>\u00a0FTR I added this the other day in PackageMojo:  \n13:41\u00a0<vmassol>\u00a0\u00a0\u00a0// Velocity Scripting for Model Modules is also core (it's used a bit everywhere in VMs, pages, etc).  \n13:41\u00a0<mflorea>\u00a0I've used it in templates, but there are no functional tests in platform for them  \n13:41\u00a0<vmassol>\u00a0ideally it should be a dep of the module \u00a0containing the VMs  \n13:41\u00a0<vmassol>\u00a0and only the VM module should be added in PackageMojo  \n13:42\u00a0<mflorea>\u00a0yes, we it's platform-web and we don't put deps on it  \n13:42\u00a0<vmassol>\u00a0there's something we need to fix there  \n13:42\u00a0<mflorea>\u00a0s/we/but  \n13:42\u00a0<vmassol>\u00a0we could have a template module separate from web too  \n13:43\u00a0<vmassol>\u00a0in any case there's sometyhing to do  \n13:43\u00a0<vmassol>\u00a0either start adding deps on web or something else  \n13:43\u00a0<vmassol>\u00a0for now  \n13:43\u00a0<vmassol>\u00a0you could add it to PackageMojo with some comments so that when we fix this later we can remove the deps from PackageMojo  \n13:43\u00a0<mflorea>\u00a0we need to decide for 7.2RC1 first  \n13:44\u00a0<vmassol>\u00a0as I said, I'd send a proposal modile  \n13:44\u00a0<vmassol>\u00a0s/modile/mail  \n13:44\u00a0<vmassol>\u00a0+ do the change in PackageMojo at the same time to progress  \n13:44\u00a0<vmassol>\u00a0the proposal is to make sure we're synced on what's core  \n13:45\u00a0<ClemensR>\u00a0has joined #xwiki  \n13:45\u00a0<mflorea>\u00a0ok, I'll do that  \n13:49\u00a0<Denis>\u00a0has joined #xwiki  \n13:59\u00a0<vmassol>\u00a0mflorea: are you on http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-flamingo-skin-test-tests/1864/testReport/ ?  \n14:00\u00a0<mflorea>\u00a0yes  \n14:00\u00a0<vmassol>\u00a0k  \n14:00\u00a0<vmassol>\u00a0Enygma`: didn(t you fix http://ci.xwiki.org/job/xwiki-enterprise-test-ui/lastCompletedBuild/org.xwiki.enterprise$xwiki-enterprise-test-ui/testReport/org.xwiki.test.ui/CopyPageTest/testCopyOverwritePage/ ?  \n14:01\u00a0<Enygma`>\u00a02-3 times before  \n14:01\u00a0<Enygma`>\u00a0finishing a commit...  \n14:02\u00a0<vmassol>\u00a0very weird error: http://ci.xwiki.org/job/xwiki-platform-testrelease/25/consoleFull  \n14:02\u00a0<vmassol>\u00a0[ERROR] java.lang.NoClassDefFoundError: Could not initialize class sun.util.calendar.ZoneInfoFile  \n14:02\u00a0<vmassol>\u00a0and  \n14:02\u00a0<vmassol>\u00a0Caused by: sun.nio.fs.UnixException: No such file or directory  \n14:03\u00a0<vmassol>\u00a0by the jvm...  \n14:03\u00a0<vmassol>\u00a0\"Command line was: /home/hudsonagent/jdk1.7.0\\_71/jre/../bin/javadoc -J-Xmx300m @options @packages\"  \n14:04\u00a0<vmassol>\u00a0not sure if the bug is in the jdk or in jenkins...  \n14:23\u00a0<\\_cjd>\u00a0has joined #xwiki  \n14:24\u00a0<cjd>\u00a0has quit  \n14:26\u00a0<vmassol>\u00a0so only one issue left for RC1  \n14:26\u00a0<vmassol>\u00a0XWIKI-12176  \n14:27\u00a0<\\_cjd>\u00a0is now known as <cjd>  \n14:28\u00a0<martinus\\_\\_>\u00a0vmassol, do you know if it's expected to have to wait for several minutes the xwiki container (tomcat) to shutdown and finally stop ?  \n14:29\u00a0<martinus\\_\\_>\u00a0xwiki 6.4.4  \n14:29\u00a0<vmassol>\u00a0martinus\\_\\_: locally it takes a few seconds for me  \n14:29\u00a0<vmassol>\u00a0not minutes  \n14:29\u00a0<martinus\\_\\_>\u00a0ok so there is something wrong  \n14:30\u00a0<martinus\\_\\_>\u00a0I did a kill -3 during the 'hang' period  \n14:30\u00a0<martinus\\_\\_>\u00a0it last about 3min  \n14:30\u00a0<martinus\\_\\_>\u00a0after what the process finally exits  \n14:30\u00a0<vmassol>\u00a0you should create a jira issue telling us how to reproduce and show your logs  \n14:32\u00a0<martinus\\_\\_>\u00a0reproducing might be not easy :/  \n14:32\u00a0<martinus\\_\\_>\u00a0seems very specific to our case  \n14:32\u00a0<vmassol>\u00a0yes probably  \n14:33\u00a0<vmassol>\u00a0what you should do  \n14:33\u00a0<vmassol>\u00a0is take several jvm thread dumps during the shutdown  \n14:33\u00a0<vmassol>\u00a0to see what it's doing  \n14:33\u00a0<martinus\\_\\_>\u00a0yes took two of them  \n14:33\u00a0<vmassol>\u00a0probably stopping infinispan  \n14:34\u00a0<martinus\\_\\_>\u00a0what should I look for in priority in the thread dump ?  \n14:34\u00a0<vmassol>\u00a0what the threads are working on  \n14:35\u00a0<vmassol>\u00a0if you find the same in several dumps then it means it's taking time \u00a0doing that  \n14:35\u00a0<martinus\\_\\_>\u00a0who do I know it is actually working  \n14:35\u00a0<vmassol>\u00a0the threads will tell you the code \u00a0they're executing  \n14:37\u00a0<martinus\\_\\_>\u00a0Ok I was looking for an answer like \"look at the keyword xxx\" or something like that :D  \n14:37\u00a0<vmassol>\u00a0you can paste the dump in a gist, on pastebin, etc  \n14:44\u00a0<martinus\\_\\_>\u00a0vmassol, http://pastebin.com/806UppT0 => what do you think ?  \n14:46\u00a0<martinus\\_\\_>\u00a0vmassol, I noticed the tomcat process is heating the cpu (100%) during this period too  \n14:46\u00a0<vmassol>\u00a0this is not enough  \n14:47\u00a0<vmassol>\u00a0we need several thread dumps to compare them  \n14:47\u00a0<vmassol>\u00a0and we need to know when each thread dump was taken  \n14:47\u00a0<vmassol>\u00a0(ie how long after the stop was issued)  \n14:47\u00a0<martinus\\_\\_>\u00a0you mean something like 20 , here we have ~3  \n14:47\u00a0<vmassol>\u00a0ok didn't notice there were 3  \n14:47\u00a0<vmassol>\u00a0for ex how long was the first dump taken after shutdown?  \n14:48\u00a0<vmassol>\u00a0\"2015-09-15 14:27:01\"  \n14:48\u00a0<martinus\\_\\_>\u00a0this is the dump timestamp but you're right, I can gather the stop command timestamp too  \n14:48\u00a0<vmassol>\u00a0it shows xwiki started stopping  \n14:48\u00a0<vmassol>\u00a0but wasn't far in the process  \n14:48\u00a0<vmassol>\u00a0since solr thread, lucene thread, mail thread were still running  \n14:48\u00a0<vmassol>\u00a0it started cleaning components  \n14:49\u00a0<martinus\\_\\_>\u00a015-Sep-2015 14:24:40.890 INFO [main] org.apache.catalina.core.StandardService.stopInternal Stopping service Catalina  \n14:49\u00a0<martinus\\_\\_>\u00a0so 3 min before the dump  \n14:50\u00a0<vmassol>\u00a0so the first dump was taken 3 minutes after stopping xwiki?  \n14:50\u00a0<martinus\\_\\_>\u00a0yes that's it  \n14:50\u00a0<vmassol>\u00a0hmm ok  \n14:50\u00a0<martinus\\_\\_>\u00a0as I was waiting I decided to do a kill -3  \n14:50\u00a0<martinus\\_\\_>\u00a0(several)  \n14:51\u00a0<vmassol>\u00a0hold on  \n14:53\u00a0<vmassol>\u00a0ok found something interesting  \n14:53\u00a0<vmassol>\u00a0the 3 dumps have this in common: https://gist.githubusercontent.com/vmassol/b776184826810554f400/raw/1646153518ac0f20e091b59d709462749213277f/gistfile1.txt  \n14:53\u00a0<vmassol>\u00a0and this doesn't seem to be moving  \n14:54\u00a0<vmassol>\u00a0so the stop seems stalled  \n14:54\u00a0<vmassol>\u00a0one thing that could be done to diagnose more  \n14:54\u00a0<vmassol>\u00a0would be to add a log in the component disposal  \n14:54\u00a0<vmassol>\u00a0checking if we have one so that you could enabme it  \n14:54\u00a0<vmassol>\u00a0to see which components is taking time to be disposed of  \n14:54\u00a0<martinus\\_\\_>\u00a0okat  \n14:54\u00a0<martinus\\_\\_>\u00a0okay  \n14:55\u00a0<vmassol>\u00a0yes I see: SHUTDOWN\\_LOGGER.debug(\"Disposing component [{}]...\", instance.getClass().getName());  \n14:55\u00a0<vmassol>\u00a0so you should enable debug logs for \"org.xwiki.shutdown  \n14:56\u00a0<vmassol>\u00a0here: http://dev.xwiki.org/xwiki/bin/view/Community/Debugging#HLoggingshutdownoperations  \n14:56\u00a0<vmassol>\u00a0what version of xwiki are you running?  \n14:57\u00a0<martinus\\_\\_>\u00a0v6.4.4. I'm going to enable debug for shutdown  \n14:59\u00a0<martinus\\_\\_>\u00a0now I have to stop the container , start it and stop again to see the result or changing logback.xml is live ?  \n15:00\u00a0<martinus\\_\\_>\u00a0restart to take effect. like written in the documentation.  \n15:00\u00a0<vmassol>\u00a0ok  \n15:00\u00a0<vmassol>\u00a0there' s ana dmin UI for logs too  \n15:00\u00a0<vmassol>\u00a0(dynamic)  \n15:00\u00a0<martinus\\_\\_>\u00a0ah yes ?  \n15:00\u00a0<martinus\\_\\_>\u00a0I love dynamic things :)  \n15:01\u00a0<martinus\\_\\_>\u00a0found it  \n15:01\u00a0<martinus\\_\\_>\u00a0in the admin panel  \n15:04\u00a0<martinus\\_\\_>\u00a0vmassol, when I select debug for the property and hit \"set\", The level stays to the previous level  \n15:04\u00a0<vmassol>\u00a0martinus\\_\\_: hmm maybe it doesn't work anymore, tmortagne?  \n15:05\u00a0<martinus\\_\\_>\u00a0the bot is in a loop it seems  \n15:05\u00a0<vmassol>\u00a0hmm someone started a large copy  \n15:05\u00a0<msmeria>\u00a0sorry for the spam. won't be long now :)  \n15:05\u00a0<vmassol>\u00a0without stopping the bot  \n15:06\u00a0<vmassol>\u00a0thanks cjd  \n15:06\u00a0<martinus\\_\\_>\u00a0cjd our hero  \n15:06\u00a0<cjd>\u00a0\u00a0\u00a0/mode +q xwikibot!\\*@\\* \u00a0\u00a0\u00a0\u00a0<-- the magic word  \n15:06\u00a0<cjd>\u00a0and -q is the opposite  \n15:06\u00a0<vmassol>\u00a0msmeria: please put back irc when you're done  \n15:06\u00a0<vmassol>\u00a0\\*irc logging  \n15:06\u00a0<msmeria>\u00a0vmassol: I think it's done. I don't know how to activate it again  \n15:07\u00a0<msmeria>\u00a0+ I don't think I have the rights  \n15:07\u00a0<cjd>\u00a0it's an IRC server mode for silencing flooders and trolls, just happens to be quicker and easier than stopping and starting the bot whenever there's something big to push into the wiki  \n15:07\u00a0<cjd>\u00a0vmassol: only you, me and sdumitriu can change modes on the channel  \n15:08\u00a0<cjd>\u00a0and that's not trivial to change :)  \n15:09\u00a0<martinus\\_\\_>\u00a0vmassol, interesting, when stopping this time it took only 10s  \n15:09\u00a0<martinus\\_\\_>\u00a0maybe there is a memory issue  \n15:09\u00a0<martinus\\_\\_>\u00a0in which case the shutdown is way longer  \n15:10\u00a0<vmassol>\u00a0martinus\\_\\_: have you let XWii run the same amount of time as before?  \n15:10\u00a0<vmassol>\u00a010s is what i get (but I also don't let XWiki run very long)  \n15:10\u00a0<martinus\\_\\_>\u00a0it was running for weeks  \n15:11\u00a0<vmassol>\u00a0so could be either memory being low indeed  \n15:11\u00a0<vmassol>\u00a0or  \n15:11\u00a0<martinus\\_\\_>\u00a0what's the link between shutdown and memory being low ?  \n15:11\u00a0<vmassol>\u00a0some caches being large and shutting down taking long because of that for some reason  \n15:11\u00a0<vmassol>\u00a0low memory indeed would seem more logical  \n15:11\u00a0<vmassol>\u00a0no idea  \n15:11\u00a0<vmassol>\u00a0some components impleent dispose()  \n15:12\u00a0<vmassol>\u00a0so when the componnet manager is stopped it calls dispose() on all compoentns implementing it  \n15:12\u00a0<martinus\\_\\_>\u00a0I see this is in the logs  \n15:12\u00a0<martinus\\_\\_>\u00a0indeed  \n15:12\u00a0<martinus\\_\\_>\u00a0we'll see next time  \n15:12\u00a0<vmassol>\u00a0(ie components that implement Disposable  \n15:15\u00a0<vmassol>\u00a0yeah not more issues for RC1! :) well done  \n15:15\u00a0<martinus\\_\\_>\u00a0vmassol, more intersting would be to know what could be the effects when kill -9 the thing in such a state  \n15:15\u00a0<vmassol>\u00a0now let's fix those tests and we can release :)  \n15:15\u00a0<vmassol>\u00a0martinus\\_\\_: anything can happen :)  \n15:15\u00a0<vmassol>\u00a0(should be safe for the most part I guess)  \n15:16\u00a0<vmassol>\u00a0possibly some corrupted indexes  \n15:16\u00a0<Denis>\u00a0has quit  \n15:16\u00a0<vmassol>\u00a0like corrupted lucene index  \n15:16\u00a0<martinus\\_\\_>\u00a0vmassol, because I studied in school to wait for clean shutdown (and I can wait) but a lot of the ppl are killing ;)  \n15:16\u00a0<vmassol>\u00a0if lucene was indexing when you do the kill -9  \n15:16\u00a0<vmassol>\u00a0then you can have a corrupted index  \n15:17\u00a0<martinus\\_\\_>\u00a0and during the disposal ?  \n15:17\u00a0<vmassol>\u00a0the dispose() will stop lucene nicely  \n15:17\u00a0<vmassol>\u00a0so it'll finish its indexing in progress for ex  \n15:17\u00a0<vmassol>\u00a0before stopping  \n15:17\u00a0<vmassol>\u00a0brb  \n15:17\u00a0<tmortagne>\u00a0martinus\\_\\_: always better to wait but killing XWiki is supposed to be safe for most part (use of session for the database, I think solr have some protection too, etc)  \n15:18\u00a0<tmortagne>\u00a0the main risk is more loosing something you started (like a page that did not finished to save)  \n15:20\u00a0<martinus\\_\\_>\u00a0thanks tmortagne , vmassol  \n15:21\u00a0<martinus\\_\\_>\u00a0If it happen again I'll get the info in the debug  \n15:21\u00a0<tmortagne>\u00a0martinus\\_\\_: that would be great :)  \n15:22\u00a0<martinus\\_\\_>\u00a0tmortagne, be sure you'll get aware of it when it happen :D lol  \n15:22\u00a0<martinus\\_\\_>\u00a0have a nice afernoon  \n15:23\u00a0<Enygma`>\u00a0We have no more opened issues for 7.2RC1  \n15:23\u00a0<OSIMasson>\u00a0has joined #xwiki  \n15:23\u00a0<Enygma`>\u00a0on the tests side: 2 usual flickers (mail+wysiwyg) and \u00a0some breadcrumbs tests that should go away when the current build \u00a0finishes. No real issue, just tests.  \n15:23\u00a0<Denis>\u00a0has joined #xwiki  \n15:23\u00a0<Enygma`>\u00a0I`m getting ready to build the release  \n15:28\u00a0<vmassol>\u00a0cool!  \n15:38\u00a0<gdelhumeau>\u00a0then I hold my commit  \n15:47\u00a0<Ramona1>\u00a0has quit  \n15:56\u00a0<Enygma`>\u00a0starting  \n16:29\u00a0<gsmeria>\u00a0has left #xwiki  \n16:36\u00a0<tmortagne>\u00a0has quit  \n16:52\u00a0<\\_cjd>\u00a0has joined #xwiki  \n16:55\u00a0<woshilapin>\u00a0has joined #xwiki  \n16:55\u00a0<cjd>\u00a0has quit  \n17:00\u00a0<\\_cjd>\u00a0is now known as <cjd>  \n17:21\u00a0<Denis>\u00a0has quit  \n17:26\u00a0<Denis>\u00a0has joined #xwiki  \n17:27\u00a0<Enygma`>\u00a0build complete  \n17:27\u00a0<vmassol>\u00a0:)  \n17:28\u00a0<gdelhumeau>\u00a0congrats  \n17:31\u00a0<msmeria>\u00a0has quit  \n17:42\u00a0<KermitTheFragger>\u00a0has quit  \n17:53\u00a0<ClemensR>\u00a0has left #xwiki  \n17:57\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:10\u00a0<gdelhumeau>\u00a0has quit  \n18:21\u00a0<cjd>\u00a0has quit  \n18:23\u00a0<Ramona1>\u00a0has joined #xwiki  \n18:37\u00a0<Ramona1>\u00a0has quit  \n18:43\u00a0<mflorea>\u00a0has quit  \n18:44\u00a0<woshilapin>\u00a0Hi dev, can somebody release XFF extension on the Nexus for me (I got a Release failed  \n18:44\u00a0<woshilapin>\u00a0Nexus returned an error: ERROR 403: Forbidden)  \n18:50\u00a0<tmortagne>\u00a0has quit  \n19:01\u00a0<woshilapin>\u00a0Another question about the release of an extension, I will create some documentation on e.x.o  \n19:02\u00a0<woshilapin>\u00a0However, I have 2 JAR that will be released, should I make 2 pages or I can document everything on one page  \n19:02\u00a0<woshilapin>\u00a0?  \n19:07\u00a0<woshilapin>\u00a0OK, given the information on this page (http://extensions.xwiki.org/xwiki/bin/view/ExtensionCode/ImportExtension), I guess that 2 page of documentation is the answer  \n19:17\u00a0<cjd>\u00a0has joined #xwiki  \n19:45\u00a0<Denis>\u00a0has quit  \n19:56\u00a0<Enygma`>\u00a0has quit  \n19:58\u00a0<evalica>\u00a0has quit  \n20:18\u00a0<cjd>\u00a0has quit  \n20:18\u00a0<cjd>\u00a0has joined #xwiki  \n20:55\u00a0<\\_cjd>\u00a0has joined #xwiki  \n20:56\u00a0<cjd>\u00a0has quit  \n20:57\u00a0<\\_cjd>\u00a0is now known as <cjd>  \n21:28\u00a0<Slashman>\u00a0has quit\n"}