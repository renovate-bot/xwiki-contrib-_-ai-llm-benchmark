{"id": "dev:IRC.xwikiArchive20150918", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150918", "title": "IRC Archive for channel #xwiki on 18 September 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Dr\\_Cain>\u00a0has quit  \n00:04\u00a0<Dr\\_Cain>\u00a0has joined #xwiki  \n00:23\u00a0<Slashman>\u00a0has quit  \n01:42\u00a0<OSIMasson>\u00a0has joined #xwiki  \n01:46\u00a0<OSIMasson>\u00a0has quit  \n02:45\u00a0<martinus\\_\\_>\u00a0has quit  \n03:04\u00a0<martinus\\_\\_>\u00a0has joined #xwiki  \n03:49\u00a0<Denis>\u00a0has joined #xwiki  \n04:10\u00a0<Denis>\u00a0has quit  \n04:59\u00a0<cpe>\u00a0has quit  \n04:59\u00a0<cpe>\u00a0has joined #xwiki  \n07:57\u00a0<gsmeria>\u00a0has joined #xwiki  \n08:01\u00a0<Trefex>\u00a0has joined #xwiki  \n08:19\u00a0<vmassol>\u00a0has joined #xwiki  \n08:22\u00a0<gsmeria>\u00a0has quit  \n08:24\u00a0<gsmeria>\u00a0has joined #xwiki  \n08:31\u00a0<woshilapin>\u00a0has quit  \n08:31\u00a0<Ramona2>\u00a0has joined #xwiki  \n08:36\u00a0<Denis>\u00a0has joined #xwiki  \n08:57\u00a0<msmeria>\u00a0has joined #xwiki  \n09:04\u00a0<cjd>\u00a0has quit  \n09:08\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:14\u00a0<vmassol>\u00a0goooood moooornnniiinnnng xwikiiiiiii! :)  \n09:21\u00a0<mflorea>\u00a0has joined #xwiki  \n09:23\u00a0<Trefex>\u00a0has quit  \n09:39\u00a0<martinus\\_\\_>\u00a0is now known as <martin-h>  \n09:51\u00a0<vmassol>\u00a0mflorea: good morning  \n09:51\u00a0<mflorea>\u00a0vmassol: good morning  \n09:51\u00a0<vmassol>\u00a0I have a bug in AWM in my build (from yesterday morning I think)  \n09:51\u00a0<vmassol>\u00a0when I edit my app  \n09:52\u00a0<vmassol>\u00a0in the breadcrumb I see the Code space as the parent and when I click on it the page doesn't exist  \n09:53\u00a0<vmassol>\u00a0As a user, I was expecting to be able to go back to the main app page  \n09:53\u00a0<vmassol>\u00a0(I know why it doesn't work, just sayinf that we have a little inconsistency)  \n09:53\u00a0<vmassol>\u00a0there's no way to go back to my app after I click \"edit app\" if I don't click \"next\"  \n09:54\u00a0<mflorea>\u00a0I don't necessarily agree. When you create t he app you are informed that there are two \"spaces\" a code space and a data space  \n09:54\u00a0<mflorea>\u00a0the app code is obviously in the code space  \n09:54\u00a0<vmassol>\u00a0put yourself in the shoe of a user  \n09:54\u00a0<mflorea>\u00a0I'm referring to the breadcrmb  \n09:54\u00a0<vmassol>\u00a0so there are 2 problems:  \n09:54\u00a0<vmassol>\u00a01) clicking the parent leads to a non existent page  \n09:54\u00a0<vmassol>\u00a02) no way to cancel app editing  \n09:55\u00a0<mflorea>\u00a0I agree with both, but I don't think the fix is related to the breadcrumbs  \n09:55\u00a0<mflorea>\u00a01) AWM should probably create a home page for the code space  \n09:55\u00a0<mflorea>\u00a02) the edit form should have a Cancel button  \n09:56\u00a0<vmassol>\u00a03) in the future move the code space under the app space  \n09:56\u00a0<vmassol>\u00a0this would solve the breadcrumb too  \n09:56\u00a0<vmassol>\u00a0another thing that would be nice: ability to rename an app  \n09:56\u00a0<mflorea>\u00a0yes, using nested spaces would be nice, it's the way to go anyway  \n09:56\u00a0<silverdrop>\u00a0has quit  \n09:57\u00a0<silverdrop>\u00a0has joined #xwiki  \n09:57\u00a0<mflorea>\u00a0re rename yes, as it doesn't involve only space rename (maybe it should, but it's not the case now)  \n09:58\u00a0<gsmeria>\u00a0has left #xwiki  \n10:01\u00a0<vmassol>\u00a0found another problem  \n10:02\u00a0<vmassol>\u00a0using a DBlist  \n10:03\u00a0<vmassol>\u00a0https://www.evernote.com/l/AHePZ1D4ARlNmLRypjeOMK\\_YGqxbpChPcVs  \n10:03\u00a0<vmassol>\u00a0I can see my items but there's also a Blog.BlogIntroduction there even when I use the app  \n10:03\u00a0<vmassol>\u00a0and create new entries  \n10:05\u00a0<vmassol>\u00a0https://www.evernote.com/l/AHdKQvAUwSVOppknKyrBIZ1On5xOfCpY2gA  \n10:06\u00a0<mflorea>\u00a0it comes from the template, when you create/edit the app the default value is saved in the template. Just edit the app and put a different default value  \n10:07\u00a0<vmassol>\u00a0where is that?  \n10:07\u00a0<silverdrop>\u00a0has quit  \n10:07\u00a0<vmassol>\u00a0I don't see any place for default value  \n10:07\u00a0<mflorea>\u00a0the value displayed below \"State\"  \n10:07\u00a0<silverdrop>\u00a0has joined #xwiki  \n10:08\u00a0<vmassol>\u00a0which screen?  \n10:08\u00a0<mflorea>\u00a0first screenshot  \n10:08\u00a0<vmassol>\u00a0oh I see  \n10:08\u00a0<vmassol>\u00a0wow  \n10:08\u00a0<vmassol>\u00a0I would never have thought about it  \n10:24\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:29\u00a0<woshilapin>\u00a0has joined #xwiki  \n11:45\u00a0<msmeria1>\u00a0has joined #xwiki  \n11:48\u00a0<msmeria>\u00a0has quit  \n11:48\u00a0<msmeria>\u00a0has joined #xwiki  \n11:51\u00a0<msmeria1>\u00a0has quit  \n12:02\u00a0<msmeria>\u00a0has quit  \n12:03\u00a0<msmeria>\u00a0has joined #xwiki  \n12:05\u00a0<msmeria1>\u00a0has joined #xwiki  \n12:05\u00a0<msmeria2>\u00a0has joined #xwiki  \n12:08\u00a0<msmeria>\u00a0has quit  \n12:09\u00a0<msmeria1>\u00a0has quit  \n12:13\u00a0<Signum>\u00a0Does anyone know why the initial (upgrade/installation) wizard comes up after every restart of Jetty?  \n12:19\u00a0<vmassol>\u00a0hi Signum  \n12:19\u00a0<vmassol>\u00a0are you skipping it every time or you ran it till the end?  \n12:22\u00a0<Signum>\u00a0I ran it til the end. For all three wikis that I created. Main, IT and Project. And I didn't upgrade anything. So I wonder why it thinks it has to run.  \n12:22\u00a0<Signum>\u00a0Perhaps an issue with Jetty? Or with using PostgreSQL? I saw that there used to be issues with PostgreSQL schemas. But I found nothing in the documentation or bug reports that explain this.  \n12:22\u00a0<vmassol>\u00a0hmm that's strange. No I don't tihnk it's related to the DB  \n12:23\u00a0<vmassol>\u00a0once it's executed, the state is recorded in a file on the file system and it shouldn't run again normally  \n12:24\u00a0<vmassol>\u00a0maybe tmortagne or mflorea can help you more debug this because I'm not an expert. I know there's a file in your data direcdtory in jobs/status/distribution/status.xml  \n12:24\u00a0<vmassol>\u00a0this is where the state of the DW for the main wiki is located \u00a0I think but I'm not sure how to read this file  \n12:27\u00a0<gsmeria>\u00a0has quit  \n12:29\u00a0<vmassol>\u00a0(going for lunch, bb in 30mn)  \n12:35\u00a0<Signum>\u00a0Thanks. I'm running 7.1.2 here but don't see any jobs/status/\u2026 directory.  \n12:35\u00a0<Signum>\u00a0File system permissions seem to be good though. The app runs as \"jetty\" and as that user I can happily create files.  \n12:37\u00a0<gsmeria>\u00a0has joined #xwiki  \n12:47\u00a0<gsmeria>\u00a0has quit  \n12:49\u00a0<gsmeria>\u00a0has joined #xwiki  \n12:51\u00a0<vmassol>\u00a0Signum: the jobs directory is inside your data directory  \n12:53\u00a0<Signum>\u00a0Thanks. Found it in /var/cache/jetty8/data  \n12:53\u00a0<mflorea>\u00a0vmassol: I'll looking for the place where we specify that the environment.permanentDirectory should be set (as otherwise it ends up in some temp folder of the servlet container)  \n12:54\u00a0<mflorea>\u00a0s/I'll/I'm  \n12:54\u00a0<vmassol>\u00a0mflorea: it's in xwiki.properties  \n12:54\u00a0<mflorea>\u00a0yes, but how does the user know it has to set it?  \n12:55\u00a0<mflorea>\u00a0I'm looking in the admin guide and I don't see any mention of it  \n12:55\u00a0<vmassol>\u00a0ah you mean the warning displayed  \n12:55\u00a0<vmassol>\u00a0where we set it?  \n12:55\u00a0<vmassol>\u00a0hmmmm  \n12:55\u00a0<mflorea>\u00a0I'm not aware of any warning  \n12:55\u00a0<vmassol>\u00a0if it's not set  \n12:55\u00a0<vmassol>\u00a0then we display a warning in the console  \n12:56\u00a0<mflorea>\u00a0ok, good  \n12:56\u00a0<vmassol>\u00a0we have this also: http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Configuration#HConfiguringDirectories  \n12:56\u00a0<Signum>\u00a0vmassol: This looks suspicious: https://gist.github.com/anonymous/495764c6b8f29d884f33#file-status-xml-L129 - seems to be a lot of \"CANCELED\" there.  \n12:57\u00a0<vmassol>\u00a0Signum: \u00a0indeed, I don't have this locally, I have FINISHED values  \n12:57\u00a0<mflorea>\u00a0Signum, you should set environment.permanentDirectory in xwiki.properties to some folder that is not going to be deleted after a server restart of OS restart  \n12:58\u00a0<mflorea>\u00a0the date is 2015-09-17 13:23:41.31 UTC  \n12:58\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:58\u00a0<mflorea>\u00a0it's from yesterday  \n12:58\u00a0<Signum>\u00a0mflorea: I believe that /var/cache is not removed during a reboot on Debian/Ubuntu systems.  \n12:59\u00a0<mflorea>\u00a0ok, it's good then  \n12:59\u00a0<evalica>\u00a0has joined #xwiki  \n12:59\u00a0<mflorea>\u00a0is the start/end date correct? This happens today or yesterday?  \n13:00\u00a0<Signum>\u00a0I restarted yesterday. And ran the wizard right after starting.  \n13:01\u00a0<mflorea>\u00a0so the date is ok right? And yesterday when you saw the Distribution Wizard, you clicked Continue? or Later/Never?  \n13:02\u00a0<Signum>\u00a0Just to be safe I'll restart Jetty now and go through the wizard making sure that I click on \"Continue\" everywhere.  \n13:03\u00a0<mflorea>\u00a0maybe you can also take some screenshot of the steps, if they don't contain sensitive info  \n13:03\u00a0<mflorea>\u00a0DW steps  \n13:03\u00a0<Signum>\u00a0will do  \n13:04\u00a0<mflorea>\u00a0at the end, check if the status in /var/cache is updated  \n13:04\u00a0<mflorea>\u00a0at least the start/end date  \n13:14\u00a0<Denis>\u00a0has quit  \n13:15\u00a0<Signum>\u00a0yes, the start/end dates have been updated. And this time (just while I was recording it as a screencast) after the restart the system was not showing the wizard. I don't get it. I could swear this is exactly the way I did before. I'm trying again.  \n13:15\u00a0<vmassol>\u00a0:)  \n13:16\u00a0\\*\u00a0Signum doesn't like non-deterministic effects  \n13:22\u00a0<Signum>\u00a0Nope, can't reproduce it. Meh.  \n13:22\u00a0<vmassol>\u00a0good :)  \n13:22\u00a0<Signum>\u00a0Waste of time for both of us. Thanks anyway.  \n13:22\u00a0<Signum>\u00a0I should keep recording everything I do\u2026 so I have proof about what I did wrong in the first place.  \n13:23\u00a0<Signum>\u00a0Just thought that \"xwiki.store.migration=1\" may be the cause. But I assume that it just enabled the check whether an upgrade/migration is necessary.  \n13:23\u00a0<Signum>\u00a0Funny\u2026 I just logged in as \"Admin\" and suddenly the wizard appears again!  \n13:29\u00a0<Signum>\u00a0The logs say \"no permanent directory configured - using temporary directory\". Is that a problem if it's in /var/cache?  \n13:32\u00a0<vmassol>\u00a0see the xwiki.properties file  \n13:33\u00a0<vmassol>\u00a0and search for environment.permanentDirectory  \n13:33\u00a0<vmassol>\u00a0there's some doc there  \n13:33\u00a0<mflorea>\u00a0the \"cache\" part in /var/cache doesn't sound permanent to me, but the warning it more about the fact that you didn't set the temporary directory explicitly.  \n13:33\u00a0<Denis>\u00a0has joined #xwiki  \n13:34\u00a0<vmassol>\u00a0it's really important that it points to a permanent location  \n13:34\u00a0<vmassol>\u00a0it's well documented  \n13:34\u00a0<mflorea>\u00a0so for instance, if the default value changes after an upgrade, you may loose important info. Best is to set it explicitly. This way you don't have to know what is the default value  \n13:34\u00a0<vmassol>\u00a0https://github.com/xwiki/xwiki-platform/blob/6ec9ef6049b15c2f5f939e1ae087927a3fe657e2/xwiki-platform-tools/xwiki-platform-tool-configuration-resources/src/main/resources/xwiki.properties.vm#L71-L86  \n13:45\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n13:54\u00a0<vmassol>\u00a0too bad that we don't have any REST API to get xproperties in a search. http://localhost:8080/xwiki/rest/wikis/query?q=property.StatesCode.StatesClass.state:Washington&wikis=xwiki will only return the doc names\u2026  \n14:03\u00a0<Slashman>\u00a0has joined #xwiki  \n14:06\u00a0<OSIMasson>\u00a0has joined #xwiki  \n14:16\u00a0\\*\u00a0Signum sets a permanent directory  \n14:51\u00a0<cjd>\u00a0has joined #xwiki  \n15:29\u00a0<Signum>\u00a0Oh, noes. I moved the data directory and configured it properly. But now the data in /var/cache/\u2026 is no longer there. And guess what - our backup system has failed last night. Time to say goodbye to my content and start from scratch.  \n15:34\u00a0<vmassol>\u00a0ouch  \n15:34\u00a0<vmassol>\u00a0although I don't understand why you had the data a few minutes ago and now it's no longer there  \n15:36\u00a0<msmeria2>\u00a0has quit  \n15:41\u00a0<gsmeria>\u00a0has left #xwiki  \n15:47\u00a0<Signum>\u00a0I defined the directory. Stopped Jetty. Moved the data into the new directory. And after starting Jetty it was gone. Can't tell what happened. I feel like a dork.  \n15:47\u00a0<Signum>\u00a0I mean\u2026 it's not my first day on the console.  \n15:47\u00a0<vmassol>\u00a0I'm sorry for you  \n15:47\u00a0<vmassol>\u00a0can't think of anything that could have caused this  \n16:01\u00a0<OSIMasson>\u00a0has quit  \n16:03\u00a0<Signum>\u00a0I relied on our backup system if anything would happen. That was my main mistake. I should have checked.  \n16:07\u00a0<Signum>\u00a0Oh, wait\u2026 the pages should still be there in the database.  \n16:10\u00a0<Denis>\u00a0has quit  \n16:27\u00a0<OSIMasson>\u00a0has joined #xwiki  \n17:29\u00a0<Ramona2>\u00a0has quit  \n17:40\u00a0<KermitTheFragger>\u00a0has quit  \n17:45\u00a0<OSIMasson>\u00a0has quit  \n18:09\u00a0<tmortagne>\u00a0has quit  \n18:10\u00a0<mflorea1>\u00a0has joined #xwiki  \n18:14\u00a0<mflorea>\u00a0has quit  \n18:14\u00a0<OSIMasson>\u00a0has joined #xwiki  \n18:18\u00a0<cjd>\u00a0has quit  \n18:20\u00a0<cjd>\u00a0has joined #xwiki  \n18:35\u00a0<woshilapin>\u00a0has quit  \n18:58\u00a0<cjd>\u00a0has quit  \n19:06\u00a0<cjd>\u00a0has joined #xwiki  \n19:11\u00a0<cjd>\u00a0has quit  \n19:13\u00a0<evalica>\u00a0has quit  \n19:13\u00a0<Enygma`>\u00a0has quit  \n19:24\u00a0<OSIMasson>\u00a0has quit  \n19:47\u00a0<cjd>\u00a0has joined #xwiki  \n20:13\u00a0<OSIMasson>\u00a0has joined #xwiki  \n21:05\u00a0<vmassol1>\u00a0has joined #xwiki  \n21:05\u00a0<vmassol>\u00a0has quit  \n21:10\u00a0<Slashman>\u00a0has quit  \n22:59\u00a0<vmassol1>\u00a0has quit  \n23:12\u00a0<mflorea1>\u00a0has quit\n"}