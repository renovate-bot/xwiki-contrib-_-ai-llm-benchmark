{"id": "dev:IRC.xwikiArchive20160822", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160822", "title": "IRC Archive for channel #xwiki on 22 August 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Denis1>\u00a0has joined #xwiki  \n00:03\u00a0<Denis>\u00a0has quit  \n00:03\u00a0<Denis1>\u00a0has quit  \n00:17\u00a0<Denis>\u00a0has joined #xwiki  \n01:30\u00a0<xwikibot>\u00a0has joined #xwiki  \n03:20\u00a0<jonesmeier>\u00a0has quit  \n03:22\u00a0<jonesmeier>\u00a0has joined #xwiki  \n06:05\u00a0<mflorea>\u00a0has joined #xwiki  \n07:49\u00a0<msmeria>\u00a0has joined #xwiki  \n08:22\u00a0<mflorea>\u00a0has quit  \n08:54\u00a0<vmassol>\u00a0has joined #xwiki  \n09:32\u00a0<Pbas>\u00a0has joined #xwiki  \n09:35\u00a0<mflorea>\u00a0has joined #xwiki  \n09:35\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:44\u00a0<gdelhumeau>\u00a0has quit  \n09:44\u00a0<gdelhumeau\\_>\u00a0has joined #xwiki  \n09:44\u00a0<gdelhumeau\\_>\u00a0has quit  \n09:44\u00a0<gdelhumeau\\_>\u00a0has joined #xwiki  \n09:45\u00a0<gdelhumeau\\_>\u00a0is now known as <gdelhumeau>  \n09:47\u00a0<gdelhumeau>\u00a0Hello  \n09:47\u00a0<gdelhumeau>\u00a0If you have upgraded Ubuntu recently and want to use the good-one XChat2, install Hexchat instead  \n09:50\u00a0<xwikiorg\\_guest\\_0>\u00a0has joined #xwiki  \n09:51\u00a0<xwikiorg\\_guest\\_0>\u00a0Greetings! I have trouble getting Google Apps Integration to work with 8.2.1. Is there any detailed documentation on configuring and testing it?  \n09:52\u00a0<vmassol>\u00a0xwikiorg\\_guest\\_0: hi,I think the only doc is the one on the extension page unfortunately  \n09:52\u00a0<vmassol>\u00a0you're talking about http://extensions.xwiki.org/xwiki/bin/view/Extension/XWiki+Application+-+Google+Apps righ?  \n09:53\u00a0<xwikiorg\\_guest\\_0>\u00a0Yes, the error I get from macros is: Failed to execute the [velocity] macro. Cause: [No signature of method: java.lang.String.initialize() is applicable for argument types: (com.xpn.xwiki.XWikiContext) values: [[vcontext:org.apache.velocity.VelocityContext@7c8e666c, sdoc:GoogleApps.TestDocumentList, ...]]  \n09:53\u00a0<vmassol>\u00a0it's developed by Ludovic Dubost but he's not on this chat  \n09:53\u00a0<vmassol>\u00a0strange error  \n09:54\u00a0<vmassol>\u00a0seems to look for initialize() in XWikiContext which doesn't exist  \n09:54\u00a0<vmassol>\u00a0I'd recommend that you send a mail to the users list with your error  \n09:54\u00a0<vmassol>\u00a0since Ludovic checks that list  \n09:54\u00a0<vmassol>\u00a0(from time to time)  \n09:54\u00a0<vmassol>\u00a0AFAIK he's on holidays this week though but he should be able to check when he's back  \n09:55\u00a0<xwikiorg\\_guest\\_0>\u00a0Ok, I'll do that. Thanks.  \n09:55\u00a0<vmassol>\u00a0(I've personally not used this extension)  \n09:56\u00a0<xwikiorg\\_guest\\_0>\u00a0We are looking into building intranet and getting this to work seems to be the key in seriously considering xwiki  \n09:56\u00a0<acotiuga>\u00a0has joined #xwiki  \n09:59\u00a0<vmassol>\u00a0cool  \n09:59\u00a0<vmassol>\u00a0fyi the support options you have are:  \n09:59\u00a0<vmassol>\u00a0https://www.xwiki.org/xwiki/bin/view/Main/Support  \n10:00\u00a0<vmassol>\u00a0this page includes some professional services if you need good response time for support or extra help  \n10:04\u00a0<xwikiorg\\_guest\\_0>\u00a0Thanks, buying professional support in this phase is a kind of egg-chicken problem: It's hard to justify spending money on support if you can't get the thing to testing stage etc :-P  \n10:05\u00a0<vmassol>\u00a0oh with support you'll get it to work for sure :) \u00a0But yes it's a question of confidence you have  \n10:06\u00a0<vmassol>\u00a0(on my side I know it can work for sure, possibly with some fixes)  \n10:11\u00a0<tmortagne>\u00a0has joined #xwiki  \n10:11\u00a0<xwikiorg\\_guest\\_0>\u00a0Problem seems to be in handling Cookies, I got a bit further after disabling them  \n10:11\u00a0<xwikiorg\\_guest\\_0>\u00a0(in google apps preferences)  \n10:12\u00a0<xwikiorg\\_guest\\_0>\u00a0(in auth service there is: cookieTools.initialize(context))  \n10:22\u00a0<xwikiorg\\_guest\\_0>\u00a0Yup, I could see documents & embed them, testing can continue. Problem was the trying to use cookies.  \n10:22\u00a0<vmassol>\u00a0ok cool  \n10:29\u00a0<Slashman>\u00a0has joined #xwiki  \n10:33\u00a0<xwikiorg\\_guest\\_0>\u00a0Now here is another one: iframe does not work because: 'X-Frame-Options' is 'DENY'. I have xwiki running on JETTY in port 80 (iptables redirect), how can I change this? Googling has failed me so far  \n10:34\u00a0<Pbas>\u00a0has quit  \n10:42\u00a0<vmassol>\u00a0I didn't even know about X-Frame-Options :)  \n10:43\u00a0<vmassol>\u00a0according to https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options it could come from your web server in front of xwiki  \n10:43\u00a0<vmassol>\u00a0you only have jetty in front?  \n10:43\u00a0<vmassol>\u00a0no apache, ngingx?  \n10:46\u00a0<vmassol>\u00a0xwikiorg\\_guest\\_0: you could edit the jetty.xml config and set the header otherwise (maybe it's set to DENY by default in jetty)  \n10:46\u00a0<vmassol>\u00a0see http://stackoverflow.com/questions/3009631/setting-http-headers-with-jetty  \n10:47\u00a0<Pbas>\u00a0has joined #xwiki  \n10:48\u00a0<vmassol>\u00a0but first check if you don't have any web server in front  \n10:48\u00a0<vmassol>\u00a0(or proxy)  \n10:49\u00a0<vmassol>\u00a0le me check in my jetty setup  \n10:49\u00a0<vmassol>\u00a0yep I don't have it  \n10:49\u00a0<vmassol>\u00a0so it's your setup that adds it  \n10:49\u00a0<vmassol>\u00a0:)  \n10:49\u00a0<vmassol>\u00a0by defauilt this header is not set  \n10:49\u00a0<vmassol>\u00a0\\*default  \n11:01\u00a0<vmassol>\u00a0(xwikiorg\\_guest\\_0)  \n11:08\u00a0<tmortagne>\u00a0has quit  \n11:09\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:26\u00a0<tmortagne>\u00a0has quit  \n11:38\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:39\u00a0<vmassol>\u00a0guys we need to stabilize the build for the release. I think we should stop doing commits on master (unless they're fixing bugs) since we're supposed to release today  \n11:39\u00a0<vmassol>\u00a0(just saw some upgrades from thomas ;))  \n11:46\u00a0<tmortagne>\u00a0has quit  \n11:46\u00a0<tmortagne>\u00a0has joined #xwiki  \n11:53\u00a0<helge>\u00a0has joined #xwiki  \n11:57\u00a0<xwikiorg\\_guest\\_0>\u00a0xwiki-users subscription confirmation takes LONG time. :-( I've found few bugs so far which I could report, what is the best way to do that?  \n12:02\u00a0<vmassol>\u00a0it should take between 5 seconds to 30 seconds AFAIK ;)  \n12:02\u00a0<vmassol>\u00a0maybe check your spam folder  \n12:02\u00a0<vmassol>\u00a0See http://dev.xwiki.org/xwiki/bin/view/Community/Contributing for details  \n12:02\u00a0<vmassol>\u00a0but if you've found bugs 2 solutions  \n12:03\u00a0<vmassol>\u00a0- you're sure it's a bug : open a jira issue at http://jira.xwiki.org  \n12:03\u00a0<vmassol>\u00a0- you're not sure and would like to discuss it, send a mail on the users list  \n12:13\u00a0<gdelhumeau>\u00a0did someone fix the escaping tests recently?  \n12:13\u00a0<gdelhumeau>\u00a0I don't reproduce locally  \n12:14\u00a0<gdelhumeau>\u00a0(the failing\u00e0  \n12:14\u00a0<gdelhumeau>\u00a0)  \n12:14\u00a0<vmassol>\u00a0haven't seen a commit that would fix them  \n12:15\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-test-escaping/ is srill failing  \n12:15\u00a0<vmassol>\u00a0\\*still  \n12:15\u00a0<vmassol>\u00a0let me try locally  \n12:23\u00a0<gdelhumeau>\u00a0I reproduce  \n12:24\u00a0<gdelhumeau>\u00a0But I had to wait for the end of the tests to see the failures  \n12:24\u00a0<helge>\u00a0Hi, I experience the property rendering.imageWidthLimit (xwiki.properties) is no longer taken into account.  \n12:24\u00a0<helge>\u00a0Images are displayed full scale, no matter what limit was set in xwiki.properties  \n12:25\u00a0<helge>\u00a0Since XWiki 8.x AFAIK  \n12:27\u00a0<helge>\u00a0can anyone reproduce?  \n12:29\u00a0<vmassol>\u00a0(helge: going for lunch, I can try to reproduce after if nobody beats me)  \n12:29\u00a0<vmassol>\u00a0how do you test?  \n12:34\u00a0<helge>\u00a0I have a thumbnail of a large jpg. When I click on it it opens full scale.  \n12:34\u00a0<helge>\u00a0rendering.imageWidthLimit = 1024  \n12:36\u00a0<helge>\u00a0Bon app\u00e9tit. Going for lunch, too :)  \n13:36\u00a0<vmassol>\u00a0helge: back. Can you give me the list of steps to reproduce?  \n13:39\u00a0<vmassol>\u00a0looking at ci again  \n13:39\u00a0<vmassol>\u00a0(grr still very slow from time to time)  \n13:42\u00a0<gdelhumeau>\u00a0vmassol> I wonder if http://jira.xwiki.org/browse/XWIKI-13557 could be the cause of the escape breakage  \n13:43\u00a0<gdelhumeau>\u00a0previously, the url generated by $doc.getURL() has the ' character escaped, but now it has not  \n13:43\u00a0<xwikiorg\\_guest\\_0>\u00a0has quit  \n13:44\u00a0<helge>\u00a0vmassol: in xwiki.properties set rendering.imageWidthLimit = 1024  \n13:45\u00a0<vmassol>\u00a0gdelhumeau: do you get problems with the space encoding?  \n13:45\u00a0<helge>\u00a0add new page, insert a much larger image (4000x3000)  \n13:45\u00a0<vmassol>\u00a0gdelhumeau: this fix, replaces the \"+\" encoding for space (which was wrong) with \"%20\"  \n13:46\u00a0<helge>\u00a0save, view the results. the image is lager than my screen, not 1024 wide  \n13:46\u00a0<gdelhumeau>\u00a0it only do that?  \n13:46\u00a0<vmassol>\u00a0gdelhumeau: let me check the code changes (I don't remember it)  \n13:47\u00a0<vmassol>\u00a0gdelhumeau: can you paste an example of URL?  \n13:48\u00a0<vmassol>\u00a0\"this fix, replaces the \"+\" encoding for space (which was wrong) with \"%20\"\": to be precise \"+\" is ok in query string but not in the path  \n13:48\u00a0<gdelhumeau>\u00a0http://127.0.0.1:8080/xwiki/bin/view/aaa%22bbb%27ccc%3Eddd%3Ceee/WebHome?vm=wikidoesnotexist.vm&skin=default&xpage=xpart&language=en&form\\_token=2s92DF7R83ax3MxOvwjdMA  \n13:49\u00a0<vmassol>\u00a0this the expected url?  \n13:49\u00a0<vmassol>\u00a0or the url that fails?  \n13:49\u00a0<vmassol>\u00a0(I don't see the ' character in it)  \n13:49\u00a0<vmassol>\u00a0(since you're saying it's now not encoded)  \n13:50\u00a0<vmassol>\u00a0helge: finishing this first and I'll try to reproduce after  \n13:51\u00a0<gdelhumeau>\u00a0it's the url that fails  \n13:51\u00a0<gdelhumeau>\u00a0you need to look at the source  \n13:51\u00a0<vmassol>\u00a0you mean skype is encoding it?  \n13:51\u00a0<gdelhumeau>\u00a0line 20, you get: <link rel=\"alternate\" type=\"application/x-wiki\" title=\"Edit\" href=\"/xwiki/bin/edit/aaa%22bbb&#39;ccc%3Eddd%3Ceee/WebHome\" />  \n13:51\u00a0<gdelhumeau>\u00a0damn I've fix it locally  \n13:52\u00a0<gdelhumeau>\u00a0so you get: <link rel=\"alternate\" type=\"application/x-wiki\" title=\"Edit\" href=\"/xwiki/bin/edit/aaa%22bbb'ccc%3Eddd%3Ceee/WebHome\" />  \n13:52\u00a0<vmassol>\u00a0ok thanks, I can work with thiw  \n13:52\u00a0<gdelhumeau>\u00a0because line 20, we have <link rel=\"alternate\" type=\"application/x-wiki\" title=\"Edit\" href=\"$doc.getURL('edit')\" />  \n13:52\u00a0<vmassol>\u00a0\\*this  \n13:52\u00a0<gdelhumeau>\u00a0we can fix it by using $escapetool.xml()  \n13:52\u00a0<gdelhumeau>\u00a0but it means somethign have changed internally  \n13:53\u00a0<vmassol>\u00a0I'm checking  \n13:53\u00a0<vmassol>\u00a0if my fix changed it  \n13:53\u00a0<helge>\u00a0vmassol: whait - the new editor automatically sets with to the value of the original image, thus overwriting the xwiki.properties (?)  \n13:55\u00a0<gdelhumeau>\u00a0I only looked at the XWikiServletURLFactory#createURL() and saw the last commit is yours  \n13:56\u00a0<vmassol>\u00a0so I confirm  \n13:56\u00a0<gdelhumeau>\u00a0but it seems your modification only touched the anchor part of the url  \n13:56\u00a0<vmassol>\u00a0' is no longer encoded when in the path  \n13:56\u00a0<vmassol>\u00a0I'm checking but this is probably correct  \n13:56\u00a0<gdelhumeau>\u00a0hmm no not only  \n13:56\u00a0<vmassol>\u00a0(otherwise http client would be buggy)  \n13:56\u00a0<vmassol>\u00a0gdelhumeau: nope  \n13:57\u00a0<vmassol>\u00a0so I believe we need to fix the test expectation  \n13:57\u00a0<gdelhumeau>\u00a0https://github.com/xwiki/xwiki-platform/commit/ef34a3fa84d779b8f9d558464b3e8198b5cf6dc2#diff-8966a1e580056e7455fd05c8e1ea9ba9L300  \n13:58\u00a0<vmassol>\u00a0ok found it  \n13:58\u00a0<gdelhumeau>\u00a0actually, in the HTML, having ' inside some \" \" should not be a breakage  \n13:58\u00a0<vmassol>\u00a0https://web.archive.org/web/20151218094722/http://blog.lunatech.com/2009/02/03/what-every-web-developer-must-know-about-url-encoding#Thereservedcharactersaredifferentforeachpart  \n13:58\u00a0<vmassol>\u00a0search \"The reserved characters are not what you think they are  \n13:58\u00a0<helge>\u00a0vmassol: so this might be expected behavior. The thing is I was using the thumbnail macro in some other place.  \n13:58\u00a0<vmassol>\u00a0so ' doesn't need encoding in the path  \n13:58\u00a0<vmassol>\u00a0(and even in the query string actually)  \n13:59\u00a0<helge>\u00a0in earlier versions, the thumbnail macro took into account 'rendering.imageWidthLimit'  \n13:59\u00a0<vmassol>\u00a0gdelhumeau: can you fix the test expectation and commit it against http://jira.xwiki.org/browse/XWIKI-13557 ? (if that's a problem for you I'll do it - but I'll need to learn how those tests work first since I don't know right now)  \n14:00\u00a0<helge>\u00a0this seems to have disappeared. when I use the thumbnail now, it will always display the original image in full scale.  \n14:01\u00a0<gdelhumeau>\u00a0actually I need to check if the ' character is allowed in a HTML parameter, even if it is okay in a URL  \n14:02\u00a0<gdelhumeau>\u00a0according to https://html5.validator.nu/, it is valid  \n14:02\u00a0<vmassol>\u00a0gdelhumeau: what's the relationship between url and HTML tag or attribute?  \n14:02\u00a0<gdelhumeau>\u00a0so yes, we need to change the test expectation  \n14:02\u00a0<vmassol>\u00a0ah I see  \n14:02\u00a0<vmassol>\u00a0your example above  \n14:02\u00a0<vmassol>\u00a0<link rel=\"alternate\" type=\"application/x-wiki\" title=\"Edit\" href=\"$doc.getURL('edit')\" />  \n14:03\u00a0<vmassol>\u00a0if it were not the case we'd have needed to add some encoding in the vm generating this  \n14:03\u00a0<vmassol>\u00a0I thnk  \n14:03\u00a0<vmassol>\u00a0we should do that  \n14:03\u00a0<vmassol>\u00a0ie always HTML-encode attribute values  \n14:04\u00a0<gdelhumeau>\u00a0my first idea was to do <link rel=\"alternate\" type=\"application/x-wiki\" title=\"Edit\" href=\"$escapetool.xml($doc.getURL('edit'))\" />  \n14:04\u00a0<vmassol>\u00a0yes that sounds good  \n14:04\u00a0<vmassol>\u00a0no?  \n14:05\u00a0<vmassol>\u00a0(unless the html spec clearly says that valid URLs don't need to be encoded but I doubt it)  \n14:06\u00a0<gdelhumeau>\u00a0generally, I like to use $escapetool for every variable that I don't control  \n14:06\u00a0<vmassol>\u00a0yes makes sense  \n14:06\u00a0<gdelhumeau>\u00a0note that \" is encoded meanwhile ' is not  \n14:06\u00a0<gdelhumeau>\u00a0which the website does not say  \n14:07\u00a0<vmassol>\u00a0yes \" is also encoded in urls  \n14:07\u00a0<vmassol>\u00a0(checking)  \n14:07\u00a0<gdelhumeau>\u00a0\":@-.\\_~!$&'()\\*+,;=\" are allowed unescaped anywhere within a path segment part  \n14:07\u00a0<gdelhumeau>\u00a0my bad  \n14:08\u00a0<gdelhumeau>\u00a0I was counting the first \" in that sentenc  \n14:08\u00a0<vmassol>\u00a0yep I confirm  \n14:08\u00a0<vmassol>\u00a0\" is also encoded in URL paths  \n14:08\u00a0<gdelhumeau>\u00a0yes  \n14:08\u00a0<vmassol>\u00a0hmm strange  \n14:08\u00a0<vmassol>\u00a0ah no  \n14:08\u00a0<vmassol>\u00a0the quote is just to close the list  \n14:08\u00a0<vmassol>\u00a0;)  \n14:08\u00a0<gdelhumeau>\u00a0then escaping it might not be absolutely needed  \n14:08\u00a0<vmassol>\u00a0so we're fine  \n14:08\u00a0<gdelhumeau>\u00a0I mean escaping the url  \n14:09\u00a0<vmassol>\u00a0we're fine for \" and '  \n14:09\u00a0<vmassol>\u00a0don't know about other characters though  \n14:09\u00a0<vmassol>\u00a0\"That depends on whether the attribute value is double quoted, single quoted or unquoted.\"  \n14:10\u00a0<vmassol>\u00a0so I guess attributes could be single quoted too no?  \n14:10\u00a0<gdelhumeau>\u00a0exactly  \n14:10\u00a0<gdelhumeau>\u00a0usually it is double quoted  \n14:10\u00a0<vmassol>\u00a0see https://www.w3.org/TR/html5/syntax.html#attribute-value-%28single-quoted%29-state for the logic  \n14:11\u00a0<gdelhumeau>\u00a0I propose to use $escapetool and we are tranquil  \n14:11\u00a0<vmassol>\u00a0the & is also an issue  \n14:11\u00a0<vmassol>\u00a0becuase it's not encoded in URL paths  \n14:11\u00a0<vmassol>\u00a0but it's reqiured to be encoded for attribute values  \n14:11\u00a0<vmassol>\u00a0yep +1  \n14:12\u00a0<gdelhumeau>\u00a0ok, I'm doing it  \n14:12\u00a0<vmassol>\u00a0thx  \n14:13\u00a0<vmassol>\u00a0indeed we didn't have the issue before  \n14:13\u00a0<vmassol>\u00a0because we were using URLEncoded.encode which encodes everything  \n14:13\u00a0<vmassol>\u00a0\\*URLEncoder  \n14:13\u00a0<vmassol>\u00a0so there could be no issues in URLs  \n14:13\u00a0<vmassol>\u00a0I'm a bit worried by this  \n14:14\u00a0<vmassol>\u00a0because there could lots of places where we don't encode urls used in html attributes  \n14:18\u00a0<vmassol>\u00a0just added a comment on http://jira.xwiki.org/browse/XWIKI-13557  \n14:19\u00a0<vmassol>\u00a0unfortunately I don't remember why I fixed http://jira.xwiki.org/browse/XWIKI-13557  \n14:19\u00a0<vmassol>\u00a0and if there was a reason besides the fact that it's not following the spec  \n14:19\u00a0<vmassol>\u00a0I remember I fixed it when I was looking into http://jira.xwiki.org/browse/XWIKI-13556  \n14:20\u00a0<vmassol>\u00a0found it: http://jira.xwiki.org/browse/XWIKI-13556?focusedCommentId=91999&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-91999  \n14:22\u00a0<vmassol>\u00a0although in the end the issue was not really what I fixed  \n14:23\u00a0<vmassol>\u00a0but the fact that tomcat has changed its behavior regarding urls in servlet displatchers  \n14:34\u00a0<gdelhumeau>\u00a0has quit  \n15:01\u00a0<msmeria>\u00a0has quit  \n15:37\u00a0<polx>\u00a0has joined #xwiki  \n16:38\u00a0<vmassol>\u00a0helge: back, now reading what you said above  \n16:42\u00a0<vmassol>\u00a0\"vmassol: whait - the new editor automatically sets with to the value of the original image, thus overwriting the xwiki.properties (?)\". No idea. Not even sure what you're talking about  \n16:42\u00a0<vmassol>\u00a0you mentioned thumbnail macro. What is that?  \n16:42\u00a0<vmassol>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/Thumbnail+Macro ? (never used it)  \n16:48\u00a0<vmassol>\u00a0mflorea: I'm seeing the following when editing in the object editor: https://www.evernote.com/l/AHcOTC3PYd1LWaJOhB3IVmvgDCbLSqqY7Ao  \n16:50\u00a0<vmassol>\u00a0btw shouldn't we set the editor for the xclasses for wiki macro as text?  \n16:50\u00a0<vmassol>\u00a0(pure text)  \n16:50\u00a0<mflorea>\u00a0re problem 2, you did not has the GWT editor before, because the object editor was not obeying the editor preference. It does now  \n16:51\u00a0<vmassol>\u00a0it's not really nice: https://www.evernote.com/l/AHeNpmVzRrZDOoJLBYqFhFy1SixDSx4E8UQ  \n16:51\u00a0<mflorea>\u00a0it depends on what the macro description support  \n16:51\u00a0<mflorea>\u00a0if it support wiki syntax, then it should be either wiki or wysiwyg. Otherwise it should be puretext.  \n16:52\u00a0<mflorea>\u00a0for the macro code it should be fixed  \n16:52\u00a0<vmassol>\u00a0shouldn't we review all our xclasses?  \n16:52\u00a0<vmassol>\u00a0because it seems we're finding problems  \n16:53\u00a0<vmassol>\u00a0(I've seen you fix a few already)  \n16:53\u00a0<vmassol>\u00a0and those are going to be regressions from our users pov  \n16:53\u00a0<vmassol>\u00a0do you remember when this new behavior was introduced? In 8.2?  \n16:54\u00a0<mflorea>\u00a08.2 yes  \n16:55\u00a0<vmassol>\u00a0@mflorea for the desciption, it's used in the WYIWYG editor in the macro dialog box, I guess you consider them as pure text right?  \n16:56\u00a0<mflorea>\u00a0the wysiwyg editor considers it as plain text yes, but it may be wrong  \n16:57\u00a0<vmassol>\u00a0originally it's part of the macro descriptor and it's pure text  \n16:58\u00a0<vmassol>\u00a0so we should set them all to pure text IMO  \n16:58\u00a0<vmassol>\u00a0do you want me to do it?  \n16:59\u00a0<vmassol>\u00a0note: I won't be able to fix all other xclasses though (I need to work on other stuff). But IMO we need to do that in order to get a closure on the related issue  \n16:59\u00a0<tmortagne>\u00a0has quit  \n17:00\u00a0<mflorea>\u00a0I can do it, but I need to finish something else first  \n17:00\u00a0<vmassol>\u00a0helge: I see that the thumbnail macro just uses the [[image:]] notation  \n17:00\u00a0<vmassol>\u00a0using ||width=\u2026  \n17:00\u00a0<vmassol>\u00a0so it should work fine normally  \n17:00\u00a0<vmassol>\u00a0testing now  \n17:02\u00a0<vmassol>\u00a0helge: works fine here  \n17:02\u00a0<vmassol>\u00a0I attached a 4000x3000 pixels image  \n17:05\u00a0<vmassol>\u00a0hmmm  \n17:05\u00a0<vmassol>\u00a0actually no it doesn't seem to work  \n17:05\u00a0<vmassol>\u00a0http://localhost:8080/xwiki/bin/download/Main/Test/WebHome/test.jpg displays the full size  \n17:05\u00a0<vmassol>\u00a0checking code  \n17:09\u00a0<vmassol>\u00a0no I'm wrong  \n17:09\u00a0<vmassol>\u00a0the download action doesn't obey rendering properties  \n17:09\u00a0<vmassol>\u00a0so it's normal that this url woudl return the full size image  \n17:10\u00a0<vmassol>\u00a0and viewing a page that has [[image:test.jpg]] works fine  \n17:10\u00a0<vmassol>\u00a0it's resized as it should be  \n17:10\u00a0<vmassol>\u00a0so it's working for me :)  \n17:12\u00a0<vmassol>\u00a0@mflorea: I'm doing it  \n17:12\u00a0<mflorea>\u00a0ok  \n17:16\u00a0<vmassol>\u00a0mflorea:  \n17:16\u00a0<vmassol>\u00a0should I open a jira for problem 1 above?  \n17:17\u00a0<vmassol>\u00a0(the alignment issue)  \n17:19\u00a0<vmassol>\u00a0mflorea: also would you remember hte jira issue that caused the editor regression? \u00a0ie the issue in which the followng was done: \"the object editor was not obeying the editor preference. It does now\"  \n17:21\u00a0<mflorea>\u00a0re problem 1 yes, I can reproduce, but note that it affects also the GWT editor, so it is most probably a layout issue on the object editor  \n17:22\u00a0<vmassol>\u00a0re problem 2, I think the editor should also obey the defualt size of the xclass  \n17:22\u00a0<vmassol>\u00a0for example I see that the for the desciprtion we have:  \n17:22\u00a0<vmassol>\u00a0needsUpdate |= bclass.addTextAreaField(MACRO\\_DESCRIPTION\\_PROPERTY, \"Macro description\", 40, 5);  \n17:22\u00a0<vmassol>\u00a0so that's 5 lines  \n17:23\u00a0<vmassol>\u00a0(40 chars on 5 lines)  \n17:23\u00a0<mflorea>\u00a0yes, it should  \n17:23\u00a0<vmassol>\u00a0k I'll create a jira issue too for this  \n17:23\u00a0<mflorea>\u00a0GWT obeys the number of rows  \n17:24\u00a0<vmassol>\u00a0ok  \n17:25\u00a0<mflorea>\u00a0the issue that caused the regressions is http://jira.xwiki.org/browse/XWIKI-13528  \n17:25\u00a0<vmassol>\u00a0thx  \n17:30\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-13646  \n17:30\u00a0<vmassol>\u00a0for problem 2, the issue should go in the CKEditor jira I guess?  \n17:30\u00a0<vmassol>\u00a0(since you said that GWT was honoring it)  \n17:32\u00a0<vmassol>\u00a0creating it there, we can always move it  \n17:33\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/CKEDITOR-99  \n17:42\u00a0<vmassol>\u00a0hmmm  \n17:42\u00a0<vmassol>\u00a0I think my commit not good enough  \n17:43\u00a0<vmassol>\u00a0referring to https://github.com/xwiki/xwiki-platform/commit/15293ef7589bc0ccaea53fbdde82f9abaaa931d8  \n17:43\u00a0<vmassol>\u00a0is that how you've done it mflorea for other propreties you fixed?  \n17:44\u00a0<vmassol>\u00a0I think the correct way is https://github.com/xwiki/xwiki-platform/blob/8c8ff0200cbd8618da7392356e3ac926b9b28427/xwiki-platform-core/xwiki-platform-scheduler/xwiki-platform-scheduler-api/src/main/java/com/xpn/xwiki/plugin/scheduler/internal/SchedulerJobClassDocumentInitializer.java#L111-L111 since that allows existing wiki instances to migrate to the new editor  \n17:46\u00a0<mflorea>\u00a0indeed, the approach from the SchedulerJobClass is better as it handles the case when the wiki is upgrade and the class exists  \n17:46\u00a0<vmassol>\u00a0ofc I caused a buld failure too (checkstyme error)  \n17:46\u00a0<vmassol>\u00a0fixing both  \n17:47\u00a0<mflorea>\u00a0also, note that I added an enum https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/classes/TextAreaClass.java#L48  \n17:47\u00a0<mflorea>\u00a0that you can use  \n17:47\u00a0<mflorea>\u00a0and I think the addTextArea method has a signature that accepts it  \n17:49\u00a0<mflorea>\u00a0actually, the scheduler is not fully right, it should add the script text area using PlainText (if it doesn't exist), and then check again it type (if it was present)  \n17:50\u00a0<mflorea>\u00a0I need to leave, tty  \n17:50\u00a0<vmassol>\u00a0hmm  \n17:51\u00a0<vmassol>\u00a0shouldn't we modify  \n17:51\u00a0<vmassol>\u00a0BaseClass.addTextAreaField() instead  \n17:51\u00a0<vmassol>\u00a0?  \n17:51\u00a0<vmassol>\u00a0to return true when one of the passed parameter has changed  \n17:52\u00a0<vmassol>\u00a0I don't see a use case where you wouldn't want to upgrade  \n17:52\u00a0<vmassol>\u00a0do you?  \n17:55\u00a0<mflorea>\u00a0has quit  \n18:01\u00a0<vmassol>\u00a0ok with this: https://www.evernote.com/l/AHfskzUfMSxCm5YOEItvfqKMc2cuD99pIp8 ?  \n18:12\u00a0<acotiuga>\u00a0has quit  \n18:13\u00a0<acotiuga>\u00a0has joined #xwiki  \n19:14\u00a0<acotiuga>\u00a0has quit  \n19:33\u00a0<vmassol>\u00a0has quit  \n20:15\u00a0<Slashman>\u00a0has quit  \n20:18\u00a0<helge>\u00a0has quit  \n20:40\u00a0<sorinello>\u00a0has quit  \n20:40\u00a0<polx\\_>\u00a0has joined #xwiki  \n20:42\u00a0<polx>\u00a0has quit  \n20:42\u00a0<polx\\_>\u00a0is now known as <polx>  \n20:59\u00a0<sorinello>\u00a0has joined #xwiki  \n21:04\u00a0<sorinello\\_\\_>\u00a0has joined #xwiki  \n21:04\u00a0<polx>\u00a0has quit  \n21:06\u00a0<sorinello\\_\\_>\u00a0has quit  \n21:07\u00a0<sorinello>\u00a0has quit  \n21:22\u00a0<sorinello>\u00a0has joined #xwiki  \n22:19\u00a0<sdumitriu1>\u00a0has quit  \n23:45\u00a0<vmassol1>\u00a0has quit\n"}