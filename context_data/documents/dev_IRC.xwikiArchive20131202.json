{"id": "dev:IRC.xwikiArchive20131202", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20131202", "title": "IRC Archive for channel #xwiki on 02 December 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<sburjan`>\u00a0has joined #xwiki  \n00:10\u00a0<abusenius>\u00a0has quit  \n00:10\u00a0<vmassol>\u00a0has quit  \n00:12\u00a0<sdumitriu>\u00a0has joined #xwiki  \n00:26\u00a0<lucaa>\u00a0has joined #xwiki  \n00:55\u00a0<UCC>\u00a0has quit  \n01:04\u00a0<vmassol>\u00a0has joined #xwiki  \n01:09\u00a0<vmassol>\u00a0has quit  \n01:15\u00a0<lucaa>\u00a0has quit  \n02:05\u00a0<vmassol>\u00a0has joined #xwiki  \n02:09\u00a0<vmassol>\u00a0has quit  \n03:06\u00a0<vmassol>\u00a0has joined #xwiki  \n03:10\u00a0<vmassol>\u00a0has quit  \n04:07\u00a0<vmassol>\u00a0has joined #xwiki  \n04:12\u00a0<vmassol>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n05:08\u00a0<vmassol>\u00a0has joined #xwiki  \n05:13\u00a0<vmassol>\u00a0has quit  \n06:01\u00a0<Denis>\u00a0has quit  \n06:05\u00a0<UCC>\u00a0has joined #xwiki  \n06:08\u00a0<vmassol>\u00a0has joined #xwiki  \n06:13\u00a0<vmassol>\u00a0has quit  \n06:16\u00a0<Chuguniy>\u00a0has quit  \n06:29\u00a0<OSIMasson>\u00a0has quit  \n06:48\u00a0<UCC>\u00a0has quit  \n06:50\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n07:09\u00a0<vmassol>\u00a0has joined #xwiki  \n07:14\u00a0<vmassol>\u00a0has quit  \n07:43\u00a0<DarkKnightCZ>\u00a0has quit  \n08:10\u00a0<vmassol>\u00a0has joined #xwiki  \n08:14\u00a0<vmassol>\u00a0has quit  \n08:15\u00a0<vmassol>\u00a0has joined #xwiki  \n08:25\u00a0<Denis>\u00a0has joined #xwiki  \n08:32\u00a0<j-simard>\u00a0has joined #xwiki  \n08:46\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:48\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n08:49\u00a0<evalica>\u00a0has joined #xwiki  \n08:49\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:53\u00a0<sburjan>\u00a0has joined #xwiki  \n09:20\u00a0<msmeria>\u00a0has joined #xwiki  \n09:22\u00a0<vrachieru>\u00a0has joined #xwiki  \n09:24\u00a0<cjd>\u00a0has joined #xwiki  \n09:25\u00a0<vrachieru>\u00a0has quit  \n09:29\u00a0<mflorea>\u00a0has joined #xwiki  \n09:36\u00a0<vrachieru>\u00a0has joined #xwiki  \n09:40\u00a0<evalica>\u00a0has quit  \n09:40\u00a0<evalica1>\u00a0has joined #xwiki  \n09:40\u00a0<evalica1>\u00a0is now known as <evalica>  \n09:54\u00a0<camil7>\u00a0has joined #xwiki  \n09:56\u00a0<Slashman>\u00a0has joined #xwiki  \n10:01\u00a0<lucaa>\u00a0has joined #xwiki  \n10:04\u00a0<DarkKnightCZ>\u00a0has quit  \n10:05\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n10:10\u00a0<vmassol>\u00a0good morning  \n10:10\u00a0<vmassol>\u00a0checking functional test failures now  \n10:10\u00a0<vmassol>\u00a0let's hope GD will join us soon as we need to release 5.3RC1 ASAP  \n10:14\u00a0<sburjan>\u00a0vmassol: first he has to fix the issues  \n10:15\u00a0<sburjan>\u00a0I am retesting on Postgres ATM, but I'm sure I'll be able to reproduce on Postgres also, since this is not related to the database  \n10:22\u00a0<DarkKnightCZ>\u00a0has quit  \n10:30\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n10:30\u00a0<cjd>\u00a0has quit  \n10:30\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:38\u00a0<vmassol>\u00a0gdelhumeau: good morning, we couldn't release Friday  \n10:38\u00a0<vmassol>\u00a0gdelhumeau: one reason was that your migration didn't work according to sburjan  \n10:38\u00a0<vmassol>\u00a0could you pleae check that in priority since we really need to release ASAP  \n10:38\u00a0<vmassol>\u00a0?  \n10:38\u00a0<gdelhumeau>\u00a0vmassol: ok  \n10:38\u00a0<gdelhumeau>\u00a0sburjan: is it what you told me thursday?  \n10:39\u00a0<sburjan>\u00a0gdelhumeau: yes, I also reopened the JIRA issue and added a comment  \n10:39\u00a0<vmassol>\u00a0gdelhumeau: check your emails, sorin has commented on the jira issue and reopened it  \n10:39\u00a0<chalx>\u00a0has joined #xwiki  \n10:44\u00a0<sburjan>\u00a0gdelhumeau: same thing on postgres. But I think I know why. Adding a comment to the issue  \n10:45\u00a0<sburjan>\u00a0gdelhumeau: commented  \n10:45\u00a0<gdelhumeau>\u00a0ok  \n10:46\u00a0<gdelhumeau>\u00a0the issue is only: DW did not start  \n10:46\u00a0<gdelhumeau>\u00a0all the rest is a consequence of that  \n10:46\u00a0<sburjan>\u00a0I'll have to believe you on that, I'm not familiar with the backed technicalities  \n10:47\u00a0<gdelhumeau>\u00a0the question is: why DW did not kicked  \n10:47\u00a0<gdelhumeau>\u00a0tmortagne: hi. Any idea?  \n10:47\u00a0<gdelhumeau>\u00a0http://jira.xwiki.org/browse/XWIKI-9738  \n10:47\u00a0<tmortagne>\u00a0gdelhumeau: out of the blue no idea no, will need to reproduce and debug  \n10:48\u00a0<tmortagne>\u00a0were you able to reproduce it yourself ?  \n10:48\u00a0<gdelhumeau>\u00a0No, I have never noticed it when I did my test with Jetty+MySQL  \n10:49\u00a0<cjd>\u00a0has joined #xwiki  \n10:49\u00a0<tmortagne>\u00a0all I can think of if being unable to get the id of the default UI extension id  \n10:49\u00a0<tmortagne>\u00a0which would make the DW start, see that it cannot do anything and then stop  \n10:49\u00a0<sburjan>\u00a0guys, If I can help you somehow please tell me  \n10:51\u00a0<vmassol>\u00a0tmortagne: I've also seen the \"Invalid extension [org.xwiki.enterprise:xwiki-enterprise-ui-common-5.2.1] on namespace [wiki:xwiki]\" message as a warning. It would be nice to analyze what is the problem to remove that message  \n10:51\u00a0<tmortagne>\u00a0vmassol: were ?  \n10:51\u00a0<vmassol>\u00a0it's because the extension used to exist but doesn't exist naymore?  \n10:51\u00a0<vmassol>\u00a0on http://jira.xwiki.org/browse/XWIKI-9738  \n10:52\u00a0<DarkKnightCZ1>\u00a0has joined #xwiki  \n10:52\u00a0<vmassol>\u00a0if so, we'll need some way for the admin to clean up  \n10:52\u00a0<tmortagne>\u00a0vmassol: this message is perfectly normal  \n10:52\u00a0<vmassol>\u00a0a WARN is never normal  \n10:52\u00a0<tmortagne>\u00a05.2.1 is not valid anymore before one of its dependencies don't match anymore  \n10:53\u00a0<vmassol>\u00a0sure but we need to do something  \n10:53\u00a0<tmortagne>\u00a0when you upgrade the WAR EM see that this extension is not valid anymore  \n10:53\u00a0<vmassol>\u00a0yes internally that's cool  \n10:53\u00a0<vmassol>\u00a0but we need to do something so that the user doesn't have to ask himself why there are those warnings  \n10:53\u00a0<vmassol>\u00a0and ask on the list  \n10:54\u00a0<vmassol>\u00a0maybe some admin UI for invalid extensions  \n10:54\u00a0<vmassol>\u00a0with the ability to remove them  \n10:54\u00a0<vmassol>\u00a0?  \n10:55\u00a0<vmassol>\u00a0can he do that already?  \n10:55\u00a0<tmortagne>\u00a0the is no such specialized UI but you get invalid extension listed like any installed extension and you can uninstall it  \n10:56\u00a0<DarkKnightCZ>\u00a0has quit  \n10:56\u00a0<tmortagne>\u00a0(or upgrade it)  \n10:56\u00a0<vmassol>\u00a0ok that's already good, so at least we should document it as part of the upgrade documentation  \n10:57\u00a0<vmassol>\u00a0I'm adding it to http://platform.xwiki.org/xwiki/bin/view/Features/DistributionWizard#HExtensions  \n10:58\u00a0<vmassol>\u00a0actually that's not the right place for doc\u2026  \n10:58\u00a0<tmortagne>\u00a0http://platform.xwiki.org/xwiki/bin/view/Features/DistributionWizard#HExtensions is already talking about invalid extensions  \n11:02\u00a0<vmassol>\u00a0btw why is \"org.xwiki.enterprise:xwiki-enterprise-ui-common-5.2.1\" no longer valid?  \n11:02\u00a0<vmassol>\u00a0(same for org.xwiki.enterprise:xwiki-enterprise-ui-mainwiki-5.2.1 and org.xwiki.enterprise:xwiki-enterprise-ui-wiki-all-5.2.1 )  \n11:03\u00a0<tmortagne>\u00a0it has exact version of oldcore as dependency to make sure it's seen as invalid  \n11:03\u00a0<vmassol>\u00a0so we'll get these warnings at each upgrade?  \n11:05\u00a0<vmassol>\u00a0and if the user upgrades, say, 5 times (5.2.1, 5.2.2, 5.2.3, 5.2.4, 5.2.5) he'll get 5 times the extensions listed with 5\\*3 warnings at each startup?  \n11:05\u00a0<tmortagne>\u00a0of course not  \n11:05\u00a0<tmortagne>\u00a0the warning is for installed extensions  \n11:05\u00a0<tmortagne>\u00a0when you upgrade it it's not installed anymore  \n11:05\u00a0<tmortagne>\u00a0the new version is  \n11:06\u00a0<vmassol>\u00a0ok so we get 3 warnings at each upgrade  \n11:06\u00a0<vmassol>\u00a0(and each startup)  \n11:06\u00a0<vmassol>\u00a0(for the 3 extensions I listed above)  \n11:06\u00a0<tmortagne>\u00a0not each startup no  \n11:06\u00a0<tmortagne>\u00a0each upgrade  \n11:06\u00a0<vmassol>\u00a0ok  \n11:06\u00a0<tmortagne>\u00a0again when you upgrade you remove the old one  \n11:06\u00a0<vmassol>\u00a0ah  \n11:06\u00a0<vmassol>\u00a0good, i didn't realize they were removed  \n11:07\u00a0<vmassol>\u00a0so going to the EM UI will not list them?  \n11:07\u00a0<vmassol>\u00a0(since they've been removed automatically)  \n11:07\u00a0<vmassol>\u00a0right?  \n11:07\u00a0<tmortagne>\u00a0EM will not list them no  \n11:07\u00a0<vmassol>\u00a0ok cool  \n11:07\u00a0<tmortagne>\u00a0unless you skip DW  \n11:08\u00a0<vmassol>\u00a0is it important to display them as warning vs using debug?  \n11:08\u00a0<vmassol>\u00a0(since they're removed anyway by the DW)  \n11:09\u00a0<tmortagne>\u00a0sburjan: would be nice if you could try to reproduce XWIKI-9738 with jetty+hsqldb packages instead of mysql  \n11:10\u00a0<tmortagne>\u00a0vmassol: depends how you will end up when you get invalid extensions so it mostly depends which extension we are talking about but the code that load extensions does not know that  \n11:11\u00a0<vmassol>\u00a0tmortagne: could you check http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Upgrade#HInvalidExtensions to verify that what I wrote is correct?  \n11:11\u00a0<sburjan>\u00a0tmortagne: I could do that, but we're using MySQL + Tomcat everywhere, this is why I started with these  \n11:12\u00a0<sburjan>\u00a0it's useless if it passes on jetty+HSQLDB, because nobody will use that in prod  \n11:12\u00a0<tmortagne>\u00a0sburjan: sure but jetty+hsqldb is what gdelhumeau used when doing all his tests and never reproduced the issue before so it would be safer if you could try it yourself see if it has anything to do with it or if you were not exatly doing the same thing he did  \n11:13\u00a0<tmortagne>\u00a0sburjan: in theory there is absolutely no difference between jetty+hsqlddb and tomcat+mysql for the issue you reported, that's why I'm wondering  \n11:13\u00a0<tmortagne>\u00a0you asked what you could do to help, that's one thing ;)  \n11:14\u00a0<sburjan>\u00a0tmortagne: okay, doing it :)  \n11:16\u00a0<tmortagne>\u00a0vmassol: looks good  \n11:16\u00a0<DarkKnightCZ1>\u00a0has quit  \n11:18\u00a0<tmortagne>\u00a0sburjan: you can delete the data from the jetty+hsqldb package to be as close as possible to the tomcat+mysql use case  \n11:18\u00a0<tmortagne>\u00a0(to start empty)  \n11:19\u00a0<sburjan>\u00a0so I am starting a empty 5.2.1 and the delete the data dir and migrate to 5.3-SNAP ?  \n11:19\u00a0<sburjan>\u00a0well if I delete the datadir, how will theDW know the previous version ?  \n11:19\u00a0<tmortagne>\u00a0sburjan: no  \n11:19\u00a0<tmortagne>\u00a0you delete the data before doing anything else  \n11:20\u00a0<sburjan>\u00a0ah ok  \n11:20\u00a0<tmortagne>\u00a0i.e. you start empty exactly like with mysql  \n11:21\u00a0<sburjan>\u00a0tmortagne so the whole data dir, or only data/extension ? The data dir also contains a database dir, isn't that needed ?  \n11:21\u00a0<tmortagne>\u00a0the whole thing  \n11:21\u00a0<tmortagne>\u00a0empty  \n11:21\u00a0<sburjan>\u00a0ok  \n11:23\u00a0<sburjan>\u00a0tmortagne: and mo migrate, I have to move the data dir to the 5.3-SNAP dir, right ?  \n11:24\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n11:24\u00a0<tmortagne>\u00a0sburjan: no, do exactly like you would do with tomcat change the WAR with the new one  \n11:24\u00a0<sburjan>\u00a0ok  \n11:30\u00a0<sburjan>\u00a0bbl in 30 minutes (lunch)  \n11:31\u00a0<DarkKnightCZ>\u00a0has quit  \n11:36\u00a0<vmassol>\u00a0ok I know why PanelTest fails, fixing  \n11:36\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n11:39\u00a0<tmortagne>\u00a0sburjan: I just tried starting with en empty jetty+hsqldb ditribution and I get the DW  \n11:43\u00a0<evalica>\u00a0has quit  \n11:46\u00a0<evalica>\u00a0has joined #xwiki  \n11:52\u00a0<chalx>\u00a0has quit  \n11:58\u00a0<DarkKnightCZ>\u00a0has left #xwiki  \n12:07\u00a0<Inge->\u00a0has quit  \n12:17\u00a0<chalx>\u00a0has joined #xwiki  \n12:22\u00a0<Slashman>\u00a0has quit  \n12:28\u00a0<sburjan>\u00a0tmortagne: I still don't get the DW  \n12:28\u00a0<sburjan>\u00a0happens the same thing as on Tomcat + MySQL  \n12:30\u00a0<sburjan>\u00a0what I can tell you for sure is that I did not change the testing method  \n12:31\u00a0<sburjan>\u00a0tmortagne: can you also try to access a subwiki ? Does the Wikis Panel look ok on a subwiki ?  \n12:56\u00a0<lucaa>\u00a0has quit  \n13:42\u00a0<vmassol>\u00a0fixing the wysiwyg test now. i understand the problem  \n13:48\u00a0<tmortagne>\u00a0sburjan: you sure you do nothing else than changing webapps/xwiki with the new WAR ? (plus putting the hsqldb jar of course)  \n13:49\u00a0<sburjan>\u00a0tmortagne: I'm positive. Thying for the 4th time again to make sure  \n13:49\u00a0<tmortagne>\u00a0I don't understand, I can't reproduce it  \n13:50\u00a0<sburjan>\u00a0When installing 4.5.1, you are putting Upgrade All WIki in the DW ?  \n13:50\u00a0<sburjan>\u00a0because this is what I am putting  \n13:50\u00a0<tmortagne>\u00a0why 4.5.1 ?  \n13:50\u00a0<tmortagne>\u00a0you mean 5.2.1 ?  \n13:50\u00a0<sburjan>\u00a05.2.1, sorry  \n13:50\u00a0<tmortagne>\u00a0you don't say anything about that in the issue so I keep what is the default  \n13:51\u00a0<sburjan>\u00a0tmortagne: Bingo. I get the DW. so the issue it seems to be when selecting \"Upgrade All Wikis\"  \n13:52\u00a0<tmortagne>\u00a0sburjan: update the issue then since you did not talked about it in the steps to reproduce it  \n13:53\u00a0<tmortagne>\u00a0but I don't see how this option could have any impact on main wiki  \n13:54\u00a0<sburjan>\u00a0tmortagne: updated the issue  \n13:55\u00a0<sburjan>\u00a0tmortagne: me neither, this is why I didn't mention it in my steps  \n13:55\u00a0<tmortagne>\u00a0sburjan: still when indicating the steps you should indicate everything you do  \n13:55\u00a0<sburjan>\u00a0yes  \n13:56\u00a0<sburjan>\u00a0seems that sometimes can make the difference  \n14:01\u00a0<Slashman>\u00a0has joined #xwiki  \n14:02\u00a0<vmassol>\u00a0note that I cannot reproduce the packager plugin build failure that we have on CI  \n14:02\u00a0<vmassol>\u00a0I removed completely my lcoal repo and rebuilt it with -Pintegration-tests  \n14:02\u00a0<vmassol>\u00a0and it worked fine  \n14:03\u00a0<tmortagne>\u00a0vmassol: you rebuilt it alone or the whole platform ?  \n14:03\u00a0<vmassol>\u00a0alone  \n14:10\u00a0<tmortagne>\u00a0sburjan: reproduced it, need to debug now. The DW starts but looks like it gets a NullPointerException and crash at some point, before the UI get a chance to switch to it  \n14:13\u00a0<tmortagne>\u00a0sburjan: note that when I start again I get the DW  \n14:13\u00a0<tmortagne>\u00a0so it seems to be only the first start  \n14:13\u00a0<tmortagne>\u00a0did you tried it ?  \n14:14\u00a0<sburjan>\u00a0did you complete the upgrade process ?  \n14:14\u00a0<sburjan>\u00a0did you complete the upgrade process before restarting ?  \n14:14\u00a0<tmortagne>\u00a0I'm only interrested in gatting the DW right now  \n14:14\u00a0<tmortagne>\u00a0how would you complete the upgrade without the DW excatly  \n14:14\u00a0<tmortagne>\u00a0?  \n14:14\u00a0<sburjan>\u00a0so you mean at the second start you get the DW ?  \n14:15\u00a0<tmortagne>\u00a0yes that's what mean start again  \n14:15\u00a0<tmortagne>\u00a0just restart XWiki  \n14:15\u00a0<sburjan>\u00a0I never tried this  \n14:15\u00a0<sburjan>\u00a0I'll have to redo the whole thing again, to set \"Upgrade All\"  \n14:15\u00a0<tmortagne>\u00a0I think it's because it end up saving a status where the upgrade mode is back to default  \n14:15\u00a0<tmortagne>\u00a0so that's why it works  \n14:16\u00a0<sburjan>\u00a0I don't know  \n14:17\u00a0<tmortagne>\u00a0no need to create new wikis or anything to reproduce the issue by the way  \n14:17\u00a0<tmortagne>\u00a0just install 5.2.1 and upgrade  \n14:17\u00a0<sburjan>\u00a0ok  \n14:20\u00a0<tmortagne>\u00a0hmm seems to be a timing issue, when debugging (and so waiting quite a log compared to normal process) I don't get any issue  \n14:20\u00a0<tmortagne>\u00a0going to be fun to debug that...  \n14:20\u00a0<tmortagne>\u00a0seems to be related XWikiContext status  \n14:22\u00a0<sburjan>\u00a0tmortagne: indeed, after the restart I get the DW  \n14:24\u00a0<vmassol>\u00a0tmortagne: I could reproduce the build issue  \n14:25\u00a0<lucaa>\u00a0has joined #xwiki  \n14:32\u00a0<tmortagne>\u00a0sburjan: is it the first time you test upgrading an XWiki in which you choose \"Upgrade All\" mode when you installed it ?  \n14:33\u00a0<tmortagne>\u00a0as far as can see there is no way this could work, ever  \n14:33\u00a0<sburjan>\u00a0tmortagne: well it only recently started to actually work :) But no, it's not the first time. I used \"upgrade all wikis\" before GD's commit. And also I remember that it was me who reported that \"Upgrade all wikis\" was not working  \n14:33\u00a0<sburjan>\u00a0so yes, I tested it after it was fixed, and it was working  \n14:34\u00a0<sburjan>\u00a0so no, it's not the first time  \n14:34\u00a0<tmortagne>\u00a0I don't talk about choosing the mode when you upgrade but really when you install the first version  \n14:35\u00a0<gdelhumeau>\u00a0I always hit \"Upgrade all wikis\"  \n14:35\u00a0<sburjan>\u00a0tmortagne: I don't remember, sorry  \n14:35\u00a0<sburjan>\u00a0gdelhumeau: that's odd, because you should have reproduced the issue  \n14:35\u00a0<tmortagne>\u00a0gdelhumeau: but you don't do it when you install since you start from jetty/hsqldb distribution, right ?  \n14:36\u00a0<tmortagne>\u00a0I mean you don't use DW for the install, only the upgrade  \n14:36\u00a0<gdelhumeau>\u00a0I always did with Jetty/MySQL, and I used DW for the first install  \n14:40\u00a0<vmassol>\u00a0bb in 20mn  \n14:53\u00a0<OSIMasson>\u00a0has joined #xwiki  \n15:01\u00a0<tmortagne>\u00a0sburjan: should be OK now  \n15:01\u00a0<sburjan>\u00a0ok, I'll wait for a build  \n15:02\u00a0<tmortagne>\u00a0sburjan: you could also test the other issues you reported using the other upgrade mode  \n15:03\u00a0<sburjan>\u00a0yes, doing  \n15:03\u00a0<vmassol>\u00a0back  \n15:04\u00a0<vmassol>\u00a0has quit  \n15:04\u00a0<sburjan>\u00a0tmortagne: going to test with Tomcat + Postgres  \n15:04\u00a0<vmassol>\u00a0has joined #xwiki  \n15:08\u00a0<vmassol>\u00a0tmortagne: http://jira.codehaus.org/browse/MNG-5542  \n15:08\u00a0<tmortagne>\u00a0vmassol: we are using -pl ?  \n15:09\u00a0<vmassol>\u00a0jeknis does  \n15:09\u00a0<vmassol>\u00a0since it does a partial rebuild  \n15:09\u00a0<vmassol>\u00a0(that's how it does it)  \n15:09\u00a0<tmortagne>\u00a0ok, first time I see this option  \n15:09\u00a0<vmassol>\u00a0project list  \n15:09\u00a0<vmassol>\u00a0it's an explicit list  \n15:09\u00a0<tmortagne>\u00a0so that was inded related to partial build  \n15:09\u00a0<vmassol>\u00a0they're probably going to say it's not supported  \n15:09\u00a0<vmassol>\u00a0but still seems a bug to me  \n15:09\u00a0<tmortagne>\u00a0jenkins or maven ?  \n15:10\u00a0<vmassol>\u00a0maven  \n15:10\u00a0<vmassol>\u00a0when you build in maven and the parent isn't present lcoally it's downloaded no?  \n15:10\u00a0<tmortagne>\u00a0yes  \n15:10\u00a0<vmassol>\u00a0so it should work IMO  \n15:10\u00a0<vmassol>\u00a0passing -pl will correctly download dependencies  \n15:10\u00a0<tmortagne>\u00a0I don't see why they would say it's not supported, looks like a bugand nothing else to me  \n15:10\u00a0<vmassol>\u00a0so it should also download parent poms  \n15:10\u00a0<vmassol>\u00a0yep  \n15:10\u00a0<vmassol>\u00a0we'll see  \n15:10\u00a0<tmortagne>\u00a0yea  \n15:14\u00a0<vmassol>\u00a0ok so there are still 2 failing func tests but I have no idea why they fail  \n15:14\u00a0<vmassol>\u00a0they're both about going in the administration and selecting the \"XWiki\" space  \n15:14\u00a0<vmassol>\u00a0(from the select box)  \n15:14\u00a0<vmassol>\u00a0for ex http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-messagestream-test-tests/4694/testReport/junit/org.xwiki.messagestream.test.ui/AdministrationTest/verifyGlobalAndSpaceSections/  \n15:14\u00a0<vmassol>\u00a0it works locally  \n15:15\u00a0<vmassol>\u00a0and it was working before apparently, the change I did was in using teh superadmin user vs the Admin one  \n15:25\u00a0<vmassol>\u00a0regarding the 5.3RC1 release  \n15:25\u00a0<vmassol>\u00a0what's left?  \n15:27\u00a0<tmortagne>\u00a0vmassol: there is an issue with searchsuggest I reported to gdelhumeau  \n15:28\u00a0<vmassol>\u00a0ok, is that the only known issue for RC1 ATM?  \n15:28\u00a0<tmortagne>\u00a0there is a conflict between what workspaces install modify and the new suggest added  \n15:28\u00a0<tmortagne>\u00a0the only one I know  \n15:28\u00a0<tmortagne>\u00a0not sure if gdelhumeau is on it right now or not  \n15:29\u00a0<gdelhumeau>\u00a0tmortagne: so, ok to remove the object created by WorkspaceManager.Install ?  \n15:29\u00a0<tmortagne>\u00a0gdelhumeau: sure, that's the only way I can think of to have clean result  \n15:30\u00a0<gdelhumeau>\u00a0ok  \n15:30\u00a0<gdelhumeau>\u00a0I can't create a JIRA, because it does not affect m2  \n15:30\u00a0<tmortagne>\u00a0basically I guess we should review everything workspace install used to do and undo it in your \u00a0migration  \n15:31\u00a0<tmortagne>\u00a0you can use whatever issue you used for your migrator  \n15:31\u00a0<tmortagne>\u00a0is the same kind of idea  \n15:31\u00a0<tmortagne>\u00a0undo workspaces hacks  \n15:32\u00a0<gdelhumeau>\u00a0actually I think we need a new migrator to do it  \n15:32\u00a0<tmortagne>\u00a0why ?  \n15:32\u00a0<UCC>\u00a0has joined #xwiki  \n15:32\u00a0<gdelhumeau>\u00a0because my migrator is on the module xwiki-platform-wiki-user  \n15:32\u00a0<tmortagne>\u00a0because it's specific to main wiki this time ?  \n15:33\u00a0<gdelhumeau>\u00a0which is related to users stuff  \n15:33\u00a0<gdelhumeau>\u00a0(membership, candidacies, etc...)  \n15:33\u00a0<tmortagne>\u00a0ok  \n15:33\u00a0<gdelhumeau>\u00a0actually, the deleted files that I restore should go to the new migrator too  \n15:33\u00a0<gdelhumeau>\u00a0since it's not specific to the users  \n15:34\u00a0<gdelhumeau>\u00a0for example, fixing the search issue should be in the search module, no?  \n15:34\u00a0<tmortagne>\u00a0that the ones I was talking about but was not sure what pages there was exactly  \n15:35\u00a0<tmortagne>\u00a0for the search page I guess but there is no search module  \n15:35\u00a0<tmortagne>\u00a0only search-lucene or search-solr  \n15:35\u00a0<tmortagne>\u00a0now maybe it's a solr specific setup and not a generic one, don't know much this page  \n15:37\u00a0<gdelhumeau>\u00a0we can create a search module just for that migrator  \n15:38\u00a0<gdelhumeau>\u00a0or a new module \"workspaces migrator\" to undo everything  \n15:39\u00a0<tmortagne>\u00a0the \"workspace migrator\" sounds like the clearest one  \n15:39\u00a0<gdelhumeau>\u00a0yep, and we put everything in it  \n15:40\u00a0<gdelhumeau>\u00a0should I put in as a submodule or \"wiki\" ?  \n15:40\u00a0<gdelhumeau>\u00a0\\*put it  \n15:41\u00a0<tmortagne>\u00a0I guess it should be a submodule of xwiki-platform-legacy  \n15:42\u00a0<gdelhumeau>\u00a0but it won't be packaged in the snapshots  \n15:43\u00a0<gdelhumeau>\u00a0if it is on legacy  \n15:44\u00a0<tmortagne>\u00a0well it's need only if you do an upgrade  \n15:44\u00a0<tmortagne>\u00a0and an upgrade of a workspaces farm  \n15:44\u00a0<chalx>\u00a0has quit  \n15:45\u00a0<sburjan>\u00a0gdelhumeau: ping  \n15:45\u00a0<gdelhumeau>\u00a0pong  \n15:46\u00a0<sburjan>\u00a0gdelhumeau: I am on a 5.2.1 and I have installed Wiki Manager Application. Any idea where is the page to install the template for the old subwikis ? (templatexe)  \n15:47\u00a0<gdelhumeau>\u00a0WikiManager/CreateNewWiki  \n15:48\u00a0<sburjan>\u00a0gdelhumeau: not that one. The one that installs templatexe  \n15:49\u00a0<vmassol>\u00a0the template is created automatically now  \n15:49\u00a0<gdelhumeau>\u00a0in 5.2.1?  \n15:49\u00a0<sburjan>\u00a0in 5.2.1, yes  \n15:51\u00a0<gdelhumeau>\u00a0I ond't understand the question  \n15:52\u00a0<gdelhumeau>\u00a0templatexe was a wiki template created by someone?  \n15:52\u00a0<sburjan>\u00a0I want to create a old style subwiki. And I have to install a template before. The template was called templatexe. Where c an I install that ?  \n15:52\u00a0<sburjan>\u00a0it's the default name of the template  \n15:52\u00a0<gdelhumeau>\u00a0aaah ok  \n15:53\u00a0<sburjan>\u00a0I think the pages was XemManager.Install, but I don't seem to have it anymore  \n15:54\u00a0<tmortagne>\u00a0vmassol: there is no template by default, it's not created automatically  \n15:54\u00a0<gdelhumeau>\u00a0you could use that one: http://nexus.xwiki.org/nexus/content/groups/public/org/xwiki/enterprise/xwiki-enterprise-ui-mainwiki-all/5.2.1/xwiki-enterprise-ui-mainwiki-all-5.2.1.xar  \n15:55\u00a0<gdelhumeau>\u00a0but the best is to use xwiki-enterprise-ui-common  \n15:55\u00a0<gdelhumeau>\u00a0but we don't have a -all version for common  \n15:55\u00a0<sburjan>\u00a0gdelhumeau: I was able to do that very easily until now. You removed that page ?  \n15:55\u00a0<sburjan>\u00a0from this POV this is a regression  \n15:55\u00a0<gdelhumeau>\u00a0I don't have touched to the old WikiManager Application  \n15:55\u00a0<tmortagne>\u00a0I don't understand, the new subwiki UI is supposed to be something that is ok for both use case now  \n15:55\u00a0<gdelhumeau>\u00a0tmortagne: not in 5.2.x  \n15:55\u00a0<sburjan>\u00a0guys, I am talking about 5.2.1 !  \n15:56\u00a0<tmortagne>\u00a0sburjan: this page never been part of wikimanager app  \n15:56\u00a0<tmortagne>\u00a0it was in XEM XAR  \n15:56\u00a0<sburjan>\u00a0ok, so XEM is deprecated now  \n15:56\u00a0<tmortagne>\u00a0and then I don't know what have been kept in ui-mainwiki from old XE%  \n15:57\u00a0<sburjan>\u00a0and also moved to contrib  \n15:57\u00a0<tmortagne>\u00a0s/XE%/XEM/  \n15:57\u00a0<tmortagne>\u00a0gdelhumeau: it's possible to create an empty wiki in 5.2.1 ?  \n15:58\u00a0<sburjan>\u00a0trying that now since I don't have the template for old style subwikis  \n15:58\u00a0<tmortagne>\u00a0the \"template for old style subwikis\" is just a plain XE imported in an empty wiki  \n15:58\u00a0<gdelhumeau>\u00a0tmortagne: yes it is, with Wiki Manager Application  \n15:58\u00a0<sburjan>\u00a0but again: the instructions stated clearly that if you want to have old style subwikis, you have to install Wiki Manager Application. I did that, and I stil can't  \n15:59\u00a0<tmortagne>\u00a0now the main issue is more than you don't have a allinone XAR without workspaces pages  \n15:59\u00a0<tmortagne>\u00a0sburjan: have to does not mean it's enough  \n16:00\u00a0<sburjan>\u00a0well the instuctions don't specify more steps  \n16:00\u00a0<tmortagne>\u00a0what instructions are you talking about exactly ?  \n16:01\u00a0<sburjan>\u00a0afaik vmassol replied on devlist about users wanting to have the old subwikis capabilities  \n16:03\u00a0<vmassol>\u00a0old subwikis capability is there in 5.3M2 sorin  \n16:04\u00a0<vmassol>\u00a0(not sure what you're taking about\u00e0  \n16:04\u00a0<vmassol>\u00a0)  \n16:04\u00a0<tmortagne>\u00a0vmassol: he's talking about 5.2.1  \n16:04\u00a0<tmortagne>\u00a0sburjan: so by instruction you mean a quick answer in the mailing list from vmassol ?  \n16:05\u00a0<sburjan>\u00a0Ok, I'll explain again  \n16:06\u00a0<sburjan>\u00a0I am on 5.2.1 and I want to create and old style subwiki. Since I don't have a template for that, I have to install one. I install WIki Manager Application  \n16:07\u00a0<tmortagne>\u00a0sburjan: we perfectly understood your use case but you are talking about instruction somewhere telling you that installing wikimanager app will magically generate a template for you so that's why I'm asking what instaruction you are talking about since wikimanager never created any template, that was XEM  \n16:07\u00a0<sburjan>\u00a0tmortagne: the template is not generated magically. But I remember we had page called XemManager.Install, which I don't have anymore  \n16:08\u00a0<tmortagne>\u00a0yes and as you can see in it's name it's a XEM page  \n16:08\u00a0<tmortagne>\u00a0not a wikimanager page  \n16:09\u00a0<tmortagne>\u00a0it's impossible for wikimanager to containg a XAR of XE as attachment since XE is built after platform  \n16:09\u00a0<vmassol>\u00a0do we still have XEM in 5.2.x?  \n16:09\u00a0<vmassol>\u00a0(I don't remember when we dropped it)  \n16:09\u00a0<tmortagne>\u00a0no  \n16:09\u00a0<sburjan>\u00a0indeed  \n16:09\u00a0<sburjan>\u00a0at least DW kick in, so I don't need a template  \n16:10\u00a0<vmassol>\u00a0ok so indeed there's some issue for users using 5.2.x and wishing to create a new wiki  \n16:10\u00a0<tmortagne>\u00a0yes but it's going to install you a workspace  \n16:10\u00a0<sburjan>\u00a0XWiki Enterprise - UI - Wiki All 5.2.1  \n16:10\u00a0<vmassol>\u00a0(not workspace-style)  \n16:10\u00a0<tmortagne>\u00a0sburjan: that's a workspace  \n16:10\u00a0<gdelhumeau>\u00a0DW should propose Common  \n16:10\u00a0<sburjan>\u00a0then it's not good. I am on a clean 5.2.1  \n16:10\u00a0<tmortagne>\u00a0hmm wait  \n16:10\u00a0<tmortagne>\u00a0the DW propose you a \\* All ?  \n16:10\u00a0<tmortagne>\u00a0does not make any sense  \n16:11\u00a0<sburjan>\u00a0yepp  \n16:11\u00a0<sburjan>\u00a0it proposes \\*all  \n16:12\u00a0<tmortagne>\u00a0I agree with gdelhumeau that common-ui is the default UI so it's what it's supposed to propose you  \n16:13\u00a0<sburjan>\u00a0http://postimg.org/image/xujqmhob9/  \n16:13\u00a0<sburjan>\u00a0this is what I get when I create a subwiki with Wiki Manager and with NO template selected  \n16:15\u00a0<tmortagne>\u00a0sounds like XWIKI-9589  \n16:15\u00a0<tmortagne>\u00a0yep that's probably it  \n16:15\u00a0<tmortagne>\u00a0you already created a subwiki ?  \n16:15\u00a0<tmortagne>\u00a0or the default template ?  \n16:16\u00a0<gdelhumeau>\u00a0https://github.com/xwiki/xwiki-enterprise/blob/stable-5.2.x/xwiki-enterprise-web/pom.xml#L45 seems correct  \n16:16\u00a0<tmortagne>\u00a0gdelhumeau: that's XWIKI-9589 for sure  \n16:16\u00a0<tmortagne>\u00a0just mean sburjan already created the standard template I guess  \n16:19\u00a0<tmortagne>\u00a0sburjan: try creating your old style template before any other wiki  \n16:20\u00a0<sburjan>\u00a0tmortagne: this is my problem. How do I do that ?  \n16:21\u00a0<tmortagne>\u00a0do what ?  \n16:21\u00a0<sburjan>\u00a0create the old style template  \n16:21\u00a0<sburjan>\u00a0how do I do that ?  \n16:21\u00a0<tmortagne>\u00a0this what what you are doing...  \n16:21\u00a0<tmortagne>\u00a0just don't created the standard template before  \n16:21\u00a0<tmortagne>\u00a0or you will hit XWIKI-9589  \n16:22\u00a0<tmortagne>\u00a0get a fresh wiki, create en empty wiki and use the DW  \n16:22\u00a0<tmortagne>\u00a0you should get the right UI this time  \n16:23\u00a0<tmortagne>\u00a0just don't create standard template before doing this that's all  \n16:23\u00a0<sburjan>\u00a0I'm testing gdelhumeau \u00a0migrator ATM, and the use case it was to test the migrator also with old style subwikis, which I tried to create. This is why we are having this chat now  \n16:23\u00a0<tmortagne>\u00a0sburjan: if you upgrade an old style farm you already have a template  \n16:23\u00a0<tmortagne>\u00a0I don't see why you want to create one  \n16:24\u00a0<sburjan>\u00a0tmortagne: migrating 5.2.1 to 5.3-SNAPSHOT  \n16:24\u00a0<sburjan>\u00a0to test the newly introduced migrator  \n16:24\u00a0<tmortagne>\u00a0and ?  \n16:24\u00a0<tmortagne>\u00a0the migrator is in 5.3  \n16:24\u00a0<tmortagne>\u00a0as you said yourself we are talking about 5.2.1  \n16:25\u00a0<tmortagne>\u00a0so again, if you want to create an old style wiki in 5.2.1 don't create the standard template before  \n16:25\u00a0<sburjan>\u00a0I am ATM on 5.2.1 and trying to create old style subwikis, so then I can migrate to 5.3-SNAP  \n16:26\u00a0<sburjan>\u00a0this is my use case  \n16:29\u00a0<tmortagne>\u00a0sburjan: and I'm talling you that if you want the DW to propose you the right UI you need to create your empty wiki before create the standard template  \n16:29\u00a0<tmortagne>\u00a0so again reset your 5.2.1 setup and create an empty wiki before doing anything else  \n16:30\u00a0<sburjan>\u00a0and is this what every user will have to do ?  \n16:31\u00a0<sburjan>\u00a0My use case is not so exotic IMO  \n16:31\u00a0<tmortagne>\u00a0sburjan: why would any use create a workspace template if he does not want any workspace ?  \n16:32\u00a0<sburjan>\u00a0and what if users want both, and start by creating the workspaces ?  \n16:32\u00a0<sburjan>\u00a0they have to start from scratch again ?  \n16:32\u00a0<tmortagne>\u00a0it's not not easier when converting XE into a multiwiki instance before  \n16:32\u00a0<tmortagne>\u00a0s/it's not/it was not/  \n16:33\u00a0<tmortagne>\u00a0sburjan: it's a bug/limitation that is in 5.2.x only  \n16:35\u00a0<sburjan>\u00a0gdelhumeau: I need you to help me test the migration from 5.2.1 to 5.3-SNAP  \n16:35\u00a0<sburjan>\u00a0nothing is working for me today  \n16:36\u00a0<sburjan>\u00a0tmortagne: I have created by XE + workspaces and selected the default upgrade option (NOT \"Upgrade All Wikis\"). I get the DW, but I don't get any continue button. I am hitting some strange loop with Upgrade and COntinue buttons  \n16:36\u00a0<sburjan>\u00a0starting from 0  \n16:37\u00a0<tmortagne>\u00a0sburjan: no idea, clear your cache maybe  \n16:37\u00a0<tmortagne>\u00a0you are switching from one version of DW to another like crazy today so maybe your browser is lost ;)  \n16:38\u00a0<chalx>\u00a0has joined #xwiki  \n16:38\u00a0<sburjan>\u00a0and I have to go in 20 minutes :(  \n16:38\u00a0<sburjan>\u00a0maybe  \n16:45\u00a0<sburjan>\u00a0tmortagne: I'll start again tomorrow with your fix for the race condition issue  \n16:45\u00a0<vmassol>\u00a0:( another day lost\u2026  \n16:45\u00a0<sburjan>\u00a0yes :(  \n16:45\u00a0<sburjan>\u00a0at least one day !  \n16:45\u00a0<sburjan>\u00a0these tests take a lot of time, and I keep hitting issues everywhere  \n16:46\u00a0<tmortagne>\u00a0sburjan: you could have tested the migration without waiting for \"all in one\" fix  \n16:47\u00a0<sburjan>\u00a0tmortagne: I did  \n16:47\u00a0<sburjan>\u00a0and again, DW got in a loop  \n16:47\u00a0<sburjan>\u00a0and I am retrying now  \n16:48\u00a0<tmortagne>\u00a0bouquetf: upgrade with default mode works perfectly well, before the fix  \n16:48\u00a0<tmortagne>\u00a0sburjan sorry  \n16:49\u00a0<vmassol>\u00a0sdumitriu, mflorea: could you please follow up with Scott at http://sourceforge.net/p/htmlcleaner/bugs/99/ because I don't know the details?  \n16:49\u00a0<vmassol>\u00a0he's ready to help us so we should answer fast  \n16:50\u00a0<vmassol>\u00a0maybe something to try too would be to use the last version of htmlcleaner to see if it helps  \n16:50\u00a0<sburjan>\u00a0sdumitriu1,  \n16:54\u00a0<sburjan>\u00a0tmortagne: there is clearly something wrong. I am hitting the loop again  \n16:55\u00a0<mflorea>\u00a0vmassol: we should check HTMLCleaner 2.6.1, but I'm busy with something else. If what Scott says is true then hopefully upgrading HTMLCleaner will fix the problem.  \n16:55\u00a0<tmortagne>\u00a0sburjan: I did exactly what you indicated in the issue but with the default mode and it works perfectly for me this morning  \n16:55\u00a0<sburjan>\u00a0tmortagne: did you finished the upgrade with the DW ?  \n16:55\u00a0<tmortagne>\u00a0yes I did  \n16:55\u00a0<vmassol>\u00a0mflorea: ok I'll do a test in a few minutes  \n16:55\u00a0<tmortagne>\u00a0for the main wiki  \n16:56\u00a0<tmortagne>\u00a0but anyway you say you have the issue right away and can't do anything  \n16:56\u00a0<sburjan>\u00a0tmortagne: I'm the loop for the main wiki. I don't know what to say, except a bitter taste feeling  \n16:56\u00a0<sburjan>\u00a0I have to go. Tomorrow I'll start from 0. A wasted day  \n16:56\u00a0<tmortagne>\u00a0sburjan: you sure you cleaned your cache ?  \n16:57\u00a0<sburjan>\u00a0tmortagne: yes  \n16:57\u00a0<chalx>\u00a0has quit  \n16:58\u00a0<sburjan>\u00a0See you tomorrow.  \n17:01\u00a0<sburjan>\u00a0gdelhumeau: whilw DW is in loop, I get: http://pastebin.com/PgU6L790  \n17:03\u00a0<sburjan>\u00a0go to go, bye  \n17:04\u00a0<sburjan>\u00a0has quit  \n17:05\u00a0<gdelhumeau>\u00a0Could not find artifact org.xwiki.enterprise:xwiki-enterprise-ui-admin-user:xar:5.3-SNAPSHOT in mavesn-xwiki (http://nexus.xwiki.org/nexus/content/groups/public)  \n17:06\u00a0<gdelhumeau>\u00a0does it means jenkins never built it?  \n17:10\u00a0<vrachieru>\u00a0has quit  \n17:11\u00a0<tmortagne>\u00a0gdelhumeau: http://nexus.xwiki.org/nexus/content/groups/public/ is released versions  \n17:11\u00a0<tmortagne>\u00a0not snapshot versions  \n17:12\u00a0<tmortagne>\u00a0gdelhumeau: if it's a EM error it's just the error it got from the last repository it tried that's all,  \n17:17\u00a0<gdelhumeau>\u00a0ok  \n17:31\u00a0<j-simard>\u00a0has quit  \n17:43\u00a0<vmassol>\u00a0mflorea: I don't understand, in my little test the full svg element is stripped\u2026  \n17:44\u00a0<mflorea>\u00a0vmassol: yes, that is the issue  \n17:44\u00a0<vmassol>\u00a0ok, going to upgrade htmlcleaner now on my side  \n17:45\u00a0<mflorea>\u00a0now, sdumitriu should give us an example of HTML+SVG that reproduces the issue so that we know if the upgrade fixes the issue or not.  \n17:47\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0defaultProperties.setOmitUnknownTags(true);  \n17:47\u00a0<vmassol>\u00a0that's why it's removed apparently  \n17:49\u00a0<mflorea>\u00a0yes, but here svg is not an unknown tag because it has a namespaces. For me \"OmitUnknownTags\" is for unknown HTML tags, i.e. from the default XHTML namespace. While the tags from other namespaces should be preserved.  \n17:50\u00a0<mflorea>\u00a0i.e. HTMLCleaner should clean only tags from the default (XHTML) namespace  \n17:52\u00a0<mflorea>\u00a0any XML parser should be able to give you the namespace of a tag so skipping (i.e. preserving) tags from other namespaces shouldn't be a problem for HTMLCleaner IMO  \n17:52\u00a0<vmassol>\u00a0I've commented that thanks  \n17:52\u00a0<mflorea>\u00a0yet them seem to ignore the namespace  \n17:54\u00a0<mflorea>\u00a0on the other hand, both of my examples I posted on XWIKI-9753 are not validated by http://validator.w3.org/ that's why I'd like to see sdumitriu's example. Maybe he embeds SVG in a different way.  \n17:56\u00a0<mflorea>\u00a0note that I based my examples on http://www.w3schools.com/svg/svg\\_inhtml.asp (see 4th example)  \n17:56\u00a0<msmeria>\u00a0gdelhumeau: I've just migrated from 5.2.1 to the latest 5.3-snap and I don't see a previous created subwiki on the \"Wiki Index\" page  \n17:57\u00a0<gdelhumeau>\u00a0msmeria: not normal, can you tell me all the steps you did?  \n17:57\u00a0<tmortagne>\u00a0msmeria: you see new wikis ?  \n17:57\u00a0<msmeria>\u00a0I can manually access the subwiki, though  \n17:57\u00a0<msmeria>\u00a0tmortagne, gdelhumeau: no. I just don't see a subwiki that was migrated from 5.2.1 to 5.3  \n17:58\u00a0<tmortagne>\u00a0msmeria: sure but I meant did you tried to create a new one and see if you have it in the list  \n17:58\u00a0<msmeria>\u00a0tmortagne: no I didn't. trying now  \n17:58\u00a0<tmortagne>\u00a0see if the whole index is broken or if it's somehting special about previous wikis  \n17:59\u00a0<tmortagne>\u00a0gdelhumeau: hmm I may have an idea  \n17:59\u00a0<tmortagne>\u00a0how to you get the wikis for the index ?  \n17:59\u00a0<tmortagne>\u00a0a query ?  \n17:59\u00a0<tmortagne>\u00a0or from the wiki module cache ?  \n18:00\u00a0<Denis>\u00a0has quit  \n18:00\u00a0<msmeria>\u00a0tmortagne: ok so new wikis also don't appear. here's my stack: http://hastebin.com/wokoteneco.avrasm  \n18:01\u00a0<tmortagne>\u00a0msmeria: those error are weird, there is not the error message and no stack trace  \n18:02\u00a0<tmortagne>\u00a0so it's not really something related to the wikis themself it seems, more a broken index for some reason  \n18:02\u00a0<msmeria>\u00a0also the wiki creation is very fast and after I create a new subwiki I get: \"NoticeThe requested document could not be found.\" on Main.WebHome of the new subwiki with the Admin user  \n18:02\u00a0<msmeria>\u00a0usually I got the DW before  \n18:03\u00a0<msmeria>\u00a0since it's not created from a template  \n18:03\u00a0<tmortagne>\u00a0msmeria: what upgrade mode did you configured ?  \n18:03\u00a0<msmeria>\u00a0all wikis  \n18:03\u00a0<tmortagne>\u00a0that's why you don't get DW on subwikis then  \n18:04\u00a0<msmeria>\u00a0tmortagne: yes but even on new ones ?  \n18:04\u00a0<msmeria>\u00a0I get that for old migrated ones.  \n18:05\u00a0<gdelhumeau>\u00a0tmortagne: from a query  \n18:05\u00a0<tmortagne>\u00a0gdelhumeau: your query includes a part about hidden wikis ?  \n18:05\u00a0<gdelhumeau>\u00a0it overrides it  \n18:06\u00a0<gdelhumeau>\u00a0I mean  \n18:06\u00a0<gdelhumeau>\u00a0it is a standard livetable resuts page  \n18:06\u00a0<gdelhumeau>\u00a0but some macros has been overrided  \n18:06\u00a0<gdelhumeau>\u00a0including this part about hidden documents  \n18:06\u00a0<gdelhumeau>\u00a0the hidden flag of the wiki is not used yet  \n18:06\u00a0<gdelhumeau>\u00a0anywhere  \n18:06\u00a0<tmortagne>\u00a0gdelhumeau: sure but what I mean is that in old wikis descriptors this field does not exist  \n18:07\u00a0<tmortagne>\u00a0ha so you don't check them  \n18:07\u00a0<tmortagne>\u00a0anyway the index seems totally broken  \n18:07\u00a0<msmeria>\u00a0yup  \n18:07\u00a0<tmortagne>\u00a0and my idea was only about old wikis  \n18:07\u00a0<gdelhumeau>\u00a030se  \n18:08\u00a0<gdelhumeau>\u00a0\\*sec  \n18:10\u00a0<gdelhumeau>\u00a0msmeria: can you paste the content of http://localhost:8080/xwiki/bin/get/WikiManager/WikisLiveTableResults?outputSyntax=plain&transprefix=platform.wiki.browse.&classname=XWiki.XWikiServerClass&collist=wikiprettyname%2Cdescription%2Cowner%2CmembershipType&offset=1&limit=10&reqNo=3&sort=wikiprettyname&dir=asc  \n18:10\u00a0<gdelhumeau>\u00a0\\*could you ;)  \n18:10\u00a0<msmeria>\u00a0gdelhumeau: http://hastebin.com/lokakuwoqo.rb  \n18:11\u00a0<gdelhumeau>\u00a0indeed, the result page of the Wiki Index is broken  \n18:11\u00a0<tmortagne>\u00a0ha the usual removed object becoming a null entry in the list of object  \n18:11\u00a0<gdelhumeau>\u00a0org.xwiki.wiki.user.internal.DefaultWikiUserManager.getMembers(DefaultWikiUserManager.java:161) <- Null Pointer Exception  \n18:11\u00a0<tmortagne>\u00a0you need to test for null when listing object of a document  \n18:12\u00a0<tmortagne>\u00a0the list returned by getXObjects can contain null elements  \n18:12\u00a0<gdelhumeau>\u00a0so I should do \u00a0if (memberObjects != null) { for (BaseObject object : memberObjects) { if (object != null) ....... ???  \n18:13\u00a0<tmortagne>\u00a0(objects are placed in that list based on their number so when you remove one it's set to null to not change the index of the others)  \n18:13\u00a0<tmortagne>\u00a0yes  \n18:13\u00a0<gdelhumeau>\u00a0ok, I see  \n18:13\u00a0<gdelhumeau>\u00a0I'll change that  \n18:18\u00a0<msmeria>\u00a0tmortagne, gdelhumeau: on the migrated subwiki I have the title broken and also an error for a panel: http://postimg.org/image/lxbe2gnlp/full/  \n18:19\u00a0<tmortagne>\u00a0msmeria: you did not get any conflict ?  \n18:20\u00a0<msmeria>\u00a0I got some: I remember SearchSuggest being one of them  \n18:20\u00a0<msmeria>\u00a0I'm not sure about Main.WebHome, I'll have to retest  \n18:20\u00a0<tmortagne>\u00a0SearchSuggest is expected but I'm more concerned about this page  \n18:21\u00a0<cjd>\u00a0has quit  \n18:21\u00a0<msmeria>\u00a0re-testing...  \n18:21\u00a0<tmortagne>\u00a0looks like a workspace hack for which you got a conflict and the default behavior is to popose you to keep the current value  \n18:21\u00a0<tmortagne>\u00a0now it's the home page and it rarely kept as standard  \n18:22\u00a0<tmortagne>\u00a0so not sure it's a big issue in real life upgrade (you will be pleased to keep the current version and not get the new standard one in those cases)  \n18:23\u00a0<tmortagne>\u00a0msmeria: in any case it's a good thing to report it  \n18:23\u00a0<tmortagne>\u00a0batter closing it as won't fix explaining why than ignoring it  \n18:23\u00a0<tmortagne>\u00a0s/batter/better/  \n18:23\u00a0<gdelhumeau>\u00a0the title and the panel things are weird  \n18:23\u00a0<tmortagne>\u00a0gdelhumeau: the title look like a workspace hack to me and in that case it's expected behavior  \n18:24\u00a0<sburjan`>\u00a0also you can check the comments I left friday when I reopened the issue  \n18:24\u00a0<gdelhumeau>\u00a0no, it's my title  \n18:24\u00a0<gdelhumeau>\u00a0but $wikiDescriptor.name should returns something  \n18:24\u00a0<gdelhumeau>\u00a0or maybe your wiki has no pretty name ?  \n18:24\u00a0<tmortagne>\u00a0gdelhumeau: it's a migrated wiki  \n18:24\u00a0<msmeria>\u00a0it had  \n18:24\u00a0<tmortagne>\u00a0how could it be your title ?  \n18:25\u00a0<msmeria>\u00a0IIRC it's automatically generated at creation  \n18:25\u00a0<tmortagne>\u00a0ha it's a wiki created in 5.2.1  \n18:25\u00a0<tmortagne>\u00a0sorry  \n18:25\u00a0<gdelhumeau>\u00a0tmortagne: it's the title by default for subwiki-ui in 5.3  \n18:25\u00a0<tmortagne>\u00a0forget what I said then  \n18:25\u00a0<tmortagne>\u00a0I was in a workspace -> new module upgrade state of mind  \n18:26\u00a0<tmortagne>\u00a0msmeria: anyway about the empty wiki that did not get DW it's XWIKI-9158  \n18:26\u00a0<gdelhumeau>\u00a0hhhm, wikiName is wrong  \n18:26\u00a0<tmortagne>\u00a0some old nice to have that just became blocker with the new behavior  \n18:27\u00a0<gdelhumeau>\u00a0well, the title should be #if(\"$!services.wiki.getById($services.wiki.currentWikiId).prettyName\" != '')${services.wiki.getById($services.wiki.currentWikiId).prettyName}#{else}$services.localization.render('xe.home.title')#end  \n18:27\u00a0<tmortagne>\u00a0I have to go guys, will think about XWIKI-9158 tomorrow  \n18:28\u00a0<gdelhumeau>\u00a0aaah, it's still the old title of workspace  \n18:28\u00a0<msmeria>\u00a0bye, tmortagne  \n18:28\u00a0<gdelhumeau>\u00a0when you had a conflit on Main.WebHome, what did you do msmeria ?  \n18:28\u00a0<gdelhumeau>\u00a0bye tmortagne  \n18:28\u00a0<gdelhumeau>\u00a0have a good evening  \n18:28\u00a0<tmortagne>\u00a0thanks  \n18:28\u00a0<msmeria>\u00a0I clicked continue for all conflicts  \n18:28\u00a0<msmeria>\u00a0just wanted to test if the migration worked  \n18:28\u00a0<tmortagne>\u00a0has quit  \n18:29\u00a0<msmeria>\u00a0I mean DW. I wanted to see if DW was completed successfully  \n18:29\u00a0<gdelhumeau>\u00a0so I guess it has preserved the old version  \n18:30\u00a0<gdelhumeau>\u00a0that is why the title is broken  \n18:30\u00a0<gdelhumeau>\u00a0what is the error message of the panel ?  \n18:30\u00a0<KermitTheFragger>\u00a0has quit  \n18:31\u00a0<msmeria>\u00a0I did an overwrite on the previous wiki installation  \n18:31\u00a0<msmeria>\u00a0I'm retesting now..  \n18:32\u00a0<msmeria>\u00a0anyway it's not a valid bug unless I can reproduce it :)  \n18:38\u00a0<msmeria>\u00a0gdelhumeau: except from the visible bugs, I got many \" [XWiki Solr index thread] ERROR\" errors in the console  \n18:39\u00a0<gdelhumeau>\u00a0I think tmortagne has fixed that  \n18:39\u00a0<msmeria>\u00a0let's hope so  \n18:46\u00a0<msmeria>\u00a0gdelhumeau: I was able to reproduce the title/panel bug, this time with the upgrade mode \"current wiki\", not \"all wikis\". merge conflict: http://postimg.org/image/63g93elpt/full/; panel error: http://hastebin.com/huxagexibo.sm  \n18:46\u00a0<msmeria>\u00a0now I gtg too  \n18:46\u00a0<msmeria>\u00a0we'll talk tomorrow  \n18:46\u00a0<msmeria>\u00a0bye  \n18:47\u00a0<gdelhumeau>\u00a0thx  \n18:47\u00a0<gdelhumeau>\u00a0have a good evening  \n18:47\u00a0<msmeria>\u00a0yw  \n18:47\u00a0<msmeria>\u00a0you too  \n18:47\u00a0<gdelhumeau>\u00a0ok, same error  \n18:47\u00a0<gdelhumeau>\u00a0my pull request should fix it  \n18:47\u00a0<gdelhumeau>\u00a0thanls for your reports ;)  \n18:47\u00a0<msmeria>\u00a0:)  \n18:47\u00a0<msmeria>\u00a0has quit  \n18:55\u00a0<abusenius>\u00a0has joined #xwiki  \n19:06\u00a0<lucaa>\u00a0has quit  \n19:12\u00a0<Chuguniy>\u00a0has joined #xwiki  \n19:32\u00a0<Slashman>\u00a0has quit  \n19:49\u00a0<gdelhumeau>\u00a0has quit  \n19:57\u00a0<evalica>\u00a0has quit  \n19:59\u00a0<mflorea>\u00a0has quit  \n20:06\u00a0<camil7>\u00a0has quit  \n20:15\u00a0<lucaa>\u00a0has joined #xwiki  \n20:22\u00a0<Denis>\u00a0has joined #xwiki  \n20:25\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n20:30\u00a0<Chuguniy|2>\u00a0has joined #xwiki  \n20:32\u00a0<Chuguniy>\u00a0has quit  \n20:41\u00a0<Chuguniy|2>\u00a0has quit  \n20:41\u00a0<Chuguniy>\u00a0has joined #xwiki  \n20:42\u00a0<lucaa>\u00a0has quit  \n21:13\u00a0<UCC>\u00a0has quit  \n21:24\u00a0<lucaa>\u00a0has joined #xwiki  \n21:42\u00a0<lucaa>\u00a0has quit  \n22:22\u00a0<mflorea>\u00a0has joined #xwiki  \n22:37\u00a0<vmassol>\u00a0has quit  \n23:02\u00a0<UCC>\u00a0has joined #xwiki  \n23:08\u00a0<vmassol>\u00a0has joined #xwiki  \n23:13\u00a0<vmassol>\u00a0has quit  \n23:38\u00a0<vmassol>\u00a0has joined #xwiki  \n23:43\u00a0<vmassol>\u00a0has quit  \n23:49\u00a0<tillo>\u00a0has quit  \n23:52\u00a0<DarkKnightCZ>\u00a0has quit  \n23:57\u00a0<tillo>\u00a0has joined #xwiki\n"}