{"id": "dev:IRC.xwikiArchive20151012", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20151012", "title": "IRC Archive for channel #xwiki on 12 October 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Denis>\u00a0has quit  \n00:48\u00a0<Denis>\u00a0has joined #xwiki  \n01:17\u00a0<vmassol>\u00a0has quit  \n01:43\u00a0<OSIMasson>\u00a0has quit  \n01:53\u00a0<cjd>\u00a0has quit  \n01:57\u00a0<cjd>\u00a0has joined #xwiki  \n04:25\u00a0<Denis>\u00a0has quit  \n06:44\u00a0<mflorea>\u00a0has joined #xwiki  \n06:56\u00a0<msmeria>\u00a0has joined #xwiki  \n07:20\u00a0<Ramona>\u00a0has joined #xwiki  \n07:50\u00a0<mflorea>\u00a0has quit  \n08:15\u00a0<cjd>\u00a0has quit  \n08:38\u00a0<vmassol>\u00a0has joined #xwiki  \n08:40\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:46\u00a0<woshilap1n>\u00a0has quit  \n08:53\u00a0<cjd>\u00a0has joined #xwiki  \n09:12\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:26\u00a0<vmassol>\u00a0good morning  \n09:26\u00a0<ol-ow2>\u00a0has joined #xwiki  \n09:26\u00a0<vmassol>\u00a0FYI I'm working on http://jira.xwiki.org/browse/XWIKI-12660  \n09:26\u00a0<vmassol>\u00a0today is release day BTW :)  \n09:26\u00a0<vmassol>\u00a0and I'm the RM  \n09:26\u00a0<vmassol>\u00a0we need to stabilize the CI  \n09:40\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:40\u00a0<Denis>\u00a0has joined #xwiki  \n09:51\u00a0<woshilapin>\u00a0has joined #xwiki  \n09:52\u00a0<Slashman>\u00a0has joined #xwiki  \n09:57\u00a0<mflorea>\u00a0has joined #xwiki  \n09:59\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:09\u00a0<mflorea>\u00a0good morning, there is something wrong with the REST API, seems to cause lots of test failures  \n10:15\u00a0<vrachieru>\u00a0has joined #xwiki  \n10:24\u00a0<gsmeria>\u00a0has quit  \n10:34\u00a0<tmortagne>\u00a0mflorea: yes I'm fixing something again, Restlet messed with their dependencies between between JAX-RS 1 and 2  \n10:34\u00a0<mflorea>\u00a0ok  \n10:34\u00a0<vmassol>\u00a0note that we still have 36 issues opened for 7.3M1 :)  \n10:34\u00a0<vmassol>\u00a0(ie for 7.3)  \n10:35\u00a0<vmassol>\u00a0that's quite a lot  \n10:35\u00a0<vmassol>\u00a0right now we have 2 blockers open  \n10:35\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-12570  \n10:35\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-12165  \n10:36\u00a0<vmassol>\u00a0I'll push them to 7.3M2 since they're not really blockers for M1 IMO  \n10:37\u00a0<vmassol>\u00a0so guys, are we good for the release (except fixing the CI)?  \n10:37\u00a0<vmassol>\u00a0mflorea, tmortagne, gdelhumeau?  \n10:37\u00a0<tmortagne>\u00a0jira is ok I guess yes  \n10:38\u00a0<gdelhumeau>\u00a0I agree  \n10:38\u00a0<gdelhumeau>\u00a0hey  \n10:39\u00a0<gdelhumeau>\u00a0I've built it this morning  \n10:39\u00a0<gdelhumeau>\u00a0I don't have the drawer !  \n10:39\u00a0<gdelhumeau>\u00a0or nested spaces  \n10:40\u00a0<gdelhumeau>\u00a0ok forget  \n10:40\u00a0<vmassol>\u00a0:)  \n10:41\u00a0<gdelhumeau>\u00a0but it's strange because selenium tests are broken too and I see one of them complaining about the drawer  \n10:41\u00a0<gdelhumeau>\u00a0it seems it has been fixed  \n10:55\u00a0<mflorea>\u00a0vmassol: ok on my side  \n10:56\u00a0<vmassol>\u00a0ok let's focus on the ci  \n11:03\u00a0<gsmeria>\u00a0has joined #xwiki  \n11:17\u00a0<tmortagne>\u00a0Repository integration test are working well and it's using a bit of everything in REST API so it should be ok  \n11:18\u00a0<tmortagne>\u00a0AnnotationsTest#addAndDeleteAnnotations is still failing bit should be debugged, maybe it's not really caused by REST API itself or it's doing something wrong that was not visible before  \n11:25\u00a0<vmassol>\u00a0has quit  \n11:25\u00a0<vmassol>\u00a0has joined #xwiki  \n11:35\u00a0<tmortagne>\u00a0note that 7.2 ci is not in a very good shape either and we should probably release a 7.2.1 ASAP give the blockers we fixed already  \n11:51\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:52\u00a0<evalica>\u00a0has joined #xwiki  \n12:40\u00a0<Enygma`>\u00a0tmortagne: http://ci.xwiki.org/job/xwiki-enterprise-test-selenium/lastBuild/org.xwiki.enterprise$xwiki-enterprise-test-selenium/console  \n12:40\u00a0<Enygma`>\u00a0java.lang.AbstractMethodError: javax.ws.rs.core.Response.getStatusInfo()Ljavax/ws/rs/core/Response$StatusType;  \n12:41\u00a0<Enygma`>\u00a0noticed you mentioned something about unimplementtd methods in XCOMMONS-341  \n12:42\u00a0<Enygma`>\u00a0all 3 tests in http://ci.xwiki.org/job/xwiki-enterprise-test-selenium/lastBuild/testReport/ fail for the same reason (Rest call returns a 500 Server error with that exception in the console)  \n12:43\u00a0<Enygma`>\u00a0actually, looks like the same issue as http://ci.xwiki.org/job/xwiki-enterprise-test-rest/lastBuild/org.xwiki.enterprise$xwiki-enterprise-test-rest/console so you might already be aware of it  \n13:22\u00a0<vmassol>\u00a0mflorea: re XWIKI-12678 is this a regression?  \n13:22\u00a0<vmassol>\u00a0(the issues says 7.2 for the affects)  \n13:22\u00a0<mflorea>\u00a0yes  \n13:22\u00a0<vmassol>\u00a0k  \n13:22\u00a0<mflorea>\u00a0looking for the commit  \n13:22\u00a0<vmassol>\u00a0I remember Ludo asking me about this but on older versions  \n13:22\u00a0<vmassol>\u00a0so it was probably something else  \n13:23\u00a0<mflorea>\u00a0on older versions there is http://jira.xwiki.org/browse/XWIKI-10380 but I couldn't reproduce on hsqldb  \n13:23\u00a0<vmassol>\u00a0I wonder what's the relationship with the DB :)  \n13:23\u00a0<vmassol>\u00a0should be easy to reproduce though  \n13:23\u00a0<vmassol>\u00a0(on pgsql)  \n13:24\u00a0<mflorea>\u00a0in order to sync the solr index with the database we iterate them in the same order. So ensuring the same order is critical. It looks like the order in the same on hsqldb but not on postgres for some reason  \n14:00\u00a0<tmortagne>\u00a0Enygma`: (10:34:06 AM) tmortagne: mflorea: yes I'm fixing something again, Restlet messed with their dependencies between between JAX-RS 1 and 2  \n14:01\u00a0<tmortagne>\u00a0need to wait now  \n14:01\u00a0<Enygma`>\u00a0ok, thanks  \n14:01\u00a0<tmortagne>\u00a0restlet have JAX-RS 2 listed in its dependencies but it's implementing JAX-RS 1...  \n14:03\u00a0<tmortagne>\u00a0we should consider putting XWIKI-12674 in a roadmap in not too long  \n14:12\u00a0<Ramona>\u00a0has quit  \n14:12\u00a0<Ramona2>\u00a0has joined #xwiki  \n14:24\u00a0<gsmeria>\u00a0has quit  \n14:29\u00a0<gsmeria>\u00a0has joined #xwiki  \n14:39\u00a0<gsmeria>\u00a0has quit  \n14:47\u00a0<gsmeria>\u00a0has joined #xwiki  \n15:00\u00a0<msmeria>\u00a0has quit  \n15:01\u00a0<vmassol>\u00a0guys, I'm back on CI, what's the status? Is there something I can check or should I wait for the current build to finish?  \n15:02\u00a0<tmortagne>\u00a0vmassol: there is a mail test failing since a long time now on both master and 7.2, I guess would be the best fit for you  \n15:02\u00a0<vmassol>\u00a0yes it's a flicker that I need to fix. I spent 4 hours on it already with no luck but I need to get back to it at some point  \n15:03\u00a0<tmortagne>\u00a0it's vary stable on 7.2 for a cliker (34 builds)  \n15:03\u00a0<tmortagne>\u00a0s/vary/very/  \n15:03\u00a0<vmassol>\u00a0checkiing if it's the one I have in mind  \n15:03\u00a0<tmortagne>\u00a0s/cliker/fliker/  \n15:03\u00a0<tmortagne>\u00a0http://ci.xwiki.org/job/xwiki-platform-7.2.x/lastBuild/org.xwiki.platform$xwiki-platform-mail-test-tests/testReport/org.xwiki.mail.test.ui/MailTest/testMail/  \n15:03\u00a0<vmassol>\u00a0ah this is different  \n15:04\u00a0<vmassol>\u00a0it('s not the one I had in mind  \n15:04\u00a0<vmassol>\u00a0checking this one  \n15:04\u00a0<vmassol>\u00a0hmm I thought I fixed this one actually  \n15:04\u00a0<vmassol>\u00a0maybe I fixed it only on master, checking  \n15:04\u00a0<tmortagne>\u00a0probably, it does not seems to happen anymore on master, did not noticed  \n15:05\u00a0<Ramona2>\u00a0has quit  \n15:06\u00a0<vmassol>\u00a0yep that's it, fixing  \n15:09\u00a0<cthiel>\u00a0has joined #xwiki  \n15:13\u00a0<cthiel>\u00a0Hi everyone, I was wondering if there is a feature in XWiki that shows a warning if you are browsing a page version that is not the latests, ie. say if I was browsing http://platform.xwiki.org/xwiki/bin/viewrev/Features/VersionControl?rev=21.1 it would show that there is a more recent revision of that page?  \n15:17\u00a0<vmassol>\u00a0cthiel: this doesn't exist OOB but you could script it  \n15:18\u00a0<vmassol>\u00a0for example by having a custom skin and override one of the vm files  \n15:18\u00a0<vmassol>\u00a0depends where you'd want to have the message displayed  \n15:19\u00a0<cthiel>\u00a0vmassol: got it!  \n16:49\u00a0<gsmeria>\u00a0has quit  \n17:00\u00a0<vrachieru>\u00a0has quit  \n17:01\u00a0<vrachieru>\u00a0has joined #xwiki  \n17:01\u00a0<vmassol>\u00a0ok doing a pass on the CI to se what's left  \n17:02\u00a0<vmassol>\u00a0extension test: any idea what's http://ci.xwiki.org/job/xwiki-enterprise-test-extension/org.xwiki.enterprise$xwiki-enterprise-test-extension/1776/testReport/org.apache.maven.surefire.junit4/JUnit4Provider/org\\_xwiki\\_test\\_ui\\_AllTests/ ?  \n17:03\u00a0<vmassol>\u00a0BTW would be nice to fix the solr cache issue. If you have any idea mflorea....  \n17:04\u00a0<mflorea>\u00a0vmassol: http://jira.xwiki.org/browse/XWIKI-11633 ?  \n17:04\u00a0<vmassol>\u00a0it's different I think  \n17:05\u00a0<mflorea>\u00a0what cache issue then?  \n17:05\u00a0<vmassol>\u00a0here: http://ci.xwiki.org/job/xwiki-enterprise-test-extension/org.xwiki.enterprise$xwiki-enterprise-test-extension/1776/testReport/org.apache.maven.surefire.junit4/JUnit4Provider/org\\_xwiki\\_test\\_ui\\_AllTests/  \n17:05\u00a0<vmassol>\u00a0org.infinispan.IllegalLifecycleStateException: ISPN000323: Cache 'configuration.document.space' is in 'TERMINATED' state and so it does not accept new invocations. Either restart it or recreate the cache container.  \n17:05\u00a0<vmassol>\u00a0at shutdown  \n17:05\u00a0<OSIMasson>\u00a0has joined #xwiki  \n17:06\u00a0<vmassol>\u00a0tmortagne: I have the feeling that http://ci.xwiki.org/job/xwiki-enterprise-test-extension/org.xwiki.enterprise$xwiki-enterprise-test-extension/1776/testReport/org.apache.maven.surefire.junit4/JUnit4Provider/org\\_xwiki\\_test\\_ui\\_AllTests/ is caused by the restlet changes, is that possible?  \n17:07\u00a0<mflorea>\u00a0vmassol: I'm not sure that is related to Solr  \n17:07\u00a0<vmassol>\u00a0mflorea: you're talking about what? :)  \n17:07\u00a0<vmassol>\u00a0the test failure is NOT caused by solr for sure  \n17:07\u00a0<mflorea>\u00a0(18:03:32) vmassol: BTW would be nice to fix the solr cache issue. If you have any idea mflorea....  \n17:07\u00a0<vmassol>\u00a0yes  \n17:08\u00a0<vmassol>\u00a0indeed  \n17:08\u00a0<vmassol>\u00a0looks like an infinispan issue  \n17:08\u00a0<vmassol>\u00a0(I mixed up)  \n17:08\u00a0<mflorea>\u00a0ok  \n17:10\u00a0<vmassol>\u00a0created http://jira.xwiki.org/browse/XWIKI-12679 for this issue  \n17:13\u00a0<mflorea>\u00a0actually it may be related to Solr  \n17:13\u00a0<mflorea>\u00a0checking  \n17:17\u00a0<vmassol>\u00a0mflorea: is this a flicker (I don't remember it): http://ci.xwiki.org/job/xwiki-enterprise-test-wysiwyg/lastCompletedBuild/org.xwiki.enterprise$xwiki-enterprise-test-wysiwyg/testReport/org.xwiki.test.wysiwyg/LinkTest/testValidationOnCurrentPageAttachmentsSelector/  \n17:18\u00a0<mflorea>\u00a0looks like a flicker  \n17:18\u00a0<vmassol>\u00a0I see import.png in AdminSheet.xml  \n17:19\u00a0<vmassol>\u00a0hmm this one doesn't seem a flicker: http://ci.xwiki.org/job/xwiki-platform/org.xwiki.platform$xwiki-platform-annotation-test-tests/1988/testReport/org.xwiki.annotation.test.ui/AnnotationsTest/addAndDeleteAnnotations/  \n17:19\u00a0<mflorea>\u00a0yes, either the PO code that waits for the tree finder results needs to be improved, or there are some new images added recently that appear before the import png. But since the results don't seem to be related to import.png I think it's the first option  \n17:20\u00a0<mflorea>\u00a0yes, that one is also caused by RESZT  \n17:20\u00a0<mflorea>\u00a0a NPE in the annotation rest service  \n17:23\u00a0<vmassol>\u00a0tmortagne: you're on it?  \n17:24\u00a0<vmassol>\u00a0Enygma`: this one http://ci.xwiki.org/job/xwiki-platform\\_Sonar/org.xwiki.platform$xwiki-platform-mail-test-tests/442/testReport/org.xwiki.mail.test.ui/MailTest/testMail/ seems to have failed because AdministrationPage.gotoSpaceAdministrationPage(\"XWiki\") seems to have failed according to the screenshot. I wonder how that's possible\u2026  \n17:25\u00a0<vmassol>\u00a0so as a summary we cannot release ATM because of rest-related issues  \n17:25\u00a0<vmassol>\u00a0and that's the only real problem we have in CI ATM  \n17:49\u00a0<Enygma`>\u00a0vmassol: no idea. Having a quick look to see if I can reproduce  \n18:01\u00a0<Enygma`>\u00a0vmassol: [INFO] BUILD SUCCESS locally  \n18:02\u00a0<vmassol>\u00a0yes me too  \n18:02\u00a0<vmassol>\u00a0the question is more how it could happen  \n18:03\u00a0<gdelhumeau>\u00a0has left #xwiki  \n18:06\u00a0<cjd>\u00a0has quit  \n18:07\u00a0<tmortagne>\u00a0vmassol: yes I'm on REST stuff, looks like there is still a bug with the context (we set something in the context and several filter after that the context is completely different)  \n18:08\u00a0<tmortagne>\u00a0I think I will just revert restlet upgrade...  \n18:12\u00a0<vmassol>\u00a0yes, probably safer  \n18:21\u00a0<mflorea>\u00a0vmassol: question about the CM. I have the role SolrInstance with two implementations EmbeddedSolrInstance and RemoteSolrInstance. I also have a SolrInstanceProvider (Provider<SolrInstance>) that returns the configured Solr instance. In a separate component X I use the Provider<SolrInstance>.  \n18:21\u00a0<mflorea>\u00a0From the PoV of the CM there is no relation/dependency between my component X and the Solr implementations. Is there a way to ensure that my component X is disposed after the configured Solr implementation?  \n18:25\u00a0<mflorea>\u00a0I guess I could add @DisposePriority(?)  \n18:26\u00a0<mflorea>\u00a0btw, the documentation is misleading http://extensions.xwiki.org/xwiki/bin/view/Extension/Component+Module#HComponentDisposal  \n18:26\u00a0<mflorea>\u00a0\"A higher value will mean disposing before all other components not having this annotation\"  \n18:27\u00a0<mflorea>\u00a0but then the example uses a higher value and the comment says \"called after other components in order to shut down the database late\"  \n18:30\u00a0<mflorea>\u00a0so a higher DisposePriority is executed before or after the rest?  \n18:34\u00a0<tmortagne>\u00a0the documentation is wrong, from what I see as usual with priority the objects are ordered in ascending order, so the lowest value is executed first  \n18:36\u00a0<vmassol>\u00a0(reading)  \n18:37\u00a0<Ramona>\u00a0has joined #xwiki  \n18:39\u00a0<vmassol>\u00a0code is here : https://github.com/xwiki/xwiki-commons/commit/43870d35fb7742e41add0bce877e0c3e09e5a9b4#diff-8b84b17a29b062f2b0ad5dc4b4de4b1cR588  \n18:40\u00a0<mflorea>\u00a0ok, so as tmortagne said  \n18:40\u00a0<mflorea>\u00a0the example is right but the text before the example is wrong  \n18:41\u00a0<vmassol>\u00a0unit test: https://github.com/xwiki/xwiki-commons/commit/43870d35fb7742e41add0bce877e0c3e09e5a9b4#diff-29d5d86bb2618e98652527d6e3347c52R530  \n18:41\u00a0<vmassol>\u00a0so indeed 2000 for ex is a low priority  \n18:41\u00a0<vmassol>\u00a0(lower than 1000, the default)  \n18:41\u00a0<vmassol>\u00a0fixing the doc  \n18:41\u00a0<vmassol>\u00a0ah you're on it  \n18:41\u00a0<vmassol>\u00a0:)  \n18:41\u00a0<vmassol>\u00a0(you have it locked)  \n18:43\u00a0<mflorea>\u00a0fixed  \n18:43\u00a0<vmassol>\u00a0thanks  \n18:44\u00a0<mflorea>\u00a0now, regarding my example, there's no other approach besides using @DisposePriority  \n18:44\u00a0<mflorea>\u00a0because there's no hard dep between the components  \n18:46\u00a0<mflorea>\u00a0so the CM cannot determine the dispose order without explicit priority  \n18:47\u00a0<vmassol>\u00a0ok makes sense  \n18:48\u00a0<tmortagne>\u00a0has quit  \n18:49\u00a0<mflorea>\u00a0has quit  \n18:49\u00a0<abusenius>\u00a0has joined #xwiki  \n18:53\u00a0<cjd>\u00a0has joined #xwiki  \n18:55\u00a0<evalica>\u00a0has quit  \n18:56\u00a0<Enygma`>\u00a0has quit  \n18:57\u00a0<Ramona>\u00a0has quit  \n19:04\u00a0<KermitTheFragger>\u00a0has quit  \n19:27\u00a0<vrachieru>\u00a0has quit  \n19:28\u00a0<vrachieru>\u00a0has joined #xwiki  \n19:59\u00a0<ol-ow2>\u00a0has quit  \n20:39\u00a0<Slashman>\u00a0has quit  \n20:41\u00a0<Ramona>\u00a0has joined #xwiki  \n21:06\u00a0<Ramona>\u00a0has quit  \n21:08\u00a0<vmassol>\u00a0has quit  \n22:34\u00a0<abusenius>\u00a0has quit  \n22:40\u00a0<vmassol>\u00a0has joined #xwiki  \n23:36\u00a0<cjd>\u00a0has quit  \n23:41\u00a0<cjd>\u00a0has joined #xwiki\n"}