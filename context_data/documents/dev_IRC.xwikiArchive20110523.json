{"id": "dev:IRC.xwikiArchive20110523", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20110523", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:29\u00a0<jvelociter>\u00a0has quit  \n00:29\u00a0<jvelociter>\u00a0has joined #xwiki  \n00:38\u00a0<jvelociter\\_>\u00a0has joined #xwiki  \n00:41\u00a0<jvelociter>\u00a0has quit  \n00:41\u00a0<jvelociter\\_>\u00a0is now known as <jvelociter>  \n01:50\u00a0<abusenius>\u00a0has quit  \n02:06\u00a0<jvelociter>\u00a0has quit  \n05:16\u00a0<DrLou>\u00a0has quit  \n07:16\u00a0<mflorea>\u00a0has joined #xwiki  \n07:54\u00a0<vmassol>\u00a0has joined #xwiki  \n07:59\u00a0<vmassol>\u00a0has quit  \n08:08\u00a0<sburjan`>\u00a0has quit  \n08:09\u00a0<sburjan`>\u00a0has joined #xwiki  \n08:42\u00a0<vmassol>\u00a0has joined #xwiki  \n08:57\u00a0<drake01>\u00a0has joined #xwiki  \n09:12\u00a0<drake01>\u00a0has quit  \n09:12\u00a0<drake01>\u00a0has joined #xwiki  \n09:16\u00a0<drake01\\_\\_>\u00a0has joined #xwiki  \n09:18\u00a0<drake01\\_\\_>\u00a0has quit  \n09:18\u00a0<drake01>\u00a0has quit  \n09:22\u00a0<lucaa>\u00a0has joined #xwiki  \n09:23\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:23\u00a0<Denis>\u00a0has joined #xwiki  \n09:27\u00a0<lucaa>\u00a0has quit  \n09:28\u00a0<arkub>\u00a0has joined #xwiki  \n09:31\u00a0<sburjan>\u00a0has joined #xwiki  \n09:46\u00a0<+tmortagne>\u00a0vmassol: HI  \n09:46\u00a0<+tmortagne>\u00a0looks like there is issues with the jgroups upgrade, some method changed arround jmx, see http://ci.xwiki.org/view/Functional%20Tests/job/xwiki-enterprise-tests/org.xwiki.enterprise$xwiki-enterprise-test-cluster/635/console  \n09:46\u00a0<vmassol>\u00a0tmortagne: hi  \n09:46\u00a0<+tmortagne>\u00a0java.lang.NoSuchMethodError: org.jgroups.jmx.JmxConfigurator.registerChannel(Lorg/jgroups/JChannel;Ljavax/management/MBeanServer;Ljava/lang/String;)V  \n09:46\u00a0<vmassol>\u00a0ok I muste have made a mistake because I built it locally  \n09:46\u00a0<vmassol>\u00a0I remember that change before (I had noticied it) but I couldn't reproduce it again locally when rebuilding fully the platform  \n09:46\u00a0<+tmortagne>\u00a0did you had to change this method ? meybe the issue is that for some reason XE is build with the old version  \n09:47\u00a0<vmassol>\u00a0nope I didn't change it since it was building fine  \n09:47\u00a0<vmassol>\u00a0checking again  \n09:47\u00a0<+tmortagne>\u00a0checking test workspace  \n09:47\u00a0<vmassol>\u00a0it should fail at build time right?  \n09:48\u00a0<vmassol>\u00a0at org.xwiki.observation.remote.internal.jgroups.JGroupsNetworkAdapter.startChannel(JGroupsNetworkAdapter.java:137)  \n09:48\u00a0<+tmortagne>\u00a0the test is using jgroups-2.12.1.Final.jar so looks like the right versionn  \n09:48\u00a0<vmassol>\u00a0it shouldn't pass the unit tests for remote observation either  \n09:48\u00a0<+tmortagne>\u00a0well it fail in test here  \n09:48\u00a0<vmassol>\u00a0func tests  \n09:48\u00a0<+tmortagne>\u00a0so that mean it built  \n09:50\u00a0<vmassol>\u00a0ah no wait  \n09:50\u00a0<vmassol>\u00a0I was thinking about another error I noticed before  \n09:50\u00a0<vmassol>\u00a0there's no mbean server here during unit tests  \n09:50\u00a0<vmassol>\u00a0but it's strange that it compiles fine  \n09:50\u00a0<+tmortagne>\u00a0yes, an error like that should never build  \n09:51\u00a0<+tmortagne>\u00a0unless it has been built with another version of jgroups  \n09:51\u00a0<+tmortagne>\u00a0but then it would be weird since that' the only thing which depends on jgroups AFAIK  \n09:53\u00a0<vmassol>\u00a0here: http://ci.xwiki.org/job/xwiki-platform/194/org.xwiki.platform$xwiki-platform-observation-remote/console  \n09:53\u00a0<vmassol>\u00a0it says it's using 2.12.1  \n09:53\u00a0<sburjan`>\u00a0has quit  \n09:53\u00a0<vmassol>\u00a0(that's the latest build from platform)  \n09:53\u00a0<vmassol>\u00a0so it's building with the right version  \n09:53\u00a0<vmassol>\u00a0acutally it says it's usign 2.12.1 for the unit tests  \n09:54\u00a0<vmassol>\u00a0but that's probably true for compiling too  \n09:55\u00a0<vmassol>\u00a0tmortagne: there are lots of strange things in the log for http://ci.xwiki.org/job/xwiki-enterprise-tests/org.xwiki.enterprise$xwiki-enterprise-test-cluster/635/testReport/org.apache.maven.surefire.junit4/JUnit4Provider/org\\_xwiki\\_test\\_cluster\\_AllTests/  \n09:56\u00a0<vmassol>\u00a0lots of components are overridden  \n09:56\u00a0<vmassol>\u00a0which is not normal  \n09:56\u00a0<vmassol>\u00a0looks like some duplicated jars  \n09:56\u00a0<vmassol>\u00a0IMO it's using an old remote observation jar  \n09:57\u00a0<+tmortagne>\u00a0vmassol: no  \n09:57\u00a0<+tmortagne>\u00a0it's because of the duplicate between web and XE  \n09:57\u00a0<+tmortagne>\u00a0until we get rid of web standard  \n09:57\u00a0<vmassol>\u00a0do you know the path on the agent to that build?  \n09:57\u00a0<vmassol>\u00a0to verify web-inf/lib  \n09:58\u00a0<+tmortagne>\u00a0you can access the workspace directly from jenkins  \n09:58\u00a0<+tmortagne>\u00a0http://ci.xwiki.org/view/Functional%20Tests/job/xwiki-enterprise-tests/org.xwiki.enterprise$xwiki-enterprise-test-cluster/ws/target/xwiki-enterprise-jetty-hsqldb-3.1-SNAPSHOT/webapps/xwiki/WEB-INF/lib/  \n09:58\u00a0<+tmortagne>\u00a0you have SNAPSHOT and date based versions of xwiki jars as usual  \n09:59\u00a0<+tmortagne>\u00a0bu they should be pretty much the identical  \n09:59\u00a0<vmassol>\u00a0nope  \n09:59\u00a0<vmassol>\u00a0there are dups  \n09:59\u00a0<vmassol>\u00a0jgroups 2.6.13 and 2.12.1  \n09:59\u00a0<vmassol>\u00a0that explains the problem  \n10:00\u00a0<+tmortagne>\u00a0indeed did not seen the second one, but that doe snot explain the issue if you did not change anything  \n10:01\u00a0<vmassol>\u00a0maybe we should finish teh removal of the web standard distribution\u2026.  \n10:01\u00a0<+tmortagne>\u00a0unless the signature changed but not the way to call it (some implements/extends changed)  \n10:01\u00a0<vmassol>\u00a0let's think if there's a simpler solution for now first  \n10:02\u00a0<+tmortagne>\u00a0well I don't see from were the old jgroups comes  \n10:03\u00a0<+tmortagne>\u00a0unless one of the duplicated repote observation is older  \n10:03\u00a0<+tmortagne>\u00a0and it's just a timing issue  \n10:03\u00a0<+tmortagne>\u00a0we can just try to rebuild all and see  \n10:05\u00a0<lucaa>\u00a0has joined #xwiki  \n10:09\u00a0<+tmortagne>\u00a0vmassol: something very weird: web standard war itself have a duplicated jgroups jar  \n10:09\u00a0<+tmortagne>\u00a0don't know how it's possible with maven  \n10:09\u00a0<vmassol>\u00a0ok I'll check it  \n10:09\u00a0<+tmortagne>\u00a0unless the groupid changed  \n10:09\u00a0<vmassol>\u00a0you mean you can reproduce locally?  \n10:09\u00a0<vmassol>\u00a0it did change  \n10:09\u00a0<+tmortagne>\u00a0no I mean I have it on the last one built by jenkins  \n10:09\u00a0<vmassol>\u00a0(AFAIR)  \n10:09\u00a0<+tmortagne>\u00a0ok so we have several thing depending on jgroups with different versions then  \n10:10\u00a0<vmassol>\u00a0I'm finishing a git merge and I can check after  \n10:10\u00a0<+tmortagne>\u00a0i'm looking  \n10:11\u00a0<+lucaa>\u00a0guys, it seems a lot of our tests are failing on ci because xwiki could not be started in 120 seconds  \n10:11\u00a0<+lucaa>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-tests I mean  \n10:12\u00a0<+tmortagne>\u00a0vmassol: it's jbosscache, it used to be excluded re-excluding it now since it's not used in the context of cache by us  \n10:12\u00a0<vmassol>\u00a0ok make sure you add a meaningful comment so that we remember ;)  \n10:13\u00a0<jvelociter>\u00a0has joined #xwiki  \n10:13\u00a0<jvelociter\\_>\u00a0has joined #xwiki  \n10:13\u00a0<jvelociter>\u00a0has quit  \n10:13\u00a0<jvelociter\\_>\u00a0is now known as <jvelociter>  \n10:16\u00a0<+tmortagne>\u00a0vmassol: it's a useless dependency from cache POV anyway  \n10:17\u00a0<vmassol>\u00a0choose the comment you prefer then :)  \n10:43\u00a0<evalica>\u00a0has joined #xwiki  \n11:07\u00a0<abusenius>\u00a0has joined #xwiki  \n11:09\u00a0<vmassol>\u00a0tmortagne: seems there are stuck jvm on the agent  \n11:09\u00a0<vmassol>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-tests/org.xwiki.enterprise$xwiki-enterprise-test-misc/637/testReport/org.xwiki.test.integration/XWikiTestSetup/junit\\_framework\\_TestSuite\\_2f242b11/  \n11:12\u00a0<+tmortagne>\u00a0vmassol: indeed  \n11:12\u00a0<+tmortagne>\u00a0killing it  \n11:12\u00a0<vmassol>\u00a0ok  \n11:13\u00a0<vmassol>\u00a0so who's doing the release? cjdelisle? or sdumitriu?  \n11:14\u00a0<@cjdelisle>\u00a0I'm seeing what needs to be done to make xwiki start up.  \n11:16\u00a0<+tmortagne>\u00a0vmassol: looks liek there is two jenkins slaves running on agent-2  \n11:17\u00a0<vmassol>\u00a0weird  \n11:17\u00a0<+tmortagne>\u00a0at leats I can see two \"java -XX:MaxPermSize=128m -Xmx1024m -jar /home/hudsonagent/bin/slave.jar\" in ps aux  \n11:19\u00a0<+tmortagne>\u00a0seems ok now  \n11:35\u00a0<+tmortagne>\u00a0vmassol: I have to pit back jgroups in cache since jboss directly depends on it even when it's not using it...  \n11:35\u00a0<vmassol>\u00a0ok  \n11:35\u00a0<+tmortagne>\u00a0not sure what is the cleanest  \n11:35\u00a0<+tmortagne>\u00a0to not have conflict  \n11:36\u00a0<+tmortagne>\u00a0one solution is to make sure we have observation remote before cache in web standard  \n11:36\u00a0<+tmortagne>\u00a0but it's a bit fragile  \n11:36\u00a0<+tmortagne>\u00a0and it's actually not even enough  \n11:37\u00a0<+tmortagne>\u00a0all I can see if depending on jgroups in cache project and exclude jboss comming from jbosscache  \n11:37\u00a0<vmassol>\u00a0In parallel to what you're doing I'm going to continue my local refactoring to remove the distribution from web standard. After lunch  \n11:37\u00a0<+tmortagne>\u00a0I could try to move to infinispan but sounds like too much for 3.1  \n11:38\u00a0<vmassol>\u00a0yes sounds big and not sure it would solve this issue  \n11:38\u00a0<vmassol>\u00a0for 3.1 maybe not, but for 3.1M2 sounds big  \n11:40\u00a0<+tmortagne>\u00a0let put jgroups version in platform-core with some comments  \n11:41\u00a0<@cjdelisle>\u00a0Looks like xwiki is still nonfunctional, if today is release day then I will need to branch from an earlier revision when it was working.  \n11:42\u00a0<vmassol>\u00a0cjdelisle: it's not like this  \n11:42\u00a0<vmassol>\u00a0the release manager is in charge of coordinating efforts to make the release possible  \n11:42\u00a0<vmassol>\u00a0I mean we should all be doing this but the RM can push people even more  \n11:42\u00a0<vmassol>\u00a0we're already more than 10 days late now  \n11:43\u00a0<vmassol>\u00a0IMO we should be able to get all tests passing today  \n11:43\u00a0<vmassol>\u00a0(I hope :))  \n11:43\u00a0<vmassol>\u00a0cjdelisle: err wdym by non functional, what's not working?  \n11:43\u00a0<@cjdelisle>\u00a0Here's my way of pushing, revert people's commits until things work (evil grin)  \n11:44\u00a0<vmassol>\u00a0cjdelisle: that's a good strategy  \n11:45\u00a0<@cjdelisle>\u00a0I'm actually thinking that to keep things working right a release manager needs to be vetting commits all along and not pulling things unless they are working.  \n11:45\u00a0<@cjdelisle>\u00a0todo...  \n11:46\u00a0<vmassol>\u00a0yes something like a few days before the release maybe  \n11:46\u00a0<@cjdelisle>\u00a0http://ci.xwiki.org/job/xwiki-enterprise-tests/org.xwiki.enterprise$xwiki-enterprise-test-ui/635/testReport/junit/org.xwiki.test.ui/AllTests/org\\_xwiki\\_test\\_ui\\_AllTests/  \n11:46\u00a0<vmassol>\u00a0this is not an error  \n11:46\u00a0<vmassol>\u00a0it's just port 9010 used on the agent  \n11:46\u00a0<vmassol>\u00a0thomas fixed that normally  \n11:47\u00a0<@cjdelisle>\u00a0ahh ok  \n11:49\u00a0<+tmortagne>\u00a0vmassol: I get the following log when runing unit test on Eclipse  \n11:49\u00a0<+tmortagne>\u00a011:48:02,349 |-ERROR in ch.qos.logback.core.joran.spi.ConfigurationWatchList@34bf1d3b - URL [jar:file:/media/data/projets/\\_maven-repository/org/xwiki/commons/xwiki-commons-test/3.1-SNAPSHOT/xwiki-commons-test-3.1-SNAPSHOT.jar!/logback-test.xml] is not of type file  \n11:49\u00a0<+tmortagne>\u00a0here it's a jbosscache test  \n11:49\u00a0<vmassol>\u00a0tmortagne: yes  \n11:49\u00a0<vmassol>\u00a0that's normal  \n11:49\u00a0<vmassol>\u00a0see http://jira.xwiki.org/jira/browse/XCOMMONS-9  \n11:50\u00a0<+tmortagne>\u00a0vmassol: ok  \n11:50\u00a0<vmassol>\u00a0if we really want it fixed now we'll need to upload a patched version of slf4j in our remote repo  \n11:51\u00a0<vmassol>\u00a0s/slf4J/logback/  \n11:51\u00a0<+tmortagne>\u00a0no it's ok for now unless new version is planned in a long tim  \n11:51\u00a0<+tmortagne>\u00a0I have to go now, back after lunch  \n11:51\u00a0<lucaa>\u00a0has quit  \n11:52\u00a0<vmassol>\u00a0k me too  \n12:06\u00a0<evalica>\u00a0has quit  \n12:13\u00a0<abusenius>\u00a0has quit  \n12:22\u00a0<vmassol>\u00a0cjdelisle: did you receive a crash test email on the new infra@ list?  \n12:22\u00a0<vmassol>\u00a0(we're testing)  \n12:23\u00a0<@cjdelisle>\u00a0yup  \n12:23\u00a0<vmassol>\u00a0ok good  \n12:29\u00a0<sdumitriu>\u00a0has joined #xwiki  \n12:30\u00a0<vmassol>\u00a0anyone here has reviewed the openid patches we got from the previous summer of code and would know roughly how long it would take to integrate them?  \n12:30\u00a0<vmassol>\u00a0especially sdumitriu, cjdelisle and tmortagne  \n12:31\u00a0<@sdumitriu>\u00a0I've been planning to do that for a looong time  \n12:31\u00a0<@sdumitriu>\u00a0But no, I don't know how long would it take to integrate them  \n12:31\u00a0<vmassol>\u00a0sdumitriu, cjdelisle: just sent you a mail about it  \n12:32\u00a0<@cjdelisle>\u00a0running ui-tests and getting coffee bbiab  \n12:32\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:53\u00a0<jamesxu>\u00a0has joined #xwiki  \n12:58\u00a0<mflorea>\u00a0has quit  \n12:58\u00a0<Enygma`>\u00a0has quit  \n13:07\u00a0<abusenius>\u00a0has joined #xwiki  \n13:08\u00a0<Denis>\u00a0has quit  \n13:12\u00a0<@cjdelisle>\u00a0who was it that decided how .pom files should be downloaded from remote repositories?  \n13:13\u00a0<@cjdelisle>\u00a0I'd like to have a little talk with them  \n13:17\u00a0<Denis>\u00a0has joined #xwiki  \n13:20\u00a0<abusenius>\u00a0has quit  \n13:31\u00a0<@sdumitriu>\u00a0cjdelisle: WDYM?  \n13:31\u00a0<@sdumitriu>\u00a0The way Maven downloads poms, or something related to XWiki?  \n13:32\u00a0<@cjdelisle>\u00a0just the way Maven downloads them  \n13:33\u00a0<@cjdelisle>\u00a0every package pom from every known repo every single build and not even in parallel :/  \n13:41\u00a0<mflorea>\u00a0has joined #xwiki  \n13:48\u00a0<JSeymour>\u00a0has joined #xwiki  \n13:49\u00a0<jamesxu>\u00a0I run the xwiki-enterprise-jetty-hsqldb-3.1-SNAPSHOT downloaded from xwiki, but when I need to edit a page, the wysiwyg editor can not be successfully loaded, the loading icon running all the time  \n13:49\u00a0<@sdumitriu>\u00a0Try to force a cache refresh  \n13:49\u00a0<jamesxu>\u00a0ok  \n13:50\u00a0<jamesxu>\u00a0Thanks sdumitriu, it works now~~~  \n13:51\u00a0<@sdumitriu>\u00a0mflorea: Can't GWT make sure that there are no cache issues?  \n13:54\u00a0<DrLou>\u00a0has joined #xwiki  \n13:55\u00a0<+jvelociter>\u00a0vmassol: re Open ID you are taking about XWIKI-2588 ?  \n13:56\u00a0<vmassol>\u00a0jvelociter: yes and generally about openid in xwiki  \n13:56\u00a0<vmassol>\u00a0(xwiki sas could have a need to have it)  \n13:56\u00a0<+mflorea>\u00a0sdumitriu: how? add a token in the URL? that's out of GWT scope IMO.  \n13:56\u00a0<@sdumitriu>\u00a0mflorea: Yes, generate different URLs  \n13:56\u00a0<DrLou>\u00a0has quit  \n13:57\u00a0<+jvelociter>\u00a0vmassol: the patches have been reveiewd several times (by me, by caleb I think by Thomas too)  \n13:57\u00a0<vmassol>\u00a0jer   \n13:57\u00a0<vmassol>\u00a0oops  \n13:57\u00a0<+jvelociter>\u00a0but there is still work for a proper integration  \n13:57\u00a0<vmassol>\u00a0jvelociter: adding you to the mail  \n13:57\u00a0<+mflorea>\u00a0sdumitriu: the URL that pulls the GWT code is written by us. It's a jsfx.use call  \n13:57\u00a0<+jvelociter>\u00a0ok  \n13:58\u00a0<vmassol>\u00a0done  \n14:06\u00a0<+jvelociter>\u00a0answered  \n14:08\u00a0<jvdrean1>\u00a0has joined #xwiki  \n14:08\u00a0<vmassol>\u00a0thanks  \n14:09\u00a0<arkub>\u00a0has quit  \n14:35\u00a0<vmassol>\u00a0has quit  \n14:36\u00a0<vmassol>\u00a0has joined #xwiki  \n14:45\u00a0<abusenius>\u00a0has joined #xwiki  \n14:49\u00a0<sdumitriu>\u00a0has quit  \n14:50\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:08\u00a0<vmassol>\u00a0guys I have a first version of XWIKI-6581 that seems to work  \n15:08\u00a0<vmassol>\u00a0should I commit it now or should I wait for 3.1RC1?  \n15:12\u00a0<@cjdelisle>\u00a0IMO go ahead as long as it doesn't break anything  \n15:12\u00a0<vmassol>\u00a0cjdelisle: ahah  \n15:13\u00a0<vmassol>\u00a0:)  \n15:13\u00a0<@cjdelisle>\u00a0I'm building locally and it looks like the single most expensive part of the build is downloading maven metadata.  \n15:13\u00a0<vmassol>\u00a0the point is to try to fix the duplication issue we currently have  \n15:13\u00a0<vmassol>\u00a0I think I'll go ahead. It may require tuning a few things here and there but I don't see anything that should block us for a long time  \n15:13\u00a0<vmassol>\u00a0tmortagne: any opinion?  \n15:14\u00a0<@cjdelisle>\u00a0I just setup a local hudson engine because I anticipated having to tinker with the build a lot before it's good and I think I'm going ti start using -o on my local engine.  \n15:14\u00a0<@cjdelisle>\u00a0build everything in offline mode then so an online build maybe once a day  \n15:18\u00a0<@cjdelisle>\u00a0Also I'm running 4 executors on 1 slave node on local and I don't see any locking issues so far  \n15:18\u00a0<@sdumitriu>\u00a0vmassol: +1 for committing now  \n15:18\u00a0<vmassol>\u00a0ok will commit in a few minutes  \n15:18\u00a0<vmassol>\u00a0thanks  \n15:18\u00a0<xwikibot>\u00a0has joined #xwiki  \n15:19\u00a0<+tmortagne>\u00a0sure  \n15:20\u00a0<vmassol>\u00a0done  \n15:21\u00a0<+tmortagne>\u00a0vmassol: note that we will still have the same web vs XE issue with XEM (vs XE) but it's only for two plugins  \n15:22\u00a0<vmassol>\u00a0yes indeed we'll need to find a solution for that  \n15:22\u00a0<vmassol>\u00a0tmortagne: I haven't checked the xem build yet  \n15:22\u00a0<vmassol>\u00a0I hope it's depending on the xe war :)  \n15:22\u00a0<+tmortagne>\u00a0either use provied or exclusions  \n15:22\u00a0<+tmortagne>\u00a0yes it is  \n15:22\u00a0<+tmortagne>\u00a0which is why there is the issue  \n15:23\u00a0<vmassol>\u00a0indeed  \n15:24\u00a0<+tmortagne>\u00a0vmassol: the new web does not contains skins ? only template and resources folders ?  \n15:25\u00a0<vmassol>\u00a0yes that's what I've done  \n15:25\u00a0<+tmortagne>\u00a0ok  \n15:25\u00a0<vmassol>\u00a0we'll need to improve stuff in the future  \n15:25\u00a0<vmassol>\u00a0for ex there are config files that we need to handle differently  \n15:25\u00a0<vmassol>\u00a0to be more \"componentized\"  \n15:28\u00a0<vmassol>\u00a0also I haven't split into 2 modules  \n15:28\u00a0<vmassol>\u00a0(one for templates and one for other resources)  \n15:28\u00a0<+tmortagne>\u00a0you mean component related configuration that should not be in the central configuration resource project ?  \n15:28\u00a0<vmassol>\u00a0I'm not sure if we really want the split yet  \n15:28\u00a0<vmassol>\u00a0I mean config files that should probably be there only if you add the corresponding module when creating your war  \n15:28\u00a0<+tmortagne>\u00a0yep  \n15:33\u00a0<+tmortagne>\u00a0vmassol: looks ok even if no super easy to review but jenkins to find any issue I think  \n15:33\u00a0<+tmortagne>\u00a0just don't see log4j filtering anymore in XE (used to be in web)  \n15:34\u00a0<vmassol>\u00a0it is there  \n15:34\u00a0<vmassol>\u00a0I need to remove the todo though  \n15:34\u00a0<+tmortagne>\u00a0I don't see it anywhere in https://github.com/xwiki/xwiki-enterprise/commit/f43e7bc8896fc52d72deb53cfff8072c954af8bb  \n15:34\u00a0<vmassol>\u00a0it was there already probably  \n15:35\u00a0<+tmortagne>\u00a0it was in web and XE ?  \n15:35\u00a0<vmassol>\u00a0yes  \n15:35\u00a0<+tmortagne>\u00a0ok  \n15:36\u00a0<+tmortagne>\u00a0vmassol: btw you still only have WEB-INF/lib/log4j-??????.jar which match only one specific version of log4j  \n15:36\u00a0<+tmortagne>\u00a0or at least all version with the same number of chars  \n15:36\u00a0<vmassol>\u00a0tmortagne: not sure what you want to put instead but please fix it if you have a better solution  \n15:37\u00a0<+tmortagne>\u00a0what I suggested when you added it is that you need several with different number of ?  \n15:37\u00a0<+tmortagne>\u00a0you have a comment saying that this filter is not needed anymore with http://jira.xwiki.org/jira/browse/XWIKI-6581  \n15:37\u00a0<+tmortagne>\u00a0but I don''t see why  \n15:38\u00a0<+tmortagne>\u00a0or you meant now we can do it with exclusions ?  \n15:39\u00a0<vmassol>\u00a0I've removed that comment in my last commit  \n15:40\u00a0<+tmortagne>\u00a0to can actually remove the filter itself since it was supposed to filter web standard which does not contains any jar anymore  \n15:40\u00a0<+tmortagne>\u00a0s/to/you/  \n15:41\u00a0<droe>\u00a0has joined #xwiki  \n15:41\u00a0<+tmortagne>\u00a0unless it can comes from wysiwyg war or something like that ?  \n15:43\u00a0<droe>\u00a0hi, I'm testing XWiki and having issues with some of the admin pages. Certain things like trying to use the panel wizard never load, even after leaving it for an hour or so. Does anyone know what I'm doing wrong?  \n15:45\u00a0<@cjdelisle>\u00a0what browser are you using?  \n15:45\u00a0<droe>\u00a0Firefox 4  \n15:45\u00a0<droe>\u00a0I can see a java process at 100% CPU on the server, so I think it's the server end that is the issue.  \n15:45\u00a0<@cjdelisle>\u00a0hmm  \n15:46\u00a0<@sdumitriu>\u00a0droe: How many documents does your wiki contain?  \n15:46\u00a0<droe>\u00a0About 3, lol.  \n15:46\u00a0<@cjdelisle>\u00a0Is there anything interesting about the server? vmware or amazon cloud?  \n15:47\u00a0<droe>\u00a0It's running in an Oracle (Xen based I believe) VM. Most pages load instantly, it's only certain things that it gets stuck on.  \n15:47\u00a0<+sburjan>\u00a0droe: can you tell me if Main.WebHome loads a little bit slow ?  \n15:47\u00a0<+sburjan>\u00a0slower than other pages  \n15:48\u00a0<+sburjan>\u00a0because I have same issues.  \n15:49\u00a0<droe>\u00a0With Ctrl+F5, Firebug says 2.2 seconds to fetch everything. Similar time on a space that I created.  \n15:49\u00a0<@cjdelisle>\u00a0I'm going to take a wild guess and suggest that if it were outside of the VM, all of those problems would magicly go away.  \n15:50\u00a0<+sburjan>\u00a0I can't explain why main.webhome loads slower than other (i mean i can feel it's slow)  \n15:50\u00a0<@cjdelisle>\u00a0That doesn't make it much better but if it's vm issues then it's something that would be very difficult to debug at our level.  \n15:51\u00a0<+sburjan>\u00a0I get 11.24 secs on my VM for Main.WebHome  \n15:51\u00a0<droe>\u00a0I can understand it being slower, but not loading after an hour, that seems more like a bug or config error. I can find a bare-metal machine to try it on, just thought this might be a known issue like some locking problem or something.  \n15:51\u00a0<@cjdelisle>\u00a0magic clock timing issues with IRQ and thread pool executors.....  \n15:51\u00a0<@cjdelisle>\u00a0When I was playing with kvm I ran into a lot of that type of thing  \n15:51\u00a0<+sburjan>\u00a0droe: did you attached some files on the wiki ?  \n15:52\u00a0<+sburjan>\u00a0large files or small and many files ?  \n15:52\u00a0<droe>\u00a0Maybe one or two, I'm not the main user but we've only just set it up and are having a play around so there's little content on there so far.  \n15:53\u00a0<droe>\u00a0I guess I should try it on another box and see if that fixes it before asking for more help.  \n15:53\u00a0<droe>\u00a0Thanks for your time.  \n15:54\u00a0<+sburjan>\u00a0or try another db  \n15:54\u00a0<+sburjan>\u00a0MySql forexample  \n15:55\u00a0<droe>\u00a0Yeah, that might be an idea.  \n15:55\u00a0<+sburjan>\u00a0it seems xwiki has some issues with oracle. we're working to identify them  \n15:56\u00a0<droe>\u00a0I'm using HSQL but I'll give MySQL a go.  \n15:57\u00a0<+sburjan>\u00a0if you only switch the db, not the VM or machine, please tell me if you see \\_any\\_ \u00a0type of improvement using MySQL for example.  \n15:57\u00a0<abusenius>\u00a0has quit  \n15:58\u00a0<@cjdelisle>\u00a0I don't know if this is possible but if you have multiprocessor on your vm and you can disable it that might fix the problem  \n15:58\u00a0<@cjdelisle>\u00a0multiple physical cores makes a synchronized() statement become very very complicated at the low level  \n16:00\u00a0<+tmortagne>\u00a0looks like oldcore is depending on ical4j isn't that a leftover of old calendar plugin that used to be in oldcore ?  \n16:01\u00a0<+tmortagne>\u00a0sdumitriu: WDYT ?  \n16:01\u00a0<+tmortagne>\u00a0I checked and oldcore build well without it  \n16:01\u00a0<+tmortagne>\u00a0at least on Eclipse did not run maven yet  \n16:01\u00a0<@sdumitriu>\u00a0tmortagne: I think so  \n16:02\u00a0<+tmortagne>\u00a0building with maven and I will remove it if it build well  \n16:03\u00a0<@cjdelisle>\u00a0yay for less MB in the .war  \n16:03\u00a0<+tmortagne>\u00a0:)  \n16:08\u00a0<kwoot>\u00a0has joined #xwiki  \n16:28\u00a0<+sburjan>\u00a0cjdelisle: have you experienced OOM issues when copying a page with ~100 attachments (128MB) using MySQL, Postgres, any db besides Oracle ?  \n16:29\u00a0<@sdumitriu>\u00a0I think that's normal  \n16:30\u00a0<@sdumitriu>\u00a0Wait, copy or rename?  \n16:30\u00a0<+sburjan>\u00a0copy. i chiked java copying a page (using wiki interface, not wabdav)  \n16:30\u00a0<+sburjan>\u00a0\\*checked  \n16:31\u00a0<+sburjan>\u00a0and it choke (oracle db). OOM  \n16:31\u00a0<+sburjan>\u00a0wiki had to be restarted. I only want to know if this is normal on any db, or it shouldn't happen  \n16:31\u00a0<@cjdelisle>\u00a0the db ran out of memory or java did?  \n16:32\u00a0<+tmortagne>\u00a0sburjan: whatever the db XWiki load everything in memory when copying a document so yes it sounds normal  \n16:32\u00a0<+sburjan>\u00a0org.apache.velocity.exception.MethodInvocationException: Invocation of method 'copyDocument' in \u00a0class com.xpn.xwiki.api.XWiki threw exception java.lang.OutOfMemoryError: Java heap space at /templates/copy.vm[line 51, column 18]  \n16:32\u00a0<+tmortagne>\u00a0(and it loads it several times basically)  \n16:32\u00a0<@cjdelisle>\u00a0yeap  \n16:33\u00a0<abusenius>\u00a0has joined #xwiki  \n16:33\u00a0<+sburjan>\u00a0cjdelisle: i guess this is java, right ?  \n16:33\u00a0<@cjdelisle>\u00a0that should not happen when using filesystem attachments  \n16:33\u00a0<@cjdelisle>\u00a0yup  \n16:33\u00a0<+sburjan>\u00a0yeah.. so basically java chokes because attachments are stored in the db as blog, right ?  \n16:33\u00a0<+sburjan>\u00a0\\*blob  \n16:34\u00a0<@cjdelisle>\u00a0if they were a blob then they might be streamed and it could be ok  \n16:34\u00a0<@cjdelisle>\u00a0the problem is it's not a blob, it's a gigantic varbinary  \n16:35\u00a0<@cjdelisle>\u00a0but blobs are so different from database to database that it's practicly impossible to make it work using blob  \n16:35\u00a0<@cjdelisle>\u00a0also some dbs still load the blob data into ram (postgres)  \n16:45\u00a0<+sburjan>\u00a0cjdelisle: so I should get OOM even when deleting the page ?  \n16:47\u00a0<@cjdelisle>\u00a0unfortunately yes because it tries to put all of that into the recycle bin  \n16:47\u00a0<@cjdelisle>\u00a0http://cable.tmcnet.com/topics/cable/articles/91204-phantom-circuits-boost-vdsl2-300-mbps.htm  \n16:53\u00a0<+sburjan>\u00a0laters  \n16:53\u00a0<+sburjan>\u00a0thanks for answering my questions  \n16:55\u00a0<sburjan>\u00a0has quit  \n17:02\u00a0<droe>\u00a0has quit  \n17:02\u00a0<+tmortagne>\u00a0vmassol: we really have an issue with some XE instance not stopped at some point on jenkins agent  \n17:02\u00a0<droe>\u00a0has joined #xwiki  \n17:03\u00a0<+tmortagne>\u00a0checking if stopping of cluster member is not broken  \n17:04\u00a0<droe>\u00a0I've just tried MySQL and it fixes my problem with pages hanging. So I guess it's not the VM.  \n17:05\u00a0<vmassol>\u00a0tmortagne: ok  \n17:05\u00a0<droe>\u00a0has quit  \n17:06\u00a0<+tmortagne>\u00a0hmm I can't build XE, It is unable to download com.smartgwt:smartgwt:jar:2.4 it seems  \n17:06\u00a0<kwoot>\u00a0has quit  \n17:07\u00a0<@cjdelisle>\u00a0ahh I thought I was imagining it  \n17:08\u00a0<+tmortagne>\u00a0I can't find it on maven central and XE web does not have any custom repository  \n17:08\u00a0<+tmortagne>\u00a0checking xwiki repositoryy  \n17:08\u00a0<+tmortagne>\u00a0no not xwiki repository either  \n17:09\u00a0<vmassol>\u00a0tmortagne: strange  \n17:09\u00a0<vmassol>\u00a0I rebuilt fully  \n17:09\u00a0<vmassol>\u00a0but I haven't removed my local repo  \n17:10\u00a0<vmassol>\u00a0and I built with -o  \n17:10\u00a0<+tmortagne>\u00a0don't \u00a0you have com.smartgwt already ?  \n17:10\u00a0<vmassol>\u00a0yes probably  \n17:10\u00a0<vmassol>\u00a0you don't have it ?  \n17:10\u00a0<vmassol>\u00a0I can try to remove it if you want  \n17:11\u00a0<+tmortagne>\u00a0as weird as it sounds look like i don't if it tries to download it  \n17:11\u00a0<+tmortagne>\u00a0I don't build XE or web that much  \n17:12\u00a0<+tmortagne>\u00a0hmm actually I have it in my local repository  \n17:12\u00a0<+tmortagne>\u00a0so I don't understand what is the issue here  \n17:13\u00a0<+tmortagne>\u00a0but in any case there is a dependency issue for sure since there is no way to find it with the repositories currently in XE web pom.xml  \n17:15\u00a0<+tmortagne>\u00a0found it in http://www.smartclient.com/maven2/com/smartgwt/smartgwt/2.4/ so we probably need to add this to XE pom.xml  \n17:16\u00a0<vmassol>\u00a0i don't understad  \n17:16\u00a0<vmassol>\u00a0it must be somewhere in our repos  \n17:16\u00a0<vmassol>\u00a0otherwise we would not have downloaded it  \n17:16\u00a0<vmassol>\u00a0let's ask mflorea  \n17:18\u00a0<+mflorea>\u00a0tmortagne: why do you need it in XE pom? XE doesn't have to know we're using SmartGWT, this is a platform thing  \n17:19\u00a0<+mflorea>\u00a0and the repo is specified in platform pom  \n17:19\u00a0<+tmortagne>\u00a0mflorea: vmassol just refacored web and XE  \n17:19\u00a0<+tmortagne>\u00a0web does not have anything except template and resources  \n17:19\u00a0<+tmortagne>\u00a0so all the jar are in XE web now  \n17:19\u00a0<+tmortagne>\u00a0so that's why  \n17:19\u00a0<vmassol>\u00a0mflorea: I agree it's a platform thing and IMO we need to have the smartgwt extraction \u00a0in platform in a gwt module  \n17:20\u00a0<vmassol>\u00a0(that's a future refinement to make)  \n17:20\u00a0<+tmortagne>\u00a0mflorea: do you the repository is specified for the whole platform ?  \n17:20\u00a0<+tmortagne>\u00a0even if most of the project don't need it ?  \n17:21\u00a0<+tmortagne>\u00a0does not sounds very clean to me  \n17:21\u00a0<+mflorea>\u00a0tmortagne: two different modules need it  \n17:21\u00a0<+mflorea>\u00a0and their parent is xwiki-platform-core  \n17:21\u00a0<+tmortagne>\u00a0then you should require it in theses modules  \n17:21\u00a0<+mflorea>\u00a0where the repo is specified  \n17:21\u00a0<+mflorea>\u00a0otherwise the repo will be duplicated  \n17:21\u00a0<+mflorea>\u00a0which is worse IMO  \n17:21\u00a0<+tmortagne>\u00a0the way you did it this repository is checked for all dependencies even in project that don't have any dependency in this repository  \n17:22\u00a0<+tmortagne>\u00a0duplicating the repository is what we do for everything else  \n17:22\u00a0<+tmortagne>\u00a0like jboss etc...  \n17:22\u00a0<+tmortagne>\u00a0this is not the only repository we need in several modules  \n17:23\u00a0<+tmortagne>\u00a0no it is not worse, when you build something that has nothing to do with smartgwt and it check dependency in smartgwt repository that's the worst  \n17:23\u00a0<+mflorea>\u00a0well, that's a maven issue IMO  \n17:23\u00a0<+tmortagne>\u00a0maybe but we are using maven  \n17:24\u00a0<+mflorea>\u00a0anyway, the smartGWT version was also defined in xwiki-platform-pom, so that seemed to be the best place for the repo  \n17:24\u00a0<+mflorea>\u00a0feel free to move the repo to the child modules  \n17:24\u00a0<@cjdelisle>\u00a0It's unfortunate that maven is so fragile that a bad iptables rule at jboss can completely break our build. I agree that externals isn't very nice but broken builds every tine some other repo falls over is really bad.  \n17:24\u00a0<vmassol>\u00a0cjdelisle: that's not true  \n17:24\u00a0<vmassol>\u00a0that's because we're not using maven properly  \n17:24\u00a0<+tmortagne>\u00a0mflorea: I will  \n17:24\u00a0<vmassol>\u00a0you can't say that a tool is bad if it's not used properly  \n17:25\u00a0<vmassol>\u00a0you're supposed to be using a repository manager  \n17:25\u00a0<+mflorea>\u00a0(1) xwiki-platform-wysiwyg-client and (2) xwiki-platform-web  \n17:25\u00a0<+tmortagne>\u00a0thanks  \n17:25\u00a0<vmassol>\u00a0to shield you from this  \n17:25\u00a0<vmassol>\u00a0it's just a matter of configuring our nexus tool  \n17:25\u00a0<@cjdelisle>\u00a0ahh so basicly a cache?  \n17:25\u00a0<vmassol>\u00a0a cache + more  \n17:26\u00a0<vmassol>\u00a0for example you can control which external dep are allowed  \n17:26\u00a0<vmassol>\u00a0at least this is the official solution from maven  \n17:26\u00a0<vmassol>\u00a0(for this issue)  \n17:26\u00a0<@cjdelisle>\u00a0ahhh that explains why it's trying to lookup pom files from each repo if it's not intended to be used this way  \n17:26\u00a0<vmassol>\u00a0re pom files  \n17:27\u00a0<+tmortagne>\u00a0well no everyone is supposed to be able to use nexus  \n17:27\u00a0<vmassol>\u00a0I think that they are just an artifact  \n17:27\u00a0<vmassol>\u00a0so maven will look for artifacts in all repos one after another  \n17:27\u00a0<vmassol>\u00a0(once a day for snapshots unless the user has specified a different policy)  \n17:28\u00a0<@cjdelisle>\u00a0yes but they take a really long time because it looks up everything everywhere and tcp does slow start so it's like 4 roundtrips even if it fits in a single packet  \n17:28\u00a0<+mflorea>\u00a0guys, have you tried to run ui-tests on a different browser or a different version of FF? I tried to add the profile in pom.xml as we have for selenium 1 but it still runs FF4  \n17:28\u00a0<vmassol>\u00a0mflorea: our web driver used is hardcoded right now  \n17:29\u00a0<vmassol>\u00a0in PersistentTestContext  \n17:29\u00a0<vmassol>\u00a0it's easy to make it use a system var  \n17:29\u00a0<+mflorea>\u00a0vmassol: ok, maybe I can change it to test  \n17:29\u00a0<+mflorea>\u00a0thanks  \n17:29\u00a0<vmassol>\u00a0it's this line:  \n17:29\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.driver = new FirefoxDriver()  \n17:29\u00a0<vmassol>\u00a0there are other constructors  \n17:29\u00a0<vmassol>\u00a0with FirefoxProfile  \n17:29\u00a0<+mflorea>\u00a0ok, I'll check  \n17:31\u00a0<@cjdelisle>\u00a0is somebody adding a dependency on smartclient repo?  \n17:31\u00a0<+tmortagne>\u00a0cjdelisle: fixed and pushed already  \n17:32\u00a0<@cjdelisle>\u00a0ok thanks  \n17:40\u00a0<mflorea>\u00a0has quit  \n17:43\u00a0<arkub>\u00a0has joined #xwiki  \n17:59\u00a0<DrLou>\u00a0has joined #xwiki  \n18:00\u00a0<tmortagne>\u00a0has quit  \n18:01\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:18\u00a0<tmortagne>\u00a0has quit  \n18:42\u00a0<Enygma`>\u00a0has joined #xwiki  \n18:57\u00a0<Enygma`>\u00a0has quit  \n18:58\u00a0<Enygma`>\u00a0has joined #xwiki  \n19:06\u00a0<jvdrean1>\u00a0has quit  \n19:14\u00a0<arkub>\u00a0has quit  \n19:20\u00a0<DrLou>\u00a0has quit  \n20:25\u00a0<Enygma`>\u00a0has quit  \n20:26\u00a0<Enygma`>\u00a0has joined #xwiki  \n20:28\u00a0<Enygma`>\u00a0has quit  \n20:29\u00a0<Enygma`>\u00a0has joined #xwiki  \n20:34\u00a0<sburjan`>\u00a0has joined #xwiki  \n20:39\u00a0<jvelociter>\u00a0has quit  \n20:39\u00a0<jvelociter>\u00a0has joined #xwiki  \n20:58\u00a0<jvelociter\\_>\u00a0has joined #xwiki  \n21:01\u00a0<jvelociter\\_>\u00a0has quit  \n21:01\u00a0<jvelociter>\u00a0has quit  \n22:09\u00a0<@sdumitriu>\u00a0vmassol: Online?  \n23:01\u00a0<JSeymour>\u00a0has quit  \n23:04\u00a0<Enygma`>\u00a0has quit  \n23:11\u00a0<vmassol>\u00a0has quit  \n\n"}