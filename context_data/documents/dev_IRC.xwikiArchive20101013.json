{"id": "dev:IRC.xwikiArchive20101013", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20101013", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nlucaa joined #xwiki at 00:21  \nlucaa left at 00:27 (Quit: Leaving.  \nlucaa joined #xwiki at 00:27  \njvdrean joined #xwiki at 00:28  \njvdrean left at 00:45 (Quit: Leaving.  \nrrodriguez left at 00:56 (Quit: rrodriguez  \nbblfish left at 01:02 (Quit: Leaving.  \nlucaa1 joined #xwiki at 01:10  \nlucaa left at 01:11 (Quit: Leaving.  \nlucaa1 left at 01:20 (Ping timeout: 240 seconds  \nlucaa joined #xwiki at 01:23  \nlucaa1 joined #xwiki at 01:25  \nlucaa left at 01:25 (Read error: Connection reset by peer  \nbblfish joined #xwiki at 01:27  \nlucaa1 left at 01:29 (Ping timeout: 252 seconds  \nlucaa joined #xwiki at 01:30  \nlucaa left at 01:43 (Ping timeout: 264 seconds  \nevalica left at 01:54 (Quit: Leaving.  \nbblfish left at 01:57 (Quit: Leaving.  \nsdumitriu left at 03:21 (Ping timeout: 276 seconds  \nabusenius left at 03:24 (Ping timeout: 265 seconds  \nmflorea left at 03:50 (Quit: Leaving.  \nvenkatesh joined #xwiki at 04:41  \nvenkatesh left at 04:42 (Client Quit  \nvenkatesh joined #xwiki at 04:42  \nBaur joined #xwiki at 06:08  \nBaur - (06:09): hello  \nBaur - (06:09): anybody familiar with Blog section of xwiki  \nBaur - (06:09): ?  \nBaur - (06:57): ping  \nDenis left at 07:01 (Read error: Connection reset by peer  \nvmassol joined #xwiki at 07:05  \nDenis joined #xwiki at 07:09  \nasrfel joined #xwiki at 07:20  \nvmassol left at 07:25 (Quit: Leaving.  \nBaur - (07:39): any body is here?  \nBaur - (07:49): where can i find this: BlogStyle ssx file  \nmflorea joined #xwiki at 08:17  \nsilviar joined #xwiki at 08:41  \nsburjan joined #xwiki at 08:50  \nDenis - (08:51): Baur: Hello, are searching for this /xwiki/bin//edit/Blog/BlogStyle?editor=object ?  \nvmassol joined #xwiki at 09:05  \ntmortagne joined #xwiki at 09:05  \nvmassol - (09:08): sburjan: good morning. I'm available to apply a patch if you have one :)  \nsburjan - (09:08): hello vmassol. I already started repairing the test. It seems we have another failed test reported by Hudson. (org.xwiki.it.ui.RegisterTest.testRegisterPasswordTooShort )  \nvmassol - (09:09): ok I'l check this one  \narkub joined #xwiki at 09:18  \nsburjan - (09:23): vmassol: patch done  \njvdrean joined #xwiki at 09:24  \nbblfish joined #xwiki at 09:24  \nflorinciu joined #xwiki at 09:32  \nsilviar left at 09:38 (Quit: Leaving.  \ntmortagne - (09:38): cjdelisle: i get something weird on http://localhost:8080/xwiki/bin/admin/XWiki/XWikiPreferences?editor=globaladmin&section=Extensions (i did not had this before), it looks like part of the content is doubled for some reason  \ntmortagne - (09:38): any idea what could be the issue \u00a0?  \nsilviar joined #xwiki at 09:41  \ntmortagne - (09:43): between the two parts i also get a link \"Customize XWiki.ExtensionManager:\"  \ntmortagne - (09:44): the content of my \"codeToExecute\" field is a include of \"XWiki.ExtensionManager\" page  \ntmortagne - (09:45): i do the exact same thing with search application but i don't have the issue  \ntmortagne - (09:46): the only difference is that in Extension Manager case the Configurable object is on XWiki.ExtensionManager document  \ntmortagne - (09:48): looks like it's taking the age content added to the content of \"codeToExecute\" or something  \ntmortagne - (09:48): s/age/page/  \nrstavro joined #xwiki at 10:24  \nlucaa joined #xwiki at 10:37  \nEnygma` joined #xwiki at 10:56  \nrrodriguez joined #xwiki at 10:58  \ntmortagne left at 11:05 (Quit: Leaving.  \nsburjan - (11:09): vmassol: ping when I can send the patch. I also installed clover on local machine to test the ui-tests and see if there are unused methods. Clover is very cool  \nvmassol - (11:09): sburjan: sorry I'm in a meeting right now  \nvmassol - (11:09): till 12:30 probably  \ntmortagne joined #xwiki at 11:12  \njvdrean left at 11:12 (Quit: Leaving.  \nbblfish left at 11:17 (Quit: Leaving.  \nsilviar1 joined #xwiki at 11:19  \ncjdelisle - (11:22): tmortagne, What version are you working on? I have a build of 31706 and I don't see anything out of the ordinary.  \nsilviar left at 11:24 (Ping timeout: 276 seconds  \ntmortagne - (11:26): cjdelisle: i'm on trunk  \ntmortagne - (11:26): and vmassol can't reproduce it either  \ntmortagne - (11:26): probably something on my side  \ntmortagne - (11:27): if it's only me i guess it's ok  \ntmortagne - (11:27): i can send you a screenshot if you want  \ntmortagne - (11:27): in case it remain you of something  \ncjdelisle - (11:27): Maybe you added 2 configurable objects?  \ntmortagne - (11:27): hmm it's possible indeed, my local mysql is a bit messy  \ncjdelisle - (11:27): Or there are 2 duplicate docs with configurable objects.  \ntmortagne - (11:27): i will check  \ntmortagne - (11:28): but messy is good, it's real life wiki ;)  \ncjdelisle - (11:28): haha I've borked my db a couple of times playing with attachments code.  \njvdrean joined #xwiki at 11:40  \nvmassol1 joined #xwiki at 11:46  \njvdrean left at 11:46 (Ping timeout: 245 seconds  \njvdrean joined #xwiki at 11:48  \nvmassol left at 11:48 (Ping timeout: 252 seconds  \nvmassol1 - (11:51): cjdelisle: there are a few functinal tests failing for the invitation feature in case you wish to look  \ncjdelisle - (11:53): looking  \ncjdelisle - (11:58): hehe try maven threaded ui tests, see if 16 copies of ff are spawned.  \nvmassol1 - (11:58): btw I do't like try/finally constructs in tests  \nvmassol1 - (11:59): s/do't/don't/  \nvmassol1 - (11:59): since this is meant to go in @Before or @After  \nvmassol1 - (11:59): and all tests in the same class should share the same fixture  \nsburjan - (11:59): cjdelisle: can I also submit a patch for 2 failing tests ?  \nsburjan - (11:59): so you can commit them  \nsburjan - (12:00): test fixes  \ncjdelisle - (12:00): You got them fixed?  \nsburjan - (12:00): yes  \nvmassol1 - (12:00): (still in meeting)  \nsburjan - (12:00): patch created  \nsburjan - (12:00): ready to delivery  \ncjdelisle - (12:00): What was wrong?  \nsburjan - (12:00): :)  \nsburjan - (12:00): xpath expressions .. due to \u00a0changed UI  \ncjdelisle - (12:00): oh oops.  \nsburjan - (12:00): so basically you only have to change 2 lines  \nvmassol1 - (12:01): btw would be good to make the test less fragile regarding these xpaths  \nvmassol1 - (12:01): (may need to introduce ids in code)  \ncjdelisle - (12:01): I don't like xpath in general. Didn't think I had used them.  \nvmassol1 - (12:01): +1  \nsburjan - (12:02): I used By.class this time  \nsburjan - (12:02): removed that nasty xpath  \nsburjan - (12:02): cos I don't like it either  \nvmassol1 - (12:02): cool  \ncjdelisle - (12:03): re try/finally, I guess it's possible to do that with @After by splitting up the test but I'm not sure I see the logic in avoiding it.  \nvmassol1 - (12:03): cjdelisle: duplication and readability/maintenance of tests  \nsburjan - (12:03): cjdelisle: just be careful because there are 2 classes/tests with the same name. Be sure to commit to the longer one. The one that is on the outside too  \ncjdelisle - (12:04): 2 tests with the same name IIRC that was causing problems at one point.  \ncjdelisle - (12:07): haha invitationTest fails due to csrf warning.  \nvmassol1 - (12:07): it's wrong  \nvmassol1 - (12:07): they're testing the same feature AFAICS  \ncjdelisle - (12:08): What are?  \ncjdelisle - (12:08): oh re \"2 tests with the same name\"  \nvmassol1 - (12:08): UserProfileTest  \nvmassol1 - (12:08): yes  \ncjdelisle - (12:09): re try/finally, most of the try/finally clauses do different things, are you suggesting each one should be in a different class?  \nvmassol1 - (12:09): I don't know  \nvmassol1 - (12:09): all I know is that I've been able to avoid them in tests I wrote  \nvmassol1 - (12:09): maybe I was just lucky....  \nvmassol1 - (12:09): I also prefer to set state  \nvmassol1 - (12:09): required state  \nvmassol1 - (12:10): rather than reset in @After  \ncjdelisle - (12:10): performance vs reliability.  \ncjdelisle - (12:11): ahh thats using try/finally because it's doing cookie swapping. the alternative is to log in for each test, you would be unhappy to see the runtime difference.  \ncjdelisle - (12:24): Hmm csrf breaks accepting an invitation as a guest.  \nlucaa left at 12:28 (Ping timeout: 245 seconds  \ncjdelisle - (12:28): haha that's justice. I was using the deprecated getUtil function. Maybe have to revert that until 2.6  \nvmassol1 - (12:38): revert what?  \ncjdelisle - (12:38): deprecate context.getUtil  \nvmassol1 - (12:39): you could still use it even if deprecated no?  \ncjdelisle - (12:39): Lots of spam in the logs though.  \nvmassol1 - (12:39): (I haven't really followed that part so maybe I'm tlaing nuts)  \nvmassol1 - (12:39): s/tlaing/talking/  \ncjdelisle - (12:39): :)  \ncjdelisle - (12:40): No the only problem is it will spam the logs.  \ncjdelisle - (12:45): the Invitation problems are r31415. Where's abusenius so I can complain and be a pita.  \nvmassol1 - (12:45): yes spamming logs is not good  \ncjdelisle - (12:46): I had forgotten that I used that class because it was the only source of regular expressions which I found usable.  \ncjdelisle - (12:47): WDYT about removing @Deprecated and leaving @deprecated please don't... in the javadoc?  \nsburjan left at 12:52 (Quit: Ex-Chat  \ncjdelisle - (12:58): Wow it's a chilly one this morning, might be the first day I start the stove.  \nsdumitriu joined #xwiki at 12:59  \nabusenius joined #xwiki at 13:04  \nmflorea left at 13:06 (Quit: Leaving.  \ncjdelisle - (13:10): abusenius, r31706 makes it impossible to accept an invitation. ( http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/67/com.xpn.xwiki.products$xwiki-enterprise-test-ui/testReport/junit/org.xwiki.it.ui.invitation/InvitationTest/testAcceptInvitationToClosedWiki/ )  \nabusenius - (13:12): hm  \nabusenius - (13:13): are you rure this is the right revision?  \nabusenius - (13:13): \\*sure  \ncjdelisle - (13:15): yea, I found the line that does it, I'm compiling now. Just wanted to complain ;)  \nabusenius - (13:16): no, I mean 31\\*7\\*06 is just deprecating something  \ncjdelisle - (13:16): err 31415  \nabusenius - (13:17): ok, this looks more familiar :)  \nabusenius - (13:17): what was the problem?  \ncjdelisle - (13:17): going to have to revert 31706 too because it's causing the logs to be spammed but that's my fault.  \ncjdelisle - (13:20): There doesn't need to be any protections in guestActions because the guest has no cookies.  \ncjdelisle - (13:20): There is already a token in the request.  \ncjdelisle - (13:20): http://localhost:8080/xwiki/bin/view/Invitation/InvitationGuestActions?doAction\\_accept=y&messageID=0988571923635770100011633919785206670914215271100482  \ncjdelisle - (13:20): my token's bigger :P  \nabusenius - (13:21): I see  \nabusenius - (13:21): :D  \ncjdelisle - (13:21): err maybe not, it's only base10  \nabusenius - (13:23): mine is 128 bit afair  \ncjdelisle - (13:24): unguessable either way.  \ncjdelisle - (13:25): I'll leave the token for report spam and decline because they require the user to confirm. The accept button doesn't require confirmation.  \nabusenius - (13:25): it's strange that csrf broke something when its disabled  \nabusenius - (13:25): isTokenValid() is always true  \ncjdelisle - (13:26): Yea, you replaced \u00a0\u00a0#else \u00a0\u00a0with #elseif($confirm && iscsrftoken....  \ncjdelisle - (13:26): it wasn't #elseif($confirm) to begin with.  \ncjdelisle - (13:27): It's the only action which doesn't require confirmation.  \nabusenius - (13:28): ah, ok, sorry about that  \ncjdelisle - (13:30): no pb, I'm glad it's so well tested, if the tests pass I can guarantee everything works.  \nBaur left at 13:32 (Quit: Page closed  \nsdumitriu left at 13:39 (Ping timeout: 245 seconds  \nsdumitriu joined #xwiki at 13:39  \nlucaa joined #xwiki at 13:44  \ncjdelisle left at 13:46 (Ping timeout: 240 seconds  \njbrBridge left at 13:46 (Ping timeout: 252 seconds  \nsdumitriu - (13:46): tmortagne: Do you have anything more to commit?  \njbrBridge joined #xwiki at 13:46  \nsdumitriu - (13:47): Does anybody know if mflorea finished his commits?  \nvmassol1 - (13:47): sdumitriu: I think he did but there are still 2 wysiwyg tests failing  \nvmassol1 - (13:48): sdumitriu: Caleb has to fix the invitation feature which is no longer working under some conditions  \nvmassol1 - (13:48): (some tests are breaking)  \nvmassol1 - (13:48): (something related to csrf)  \nvmassol1 - (13:48): (he can explain it better than me ;))  \nsdumitriu - (13:48): K  \ncjdelisle joined #xwiki at 13:48  \nvmassol1 - (13:48): sorin provided a patch for the user profile tests  \nvmassol1 - (13:49): cjdelisle: are you applying sorin's patch?  \nsdumitriu - (13:49): vmassol1: Is there a standard way to get hold of the component manager from a non-component, non-xwikicore class?  \nevalica joined #xwiki at 13:49  \nvmassol1 - (13:52): sdumitriu: Utils.getComponent?  \nsdumitriu - (13:52): non-xwikicore  \nsdumitriu - (13:52): I don't have Utils  \nvmassol1 - (13:52): you mean you don't have a dep on xwiki-core?  \nsdumitriu - (13:52): Right  \nvmassol1 - (13:52): hmm let me check I might have put it in the app context  \nvmassol1 - (13:52): servlet app context  \nvmassol1 - (13:53): but that would be a hack anyway  \nvmassol1 - (13:53): since this is not supposed to be public api  \nvmassol1 - (13:54): your situation sounds a bit strange though if I may permit ;)  \nsdumitriu - (13:54): I'm writing a Velocity Directive  \nsdumitriu - (13:54): So the Velocity engine is responsible for instantiating that class, I can't make it a component  \nsdumitriu - (13:55): And xwiki-velocity doesn't depend on xwiki-core, and it can't (cyclic deps otherwise)  \nvmassol1 - (13:55): there's no init stage that you can use to set stuff?  \nsdumitriu - (13:55): Let me check  \nvmassol1 - (13:55): it would be nicer  \nvmassol1 - (13:56): otherwise yes I'm setting it in the servlet app context but that's another dep  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// This is a temporary bridge to allow non XWiki components to lookup XWiki components.  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// We're putting the XWiki Component Manager instance in the Servlet Context so that it's  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// available in the XWikiAction class which in turn puts it into the XWikiContext instance.  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// Class that need to lookup then just need to get it from the XWikiContext instance.  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// This is of course not necessary for XWiki components since they just need to implement  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// the Composable interface to get access to the Component Manager or better they simply  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// need to declare their components requirements using the @Requirement annotation of the xwiki  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// component manager together with a private class member, for automatic injection by the CM on init.  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0servletContextEvent.getServletContext().setAttribute(  \nsdumitriu - (13:56): public void init( RuntimeServices rs, InternalContextAdapter context, Node node)  \nvmassol1 - (13:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0org.xwiki.component.manager.ComponentManager.class.getName(), this.componentManager);  \nsdumitriu - (13:56): I think we can control RuntimeServices, so yes, that's an idea  \nsdumitriu - (13:56): Thanks  \nvmassol1 - (13:56): velocity is going to do the new  \nvmassol1 - (13:56): the question is whether we can set something before the class is called to perform its duty  \nvmassol1 - (13:57): yes, extend RS maybe  \nvmassol1 - (13:57): it's created in DefaultVelocityEngine AFAIR  \ntmortagne - (13:58): sdumitriu: \"tmortagne: Do you have anything more to commit?\", nothing planned  \nvmassol1 - (13:58): yep we can extend it and set it here:  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0public void init(RuntimeServices runtimeServices)  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0{  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// We save the RuntimeServices instance in order to be able to override the  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// VelocityEngine.evaluate() method. We need to do this so that it's possible  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// to make macros included with #includeMacros() work even though we're using  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// the Velocity setting:  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// velocimacro.permissions.allow.inline.local.scope = true  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// TODO: Fix this when by rewriting the XWiki.include() implementation so that  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// included Velocity templates are added to the current document before  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// evaluation instead of doing 2 separate executions.  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this.rsvc = runtimeServices;  \nvmassol1 - (13:58): \u00a0\u00a0\u00a0\u00a0}  \nsdumitriu - (13:59): Or maybe it has a setProperty method or something like that  \nsdumitriu - (13:59): But that's not urgent  \nvmassol1 - (13:59): maybe  \nmflorea joined #xwiki at 14:01  \nsdumitriu - (14:04): Hi mflorea  \nsdumitriu - (14:04): Are you ready for the release?  \nvmassol1 - (14:05): mflorea: there are 2 wysiwyg tests failing it seems  \nvmassol1 - (14:06): http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/68/testReport/?  \ncjdelisle - (14:06): vmassol1, I'll get sorin's patch in today.  \nvmassol1 - (14:07): cjdelisle: if you need help I can work on it  \ncjdelisle - (14:07): I have 2 bugfixes which I'd like to slip in before the release.  \nmflorea - (14:07): vmassol1 , sdumitriu: yes, but they are flickering. They pass most of time locally. I think I know what is the problem (test try to click some tool bar buttons too quickly, before they are enabled) and I have a possible solution. Anyway, the editor code is fine, I just have to fix the flickering tests  \ncjdelisle - (14:08): this computer picks the greatest times to run updatedb.  \nevalica left at 14:12 (Ping timeout: 245 seconds  \nEnygma` left at 14:12 (Ping timeout: 252 seconds  \nevalica joined #xwiki at 14:14  \nEnygma` joined #xwiki at 14:15  \njvdrean left at 14:23 (Quit: Leaving.  \nsdumitriu left at 14:23 (Ping timeout: 272 seconds  \ncjdelisle - (14:27): reverting deprecation of context.getUtil (unfortunately)  \ncjdelisle - (14:34): sburjan`, \"Index: framework/elements/editor/PreferencesEditPage.java\" \u00a0where was this patch made from?  \njvdrean joined #xwiki at 14:42  \nvmassol1 - (14:50): so are we all set for the release?  \nvmassol1 - (14:51): ah sergiu has left....  \nbblfish joined #xwiki at 15:18  \nvmassol1 - (15:19): sburjan`: fyi http://confluence.atlassian.com/display/ALLDOC/Author+Guidelines  \nvmassol1 - (15:19): (linked from http://confluence.atlassian.com/display/CLOVER/Contributing+to+the+Clover+Documentation)  \nvenkatesh left at 15:19 (Remote host closed the connection  \nJeremyC left #xwiki at 15:26  \nasrfel left at 15:30 (Ping timeout: 245 seconds  \nbblfish left at 15:46 (Quit: Leaving.  \nfmancinelli joined #xwiki at 15:51  \nrrodriguez left at 15:55 (Quit: rrodriguez  \nvenkatesh joined #xwiki at 15:55  \nasrfel joined #xwiki at 16:10  \nflorinciu left at 16:10 (Quit: Leaving.  \nvmassol1 - (16:18): I've found a strange behavior in XE:  \nvmassol1 - (16:18): when I start it, I see the log-in button  \nvmassol1 - (16:19): but if I click on it, I get logged in automatically  \nvmassol1 - (16:19): this is new and wasn't happening before  \ncjdelisle - (16:20): I noticed that too, thought it was because I still had good cookies (after restarting the servlet.)  \nvmassol1 - (16:25): cjdelisle: I also noticed that on http://localhost:8080/xwiki/bin/admin/XWiki/XWikiPreferences?editor=globaladmin&section=Invitation there's a level 1 header that is displayed and then hidden (with some js I think)  \ncjdelisle - (16:26): Yes, that is a hack to deal with the fact that you may need to submit content to more than one locations.  \nvmassol1 - (16:27): it's not nice since the flickering is quite visible  \ncjdelisle - (16:27): Suppose you have a section which has 3 or 4 configurable objects. You will have to submit a form for each one because the /save/ action doesn't support saving multiple documents in one submission.  \ncjdelisle - (16:28): If you have js then it can be done with ajax and you need not notice.  \ncjdelisle - (16:28): If you don't have js, then ajax won't work so there needs to be multiple buttons.  \nvmassol1 - (16:28): cjdelisle: I don't know about techincal issues. All I'm saying is that we have a header that is displayed then that disappears and as a user that's troubling  \ncjdelisle - (16:29): need a bigger hack  \nrrodriguez joined #xwiki at 16:29  \ncjdelisle - (16:31): Everything seems to come down to \"well that means we need to rewrite xwiki-core\".  \nvmassol1 - (16:34): cjdelisle: I don't know about that but it's a pity that from a user POV it's less good than before we had this notion of Configurable. Are you sure there's no solution? (like not displaying that header in the first place)  \ncjdelisle - (16:35): I think a trick which would make it less visible is to not show the headers unless there are multiple configurable objects in the section.  \nvmassol1 - (16:36): maybe, I don't know at all how this configurable thing work (I haven't used it yet)  \nvmassol1 - (16:36): you're the expert  \nevalica left at 16:38 (Ping timeout: 252 seconds  \nEnygma` left at 16:38 (Ping timeout: 260 seconds  \ncjdelisle - (16:41): Hmm. I'm getting js exceptions on my end. Love when things break even if they're left alone :/  \ncjdelisle - (16:52): hmm. on my computer it works ok unless it's minified.  \ncjdelisle - (16:52): ok meaning it does the disappearing thing...  \ncjdelisle - (16:57): Nothing obviously wrong with the js, it's breaking on a FF nightly build so it's possible that it's me, otherwise the minifier is breaking js.  \ncjdelisle - (16:58): \\* an FF 64bit (not using new jit compiling js engine) FF nightly build.  \ncjdelisle - (17:01): going to get something to eat...  \nsilviar1 left at 17:11 (Quit: Leaving.  \nsdumitriu joined #xwiki at 17:12  \nsburjan` - (17:34): cjdelisle : ping  \ncjdelisle - (17:34): pong  \nsburjan` - (17:34): did you commit the patch ?  \nsburjan` - (17:34): the one I sent you  \ncjdelisle - (17:34): r31759  \nsburjan` - (17:35): okay  \nsburjan` - (17:35): thanks  \nsburjan` - (17:35): let me check if they still fail  \ncjdelisle - (17:36): I tested and one test nolonger fails.  \nsburjan` - (17:36): great.. they are ok  \ncjdelisle - (17:36): cool.  \nsburjan` - (17:36): none at all form ui-tests ?  \nsburjan` - (17:37): I still see 4 failed on hudson  \nsburjan` - (17:37): from 2 hours ago  \ncjdelisle - (17:38): http://www.theregister.co.uk/2010/10/13/ms\\_botnet\\_spam\\_update/ <-- when you win the elottery or are offered a loan, that's what's doing it.  \ncjdelisle - (17:41): hmm yea there are still some tests failing and that was taken after your patch was committed.  \ncjdelisle - (17:41): I see 1 is not failing anymore though  \nsburjan` - (17:43): I see failed : 2 fomr Invitation app, 1 from testDocumentAddAttachment and last from Test.testRegisterPasswordTooShort  \nsburjan` - (17:43): i'll svn up and run all tsets on local  \ncjdelisle - (17:44): Invitation app tests should start succeeding soon, once the revision bounces down the pipe to the test end.  \ncjdelisle - (17:44): s/succeeding/passing/  \nsburjan` - (17:45): question : is tehre any way to trigger ui-tests to start on hudson on latest build ?  \ncjdelisle - (17:46): Yes that is what happens, it's just that hudson is pretty busy right now.  \ncjdelisle - (17:49): Does anyone know why enterprise test is bound to agent 1? agent 2 is idle and agent1 has a backlog of work.  \nsdumitriu left at 17:51 (Ping timeout: 264 seconds  \nvmassol1 - (17:52): cjdelisle: jvdrean configured the agents that way. \u00a0I think it was to have an agent not stuck executing functional tests  \nvmassol1 - (17:53): cjdelisle: \u2026. and the windows agent is down  \nvmassol1 - (17:53): we really need more agents  \njvdrean - (17:54): cjdelisle: tests are bound to an agent to avoid having tests from let's say xe2.4 and xe2.5 blocking 2 agents for 1h  \nsburjan` - (17:54): I'll sheck tomorrow on the windows agent  \nsburjan` - (17:54): \\*check  \ncjdelisle - (17:54): 1hour?!  \ntmortagne - (17:55): cjdelisle: last duration of XE tests is 1 hr 21 min  \ntmortagne - (17:55): according to hudson  \ntmortagne - (17:55): so yes 1h  \ncjdelisle - (17:55): I suppose that makes sense. OTOH isn't there a way to allow jobs to be executed concurrently on one box?  \njvdrean - (17:55): yes, it  \njvdrean - (17:55): it's pretty long  \ncjdelisle - (17:57): Maybe install hudson again on the same box and register it as another agent even. I'm pretty sure it's not using the full potential of a multi core system as it is.  \nmflorea left at 17:57 (Quit: Leaving.  \nsburjan` - (17:57): where are the other 2 agents located ? the windows one is here in ro  \nsburjan` - (17:58): cjdelisle : started running all ui-tests on local. let's see how many fail  \ncjdelisle - (17:58): great.  \nevalica joined #xwiki at 18:02  \nsburjan` - (18:05): :))  \nsburjan` - (18:09): cjdelisle 1 failure (InvitationTest) with 2 errors in the same Test  \nEnygma` joined #xwiki at 18:09  \ncjdelisle - (18:09): which one is failing?  \nsburjan` - (18:10): org.xwiki.it.ui.invitation.InvitationTest  \ncjdelisle - (18:10): Which test though?>  \nsburjan` - (18:11): more exactly : testAcceptInvitation and TestAcceptInvitationToClosedWiki  \ncjdelisle - (18:12): Those are the ones I fixed. Are you sure you have the latest revision of XE?  \nsburjan` - (18:13): I ran them at revision 31760  \nevalica left at 18:13 (Quit: Leaving.  \ncjdelisle - (18:14): That's the revision of the tests but did you build XE before running them?  \nsburjan` - (18:14): no. let me redownload latest snapshot and try on that  \nsburjan` - (18:15): also as I can see, the attahment test spits some console errors.. but let me run all of them on latess snapshot  \nvmassol1 - (18:29): guys, I've just clovered platform/core and the TPC is....  \nvmassol1 - (18:29): ...  \nvmassol1 - (18:29): ...  \ncjdelisle - (18:30): ...  \nvmassol1 - (18:30): make a guess!  \nvmassol1 - (18:30): (this is without functional tests)  \ncjdelisle - (18:30): is this xwiki-core or /core/?  \nvmassol1 - (18:30): platform/core  \nsburjan` - (18:30): 80% ? :)  \ncjdelisle - (18:30): hmm I'd guess lower, low expectations...  \ncjdelisle - (18:31): 60? fingers crossed...  \nvmassol1 - (18:31): sburjan`: you're forgetting that we have a history.....  \nvmassol1 - (18:31): (xwiki-core drags us down a lot)  \ncjdelisle - (18:31): That's what I expected.  \nvmassol1 - (18:31): xwiki-rest also has 0% in unit tests  \nvmassol1 - (18:31): so the result is 34.6%  \nsburjan` - (18:32): cjdelisle Getting only one fail : testRegisterPasswordTooShort  \nsburjan` - (18:32): pretty low .. but still  \ncjdelisle - (18:32): This is the % of api functions which are included in tests?  \nvmassol1 - (18:32): I'm curious to see how functional tests improve this score  \nvmassol1 - (18:32): maybe up to 50%  \ncjdelisle - (18:32): Do you know the algorithm?  \ncjdelisle - (18:37): http://confluence.atlassian.com/pages/viewpage.action?pageId=79986990 I guess that's my answer  \ntmortagne - (18:37): cjdelisle: clover is supposed to be the % of code executed during the tests  \ntmortagne - (18:37): i.e. code \"validated\" by tests  \ntmortagne - (18:38): it's ok about API but any peace of code  \ntmortagne - (18:38): s/peace/line/  \nvmassol1 - (18:39): ranked in reports. The Total Coverage Percentage (TPC) is calculated as follows:  \nvmassol1 - (18:39): TPC = (BT + BF + SC + MC)/(2\\*B + S + M)  \nvmassol1 - (18:39): where  \nvmassol1 - (18:39): BT  \nvmassol1 - (18:39): BF  \nvmassol1 - (18:39): SC  \nvmassol1 - (18:39): MC  \nvmassol1 - (18:39): -  \nvmassol1 - (18:39): -  \nvmassol1 - (18:39): -  \nvmassol1 - (18:39): -  \nvmassol1 - (18:39): branches that evaluated to \"true\" at least once  \nvmassol1 - (18:39): branches that evaluated to \"false\" at least once  \nvmassol1 - (18:39): statements covered  \nvmassol1 - (18:39): methods entered  \nvmassol1 - (18:39): B - total number of branches  \nvmassol1 - (18:39): S - total number of statements  \nvmassol1 - (18:39): M - total number of methods  \nfmancinelli left at 18:39 (Ping timeout: 250 seconds  \ncjdelisle - (18:40): So #1 is make every statement run and enter every function.  \ncjdelisle - (18:40): #2 is make every conditional evaluate true, then false.  \ncjdelisle - (18:41): I'll bet we get a much rosier picture if the functional tests are run.  \nvmassol1 - (18:41): sure  \ncjdelisle - (18:42): Sadly, the xwiki-core % is probably still high because the entire core is brought up before the test runs.  \nvmassol1 - (18:42): from my past experience a TPC of 70% is good and 70-80% should be our aim  \nvmassol1 - (18:43): btw I'll need to create some svn externals for gathering enteprrise/ and platform/ so that I can run the build on it all  \nvmassol1 - (18:43): I'll send a mail about this  \nvmassol1 - (18:43): my proposal will be to create that externals in enterprise/trunks  \ncjdelisle - (18:44): I have a git repo with everything. It contains /branches/ and /tags/ dirs but it has everything.  \nvmassol1 - (18:45): yes but you also need a top level pom.xml  \ntmortagne - (18:45): cjdelisle: i think vmassol1 mean having a svn folder where you have everything needed to build XE trunk in the same place (using svn external properties), like we have in http://svn.xwiki.org/svnroot/xwiki/platform/trunks/  \ntmortagne - (18:46): not an external repository  \nvmassol1 - (18:46): ep  \nvmassol1 - (18:46): s/ep/yep/  \ncjdelisle - (18:46): In my git repo, I just dropped a pom in the top level so I can build platform without playing around with trunks.  \nlpereira joined #xwiki at 18:47  \nvmassol1 left at 18:47 (Quit: Leaving.  \nevalica joined #xwiki at 18:50  \nsburjan` - (18:52): da  \nbblfish joined #xwiki at 18:53  \ntmortagne left at 18:57 (Quit: Leaving.  \njvdrean left at 19:03 (Quit: Leaving.  \nbblfish left at 19:16 (Quit: Leaving.  \nasrfel left at 19:19 (Quit: Leaving.  \nrrodriguez left at 19:23 (Ping timeout: 240 seconds  \nrrodriguez joined #xwiki at 19:30  \nlucaa left at 19:30 (Ping timeout: 240 seconds  \narkub left at 19:30 (Quit: Leaving  \nfmancinelli joined #xwiki at 19:32  \nbblfish joined #xwiki at 19:37  \nflorinciu joined #xwiki at 19:37  \nsburjan` - (19:40): cjdelisle what mvn command do you use to run the tests from console ?  \ncjdelisle - (19:40): mvn clean install  \ncjdelisle - (19:40): from /enterprise/distribution-test/ui-tests/  \nsburjan` - (19:40): i am using mvn surefire:test  \ncjdelisle - (19:41): never tried that one, I think hudson uses something closer to clean install  \nsburjan` - (19:41): i know  \nsburjan` - (19:41): surefire is a plugin  \ncjdelisle - (19:41): Pretty sure it runs when you do clean install  \nsburjan` - (19:42): it seems odd to me, because if I run mvn -Dtest=blabla doesnt work ..  \nsburjan` - (19:43): let me try clen install  \ncjdelisle - (19:43): mvn clean install -Dtest=InvitationTest  \ncjdelisle - (19:44): cd enterprise/distribution-test/ui-tests/  \ncjdelisle - (19:44): first though  \nsburjan` - (19:44): i know  \nsburjan` - (19:50): works  \nbblfish left at 20:00 (Ping timeout: 276 seconds  \ncjdelisle - (20:12): hehe google is playing ball with all us who noscript them.  \ncjdelisle - (20:12): The new links are all google.com/url?q=theWebsiteYouThoughtYouWereLinkingTo  \ncjdelisle - (20:13): Maybe I need to put my google greasemonkey script into github.  \nsburjan` - (20:14): you created your own greasemonkey script ?  \ncjdelisle - (20:14): yup  \nsburjan` - (20:15): that does what ? :)  \ncjdelisle - (20:15): It improves google. Especially if you like using encrypted.google  \ncjdelisle - (20:15): And especially if you don't trust google to run js on your computer.  \nsburjan` - (20:15): I see  \nsburjan` - (20:16): cool  \nsburjan` - (20:16): put it on the official greaseonkey repository  \nsburjan` - (20:16): so others can benefit  \ncjdelisle - (20:16): Been thinking about makinjg a gm script to spot those sneeky 1x1px gifs with lots of request params.  \ncjdelisle - (20:18): http://www.pastebay.net/105537 <-- That's it. Google betterifier.  \nsburjan` - (20:19): http://userscripts.org/ <-- upload it here !  \ncjdelisle - (20:19): Removed the left hand panel. And the ads :P \u00a0and it makes it easier to use if like to ban google from running script using noscript.  \ncjdelisle - (20:19): How about you upload it.  \nsburjan` - (20:19): well it's not mine :))  \nsburjan` - (20:20): you're the author  \nsburjan` - (20:20): this is the official greasemonkey repository  \ncjdelisle - (20:20): Well I don't want to sign up and it is indeed yours.  \nbblfish joined #xwiki at 20:23  \nvenkatesh left at 20:28 (Ping timeout: 252 seconds  \nsburjan` - (20:32): odd, i still get invitation errors when I run with mvn clean  \ncjdelisle - (20:32): hmm  \nsburjan` - (20:32): 31760 revision - xwiki build  \nsburjan` - (20:33): mmaybe I am doing something wrong here  \ncjdelisle - (20:33): http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/71/com.xpn.xwiki.products$xwiki-enterprise-test-ui/testReport/  \ncjdelisle - (20:33): here's the latest.  \nsburjan` - (20:34): now that's really really odd .  \nsburjan` - (20:34): why am I getting other failed tests on local  \ncjdelisle - (20:34): What I do is checkout enterprise  \ncjdelisle - (20:35): navigate to /enterprise/trunk/  \ncjdelisle - (20:35): run mvn clean install  \nsburjan` - (20:35): me too  \ncjdelisle - (20:35): cd distribution-test/ui-tests  \nsburjan` - (20:35): what are you getting ?  \ncjdelisle - (20:35): mvn clean install again  \nsburjan` - (20:35): oh...  \nsburjan` - (20:35): i am doing mvn clean install only on ui-tests  \ncjdelisle - (20:36): that's it.  \nsburjan` - (20:36): but can't explain this  \ncjdelisle - (20:36): Here's what happens:  \nsburjan` - (20:36): what does mvn clean instal on trunk do/alter ?  \ncjdelisle - (20:37): It puts the latest build of enterprise into your local mvn repository.  \ncjdelisle - (20:37): This is the build which gets tested.  \ncjdelisle - (20:38): If you wait long enough then your local copy will be expired and the test will download a new one.  \nsburjan` - (20:38): I see. I usually when run this, I don't build, I download and start the latest snapshot .. and when the tests starty, they detect xwiki is responding, and using that instance to perform tests  \nsburjan` - (20:38): let me try it your way  \ncjdelisle - (20:38): But if you need results quickly then you have to build locally otherwise it will be stale.  \ncjdelisle - (20:38): cd ../../  \ncjdelisle - (20:38): (trunk)  \ncjdelisle - (20:38): svn up  \ncjdelisle - (20:38): mvn clean install  \ncjdelisle - (20:41): http://www.exploit-db.com/exploits/15245/  \ncjdelisle - (20:41): ``Sun do not check a call to malloc() when handling environment variables in 'su' code. They also don't check passwords when using telnet so who cares?''  \ncjdelisle - (20:41): lol  \nbblfish left at 20:44 (Quit: Leaving.  \nsburjan` - (20:45): running mvn clean install within ui-tests downloads a latest xwiki, so still can't see the reason to mvn clean install from trunk  \nsburjan` - (20:46): (now doing it from trunks as you said .. to see if I get the same results as hudson)  \nsburjan` - (20:53): I guess tomorrow I'll have to create another patch .. one of the hudson fails is written by me  \ncjdelisle - (20:55): java performance tuning looks like an interesting book.  \nsburjan` - (21:07): 0 errors now on local :))  \nsburjan` - (21:07): so you were right  \nsburjan` - (21:08): still dont understand why hudson reports the failed tests  \nEnygma` left at 21:08 (Ping timeout: 272 seconds  \ncjdelisle - (21:10): 0 errors is very nice.  \nsburjan` - (21:11): yes, but on local machine, not hudson. hudson counts, not my local machine  \ncjdelisle - (21:12): hehe. Sometimes hudson fails stuff which works locally for multiple people (these tests are the biggest pain of all)  \nsburjan` - (21:12): i tested multiple times if my patch works .. and it worked .. and now I see another fail on hudson  \nsburjan` - (21:13): I'm confused ...  \ncjdelisle - (21:13): It fixed 1 test for me.  \ncjdelisle - (21:13): I think that test started passing on hudson as well.  \ncjdelisle - (21:13): I just started another run http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/72/  \nsburjan` - (21:14): how do you start that manually ?  \nsburjan` - (21:14): I mean.. it's great you can start them manually ...  \ncjdelisle - (21:14): beg vincent for permissions ;)  \nsburjan` - (21:15): ;)  \nsburjan` - (21:15): so if my test fails again .. what is the logical explanation ? They worked on 2 local different machines, and failing on hudson  \nsburjan` - (21:15): it the same code  \ncjdelisle - (21:16): different machine. Not sure but it might be running headless.  \nsburjan` - (21:17): interesting  \nsburjan` - (21:17): so this assures no real user intervention  \ncjdelisle - (21:18): nah, headless just means no xorg server running.  \ncjdelisle - (21:19): On second thought that's unlikely.  \nsburjan` - (21:19): wekk afaik you cna't run se2 webdriver without xorg  \nsburjan` - (21:19): ff requires xorg  \ncjdelisle - (21:20): that was my second thought.  \nsburjan` - (21:20): now running with mvn surefire:test to see if still 0 fails  \ncjdelisle - (21:30): ram them on my computer, only failures were some registration tests which flicker and I can't figure out how to fix.  \nsburjan` - (21:30): so no fails on UserProfileTests .. that's good :)  \ncjdelisle - (21:30): You would think 8G of ram was endless. ha no.  \ncjdelisle - (21:30): testCommentDoesntOverrideAboutInformation(org.xwiki.it.ui.administration.UserProfileTest) that was an error.  \ncjdelisle - (21:31): hehe keep in mind I'm running a nightly build of FF so my js engine is a little different.  \nsburjan` - (21:31): hudson has ran the tests you triggered. org.xwiki.it.ui.UserProfileTest.EditProfile still fails :(  \ncjdelisle - (21:32): All the object and class tests were errors on this box.  \ncjdelisle - (21:32): need ram  \ncjdelisle - (21:32): Or maybe ssd. I'm murdering this WD hard disk.  \nsburjan` - (21:33): finished on local machine with surefire:test. 4 fails. I can't explain why with mvn clean install works with 0 fails, and with mvn surefire:test .. 4 failures  \ncjdelisle - (21:33): did it do a long download when you ran it?  \nsburjan` - (21:33): same machine no redownloading of latest snapshot, no svn up  \nsburjan` - (21:33): 11 minutes 39 seconds  \ncjdelisle - (21:34): yea, it fetched a new snapshot of XE  \nsburjan` - (21:34): well.. the mvn clean install on trunk was long  \nsburjan` - (21:34): and that fetched a snapshot  \nsburjan` - (21:34): so I have no explanation on what is going on  \ncjdelisle - (21:34): That got snapshots of a bunch of things and used them to build XE.  \nsburjan` - (21:35): yes  \nsburjan` - (21:35): but same snapshot, same svn revision, and mvn clean install and mvn surefire:test result in diffrent results  \nsburjan` - (21:35): this is my question of the day  \nsburjan` - (21:36): and you're getting other results  \nsburjan` - (21:36): hudson is getting diffrent results  \nsburjan` - (21:36): :))  \nsburjan` - (21:36): so 3 machines, 3 diferent results  \ncjdelisle - (21:37): naw it's not the same snapshot because the tests pull xe from the server when you run them.  \nsburjan` - (21:38): well was a nre version of snapshot released in the past 30 minutes ?  \nsburjan` - (21:38): \\*new  \ncjdelisle - (21:39): Every time hudson does a build.  \nsburjan` - (21:39): so when you triggered manually the tests .. hudson created a new xe snapshot ?  \ncjdelisle - (21:41): no, it polls the mvn.xwiki server to see if hudson had made one which is newer than the one you have on your computer.  \nsburjan` - (21:41): yes. this is how i imagined  \nsburjan` - (21:42): so why do you say I am not running on the same xe version as hudson ? It downloaded it 20 minutes ago .. no new build  \nsdumitriu joined #xwiki at 21:44  \ncjdelisle - (21:44): There are a couple possibilities.  \nsburjan` - (21:44): I wasn't so confused about something in a long time .. I swear it  \ncjdelisle - (21:45): Maybe hudson has built a new version but has not gotten a chance to test it yet (this was the case today)  \nsburjan` - (21:45): I'm dying to get this rationalized  \ncjdelisle - (21:46): Unfortunately to know which version you are testing, you have to get platform, svn up, mvn clean install (this takes a while) then get enterprise, svn up, mvn clean install, then navigate to the tests and mvn clean install.  \ncjdelisle - (21:46): (well actually that's not true, you can watch the tests and look at the little number at the bottom)  \ncjdelisle - (21:47): it's also stored in ui-tests/target/somedir/...  \ncjdelisle - (21:47): a file called version.properties.  \nsburjan` - (21:49): if you find an explanation, please do tell  \nphobik joined #xwiki at 21:54  \nsburjan` - (21:54): so basically I have to fix a test that fails only on hudson :(  \nphobik left at 21:55 (Client Quit  \nlucaa joined #xwiki at 21:58  \nevalica left at 22:14 (Quit: Leaving.  \nfmancinelli left at 22:29 (Ping timeout: 255 seconds  \nrrodriguez left at 22:32 (Quit: rrodriguez  \nrrodriguez joined #xwiki at 22:37  \nrrodriguez left #xwiki at 22:39  \nrstavro left at 22:42 (Quit: Page closed  \nflorinciu left at 23:26 (Quit: Leaving.  \nlpereira left at 23:38 (Quit: Leaving.  \nsdumitriu - (23:55): cjdelisle: Did you finish your two commits?  \nsdumitriu - (23:55): (that you wanted to do before the release)  \ncjdelisle - (23:59): Yes I did  \n\n"}