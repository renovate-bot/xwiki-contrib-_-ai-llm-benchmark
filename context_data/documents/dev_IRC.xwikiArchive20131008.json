{"id": "dev:IRC.xwikiArchive20131008", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20131008", "title": "IRC Archive for channel #xwiki on 08 October 2013 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<cjd>\u00a0has quit  \n00:04\u00a0<ramkam2013>\u00a0has left #xwiki  \n00:05\u00a0<abusenius>\u00a0has quit  \n00:07\u00a0<cjd>\u00a0has joined #xwiki  \n00:11\u00a0<mflorea>\u00a0has quit  \n00:49\u00a0<polx>\u00a0has quit  \n04:10\u00a0<sdumitriu>\u00a0has quit  \n04:27\u00a0<sdumitriu>\u00a0has joined #xwiki  \n06:01\u00a0<Denis1>\u00a0has joined #xwiki  \n06:04\u00a0<Denis>\u00a0has quit  \n06:19\u00a0<sburjan`>\u00a0has quit  \n06:19\u00a0<sburjan`>\u00a0has joined #xwiki  \n07:04\u00a0<vmassol>\u00a0has joined #xwiki  \n07:14\u00a0<sburjan>\u00a0has joined #xwiki  \n07:36\u00a0<sburjan>\u00a0vmassol: good morning  \n07:38\u00a0<vmassol>\u00a0good morning  \n08:03\u00a0<mflorea>\u00a0has joined #xwiki  \n08:21\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:53\u00a0<polx>\u00a0has joined #xwiki  \n09:08\u00a0<polx>\u00a0has quit  \n09:18\u00a0<polx>\u00a0has joined #xwiki  \n09:23\u00a0<polx>\u00a0has quit  \n09:24\u00a0<polx>\u00a0has joined #xwiki  \n09:26\u00a0<polx>\u00a0has quit  \n09:30\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n09:30\u00a0<polx>\u00a0has joined #xwiki  \n09:31\u00a0<polx>\u00a0has quit  \n09:31\u00a0<polx>\u00a0has joined #xwiki  \n09:32\u00a0<polx>\u00a0has quit  \n09:33\u00a0<evalica>\u00a0has joined #xwiki  \n09:34\u00a0<polx>\u00a0has joined #xwiki  \n09:38\u00a0<polx>\u00a0has quit  \n10:14\u00a0<polx>\u00a0has joined #xwiki  \n11:48\u00a0<polx>\u00a0has quit  \n11:48\u00a0<polx>\u00a0has joined #xwiki  \n11:55\u00a0<polx>\u00a0has quit  \n12:07\u00a0<polx>\u00a0has quit  \n12:34\u00a0<polx>\u00a0has joined #xwiki  \n12:42\u00a0<msmeria>\u00a0has joined #xwiki  \n12:45\u00a0<polx>\u00a0has quit  \n12:46\u00a0<mflorea>\u00a0has quit  \n12:59\u00a0<Inge->\u00a0has quit  \n13:02\u00a0<camil7>\u00a0has joined #xwiki  \n13:31\u00a0<polx>\u00a0has joined #xwiki  \n13:38\u00a0<mflorea>\u00a0has joined #xwiki  \n13:39\u00a0<Inge->\u00a0has joined #xwiki  \n13:47\u00a0<Enygma`>\u00a0has joined #xwiki  \n13:55\u00a0<polx>\u00a0has quit  \n13:57\u00a0<polx>\u00a0has joined #xwiki  \n13:58\u00a0<polx>\u00a0has quit  \n14:06\u00a0<ldubost>\u00a0has joined #xwiki  \n14:13\u00a0<polx>\u00a0has joined #xwiki  \n14:45\u00a0<polx>\u00a0has quit  \n14:46\u00a0<polx>\u00a0has joined #xwiki  \n14:47\u00a0<vmassol>\u00a0has quit  \n14:49\u00a0<polx\\_>\u00a0has joined #xwiki  \n14:49\u00a0<polx>\u00a0has quit  \n14:49\u00a0<polx\\_>\u00a0is now known as <polx>  \n14:51\u00a0<vmassol>\u00a0has joined #xwiki  \n14:51\u00a0<polx>\u00a0has quit  \n15:14\u00a0<vmassol>\u00a0has quit  \n15:14\u00a0<vmassol>\u00a0has joined #xwiki  \n15:14\u00a0<vmassol>\u00a0has quit  \n15:16\u00a0<polx>\u00a0has joined #xwiki  \n15:20\u00a0<Slashman>\u00a0has joined #xwiki  \n15:23\u00a0<polx>\u00a0has quit  \n15:44\u00a0<polx>\u00a0has joined #xwiki  \n15:45\u00a0<polx>\u00a0has quit  \n15:45\u00a0<Slashman>\u00a0hello, I just installed a brand new xwiki using the debian repo and when I try to create a new user (first action after the wizard is done), I have an exception : http://pastebin.com/i23psahd  \n15:45\u00a0<Slashman>\u00a0any idea ?  \n15:45\u00a0<polx>\u00a0has joined #xwiki  \n15:45\u00a0<Slashman>\u00a0I try to create the user from the administration page => users  \n15:47\u00a0<ldubost>\u00a0has quit  \n15:51\u00a0<tmortagne>\u00a0Slashman: the root cause seems to be: \"java.lang.Error: Probable fatal error:No fonts found.\"  \n15:51\u00a0<tmortagne>\u00a0but not sure exactly why  \n15:53\u00a0<camil7>\u00a0Slashman: are you using openjdk ?  \n15:53\u00a0<tmortagne>\u00a0Slashman: found http://wiki.hudson-ci.org/display/HUDSON/Hudson+got+java.awt.headless+problem  \n15:53\u00a0<Slashman>\u00a0when I retry, I have the following error : http://pastebin.com/pCz1k5JF  \n15:53\u00a0<tmortagne>\u00a0camil7: I guess he does yes it's the default one installed  \n15:53\u00a0<Slashman>\u00a0camil7: openjdk indeed, because it is included in the debian package  \n15:54\u00a0<tmortagne>\u00a0at least on ubuntu but I guess it's the same on debian  \n15:54\u00a0<Slashman>\u00a0should I raise e ticket on jira ?  \n15:54\u00a0<camil7>\u00a0tmortagne: \u00a0just found the same hint \u00a0- google makes all brains equal :)  \n15:54\u00a0<tmortagne>\u00a0Slashman: sure, could you try the solution indicated on http://wiki.hudson-ci.org/display/HUDSON/Hudson+got+java.awt.headless+problem too ?  \n15:54\u00a0<Slashman>\u00a0so I just have to switch the jdk to Oracle ?  \n15:55\u00a0<camil7>\u00a0no, just install the fonts  \n15:55\u00a0<tmortagne>\u00a0if it works we can always add ttf-dejavu to the dependencies I guess  \n15:55\u00a0<tmortagne>\u00a0Slashman: \"sudo apt-get install ttf-dejavu\"  \n15:55\u00a0<Slashman>\u00a0oh I see  \n15:55\u00a0<Slashman>\u00a0should be added as dependency  \n15:56\u00a0<tmortagne>\u00a0it's the first time I see this issue actually, maybe it's different on ubuntu-server  \n15:56\u00a0<Slashman>\u00a0by the way, do you advice the use of openjdk or oracle jdk ?  \n15:56\u00a0<tmortagne>\u00a0we usually use oracle jre in production  \n15:57\u00a0<tmortagne>\u00a0now is it really better I'm not sure, it's more habits  \n15:57\u00a0<tmortagne>\u00a0it's not worst for sure  \n15:57\u00a0<tmortagne>\u00a0also I think 5.2 triggers java 6 by default, at the minimum you should move to java 6  \n15:58\u00a0<tmortagne>\u00a0I modified this in the dependencies to install java 7 by default  \n15:59\u00a0<Slashman>\u00a0do you have any idea of where I should put the setenv.sh on the tomcat7 install ?  \n15:59\u00a0<Slashman>\u00a0I'm more familliar with a plain tomcat7 from http://tomcat.apache.org/  \n15:59\u00a0<Slashman>\u00a0no sure where debian puts everything  \n15:59\u00a0<tmortagne>\u00a0Slashman: see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/InstallationViaAPT#HTomcatUsability  \n16:00\u00a0<tmortagne>\u00a0/etc/default/tomcat<yourversion>  \n16:01\u00a0<Slashman>\u00a0great, thanks !  \n16:03\u00a0<tmortagne>\u00a0Slashman: will add the dependency as soon as you create the jira issue ;)  \n16:08\u00a0<Slashman>\u00a0tmortagne: XCOMMONS-470  \n16:08\u00a0<tmortagne>\u00a0Slashman: thanks  \n16:08\u00a0<Slashman>\u00a0wasn't sure where to put it, hope common is fine  \n16:10\u00a0<tmortagne>\u00a0Slashman: no but it's ok :)  \n16:10\u00a0<tmortagne>\u00a0I moved it  \n16:10\u00a0<tmortagne>\u00a0don't worry about that, what's important is that it's been reported with detailed information  \n16:18\u00a0<Slashman>\u00a0hm I switch to Oracle jdk and now I have many \"java.lang.OutOfMemoryError\" with a Xmx of 1.5G  \n16:21\u00a0<Slashman>\u00a0catalina.out output : http://pastebin.com/0e1j3MuU  \n16:22\u00a0<Slashman>\u00a0retrying with openjdk  \n16:22\u00a0<Slashman>\u00a0it works  \n16:23\u00a0<tmortagne>\u00a0very weird  \n16:24\u00a0<tmortagne>\u00a0using oracle jdk should not change much and 1.5 is certainly way more than needed for the default wiki  \n16:24\u00a0<tmortagne>\u00a0\\*1.5G  \n16:24\u00a0<Slashman>\u00a0Oracle jdk is 1.7 and openjdk is 1.6  \n16:25\u00a0<tmortagne>\u00a0try openjdk 7 maybe  \n16:25\u00a0<Slashman>\u00a0I should enable a management.jmxremote to connect a jconsole  \n16:30\u00a0<Slashman>\u00a0trying with openjdk-7  \n16:30\u00a0<Slashman>\u00a0it works  \n16:30\u00a0<tmortagne>\u00a0how did you install oracle one ?  \n16:31\u00a0<tmortagne>\u00a0I usually use the webupd8 repository (http://www.webupd8.org/2012/06/how-to-install-oracle-java-7-in-debian.html)  \n16:32\u00a0<tmortagne>\u00a0and you don't need the jdk by the way, the jre is enough (you don't have much choice with openjdk)  \n16:32\u00a0<Slashman>\u00a0production is running with the same setup, only with different jvm option (and a tomcat6, not 7) : JAVA\\_OPTS=\"-Djava.awt.headless=true -XX:MaxPermSize=512m -Xmx2048m -XX:ReservedCodeCacheSize=128m -XX:+UseConcMarkSweepGC -XX:MaxGCPauseMillis=2000 -XX:+CMSClassUnloadingEnabled\"  \n16:32\u00a0<Slashman>\u00a0this works on prod  \n16:33\u00a0<Slashman>\u00a0I think either the permsize or the codecache is not correctly managed by oracle's jdk  \n16:33\u00a0<tmortagne>\u00a0I don't think it's permsize given the error you get  \n16:34\u00a0<tmortagne>\u00a0hmm wait it does not say which memory it is actually indeed  \n16:34\u00a0<tmortagne>\u00a0which is pretty weird itself since it usually say if the issue is with permgen or heap  \n16:36\u00a0<Slashman>\u00a0it's working with JAVA\\_OPTS=\"-Djava.awt.headless=true -XX:MaxPermSize=256m -Xmx1g -XX:ReservedCodeCacheSize=128m -XX:+UseConcMarkSweepGC -XX:MaxGCPauseMillis=2000 -XX:+CMSClassUnloadingEnabled\"  \n16:36\u00a0<Slashman>\u00a0with oracle's jdk  \n16:36\u00a0<Slashman>\u00a0so it's definitively either the permsize or the codecache  \n16:36\u00a0<tmortagne>\u00a0I must confess I don't know much about CodeCache  \n16:37\u00a0<Slashman>\u00a0it's static code, should be minimal  \n16:37\u00a0<Slashman>\u00a0I'll connect a jconsole to see exactly  \n16:43\u00a0<Slashman>\u00a0it's the permgen, using 64M, codecache is using 5M  \n16:43\u00a0<Slashman>\u00a0dunno what is the basic ratio for permgen  \n16:45\u00a0<tmortagne>\u00a0I guess openjdk has a higher default one, I tough you set a permgen actually  \n16:45\u00a0<tmortagne>\u00a0see http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Performances#HMemory  \n16:45\u00a0<tmortagne>\u00a0jython and groovy create quite a few classes and takes quite some permgen  \n16:45\u00a0<Slashman>\u00a0no permgen set by default on debian, I just forgot  \n16:46\u00a0<vmassol>\u00a0has joined #xwiki  \n16:46\u00a0<Slashman>\u00a0I did set the xmx because if you don't, the install just fails  \n16:46\u00a0<tmortagne>\u00a0yes the default tomcat xmx is very low  \n16:46\u00a0<Slashman>\u00a0128M xmx by deault on debian is too low  \n16:48\u00a0<Slashman>\u00a0can't wait to have G1GC replace ConcMarkSweepGC even for JVM using less then 6GB  \n16:49\u00a0<Slashman>\u00a0those kind of jvm tuning will go away  \n17:01\u00a0<Slashman>\u00a0is there a way to create a lot users easily ? I have to populate a demo wiki with many users and I don't feel like doing it by hand :p  \n17:01\u00a0<Slashman>\u00a0adding users directly in the database is the way I think...  \n17:10\u00a0<vmassol>\u00a0Slashman: http://extensions.xwiki.org/xwiki/bin/view/Extension/Create+200+Dummy+Users  \n17:12\u00a0<Slashman>\u00a0vmassol: interesting, thanks  \n17:13\u00a0<ldubost>\u00a0has joined #xwiki  \n17:13\u00a0<vmassol>\u00a0it's a very old script but hopefully it should still work  \n17:13\u00a0<Slashman>\u00a0is there a way to define the password too ?  \n17:14\u00a0<Slashman>\u00a0like by adding something like uobj.set(\"password\" , user.get(2)) ?  \n17:14\u00a0<Slashman>\u00a0and adding a third element to the list for each user  \n17:14\u00a0<Slashman>\u00a0[\"Yolanda\",\"Hood\",\"test\"]  \n17:15\u00a0<ldubost>\u00a0has quit  \n17:21\u00a0<ldubost>\u00a0has joined #xwiki  \n17:25\u00a0<evalica>\u00a0has quit  \n17:25\u00a0<mflorea>\u00a0has quit  \n17:27\u00a0<ldubost>\u00a0has quit  \n17:28\u00a0<polx>\u00a0has quit  \n17:35\u00a0<Enygma`>\u00a0has quit  \n17:38\u00a0<ldubost>\u00a0has joined #xwiki  \n18:04\u00a0<polx>\u00a0has joined #xwiki  \n18:39\u00a0<tmortagne>\u00a0has quit  \n18:58\u00a0<msmeria>\u00a0has quit  \n19:14\u00a0<camil7>\u00a0has left #xwiki  \n19:23\u00a0<gdelhumeau>\u00a0has quit  \n19:23\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n19:39\u00a0<ldubost>\u00a0has quit  \n19:45\u00a0<polx>\u00a0has quit  \n20:29\u00a0<polx>\u00a0has joined #xwiki  \n20:33\u00a0<polx>\u00a0has quit  \n21:06\u00a0<polx>\u00a0has joined #xwiki  \n21:24\u00a0<vmassol>\u00a0has quit  \n21:25\u00a0<vmassol>\u00a0has joined #xwiki  \n21:37\u00a0<vmassol>\u00a0has quit  \n21:40\u00a0<polx>\u00a0has quit  \n21:51\u00a0<polx>\u00a0has joined #xwiki  \n22:03\u00a0<ldubost>\u00a0has joined #xwiki  \n22:26\u00a0<ldubost>\u00a0has quit  \n22:31\u00a0<cjd>\u00a0has quit  \n22:32\u00a0<ldubost>\u00a0has joined #xwiki  \n22:35\u00a0<cjd>\u00a0has joined #xwiki  \n23:21\u00a0<ldubost>\u00a0has quit  \n23:26\u00a0<polx>\u00a0has quit  \n23:26\u00a0<ldubost>\u00a0has joined #xwiki  \n23:39\u00a0<polx>\u00a0has joined #xwiki  \n23:47\u00a0<ldubost>\u00a0has quit  \n23:58\u00a0<sdumitriu1>\u00a0has quit\n"}