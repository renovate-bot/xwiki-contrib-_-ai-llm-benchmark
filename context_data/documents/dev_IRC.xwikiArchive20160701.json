{"id": "dev:IRC.xwikiArchive20160701", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20160701", "title": "IRC Archive for channel #xwiki on 01 July 2016 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<acotiuga>\u00a0has joined #xwiki  \n14:12\u00a0<ClemensR>\u00a0vmassol: ok, then it is just me :) \u00a0\u00a0or the -Plegacy is missing  \n14:12\u00a0<vmassol>\u00a0hmm weird on http://www.xwiki.org/xwiki/bin/view/References/Leica+Captivate+2.0#Attachments the attachment tab displays an error  \n14:13\u00a0<vmassol>\u00a0ouch NPE for hasAccessLevel call  \n14:14\u00a0<ClemensR>\u00a0seems the build rund without -Plegacy \u00a0http://ci.xwiki.org/job/xwiki-commons\\_Quality-7.4.x/45/consoleText \u00a0\u00a0... in that case it works for me, too  \n14:14\u00a0<vmassol>\u00a0ClemensR: ok that would explain it, we need to add the legacy profile to all quality builds probably  \n14:16\u00a0<vmassol>\u00a0is it just me or xwiki.org is really slow?  \n14:17\u00a0<vmassol>\u00a0the bot just answere to my question ;)  \n14:17\u00a0<vmassol>\u00a0it's slow  \n14:19\u00a0<vmassol>\u00a0I see this now: https://www.evernote.com/l/AHfdpuz0SGdHZYVn2Qik40f1vD0EvFOHgvY  \n14:19\u00a0<vmassol>\u00a0so 2 problems:  \n14:19\u00a0<vmassol>\u00a0(2 intermittent problems)  \n14:19\u00a0<vmassol>\u00a0- attachment tab error  \n14:19\u00a0<vmassol>\u00a0- header error  \n14:21\u00a0<ClemensR>\u00a0hm, I do not ... logging in ...  \n14:21\u00a0<ClemensR>\u00a0(the header, I mean)  \n14:22\u00a0<lkrejci\\_>\u00a0has quit  \n14:24\u00a0<vmassol>\u00a0it's intermittent  \n14:24\u00a0<vmassol>\u00a0re jacoco I think we fixed it on master but we probably forgot to backport  \n14:24\u00a0<vmassol>\u00a0checking  \n14:26\u00a0<tmortagne>\u00a0ClemensR: I noticed the missing -Pquality and added it recently but only in master jobs  \n14:26\u00a0<ClemensR>\u00a0ah, ok  \n14:27\u00a0<ClemensR>\u00a0I will just push the cherry-pick of the fileuploads version number to that branch now, hope that does not mix up things too much  \n14:28\u00a0<vmassol>\u00a0tmortagne: ok, I was checking this but ci is real slow for me  \n14:28\u00a0<tmortagne>\u00a0and yes we need to add it in 7.4.x jobs too  \n14:29\u00a0<acotiuga>\u00a0has quit  \n14:30\u00a0<vmassol>\u00a0done for platform  \n14:30\u00a0<vmassol>\u00a0doing it for commons and rendering now  \n14:30\u00a0<vmassol>\u00a0actually done for commons  \n14:30\u00a0<vmassol>\u00a0doing it for platform and rnedering  \n14:37\u00a0<ClemensR>\u00a0hm, about the NPE: the stack trace talks about an error in /templates/xpart.vm[line 6, column 25] \u00a0but this file has only 3 lines (or is the one on xwiki.org customized?)  \n14:42\u00a0<vmassol>\u00a0I don't think so  \n14:46\u00a0<medwyn>\u00a0has joined #xwiki  \n14:47\u00a0<medwyn>\u00a0hi everyone, I have a weird problem with livetable and userlivetable macros in my wiki, they always come up \"empty\" or broken with only top left cell returning and empty. No valid rows are returned no matter what.  \n14:48\u00a0<vmassol>\u00a0tmortagne: trying to break a record of releases in one day? :) lol  \n14:48\u00a0<tmortagne>\u00a0vmassol: only two today  \n14:49\u00a0<vmassol>\u00a0:)  \n14:49\u00a0<medwyn>\u00a0So I just took a blind shot coming to the IRC if someone could help me to investigate this matter, I am new to xwiki but not to computers :)  \n14:51\u00a0<vmassol>\u00a0medwyn: that's the right place!  \n14:51\u00a0<vmassol>\u00a0you could open the dev tools of your browser and check the json returned for the livetable query  \n14:51\u00a0<vmassol>\u00a0that should allow you to find out the problem  \n14:52\u00a0<medwyn>\u00a0will do, thanks  \n14:55\u00a0<medwyn>\u00a0ok, i found UserDirectoryLivetableResults  \n14:56\u00a0<medwyn>\u00a0with response #gridresultwithfilter('XWiki.XWikiUsers' $request.collist.split(','), \"$!extraFromClause\", \"$!extraWhereClause\", $extraWhereClauseParameters)  \n14:56\u00a0<medwyn>\u00a0not very helpful to be honest  \n14:56\u00a0<vmassol>\u00a0ok so it's not evaluated  \n14:56\u00a0<vmassol>\u00a0wait  \n14:56\u00a0<vmassol>\u00a0is that the returned json  \n14:56\u00a0<vmassol>\u00a0?  \n14:56\u00a0<Slashman>\u00a0has quit  \n14:56\u00a0<vmassol>\u00a0or just the content of hte page?  \n14:56\u00a0<vmassol>\u00a0you need to see the execution of the page  \n14:56\u00a0<vmassol>\u00a0ie the returned json  \n14:56\u00a0<medwyn>\u00a0could not find the json in the log, will try more :)  \n14:57\u00a0<vmassol>\u00a0it's not in the log  \n14:57\u00a0<vmassol>\u00a0it's in your browser dev tool's network tab  \n14:57\u00a0<vmassol>\u00a0ie all the urls opened  \n14:57\u00a0<vmassol>\u00a0find the one that calls UserDirectoryLivetableResults then  \n14:57\u00a0<vmassol>\u00a0and check the result  \n14:58\u00a0<medwyn>\u00a0thats what i ment, Network tab  \n14:58\u00a0<medwyn>\u00a0(with the log)  \n14:58\u00a0<vmassol>\u00a0ok  \n14:59\u00a0<medwyn>\u00a0there is this call: xwiki/bin/get/XWiki/UserDirectoryLivetableResults?outputSyntax=plain&transprefix=xe.userdirectory.&classname=XWiki.XWikiUsers&collist=\\_avatar%2Cdoc.name%2Cfirst\\_name%2Clast\\_name&queryFilters=currentlanguage%2Chidden&offset=1&limit=10&reqNo=1&sort=doc.name&dir=asc  \n15:00\u00a0<medwyn>\u00a0in the network tab, and in response: #gridresultwithfilter('XWiki.XWikiUsers' $request.collist.split(','), \"$!extraFromClause\", \"$!extraWhereClause\", $extraWhereClauseParameters)  \n15:00\u00a0<medwyn>\u00a0Running brandly updated xwiki 8.1 with Oracle XE on CentOS  \n15:00\u00a0<vmassol>\u00a0ok so it menas that the issue is that the velocity is not executed and is returning invalid json  \n15:01\u00a0<vmassol>\u00a0now we need to figure out why :)  \n15:01\u00a0<medwyn>\u00a0cool :)  \n15:01\u00a0<ClemensR>\u00a0ah, updated .... can you see who the editor of that page is?  \n15:01\u00a0<ClemensR>\u00a0the UserDirectoryLivetableResults I mean  \n15:01\u00a0<medwyn>\u00a0it was broken even before the update, that's why i have done it in the first place :/  \n15:01\u00a0<medwyn>\u00a0was on 8.0-milestone-2 before  \n15:02\u00a0<ClemensR>\u00a0if I check in my instance the \"normal view\" of that page does not show velocity code, so I guess something is broken with the permission to execute velocity code  \n15:02\u00a0<vmassol>\u00a0actually it seems XWiki.LiveTableResultsMacros has not been loaded  \n15:03\u00a0<vmassol>\u00a0so maybe that page is missing the permissions  \n15:03\u00a0<lkrejci>\u00a0has quit  \n15:03\u00a0<lkrejci>\u00a0has joined #xwiki  \n15:03\u00a0<ClemensR>\u00a0ah, yes, as pages livetable is broken, too, that would explain both :)  \n15:04\u00a0<medwyn>\u00a0ok, I see the page. I am the only one who changed it, like an hour ago. In the body of the page is the piece of velocity returned in that response  \n15:04\u00a0<medwyn>\u00a0how can i change the rights? with the pencil->Access Rights?  \n15:04\u00a0<ClemensR>\u00a0on which page are you now? UserDirectoryLivetableResults or LiveTableResultsMacros ?  \n15:05\u00a0<medwyn>\u00a0XWiki/UserDirectoryLivetableResults  \n15:05\u00a0<ClemensR>\u00a0ok, vmassol had the idea to look into XWiki/LiveTableResultsMacros \u00a0which is used by all livetables  \n15:06\u00a0<medwyn>\u00a0ok ok switching there  \n15:06\u00a0<ClemensR>\u00a0this should be an empty page, too, if looking at it, but the \"view source\" should show quite a bit of stuff  \n15:06\u00a0<vmassol>\u00a0the reason I thought about this is because the returned json has not evlauated the call to \u00a0#gridresultwithfilter which is located in XWiki/LiveTableResultsMacros  \n15:07\u00a0<vmassol>\u00a0first, are you allowed to view the page with your user?  \n15:07\u00a0<vmassol>\u00a0ClemensR: I don't think this page requires PR, does it?  \n15:08\u00a0<vmassol>\u00a0maybe it does, I don't remember  \n15:08\u00a0<ClemensR>\u00a0side note: I successfully broke the xwiki-commons\\_Quality-7.4.x \u00a0job \u00a0\u00a0;)  \n15:08\u00a0<vmassol>\u00a0nice job! :)  \n15:08\u00a0<medwyn>\u00a0ok, there was something wrong with the page  \n15:08\u00a0<ClemensR>\u00a0looks like it does, with all the includes  \n15:08\u00a0<medwyn>\u00a0It was missing, deleted by a colleague of mine  \n15:08\u00a0<ClemensR>\u00a0ah, ok, \"was\" sounds good :)  \n15:08\u00a0<vmassol>\u00a0haha :)  \n15:08\u00a0<medwyn>\u00a0so I rolled back to the first day of install  \n15:09\u00a0<medwyn>\u00a0and voila! :)  \n15:09\u00a0<medwyn>\u00a0how can I update it to current version now, if there were any changes?  \n15:09\u00a0<medwyn>\u00a0its stuck with 8.0-milestone-2  \n15:09\u00a0<vmassol>\u00a0can you please whip that colleague for us? :)  \n15:09\u00a0<ClemensR>\u00a0ah, no changes by the upgrade, so the DW did not complain, it seems  \n15:10\u00a0<ClemensR>\u00a0let me check if there has been a difference at all between the verisons  \n15:10\u00a0<medwyn>\u00a0userdirectory works now, thats cool.  \n15:10\u00a0<medwyn>\u00a0my other livetable is not, but its really just something i have not tested yet.  \n15:10\u00a0<medwyn>\u00a0and whipping is guaranteed :-D  \n15:11\u00a0<vmassol>\u00a0future idea: have some sanity check admin tool that reports when apps have been tamperered with (modifidication deletion, etc) by comparing pages content with the pages from the installed extenson XARs using EM scripting api  \n15:11\u00a0<vmassol>\u00a0hehe for the whipping!  \n15:12\u00a0<medwyn>\u00a0that's a good idea, I suppose :)  \n15:13\u00a0<vmassol>\u00a0I code something similar not long ago, let me find it  \n15:13\u00a0<medwyn>\u00a0I used twiki and dokuwiki before, but xwiki seems to be the most comlicated - and most powerful of them :)  \n15:13\u00a0<vmassol>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/FindIfExtensionPage/  \n15:13\u00a0<ClemensR>\u00a0nedwyn: no changes to XWiki/LiveTableResultsMacros \u00a0between 8.0-milestone-2 \u00a0and 8.1 so you are fine with the current version  \n15:13\u00a0<vmassol>\u00a0oh no don't say complicated! :)  \n15:14\u00a0<vmassol>\u00a0the most powerful for sure  \n15:14\u00a0<medwyn>\u00a0both of you, vmassol and ClemensR, thank you!  \n15:14\u00a0<ClemensR>\u00a0no problem, our pleasure :)  \n15:14\u00a0<vmassol>\u00a0but yes we still have some work to make it less complictaed for sure :)  \n15:14\u00a0<medwyn>\u00a0update went like a charm. i prepared one single WAR with updated cfgs and xmls and deployed - first try no harm  \n15:16\u00a0<medwyn>\u00a0btw, is there a REST call to update OR create an object within a page?  \n15:17\u00a0<vmassol>\u00a0yes: http://platform.xwiki.org/xwiki/bin/view/Features/XWikiRESTfulAPI#HObjectresources  \n15:17\u00a0<medwyn>\u00a0what I am trying to do: We use xwiki as a documentation for a couple of SQL procedures. Prepared a python script which queries INFORMATION\\_SCHEMA and comes up with pages AND objects  \n15:17\u00a0<medwyn>\u00a0I ment within one call  \n15:18\u00a0<medwyn>\u00a0what i do now to make sure no useless edits are done is that I chech existence of /objects/CLASS/0 and if it does exists, I update, if doesnt, I put to /objects/  \n15:19\u00a0<medwyn>\u00a0and you probably understand now the use of livetable: I want to list all the documented objects in a livetable with all the bells and whistles :)  \n15:22\u00a0<ClemensR>\u00a0I guess you need to have the two REST calls, one to check and one to create/update the object  \n15:24\u00a0<medwyn>\u00a0OK, thats what I do now. No problem :)  \n15:28\u00a0<ClemensR>\u00a0medwyn: just to be sure, you have found the livetable documentation : http://extensions.xwiki.org/xwiki/bin/view/Extension/Livetable+Macro \u00a0?  \n15:28\u00a0<medwyn>\u00a0mhm, why do I seem I havent? :)  \n15:30\u00a0<medwyn>\u00a0there is seriously something wrong with my installation. the user directory started working, but when i copied the demo code for livetable (Examples -> user directory) it does the same as before, empty table  \n15:31\u00a0<ClemensR>\u00a0just in case, so you do not have to reverse engineer the code - \u00a0\u00a0when I started with XWiki I was a bit surprised that so much documentation of the \"XWiki core\" (as I understood it) is on extensions.xwiki.org  \n15:31\u00a0<medwyn>\u00a0In browser: The request: XWiki/LiveTableResults?outputSyntax=plain&transprefix=xe.index.users.&classname=XWiki.XWikiUsers&collist=\\_avatar%2Cfirst\\_name%2Clast\\_name%2Cemail%2Cdoc.creationDate&queryFilters=currentlanguage%2Chidden&offset=1&limit=10&reqNo=1&sort=first\\_name&dir=asc  \n15:31\u00a0<ClemensR>\u00a0maybe the demo code is outdated ? ....  \n15:32\u00a0<ClemensR>\u00a0hmhm, looks ok, the request ...  \n15:32\u00a0<medwyn>\u00a0The response: I got 200 (OK) and the response: empty  \n15:33\u00a0<ClemensR>\u00a0ok, then the query simply has found nothing  \n15:34\u00a0\\*\u00a0ClemensR has too many different XWiki versions running, all but 8.1 :-/   \n15:34\u00a0\\*\u00a0medwyn has only 8.1  \n15:35\u00a0<msmeria>\u00a0has quit  \n15:36\u00a0<medwyn>\u00a0I will strip the code to bare minimum  \n15:36\u00a0<medwyn>\u00a0and see what I get  \n15:38\u00a0<ClemensR>\u00a0ah, tmortagne beat me to it :)  \n15:41\u00a0<ClemensR>\u00a0hm, where I get at least some results when I copy & paste the code from the e.x.o page, it is just all the translation keys are wrong  \n15:41\u00a0<medwyn>\u00a0Ok, another page was missing: XWiki/LiveTableResults  \n15:42\u00a0<ClemensR>\u00a0uh, ok, maybe better check the \"deleted documents\" page  \n15:42\u00a0<vmassol>\u00a0maybe check your trash for more deleted pages....  \n15:50\u00a0<medwyn>\u00a0OK, seriously, you are my saviors :)  \n15:51\u00a0<medwyn>\u00a0Other deleted pages seem to be OK - not in XWiki space  \n15:52\u00a0<Slashman>\u00a0has joined #xwiki  \n15:52\u00a0<ClemensR>\u00a0ah, ok, colleague had a good ability to find the important ones \u00a0:)  \n15:52\u00a0<medwyn>\u00a0he is a talented one  \n15:53\u00a0<medwyn>\u00a0now one last thing :D  \n15:53\u00a0<medwyn>\u00a0after the update, my logo was changed back to xwiki default...  \n15:53\u00a0<medwyn>\u00a0and whatever I do it stays there  \n15:54\u00a0<medwyn>\u00a0So I go here: /XWiki/XWikiPreferences?editor=globaladmin&section=Presentation  \n15:54\u00a0<medwyn>\u00a0My skin is XWiki.DefaultSkin, Color theme Flatly  \n15:55\u00a0<tmortagne>\u00a0medwyn: logo issue is \u00a0a 8.1 bug  \n15:55\u00a0<medwyn>\u00a0ah!  \n15:55\u00a0<tmortagne>\u00a0http://jira.xwiki.org/browse/XWIKI-13488  \n15:55\u00a0<medwyn>\u00a0should I go directly to 8.2-milestone-2 then?  \n15:56\u00a0<vmassol>\u00a0rc-1 is going to be released on Monday normally  \n15:56\u00a0<vmassol>\u00a0that's 8.2-rc-1  \n15:56\u00a0<vmassol>\u00a0fyi  \n15:56\u00a0<tmortagne>\u00a0better wait for rc1 and if you can even better to wait for 8.2 final  \n15:57\u00a0<tmortagne>\u00a0but rc1 should be better than 8.1 already  \n15:57\u00a0<medwyn>\u00a0i do not know the dev cycle yet, but I assume the 8.2 will be out sometime august? I can surely do without logo until then  \n15:58\u00a0<tmortagne>\u00a0see http://www.xwiki.org/xwiki/bin/view/Roadmaps/WebHome#HDates  \n15:59\u00a0<medwyn>\u00a0cool!  \n16:00\u00a0<medwyn>\u00a0guys, thank you all, now this is an exceptional help you just gave me, seriously. THANKS!  \n16:03\u00a0<lkrejci>\u00a0has quit  \n16:03\u00a0<lkrejci>\u00a0has joined #xwiki  \n16:10\u00a0<Pbas>\u00a0has quit  \n16:33\u00a0<medwyn>\u00a0:-) these bots are awesome  \n16:35\u00a0<ClemensR>\u00a0http://extensions.xwiki.org/xwiki/bin/view/Extension/IRC+Bot+Application  \n16:44\u00a0<ClemensR>\u00a0has left #xwiki  \n16:58\u00a0<medwyn>\u00a0has quit  \n17:03\u00a0<lkrejci>\u00a0has quit  \n17:03\u00a0<lkrejci>\u00a0has joined #xwiki  \n17:35\u00a0<KermitTheFragger>\u00a0has quit  \n18:03\u00a0<lkrejci>\u00a0has quit  \n18:03\u00a0<lkrejci>\u00a0has joined #xwiki  \n18:09\u00a0<lkrejci>\u00a0has quit  \n18:18\u00a0<evalica>\u00a0has quit  \n18:29\u00a0<Enygma`>\u00a0has quit  \n18:29\u00a0<Enygma`>\u00a0has joined #xwiki  \n19:08\u00a0<tmortagne>\u00a0has quit  \n19:46\u00a0<evalica>\u00a0has joined #xwiki  \n19:49\u00a0<evalica>\u00a0has quit  \n20:07\u00a0<edvorg>\u00a0has quit  \n20:19\u00a0<Slashman>\u00a0has quit  \n20:25\u00a0<lkrejci>\u00a0has joined #xwiki  \n20:33\u00a0<lkrejci>\u00a0has quit  \n20:33\u00a0<lkrejci>\u00a0has joined #xwiki  \n20:53\u00a0<Enygma`>\u00a0has quit  \n20:57\u00a0<lkrejci>\u00a0has quit  \n22:48\u00a0<vmassol>\u00a0has quit  \n23:53\u00a0<sagarhani>\u00a0has quit  \n23:53\u00a0<sagarhan->\u00a0has joined #xwiki\n"}