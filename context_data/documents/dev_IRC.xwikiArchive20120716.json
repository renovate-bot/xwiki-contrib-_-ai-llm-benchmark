{"id": "dev:IRC.xwikiArchive20120716", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120716", "title": "IRC Archive for channel #xwiki on 16 July 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n03:23\u00a0<jvdrean>\u00a0has quit  \n03:50\u00a0<cjd>\u00a0has joined #xwiki  \n04:17\u00a0<polx\\_>\u00a0has joined #xwiki  \n04:18\u00a0<polx>\u00a0has quit  \n04:18\u00a0<polx\\_>\u00a0is now known as <polx>  \n07:40\u00a0<vmassol>\u00a0has joined #xwiki  \n08:21\u00a0<mflorea>\u00a0has joined #xwiki  \n08:26\u00a0<vmassol>\u00a0has quit  \n08:52\u00a0<ries>\u00a0has quit  \n09:14\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:38\u00a0<jvdrean>\u00a0has joined #xwiki  \n09:49\u00a0<evalica>\u00a0has joined #xwiki  \n09:53\u00a0<Enygma`>\u00a0has joined #xwiki  \n09:57\u00a0<vmassol>\u00a0has joined #xwiki  \n09:57\u00a0<vmassol>\u00a0good morning  \n09:57\u00a0<vmassol>\u00a0AndreasJonsson: ping  \n10:00\u00a0<vmassol>\u00a0We have 3 blockers ATM for 4.2M1 that I know of:  \n10:01\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-8058  \n10:01\u00a0<vmassol>\u00a0the stats pages using the old chart plugin  \n10:01\u00a0<vmassol>\u00a0and another issue I'm creating now  \n10:04\u00a0<vmassol>\u00a0org.xwiki.rendering.macro.MacroExecutionException: Invalid source parameter [xdom].  \n10:04\u00a0<vmassol> at org.xwiki.rendering.internal.macro.chart.ChartMacro.generateChart(ChartMacro.java:155)  \n10:04\u00a0<vmassol> at org.xwiki.rendering.internal.macro.chart.ChartMacro.execute(ChartMacro.java:111)  \n10:04\u00a0<vmassol> at org.xwiki.rendering.internal.macro.chart.ChartMacro.execute(ChartMacro.java:57)  \n10:04\u00a0<vmassol> at org.xwiki.rendering.internal.transformation.macro.MacroTransformation.transformOnce(MacroTransformation.java:190)  \n10:04\u00a0<vmassol>\u00a0has quit  \n10:04\u00a0<vmassol>\u00a0has joined #xwiki  \n10:04\u00a0<vmassol>\u00a0ouch bad paste ;)  \n10:05\u00a0<vmassol>\u00a0http://jira.xwiki.org/jira/browse/XWIKI-8059  \n10:06\u00a0<+tmortagne>\u00a0vmassol: we are using new security component in chart macro ?  \n10:06\u00a0<vmassol>\u00a0apparently  \n10:06\u00a0<vmassol>\u00a0I think Andreas probably introduced this in 4.2M1  \n10:06\u00a0<vmassol>\u00a0but it's not working  \n10:06\u00a0<vmassol>\u00a0which means there are no tests for that btw  \n10:07\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XCOMMONS-229 is also a blocker  \n10:09\u00a0<vmassol>\u00a0tmortagne: I've been pinging AndreasJonsson for more than a week about this and other stuff related to the chart plugin but he seems to be off even though he's connected  \n10:09\u00a0<vmassol>\u00a0:(  \n10:10\u00a0<+tmortagne>\u00a0ok  \n10:10\u00a0<vmassol>\u00a0checking now  \n10:11\u00a0<vmassol>\u00a0it might just be a component not registered but that would mean it's missing a lots of tests anyway  \n10:11\u00a0<+tmortagne>\u00a0what's weird is that there is lots of tests on security module AFAIK and here it seems to be a \"simple\" missing descriptor  \n10:11\u00a0<vmassol>\u00a0well it simply means there's no integration test probably  \n10:11\u00a0<+tmortagne>\u00a0that's for sure yes  \n10:11\u00a0<vmassol>\u00a0that's why unit tests are never enough ;)  \n10:12\u00a0<vmassol>\u00a0however it's defined in components.txt  \n10:12\u00a0<vmassol>\u00a0ah I know  \n10:12\u00a0<vmassol>\u00a0probably the bridge module missing  \n10:12\u00a0<vmassol>\u00a0checking  \n10:13\u00a0<vmassol>\u00a0yep that seems to be it  \n10:13\u00a0<vmassol>\u00a0fixing  \n10:16\u00a0<vmassol>\u00a0hmm  \n10:17\u00a0<vmassol>\u00a0actually the security api wasn't even bundled in XE  \n10:17\u00a0<vmassol>\u00a0till Andreas added a dep on it in the chart macro  \n10:17\u00a0<vmassol>\u00a0now it's bundled transitively  \n10:17\u00a0<vmassol>\u00a0if we want people to try it out I don't understand why we don't bundle it  \n10:17\u00a0<vmassol>\u00a0adding it to XE web module  \n10:29\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* rd351129\u000f https://github.com/xwiki/xwiki-enterprise/commit/d3511299bf145cc5320ff3cd3f836c9400f99fc1 \u000f/ xwiki-enterprise-web/pom.xml :\u000f XE-1216: Bundle the new experimental Security API - http://git.io/qcvm0A  \n10:32\u00a0<sburjan>\u00a0has joined #xwiki  \n10:33\u00a0<vmassol>\u00a0now I don't know if it's a good idea to use the new security api for the chart macro  \n10:33\u00a0<vmassol>\u00a0we need to decide this  \n10:38\u00a0<+tmortagne>\u00a0vmassol: IMO we need to start using it, but for new stuff for now I think and probably not yet a replacement of old API in some old existing feature  \n10:39\u00a0<polx>\u00a0has quit  \n10:39\u00a0<+sburjan>\u00a0Hello everybody. I want to say that I won't have time to fully test 4.1.3 only until after 29th of July  \n10:39\u00a0<polx>\u00a0has joined #xwiki  \n11:00\u00a0<vmassol>\u00a0anyone fee to look at http://jira.xwiki.org/jira/browse/XWIKI-8058 ?  \n11:02\u00a0<vmassol>\u00a0tmortagne: you've put http://jira.xwiki.org/jira/browse/XWIKI-8058 as bloker but without a fix for  \n11:02\u00a0<vmassol>\u00a0I'm putting 4.2M1  \n11:03\u00a0<+tmortagne>\u00a0vmassol: yep forgot, sounded like a regression  \n11:03\u00a0<+tmortagne>\u00a0not XWIKI-8058  \n11:04\u00a0<vmassol>\u00a0tmortagne: is http://jira.xwiki.org/browse/XCOMMONS-229 a regression, I see you'be put an affects as 4.2M1?  \n11:04\u00a0<vmassol>\u00a0which doesn't look right  \n11:04\u00a0<vmassol>\u00a0(meaning the issue should probably be closed as invalid)  \n11:04\u00a0<+tmortagne>\u00a0vmassol: I did not put the version, you did  \n11:05\u00a0<vmassol>\u00a0right, becase I don't know when it was caused  \n11:05\u00a0<vmassol>\u00a0can you update it?  \n11:05\u00a0<+tmortagne>\u00a0yes  \n11:05\u00a0<vmassol>\u00a0ok thanks  \n11:07\u00a0<+tmortagne>\u00a0vmassol: not sure 4.2M1 is enough for XWIKI-8057, sounds like an important issue to fix on 4.1 branch too  \n11:07\u00a0<vmassol>\u00a0sure  \n11:07\u00a0<vmassol>\u00a0we need to reproduce first to know where it happens  \n11:07\u00a0<vmassol>\u00a0I'll put 4.1.4 just in case  \n11:07\u00a0<+tmortagne>\u00a0sure, but the used created it for 4.1  \n11:07\u00a0<+tmortagne>\u00a0user  \n11:08\u00a0<vmassol>\u00a0done  \n11:08\u00a0<+tmortagne>\u00a0now it's maybe cause by migration issue  \n11:08\u00a0<+tmortagne>\u00a0caused  \n11:08\u00a0<vmassol>\u00a0yep was thinking about this  \n11:08\u00a0<vmassol>\u00a0Enygma`: we might need your help on this  \n11:08\u00a0<vmassol>\u00a0Enygma`: http://jira.xwiki.org/jira/browse/XWIKI-8057  \n11:10\u00a0<+Enygma`>\u00a0vmassol: looking  \n11:20\u00a0<vmassol>\u00a0reverting chart plugin removal  \n11:31\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* r7327bff\u000f https://github.com/xwiki/xwiki-platform/commit/7327bff764567b9ae852c5608446c41cd3f3f48a \u000f/ (81 files in 9 dirs):\u000f Revert \"XWIKI-8016: Remove the Chart plugin\" - http://git.io/axptSw  \n11:31\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* rb78d7c4\u000f https://github.com/xwiki/xwiki-platform/commit/b78d7c405b9d5b79bc17e2cec3938187fc6d6bc0 \u000f/ (3 files in 3 dirs):\u000f XWIKI-8016: Remove the Chart plugin - http://git.io/yVwL5w  \n11:36\u00a0<+Enygma`>\u00a0vmassol: can not reproduce XWIKI-8057 on 4.1 and 4.2-SNAPSHOT  \n11:38\u00a0<Enygma`1>\u00a0has joined #xwiki  \n11:38\u00a0<Enygma`1>\u00a0vmassol: can not reproduce XWIKI-8057 on 4.1 and 4.2-SNAPSHOT (resending message since I had a network failure)  \n11:39\u00a0<Enygma`>\u00a0has quit  \n11:39\u00a0<vmassol>\u00a0Enygma`1: have you tried a migration?  \n11:40\u00a0<vmassol>\u00a0your migration was written in what version?  \n11:40\u00a0<vmassol>\u00a0s/migration/migrator/  \n11:40\u00a0<vmassol>\u00a0it may be that it works on a clean XE 4.1 but not with a 3.x migrated to 4.1  \n11:40\u00a0<vmassol>\u00a0?  \n11:41\u00a0<Enygma`1>\u00a0the initial version of the migrator was for \u00a04.0-milestone-2  \n11:42\u00a0<vmassol>\u00a0Enygma`1: ok so the scenario I've pointed out is possilbe then  \n11:43\u00a0<sdumitriu>\u00a0has joined #xwiki  \n11:44\u00a0<Enygma`1>\u00a0trying with a 3.5 migrated to 4.1  \n11:45\u00a0<Enygma`1>\u00a0is now known as <Enygma`>  \n11:55\u00a0<+Enygma`>\u00a0vmassol: the issue is on myxwiki.org AFAIU and it is on 4.1.3, right? (even though the footer is saying 4.1-20120711.182831-314-NODE1)  \n11:55\u00a0<vmassol>\u00a0yes 4.1.3-SNAPSHOT  \n11:55\u00a0<vmassol>\u00a0so indeed it seems related to the migration right?  \n11:55\u00a0<+Enygma`>\u00a0I do not know that yet  \n11:55\u00a0<+Enygma`>\u00a0I am just trying to reproduce now  \n11:56\u00a0<+Enygma`>\u00a0so I should migrate from 3.5 to 4.1.3 final or 4.1.3-snapshot?  \n12:00\u00a0<vmassol>\u00a0myxwiki.org was on 3.5 before yes  \n12:01\u00a0<+Enygma`>\u00a0ok, assuming you`ve migrated to 4.1.3-snapshot that is now identical with 4.1.3 release.  \n12:01\u00a0<vmassol>\u00a0yes it is  \n12:09\u00a0<vmassol>\u00a0sdumitriu: indeed refresh works  \n12:26\u00a0<\\_Amaia\\_>\u00a0has joined #xwiki  \n12:28\u00a0<\\_Amaia\\_>\u00a0Hello!! Is there any known reason of why I can't change the Color Theme of a space? It always keep the Theme of the Wiki. Thanks!!  \n12:29\u00a0<@sdumitriu>\u00a0\\_Amaia\\_: What version are you using?  \n12:29\u00a0<\\_Amaia\\_>\u00a03.0  \n12:30\u00a0<@sdumitriu>\u00a0Should work  \n12:30\u00a0<@sdumitriu>\u00a0Can you be more specific? What steps did you take?  \n12:31\u00a0<\\_Amaia\\_>\u00a0It worked in our old servers, we made a migration, and now we can't change the theme of any space  \n12:32\u00a0<\\_Amaia\\_>\u00a0As an Admin: Administer Space - Look & Feel - Presentation - choose color theme (nightfall) and Save  \n12:33\u00a0<@sdumitriu>\u00a0And after the page is reloaded?  \n12:33\u00a0<@sdumitriu>\u00a0Does it display nightfall selected, or it's still the previous one that's selected by default?  \n12:34\u00a0<\\_Amaia\\_>\u00a0it's still the default theme  \n12:34\u00a0<\\_Amaia\\_>\u00a0and it displays nightfall selectede  \n12:34\u00a0<@sdumitriu>\u00a0I suppose that you don't have a public URL that I could check, right?  \n12:34\u00a0<\\_Amaia\\_>\u00a0no sorry, it's in our intranet  \n12:34\u00a0<@sdumitriu>\u00a0\\_Amaia\\_: Did you try clearing the cache to see if it works?  \n12:35\u00a0<\\_Amaia\\_>\u00a0yes  \n12:36\u00a0<@sdumitriu>\u00a0Let's try it differently  \n12:36\u00a0<@sdumitriu>\u00a0Changing it directly from the object editor  \n12:37\u00a0<@sdumitriu>\u00a0Open /xwiki/bin/edit/Sandbox/WebPreferences?editor=object&classname=XWiki.XWikiPreferences&object=0&property=colorTheme  \n12:37\u00a0<@sdumitriu>\u00a0(check the URL to see if needs adjustments, like a different application name than /xwiki/  \n12:38\u00a0<@sdumitriu>\u00a0If you set a new value from there and save, does it work?  \n12:39\u00a0<\\_Amaia\\_>\u00a0one minute...  \n12:41\u00a0<\\_Amaia\\_>\u00a0i'm revising the url again, says that the specified object does not exist  \n12:41\u00a0<mflorea>\u00a0has quit  \n12:42\u00a0<@sdumitriu>\u00a0Ah, yes, first just open the space administration page to have that object created automatically  \n12:42\u00a0<@sdumitriu>\u00a0Then open my URL again  \n12:42\u00a0<\\_Amaia\\_>\u00a0ah ok sorry  \n12:45\u00a0<\\_Amaia\\_>\u00a0only open the space administration? because i got the same message  \n12:48\u00a0<@sdumitriu>\u00a0Hm...  \n12:49\u00a0<@sdumitriu>\u00a0The space administration for that space (I used \"Sandbox\" in the URL)  \n12:50\u00a0<\\_Amaia\\_>\u00a0i'm at Administration: espai1 and changed Sandbox for espai1 in the url  \n12:52\u00a0<@sdumitriu>\u00a0OK, the fact that the object isn't created means that something's not working as expected  \n12:52\u00a0<@sdumitriu>\u00a0What does /xwiki/bin/edit/espai1/WebPreferences?editor=object say?  \n12:53\u00a0<\\_Amaia\\_>\u00a0editing objects of WebReferences  \n12:54\u00a0<\\_Amaia\\_>\u00a0New object: Select a class  \n12:54\u00a0<\\_Amaia\\_>\u00a0Objectss of type Xwiki.XwikiPreferences(1)  \n12:54\u00a0<\\_Amaia\\_>\u00a0and empty formulary after that  \n12:54\u00a0<\\_Amaia\\_>\u00a0exept of color theme  \n12:59\u00a0<tmortagne1>\u00a0has joined #xwiki  \n12:59\u00a0<tmortagne>\u00a0has quit  \n13:03\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* rcdcdeb9\u000f https://github.com/xwiki/xwiki-commons/commit/cdcdeb93bcee316430be81f0c96452eed4a53712 \u000f/ (2 files in 2 dirs):\u000f XCOMMONS-230: Add Provider to get the \"context\" ComponentManager - http://git.io/B46XyQ  \n13:03\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.1.x\u000f \\* r099818e\u000f https://github.com/xwiki/xwiki-commons/commit/099818e36e39353f91321c8693993aba5c454311 \u000f/ (2 files in 2 dirs):\u000f XCOMMONS-230: Add Provider to get the \"context\" ComponentManager - http://git.io/S8wa8w  \n13:05\u00a0<CIA-114>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r35b74b5\u000f https://github.com/xwiki/xwiki-platform/commit/35b74b522f74b3402cf007a2a57511c0051a7e72 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/classes/ListClass.java :\u000f XWIKI-8049: Duplicated ID for properties of type List - checkbox/radio on displaying two objects of the same type (same class) in edit mode - http://git.io/--fVlg  \n13:05\u00a0<CIA-114>\u00a0Sergiu Dumitriu\u000f master\u000f \\* r9423639\u000f https://github.com/xwiki/xwiki-platform/commit/9423639b4aba4ef27d42a3a40e1f7c633fd2b649 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/web/DownloadAction.java :\u000f XWIKI-8061: Broken attachments cause the \"attachment does not exist\" response to be cached, which causes the attachment to keep appearing broken even after successfully re-uploading that attachment - http://git.io/1FaXcQ  \n13:19\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r2cdfd51\u000f https://github.com/xwiki/xwiki-rendering/commit/2cdfd5148dd27eed73076cfe0097fa661dafee88 \u000f/ xwiki-rendering-transformations/xwiki-rendering-transformation-macro/src/main/java/org/xwiki/rendering/internal/macro/DefaultMacroManager.java :\u000f Refactore based on new context ComponentManager provider - http://git.io/lVvbcA  \n13:19\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r60cd4ee\u000f https://github.com/xwiki/xwiki-rendering/commit/60cd4ee32235e8e7ee66a6d121ed1e600aa3a65f \u000f/ xwiki-rendering-transformations/xwiki-rendering-transformation-macro/src/test/java/org/xwiki/rendering/macro/descriptor/DefaultMacroDescriptorTest.java :\u000f Fix tests - http://git.io/exWyxw  \n13:19\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r4b20b2d\u000f https://github.com/xwiki/xwiki-platform/commit/4b20b2d18de09ed253b9579d1033b5025824bed9 \u000f/ (2 files):\u000f Apply codestyle - http://git.io/e7i0ZA  \n13:23\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* ra2a035b\u000f https://github.com/xwiki/xwiki-commons/commit/a2a035b5e4483642a1936d729cd69cb6d2b9cb33 \u000f/ xwiki-commons-core/xwiki-commons-script/src/main/java/org/xwiki/script/internal/service/DefaultScriptServiceManager.java :\u000f XCOMMONS-231: Script service installed on a wiki (not on root) is not found by script manager - http://git.io/bEp48g  \n13:23\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.1.x\u000f \\* r4a2ef0d\u000f https://github.com/xwiki/xwiki-commons/commit/4a2ef0d1e786aeda04d7efe0084184777a145489 \u000f/ xwiki-commons-core/xwiki-commons-script/src/main/java/org/xwiki/script/internal/service/DefaultScriptServiceManager.java :\u000f XCOMMONS-231: Script service installed on a wiki (not on root) is not found by script manager - http://git.io/Y6EcGg  \n13:30\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r0fd9502\u000f https://github.com/xwiki/xwiki-rendering/commit/0fd9502ed30669c58f4734f617a916fdb7e291f3 \u000f/ xwiki-rendering-transformations/xwiki-rendering-transformation-macro/src/test/java/org/xwiki/rendering/internal/macro/DefaultMacroManagerTest.java :\u000f Fix tests - http://git.io/zbidOQ  \n13:33\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.1.x\u000f \\* r88cf234\u000f https://github.com/xwiki/xwiki-commons/commit/88cf234035c6ed253f490c23cc90b7e32ac3893f \u000f/ xwiki-commons-core/xwiki-commons-component/xwiki-commons-component-default/src/test/java/org/xwiki/component/annotation/ComponentAnnotationLoaderTest.java :\u000f XCOMMONS-230: Add Provider to get the \"context\" ComponentManager - http://git.io/0IS5Hw  \n13:33\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r34e4d9a\u000f https://github.com/xwiki/xwiki-commons/commit/34e4d9ad5ce1aa554c58626fcd4e99bf009ee927 \u000f/ xwiki-commons-core/xwiki-commons-component/xwiki-commons-component-default/src/test/java/org/xwiki/component/annotation/ComponentAnnotationLoaderTest.java :\u000f XCOMMONS-230: Add Provider to get the \"context\" ComponentManager - http://git.io/7pQg6Q  \n13:46\u00a0<polx>\u00a0has quit  \n13:47\u00a0<polx>\u00a0has joined #xwiki  \n13:52\u00a0<tmortagne1>\u00a0has quit  \n13:54\u00a0<tmortagne>\u00a0has joined #xwiki  \n14:10\u00a0<mflorea>\u00a0has joined #xwiki  \n14:13\u00a0<\\_Amaia\\_>\u00a0has quit  \n14:19\u00a0<+Enygma`>\u00a0vmassol: while trying to replicate XWIKI-8057 I am having problems migrating a standard 3.5+1 page with annotations to 4.1.3  \n14:19\u00a0<+Enygma`>\u00a0it seems that it was not a good idea to do https://github.com/xwiki/xwiki-platform/commit/33943785015256c8ad02dae70c188f2b2f9f2cd4 in the shouldExecute() method, because I am unable to access XWiki documents/objects from that method (before migrations are executed)  \n14:20\u00a0<+Enygma`>\u00a0most likely the 4.1.3 code (that runs the shouldExecute() method) is run before the 40000 migration is executed and can not undestand the not-yet-migrated 3.5 database  \n14:20\u00a0<+Enygma`>\u00a0this happens on HSQLDB  \n14:21\u00a0<+Enygma`>\u00a0when I did that commit, I have tested it on mysql and it worked somehow  \n14:22\u00a0<+Enygma`>\u00a0one alternative I see now is to move the current code from shouldExecute() to hibernateMigrate() thus marking the migration as shouldExecute=true (by default) but in the migration code, skip it if it can not be executed. This has the advantage that all previous migrations are executed and the database should be in a readable state.  \n14:22\u00a0<+Enygma`>\u00a0wdyt?  \n14:56\u00a0<ries\\_>\u00a0has joined #xwiki  \n14:59\u00a0<sdumitriu>\u00a0has quit  \n15:12\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r1933f99\u000f https://github.com/xwiki/xwiki-commons/commit/1933f996e994ee45ce571517db04f7d30f0962de \u000f/ (4 files in 3 dirs):\u000f XCOMMONS-228: Extension Manager resolution issue - http://git.io/sekx9Q  \n15:12\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r0518ba0\u000f https://github.com/xwiki/xwiki-commons/commit/0518ba0155c50cf95f3cee5cfb98e74a7776ef94 \u000f/ xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-api/src/test/java/org/xwiki/extension/job/internal/InstallPlanJobTest.java :\u000f XCOMMONS-228: Extension Manager resolution issue - http://git.io/vq4bvg  \n15:12\u00a0<CIA-114>\u00a0tmortagne\u000f stable-4.1.x\u000f \\* rd3c6c1a\u000f https://github.com/xwiki/xwiki-commons/commit/d3c6c1a0b630cd1cdee8e5130c18e190d384ecfa \u000f/ (3 files in 2 dirs):\u000f XCOMMONS-228: Extension Manager resolution issue - http://git.io/zT5gCQ  \n15:31\u00a0<@cjd>\u00a0tmortagne: would you mind adding my laptop ssh key to one of the build servers so I can test that storage test error?  \n15:32\u00a0<@cjd>\u00a0https://ezcrypt.it/Ll5n#RUKiadMxi4uSW3Vkz9FbqgAj <--- this is it  \n15:32\u00a0<+tmortagne>\u00a0cjd: sure  \n15:32\u00a0<@cjd>\u00a0I rekeyed when I setup the laptop and my key to the universe and everything is safely on my desktop  \n15:32\u00a0<@cjd>\u00a0thanks  \n15:33\u00a0<+tmortagne>\u00a0cjd: should I remove the old one ?  \n15:34\u00a0<@cjd>\u00a0Probably should leave it in case I drop my lappy in a puddle or something  \n15:34\u00a0<+tmortagne>\u00a0ok  \n15:34\u00a0<+tmortagne>\u00a0done for [[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection), doing agents  \n15:35\u00a0<@cjd>\u00a0My desktop key fits so many machines between this project and others that I am scared of it  \n15:35\u00a0<sdumitriu>\u00a0has joined #xwiki  \n15:36\u00a0<+tmortagne>\u00a0should be ok on all agents now  \n15:36\u00a0<+tmortagne>\u00a0except the windows agents for which I have no idea how to connect ti  \n15:37\u00a0<+tmortagne>\u00a0s/ti/to/  \n15:37\u00a0<@cjd>\u00a0thanks, I never had access on those before, wouldn't know where to begin with em if I did  \n15:49\u00a0<tmortagne>\u00a0has quit  \n15:49\u00a0<tmortagne>\u00a0has joined #xwiki  \n16:10\u00a0<CIA-114>\u00a0Eduard Moraru\u000f master\u000f \\* ra8e074a\u000f https://github.com/xwiki/xwiki-platform/commit/a8e074af8d3091a515ba7353c557d6c27980c9e9 \u000f/ xwiki-platform-core/xwiki-platform-annotations/xwiki-platform-annotation-io/src/main/java/org/xwiki/annotation/io/internal/migration/hibernate/R40001XWIKI7540DataMigration.java :\u000f XWIKI-8062: R40001XWIKI7540DataMigration is skipped unintentionally - http://git.io/x\\_cPiA  \n16:10\u00a0<CIA-114>\u00a0Eduard Moraru\u000f stable-4.1.x\u000f \\* r6f0d658\u000f https://github.com/xwiki/xwiki-platform/commit/6f0d65876deb2f720191cd8cf4a1b58b528b5d19 \u000f/ xwiki-platform-core/xwiki-platform-annotations/xwiki-platform-annotation-io/src/main/java/org/xwiki/annotation/io/internal/migration/hibernate/R40001XWIKI7540DataMigration.java :\u000f XWIKI-8062: R40001XWIKI7540DataMigration is skipped unintentionally - http://git.io/Qs92HA  \n16:16\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r2fa6ed6\u000f https://github.com/xwiki/xwiki-enterprise/commit/2fa6ed6471d914c051b914a0372c5aff946a4701 \u000f/ xwiki-enterprise-installers/xwiki-enterprise-installer-debian/pom.xml :\u000f XE-1217: Upgrade to jdeb 0.11 - http://git.io/F6i7Ag  \n16:32\u00a0<CIA-114>\u00a0Marius Dumitru Florea\u000f master\u000f \\* rd6498c7\u000f https://github.com/xwiki/xwiki-platform/commit/d6498c7ce32f8cad814428fb18fb8020fac01d74 \u000f/ (2 files in 2 dirs):\u000f XWIKI-7983: Add test page objects for the Extension Manager UI - http://git.io/mLW5uQ  \n16:33\u00a0<vmassol>\u00a0trying to reproduce the ircbot test failure locally  \n16:34\u00a0<CIA-114>\u00a0Marius Dumitru Florea\u000f master\u000f \\* r712ee3c\u000f https://github.com/xwiki/xwiki-enterprise/commit/712ee3cf89af762717f02abe4a66156acd3028f3 \u000f/ (3 files in 3 dirs):\u000f XE-1204: Add functional tests for Extension Manager - http://git.io/Tj6hvw  \n16:36\u00a0<vmassol>\u00a0interesting  \n16:37\u00a0<vmassol>\u00a0It doesn't build lcoally but for another reason:  \n16:37\u00a0<vmassol>\u00a0[ERROR] Failed to execute goal org.xwiki.platform:xwiki-platform-tool-packager-plugin:4.2-SNAPSHOT:package (default) on project xwiki-platform-ircbot-test-tests: Execution default of goal org.xwiki.platform:xwiki-platform-tool-packager-plugin:4.2-SNAPSHOT:package failed: A required class was missing while executing org.xwiki.platform:xwiki-platform-tool-packager-plugin:4.2-SNAPSHOT:package: com/xpn/xwiki/web/XWikiRequest  \n16:37\u00a0<vmassol>\u00a0tracking down the issue  \n16:42\u00a0<vmassol>\u00a0I don't get it since oldcore is a dep of the packager plugin...  \n16:44\u00a0<+Enygma`>\u00a0vmassol: so I could not reproduce XWIKI-8057 but I have found and fixed XWIKI-8062  \n16:44\u00a0<vmassol>\u00a0is it the same thing?  \n16:44\u00a0<+Enygma`>\u00a0no, not really  \n16:45\u00a0<+Enygma`>\u00a0the new one is a fix for the previous \"fix\"... the one that skipped the migration when custom comments mapping or custom annotations were used  \n16:46\u00a0<vmassol>\u00a0so you still don't know why myxwiki.org isn't working?  \n16:46\u00a0<vmassol>\u00a0btw why do you say that myxwik.org doesn't work?  \n16:46\u00a0<vmassol>\u00a0I was able to add an annotation  \n16:46\u00a0<+Enygma`>\u00a0:)  \n16:47\u00a0<+Enygma`>\u00a0XWIKI-8057 says this: \"Environment: myxwiki.org\"  \n16:47\u00a0<+Enygma`>\u00a0I \\*assumed\\* that the user that reported the issue is a myxwiki.org user  \n16:48\u00a0<+Enygma`>\u00a0though there is not enough information to consider this issue... specially since I could not reproduce it  \n16:48\u00a0<vmassol>\u00a0have you tried on a myxwiki subwiki without being farm admin?  \n16:48\u00a0<+Enygma`>\u00a0where could I try that?  \n16:48\u00a0<+Enygma`>\u00a0incubator maybe?  \n16:48\u00a0<vmassol>\u00a0yes or any subwiki you own  \n16:50\u00a0<+Enygma`>\u00a0http://incubator.myxwiki.org/xwiki/bin/view/Main/TestAnnotations#Annotations  \n16:50\u00a0<+Enygma`>\u00a0annotation was added (ignoring the Annotations tab issue for now)  \n16:51\u00a0<vmassol>\u00a0well I can't access that page with a simple user account  \n16:52\u00a0<+tmortagne>\u00a0Enygma`, vmassol: maybe the user did not upgraded his wiki and this is enough to produce this issue  \n16:52\u00a0<vmassol>\u00a0ah that's funny, I can view it while I'm not logged but not if I'm logged with a local user  \n16:53\u00a0<+Enygma`>\u00a0hmm.. looks like I have admin on that user.  \n16:53\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* rba2e18e\u000f https://github.com/xwiki/xwiki-platform/commit/ba2e18ee5868e079c8d383027eaa446ec52d7ab2 \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-script/src/main/java/org/xwiki/extension/script/internal/ExtensionManagerScriptService.java :\u000f XWIKI-8064: Don't protect objects returned by the API when the script has programming right - http://git.io/Z2vtDw  \n16:57\u00a0<+Enygma`>\u00a0vmassol: works with a local user (just tested)  \n16:58\u00a0<vmassol>\u00a0Enygma`: ok don't know how you did it though\u2026. I was not able to test it on incubator  \n16:59\u00a0<+Enygma`>\u00a0just created a new myxwiki.org user (so global, not local...)  \n16:59\u00a0<+Enygma`>\u00a0then accessed the page  \n16:59\u00a0<+Enygma`>\u00a0I have view and edit on the page  \n16:59\u00a0<vmassol>\u00a0ok then we still need to test with a local user  \n17:00\u00a0<+Enygma`>\u00a0I don`t have a myxwiki subwiki  \n17:00\u00a0<vmassol>\u00a0why not use incubator?  \n17:00\u00a0<+Enygma`>\u00a0and incubator does not allow local users AFAICS  \n17:00\u00a0<+Enygma`>\u00a0no register button  \n17:00\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* rae12768\u000f https://github.com/xwiki/xwiki-platform/commit/ae1276825cbb386280d75d59725c31d3eb0ae4cb \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-script/src/main/java/org/xwiki/extension/script/internal/ExtensionManagerScriptService.java :\u000f Revert \"XWIKI-8064: Don't protect objects returned by the API when the script has programming right\" - http://git.io/Rjh0mw  \n17:00\u00a0<vmassol>\u00a0well I created a user there  \n17:01\u00a0<vmassol>\u00a0I then set some page rights  \n17:01\u00a0<vmassol>\u00a0but when I go to the page I have a form asking me to enter some registration token  \n17:02\u00a0<+Enygma`>\u00a0registration token?  \n17:04\u00a0<vmassol>\u00a0Enygma`: just tested  \n17:04\u00a0<vmassol>\u00a0works  \n17:06\u00a0<vmassol>\u00a0(for some reason the user I had created was not makred \"active\")  \n17:09\u00a0<+Enygma`>\u00a0vmassol: back to the migration issue... I think we should put a warning on the 4.1.3 release notes that people that want to upgrade should use 4.1.4 instead or something like that  \n17:09\u00a0<vmassol>\u00a0Enygma`: I don't fully understand the consequence of the issue you've found  \n17:10\u00a0<vmassol>\u00a0can you explain?  \n17:10\u00a0<+Enygma`>\u00a0so... the migration system, gets all the existing migrations and looks at the shouldExecute() method... if it's true, the migration is put in the list of migrations to execute  \n17:10\u00a0<+Enygma`>\u00a0all of this is done before executing any of the migrations  \n17:11\u00a0<+Enygma`>\u00a0the previous \"fix\" I did... was trying to look at the database with XWiki API inside the shouldExecute() method  \n17:11\u00a0<+Enygma`>\u00a0however, since the database was not yet migrated and the 40000 migration (that reorganizes IDs) was not yet executed  \n17:11\u00a0<+Enygma`>\u00a0so the shouldExecute() method returned false for the 40001 (annotations) migration  \n17:12\u00a0<vmassol>\u00a0does it mean comments are not migrated on myxwiki.org?  \n17:12\u00a0<vmassol>\u00a0s/comments/annotations/  \n17:12\u00a0<+Enygma`>\u00a0I am not sure  \n17:12\u00a0<vmassol>\u00a0it seems they are  \n17:12\u00a0<vmassol>\u00a0so I don't understand  \n17:12\u00a0<+Enygma`>\u00a0because while developing it (using mysql) the shouldExecute() method was behaving fine  \n17:12\u00a0<+Enygma`>\u00a0however, now, when I tried to reproduce that other issue, (and using hsqldb) the shouldExecute method was not behaving fine  \n17:14\u00a0<+Enygma`>\u00a0so what I did now, was to move the code that was in shouldExecute() and put it in hibernateMigrate() where the actual migration takes place  \n17:14\u00a0<+Enygma`>\u00a0so this time, at least we know that the previous migrations are executed and the DB is readable  \n17:15\u00a0<+Enygma`>\u00a0I still have a reserve about this solution too... since, it you think about it... if we change the IDs again (like we did for 40000), the XWiki API will cause the same problems again  \n17:15\u00a0<+Enygma`>\u00a0normally, I don`t think it's a good thing to use XWiki API in migration code  \n17:15\u00a0<+Enygma`>\u00a0and I did not do it until now  \n17:16\u00a0<+Enygma`>\u00a0but I did it now for checking if the comments class has custom mapping, for instance  \n17:19\u00a0<vmassol>\u00a0what happens to users who are on 4.1.3? do they need to do something?  \n17:19\u00a0<vmassol>\u00a0(for ex myxwiki.org)  \n17:20\u00a0<vmassol>\u00a0I still don't understans enough to know if we should recommend to not use 4.1.3  \n17:20\u00a0<sburjan>\u00a0has quit  \n17:21\u00a0<+Enygma`>\u00a0I guess I should first try using mysql first to see if the diference comes from this  \n17:22\u00a0<+Enygma`>\u00a0because if it's a mysql vs hsqldb issue, then we might have some users that were migrated and others that were not  \n17:22\u00a0<vmassol>\u00a0ok  \n17:23\u00a0<+Enygma`>\u00a0and AFAICT, a solution for 4.1.3 users (in both cases) would be to run the 40001 migration again  \n17:23\u00a0<+Enygma`>\u00a0just to be sure  \n17:23\u00a0<+Enygma`>\u00a0but I am testing on mysql now  \n17:28\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* rd5fe800\u000f https://github.com/xwiki/xwiki-platform/commit/d5fe800985d0d786a23ca19952a713d1550d2ee8 \u000f/ (7 files):\u000f XWIKI-8065: Allow script with PR to fully use all repositories APIs - http://git.io/2vXBVQ  \n17:30\u00a0<@cjd>\u00a0downloading XE413 to see if the issue with registration config is present or if it is an incubator specific issue  \n17:30\u00a0<CIA-114>\u00a0Marius Dumitru Florea\u000f master\u000f \\* r0af8912\u000f https://github.com/xwiki/xwiki-enterprise/commit/0af89124ec3975e2bf45e1c6b1db3acc65b1bac2 \u000f/ (6 files in 6 dirs):\u000f XE-1204: Add functional tests for Extension Manager - http://git.io/ymkC\\_Q  \n17:30\u00a0<vmassol>\u00a0cjd: ok  \n17:37\u00a0<sdumitriu>\u00a0has quit  \n17:37\u00a0<sburjan\\_>\u00a0has joined #xwiki  \n17:40\u00a0<sburjan`>\u00a0has quit  \n17:40\u00a0<sburjan\\_>\u00a0is now known as <sburjan`>  \n17:42\u00a0<tmortagne>\u00a0has quit  \n17:42\u00a0<+Enygma`>\u00a0vmassol: works on mysql...  \n17:43\u00a0<+Enygma`>\u00a0too bad Denis is not here to tell us more about the migration specifics...  \n17:44\u00a0<+Enygma`>\u00a0so this new fix works for both mysql and hsqldb...  \n17:44\u00a0<+Enygma`>\u00a0the old \"fix\" does not work for hsqldb  \n17:46\u00a0<+Enygma`>\u00a0would it be safe to assume that we don`t have users that will be affected by this if they are already on 4.1.3? (assuming that we don`t have \"precious\" data on hsqldb setups)  \n17:53\u00a0<@cjd>\u00a0vmassol: fields in the registration page render properly in 413, looks like incubator is just in a bad state  \n18:05\u00a0<sdumitriu>\u00a0has joined #xwiki  \n18:09\u00a0<Enygma`>\u00a0has quit  \n18:10\u00a0<sburjan`>\u00a0has quit  \n18:10\u00a0<sburjan`>\u00a0has joined #xwiki  \n18:16\u00a0<Enygma`>\u00a0has joined #xwiki  \n18:20\u00a0<Enygma`>\u00a0has quit  \n18:26\u00a0<Enygma`>\u00a0has joined #xwiki  \n18:30\u00a0<sdumitriu>\u00a0has quit  \n18:32\u00a0<cjd>\u00a0has quit  \n18:45\u00a0<vmassol>\u00a0has quit  \n19:03\u00a0<abusenius>\u00a0has joined #xwiki  \n19:20\u00a0<cjd>\u00a0has joined #xwiki  \n19:29\u00a0<evalica>\u00a0has quit  \n19:32\u00a0<mflorea>\u00a0has quit  \n19:32\u00a0<evalica>\u00a0has joined #xwiki  \n19:59\u00a0<sdumitriu>\u00a0has joined #xwiki  \n20:04\u00a0<Enygma`>\u00a0has quit  \n20:04\u00a0<Enygma`1>\u00a0has joined #xwiki  \n20:04\u00a0<sdumitriu>\u00a0has quit  \n20:05\u00a0<vmassol>\u00a0has joined #xwiki  \n20:06\u00a0<Enygma`1>\u00a0has quit  \n20:08\u00a0<Enygma`>\u00a0has joined #xwiki  \n20:14\u00a0<Enygma`>\u00a0has quit  \n20:25\u00a0<vmassol>\u00a0has quit  \n21:39\u00a0<CIA-114>\u00a0Caleb James DeLisle\u000f master\u000f \\* ra59168b\u000f https://github.com/xwiki/xwiki-enterprise/commit/a59168b23dfb254d67a24caf9854004edccceaad \u000f/ (2 files):\u000f [misc] 'fixed' AttachmentTest which was failing, added a new test which fails and better illustrates the cause. - http://git.io/Fco66g  \n21:46\u00a0<vmassol>\u00a0has joined #xwiki  \n22:00\u00a0<vmassol>\u00a0has quit  \n22:49\u00a0<ries\\_>\u00a0has quit  \n22:54\u00a0<ries>\u00a0has joined #xwiki  \n23:05\u00a0<vmassol>\u00a0has joined #xwiki  \n23:06\u00a0<vmassol>\u00a0has quit  \n23:09\u00a0<abusenius>\u00a0has quit  \n\n"}