{"id": "dev:IRC.xwikiArchive20120705", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20120705", "title": "IRC Archive for channel #xwiki on 05 July 2012 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:50\u00a0<jvdrean>\u00a0has quit  \n01:11\u00a0<polx>\u00a0has quit  \n01:18\u00a0<polx>\u00a0has joined #xwiki  \n01:19\u00a0<polx>\u00a0has quit  \n02:36\u00a0<tekzilla>\u00a0has quit  \n02:38\u00a0<tekzilla>\u00a0has joined #xwiki  \n07:45\u00a0<mflorea>\u00a0has joined #xwiki  \n08:03\u00a0<sdumitriu>\u00a0has quit  \n08:14\u00a0<vmassol>\u00a0has joined #xwiki  \n08:14\u00a0<vmassol>\u00a0AndreasJonsson: hi, can you help me understand AbstractMacroContentTableBlockDataSourceTest ?  \n08:17\u00a0<vmassol>\u00a0I'm trying to understand where DAB \"default\" gets registered  \n08:17\u00a0<polx>\u00a0has joined #xwiki  \n08:17\u00a0<vmassol>\u00a0when I run it in my IDE (which I think is misbehaving) I get a component lookup exception and I can't visually figure out where it's registered since oldcore is not in the deps list  \n08:18\u00a0<vmassol>\u00a0oh  \n08:18\u00a0<vmassol>\u00a0I know  \n08:18\u00a0<vmassol>\u00a0it's the mockingrequirement  \n08:18\u00a0<vmassol>\u00a0hmmm  \n08:18\u00a0<vmassol>\u00a0I'll debug to see why my IDE doesn't see it  \n08:37\u00a0<tmortagne>\u00a0has joined #xwiki  \n09:08\u00a0<ssavi>\u00a0has joined #xwiki  \n09:26\u00a0<sburjan>\u00a0has joined #xwiki  \n09:29\u00a0<Denis2>\u00a0has joined #xwiki  \n09:30\u00a0<Denis>\u00a0has quit  \n09:47\u00a0<polx\\_>\u00a0has joined #xwiki  \n09:50\u00a0<polx>\u00a0has quit  \n09:50\u00a0<polx\\_>\u00a0is now known as <polx>  \n09:58\u00a0<jvdrean>\u00a0has joined #xwiki  \n11:04\u00a0<vmassol>\u00a0has quit  \n11:06\u00a0<vmassol>\u00a0has joined #xwiki  \n11:14\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* rbc3dffe\u000f https://github.com/xwiki/xwiki-platform/commit/bc3dffe48eb85d94aca7c1cb8968d6cde63ef825 \u000f/ (162 files in 20 dirs):\u000f XWIKI-8008: Move Chart plugin out of oldcore - http://git.io/tFOJNw  \n11:14\u00a0<vmassol>\u00a0AndreasJonsson: fyi I've added the missing runtime dep on oldcore in the chart macro module  \n11:42\u00a0<Enygma`>\u00a0has joined #xwiki  \n11:44\u00a0<evalica>\u00a0has joined #xwiki  \n11:45\u00a0<eth>\u00a0has joined #xwiki  \n11:46\u00a0<eth>\u00a0is now known as <eth\\_>  \n11:47\u00a0<eth\\_>\u00a0has quit  \n11:53\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* r849462c\u000f https://github.com/xwiki/xwiki-commons/commit/849462cc0c15c34f9cf5f862eb556dbd2a69f0db \u000f/ xwiki-commons-core/xwiki-commons-component/xwiki-commons-component-default/src/main/java/org/xwiki/component/embed/EmbeddableComponentManager.java :\u000f [Misc] Remove debug leftover - http://git.io/UhleDA  \n12:00\u00a0<eth\\_>\u00a0has joined #xwiki  \n12:06\u00a0<+AndreasJonsson>\u00a0vmassol: The purpose of AbstractMacroContentTableBlockDataSourceTest is to mock a data source that can be used for testing the table dataset builders.  \n12:12\u00a0<eth\\_>\u00a0has quit  \n12:15\u00a0<+AndreasJonsson>\u00a0There is a typo in org.xwiki.properties.PropertyDescriptor: 'Field getFied();'  \n12:16\u00a0<+tmortagne>\u00a0indeed  \n12:16\u00a0<+tmortagne>\u00a0will need to deprecate it and add a new one  \n12:20\u00a0<+tmortagne>\u00a0fixing it  \n12:27\u00a0<+tmortagne>\u00a0vote sent  \n12:28\u00a0<+tmortagne>\u00a0(CLIRR exlude...)  \n12:51\u00a0<vmassol>\u00a0AndreasJonsson: it's ok now, was an issue with my ide  \n13:17\u00a0<mflorea>\u00a0has quit  \n13:25\u00a0<polx>\u00a0has quit  \n13:36\u00a0<sdumitriu>\u00a0has joined #xwiki  \n13:51\u00a0<polx>\u00a0has joined #xwiki  \n14:01\u00a0<vmassol>\u00a0guys when I try to add a new ref on http://www.xwiki.org/xwiki/bin/view/References/WebHome I don't see the input fields in inline mode and I don't understand why  \n14:02\u00a0<vmassol>\u00a0any idea?  \n14:03\u00a0<vmassol>\u00a0the template page is in xwiki/1.0 syntax at http://www.xwiki.org/xwiki/bin/view/XWiki/ReferenceClassTemplate  \n14:06\u00a0<vmassol>\u00a0looks like a regression with xwiki 1.0 syntax  \n14:06\u00a0<vmassol>\u00a0maybe introduced when when introduced the new display and sheet modules  \n14:09\u00a0<ssavi>\u00a0has quit  \n14:19\u00a0<pgmjsd>\u00a0has joined #xwiki  \n14:25\u00a0<mflorea>\u00a0has joined #xwiki  \n14:33\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r9276afd\u000f https://github.com/xwiki/xwiki-commons/commit/9276afd8777d7c927b61c7a89ae4ce75cf745f07 \u000f/ (5 files in 4 dirs):\u000f XCOMMONS-212: Typo in org.xwiki.properties.PropertyDescriptor#getFied() - http://git.io/WDIO-Q  \n14:34\u00a0<vmassol>\u00a0guys we need to release 4.1.3 real soon now  \n14:35\u00a0<vmassol>\u00a0but we still have a blocker  \n14:35\u00a0<vmassol>\u00a0http://jira.xwiki.org/jira/browse/XWIKI-7988  \n14:35\u00a0<vmassol>\u00a0we need someone to look at it  \n14:35\u00a0<vmassol>\u00a0it's a regression  \n14:35\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n14:35\u00a0<gdelhumeau>\u00a0hi  \n14:35\u00a0<vmassol>\u00a0sdumitriu: ping  \n14:36\u00a0<@sdumitriu>\u00a0Pong  \n14:36\u00a0<vmassol>\u00a0sdumitriu: any idea about http://jira.xwiki.org/jira/browse/XWIKI-7988 ? And what caused the regression? Would you have time to look at it quickly so that we can release 4.1.3 tomorrow?  \n14:37\u00a0<@sdumitriu>\u00a0I looked at it a while ago  \n14:37\u00a0<@sdumitriu>\u00a0But didn't get to the bottom of it  \n14:41\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* rffbebb3\u000f https://github.com/xwiki/xwiki-commons/commit/ffbebb3285f37e68df0ffb431f1b209e41c95bdb \u000f/ xwiki-commons-core/xwiki-commons-extension/xwiki-commons-extension-handlers/xwiki-commons-extension-handler-jar/src/test/java/org/xwiki/extension/jar/JarExtensionHandlerTest.java :\u000f Fix test - http://git.io/Fx45\\_w  \n14:48\u00a0<@sdumitriu>\u00a0I found out what's the problem  \n14:48\u00a0<vmassol>\u00a0cool :)  \n14:48\u00a0<@sdumitriu>\u00a0The \"en\" document thinks it's a translation  \n14:49\u00a0<@sdumitriu>\u00a0So its reported ID doesn't match the ID of the history  \n14:49\u00a0<@sdumitriu>\u00a0In DeleteVersionRange action, tdoc is a new, empty document  \n14:50\u00a0<@sdumitriu>\u00a0Now, I don't know why tdoc isn't the same as doc, something might be wrong with the many versions of Main.WebHome  \n14:50\u00a0<@sdumitriu>\u00a0(language versions)  \n14:51\u00a0<@sdumitriu>\u00a0Ah, right, the translations have been moved to Main.Welcome  \n14:51\u00a0<@sdumitriu>\u00a0Main.WebHome doesn't have a defaultLanguage set at all  \n14:51\u00a0<@sdumitriu>\u00a0I think that might be it  \n14:54\u00a0<@sdumitriu>\u00a0Yes, setting a defaultLanguage fixes the problem  \n14:55\u00a0<@sdumitriu>\u00a0vmassol: A quick fix for the bug is to commit a defaultVersion in the sources, but this won't fix the problem for existing documents or other documents that might be created this way  \n14:56\u00a0<@sdumitriu>\u00a0Ah, I found the root cause  \n14:56\u00a0<@sdumitriu>\u00a0com.xpn.xwiki.web.XWikiAction.getTranslatedDocument(XWikiDocument, String, XWikiContext)  \n14:57\u00a0<@sdumitriu>\u00a0It explicitly creates a blank XWikiDocument if the language doesn't match defaultLanguage  \n14:58\u00a0<@sdumitriu>\u00a0I guess that method is useful for the save action, DeleteVersionsRange is wrong in using it  \n15:03\u00a0<CIA-114>\u00a0Sergiu Dumitriu\u000f master\u000f \\* rd64943b\u000f https://github.com/xwiki/xwiki-platform/commit/d64943b218d942c4a98b4470b01aba838c6968d5 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/web/DeleteVersionsAction.java :\u000f XWIKI-7988: Unable to delete version range history form Main.WebHome or its copies - http://git.io/VPkVHQ  \n15:03\u00a0<CIA-114>\u00a0Sergiu Dumitriu\u000f stable-4.1.x\u000f \\* ra8250f3\u000f https://github.com/xwiki/xwiki-platform/commit/a8250f3b9d2981570d6b73c54f35db6931dcc7f7 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/web/DeleteVersionsAction.java :\u000f XWIKI-7988: Unable to delete version range history form Main.WebHome or its copies - http://git.io/PmcdDg  \n15:04\u00a0<CIA-114>\u00a0Sergiu Dumitriu\u000f stable-3.5.x\u000f \\* r935ba84\u000f https://github.com/xwiki/xwiki-platform/commit/935ba84d601eedd3081a915460ac8ff69415395e \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/web/DeleteVersionsAction.java :\u000f XWIKI-7988: Unable to delete version range history form Main.WebHome or its copies - http://git.io/w86Wbw  \n15:05\u00a0<@sdumitriu>\u00a0Fixed  \n15:06\u00a0<@sdumitriu>\u00a0I have to go now or I'll be late for my surgery  \n15:07\u00a0<vmassol>\u00a0cool, thanks, don't forget to close the issue  \n15:07\u00a0<@sdumitriu>\u00a0Closed already  \n15:07\u00a0<sdumitriu>\u00a0has quit  \n15:07\u00a0<vmassol>\u00a0a functional test would be nice  \n15:51\u00a0<polx\\_>\u00a0has joined #xwiki  \n15:53\u00a0<polx>\u00a0has quit  \n15:55\u00a0<polx\\_>\u00a0has quit  \n16:06\u00a0<polx>\u00a0has joined #xwiki  \n16:14\u00a0<polx>\u00a0has quit  \n16:21\u00a0<polx>\u00a0has joined #xwiki  \n16:45\u00a0<polx>\u00a0has quit  \n16:48\u00a0<polx>\u00a0has joined #xwiki  \n17:00\u00a0<CIA-114>\u00a0Denis Gervalle\u000f master\u000f \\* re577c06\u000f https://github.com/xwiki/xwiki-platform/commit/e577c062b4bdf862b158d502e002a2d29696f044 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/store/migration/hibernate/R40000XWIKI6990DataMigration.java :\u000f XWIKI-7976: Migration R40000XWIKI6990 (IDs) fails to properly migrate document statistics - http://git.io/gFT05A  \n17:01\u00a0<CIA-114>\u00a0Denis Gervalle\u000f stable-4.1.x\u000f \\* r5dd2913\u000f https://github.com/xwiki/xwiki-platform/commit/5dd291340799f0800627fc0ae8e85f11db5b31d3 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/store/migration/hibernate/R40000XWIKI6990DataMigration.java :\u000f XWIKI-7976: Migration R40000XWIKI6990 (IDs) fails to properly migrate document statistics - http://git.io/XQJ6EA  \n17:09\u00a0<polx>\u00a0has quit  \n17:10\u00a0<polx>\u00a0has joined #xwiki  \n17:12\u00a0<polx>\u00a0has quit  \n17:14\u00a0<gdelhumeau>\u00a0has quit  \n17:17\u00a0<polx>\u00a0has joined #xwiki  \n17:18\u00a0<polx>\u00a0has quit  \n17:28\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n17:42\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r779d9c1\u000f https://github.com/xwiki/xwiki-platform/commit/779d9c1e967771e8755d29abbe57d12e2433e378 \u000f/ (38 files in 21 dirs):\u000f XWIKI-8011: When saving a wiki macro document the author of the macro should be used to check right instead of the current user - http://git.io/FnxyJQ  \n17:56\u00a0<vmassol>\u00a0AndreasJonsson: when you have some time please replace my todo in platform core's pom.xml for the clirr excludes :)  \n17:57\u00a0<vmassol>\u00a0we must put explanation whenever we add a clirr exclude and these explanations are taken for the release notes  \n17:58\u00a0<CIA-114>\u00a0tmortagne\u000f master\u000f \\* r7c4553b\u000f https://github.com/xwiki/xwiki-enterprise/commit/7c4553bb5cdf30b6ca5107b3a7e571ae3eb4578f \u000f/ xwiki-enterprise-web/pom.xml :\u000f Add wikimacro module - http://git.io/T0xGuw  \n17:59\u00a0<CIA-114>\u00a0Vincent Massol\u000f master\u000f \\* rac83da8\u000f https://github.com/xwiki/xwiki-platform/commit/ac83da81bd09eaebc9832cd7ed63cab359080025 \u000f/ xwiki-platform-core/pom.xml :\u000f XWIKI-8008: Move Chart plugin out of oldcore - http://git.io/sztMDw  \n18:01\u00a0<mflorea>\u00a0has quit  \n18:20\u00a0<sburjan>\u00a0has quit  \n18:24\u00a0<+AndreasJonsson>\u00a0vmassol: I will do that.  \n18:24\u00a0<vmassol>\u00a0thanks  \n18:24\u00a0<vmassol>\u00a0I'm finishing removing the charting action  \n18:25\u00a0<+AndreasJonsson>\u00a0Great!  \n18:29\u00a0<Denis>\u00a0has joined #xwiki  \n18:31\u00a0<Denis2>\u00a0has quit  \n18:45\u00a0<vmassol>\u00a0hmmm AndreasJonsson I don't get it, the current code computes the name of the image on disk based on the macro parameters, with parameters.hashCode()  \n18:46\u00a0<vmassol>\u00a0forget it  \n18:46\u00a0<vmassol>\u00a0:)  \n18:46\u00a0<vmassol>\u00a0was going to say that it prevents having the same macro called twice on the same page  \n18:46\u00a0<vmassol>\u00a0hmm actually this is true  \n18:47\u00a0<vmassol>\u00a0it means you cannot for example using velocity macro around 2 chart macros that have the same params  \n18:47\u00a0<vmassol>\u00a0I'll fix this  \n18:48\u00a0<+AndreasJonsson>\u00a0Yes, I'm aware of that and was planning on fixing it. \u00a0But please go ahead... :)  \n18:48\u00a0<vmassol>\u00a0my plan is to do this:  \n18:48\u00a0<vmassol>\u00a0get the current block and count how many chart macros are in the DOM before the current macro  \n18:49\u00a0<vmassol>\u00a0and add that number as a suffix  \n18:49\u00a0<vmassol>\u00a0wdyt?  \n18:51\u00a0<+AndreasJonsson>\u00a0Sounds awkward and inserting additional chart macros would cause the filenames to change.  \n18:51\u00a0<vmassol>\u00a0got a better idea?  \n18:51\u00a0<+AndreasJonsson>\u00a0I was thinking more of generating something from the macro parameters.  \n18:52\u00a0<vmassol>\u00a0that will never work  \n18:52\u00a0<vmassol>\u00a0they are the same  \n18:52\u00a0<vmassol>\u00a0s/are/can be/  \n18:52\u00a0<vmassol>\u00a0it doesn't matter  \n18:52\u00a0<vmassol>\u00a0that the cache isn't there if you change the content of the page  \n18:52\u00a0<+AndreasJonsson>\u00a0Macro parameters + macro contents.  \n18:52\u00a0<vmassol>\u00a0same  \n18:53\u00a0<vmassol>\u00a0there's no other choice i know of, we are doing this in others places too  \n18:53\u00a0<+AndreasJonsson>\u00a0But if both macro parameters and contents are the same, it is the same chart.  \n18:53\u00a0<polx>\u00a0has joined #xwiki  \n18:53\u00a0<vmassol>\u00a0no  \n18:53\u00a0<vmassol>\u00a0:)  \n18:53\u00a0<vmassol>\u00a0I'l give you an example  \n18:54\u00a0<vmassol>\u00a0here: https://gist.github.com/3054774  \n18:55\u00a0<+AndreasJonsson>\u00a0document name + macro parameters + macro contents  \n18:55\u00a0<vmassol>\u00a0no  \n18:55\u00a0<vmassol>\u00a0:)  \n18:55\u00a0<+AndreasJonsson>\u00a0I see.  \n18:56\u00a0<+AndreasJonsson>\u00a0Then I cannot think of anything better than your idea of numbering the macros.  \n18:56\u00a0<vmassol>\u00a0yeah and it's not something new, we do that in other places  \n18:57\u00a0<+AndreasJonsson>\u00a0BTW, have you seen my proposal about macro parameter namespaces?  \n18:57\u00a0<vmassol>\u00a0yes but haven't had time to digest it :)  \n18:58\u00a0<+AndreasJonsson>\u00a0I'm looking forward to receiving some comments on that.  \n18:58\u00a0<vmassol>\u00a0ATM all I can say is that it's creative. I wan't to think more to be sure it's not causing problems and see if we really need it  \n19:04\u00a0<evalica>\u00a0has quit  \n19:07\u00a0<polx>\u00a0has quit  \n19:12\u00a0<gdelhumeau>\u00a0has quit  \n19:31\u00a0<tmortagne>\u00a0has quit  \n19:35\u00a0<polx>\u00a0has joined #xwiki  \n19:37\u00a0<ssavi>\u00a0has joined #xwiki  \n19:54\u00a0<Enygma`>\u00a0has quit  \n20:01\u00a0<polx>\u00a0has quit  \n20:02\u00a0<abusenius>\u00a0has joined #xwiki  \n20:13\u00a0<vmassol>\u00a0has quit  \n20:31\u00a0<evalica>\u00a0has joined #xwiki  \n20:33\u00a0<evalica>\u00a0has quit  \n20:43\u00a0<polx>\u00a0has joined #xwiki  \n20:48\u00a0<CIA-114>\u00a0Denis Gervalle\u000f master\u000f \\* rae7cbda\u000f https://github.com/xwiki/xwiki-platform/commit/ae7cbda2e3fc91d116f8181598fb2f614a2a6c21 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/liquibase/ext/logger4xwiki/XWikiLiquibaseLogger.java :\u000f XWIKI-7985: Migration R40000XWIKI6990 may fails when some expected constraints are missing - http://git.io/WmLAEg  \n20:49\u00a0<cjd>\u00a0has quit  \n20:50\u00a0<CIA-114>\u00a0Denis Gervalle\u000f stable-4.1.x\u000f \\* r67cdd6b\u000f https://github.com/xwiki/xwiki-platform/commit/67cdd6b9fb30b790ae3bbe6e23938f8c3a365c44 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/liquibase/ext/logger4xwiki/XWikiLiquibaseLogger.java :\u000f XWIKI-7985: Migration R40000XWIKI6990 may fails when some expected constraints are missing - http://git.io/-TwBxw  \n20:54\u00a0<cjd>\u00a0has joined #xwiki  \n21:10\u00a0<polx>\u00a0has quit  \n21:16\u00a0<polx>\u00a0has joined #xwiki  \n21:18\u00a0<cjd>\u00a0has quit  \n21:24\u00a0<cjd>\u00a0has joined #xwiki  \n21:29\u00a0<mflorea>\u00a0has joined #xwiki  \n21:35\u00a0<CIA-114>\u00a0Denis Gervalle\u000f master\u000f \\* r9d26631\u000f https://github.com/xwiki/xwiki-platform/commit/9d26631746e4cff308e3fd2f1cb011d9e0580334 \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/liquibase/ext/logger4xwiki/XWikiLiquibaseLogger.java :\u000f XWIKI-7985: Migration R40000XWIKI6990 may fails when some expected constraints are missing - http://git.io/6l4wEQ  \n21:36\u00a0<CIA-114>\u00a0Denis Gervalle\u000f stable-4.1.x\u000f \\* ra842393\u000f https://github.com/xwiki/xwiki-platform/commit/a842393c86e38f7d3c8569a163278e5189aa729b \u000f/ xwiki-platform-core/xwiki-platform-oldcore/src/main/java/liquibase/ext/logger4xwiki/XWikiLiquibaseLogger.java :\u000f XWIKI-7985: Migration R40000XWIKI6990 may fails when some expected constraints are missing - http://git.io/w4qrNA  \n22:06\u00a0<vmassol>\u00a0has joined #xwiki  \n22:16\u00a0<Denis1>\u00a0has joined #xwiki  \n22:18\u00a0<Denis>\u00a0has quit  \n22:38\u00a0<abusenius>\u00a0has quit  \n23:47\u00a0<evalica>\u00a0has joined #xwiki  \n23:50\u00a0<ssavi>\u00a0has quit  \n\n"}