{"id": "dev:IRC.xwikiArchive20100629", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100629", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nDenis left at 00:08 (Quit: Leaving.  \nevalica joined #xwiki at 00:22  \njvdrean left at 00:47 (Quit: Leaving.  \nevalica left #xwiki at 01:52  \nabusenius left at 01:52 (Ping timeout: 245 seconds  \nsdumitriu left at 03:09 (Ping timeout: 265 seconds  \nvmassol joined #xwiki at 07:49  \nsilviar joined #xwiki at 07:54  \nCalebJamesDeLisl - (08:00): \"Timed out after 0 seconds\" looks like we know why the tests are failing.  \nCalebJamesDeLisl - (08:04): I'm going to commit with timeout = 10 by default.  \nvmassol - (08:06): oops  \nvmassol - (08:06): did I forget to set it?  \nCalebJamesDeLisl - (08:06): Done. That should fix the tests.  \nvmassol - (08:06): ah yes I did  \nvmassol - (08:06): sorry about that  \nCalebJamesDeLisl - (08:06): find-grep setTimeout didn't turn up anything.  \nvmassol - (08:07): I wanted to set it at the variable def level  \nCalebJamesDeLisl - (08:07): i just initialized timeout for cases such as this.  \nvmassol - (08:07): I'm putting back my try/catch for the timeoutexception too  \nCalebJamesDeLisl - (08:07): I didn't see the timeout=0 in the try-catch error.  \nCalebJamesDeLisl - (08:08): Seeing the 0 timeout would have helped in this case.  \nvmassol - (08:08): it's there  \nvmassol - (08:08): we jsut missed it  \nvmassol - (08:08): \"openqa.selenium.support.ui.TimeoutException: Timed out after 0 seconds\"  \nCalebJamesDeLisl - (08:08): Maybe the \"in source\" is a bit too much.  \nvmassol - (08:08): yes but any bette idea?  \nvmassol - (08:08): better  \nCalebJamesDeLisl - (08:09): I would just leave that part out since hudson reports the source code anyway.  \nvmassol - (08:09): errr?  \nvmassol - (08:09): where?  \nCalebJamesDeLisl - (08:09): Actually you could count \\n's and report the line number.  \nvmassol - (08:09): line?  \nvmassol - (08:09): what line?  \nvmassol - (08:09): it's failng to find something  \nvmassol - (08:09): how can you report a line?  \nCalebJamesDeLisl - (08:10): Good point.  \nCalebJamesDeLisl - (08:10): Right, hudson doesn't always report line numbers.  \nvmassol - (08:10): hudson doesn't report the source either  \nvmassol - (08:10): what I hope is that we'll report the modified DOM  \nvmassol - (08:11): I don't know yet if the api I've used does this or not  \nCalebJamesDeLisl - (08:12): Sorry, what I had seen was you error message shown twice so I thought it was hudson showing the source.  \nCalebJamesDeLisl - (08:14): Question about references: How is a velocity script supposed to get a document knowing the space and page names? Can you give me the expected script line?  \nvmassol - (08:14): yes hold on  \nvmassol - (08:14): there's an example in create\\*.vm files  \nvmassol - (08:15): $services.model.createDocumentReference(...)  \nvmassol - (08:15): the API is in ModelScriptService  \nCalebJamesDeLisl - (08:15): $xwiki.getDocument($services.model.createDocumentReference($context.wiki, $space, \"WebHome\"))  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0public org.xwiki.model.reference.DocumentReference createDocumentReference(java.lang.String wiki, java.lang.String space, java.lang.String page) { /\\* compiled code \\*/ }  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0public org.xwiki.model.reference.DocumentReference createDocumentReference(java.lang.String wiki, java.lang.String space, java.lang.String page, java.lang.String hint) { /\\* compiled code \\*/ }  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0public org.xwiki.model.reference.DocumentReference resolveDocument(java.lang.String stringRepresentation) { /\\* compiled code \\*/ }  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0public org.xwiki.model.reference.DocumentReference resolveDocument(java.lang.String stringRepresentation, java.lang.String hint) { /\\* compiled code \\*/ }  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0public java.lang.String serialize(org.xwiki.model.reference.EntityReference reference) { /\\* compiled code \\*/ }  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0  \nvmassol - (08:15): \u00a0\u00a0\u00a0\u00a0public java.lang.String serialize(org.xwiki.model.reference.EntityReference reference, java.lang.String hint) { /\\* compiled code \\*/ }  \nCalebJamesDeLisl - (08:16): Why doesn't it accept a list? Is there a significant problem with $xwiki.getDocument([\"Main\", \"WebHome\"])?  \nvmassol - (08:17): because it's less nice and it's finite (except for nested spaces for which we'll need another sig  \nvmassol - (08:17): (when it's supported)  \nCalebJamesDeLisl - (08:18): Less nice than $xwiki.getDocument($services.model.createDocumentReference($context.wiki, $space, \"WebHome\"))?  \nvmassol - (08:18): String, String[], String  \nvmassol - (08:18): definitely yes  \nvmassol - (08:18): ah no wait  \nvmassol - (08:19): we're not talking about the same thing  \nvmassol - (08:19): I'm talking about the Model script service  \nvmassol - (08:19): and you're talking about some old api  \nCalebJamesDeLisl - (08:19): I'm just trying to help getDocument be as easy to use (and safe) as possible  \nvmassol - (08:19): I'm not sure adding more cruft to Document is a good idea  \nvmassol - (08:20): it's already overloaded  \nvmassol - (08:20): but maybe  \nvmassol - (08:20): needs to be discussed with others since it's an importat public api  \nmflorea joined #xwiki at 08:20  \nvmassol - (08:20): but it wouldn't be added to Document  \nvmassol - (08:20): but to a sript service that we don't have  \nCalebJamesDeLisl - (08:20): Why doesn't EntityReference extend List?  \nvmassol - (08:20): there's already an api  \nvmassol - (08:20): it's called: getDocument(DocumentReference)  \nCalebJamesDeLisl - (08:20): Is an entity reference just a form of linked list?  \nvmassol - (08:21): so all we need is an automated bridge service as we had discussed and agreed on  \nvmassol - (08:21): it's just not done  \nvmassol - (08:21): CalebJamesDeLisl: yes it' a linked list  \nCalebJamesDeLisl - (08:21): EntityReference has getParent, and getChild, LinkedList holds references to the next node and the last node  \nCalebJamesDeLisl - (08:22): So why not make it an official List<String>?  \nCalebJamesDeLisl - (08:22): Then users don't have to deal with creating a reference, they can just pass a list.  \nvmassol - (08:23): it's exactly the same pb  \nCalebJamesDeLisl - (08:23): escaping?  \nvmassol - (08:23): it wouldn't be a list with scalar elements  \nvmassol - (08:23): it would be a list of compound types  \nvmassol - (08:23): so you'd need to create those  \nvmassol - (08:24): + we don't manipulate Entity Refereces  \nvmassol - (08:24): but we use the typed APIs  \nvmassol - (08:24): (DocumentReference, etc)  \nCalebJamesDeLisl - (08:24): Maybe a reference should extend List and detect that it has been passed a list of string and convert to a proper reference?  \nvmassol - (08:24): big big big ?1  \nCalebJamesDeLisl - (08:24): You expect the community to move to $xwiki.getDocument($services.model.createDocumentReference($context.wiki, $space, \"WebHome\"))?  \nvmassol - (08:25): you're mixing references  \nvmassol - (08:25): and resolvers  \nvmassol - (08:25): CalebJamesDeLisl: please re again what I said above  \nCalebJamesDeLisl - (08:25): IMO something needs to be done, otherwise you might as well ask for the database id number.  \nvmassol - (08:25): :)  \nvmassol - (08:26): \"so all we need is an automated bridge service as we had discussed and agreed on\"  \nvmassol - (08:26): \"it's just not done\"  \nvmassol - (08:26): technically this means registering an uberspector at the velocity module level  \nCalebJamesDeLisl - (08:26): Then what would the velocity script look like?  \nvmassol - (08:27): so that it converts from whatever format to a DocumentReference for ex  \nvmassol - (08:27): you can choose the format you want  \nCalebJamesDeLisl - (08:27): List<String>?  \nvmassol - (08:27): either a list as you mentioned or much better IMO 3 string params  \nvmassol - (08:27): (but we need to check for clashes with existing apis)  \nvmassol - (08:27): s/apis/signatures/  \nCalebJamesDeLisl - (08:28): That sounds like it will create trouble because it will compile but fail at runtime.  \nplunden joined #xwiki at 08:28  \nkibahop joined #xwiki at 08:29  \nkibahop left #xwiki at 08:29  \nCalebJamesDeLisl - (08:29): ui tests pass :)  \nCalebJamesDeLisl - (08:34): one selenium test. http://hudson.xwiki.org/view/Functional%20Tests/job/xwiki-product-enterprise-tests/1013/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/testReport/com.xpn.xwiki.it.selenium/AllDocsTest/testTableViewActions/  \nvmassol - (08:47): CalebJamesDeLisl: we can continue this discussion a bit later or you could make a proposal. Right now I think the long form is the best one. bb in 2 mn  \nvmassol left at 08:47 (Quit: Leaving.  \nvmassol joined #xwiki at 08:49  \nCalebJamesDeLisl - (09:18): I think the only way users will switch to a new api is if it is able to do more things and/or is easier to use than the old api. I think moving away from strings as references is important and therefor I want to make references as attractive as possible. If you agree then we can talk about how to do it.  \nvmassol - (09:19): 2 things:  \nvmassol - (09:20): - the java api is fine so we're only talking about a velocity bridging api here  \nvmassol - (09:20): - the need to create reference is everywhere for almost all apis, not just for $xwiki.getDocument  \nvmassol - (09:20): s/2 things/2 things to consider/  \nvmassol - (09:21): - if you think $services.<service>.<method> is too long then we need to find another idea because that's teh currently voted one  \nCalebJamesDeLisl - (09:21): If you don't agree that for an api to succeed it must be easier to use then I don't think we can really come to any agreement.  \nvmassol - (09:21): I don't see what's wrong with a call that takes a non scalar param  \nvmassol - (09:22): CalebJamesDeLisl: who wouldn't care for an easy to use api?  \nvmassol - (09:22): what I do care about is a consistent api  \nvmassol - (09:22): ie what you imagine for xwik.getDocument must work everywhere  \nvmassol - (09:23): but first tell me what's wrong with a method call  \nCalebJamesDeLisl - (09:23): My position is if the new api is harder than the old one, people will never switch.  \nvmassol - (09:23): that takes params that are not scalar  \nvmassol - (09:23): ?  \nvmassol - (09:23): CalebJamesDeLisl: they don't have to switch  \nvmassol - (09:23): ATM at least  \nCalebJamesDeLisl - (09:23): So we will always support getDocument(String)?  \nvmassol - (09:23): in the future when we remove the deprecation they'll have no choice  \nvmassol - (09:23): so it's not like they have the choice  \nCalebJamesDeLisl - (09:23): Oh yes they do!  \nvmassol - (09:24): it's always easier to not handle stuff  \nCalebJamesDeLisl - (09:24): There are many choices. Don't upgrade, or move to a different piece of software which is more fitting to their desires.  \nvmassol - (09:24): sure, like one that doesn't handle escapes  \nvmassol - (09:24): :)  \nvmassol - (09:24): it'll be simpler for sure  \nvmassol - (09:25): anyway  \nvmassol - (09:25): I'm open to hear all proplsals  \nvmassol - (09:25): as always  \nvmassol - (09:25): they need to think from all the different angles though  \nvmassol - (09:25): please make a proposal  \nCalebJamesDeLisl - (09:25): I agree with you that we need to move away from strings, that's why I'm here making this case.  \nvmassol - (09:25): CalebJamesDeLisl: what you're saying is that the api has to be easier  \nvmassol - (09:25): how can anyone disagree with this?  \nvmassol - (09:26): but you need to propose \\*something\\*  \nvmassol - (09:26): and that something has to work  \nvmassol - (09:26): overloading all existing apis with a new List<String> doesn't work  \nvmassol - (09:26): and I will never agree to change the java apis  \nvmassol - (09:26): from a typed param to a non typed one  \nvmassol - (09:26): I'll agree only at the velocity level  \nCalebJamesDeLisl - (09:27): No that wasn't my idea. However I think something as easy as List<String> is critical to the success of references.  \nvmassol - (09:27): it's even too complex to me  \nvmassol - (09:27): String, String, String is even easier  \nvmassol - (09:27): anyway  \nvmassol - (09:27): I thought long and hard about this  \nvmassol - (09:27): for several hours and couldn't find a good solution  \nvmassol - (09:27): you're free to try  \nvmassol - (09:27): but I need to continue some work  \nCalebJamesDeLisl - (09:27): Ok.  \nvmassol - (09:27): what would be great is if you make a proposal  \nCalebJamesDeLisl - (09:28): I think something that's not very good but is easy enough to use trumps something that is perfect but will gain no traction in the community.  \nCalebJamesDeLisl - (09:28): ok. done. :)  \nvmassol - (09:29): I also agree with this  \nvmassol - (09:29): but again provided you don't endanger existing java apis obviously  \nCalebJamesDeLisl - (09:30): Ok, we agree on the main points, I will draft a proposal.  \nvmassol - (09:30): I'm trying to fix tests right now  \nCalebJamesDeLisl - (09:30): selenium allDocs?  \nvmassol - (09:30): yes  \nCalebJamesDeLisl - (09:31): I'm trying a click inbetween the sendkeys.  \nCalebJamesDeLisl - (09:31): sendKeys seems to clear the other value.  \nCalebJamesDeLisl - (09:31): (but you knew that.)  \nCalebJamesDeLisl - (09:32): using selenium.type doesn't clear the values but doesn't trigger livetable either.  \njvdrean joined #xwiki at 09:32  \nvmassol - (09:33): I'm starting a port to ui-tests  \nDenis joined #xwiki at 09:33  \nCalebJamesDeLisl - (09:34): Ahh that's much better.  \nmariusbutuc joined #xwiki at 09:34  \nmariusbutuc left #xwiki at 09:35  \nvmassol - (09:35): we'll probably have the same pb though  \nvmassol - (09:39): the first thing to find is a reliable way to find out that the table has finished redrawing and can be asserted  \nvmassol - (09:39): I couldn't find better than the ugly wait on the pagination result before but there must be better  \nvmassol - (09:39): or we could even modify the livetable code to make that easier possibly  \nvmassol - (09:40): jvelociter: your help is most welcome in this area :)  \nCalebJamesDeLisl - (09:41): Looking at that test, it doesn't seem to be proving anything.  \nCalebJamesDeLisl - (09:41): Even if specifying the space as \"XWiki\" fails, there is still only one document named \"treeview\" so the test will pass.  \nCalebJamesDeLisl - (09:42): If there are no complaints, I'm going to make it specify the space as \"Blog\" and not specify the page. This way if it doesn't filter by space, the test will fail.  \nCalebJamesDeLisl - (09:43): (just so we can have it passing so we can release)  \njvelociter - (09:44): vmassol: make the table easier to test ?  \narkub joined #xwiki at 09:47  \nmariusbutuc joined #xwiki at 09:48  \nvmassol - (09:48): jvelociter: finding a good way to find out when the livetable is ready to be assrted (ie has finished draxing)  \nvmassol - (09:48): drawing  \njvelociter - (09:48): but for tests ?  \nvmassol - (09:49): using Blog doesn't sound good. Not sure what it has to do with blog  \njvelociter - (09:49): if it's not for test, we can just send an event  \nvmassol - (09:49): jvelociter: yes for test  \nvmassol - (09:49): right now I wait on the pagination result  \nvmassol - (09:49): but it's a bit hacky  \nvmassol - (09:49): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// Note: We wait on the pagination result since it's the last element updated and it's done after the  \nvmassol - (09:49): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// table rows have been updated so this allows us to wait on it. In the code below \"1\" represents the  \nvmassol - (09:49): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// displayed pages.  \nvmassol - (09:50): when the table isn't \"ready\" the pagination isn't displayed (value is \"\")  \nvmassol - (09:50): but it seems it's failing on some occasions for some reaso  \nvmassol - (09:50): reason  \nvmassol - (09:52): jvelociter: reading livetable.js is complex for me hence my hope that you could help me find a better hook  \njvelociter - (09:53): let me read the code  \nvmassol - (09:55): I see this:  \nvmassol - (09:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// 2. Generic event (for code potentially interested in any livetable)  \nvmassol - (09:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0document.fire(\"xwiki:livetable:loadingComplete\", {  \nvmassol - (09:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"status\" : transport.status,  \nvmassol - (09:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"tableId\" : self.domNodeName  \nvmassol - (09:55): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0});  \nvmassol - (09:55): could this be used somehow?  \nvmassol - (09:56): rather this one:  \nvmassol - (09:56): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0document.fire(\"xwiki:livetable:\" + self.domNodeName + \":loadingComplete\", {  \nvmassol - (09:56): maybe this is only loading and not displaying, reading more  \njvelociter - (09:57): indeed you will not find a better hook in the dom, I think  \nvmassol - (09:57): ye sindeed  \nvmassol - (09:57): it's missing one  \nvmassol - (09:57): a new event to be fired  \njvelociter - (09:57): the event would work  \nvmassol - (09:57): at the end of displayRows  \nflorinciu joined #xwiki at 09:57  \njvelociter - (09:57): why not this one : document.fire(\"xwiki:livetable:\" + self.domNodeName + \":loadingComplete\" ?  \nvmassol - (09:57): the rows are not displayed yet right?  \nvmassol - (09:58): displayRows is called after it seems  \njvelociter - (09:58): ah right  \njvelociter - (09:58): sorry  \njvelociter - (09:58): yes, a new event would be needed at that time  \ntmortagne joined #xwiki at 09:58  \nvmassol - (09:58): since we now have events it's easy to add I guess  \nvmassol - (09:58): we didn't have events when I first wrote the alldocs test  \njvelociter - (09:58): you have access to JS events ?  \njvelociter - (09:58): from tests ?  \nvmassol - (09:59): I can execute js  \nvmassol - (09:59): but not sure  \nvmassol - (09:59): how to get the events  \njvelociter - (10:00): ok  \nCalebJamesDeLisl - (10:00): bbiab breakfast  \njvelociter - (10:00): document.observe(\"eventname\")  \nvmassol - (10:00): mm the pb is the callback  \nvmassol - (10:01): ah I could set some dom element  \nvmassol - (10:01): and then query it later  \nvmassol - (10:01): so the algo would be:  \nvmassol - (10:01): 1) set the observation and set a dom element to a certain value when called  \nvmassol - (10:01): 2) do the livetable action  \nvmassol - (10:01): 3) wait for that dom element value to be set  \nvmassol - (10:01): would that work?  \nvmassol - (10:01): (jvelociter)  \njvelociter - (10:02): yes for example  \nvmassol - (10:04): jvelociter: would that be good:  \nvmassol - (10:04): \u00a0\u00a0\u00a0\u00a0// Let code know displaying is finished  \nvmassol - (10:04): \u00a0\u00a0\u00a0\u00a0// 1. Named event (for code interested by that table only)  \nvmassol - (10:04): \u00a0\u00a0\u00a0\u00a0document.fire(\"xwiki:livetable:\" + self.domNodeName + \":displayComplete\")  \nvmassol - (10:05): \u00a0\u00a0\u00a0\u00a0// 2. Generic event (for code potentially interested in any livetable)  \nvmassol - (10:05): \u00a0\u00a0\u00a0\u00a0document.fire(\"xwiki:livetable:displayComplete\", {  \nvmassol - (10:05): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"tableId\" : self.domNodeName  \nvmassol - (10:05): \u00a0\u00a0\u00a0\u00a0});  \nvmassol - (10:05): added at the end of displayRows  \nvmassol - (10:05): is it also needed at the end of showRows?  \nvmassol - (10:05): (and probably deleteRows too)  \njvelociter - (10:06): yes, looks good  \nvmassol - (10:06): not showrows  \nvmassol - (10:07): it's called internally at several places  \nvmassol - (10:07): so jsut display/deleteRows  \nvmassol - (10:08): ok testing it  \ntmortagne - (10:11): temporalfox: just created an issue based on your mail on http://code.google.com/p/wikimodel/issues/detail?id=186 (better directly create issue when you have other patches, i receive notification for each modified/created issue too)  \ntemporalfox - (10:11): ok sure  \ntemporalfox - (10:11): when do you think it will be released along with xwiki ?  \ntmortagne - (10:11): i'm starting to apply it now  \ntmortagne - (10:12): there is onlt one failing tests before we can release XWiki I think so hopefully today  \ntemporalfox - (10:12): cool  \ntemporalfox - (10:12): I'll be away until this afternoon  \ntemporalfox - (10:12): if you have question you can send email about patch  \ntmortagne - (10:12): ok  \ntemporalfox - (10:12): about wikbook: eXo wants to use it for its technical documentation and Dimitri Baeli wants to use Confluence syntax  \ntemporalfox - (10:13): I've been using it for writing my own documentation using xwiki2 syntax until now  \ntmortagne - (10:14): temporalfox: just one thing isn't noformat really a verbatim block in confluence ?  \ntmortagne - (10:14): {noformat}  \ntemporalfox - (10:14): I don't know  \ntmortagne - (10:14): i see you remove it with code macro test  \ntemporalfox - (10:14): werbatim syntax is {{{ }}}  \ntemporalfox - (10:14): in confluence  \ntmortagne - (10:15): i think {noformat} is too  \ntmortagne - (10:15): did not know about {{{ \u00a0}}}  \ntmortagne - (10:15): I generally use noformat in jira  \nsburjan joined #xwiki at 10:15  \ntemporalfox - (10:15): maybe I removed too much  \ntmortagne - (10:15): i will put back this one  \ntemporalfox - (10:15): it looked inapropriate for {code}  \ntemporalfox - (10:16): so I thought it was same for noformat  \ntmortagne - (10:16): sure  \ntmortagne - (10:16): now it's true that even if it's a verbatim it's still a macro  \ntmortagne - (10:16): that could maybe have another behavior  \ntemporalfox - (10:16): we agreed that macro should not be handled that way :-)  \ntemporalfox - (10:17): one issue I see in parser  \ntemporalfox - (10:17): at the moment  \ntemporalfox - (10:17): is that it does not handle lists in tables  \nvmassol - (10:17): jvelociter: how do I create a new dom variable with a value?  \ntemporalfox - (10:17): like xwiki uses with ((( )))  \ntemporalfox - (10:17): the confluence doc says that it is possible to have bullet lists in tables  \ntemporalfox - (10:17): natively without groups  \ntemporalfox - (10:17): and confluence does not have group notion btw  \ntmortagne - (10:17): ok  \ntemporalfox - (10:17): it is just a FYI  \njvelociter - (10:18): vmassol: you jusrt inject something in the dom  \ntemporalfox - (10:18): so I consider the confluence parser a bit broken  \ntemporalfox - (10:18): I expect other issues like that  \nvmassol - (10:18): jvelociter: how? can you give an example?  \nvmassol - (10:18): document.myvar = value?  \njvelociter - (10:18): document.body.insert( new Element(\"div\", {'id' : 'myDivWithAnId' }).update(\"My Value\") )  \nvmassol - (10:19): there's no notion of metadata I could use?  \nvmassol - (10:19): (rather than inject something \"visible\")  \nvmassol - (10:19): I guess I could inject in the head to start with  \njvelociter - (10:19): I'm checking. I'm not sure  \ntmortagne - (10:20): temporalfox: probably  \ntmortagne - (10:20): don't hesitate to create other issue btw  \nflorinciu left at 10:20 (Ping timeout: 264 seconds  \ntmortagne - (10:20): on http://code.google.com/p/wikimodel/issues/list  \ntemporalfox - (10:20): for now at eXo we'll handle our doc in xwiki 2.0 syntax  \ntemporalfox - (10:20): and at some point we'll migrate to confluence  \ntemporalfox - (10:21): so at this moment, we'll have a massive migration and check  \ntemporalfox - (10:21): and we may find new issues  \njvelociter - (10:21): vmassol: I don't fund any .. maybe Sergiu would have an idea  \nmariusbutuc left at 10:21 (Ping timeout: 264 seconds  \ntemporalfox - (10:21): good thing is that it should improve confluence syntax support  \nsilviar left at 10:21 (Ping timeout: 245 seconds  \ntemporalfox - (10:21): in the parser  \njvelociter - (10:21): s/fund/find/  \ntmortagne - (10:21): temporalfox: you are migrating the wrong way ;)  \ntemporalfox - (10:21): I don't decide  \nsburjan left at 10:21 (Ping timeout: 240 seconds  \ntemporalfox - (10:21): personally I feel better with xwiki 2.0 syntax  \ntemporalfox - (10:21): it's less messy  \ntemporalfox - (10:22): one can really see that confluence syntax grew organically  \ntmortagne - (10:22): sure always good it it makes Confluence parser better in Wikimodel  \ntmortagne - (10:22): that will provide us with better tools to convert from Confluence to xwiki/2.0 ;)  \ntemporalfox - (10:22): I'll provide a bit of feedback probably on syntax  \nvmassol - (10:22): jvelociter: ok I'll use your example for now  \ntemporalfox - (10:23): I think xwiki syntax should handle more things natively :-)  \ntemporalfox - (10:23): not that much  \ntmortagne - (10:23): temporalfox: there is issue in xwiki/2.0 too and we plan a 2.1 at some point  \ntemporalfox - (10:23): like creating anchors  \ntmortagne - (10:23): let me find you the page  \ntemporalfox - (10:23): ok  \ntmortagne - (10:24): vmassol: wasn't then a xwiki/2.1 syntax design page or something else somewhere ?  \ntmortagne - (10:24): i can't find it  \nEnygma` joined #xwiki at 10:24  \nmariusbutuc joined #xwiki at 10:24  \nabusenius joined #xwiki at 10:25  \nflorinciu1 joined #xwiki at 10:25  \ntmortagne - (10:25): temporalfox: you can create anchors but with a macron that's the {{id}} macro  \ntemporalfox - (10:25): in 2.1 syntax ?  \ntmortagne - (10:25): no  \ntmortagne - (10:25): in 2.0  \nsilviar joined #xwiki at 10:25  \ntmortagne - (10:26): {{id name=\"myanchor\"}}  \ntmortagne - (10:26): {{id name=\"myanchor\"/}}  \ntmortagne - (10:26): the XHTML parser produce a anchor you can access with http://someurl#myanchor  \ntmortagne - (10:27): in XDOM it produce a IDBlock  \ntmortagne - (10:27): si it's native in XDOM but not in xwiki/2. syntax  \ntmortagne - (10:27): xwiki/2.0  \ntemporalfox - (10:29): ok, I'm using {{anchor id=foo\\}} :-D  \ntemporalfox - (10:29): in syntax  \ntemporalfox - (10:29): anyway, I need to go, ttyl  \ntmortagne - (10:30): \"anchor\" would have been a better name yes \"id\" is too html  \nmflorea left at 10:31 (Quit: Leaving.  \njvdrean left at 10:32 (Ping timeout: 265 seconds  \nKermitTheFragger joined #xwiki at 10:32  \nsburjan joined #xwiki at 10:34  \nmariusbutuc - (10:34): how does one create a xar out of a folders contents, on Ubuntu?  \ntmortagne - (10:35): mariusbutuc: xar is just a renamed zip  \ntmortagne - (10:35): man zip ;)  \nmariusbutuc - (10:35): tmortagne: thanks!  \nmariusbutuc - (10:36): for zip I manage :P  \ntmortagne - (10:36): :)  \njvdrean joined #xwiki at 10:38  \nvmassol - (10:40): tmortagne: I don't think so  \nvmassol - (10:40): but maybe we added some jira tags  \nvmassol - (10:40): for it  \ntmortagne - (10:41): vmassol: yep i found a keywork for it but we forgot to tag the issue it seems, only on eis :)  \ntmortagne - (10:41): s/eis/is/  \nvmassol - (10:41): ok  \nproyvind - (10:59): why give it .xar suffix, if it's not a xar archive?  \nvmassol - (11:00): jvelociter: how do I get the value back? $$('myid').value ?  \nproyvind - (11:00): wouldn't using xar be a better alternative anyways? or legacy > better?  \njvelociter - (11:01): just one dollar  \njvelociter - (11:01): $('myid').innerHTML  \nproyvind - (11:11): is there any support for easily making it possible to create a sort of WEB-INF/xwiki-local.cfg? ie. a separate configuration file overriding xwiki.cfg, preventing the need of tampering with xwiki.cfg (would be very convenient wrt. packaging, especially since validationKey & encryptionKey should be modified at a stage later than the build stage..  \ntmortagne - (11:13): proyvind: \"why give it .xar suffix, if it's not a xar archive?\", for us \"xar\" means \"XWiki archive\", I have no idea what xar format you are referring to  \njvelociter - (11:14): looks like http://en.wikipedia.org/wiki/Xar\\_(archiver)  \nvmassol - (11:15): jvelociter: do you see anything wrong in :  \nvmassol - (11:15): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0executeJavascript(\"document.observe('xwiki:livetable:\" + this.livetableId + \":displayComplete'), function() {\"  \nvmassol - (11:15): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+ \"document.body.insert(new Element('div', {'id' : 'uitest-livetable-status' })).update('complete');});\");  \nvmassol - (11:15): I get \"SyntaxError: missing ; before statement\"  \njvelociter - (11:15): let me see  \nvmassol - (11:15): ah I know  \nvmassol - (11:15): a ) too much  \nvmassol - (11:15): before function  \nevalica joined #xwiki at 11:16  \nproyvind - (11:16): tmortagne: ouch, then that's a really poor choice of suffix name.. ;p  \njvelociter - (11:17): yes  \njvelociter - (11:17): (vmassol )  \nvmassol - (11:17): yep works now  \nproyvind - (11:18): (I still would imagine xar would be a beneficial format too choice none the less though, supports various compression formats and can carry metadata within the format itself..;)  \ntmortagne - (11:18): proyvind: not sure http://en.wikipedia.org/wiki/Xar\\_(archiver) is older than our xar ;)  \ntmortagne - (11:19): proyvind: if we change it one idea was to change it for jar  \ntmortagne - (11:19): and make it a jar (manifest, etc...)  \nproyvind - (11:20): with xar you could benefit of compression formats such as xz/lzma, gzip etc., which would provide a way-way better compression ratio as well :o)  \nproyvind - (11:21): but I guess xar and it's adoption potentially reaching much popularity might lie a couple a years ahead still  \nproyvind - (11:21): dust around xz adoption has still not fully settled yet.. \u00a0(but almost though!;)  \ntmortagne - (11:23): weird that nobody else talked about this xar format before since it looks like a good fit indeed  \nCalebJamesDeLisl - (11:31): Indeed lzma is good, 7zip is widely renowned as the best compression available and they use it.  \nevalica left at 11:32 (Read error: Connection reset by peer  \nevalica joined #xwiki at 11:37  \nplunden left at 11:38 (Remote host closed the connection  \nmflorea joined #xwiki at 11:57  \nevalica left at 12:04 (Ping timeout: 240 seconds  \nevalica joined #xwiki at 12:08  \nsdumitriu joined #xwiki at 12:08  \nmariusbutuc left at 12:28 (Ping timeout: 252 seconds  \nvmassol - (12:32): guys please comment on the last mail regarding office preview  \nvmassol - (12:32): since it's almost there it would be great to have it in 2.4 final  \nCalebJamesDeLisl - (12:35): Selenium2 really is much better than 1. I've been trying to fix the \"little\" bug in the failing test just so we can release today and it's turning into flickering hell.  \nvmassol - (12:36): CalebJamesDeLisl: I'm in a meeting right now so I haven't progressed much yet  \nvmassol - (12:36): (on the port)  \nCalebJamesDeLisl - (12:37): I figure that's a big job not right for release day.  \nCalebJamesDeLisl - (12:37): (maybe I'm wrong.)  \nvmassol - (12:37): sure  \nvmassol - (12:37): better to fix the old test if we can in //  \nvmassol - (12:37): what I'm doing may or may not be in for \u00a02.4M2 release depending on how well it goes  \nvmassol - (12:38): trying to make this work: http://tinypaste.com/8d5a6  \nvmassol - (12:38): btw after lunch I can commit the new livetable event  \nevalica left at 12:53 (Quit: Leaving.  \nevalica joined #xwiki at 12:54  \nvmassol1 joined #xwiki at 12:58  \nvmassol left at 12:59 (Ping timeout: 245 seconds  \nsilviar left at 13:28 (Quit: Leaving.  \nDSpair joined #xwiki at 13:35  \nDSpair - (13:35): Good morning all.  \nDSpair - (13:37): Could someone here assist me in writing a query? I've been trying to wrap my head around it for days, and I'm getting nowhere.  \nDSpair - (13:37): I reviewed the Query guide and the scripting guides, but I am not having any luck.  \nDSpair - (13:38): I would like to query a space for all instances of object X and iterate through the object list, but I cannot even perform the query without getting errors.  \nsdumitriu - (13:50): Hi DSpair  \nsdumitriu - (13:50): I can help  \nDSpair - (13:51): sdumitriu: \u00a0That would be wonderful!!!  \nSvenDowideit\\_ joined #xwiki at 13:51  \nsdumitriu - (13:51): What did you write so far?  \nSvenDowideit left at 13:52 (Ping timeout: 276 seconds  \nSvenDowideit\\_ is now known as SvenDowideit ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nDSpair - (13:52): Well, I have tried in both Groovy and velocity, but I would prefer Groovy for going forward. Here's what I get an error on: services.query.xwql(\"from doc.object(TelnetBackup.BackupDeviceClass) as device\").execute()  \nDSpair - (13:53): Unfortunately, there are no examples on the QueryGuide for doing this in Groovy.  \nDSpair - (13:54): But I would assume that it would be similar to the velocity example?  \nDSpair - (13:54): I'll pastebin my exact code.  \nsdumitriu - (13:55): Strange, this works for me:  \nsdumitriu - (13:55): {{groovy}}  \nsdumitriu - (13:55): print services.query.xwql(\"from doc.object(XWiki.XWikiUsers) as device\").execute()  \nsdumitriu - (13:55): {{/groovy}}  \nDSpair - (13:55): http://pastebin.com/U5R42Qn5  \nDSpair - (13:56): I get an error: Can't find descriptor for the component [role = [org.xwiki.script.service.ScriptService] hint = [query]]  \nsdumitriu - (13:56): Ah  \nsdumitriu - (13:56): That's not a syntax problem  \nsdumitriu - (13:56): What version are you using?  \nDSpair - (13:57): 2.3.1  \nDSpair - (13:57): I pasted your exact code and still get the same error.  \nsdumitriu - (13:57): vmassol1: Was the query exposed as a service in 2.3.1?  \nsdumitriu - (13:57): I doubt it  \nDSpair - (13:57): So then, how would I access the query manager? XWiki.getQueryManager()?  \nsdumitriu - (14:03): Yes, try that  \nDSpair - (14:04): I found it.  \nsdumitriu - (14:04): Working now?  \nDSpair - (14:04): xwiki.search(\"select obj from BaseObject where obj.className='TelnetBackup.BackupDeviceClass'\",5,0)  \narkub left at 14:05 (Ping timeout: 240 seconds  \nDSpair - (14:05): No errors yet, I'll let you know in a few.  \nDSpair - (14:05): And much thanks!!  \nsdumitriu - (14:05): Yes, that should work  \nsdumitriu - (14:05): But it requires programming rights  \nDSpair - (14:10): sdumitriu: \u00a0Programming rights shouldn't be an issue... It's working, but how do I access properties inside of the objects? I can do object.name, but object.otherProp does not work.  \nDSpair - (14:10): I also tries object.get(\"otherProp\")  \nsdumitriu - (14:10): Right, you're already in Groovy, so that's not a new requirement  \nDSpair - (14:10): tried even.  \nsdumitriu - (14:11): The problem is that you now have the protected com.xpn.xwiki.object.BaseObject, and not the Object API  \nsdumitriu - (14:11): Look at that class to see the methods  \nDSpair - (14:11): OK, TY!  \nsdumitriu - (14:12): object.get(\"otherProp\") should work  \nsdumitriu - (14:12): It should give you a BaseProperty  \nsdumitriu - (14:12): (subclass of)  \nsdumitriu - (14:13): Ah, no  \nsdumitriu - (14:13): It won't work  \nsdumitriu - (14:13): The BaseObject you get is empty  \nsdumitriu - (14:13): Since the data model is not linked in the database, but exploded into individual components, what you get is just the empty object  \nsdumitriu - (14:14): You need to either manually load its properties, too, or use the getDocument+getObject APIs to get a full object  \nsdumitriu - (14:15): So, the search returns empty object, but you can get the document name and object number from it  \nsdumitriu - (14:15): Then you must get the document, and from it get the object  \nvmassol1 - (14:16): jvelociter: I'm trying to debug the js event observation since it doesn't seem to get called. What I have now is: http://tinypaste.com/8d5a6 Anything wrong you could see?  \nDSpair - (14:18): sdumitriu: \u00a0Sorry, you lost me there.  \njvelociter - (14:18): vmassol1: at what moment is the listener registered?  \nDSpair - (14:19): I get the document Object from the BaseObject, then from that, I would get the real object.  \nvmassol1 - (14:21): jvelociter: in teh constrcutor  \nDSpair - (14:21): sdumitriu: \u00a0So, something like : device.getDocument().getObj()?  \nvmassol1 is now known as vmassol ([[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nDSpair - (14:21): sdumitriu: \u00a0I'm not seeing in the JavaDocs how to access that.  \nsdumitriu - (14:22): DSpair:  \nplunden joined #xwiki at 14:23  \nsdumitriu - (14:24): DSpair: object.getDocument(context).getObject(object.getClassName(), object.getNumber())  \njvelociter - (14:24): vmassol: have you tried to listen to the event from somewhere else than from the test? Can you run in debug mode and break with firebug on the event listener ?  \nDSpair - (14:24): sdumitriu: \u00a0Hmmm, I don't see those methods in the JavaDocs for BaseObject.  \nvmassol - (14:25): jvelociter: ok will try that  \nsdumitriu - (14:25): DSpair: They are inerited methods  \nDSpair - (14:25): sdumitriu: \u00a0I checked the inherited methods. Perhaps I am looking at an older JavaDoc.  \nDSpair - (14:28): sdumitriu: \u00a0OK, that works, but the returned values are wrapped in XML tags. Any method option which can dispose of those?  \nsdumitriu - (14:29): getValue()  \nsdumitriu - (14:29): Where are you looking at the API?  \nsdumitriu - (14:29): Is it http://platform.xwiki.org/xwiki/bin/download/DevGuide/API/xwiki-core-2.3.1-javadoc.jar/index.html ?  \nsdumitriu - (14:29): That's just the public API, not the protected classes  \nDenis left at 14:32 (Quit: Leaving.  \nDSpair - (14:36): sdumitriu: \u00a0OK, that's almost got me there. A little more debugging and I should have it. Greatly appreciated!!!  \nxwikibot joined #xwiki at 14:47  \nDSpair - (14:48): Darn... still having problems using attached JAR files though.  \nCalebJamesDeLisl - (14:53): Using a different version?  \nDSpair - (14:53): CalebJamesDeLisl: \u00a0No.  \nDSpair - (14:53): CalebJamesDeLisl: \u00a0Clean install though.  \nCalebJamesDeLisl - (14:54): For lack of any other ideas, I suspect a bug.  \nDSpair - (14:59): CalebJamesDeLisl: \u00a0From what I can tell, the thread just ends for some reason and there is never a response from Tomcat.  \nvmassol - (14:59): bb in 1.5 hours  \nCalebJamesDeLisl - (15:00): When you try to attach a jar that is?  \nDSpair - (15:00): I can attach the jar to the page, but if I put \"{{groovy jars=\"attach:myfile.jar\"}}\" it dumps.  \nDSpair - (15:02): I also tried different syntaxes list: attach:wiki:[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)  \nDSpair - (15:02): s/list/like/  \nDSpair - (15:02): Basically, if I use \"attach\" it crashes.  \nCalebJamesDeLisl - (15:02): did you try http://.......  \nCalebJamesDeLisl - (15:02): ?  \nDSpair - (15:02): CalebJamesDeLisl: \u00a0I did, and that works.  \nCalebJamesDeLisl - (15:03): very interesting. The problem might be near isolated then.  \nDSpair - (15:04): Amend that, it doesn't crash, but I do get an error: java.lang.NoClassDefFoundError: Could not initialize class sun.net.www.protocol.http.HttpURLConnection  \ntmortagne - (15:06): are you using Sun JVM ?  \nDSpair - (15:06): tmortagne: \u00a0Of course... Java 6.  \ntmortagne - (15:06): that's a weird error then  \nDSpair - (15:07): tmortagne: \u00a0Nevermind, I just realized I spoke too soon!!  \nDSpair - (15:07): It was using OpenJDK  \nDSpair - (15:07): I will specify the path in catalina.sh  \nCalebJamesDeLisl - (15:07): I'm also using OpenJDK6  \ntmortagne - (15:08): I think OpenJDK have pretty much the same classe as Sun jmv even the sn.net things  \nDSpair - (15:08): That could explain a lot of my little problems.  \ntmortagne - (15:08): \\*sun.net  \ntmortagne - (15:08): plus it's not great if we depends on Sun JVM...  \nCalebJamesDeLisl - (15:09): I wish we could get the url that the HttpURLConnection was trying to open. wireshark?  \nDSpair - (15:09): CalebJamesDeLisl: \u00a0I have wireshark and know how to use it.  \nDSpair - (15:09): Let me see what I can see.  \nDSpair - (15:10): After switching to Sun JVM 1.6.0, I get a different error. Null Pointer Exception.  \nCalebJamesDeLisl - (15:10): I get the NPE when I try to get a document which isn't attached.  \nDSpair - (15:12): Back to: java.lang.NoClassDefFoundError: Could not initialize class sun.net.www.protocol.http.HttpURLConnection  \nCalebJamesDeLisl - (15:13): That does look to be out of our territory.  \nCalebJamesDeLisl - (15:14): Still I wonder why you don't have it.  \nCalebJamesDeLisl - (15:14): And why it works when you explicitly enter the http://....  \nDSpair - (15:16): CalebJamesDeLisl: \u00a0No, it fails with the NoClassDefFoundError when I use http://  \nDSpair - (15:17): I get not response when I use \"attach\"  \nCalebJamesDeLisl - (15:17): Did it ever work with http://?  \nDSpair - (15:17): I just went through with WireShark and I never even see it attempt the HTTP connection for the jar file.  \nDSpair - (15:17): CalebJamesDeLisl: \u00a0I think it did on the install at work. I have a duplicate setup here at home.  \nkibahop joined #xwiki at 15:19  \nDSpair - (15:20): Anyhow, I'll just put it in the server shared. It's not worth fighting over until I finish the application and I am ready to publish it.  \nDSpair - (15:22): Here's a (hopefully) simple question. Even if I don't uncomment the \"superadmin\" section of the xwiki.cfg file, does that account still exist without a usable password?  \nDSpair - (15:22): The reason I ask is, if I publish this app, many pages will need programming rights. What user should I assign ownership of the page to ensure that will work for anyone who imports the application?  \nCalebJamesDeLisl - (15:23): XWiki.Admin is a good choice.  \nCalebJamesDeLisl - (15:24): superadmin doesn't really exist, there are special if statements to check for it.  \nDSpair - (15:24): CalebJamesDeLisl: \u00a0OK, gotcha.  \nCalebJamesDeLisl - (15:24): https://encrypted.google.com/search?&q=NoClassDefFoundError+sun.net.www.protocol.http.HttpURLConnection  \nCalebJamesDeLisl - (15:24): Seems that others have had the problem, always with tomcat.  \nDSpair - (15:26): I wonder if I ever got around to disabling the security manager.  \nCalebJamesDeLisl - (15:26): Ahh yes. 2 installations.  \nCalebJamesDeLisl - (15:26): It seems to me that the component manager panics if you have security manager on though.  \nDSpair - (15:30): Nope, same error after adding \"TOMCAT5\\_SECURITY=no\" to catalina.sh  \nCalebJamesDeLisl - (15:37): I'm going to break for coffee.  \ntmortagne - (15:38): vmassol: did you found what was wrong with AllDocsTest.testTableViewActions test finally ? I mean if it's timing issue or really something wrong ? (if it's timing issue i think i should start the release)  \nCalebJamesDeLisl - (15:38): Is it not working? It is indeed a flickering issue.  \nCalebJamesDeLisl - (15:39): vmassol was rewriting it, I was trying to patch it together so you could release.  \ntmortagne - (15:39): CalebJamesDeLisl: indeed i did not checked it's age, it's now really flickering  \ntmortagne - (15:39): (it used to fail all the time before)  \ntmortagne - (15:39): so anyone against starting the 2.4M2 release ?  \nCalebJamesDeLisl - (15:40): Yes, it was still just a testing mistake.  \ntmortagne - (15:40): sdumitriu: did you found some time to add some datas to the release note about obejct/class editors ?  \nkibahop left #xwiki at 15:43  \ntmortagne - (15:44): mflorea: could you add some screenshots to http://www.xwiki.org/xwiki/bin/view/Main/ReleaseNotesXWikiEnterprise24M2#HWYSIWYGImprovements ?  \ntmortagne - (15:45): i'm checking if anything new has been commited since last release note modification  \nDSpair - (15:49): Is there an easy way to change the Author/Creator for an entire Space?  \nmflorea - (15:54): tmortagne: sure, I'll add some screenshots  \ntmortagne - (15:54): mflorea: thanks  \nDSpair - (16:11): Quick question on link syntax, is there a way to define an XWiki link to point to an inline form?  \nflorinciu joined #xwiki at 16:18  \nflorinciu1 left at 16:22 (Ping timeout: 264 seconds  \nEnygma` left at 16:22 (Ping timeout: 265 seconds  \nEnygma` joined #xwiki at 16:24  \nplunden left #xwiki at 16:32  \nsburjan left at 16:39 (Ping timeout: 276 seconds  \nlucaa joined #xwiki at 16:49  \ntmortagne - (17:05): abusenius: would you add some documentation about nested script macros and related configuration in http://code.xwiki.org/xwiki/bin/view/Macros/ScriptMacro ?  \nabusenius - (17:06): sure  \ntmortagne - (17:06): thanks  \nmariusbutuc joined #xwiki at 17:10  \ntmortagne - (17:12): sdumitriu: small \"bug\" in class editor: when you use \"Edit another class\" to change the class to edit it always ask if we want to save the current class even if nothing has been changed  \nevalica left at 17:24 (Ping timeout: 260 seconds  \nevalica joined #xwiki at 17:24  \nlucaa left at 17:36 (Ping timeout: 252 seconds  \nabusenius - (17:38): hm, seems that support for nested scripts configuration was removed in r29499 right after it was introduced in r29494  \nevalica left at 17:38 (Ping timeout: 276 seconds  \nabusenius - (17:38): tmortagne, vmassol, do you remember whether it was intended?  \nabusenius - (17:39): CalebJamesDeLisl ?  \nCalebJamesDeLisl - (17:39): What?  \nCalebJamesDeLisl - (17:39): It should be there now.  \nCalebJamesDeLisl - (17:39): Looking...  \nabusenius - (17:40): can't find it  \nabusenius - (17:40): strange...  \ntmortagne - (17:40): abusenius: nop i don't know i was sure it was here  \ntmortagne - (17:40): how removed it ?  \ntmortagne - (17:40): who  \nabusenius - (17:40): Caleb  \nCalebJamesDeLisl - (17:41): r29499 was me, I just made some changes, didn't remove anything AFAIK.  \nabusenius - (17:41): (during refactoring suggested by vmassol)  \nCalebJamesDeLisl - (17:41): Your integration test still worked after that.  \nabusenius - (17:41): well, at least you removed DefaultScriptMacroConfiguration.java  \nCalebJamesDeLisl - (17:42): org.xwiki.rendering.macro.MacroExecutionException: Nested scripts are not allowed  \nCalebJamesDeLisl - (17:42): XWiki Enterprise 2.4-SNAPSHOT.29774  \nabusenius - (17:42): I haven't tested whether it can actually be disabled, I should have I guess  \ntmortagne - (17:42): CalebJamesDeLisl: abusenius is talking about configuration  \ntmortagne - (17:43): only that  \nCalebJamesDeLisl - (17:43): Right. Configuration was removed.  \nCalebJamesDeLisl - (17:43): The way to turn it off is to override the component.  \nevalica joined #xwiki at 17:43  \nabusenius - (17:44): ah, right, I remember  \nabusenius - (17:45): ok, I'll change the description then  \nCalebJamesDeLisl - (17:45): Does anyone know the syntax of components-overrides.txt?  \nabusenius - (17:46): is component overriding documented somewhere?  \ntmortagne - (17:46): CalebJamesDeLisl: no special syntax  \ntmortagne - (17:46): it's exactly the same as components.txt  \nCalebJamesDeLisl - (17:46): So same syntax as regular components.txt?  \ntmortagne - (17:46): yes  \nCalebJamesDeLisl - (17:47): Hmm, that's too bad, that means a user will have to write a \"do nothing\" validater in order to override the other one.  \ntmortagne - (17:47): you can see it as a list of high priority components  \ntmortagne - (17:47): CalebJamesDeLisl: yep that's why i wanted a configuration as i said several times...  \nCalebJamesDeLisl - (17:48): I did not have a real position in that argument, \"as long as it works\"  \nCalebJamesDeLisl - (17:49): But had I thought ahead, I would have written just such a dummy validator.  \nCalebJamesDeLisl - (17:50): Actually scripts which really need it can remove the validator using the component manager.  \ntmortagne - (17:57): CalebJamesDeLisl: is it supported ?  \ntmortagne - (17:57): no component implementation at all  \ntmortagne - (17:58): wouldn't it make it fail (i didn't checked the code)  \ntmortagne - (17:58): ?  \ntmortagne - (17:58): if it's injected with a @Requirement it will not work  \nCalebJamesDeLisl - (17:58): Ahh right, It uses a static list so it can't be removed.  \nabusenius - (17:59): we should mention changed order of scripts in syntax 1.0 too  \nCalebJamesDeLisl - (17:59): I guess I'll have to write a dummy validator to override with before final.  \ntmortagne - (18:00): CalebJamesDeLisl: actually if it's a list it's ok  \ntmortagne - (18:00): you will simply get an empty list  \nCalebJamesDeLisl - (18:00): Well you remove it and the list is still there.  \ntmortagne - (18:01): sure but an empty list of validator will just do nothing  \nCalebJamesDeLisl - (18:01): it's a @Requirement(type=Validator.class) \u00a0List<Validator>  \ntmortagne - (18:01): ha but you can't remove the validator since it's in the same jar  \nEnygma` left at 18:01 (Ping timeout: 260 seconds  \nCalebJamesDeLisl - (18:01): Clearly I didn't think this through.  \ntmortagne - (18:02): CalebJamesDeLisl: i understood and again if the CM does not find any Validator the list will be en empty list  \nCalebJamesDeLisl - (18:02): Yes but how do you make the CM not find the validator?  \nCalebJamesDeLisl - (18:03): If you do it with a groovy script, it's already too late because the list is created on load.  \nCalebJamesDeLisl - (18:03): (static list)  \ntmortagne - (18:03): CalebJamesDeLisl: aren't we talking about removing the validator ?  \nCalebJamesDeLisl - (18:03): Well if you rip it out of the jar file then I guess you're fine.  \ntmortagne - (18:04): ha did not seen you where talking only about some scripts  \ntmortagne - (18:04): i tough you where talking about the whole farm  \nCalebJamesDeLisl - (18:04): I was thinking you might just write a groovy script to kick it out of the CM (which is easier) but by then it's already in the static list.  \ntmortagne - (18:05): to be able to to do for some script you would need a thread base CM  \nCalebJamesDeLisl - (18:05): I didn't mean on a per script basis.  \ntmortagne - (18:05): CalebJamesDeLisl: if you do that you will break other script executed at the same time  \ntmortagne - (18:05): because you have several pages executed at the same time  \ntmortagne - (18:06): when you remove a component from the CM you remove it for every threads  \nCalebJamesDeLisl - (18:06): It's true that if you really need this, you can open the jar and edit the components.txt.  \nCalebJamesDeLisl - (18:06): I was thinking there might be a groovy script which was run on load.  \nCalebJamesDeLisl - (18:08): Hmm, components-overrides.txt won't work even if there is a dummy version because it's requires a list of all registered validators.  \ntmortagne - (18:09): indeed  \ntmortagne - (18:10): what you can do is to override the implementation class in /WEB-INF/classes/  \ntmortagne - (18:10): very clean isn't it ;)  \nCalebJamesDeLisl - (18:10): Can you use a groovy script?  \ntmortagne - (18:10): for what ?  \nabusenius - (18:11): I think we did everything to keep users more secure :)  \nCalebJamesDeLisl - (18:12): in /WEB-INF/classes/ can an override be a groovy script?  \nmflorea - (18:12): abusenius: let me know when you finish editing the release notes  \nabusenius - (18:12): finished  \nmflorea - (18:12): I'm in, thanks  \ntmortagne - (18:14): CalebJamesDeLisl: /WEB-INF/classes/ contains the same thing as jar files  \nCalebJamesDeLisl - (18:14): Ok so they're compiled class files.  \ntmortagne - (18:14): yes  \nCalebJamesDeLisl - (18:14): And the loader uses them as overrides?  \ntmortagne - (18:15): yes theses takes priority over anything inthe jar files  \nCalebJamesDeLisl - (18:15): Hmm, I could make String take about half as much memory then ;D  \nvmassol - (18:34): back\u2026. lots of meetings today  \nvmassol - (18:34): catching up  \nvmassol - (18:40): re configuration of nested scripts please don't overdesign it just yet. Right now we don't have the use case AFAIK  \nvmassol - (18:40): so this can wait for later  \nvmassol - (18:40): (later = post XE 2.4 final release)  \nvmassol - (18:40): (especially since there are solutions)  \nCalebJamesDeLisl - (18:42): Yea, yanking it from the components.txt seems to be reasonable given the number of use cases I expect.  \nCalebJamesDeLisl - (18:43): And I just did that and indeed it works fine.  \njvdrean left at 18:48 (Quit: Leaving.  \nmariusbutuc left at 19:06 (Ping timeout: 240 seconds  \nmflorea left at 19:07 (Quit: Leaving.  \nabusenius left at 19:21 (Ping timeout: 260 seconds  \nvmassol - (19:23): tmortagne: I had checked clirr exclusions not long ago I think  \nvmassol - (19:24): are you sure they're not used?  \ntmortagne - (19:24): looks like i removed too much  \nvmassol - (19:24): just got a hudson build failure!  \nvmassol - (19:24): :)  \ntmortagne - (19:24): but there was useless for sure  \nvmassol - (19:24): ok  \ntmortagne - (19:25): since some of the commented one did not produces error  \ntmortagne - (19:25): when i commented then to produde the api change report for the release note  \ntmortagne - (19:25): re-checking  \ntmortagne - (19:26): that's weird, hudson build doed not find the same error i did  \nflorinciu left at 19:27 (Quit: Leaving.  \ntmortagne - (19:27): CalebJamesDeLisl: are you still editing the release note ?  \nCalebJamesDeLisl - (19:27): yes.  \nCalebJamesDeLisl - (19:27): Be finished in a minute.  \ntmortagne - (19:28): ok looking at why i don't have the same error then  \nevalica left #xwiki at 19:37  \ntmortagne - (19:38): CalebJamesDeLisl: stilling your wording improvements for the \"Script improvements\" section ;)  \nKermitTheFragger left at 19:42 (Quit: Leaving  \nCalebJamesDeLisl - (19:44): \"stilling your wording improvements\"? \u00a0\u00a0distilling?  \nCalebJamesDeLisl - (19:44): (making alcohol?) ;)  \ntmortagne - (19:47): ok stealing maybe  \ntmortagne - (19:47): :)  \ntmortagne - (19:48): you see why i have to steal ;)  \nCalebJamesDeLisl - (19:50): Ahh. Stealing. I couldn't figure it out since distilling means making shorter and more to the point. It's your's have fun.  \nabusenius joined #xwiki at 19:50  \nlucaa joined #xwiki at 20:10  \nvmassol1 joined #xwiki at 20:40  \nvmassol left at 20:42 (Ping timeout: 240 seconds  \nDSpair left at 21:24 (Quit: Leaving  \nmflorea joined #xwiki at 21:26  \nCalebJamesDeLisl - (21:38): abusenius: The client certs are really awesome, the only problem is you can't sign text with a cert unless it's signed by a cert which you \"trust\" this doesn't necessarily mean CA signed.  \nCalebJamesDeLisl - (21:39): We might be able to hack together a firefox extension to make it work (like perspectives.)  \nCalebJamesDeLisl - (21:41): Anyway I think it would be hugely beneficial in company intranets where the server is already ssl. Especially if the users all have the company CA cert installed.  \nabusenius - (21:54): yea, this would be nice, but it should be completely transparent to the user  \nabusenius - (21:55): otherwise it will be just too complicated  \nabusenius - (21:55): maybe we can act as a CA?  \nabusenius - (21:55): but the user would need to import our cert  \nCalebJamesDeLisl - (21:56): Trying to trick forefox into signing some text ;P  \nabusenius - (21:56): IMO leaving everything on the server is not that bad  \nCalebJamesDeLisl - (21:56): Of course we have to have an alternative especially since crypto.signText isn't supported by IE or Chrome.  \nabusenius - (21:57): it's not like an attacker can do something with those vertificates  \nabusenius - (21:57): except for signing code to run on the server he allready owned  \nCalebJamesDeLisl - (21:57): Hmm, he could probably use a dumped key to bruit force the passphrase.  \nCalebJamesDeLisl - (21:58): Yup. If the key isn't \"trusted\" then it blows up with an internal error.  \nabusenius - (21:58): well, we control the certs, we can delete them all any time, we can even generate a new one for each signature (would be a bit slow tough)  \nabusenius - (21:59): yea, 5x wrong key - cert deleted  \nabusenius - (21:59): (or better secret key)  \nCalebJamesDeLisl - (21:59): Yes but the public keys will be out in the wild on user installations.  \nabusenius - (22:00): its only for verifying already signed code  \nCalebJamesDeLisl - (22:00): I don't follow.  \nabusenius - (22:00): and what is also important, this solution should not depend on browser  \nabusenius - (22:00): I want it to be actually used :)  \nCalebJamesDeLisl - (22:01): If the bad guy dumps the keys from xwiki.org and bruit forces the passphrases, then what prevents him from signing text on any wiki installation?  \nabusenius - (22:02): well, don't use the same key for user and cert (can be enforced)  \nabusenius - (22:03): we will not store important certs on xwiki.org  \nabusenius - (22:03): (only locally)  \nCalebJamesDeLisl - (22:03): So where do the keys go which the committers can use to sign code?  \nabusenius - (22:03): and, if somebody hacks xwiki.org we will have more severe problems ^^  \nabusenius - (22:03): on your PC  \nabusenius - (22:04): it's just for releasing  \nCalebJamesDeLisl - (22:04): So having a key to sign code will not allow me to release things on code.xwiki.org as I wish?  \nabusenius - (22:04): make a local installation where you can sign code if you change something, that's it  \nabusenius - (22:05): you can, since your cert will be signed by xwiki, wich is included in all xwiki installations, it will work  \nvmassol1 left at 22:05 (Quit: Leaving.  \nCalebJamesDeLisl - (22:06): I like that idea, I just want to have compatibility with crypto.signText method of signing.  \nabusenius - (22:06): certificates are public, we can post them on xwiki.org as well  \nabusenius - (22:06): secret keys are secret  \nabusenius - (22:07): I guess we can do both, it's just about moving the secret key to the browser, right?  \nCalebJamesDeLisl - (22:07): If the server has an SSL cert then it can sign user keys and the users can then access crypto.signText  \nabusenius - (22:07): but CA requirement is somewhat ugly  \nCalebJamesDeLisl - (22:07): Which is really awesome because it is literally unbreakable.  \nCalebJamesDeLisl - (22:08): But it's only for the server.  \nabusenius - (22:08): actually its very ugly, we cannot just generate new key, and CAs usually don't sign certificates that can sign certificates  \nCalebJamesDeLisl - (22:08): And if the server is SSL then it must have some kind of trusted cert anyway.  \nCalebJamesDeLisl - (22:09): \"certificates that can sign certificates\" Good point. I wonder if this applies to client certs, it shouldn't.  \nabusenius - (22:09): SSL certs are restricted  \nabusenius - (22:09): they can only be used for ssl  \nabusenius - (22:09): web mail can only sign text, not do ssl  \nabusenius - (22:10): (certs)  \nabusenius - (22:10): we need something that can sign certs for the server and text signing for client  \nCalebJamesDeLisl - (22:10): Looking at client cert info because people do this stuff.  \nCalebJamesDeLisl - (22:13): If this is an intranet then the company will have their own CA so this is irrelevant.  \nabusenius - (22:14): well, not everyone uses it in intranet  \nCalebJamesDeLisl - (22:18): http://www.mail-archive.com/[[email\u00a0protected]](https://dev.xwiki.org/cdn-cgi/l/email-protection)/msg00282.html  \nabusenius - (22:31): is there a conclusion in this discussion? I'm a bit lost in all the text :)  \nCalebJamesDeLisl - (22:36): The bug report : \"Please, change the severity to minor because this bug is not severe at all  \nCalebJamesDeLisl - (22:36): (there is a very easy workaround: just enable trust settings for CAs of your  \nCalebJamesDeLisl - (22:36): certificate)\"  \nCalebJamesDeLisl - (22:36): Successful troll is successful.  \nmflorea left at 22:37 (Quit: Leaving.  \nabusenius - (22:37): they don't mean to use this capability like you'd like to have I guess  \nCalebJamesDeLisl - (22:46): I wonder if a user can be forced to trust their own cert?  \nCalebJamesDeLisl - (22:48): Hmm, the key I got from webid is indeed a certificate signer, i just need to figure out how to use it to sign itself.  \nabusenius - (22:48): you can import any cert and mark is as trusted  \nabusenius - (22:48): but the user will need to do it manually  \nCalebJamesDeLisl - (22:48): yea right.  \nabusenius - (22:49): and for our purposes, this is bad  \ntmortagne left #xwiki at 22:49  \nCalebJamesDeLisl - (22:49): More likely the company will sign each employee's keys with the company CA.  \nabusenius - (22:50): I wonder how many companies would do that  \nabusenius - (22:51): I'd rather bet that they all don't care :)  \nCalebJamesDeLisl - (22:53): I'm going to look a little more at the crypto object, I'm not used to not getting software to do what i want.  \nevalica1 joined #xwiki at 23:40  \nevalica1 left #xwiki at 23:40  \n\n"}