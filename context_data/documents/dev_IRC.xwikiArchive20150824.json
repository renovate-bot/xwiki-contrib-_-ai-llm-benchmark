{"id": "dev:IRC.xwikiArchive20150824", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20150824", "title": "IRC Archive for channel #xwiki on 24 August 2015 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius\\_>\u00a0has quit  \n00:40\u00a0<vmassol>\u00a0has quit  \n04:32\u00a0<cpe\\_>\u00a0has joined #xwiki  \n04:36\u00a0<cpe>\u00a0has quit  \n04:36\u00a0<cpe\\_>\u00a0is now known as <cpe>  \n06:22\u00a0<mflorea>\u00a0has joined #xwiki  \n07:54\u00a0<sorinello>\u00a0has quit  \n08:00\u00a0<\\_cjd\\_>\u00a0has quit  \n08:16\u00a0<Pbas>\u00a0has joined #xwiki  \n08:33\u00a0<iphar>\u00a0has quit  \n08:38\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:44\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n08:44\u00a0<vmassol>\u00a0has joined #xwiki  \n08:47\u00a0<Ramona2>\u00a0has joined #xwiki  \n08:50\u00a0<vmassol>\u00a0good morning, back from holidays! Going to be catching up with mail today :)  \n08:52\u00a0<\\_cjd\\_>\u00a0has joined #xwiki  \n08:54\u00a0<Pbas>\u00a0Hi, here a nice method Vincent to help you: http://www.commitstrip.com/fr/2015/08/17/how-to-achieve-inbox-zero-after-the-holidays/  \n08:54\u00a0<vmassol>\u00a0indeed :)  \n08:57\u00a0<mflorea>\u00a0has quit  \n09:03\u00a0<msmeria>\u00a0has joined #xwiki  \n09:34\u00a0<mflorea>\u00a0has joined #xwiki  \n09:59\u00a0<martin-h>\u00a0has quit  \n10:00\u00a0<martin-h>\u00a0has joined #xwiki  \n10:11\u00a0<gdelhumeau>\u00a0has joined #xwiki  \n10:13\u00a0<gsmeria>\u00a0has joined #xwiki  \n10:13\u00a0<vmassol>\u00a0mflorea: \u00a0there are also http://jira.xwiki.org/browse/XWIKI-12418 and http://jira.xwiki.org/browse/XWIKI-12424 but I don't know if they're related to NS or not and if we have to fix them for 7.2M3 or 7.2 final. WDYT?  \n10:14\u00a0<mflorea>\u00a0They are related to nested spaces. There is a RC between M3 and final, where we ca fix issues like this  \n10:15\u00a0<vmassol>\u00a0ok scheduling those 2 for RC then, shall I assign them to you?  \n10:16\u00a0<mflorea>\u00a0yes, thanks  \n10:16\u00a0<vmassol>\u00a0k thx  \n10:22\u00a0<Trefex>\u00a0has joined #xwiki  \n10:23\u00a0<vmassol>\u00a0we have http://jira.xwiki.org/browse/XWIKI-12379 to fix too. Do you think it should be fixed in 7.2? I'd say yes but WDYT?  \n10:25\u00a0<sorinello>\u00a0has joined #xwiki  \n10:26\u00a0<mflorea>\u00a0fixing the object edit mode is more important for me. I'd fix this before M3 and leave the wiki macros for RC (if there's not time left)  \n10:28\u00a0<vmassol>\u00a0mflorea: do we have a jira issue for using the document tree macro on the home page?  \n10:29\u00a0<mflorea>\u00a0I don't think so, there is one about adding support for NS to spaces macro, but that will be closed as won't fix.  \n10:29\u00a0<vmassol>\u00a0just done that  \n10:29\u00a0<vmassol>\u00a0ok creating one  \n10:29\u00a0<vmassol>\u00a0shall I assign it to you?  \n10:29\u00a0<mflorea>\u00a0yes  \n10:29\u00a0<vmassol>\u00a0k  \n10:32\u00a0<vmassol>\u00a0done: http://jira.xwiki.org/browse/XE-1497  \n10:35\u00a0<vmassol>\u00a0mflorea: could you also review http://jira.xwiki.org/browse/XWIKI-12339 and close it if there's nothing to do? I'm assigning it to you  \n10:37\u00a0<mflorea>\u00a0I did http://jira.xwiki.org/browse/XWIKI-12313 for M1 but there may be things left. I'll check but I'm busy right now.  \n10:38\u00a0<vmassol>\u00a0sure, as I mentioned in comment we just need to make sure it's done during the RC1 timeframe  \n10:38\u00a0<vmassol>\u00a0(in case there's something to do)  \n10:38\u00a0<mflorea>\u00a0yes  \n10:45\u00a0<vmassol>\u00a0hmm we need someone for http://jira.xwiki.org/browse/XWIKI-12325 \u2026 since we're in a hurry I'll schedule it for RC1  \n10:49\u00a0<vmassol>\u00a0also guys could you reply to the thread \"http://markmail.org/message/hup5nzoaiofm57uv\"  \n10:49\u00a0<vmassol>\u00a0\"[Proposal] Consider Wiki Syntax to be advanced and working in the Nested Spaces paradigm\"  \n10:49\u00a0<vmassol>\u00a0so that I could close http://jira.xwiki.org/browse/XWIKI-12304  \n10:50\u00a0<vmassol>\u00a0mflorea: shall I assign http://jira.xwiki.org/browse/XWIKI-12302 to you for RC1?  \n10:51\u00a0<Ramona2>\u00a0has quit  \n10:52\u00a0<mflorea>\u00a0I already did http://jira.xwiki.org/browse/XWIKI-12317 but I will check this too, you can assign it to me  \n10:52\u00a0<vmassol>\u00a0ok, for RC1?  \n10:56\u00a0<mflorea>\u00a0yes  \n11:10\u00a0<vmassol>\u00a0are you ok that I put 7.3M1 for all issues related to Nested Spaces that we don't have to implement in 7.2?  \n11:12\u00a0<ClemensR>\u00a0has joined #xwiki  \n11:16\u00a0<vmassol>\u00a0any take on that?  \n11:16\u00a0<vmassol>\u00a0I could also create a new temporary version named \"Nested Spaces after 7.2\" if you feel it's better  \n11:24\u00a0<tmortagne>\u00a0I just pulled and the skin has serious issue, I don't see anything to login because the button on th top right to get the new side panel is not visible  \n11:24\u00a0<tmortagne>\u00a0also I can't find anything to delete the current page  \n11:26\u00a0<tmortagne>\u00a0or any action other than edit for that matter  \n11:26\u00a0<vmassol>\u00a0gdelhumeau: any idea?  \n11:27\u00a0<vmassol>\u00a0(probably caused by the drawer introduction)  \n11:27\u00a0<vmassol>\u00a0guys any take on : \"are you ok that I put 7.3M1 for all issues related to Nested Spaces that we don't have to implement in 7.2?\"  \n11:27\u00a0<gdelhumeau>\u00a0tmortagne: you don't se the hamburger icon?  \n11:27\u00a0<gdelhumeau>\u00a0\\*see  \n11:28\u00a0<vmassol>\u00a0fast food in xwiki now! yuck :)  \n11:28\u00a0<vmassol>\u00a0(just kidding)  \n11:28\u00a0<gdelhumeau>\u00a0tmortagne: BTW there is new vm in the flamingo skin, maybe XEclipse did not see it?  \n11:30\u00a0<gdelhumeau>\u00a0BTW we cannot add objects with the object editor on a nested doc  \n11:30\u00a0<vmassol>\u00a0gdelhumeau: yep that's http://jira.xwiki.org/browse/XWIKI-12297  \n11:31\u00a0<tmortagne>\u00a0has quit  \n11:31\u00a0<vmassol>\u00a0just rebuilt XE and the delete work for me  \n11:32\u00a0<vmassol>\u00a0I can log in too  \n11:37\u00a0<evalica>\u00a0has joined #xwiki  \n11:50\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:01\u00a0<Ramona1>\u00a0has joined #xwiki  \n12:03\u00a0<vmassol>\u00a0guys any take on : \"are you ok that I put 7.3M1 for all issues related to Nested Spaces that we don't have to implement in 7.2?\"  \n12:05\u00a0<vmassol>\u00a0also do we have a jira issue to add the the tree to the breadcrumb?  \n12:14\u00a0<msmeria1>\u00a0has joined #xwiki  \n12:18\u00a0<Enygma`>\u00a0+1 for 7.3M1 since I find that pretty obvious, as long as I`m missing something  \n12:18\u00a0<Enygma`>\u00a0\\*not\\* missing something :)  \n12:18\u00a0<msmeria>\u00a0has quit  \n12:18\u00a0<vmassol>\u00a0\"I could also create a new temporary version named \"Nested Spaces after 7.2\" if you feel it's better\"  \n12:19\u00a0<vmassol>\u00a0ok I'll start setting fix for for 7.3M1  \n12:19\u00a0<vmassol>\u00a0I'd like to make sure we have fix version set for all issues related to NS to plan ahead  \n12:23\u00a0<msmeria1>\u00a0is now known as <msmeria>  \n12:23\u00a0<vmassol>\u00a0Enygma`: regarding http://jira.xwiki.org/browse/XWIKI-12426 can this be pushed to 7.3M1?  \n12:23\u00a0<Enygma`>\u00a0we`ll handle bugs in 7.2.x and improvements in 7.3M1 as usual  \n12:23\u00a0<vmassol>\u00a0I think it's not a blocker for 7.2, WDYT?  \n12:23\u00a0<Enygma`>\u00a0no, we can live with that as it is right now  \n12:23\u00a0<vmassol>\u00a0k  \n12:23\u00a0<Enygma`>\u00a0so +1 for 7.3M1  \n12:32\u00a0<vmassol>\u00a0@Enygma`: regarding the template providers, any work to be done for 7.2?  \n12:33\u00a0<vmassol>\u00a0XWIKI-12277 XWIKI-12276 XWIKI-12275  \n12:35\u00a0<Enygma`>\u00a0re XWIKI-12275 creating template providers works, but only as top level documents right now, since the UI is using the old create action parameters  \n12:36\u00a0<vmassol>\u00a0Enygma`: that should be ok for now, we'll need to add this info to the RN though  \n12:36\u00a0<vmassol>\u00a0and fix it in 7.3  \n12:36\u00a0<Enygma`>\u00a0editing the issue`s description too  \n12:36\u00a0<vmassol>\u00a0ok scheduling the 3 issues for 7.3M1  \n12:40\u00a0<vmassol>\u00a0ouch just realized that I have http://jira.xwiki.org/browse/XWIKI-12205 still assigned to me but it's a bit complex for me, I need to review what I did before the holidays  \n12:40\u00a0<Enygma`>\u00a0\"vmassol: also do we have a jira issue to add the the tree to the breadcrumb?\" >>> I am not sure, we might not have one, just the UI proposals.  \n12:41\u00a0<vmassol>\u00a0ok creating one  \n12:41\u00a0<Enygma`>\u00a0evalica: ?  \n12:41\u00a0<vmassol>\u00a0who should I assign to it?  \n12:43\u00a0<vmassol>\u00a0I'll put 7.3M1 since it's not ciritical for 7.2 even though it would be nice to have  \n12:43\u00a0<vmassol>\u00a0http://jira.xwiki.org/browse/XWIKI-12430  \n12:45\u00a0<evalica>\u00a0yes - we didn't had any issue for that one - thanks for creating it  \n12:46\u00a0<vmassol>\u00a0Enygma`: why did you remove my fix version for http://jira.xwiki.org/browse/XWIKI-12275 ?  \n12:51\u00a0<vmassol>\u00a0we need someone for http://jira.xwiki.org/browse/XWIKI-12198  \n12:55\u00a0<benoitc>\u00a0has quit  \n12:56\u00a0<Enygma`>\u00a0vmassol: hah, I`ve pressed edit before you`ve set the fixVersion... when I saved, I overwrote your change  \n12:58\u00a0<vmassol>\u00a0ok  \n12:58\u00a0<vmassol>\u00a0np  \n13:00\u00a0<vmassol>\u00a0ok I've reviewed all open issues for NS and set fix versions  \n13:00\u00a0<vmassol>\u00a0let me know if you see anything wrong  \n13:00\u00a0<vmassol>\u00a0let's see what it means for M3 and RC1 now :)  \n13:00\u00a0<Ramona1>\u00a0has quit  \n13:01\u00a0<benoitc>\u00a0has joined #xwiki  \n13:01\u00a0<vmassol>\u00a012 open issues for M3  \n13:01\u00a0<vmassol>\u00a0http://jira.xwiki.org/issues/?jql=labels%20%3D%20NestedSpaces%20and%20resolution%20%3D%20Unresolved%20and%20fixVersion%20%3D%20%227.2-milestone-3%22  \n13:01\u00a0<Ramona1>\u00a0has joined #xwiki  \n13:03\u00a0<vmassol>\u00a0and 20 for RC1: http://jira.xwiki.org/issues/?jql=labels%20%3D%20NestedSpaces%20and%20resolution%20%3D%20Unresolved%20and%20fixVersion%20%3D%20%227.2-rc-1%22  \n13:03\u00a0<vmassol>\u00a0and 14 for 7.3M1 http://jira.xwiki.org/issues/?jql=labels%20%3D%20NestedSpaces%20and%20resolution%20%3D%20Unresolved%20and%20fixVersion%20%3D%20%227.3-milestone-1%22  \n13:03\u00a0<vmassol>\u00a0lots of work :)  \n13:10\u00a0<vmassol>\u00a0and a new blocker for 7.2M3: http://jira.xwiki.org/browse/XWIKI-12425  \n13:13\u00a0<vmassol>\u00a0guys I feel http://jira.xwiki.org/browse/XWIKI-12428 could wait till 7.3, WDYT?  \n13:16\u00a0<fcharton>\u00a0has quit  \n13:34\u00a0<vmassol>\u00a0mflorea: are you sure the fix version is correct for http://jira.xwiki.org/browse/XWIKI-12422 ?  \n13:35\u00a0<mflorea>\u00a0it's a mistake  \n13:36\u00a0<mflorea>\u00a0fixed  \n13:37\u00a0<vmassol>\u00a0k  \n13:42\u00a0<ClemensR>\u00a0btw, there is \u00a0XWIKI-12398 \u00a0- maybe this might need attention? it looks like a regression in the permission system, causing the /skin/ action to be view-protected  \n13:51\u00a0<Ramona1>\u00a0has quit  \n13:51\u00a0<Ramona1>\u00a0has joined #xwiki  \n14:04\u00a0<vmassol>\u00a0ClemensR: AFAIK it's been like this forever no?  \n14:04\u00a0<vmassol>\u00a0actually I'm probably wrong  \n14:04\u00a0<vmassol>\u00a0this needs to be checked indeed  \n14:05\u00a0<vmassol>\u00a0gsmeria: it would be awesome if you could check that issue to see if it's a regression  \n14:06\u00a0<gsmeria>\u00a0ok. i'll check it right now  \n14:07\u00a0<vmassol>\u00a0thanks!  \n14:07\u00a0<vmassol>\u00a0you could check on 6.4.4 if it reproduces  \n14:09\u00a0<gsmeria>\u00a0ok  \n14:23\u00a0<gsmeria>\u00a0vmassol: I couldn't reproduce it on 6.4.4  \n14:24\u00a0<gsmeria>\u00a0the login page is looking fine, is with that grey theme  \n14:27\u00a0<gsmeria>\u00a0but on the other hand, on 7.2M2 I reproduced it, is just text  \n14:42\u00a0<Trefex>\u00a0has quit  \n14:44\u00a0<tmortagne>\u00a0has joined #xwiki  \n14:47\u00a0<Trefex>\u00a0has joined #xwiki  \n14:59\u00a0<vmassol>\u00a0gsmeria: ok \u00a0great thanks  \n14:59\u00a0<vmassol>\u00a0hmm  \n15:00\u00a0<vmassol>\u00a0I wonder if it's a problem introduced in 7.2M2  \n15:00\u00a0<vmassol>\u00a0if you have 7.2M1 it would be interesting to verify it works fine there  \n15:00\u00a0<vmassol>\u00a0just noticed that ClemensR had put an analysis in the issue  \n15:00\u00a0<vmassol>\u00a0\". It seems the \"skin\"-action needs \"view\" rights in 7.2M2.\"  \n15:01\u00a0<vmassol>\u00a0Enygma`: could it be caused by changes you did for the script rightt?  \n15:01\u00a0<vmassol>\u00a0\\*right  \n15:01\u00a0<ClemensR>\u00a0ah, I forgot to say it works in 7.1.1 either ... sorry  \n15:02\u00a0<vmassol>\u00a0so one more issue to fix for 7.2M3  \n15:02\u00a0<Enygma`>\u00a0ClemensR: does it work on 7.1.1 or not?  \n15:02\u00a0<ClemensR>\u00a0it works on 7.1.1  \n15:02\u00a0<Enygma`>\u00a0ok  \n15:02\u00a0<Enygma`>\u00a0vmassol: so yes, most likely related to script rights  \n15:03\u00a0<gsmeria>\u00a0I already have an 7.1M1 on my PC, testing now  \n15:03\u00a0<vmassol>\u00a0Enygma`: do you think you could try to debug the issue for M3?  \n15:03\u00a0<Enygma`>\u00a0once I finish the watchlist stuff  \n15:03\u00a0<vmassol>\u00a0ok I'm assigning it to you then, thanks  \n15:07\u00a0<gsmeria>\u00a0vmassol: so.. the bug started with 7.2M2, on 7.2M1 it looks fine  \n15:07\u00a0<vmassol>\u00a0ok great thanks  \n15:51\u00a0<vmassol>\u00a0so we have 25 outstanding issues to fix for Thursday\u2026.. :(  \n15:51\u00a0<vmassol>\u00a0(see last mail)  \n16:01\u00a0<gsmeria>\u00a0has left #xwiki  \n16:06\u00a0<gdelhumeau>\u00a0I've tested my progress bar on the delete action last week  \n16:06\u00a0<gdelhumeau>\u00a0I've introduce a REST resource to get the status of the job  \n16:06\u00a0<gdelhumeau>\u00a0and it worked  \n16:06\u00a0<gdelhumeau>\u00a0but today, the rest query is redirected  \n16:06\u00a0<gdelhumeau>\u00a0for some reason  \n16:07\u00a0<gdelhumeau>\u00a0ex: \u00a0http://localhost:8080/rest/jobstatus/refactoring/delete/1440424157511-714 redirected to http://localhost:8080/rest/jobstatus/refactoring/delete/xwiki  \n16:07\u00a0<gdelhumeau>\u00a0any idea?  \n16:10\u00a0<Chuguniy>\u00a0has joined #xwiki  \n16:11\u00a0<vmassol>\u00a0no idea on my side sorry  \n16:20\u00a0<sorinello>\u00a0has quit  \n16:43\u00a0<Trefex>\u00a0hey vmassol ClemensR et companie  \n16:43\u00a0<Trefex>\u00a0i have a problem with LDAP cache  \n16:43\u00a0<Trefex>\u00a02015-08-24 14:41:47,331 [https://lcsb-wiki.uni.lu/xwiki/bin/loginsubmit/XWiki/XWikiLogin] DEBUG c.x.x.p.l.XWikiLDAPUtils \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0- Found group [cn=xwiki,cn=groups,cn=accounts,dc=uni,dc=lu] members [{uid=yohan.jarosz,cn=users,cn=accounts,dc=uni,dc=lu=yohan.jarosz, uid=sergio.coronado,cn=users,cn=accounts,dc=uni,dc=lu=sergio.coronado, uid=christophe.trefois,cn=users,cn=accounts,dc=uni,dc=lu=christophe.trefois, uid=test,cn=users,cn=accounts,dc=uni,dc=lu=test}]  \n16:43\u00a0<Trefex>\u00a0this is the log entry i get when trying to authenticate a new user, however, the user is not on the list, since he was freshly added to LDAP  \n16:44\u00a0<Trefex>\u00a0somehow, i am unable to clear the local LDAP and trigger a refresh of the groups cache  \n16:44\u00a0<Trefex>\u00a0i set the timeout to 60 seconds  \n16:45\u00a0<Trefex>\u00a0tmortagne: ping :)  \n16:47\u00a0<tmortagne>\u00a0Trefex: yes there is no UI to refresh the cache AFAIK but it can be done with a script. Now it's a memory cache so you can also simple restart XWiki  \n16:47\u00a0<Trefex>\u00a0tmortagne: why would i restart xwiki everytime i change something in the LDAP ?  \n16:47\u00a0<Trefex>\u00a0why is the timeout not respected ?  \n16:48\u00a0<tmortagne>\u00a0it's not exactly a timeout, it how long the cache entry is not used  \n16:49\u00a0<tmortagne>\u00a0also 60s makes it totally useless  \n16:49\u00a0<tmortagne>\u00a0you can look at http://extensions.xwiki.org/xwiki/bin/view/Extension/Reset+LDAP+group+cache+snippet  \n16:49\u00a0<Trefex>\u00a0tmortagne: well i put it to 60s so that it gets updated  \n16:49\u00a0<Trefex>\u00a0isn't that how cache works?  \n16:49\u00a0<Trefex>\u00a0so, i can only update LDAP groups cache by resetting it with a code snippet?  \n16:49\u00a0<Trefex>\u00a0or is there any action that will trigger an automatic update  \n16:50\u00a0<tmortagne>\u00a0there is many ways deal with time in cache, in XWiki default cache that is used here the time is not about how old is a value it's about how long a value was used  \n16:50\u00a0<tmortagne>\u00a0there is nothing automatic to invalidate the cache no  \n16:51\u00a0<tmortagne>\u00a0only time or explicit action  \n16:51\u00a0<tmortagne>\u00a0it's possible there is something to force clear the cache in http://extensions.xwiki.org/xwiki/bin/view/Extension/LDAP+Application  \n16:51\u00a0<Trefex>\u00a0this means that for instance if for 60s nobody used the LDAP function, it should reset cache ?  \n16:51\u00a0<Trefex>\u00a0because if that is case, then it doesn't work  \n16:52\u00a0<Trefex>\u00a0tmortagne: yeah there's a big button on the bottom of the page  \n16:52\u00a0<tmortagne>\u00a0if nobody do use the LDAP can an any way for 60s it should be invalidated  \n16:52\u00a0<tmortagne>\u00a0s/do use/use/  \n16:53\u00a0<gdelhumeau>\u00a0I have no idea how to debug this  \n16:55\u00a0<Enygma`>\u00a0just spotted XWIKI-12432 which is causing XWIKI-12433 and might affect other places too, since sorting document references could be a common thing.  \n16:55\u00a0<tmortagne>\u00a0Trefex: where did you set the time ?  \n16:55\u00a0<Trefex>\u00a0tmortagne: in the app  \n16:56\u00a0<Trefex>\u00a0the LDAP Application Extension you linked  \n16:58\u00a0<tmortagne>\u00a0do you have several wikis ?  \n16:59\u00a0<Enygma`>\u00a0vmassol: not sure if I should mark it as a bug or leave it as improvement  \n16:59\u00a0<Enygma`>\u00a0in my case it caused a bug  \n17:00\u00a0<tmortagne>\u00a0Trefex: maybe the application is not setting the right setting, you could go directly to http://127.0.0.1:8080/xwiki/bin/edit/XWiki/XWikiPreferences?editor=object and check \"LDAP groups cache expiration\" property value  \n17:00\u00a0<vmassol>\u00a0Enygma`: reading  \n17:01\u00a0<tmortagne>\u00a0but in any case IMO it's not a good idea to set 60s, it's better to explicitly invalidate the cache when really needed. Group are usually don't modified all day long  \n17:02\u00a0<evalica>\u00a0has quit  \n17:04\u00a0<vmassol>\u00a0Enygma`: IMO you could mark XWIKI-12432 as a bug  \n17:04\u00a0<vmassol>\u00a0since EntityReference were supposed to work with nested spaces from day one  \n17:05\u00a0<gdelhumeau>\u00a0apparently this redirection comes from jetty  \n17:06\u00a0<Enygma`>\u00a0vmassol: as a workaround, we can compare the string serialized references until we fix it, which seems to work nicely  \n17:06\u00a0<Enygma`>\u00a0vmassol: marked as bug. I`ll let you assign a fixVersion if needed, depending on priority  \n17:07\u00a0<vmassol>\u00a0don't you need it for XWIKI-12433?  \n17:07\u00a0<Enygma`>\u00a0I can work easily around it by comparing the string serialization  \n17:07\u00a0<vmassol>\u00a0(which is marked for 7.2M3)  \n17:08\u00a0<vmassol>\u00a0IMO it's better to fix 12432  \n17:08\u00a0<vmassol>\u00a0is it that complex?  \n17:09\u00a0<vmassol>\u00a0I'm not sure I understand the problem  \n17:09\u00a0<vmassol>\u00a0compareTo() seems to compare the parent too  \n17:09\u00a0<Enygma`>\u00a0my stack is piling up already with the watchlist work I`m already doing  \n17:10\u00a0<Enygma`>\u00a0compares only parent lengths  \n17:10\u00a0<Enygma`>\u00a0that`s the issue  \n17:10\u00a0<vmassol>\u00a0I don't see that in the code  \n17:10\u00a0<vmassol>\u00a0in compareParent() I see  \n17:10\u00a0<vmassol>\u00a0return parent.compareTo(reference.parent);  \n17:10\u00a0<vmassol>\u00a0which is recursive  \n17:10\u00a0<Enygma`>\u00a0see in compareParent()  \n17:10\u00a0<Enygma`>\u00a0return (reference.parent == null) ? 0 : -1;  \n17:11\u00a0<Enygma`>\u00a0if the current parent finishes before the other one, then the current reference is \"smaller\" (-1) than the other  \n17:12\u00a0<vmassol>\u00a0ok I see  \n17:12\u00a0<Enygma`>\u00a0and anyway, comparisons of the same type should start from left to right  \n17:12\u00a0<Enygma`>\u00a0and so on  \n17:12\u00a0<Enygma`>\u00a0it might have worked before, but now the assumpions are no longer valid  \n17:13\u00a0<vmassol>\u00a0(possibly with some jiras to not forget it)  \n17:13\u00a0<Enygma`>\u00a0sure, already added a fixme in my code, trivial to change when it's fixed  \n17:13\u00a0<msmeria>\u00a0has quit  \n17:13\u00a0<vmassol>\u00a0ok\u2026.  \n17:13\u00a0<vmassol>\u00a0what I don't like  \n17:13\u00a0<vmassol>\u00a0is that if other parts of the code is using compareto they'll fail too  \n17:14\u00a0<vmassol>\u00a0why not use the seralization technique dir'ectly inside compareTo()?  \n17:14\u00a0<\\_cjd\\_>\u00a0+1  \n17:14\u00a0<vmassol>\u00a0since toString() is there already  \n17:14\u00a0<vmassol>\u00a0it's fast and fixes everything at once  \n17:14\u00a0<vmassol>\u00a0(fast to fix that is)  \n17:15\u00a0<vmassol>\u00a0(may not be the best possible algorithm on earth re speed but we could improve it later on if need be)  \n17:15\u00a0<Enygma`>\u00a0a quick fix would probably be to make DocumentReference and SpaceReference.compareTo use strings  \n17:15\u00a0<Trefex>\u00a0tmortagne: i can't see the timeout value in the page you linked  \n17:15\u00a0<Enygma`>\u00a0but then you also have the case when comparing a DocumentReference to a SpaceReference and this needs to be handled in EntityReference  \n17:16\u00a0<Enygma`>\u00a0not a big deal, but various cases need to be considered  \n17:16\u00a0<Enygma`>\u00a0I just want to finish stuff in my stack for the moment :)  \n17:16\u00a0<tmortagne>\u00a0Trefex: open the XWikiPreferences object  \n17:16\u00a0<tmortagne>\u00a0just click on it  \n17:16\u00a0<tmortagne>\u00a0and then you will see the properties  \n17:17\u00a0<vmassol>\u00a0Enygma`: not sure it means anything to compare a DocumentReference with a SpaceReference  \n17:17\u00a0<Trefex>\u00a0yeah no it updates it correctly it seems  \n17:17\u00a0<Enygma`>\u00a0why not?  \n17:17\u00a0<Enygma`>\u00a0A.B is before A.B.WebHome  \n17:17\u00a0<vmassol>\u00a0what does it mean?  \n17:17\u00a0<vmassol>\u00a0a space ref is NOT a doc ref  \n17:17\u00a0<tmortagne>\u00a0Trefex: what value do you have ?  \n17:18\u00a0<Enygma`>\u00a0yes, but if you have a list of EntityReferences, that might make sense  \n17:18\u00a0<Enygma`>\u00a0not sure, maybe this is a remote case  \n17:18\u00a0<Trefex>\u00a0tmortagne: now it's 80, coz it's down to 80  \n17:18\u00a0<vmassol>\u00a0Enygma`: yes but why wouldn't it work?  \n17:19\u00a0<tmortagne>\u00a0Trefex: and you don't have several wikis ?  \n17:19\u00a0<Enygma`>\u00a0you mean to do it directly in EntityReference by using strings?  \n17:19\u00a0<vmassol>\u00a0yes  \n17:19\u00a0<tmortagne>\u00a0I usually set LDAP properties in xwiki.cfg which apply to the whole farm  \n17:19\u00a0<vmassol>\u00a0\"why not use the seralization technique dir'ectly inside compareTo()?\"  \n17:21\u00a0<Enygma`>\u00a0my only concern is the level where you do it... if it`s only in DocumentReference or in SpaceReference, OK, but in EntityReference you might have issues comparing a generic EntityReference (\"A.B\") with a typed entity reference (\"wiki:A.B\") and so on  \n17:22\u00a0<Trefex>\u00a0tmortagne: i do  \n17:22\u00a0<Trefex>\u00a0several sub wikis  \n17:22\u00a0<Trefex>\u00a0but here authentication failed for main wiki also  \n17:23\u00a0<Trefex>\u00a0brb dc 2 mins  \n17:25\u00a0<vmassol>\u00a0Enygma`: not sure I see the problem\u2026.  \n17:25\u00a0<vmassol>\u00a0you mean for example:  \n17:26\u00a0<Trefex1>\u00a0has joined #xwiki  \n17:26\u00a0<Trefex1>\u00a0tmortagne: back  \n17:28\u00a0<Trefex>\u00a0has quit  \n17:29\u00a0<KermitTheFragger>\u00a0has quit  \n17:29\u00a0<vmassol>\u00a0the only thing that makes sense probably s to compared fully resolved references  \n17:29\u00a0<vmassol>\u00a0\\*is  \n17:30\u00a0<vmassol>\u00a0\\*compare  \n17:31\u00a0<vmassol>\u00a0even with NS the current compare doesn't make much sense I think if you compare \"wiki\" with \"space\"  \n17:32\u00a0<vmassol>\u00a0\\*without  \n17:33\u00a0<vmassol>\u00a0comparison for equality makes sense but less than or greater than I'm not sure  \n17:33\u00a0<vmassol>\u00a0in any case we can decide that we use string comparison  \n17:33\u00a0<vmassol>\u00a0string comparison of the serialized reference that is  \n17:34\u00a0<vmassol>\u00a0and it's up to the calling code to make sure it calls it properly  \n17:34\u00a0<vmassol>\u00a0s/calls/uses  \n17:35\u00a0<vmassol>\u00a0IMO that's the best we can do  \n17:36\u00a0<Enygma`>\u00a0remember that DocumentReference and SpaceReference (the classes) work with absolute references, that`s why I considered them comparable (you have all the info there)  \n17:36\u00a0<vmassol>\u00a0sure  \n17:36\u00a0<vmassol>\u00a0why do you say this?  \n17:37\u00a0<Enygma`>\u00a0because you said \"I don't think it means much to compare \"wiki:A.B\" and \"space1.space2\" \" but you`ve used \"space1.space2\" instead of \"wiki:space1.space2\"  \n17:37\u00a0<vmassol>\u00a0EntityReference can be anthing  \n17:37\u00a0<vmassol>\u00a0\\*anything  \n17:38\u00a0<Enygma`>\u00a0actually, I agree with what you said explicitly :)  \n17:38\u00a0<Enygma`>\u00a0yes  \n17:38\u00a0<Enygma`>\u00a0so string comparison done in EntityReference.compareTo() will cause more issues IMO exactly for this reason, because it can be anything :)  \n17:39\u00a0<vmassol>\u00a0I don't understand  \n17:39\u00a0<vmassol>\u00a0it'll work fine for DocumentReference and the like  \n17:39\u00a0<vmassol>\u00a0and for EntityReference it'll work at least as best as what was there before  \n17:39\u00a0<vmassol>\u00a0s/best/well  \n17:40\u00a0<Enygma`>\u00a0you do have a point that it will not work worse than it is now (with NS)  \n17:40\u00a0<vmassol>\u00a0(even withut NS)  \n17:40\u00a0<vmassol>\u00a0as I said you can have:  \n17:41\u00a0<vmassol>\u00a0new ER(\"wiki\", Entitytype.WIKI) and new ER(\"space\", EntityType.SPACE)  \n17:41\u00a0<vmassol>\u00a0(for example)  \n17:41\u00a0<vmassol>\u00a0that's without NS  \n17:42\u00a0<vmassol>\u00a0comparing ER not having the same structure has no meaning  \n17:42\u00a0<vmassol>\u00a0so we just need to have a rule  \n17:42\u00a0<vmassol>\u00a0here the rule will be that we compare the string serialization  \n17:42\u00a0<Enygma`>\u00a0that`s where the classes DocumentReference and SpaceReference are handy, because they impose the structure  \n17:42\u00a0<vmassol>\u00a0so \"wiki:A.B\" > \"spac1.sp\" because \"w\" > \"s\"  \n17:43\u00a0<vmassol>\u00a0code that relies on comparing ER will just get a sorting order based on the serialized references  \n17:43\u00a0<vmassol>\u00a0if they don't resolve them first, they'll get garbage  \n17:44\u00a0<vmassol>\u00a0but even a human would generate garbage because it doesn't mean anything to compare different structures  \n17:44\u00a0<Enygma`>\u00a0ok, so saying that compareTo() works reliably with resolved references might sound ok  \n17:44\u00a0<Enygma`>\u00a0which is actually pretty much the only case where it \\*can\\* work reliably  \n17:45\u00a0<vmassol>\u00a0yes  \n17:45\u00a0<Enygma`>\u00a0it`s better now because we have a way to make them work with the default (ER) implementation, by resolving the list first  \n17:45\u00a0<vmassol>\u00a0yes  \n17:45\u00a0<Enygma`>\u00a0sounds good to me  \n17:46\u00a0<Enygma`>\u00a0what about reference parameters?  \n17:46\u00a0<Enygma`>\u00a0do they show up in the string serialization?  \n17:47\u00a0<Enygma`>\u00a0asking since the ER compare was considering them at some point, when all else is equal  \n17:47\u00a0<vmassol>\u00a0no they don't show up  \n17:48\u00a0<vmassol>\u00a0I think we can ignore them  \n17:48\u00a0<Enygma`>\u00a0I guess we can compare parameters for equal references now as we did before  \n17:48\u00a0<vmassol>\u00a0yes we can too  \n17:52\u00a0<tmortagne>\u00a0has quit  \n17:53\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:04\u00a0<ClemensR>\u00a0has left #xwiki  \n18:06\u00a0<tmortagne>\u00a0has quit  \n18:07\u00a0<tmortagne>\u00a0has joined #xwiki  \n18:11\u00a0<\\_cjd\\_>\u00a0has quit  \n18:12\u00a0<tmortagne>\u00a0has quit  \n18:44\u00a0<Ramona1>\u00a0has quit  \n18:54\u00a0<\\_cjd\\_>\u00a0has joined #xwiki  \n19:00\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n19:03\u00a0<abusenius\\_>\u00a0has joined #xwiki  \n19:06\u00a0<mflorea>\u00a0has quit  \n19:06\u00a0<Enygma`>\u00a0vmassol: is the mail module supposed to use the configuration of the current wiki instead of the main wiki's?  \n19:08\u00a0<Enygma`>\u00a0for instance in watchlist's realtime notifications, the mail can not be sent correctly if triggered from a subwiki that a main wiki user is watching.  \n19:09\u00a0<vmassol>\u00a0need to check  \n19:09\u00a0<vmassol>\u00a0I don't remember  \n19:10\u00a0<vmassol>\u00a0I think it's the main wiki  \n19:10\u00a0<vmassol>\u00a0because in my mind there's only 1 smtp config  \n19:10\u00a0<vmassol>\u00a0(but it could be interesting to offer several indeed)  \n19:11\u00a0<Enygma`>\u00a0as far as I can see, it`s always the current wiki  \n19:11\u00a0<Enygma`>\u00a0@Inject @Named(\"documents\") private ConfigurationSource documentsSource;  \n19:11\u00a0<Enygma`>\u00a0in DefaultMailSenderConfiguration  \n19:11\u00a0<Enygma`>\u00a0and there is also a mail configuration section in each subwiki AFAIK  \n19:11\u00a0<vmassol>\u00a0indeed the javadoc says:  \n19:12\u00a0<vmassol>\u00a0https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-mail/xwiki-platform-mail-send/xwiki-platform-mail-send-default/src/main/java/org/xwiki/mail/internal/configuration/DefaultMailSenderConfiguration.java#L40  \n19:12\u00a0<Enygma`>\u00a0I wonder if that was the original intent  \n19:12\u00a0<Enygma`>\u00a0that could be useful for farm wikis, but except that, it's actually a problem  \n19:14\u00a0<Enygma`>\u00a0created XWIKI-12434  \n19:15\u00a0<vmassol>\u00a0indeed, we should probably find a way to default to the main wiki config if not overridden at the subwiki level  \n19:16\u00a0<vmassol>\u00a0right now each subwiki needs to configurre the mail  \n19:16\u00a0<vmassol>\u00a0(smtp mail settings that is)  \n19:16\u00a0<vmassol>\u00a0except if you use the xwiki.properties file  \n19:17\u00a0<vmassol>\u00a0creating a jira issue  \n19:17\u00a0<vmassol>\u00a0hmm  \n19:21\u00a0<vmassol>\u00a0indeed creating isseu  \n19:25\u00a0<vmassol>\u00a0Enygma`: created http://jira.xwiki.org/browse/XWIKI-12435  \n19:27\u00a0<vmassol>\u00a0Enygma`: should 12434 be closed as a dup of 12435?  \n19:28\u00a0<vmassol>\u00a0(I think so)  \n19:28\u00a0<Enygma`>\u00a0think so  \n19:28\u00a0<vmassol>\u00a0you do it?  \n19:28\u00a0<Enygma`>\u00a0just note that It still problematic if you override the mail config and end up using the subwikis mail config for sending the mail  \n19:29\u00a0<vmassol>\u00a0why?  \n19:29\u00a0<Enygma`>\u00a0(yes, I`ll close it)  \n19:29\u00a0<vmassol>\u00a0if you send mail from a subwiki why shouldn't it try to use that subwiki's mail config?  \n19:29\u00a0<Enygma`>\u00a0take the watchlist`s example  \n19:30\u00a0<vmassol>\u00a0now the watch list only runs on the main wiki no?  \n19:30\u00a0<Enygma`>\u00a0you don`t really send mail from that subwiki, just that the document that is modified is on that subwiki  \n19:30\u00a0<vmassol>\u00a0if send() is called from the main wiki then the config will be retrieved from the main wiki  \n19:31\u00a0<vmassol>\u00a0(the wiki used is the one where send() is called when using the scirpt service)  \n19:31\u00a0<Enygma`>\u00a0but it`s not like that at all  \n19:31\u00a0<Enygma`>\u00a0there's a listener registered on the main wiki  \n19:32\u00a0<Enygma`>\u00a0if a document changes on a subwiki, that listener is notified  \n19:32\u00a0<Enygma`>\u00a0if a user (maybe global) is watching that document, then a mail is sent to that user  \n19:32\u00a0<vmassol>\u00a0ah you're talking about the realtime one  \n19:32\u00a0<Enygma`>\u00a0exactly  \n19:32\u00a0<vmassol>\u00a0still that listener is on the main wiki  \n19:33\u00a0<Enygma`>\u00a0so the listener is not sending \\*from the subwiki\\*... just that the event is triggered on the subwiki and it ends up triggering the listener  \n19:33\u00a0<vmassol>\u00a0it could set the main wiki  \n19:33\u00a0<vmassol>\u00a0before calling send()  \n19:33\u00a0<vmassol>\u00a0(could and probaby should)  \n19:33\u00a0<Enygma`>\u00a0I suppose that might work  \n19:33\u00a0<Enygma`>\u00a0so maybe I won`t close the issue as duplicate :)  \n19:33\u00a0<vmassol>\u00a0:)  \n19:34\u00a0<vmassol>\u00a0the alternative is to support only one config, on the main wiki  \n19:34\u00a0<vmassol>\u00a0but I find it nicer to support overridden configs per wiki  \n19:35\u00a0<vmassol>\u00a0for the farm use case for example  \n19:35\u00a0<vmassol>\u00a0might come handy  \n19:35\u00a0<Enygma`>\u00a0we could do that by having different script services  \n19:35\u00a0<Enygma`>\u00a0like $services.mail using the main config  \n19:35\u00a0<Enygma`>\u00a0and $services.mail.subwikiX using the config of subwikiX  \n19:35\u00a0<Enygma`>\u00a0or something like that  \n19:35\u00a0<vmassol>\u00a0not nice  \n19:35\u00a0<vmassol>\u00a0IMO  \n19:36\u00a0<Enygma`>\u00a0yeah  \n19:36\u00a0<vmassol>\u00a0if you really want that then you need to add one param to send() for the wiki name  \n19:36\u00a0<vmassol>\u00a0but I think I prefer setting tte current wiki in the onctext  \n19:36\u00a0<vmassol>\u00a0makes more sense to me  \n19:37\u00a0<vmassol>\u00a0(and provides a nicer api)  \n19:37\u00a0<Enygma`>\u00a0oh, but you need PR for that  \n19:38\u00a0<vmassol>\u00a0you want to set the wiki in script?  \n19:38\u00a0<Enygma`>\u00a0which if you`re doing it from velocity in a subwiki, you have problems  \n19:38\u00a0<vmassol>\u00a0that's a very complex use case  \n19:38\u00a0<vmassol>\u00a0when you're in a subwiki you send from that subwiki  \n19:38\u00a0<Enygma`>\u00a0but actually, if you`re in a subwiki, you should use the current wiki`s config  \n19:38\u00a0<Enygma`>\u00a0so no need t  \n19:38\u00a0<Enygma`>\u00a0right  \n19:39\u00a0<vmassol>\u00a0yes  \n20:05\u00a0<martin-h>\u00a0has quit  \n20:05\u00a0<martin-h>\u00a0has joined #xwiki  \n20:07\u00a0<Enygma`>\u00a0has quit  \n20:41\u00a0<Ramona1>\u00a0has joined #xwiki  \n20:49\u00a0<Trefex1>\u00a0has quit  \n21:05\u00a0<lynxt>\u00a0has quit  \n21:06\u00a0<tillo>\u00a0has quit  \n21:07\u00a0<lynxt>\u00a0has joined #xwiki  \n21:09\u00a0<tillo>\u00a0has joined #xwiki  \n21:27\u00a0<Ramona1>\u00a0has quit  \n21:39\u00a0<gdelhumeau>\u00a0has quit  \n22:29\u00a0<vmassol>\u00a0has quit  \n22:47\u00a0<Chuguniy>\u00a0has quit\n"}