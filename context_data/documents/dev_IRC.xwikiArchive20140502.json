{"id": "dev:IRC.xwikiArchive20140502", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20140502", "title": "IRC Archive for channel #xwiki on 02 May 2014 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<abusenius>\u00a0has quit  \n01:44\u00a0<abusenius>\u00a0has joined #xwiki  \n01:59\u00a0<abusenius>\u00a0has quit  \n02:42\u00a0<Denis>\u00a0has quit  \n04:30\u00a0<Denis>\u00a0has joined #xwiki  \n05:03\u00a0<Denis>\u00a0has quit  \n05:03\u00a0<Denis1>\u00a0has joined #xwiki  \n06:02\u00a0<Denis1>\u00a0has quit  \n06:42\u00a0<OSIMasson>\u00a0has quit  \n08:36\u00a0<vmassol>\u00a0has joined #xwiki  \n08:41\u00a0<Denis>\u00a0has joined #xwiki  \n08:49\u00a0<cjd>\u00a0has joined #xwiki  \n09:14\u00a0<Denis1>\u00a0has joined #xwiki  \n09:18\u00a0<Denis>\u00a0has quit  \n10:12\u00a0<ClemensR>\u00a0has joined #xwiki  \n10:18\u00a0<xwikibot>\u00a0has quit  \n10:21\u00a0<xwikibot>\u00a0has joined #xwiki  \n10:35\u00a0<sdumitriu1>\u00a0has quit  \n10:46\u00a0<sdumitriu1>\u00a0has joined #xwiki  \n10:47\u00a0<Denis>\u00a0has joined #xwiki  \n10:47\u00a0<Denis1>\u00a0has quit  \n10:50\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n11:02\u00a0<lucaa>\u00a0has joined #xwiki  \n11:30\u00a0<lucaa>\u00a0has quit  \n11:31\u00a0<lucaa>\u00a0has joined #xwiki  \n11:36\u00a0<Denis1>\u00a0has joined #xwiki  \n11:39\u00a0<Denis>\u00a0has quit  \n11:42\u00a0<vmassol>\u00a0ClemensR: creating an account for you on nexus.xwiki.org  \n11:42\u00a0<ClemensR>\u00a0ah, yes, I forgot to send the mail asking about that ...  \n11:45\u00a0<vmassol>\u00a0np  \n13:36\u00a0<abusenius>\u00a0has joined #xwiki  \n13:42\u00a0<lucaa>\u00a0has quit  \n13:53\u00a0<vmassol>\u00a0ClemensR: the groupid of mocca is slightly strange IMO: pId>org.xw  \n13:53\u00a0<vmassol>\u00a0oops  \n13:53\u00a0<vmassol>\u00a0<groupId>org.xwiki.contrib.calendars</groupId>  \n13:54\u00a0<ClemensR>\u00a0yes, the pom.xml is not set up ... very carefully  \n13:54\u00a0<vmassol>\u00a0ideally it should just be \"org.xwiki.contrib\"  \n13:54\u00a0<vmassol>\u00a0note that if you change it  \n13:54\u00a0<vmassol>\u00a0you must also add an alias in the pom  \n13:54\u00a0<vmassol>\u00a0as otherwise uses won't be able to upgrade with EM  \n13:55\u00a0<ClemensR>\u00a0ah, ok, I guess we just thought of subgrougin this with the other calendars ... I guess I misunderstood the docs, which is somethign I am good at  \n13:55\u00a0<vmassol>\u00a0well I don't remember any discussion about deciding that all calendars should be in a org.xwiki.contrib.calendars id  \n13:55\u00a0<vmassol>\u00a0that's a very important decision( like an api almost)  \n13:56\u00a0<vmassol>\u00a0IMO it's better to jsut use the rule we've set up so far  \n13:56\u00a0<vmassol>\u00a0on http://contrib.xwiki.org/xwiki/bin/view/Main/WebHome  \n13:56\u00a0<ClemensR>\u00a0yes, it is just there becaue I misunderstood somethng  \n13:56\u00a0<vmassol>\u00a0ctually  \n13:56\u00a0<vmassol>\u00a0let me fix this page  \n13:56\u00a0<vmassol>\u00a0it's not precise enough  \n13:57\u00a0<ClemensR>\u00a0and I have botched up my release attempt anyway ... so \u00a0messing with the pom already  \n13:58\u00a0<vmassol>\u00a0done  \n13:58\u00a0<vmassol>\u00a0<name>XWiki Mocca Calendar Application</name> isn't correct either  \n13:58\u00a0<vmassol>\u00a0should be <name>Mocca Calendar Application</name>  \n13:58\u00a0<vmassol>\u00a0url isn't required AFAIK  \n13:58\u00a0<vmassol>\u00a0since it's inherited from the top level  \n13:59\u00a0<vmassol>\u00a0ah wait  \n13:59\u00a0<vmassol>\u00a0actually this is missing  \n13:59\u00a0<vmassol>\u00a0it should inherit from the top level pom normally  \n13:59\u00a0<vmassol>\u00a0see an example here: http://contrib.xwiki.org/xwiki/bin/view/Main/WebHome#HImplementingyourMavenbuild  \n14:01\u00a0<ClemensR>\u00a0ah, and this does not create a dependency of a certain version of xwiki-commons (i.e. 4.5 in that case ?)  \n14:03\u00a0<vmassol>\u00a0which brings another problem  \n14:03\u00a0<vmassol>\u00a0you're missing all deps :)  \n14:03\u00a0<vmassol>\u00a0<dependencies>  \n14:03\u00a0<vmassol>\u00a0I'm pretty sure mocca uses some macros for example  \n14:04\u00a0<vmassol>\u00a0right now if you write a functional test for it using our maven packager plugin for example  \n14:04\u00a0<vmassol>\u00a0you'll see mocca won't work  \n14:04\u00a0<vmassol>\u00a0because of all missing deps  \n14:04\u00a0<ClemensR>\u00a0yes, it worked anyway ... for the firast attempt. I have to \u00a0admit I have not really an idea what it depends on ...  \n14:04\u00a0<vmassol>\u00a0it works only under some condition  \n14:04\u00a0<vmassol>\u00a0ie if you have all that it needs already installed  \n14:04\u00a0<vmassol>\u00a0but if you don't and install mocca it won't work  \n14:05\u00a0<vmassol>\u00a0xwiki can be customized a lot  \n14:05\u00a0<vmassol>\u00a0and also users don't have to use XE by default  \n14:05\u00a0<ClemensR>\u00a0yes, trouble is I never set up a single finctional test (except moving that existing watchlist thing from enterprise to platform ... took me two days ...)  \n14:05\u00a0<vmassol>\u00a0it's very simple  \n14:05\u00a0<vmassol>\u00a0very very  \n14:05\u00a0<vmassol>\u00a0:)  \n14:05\u00a0<vmassol>\u00a0since we already have a lot  \n14:05\u00a0<vmassol>\u00a0so all that is required is just to copy an existing one  \n14:06\u00a0<vmassol>\u00a0that's for the test fwk  \n14:06\u00a0<vmassol>\u00a0then for the test itself, that depends on the test you wish to write  \n14:06\u00a0<vmassol>\u00a0a simple test just to load home page and verify a few asserts is already interesting  \n14:06\u00a0<vmassol>\u00a0as it shows the app loads fine  \n14:06\u00a0<vmassol>\u00a0btw  \n14:07\u00a0<vmassol>\u00a0as I mentioned above  \n14:07\u00a0<vmassol>\u00a0that's how I discover what my app depends on  \n14:07\u00a0<vmassol>\u00a0:)  \n14:07\u00a0<vmassol>\u00a0since the packager plugin will load only your extension in a bare wiki  \n14:07\u00a0<vmassol>\u00a0(that is your extensions and all its defined deps)  \n14:08\u00a0<vmassol>\u00a0I can help you if need be  \n14:08\u00a0<vmassol>\u00a0back to your question,  \n14:08\u00a0<vmassol>\u00a0depending on a version of the top level pom is not a bad thing  \n14:08\u00a0<vmassol>\u00a0quite teh opposite  \n14:08\u00a0<vmassol>\u00a0it can show the minimal version you require from xwiki  \n14:09\u00a0<vmassol>\u00a0the important part is that it saves you to have to redefine everything in your pom  \n14:10\u00a0<vmassol>\u00a0so to sum up:  \n14:10\u00a0<vmassol>\u00a01) \u00a0the most important right now is to fix the pom so that you can do a \"clean \"release  \n14:11\u00a0<vmassol>\u00a02) then you could add missing deps (this could be part of 1) too by looking at which macros you're using for example)  \n14:11\u00a0<vmassol>\u00a03) then adding functional tests is optional for contrib projects but a good thing to have, even with a very simple test that just loads the home page of the app)  \n14:12\u00a0<vmassol>\u00a0for 1) I've tried to comment on what's required, hope I didn't miss anything  \n14:12\u00a0<vmassol>\u00a0for 3) you'll have to let me know if you're interested and if you need my help :)  \n14:14\u00a0<vmassol>\u00a0btw here's an example of how you create an EM alias in your pom:  \n14:14\u00a0<vmassol>\u00a0\u00a0\u00a0\u00a0\u00a0<xwiki.extension.features>org.xwiki.platform:xwiki-platform-classloader-api</xwiki.extension.features>  \n14:14\u00a0<ClemensR>\u00a0(sorry, here interrupted by colleague ... trying to catch up ... ... ok, version is only minimal requirement ... )  \n14:15\u00a0<vmassol>\u00a0in your case: <xwiki.extension.features>org.xwiki.contrib.calendars:application-mocca-calendar</xwiki.extension.features>  \n14:15\u00a0<ClemensR>\u00a0alias, ok, thanks  \n14:15\u00a0<vmassol>\u00a0(the alias is if you wisht to change the groupid)  \n15:40\u00a0<cjd\\_>\u00a0has joined #xwiki  \n15:41\u00a0<cjd>\u00a0has quit  \n15:44\u00a0<cjd\\_>\u00a0is now known as <cjd>  \n15:49\u00a0<xwikibot>\u00a0has joined #xwiki  \n15:51\u00a0<polx>\u00a0has joined #xwiki  \n16:10\u00a0<OSIMasson>\u00a0has joined #xwiki  \n16:11\u00a0<ClemensR>\u00a0vmassol: I guess I could use a bit of help with the publish on nexus.xwiki.org  \n16:11\u00a0<ClemensR>\u00a0maven has uploaded some release files, but they seem not to show up in the public repository. maybe I should just wait a bit ?  \n16:12\u00a0<OSIMasson>\u00a0has quit  \n16:19\u00a0<polx>\u00a0has quit  \n16:46\u00a0<vmassol>\u00a0ClemensR: let me check what's on nexus  \n16:46\u00a0<ClemensR>\u00a0thanks!  \n16:47\u00a0<vmassol>\u00a0ClemensR: you have version 2.1.8 in stagring  \n16:47\u00a0<vmassol>\u00a0did you check it out? if it's ok then it needs to be promoted  \n16:47\u00a0<ClemensR>\u00a0yes, had to, as I messed up two releases  \n16:47\u00a0<ClemensR>\u00a0it should be 2.1.8 now ....  \n16:47\u00a0<vmassol>\u00a0maybe you don't have the permissions to promote  \n16:48\u00a0<vmassol>\u00a0do you see the \"close\" action for the staging repo?  \n16:48\u00a0<vmassol>\u00a0http://nexus.xwiki.org/nexus/index.html#stagingRepositories  \n16:48\u00a0<ClemensR>\u00a0possibley, UI says somethign about \"access denied\" .. testing ,,,  \n16:48\u00a0<Denis1>\u00a0has quit  \n16:48\u00a0<ClemensR>\u00a0no, I cannot see, but get: \"Nexus returned an error: ERROR 403: Forbidden\"  \n16:49\u00a0<vmassol>\u00a0I've added you as admin  \n16:49\u00a0<vmassol>\u00a0be carfeful since you've got all powers now :)  \n16:49\u00a0<vmassol>\u00a0so you need to 1/ close the staging repo  \n16:49\u00a0<vmassol>\u00a0and  \n16:50\u00a0<vmassol>\u00a02/ release it  \n16:50\u00a0<vmassol>\u00a0normally the workflow is:  \n16:50\u00a0<vmassol>\u00a0A) deploy to staging  \n16:50\u00a0<vmassol>\u00a02) close staging  \n16:50\u00a0<vmassol>\u00a03) ask users or someone to verify it works by pointing their maven instance to it (or EM)  \n16:50\u00a0<vmassol>\u00a04) release the staging repo as final  \n16:51\u00a0<vmassol>\u00a0usually we do 3) very quickly  \n16:51\u00a0<vmassol>\u00a0just note that once it's releases (step 4) it cannot be undone  \n16:51\u00a0<vmassol>\u00a0\\*released  \n16:53\u00a0<ClemensR>\u00a0ah, ok so maybe I should have done the testing first ....  \n16:54\u00a0<vmassol>\u00a0should be ok\u2026 you can always release a new version if you mess up ;) your choice  \n16:54\u00a0<ClemensR>\u00a0oh, my, now it is already in the public repo  \n16:55\u00a0<ClemensR>\u00a0yes, would not be the first one today anyway ;)  \n16:55\u00a0<vmassol>\u00a0it shouldbn't be in the public repo  \n16:55\u00a0<vmassol>\u00a0if you haven't promoted it  \n16:56\u00a0<ClemensR>\u00a0I think I just closed it (i.e. step 2) \u00a0... but the files are already in public ...  \n16:57\u00a0<vmassol>\u00a0that's should't be possible normally  \n16:57\u00a0<vmassol>\u00a0you need to release too to psuh to public  \n16:57\u00a0<vmassol>\u00a0http://maven.xwiki.org/releases/org/xwiki/contrib/ doiesn't have it  \n16:57\u00a0<vmassol>\u00a0why do you say it's public?  \n16:57\u00a0<vmassol>\u00a0well closing makes it public  \n16:57\u00a0<vmassol>\u00a0but doesn't push it in the xwiki maven repo  \n16:58\u00a0<ClemensR>\u00a0maybe it is because it is contrib, and this a diffeent profile ?  \n16:58\u00a0<vmassol>\u00a0sorry what's the issue?  \n16:59\u00a0<vmassol>\u00a0argh wait  \n16:59\u00a0<vmassol>\u00a0you forgot to change the id!!!  \n16:59\u00a0<vmassol>\u00a0:)  \n16:59\u00a0<vmassol>\u00a0so best is to delete the new page you created  \n16:59\u00a0<ClemensR>\u00a0if it is in the xwiki-contrib profile, it seems to get published instantly - only for main xwiki it has staging  \n16:59\u00a0<vmassol>\u00a0ClemensR: wait  \n17:00\u00a0<ClemensR>\u00a0ah, I think I did ... but ... well, thats just me ...  \n17:00\u00a0<vmassol>\u00a0again  \n17:00\u00a0<vmassol>\u00a01) you need to close the repo (you did that)  \n17:00\u00a0<vmassol>\u00a02) you need to \"Release\" the repo  \n17:00\u00a0<vmassol>\u00a0you haven't done ste p2  \n17:00\u00a0<vmassol>\u00a0so it's NOT in the maven repo ATM  \n17:00\u00a0<vmassol>\u00a0(the main xwiki maven repo that is)  \n17:00\u00a0<ClemensR>\u00a0ah, I thought it is enough to have it in \u00a0http://nexus.xwiki.org/nexus/content/groups/public/org/xwiki/contrib/application-mocca-calendar/2.1.8/  \n17:01\u00a0<vmassol>\u00a0this is nexus  \n17:01\u00a0<vmassol>\u00a0not our maven repo  \n17:01\u00a0<vmassol>\u00a0maven.xwiki.org  \n17:01\u00a0<ClemensR>\u00a0ah, ok, finally I got it  \n17:02\u00a0<ClemensR>\u00a0just stared as the path and ignored the hostname ...  \n17:02\u00a0<vmassol>\u00a0then you need to remove the newly created page and edit the existing extension page  \n17:02\u00a0<vmassol>\u00a0to change the id  \n17:02\u00a0<vmassol>\u00a0then import  \n17:02\u00a0<vmassol>\u00a0(this is because the id was changed)  \n17:03\u00a0<vmassol>\u00a0wait  \n17:03\u00a0<vmassol>\u00a0it overwrote the page?  \n17:03\u00a0<vmassol>\u00a0checking  \n17:04\u00a0<vmassol>\u00a0(xwiki.org is extra slow atm)  \n17:09\u00a0<xwikibot>\u00a0has joined #xwiki  \n17:12\u00a0<vmassol>\u00a0now you can do the import again and it should update the right page :)  \n17:12\u00a0<vmassol>\u00a0what I don't understand is why you went from 2.1.5 to 2.1.8 but that's another matter :)  \n17:13\u00a0<vmassol>\u00a0you can undo releases you know  \n17:13\u00a0<vmassol>\u00a0the only thing you cannot undo is once a release is pushed in the maven repo  \n17:13\u00a0<vmassol>\u00a0that's why we have staging!!!  \n17:13\u00a0<vmassol>\u00a0to be able to undo a release and redo it if something goes wrong  \n17:15\u00a0<ClemensR>\u00a0did not know about the undo ... especially because it seems the puligin already pushed stuff to github  \n17:15\u00a0<vmassol>\u00a0yes but it's easy to remove a tag in git  \n17:15\u00a0<ClemensR>\u00a0well, at least the local install test from staging worked  \n17:15\u00a0<vmassol>\u00a0you should also check release:rollback  \n17:16\u00a0<vmassol>\u00a0http://maven.apache.org/maven-release/maven-release-plugin/examples/rollback-release.html  \n17:16\u00a0<ClemensR>\u00a0ah, you mean I should have read the documentation ?  \n17:16\u00a0<vmassol>\u00a0hehe  \n17:16\u00a0<vmassol>\u00a0:)  \n17:16\u00a0<vmassol>\u00a0the important part is \"The created branch/tag in SCM for the release is removed.\"  \n17:16\u00a0<vmassol>\u00a0oops  \n17:16\u00a0<vmassol>\u00a0wrong paste  \n17:16\u00a0<ClemensR>\u00a0nobody ever has the time got that, better mess around for hours ;)  \n17:16\u00a0<vmassol>\u00a0\"The created branch/tag in SCM for the release is removed. Note: This is not yet implemented so you will need to manually remove the branch/tag from your SCM.\"  \n17:16\u00a0<vmassol>\u00a0so you just need to do release:rollback and manually remove the tag in git  \n17:17\u00a0<vmassol>\u00a0see http://nathanhoad.net/how-to-delete-a-remote-git-tag for how to do it  \n17:17\u00a0<ClemensR>\u00a0ah, ok, anyway ... I just did not like to delete things that are already in github ... actually I was not sure if it really work, as I never tried  \n17:17\u00a0<vmassol>\u00a0we do that all the time  \n17:18\u00a0<vmassol>\u00a0(for tags)  \n17:18\u00a0<vmassol>\u00a0now after you import you better explain in the release notes why there are holes or people will wonder ;)  \n17:18\u00a0<ClemensR>\u00a0ok, anyway, now trying to find the button for step 4) \u00a0\"release stating as final\" ..  \n17:18\u00a0<vmassol>\u00a0just next to the close one  \n17:19\u00a0<ClemensR>\u00a0yes, its not the first time I bothed up releases, so I know I should explain  \n17:19\u00a0<ClemensR>\u00a0well, button is greyed out, I only have \"refresh\" and \"drop\" active  \n17:20\u00a0<vmassol>\u00a0you selected the repo?  \n17:20\u00a0<vmassol>\u00a0it's avail for me  \n17:20\u00a0<vmassol>\u00a0we have the same perms so you should see it too normally  \n17:21\u00a0<ClemensR>\u00a0mayeb I try to \u00a0relogin  \n17:21\u00a0<ClemensR>\u00a0or it is my browser (again)  \n17:21\u00a0<vmassol>\u00a0you should see what's on the first image of http://books.sonatype.com/nexus-book/reference/staging-sect-managing-staging.html  \n17:22\u00a0<ClemensR>\u00a0now I do !  \n17:22\u00a0<ClemensR>\u00a0logout/login helped ... should have thought of trying that first ...  \n17:25\u00a0<sburjan>\u00a0has joined #xwiki  \n17:38\u00a0<ClemensR>\u00a0ok, it seems all other older releases are now history :)  \n17:39\u00a0<ClemensR>\u00a0I have to admit I think about fixing that tomorrow, not today ...  \n17:48\u00a0<vmassol>\u00a0you cannot fix this :)  \n17:48\u00a0<vmassol>\u00a0now that it's synced with maven if the version is not in maven it doesn't exist and will be removed at the next sync  \n17:48\u00a0<vmassol>\u00a0the only solution if you wish to keep the old versions is to publish them in maven  \n17:50\u00a0<ClemensR>\u00a0yes, I thought so about the \"back-publish\" ... \u00a0well, lets call it a fresh start now, I do not hope too many people miss the old version anyway  \n17:53\u00a0<ClemensR>\u00a0when uninstalling extensions, the deleted wiki pages show up in the activity stream, btw ... I guess that is just not implemented  \n17:58\u00a0<vmassol>\u00a0if the page is hidden and it appears in the AS for users that do not want to show hidden pages then I guess it's a bug  \n17:59\u00a0<ClemensR>\u00a0ah, thats why, I had the \"hidden pages visible\" flag on ...  \n18:16\u00a0<KermitTheFragger>\u00a0has quit  \n18:16\u00a0<cjd>\u00a0has quit  \n18:52\u00a0<ClemensR>\u00a0has quit  \n19:06\u00a0<sdumitriu>\u00a0has quit  \n19:58\u00a0<sdumitriu>\u00a0has joined #xwiki  \n22:26\u00a0<OSIMasson>\u00a0has joined #xwiki  \n22:44\u00a0<OSIMasson>\u00a0has quit\n"}