{"id": "dev:IRC.xwikiArchive20100628", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20100628", "title": "IRC Archive for channel #xwiki - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\nsdumitriu left at 00:55 (Ping timeout: 265 seconds  \nabusenius left at 00:58 (Ping timeout: 264 seconds  \nvmassol joined #xwiki at 07:02  \nnpm left at 08:05 (Read error: Operation timed out  \ntmortagne joined #xwiki at 08:16  \ntemporalfox joined #xwiki at 08:26  \ntemporalfox - (08:26): hi all, I have a question about macro support for Confluence syntax  \ntemporalfox - (08:26): there is one very annoying thing  \ntemporalfox - (08:27): the semantic of start/end macro syntax  \ntemporalfox - (08:27): xwiki 2.0 open/closed macro is recognized as an opaque markup block  \ntemporalfox - (08:27): where as confluence generate two macro callbacks and the content is interpreted  \ntemporalfox - (08:28): anyone has a tip about how best handle that situation and have one way to handle things instead of two ?  \ntmortagne - (08:30): tmortagne: looks like a bug in wikimodel Confluence parser, you should create an issue on http://code.google.com/p/wikimodel/issues/list  \ntmortagne - (08:33): now i find this bug very weird since i'm pretty sure the parser as been tested on that  \ntmortagne - (08:34): if i understand well you say that  \ntmortagne - (08:34): {code}some code{code}  \ntmortagne - (08:34): produce an empty code macro then \"some code\" is interpret\u00e9 as it was wiki content and then you get another empty code macro ?  \ntmortagne - (08:34): s/interpret\u00e9/interpreted/  \nflorinciu joined #xwiki at 08:35  \nSvenDowideit left at 08:38 (\\*.net \\*.split  \nDragosRusu left at 08:38 (\\*.net \\*.split  \nkibahop joined #xwiki at 08:48  \nplunden joined #xwiki at 08:48  \ntemporalfox - (08:55): the thing is that  \ntemporalfox - (08:55): there should be macro meta data  \ntemporalfox - (08:55): that say if a macro needs to be closed or not  \ntemporalfox - (08:55): and I don't think it's the case  \ntemporalfox - (08:55): like you say {code} should be closed  \ntemporalfox - (08:55): but {foo} should not be  \ntemporalfox - (08:55): so I don't think it's a bug  \ntemporalfox - (08:55): or I don't see how you could handle it at the wiki parser level without such meta data per macro  \ntemporalfox - (08:56): it's ambiguous by nature  \ntemporalfox - (08:56): but that makes a big difference at the wiki structure level  \ntemporalfox - (08:56): and yes that's what I meant :-)  \nvmassol - (08:58): temporalfox: confluence doesn't close macros and the confluence parser knows (or should know) about this  \nSvenDowideit joined #xwiki at 08:58  \nDragosRusu joined #xwiki at 08:58  \ntemporalfox - (08:58): unless you say to the parser which macro should be closed and which should not be (schema) there is nothing much to do about it  \nvmassol - (08:59): I don't understand  \ntemporalfox - (08:59): for instance  \ntemporalfox - (08:59): {profile:  \ntemporalfox - (08:59): user=username}  \ntemporalfox - (08:59): is never closed  \ntemporalfox - (08:59): and the parser would fail kind off, looking for {/profile}  \ntemporalfox - (08:59): (I'm exagerating the syntax here)  \nvmassol - (08:59): this is a radeox syntax and AFAIK it's closed  \nvmassol - (08:59): (since all radeox macros are closed)  \ntemporalfox - (09:00): I don't see unit test in WEM project for confluence  \ntemporalfox - (09:00): so hard for me to figure out clearly  \ntemporalfox - (09:00): what is the truth and what is not  \ntmortagne - (09:00): temporalfox: ok i see what you mean but as far as i can see in the unit tests there is some macros that properly supports content  \nvmassol - (09:00): you could check the confluence parser  \ntmortagne - (09:00): for example {code} macro seems to be handled the right way  \ntemporalfox - (09:00): the confluence parser for me is too complex to understand unless I spend a fair amount of time on it  \ntemporalfox - (09:01): maybe something is hardcoded in parser  \nvmassol - (09:01): checking it  \nvmassol - (09:01): (it's actually quite simple)  \ntemporalfox - (09:01): that say that {code} needs a close  \ntmortagne - (09:01): temporalfox: https://wikimodel.googlecode.com/svn/trunk/org.wikimodel.wem/src/test/java/org/wikimodel/wem/test/ConfluenceWikiParserTest.java  \ntemporalfox - (09:01): any language is quite simple when you speak it :-)  \ntemporalfox - (09:01): ok thanks for the unit test  \ntmortagne - (09:01): i can see  \ntmortagne - (09:01): test(\"{code}xxx{code}\", \"<pre type='code'>xxx</pre>\");  \nvmassol - (09:01): I mean it's hard in general but the part that described hthis should be easy  \ntemporalfox - (09:01): I have trunk on my machine but could not find it  \ntmortagne - (09:01): which seems to indicate code macro is handled the right way  \nvmassol - (09:02): this is what it says:  \nvmassol - (09:02): \u00a0| <#MACRO\\_PARAMS: ( <ESCAPED> | ~[\"}\"] \u00a0)\\* >  \nvmassol - (09:02): \u00a0\u00a0\u00a0\u00a0| <#QUOT\\_BLOCK\\_MACRO: \"{quote\" <MACRO\\_PARAMS> \"}\" >  \nvmassol - (09:02): \u00a0\u00a0\u00a0\u00a0// ------------------------------------------------------------------------  \nvmassol - (09:02): \u00a0\u00a0\u00a0\u00a0| <#MACRO: \"{\" <CHAR> <MACRO\\_PARAMS> \"}\" >  \nvmassol - (09:02): \u00a0\u00a0\u00a0\u00a0| <#MACRO\\_CONTENT: ( <ESCAPED> | <CHAR> | <SPACE> |<NEW\\_LINE> | <SPECIAL\\_SYMBOL> ) >  \ntemporalfox - (09:02): what does it mean ?  \ntemporalfox - (09:02): :-)  \ntemporalfox - (09:02): that's for quote only right ?  \nvmassol - (09:02): oh  \nvmassol - (09:02): wait  \nvmassol - (09:02): it even knows about empty macros  \nvmassol - (09:02): check lines starting at 136  \nvmassol - (09:02): http://code.google.com/p/wikimodel/source/browse/trunk/org.wikimodel.wem/src/main/java/org/wikimodel/wem/confluence/javacc/ConfluenceWikiScanner.jj  \ntemporalfox - (09:03): so maybe I'm using a buggy version ?  \nvmassol - (09:03): it has a list of well known macros apparently  \ntmortagne - (09:03): yep  \ntmortagne - (09:04): wikimodel listed what is supposed to be empty and what is not  \ntemporalfox - (09:04): and for some macro  \ntemporalfox - (09:04): in wikbook I would need to define such meta data  \ntmortagne - (09:04): so it's possible it doe snot know some macros  \ntmortagne - (09:04): and looks like the default is empty  \ntmortagne - (09:04): according to the tests  \nvmassol - (09:04): I didn't know confluence syntax had several syntaxes for macros  \nvmassol - (09:04): what a pain  \ntemporalfox - (09:04): the {code} macro was not correctly parsed for me  \ntmortagne - (09:05): temporalfox: what version of xwiki ae you using ?  \ntemporalfox - (09:05): 2.2.3  \ntmortagne - (09:05): you shoud have the one you see in the test if you use XWiki 2.3.x  \ntmortagne - (09:05): maybe 2.2.3 use a version of wiki model that has a bug on that  \nvmassol - (09:05): hmm maybe 2.2.x is still the doxia conflience parser tmortagne?  \ntemporalfox - (09:05): I don't know the release rate you are having you guys :-)  \ntemporalfox - (09:05): I can change the version  \ntmortagne - (09:06): we (xwiki team) don't work that much on confluence wikimodel parser so i don't really know  \nmflorea joined #xwiki at 09:06  \ntemporalfox - (09:06): I can try first to change the wiki version  \ntmortagne - (09:06): temporalfox: anyway 2.2.3 is a bad version  \ntemporalfox - (09:06): lol  \ntmortagne - (09:06): there is some important bugs in it  \ntemporalfox - (09:06): I've been quite happy about it  \ntemporalfox - (09:06): let me run wikbook testsuite on a better version  \ntmortagne - (09:06): ok it's not very visible bugs bug could be important in multiwiki  \ntemporalfox - (09:06): which one should I use ?  \ntmortagne - (09:07): 2.3.1  \ntemporalfox - (09:07): ok I'm gonna try that  \ntemporalfox - (09:07): and see how macro are supported  \ntmortagne - (09:07): vmassol: no idea  \ntemporalfox - (09:07): I have wikbook macro like {{xml}} or {{java}} as short hand for {{code language=\"java\"}}  \nvmassol - (09:08): tmortagne: hmm there's a \u00a0\\* @since 1.8.2 in the code but it might be wrong. checking  \ntemporalfox - (09:08): so what is bad is the hardcode of some macro in confluence parser  \ntemporalfox - (09:08): to say if it should be closed or not  \ntmortagne - (09:08): vmassol: wikimdoel confluence parser did not existed in 1.8.2 for sure  \nvmassol - (09:08): temporalfox: what is bad is that confluence decides this on a per macro basis  \ntemporalfox - (09:08): 1.8.2 is the release of ?  \ntmortagne - (09:09): temporalfox: yep but the only solution would be for wikimodel to expose some api for one to define unknown macros  \ntemporalfox - (09:09): yes to give macro schema / meta data  \ntemporalfox - (09:09): I don't see this happening quite fast :-)  \ntmortagne - (09:09): like conflucen do i guess  \ntmortagne - (09:09): temporalfox: if you provide a patch i can apply it ;)  \nvmassol - (09:09): tmortagne: it's correct actually: http://jira.xwiki.org/jira/browse/XWIKI-3045  \ntemporalfox - (09:10): really ?  \ntmortagne - (09:10): i'm wikimodel committer  \ntemporalfox - (09:10): I'm gonna have a student soon  \ntemporalfox - (09:10): as intern  \ntmortagne - (09:10): ( vmassol too )  \ntemporalfox - (09:10): so it could be its first fun thing to do  \nvmassol - (09:11): (shhhhhhhh :))  \ntmortagne - (09:11): temporalfox: but xwiki/2.0 syntax is way better, do you really need confluence ? ;)  \ntemporalfox - (09:11): actually it's Dimitri that wants to use it  \ntemporalfox - (09:11): exo is going to use wikbook for its documentations  \ntemporalfox - (09:11): and dimitri wants confluence macro  \nvmassol - (09:11): tmortagne: but even if wikimodel exposes an api we would need to also expose it at the xwiki level to make it available  \ntemporalfox - (09:11): personally I'm using xwiki syntax 2.0  \ntmortagne - (09:11): vmassol: why ?  \nvmassol - (09:11): (so that would mean a cast since I don't see this as something generic at the Parser interface level)  \ntmortagne - (09:12): it depends how it's done  \ntemporalfox - (09:12): perhaps it could be done by subclassing parser  \ntemporalfox - (09:12): to overide a list of macro  \ntemporalfox - (09:12): like with a method boolean needsToBeClosed(String macroName) { ... }  \ntmortagne - (09:12): wikimodel could search for a class names based on the macro name for example  \ntmortagne - (09:12): or using some java service  \ntemporalfox - (09:12): and any subclass could change this behavior easily  \ntemporalfox - (09:12): the best way would be to have real meta data  \ntemporalfox - (09:13): used as configuration for the parser  \nvmassol - (09:13): we could also introduce some generic Parser params  \nvmassol - (09:13): Map<String, Object>  \ntmortagne - (09:13): temporalfox: the best would be to use confluence-like api used for macros  \ntemporalfox - (09:13): tmortagne: what do you mean ?  \ntmortagne - (09:13): since they have to expose it as well  \ntmortagne - (09:13): Conflucence itself has the same issue  \ntmortagne - (09:14): if you want to add more macros you need to describe them  \nvmassol - (09:15): tmortagne: we'll need to decide what we do with wikimodel too\u2026 it's basically your project now :)  \nvmassol - (09:16): you've been the only active committer on it for months/years now ;)  \nvmassol - (09:17): actually last commit by someone else on wem was mikhail in aug 2009  \ntmortagne - (09:18): and was probaably for confluence  \nvmassol - (09:18): (when he wrote the confuence parser)  \nvmassol - (09:18): yep  \nvmassol - (09:18): (for jason)  \ntemporalfox - (09:18): open source is fun  \ntemporalfox - (09:20): I'm going to update version on my side  \ntemporalfox - (09:20): see how it change things  \ntemporalfox - (09:20): then try to find some hack :-)  \ntemporalfox - (09:20): and find out if this needs a rework  \ntmortagne - (09:20): vmassol: \"do with wikimodel\"=the merging XWiki and wikimodel (already old) idea ?  \nsilviar joined #xwiki at 09:20  \nvmassol - (09:21): temporalfox: I've been wanting to fold the wikimodel project in the xwiki ecosystem for some time now since thomas and I have been the only active committers for a long time now and it would be easier for us to maintain. See http://dev.xwiki.org/xwiki/bin/view/Design/RenderingEngineConvergence  \ntmortagne - (09:21): (+1 but big work)  \ntemporalfox - (09:21): btw have you looked at textile-j ?  \nvmassol - (09:21): but mikhail didn't like the idea too much\u2026. and we didn't want to do an OPA at the time  \nvmassol - (09:21): ;)  \ntemporalfox - (09:21): yes it's an OPA  \nvmassol - (09:21): textiel-j is dead  \nvmassol - (09:22): it's been moved to eclipse  \nvmassol - (09:22): as wikitext  \ntemporalfox - (09:22): yes I saw that  \nvmassol - (09:22): (subproject of mylyn)  \ntemporalfox - (09:22): it's a bit similar, perhaps it does not seem to have macro syntax though  \nvmassol - (09:22): yes there are 4 rendering engines in the wild:  \nvmassol - (09:22): wikimodel  \nvmassol - (09:22): xwiki  \nvmassol - (09:22): doxia  \nvmassol - (09:22): wikitext  \nvmassol - (09:22): (radeox being dead)  \nvmassol - (09:23): (in java that is)  \nvmassol - (09:23): we/I started doing bridges in xwiki for them  \nvmassol - (09:23): first with wikimodel and doxia  \ntmortagne - (09:23): wikimodel is us now and doxia is not very active even if it's maven project  \nvmassol - (09:23): yes doxia is dead  \nvmassol - (09:24): (a bit harsh but probably true)  \nvmassol - (09:24): that leaves xwiki/wikimodel and wikitext  \ntmortagne - (09:24): wikitext as less syntaxes but a lot more tools if i understood well  \ntemporalfox - (09:24): I think it all depends if you want to create/maintain a community around this project or not  \nvmassol - (09:25): eclipse tools  \nvmassol - (09:25): not a lot more (there was an editor AFAIR)  \nvmassol - (09:25): (but we have xeclipse too)  \nvmassol - (09:25): temporalfox: we wanted to view xwiki as an ecosystem of projects  \nvmassol - (09:25): having to do with wiki apis  \nvmassol - (09:25): building blocks  \ntemporalfox - (09:25): which is what we do a bit at exo  \ntmortagne - (09:25): vmassol: wikitext provide tools to create parser/renderers  \nvmassol - (09:25): a forge of wiki projects if you prefer  \ntemporalfox - (09:25): with some of your components  \nvmassol - (09:25): yes  \ntmortagne - (09:26): which is a lot  \nvmassol - (09:26): I haven't looked at wikitext for several months now  \nvmassol - (09:26): (since it was moved to mylyn)  \ntemporalfox - (09:26): one good thing of the thing on eclipse seems to be the IDE support  \nvmassol - (09:26): so it's very possible it has evolved a lot  \ntemporalfox - (09:26): but to make that work well  \ntemporalfox - (09:26): there would be the need to meta data describing the language  \ntemporalfox - (09:26): and then you enter another world :-)  \nvmassol - (09:29): brb  \nvmassol left at 09:29 (Quit: Leaving.  \nvmassol joined #xwiki at 09:30  \nvmassol - (09:36): hmmmmm  \nvmassol - (09:37): today is supposed to be the XE 2.4RC1 release.....  \ntmortagne - (09:38): we are not getting younger...  \nvmassol - (09:38): since we cannot count on sergiu I think we'll need to fix the tests ourselves\u2026 I'll start looking at some  \ntmortagne - (09:39): checking too  \nvmassol - (09:39): just finishing debugging a XWQL issue first and then I'll start working on the tests  \nvmassol - (09:40): (seems we cannot run HQL queries using the query manager right now, even with PR)  \ntmortagne - (09:40): vmassol: pretty sure we do use query manager in some places already  \ntmortagne - (09:40): with HQL  \nvmassol - (09:41): maybe with named queries  \nvmassol - (09:41): anyway debugging  \nvmassol - (09:41): since my ex in the wiki doesn't work for some reason  \ntmortagne - (09:43): there is with named queries for sure but i tough i have seen others too  \nDenis joined #xwiki at 09:43  \nCalebJamesDeLisl - (09:44): I'll take a look at AdministrationTest  \nvmassol - (09:45): cool  \ntmortagne - (09:46): vmassol: statistics use QueryManager without named query  \nvmassol - (09:46): tmortagne: there's even a unit test for it that passes but I need to understand why it doesn't work with my example....  \ntmortagne - (09:46): ok  \nvmassol - (09:46): oh I know  \nvmassol - (09:47): chcking  \nvmassol - (09:48): I'm stupid  \nvmassol - (09:48): I had \"forgotten\" that you need to resave the pb if you had saved it with a user without PR before  \nvmassol - (09:48): s/pb/page/  \nvmassol - (09:52): looking at XObjectsTest.testChangeMultiselectProperty  \narkub joined #xwiki at 09:52  \ntmortagne - (09:54): KeyboardShortcutsTest/testAllKeyboardShortcuts/  \ntmortagne - (09:56): hmm this one is a real bug  \njvdrean joined #xwiki at 10:06  \ntmortagne - (10:12): i don't understand I'm unable to find \"Welcome to your \u00a0wiki administrator\" string anywhere but it's printed as a link in every page editors  \ntemporalfox - (10:13): so one big thing that changes for me in the upgrade is that having a line separator beween two macro change the model  \ntemporalfox - (10:13): {a/} followed by {b/}  \ntemporalfox - (10:13): is not the same if there is a blank line in between  \nvmassol - (10:15): temporalfox: yes we had a bug before  \nCalebJamesDeLisl - (10:15): xe.home.title=Welcome to your wiki  \nvmassol - (10:15): temporalfox: you need 2 NLs to make a block standalone  \ntmortagne - (10:16): vmassol: i don't think temporalfoxis talking about xwiki/2.0 syntax  \ntemporalfox - (10:16): what changes is for bullet list  \ntemporalfox - (10:16): the macro will or won't be considered to be in the list  \ntemporalfox - (10:16): I have no idea which interpretation is the best one :-)  \ntmortagne - (10:17): CalebJamesDeLisl: i know this one but that's not what i get  \nCalebJamesDeLisl - (10:17): maybe it splices the user name on the end?  \ntmortagne - (10:18): hmm  \ntmortagne - (10:19): checking  \ntmortagne - (10:19): but the name of the user is Administrator or Admin (technical name)  \nCalebJamesDeLisl - (10:19): where do you see it? which editor?  \ntmortagne - (10:19): ha i know  \ntmortagne - (10:20): it's actually the first heding of the XEM home page in which i'm currently testing editors  \ntmortagne - (10:21): that means that we now always sow the page title instead of \"Welcome to the rights editor\" for the right editor for example  \ntmortagne - (10:21): someone knows if this as been done on purpose ?  \ntmortagne - (10:22): this has been done for 2.4M1 it seems  \ntmortagne - (10:22): (myxwiki has the same thing)  \nlucaa joined #xwiki at 10:25  \nabusenius joined #xwiki at 10:26  \nvmassol - (10:27): porting the XObjectsTest to ui-tests  \ntemporalfox - (10:31): so here is the result of my test now with confluence  \ntemporalfox - (10:31): some macro are OK like {note}note\\_value{note}  \ntemporalfox - (10:31): some are not OK like : {important}important\\_value{important}  \ntemporalfox - (10:32): as we suspected what differs in the macro meta data  \ntemporalfox - (10:32): I think  \ntemporalfox - (10:32): \"note\" is recognized by confluence as a open/close macro and \"important\" is not  \ntemporalfox - (10:39): the only work around I could find is to preprocess the wiki text for confluence  \ntemporalfox - (10:39): and make all macro look like one detyped macro  \nvmassol - (10:40): temporalfox: or submit a quick patch for the important macro  \ntemporalfox - (10:40): it's not possible I think  \ntemporalfox - (10:40): as this choice is hardcoded in the parser itself  \ntemporalfox - (10:40): in the .jj file  \nvmassol - (10:40): yes  \ntemporalfox - (10:40): it's a compile time thing  \nvmassol - (10:40): that's what I mean by patch  \ntemporalfox - (10:40): not a runtime thing  \nvmassol - (10:40): we apply  \ntemporalfox - (10:40): the patch would be fairly complex  \nvmassol - (10:40): and we regenerate a new wikimodel version for you  \nvmassol - (10:41): it's not a one liner to add the important macro to the correct list?  \ntemporalfox - (10:41): I see, but I don't think that my interpretation of things could apply :-)  \nvmassol - (10:41): I guess I haven't followed enough the discussion  \nvmassol - (10:41): going back to my test  \ntemporalfox - (10:41): it's a few macros  \ntemporalfox - (10:41): not many  \ntemporalfox - (10:42): I'm going to see what would need to change  \ntemporalfox - (10:42): in term of .jj  \ntmortagne - (10:47): temporalfox: you can execute RebuildScanners.xml (with ant) to regenerate the parser after you changed the .jj file  \ntemporalfox - (10:47): ok  \nCalebJamesDeLisl - (10:52): AdministrationTests should be fixed, off to get something to eat.  \nproyvind - (10:56): hm, after using xwiki's export/import functionality to migrate it to a different server with a different database, I seem unable to log in with any administrator account.. am I missing something? or how should I force a change of the admin password otherwise?  \narkub left at 10:59 (Quit: Leaving  \nKermitTheFragger joined #xwiki at 11:03  \nnpm joined #xwiki at 11:19  \narkub joined #xwiki at 11:36  \nCalebJamesDeLisl - (11:43): proyvind: Did you install in a completely empty database?  \nCalebJamesDeLisl - (11:44): and do you have SQL console access on the system? (this way you could do some tests)  \ntemporalfox - (11:45): so at the end I find the confluence syntax lovely :-)  \nkibahop left at 11:48 (Remote host closed the connection  \nkibahop joined #xwiki at 11:48  \nproyvind - (11:50): CalebJamesDeLisl: yeah, I just exported it using xwiki's export functionality from a mysql installation, then deployed xwiki using a fresh pgsql database and imported it there  \nCalebJamesDeLisl - (11:51): can you get into the psql console?  \nproyvind - (11:51): but sure, I have complete control over the whole system :)  \nproyvind - (11:51): yupp  \nCalebJamesDeLisl - (11:56): just a second, comming up with the query, forgot the name of my database ;)  \nproyvind - (11:56): CalebJamesDeLisl: seems like it must be related to some mod\\_jk misconfiguration issue, I was able to authenticate properly when accessing wiki directly through tomcat on port 8080  \nCalebJamesDeLisl - (11:57): ahh ok, then no need to tinker with postgres  \nproyvind - (11:57): indeed :)  \nCalebJamesDeLisl - (11:57): I suppose you could do a tcpdump on 8080 and see exactly what the machine is seeing.  \nproyvind - (11:57): (you wouldn't accidentally be a mod\\_jk/tomcat wiz as well? ;)  \nCalebJamesDeLisl - (11:57): nope.  \ntemporalfox - (11:58): one issue on the {code} macro in confluence syntax : it is recognized as a verbatim block, does it make sense ?  \nCalebJamesDeLisl - (11:58): But i would use tcpdump or wireshark.  \nevalica joined #xwiki at 11:58  \nproyvind - (11:58): I have some mod\\_jk errors in it's log which I'd suppose is what would indicate my problem, just need to figure them out, and then prolly things should work out I hope..  \nCalebJamesDeLisl - (11:59): good luck.  \ntemporalfox - (11:59): ah yes type : code in the verbatim prams :-)  \nproyvind - (11:59): CalebJamesDeLisl: thx ;)  \ntmortagne - (12:00): temporalfox: should recognized as \"code\" macro IMO  \ntemporalfox - (12:00): at the moment it is like I described  \ntmortagne - (12:00): yep sure and i understand why mikhail did it that way  \ntmortagne - (12:01): but when used inside XWiki for example it's very very convenient  \ntemporalfox - (12:01): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (\"noformat\".equals(name) || \"code\".equals(name)) {  \ntemporalfox - (12:01): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0params = params.addParameter(\"type\", name);  \ntemporalfox - (12:01): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fContext.onVerbatim(str, !block, params);  \ntemporalfox - (12:01): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0} else if (block) {  \ntemporalfox - (12:01): so at the end, should this considered as a bug or as a feature ?  \ntmortagne - (12:01): s/very very/not very/  \ntemporalfox - (12:01): meaning that if I need to make it work, I can either make it a special case in wikbook  \ntmortagne - (12:02): IMO it's a bug  \ntmortagne - (12:02): since ther eis macro in wikimodel apis it should recognize macros as well macrs...  \ntemporalfox - (12:02): but the amount of code to explictely handle it that I pasted  \ntemporalfox - (12:02): let me think that it is done on purpose for some reason  \ntmortagne - (12:05): temporalfox: i think mikhail choose to consider knows macros as part of the syntax instead of extension points and make them work even if none implemented them for example when you convert from Confluence to XHTML with wikimodel apis you will not have highlited text but you will not loose the content ever since it will be printed as if it was a verbatim block  \ntmortagne - (12:05): but when you do want to implements the macros it's a pain  \ntemporalfox - (12:06): it's a pain indeed  \ntemporalfox - (12:06): I'm gonna see if it is easy to fix the scanner  \nsdumitriu joined #xwiki at 12:06  \ntemporalfox - (12:06): I haven't done any jj stuff for 10 years :-)  \ntmortagne - (12:06): temporalfox: i think yes, macro block are pretty much like verbatim block with parameters from API POV  \ntmortagne - (12:07): so it's probably just changing method name in the jj file  \ntemporalfox - (12:07): there is one thing I don't get in WEM SVN  \ntemporalfox - (12:07): in tags I have 2.0.7  \ntmortagne - (12:07): actually verbatim have parameters too :)  \ntemporalfox - (12:07): inside it I don't have any confluence related thing  \narkub left at 12:07 (Ping timeout: 240 seconds  \ntemporalfox - (12:07): only in trunk  \ntmortagne - (12:08): yes 2.0.7 is very very old  \ntemporalfox - (12:08): but when I go on confluence code inside my pom from intellij it tells me  \ntemporalfox - (12:08): 2.0.7- a number  \ntmortagne - (12:08): at XWiki we deploy 2.0.7 snapshot since a then  \ntmortagne - (12:08): when we need one  \ntemporalfox - (12:08): so you deploy trunk as 2.0.7  \ntemporalfox - (12:08): with the svn rev number appended ?  \ntmortagne - (12:09): temporalfox: see http://maven.xwiki.org/externals/org/wikimodel/org.wikimodel.wem/  \ntemporalfox - (12:09): I have 2.0.7-20100520  \ntemporalfox - (12:09): what does it mean ?  \ntmortagne - (12:09): we don't create any tag sorry  \ntmortagne - (12:09): the date: 2010 05 20  \ntemporalfox - (12:09): those are copies ?  \ntmortagne - (12:09): it's the date of the build  \ntemporalfox - (12:09): ah I see externals  \ntemporalfox - (12:09): you are using svn externals to make that ?  \ntemporalfox - (12:10): but it's taken from trunk, right ?  \ntemporalfox - (12:10): ah not svn externals  \ntmortagne - (12:10): http://maven.xwiki.org/externals/org/wikimodel/org.wikimodel.wem/ is a maven repository, nothing to do with svn  \ntemporalfox - (12:10): it's maen repo  \ntemporalfox - (12:10): yes  \ntmortagne - (12:10): but yes we build from trunk  \ntmortagne - (12:10): be deploy from trunk to be precise  \ntemporalfox - (12:10): so when you build trunk on a particular day you tag it as \u00a02.0.7 + date  \ntmortagne - (12:10): yep  \ntemporalfox - (12:10): so I should work on trunk  \ntmortagne - (12:11): yep  \ntemporalfox - (12:11): and use the mvn versions:set to set the same date  \ntemporalfox - (12:11): to override your version  \ntmortagne - (12:11): or just edit the pom.xml file ;)  \ntemporalfox - (12:12): ah yes  \ntmortagne - (12:12): you can also simply remove the jar you currently have and put a 2.0.7-SNAPSHOT  \ntemporalfox - (12:12): I forgot I'm not on a multi project thing  \ntemporalfox - (12:12): so used to have 20 poms per project now :-)  \ntemporalfox - (12:12): yes but I would need to make a dependency on SNAPSHOT  \ntemporalfox - (12:12): and exclude your  \ntmortagne - (12:12): yep that's the same for XWiki, but wikimodel is a very simple one :)  \ntmortagne - (12:13): temporalfox: ok i tough you just wanted to change the jar in the distribution for tests  \ntmortagne - (12:13): no need to rebuild XWiki  \ntemporalfox - (12:13): yep  \ntemporalfox - (12:13): I just want to override the wem jar  \ntmortagne - (12:14): you can do that by hand in you tomcat (or something) xwiki app folder  \ntmortagne - (12:14): unless you are working in Eclipse  \ntmortagne - (12:15): in that case yes setting the version is easier  \ntmortagne - (12:16): sorry forgot you are not using XWiki but the the rendering  \ntmortagne - (12:16): s/the the/just the/  \nvmassol - (12:16): ah was almost there but realized the edit menu isn't the same in view mode or in edit mode\u2026. need to go for lunch, will try to fix this afterwards  \nEnygma` joined #xwiki at 12:17  \nlucaa left at 12:21 (Ping timeout: 260 seconds  \njvdrean left at 12:21 (Quit: Leaving.  \narkub joined #xwiki at 12:23  \ntemporalfox - (12:36): I'm using unit tests and maven only in wikbook :-)  \nCalebJamesDeLisl - (12:38): Hey, defer scripts made a big change in speed.  \nCalebJamesDeLisl - (12:39): Now I think the lowest hanging fruit is css sprites.  \narkub left at 12:45 (Ping timeout: 240 seconds  \narkub joined #xwiki at 12:46  \nDSpair joined #xwiki at 12:55  \nDSpair - (12:55): Good morning all.  \nCalebJamesDeLisl - (12:56): good morning DSpair you have quite a collection of ip addresses ;)  \nDSpair - (12:57): I just get on-line from wherever.  \nDSpair - (12:57): Today, a coffee shop.  \nCalebJamesDeLisl - (12:57): Ahh, I forget about wifi.  \nDSpair - (12:58): I have a question. I found a thread about LiveTable issues when upgrading to 2.3.1 and I followed the instructions. Unfortunately, like the poster, I still get an error \"The environment prevents the table to load data.\" Any suggestions?  \nDSpair - (12:58): CalebJamesDeLisl: I could stay on-line using BitchX from my home computer and just use screen to connect/disconnect, but I like XChat.  \nCalebJamesDeLisl - (12:59): Usually that means javascript is turned off or you have noscript.  \nDSpair - (12:59): I am certain that JavaScript is enabled.  \nCalebJamesDeLisl - (13:00): Do you have firebug?  \njvdrean joined #xwiki at 13:00  \nDSpair - (13:00): I just turned that on,  \nDSpair - (13:00): I am seeing several JS and CSS errors.  \nCalebJamesDeLisl - (13:01): That message is supposed to be removed at the beginning of the execution.  \nCalebJamesDeLisl - (13:01): In my firebug i find firebug causing js errors.  \nDSpair - (13:01): Errors shown here: http://pastebin.com/7JE9vczi  \nDSpair - (13:02): I always leave firebug disabled until I have a problem.  \nCalebJamesDeLisl - (13:03): hmm. Looks like it's halting on an IE6 compatibility line.  \nDSpair - (13:03): Just to be sure, I right clicked on Firebug and selected \"Disable all panels\". After reloading the page, I don't get the error, but I also don't get any data displayed.  \nDSpair - (13:04): BTW, this is 2.3.1 build 29118  \nCalebJamesDeLisl - (13:04): hmm nope, that's css  \nCalebJamesDeLisl - (13:05): You could try setting a break on error in firebug-script  \nDSpair - (13:06): The strange thing is that this worked prior to upgrading to 2.3.1.  \nCalebJamesDeLisl - (13:06): what's the revision number?  \nDSpair - (13:06): 29118  \nCalebJamesDeLisl - (13:07): no changes between then and now in livetable.js I think something is causing javascript to halt.  \nDSpair - (13:08): In firebug, the AJAX request shows no response data.  \nCalebJamesDeLisl - (13:08): That's interesting...  \nDSpair - (13:08): I know that there are instances of the requested class.  \nCalebJamesDeLisl - (13:09): Where are you seeing this livetable?  \nCalebJamesDeLisl - (13:10): Is it a custom #livetable invocation?  \nDSpair - (13:10): It's a page I created.  \nDSpair - (13:10): I have a Space called \"TelnetBackup\" and within there a class called \"BackupDeviceClass\".  \nCalebJamesDeLisl - (13:11): If you can give me the same #livetable call maybe I can test against class i have locally.  \nDSpair - (13:11): I have about 12 instances of that class. In the livetable, I reference \"TelnetBackup.BackupDeviceClass\"  \nDSpair - (13:12): Here's my code: http://pastebin.com/TdLP2Pzy  \nDSpair - (13:12): I'll also try the example code for XWikiUser  \nDSpair - (13:14): The example code for the \"Pages in a space list\"  \nDSpair - (13:14): Does not work.  \nDSpair - (13:14): So , I think there's a problem with my copy of livetable.  \nDSpair - (13:14): I'll re-import the XAR.  \nCalebJamesDeLisl - (13:15): Livetable isn't in the xar.  \nCalebJamesDeLisl - (13:15): I just made a few small changes to see users and it works here.  \nCalebJamesDeLisl - (13:16): This http://pastebin.com/29Z8fC8w works for me.  \nDSpair - (13:16): Hrrmmmm . . . After reading the page, the XAR I imported is intended for 1.8.x  \nCalebJamesDeLisl - (13:16): :)  \nDSpair - (13:16): I need to revert back to original version.  \nCalebJamesDeLisl - (13:16): That shouln't affect this problem though.  \nCalebJamesDeLisl - (13:17): It will cause a bunch of others though so it's a good idea.  \nCalebJamesDeLisl - (13:18): Actually it might cause this problem if the liveTableProvider has trouble.  \nDSpair - (13:19): OK, I rolled back to the original versions, but still no joy.  \nDSpair - (13:21): I'm going to re-import the enterprise XAR.  \nDSpair - (13:24): Well, that didn't fix it, but now I see data in the AJAX response.  \nDSpair - (13:26): It looks like the data in the AJAX response is correct for the given class name and settings, but it is not getting displayed.  \nDSpair - (13:27): And firebug is not showing any JavaScript errors.  \nCalebJamesDeLisl - (13:28): Did you try me code?  \nCalebJamesDeLisl - (13:28): I can say that that code worked on my installation.  \nDSpair - (13:28): Wait one and I'll see  \nDSpair - (13:29): Same indications. I see the valid data in the AJAX response, but it does not get displayed on the page.  \nCalebJamesDeLisl - (13:31): Something must be wrong with the ajax being produced.  \nCalebJamesDeLisl - (13:31): Does the allDocs table work?  \nDSpair - (13:31): Wait one.  \ntemporalfox - (13:32): so I found one issue in XWikiGeneratorListener that do not translate code wikistyle to monospaced, instead none is used  \ntemporalfox - (13:32): as default fallback  \ntemporalfox - (13:32): so if any patch, I need to patch this as well  \nDSpair - (13:33): No, it has the same problem.  \ntmortagne - (13:33): working on ValidationTest.testSaveActionValidatesWhenXValidateIsPresent  \nvmassol - (13:34): CalebJamesDeLisl: argh just found you had written \u00a0a EditObjectsPage \u2026. I've just redone one but I've called it ObjectEditPage (to be in inline with existing WikiEditPAge, WYSIWYGEditPage, etc)  \nvmassol - (13:34): merging them now....  \nCalebJamesDeLisl - (13:35): Oops should have mentioned it.  \nDSpair - (13:35): Ah well, I have to head for the office. Thanks for looking into this CalebJamesDeLisl. I will catch up with you all a little later.  \nDSpair left at 13:35 (Quit: Leaving  \ntmortagne - (13:36): temporalfox: what do you mean by \"code wikistyle\" ?  \ntemporalfox - (13:36): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (style == IWemConstants.STRONG) {  \ntemporalfox - (13:36): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result = Format.BOLD;  \ntemporalfox - (13:36): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0} else if (style == IWemConstants.EM) {  \ntemporalfox - (13:36): confluence emits a IWemConstants.CODE  \ntmortagne - (13:36): this style is wrong  \ntemporalfox - (13:37): that is not handled by this switch  \ntmortagne - (13:37): since {code} is supposed to produce code macro  \ntmortagne - (13:37): it's code macro implementation to then decide what it's produceing  \ntemporalfox - (13:37): there is no way in confluence to produce monospaced  \ntemporalfox - (13:37): as it is in xwiki  \ntemporalfox - (13:37): in wikbook I'm abusing monospaced  \ntemporalfox - (13:37): monospaced == code in wikbook  \ntemporalfox - (13:38): otheriwse readability is not good  \ntemporalfox - (13:39): for instance : The ##iterator()## returns an ##iterator## that can be used to remove any child  \nCalebJamesDeLisl - (13:39): I've started using one space tab for nested html tags and 2 space tabs for nested velocity code. It seems to make code easier to read when velocity and html are mixed. WDYT?  \ntemporalfox - (13:39): I would not imagine the same thing with {code} :-)  \ntmortagne - (13:39): temporalfox: did not even know there was so many styles in IWemConstants  \ntmortagne - (13:40): doe snot looks nice  \ntemporalfox - (13:40): why ?  \ntemporalfox - (13:40): it's readable  \ntmortagne - (13:40): that's anything except generic  \ntmortagne - (13:40): most of theses style don't mean anything in most of syntaxes  \ntemporalfox - (13:41): maybe there is a missing style to describe code easily inline  \ntemporalfox - (13:41): that is not a macro  \ntemporalfox - (13:41): that's what I mean  \ntemporalfox - (13:41): and worse, it means that confluence cannot support monospaced text  \ntmortagne - (13:41): anyway you are not supposed to need that style  \ntmortagne - (13:41): in your use case  \ntemporalfox - (13:41): what am I supposed to need ?  \ntmortagne - (13:42): since we agreed that wikimodel is bad when producing verbatim style block  \ntmortagne - (13:42): and should instead produce code macro block  \ntmortagne - (13:42): then it's the implementation of the code macro to decide style of the content etc...  \ntemporalfox - (13:42): how can I generate monospaced text out of confluence ?  \ntmortagne - (13:42): like we do in XWiki  \ntmortagne - (13:43): temporalfox: again it has nothing to do with the source  \ntmortagne - (13:43): or even with confluence  \ntmortagne - (13:43): the source is transformed into XDOM  \ntemporalfox - (13:43): well at the moment, no one can produce monospaced text from wem confluence parser  \ntemporalfox - (13:43): unless there is a {monospaced} macro ?  \ntmortagne - (13:43): in this XDOM you have a MacroBlock that is a code macro with some content  \ntmortagne - (13:44): temporalfox: i don't know but you want monospace syntaxe or you want code macro ?  \ntemporalfox - (13:44): I want monospaced syntax  \ntmortagne - (13:44): if what you want is code macro then it's all about how you implement the code macro  \ntemporalfox - (13:44): and I abuse it in wikbook  \ntmortagne - (13:44): ok i tough you were still in the use case from earlier  \ntemporalfox - (13:45): code macro already exist in confluence  \ntemporalfox - (13:45): no it is different  \ntemporalfox - (13:45): {{foo}} in confluence means \"code\" inline  \ntemporalfox - (13:45): in xwiki we use ##foo##  \ntmortagne - (13:45): temporalfox: the syntaxe for monospace is {{ }} indeed in Confluence  \ntemporalfox - (13:45): and anything like {{foo}} in current wem is considered as plain text  \ntemporalfox - (13:45): yes  \ntemporalfox - (13:45): that is signaled as code  \ntmortagne - (13:46): so it should produce MONO  \ntemporalfox - (13:46): I'm gonna patch that in the pasrser  \ntmortagne - (13:46): and not CODE  \ntemporalfox - (13:46): yes right I agree  \ntemporalfox - (13:46): confluence syntax interpretation is left to the user :-)  \ntmortagne - (13:47): now i agree that we should handle IWemConstants.CODE some way  \ntmortagne - (13:47): maybe mikhail added that recently  \ntemporalfox - (13:49): if the {{ falls back to monospaced, then it won't use anymore  \ntemporalfox - (13:49): for the record, docbook provides elements for code  \ntemporalfox - (13:49): that are different from monospaced  \ntemporalfox - (13:49): but at the end they are rendered as monospaced :-)  \ntmortagne - (13:50): ok  \ntemporalfox - (13:52): btw I have a similar issue with underline  \ntemporalfox - (13:52): I have not yet investigated  \ntemporalfox - (13:52): but I think it is similar  \nvmassol - (14:01): bb in 30mn  \nevalica left at 14:03 (Ping timeout: 264 seconds  \ntmortagne - (14:07): temporalfox: found two others wikimodel styles for which we ca reuse other styles: DEL (STRIKEOUT), TT (MONOSPACE) i will add conversion for these and for CODE in XWikiGeneratorListener  \ntemporalfox - (14:08): strikethrough seems OK, my unit test did not fail  \ntemporalfox - (14:08): for underline, it seems to be interperted as TT  \ntemporalfox - (14:08): and it looks like it should be INS instead  \ntemporalfox - (14:09): at least to make things work  \ntemporalfox - (14:09): according to xwiki translation  \ntemporalfox - (14:09): \u00a0else if (style == IWemConstants.INS) {  \ntemporalfox - (14:09): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result = Format.UNDERLINED;  \ntemporalfox - (14:09): \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}  \ntmortagne - (14:09): temporalfox: i'm only talking about XWikiGeneratorListener here  \ntemporalfox - (14:09): yes  \ntemporalfox - (14:09): I followed it  \ntmortagne - (14:09): not Confluence parser that maybe have bugs  \ntemporalfox - (14:09): so what is the truth about {{, fix parser or xwikigeneratorlistener ?  \ntmortagne - (14:10): temporalfox: both ;)  \ntmortagne - (14:10): what wikimodel does is bad  \ntmortagne - (14:10): because {{ is monospace syntax, to have code you need to use {code} macro  \ntemporalfox - (14:10): what about underline ?  \ntemporalfox - (14:11): \\_\\_foo\\_\\_ and +foo+  \ntemporalfox - (14:11): do you think parser is wrong too ?  \ntmortagne - (14:12): well others parser (mediawiki and xwiki/2.0 at least) see INS as underline  \narkub left at 14:12 (Ping timeout: 258 seconds  \ntemporalfox - (14:12): INS means ?  \ntmortagne - (14:12): but I agree that \"Inserted Text\" is not very clear  \ntmortagne - (14:12): vmassol: do you remember why INS is underline ?  \njvdrean left at 14:13 (Quit: Leaving.  \ntmortagne - (14:14): temporalfox: http://www.htmlcodetutorial.com/\\_INS.html  \ntmortagne - (14:14): looks like <ins> mean is interpreted as underline by a browser  \ntmortagne - (14:14): i guess that's why  \ntemporalfox - (14:15): so I think that parser is wrong on +foo+ as it clearly means underline and not tt  \ntmortagne - (14:15): ok, did not know this Confluence syntax  \ntemporalfox - (14:15): tt means \"Fixed pitch font.\" according to IWemConstants  \ntmortagne - (14:15): yep tt is basically monospace  \ntmortagne - (14:15): in a browser at least  \ntmortagne - (14:16): that's what we used to use in xwiki/1.0 syntax to to monospace  \ntmortagne - (14:16): s/to to/to do/  \ntmortagne - (14:16): and that's what is used in XHTML renderer i think to print UNDERLINE style  \ntmortagne - (14:17): or maybe we use some css not sure  \ntemporalfox - (14:17): docbook also does not support underline natively  \nflorinciu left at 14:20 (Read error: Connection reset by peer  \nvmassol - (14:26): tmortagne: underline is not valid XHTML  \nvmassol - (14:26): something like that  \nvmassol - (14:26): (just catching up)  \ntmortagne - (14:27): vmassol: my question what more why \"Inserted Text\" mean underline but i found the answer  \ntemporalfox - (14:33): so ?  \nCalebJamesDeLisl - (14:33): merging registerinline.vm and register.vm, and removing registeruser.vm.  \ntmortagne - (14:34): temporalfox: (02:14:53 PM) <moi>: looks like <ins> mean is interpreted as underline by a browser  \ntmortagne - (14:34): we took browser behavior as reference  \ntmortagne - (14:35): but i don't know the real answer  \njvelociter left at 14:36 (Quit: jvelociter  \njvdrean joined #xwiki at 14:37  \narkub joined #xwiki at 14:38  \njvelociter joined #xwiki at 14:40  \ntemporalfox - (14:41): thanks for the info  \nvmassol - (14:41): CalebJamesDeLisl: I hope your merge was a safe operation...  \nvmassol - (14:41): are you sure you're not breaking any existing skin?  \nCalebJamesDeLisl - (14:42): I will do some find-grepping but I am pretty sure.  \nvmassol - (14:42): you shouldn't forget xwiki users who had created existing skins based on existing templates  \nCalebJamesDeLisl - (14:42): existing = dodo?  \nvmassol - (14:42): I'm not talking about skins  \nvmassol - (14:42): dodo is dead and removed  \nvmassol - (14:42): s/skins/our skins/  \nvmassol - (14:43): removing a template is like removing a public API I think  \nCalebJamesDeLisl - (14:43): Well if we don't remove things which might break user code then nothing ever is removed?  \nCalebJamesDeLisl - (14:43): Ok, I'll revert.  \nvmassol - (14:43): we do have a deprecation strategy  \nvmassol - (14:43): (althouhg it needs refinements)  \nvmassol - (14:43): what I know is that lots of users have created custom skins  \nvmassol - (14:44): I haven't analyzed your change  \nvmassol - (14:44): maybe it's fine, maybe it's not I don't know  \nvmassol - (14:44): I'm just warning about potential issue to take into account  \nCalebJamesDeLisl - (14:44): Well I committed si it's in your email.  \nvmassol - (14:44): yes but I have to work on other stuff ;)  \nvmassol - (14:44): so I'd rather you do the check  \nvmassol - (14:44): :)  \nCalebJamesDeLisl - (14:44): Ok. i'll revert.  \nvmassol - (14:45): k  \nCalebJamesDeLisl - (14:45): We need a clean branch IMO.  \nvmassol - (14:45): clean branch don't help really  \nvmassol - (14:45): it's the same pb for people upgrading  \nCalebJamesDeLisl - (14:45): So never remove anything?  \nvmassol - (14:46): there are LOTS of ways  \nvmassol - (14:46): to be creative  \nvmassol - (14:46): :)  \nvmassol - (14:46): I can already think about 2  \nCalebJamesDeLisl - (14:46): fork fork fork fork  \nvmassol - (14:46): after 10 seconds of thoughts  \nvmassol - (14:46): one is provide a backward compat template package  \nvmassol - (14:46): that people can install  \nvmassol - (14:46): another is to do the same as we do for java code for deprecation and aspects  \nvmassol - (14:47): yet another is a migration script  \nvmassol - (14:47): another is empty templates that do some kind of redirect  \nCalebJamesDeLisl - (14:47): migration script? to route through all possible user code and change (break) it.  \nvmassol - (14:47): I'm just listing ideas  \nvmassol - (14:47): again I have tyhought 10 seconds about it  \nvmassol - (14:47): not more  \nvmassol - (14:47): :)  \nvmassol - (14:48): but I 'm answer to your 'never'  \nvmassol - (14:48): I think there are better ways  \nvmassol - (14:48): than 'never' and 'break' immediatly  \nvmassol - (14:48): s/and/or/  \nvmassol - (14:48): but  \nvmassol - (14:48): this needs to be discussed on the list IMO  \nvmassol - (14:49): one thing we need to do anyway is revist the deprecation strategy we have  \nvmassol - (14:49): since we're not applying it and it's too harsh on users if we were to apply it  \nCalebJamesDeLisl - (15:00): If we want to deprecate templates how should they be marked?  \nvmassol - (15:02): CalebJamesDeLisl: we need to invent some markup I guess  \nvmassol - (15:02): although a comment at the top will be enough  \nvmassol - (15:02): s/will/should/  \nCalebJamesDeLisl - (15:02): Then I will propose marking these as deprecated.  \nvmassol - (15:02): sounds good  \nCalebJamesDeLisl - (15:03): and comments.vm and comments2.vm and viewobject.vm  \nCalebJamesDeLisl - (15:03): That's all that I know of, but I think there are 20 or so more unused templates.  \nCalebJamesDeLisl - (15:03): I did a find-sed once.  \nvmassol - (15:05): yes there are quite a few  \nvmassol - (15:05): one of the reason there were kept was because of backward compat  \nvmassol - (15:05): but in any they should have been put in their own source tree at least  \nvmassol - (15:05): + marked as such  \nvmassol - (15:05): templates are a bit messy in term of organization right now  \nvmassol - (15:06): we even have a jira issue to clean them up ;)  \nvmassol - (15:06): ....that's been there for 2 years\u2026.  \nCalebJamesDeLisl - (15:06): +1 for moving away from templates entirely. They seem to have problems which applications don't have.  \nCalebJamesDeLisl - (15:07): (unmaintainable)  \nCalebJamesDeLisl - (15:08): Maybe we could have a deprected velocity call to put in deprecated templates just so it will be logged when they are run.  \nvmassol - (15:08): yes might be a good idea  \nCalebJamesDeLisl - (15:08): getWebPreference would do the trick but it'd be ugly and eventually get broken when it's removed.  \nvmassol - (15:09): I'm getting there for the XObjectsTest rewrite....  \nkibahop left #xwiki at 15:10  \nCalebJamesDeLisl - (15:11): I'm trying to avoid the horrible day (week) when I have to rewrite the 530 lines of administration tests.  \nCalebJamesDeLisl - (15:14): where should deprecated go? services.velocity.deprecated() ?  \nCalebJamesDeLisl - (15:17): bbiab coffee  \nevalica joined #xwiki at 15:20  \nvmassol - (15:23): CalebJamesDeLisl: do we have an API to get a page's main content? I'll add one now. Just ping me if there's one already  \ntmortagne - (15:35): CalebJamesDeLisl: is http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-ui/1009/testReport/org.xwiki.it.ui.administration/RegisterFromAdministrationTest/testRegisterPasswordTooShort/ a flickering test ?  \nvmassol - (15:37): CalebJamesDeLisl: just done a commit. Would be great if you can verify (in your own time) I haven't done anything wrong  \ntmortagne - (15:38): there is only one remaining test failing in xwiki-enterprise-test-selenium but i can't find yet what is wrong, look like a timing issue  \ntmortagne - (15:38): http://hudson.xwiki.org/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/1009/testReport/com.xpn.xwiki.it.selenium/AllDocsTest/testTableViewActions/  \nvmassol - (15:38): tmortagne: I still have one to migrate to the new fwk  \nvmassol - (15:38): but since I have all the PO in place it should be easy now  \nvmassol - (15:38): (for XObjectsTest)  \ntmortagne - (15:39): vmassol: in the meantime i fixed them in selenium  \nvmassol - (15:39): XObjectsTest?  \nvmassol - (15:39): I didn't get any conflict when committing  \nvmassol - (15:39): so probably others  \ntmortagne - (15:39): vmassol: i'm talking about xwiki-enterprise-test-selenium  \nvmassol - (15:39): yep me too  \ntmortagne - (15:39): not test-ui  \nvmassol - (15:40): XObjectsTest is an old test  \ntmortagne - (15:40): vmassol: i cn't see any committ from you in the svn history  \nvmassol - (15:40): I have received the commit mail  \ntmortagne - (15:41): of XObjectsTest.java file  \nvmassol - (15:41): rev 29788  \nvmassol - (15:41): oh  \ntmortagne - (15:41): vmassol: gain i'm talking about xwiki-enterprise-test-selenium  \nvmassol - (15:41): yes  \nvmassol - (15:41): me too  \ntmortagne - (15:41): and there is nothing in your commit about it  \nvmassol - (15:41): maybe I missed it in my commit  \nvmassol - (15:41): yes I did  \nvmassol - (15:42): indeed I cannot commit  \nvmassol - (15:42): merging  \nvmassol - (15:44): btw these tests don't like valid functional tests  \nvmassol - (15:44): (XObjectsTEst)  \nvmassol - (15:45): seems like someone should have tested at the XClass level  \nvmassol - (15:45): but maybe it was difficult....  \ntmortagne - (15:53): haha jython 2.5.2beta1 finally, lets test that  \nmflorea - (16:11): tmortagne: the XHTML renderer generates nested anchors for [[URL>>URL]] which is somehow normal, but at the same time it should generate valid XHTML. what's the plan with this issue?  \ntmortagne - (16:13): mflorea: http://jira.xwiki.org/jira/browse/XWIKI-3440 is has been voted already but needs to be done  \nvmassol - (16:13): tmortagne: ok XObjectsTest ported to new fwk  \ntmortagne - (16:13): s/is/it/  \nvmassol - (16:13): hopefully I haven't broken anything else ....  \ntmortagne - (16:13): vmassol: ok cool  \ntmortagne - (16:15): jython 2.5.3b1 seems slower to initialize than 2.5.1... I hope it's not true for runtime  \nmflorea - (16:15): tmortagne: ok, thanks  \ntmortagne - (16:15): s/2.5.3b1/2.5.2b1/  \nvmassol - (16:28): any volunteer to implement a LivetableElement PO? :)  \ntemporalfox - (16:29): it looks like I found an important bug in confluence grammar but I'm not sure  \ntemporalfox - (16:29): in macro support  \ntemporalfox - (16:29): let's suppose we have a macro that does not need to be closed let's call it foo  \ntemporalfox - (16:30): \"{foo} abc\" will create more or less two blocks : the macro and the paragraph abc  \ntemporalfox - (16:30): any content before {foo} modifies the behavior  \ntemporalfox - (16:30): like \"a {foo} abc\" : the macro blocks grabs the rest of the text til another macro  \ntemporalfox - (16:30): in this case \"abc\" becomes part of the macro content  \ntemporalfox - (16:31): is it a known/expected behavior ?  \nCalebJamesDeLisl - (16:40): tmortagne: There are some flickering tests, that's not one I recognize, maybe it should be run again.  \ntmortagne - (16:40): temporalfox: pretty much nothing is known from use about Confluence parser but what you describe looks like a bug to me  \ntmortagne - (16:41): CalebJamesDeLisl: i'm checking build history  \ntmortagne - (16:41): s/use/us/  \nCalebJamesDeLisl - (16:41): vmassol: Lead dev and author of a book on testing asking for \\_my\\_ review on a test? lol. \u00a0\u00a0which revision?  \ntmortagne - (16:42): temporalfox: Mikhail is the only one who worked on it  \ntemporalfox - (16:42): yeah  \nvmassol - (16:42): CalebJamesDeLisl: you added a lot of apis in our test fwk so I want to be sure I've used them correctly and did miss any  \nvmassol - (16:42): (I almost missed the object edit page one already)  \nvmassol - (16:43): s/did/didn't/  \nvmassol - (16:43): :)  \nCalebJamesDeLisl - (16:43): I have a way of writing things which I need at the time then forgetting about them.  \nCalebJamesDeLisl - (16:43): I should have mentioned that it was there.  \nvmassol - (16:43): np  \ntmortagne - (16:43): CalebJamesDeLisl: according to build history it looks like a flickering test  \nvmassol - (16:43): the api is still in flux and moving  \nvmassol - (16:43): I've added a lot myself too today  \nCalebJamesDeLisl - (16:44): Thanks gor looking tmortagne I have a few flickering tests which i'm still trying to figure out how to fix.  \nvmassol - (16:44): who could work on fixing this one (or checking if we can reproduce)? http://jira.xwiki.org/jira/browse/XWIKI-5256 requires IE6/7  \nvmassol - (16:44): it seems an important enough issue  \ntmortagne - (16:45): CalebJamesDeLisl: sure, important thing for me right now is to fix all the real failing tests or what makes the tests fail to be able to release  \nCalebJamesDeLisl - (16:47): Does anyone have an opinion on where a deprecated service should go? \u00a0like $services.velocity.deprecated()?  \nCalebJamesDeLisl - (16:47): $services.tools.deprecated()?  \nvmassol - (16:55): ImportTest works locally for me  \nvmassol - (16:56): ok fixing it  \nvmassol - (16:57): the test code seems to be missing a wait  \nvmassol - (16:57): ah no  \nvmassol - (16:57): it's there  \nvmassol - (16:57): mis-read  \nflorinciu joined #xwiki at 17:06  \nsilviar left at 17:08 (Quit: Leaving.  \nvmassol - (17:09): I can't figure out why this one fails on hudson: http://hudson.xwiki.org/view/Functional%20Tests/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-ui/1010/testReport/org.xwiki.it.ui.administration/ImportTest/testImportWithNewHistoryVersion/  \nvmassol - (17:09): unless it's taking longer than 10 seconds...  \ntmortagne - (17:10): anyone has an idea of what is the issue with http://hudson.xwiki.org/view/Functional%20Tests/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-selenium/1010/testReport/com.xpn.xwiki.it.selenium/AllDocsTest/testTableViewActions/ ?  \nplunden left #xwiki at 17:14  \nvmassol - (17:18): tmortagne: some flickering that neesd to be fixed probably. I was planning to rewrite it as a ui-tests but it's going to take some time\u2026. we'll need a LivetableElement PO  \ntmortagne - (17:18): vmassol: not flickering  \ntmortagne - (17:19): it's faling since 40 builds  \nvmassol - (17:19): do you have it locally?  \ntmortagne - (17:19): not tested yet  \ntemporalfox - (17:40): I fixed the bug, the only problem I think is that the unit test for it was not correct according to my point of view, so I had to fix it too  \ntemporalfox - (17:40): but maybe I am wrong, as I'm not an expert  \ntmortagne - (17:44): vmassol: same failure locally  \nvmassol - (17:44): tmortagne: ok good, easy to fix then :)  \nvmassol - (17:44): I'm working on fixing http://hudson.xwiki.org/view/Functional%20Tests/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-ui/1010/testReport/org.xwiki.it.ui.administration/ImportTest/testImportWithNewHistoryVersion/ FTM  \ntmortagne - (17:45): vmassol: well i would need to understand what is wrong first  \nvmassol - (17:45): I do'nt know, would need to read test  \nEnygma` left at 17:51 (Quit: Leaving.  \nEnygma` joined #xwiki at 17:51  \nvmassol - (17:56): tmortagne: looking at your test since I'm waiting for a test rebuild  \ntmortagne - (17:56): vmassol: ok  \nvmassol - (17:57): ah I had put a nice comment cool  \nvmassol - (17:57): :)  \nvmassol - (17:57): I remember spending a lot of time fixing those flickering tests  \nvmassol - (17:57): maybe the Livetable has been modified since then  \ntmortagne - (17:57): yes i seen the comment but i can find what the test is seaeching when testing by hand  \nvmassol - (17:58): tmortagne: you need to read the js  \nvmassol - (17:58): I think that's what I did at the time  \nvmassol - (17:58): the livetable js  \nEnygma` left at 17:59 (Ping timeout: 240 seconds  \nvmassol - (18:00): checking  \ntmortagne - (18:04): vmassol: maybe what changed is waitForTextPresent, what we want in the test is to wait until the value is \"1\" but the first time waitForTextPresent checks it can find xwiki-livetable-pagination-content but it's not \"1\"  \nvmassol - (18:05): it'll wait till it's 1  \ntmortagne - (18:05): vmassol: then the error message is weird  \nvmassol - (18:05): why?  \ntmortagne - (18:05): \"not found or doesn't have the value\"  \nvmassol - (18:05): what is wrong?  \nvmassol - (18:06): it's correct  \nvmassol - (18:06): but not precise enough  \ntmortagne - (18:06): i understood it as \"it fond it but it's not the irght value\"  \nvmassol - (18:06): either  \nvmassol - (18:06): not found or found but not the right value  \nvmassol - (18:06): in any case it would be nice to make it print exactly the pb  \ntmortagne - (18:07): yes  \nvmassol - (18:07): would need to read up on the seleinuym api  \nvmassol - (18:07): that's why I handn't done it  \nvmassol - (18:07): it's a bit more work  \nvmassol - (18:07): I need to check what getText () returns  \nvmassol - (18:07): when the locator isn't found  \nflorinciu left at 18:08 (Read error: Connection reset by peer  \nvmassol - (18:08): if you have it in debug mode locally, could you check?  \nvmassol - (18:08): need to go for a bit  \nvmassol - (18:08): bbl  \ntmortagne - (18:20): i don't have it in debug mode i need to setup that  \nvmassol - (18:25): back  \nvmassol - (18:25): it's easy  \nvmassol - (18:25): no setup acually  \nvmassol - (18:25): \u00a0mvn install -Dpattern=XObjectsTest -Dmaven.surefire.debug  \nvmassol - (18:25): (for ex)  \nvmassol - (18:26): then do a remote debugging from your IDE  \ntmortagne - (18:27): sure by \"setup\" I meant \"I don't remember how to do that\" ;)  \nvmassol - (18:27): yep  \nvmassol - (18:27): but now you do :)  \nvmassol - (18:28): running too  \nvmassol - (18:30): ok if not found it'll throw a SeleniumException  \nvmassol - (18:30): I'll fix it  \nvmassol - (18:30): fix = improve the log  \nCalebJamesDeLisl - (18:30): Sent some observations about the test changes. was r29790 just shuffling stuff around?  \nvmassol - (18:30): hmmm  \nvmassol - (18:30): not easy actually  \nvmassol - (18:31): ah no it's ok  \ntmortagne - (18:31): sorry i have to go now, will look at it letter if you did not had time  \ntmortagne - (18:31): later  \nvmassol - (18:32): hmm no, not easy  \narkub left at 18:42 (Ping timeout: 240 seconds  \nvmassol - (18:42): CalebJamesDeLisl: I must have broken something: http://hudson.xwiki.org/view/Functional%20Tests/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-ui/1011/testReport/  \nvmassol - (18:44): ah i know  \nvmassol - (18:44): reverting  \nvmassol - (18:44): too bad it doesn't work like this  \nCalebJamesDeLisl - (18:44): That's odd. It says it couldn't find register\\_first\\_name but it's in the source.  \nvmassol - (18:45): my guess is that the until method is called several times  \nvmassol - (18:45): hmmm  \nvmassol - (18:45): no that cannot be  \nCalebJamesDeLisl - (18:45): Did you change waitUntilElementIsVisible?  \nvmassol - (18:45): yes  \nvmassol - (18:45): with a try/catch  \nvmassol - (18:45): to try to catch the timeout excpetion  \nCalebJamesDeLisl - (18:46): Ok, must have been the revision I didn't look at.  \nCalebJamesDeLisl - (18:47): Must be \"not displayed\"  \nvmassol - (18:48): hmm  \nCalebJamesDeLisl - (18:48): never mind, that didn't change.  \nvmassol - (18:48): the error is most certainly casued by my change  \nvmassol - (18:48): but I don't get why  \nvmassol - (18:48): the change to catch the timeout  \nvmassol - (18:50): indeed it's collapsed so not visible  \nCalebJamesDeLisl - (18:51): not this one http://hudson.xwiki.org/view/Functional%20Tests/job/xwiki-product-enterprise-tests/com.xpn.xwiki.products$xwiki-enterprise-test-ui/1011/testReport/org.xwiki.it.ui.administration/RegisterFromAdministrationTest/testRegisterExistingUser/  \nvmassol - (18:52): rollbacking for now  \nKermitTheFragger left at 18:53 (Quit: Leaving  \nCalebJamesDeLisl - (18:54): yea the exception was a bit ugly in hudson anyway.  \nvmassol - (18:54): done  \nCalebJamesDeLisl - (18:57): That is a bit of a mystery. Maybe new WebDriverWait( needs to be in the try clause? No idea why that would be.  \nCalebJamesDeLisl - (18:59): perhaps a try clause causes a problem for the final status of the WebDriver making it unavailable to the inner class?  \nCalebJamesDeLisl - (18:59): Maybe a jvm bug.  \nCalebJamesDeLisl - (19:00): I will test on OpenJVM just for curiosity.  \njvdrean left at 19:20 (Quit: Leaving.  \nabusenius left at 19:24 (Ping timeout: 245 seconds  \nxipe\\_ joined #xwiki at 19:55  \ntemporalfox - (19:55): who do I need to bug for my patch submission ?  \nCalebJamesDeLisl - (19:57): Yup, you can create one though.  \nxipe left at 19:59 (\\*.net \\*.split  \ntc left at 19:59 (\\*.net \\*.split  \nvmassol left at 19:59 (\\*.net \\*.split  \nevalica left at 19:59 (\\*.net \\*.split  \nvmassol joined #xwiki at 20:01  \ntc\\_ joined #xwiki at 20:07  \nxipe joined #xwiki at 20:07  \nCalebJamesDeLisl - (20:08): XAADMINISTRATION-154 Think I figured out the upgrading configuration problem.  \njvdrean joined #xwiki at 20:10  \nxipe left at 20:10 (Ping timeout: 258 seconds  \njvdrean left at 20:13 (Client Quit  \nabusenius joined #xwiki at 20:20  \nvmassol left at 20:43 (Quit: Leaving.  \ntmortagne - (20:52): temporalfox: you should create a corresponding issue for it (i will receive mail and look at it when i have some time)  \ntemporalfox - (20:53): I would like to have a release soon with my fixes  \ntemporalfox - (20:53): it would be cool  \ntemporalfox - (20:53): as other ppl in eXo use it too  \ntemporalfox - (20:53): unless I do my own release  \ntemporalfox - (20:53): but that would live in exo repository  \ntemporalfox - (20:53): or you add me as commiter on google code :-)  \ntmortagne - (20:56): temporalfox: you can do your own release, there will be no official release anyway, at best a XWiki release when i release 2.4M2  \ntemporalfox - (20:57): why is there no official release in the project ?  \ntemporalfox - (20:57): a particular reason ?  \ntmortagne - (20:57): temporalfox: not really we just get used to do release for our XWiki needs without waiting for official releases from mikhail (and too lazy to do that ourself)  \ntemporalfox - (20:58): who is mikhail ?  \ntmortagne - (20:58): in short Wikimodel project founder and leader  \ntmortagne - (20:59): see \"Owners\" on http://code.google.com/p/wikimodel/  \ntemporalfox - (21:01): I meant, is he working for a company, or is it just like a pet project ?  \ntmortagne - (21:01): temporalfox: i will not have time to look at your patch today but i will tomorrow morning, promise ;) (i would like to try to contact Mikhail if i can too to double validate the patch since you change some behavior if i understood well)  \ntmortagne - (21:01): temporalfox: pet project  \ntemporalfox - (21:01): ok, I'll submit the patch tonight  \ntemporalfox - (21:01): it should make my test suite pass at least  \ntmortagne - (21:01): yep  \ntemporalfox - (21:01): there were a couple of bugs  \ntemporalfox - (21:02): one in the parser itself  \ntemporalfox - (21:02): one in the link parser for images  \ntemporalfox - (21:02): plus the problem with the macro  \ntemporalfox - (21:02): and the various inline interpretation issues  \ntmortagne - (21:02): ok great you fixed all that  \ntmortagne - (21:03): I really have to go now otherwise my wife will hit me ;)  \ntemporalfox - (21:04): when is 2.4M2 expected ?  \ntmortagne - (21:04): 1 week ago :)  \ntmortagne - (21:04): should be tomorrow i hope  \ntemporalfox - (21:04): okay fair enough for me  \ntemporalfox - (21:04): patch will land in your mailbox tonight  \ntmortagne - (21:04): ok thanks  \ntmortagne - (21:05): bonne soir\u00e9e  \ntmortagne left at 21:05 (Quit: Leaving.  \njvdrean joined #xwiki at 21:21  \njvdrean left at 21:24 (Client Quit  \nnpm left at 22:08 (Quit: Leaving.  \nnpm joined #xwiki at 22:13  \nCalebJamesDeLisl - (22:29): is there a way to copy a document programmatically without PR?  \nflorinciu joined #xwiki at 22:30  \nnpm left at 22:34 (Ping timeout: 260 seconds  \nnpm joined #xwiki at 22:46  \nflorinciu left at 22:49 (Read error: Connection reset by peer  \nmflorea left at 23:04 (Quit: Leaving.  \njvdrean joined #xwiki at 23:40  \n  \n{{/code}}\n"}