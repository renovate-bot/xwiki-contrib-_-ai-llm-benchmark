{"id": "dev:IRC.xwikiArchive20170502", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20170502", "title": "IRC Archive for channel #xwiki on 02 May 2017 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n<Aranjedeath>\u00a0has quit  \n08:07\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n08:24\u00a0<evalica>\u00a0has joined #xwiki  \n08:28\u00a0<evalica>\u00a0has quit  \n08:39\u00a0<msmeria>\u00a0has joined #xwiki  \n08:49\u00a0<ClmentAubin[m]>\u00a0Hi everyone!  \n08:49\u00a0<ClmentAubin[m]>\u00a0I've been trying to create functionnal tests for the xwiki-platfom-notifications extension lately. In order to create a proper directory structure, I inspired me from the tests of xwiki-contrib/application-tour and xwiki-platfom-wysiwyg ; but when I run my tests, the tested XWiki instance does not come with Velocity (I get the error : \"Unable to load Velocity macro\"), which is mandatory for the tests to pass. Do I have  \n08:49\u00a0<ClmentAubin[m]>\u00a0to add specific dependencies to a pom.xml in order to get Velocity support?  \n08:49\u00a0<ClmentAubin[m]>\u00a0Also, I don't have this problem if I'm running the tests on an external instance.  \n09:09\u00a0<msmeria>\u00a0hello ClmentAubin[m]  \n09:09\u00a0<msmeria>\u00a0you need to add some dependecies to the Notifications-UI pom  \n09:10\u00a0<msmeria>\u00a0I've actually started to work on some functional tests for Notifications, but did't get that far  \n09:12\u00a0<msmeria>\u00a0these are the dependecies I've added: https://github.com/msmeria/xwiki-platform/blob/automation/xwiki-platform-core/xwiki-platform-notifications/xwiki-platform-notifications-ui/pom.xml#L38  \n09:26\u00a0<acotiuga>\u00a0has joined #xwiki  \n09:33\u00a0<amacsween[m]>\u00a0has left #xwiki  \n09:38\u00a0<faichelbaum>\u00a0has joined #xwiki  \n09:57\u00a0<Pbas>\u00a0Good morning everyone, there are problems to download extension atm  \n09:57\u00a0<Pbas>\u00a0I have this message when I want to download CKeditor: https://www.reddit.com/r/educationalgifs/comments/67vgbz/how\\_the\\_navy\\_seals\\_gets\\_over\\_a\\_wall/dguzza7/?context=3  \n09:58\u00a0<Pbas>\u00a0oups: No ExceptionMapper was found, but must be found  \n09:58\u00a0<Pbas>\u00a0from Download button on http://extensions.xwiki.org/xwiki/bin/view/Extension/CKEditor%20Integration  \n10:01\u00a0<ClmentAubin[m]>\u00a0msmeria: Thanks a lot ! I will try this solution as soon as possible !  \n10:01\u00a0<msmeria>\u00a0ClmentAubin[m]: np :)  \n10:03\u00a0<tmortagne[m]>\u00a0Pbas: looking, could you tell me on which node you are ? look at the footer you should have something like \"Powered by XWiki 8.4.4-node2\" or \"Powered by XWiki 8.4.4-node1\"  \n10:03\u00a0<Pbas>\u00a0Error 504 now: You Browser: Working -> London Cloudflare: Working -> extensions.xwiki.org:Host Error  \n10:03\u00a0<tmortagne[m]>\u00a0Pbas: I mean on a different page  \n10:03\u00a0<tmortagne[m]>\u00a0not when you get the error  \n10:03\u00a0<ClmentAubin[m]>\u00a0tmortagne (@tmortagne:matrix.xwiki.com): nexus.xwiki.org is also down (Proxy Error) ; could it be related ?  \n10:04\u00a0<tmortagne[m]>\u00a0definitely since extensions.xwiki.org just act as a proxy  \n10:04\u00a0<tmortagne[m]>\u00a0ok so looking at nexus then  \n10:04\u00a0<Pbas>\u00a0I have tihs error when I want to download extension and from xwiki 8.4.4 to list all ckeditor versions (I pass through a proxy)  \n10:05\u00a0<tmortagne[m]>\u00a0Pbas: yes this is because of nexus.xwiki.org which is the real source of the file  \n10:06\u00a0<Pbas>\u00a0Yes, I can not access to http://nexus.xwiki.org/  \n10:06\u00a0<Pbas>\u00a0thxs I will wait  \n10:08\u00a0<tmortagne[m]>\u00a0Pbas: should be ok now  \n10:09\u00a0<Pbas>\u00a0yes ty  \n10:10\u00a0<Pbas>\u00a0I will try upgrading from XWikiPreferences on my xwiki  \n10:12\u00a0<Pbas>\u00a0Il n'y a pas d'extension ayant l'identificateur 'org.xwiki.contrib:application-ckeditor-ui' et la version '1.14'. :-(  \n10:13\u00a0<Pbas>\u00a0https://github.com/xwiki-contrib/application-ckeditor/tree/master/application-ckeditor-plugins => 404 error  \n10:15\u00a0<Pbas>\u00a0ckeditor upgrade worked well last week but today not  \n10:18\u00a0<Pbas>\u00a0ho sorry my disk is full...  \n10:23\u00a0<evalica>\u00a0has joined #xwiki  \n10:23\u00a0<evalica>\u00a0has quit  \n10:23\u00a0<evalica>\u00a0has joined #xwiki  \n10:24\u00a0<Pbas>\u00a0Ok it's working better with nexus.xwiki.org up and a little bit of wiping on my disk :-)  \n10:28\u00a0<tmortagne[m]>\u00a0Pbas: in http://extensions.xwiki.org/xwiki/bin/view/Extension/Extension+Tweak you have an option to cleanup old uninstalled extension  \n10:34\u00a0<Pbas>\u00a0ha I didn't know it. I will give a try  \n10:34\u00a0<Pbas>\u00a0ty  \n10:37\u00a0<Slashman>\u00a0has joined #xwiki  \n10:49\u00a0<tmortagne[m]>\u00a0[WARN] Restarting MyXWiki.org on 9.3.1 in 1 hour, it will be down for a while because of a migration that needs to be executed on 223 wikis  \n10:54\u00a0<VincentMassol[m]>\u00a0fyi I've jut tweeted about it  \n10:54\u00a0<tmortagne[m]>\u00a0ok thanks  \n10:58\u00a0<ClmentAubin[m]>\u00a0One other question : on my way to create funcitonnal tests for xwiki-platform-notifications, I have to add a dependency with xwiki-platform-user-profile-ui by following the advice of msmeria (indeed, I can get the profile page working if the dependency isn\u2019t set). But when I add this dept, the servers throws an com.xpn.xwiki.store.migration.DataMigrationException and refuses to start (full stacktrace here :  \n10:58\u00a0<ClmentAubin[m]>\u00a0https://paste.atilla.org/paste/ZL8ZEO).  \n10:58\u00a0<ClmentAubin[m]>\u00a0I found out that this was also linked to another exception : org.hibernate.hql.ast.QuerySyntaxException: ActivityEventImpl is not mapped, so I tried to add another dependency to xwiki-platform-activitystream (UI and API) but it doesn\u2019t solves the problem. Any idea ?  \n11:02\u00a0<msmeria>\u00a0ClmentAubin[m]: yes, you also need dependencies to xwiki-platform-activitystream-api  \n11:03\u00a0<msmeria>\u00a0please see https://github.com/msmeria/xwiki-platform/commit/9e0b9a99658d9a145ca98c1a5efee7aa5589056f#diff-6c702854166d98b868196fd7ea7ea3a4 and https://github.com/msmeria/xwiki-platform/commit/9e0b9a99658d9a145ca98c1a5efee7aa5589056f#diff-14985dbecc54a8724b0f96f98f06f694  \n11:03\u00a0<tmortagne[m]>\u00a0caubin: you are probably missing a mapping in hibernate.cfg.xml  \n11:03\u00a0<tmortagne[m]>\u00a0see https://github.com/xwiki/xwiki-platform/blob/master/xwiki-platform-core/xwiki-platform-user/xwiki-platform-user-profile/xwiki-platform-user-profile-test/xwiki-platform-user-profile-test-tests/pom.xml#L41 for an example of project that needs activity stream  \n11:06\u00a0<ClmentAubin[m]>\u00a0Ok thanks a lot !  \n11:06\u00a0<ClmentAubin[m]>\u00a0So msmeria, are you working on https://jira.xwiki.org/browse/XWIKI-14238 ?  \n11:10\u00a0<tmortagne[m]>\u00a0vmassol: I think you did not understood my message from what I see in twitter  \n11:10\u00a0<tmortagne[m]>\u00a0I said I was starting the migration in 1 our, not that it now  \n11:10\u00a0<tmortagne[m]>\u00a0I said I was starting the migration in 1 our, not now  \n11:11\u00a0<msmeria>\u00a0ClmentAubin[m]: no, you can work on https://jira.xwiki.org/browse/XWIKI-14238 . I was mostly experimenting some stuff  \n11:11\u00a0<VincentMassol[m]>\u00a0ok I did not understand indeed, neve mind  \n11:11\u00a0<VincentMassol[m]>\u00a0\\*never mind  \n11:36\u00a0<VincentMassol[m]>\u00a0wow, new peak on http://www.xwiki.org/xwiki/bin/temp/space/page/chart/327616675.png at http://www.xwiki.org/xwiki/bin/view/ActiveInstalls/ :)  \n11:37\u00a0<cjd[m]>\u00a0nice pop  \n11:43\u00a0<Nehagup\\_>\u00a0has quit  \n12:15\u00a0<Nehagup\\_>\u00a0has joined #xwiki  \n12:17\u00a0<tmortagne[m]>\u00a0MyXWiki.org migration in progress, see http://myxwiki.org (yes it's slow)  \n12:38\u00a0<slayerjain>\u00a0has joined #xwiki  \n12:57\u00a0<msmeria1>\u00a0has joined #xwiki  \n13:00\u00a0<msmeria>\u00a0has quit  \n14:15\u00a0<msmeria>\u00a0has joined #xwiki  \n14:17\u00a0<msmeria1>\u00a0has quit  \n14:20\u00a0<martinus\\_\\_>\u00a0Hi there, in the folder configured by java.io.tmpdir, I have a bunch of files like 'jetty-0.0.0.0-8080-root-\\_-any-7233906106848987883.dir' (like one gigabyte) , is it cleaned up automatically ? When ? Can it be configured ?  \n14:26\u00a0<martinus\\_\\_>\u00a0especially the xwiki-temp/attachment-cache subfolder  \n15:35\u00a0<KermitTheFragger>\u00a0has joined #xwiki  \n15:57\u00a0<KermitTheFragger>\u00a0has quit  \n16:19\u00a0<msmeria>\u00a0has quit  \n16:24\u00a0<DarkKnightCZ>\u00a0has quit  \n16:30\u00a0<ClmentAubin[m]>\u00a0Does someone knows the name of the extension responsible for sending notifications (such as \u00abPage created\u00bb, \u00abPage updated\u00bb, etc \u2026) to the Event Stream Module (https://huit.re/xwiki-esm) ?  \n16:30\u00a0<VincentMassol[m]>\u00a0activity stream module has a istener to listener to listen to events  \n16:30\u00a0<VincentMassol[m]>\u00a0and to save them in the DB  \n16:35\u00a0<ClmentAubin[m]>\u00a0Ok, so the activitystream module is the only one responsible (by default) for creating notifications that will be retrived by xwiki-platform-notifications ? It seems that even if I add the activitystream-api module to \u00a0the dependencies of my tests, I can\u2019t get any notifcation to be displayed.  \n16:37\u00a0<tmortagne[m]>\u00a0caubin: historically notifications where a activity stream thing but now any extension can send events that will be converting to notifications  \n16:38\u00a0<tmortagne[m]>\u00a0s/converting/converted/  \n16:39\u00a0<VincentMassol[m]>\u00a0caubin: maybe your func test's pom.xml is wrong and you're missing a <xwikiDbHbmCommonExtraMappings> entry for  \n16:39\u00a0<VincentMassol[m]>\u00a0a  \n16:39\u00a0<VincentMassol[m]>\u00a0<xwikiDbHbmCommonExtraMappings>activitystream.hbm.xml</xwikiDbHbmCommonExtraMappings>  \n16:39\u00a0<VincentMassol[m]>\u00a0see for ex https://github.com/xwiki/xwiki-platform/blob/86aebdf26dd4c7dc5022f6bdc0fdeee9109e5802/xwiki-platform-core/xwiki-platform-user/xwiki-platform-user-directory/xwiki-platform-user-directory-test/xwiki-platform-user-directory-test-tests/pom.xml  \n16:41\u00a0<tmortagne[m]>\u00a0new stored event are those implementing org.xwiki.eventstream.RecordableEvent  \n16:41\u00a0<ClmentAubin[m]>\u00a0vmassol (@vmassol:matrix.xwiki.com): Yes, I already had this problem, but the missing extra mapping was preventig the server to start.  \n16:42\u00a0<tmortagne[m]>\u00a0they are catched by RecordableEventListener in activity stream module  \n16:42\u00a0<tmortagne[m]>\u00a0any extension can send RecordableEvent trough ObservationManager  \n16:42\u00a0<VincentMassol[m]>\u00a0(note: this is used by the xwiki packager plugin)  \n16:43\u00a0<tmortagne[m]>\u00a0you can look at the blog api to see example for such events being sent  \n16:43\u00a0<fathernelson>\u00a0has quit  \n16:44\u00a0<tmortagne[m]>\u00a0not sure if there is other modules right now  \n16:44\u00a0<VincentMassol[m]>\u00a0there's only blog ATM  \n16:45\u00a0<slayerjain>\u00a0has quit  \n16:45\u00a0<ClmentAubin[m]>\u00a0Ok ! So the ObservationManager seems to be a good track, thanks !  \n16:45\u00a0<tmortagne[m]>\u00a0depends what you are searching for  \n16:46\u00a0<tmortagne[m]>\u00a0all ObservationManager knows is events but it has no idea what a notification is, that's just a special kind of events  \n16:46\u00a0<slayerjain>\u00a0has joined #xwiki  \n16:47\u00a0<[d\\_\\_d]>\u00a0has quit  \n16:48\u00a0<ClmentAubin[m]>\u00a0I\u2019m currently searching for the module I\u2019m missing in order to display notifications with the notifications module. As I don\u2019t recieve any notification when I create / update a page on my test instance, I think that I\u2019m missing a dependency.  \n16:48\u00a0<ClmentAubin[m]>\u00a0I\u2019ll probably search for the different uses of the RecordableEvent and the ObservationManager in order to find the modules I\u2019m looking for.  \n16:55\u00a0<mflorea[m]>\u00a0tmortagne: is there a simple EM API to test is an extension is available (either installed on core extension)?  \n16:56\u00a0<mflorea[m]>\u00a0tmortagne: is there a simple EM API to test is an extension is available (either installed or core extension)?  \n17:04\u00a0<tmortagne[m]>\u00a0mflorea: you mean a single API that test installed and core extension reositories instead of two calls ?  \n17:04\u00a0<mflorea[m]>\u00a0yes  \n17:04\u00a0<tmortagne[m]>\u00a0no  \n17:04\u00a0<mflorea[m]>\u00a0ok, thanks  \n17:21\u00a0<acotiuga>\u00a0has left #xwiki  \n17:42\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n17:58\u00a0<DarkKnightCZ>\u00a0has quit  \n18:03\u00a0<fathernelson>\u00a0has joined #xwiki  \n18:06\u00a0<fathernelson>\u00a0has quit  \n18:08\u00a0<VincentMassol[m]>\u00a0mflorea: I had the same need not long ago and I remember discussing it briefly with thomas  \n18:08\u00a0<VincentMassol[m]>\u00a0I also think it would be nice to have that as otherwise you have to find out where it is located  \n18:09\u00a0<tmortagne[m]>\u00a0vmassol: why where it is located ? you ask for the current wiki  \n18:10\u00a0<tmortagne[m]>\u00a0the only issue is asking both core extension and installed extensions  \n18:10\u00a0<VincentMassol[m]>\u00a0by where I mean whether it's stored in the core extension or in the installed extensions  \n18:13\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n18:14\u00a0<tmortagne[m]>\u00a0guys you don't need me to add a two lines method in the script service if you really need it :)  \n18:36\u00a0<DarkKnightCZ>\u00a0has quit  \n18:59\u00a0<DarkKnightCZ>\u00a0has joined #xwiki  \n19:08\u00a0<evalica>\u00a0has quit  \n19:10\u00a0<[d\\_\\_d]>\u00a0has joined #xwiki  \n19:57\u00a0<Slashman>\u00a0has quit  \n19:58\u00a0<DarkKnightCZ>\u00a0has quit  \n20:10\u00a0<Slashman>\u00a0has joined #xwiki  \n20:11\u00a0<Slashman>\u00a0has quit  \n20:17\u00a0<ristretto[m]>\u00a0has joined #xwiki  \n21:03\u00a0<slayerjain>\u00a0has quit\n"}