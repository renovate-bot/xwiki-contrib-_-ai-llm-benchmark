{"id": "dev:IRC.xwikiArchive20111216", "url": "https://dev.xwiki.org/xwiki/bin/view/IRC/xwikiArchive20111216", "title": "IRC Archive for channel #xwiki on 16 December 2011 - XWiki", "collection": "Eval-Large", "mimetype": "text/markdown", "language": "en", "content": "\n00:22\u00a0<rrodriguez>\u00a0has joined #xwiki  \n00:33\u00a0<jvdrean>\u00a0has quit  \n00:35\u00a0<rrodriguez>\u00a0has quit  \n00:44\u00a0<rrodriguez>\u00a0has joined #xwiki  \n02:20\u00a0<sburjan`>\u00a0has quit  \n03:24\u00a0<tekzilla>\u00a0has quit  \n03:26\u00a0<tekzilla>\u00a0has joined #xwiki  \n05:13\u00a0<DrLou>\u00a0has quit  \n05:51\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f master\u000f \\* reb6ff18\u000f \u000f/ (11 files in 4 dirs):\u000f [release] Updated translations - http://git.io/YLqZ5Q  \n05:51\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f stable-3.3.x\u000f \\* r6bd81df\u000f \u000f/ (11 files in 4 dirs):\u000f [release] Updated translations - http://git.io/\\_Z72bA  \n06:00\u00a0<Denis>\u00a0has joined #xwiki  \n06:03\u00a0<Denis1>\u00a0has quit  \n07:01\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f master\u000f \\* rc79d05f\u000f \u000f/ (2 files):\u000f [release] Updating translations - http://git.io/Tw0ZDQ  \n07:01\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f stable-3.3.x\u000f \\* ra0ff861\u000f \u000f/ (2 files):\u000f [release] Updating translations ...  \n07:28\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-commons-3.3\u000f \\* r6444b5a\u000f \u000f/ pom.xml :\u000f [release] Preparing release xwiki-commons-3.3 - http://git.io/4uCCsA  \n07:30\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-commons-3.3\u000f \\* r09af15d\u000f \u000f/ (31 files in 31 dirs):\u000f [maven-release-plugin] prepare release xwiki-commons-3.3 - http://git.io/Lm9KMw  \n07:34\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-rendering-3.3\u000f \\* r6975b32\u000f \u000f/ pom.xml :\u000f [release] Preparing release xwiki-rendering-3.3 - http://git.io/OOhztw  \n07:34\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-rendering-3.3\u000f \\* rdc56f07\u000f \u000f/ (26 files in 26 dirs):\u000f [maven-release-plugin] prepare release xwiki-rendering-3.3 - http://git.io/qnZfiA  \n07:46\u00a0<vmassol>\u00a0has joined #xwiki  \n07:47\u00a0<rrodriguez>\u00a0has quit  \n08:22\u00a0<mflorea>\u00a0has joined #xwiki  \n08:27\u00a0<sburjan`>\u00a0has joined #xwiki  \n08:29\u00a0<Denis2>\u00a0has joined #xwiki  \n08:30\u00a0<@sdumitriu>\u00a0vmassol: Any idea what this means?  \n08:30\u00a0<@sdumitriu>\u00a0mmap failed for CEN and END part of zip file  \n08:30\u00a0<@sdumitriu>\u00a0I get this when trying to release xwiki-platform  \n08:30\u00a0<@sdumitriu>\u00a0It occurs at:  \n08:30\u00a0<@sdumitriu>\u00a0maven-bundle-plugin:2.3.5:manifest (bundle-manifest) @ xwiki-platform-oldcore  \n08:31\u00a0<@sdumitriu>\u00a0For: /home/release/.m2/repository/com/novell/ldap/jldap/4.3/jldap-4.3.jar  \n08:31\u00a0<@sdumitriu>\u00a0But the jar is fine, I can extract it both with unzip, jar, and java -jar  \n08:31\u00a0<Denis>\u00a0has quit  \n08:36\u00a0<tmortagne>\u00a0has joined #xwiki  \n08:36\u00a0<vmassol>\u00a0hmm never seen this maven error  \n08:38\u00a0<vmassol>\u00a0I see there's a 2.3.6 version of the maven bundle plugin but I don't know if it helps  \n08:38\u00a0<vmassol>\u00a0http://svn.apache.org/repos/asf/felix/releases/maven-bundle-plugin-2.3.6/doc/site/jira-report.html  \n08:43\u00a0<@sdumitriu>\u00a0I could try  \n08:46\u00a0<@sdumitriu>\u00a0Huh? \"No plugin found for prefix 'maven-bundle-plugin'\"  \n08:47\u00a0<@sdumitriu>\u00a0Ah, my bad  \n08:48\u00a0<@sdumitriu>\u00a0But when I run it manually, it works well  \n08:49\u00a0<Denis2>\u00a0is now known as <Denis>  \n08:58\u00a0<@sdumitriu>\u00a0vmassol: But do we need to generate an OSGi manifest for oldcore?  \n08:58\u00a0<vmassol>\u00a0we need it for oldocre as much as for the other jars  \n08:59\u00a0<vmassol>\u00a0in theory I doubt anyone is using our jars in osgi but who knows  \n08:59\u00a0<vmassol>\u00a0it's good to have them  \n08:59\u00a0<@sdumitriu>\u00a0Yeah, and I have a feeling it's not related to the bundle plugin anyway  \n08:59\u00a0<vmassol>\u00a0(be a good osgi citizens)  \n09:00\u00a0<@sdumitriu>\u00a0Could be related to the fact that it's a i386 machine, unlike the other agent machines  \n09:00\u00a0<@sdumitriu>\u00a0I started the release on agent1 now to see if it works there  \n09:07\u00a0<+tmortagne>\u00a0sdumitriu: if you are talking about agent-3 it has some issue it seems since it often fail to build test and even platform (generally the WYSIWYG war)  \n09:07\u00a0<vmassol>\u00a0note: we have 2 func tests that started failing on 3.3: http://ci.xwiki.org/job/xwiki-enterprise-test-selenium-3.3/  \n09:08\u00a0<vmassol>\u00a0s/2 func tests/2 test runs/  \n09:08\u00a0<vmassol>\u00a0testCreateAndDeleteGroup  \n09:08\u00a0<vmassol>\u00a0we might have a regression there  \n09:08\u00a0<@sdumitriu>\u00a0I see that there's only one left now  \n09:12\u00a0<@sdumitriu>\u00a0That there's no build manager this week  \n09:15\u00a0<jvdrean>\u00a0has joined #xwiki  \n09:27\u00a0<@sdumitriu>\u00a0Going to sleep, my eyes are very itchy  \n09:28\u00a0<sdumitriu>\u00a0has quit  \n09:28\u00a0<vmassol>\u00a0ok nn, sdumitriu when \u2026..  \n09:28\u00a0<vmassol>\u00a0too late....  \n09:34\u00a0<sburjan>\u00a0has joined #xwiki  \n09:42\u00a0<+sburjan>\u00a0good morning  \n09:42\u00a0<+sburjan>\u00a0vmassol: I don't have the Garrlery Macro issue anymore. Did you do something to it ?  \n09:43\u00a0<vmassol>\u00a0sburjan: gm, nope  \n09:43\u00a0<+sburjan>\u00a0I tried with Chrome 16 and FF 3.6 and it looks ok now  \n09:43\u00a0<vmassol>\u00a0it's working but the L&F is really bad  \n09:43\u00a0<vmassol>\u00a0way too much back  \n09:43\u00a0<vmassol>\u00a0\\*black  \n09:45\u00a0<vmassol>\u00a0btw 7 UI tests failing on postgresql 9.1, compared to only 3 for HSQLDB (these 3 are always failing on my mac) - This means 4 test failing on postgres  \n09:46\u00a0<vmassol>\u00a0out of 136 tests  \n09:46\u00a0<vmassol>\u00a0going to run the full test suite on oracle 10g now  \n09:46\u00a0<+sburjan>\u00a0you're running them locally, right  \n09:46\u00a0<vmassol>\u00a0yes  \n09:47\u00a0<+tmortagne>\u00a0vmassol: how do you run the test or postgres and oracle ? you setup a running XWiki by hand first ?  \n09:48\u00a0<vmassol>\u00a0yes  \n09:48\u00a0<+tmortagne>\u00a0ok  \n09:48\u00a0<vmassol>\u00a0I call the tests from my IDE actually but you should be able to do something similar from the command line by changing a bit the pom.xml (we could define a profile for that too)  \n09:48\u00a0<+tmortagne>\u00a0probably  \n09:50\u00a0<jvdrean>\u00a0has quit  \n09:52\u00a0<vmassol>\u00a0tmortagne: oh thought it was sorin asking me actually ;)  \n09:52\u00a0<+tmortagne>\u00a0:)  \n09:52\u00a0<vmassol>\u00a0which is why I mentioned the command line...  \n09:53\u00a0<+tmortagne>\u00a0I was wondering if you already did some work on the pom.xml to be able to execute test for postgres and oracle ;)  \n09:53\u00a0<vmassol>\u00a0not yet  \n09:53\u00a0<vmassol>\u00a0but I'd really like  \n09:53\u00a0<vmassol>\u00a0that  \n09:53\u00a0<vmassol>\u00a0so that we can setup agents  \n09:54\u00a0<vmassol>\u00a0actually it's supposed to work  \n09:54\u00a0<+tmortagne>\u00a0yep would be nice  \n09:54\u00a0<vmassol>\u00a0except that we don't clean the DB  \n09:54\u00a0<vmassol>\u00a0in the database module  \n09:54\u00a0<vmassol>\u00a0we jsut import the xar  \n09:54\u00a0<+tmortagne>\u00a0well it's not really database module job I think  \n09:54\u00a0<+tmortagne>\u00a0it should be done at test level  \n09:54\u00a0<vmassol>\u00a0well we can refactor  \n09:55\u00a0<vmassol>\u00a0but this is what the database modules were doing when I coded them  \n09:55\u00a0<vmassol>\u00a0ie importing data in the DB  \n09:55\u00a0<vmassol>\u00a0basically after the database module is executed  \n09:55\u00a0<vmassol>\u00a0you have a filled DB  \n09:55\u00a0<vmassol>\u00a0for some DB we package them as zip, etc  \n09:56\u00a0<+tmortagne>\u00a0yes but in the case of test we don't execute database module on jenkins  \n09:56\u00a0<vmassol>\u00a0and for others they're not packaged since it's hard to do  \n09:56\u00a0<vmassol>\u00a0we do I think  \n09:56\u00a0<vmassol>\u00a0since we run the full XE build  \n09:56\u00a0<vmassol>\u00a0it's just  \n09:56\u00a0<vmassol>\u00a0that we don't run the right profile  \n09:56\u00a0<vmassol>\u00a0we only run the hsqldb one ATM  \n09:56\u00a0<+tmortagne>\u00a0IMO database module should stay only for packaged databases and we should use some import/cleaner maven plugin in the test init  \n09:57\u00a0<+tmortagne>\u00a0no we don't  \n09:57\u00a0<+tmortagne>\u00a0there is a build for XE and then one build by test project  \n09:57\u00a0<+tmortagne>\u00a0alone  \n09:57\u00a0<vmassol>\u00a0the test projet depend on the XE one  \n09:57\u00a0<+tmortagne>\u00a0so we never build the database module with the tests  \n09:57\u00a0<vmassol>\u00a0they're only triggered  \n09:57\u00a0<vmassol>\u00a0when XE rebuilds  \n09:57\u00a0<+tmortagne>\u00a0there \u00a0is no reason for them to build on the same agent than XE  \n09:58\u00a0<+tmortagne>\u00a0so no it's not going to work  \n09:58\u00a0<vmassol>\u00a0indeed that's one issue  \n09:58\u00a0<+tmortagne>\u00a0and again IMO \u00a0it's test project job to setup its test environment  \n09:58\u00a0<+tmortagne>\u00a0you should be able to build it alone  \n09:58\u00a0<vmassol>\u00a0I don't agree  \n09:59\u00a0<vmassol>\u00a0at least for hsqldb  \n09:59\u00a0<vmassol>\u00a0the reason I did it like this  \n09:59\u00a0<vmassol>\u00a0was that we're testing exactly what is shipped  \n09:59\u00a0<vmassol>\u00a0(again for hsqldfb and other embeddable DBs only)  \n09:59\u00a0<vmassol>\u00a0for other dbs I never did anything really  \n09:59\u00a0<+tmortagne>\u00a0I don't understand, we build the hsqldb test projects alone all the time  \n10:00\u00a0<+tmortagne>\u00a0if you do a mvn clean install the database is reseted  \n10:00\u00a0<vmassol>\u00a0it's depending on the hsqldb database module  \n10:00\u00a0<vmassol>\u00a0there's no other import  \n10:00\u00a0<+tmortagne>\u00a0lkike it depends on platform  \n10:00\u00a0<+tmortagne>\u00a0like  \n10:00\u00a0<+tmortagne>\u00a0because it's easier like that  \n10:00\u00a0<+tmortagne>\u00a0we can't pakage database for others  \n10:01\u00a0<+tmortagne>\u00a0expect javadb  \n10:01\u00a0<+tmortagne>\u00a0so we have to import  \n10:01\u00a0<vmassol>\u00a0yep this is what I said above  \n10:01\u00a0<+tmortagne>\u00a0but the idea is the same: the database is reseted by test project  \n10:01\u00a0<vmassol>\u00a0the other option is to create VMs  \n10:01\u00a0<vmassol>\u00a0as part of the build  \n10:02\u00a0<vmassol>\u00a0it's quite interesting too  \n10:02\u00a0<+tmortagne>\u00a0that's probably way more complex  \n10:02\u00a0<vmassol>\u00a0since it would allow us to package a full environment  \n10:02\u00a0<vmassol>\u00a0for end users  \n10:02\u00a0<vmassol>\u00a0I remember I found a maven plugin for doing that a while back  \n10:02\u00a0<vmassol>\u00a0yes it's more complex  \n10:03\u00a0<vmassol>\u00a0and probaly more time consuming too  \n10:03\u00a0<vmassol>\u00a0it's also way cleaner and has some other advantages  \n10:03\u00a0<vmassol>\u00a0it's the saint graal for me :)  \n10:06\u00a0<vmassol>\u00a0http://vagrantup.com/ for ex (that's not the one I had found earlier on)  \n10:16\u00a0<+sburjan>\u00a0isn't there any maven plugin that resets db before starting the test suite ?  \n10:16\u00a0<vmassol>\u00a0there is  \n10:16\u00a0<vmassol>\u00a0http://www.dbunit.org/  \n10:16\u00a0<vmassol>\u00a0(for ex)  \n10:17\u00a0<vmassol>\u00a0(I've used it a long time ago)  \n10:17\u00a0<silviar>\u00a0has joined #xwiki  \n10:17\u00a0<+sburjan>\u00a0so this would clean the db before \\_each\\_ test or before \\_each\\_ test suite ?  \n10:17\u00a0<vmassol>\u00a0there might be more alternatives now  \n10:17\u00a0<vmassol>\u00a0test suite  \n10:17\u00a0<vmassol>\u00a0it's too long otherwise  \n10:18\u00a0<+sburjan>\u00a0yeah ...  \n10:20\u00a0<CIA-115>\u00a0tmortagne\u000f master\u000f \\* r8f5826d\u000f \u000f/ xwiki-platform-core/xwiki-platform-extension/xwiki-platform-extension-repositories/xwiki-platform-extension-repository-xwiki/xwiki-platform-extension-repository-xwiki-server-api/src/main/java/org/xwiki/extension/repository/xwiki/internal/resources/ExtensionVersionFileRESTResource.java :\u000f Update comment - http://git.io/wa\\_Wqg  \n10:26\u00a0<jvdrean>\u00a0has joined #xwiki  \n10:27\u00a0<+sburjan>\u00a0http://www.cubrid.org/  \n10:34\u00a0<vmassol>\u00a0nice presentation: http://www.slideshare.net/jedi4ever/manage-your-devtestprod-like-a-cloud  \n10:52\u00a0<lucaa>\u00a0has joined #xwiki  \n11:32\u00a0<+jvdrean>\u00a0hi, if I use {{include document=\"Included.Document\" context=\"new\"/}} do I have a way to know that I'm included from another document when in a Included.Document script ?  \n11:38\u00a0<+jvdrean>\u00a0$context.tdoc does the trick  \n11:42\u00a0<+lucaa>\u00a0odd, it shouldn't :)  \n11:42\u00a0<+lucaa>\u00a0tdoc is only supposed to be the translated $context.doc :)  \n11:48\u00a0<+jvdrean>\u00a0do you know any proper way to do it ?  \n11:50\u00a0<vmassol>\u00a0jvdrean: you could look for METADATA info in the XDOM  \n11:50\u00a0<vmassol>\u00a0(not sure if it's the best solution though but it would work)  \n11:51\u00a0<vmassol>\u00a0looking for the Metadata.SOURCE above your block  \n11:56\u00a0<vmassol>\u00a0sburjan: 6 tests failijg on oracle, so that's 3 in real\u2026. so HSQLDB = 0, postgresql = 4, oralce = 3 failing  \n12:05\u00a0<evalica>\u00a0has joined #xwiki  \n12:11\u00a0<vmassol>\u00a0lunch time, bbl  \n12:15\u00a0<mflorea>\u00a0has quit  \n12:25\u00a0<+sburjan>\u00a0vmassol: I wonder where oracle fails  \n12:32\u00a0<+jvelociter>\u00a0Hello  \n12:33\u00a0<vmassol>\u00a0hello  \n12:35\u00a0<vmassol>\u00a0deleting a page for ex  \n12:35\u00a0<vmassol>\u00a0(sburjan)  \n12:36\u00a0<vmassol>\u00a0scheduler test too  \n12:37\u00a0<vmassol>\u00a0and whatlist  \n12:37\u00a0<+sburjan>\u00a0I am going to lunch, I will check deleting a page when I get back  \n12:37\u00a0<vmassol>\u00a0you won't see much  \n12:38\u00a0<vmassol>\u00a0except that it doesn't show the recycle bin  \n12:38\u00a0<+sburjan>\u00a0so no console messages ?  \n12:38\u00a0<vmassol>\u00a0no  \n12:38\u00a0<+sburjan>\u00a0so we don't fully support oracle in 3.3 ?  \n12:38\u00a0<vmassol>\u00a0we don't fully support any DB in 3.3  \n12:38\u00a0<vmassol>\u00a0I can find you issues with all DBs  \n12:39\u00a0<+sburjan>\u00a0ok, then we need that thing you proposed on devlist  \n12:39\u00a0<vmassol>\u00a0what's important is to tell users what's know to not work I think  \n12:40\u00a0<+sburjan>\u00a0assuring support on browsers is hard enough already, adding also the db's .. it's gonna make my life a hell. big +1 to find a way to run agents on diferent db's  \n12:40\u00a0<vmassol>\u00a0sburjan: you haven't done much to make your life simple so far  \n12:41\u00a0<+sburjan>\u00a0wdym ?  \n12:41\u00a0<vmassol>\u00a0if I were you i'd have automated so many more things from the onset  \n12:41\u00a0<vmassol>\u00a0ie running the test suite on various browsers  \n12:41\u00a0<vmassol>\u00a0and various DBs  \n12:41\u00a0<vmassol>\u00a0you seem to be waiting for someone to do it for you :)  \n12:42\u00a0<+sburjan>\u00a0well I was referring to manual testing  \n12:42\u00a0<vmassol>\u00a0yes exactly  \n12:42\u00a0<vmassol>\u00a0why do that?  \n12:42\u00a0<vmassol>\u00a0it's like washing the dishes manually vs using a wahsing machine ;)  \n12:42\u00a0<+sburjan>\u00a0back be in 30  \n12:42\u00a0<vmassol>\u00a0ok  \n12:43\u00a0<vmassol>\u00a0(note: there are still stuff that cannot be autimated but all stuff that can be automated should be automated)  \n12:53\u00a0<vmassol>\u00a0sburjan: the scheduler job issue is the delete page issue since the test deletes a job and restores it  \n12:55\u00a0<Enygma`>\u00a0has joined #xwiki  \n12:59\u00a0<silviar>\u00a0has quit  \n13:00\u00a0<vmassol>\u00a0hmm I don't understand the testWatchThisPageAndWholeSpace test  \n13:00\u00a0<vmassol>\u00a0it sets watch on a page and a space  \n13:00\u00a0<vmassol>\u00a0and then trigger the job  \n13:00\u00a0<vmassol>\u00a0but I don't see where it makes modifications to the watched elements  \n13:01\u00a0<vmassol>\u00a0thus I don't see how we can receive the email  \n13:01\u00a0<vmassol>\u00a0tmortagne: seems you coded it, maybe you can help me?  \n13:02\u00a0<vmassol>\u00a0(actually not coded but moved it to sel2)  \n13:06\u00a0<CIA-115>\u00a0Vincent Massol\u000f stable-3.3.x\u000f \\* r49d1e81\u000f \u000f/ xwiki-enterprise-test/xwiki-enterprise-test-ui/src/test/it/org/xwiki/test/ui/watchlist/WatchThisPageAndWholeSpaceTest.java :\u000f Improved comments a bit - http://git.io/GKrFvA  \n13:07\u00a0<CIA-115>\u00a0Vincent Massol\u000f master\u000f \\* rbe854c2\u000f \u000f/ xwiki-enterprise-test/xwiki-enterprise-test-ui/src/test/it/org/xwiki/test/ui/watchlist/WatchThisPageAndWholeSpaceTest.java :\u000f Improved comments a bit - http://git.io/20GD5g  \n13:08\u00a0<vmassol>\u00a0guys if you can answer on the \"user profile\" split on the devs list, I could start doing it so that silvia can start documenting the user profile feature\u2026 :)  \n13:18\u00a0<mflorea>\u00a0has joined #xwiki  \n13:30\u00a0<+jvelociter>\u00a0mflorea: Hi !  \n13:30\u00a0<+mflorea>\u00a0Hi Jerome  \n13:30\u00a0<+jvelociter>\u00a0question : is it possible with the sheet system to have my sheet rendered in the context of the document it is applied to ?  \n13:30\u00a0<+jvelociter>\u00a0(as opposed to the context of the sheet itself as it is the case it seems)  \n13:31\u00a0<+jvelociter>\u00a0here's my problem: at some point I use $doc.content in the sheet, so that the content of the document is rendered. But relative images/attachemnts URI are wrong  \n13:32\u00a0<+jvelociter>\u00a0(and I don't want to fix them since I want my pages to be editable via normal WYSIWYG)  \n13:33\u00a0<+jvelociter>\u00a0do you see my issue ?  \n13:34\u00a0<+mflorea>\u00a0I'm not sure I fully understand. When a sheet is applied, it is rendered in the context of the document it is applied to. i.e. $doc is the document the sheet is applied to, not the sheet.  \n13:34\u00a0<+mflorea>\u00a0so the context document is the document the sheet is applied to  \n13:35\u00a0<+mflorea>\u00a0I don't understand why you get wrong URLs  \n13:36\u00a0<+mflorea>\u00a0let me try something locally  \n13:41\u00a0<+mflorea>\u00a0jvelociter: I can reproduce, let me debug to understand the reason.  \n13:44\u00a0<+tmortagne>\u00a0vmassol: what the mail send is the following modifications I think:  \n13:44\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// Watch Test.TestWatchThisPage  \n13:44\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ViewPage page = getUtil().createPage(\"Test\", \"TestWatchThisPage\", \"TestWatchThisPage ui\", null);  \n13:44\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0page.watchDocument();  \n13:44\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// Watch TestWatchWholeSpace  \n13:44\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0page = getUtil().createPage(\"TestWatchWholeSpace\", \"Test1\", \"TestWatchWholeSpace ui\", null);  \n13:44\u00a0<+tmortagne>\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0page.watchSpace();  \n13:44\u00a0<+tmortagne>\u00a0I guess watchlist does not start watching when you enable it but actually send you the last 24h when the daily watchlist scheduler job run for example  \n13:46\u00a0<+jvelociter>\u00a0mflorea: yes, actually it looks like a bug  \n13:46\u00a0<+mflorea>\u00a0yes  \n13:46\u00a0<+jvelociter>\u00a0let me know, I can provide you with a XAR if you want  \n13:46\u00a0<+tmortagne>\u00a0it actually behave like {{include document=\"sheet\"}}  \n13:47\u00a0<+tmortagne>\u00a0because of the source is used to resolve the references  \n13:47\u00a0<+tmortagne>\u00a0what vmassol was talking about  \n13:47\u00a0<+mflorea>\u00a0then I need to set the source to the doc the sheet is applied to  \n13:48\u00a0<+tmortagne>\u00a0or simply remove the SOURCE metadata from the sheet XDOM  \n13:48\u00a0<+tmortagne>\u00a0so that it does not override  \n13:48\u00a0<+mflorea>\u00a0ok  \n13:49\u00a0<+tmortagne>\u00a0depend what you do exactly with the sheet XDOM actually I guess  \n13:49\u00a0<+tmortagne>\u00a0if it's inserted in another one of executed alone  \n14:03\u00a0<+mflorea>\u00a0tmortagne: there's no removeMetaData so I guess the only option is to use addMetaData to overwrite the \"source\" key  \n14:05\u00a0<+tmortagne>\u00a0or add removeMetaData  \n14:05\u00a0<+mflorea>\u00a0:)  \n14:05\u00a0<+tmortagne>\u00a0vmassol ?  \n14:05\u00a0<vmassol>\u00a0otp  \n14:06\u00a0<+mflorea>\u00a0I'm wondering what's best: to keep the source meta data specified or not.  \n14:07\u00a0<+mflorea>\u00a0I think it's better to set the source meta data to the document the sheet is applied to  \n14:07\u00a0<+tmortagne>\u00a0well if we don't want to override the best should be to remove it from this POV  \n14:07\u00a0<+tmortagne>\u00a0since you already setup everything needed to execute the XDOM in the context of the proper document  \n14:08\u00a0<+tmortagne>\u00a0mflorea: how is this XDOM produced ?  \n14:08\u00a0<+tmortagne>\u00a0since the rendering parsers don't set the source  \n14:08\u00a0<+mflorea>\u00a0yeah, but still, someone could use the document displayed independently, obtain the XDOM and include it else where. In this case it's better to have the source meta data  \n14:09\u00a0<+mflorea>\u00a0the XDOM is produced by rendering the sheet document (in the context of the document the sheet is applied to)  \n14:09\u00a0<silviar>\u00a0has joined #xwiki  \n14:10\u00a0<+mflorea>\u00a0i.e. the document the sheet is applied to is put on the context and then the sheet is displayed with the default content displayer  \n14:10\u00a0<+tmortagne>\u00a0I mean how exactly, \"rendering the sheet document\" does not tell me what code actually create the DOM  \n14:10\u00a0<+mflorea>\u00a0document content displayer  \n14:11\u00a0<+mflorea>\u00a0documentDisplayer.display(sheet, displayParameters)  \n14:11\u00a0<+tmortagne>\u00a0what is sheet ?  \n14:11\u00a0<+tmortagne>\u00a0looking  \n14:12\u00a0<+mflorea>\u00a0sheet is a document  \n14:12\u00a0<+mflorea>\u00a0the sheet is displayed as any other document. The difference is that it is not rendered in its own context. The context document != sheet document  \n14:13\u00a0<silviar>\u00a0has quit  \n14:13\u00a0<+mflorea>\u00a0look in SheetDocumetDisplayer#display(DocumentModelBridge document, DocumentModelBridge sheet, DocumentDisplayerParameters parameters)  \n14:14\u00a0<+mflorea>\u00a0and DocumentContentDisplayer#display(DocumentModelBridge document, DocumentDisplayerParameters parameters)  \n14:14\u00a0<+mflorea>\u00a0(the first is in oldcore, the second is in display module)  \n14:15\u00a0<+tmortagne>\u00a0ok so the SOURCE metadat is set by XWikiDocument#getXDOM  \n14:17\u00a0<+mflorea>\u00a0yes  \n14:18\u00a0<+tmortagne>\u00a0problem is that you don't have the XDOM in SheetDocumentDisplayer  \n14:18\u00a0<+tmortagne>\u00a0so you can't modify it here  \n14:18\u00a0<+mflorea>\u00a0I have it  \n14:18\u00a0<+mflorea>\u00a0I return it in display  \n14:18\u00a0<+tmortagne>\u00a0I see you call  \n14:18\u00a0<+tmortagne>\u00a0return documentDisplayer.display(sheet, sheetDisplayParameters);  \n14:18\u00a0<+mflorea>\u00a0yes  \n14:18\u00a0<+tmortagne>\u00a0display executed the transformations already  \n14:19\u00a0<+mflorea>\u00a0ah, so you say that its too late  \n14:19\u00a0<+tmortagne>\u00a0not for references I think but the SOURCE is not only used for references  \n14:19\u00a0<+mflorea>\u00a0hmm, why is it too late to set the source there?  \n14:20\u00a0<+mflorea>\u00a0indeed  \n14:20\u00a0<+tmortagne>\u00a0any macro could look at it and behave like references  \n14:21\u00a0<+tmortagne>\u00a0now the thing is that the source is right and should probably stay like this  \n14:21\u00a0<silviar>\u00a0has joined #xwiki  \n14:21\u00a0<+tmortagne>\u00a0what needed is to implements the separation between base reference and source  \n14:22\u00a0<+mflorea>\u00a0indeed, because right now source is used as base ref  \n14:22\u00a0<+tmortagne>\u00a0vmassol proposed it in a mail I think already but it's not done yet  \n14:22\u00a0<+tmortagne>\u00a0yep  \n14:22\u00a0<+tmortagne>\u00a0was a mail about include macro refactoring for the same issues basically  \n14:22\u00a0<vmassol>\u00a0is that the mail that Denis didn't like? :)  \n14:22\u00a0<vmassol>\u00a0(the one about the display macro)  \n14:22\u00a0<DrLou>\u00a0has joined #xwiki  \n14:23\u00a0<vmassol>\u00a0I wanted to implement it two weeks ago but I re-read the thread and found that we didn't all agree about it  \n14:23\u00a0<+tmortagne>\u00a0what Denis didn't like the difference between $doc.getURL and [reference]  \n14:23\u00a0<vmassol>\u00a0so I dropped it from my todo queue  \n14:23\u00a0<+tmortagne>\u00a0there was lot of thing in that mail  \n14:23\u00a0<vmassol>\u00a0yes  \n14:23\u00a0<+tmortagne>\u00a0the separation between source and base reference is still valid  \n14:24\u00a0<+tmortagne>\u00a0the proposal should probably be cut in peaces  \n14:25\u00a0<vmassol>\u00a0\"I guess watchlist does not start watching when you enable it but actually send you the last 24h when the daily watchlist scheduler job run for example\" hmmm this means the test can fail depending of when you run it....  \n14:26\u00a0<+tmortagne>\u00a0vmassol: why ?  \n14:26\u00a0<+tmortagne>\u00a0we could implement just this part for now so that mflorea can use it in displayers  \n14:27\u00a0<+tmortagne>\u00a0and make the part about making include macro configurable \u00a0on that since Denis was only talking about the default behavior  \n14:27\u00a0<vmassol>\u00a0imagine that the 2 test docs are created at 23:59:59 and that the trigger of the \u00a0daily notifier happens at 24:00:01  \n14:27\u00a0<+tmortagne>\u00a0would still be in the last 24h  \n14:28\u00a0<+tmortagne>\u00a0not the same day ok but I doubt it's based on the same day  \n14:28\u00a0<vmassol>\u00a0hmm ok  \n14:28\u00a0<+tmortagne>\u00a0but I don't really know much about it  \n14:28\u00a0<+tmortagne>\u00a0just guessing based on the test  \n14:28\u00a0<vmassol>\u00a0in any case that's not the reason why it fails for me  \n14:28\u00a0<+mflorea>\u00a0jvelociter: the conclusion is that it's not easy to fix on my side. I need some changes in the rendering.  \n14:29\u00a0<+jvelociter>\u00a0mflorea:  \n14:29\u00a0<+jvelociter>\u00a0OK  \n14:29\u00a0<+jvelociter>\u00a0but I think it should have high priority  \n14:29\u00a0<+mflorea>\u00a0yes, I'll raise a jira isue  \n14:29\u00a0<+tmortagne>\u00a0yep  \n14:29\u00a0<+jvelociter>\u00a0it kind of breaks the whole purpose of the sheet system right now  \n14:29\u00a0<+jvelociter>\u00a0cool  \n14:31\u00a0<+Denis>\u00a0tmortagne: what I have also said, is that if we need a flexible solution, this should go in parameter of the link, not the whole page  \n14:31\u00a0<+tmortagne>\u00a0vmassol: make me rememeber that the hack for the livetable in that test can now be removed  \n14:31\u00a0<vmassol>\u00a0would be nice indeed  \n14:31\u00a0<+tmortagne>\u00a0Denis: we can have both  \n14:31\u00a0<vmassol>\u00a0I'm trying to debug why the watchlig mail isn't sent rightnow  \n14:32\u00a0<+Denis>\u00a0tmortagne: sure, but I would not agree on a default that is contradictory between getURL et []  \n14:32\u00a0<+tmortagne>\u00a0vmassol: no mail at all, and the things are properly watched ?  \n14:32\u00a0<vmassol>\u00a0yes  \n14:32\u00a0<vmassol>\u00a0I got this on oracle  \n14:32\u00a0<+tmortagne>\u00a0Denis: that's the current default ;)  \n14:32\u00a0<vmassol>\u00a0was ok on hsqldb  \n14:32\u00a0<vmassol>\u00a0but I have run it only once  \n14:33\u00a0<+Denis>\u00a0tmortagne: this is bad  \n14:33\u00a0<+tmortagne>\u00a0maybe it's the request which try to find all the modifications to send  \n14:33\u00a0<+tmortagne>\u00a0(vmassol)  \n14:33\u00a0<vmassol>\u00a0maybe  \n14:33\u00a0<vmassol>\u00a0there are no errors in the logs  \n14:35\u00a0<+tmortagne>\u00a0Denis: well the idea of the mail was to go back to not having reference resolved based on the source by default and provide a configuration to allow it from what I remember  \n14:36\u00a0<+tmortagne>\u00a0even said in my last mail  \n14:36\u00a0<+tmortagne>\u00a0\"  \n14:36\u00a0<+tmortagne>\u00a0\u00a0So you propose to get back to previous behavior by default, right ? Given the fact that it has been changed very recently maybe we should have the property false right away and say it was a mistake ?  \n14:36\u00a0<+tmortagne>\u00a0\"  \n14:36\u00a0<+tmortagne>\u00a0so for me it was ok for everyone  \n14:38\u00a0<vmassol>\u00a0ok it's a fluke  \n14:38\u00a0<silviar>\u00a0has quit  \n14:38\u00a0<vmassol>\u00a0I got the test to work on oracle too  \n14:38\u00a0<vmassol>\u00a0so it doesn't depend on the db actually  \n14:38\u00a0<+tmortagne>\u00a0are you able to make it flicker with hsqldb ?  \n14:38\u00a0<vmassol>\u00a0sburjan: so the good news is that there's only 1 test not working with oracle: the page deletion  \n14:38\u00a0<+tmortagne>\u00a0weird that this happen on mail sending  \n14:39\u00a0<vmassol>\u00a0it corectly deletes the page  \n14:39\u00a0<vmassol>\u00a0but there's no recycle bin  \n14:39\u00a0<+sburjan>\u00a0vmassol: that's good news  \n14:39\u00a0<vmassol>\u00a0it means 3 tests are failing on postgreSQL at the moment  \n14:40\u00a0<lucaa>\u00a0has quit  \n14:42\u00a0<+mflorea>\u00a0jvelociter: XWIKI-7301  \n14:43\u00a0<silviar>\u00a0has joined #xwiki  \n14:46\u00a0<lucaa>\u00a0has joined #xwiki  \n14:49\u00a0<+mflorea>\u00a0tmortagne: should I commit the temporary/partial fix for now (set the source meta data in SheetDocumentDisplayer)?  \n14:52\u00a0<+tmortagne>\u00a0mflorea: unless you want to implement the separation between source and base reference (which is not very hard) ;)  \n14:55\u00a0<+Denis>\u00a0tmortagne: Yes, I am +1 to revert this mistake  \n14:57\u00a0<lucaa>\u00a0has quit  \n14:57\u00a0<+Denis>\u00a0tmortagne: I have been really clear in my last mail of that thread, and I think I have cut it in pieces :)  \n14:58\u00a0<+tmortagne>\u00a0Denis: was only talking about about changing which property to look for base reference, not changing any behavior fo include for now  \n14:58\u00a0<+tmortagne>\u00a0but would be nice to apply vmassol proposal since from what I can see nobody was really against it, you said that you don't find the option very useful ok but that does not prevent much you don't have to use it ;)  \n14:59\u00a0<+Denis>\u00a0tmortagne: I was not favorable since it increase complexity, but I have not said ?1, just almost ?1 ;)  \n14:59\u00a0<+Denis>\u00a0tmortagne: if we do it, we should do all of it, including the link syntax  \n15:00\u00a0<+tmortagne>\u00a0it's not critical, but if we change default include behavior it's important to do it as soon as possible  \n15:00\u00a0<+Denis>\u00a0I fully agree  \n15:01\u00a0<+Denis>\u00a0no one has never been able to show me the discussion about this change that should have never happen IMO  \n15:01\u00a0<+tmortagne>\u00a0would have been nice to do right right away in 3.3 since the behavior change as been introduce in 3.2  \n15:02\u00a0<+Denis>\u00a0I agree, I though vmassol would have pursue this, I was busy on other matter and I admit that I have forgot about it  \n15:03\u00a0<+Denis>\u00a0is it too late ?  \n15:05\u00a0<+tmortagne>\u00a0I think sdumitriu already started the 3.3 release  \n15:05\u00a0<vmassol>\u00a0yes  \n15:05\u00a0<vmassol>\u00a0and 3.3 is already too late  \n15:07\u00a0<+tmortagne>\u00a0vmassol: can do what you proposed for 3.3/3.4 for 3.4/3.5  \n15:08\u00a0<vmassol>\u00a0I proposed it for 3.3/3.4? (don't rememer)  \n15:08\u00a0<vmassol>\u00a0but yes  \n15:09\u00a0<vmassol>\u00a0evalica: I like the colors on http://incubator.myxwiki.org/xwiki/bin/view/Improvements/34Proposal ;)  \n15:10\u00a0<+tmortagne>\u00a0vmassol: was a long time a ago now ;)  \n15:10\u00a0<+evalica>\u00a0:) vmassol: suppose to be a surprise - still need to finish my proposal mail - but I'm glad you like it  \n15:11\u00a0<vmassol>\u00a0tmortagne: actually I was thinking that I'd like to implement the technical space proposal for 3.4 if I get some time  \n15:11\u00a0<vmassol>\u00a0(since it's becoming more important now that we have the EM UI)  \n15:12\u00a0<vmassol>\u00a0(and I still have the UI extension stuff to do too)  \n15:12\u00a0<vmassol>\u00a0(well too many things for sure\u2026.)  \n15:12\u00a0<+tmortagne>\u00a0yea as usual too many idea and not enough peoples  \n15:14\u00a0<+tmortagne>\u00a0mflorea: so either introduce just the new property in Metadata and modify include/html renderer to use it since you don't need more in your case or only do the partial fix with a big TODO  \n15:16\u00a0<vmassol>\u00a0tmortagne: testWatchThisPageAndWholeSpace succeeds (I'm on hsqldb) but there are tons of error in the console  \n15:16\u00a0<+tmortagne>\u00a0vmassol: what errors do you get ?  \n15:17\u00a0<vmassol>\u00a0this is just one execution: http://pastebin.com/tWMNsXU7  \n15:17\u00a0<+mflorea>\u00a0tmortagne: I'll do the partial fix for now  \n15:18\u00a0<+tmortagne>\u00a0vmassol: \"Could not connect to SMTP host: 127.0.0.1, port: 3025\" so it really try to send the mails but I guess there is an issue in the way we use greenmail  \n15:19\u00a0<+tmortagne>\u00a0maybe we don't stop it properly and when you start several times the same test it fail to init greenmail the next times  \n15:19\u00a0<vmassol>\u00a0tmortagne: the test passes  \n15:19\u00a0<vmassol>\u00a0I had stopped XE  \n15:20\u00a0<vmassol>\u00a0before running it  \n15:20\u00a0<vmassol>\u00a0I ran it only once here  \n15:20\u00a0<+tmortagne>\u00a0ok that a lot of error then for one mail  \n15:20\u00a0<vmassol>\u00a0I'm just surprised it passes with so many errors  \n15:20\u00a0<+tmortagne>\u00a0it should not try to send so many of them  \n15:21\u00a0<+tmortagne>\u00a0or maybe it's the same mail but it try to send it several times and finally succeed  \n15:21\u00a0<vmassol>\u00a0maybe  \n15:21\u00a0<vmassol>\u00a0haven't debugged yet  \n15:21\u00a0<+tmortagne>\u00a0but it's a lot of tries  \n15:22\u00a0<vmassol>\u00a0btw I need to leave early this afternoon (going to the north of \u00a0France for the weekend - first christmas this weekend ;)) \u2026  \n15:22\u00a0<+tmortagne>\u00a0it does not seems to wait a bit beetween the erreors  \n15:23\u00a0<lucaa>\u00a0has joined #xwiki  \n15:27\u00a0<lucaa>\u00a0has quit  \n15:42\u00a0<lucaa>\u00a0has joined #xwiki  \n16:09\u00a0<vmassol1>\u00a0has joined #xwiki  \n16:11\u00a0<vmassol>\u00a0has quit  \n16:21\u00a0<vmassol1>\u00a0has quit  \n17:29\u00a0<question4U>\u00a0has joined #xwiki  \n17:33\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-platform-3.3\u000f \\* r5af4826\u000f \u000f/ (188 files in 188 dirs):\u000f [maven-release-plugin] prepare release xwiki-platform-3.3 - http://git.io/\\_MI2jQ  \n17:33\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-platform-3.3\u000f \\* re486862\u000f \u000f/ pom.xml :\u000f [release] Preparing release xwiki-platform-3.3 - http://git.io/oFzGoQ  \n17:48\u00a0<pgmjsd>\u00a0has joined #xwiki  \n17:50\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-enterprise-3.3\u000f \\* rc75b21e\u000f \u000f/ (40 files in 40 dirs):\u000f [maven-release-plugin] prepare release xwiki-enterprise-3.3 - http://git.io/9GXEgw  \n17:50\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-enterprise-3.3\u000f \\* r45a9b16\u000f \u000f/ pom.xml :\u000f [release] Preparing release xwiki-enterprise-3.3 - http://git.io/YyvgZw  \n18:05\u00a0<sburjan>\u00a0has quit  \n18:11\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-manager-3.3\u000f \\* r2683672\u000f \u000f/ pom.xml :\u000f [release] Preparing release xwiki-manager-3.3 - http://git.io/2Qf9nw  \n18:11\u00a0<CIA-115>\u00a0Sergiu Dumitriu\u000f xwiki-manager-3.3\u000f \\* ra8991c2\u000f \u000f/ (16 files in 16 dirs):\u000f [maven-release-plugin] prepare release xwiki-manager-3.3 - http://git.io/CX\\_r2w  \n18:22\u00a0<tmortagne>\u00a0has quit  \n18:30\u00a0<mflorea>\u00a0has quit  \n18:38\u00a0<sdumitriu>\u00a0has joined #xwiki  \n19:15\u00a0<jvdrean>\u00a0has quit  \n20:28\u00a0<Denis1>\u00a0has joined #xwiki  \n20:28\u00a0<Denis>\u00a0has quit  \n20:35\u00a0<evalica>\u00a0has quit  \n20:47\u00a0<sburjan`>\u00a0has quit  \n20:47\u00a0<sburjan`>\u00a0has joined #xwiki  \n20:49\u00a0<Enygma`>\u00a0has quit  \n21:09\u00a0<lucaa>\u00a0has quit  \n22:15\u00a0<Enygma`>\u00a0has joined #xwiki  \n22:27\u00a0<Enygma`>\u00a0has quit  \n22:36\u00a0<jvelociter>\u00a0has quit  \n22:48\u00a0<silviar>\u00a0has quit  \n23:12\u00a0<rrodriguez>\u00a0has joined #xwiki  \n\n"}